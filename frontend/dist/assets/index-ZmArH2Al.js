(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var joe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sb={exports:{}},c1={};var OB;function HL(){if(OB)return c1;OB=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(i,n,a){var c=null;if(a!==void 0&&(c=""+a),n.key!==void 0&&(c=""+n.key),"key"in n){a={};for(var s in n)s!=="key"&&(a[s]=n[s])}else a=n;return n=a.ref,{$$typeof:e,type:i,key:c,ref:n!==void 0?n:null,props:a}}return c1.Fragment=t,c1.jsx=r,c1.jsxs=r,c1}var QB;function VL(){return QB||(QB=1,sb.exports=HL()),sb.exports}var p=VL(),ab={exports:{}},yn={};var zB;function GL(){if(zB)return yn;zB=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.iterator;function N(De){return De===null||typeof De!="object"?null:(De=C&&De[C]||De["@@iterator"],typeof De=="function"?De:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,I={};function R(De,tt,ee){this.props=De,this.context=tt,this.refs=I,this.updater=ee||B}R.prototype.isReactComponent={},R.prototype.setState=function(De,tt){if(typeof De!="object"&&typeof De!="function"&&De!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,De,tt,"setState")},R.prototype.forceUpdate=function(De){this.updater.enqueueForceUpdate(this,De,"forceUpdate")};function D(){}D.prototype=R.prototype;function V(De,tt,ee){this.props=De,this.context=tt,this.refs=I,this.updater=ee||B}var G=V.prototype=new D;G.constructor=V,M(G,R.prototype),G.isPureReactComponent=!0;var Z=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},le=Object.prototype.hasOwnProperty;function ae(De,tt,ee,fe,pe,we){return ee=we.ref,{$$typeof:e,type:De,key:tt,ref:ee!==void 0?ee:null,props:we}}function ce(De,tt){return ae(De.type,tt,void 0,void 0,void 0,De.props)}function se(De){return typeof De=="object"&&De!==null&&De.$$typeof===e}function ue(De){var tt={"=":"=0",":":"=2"};return"$"+De.replace(/[=:]/g,function(ee){return tt[ee]})}var re=/\/+/g;function W(De,tt){return typeof De=="object"&&De!==null&&De.key!=null?ue(""+De.key):tt.toString(36)}function de(){}function Ee(De){switch(De.status){case"fulfilled":return De.value;case"rejected":throw De.reason;default:switch(typeof De.status=="string"?De.then(de,de):(De.status="pending",De.then(function(tt){De.status==="pending"&&(De.status="fulfilled",De.value=tt)},function(tt){De.status==="pending"&&(De.status="rejected",De.reason=tt)})),De.status){case"fulfilled":return De.value;case"rejected":throw De.reason}}throw De}function Ne(De,tt,ee,fe,pe){var we=typeof De;(we==="undefined"||we==="boolean")&&(De=null);var Le=!1;if(De===null)Le=!0;else switch(we){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(De.$$typeof){case e:case t:Le=!0;break;case x:return Le=De._init,Ne(Le(De._payload),tt,ee,fe,pe)}}if(Le)return pe=pe(De),Le=fe===""?"."+W(De,0):fe,Z(pe)?(ee="",Le!=null&&(ee=Le.replace(re,"$&/")+"/"),Ne(pe,tt,ee,"",function(gt){return gt})):pe!=null&&(se(pe)&&(pe=ce(pe,ee+(pe.key==null||De&&De.key===pe.key?"":(""+pe.key).replace(re,"$&/")+"/")+Le)),tt.push(pe)),1;Le=0;var lt=fe===""?".":fe+":";if(Z(De))for(var rt=0;rt<De.length;rt++)fe=De[rt],we=lt+W(fe,rt),Le+=Ne(fe,tt,ee,we,pe);else if(rt=N(De),typeof rt=="function")for(De=rt.call(De),rt=0;!(fe=De.next()).done;)fe=fe.value,we=lt+W(fe,rt++),Le+=Ne(fe,tt,ee,we,pe);else if(we==="object"){if(typeof De.then=="function")return Ne(Ee(De),tt,ee,fe,pe);throw tt=String(De),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(De).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return Le}function ge(De,tt,ee){if(De==null)return De;var fe=[],pe=0;return Ne(De,fe,"","",function(we){return tt.call(ee,we,pe++)}),fe}function Pe(De){if(De._status===-1){var tt=De._result;tt=tt(),tt.then(function(ee){(De._status===0||De._status===-1)&&(De._status=1,De._result=ee)},function(ee){(De._status===0||De._status===-1)&&(De._status=2,De._result=ee)}),De._status===-1&&(De._status=0,De._result=tt)}if(De._status===1)return De._result.default;throw De._result}var Ye=typeof reportError=="function"?reportError:function(De){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof De=="object"&&De!==null&&typeof De.message=="string"?String(De.message):String(De),error:De});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",De);return}console.error(De)};function Me(){}return yn.Children={map:ge,forEach:function(De,tt,ee){ge(De,function(){tt.apply(this,arguments)},ee)},count:function(De){var tt=0;return ge(De,function(){tt++}),tt},toArray:function(De){return ge(De,function(tt){return tt})||[]},only:function(De){if(!se(De))throw Error("React.Children.only expected to receive a single React element child.");return De}},yn.Component=R,yn.Fragment=r,yn.Profiler=n,yn.PureComponent=V,yn.StrictMode=i,yn.Suspense=d,yn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,yn.__COMPILER_RUNTIME={__proto__:null,c:function(De){return X.H.useMemoCache(De)}},yn.cache=function(De){return function(){return De.apply(null,arguments)}},yn.cloneElement=function(De,tt,ee){if(De==null)throw Error("The argument must be a React element, but you passed "+De+".");var fe=M({},De.props),pe=De.key,we=void 0;if(tt!=null)for(Le in tt.ref!==void 0&&(we=void 0),tt.key!==void 0&&(pe=""+tt.key),tt)!le.call(tt,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&tt.ref===void 0||(fe[Le]=tt[Le]);var Le=arguments.length-2;if(Le===1)fe.children=ee;else if(1<Le){for(var lt=Array(Le),rt=0;rt<Le;rt++)lt[rt]=arguments[rt+2];fe.children=lt}return ae(De.type,pe,void 0,void 0,we,fe)},yn.createContext=function(De){return De={$$typeof:c,_currentValue:De,_currentValue2:De,_threadCount:0,Provider:null,Consumer:null},De.Provider=De,De.Consumer={$$typeof:a,_context:De},De},yn.createElement=function(De,tt,ee){var fe,pe={},we=null;if(tt!=null)for(fe in tt.key!==void 0&&(we=""+tt.key),tt)le.call(tt,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(pe[fe]=tt[fe]);var Le=arguments.length-2;if(Le===1)pe.children=ee;else if(1<Le){for(var lt=Array(Le),rt=0;rt<Le;rt++)lt[rt]=arguments[rt+2];pe.children=lt}if(De&&De.defaultProps)for(fe in Le=De.defaultProps,Le)pe[fe]===void 0&&(pe[fe]=Le[fe]);return ae(De,we,void 0,void 0,null,pe)},yn.createRef=function(){return{current:null}},yn.forwardRef=function(De){return{$$typeof:s,render:De}},yn.isValidElement=se,yn.lazy=function(De){return{$$typeof:x,_payload:{_status:-1,_result:De},_init:Pe}},yn.memo=function(De,tt){return{$$typeof:g,type:De,compare:tt===void 0?null:tt}},yn.startTransition=function(De){var tt=X.T,ee={};X.T=ee;try{var fe=De(),pe=X.S;pe!==null&&pe(ee,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Me,Ye)}catch(we){Ye(we)}finally{X.T=tt}},yn.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},yn.use=function(De){return X.H.use(De)},yn.useActionState=function(De,tt,ee){return X.H.useActionState(De,tt,ee)},yn.useCallback=function(De,tt){return X.H.useCallback(De,tt)},yn.useContext=function(De){return X.H.useContext(De)},yn.useDebugValue=function(){},yn.useDeferredValue=function(De,tt){return X.H.useDeferredValue(De,tt)},yn.useEffect=function(De,tt,ee){var fe=X.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return fe.useEffect(De,tt)},yn.useId=function(){return X.H.useId()},yn.useImperativeHandle=function(De,tt,ee){return X.H.useImperativeHandle(De,tt,ee)},yn.useInsertionEffect=function(De,tt){return X.H.useInsertionEffect(De,tt)},yn.useLayoutEffect=function(De,tt){return X.H.useLayoutEffect(De,tt)},yn.useMemo=function(De,tt){return X.H.useMemo(De,tt)},yn.useOptimistic=function(De,tt){return X.H.useOptimistic(De,tt)},yn.useReducer=function(De,tt,ee){return X.H.useReducer(De,tt,ee)},yn.useRef=function(De){return X.H.useRef(De)},yn.useState=function(De){return X.H.useState(De)},yn.useSyncExternalStore=function(De,tt,ee){return X.H.useSyncExternalStore(De,tt,ee)},yn.useTransition=function(){return X.H.useTransition()},yn.version="19.1.1",yn}var HB;function u4(){return HB||(HB=1,ab.exports=GL()),ab.exports}var _e=u4();const On=c4(_e);var ob={exports:{}},u1={},lb={exports:{}},cb={};var VB;function qL(){return VB||(VB=1,function(e){function t(ge,Pe){var Ye=ge.length;ge.push(Pe);e:for(;0<Ye;){var Me=Ye-1>>>1,De=ge[Me];if(0<n(De,Pe))ge[Me]=Pe,ge[Ye]=De,Ye=Me;else break e}}function r(ge){return ge.length===0?null:ge[0]}function i(ge){if(ge.length===0)return null;var Pe=ge[0],Ye=ge.pop();if(Ye!==Pe){ge[0]=Ye;e:for(var Me=0,De=ge.length,tt=De>>>1;Me<tt;){var ee=2*(Me+1)-1,fe=ge[ee],pe=ee+1,we=ge[pe];if(0>n(fe,Ye))pe<De&&0>n(we,fe)?(ge[Me]=we,ge[pe]=Ye,Me=pe):(ge[Me]=fe,ge[ee]=Ye,Me=ee);else if(pe<De&&0>n(we,Ye))ge[Me]=we,ge[pe]=Ye,Me=pe;else break e}}return Pe}function n(ge,Pe){var Ye=ge.sortIndex-Pe.sortIndex;return Ye!==0?Ye:ge.id-Pe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,s=c.now();e.unstable_now=function(){return c.now()-s}}var d=[],g=[],x=1,C=null,N=3,B=!1,M=!1,I=!1,R=!1,D=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function Z(ge){for(var Pe=r(g);Pe!==null;){if(Pe.callback===null)i(g);else if(Pe.startTime<=ge)i(g),Pe.sortIndex=Pe.expirationTime,t(d,Pe);else break;Pe=r(g)}}function X(ge){if(I=!1,Z(ge),!M)if(r(d)!==null)M=!0,le||(le=!0,W());else{var Pe=r(g);Pe!==null&&Ne(X,Pe.startTime-ge)}}var le=!1,ae=-1,ce=5,se=-1;function ue(){return R?!0:!(e.unstable_now()-se<ce)}function re(){if(R=!1,le){var ge=e.unstable_now();se=ge;var Pe=!0;try{e:{M=!1,I&&(I=!1,V(ae),ae=-1),B=!0;var Ye=N;try{t:{for(Z(ge),C=r(d);C!==null&&!(C.expirationTime>ge&&ue());){var Me=C.callback;if(typeof Me=="function"){C.callback=null,N=C.priorityLevel;var De=Me(C.expirationTime<=ge);if(ge=e.unstable_now(),typeof De=="function"){C.callback=De,Z(ge),Pe=!0;break t}C===r(d)&&i(d),Z(ge)}else i(d);C=r(d)}if(C!==null)Pe=!0;else{var tt=r(g);tt!==null&&Ne(X,tt.startTime-ge),Pe=!1}}break e}finally{C=null,N=Ye,B=!1}Pe=void 0}}finally{Pe?W():le=!1}}}var W;if(typeof G=="function")W=function(){G(re)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Ee=de.port2;de.port1.onmessage=re,W=function(){Ee.postMessage(null)}}else W=function(){D(re,0)};function Ne(ge,Pe){ae=D(function(){ge(e.unstable_now())},Pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ge){ge.callback=null},e.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<ge?Math.floor(1e3/ge):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_next=function(ge){switch(N){case 1:case 2:case 3:var Pe=3;break;default:Pe=N}var Ye=N;N=Pe;try{return ge()}finally{N=Ye}},e.unstable_requestPaint=function(){R=!0},e.unstable_runWithPriority=function(ge,Pe){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Ye=N;N=ge;try{return Pe()}finally{N=Ye}},e.unstable_scheduleCallback=function(ge,Pe,Ye){var Me=e.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?Me+Ye:Me):Ye=Me,ge){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=Ye+De,ge={id:x++,callback:Pe,priorityLevel:ge,startTime:Ye,expirationTime:De,sortIndex:-1},Ye>Me?(ge.sortIndex=Ye,t(g,ge),r(d)===null&&ge===r(g)&&(I?(V(ae),ae=-1):I=!0,Ne(X,Ye-Me))):(ge.sortIndex=De,t(d,ge),M||B||(M=!0,le||(le=!0,W()))),ge},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(ge){var Pe=N;return function(){var Ye=N;N=Pe;try{return ge.apply(this,arguments)}finally{N=Ye}}}}(cb)),cb}var GB;function KL(){return GB||(GB=1,lb.exports=qL()),lb.exports}var ub={exports:{}},Uc={};var qB;function WL(){if(qB)return Uc;qB=1;var e=u4();function t(d){var g="https://react.dev/errors/"+d;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+d+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function a(d,g,x){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:C==null?null:""+C,children:d,containerInfo:g,implementation:x}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(d,g){if(d==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Uc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Uc.createPortal=function(d,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return a(d,g,null,x)},Uc.flushSync=function(d){var g=c.T,x=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=g,i.p=x,i.d.f()}},Uc.preconnect=function(d,g){typeof d=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(d,g))},Uc.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Uc.preinit=function(d,g){if(typeof d=="string"&&g&&typeof g.as=="string"){var x=g.as,C=s(x,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,B=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?i.d.S(d,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:C,integrity:N,fetchPriority:B}):x==="script"&&i.d.X(d,{crossOrigin:C,integrity:N,fetchPriority:B,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Uc.preinitModule=function(d,g){if(typeof d=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=s(g.as,g.crossOrigin);i.d.M(d,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(d)},Uc.preload=function(d,g){if(typeof d=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,C=s(x,g.crossOrigin);i.d.L(d,x,{crossOrigin:C,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Uc.preloadModule=function(d,g){if(typeof d=="string")if(g){var x=s(g.as,g.crossOrigin);i.d.m(d,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(d)},Uc.requestFormReset=function(d){i.d.r(d)},Uc.unstable_batchedUpdates=function(d,g){return d(g)},Uc.useFormState=function(d,g,x){return c.H.useFormState(d,g,x)},Uc.useFormStatus=function(){return c.H.useHostTransitionStatus()},Uc.version="19.1.1",Uc}var KB;function $L(){if(KB)return ub.exports;KB=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ub.exports=WL(),ub.exports}var WB;function XL(){if(WB)return u1;WB=1;var e=KL(),t=u4(),r=$L();function i(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function a(h){var m=h,_=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(_=m.return),h=m.return;while(h)}return m.tag===3?_:null}function c(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function s(h){if(a(h)!==h)throw Error(i(188))}function d(h){var m=h.alternate;if(!m){if(m=a(h),m===null)throw Error(i(188));return m!==h?null:h}for(var _=h,F=m;;){var j=_.return;if(j===null)break;var K=j.alternate;if(K===null){if(F=j.return,F!==null){_=F;continue}break}if(j.child===K.child){for(K=j.child;K;){if(K===_)return s(j),h;if(K===F)return s(j),m;K=K.sibling}throw Error(i(188))}if(_.return!==F.return)_=j,F=K;else{for(var be=!1,Ve=j.child;Ve;){if(Ve===_){be=!0,_=j,F=K;break}if(Ve===F){be=!0,F=j,_=K;break}Ve=Ve.sibling}if(!be){for(Ve=K.child;Ve;){if(Ve===_){be=!0,_=K,F=j;break}if(Ve===F){be=!0,F=K,_=j;break}Ve=Ve.sibling}if(!be)throw Error(i(189))}}if(_.alternate!==F)throw Error(i(190))}if(_.tag!==3)throw Error(i(188));return _.stateNode.current===_?h:m}function g(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=g(h),m!==null)return m;h=h.sibling}return null}var x=Object.assign,C=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),V=Symbol.for("react.consumer"),G=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function W(h){return h===null||typeof h!="object"?null:(h=re&&h[re]||h["@@iterator"],typeof h=="function"?h:null)}var de=Symbol.for("react.client.reference");function Ee(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===de?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case M:return"Fragment";case R:return"Profiler";case I:return"StrictMode";case X:return"Suspense";case le:return"SuspenseList";case se:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case B:return"Portal";case G:return(h.displayName||"Context")+".Provider";case V:return(h._context.displayName||"Context")+".Consumer";case Z:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case ae:return m=h.displayName||null,m!==null?m:Ee(h.type)||"Memo";case ce:m=h._payload,h=h._init;try{return Ee(h(m))}catch{}}return null}var Ne=Array.isArray,ge=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye={pending:!1,data:null,method:null,action:null},Me=[],De=-1;function tt(h){return{current:h}}function ee(h){0>De||(h.current=Me[De],Me[De]=null,De--)}function fe(h,m){De++,Me[De]=h.current,h.current=m}var pe=tt(null),we=tt(null),Le=tt(null),lt=tt(null);function rt(h,m){switch(fe(Le,m),fe(we,h),fe(pe,null),m.nodeType){case 9:case 11:h=(h=m.documentElement)&&(h=h.namespaceURI)?r1(h):0;break;default:if(h=m.tagName,m=m.namespaceURI)m=r1(m),h=Gd(m,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}ee(pe),fe(pe,h)}function gt(){ee(pe),ee(we),ee(Le)}function dt(h){h.memoizedState!==null&&fe(lt,h);var m=pe.current,_=Gd(m,h.type);m!==_&&(fe(we,h),fe(pe,_))}function qt(h){we.current===h&&(ee(pe),ee(we)),lt.current===h&&(ee(lt),E._currentValue=Ye)}var Te=Object.prototype.hasOwnProperty,at=e.unstable_scheduleCallback,kt=e.unstable_cancelCallback,ze=e.unstable_shouldYield,Et=e.unstable_requestPaint,Pt=e.unstable_now,Sr=e.unstable_getCurrentPriorityLevel,or=e.unstable_ImmediatePriority,Wr=e.unstable_UserBlockingPriority,Hr=e.unstable_NormalPriority,ti=e.unstable_LowPriority,Gr=e.unstable_IdlePriority,wi=e.log,Bi=e.unstable_setDisableYieldValue,Zr=null,Xr=null;function $r(h){if(typeof wi=="function"&&Bi(h),Xr&&typeof Xr.setStrictMode=="function")try{Xr.setStrictMode(Zr,h)}catch{}}var ot=Math.clz32?Math.clz32:Ce,xe=Math.log,ye=Math.LN2;function Ce(h){return h>>>=0,h===0?32:31-(xe(h)/ye|0)|0}var je=256,Ke=4194304;function At(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function Ft(h,m,_){var F=h.pendingLanes;if(F===0)return 0;var j=0,K=h.suspendedLanes,be=h.pingedLanes;h=h.warmLanes;var Ve=F&134217727;return Ve!==0?(F=Ve&~K,F!==0?j=At(F):(be&=Ve,be!==0?j=At(be):_||(_=Ve&~h,_!==0&&(j=At(_))))):(Ve=F&~K,Ve!==0?j=At(Ve):be!==0?j=At(be):_||(_=F&~h,_!==0&&(j=At(_)))),j===0?0:m!==0&&m!==j&&(m&K)===0&&(K=j&-j,_=m&-m,K>=_||K===32&&(_&4194048)!==0)?m:j}function vt(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function Nt(h,m){switch(h){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ht(){var h=je;return je<<=1,(je&4194048)===0&&(je=256),h}function Gt(){var h=Ke;return Ke<<=1,(Ke&62914560)===0&&(Ke=4194304),h}function Fr(h){for(var m=[],_=0;31>_;_++)m.push(h);return m}function kr(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function Bt(h,m,_,F,j,K){var be=h.pendingLanes;h.pendingLanes=_,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=_,h.entangledLanes&=_,h.errorRecoveryDisabledLanes&=_,h.shellSuspendCounter=0;var Ve=h.entanglements,bt=h.expirationTimes,zt=h.hiddenUpdates;for(_=be&~_;0<_;){var mr=31-ot(_),xr=1<<mr;Ve[mr]=0,bt[mr]=-1;var ir=zt[mr];if(ir!==null)for(zt[mr]=null,mr=0;mr<ir.length;mr++){var ar=ir[mr];ar!==null&&(ar.lane&=-536870913)}_&=~xr}F!==0&&ei(h,F,0),K!==0&&j===0&&h.tag!==0&&(h.suspendedLanes|=K&~(be&~m))}function ei(h,m,_){h.pendingLanes|=m,h.suspendedLanes&=~m;var F=31-ot(m);h.entangledLanes|=m,h.entanglements[F]=h.entanglements[F]|1073741824|_&4194090}function Yi(h,m){var _=h.entangledLanes|=m;for(h=h.entanglements;_;){var F=31-ot(_),j=1<<F;j&m|h[F]&m&&(h[F]|=m),_&=~j}}function jr(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Di(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function In(){var h=Pe.p;return h!==0?h:(h=window.event,h===void 0?32:Ct(h.type))}function Yr(h,m){var _=Pe.p;try{return Pe.p=h,m()}finally{Pe.p=_}}var on=Math.random().toString(36).slice(2),Wi="__reactFiber$"+on,mi="__reactProps$"+on,ln="__reactContainer$"+on,gi="__reactEvents$"+on,hr="__reactListeners$"+on,Re="__reactHandles$"+on,ct="__reactResources$"+on,$e="__reactMarker$"+on;function it(h){delete h[Wi],delete h[mi],delete h[gi],delete h[hr],delete h[Re]}function He(h){var m=h[Wi];if(m)return m;for(var _=h.parentNode;_;){if(m=_[ln]||_[Wi]){if(_=m.alternate,m.child!==null||_!==null&&_.child!==null)for(h=n1(h);h!==null;){if(_=h[Wi])return _;h=n1(h)}return m}h=_,_=h.parentNode}return null}function nt(h){if(h=h[Wi]||h[ln]){var m=h.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return h}return null}function It(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h.stateNode;throw Error(i(33))}function sr(h){var m=h[ct];return m||(m=h[ct]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function Qt(h){h[$e]=!0}var Xt=new Set,jt={};function _r(h,m){Mr(h,m),Mr(h+"Capture",m)}function Mr(h,m){for(jt[h]=m,h=0;h<m.length;h++)Xt.add(m[h])}var Vr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ir={},zr={};function yi(h){return Te.call(zr,h)?!0:Te.call(Ir,h)?!1:Vr.test(h)?zr[h]=!0:(Ir[h]=!0,!1)}function ki(h,m,_){if(yi(m))if(_===null)h.removeAttribute(m);else{switch(typeof _){case"undefined":case"function":case"symbol":h.removeAttribute(m);return;case"boolean":var F=m.toLowerCase().slice(0,5);if(F!=="data-"&&F!=="aria-"){h.removeAttribute(m);return}}h.setAttribute(m,""+_)}}function Ni(h,m,_){if(_===null)h.removeAttribute(m);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(m);return}h.setAttribute(m,""+_)}}function _i(h,m,_,F){if(F===null)h.removeAttribute(_);else{switch(typeof F){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(_);return}h.setAttributeNS(m,_,""+F)}}var Ga,Pa;function Da(h){if(Ga===void 0)try{throw Error()}catch(_){var m=_.stack.trim().match(/\n( *(at )?)/);Ga=m&&m[1]||"",Pa=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ga+h+Pa}var ea=!1;function xa(h,m){if(!h||ea)return"";ea=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var F={DetermineComponentFrameRoot:function(){try{if(m){var xr=function(){throw Error()};if(Object.defineProperty(xr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xr,[])}catch(ar){var ir=ar}Reflect.construct(h,[],xr)}else{try{xr.call()}catch(ar){ir=ar}h.call(xr.prototype)}}else{try{throw Error()}catch(ar){ir=ar}(xr=h())&&typeof xr.catch=="function"&&xr.catch(function(){})}}catch(ar){if(ar&&ir&&typeof ar.stack=="string")return[ar.stack,ir.stack]}return[null,null]}};F.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(F.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(F.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var K=F.DetermineComponentFrameRoot(),be=K[0],Ve=K[1];if(be&&Ve){var bt=be.split(`
`),zt=Ve.split(`
`);for(j=F=0;F<bt.length&&!bt[F].includes("DetermineComponentFrameRoot");)F++;for(;j<zt.length&&!zt[j].includes("DetermineComponentFrameRoot");)j++;if(F===bt.length||j===zt.length)for(F=bt.length-1,j=zt.length-1;1<=F&&0<=j&&bt[F]!==zt[j];)j--;for(;1<=F&&0<=j;F--,j--)if(bt[F]!==zt[j]){if(F!==1||j!==1)do if(F--,j--,0>j||bt[F]!==zt[j]){var mr=`
`+bt[F].replace(" at new "," at ");return h.displayName&&mr.includes("<anonymous>")&&(mr=mr.replace("<anonymous>",h.displayName)),mr}while(1<=F&&0<=j);break}}}finally{ea=!1,Error.prepareStackTrace=_}return(_=h?h.displayName||h.name:"")?Da(_):""}function zs(h){switch(h.tag){case 26:case 27:case 5:return Da(h.type);case 16:return Da("Lazy");case 13:return Da("Suspense");case 19:return Da("SuspenseList");case 0:case 15:return xa(h.type,!1);case 11:return xa(h.type.render,!1);case 1:return xa(h.type,!0);case 31:return Da("Activity");default:return""}}function iu(h){try{var m="";do m+=zs(h),h=h.return;while(h);return m}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function ao(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function rs(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function cA(h){var m=rs(h)?"checked":"value",_=Object.getOwnPropertyDescriptor(h.constructor.prototype,m),F=""+h[m];if(!h.hasOwnProperty(m)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var j=_.get,K=_.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return j.call(this)},set:function(be){F=""+be,K.call(this,be)}}),Object.defineProperty(h,m,{enumerable:_.enumerable}),{getValue:function(){return F},setValue:function(be){F=""+be},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function Xo(h){h._valueTracker||(h._valueTracker=cA(h))}function oh(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var _=m.getValue(),F="";return h&&(F=rs(h)?h.checked?"true":"false":h.value),h=F,h!==_?(m.setValue(h),!0):!1}function lh(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var Zo=/[\n"\\]/g;function Fn(h){return h.replace(Zo,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function Ra(h,m,_,F,j,K,be,Ve){h.name="",be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?h.type=be:h.removeAttribute("type"),m!=null?be==="number"?(m===0&&h.value===""||h.value!=m)&&(h.value=""+ao(m)):h.value!==""+ao(m)&&(h.value=""+ao(m)):be!=="submit"&&be!=="reset"||h.removeAttribute("value"),m!=null?Nh(h,be,ao(m)):_!=null?Nh(h,be,ao(_)):F!=null&&h.removeAttribute("value"),j==null&&K!=null&&(h.defaultChecked=!!K),j!=null&&(h.checked=j&&typeof j!="function"&&typeof j!="symbol"),Ve!=null&&typeof Ve!="function"&&typeof Ve!="symbol"&&typeof Ve!="boolean"?h.name=""+ao(Ve):h.removeAttribute("name")}function ch(h,m,_,F,j,K,be,Ve){if(K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(h.type=K),m!=null||_!=null){if(!(K!=="submit"&&K!=="reset"||m!=null))return;_=_!=null?""+ao(_):"",m=m!=null?""+ao(m):_,Ve||m===h.value||(h.value=m),h.defaultValue=m}F=F??j,F=typeof F!="function"&&typeof F!="symbol"&&!!F,h.checked=Ve?h.checked:!!F,h.defaultChecked=!!F,be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"&&(h.name=be)}function Nh(h,m,_){m==="number"&&lh(h.ownerDocument)===h||h.defaultValue===""+_||(h.defaultValue=""+_)}function ko(h,m,_,F){if(h=h.options,m){m={};for(var j=0;j<_.length;j++)m["$"+_[j]]=!0;for(_=0;_<h.length;_++)j=m.hasOwnProperty("$"+h[_].value),h[_].selected!==j&&(h[_].selected=j),j&&F&&(h[_].defaultSelected=!0)}else{for(_=""+ao(_),m=null,j=0;j<h.length;j++){if(h[j].value===_){h[j].selected=!0,F&&(h[j].defaultSelected=!0);return}m!==null||h[j].disabled||(m=h[j])}m!==null&&(m.selected=!0)}}function Yo(h,m,_){if(m!=null&&(m=""+ao(m),m!==h.value&&(h.value=m),_==null)){h.defaultValue!==m&&(h.defaultValue=m);return}h.defaultValue=_!=null?""+ao(_):""}function uA(h,m,_,F){if(m==null){if(F!=null){if(_!=null)throw Error(i(92));if(Ne(F)){if(1<F.length)throw Error(i(93));F=F[0]}_=F}_==null&&(_=""),m=_}_=ao(m),h.defaultValue=_,F=h.textContent,F===_&&F!==""&&F!==null&&(h.value=F)}function Jo(h,m){if(m){var _=h.firstChild;if(_&&_===h.lastChild&&_.nodeType===3){_.nodeValue=m;return}}h.textContent=m}var vc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xc(h,m,_){var F=m.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?F?h.setProperty(m,""):m==="float"?h.cssFloat="":h[m]="":F?h.setProperty(m,_):typeof _!="number"||_===0||vc.has(m)?m==="float"?h.cssFloat=_:h[m]=(""+_).trim():h[m]=_+"px"}function ya(h,m,_){if(m!=null&&typeof m!="object")throw Error(i(62));if(h=h.style,_!=null){for(var F in _)!_.hasOwnProperty(F)||m!=null&&m.hasOwnProperty(F)||(F.indexOf("--")===0?h.setProperty(F,""):F==="float"?h.cssFloat="":h[F]="");for(var j in m)F=m[j],m.hasOwnProperty(j)&&_[j]!==F&&xc(h,j,F)}else for(var K in m)m.hasOwnProperty(K)&&xc(h,K,m[K])}function $i(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Aa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function el(h){return Aa.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var Ti=null;function nu(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var qa=null,oo=null;function Ua(h){var m=nt(h);if(m&&(h=m.stateNode)){var _=h[mi]||null;e:switch(h=m.stateNode,m.type){case"input":if(Ra(h,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),m=_.name,_.type==="radio"&&m!=null){for(_=h;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+Fn(""+m)+'"][type="radio"]'),m=0;m<_.length;m++){var F=_[m];if(F!==h&&F.form===h.form){var j=F[mi]||null;if(!j)throw Error(i(90));Ra(F,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(m=0;m<_.length;m++)F=_[m],F.form===h.form&&oh(F)}break e;case"textarea":Yo(h,_.value,_.defaultValue);break e;case"select":m=_.value,m!=null&&ko(h,!!_.multiple,m,!1)}}}var li=!1;function Hs(h,m,_){if(li)return h(m,_);li=!0;try{var F=h(m);return F}finally{if(li=!1,(qa!==null||oo!==null)&&(W0(),qa&&(m=qa,h=oo,oo=qa=null,Ua(m),h)))for(m=0;m<h.length;m++)Ua(h[m])}}function ys(h,m){var _=h.stateNode;if(_===null)return null;var F=_[mi]||null;if(F===null)return null;_=F[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(h=h.type,F=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!F;break e;default:h=!1}if(h)return null;if(_&&typeof _!="function")throw Error(i(231,m,typeof _));return _}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ka=!1;if(An)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){Ka=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{Ka=!1}var Ls=null,_a=null,tl=null;function _n(){if(tl)return tl;var h,m=_a,_=m.length,F,j="value"in Ls?Ls.value:Ls.textContent,K=j.length;for(h=0;h<_&&m[h]===j[h];h++);var be=_-h;for(F=1;F<=be&&m[_-F]===j[K-F];F++);return tl=j.slice(h,1<F?1-F:void 0)}function kn(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function Ki(){return!0}function di(){return!1}function Vs(h){function m(_,F,j,K,be){this._reactName=_,this._targetInst=j,this.type=F,this.nativeEvent=K,this.target=be,this.currentTarget=null;for(var Ve in h)h.hasOwnProperty(Ve)&&(_=h[Ve],this[Ve]=_?_(K):K[Ve]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Ki:di,this.isPropagationStopped=di,this}return x(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),m}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wl=Vs(bi),_s=x({},bi,{view:0,detail:0}),$l=Vs(_s),Xl,yl,No,Io=x({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==No&&(No&&h.type==="mousemove"?(Xl=h.screenX-No.screenX,yl=h.screenY-No.screenY):yl=Xl=0,No=h),Xl)},movementY:function(h){return"movementY"in h?h.movementY:yl}}),Tu=Vs(Io),uh=x({},Io,{dataTransfer:0}),Fu=Vs(uh),ba=x({},_s,{relatedTarget:0}),Kn=Vs(ba),yc=x({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Zl=Vs(yc),Yl=x({},bi,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Y=Vs(Yl),ke=x({},bi,{data:0}),ft=Vs(ke),Tt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function br(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=lr[h])?!!m[h]:!1}function qr(){return br}var ui=x({},_s,{key:function(h){if(h.key){var m=Tt[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=kn(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Wt[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(h){return h.type==="keypress"?kn(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?kn(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Ui=Vs(ui),Hi=x({},Io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xi=Vs(Hi),Cn=x({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),Gs=Vs(Cn),Qn=x({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),fa=Vs(Qn),Ms=x({},Io,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),ja=Vs(Ms),_l=x({},bi,{newState:0,oldState:0}),rl=Vs(_l),bl=[9,13,27,32],wl=An&&"CompositionEvent"in window,Bl=null;An&&"documentMode"in document&&(Bl=document.documentMode);var wa=An&&"TextEvent"in window&&!Bl,su=An&&(!wl||Bl&&8<Bl&&11>=Bl),_c=" ",Lo=!1;function Ps(h,m){switch(h){case"keyup":return bl.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ku(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var lo=!1;function hA(h,m){switch(h){case"compositionend":return ku(m);case"keypress":return m.which!==32?null:(Lo=!0,_c);case"textInput":return h=m.data,h===_c&&Lo?null:h;default:return null}}function bc(h,m){if(lo)return h==="compositionend"||!wl&&Ps(h,m)?(h=_n(),tl=_a=Ls=null,lo=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return su&&m.locale!=="ko"?null:m.data;default:return null}}var Wa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cl(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!Wa[h.type]:m==="textarea"}function Nu(h,m,_,F){qa?oo?oo.push(F):oo=[F]:qa=F,m=Hf(m,"onChange"),0<m.length&&(_=new Wl("onChange","change",null,_,F),h.push({event:_,listeners:m}))}var au=null,Ba=null;function Iu(h){Ex(h,0)}function ou(h){var m=It(h);if(oh(m))return h}function wc(h,m){if(h==="change")return m}var Bc=!1;if(An){var co;if(An){var $a="oninput"in document;if(!$a){var uo=document.createElement("div");uo.setAttribute("oninput","return;"),$a=typeof uo.oninput=="function"}co=$a}else co=!1;Bc=co&&(!document.documentMode||9<document.documentMode)}function ho(){au&&(au.detachEvent("onpropertychange",Jl),Ba=au=null)}function Jl(h){if(h.propertyName==="value"&&ou(Ba)){var m=[];Nu(m,Ba,h,nu(h)),Hs(Iu,m)}}function ec(h,m,_){h==="focusin"?(ho(),au=m,Ba=_,au.attachEvent("onpropertychange",Jl)):h==="focusout"&&ho()}function AA(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return ou(Ba)}function hh(h,m){if(h==="click")return ou(m)}function bs(h,m){if(h==="input"||h==="change")return ou(m)}function fA(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var ws=typeof Object.is=="function"?Object.is:fA;function Xa(h,m){if(ws(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var _=Object.keys(h),F=Object.keys(m);if(_.length!==F.length)return!1;for(F=0;F<_.length;F++){var j=_[F];if(!Te.call(m,j)||!ws(h[j],m[j]))return!1}return!0}function Lu(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function lu(h,m){var _=Lu(h);h=0;for(var F;_;){if(_.nodeType===3){if(F=h+_.textContent.length,h<=m&&F>=m)return{node:_,offset:m-h};h=F}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=Lu(_)}}function Mo(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?Mo(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function Mu(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var m=lh(h.document);m instanceof h.HTMLIFrameElement;){try{var _=typeof m.contentWindow.location.href=="string"}catch{_=!1}if(_)h=m.contentWindow;else break;m=lh(h.document)}return m}function Sl(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}var Ji=An&&"documentMode"in document&&11>=document.documentMode,Po=null,tc=null,Ca=null,rc=!1;function il(h,m,_){var F=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;rc||Po==null||Po!==lh(F)||(F=Po,"selectionStart"in F&&Sl(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),Ca&&Xa(Ca,F)||(Ca=F,F=Hf(tc,"onSelect"),0<F.length&&(m=new Wl("onSelect","select",null,m,_),h.push({event:m,listeners:F}),m.target=Po)))}function Za(h,m){var _={};return _[h.toLowerCase()]=m.toLowerCase(),_["Webkit"+h]="webkit"+m,_["Moz"+h]="moz"+m,_}var pn={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},zn={},Bs={};An&&(Bs=document.createElement("div").style,"AnimationEvent"in window||(delete pn.animationend.animation,delete pn.animationiteration.animation,delete pn.animationstart.animation),"TransitionEvent"in window||delete pn.transitionend.transition);function os(h){if(zn[h])return zn[h];if(!pn[h])return h;var m=pn[h],_;for(_ in m)if(m.hasOwnProperty(_)&&_ in Bs)return zn[h]=m[_];return h}var ic=os("animationend"),cu=os("animationiteration"),Cc=os("animationstart"),Ah=os("transitionrun"),XA=os("transitionstart"),Pu=os("transitioncancel"),fh=os("transitionend"),Du=new Map,Ao="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ao.push("scrollEnd");function nl(h,m){Du.set(h,m),_r(m,[h])}var dh=new WeakMap;function fo(h,m){if(typeof h=="object"&&h!==null){var _=dh.get(h);return _!==void 0?_:(m={value:h,source:m,stack:iu(m)},dh.set(h,m),m)}return{value:h,source:m,stack:iu(m)}}var da=[],Sc=0,ph=0;function uu(){for(var h=Sc,m=ph=Sc=0;m<h;){var _=da[m];da[m++]=null;var F=da[m];da[m++]=null;var j=da[m];da[m++]=null;var K=da[m];if(da[m++]=null,F!==null&&j!==null){var be=F.pending;be===null?j.next=j:(j.next=be.next,be.next=j),F.pending=j}K!==0&&hu(_,j,K)}}function Ru(h,m,_,F){da[Sc++]=h,da[Sc++]=m,da[Sc++]=_,da[Sc++]=F,ph|=F,h.lanes|=F,h=h.alternate,h!==null&&(h.lanes|=F)}function dA(h,m,_,F){return Ru(h,m,_,F),Uu(h)}function El(h,m){return Ru(h,null,null,m),Uu(h)}function hu(h,m,_){h.lanes|=_;var F=h.alternate;F!==null&&(F.lanes|=_);for(var j=!1,K=h.return;K!==null;)K.childLanes|=_,F=K.alternate,F!==null&&(F.childLanes|=_),K.tag===22&&(h=K.stateNode,h===null||h._visibility&1||(j=!0)),h=K,K=K.return;return h.tag===3?(K=h.stateNode,j&&m!==null&&(j=31-ot(_),h=K.hiddenUpdates,F=h[j],F===null?h[j]=[m]:F.push(m),m.lane=_|536870912),K):null}function Uu(h){if(50<jd)throw jd=0,Gg=null,Error(i(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}var Ds={};function Ii(h,m,_,F){this.tag=h,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pa(h,m,_,F){return new Ii(h,m,_,F)}function Ih(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Tl(h,m){var _=h.alternate;return _===null?(_=pa(h.tag,m,h.key,h.mode),_.elementType=h.elementType,_.type=h.type,_.stateNode=h.stateNode,_.alternate=h,h.alternate=_):(_.pendingProps=m,_.type=h.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=h.flags&65011712,_.childLanes=h.childLanes,_.lanes=h.lanes,_.child=h.child,_.memoizedProps=h.memoizedProps,_.memoizedState=h.memoizedState,_.updateQueue=h.updateQueue,m=h.dependencies,_.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},_.sibling=h.sibling,_.index=h.index,_.ref=h.ref,_.refCleanup=h.refCleanup,_}function Au(h,m){h.flags&=65011714;var _=h.alternate;return _===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=_.childLanes,h.lanes=_.lanes,h.child=_.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=_.memoizedProps,h.memoizedState=_.memoizedState,h.updateQueue=_.updateQueue,h.type=_.type,m=_.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function mh(h,m,_,F,j,K){var be=0;if(F=h,typeof h=="function")Ih(h)&&(be=1);else if(typeof h=="string")be=qp(h,_,pe.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case se:return h=pa(31,_,m,j),h.elementType=se,h.lanes=K,h;case M:return Fl(_.children,j,K,m);case I:be=8,j|=24;break;case R:return h=pa(12,_,m,j|2),h.elementType=R,h.lanes=K,h;case X:return h=pa(13,_,m,j),h.elementType=X,h.lanes=K,h;case le:return h=pa(19,_,m,j),h.elementType=le,h.lanes=K,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case D:case G:be=10;break e;case V:be=9;break e;case Z:be=11;break e;case ae:be=14;break e;case ce:be=16,F=null;break e}be=29,_=Error(i(130,h===null?"null":typeof h,"")),F=null}return m=pa(be,_,m,j),m.elementType=h,m.type=F,m.lanes=K,m}function Fl(h,m,_,F){return h=pa(7,h,F,m),h.lanes=_,h}function Lh(h,m,_){return h=pa(6,h,null,m),h.lanes=_,h}function pA(h,m,_){return m=pa(4,h.children!==null?h.children:[],h.key,m),m.lanes=_,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}var Ec=[],kl=0,fu=null,gh=0,po=[],mo=0,Tc=null,Nl=1,sl="";function al(h,m){Ec[kl++]=gh,Ec[kl++]=fu,fu=h,gh=m}function mA(h,m,_){po[mo++]=Nl,po[mo++]=sl,po[mo++]=Tc,Tc=h;var F=Nl;h=sl;var j=32-ot(F)-1;F&=~(1<<j),_+=1;var K=32-ot(m)+j;if(30<K){var be=j-j%5;K=(F&(1<<be)-1).toString(32),F>>=be,j-=be,Nl=1<<32-ot(m)+j|_<<j|F,sl=K+h}else Nl=1<<K|_<<j|F,sl=h}function gA(h){h.return!==null&&(al(h,1),mA(h,1,0))}function du(h){for(;h===fu;)fu=Ec[--kl],Ec[kl]=null,gh=Ec[--kl],Ec[kl]=null;for(;h===Tc;)Tc=po[--mo],po[mo]=null,sl=po[--mo],po[mo]=null,Nl=po[--mo],po[mo]=null}var ma=null,Cs=null,mn=!1,nc=null,ol=!1,Mh=Error(i(519));function Il(h){var m=Error(i(418,""));throw Oa(fo(m,h)),Mh}function Ph(h){var m=h.stateNode,_=h.type,F=h.memoizedProps;switch(m[Wi]=h,m[mi]=F,_){case"dialog":vn("cancel",m),vn("close",m);break;case"iframe":case"object":case"embed":vn("load",m);break;case"video":case"audio":for(_=0;_<hf.length;_++)vn(hf[_],m);break;case"source":vn("error",m);break;case"img":case"image":case"link":vn("error",m),vn("load",m);break;case"details":vn("toggle",m);break;case"input":vn("invalid",m),ch(m,F.value,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name,!0),Xo(m);break;case"select":vn("invalid",m);break;case"textarea":vn("invalid",m),uA(m,F.value,F.defaultValue,F.children),Xo(m)}_=F.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||m.textContent===""+_||F.suppressHydrationWarning===!0||kx(m.textContent,_)?(F.popover!=null&&(vn("beforetoggle",m),vn("toggle",m)),F.onScroll!=null&&vn("scroll",m),F.onScrollEnd!=null&&vn("scrollend",m),F.onClick!=null&&(m.onclick=Hd),m=!0):m=!1,m||Il(h)}function Ll(h){for(ma=h.return;ma;)switch(ma.tag){case 5:case 13:ol=!1;return;case 27:case 3:ol=!0;return;default:ma=ma.return}}function Ya(h){if(h!==ma)return!1;if(!mn)return Ll(h),mn=!0,!1;var m=h.tag,_;if((_=m!==3&&m!==27)&&((_=m===5)&&(_=h.type,_=!(_!=="form"&&_!=="button")||hm(h.type,h.memoizedProps)),_=!_),_&&Cs&&Il(h),Ll(h),m===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));e:{for(h=h.nextSibling,m=0;h;){if(h.nodeType===8)if(_=h.data,_==="/$"){if(m===0){Cs=Yu(h.nextSibling);break e}m--}else _!=="$"&&_!=="$!"&&_!=="$?"||m++;h=h.nextSibling}Cs=null}}else m===27?(m=Cs,FA(h.type)?(h=fm,fm=null,Cs=h):Cs=m):Cs=ma?Yu(h.stateNode.nextSibling):null;return!0}function bn(){Cs=ma=null,mn=!1}function ju(){var h=nc;return h!==null&&(Pc===null?Pc=h:Pc.push.apply(Pc,h),nc=null),h}function Oa(h){nc===null?nc=[h]:nc.push(h)}var Ml=tt(null),qs=null,sc=null;function Do(h,m,_){fe(Ml,m._currentValue),m._currentValue=_}function go(h){h._currentValue=Ml.current,ee(Ml)}function Ou(h,m,_){for(;h!==null;){var F=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,F!==null&&(F.childLanes|=m)):F!==null&&(F.childLanes&m)!==m&&(F.childLanes|=m),h===_)break;h=h.return}}function vh(h,m,_,F){var j=h.child;for(j!==null&&(j.return=h);j!==null;){var K=j.dependencies;if(K!==null){var be=j.child;K=K.firstContext;e:for(;K!==null;){var Ve=K;K=j;for(var bt=0;bt<m.length;bt++)if(Ve.context===m[bt]){K.lanes|=_,Ve=K.alternate,Ve!==null&&(Ve.lanes|=_),Ou(K.return,_,h),F||(be=null);break e}K=Ve.next}}else if(j.tag===18){if(be=j.return,be===null)throw Error(i(341));be.lanes|=_,K=be.alternate,K!==null&&(K.lanes|=_),Ou(be,_,h),be=null}else be=j.child;if(be!==null)be.return=j;else for(be=j;be!==null;){if(be===h){be=null;break}if(j=be.sibling,j!==null){j.return=be.return,be=j;break}be=be.return}j=be}}function Qu(h,m,_,F){h=null;for(var j=m,K=!1;j!==null;){if(!K){if((j.flags&524288)!==0)K=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var be=j.alternate;if(be===null)throw Error(i(387));if(be=be.memoizedProps,be!==null){var Ve=j.type;ws(j.pendingProps.value,be.value)||(h!==null?h.push(Ve):h=[Ve])}}else if(j===lt.current){if(be=j.alternate,be===null)throw Error(i(387));be.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(h!==null?h.push(E):h=[E])}j=j.return}h!==null&&vh(m,h,_,F),m.flags|=262144}function vA(h){for(h=h.firstContext;h!==null;){if(!ws(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function Pl(h){qs=h,sc=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Ks(h){return Fc(qs,h)}function ll(h,m){return qs===null&&Pl(h),Fc(h,m)}function Fc(h,m){var _=m._currentValue;if(m={context:m,memoizedValue:_,next:null},sc===null){if(h===null)throw Error(i(308));sc=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else sc=sc.next=m;return _}var Bd=typeof AbortController<"u"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(_,F){h.push(F)}};this.abort=function(){m.aborted=!0,h.forEach(function(_){return _()})}},Lf=e.unstable_scheduleCallback,Cd=e.unstable_NormalPriority,ta={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ZA(){return{controller:new Bd,data:new Map,refCount:0}}function kc(h){h.refCount--,h.refCount===0&&Lf(Cd,function(){h.controller.abort()})}var Nc=null,Ja=0,Ro=0,ac=null;function Dl(h,m){if(Nc===null){var _=Nc=[];Ja=0,Ro=Xg(),ac={status:"pending",value:void 0,then:function(F){_.push(F)}}}return Ja++,m.then(Rl,Rl),m}function Rl(){if(--Ja===0&&Nc!==null){ac!==null&&(ac.status="fulfilled");var h=Nc;Nc=null,Ro=0,ac=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function xh(h,m){var _=[],F={status:"pending",value:null,reason:null,then:function(j){_.push(j)}};return h.then(function(){F.status="fulfilled",F.value=m;for(var j=0;j<_.length;j++)(0,_[j])(m)},function(j){for(F.status="rejected",F.reason=j,j=0;j<_.length;j++)(0,_[j])(void 0)}),F}var U=ge.S;ge.S=function(h,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Dl(h,m),U!==null&&U(h,m)};var z=tt(null);function ie(){var h=z.current;return h!==null?h:js.pooledCache}function Ae(h,m){m===null?fe(z,z.current):fe(z,m.pool)}function Ie(){var h=ie();return h===null?null:{parent:ta._currentValue,pool:h}}var Qe=Error(i(460)),qe=Error(i(474)),We=Error(i(542)),et={then:function(){}};function Ge(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Mt(){}function tr(h,m,_){switch(_=h[_],_===void 0?h.push(m):_!==m&&(m.then(Mt,Mt),m=_),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Kt(h),h;default:if(typeof m.status=="string")m.then(Mt,Mt);else{if(h=js,h!==null&&100<h.shellSuspendCounter)throw Error(i(482));h=m,h.status="pending",h.then(function(F){if(m.status==="pending"){var j=m;j.status="fulfilled",j.value=F}},function(F){if(m.status==="pending"){var j=m;j.status="rejected",j.reason=F}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Kt(h),h}throw ut=m,Qe}}var ut=null;function Ot(){if(ut===null)throw Error(i(459));var h=ut;return ut=null,h}function Kt(h){if(h===Qe||h===We)throw Error(i(483))}var cr=!1;function Rt(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ar(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function dr(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Er(h,m,_){var F=h.updateQueue;if(F===null)return null;if(F=F.shared,(As&2)!==0){var j=F.pending;return j===null?m.next=m:(m.next=j.next,j.next=m),F.pending=m,m=Uu(h),hu(h,null,_),m}return Ru(h,F,m,_),Uu(h)}function yr(h,m,_){if(m=m.updateQueue,m!==null&&(m=m.shared,(_&4194048)!==0)){var F=m.lanes;F&=h.pendingLanes,_|=F,m.lanes=_,Yi(h,_)}}function Ai(h,m){var _=h.updateQueue,F=h.alternate;if(F!==null&&(F=F.updateQueue,_===F)){var j=null,K=null;if(_=_.firstBaseUpdate,_!==null){do{var be={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};K===null?j=K=be:K=K.next=be,_=_.next}while(_!==null);K===null?j=K=m:K=K.next=m}else j=K=m;_={baseState:F.baseState,firstBaseUpdate:j,lastBaseUpdate:K,shared:F.shared,callbacks:F.callbacks},h.updateQueue=_;return}h=_.lastBaseUpdate,h===null?_.firstBaseUpdate=m:h.next=m,_.lastBaseUpdate=m}var ri=!1;function ji(){if(ri){var h=ac;if(h!==null)throw h}}function ni(h,m,_,F){ri=!1;var j=h.updateQueue;cr=!1;var K=j.firstBaseUpdate,be=j.lastBaseUpdate,Ve=j.shared.pending;if(Ve!==null){j.shared.pending=null;var bt=Ve,zt=bt.next;bt.next=null,be===null?K=zt:be.next=zt,be=bt;var mr=h.alternate;mr!==null&&(mr=mr.updateQueue,Ve=mr.lastBaseUpdate,Ve!==be&&(Ve===null?mr.firstBaseUpdate=zt:Ve.next=zt,mr.lastBaseUpdate=bt))}if(K!==null){var xr=j.baseState;be=0,mr=zt=bt=null,Ve=K;do{var ir=Ve.lane&-536870913,ar=ir!==Ve.lane;if(ar?(gn&ir)===ir:(F&ir)===ir){ir!==0&&ir===Ro&&(ri=!0),mr!==null&&(mr=mr.next={lane:0,tag:Ve.tag,payload:Ve.payload,callback:null,next:null});e:{var Ri=h,Ei=Ve;ir=m;var Hn=_;switch(Ei.tag){case 1:if(Ri=Ei.payload,typeof Ri=="function"){xr=Ri.call(Hn,xr,ir);break e}xr=Ri;break e;case 3:Ri.flags=Ri.flags&-65537|128;case 0:if(Ri=Ei.payload,ir=typeof Ri=="function"?Ri.call(Hn,xr,ir):Ri,ir==null)break e;xr=x({},xr,ir);break e;case 2:cr=!0}}ir=Ve.callback,ir!==null&&(h.flags|=64,ar&&(h.flags|=8192),ar=j.callbacks,ar===null?j.callbacks=[ir]:ar.push(ir))}else ar={lane:ir,tag:Ve.tag,payload:Ve.payload,callback:Ve.callback,next:null},mr===null?(zt=mr=ar,bt=xr):mr=mr.next=ar,be|=ir;if(Ve=Ve.next,Ve===null){if(Ve=j.shared.pending,Ve===null)break;ar=Ve,Ve=ar.next,ar.next=null,j.lastBaseUpdate=ar,j.shared.pending=null}}while(!0);mr===null&&(bt=xr),j.baseState=bt,j.firstBaseUpdate=zt,j.lastBaseUpdate=mr,K===null&&(j.shared.lanes=0),$u|=be,h.lanes=be,h.memoizedState=xr}}function cn(h,m){if(typeof h!="function")throw Error(i(191,h));h.call(m)}function Ws(h,m){var _=h.callbacks;if(_!==null)for(h.callbacks=null,h=0;h<_.length;h++)cn(_[h],m)}var zi=tt(null),oi=tt(0);function Or(h,m){h=BA,fe(oi,h),fe(zi,m),BA=h|m.baseLanes}function Li(){fe(oi,BA),fe(zi,zi.current)}function Vi(){BA=oi.current,ee(zi),ee(oi)}var qi=0,si=null,Gi=null,nn=null,is=!1,Ss=!1,Rn=!1,ls=0,Tr=0,Dr=null,Yn=0;function Mi(){throw Error(i(321))}function Rs(h,m){if(m===null)return!1;for(var _=0;_<m.length&&_<h.length;_++)if(!ws(h[_],m[_]))return!1;return!0}function Jn(h,m,_,F,j,K){return qi=K,si=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,ge.H=h===null||h.memoizedState===null?yh:Ic,Rn=!1,K=_(F,j),Rn=!1,Ss&&(K=cs(m,_,F,j)),Es(h),K}function Es(h){ge.H=eo;var m=Gi!==null&&Gi.next!==null;if(qi=0,nn=Gi=si=null,is=!1,Tr=0,Dr=null,m)throw Error(i(300));h===null||xo||(h=h.dependencies,h!==null&&vA(h)&&(xo=!0))}function cs(h,m,_,F){si=h;var j=0;do{if(Ss&&(Dr=null),Tr=0,Ss=!1,25<=j)throw Error(i(301));if(j+=1,nn=Gi=null,h.updateQueue!=null){var K=h.updateQueue;K.lastEffect=null,K.events=null,K.stores=null,K.memoCache!=null&&(K.memoCache.index=0)}ge.H=Rh,K=m(_,F)}while(Ss);return K}function Sn(){var h=ge.H,m=h.useState()[0];return m=typeof m.then=="function"?ps(m):m,h=h.useState()[0],(Gi!==null?Gi.memoizedState:null)!==h&&(si.flags|=1024),m}function $s(){var h=ls!==0;return ls=0,h}function vo(h,m,_){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~_}function Qa(h){if(is){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}is=!1}qi=0,nn=Gi=si=null,Ss=!1,Tr=ls=0,Dr=null}function Ln(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?si.memoizedState=nn=h:nn=nn.next=h,nn}function vi(){if(Gi===null){var h=si.alternate;h=h!==null?h.memoizedState:null}else h=Gi.next;var m=nn===null?si.memoizedState:nn.next;if(m!==null)nn=m,Gi=h;else{if(h===null)throw si.alternate===null?Error(i(467)):Error(i(310));Gi=h,h={memoizedState:Gi.memoizedState,baseState:Gi.baseState,baseQueue:Gi.baseQueue,queue:Gi.queue,next:null},nn===null?si.memoizedState=nn=h:nn=nn.next=h}return nn}function un(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ps(h){var m=Tr;return Tr+=1,Dr===null&&(Dr=[]),h=tr(Dr,h,m),m=si,(nn===null?m.memoizedState:nn.next)===null&&(m=m.alternate,ge.H=m===null||m.memoizedState===null?yh:Ic),h}function wn(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return ps(h);if(h.$$typeof===G)return Ks(h)}throw Error(i(438,String(h)))}function ra(h){var m=null,_=si.updateQueue;if(_!==null&&(m=_.memoCache),m==null){var F=si.alternate;F!==null&&(F=F.updateQueue,F!==null&&(F=F.memoCache,F!=null&&(m={data:F.data.map(function(j){return j.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),_===null&&(_=un(),si.updateQueue=_),_.memoCache=m,_=m.data[m.index],_===void 0)for(_=m.data[m.index]=Array(h),F=0;F<h;F++)_[F]=ue;return m.index++,_}function Us(h,m){return typeof m=="function"?m(h):m}function Uo(h){var m=vi();return cl(m,Gi,h)}function cl(h,m,_){var F=h.queue;if(F===null)throw Error(i(311));F.lastRenderedReducer=_;var j=h.baseQueue,K=F.pending;if(K!==null){if(j!==null){var be=j.next;j.next=K.next,K.next=be}m.baseQueue=j=K,F.pending=null}if(K=h.baseState,j===null)h.memoizedState=K;else{m=j.next;var Ve=be=null,bt=null,zt=m,mr=!1;do{var xr=zt.lane&-536870913;if(xr!==zt.lane?(gn&xr)===xr:(qi&xr)===xr){var ir=zt.revertLane;if(ir===0)bt!==null&&(bt=bt.next={lane:0,revertLane:0,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null}),xr===Ro&&(mr=!0);else if((qi&ir)===ir){zt=zt.next,ir===Ro&&(mr=!0);continue}else xr={lane:0,revertLane:zt.revertLane,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null},bt===null?(Ve=bt=xr,be=K):bt=bt.next=xr,si.lanes|=ir,$u|=ir;xr=zt.action,Rn&&_(K,xr),K=zt.hasEagerState?zt.eagerState:_(K,xr)}else ir={lane:xr,revertLane:zt.revertLane,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null},bt===null?(Ve=bt=ir,be=K):bt=bt.next=ir,si.lanes|=xr,$u|=xr;zt=zt.next}while(zt!==null&&zt!==m);if(bt===null?be=K:bt.next=Ve,!ws(K,h.memoizedState)&&(xo=!0,mr&&(_=ac,_!==null)))throw _;h.memoizedState=K,h.baseState=be,h.baseQueue=bt,F.lastRenderedState=K}return j===null&&(F.lanes=0),[h.memoizedState,F.dispatch]}function ns(h){var m=vi(),_=m.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=h;var F=_.dispatch,j=_.pending,K=m.memoizedState;if(j!==null){_.pending=null;var be=j=j.next;do K=h(K,be.action),be=be.next;while(be!==j);ws(K,m.memoizedState)||(xo=!0),m.memoizedState=K,m.baseQueue===null&&(m.baseState=K),_.lastRenderedState=K}return[K,F]}function oc(h,m,_){var F=si,j=vi(),K=mn;if(K){if(_===void 0)throw Error(i(407));_=_()}else _=m();var be=!ws((Gi||j).memoizedState,_);be&&(j.memoizedState=_,xo=!0),j=j.queue;var Ve=Ul.bind(null,F,j,h);if(Je(2048,8,Ve,[h]),j.getSnapshot!==m||be||nn!==null&&nn.memoizedState.tag&1){if(F.flags|=2048,he(9,Se(),zu.bind(null,F,j,_,m),null),js===null)throw Error(i(349));K||(qi&124)!==0||Dh(F,m,_)}return _}function Dh(h,m,_){h.flags|=16384,h={getSnapshot:m,value:_},m=si.updateQueue,m===null?(m=un(),si.updateQueue=m,m.stores=[h]):(_=m.stores,_===null?m.stores=[h]:_.push(h))}function zu(h,m,_,F){m.value=_,m.getSnapshot=F,YA(m)&&JA(h)}function Ul(h,m,_){return _(function(){YA(m)&&JA(h)})}function YA(h){var m=h.getSnapshot;h=h.value;try{var _=m();return!ws(h,_)}catch{return!0}}function JA(h){var m=El(h,2);m!==null&&Dc(m,h,2)}function Hu(h){var m=Ln();if(typeof h=="function"){var _=h;if(h=_(),Rn){$r(!0);try{_()}finally{$r(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:h},m}function lc(h,m,_,F){return h.baseState=_,cl(h,Gi,typeof F=="function"?F:Us)}function S(h,m,_,F,j){if(Sa(h))throw Error(i(485));if(h=m.action,h!==null){var K={payload:j,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(be){K.listeners.push(be)}};ge.T!==null?_(!0):K.isTransition=!1,F(K),_=m.pending,_===null?(K.next=m.pending=K,o(m,K)):(K.next=_.next,m.pending=_.next=K)}}function o(h,m){var _=m.action,F=m.payload,j=h.state;if(m.isTransition){var K=ge.T,be={};ge.T=be;try{var Ve=_(j,F),bt=ge.S;bt!==null&&bt(be,Ve),f(h,m,Ve)}catch(zt){w(h,m,zt)}finally{ge.T=K}}else try{K=_(j,F),f(h,m,K)}catch(zt){w(h,m,zt)}}function f(h,m,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(F){y(h,m,F)},function(F){return w(h,m,F)}):y(h,m,_)}function y(h,m,_){m.status="fulfilled",m.value=_,T(m),h.state=_,m=h.pending,m!==null&&(_=m.next,_===m?h.pending=null:(_=_.next,m.next=_,o(h,_)))}function w(h,m,_){var F=h.pending;if(h.pending=null,F!==null){F=F.next;do m.status="rejected",m.reason=_,T(m),m=m.next;while(m!==F)}h.action=null}function T(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function L(h,m){return m}function O(h,m){if(mn){var _=js.formState;if(_!==null){e:{var F=si;if(mn){if(Cs){t:{for(var j=Cs,K=ol;j.nodeType!==8;){if(!K){j=null;break t}if(j=Yu(j.nextSibling),j===null){j=null;break t}}K=j.data,j=K==="F!"||K==="F"?j:null}if(j){Cs=Yu(j.nextSibling),F=j.data==="F!";break e}}Il(F)}F=!1}F&&(m=_[0])}}return _=Ln(),_.memoizedState=_.baseState=m,F={pending:null,lanes:0,dispatch:null,lastRenderedReducer:L,lastRenderedState:m},_.queue=F,_=as.bind(null,si,F),F.dispatch=_,F=Hu(!1),K=us.bind(null,si,!1,F.queue),F=Ln(),j={state:m,dispatch:null,action:h,pending:null},F.queue=j,_=S.bind(null,si,j,K,_),j.dispatch=_,F.memoizedState=h,[m,_,!1]}function H(h){var m=vi();return te(m,Gi,h)}function te(h,m,_){if(m=cl(h,m,L)[0],h=Uo(Us)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var F=ps(m)}catch(be){throw be===Qe?We:be}else F=m;m=vi();var j=m.queue,K=j.dispatch;return _!==m.memoizedState&&(si.flags|=2048,he(9,Se(),ne.bind(null,j,_),null)),[F,K,h]}function ne(h,m){h.action=m}function me(h){var m=vi(),_=Gi;if(_!==null)return te(m,_,h);vi(),m=m.memoizedState,_=vi();var F=_.queue.dispatch;return _.memoizedState=h,[m,F,!1]}function he(h,m,_,F){return h={tag:h,create:_,deps:F,inst:m,next:null},m=si.updateQueue,m===null&&(m=un(),si.updateQueue=m),_=m.lastEffect,_===null?m.lastEffect=h.next=h:(F=_.next,_.next=h,h.next=F,m.lastEffect=h),h}function Se(){return{destroy:void 0,resource:void 0}}function Ue(){return vi().memoizedState}function Xe(h,m,_,F){var j=Ln();F=F===void 0?null:F,si.flags|=h,j.memoizedState=he(1|m,Se(),_,F)}function Je(h,m,_,F){var j=vi();F=F===void 0?null:F;var K=j.memoizedState.inst;Gi!==null&&F!==null&&Rs(F,Gi.memoizedState.deps)?j.memoizedState=he(m,K,_,F):(si.flags|=h,j.memoizedState=he(1|m,K,_,F))}function st(h,m){Xe(8390656,8,h,m)}function pt(h,m){Je(2048,8,h,m)}function xt(h,m){return Je(4,2,h,m)}function mt(h,m){return Je(4,4,h,m)}function wt(h,m){if(typeof m=="function"){h=h();var _=m(h);return function(){typeof _=="function"?_():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function St(h,m,_){_=_!=null?_.concat([h]):null,Je(4,4,wt.bind(null,m,h),_)}function yt(){}function Lt(h,m){var _=vi();m=m===void 0?null:m;var F=_.memoizedState;return m!==null&&Rs(m,F[1])?F[0]:(_.memoizedState=[h,m],h)}function rr(h,m){var _=vi();m=m===void 0?null:m;var F=_.memoizedState;if(m!==null&&Rs(m,F[1]))return F[0];if(F=h(),Rn){$r(!0);try{h()}finally{$r(!1)}}return _.memoizedState=[F,m],F}function $t(h,m,_){return _===void 0||(qi&1073741824)!==0?h.memoizedState=m:(h.memoizedState=_,h=Ax(),si.lanes|=h,$u|=h,_)}function Zt(h,m,_,F){return ws(_,m)?_:zi.current!==null?(h=$t(h,_,F),ws(h,m)||(xo=!0),h):(qi&42)===0?(xo=!0,h.memoizedState=_):(h=Ax(),si.lanes|=h,$u|=h,m)}function Yt(h,m,_,F,j){var K=Pe.p;Pe.p=K!==0&&8>K?K:8;var be=ge.T,Ve={};ge.T=Ve,us(h,!1,m,_);try{var bt=j(),zt=ge.S;if(zt!==null&&zt(Ve,bt),bt!==null&&typeof bt=="object"&&typeof bt.then=="function"){var mr=xh(bt,F);tn(h,m,mr,Hl(h))}else tn(h,m,F,Hl(h))}catch(xr){tn(h,m,{then:function(){},status:"rejected",reason:xr},Hl())}finally{Pe.p=K,ge.T=be}}function wr(){}function Br(h,m,_,F){if(h.tag!==5)throw Error(i(476));var j=pr(h).queue;Yt(h,j,m,Ye,_===null?wr:function(){return Kr(h),_(F)})}function pr(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:Ye,baseState:Ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:Ye},next:null};var _={};return m.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:_},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function Kr(h){var m=pr(h).next.queue;tn(h,m,{},Hl())}function Ci(){return Ks(E)}function En(){return vi().memoizedState}function Nn(){return vi().memoizedState}function Mn(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var _=Hl();h=dr(_);var F=Er(m,h,_);F!==null&&(Dc(F,m,_),yr(F,m,_)),m={cache:ZA()},h.payload=m;return}m=m.return}}function ss(h,m,_){var F=Hl();_={lane:F,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null},Sa(h)?ia(m,_):(_=dA(h,m,_,F),_!==null&&(Dc(_,h,F),na(_,m,F)))}function as(h,m,_){var F=Hl();tn(h,m,_,F)}function tn(h,m,_,F){var j={lane:F,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null};if(Sa(h))ia(m,j);else{var K=h.alternate;if(h.lanes===0&&(K===null||K.lanes===0)&&(K=m.lastRenderedReducer,K!==null))try{var be=m.lastRenderedState,Ve=K(be,_);if(j.hasEagerState=!0,j.eagerState=Ve,ws(Ve,be))return Ru(h,m,j,0),js===null&&uu(),!1}catch{}finally{}if(_=dA(h,m,j,F),_!==null)return Dc(_,h,F),na(_,m,F),!0}return!1}function us(h,m,_,F){if(F={lane:2,revertLane:Xg(),action:F,hasEagerState:!1,eagerState:null,next:null},Sa(h)){if(m)throw Error(i(479))}else m=dA(h,_,F,2),m!==null&&Dc(m,h,2)}function Sa(h){var m=h.alternate;return h===si||m!==null&&m===si}function ia(h,m){Ss=is=!0;var _=h.pending;_===null?m.next=m:(m.next=_.next,_.next=m),h.pending=m}function na(h,m,_){if((_&4194048)!==0){var F=m.lanes;F&=h.pendingLanes,_|=F,m.lanes=_,Yi(h,_)}}var eo={readContext:Ks,use:wn,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useLayoutEffect:Mi,useInsertionEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useSyncExternalStore:Mi,useId:Mi,useHostTransitionStatus:Mi,useFormState:Mi,useActionState:Mi,useOptimistic:Mi,useMemoCache:Mi,useCacheRefresh:Mi},yh={readContext:Ks,use:wn,useCallback:function(h,m){return Ln().memoizedState=[h,m===void 0?null:m],h},useContext:Ks,useEffect:st,useImperativeHandle:function(h,m,_){_=_!=null?_.concat([h]):null,Xe(4194308,4,wt.bind(null,m,h),_)},useLayoutEffect:function(h,m){return Xe(4194308,4,h,m)},useInsertionEffect:function(h,m){Xe(4,2,h,m)},useMemo:function(h,m){var _=Ln();m=m===void 0?null:m;var F=h();if(Rn){$r(!0);try{h()}finally{$r(!1)}}return _.memoizedState=[F,m],F},useReducer:function(h,m,_){var F=Ln();if(_!==void 0){var j=_(m);if(Rn){$r(!0);try{_(m)}finally{$r(!1)}}}else j=m;return F.memoizedState=F.baseState=j,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:j},F.queue=h,h=h.dispatch=ss.bind(null,si,h),[F.memoizedState,h]},useRef:function(h){var m=Ln();return h={current:h},m.memoizedState=h},useState:function(h){h=Hu(h);var m=h.queue,_=as.bind(null,si,m);return m.dispatch=_,[h.memoizedState,_]},useDebugValue:yt,useDeferredValue:function(h,m){var _=Ln();return $t(_,h,m)},useTransition:function(){var h=Hu(!1);return h=Yt.bind(null,si,h.queue,!0,!1),Ln().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,_){var F=si,j=Ln();if(mn){if(_===void 0)throw Error(i(407));_=_()}else{if(_=m(),js===null)throw Error(i(349));(gn&124)!==0||Dh(F,m,_)}j.memoizedState=_;var K={value:_,getSnapshot:m};return j.queue=K,st(Ul.bind(null,F,K,h),[h]),F.flags|=2048,he(9,Se(),zu.bind(null,F,K,_,m),null),_},useId:function(){var h=Ln(),m=js.identifierPrefix;if(mn){var _=sl,F=Nl;_=(F&~(1<<32-ot(F)-1)).toString(32)+_,m=""+m+"R"+_,_=ls++,0<_&&(m+="H"+_.toString(32)),m+=""}else _=Yn++,m=""+m+"r"+_.toString(32)+"";return h.memoizedState=m},useHostTransitionStatus:Ci,useFormState:O,useActionState:O,useOptimistic:function(h){var m=Ln();m.memoizedState=m.baseState=h;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=_,m=us.bind(null,si,!0,_),_.dispatch=m,[h,m]},useMemoCache:ra,useCacheRefresh:function(){return Ln().memoizedState=Mn.bind(null,si)}},Ic={readContext:Ks,use:wn,useCallback:Lt,useContext:Ks,useEffect:pt,useImperativeHandle:St,useInsertionEffect:xt,useLayoutEffect:mt,useMemo:rr,useReducer:Uo,useRef:Ue,useState:function(){return Uo(Us)},useDebugValue:yt,useDeferredValue:function(h,m){var _=vi();return Zt(_,Gi.memoizedState,h,m)},useTransition:function(){var h=Uo(Us)[0],m=vi().memoizedState;return[typeof h=="boolean"?h:ps(h),m]},useSyncExternalStore:oc,useId:En,useHostTransitionStatus:Ci,useFormState:H,useActionState:H,useOptimistic:function(h,m){var _=vi();return lc(_,Gi,h,m)},useMemoCache:ra,useCacheRefresh:Nn},Rh={readContext:Ks,use:wn,useCallback:Lt,useContext:Ks,useEffect:pt,useImperativeHandle:St,useInsertionEffect:xt,useLayoutEffect:mt,useMemo:rr,useReducer:ns,useRef:Ue,useState:function(){return ns(Us)},useDebugValue:yt,useDeferredValue:function(h,m){var _=vi();return Gi===null?$t(_,h,m):Zt(_,Gi.memoizedState,h,m)},useTransition:function(){var h=ns(Us)[0],m=vi().memoizedState;return[typeof h=="boolean"?h:ps(h),m]},useSyncExternalStore:oc,useId:En,useHostTransitionStatus:Ci,useFormState:me,useActionState:me,useOptimistic:function(h,m){var _=vi();return Gi!==null?lc(_,Gi,h,m):(_.baseState=h,[h,_.queue.dispatch])},useMemoCache:ra,useCacheRefresh:Nn},Lc=null,Uh=0;function _h(h){var m=Uh;return Uh+=1,Lc===null&&(Lc=[]),tr(Lc,h,m)}function cc(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function jo(h,m){throw m.$$typeof===C?Error(i(525)):(h=Object.prototype.toString.call(m),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function pu(h){var m=h._init;return m(h._payload)}function mu(h){function m(Vt,Dt){if(h){var er=Vt.deletions;er===null?(Vt.deletions=[Dt],Vt.flags|=16):er.push(Dt)}}function _(Vt,Dt){if(!h)return null;for(;Dt!==null;)m(Vt,Dt),Dt=Dt.sibling;return null}function F(Vt){for(var Dt=new Map;Vt!==null;)Vt.key!==null?Dt.set(Vt.key,Vt):Dt.set(Vt.index,Vt),Vt=Vt.sibling;return Dt}function j(Vt,Dt){return Vt=Tl(Vt,Dt),Vt.index=0,Vt.sibling=null,Vt}function K(Vt,Dt,er){return Vt.index=er,h?(er=Vt.alternate,er!==null?(er=er.index,er<Dt?(Vt.flags|=67108866,Dt):er):(Vt.flags|=67108866,Dt)):(Vt.flags|=1048576,Dt)}function be(Vt){return h&&Vt.alternate===null&&(Vt.flags|=67108866),Vt}function Ve(Vt,Dt,er,vr){return Dt===null||Dt.tag!==6?(Dt=Lh(er,Vt.mode,vr),Dt.return=Vt,Dt):(Dt=j(Dt,er),Dt.return=Vt,Dt)}function bt(Vt,Dt,er,vr){var fi=er.type;return fi===M?mr(Vt,Dt,er.props.children,vr,er.key):Dt!==null&&(Dt.elementType===fi||typeof fi=="object"&&fi!==null&&fi.$$typeof===ce&&pu(fi)===Dt.type)?(Dt=j(Dt,er.props),cc(Dt,er),Dt.return=Vt,Dt):(Dt=mh(er.type,er.key,er.props,null,Vt.mode,vr),cc(Dt,er),Dt.return=Vt,Dt)}function zt(Vt,Dt,er,vr){return Dt===null||Dt.tag!==4||Dt.stateNode.containerInfo!==er.containerInfo||Dt.stateNode.implementation!==er.implementation?(Dt=pA(er,Vt.mode,vr),Dt.return=Vt,Dt):(Dt=j(Dt,er.children||[]),Dt.return=Vt,Dt)}function mr(Vt,Dt,er,vr,fi){return Dt===null||Dt.tag!==7?(Dt=Fl(er,Vt.mode,vr,fi),Dt.return=Vt,Dt):(Dt=j(Dt,er),Dt.return=Vt,Dt)}function xr(Vt,Dt,er){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return Dt=Lh(""+Dt,Vt.mode,er),Dt.return=Vt,Dt;if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case N:return er=mh(Dt.type,Dt.key,Dt.props,null,Vt.mode,er),cc(er,Dt),er.return=Vt,er;case B:return Dt=pA(Dt,Vt.mode,er),Dt.return=Vt,Dt;case ce:var vr=Dt._init;return Dt=vr(Dt._payload),xr(Vt,Dt,er)}if(Ne(Dt)||W(Dt))return Dt=Fl(Dt,Vt.mode,er,null),Dt.return=Vt,Dt;if(typeof Dt.then=="function")return xr(Vt,_h(Dt),er);if(Dt.$$typeof===G)return xr(Vt,ll(Vt,Dt),er);jo(Vt,Dt)}return null}function ir(Vt,Dt,er,vr){var fi=Dt!==null?Dt.key:null;if(typeof er=="string"&&er!==""||typeof er=="number"||typeof er=="bigint")return fi!==null?null:Ve(Vt,Dt,""+er,vr);if(typeof er=="object"&&er!==null){switch(er.$$typeof){case N:return er.key===fi?bt(Vt,Dt,er,vr):null;case B:return er.key===fi?zt(Vt,Dt,er,vr):null;case ce:return fi=er._init,er=fi(er._payload),ir(Vt,Dt,er,vr)}if(Ne(er)||W(er))return fi!==null?null:mr(Vt,Dt,er,vr,null);if(typeof er.then=="function")return ir(Vt,Dt,_h(er),vr);if(er.$$typeof===G)return ir(Vt,Dt,ll(Vt,er),vr);jo(Vt,er)}return null}function ar(Vt,Dt,er,vr,fi){if(typeof vr=="string"&&vr!==""||typeof vr=="number"||typeof vr=="bigint")return Vt=Vt.get(er)||null,Ve(Dt,Vt,""+vr,fi);if(typeof vr=="object"&&vr!==null){switch(vr.$$typeof){case N:return Vt=Vt.get(vr.key===null?er:vr.key)||null,bt(Dt,Vt,vr,fi);case B:return Vt=Vt.get(vr.key===null?er:vr.key)||null,zt(Dt,Vt,vr,fi);case ce:var xn=vr._init;return vr=xn(vr._payload),ar(Vt,Dt,er,vr,fi)}if(Ne(vr)||W(vr))return Vt=Vt.get(er)||null,mr(Dt,Vt,vr,fi,null);if(typeof vr.then=="function")return ar(Vt,Dt,er,_h(vr),fi);if(vr.$$typeof===G)return ar(Vt,Dt,er,ll(Dt,vr),fi);jo(Dt,vr)}return null}function Ri(Vt,Dt,er,vr){for(var fi=null,xn=null,xi=Dt,Oi=Dt=0,Os=null;xi!==null&&Oi<er.length;Oi++){xi.index>Oi?(Os=xi,xi=null):Os=xi.sibling;var Vn=ir(Vt,xi,er[Oi],vr);if(Vn===null){xi===null&&(xi=Os);break}h&&xi&&Vn.alternate===null&&m(Vt,xi),Dt=K(Vn,Dt,Oi),xn===null?fi=Vn:xn.sibling=Vn,xn=Vn,xi=Os}if(Oi===er.length)return _(Vt,xi),mn&&al(Vt,Oi),fi;if(xi===null){for(;Oi<er.length;Oi++)xi=xr(Vt,er[Oi],vr),xi!==null&&(Dt=K(xi,Dt,Oi),xn===null?fi=xi:xn.sibling=xi,xn=xi);return mn&&al(Vt,Oi),fi}for(xi=F(xi);Oi<er.length;Oi++)Os=ar(xi,Vt,Oi,er[Oi],vr),Os!==null&&(h&&Os.alternate!==null&&xi.delete(Os.key===null?Oi:Os.key),Dt=K(Os,Dt,Oi),xn===null?fi=Os:xn.sibling=Os,xn=Os);return h&&xi.forEach(function(NA){return m(Vt,NA)}),mn&&al(Vt,Oi),fi}function Ei(Vt,Dt,er,vr){if(er==null)throw Error(i(151));for(var fi=null,xn=null,xi=Dt,Oi=Dt=0,Os=null,Vn=er.next();xi!==null&&!Vn.done;Oi++,Vn=er.next()){xi.index>Oi?(Os=xi,xi=null):Os=xi.sibling;var NA=ir(Vt,xi,Vn.value,vr);if(NA===null){xi===null&&(xi=Os);break}h&&xi&&NA.alternate===null&&m(Vt,xi),Dt=K(NA,Dt,Oi),xn===null?fi=NA:xn.sibling=NA,xn=NA,xi=Os}if(Vn.done)return _(Vt,xi),mn&&al(Vt,Oi),fi;if(xi===null){for(;!Vn.done;Oi++,Vn=er.next())Vn=xr(Vt,Vn.value,vr),Vn!==null&&(Dt=K(Vn,Dt,Oi),xn===null?fi=Vn:xn.sibling=Vn,xn=Vn);return mn&&al(Vt,Oi),fi}for(xi=F(xi);!Vn.done;Oi++,Vn=er.next())Vn=ar(xi,Vt,Oi,Vn.value,vr),Vn!==null&&(h&&Vn.alternate!==null&&xi.delete(Vn.key===null?Oi:Vn.key),Dt=K(Vn,Dt,Oi),xn===null?fi=Vn:xn.sibling=Vn,xn=Vn);return h&&xi.forEach(function(nb){return m(Vt,nb)}),mn&&al(Vt,Oi),fi}function Hn(Vt,Dt,er,vr){if(typeof er=="object"&&er!==null&&er.type===M&&er.key===null&&(er=er.props.children),typeof er=="object"&&er!==null){switch(er.$$typeof){case N:e:{for(var fi=er.key;Dt!==null;){if(Dt.key===fi){if(fi=er.type,fi===M){if(Dt.tag===7){_(Vt,Dt.sibling),vr=j(Dt,er.props.children),vr.return=Vt,Vt=vr;break e}}else if(Dt.elementType===fi||typeof fi=="object"&&fi!==null&&fi.$$typeof===ce&&pu(fi)===Dt.type){_(Vt,Dt.sibling),vr=j(Dt,er.props),cc(vr,er),vr.return=Vt,Vt=vr;break e}_(Vt,Dt);break}else m(Vt,Dt);Dt=Dt.sibling}er.type===M?(vr=Fl(er.props.children,Vt.mode,vr,er.key),vr.return=Vt,Vt=vr):(vr=mh(er.type,er.key,er.props,null,Vt.mode,vr),cc(vr,er),vr.return=Vt,Vt=vr)}return be(Vt);case B:e:{for(fi=er.key;Dt!==null;){if(Dt.key===fi)if(Dt.tag===4&&Dt.stateNode.containerInfo===er.containerInfo&&Dt.stateNode.implementation===er.implementation){_(Vt,Dt.sibling),vr=j(Dt,er.children||[]),vr.return=Vt,Vt=vr;break e}else{_(Vt,Dt);break}else m(Vt,Dt);Dt=Dt.sibling}vr=pA(er,Vt.mode,vr),vr.return=Vt,Vt=vr}return be(Vt);case ce:return fi=er._init,er=fi(er._payload),Hn(Vt,Dt,er,vr)}if(Ne(er))return Ri(Vt,Dt,er,vr);if(W(er)){if(fi=W(er),typeof fi!="function")throw Error(i(150));return er=fi.call(er),Ei(Vt,Dt,er,vr)}if(typeof er.then=="function")return Hn(Vt,Dt,_h(er),vr);if(er.$$typeof===G)return Hn(Vt,Dt,ll(Vt,er),vr);jo(Vt,er)}return typeof er=="string"&&er!==""||typeof er=="number"||typeof er=="bigint"?(er=""+er,Dt!==null&&Dt.tag===6?(_(Vt,Dt.sibling),vr=j(Dt,er),vr.return=Vt,Vt=vr):(_(Vt,Dt),vr=Lh(er,Vt.mode,vr),vr.return=Vt,Vt=vr),be(Vt)):_(Vt,Dt)}return function(Vt,Dt,er,vr){try{Uh=0;var fi=Hn(Vt,Dt,er,vr);return Lc=null,fi}catch(xi){if(xi===Qe||xi===We)throw xi;var xn=pa(29,xi,null,Vt.mode);return xn.lanes=vr,xn.return=Vt,xn}finally{}}}var to=mu(!0),Xs=mu(!1),Wn=tt(null),sa=null;function Ts(h){var m=h.alternate;fe(hs,hs.current&1),fe(Wn,h),sa===null&&(m===null||zi.current!==null||m.memoizedState!==null)&&(sa=h)}function Sd(h){if(h.tag===22){if(fe(hs,hs.current),fe(Wn,h),sa===null){var m=h.alternate;m!==null&&m.memoizedState!==null&&(sa=h)}}else Mc()}function Mc(){fe(hs,hs.current),fe(Wn,Wn.current)}function ul(h){ee(Wn),sa===h&&(sa=null),ee(hs)}var hs=tt(0);function jl(h){for(var m=h;m!==null;){if(m.tag===13){var _=m.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||qh(_)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function Vu(h,m,_,F){m=h.memoizedState,_=_(F,m),_=_==null?m:x({},m,_),h.memoizedState=_,h.lanes===0&&(h.updateQueue.baseState=_)}var Gu={enqueueSetState:function(h,m,_){h=h._reactInternals;var F=Hl(),j=dr(F);j.payload=m,_!=null&&(j.callback=_),m=Er(h,j,F),m!==null&&(Dc(m,h,F),yr(m,h,F))},enqueueReplaceState:function(h,m,_){h=h._reactInternals;var F=Hl(),j=dr(F);j.tag=1,j.payload=m,_!=null&&(j.callback=_),m=Er(h,j,F),m!==null&&(Dc(m,h,F),yr(m,h,F))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var _=Hl(),F=dr(_);F.tag=2,m!=null&&(F.callback=m),m=Er(h,F,_),m!==null&&(Dc(m,h,_),yr(m,h,_))}};function Ed(h,m,_,F,j,K,be){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(F,K,be):m.prototype&&m.prototype.isPureReactComponent?!Xa(_,F)||!Xa(j,K):!0}function Td(h,m,_,F){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(_,F),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(_,F),m.state!==h&&Gu.enqueueReplaceState(m,m.state,null)}function Ol(h,m){var _=m;if("ref"in m){_={};for(var F in m)F!=="ref"&&(_[F]=m[F])}if(h=h.defaultProps){_===m&&(_=x({},_));for(var j in h)_[j]===void 0&&(_[j]=h[j])}return _}var ef=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function Fd(h){ef(h)}function tf(h){console.error(h)}function bg(h){ef(h)}function jh(h,m){try{var _=h.onUncaughtError;_(m.value,{componentStack:m.stack})}catch(F){setTimeout(function(){throw F})}}function rf(h,m,_){try{var F=h.onCaughtError;F(_.value,{componentStack:_.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function P0(h,m,_){return _=dr(_),_.tag=3,_.payload={element:null},_.callback=function(){jh(h,m)},_}function tx(h){return h=dr(h),h.tag=3,h}function D0(h,m,_,F){var j=_.type.getDerivedStateFromError;if(typeof j=="function"){var K=F.value;h.payload=function(){return j(K)},h.callback=function(){rf(m,_,F)}}var be=_.stateNode;be!==null&&typeof be.componentDidCatch=="function"&&(h.callback=function(){rf(m,_,F),typeof j!="function"&&(lf===null?lf=new Set([this]):lf.add(this));var Ve=F.stack;this.componentDidCatch(F.value,{componentStack:Ve!==null?Ve:""})})}function rx(h,m,_,F,j){if(_.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){if(m=_.alternate,m!==null&&Qu(m,_,j,!0),_=Wn.current,_!==null){switch(_.tag){case 13:return sa===null?X0():_.alternate===null&&la===0&&(la=3),_.flags&=-257,_.flags|=65536,_.lanes=j,F===et?_.flags|=16384:(m=_.updateQueue,m===null?_.updateQueue=new Set([F]):m.add(F),Vh(h,F,j)),!1;case 22:return _.flags|=65536,F===et?_.flags|=16384:(m=_.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([F])},_.updateQueue=m):(_=m.retryQueue,_===null?m.retryQueue=new Set([F]):_.add(F)),Vh(h,F,j)),!1}throw Error(i(435,_.tag))}return Vh(h,F,j),X0(),!1}if(mn)return m=Wn.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=j,F!==Mh&&(h=Error(i(422),{cause:F}),Oa(fo(h,_)))):(F!==Mh&&(m=Error(i(423),{cause:F}),Oa(fo(m,_))),h=h.current.alternate,h.flags|=65536,j&=-j,h.lanes|=j,F=fo(F,_),j=P0(h.stateNode,F,j),Ai(h,j),la!==4&&(la=2)),!1;var K=Error(i(520),{cause:F});if(K=fo(K,_),Rd===null?Rd=[K]:Rd.push(K),la!==4&&(la=2),m===null)return!0;F=fo(F,_),_=m;do{switch(_.tag){case 3:return _.flags|=65536,h=j&-j,_.lanes|=h,h=P0(_.stateNode,F,h),Ai(_,h),!1;case 1:if(m=_.type,K=_.stateNode,(_.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(lf===null||!lf.has(K))))return _.flags|=65536,j&=-j,_.lanes|=j,j=tx(j),D0(j,h,_,F),Ai(_,j),!1}_=_.return}while(_!==null);return!1}var Sp=Error(i(461)),xo=!1;function hl(h,m,_,F){m.child=h===null?Xs(m,null,_,F):to(m,h.child,_,F)}function R0(h,m,_,F,j){_=_.render;var K=m.ref;if("ref"in F){var be={};for(var Ve in F)Ve!=="ref"&&(be[Ve]=F[Ve])}else be=F;return Pl(m),F=Jn(h,m,_,be,K,j),Ve=$s(),h!==null&&!xo?(vo(h,m,j),Oh(h,m,j)):(mn&&Ve&&gA(m),m.flags|=1,hl(h,m,F,j),m.child)}function ix(h,m,_,F,j){if(h===null){var K=_.type;return typeof K=="function"&&!Ih(K)&&K.defaultProps===void 0&&_.compare===null?(m.tag=15,m.type=K,U0(h,m,K,F,j)):(h=mh(_.type,null,F,m,m.mode,j),h.ref=m.ref,h.return=m,m.child=h)}if(K=h.child,!Q0(h,j)){var be=K.memoizedProps;if(_=_.compare,_=_!==null?_:Xa,_(be,F)&&h.ref===m.ref)return Oh(h,m,j)}return m.flags|=1,h=Tl(K,F),h.ref=m.ref,h.return=m,m.child=h}function U0(h,m,_,F,j){if(h!==null){var K=h.memoizedProps;if(Xa(K,F)&&h.ref===m.ref)if(xo=!1,m.pendingProps=F=K,Q0(h,j))(h.flags&131072)!==0&&(xo=!0);else return m.lanes=h.lanes,Oh(h,m,j)}return Cg(h,m,_,F,j)}function wg(h,m,_){var F=m.pendingProps,j=F.children,K=h!==null?h.memoizedState:null;if(F.mode==="hidden"){if((m.flags&128)!==0){if(F=K!==null?K.baseLanes|_:_,h!==null){for(j=m.child=h.child,K=0;j!==null;)K=K|j.lanes|j.childLanes,j=j.sibling;m.childLanes=K&~F}else m.childLanes=0,m.child=null;return Bg(h,m,F,_)}if((_&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&Ae(m,K!==null?K.cachePool:null),K!==null?Or(m,K):Li(),Sd(m);else return m.lanes=m.childLanes=536870912,Bg(h,m,K!==null?K.baseLanes|_:_,_)}else K!==null?(Ae(m,K.cachePool),Or(m,K),Mc(),m.memoizedState=null):(h!==null&&Ae(m,null),Li(),Mc());return hl(h,m,j,_),m.child}function Bg(h,m,_,F){var j=ie();return j=j===null?null:{parent:ta._currentValue,pool:j},m.memoizedState={baseLanes:_,cachePool:j},h!==null&&Ae(m,null),Li(),Sd(m),h!==null&&Qu(h,m,F,!0),null}function xA(h,m){var _=m.ref;if(_===null)h!==null&&h.ref!==null&&(m.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(i(284));(h===null||h.ref!==_)&&(m.flags|=4194816)}}function Cg(h,m,_,F,j){return Pl(m),_=Jn(h,m,_,F,void 0,j),F=$s(),h!==null&&!xo?(vo(h,m,j),Oh(h,m,j)):(mn&&F&&gA(m),m.flags|=1,hl(h,m,_,j),m.child)}function Mf(h,m,_,F,j,K){return Pl(m),m.updateQueue=null,_=cs(m,F,_,j),Es(h),F=$s(),h!==null&&!xo?(vo(h,m,K),Oh(h,m,K)):(mn&&F&&gA(m),m.flags|=1,hl(h,m,_,K),m.child)}function Ep(h,m,_,F,j){if(Pl(m),m.stateNode===null){var K=Ds,be=_.contextType;typeof be=="object"&&be!==null&&(K=Ks(be)),K=new _(F,K),m.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,K.updater=Gu,m.stateNode=K,K._reactInternals=m,K=m.stateNode,K.props=F,K.state=m.memoizedState,K.refs={},Rt(m),be=_.contextType,K.context=typeof be=="object"&&be!==null?Ks(be):Ds,K.state=m.memoizedState,be=_.getDerivedStateFromProps,typeof be=="function"&&(Vu(m,_,be,F),K.state=m.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(be=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),be!==K.state&&Gu.enqueueReplaceState(K,K.state,null),ni(m,F,K,j),ji(),K.state=m.memoizedState),typeof K.componentDidMount=="function"&&(m.flags|=4194308),F=!0}else if(h===null){K=m.stateNode;var Ve=m.memoizedProps,bt=Ol(_,Ve);K.props=bt;var zt=K.context,mr=_.contextType;be=Ds,typeof mr=="object"&&mr!==null&&(be=Ks(mr));var xr=_.getDerivedStateFromProps;mr=typeof xr=="function"||typeof K.getSnapshotBeforeUpdate=="function",Ve=m.pendingProps!==Ve,mr||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(Ve||zt!==be)&&Td(m,K,F,be),cr=!1;var ir=m.memoizedState;K.state=ir,ni(m,F,K,j),ji(),zt=m.memoizedState,Ve||ir!==zt||cr?(typeof xr=="function"&&(Vu(m,_,xr,F),zt=m.memoizedState),(bt=cr||Ed(m,_,bt,F,ir,zt,be))?(mr||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(m.flags|=4194308)):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=F,m.memoizedState=zt),K.props=F,K.state=zt,K.context=be,F=bt):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),F=!1)}else{K=m.stateNode,Ar(h,m),be=m.memoizedProps,mr=Ol(_,be),K.props=mr,xr=m.pendingProps,ir=K.context,zt=_.contextType,bt=Ds,typeof zt=="object"&&zt!==null&&(bt=Ks(zt)),Ve=_.getDerivedStateFromProps,(zt=typeof Ve=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(be!==xr||ir!==bt)&&Td(m,K,F,bt),cr=!1,ir=m.memoizedState,K.state=ir,ni(m,F,K,j),ji();var ar=m.memoizedState;be!==xr||ir!==ar||cr||h!==null&&h.dependencies!==null&&vA(h.dependencies)?(typeof Ve=="function"&&(Vu(m,_,Ve,F),ar=m.memoizedState),(mr=cr||Ed(m,_,mr,F,ir,ar,bt)||h!==null&&h.dependencies!==null&&vA(h.dependencies))?(zt||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(F,ar,bt),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(F,ar,bt)),typeof K.componentDidUpdate=="function"&&(m.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof K.componentDidUpdate!="function"||be===h.memoizedProps&&ir===h.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||be===h.memoizedProps&&ir===h.memoizedState||(m.flags|=1024),m.memoizedProps=F,m.memoizedState=ar),K.props=F,K.state=ar,K.context=bt,F=mr):(typeof K.componentDidUpdate!="function"||be===h.memoizedProps&&ir===h.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||be===h.memoizedProps&&ir===h.memoizedState||(m.flags|=1024),F=!1)}return K=F,xA(h,m),F=(m.flags&128)!==0,K||F?(K=m.stateNode,_=F&&typeof _.getDerivedStateFromError!="function"?null:K.render(),m.flags|=1,h!==null&&F?(m.child=to(m,h.child,null,j),m.child=to(m,null,_,j)):hl(h,m,_,j),m.memoizedState=K.state,h=m.child):h=Oh(h,m,j),h}function Tp(h,m,_,F){return bn(),m.flags|=256,hl(h,m,_,F),m.child}var Sg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Eg(h){return{baseLanes:h,cachePool:Ie()}}function Tg(h,m,_){return h=h!==null?h.childLanes&~_:0,m&&(h|=Xu),h}function nx(h,m,_){var F=m.pendingProps,j=!1,K=(m.flags&128)!==0,be;if((be=K)||(be=h!==null&&h.memoizedState===null?!1:(hs.current&2)!==0),be&&(j=!0,m.flags&=-129),be=(m.flags&32)!==0,m.flags&=-33,h===null){if(mn){if(j?Ts(m):Mc(),mn){var Ve=Cs,bt;if(bt=Ve){e:{for(bt=Ve,Ve=ol;bt.nodeType!==8;){if(!Ve){Ve=null;break e}if(bt=Yu(bt.nextSibling),bt===null){Ve=null;break e}}Ve=bt}Ve!==null?(m.memoizedState={dehydrated:Ve,treeContext:Tc!==null?{id:Nl,overflow:sl}:null,retryLane:536870912,hydrationErrors:null},bt=pa(18,null,null,0),bt.stateNode=Ve,bt.return=m,m.child=bt,ma=m,Cs=null,bt=!0):bt=!1}bt||Il(m)}if(Ve=m.memoizedState,Ve!==null&&(Ve=Ve.dehydrated,Ve!==null))return qh(Ve)?m.lanes=32:m.lanes=536870912,null;ul(m)}return Ve=F.children,F=F.fallback,j?(Mc(),j=m.mode,Ve=kd({mode:"hidden",children:Ve},j),F=Fl(F,j,_,null),Ve.return=m,F.return=m,Ve.sibling=F,m.child=Ve,j=m.child,j.memoizedState=Eg(_),j.childLanes=Tg(h,be,_),m.memoizedState=Sg,F):(Ts(m),j0(m,Ve))}if(bt=h.memoizedState,bt!==null&&(Ve=bt.dehydrated,Ve!==null)){if(K)m.flags&256?(Ts(m),m.flags&=-257,m=O0(h,m,_)):m.memoizedState!==null?(Mc(),m.child=h.child,m.flags|=128,m=null):(Mc(),j=F.fallback,Ve=m.mode,F=kd({mode:"visible",children:F.children},Ve),j=Fl(j,Ve,_,null),j.flags|=2,F.return=m,j.return=m,F.sibling=j,m.child=F,to(m,h.child,null,_),F=m.child,F.memoizedState=Eg(_),F.childLanes=Tg(h,be,_),m.memoizedState=Sg,m=j);else if(Ts(m),qh(Ve)){if(be=Ve.nextSibling&&Ve.nextSibling.dataset,be)var zt=be.dgst;be=zt,F=Error(i(419)),F.stack="",F.digest=be,Oa({value:F,source:null,stack:null}),m=O0(h,m,_)}else if(xo||Qu(h,m,_,!1),be=(_&h.childLanes)!==0,xo||be){if(be=js,be!==null&&(F=_&-_,F=(F&42)!==0?1:jr(F),F=(F&(be.suspendedLanes|_))!==0?0:F,F!==0&&F!==bt.retryLane))throw bt.retryLane=F,El(h,F),Dc(be,h,F),Sp;Ve.data==="$?"||X0(),m=O0(h,m,_)}else Ve.data==="$?"?(m.flags|=192,m.child=h.child,m=null):(h=bt.treeContext,Cs=Yu(Ve.nextSibling),ma=m,mn=!0,nc=null,ol=!1,h!==null&&(po[mo++]=Nl,po[mo++]=sl,po[mo++]=Tc,Nl=h.id,sl=h.overflow,Tc=m),m=j0(m,F.children),m.flags|=4096);return m}return j?(Mc(),j=F.fallback,Ve=m.mode,bt=h.child,zt=bt.sibling,F=Tl(bt,{mode:"hidden",children:F.children}),F.subtreeFlags=bt.subtreeFlags&65011712,zt!==null?j=Tl(zt,j):(j=Fl(j,Ve,_,null),j.flags|=2),j.return=m,F.return=m,F.sibling=j,m.child=F,F=j,j=m.child,Ve=h.child.memoizedState,Ve===null?Ve=Eg(_):(bt=Ve.cachePool,bt!==null?(zt=ta._currentValue,bt=bt.parent!==zt?{parent:zt,pool:zt}:bt):bt=Ie(),Ve={baseLanes:Ve.baseLanes|_,cachePool:bt}),j.memoizedState=Ve,j.childLanes=Tg(h,be,_),m.memoizedState=Sg,F):(Ts(m),_=h.child,h=_.sibling,_=Tl(_,{mode:"visible",children:F.children}),_.return=m,_.sibling=null,h!==null&&(be=m.deletions,be===null?(m.deletions=[h],m.flags|=16):be.push(h)),m.child=_,m.memoizedState=null,_)}function j0(h,m){return m=kd({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function kd(h,m){return h=pa(22,h,null,m),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function O0(h,m,_){return to(m,h.child,null,_),h=j0(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function Fg(h,m,_){h.lanes|=m;var F=h.alternate;F!==null&&(F.lanes|=m),Ou(h.return,m,_)}function kg(h,m,_,F,j){var K=h.memoizedState;K===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:F,tail:_,tailMode:j}:(K.isBackwards=m,K.rendering=null,K.renderingStartTime=0,K.last=F,K.tail=_,K.tailMode=j)}function sx(h,m,_){var F=m.pendingProps,j=F.revealOrder,K=F.tail;if(hl(h,m,F.children,_),F=hs.current,(F&2)!==0)F=F&1|2,m.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Fg(h,_,m);else if(h.tag===19)Fg(h,_,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}F&=1}switch(fe(hs,F),j){case"forwards":for(_=m.child,j=null;_!==null;)h=_.alternate,h!==null&&jl(h)===null&&(j=_),_=_.sibling;_=j,_===null?(j=m.child,m.child=null):(j=_.sibling,_.sibling=null),kg(m,!1,j,_,K);break;case"backwards":for(_=null,j=m.child,m.child=null;j!==null;){if(h=j.alternate,h!==null&&jl(h)===null){m.child=j;break}h=j.sibling,j.sibling=_,_=j,j=h}kg(m,!0,_,null,K);break;case"together":kg(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Oh(h,m,_){if(h!==null&&(m.dependencies=h.dependencies),$u|=m.lanes,(_&m.childLanes)===0)if(h!==null){if(Qu(h,m,_,!1),(_&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(i(153));if(m.child!==null){for(h=m.child,_=Tl(h,h.pendingProps),m.child=_,_.return=m;h.sibling!==null;)h=h.sibling,_=_.sibling=Tl(h,h.pendingProps),_.return=m;_.sibling=null}return m.child}function Q0(h,m){return(h.lanes&m)!==0?!0:(h=h.dependencies,!!(h!==null&&vA(h)))}function j2(h,m,_){switch(m.tag){case 3:rt(m,m.stateNode.containerInfo),Do(m,ta,h.memoizedState.cache),bn();break;case 27:case 5:dt(m);break;case 4:rt(m,m.stateNode.containerInfo);break;case 10:Do(m,m.type,m.memoizedProps.value);break;case 13:var F=m.memoizedState;if(F!==null)return F.dehydrated!==null?(Ts(m),m.flags|=128,null):(_&m.child.childLanes)!==0?nx(h,m,_):(Ts(m),h=Oh(h,m,_),h!==null?h.sibling:null);Ts(m);break;case 19:var j=(h.flags&128)!==0;if(F=(_&m.childLanes)!==0,F||(Qu(h,m,_,!1),F=(_&m.childLanes)!==0),j){if(F)return sx(h,m,_);m.flags|=128}if(j=m.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),fe(hs,hs.current),F)break;return null;case 22:case 23:return m.lanes=0,wg(h,m,_);case 24:Do(m,ta,h.memoizedState.cache)}return Oh(h,m,_)}function z0(h,m,_){if(h!==null)if(h.memoizedProps!==m.pendingProps)xo=!0;else{if(!Q0(h,_)&&(m.flags&128)===0)return xo=!1,j2(h,m,_);xo=(h.flags&131072)!==0}else xo=!1,mn&&(m.flags&1048576)!==0&&mA(m,gh,m.index);switch(m.lanes=0,m.tag){case 16:e:{h=m.pendingProps;var F=m.elementType,j=F._init;if(F=j(F._payload),m.type=F,typeof F=="function")Ih(F)?(h=Ol(F,h),m.tag=1,m=Ep(null,m,F,h,_)):(m.tag=0,m=Cg(null,m,F,h,_));else{if(F!=null){if(j=F.$$typeof,j===Z){m.tag=11,m=R0(null,m,F,h,_);break e}else if(j===ae){m.tag=14,m=ix(null,m,F,h,_);break e}}throw m=Ee(F)||F,Error(i(306,m,""))}}return m;case 0:return Cg(h,m,m.type,m.pendingProps,_);case 1:return F=m.type,j=Ol(F,m.pendingProps),Ep(h,m,F,j,_);case 3:e:{if(rt(m,m.stateNode.containerInfo),h===null)throw Error(i(387));F=m.pendingProps;var K=m.memoizedState;j=K.element,Ar(h,m),ni(m,F,null,_);var be=m.memoizedState;if(F=be.cache,Do(m,ta,F),F!==K.cache&&vh(m,[ta],_,!0),ji(),F=be.element,K.isDehydrated)if(K={element:F,isDehydrated:!1,cache:be.cache},m.updateQueue.baseState=K,m.memoizedState=K,m.flags&256){m=Tp(h,m,F,_);break e}else if(F!==j){j=fo(Error(i(424)),m),Oa(j),m=Tp(h,m,F,_);break e}else{switch(h=m.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(Cs=Yu(h.firstChild),ma=m,mn=!0,nc=null,ol=!0,_=Xs(m,null,F,_),m.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(bn(),F===j){m=Oh(h,m,_);break e}hl(h,m,F,_)}m=m.child}return m;case 26:return xA(h,m),h===null?(_=mm(m.type,null,m.pendingProps,null))?m.memoizedState=_:mn||(_=m.type,h=m.pendingProps,F=Vd(Le.current).createElement(_),F[Wi]=m,F[mi]=h,zo(F,_,h),Qt(F),m.stateNode=F):m.memoizedState=mm(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:return dt(m),h===null&&mn&&(F=m.stateNode=Dx(m.type,m.pendingProps,Le.current),ma=m,ol=!0,j=Cs,FA(m.type)?(fm=j,Cs=Yu(F.firstChild)):Cs=j),hl(h,m,m.pendingProps.children,_),xA(h,m),h===null&&(m.flags|=4194304),m.child;case 5:return h===null&&mn&&((j=F=Cs)&&(F=J2(F,m.type,m.pendingProps,ol),F!==null?(m.stateNode=F,ma=m,Cs=Yu(F.firstChild),ol=!1,j=!0):j=!1),j||Il(m)),dt(m),j=m.type,K=m.pendingProps,be=h!==null?h.memoizedProps:null,F=K.children,hm(j,K)?F=null:be!==null&&hm(j,be)&&(m.flags|=32),m.memoizedState!==null&&(j=Jn(h,m,Sn,null,null,_),E._currentValue=j),xA(h,m),hl(h,m,F,_),m.child;case 6:return h===null&&mn&&((h=_=Cs)&&(_=Mx(_,m.pendingProps,ol),_!==null?(m.stateNode=_,ma=m,Cs=null,h=!0):h=!1),h||Il(m)),null;case 13:return nx(h,m,_);case 4:return rt(m,m.stateNode.containerInfo),F=m.pendingProps,h===null?m.child=to(m,null,F,_):hl(h,m,F,_),m.child;case 11:return R0(h,m,m.type,m.pendingProps,_);case 7:return hl(h,m,m.pendingProps,_),m.child;case 8:return hl(h,m,m.pendingProps.children,_),m.child;case 12:return hl(h,m,m.pendingProps.children,_),m.child;case 10:return F=m.pendingProps,Do(m,m.type,F.value),hl(h,m,F.children,_),m.child;case 9:return j=m.type._context,F=m.pendingProps.children,Pl(m),j=Ks(j),F=F(j),m.flags|=1,hl(h,m,F,_),m.child;case 14:return ix(h,m,m.type,m.pendingProps,_);case 15:return U0(h,m,m.type,m.pendingProps,_);case 19:return sx(h,m,_);case 31:return F=m.pendingProps,_=m.mode,F={mode:F.mode,children:F.children},h===null?(_=kd(F,_),_.ref=m.ref,m.child=_,_.return=m,m=_):(_=Tl(h.child,F),_.ref=m.ref,m.child=_,_.return=m,m=_),m;case 22:return wg(h,m,_);case 24:return Pl(m),F=Ks(ta),h===null?(j=ie(),j===null&&(j=js,K=ZA(),j.pooledCache=K,K.refCount++,K!==null&&(j.pooledCacheLanes|=_),j=K),m.memoizedState={parent:F,cache:j},Rt(m),Do(m,ta,j)):((h.lanes&_)!==0&&(Ar(h,m),ni(m,null,null,_),ji()),j=h.memoizedState,K=m.memoizedState,j.parent!==F?(j={parent:F,cache:F},m.memoizedState=j,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=j),Do(m,ta,F)):(F=K.cache,Do(m,ta,F),F!==j.cache&&vh(m,[ta],_,!0))),hl(h,m,m.pendingProps.children,_),m.child;case 29:throw m.pendingProps}throw Error(i(156,m.tag))}function Qh(h){h.flags|=4}function H0(h,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!xm(m)){if(m=Wn.current,m!==null&&((gn&4194048)===gn?sa!==null:(gn&62914560)!==gn&&(gn&536870912)===0||m!==sa))throw ut=et,qe;h.flags|=8192}}function nf(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?Gt():536870912,h.lanes|=m,Rf|=m)}function yo(h,m){if(!mn)switch(h.tailMode){case"hidden":m=h.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?h.tail=null:_.sibling=null;break;case"collapsed":_=h.tail;for(var F=null;_!==null;)_.alternate!==null&&(F=_),_=_.sibling;F===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:F.sibling=null}}function aa(h){var m=h.alternate!==null&&h.alternate.child===h.child,_=0,F=0;if(m)for(var j=h.child;j!==null;)_|=j.lanes|j.childLanes,F|=j.subtreeFlags&65011712,F|=j.flags&65011712,j.return=h,j=j.sibling;else for(j=h.child;j!==null;)_|=j.lanes|j.childLanes,F|=j.subtreeFlags,F|=j.flags,j.return=h,j=j.sibling;return h.subtreeFlags|=F,h.childLanes=_,m}function Ng(h,m,_){var F=m.pendingProps;switch(du(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return aa(m),null;case 1:return aa(m),null;case 3:return _=m.stateNode,F=null,h!==null&&(F=h.memoizedState.cache),m.memoizedState.cache!==F&&(m.flags|=2048),go(ta),gt(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(h===null||h.child===null)&&(Ya(m)?Qh(m):h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,ju())),aa(m),null;case 26:return _=m.memoizedState,h===null?(Qh(m),_!==null?(aa(m),H0(m,_)):(aa(m),m.flags&=-16777217)):_?_!==h.memoizedState?(Qh(m),aa(m),H0(m,_)):(aa(m),m.flags&=-16777217):(h.memoizedProps!==F&&Qh(m),aa(m),m.flags&=-16777217),null;case 27:qt(m),_=Le.current;var j=m.type;if(h!==null&&m.stateNode!=null)h.memoizedProps!==F&&Qh(m);else{if(!F){if(m.stateNode===null)throw Error(i(166));return aa(m),null}h=pe.current,Ya(m)?Ph(m):(h=Dx(j,F,_),m.stateNode=h,Qh(m))}return aa(m),null;case 5:if(qt(m),_=m.type,h!==null&&m.stateNode!=null)h.memoizedProps!==F&&Qh(m);else{if(!F){if(m.stateNode===null)throw Error(i(166));return aa(m),null}if(h=pe.current,Ya(m))Ph(m);else{switch(j=Vd(Le.current),h){case 1:h=j.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:h=j.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":h=j.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":h=j.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":h=j.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof F.is=="string"?j.createElement("select",{is:F.is}):j.createElement("select"),F.multiple?h.multiple=!0:F.size&&(h.size=F.size);break;default:h=typeof F.is=="string"?j.createElement(_,{is:F.is}):j.createElement(_)}}h[Wi]=m,h[mi]=F;e:for(j=m.child;j!==null;){if(j.tag===5||j.tag===6)h.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===m)break e;for(;j.sibling===null;){if(j.return===null||j.return===m)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}m.stateNode=h;e:switch(zo(h,_,F),_){case"button":case"input":case"select":case"textarea":h=!!F.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Qh(m)}}return aa(m),m.flags&=-16777217,null;case 6:if(h&&m.stateNode!=null)h.memoizedProps!==F&&Qh(m);else{if(typeof F!="string"&&m.stateNode===null)throw Error(i(166));if(h=Le.current,Ya(m)){if(h=m.stateNode,_=m.memoizedProps,F=null,j=ma,j!==null)switch(j.tag){case 27:case 5:F=j.memoizedProps}h[Wi]=m,h=!!(h.nodeValue===_||F!==null&&F.suppressHydrationWarning===!0||kx(h.nodeValue,_)),h||Il(m)}else h=Vd(h).createTextNode(F),h[Wi]=m,m.stateNode=h}return aa(m),null;case 13:if(F=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(j=Ya(m),F!==null&&F.dehydrated!==null){if(h===null){if(!j)throw Error(i(318));if(j=m.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(i(317));j[Wi]=m}else bn(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;aa(m),j=!1}else j=ju(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=j),j=!0;if(!j)return m.flags&256?(ul(m),m):(ul(m),null)}if(ul(m),(m.flags&128)!==0)return m.lanes=_,m;if(_=F!==null,h=h!==null&&h.memoizedState!==null,_){F=m.child,j=null,F.alternate!==null&&F.alternate.memoizedState!==null&&F.alternate.memoizedState.cachePool!==null&&(j=F.alternate.memoizedState.cachePool.pool);var K=null;F.memoizedState!==null&&F.memoizedState.cachePool!==null&&(K=F.memoizedState.cachePool.pool),K!==j&&(F.flags|=2048)}return _!==h&&_&&(m.child.flags|=8192),nf(m,m.updateQueue),aa(m),null;case 4:return gt(),h===null&&om(m.stateNode.containerInfo),aa(m),null;case 10:return go(m.type),aa(m),null;case 19:if(ee(hs),j=m.memoizedState,j===null)return aa(m),null;if(F=(m.flags&128)!==0,K=j.rendering,K===null)if(F)yo(j,!1);else{if(la!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(K=jl(h),K!==null){for(m.flags|=128,yo(j,!1),h=K.updateQueue,m.updateQueue=h,nf(m,h),m.subtreeFlags=0,h=_,_=m.child;_!==null;)Au(_,h),_=_.sibling;return fe(hs,hs.current&1|2),m.child}h=h.sibling}j.tail!==null&&Pt()>Mp&&(m.flags|=128,F=!0,yo(j,!1),m.lanes=4194304)}else{if(!F)if(h=jl(K),h!==null){if(m.flags|=128,F=!0,h=h.updateQueue,m.updateQueue=h,nf(m,h),yo(j,!0),j.tail===null&&j.tailMode==="hidden"&&!K.alternate&&!mn)return aa(m),null}else 2*Pt()-j.renderingStartTime>Mp&&_!==536870912&&(m.flags|=128,F=!0,yo(j,!1),m.lanes=4194304);j.isBackwards?(K.sibling=m.child,m.child=K):(h=j.last,h!==null?h.sibling=K:m.child=K,j.last=K)}return j.tail!==null?(m=j.tail,j.rendering=m,j.tail=m.sibling,j.renderingStartTime=Pt(),m.sibling=null,h=hs.current,fe(hs,F?h&1|2:h&1),m):(aa(m),null);case 22:case 23:return ul(m),Vi(),F=m.memoizedState!==null,h!==null?h.memoizedState!==null!==F&&(m.flags|=8192):F&&(m.flags|=8192),F?(_&536870912)!==0&&(m.flags&128)===0&&(aa(m),m.subtreeFlags&6&&(m.flags|=8192)):aa(m),_=m.updateQueue,_!==null&&nf(m,_.retryQueue),_=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),F=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(F=m.memoizedState.cachePool.pool),F!==_&&(m.flags|=2048),h!==null&&ee(z),null;case 24:return _=null,h!==null&&(_=h.memoizedState.cache),m.memoizedState.cache!==_&&(m.flags|=2048),go(ta),aa(m),null;case 25:return null;case 30:return null}throw Error(i(156,m.tag))}function O2(h,m){switch(du(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return go(ta),gt(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return qt(m),null;case 13:if(ul(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(i(340));bn()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return ee(hs),null;case 4:return gt(),null;case 10:return go(m.type),null;case 22:case 23:return ul(m),Vi(),h!==null&&ee(z),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return go(ta),null;case 25:return null;default:return null}}function Ig(h,m){switch(du(m),m.tag){case 3:go(ta),gt();break;case 26:case 27:case 5:qt(m);break;case 4:gt();break;case 13:ul(m);break;case 19:ee(hs);break;case 10:go(m.type);break;case 22:case 23:ul(m),Vi(),h!==null&&ee(z);break;case 24:go(ta)}}function Fp(h,m){try{var _=m.updateQueue,F=_!==null?_.lastEffect:null;if(F!==null){var j=F.next;_=j;do{if((_.tag&h)===h){F=void 0;var K=_.create,be=_.inst;F=K(),be.destroy=F}_=_.next}while(_!==j)}}catch(Ve){ms(m,m.return,Ve)}}function sf(h,m,_){try{var F=m.updateQueue,j=F!==null?F.lastEffect:null;if(j!==null){var K=j.next;F=K;do{if((F.tag&h)===h){var be=F.inst,Ve=be.destroy;if(Ve!==void 0){be.destroy=void 0,j=m;var bt=_,zt=Ve;try{zt()}catch(mr){ms(j,bt,mr)}}}F=F.next}while(F!==K)}}catch(mr){ms(m,m.return,mr)}}function Lg(h){var m=h.updateQueue;if(m!==null){var _=h.stateNode;try{Ws(m,_)}catch(F){ms(h,h.return,F)}}}function ax(h,m,_){_.props=Ol(h.type,h.memoizedProps),_.state=h.memoizedState;try{_.componentWillUnmount()}catch(F){ms(h,m,F)}}function Pf(h,m){try{var _=h.ref;if(_!==null){switch(h.tag){case 26:case 27:case 5:var F=h.stateNode;break;case 30:F=h.stateNode;break;default:F=h.stateNode}typeof _=="function"?h.refCleanup=_(F):_.current=F}}catch(j){ms(h,m,j)}}function bh(h,m){var _=h.ref,F=h.refCleanup;if(_!==null)if(typeof F=="function")try{F()}catch(j){ms(h,m,j)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(j){ms(h,m,j)}else _.current=null}function Mg(h){var m=h.type,_=h.memoizedProps,F=h.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":_.autoFocus&&F.focus();break e;case"img":_.src?F.src=_.src:_.srcSet&&(F.srcset=_.srcSet)}}catch(j){ms(h,h.return,j)}}function Pg(h,m,_){try{var F=h.stateNode;Nx(F,h.type,_,m),F[mi]=m}catch(j){ms(h,h.return,j)}}function ox(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&FA(h.type)||h.tag===4}function Dg(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||ox(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&FA(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Nd(h,m,_){var F=h.tag;if(F===5||F===6)h=h.stateNode,m?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(h,m):(m=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,m.appendChild(h),_=_._reactRootContainer,_!=null||m.onclick!==null||(m.onclick=Hd));else if(F!==4&&(F===27&&FA(h.type)&&(_=h.stateNode,m=null),h=h.child,h!==null))for(Nd(h,m,_),h=h.sibling;h!==null;)Nd(h,m,_),h=h.sibling}function Id(h,m,_){var F=h.tag;if(F===5||F===6)h=h.stateNode,m?_.insertBefore(h,m):_.appendChild(h);else if(F!==4&&(F===27&&FA(h.type)&&(_=h.stateNode),h=h.child,h!==null))for(Id(h,m,_),h=h.sibling;h!==null;)Id(h,m,_),h=h.sibling}function Rg(h){var m=h.stateNode,_=h.memoizedProps;try{for(var F=h.type,j=m.attributes;j.length;)m.removeAttributeNode(j[0]);zo(m,F,_),m[Wi]=h,m[mi]=_}catch(K){ms(h,h.return,K)}}var uc=!1,Zs=!1,Ug=!1,lx=typeof WeakSet=="function"?WeakSet:Set,Oo=null;function Q2(h,m){if(h=h.containerInfo,cm=Be,h=Mu(h),Sl(h)){if("selectionStart"in h)var _={start:h.selectionStart,end:h.selectionEnd};else e:{_=(_=h.ownerDocument)&&_.defaultView||window;var F=_.getSelection&&_.getSelection();if(F&&F.rangeCount!==0){_=F.anchorNode;var j=F.anchorOffset,K=F.focusNode;F=F.focusOffset;try{_.nodeType,K.nodeType}catch{_=null;break e}var be=0,Ve=-1,bt=-1,zt=0,mr=0,xr=h,ir=null;t:for(;;){for(var ar;xr!==_||j!==0&&xr.nodeType!==3||(Ve=be+j),xr!==K||F!==0&&xr.nodeType!==3||(bt=be+F),xr.nodeType===3&&(be+=xr.nodeValue.length),(ar=xr.firstChild)!==null;)ir=xr,xr=ar;for(;;){if(xr===h)break t;if(ir===_&&++zt===j&&(Ve=be),ir===K&&++mr===F&&(bt=be),(ar=xr.nextSibling)!==null)break;xr=ir,ir=xr.parentNode}xr=ar}_=Ve===-1||bt===-1?null:{start:Ve,end:bt}}else _=null}_=_||{start:0,end:0}}else _=null;for(um={focusedElem:h,selectionRange:_},Be=!1,Oo=m;Oo!==null;)if(m=Oo,h=m.child,(m.subtreeFlags&1024)!==0&&h!==null)h.return=m,Oo=h;else for(;Oo!==null;){switch(m=Oo,K=m.alternate,h=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&K!==null){h=void 0,_=m,j=K.memoizedProps,K=K.memoizedState,F=_.stateNode;try{var Ri=Ol(_.type,j,_.elementType===_.type);h=F.getSnapshotBeforeUpdate(Ri,K),F.__reactInternalSnapshotBeforeUpdate=h}catch(Ei){ms(_,_.return,Ei)}}break;case 3:if((h&1024)!==0){if(h=m.stateNode.containerInfo,_=h.nodeType,_===9)Am(h);else if(_===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":Am(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(i(163))}if(h=m.sibling,h!==null){h.return=m.return,Oo=h;break}Oo=m.return}}function cx(h,m,_){var F=_.flags;switch(_.tag){case 0:case 11:case 15:_A(h,_),F&4&&Fp(5,_);break;case 1:if(_A(h,_),F&4)if(h=_.stateNode,m===null)try{h.componentDidMount()}catch(be){ms(_,_.return,be)}else{var j=Ol(_.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(j,m,h.__reactInternalSnapshotBeforeUpdate)}catch(be){ms(_,_.return,be)}}F&64&&Lg(_),F&512&&Pf(_,_.return);break;case 3:if(_A(h,_),F&64&&(h=_.updateQueue,h!==null)){if(m=null,_.child!==null)switch(_.child.tag){case 27:case 5:m=_.child.stateNode;break;case 1:m=_.child.stateNode}try{Ws(h,m)}catch(be){ms(_,_.return,be)}}break;case 27:m===null&&F&4&&Rg(_);case 26:case 5:_A(h,_),m===null&&F&4&&Mg(_),F&512&&Pf(_,_.return);break;case 12:_A(h,_);break;case 13:_A(h,_),F&4&&Ld(h,_),F&64&&(h=_.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(_=em.bind(null,_),Px(h,_))));break;case 22:if(F=_.memoizedState!==null||uc,!F){m=m!==null&&m.memoizedState!==null||Zs,j=uc;var K=Zs;uc=F,(Zs=m)&&!K?Ku(h,_,(_.subtreeFlags&8772)!==0):_A(h,_),uc=j,Zs=K}break;case 30:break;default:_A(h,_)}}function ux(h){var m=h.alternate;m!==null&&(h.alternate=null,ux(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&it(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var oa=null,Ql=!1;function yA(h,m,_){for(_=_.child;_!==null;)jg(h,m,_),_=_.sibling}function jg(h,m,_){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Zr,_)}catch{}switch(_.tag){case 26:Zs||bh(_,m),yA(h,m,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:Zs||bh(_,m);var F=oa,j=Ql;FA(_.type)&&(oa=_.stateNode,Ql=!1),yA(h,m,_),Qp(_.stateNode),oa=F,Ql=j;break;case 5:Zs||bh(_,m);case 6:if(F=oa,j=Ql,oa=null,yA(h,m,_),oa=F,Ql=j,oa!==null)if(Ql)try{(oa.nodeType===9?oa.body:oa.nodeName==="HTML"?oa.ownerDocument.body:oa).removeChild(_.stateNode)}catch(K){ms(_,m,K)}else try{oa.removeChild(_.stateNode)}catch(K){ms(_,m,K)}break;case 18:oa!==null&&(Ql?(h=oa,i1(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,_.stateNode),fl(h)):i1(oa,_.stateNode));break;case 4:F=oa,j=Ql,oa=_.stateNode.containerInfo,Ql=!0,yA(h,m,_),oa=F,Ql=j;break;case 0:case 11:case 14:case 15:Zs||sf(2,_,m),Zs||sf(4,_,m),yA(h,m,_);break;case 1:Zs||(bh(_,m),F=_.stateNode,typeof F.componentWillUnmount=="function"&&ax(_,m,F)),yA(h,m,_);break;case 21:yA(h,m,_);break;case 22:Zs=(F=Zs)||_.memoizedState!==null,yA(h,m,_),Zs=F;break;default:yA(h,m,_)}}function Ld(h,m){if(m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{fl(h)}catch(_){ms(m,m.return,_)}}function z2(h){switch(h.tag){case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new lx),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new lx),m;default:throw Error(i(435,h.tag))}}function Ys(h,m){var _=z2(h);m.forEach(function(F){var j=tm.bind(null,h,F);_.has(F)||(_.add(F),F.then(j,j))})}function Qo(h,m){var _=m.deletions;if(_!==null)for(var F=0;F<_.length;F++){var j=_[F],K=h,be=m,Ve=be;e:for(;Ve!==null;){switch(Ve.tag){case 27:if(FA(Ve.type)){oa=Ve.stateNode,Ql=!1;break e}break;case 5:oa=Ve.stateNode,Ql=!1;break e;case 3:case 4:oa=Ve.stateNode.containerInfo,Ql=!0;break e}Ve=Ve.return}if(oa===null)throw Error(i(160));jg(K,be,j),oa=null,Ql=!1,K=j.alternate,K!==null&&(K.return=null),j.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)kp(m,h),m=m.sibling}var qu=null;function kp(h,m){var _=h.alternate,F=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Qo(m,h),zl(h),F&4&&(sf(3,h,h.return),Fp(3,h),sf(5,h,h.return));break;case 1:Qo(m,h),zl(h),F&512&&(Zs||_===null||bh(_,_.return)),F&64&&uc&&(h=h.updateQueue,h!==null&&(F=h.callbacks,F!==null&&(_=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=_===null?F:_.concat(F))));break;case 26:var j=qu;if(Qo(m,h),zl(h),F&512&&(Zs||_===null||bh(_,_.return)),F&4){var K=_!==null?_.memoizedState:null;if(F=h.memoizedState,_===null)if(F===null)if(h.stateNode===null){e:{F=h.type,_=h.memoizedProps,j=j.ownerDocument||j;t:switch(F){case"title":K=j.getElementsByTagName("title")[0],(!K||K[$e]||K[Wi]||K.namespaceURI==="http://www.w3.org/2000/svg"||K.hasAttribute("itemprop"))&&(K=j.createElement(F),j.head.insertBefore(K,j.querySelector("head > title"))),zo(K,F,_),K[Wi]=h,Qt(K),F=K;break e;case"link":var be=vm("link","href",j).get(F+(_.href||""));if(be){for(var Ve=0;Ve<be.length;Ve++)if(K=be[Ve],K.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&K.getAttribute("rel")===(_.rel==null?null:_.rel)&&K.getAttribute("title")===(_.title==null?null:_.title)&&K.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){be.splice(Ve,1);break t}}K=j.createElement(F),zo(K,F,_),j.head.appendChild(K);break;case"meta":if(be=vm("meta","content",j).get(F+(_.content||""))){for(Ve=0;Ve<be.length;Ve++)if(K=be[Ve],K.getAttribute("content")===(_.content==null?null:""+_.content)&&K.getAttribute("name")===(_.name==null?null:_.name)&&K.getAttribute("property")===(_.property==null?null:_.property)&&K.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&K.getAttribute("charset")===(_.charSet==null?null:_.charSet)){be.splice(Ve,1);break t}}K=j.createElement(F),zo(K,F,_),j.head.appendChild(K);break;default:throw Error(i(468,F))}K[Wi]=h,Qt(K),F=K}h.stateNode=F}else Gp(j,h.type,h.stateNode);else h.stateNode=gm(j,F,h.memoizedProps);else K!==F?(K===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):K.count--,F===null?Gp(j,h.type,h.stateNode):gm(j,F,h.memoizedProps)):F===null&&h.stateNode!==null&&Pg(h,h.memoizedProps,_.memoizedProps)}break;case 27:Qo(m,h),zl(h),F&512&&(Zs||_===null||bh(_,_.return)),_!==null&&F&4&&Pg(h,h.memoizedProps,_.memoizedProps);break;case 5:if(Qo(m,h),zl(h),F&512&&(Zs||_===null||bh(_,_.return)),h.flags&32){j=h.stateNode;try{Jo(j,"")}catch(ar){ms(h,h.return,ar)}}F&4&&h.stateNode!=null&&(j=h.memoizedProps,Pg(h,j,_!==null?_.memoizedProps:j)),F&1024&&(Ug=!0);break;case 6:if(Qo(m,h),zl(h),F&4){if(h.stateNode===null)throw Error(i(162));F=h.memoizedProps,_=h.stateNode;try{_.nodeValue=F}catch(ar){ms(h,h.return,ar)}}break;case 3:if(Vp=null,j=qu,qu=qf(m.containerInfo),Qo(m,h),qu=j,zl(h),F&4&&_!==null&&_.memoizedState.isDehydrated)try{fl(m.containerInfo)}catch(ar){ms(h,h.return,ar)}Ug&&(Ug=!1,Md(h));break;case 4:F=qu,qu=qf(h.stateNode.containerInfo),Qo(m,h),zl(h),qu=F;break;case 12:Qo(m,h),zl(h);break;case 13:Qo(m,h),zl(h),h.child.flags&8192&&h.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(Uf=Pt()),F&4&&(F=h.updateQueue,F!==null&&(h.updateQueue=null,Ys(h,F)));break;case 22:j=h.memoizedState!==null;var bt=_!==null&&_.memoizedState!==null,zt=uc,mr=Zs;if(uc=zt||j,Zs=mr||bt,Qo(m,h),Zs=mr,uc=zt,zl(h),F&8192)e:for(m=h.stateNode,m._visibility=j?m._visibility&-2:m._visibility|1,j&&(_===null||bt||uc||Zs||af(h)),_=null,m=h;;){if(m.tag===5||m.tag===26){if(_===null){bt=_=m;try{if(K=bt.stateNode,j)be=K.style,typeof be.setProperty=="function"?be.setProperty("display","none","important"):be.display="none";else{Ve=bt.stateNode;var xr=bt.memoizedProps.style,ir=xr!=null&&xr.hasOwnProperty("display")?xr.display:null;Ve.style.display=ir==null||typeof ir=="boolean"?"":(""+ir).trim()}}catch(ar){ms(bt,bt.return,ar)}}}else if(m.tag===6){if(_===null){bt=m;try{bt.stateNode.nodeValue=j?"":bt.memoizedProps}catch(ar){ms(bt,bt.return,ar)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;_===m&&(_=null),m=m.return}_===m&&(_=null),m.sibling.return=m.return,m=m.sibling}F&4&&(F=h.updateQueue,F!==null&&(_=F.retryQueue,_!==null&&(F.retryQueue=null,Ys(h,_))));break;case 19:Qo(m,h),zl(h),F&4&&(F=h.updateQueue,F!==null&&(h.updateQueue=null,Ys(h,F)));break;case 30:break;case 21:break;default:Qo(m,h),zl(h)}}function zl(h){var m=h.flags;if(m&2){try{for(var _,F=h.return;F!==null;){if(ox(F)){_=F;break}F=F.return}if(_==null)throw Error(i(160));switch(_.tag){case 27:var j=_.stateNode,K=Dg(h);Id(h,K,j);break;case 5:var be=_.stateNode;_.flags&32&&(Jo(be,""),_.flags&=-33);var Ve=Dg(h);Id(h,Ve,be);break;case 3:case 4:var bt=_.stateNode.containerInfo,zt=Dg(h);Nd(h,zt,bt);break;default:throw Error(i(161))}}catch(mr){ms(h,h.return,mr)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function Md(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;Md(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),h=h.sibling}}function _A(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)cx(h,m.alternate,m),m=m.sibling}function af(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:sf(4,m,m.return),af(m);break;case 1:bh(m,m.return);var _=m.stateNode;typeof _.componentWillUnmount=="function"&&ax(m,m.return,_),af(m);break;case 27:Qp(m.stateNode);case 26:case 5:bh(m,m.return),af(m);break;case 22:m.memoizedState===null&&af(m);break;case 30:af(m);break;default:af(m)}h=h.sibling}}function Ku(h,m,_){for(_=_&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var F=m.alternate,j=h,K=m,be=K.flags;switch(K.tag){case 0:case 11:case 15:Ku(j,K,_),Fp(4,K);break;case 1:if(Ku(j,K,_),F=K,j=F.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(zt){ms(F,F.return,zt)}if(F=K,j=F.updateQueue,j!==null){var Ve=F.stateNode;try{var bt=j.shared.hiddenCallbacks;if(bt!==null)for(j.shared.hiddenCallbacks=null,j=0;j<bt.length;j++)cn(bt[j],Ve)}catch(zt){ms(F,F.return,zt)}}_&&be&64&&Lg(K),Pf(K,K.return);break;case 27:Rg(K);case 26:case 5:Ku(j,K,_),_&&F===null&&be&4&&Mg(K),Pf(K,K.return);break;case 12:Ku(j,K,_);break;case 13:Ku(j,K,_),_&&be&4&&Ld(j,K);break;case 22:K.memoizedState===null&&Ku(j,K,_),Pf(K,K.return);break;case 30:break;default:Ku(j,K,_)}m=m.sibling}}function Np(h,m){var _=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==_&&(h!=null&&h.refCount++,_!=null&&kc(_))}function of(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&kc(h))}function gu(h,m,_,F){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Df(h,m,_,F),m=m.sibling}function Df(h,m,_,F){var j=m.flags;switch(m.tag){case 0:case 11:case 15:gu(h,m,_,F),j&2048&&Fp(9,m);break;case 1:gu(h,m,_,F);break;case 3:gu(h,m,_,F),j&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&kc(h)));break;case 12:if(j&2048){gu(h,m,_,F),h=m.stateNode;try{var K=m.memoizedProps,be=K.id,Ve=K.onPostCommit;typeof Ve=="function"&&Ve(be,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(bt){ms(m,m.return,bt)}}else gu(h,m,_,F);break;case 13:gu(h,m,_,F);break;case 23:break;case 22:K=m.stateNode,be=m.alternate,m.memoizedState!==null?K._visibility&2?gu(h,m,_,F):Ip(h,m):K._visibility&2?gu(h,m,_,F):(K._visibility|=2,zh(h,m,_,F,(m.subtreeFlags&10256)!==0)),j&2048&&Np(be,m);break;case 24:gu(h,m,_,F),j&2048&&of(m.alternate,m);break;default:gu(h,m,_,F)}}function zh(h,m,_,F,j){for(j=j&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var K=h,be=m,Ve=_,bt=F,zt=be.flags;switch(be.tag){case 0:case 11:case 15:zh(K,be,Ve,bt,j),Fp(8,be);break;case 23:break;case 22:var mr=be.stateNode;be.memoizedState!==null?mr._visibility&2?zh(K,be,Ve,bt,j):Ip(K,be):(mr._visibility|=2,zh(K,be,Ve,bt,j)),j&&zt&2048&&Np(be.alternate,be);break;case 24:zh(K,be,Ve,bt,j),j&&zt&2048&&of(be.alternate,be);break;default:zh(K,be,Ve,bt,j)}m=m.sibling}}function Ip(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var _=h,F=m,j=F.flags;switch(F.tag){case 22:Ip(_,F),j&2048&&Np(F.alternate,F);break;case 24:Ip(_,F),j&2048&&of(F.alternate,F);break;default:Ip(_,F)}m=m.sibling}}var Pd=8192;function Wu(h){if(h.subtreeFlags&Pd)for(h=h.child;h!==null;)hx(h),h=h.sibling}function hx(h){switch(h.tag){case 26:Wu(h),h.flags&Pd&&h.memoizedState!==null&&ib(qu,h.memoizedState,h.memoizedProps);break;case 5:Wu(h);break;case 3:case 4:var m=qu;qu=qf(h.stateNode.containerInfo),Wu(h),qu=m;break;case 22:h.memoizedState===null&&(m=h.alternate,m!==null&&m.memoizedState!==null?(m=Pd,Pd=16777216,Wu(h),Pd=m):Wu(h));break;default:Wu(h)}}function Og(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function bA(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var _=0;_<m.length;_++){var F=m[_];Oo=F,Qg(F,h)}Og(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)V0(h),h=h.sibling}function V0(h){switch(h.tag){case 0:case 11:case 15:bA(h),h.flags&2048&&sf(9,h,h.return);break;case 3:bA(h);break;case 12:bA(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&2&&(h.return===null||h.return.tag!==13)?(m._visibility&=-3,Lp(h)):bA(h);break;default:bA(h)}}function Lp(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var _=0;_<m.length;_++){var F=m[_];Oo=F,Qg(F,h)}Og(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:sf(8,m,m.return),Lp(m);break;case 22:_=m.stateNode,_._visibility&2&&(_._visibility&=-3,Lp(m));break;default:Lp(m)}h=h.sibling}}function Qg(h,m){for(;Oo!==null;){var _=Oo;switch(_.tag){case 0:case 11:case 15:sf(8,_,m);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var F=_.memoizedState.cachePool.pool;F!=null&&F.refCount++}break;case 24:kc(_.memoizedState.cache)}if(F=_.child,F!==null)F.return=_,Oo=F;else e:for(_=h;Oo!==null;){F=Oo;var j=F.sibling,K=F.return;if(ux(F),F===_){Oo=null;break e}if(j!==null){j.return=K,Oo=j;break e}Oo=K}}}var H2={getCacheForType:function(h){var m=Ks(ta),_=m.data.get(h);return _===void 0&&(_=h(),m.data.set(h,_)),_}},V2=typeof WeakMap=="function"?WeakMap:Map,As=0,js=null,Tn=null,gn=0,fs=0,vu=null,wA=!1,Dd=!1,G0=!1,BA=0,la=0,$u=0,CA=0,zg=0,Xu=0,Rf=0,Rd=null,Pc=null,Hg=!1,Uf=0,Mp=1/0,q0=null,lf=null,Al=0,cf=null,Ud=null,jf=0,Pp=0,K0=null,Vg=null,jd=0,Gg=null;function Hl(){if((As&2)!==0&&gn!==0)return gn&-gn;if(ge.T!==null){var h=Ro;return h!==0?h:Xg()}return In()}function Ax(){Xu===0&&(Xu=(gn&536870912)===0||mn?Ht():536870912);var h=Wn.current;return h!==null&&(h.flags|=32),Xu}function Dc(h,m,_){(h===js&&(fs===2||fs===9)||h.cancelPendingCommit!==null)&&(Hh(h,0),SA(h,gn,Xu,!1)),kr(h,_),((As&2)===0||h!==js)&&(h===js&&((As&2)===0&&(CA|=_),la===4&&SA(h,gn,Xu,!1)),Zu(h))}function fx(h,m,_){if((As&6)!==0)throw Error(i(327));var F=!_&&(m&124)===0&&(m&h.expiredLanes)===0||vt(h,m),j=F?px(h,m):Dp(h,m,!0),K=F;do{if(j===0){Dd&&!F&&SA(h,m,0,!1);break}else{if(_=h.current.alternate,K&&!G2(_)){j=Dp(h,m,!1),K=!1;continue}if(j===2){if(K=m,h.errorRecoveryDisabledLanes&K)var be=0;else be=h.pendingLanes&-536870913,be=be!==0?be:be&536870912?536870912:0;if(be!==0){m=be;e:{var Ve=h;j=Rd;var bt=Ve.current.memoizedState.isDehydrated;if(bt&&(Hh(Ve,be).flags|=256),be=Dp(Ve,be,!1),be!==2){if(G0&&!bt){Ve.errorRecoveryDisabledLanes|=K,CA|=K,j=4;break e}K=Pc,Pc=j,K!==null&&(Pc===null?Pc=K:Pc.push.apply(Pc,K))}j=be}if(K=!1,j!==2)continue}}if(j===1){Hh(h,0),SA(h,m,0,!0);break}e:{switch(F=h,K=j,K){case 0:case 1:throw Error(i(345));case 4:if((m&4194048)!==m)break;case 6:SA(F,m,Xu,!wA);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((m&62914560)===m&&(j=Uf+300-Pt(),10<j)){if(SA(F,m,Xu,!wA),Ft(F,0,!0)!==0)break e;F.timeoutHandle=Rc(dx.bind(null,F,_,Pc,q0,Hg,m,Xu,CA,Rf,wA,K,2,-0,0),j);break e}dx(F,_,Pc,q0,Hg,m,Xu,CA,Rf,wA,K,0,-0,0)}}break}while(!0);Zu(h)}function dx(h,m,_,F,j,K,be,Ve,bt,zt,mr,xr,ir,ar){if(h.timeoutHandle=-1,xr=m.subtreeFlags,(xr&8192||(xr&16785408)===16785408)&&(Xf={stylesheets:null,count:0,unsuspend:l1},hx(m),xr=A(),xr!==null)){h.cancelPendingCommit=xr(xx.bind(null,h,m,K,_,F,j,be,Ve,bt,mr,1,ir,ar)),SA(h,K,be,!zt);return}xx(h,m,K,_,F,j,be,Ve,bt)}function G2(h){for(var m=h;;){var _=m.tag;if((_===0||_===11||_===15)&&m.flags&16384&&(_=m.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var F=0;F<_.length;F++){var j=_[F],K=j.getSnapshot;j=j.value;try{if(!ws(K(),j))return!1}catch{return!1}}if(_=m.child,m.subtreeFlags&16384&&_!==null)_.return=m,m=_;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function SA(h,m,_,F){m&=~zg,m&=~CA,h.suspendedLanes|=m,h.pingedLanes&=~m,F&&(h.warmLanes|=m),F=h.expirationTimes;for(var j=m;0<j;){var K=31-ot(j),be=1<<K;F[K]=-1,j&=~be}_!==0&&ei(h,_,m)}function W0(){return(As&6)===0?(zf(0),!1):!0}function qg(){if(Tn!==null){if(fs===0)var h=Tn.return;else h=Tn,sc=qs=null,Qa(h),Lc=null,Uh=0,h=Tn;for(;h!==null;)Ig(h.alternate,h),h=h.return;Tn=null}}function Hh(h,m){var _=h.timeoutHandle;_!==-1&&(h.timeoutHandle=-1,qd(_)),_=h.cancelPendingCommit,_!==null&&(h.cancelPendingCommit=null,_()),qg(),js=h,Tn=_=Tl(h.current,null),gn=m,fs=0,vu=null,wA=!1,Dd=vt(h,m),G0=!1,Rf=Xu=zg=CA=$u=la=0,Pc=Rd=null,Hg=!1,(m&8)!==0&&(m|=m&32);var F=h.entangledLanes;if(F!==0)for(h=h.entanglements,F&=m;0<F;){var j=31-ot(F),K=1<<j;m|=h[j],F&=~K}return BA=m,uu(),_}function za(h,m){si=null,ge.H=eo,m===Qe||m===We?(m=Ot(),fs=3):m===qe?(m=Ot(),fs=4):fs=m===Sp?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,vu=m,Tn===null&&(la=1,jh(h,fo(m,h.current)))}function $0(){var h=ge.H;return ge.H=eo,h===null?eo:h}function Kg(){var h=ge.A;return ge.A=H2,h}function X0(){la=4,wA||(gn&4194048)!==gn&&Wn.current!==null||(Dd=!0),($u&134217727)===0&&(CA&134217727)===0||js===null||SA(js,gn,Xu,!1)}function Dp(h,m,_){var F=As;As|=2;var j=$0(),K=Kg();(js!==h||gn!==m)&&(q0=null,Hh(h,m)),m=!1;var be=la;e:do try{if(fs!==0&&Tn!==null){var Ve=Tn,bt=vu;switch(fs){case 8:qg(),be=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(m=!0);var zt=fs;if(fs=0,vu=null,Qd(h,Ve,bt,zt),_&&Dd){be=0;break e}break;default:zt=fs,fs=0,vu=null,Qd(h,Ve,bt,zt)}}Od(),be=la;break}catch(mr){za(h,mr)}while(!0);return m&&h.shellSuspendCounter++,sc=qs=null,As=F,ge.H=j,ge.A=K,Tn===null&&(js=null,gn=0,uu()),be}function Od(){for(;Tn!==null;)mx(Tn)}function px(h,m){var _=As;As|=2;var F=$0(),j=Kg();js!==h||gn!==m?(q0=null,Mp=Pt()+500,Hh(h,m)):Dd=vt(h,m);e:do try{if(fs!==0&&Tn!==null){m=Tn;var K=vu;t:switch(fs){case 1:fs=0,vu=null,Qd(h,m,K,1);break;case 2:case 9:if(Ge(K)){fs=0,vu=null,gx(m);break}m=function(){fs!==2&&fs!==9||js!==h||(fs=7),Zu(h)},K.then(m,m);break e;case 3:fs=7;break e;case 4:fs=5;break e;case 7:Ge(K)?(fs=0,vu=null,gx(m)):(fs=0,vu=null,Qd(h,m,K,7));break;case 5:var be=null;switch(Tn.tag){case 26:be=Tn.memoizedState;case 5:case 27:var Ve=Tn;if(!be||xm(be)){fs=0,vu=null;var bt=Ve.sibling;if(bt!==null)Tn=bt;else{var zt=Ve.return;zt!==null?(Tn=zt,Z0(zt)):Tn=null}break t}}fs=0,vu=null,Qd(h,m,K,5);break;case 6:fs=0,vu=null,Qd(h,m,K,6);break;case 8:qg(),la=6;break e;default:throw Error(i(462))}}q2();break}catch(mr){za(h,mr)}while(!0);return sc=qs=null,ge.H=F,ge.A=j,As=_,Tn!==null?0:(js=null,gn=0,uu(),la)}function q2(){for(;Tn!==null&&!ze();)mx(Tn)}function mx(h){var m=z0(h.alternate,h,BA);h.memoizedProps=h.pendingProps,m===null?Z0(h):Tn=m}function gx(h){var m=h,_=m.alternate;switch(m.tag){case 15:case 0:m=Mf(_,m,m.pendingProps,m.type,void 0,gn);break;case 11:m=Mf(_,m,m.pendingProps,m.type.render,m.ref,gn);break;case 5:Qa(m);default:Ig(_,m),m=Tn=Au(m,BA),m=z0(_,m,BA)}h.memoizedProps=h.pendingProps,m===null?Z0(h):Tn=m}function Qd(h,m,_,F){sc=qs=null,Qa(m),Lc=null,Uh=0;var j=m.return;try{if(rx(h,j,m,_,gn)){la=1,jh(h,fo(_,h.current)),Tn=null;return}}catch(K){if(j!==null)throw Tn=j,K;la=1,jh(h,fo(_,h.current)),Tn=null;return}m.flags&32768?(mn||F===1?h=!0:Dd||(gn&536870912)!==0?h=!1:(wA=h=!0,(F===2||F===9||F===3||F===6)&&(F=Wn.current,F!==null&&F.tag===13&&(F.flags|=16384))),vx(m,h)):Z0(m)}function Z0(h){var m=h;do{if((m.flags&32768)!==0){vx(m,wA);return}h=m.return;var _=Ng(m.alternate,m,BA);if(_!==null){Tn=_;return}if(m=m.sibling,m!==null){Tn=m;return}Tn=m=h}while(m!==null);la===0&&(la=5)}function vx(h,m){do{var _=O2(h.alternate,h);if(_!==null){_.flags&=32767,Tn=_;return}if(_=h.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!m&&(h=h.sibling,h!==null)){Tn=h;return}Tn=h=_}while(h!==null);la=6,Tn=null}function xx(h,m,_,F,j,K,be,Ve,bt){h.cancelPendingCommit=null;do Y0();while(Al!==0);if((As&6)!==0)throw Error(i(327));if(m!==null){if(m===h.current)throw Error(i(177));if(K=m.lanes|m.childLanes,K|=ph,Bt(h,_,K,be,Ve,bt),h===js&&(Tn=js=null,gn=0),Ud=m,cf=h,jf=_,Pp=K,K0=j,Vg=F,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,K2(Hr,function(){return Wg(),null})):(h.callbackNode=null,h.callbackPriority=0),F=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||F){F=ge.T,ge.T=null,j=Pe.p,Pe.p=2,be=As,As|=4;try{Q2(h,m,_)}finally{As=be,Pe.p=j,ge.T=F}}Al=1,yx(),_x(),bx()}}function yx(){if(Al===1){Al=0;var h=cf,m=Ud,_=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||_){_=ge.T,ge.T=null;var F=Pe.p;Pe.p=2;var j=As;As|=4;try{kp(m,h);var K=um,be=Mu(h.containerInfo),Ve=K.focusedElem,bt=K.selectionRange;if(be!==Ve&&Ve&&Ve.ownerDocument&&Mo(Ve.ownerDocument.documentElement,Ve)){if(bt!==null&&Sl(Ve)){var zt=bt.start,mr=bt.end;if(mr===void 0&&(mr=zt),"selectionStart"in Ve)Ve.selectionStart=zt,Ve.selectionEnd=Math.min(mr,Ve.value.length);else{var xr=Ve.ownerDocument||document,ir=xr&&xr.defaultView||window;if(ir.getSelection){var ar=ir.getSelection(),Ri=Ve.textContent.length,Ei=Math.min(bt.start,Ri),Hn=bt.end===void 0?Ei:Math.min(bt.end,Ri);!ar.extend&&Ei>Hn&&(be=Hn,Hn=Ei,Ei=be);var Vt=lu(Ve,Ei),Dt=lu(Ve,Hn);if(Vt&&Dt&&(ar.rangeCount!==1||ar.anchorNode!==Vt.node||ar.anchorOffset!==Vt.offset||ar.focusNode!==Dt.node||ar.focusOffset!==Dt.offset)){var er=xr.createRange();er.setStart(Vt.node,Vt.offset),ar.removeAllRanges(),Ei>Hn?(ar.addRange(er),ar.extend(Dt.node,Dt.offset)):(er.setEnd(Dt.node,Dt.offset),ar.addRange(er))}}}}for(xr=[],ar=Ve;ar=ar.parentNode;)ar.nodeType===1&&xr.push({element:ar,left:ar.scrollLeft,top:ar.scrollTop});for(typeof Ve.focus=="function"&&Ve.focus(),Ve=0;Ve<xr.length;Ve++){var vr=xr[Ve];vr.element.scrollLeft=vr.left,vr.element.scrollTop=vr.top}}Be=!!cm,um=cm=null}finally{As=j,Pe.p=F,ge.T=_}}h.current=m,Al=2}}function _x(){if(Al===2){Al=0;var h=cf,m=Ud,_=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||_){_=ge.T,ge.T=null;var F=Pe.p;Pe.p=2;var j=As;As|=4;try{cx(h,m.alternate,m)}finally{As=j,Pe.p=F,ge.T=_}}Al=3}}function bx(){if(Al===4||Al===3){Al=0,Et();var h=cf,m=Ud,_=jf,F=Vg;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?Al=5:(Al=0,Ud=cf=null,wx(h,h.pendingLanes));var j=h.pendingLanes;if(j===0&&(lf=null),Di(_),m=m.stateNode,Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Zr,m,void 0,(m.current.flags&128)===128)}catch{}if(F!==null){m=ge.T,j=Pe.p,Pe.p=2,ge.T=null;try{for(var K=h.onRecoverableError,be=0;be<F.length;be++){var Ve=F[be];K(Ve.value,{componentStack:Ve.stack})}}finally{ge.T=m,Pe.p=j}}(jf&3)!==0&&Y0(),Zu(h),j=h.pendingLanes,(_&4194090)!==0&&(j&42)!==0?h===Gg?jd++:(jd=0,Gg=h):jd=0,zf(0)}}function wx(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,kc(m)))}function Y0(h){return yx(),_x(),bx(),Wg()}function Wg(){if(Al!==5)return!1;var h=cf,m=Pp;Pp=0;var _=Di(jf),F=ge.T,j=Pe.p;try{Pe.p=32>_?32:_,ge.T=null,_=K0,K0=null;var K=cf,be=jf;if(Al=0,Ud=cf=null,jf=0,(As&6)!==0)throw Error(i(331));var Ve=As;if(As|=4,V0(K.current),Df(K,K.current,be,_),As=Ve,zf(0,!1),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Zr,K)}catch{}return!0}finally{Pe.p=j,ge.T=F,wx(h,m)}}function J0(h,m,_){m=fo(_,m),m=P0(h.stateNode,m,2),h=Er(h,m,2),h!==null&&(kr(h,2),Zu(h))}function ms(h,m,_){if(h.tag===3)J0(h,h,_);else for(;m!==null;){if(m.tag===3){J0(m,h,_);break}else if(m.tag===1){var F=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(lf===null||!lf.has(F))){h=fo(_,h),_=tx(2),F=Er(m,_,2),F!==null&&(D0(_,F,m,h),kr(F,2),Zu(F));break}}m=m.return}}function Vh(h,m,_){var F=h.pingCache;if(F===null){F=h.pingCache=new V2;var j=new Set;F.set(m,j)}else j=F.get(m),j===void 0&&(j=new Set,F.set(m,j));j.has(_)||(G0=!0,j.add(_),h=Rp.bind(null,h,m,_),m.then(h,h))}function Rp(h,m,_){var F=h.pingCache;F!==null&&F.delete(m),h.pingedLanes|=h.suspendedLanes&_,h.warmLanes&=~_,js===h&&(gn&_)===_&&(la===4||la===3&&(gn&62914560)===gn&&300>Pt()-Uf?(As&2)===0&&Hh(h,0):zg|=_,Rf===gn&&(Rf=0)),Zu(h)}function Of(h,m){m===0&&(m=Gt()),h=El(h,m),h!==null&&(kr(h,m),Zu(h))}function em(h){var m=h.memoizedState,_=0;m!==null&&(_=m.retryLane),Of(h,_)}function tm(h,m){var _=0;switch(h.tag){case 13:var F=h.stateNode,j=h.memoizedState;j!==null&&(_=j.retryLane);break;case 19:F=h.stateNode;break;case 22:F=h.stateNode._retryCache;break;default:throw Error(i(314))}F!==null&&F.delete(m),Of(h,_)}function K2(h,m){return at(h,m)}var rm=null,Qf=null,im=!1,nm=!1,sm=!1,uf=0;function Zu(h){h!==Qf&&h.next===null&&(Qf===null?rm=Qf=h:Qf=Qf.next=h),nm=!0,im||(im=!0,$2())}function zf(h,m){if(!sm&&nm){sm=!0;do for(var _=!1,F=rm;F!==null;){if(h!==0){var j=F.pendingLanes;if(j===0)var K=0;else{var be=F.suspendedLanes,Ve=F.pingedLanes;K=(1<<31-ot(42|h)+1)-1,K&=j&~(be&~Ve),K=K&201326741?K&201326741|1:K?K|2:0}K!==0&&(_=!0,Sx(F,K))}else K=gn,K=Ft(F,F===js?K:0,F.cancelPendingCommit!==null||F.timeoutHandle!==-1),(K&3)===0||vt(F,K)||(_=!0,Sx(F,K));F=F.next}while(_);sm=!1}}function W2(){$g()}function $g(){nm=im=!1;var h=0;uf!==0&&(Ix()&&(h=uf),uf=0);for(var m=Pt(),_=null,F=rm;F!==null;){var j=F.next,K=Bx(F,m);K===0?(F.next=null,_===null?rm=j:_.next=j,j===null&&(Qf=_)):(_=F,(h!==0||(K&3)!==0)&&(nm=!0)),F=j}zf(h)}function Bx(h,m){for(var _=h.suspendedLanes,F=h.pingedLanes,j=h.expirationTimes,K=h.pendingLanes&-62914561;0<K;){var be=31-ot(K),Ve=1<<be,bt=j[be];bt===-1?((Ve&_)===0||(Ve&F)!==0)&&(j[be]=Nt(Ve,m)):bt<=m&&(h.expiredLanes|=Ve),K&=~Ve}if(m=js,_=gn,_=Ft(h,h===m?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),F=h.callbackNode,_===0||h===m&&(fs===2||fs===9)||h.cancelPendingCommit!==null)return F!==null&&F!==null&&kt(F),h.callbackNode=null,h.callbackPriority=0;if((_&3)===0||vt(h,_)){if(m=_&-_,m===h.callbackPriority)return m;switch(F!==null&&kt(F),Di(_)){case 2:case 8:_=Wr;break;case 32:_=Hr;break;case 268435456:_=Gr;break;default:_=Hr}return F=Cx.bind(null,h),_=at(_,F),h.callbackPriority=m,h.callbackNode=_,m}return F!==null&&F!==null&&kt(F),h.callbackPriority=2,h.callbackNode=null,2}function Cx(h,m){if(Al!==0&&Al!==5)return h.callbackNode=null,h.callbackPriority=0,null;var _=h.callbackNode;if(Y0()&&h.callbackNode!==_)return null;var F=gn;return F=Ft(h,h===js?F:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),F===0?null:(fx(h,F,m),Bx(h,Pt()),h.callbackNode!=null&&h.callbackNode===_?Cx.bind(null,h):null)}function Sx(h,m){if(Y0())return null;fx(h,m,!0)}function $2(){Gf(function(){(As&6)!==0?at(or,W2):$g()})}function Xg(){return uf===0&&(uf=Ht()),uf}function Zg(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:el(""+h)}function Yg(h,m){var _=m.ownerDocument.createElement("input");return _.name=m.name,_.value=m.value,h.id&&_.setAttribute("form",h.id),m.parentNode.insertBefore(_,m),h=new FormData(h),_.parentNode.removeChild(_),h}function EA(h,m,_,F,j){if(m==="submit"&&_&&_.stateNode===j){var K=Zg((j[mi]||null).action),be=F.submitter;be&&(m=(m=be[mi]||null)?Zg(m.formAction):be.getAttribute("formAction"),m!==null&&(K=m,be=null));var Ve=new Wl("action","action",null,F,j);h.push({event:Ve,listeners:[{instance:null,listener:function(){if(F.defaultPrevented){if(uf!==0){var bt=be?Yg(j,be):new FormData(j);Br(_,{pending:!0,data:bt,method:j.method,action:K},null,bt)}}else typeof K=="function"&&(Ve.preventDefault(),bt=be?Yg(j,be):new FormData(j),Br(_,{pending:!0,data:bt,method:j.method,action:K},K,bt))},currentTarget:j}]})}}for(var Gh=0;Gh<Ao.length;Gh++){var am=Ao[Gh],Jg=am.toLowerCase(),X2=am[0].toUpperCase()+am.slice(1);nl(Jg,"on"+X2)}nl(ic,"onAnimationEnd"),nl(cu,"onAnimationIteration"),nl(Cc,"onAnimationStart"),nl("dblclick","onDoubleClick"),nl("focusin","onFocus"),nl("focusout","onBlur"),nl(Ah,"onTransitionRun"),nl(XA,"onTransitionStart"),nl(Pu,"onTransitionCancel"),nl(fh,"onTransitionEnd"),Mr("onMouseEnter",["mouseout","mouseover"]),Mr("onMouseLeave",["mouseout","mouseover"]),Mr("onPointerEnter",["pointerout","pointerover"]),Mr("onPointerLeave",["pointerout","pointerover"]),_r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_r("onBeforeInput",["compositionend","keypress","textInput","paste"]),_r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hf));function Ex(h,m){m=(m&4)!==0;for(var _=0;_<h.length;_++){var F=h[_],j=F.event;F=F.listeners;e:{var K=void 0;if(m)for(var be=F.length-1;0<=be;be--){var Ve=F[be],bt=Ve.instance,zt=Ve.currentTarget;if(Ve=Ve.listener,bt!==K&&j.isPropagationStopped())break e;K=Ve,j.currentTarget=zt;try{K(j)}catch(mr){ef(mr)}j.currentTarget=null,K=bt}else for(be=0;be<F.length;be++){if(Ve=F[be],bt=Ve.instance,zt=Ve.currentTarget,Ve=Ve.listener,bt!==K&&j.isPropagationStopped())break e;K=Ve,j.currentTarget=zt;try{K(j)}catch(mr){ef(mr)}j.currentTarget=null,K=bt}}}}function vn(h,m){var _=m[gi];_===void 0&&(_=m[gi]=new Set);var F=h+"__bubble";_.has(F)||(t1(m,h,2,!1),_.add(F))}function Up(h,m,_){var F=0;m&&(F|=4),t1(_,h,F,m)}var TA="_reactListening"+Math.random().toString(36).slice(2);function om(h){if(!h[TA]){h[TA]=!0,Xt.forEach(function(_){_!=="selectionchange"&&(e1.has(_)||Up(_,!1,h),Up(_,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[TA]||(m[TA]=!0,Up("selectionchange",!1,m))}}function t1(h,m,_,F){switch(Ct(m)){case 2:var j=Fe;break;case 8:j=Oe;break;default:j=Ze}_=j.bind(null,m,_,h),j=void 0,!Ka||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(j=!0),F?j!==void 0?h.addEventListener(m,_,{capture:!0,passive:j}):h.addEventListener(m,_,!0):j!==void 0?h.addEventListener(m,_,{passive:j}):h.addEventListener(m,_,!1)}function jp(h,m,_,F,j){var K=F;if((m&1)===0&&(m&2)===0&&F!==null)e:for(;;){if(F===null)return;var be=F.tag;if(be===3||be===4){var Ve=F.stateNode.containerInfo;if(Ve===j)break;if(be===4)for(be=F.return;be!==null;){var bt=be.tag;if((bt===3||bt===4)&&be.stateNode.containerInfo===j)return;be=be.return}for(;Ve!==null;){if(be=He(Ve),be===null)return;if(bt=be.tag,bt===5||bt===6||bt===26||bt===27){F=K=be;continue e}Ve=Ve.parentNode}}F=F.return}Hs(function(){var zt=K,mr=nu(_),xr=[];e:{var ir=Du.get(h);if(ir!==void 0){var ar=Wl,Ri=h;switch(h){case"keypress":if(kn(_)===0)break e;case"keydown":case"keyup":ar=Ui;break;case"focusin":Ri="focus",ar=Kn;break;case"focusout":Ri="blur",ar=Kn;break;case"beforeblur":case"afterblur":ar=Kn;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ar=Tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ar=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ar=Gs;break;case ic:case cu:case Cc:ar=Zl;break;case fh:ar=fa;break;case"scroll":case"scrollend":ar=$l;break;case"wheel":ar=ja;break;case"copy":case"cut":case"paste":ar=Y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ar=Xi;break;case"toggle":case"beforetoggle":ar=rl}var Ei=(m&4)!==0,Hn=!Ei&&(h==="scroll"||h==="scrollend"),Vt=Ei?ir!==null?ir+"Capture":null:ir;Ei=[];for(var Dt=zt,er;Dt!==null;){var vr=Dt;if(er=vr.stateNode,vr=vr.tag,vr!==5&&vr!==26&&vr!==27||er===null||Vt===null||(vr=ys(Dt,Vt),vr!=null&&Ei.push(zd(Dt,vr,er))),Hn)break;Dt=Dt.return}0<Ei.length&&(ir=new ar(ir,Ri,null,_,mr),xr.push({event:ir,listeners:Ei}))}}if((m&7)===0){e:{if(ir=h==="mouseover"||h==="pointerover",ar=h==="mouseout"||h==="pointerout",ir&&_!==Ti&&(Ri=_.relatedTarget||_.fromElement)&&(He(Ri)||Ri[ln]))break e;if((ar||ir)&&(ir=mr.window===mr?mr:(ir=mr.ownerDocument)?ir.defaultView||ir.parentWindow:window,ar?(Ri=_.relatedTarget||_.toElement,ar=zt,Ri=Ri?He(Ri):null,Ri!==null&&(Hn=a(Ri),Ei=Ri.tag,Ri!==Hn||Ei!==5&&Ei!==27&&Ei!==6)&&(Ri=null)):(ar=null,Ri=zt),ar!==Ri)){if(Ei=Tu,vr="onMouseLeave",Vt="onMouseEnter",Dt="mouse",(h==="pointerout"||h==="pointerover")&&(Ei=Xi,vr="onPointerLeave",Vt="onPointerEnter",Dt="pointer"),Hn=ar==null?ir:It(ar),er=Ri==null?ir:It(Ri),ir=new Ei(vr,Dt+"leave",ar,_,mr),ir.target=Hn,ir.relatedTarget=er,vr=null,He(mr)===zt&&(Ei=new Ei(Vt,Dt+"enter",Ri,_,mr),Ei.target=er,Ei.relatedTarget=Hn,vr=Ei),Hn=vr,ar&&Ri)t:{for(Ei=ar,Vt=Ri,Dt=0,er=Ei;er;er=Vf(er))Dt++;for(er=0,vr=Vt;vr;vr=Vf(vr))er++;for(;0<Dt-er;)Ei=Vf(Ei),Dt--;for(;0<er-Dt;)Vt=Vf(Vt),er--;for(;Dt--;){if(Ei===Vt||Vt!==null&&Ei===Vt.alternate)break t;Ei=Vf(Ei),Vt=Vf(Vt)}Ei=null}else Ei=null;ar!==null&&Tx(xr,ir,ar,Ei,!1),Ri!==null&&Hn!==null&&Tx(xr,Hn,Ri,Ei,!0)}}e:{if(ir=zt?It(zt):window,ar=ir.nodeName&&ir.nodeName.toLowerCase(),ar==="select"||ar==="input"&&ir.type==="file")var fi=wc;else if(Cl(ir))if(Bc)fi=bs;else{fi=AA;var xn=ec}else ar=ir.nodeName,!ar||ar.toLowerCase()!=="input"||ir.type!=="checkbox"&&ir.type!=="radio"?zt&&$i(zt.elementType)&&(fi=wc):fi=hh;if(fi&&(fi=fi(h,zt))){Nu(xr,fi,_,mr);break e}xn&&xn(h,ir,zt),h==="focusout"&&zt&&ir.type==="number"&&zt.memoizedProps.value!=null&&Nh(ir,"number",ir.value)}switch(xn=zt?It(zt):window,h){case"focusin":(Cl(xn)||xn.contentEditable==="true")&&(Po=xn,tc=zt,Ca=null);break;case"focusout":Ca=tc=Po=null;break;case"mousedown":rc=!0;break;case"contextmenu":case"mouseup":case"dragend":rc=!1,il(xr,_,mr);break;case"selectionchange":if(Ji)break;case"keydown":case"keyup":il(xr,_,mr)}var xi;if(wl)e:{switch(h){case"compositionstart":var Oi="onCompositionStart";break e;case"compositionend":Oi="onCompositionEnd";break e;case"compositionupdate":Oi="onCompositionUpdate";break e}Oi=void 0}else lo?Ps(h,_)&&(Oi="onCompositionEnd"):h==="keydown"&&_.keyCode===229&&(Oi="onCompositionStart");Oi&&(su&&_.locale!=="ko"&&(lo||Oi!=="onCompositionStart"?Oi==="onCompositionEnd"&&lo&&(xi=_n()):(Ls=mr,_a="value"in Ls?Ls.value:Ls.textContent,lo=!0)),xn=Hf(zt,Oi),0<xn.length&&(Oi=new ft(Oi,h,null,_,mr),xr.push({event:Oi,listeners:xn}),xi?Oi.data=xi:(xi=ku(_),xi!==null&&(Oi.data=xi)))),(xi=wa?hA(h,_):bc(h,_))&&(Oi=Hf(zt,"onBeforeInput"),0<Oi.length&&(xn=new ft("onBeforeInput","beforeinput",null,_,mr),xr.push({event:xn,listeners:Oi}),xn.data=xi)),EA(xr,h,zt,_,mr)}Ex(xr,m)})}function zd(h,m,_){return{instance:h,listener:m,currentTarget:_}}function Hf(h,m){for(var _=m+"Capture",F=[];h!==null;){var j=h,K=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||K===null||(j=ys(h,_),j!=null&&F.unshift(zd(h,j,K)),j=ys(h,m),j!=null&&F.push(zd(h,j,K))),h.tag===3)return F;h=h.return}return[]}function Vf(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function Tx(h,m,_,F,j){for(var K=m._reactName,be=[];_!==null&&_!==F;){var Ve=_,bt=Ve.alternate,zt=Ve.stateNode;if(Ve=Ve.tag,bt!==null&&bt===F)break;Ve!==5&&Ve!==26&&Ve!==27||zt===null||(bt=zt,j?(zt=ys(_,K),zt!=null&&be.unshift(zd(_,zt,bt))):j||(zt=ys(_,K),zt!=null&&be.push(zd(_,zt,bt)))),_=_.return}be.length!==0&&h.push({event:m,listeners:be})}var Z2=/\r\n?/g,Y2=/\u0000|\uFFFD/g;function Fx(h){return(typeof h=="string"?h:""+h).replace(Z2,`
`).replace(Y2,"")}function kx(h,m){return m=Fx(m),Fx(h)===m}function Hd(){}function Pn(h,m,_,F,j,K){switch(_){case"children":typeof F=="string"?m==="body"||m==="textarea"&&F===""||Jo(h,F):(typeof F=="number"||typeof F=="bigint")&&m!=="body"&&Jo(h,""+F);break;case"className":Ni(h,"class",F);break;case"tabIndex":Ni(h,"tabindex",F);break;case"dir":case"role":case"viewBox":case"width":case"height":Ni(h,_,F);break;case"style":ya(h,F,K);break;case"data":if(m!=="object"){Ni(h,"data",F);break}case"src":case"href":if(F===""&&(m!=="a"||_!=="href")){h.removeAttribute(_);break}if(F==null||typeof F=="function"||typeof F=="symbol"||typeof F=="boolean"){h.removeAttribute(_);break}F=el(""+F),h.setAttribute(_,F);break;case"action":case"formAction":if(typeof F=="function"){h.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof K=="function"&&(_==="formAction"?(m!=="input"&&Pn(h,m,"name",j.name,j,null),Pn(h,m,"formEncType",j.formEncType,j,null),Pn(h,m,"formMethod",j.formMethod,j,null),Pn(h,m,"formTarget",j.formTarget,j,null)):(Pn(h,m,"encType",j.encType,j,null),Pn(h,m,"method",j.method,j,null),Pn(h,m,"target",j.target,j,null)));if(F==null||typeof F=="symbol"||typeof F=="boolean"){h.removeAttribute(_);break}F=el(""+F),h.setAttribute(_,F);break;case"onClick":F!=null&&(h.onclick=Hd);break;case"onScroll":F!=null&&vn("scroll",h);break;case"onScrollEnd":F!=null&&vn("scrollend",h);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(i(61));if(_=F.__html,_!=null){if(j.children!=null)throw Error(i(60));h.innerHTML=_}}break;case"multiple":h.multiple=F&&typeof F!="function"&&typeof F!="symbol";break;case"muted":h.muted=F&&typeof F!="function"&&typeof F!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(F==null||typeof F=="function"||typeof F=="boolean"||typeof F=="symbol"){h.removeAttribute("xlink:href");break}_=el(""+F),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":F!=null&&typeof F!="function"&&typeof F!="symbol"?h.setAttribute(_,""+F):h.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":F&&typeof F!="function"&&typeof F!="symbol"?h.setAttribute(_,""):h.removeAttribute(_);break;case"capture":case"download":F===!0?h.setAttribute(_,""):F!==!1&&F!=null&&typeof F!="function"&&typeof F!="symbol"?h.setAttribute(_,F):h.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":F!=null&&typeof F!="function"&&typeof F!="symbol"&&!isNaN(F)&&1<=F?h.setAttribute(_,F):h.removeAttribute(_);break;case"rowSpan":case"start":F==null||typeof F=="function"||typeof F=="symbol"||isNaN(F)?h.removeAttribute(_):h.setAttribute(_,F);break;case"popover":vn("beforetoggle",h),vn("toggle",h),ki(h,"popover",F);break;case"xlinkActuate":_i(h,"http://www.w3.org/1999/xlink","xlink:actuate",F);break;case"xlinkArcrole":_i(h,"http://www.w3.org/1999/xlink","xlink:arcrole",F);break;case"xlinkRole":_i(h,"http://www.w3.org/1999/xlink","xlink:role",F);break;case"xlinkShow":_i(h,"http://www.w3.org/1999/xlink","xlink:show",F);break;case"xlinkTitle":_i(h,"http://www.w3.org/1999/xlink","xlink:title",F);break;case"xlinkType":_i(h,"http://www.w3.org/1999/xlink","xlink:type",F);break;case"xmlBase":_i(h,"http://www.w3.org/XML/1998/namespace","xml:base",F);break;case"xmlLang":_i(h,"http://www.w3.org/XML/1998/namespace","xml:lang",F);break;case"xmlSpace":_i(h,"http://www.w3.org/XML/1998/namespace","xml:space",F);break;case"is":ki(h,"is",F);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=Eu.get(_)||_,ki(h,_,F))}}function lm(h,m,_,F,j,K){switch(_){case"style":ya(h,F,K);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(i(61));if(_=F.__html,_!=null){if(j.children!=null)throw Error(i(60));h.innerHTML=_}}break;case"children":typeof F=="string"?Jo(h,F):(typeof F=="number"||typeof F=="bigint")&&Jo(h,""+F);break;case"onScroll":F!=null&&vn("scroll",h);break;case"onScrollEnd":F!=null&&vn("scrollend",h);break;case"onClick":F!=null&&(h.onclick=Hd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jt.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(j=_.endsWith("Capture"),m=_.slice(2,j?_.length-7:void 0),K=h[mi]||null,K=K!=null?K[_]:null,typeof K=="function"&&h.removeEventListener(m,K,j),typeof F=="function")){typeof K!="function"&&K!==null&&(_ in h?h[_]=null:h.hasAttribute(_)&&h.removeAttribute(_)),h.addEventListener(m,F,j);break e}_ in h?h[_]=F:F===!0?h.setAttribute(_,""):ki(h,_,F)}}}function zo(h,m,_){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vn("error",h),vn("load",h);var F=!1,j=!1,K;for(K in _)if(_.hasOwnProperty(K)){var be=_[K];if(be!=null)switch(K){case"src":F=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Pn(h,m,K,be,_,null)}}j&&Pn(h,m,"srcSet",_.srcSet,_,null),F&&Pn(h,m,"src",_.src,_,null);return;case"input":vn("invalid",h);var Ve=K=be=j=null,bt=null,zt=null;for(F in _)if(_.hasOwnProperty(F)){var mr=_[F];if(mr!=null)switch(F){case"name":j=mr;break;case"type":be=mr;break;case"checked":bt=mr;break;case"defaultChecked":zt=mr;break;case"value":K=mr;break;case"defaultValue":Ve=mr;break;case"children":case"dangerouslySetInnerHTML":if(mr!=null)throw Error(i(137,m));break;default:Pn(h,m,F,mr,_,null)}}ch(h,K,Ve,bt,zt,be,j,!1),Xo(h);return;case"select":vn("invalid",h),F=be=K=null;for(j in _)if(_.hasOwnProperty(j)&&(Ve=_[j],Ve!=null))switch(j){case"value":K=Ve;break;case"defaultValue":be=Ve;break;case"multiple":F=Ve;default:Pn(h,m,j,Ve,_,null)}m=K,_=be,h.multiple=!!F,m!=null?ko(h,!!F,m,!1):_!=null&&ko(h,!!F,_,!0);return;case"textarea":vn("invalid",h),K=j=F=null;for(be in _)if(_.hasOwnProperty(be)&&(Ve=_[be],Ve!=null))switch(be){case"value":F=Ve;break;case"defaultValue":j=Ve;break;case"children":K=Ve;break;case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(i(91));break;default:Pn(h,m,be,Ve,_,null)}uA(h,F,j,K),Xo(h);return;case"option":for(bt in _)if(_.hasOwnProperty(bt)&&(F=_[bt],F!=null))switch(bt){case"selected":h.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Pn(h,m,bt,F,_,null)}return;case"dialog":vn("beforetoggle",h),vn("toggle",h),vn("cancel",h),vn("close",h);break;case"iframe":case"object":vn("load",h);break;case"video":case"audio":for(F=0;F<hf.length;F++)vn(hf[F],h);break;case"image":vn("error",h),vn("load",h);break;case"details":vn("toggle",h);break;case"embed":case"source":case"link":vn("error",h),vn("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(zt in _)if(_.hasOwnProperty(zt)&&(F=_[zt],F!=null))switch(zt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Pn(h,m,zt,F,_,null)}return;default:if($i(m)){for(mr in _)_.hasOwnProperty(mr)&&(F=_[mr],F!==void 0&&lm(h,m,mr,F,_,void 0));return}}for(Ve in _)_.hasOwnProperty(Ve)&&(F=_[Ve],F!=null&&Pn(h,m,Ve,F,_,null))}function Nx(h,m,_,F){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,K=null,be=null,Ve=null,bt=null,zt=null,mr=null;for(ar in _){var xr=_[ar];if(_.hasOwnProperty(ar)&&xr!=null)switch(ar){case"checked":break;case"value":break;case"defaultValue":bt=xr;default:F.hasOwnProperty(ar)||Pn(h,m,ar,null,F,xr)}}for(var ir in F){var ar=F[ir];if(xr=_[ir],F.hasOwnProperty(ir)&&(ar!=null||xr!=null))switch(ir){case"type":K=ar;break;case"name":j=ar;break;case"checked":zt=ar;break;case"defaultChecked":mr=ar;break;case"value":be=ar;break;case"defaultValue":Ve=ar;break;case"children":case"dangerouslySetInnerHTML":if(ar!=null)throw Error(i(137,m));break;default:ar!==xr&&Pn(h,m,ir,ar,F,xr)}}Ra(h,be,Ve,bt,zt,mr,K,j);return;case"select":ar=be=Ve=ir=null;for(K in _)if(bt=_[K],_.hasOwnProperty(K)&&bt!=null)switch(K){case"value":break;case"multiple":ar=bt;default:F.hasOwnProperty(K)||Pn(h,m,K,null,F,bt)}for(j in F)if(K=F[j],bt=_[j],F.hasOwnProperty(j)&&(K!=null||bt!=null))switch(j){case"value":ir=K;break;case"defaultValue":Ve=K;break;case"multiple":be=K;default:K!==bt&&Pn(h,m,j,K,F,bt)}m=Ve,_=be,F=ar,ir!=null?ko(h,!!_,ir,!1):!!F!=!!_&&(m!=null?ko(h,!!_,m,!0):ko(h,!!_,_?[]:"",!1));return;case"textarea":ar=ir=null;for(Ve in _)if(j=_[Ve],_.hasOwnProperty(Ve)&&j!=null&&!F.hasOwnProperty(Ve))switch(Ve){case"value":break;case"children":break;default:Pn(h,m,Ve,null,F,j)}for(be in F)if(j=F[be],K=_[be],F.hasOwnProperty(be)&&(j!=null||K!=null))switch(be){case"value":ir=j;break;case"defaultValue":ar=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(91));break;default:j!==K&&Pn(h,m,be,j,F,K)}Yo(h,ir,ar);return;case"option":for(var Ri in _)if(ir=_[Ri],_.hasOwnProperty(Ri)&&ir!=null&&!F.hasOwnProperty(Ri))switch(Ri){case"selected":h.selected=!1;break;default:Pn(h,m,Ri,null,F,ir)}for(bt in F)if(ir=F[bt],ar=_[bt],F.hasOwnProperty(bt)&&ir!==ar&&(ir!=null||ar!=null))switch(bt){case"selected":h.selected=ir&&typeof ir!="function"&&typeof ir!="symbol";break;default:Pn(h,m,bt,ir,F,ar)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ei in _)ir=_[Ei],_.hasOwnProperty(Ei)&&ir!=null&&!F.hasOwnProperty(Ei)&&Pn(h,m,Ei,null,F,ir);for(zt in F)if(ir=F[zt],ar=_[zt],F.hasOwnProperty(zt)&&ir!==ar&&(ir!=null||ar!=null))switch(zt){case"children":case"dangerouslySetInnerHTML":if(ir!=null)throw Error(i(137,m));break;default:Pn(h,m,zt,ir,F,ar)}return;default:if($i(m)){for(var Hn in _)ir=_[Hn],_.hasOwnProperty(Hn)&&ir!==void 0&&!F.hasOwnProperty(Hn)&&lm(h,m,Hn,void 0,F,ir);for(mr in F)ir=F[mr],ar=_[mr],!F.hasOwnProperty(mr)||ir===ar||ir===void 0&&ar===void 0||lm(h,m,mr,ir,F,ar);return}}for(var Vt in _)ir=_[Vt],_.hasOwnProperty(Vt)&&ir!=null&&!F.hasOwnProperty(Vt)&&Pn(h,m,Vt,null,F,ir);for(xr in F)ir=F[xr],ar=_[xr],!F.hasOwnProperty(xr)||ir===ar||ir==null&&ar==null||Pn(h,m,xr,ir,F,ar)}var cm=null,um=null;function Vd(h){return h.nodeType===9?h:h.ownerDocument}function r1(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gd(h,m){if(h===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&m==="foreignObject"?0:h}function hm(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Op=null;function Ix(){var h=window.event;return h&&h.type==="popstate"?h===Op?!1:(Op=h,!0):(Op=null,!1)}var Rc=typeof setTimeout=="function"?setTimeout:void 0,qd=typeof clearTimeout=="function"?clearTimeout:void 0,Kd=typeof Promise=="function"?Promise:void 0,Gf=typeof queueMicrotask=="function"?queueMicrotask:typeof Kd<"u"?function(h){return Kd.resolve(null).then(h).catch(Lx)}:Rc;function Lx(h){setTimeout(function(){throw h})}function FA(h){return h==="head"}function i1(h,m){var _=m,F=0,j=0;do{var K=_.nextSibling;if(h.removeChild(_),K&&K.nodeType===8)if(_=K.data,_==="/$"){if(0<F&&8>F){_=F;var be=h.ownerDocument;if(_&1&&Qp(be.documentElement),_&2&&Qp(be.body),_&4)for(_=be.head,Qp(_),be=_.firstChild;be;){var Ve=be.nextSibling,bt=be.nodeName;be[$e]||bt==="SCRIPT"||bt==="STYLE"||bt==="LINK"&&be.rel.toLowerCase()==="stylesheet"||_.removeChild(be),be=Ve}}if(j===0){h.removeChild(K),fl(m);return}j--}else _==="$"||_==="$?"||_==="$!"?j++:F=_.charCodeAt(0)-48;else F=0;_=K}while(_);fl(m)}function Am(h){var m=h.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var _=m;switch(m=m.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":Am(_),it(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}h.removeChild(_)}}function J2(h,m,_,F){for(;h.nodeType===1;){var j=_;if(h.nodeName.toLowerCase()!==m.toLowerCase()){if(!F&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(F){if(!h[$e])switch(m){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(K=h.getAttribute("rel"),K==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(K!==j.rel||h.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||h.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||h.getAttribute("title")!==(j.title==null?null:j.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(K=h.getAttribute("src"),(K!==(j.src==null?null:j.src)||h.getAttribute("type")!==(j.type==null?null:j.type)||h.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&K&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(m==="input"&&h.type==="hidden"){var K=j.name==null?null:""+j.name;if(j.type==="hidden"&&h.getAttribute("name")===K)return h}else return h;if(h=Yu(h.nextSibling),h===null)break}return null}function Mx(h,m,_){if(m==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!_||(h=Yu(h.nextSibling),h===null))return null;return h}function qh(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function Px(h,m){var _=h.ownerDocument;if(h.data!=="$?"||_.readyState==="complete")m();else{var F=function(){m(),_.removeEventListener("DOMContentLoaded",F)};_.addEventListener("DOMContentLoaded",F),h._reactRetry=F}}function Yu(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return h}var fm=null;function n1(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var _=h.data;if(_==="$"||_==="$!"||_==="$?"){if(m===0)return h;m--}else _==="/$"&&m++}h=h.previousSibling}return null}function Dx(h,m,_){switch(m=Vd(_),h){case"html":if(h=m.documentElement,!h)throw Error(i(452));return h;case"head":if(h=m.head,!h)throw Error(i(453));return h;case"body":if(h=m.body,!h)throw Error(i(454));return h;default:throw Error(i(451))}}function Qp(h){for(var m=h.attributes;m.length;)h.removeAttributeNode(m[0]);it(h)}var xu=new Map,s1=new Set;function qf(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var Kh=Pe.d;Pe.d={f:dm,r:pm,D:eb,C:tb,L:Wd,m:Ho,X:Ux,S:a1,M:jx};function dm(){var h=Kh.f(),m=W0();return h||m}function pm(h){var m=nt(h);m!==null&&m.tag===5&&m.type==="form"?Kr(m):Kh.r(h)}var kA=typeof document>"u"?null:document;function Rx(h,m,_){var F=kA;if(F&&typeof m=="string"&&m){var j=Fn(m);j='link[rel="'+h+'"][href="'+j+'"]',typeof _=="string"&&(j+='[crossorigin="'+_+'"]'),s1.has(j)||(s1.add(j),h={rel:h,crossOrigin:_,href:m},F.querySelector(j)===null&&(m=F.createElement("link"),zo(m,"link",h),Qt(m),F.head.appendChild(m)))}}function eb(h){Kh.D(h),Rx("dns-prefetch",h,null)}function tb(h,m){Kh.C(h,m),Rx("preconnect",h,m)}function Wd(h,m,_){Kh.L(h,m,_);var F=kA;if(F&&h&&m){var j='link[rel="preload"][as="'+Fn(m)+'"]';m==="image"&&_&&_.imageSrcSet?(j+='[imagesrcset="'+Fn(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(j+='[imagesizes="'+Fn(_.imageSizes)+'"]')):j+='[href="'+Fn(h)+'"]';var K=j;switch(m){case"style":K=$d(h);break;case"script":K=Kf(h)}xu.has(K)||(h=x({rel:"preload",href:m==="image"&&_&&_.imageSrcSet?void 0:h,as:m},_),xu.set(K,h),F.querySelector(j)!==null||m==="style"&&F.querySelector(Xd(K))||m==="script"&&F.querySelector(Wf(K))||(m=F.createElement("link"),zo(m,"link",h),Qt(m),F.head.appendChild(m)))}}function Ho(h,m){Kh.m(h,m);var _=kA;if(_&&h){var F=m&&typeof m.as=="string"?m.as:"script",j='link[rel="modulepreload"][as="'+Fn(F)+'"][href="'+Fn(h)+'"]',K=j;switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":K=Kf(h)}if(!xu.has(K)&&(h=x({rel:"modulepreload",href:h},m),xu.set(K,h),_.querySelector(j)===null)){switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(Wf(K)))return}F=_.createElement("link"),zo(F,"link",h),Qt(F),_.head.appendChild(F)}}}function a1(h,m,_){Kh.S(h,m,_);var F=kA;if(F&&h){var j=sr(F).hoistableStyles,K=$d(h);m=m||"default";var be=j.get(K);if(!be){var Ve={loading:0,preload:null};if(be=F.querySelector(Xd(K)))Ve.loading=5;else{h=x({rel:"stylesheet",href:h,"data-precedence":m},_),(_=xu.get(K))&&$f(h,_);var bt=be=F.createElement("link");Qt(bt),zo(bt,"link",h),bt._p=new Promise(function(zt,mr){bt.onload=zt,bt.onerror=mr}),bt.addEventListener("load",function(){Ve.loading|=1}),bt.addEventListener("error",function(){Ve.loading|=2}),Ve.loading|=4,zp(be,m,F)}be={type:"stylesheet",instance:be,count:1,state:Ve},j.set(K,be)}}}function Ux(h,m){Kh.X(h,m);var _=kA;if(_&&h){var F=sr(_).hoistableScripts,j=Kf(h),K=F.get(j);K||(K=_.querySelector(Wf(j)),K||(h=x({src:h,async:!0},m),(m=xu.get(j))&&Hp(h,m),K=_.createElement("script"),Qt(K),zo(K,"link",h),_.head.appendChild(K)),K={type:"script",instance:K,count:1,state:null},F.set(j,K))}}function jx(h,m){Kh.M(h,m);var _=kA;if(_&&h){var F=sr(_).hoistableScripts,j=Kf(h),K=F.get(j);K||(K=_.querySelector(Wf(j)),K||(h=x({src:h,async:!0,type:"module"},m),(m=xu.get(j))&&Hp(h,m),K=_.createElement("script"),Qt(K),zo(K,"link",h),_.head.appendChild(K)),K={type:"script",instance:K,count:1,state:null},F.set(j,K))}}function mm(h,m,_,F){var j=(j=Le.current)?qf(j):null;if(!j)throw Error(i(446));switch(h){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(m=$d(_.href),_=sr(j).hoistableStyles,F=_.get(m),F||(F={type:"style",instance:null,count:0,state:null},_.set(m,F)),F):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){h=$d(_.href);var K=sr(j).hoistableStyles,be=K.get(h);if(be||(j=j.ownerDocument||j,be={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},K.set(h,be),(K=j.querySelector(Xd(h)))&&!K._p&&(be.instance=K,be.state.loading=5),xu.has(h)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},xu.set(h,_),K||rb(j,h,_,be.state))),m&&F===null)throw Error(i(528,""));return be}if(m&&F!==null)throw Error(i(529,""));return null;case"script":return m=_.async,_=_.src,typeof _=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Kf(_),_=sr(j).hoistableScripts,F=_.get(m),F||(F={type:"script",instance:null,count:0,state:null},_.set(m,F)),F):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,h))}}function $d(h){return'href="'+Fn(h)+'"'}function Xd(h){return'link[rel="stylesheet"]['+h+"]"}function o1(h){return x({},h,{"data-precedence":h.precedence,precedence:null})}function rb(h,m,_,F){h.querySelector('link[rel="preload"][as="style"]['+m+"]")?F.loading=1:(m=h.createElement("link"),F.preload=m,m.addEventListener("load",function(){return F.loading|=1}),m.addEventListener("error",function(){return F.loading|=2}),zo(m,"link",_),Qt(m),h.head.appendChild(m))}function Kf(h){return'[src="'+Fn(h)+'"]'}function Wf(h){return"script[async]"+h}function gm(h,m,_){if(m.count++,m.instance===null)switch(m.type){case"style":var F=h.querySelector('style[data-href~="'+Fn(_.href)+'"]');if(F)return m.instance=F,Qt(F),F;var j=x({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return F=(h.ownerDocument||h).createElement("style"),Qt(F),zo(F,"style",j),zp(F,_.precedence,h),m.instance=F;case"stylesheet":j=$d(_.href);var K=h.querySelector(Xd(j));if(K)return m.state.loading|=4,m.instance=K,Qt(K),K;F=o1(_),(j=xu.get(j))&&$f(F,j),K=(h.ownerDocument||h).createElement("link"),Qt(K);var be=K;return be._p=new Promise(function(Ve,bt){be.onload=Ve,be.onerror=bt}),zo(K,"link",F),m.state.loading|=4,zp(K,_.precedence,h),m.instance=K;case"script":return K=Kf(_.src),(j=h.querySelector(Wf(K)))?(m.instance=j,Qt(j),j):(F=_,(j=xu.get(K))&&(F=x({},_),Hp(F,j)),h=h.ownerDocument||h,j=h.createElement("script"),Qt(j),zo(j,"link",F),h.head.appendChild(j),m.instance=j);case"void":return null;default:throw Error(i(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(F=m.instance,m.state.loading|=4,zp(F,_.precedence,h));return m.instance}function zp(h,m,_){for(var F=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=F.length?F[F.length-1]:null,K=j,be=0;be<F.length;be++){var Ve=F[be];if(Ve.dataset.precedence===m)K=Ve;else if(K!==j)break}K?K.parentNode.insertBefore(h,K.nextSibling):(m=_.nodeType===9?_.head:_,m.insertBefore(h,m.firstChild))}function $f(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.title==null&&(h.title=m.title)}function Hp(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.integrity==null&&(h.integrity=m.integrity)}var Vp=null;function vm(h,m,_){if(Vp===null){var F=new Map,j=Vp=new Map;j.set(_,F)}else j=Vp,F=j.get(_),F||(F=new Map,j.set(_,F));if(F.has(h))return F;for(F.set(h,null),_=_.getElementsByTagName(h),j=0;j<_.length;j++){var K=_[j];if(!(K[$e]||K[Wi]||h==="link"&&K.getAttribute("rel")==="stylesheet")&&K.namespaceURI!=="http://www.w3.org/2000/svg"){var be=K.getAttribute(m)||"";be=h+be;var Ve=F.get(be);Ve?Ve.push(K):F.set(be,[K])}}return F}function Gp(h,m,_){h=h.ownerDocument||h,h.head.insertBefore(_,m==="title"?h.querySelector("head > title"):null)}function qp(h,m,_){if(_===1||m.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return h=m.disabled,typeof m.precedence=="string"&&h==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function xm(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var Xf=null;function l1(){}function ib(h,m,_){if(Xf===null)throw Error(i(475));var F=Xf;if(m.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var j=$d(_.href),K=h.querySelector(Xd(j));if(K){h=K._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(F.count++,F=l.bind(F),h.then(F,F)),m.state.loading|=4,m.instance=K,Qt(K);return}K=h.ownerDocument||h,_=o1(_),(j=xu.get(j))&&$f(_,j),K=K.createElement("link"),Qt(K);var be=K;be._p=new Promise(function(Ve,bt){be.onload=Ve,be.onerror=bt}),zo(K,"link",_),m.instance=K}F.stylesheets===null&&(F.stylesheets=new Map),F.stylesheets.set(m,h),(h=m.state.preload)&&(m.state.loading&3)===0&&(F.count++,m=l.bind(F),h.addEventListener("load",m),h.addEventListener("error",m))}}function A(){if(Xf===null)throw Error(i(475));var h=Xf;return h.stylesheets&&h.count===0&&v(h,h.stylesheets),0<h.count?function(m){var _=setTimeout(function(){if(h.stylesheets&&v(h,h.stylesheets),h.unsuspend){var F=h.unsuspend;h.unsuspend=null,F()}},6e4);return h.unsuspend=m,function(){h.unsuspend=null,clearTimeout(_)}}:null}function l(){if(this.count--,this.count===0){if(this.stylesheets)v(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var u=null;function v(h,m){h.stylesheets=null,h.unsuspend!==null&&(h.count++,u=new Map,m.forEach(b,h),u=null,l.call(h))}function b(h,m){if(!(m.state.loading&4)){var _=u.get(h);if(_)var F=_.get(null);else{_=new Map,u.set(h,_);for(var j=h.querySelectorAll("link[data-precedence],style[data-precedence]"),K=0;K<j.length;K++){var be=j[K];(be.nodeName==="LINK"||be.getAttribute("media")!=="not all")&&(_.set(be.dataset.precedence,be),F=be)}F&&_.set(null,F)}j=m.instance,be=j.getAttribute("data-precedence"),K=_.get(be)||F,K===F&&_.set(null,j),_.set(be,j),this.count++,F=l.bind(this),j.addEventListener("load",F),j.addEventListener("error",F),K?K.parentNode.insertBefore(j,K.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(j,h.firstChild)),m.state.loading|=4}}var E={$$typeof:G,Provider:null,Consumer:null,_currentValue:Ye,_currentValue2:Ye,_threadCount:0};function k(h,m,_,F,j,K,be,Ve){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.hiddenUpdates=Fr(null),this.identifierPrefix=F,this.onUncaughtError=j,this.onCaughtError=K,this.onRecoverableError=be,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ve,this.incompleteTransitions=new Map}function P(h,m,_,F,j,K,be,Ve,bt,zt,mr,xr){return h=new k(h,m,_,be,Ve,bt,zt,xr),m=1,K===!0&&(m|=24),K=pa(3,null,null,m),h.current=K,K.stateNode=h,m=ZA(),m.refCount++,h.pooledCache=m,m.refCount++,K.memoizedState={element:F,isDehydrated:_,cache:m},Rt(K),h}function Q(h){return h?(h=Ds,h):Ds}function q(h,m,_,F,j,K){j=Q(j),F.context===null?F.context=j:F.pendingContext=j,F=dr(m),F.payload={element:_},K=K===void 0?null:K,K!==null&&(F.callback=K),_=Er(h,F,m),_!==null&&(Dc(_,h,m),yr(_,h,m))}function J(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var _=h.retryLane;h.retryLane=_!==0&&_<m?_:m}}function oe(h,m){J(h,m),(h=h.alternate)&&J(h,m)}function ve(h){if(h.tag===13){var m=El(h,67108864);m!==null&&Dc(m,h,67108864),oe(h,67108864)}}var Be=!0;function Fe(h,m,_,F){var j=ge.T;ge.T=null;var K=Pe.p;try{Pe.p=2,Ze(h,m,_,F)}finally{Pe.p=K,ge.T=j}}function Oe(h,m,_,F){var j=ge.T;ge.T=null;var K=Pe.p;try{Pe.p=8,Ze(h,m,_,F)}finally{Pe.p=K,ge.T=j}}function Ze(h,m,_,F){if(Be){var j=ht(F);if(j===null)jp(h,m,F,Ut,_),Ur(h,F);else if(Si(j,h,m,_,F))F.stopPropagation();else if(Ur(h,F),m&4&&-1<Rr.indexOf(h)){for(;j!==null;){var K=nt(j);if(K!==null)switch(K.tag){case 3:if(K=K.stateNode,K.current.memoizedState.isDehydrated){var be=At(K.pendingLanes);if(be!==0){var Ve=K;for(Ve.pendingLanes|=2,Ve.entangledLanes|=2;be;){var bt=1<<31-ot(be);Ve.entanglements[1]|=bt,be&=~bt}Zu(K),(As&6)===0&&(Mp=Pt()+500,zf(0))}}break;case 13:Ve=El(K,2),Ve!==null&&Dc(Ve,K,2),W0(),oe(K,2)}if(K=ht(F),K===null&&jp(h,m,F,Ut,_),K===j)break;j=K}j!==null&&F.stopPropagation()}else jp(h,m,F,null,_)}}function ht(h){return h=nu(h),_t(h)}var Ut=null;function _t(h){if(Ut=null,h=He(h),h!==null){var m=a(h);if(m===null)h=null;else{var _=m.tag;if(_===13){if(h=c(m),h!==null)return h;h=null}else if(_===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null)}}return Ut=h,null}function Ct(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sr()){case or:return 2;case Wr:return 8;case Hr:case ti:return 32;case Gr:return 268435456;default:return 32}default:return 32}}var Jt=!1,nr=null,gr=null,Lr=null,Nr=new Map,Pr=new Map,Jr=[],Rr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ur(h,m){switch(h){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":Nr.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pr.delete(m.pointerId)}}function fr(h,m,_,F,j,K){return h===null||h.nativeEvent!==K?(h={blockedOn:m,domEventName:_,eventSystemFlags:F,nativeEvent:K,targetContainers:[j]},m!==null&&(m=nt(m),m!==null&&ve(m)),h):(h.eventSystemFlags|=F,m=h.targetContainers,j!==null&&m.indexOf(j)===-1&&m.push(j),h)}function Si(h,m,_,F,j){switch(m){case"focusin":return nr=fr(nr,h,m,_,F,j),!0;case"dragenter":return gr=fr(gr,h,m,_,F,j),!0;case"mouseover":return Lr=fr(Lr,h,m,_,F,j),!0;case"pointerover":var K=j.pointerId;return Nr.set(K,fr(Nr.get(K)||null,h,m,_,F,j)),!0;case"gotpointercapture":return K=j.pointerId,Pr.set(K,fr(Pr.get(K)||null,h,m,_,F,j)),!0}return!1}function Pi(h){var m=He(h.target);if(m!==null){var _=a(m);if(_!==null){if(m=_.tag,m===13){if(m=c(_),m!==null){h.blockedOn=m,Yr(h.priority,function(){if(_.tag===13){var F=Hl();F=jr(F);var j=El(_,F);j!==null&&Dc(j,_,F),oe(_,F)}});return}}else if(m===3&&_.stateNode.current.memoizedState.isDehydrated){h.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}h.blockedOn=null}function hi(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var _=ht(h.nativeEvent);if(_===null){_=h.nativeEvent;var F=new _.constructor(_.type,_);Ti=F,_.target.dispatchEvent(F),Ti=null}else return m=nt(_),m!==null&&ve(m),h.blockedOn=_,!1;m.shift()}return!0}function ii(h,m,_){hi(h)&&_.delete(m)}function hn(){Jt=!1,nr!==null&&hi(nr)&&(nr=null),gr!==null&&hi(gr)&&(gr=null),Lr!==null&&hi(Lr)&&(Lr=null),Nr.forEach(ii),Pr.forEach(ii)}function gs(h,m){h.blockedOn===m&&(h.blockedOn=null,Jt||(Jt=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hn)))}var ca=null;function _o(h){ca!==h&&(ca=h,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ca===h&&(ca=null);for(var m=0;m<h.length;m+=3){var _=h[m],F=h[m+1],j=h[m+2];if(typeof F!="function"){if(_t(F||_)===null)continue;break}var K=nt(_);K!==null&&(h.splice(m,3),m-=3,Br(K,{pending:!0,data:j,method:_.method,action:F},F,j))}}))}function fl(h){function m(bt){return gs(bt,h)}nr!==null&&gs(nr,h),gr!==null&&gs(gr,h),Lr!==null&&gs(Lr,h),Nr.forEach(m),Pr.forEach(m);for(var _=0;_<Jr.length;_++){var F=Jr[_];F.blockedOn===h&&(F.blockedOn=null)}for(;0<Jr.length&&(_=Jr[0],_.blockedOn===null);)Pi(_),_.blockedOn===null&&Jr.shift();if(_=(h.ownerDocument||h).$$reactFormReplay,_!=null)for(F=0;F<_.length;F+=3){var j=_[F],K=_[F+1],be=j[mi]||null;if(typeof K=="function")be||_o(_);else if(be){var Ve=null;if(K&&K.hasAttribute("formAction")){if(j=K,be=K[mi]||null)Ve=be.formAction;else if(_t(j)!==null)continue}else Ve=be.action;typeof Ve=="function"?_[F+1]=Ve:(_.splice(F,3),F-=3),_o(_)}}}function dl(h){this._internalRoot=h}Ea.prototype.render=dl.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(i(409));var _=m.current,F=Hl();q(_,F,h,m,null,null)},Ea.prototype.unmount=dl.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;q(h.current,2,null,h,null,null),W0(),m[ln]=null}};function Ea(h){this._internalRoot=h}Ea.prototype.unstable_scheduleHydration=function(h){if(h){var m=In();h={blockedOn:null,target:h,priority:m};for(var _=0;_<Jr.length&&m!==0&&m<Jr[_].priority;_++);Jr.splice(_,0,h),_===0&&Pi(h)}};var Fs=t.version;if(Fs!=="19.1.1")throw Error(i(527,Fs,"19.1.1"));Pe.findDOMNode=function(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=d(m),h=h!==null?g(h):null,h=h===null?null:h.stateNode,h};var ro={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{Zr=Ta.inject(ro),Xr=Ta}catch{}}return u1.createRoot=function(h,m){if(!n(h))throw Error(i(299));var _=!1,F="",j=Fd,K=tf,be=bg,Ve=null;return m!=null&&(m.unstable_strictMode===!0&&(_=!0),m.identifierPrefix!==void 0&&(F=m.identifierPrefix),m.onUncaughtError!==void 0&&(j=m.onUncaughtError),m.onCaughtError!==void 0&&(K=m.onCaughtError),m.onRecoverableError!==void 0&&(be=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Ve=m.unstable_transitionCallbacks)),m=P(h,1,!1,null,null,_,F,j,K,be,Ve,null),h[ln]=m.current,om(h),new dl(m)},u1.hydrateRoot=function(h,m,_){if(!n(h))throw Error(i(299));var F=!1,j="",K=Fd,be=tf,Ve=bg,bt=null,zt=null;return _!=null&&(_.unstable_strictMode===!0&&(F=!0),_.identifierPrefix!==void 0&&(j=_.identifierPrefix),_.onUncaughtError!==void 0&&(K=_.onUncaughtError),_.onCaughtError!==void 0&&(be=_.onCaughtError),_.onRecoverableError!==void 0&&(Ve=_.onRecoverableError),_.unstable_transitionCallbacks!==void 0&&(bt=_.unstable_transitionCallbacks),_.formState!==void 0&&(zt=_.formState)),m=P(h,1,!0,m,_??null,F,j,K,be,Ve,bt,zt),m.context=Q(null),_=m.current,F=Hl(),F=jr(F),j=dr(F),j.callback=null,Er(_,j,F),_=F,m.current.lanes=_,kr(m,_),Zu(m),h[ln]=m.current,om(h),new Ea(m)},u1.version="19.1.1",u1}var $B;function ZL(){if($B)return ob.exports;$B=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ob.exports=XL(),ob.exports}var YL=ZL();const JL=c4(YL);var XB="popstate";function eM(e={}){function t(i,n){let{pathname:a,search:c,hash:s}=i.location;return Uw("",{pathname:a,search:c,hash:s},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(i,n){return typeof n=="string"?n:uv(n)}return rM(t,r,null,e)}function La(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nA(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tM(){return Math.random().toString(36).substring(2,10)}function ZB(e,t){return{usr:e.state,key:e.key,idx:t}}function Uw(e,t,r=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?lg(t):t,state:r,key:t&&t.key||i||tM()}}function uv({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function lg(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function rM(e,t,r,i={}){let{window:n=document.defaultView,v5Compat:a=!1}=i,c=n.history,s="POP",d=null,g=x();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function x(){return(c.state||{idx:null}).idx}function C(){s="POP";let R=x(),D=R==null?null:R-g;g=R,d&&d({action:s,location:I.location,delta:D})}function N(R,D){s="PUSH";let V=Uw(I.location,R,D);g=x()+1;let G=ZB(V,g),Z=I.createHref(V);try{c.pushState(G,"",Z)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;n.location.assign(Z)}a&&d&&d({action:s,location:I.location,delta:1})}function B(R,D){s="REPLACE";let V=Uw(I.location,R,D);g=x();let G=ZB(V,g),Z=I.createHref(V);c.replaceState(G,"",Z),a&&d&&d({action:s,location:I.location,delta:0})}function M(R){return iM(R)}let I={get action(){return s},get location(){return e(n,c)},listen(R){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(XB,C),d=R,()=>{n.removeEventListener(XB,C),d=null}},createHref(R){return t(n,R)},createURL:M,encodeLocation(R){let D=M(R);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:N,replace:B,go(R){return c.go(R)}};return I}function iM(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),La(r,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:uv(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function SF(e,t,r="/"){return nM(e,t,r,!1)}function nM(e,t,r,i){let n=typeof t=="string"?lg(t):t,a=md(n.pathname||"/",r);if(a==null)return null;let c=EF(e);sM(c);let s=null;for(let d=0;s==null&&d<c.length;++d){let g=mM(a);s=dM(c[d],g,i)}return s}function EF(e,t=[],r=[],i=""){let n=(a,c,s)=>{let d={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(La(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let g=Ad([i,d.relativePath]),x=r.concat(d);a.children&&a.children.length>0&&(La(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),EF(a.children,t,x,g)),!(a.path==null&&!a.index)&&t.push({path:g,score:AM(g,a.index),routesMeta:x})};return e.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))n(a,c);else for(let s of TF(a.path))n(a,c,s)}),t}function TF(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return n?[a,""]:[a];let c=TF(i.join("/")),s=[];return s.push(...c.map(d=>d===""?a:[a,d].join("/"))),n&&s.push(...c),s.map(d=>e.startsWith("/")&&d===""?"/":d)}function sM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:fM(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var aM=/^:[\w-]+$/,oM=3,lM=2,cM=1,uM=10,hM=-2,YB=e=>e==="*";function AM(e,t){let r=e.split("/"),i=r.length;return r.some(YB)&&(i+=hM),t&&(i+=lM),r.filter(n=>!YB(n)).reduce((n,a)=>n+(aM.test(a)?oM:a===""?cM:uM),i)}function fM(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function dM(e,t,r=!1){let{routesMeta:i}=e,n={},a="/",c=[];for(let s=0;s<i.length;++s){let d=i[s],g=s===i.length-1,x=a==="/"?t:t.slice(a.length)||"/",C=v_({path:d.relativePath,caseSensitive:d.caseSensitive,end:g},x),N=d.route;if(!C&&g&&r&&!i[i.length-1].route.index&&(C=v_({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},x)),!C)return null;Object.assign(n,C.params),c.push({params:n,pathname:Ad([a,C.pathname]),pathnameBase:yM(Ad([a,C.pathnameBase])),route:N}),C.pathnameBase!=="/"&&(a=Ad([a,C.pathnameBase]))}return c}function v_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=pM(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let a=n[0],c=a.replace(/(.)\/+$/,"$1"),s=n.slice(1);return{params:i.reduce((g,{paramName:x,isOptional:C},N)=>{if(x==="*"){let M=s[N]||"";c=a.slice(0,a.length-M.length).replace(/(.)\/+$/,"$1")}const B=s[N];return C&&!B?g[x]=void 0:g[x]=(B||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:c,pattern:e}}function pM(e,t=!1,r=!0){nA(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,s,d)=>(i.push({paramName:s,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function mM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return nA(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function md(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function gM(e,t="/"){let{pathname:r,search:i="",hash:n=""}=typeof e=="string"?lg(e):e;return{pathname:r?r.startsWith("/")?r:vM(r,t):t,search:_M(i),hash:bM(n)}}function vM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function hb(e,t,r,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function h4(e){let t=xM(e);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function A4(e,t,r,i=!1){let n;typeof e=="string"?n=lg(e):(n={...e},La(!n.pathname||!n.pathname.includes("?"),hb("?","pathname","search",n)),La(!n.pathname||!n.pathname.includes("#"),hb("#","pathname","hash",n)),La(!n.search||!n.search.includes("#"),hb("#","search","hash",n)));let a=e===""||n.pathname==="",c=a?"/":n.pathname,s;if(c==null)s=r;else{let C=t.length-1;if(!i&&c.startsWith("..")){let N=c.split("/");for(;N[0]==="..";)N.shift(),C-=1;n.pathname=N.join("/")}s=C>=0?t[C]:"/"}let d=gM(n,s),g=c&&c!=="/"&&c.endsWith("/"),x=(a||c===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(g||x)&&(d.pathname+="/"),d}var Ad=e=>e.join("/").replace(/\/\/+/g,"/"),yM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_M=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var FF=["POST","PUT","PATCH","DELETE"];new Set(FF);var BM=["GET",...FF];new Set(BM);var cg=_e.createContext(null);cg.displayName="DataRouter";var r2=_e.createContext(null);r2.displayName="DataRouterState";_e.createContext(!1);var kF=_e.createContext({isTransitioning:!1});kF.displayName="ViewTransition";var CM=_e.createContext(new Map);CM.displayName="Fetchers";var SM=_e.createContext(null);SM.displayName="Await";var VA=_e.createContext(null);VA.displayName="Navigation";var Pv=_e.createContext(null);Pv.displayName="Location";var GA=_e.createContext({outlet:null,matches:[],isDataRoute:!1});GA.displayName="Route";var f4=_e.createContext(null);f4.displayName="RouteError";function EM(e,{relative:t}={}){La(ug(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=_e.useContext(VA),{hash:n,pathname:a,search:c}=Dv(e,{relative:t}),s=a;return r!=="/"&&(s=a==="/"?r:Ad([r,a])),i.createHref({pathname:s,search:c,hash:n})}function ug(){return _e.useContext(Pv)!=null}function sh(){return La(ug(),"useLocation() may be used only in the context of a <Router> component."),_e.useContext(Pv).location}var NF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function IF(e){_e.useContext(VA).static||_e.useLayoutEffect(e)}function Va(){let{isDataRoute:e}=_e.useContext(GA);return e?zM():TM()}function TM(){La(ug(),"useNavigate() may be used only in the context of a <Router> component.");let e=_e.useContext(cg),{basename:t,navigator:r}=_e.useContext(VA),{matches:i}=_e.useContext(GA),{pathname:n}=sh(),a=JSON.stringify(h4(i)),c=_e.useRef(!1);return IF(()=>{c.current=!0}),_e.useCallback((d,g={})=>{if(nA(c.current,NF),!c.current)return;if(typeof d=="number"){r.go(d);return}let x=A4(d,JSON.parse(a),n,g.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:Ad([t,x.pathname])),(g.replace?r.replace:r.push)(x,g.state,g)},[t,r,a,n,e])}var FM=_e.createContext(null);function kM(e){let t=_e.useContext(GA).outlet;return t&&_e.createElement(FM.Provider,{value:e},t)}function Dv(e,{relative:t}={}){let{matches:r}=_e.useContext(GA),{pathname:i}=sh(),n=JSON.stringify(h4(r));return _e.useMemo(()=>A4(e,JSON.parse(n),i,t==="path"),[e,n,i,t])}function NM(e,t){return LF(e,t)}function LF(e,t,r,i){La(ug(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=_e.useContext(VA),{matches:a}=_e.useContext(GA),c=a[a.length-1],s=c?c.params:{},d=c?c.pathname:"/",g=c?c.pathnameBase:"/",x=c&&c.route;{let D=x&&x.path||"";MF(d,!x||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let C=sh(),N;if(t){let D=typeof t=="string"?lg(t):t;La(g==="/"||D.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${D.pathname}" was given in the \`location\` prop.`),N=D}else N=C;let B=N.pathname||"/",M=B;if(g!=="/"){let D=g.replace(/^\//,"").split("/");M="/"+B.replace(/^\//,"").split("/").slice(D.length).join("/")}let I=SF(e,{pathname:M});nA(x||I!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),nA(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=DM(I&&I.map(D=>Object.assign({},D,{params:Object.assign({},s,D.params),pathname:Ad([g,n.encodeLocation?n.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?g:Ad([g,n.encodeLocation?n.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),a,r,i);return t&&R?_e.createElement(Pv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},R):R}function IM(){let e=QM(),t=wM(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=_e.createElement(_e.Fragment,null,_e.createElement("p",null," Hey developer "),_e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_e.createElement("code",{style:a},"ErrorBoundary")," or"," ",_e.createElement("code",{style:a},"errorElement")," prop on your route.")),_e.createElement(_e.Fragment,null,_e.createElement("h2",null,"Unexpected Application Error!"),_e.createElement("h3",{style:{fontStyle:"italic"}},t),r?_e.createElement("pre",{style:n},r):null,c)}var LM=_e.createElement(IM,null),MM=class extends _e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?_e.createElement(GA.Provider,{value:this.props.routeContext},_e.createElement(f4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function PM({routeContext:e,match:t,children:r}){let i=_e.useContext(cg);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),_e.createElement(GA.Provider,{value:e},r)}function DM(e,t=[],r=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let n=e,a=r?.errors;if(a!=null){let d=n.findIndex(g=>g.route.id&&a?.[g.route.id]!==void 0);La(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),n=n.slice(0,Math.min(n.length,d+1))}let c=!1,s=-1;if(r)for(let d=0;d<n.length;d++){let g=n[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(s=d),g.route.id){let{loaderData:x,errors:C}=r,N=g.route.loader&&!x.hasOwnProperty(g.route.id)&&(!C||C[g.route.id]===void 0);if(g.route.lazy||N){c=!0,s>=0?n=n.slice(0,s+1):n=[n[0]];break}}}return n.reduceRight((d,g,x)=>{let C,N=!1,B=null,M=null;r&&(C=a&&g.route.id?a[g.route.id]:void 0,B=g.route.errorElement||LM,c&&(s<0&&x===0?(MF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,M=null):s===x&&(N=!0,M=g.route.hydrateFallbackElement||null)));let I=t.concat(n.slice(0,x+1)),R=()=>{let D;return C?D=B:N?D=M:g.route.Component?D=_e.createElement(g.route.Component,null):g.route.element?D=g.route.element:D=d,_e.createElement(PM,{match:g,routeContext:{outlet:d,matches:I,isDataRoute:r!=null},children:D})};return r&&(g.route.ErrorBoundary||g.route.errorElement||x===0)?_e.createElement(MM,{location:r.location,revalidation:r.revalidation,component:B,error:C,children:R(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):R()},null)}function d4(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RM(e){let t=_e.useContext(cg);return La(t,d4(e)),t}function UM(e){let t=_e.useContext(r2);return La(t,d4(e)),t}function jM(e){let t=_e.useContext(GA);return La(t,d4(e)),t}function p4(e){let t=jM(e),r=t.matches[t.matches.length-1];return La(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function OM(){return p4("useRouteId")}function QM(){let e=_e.useContext(f4),t=UM("useRouteError"),r=p4("useRouteError");return e!==void 0?e:t.errors?.[r]}function zM(){let{router:e}=RM("useNavigate"),t=p4("useNavigate"),r=_e.useRef(!1);return IF(()=>{r.current=!0}),_e.useCallback(async(n,a={})=>{nA(r.current,NF),r.current&&(typeof n=="number"?e.navigate(n):await e.navigate(n,{fromRouteId:t,...a}))},[e,t])}var JB={};function MF(e,t,r){!t&&!JB[e]&&(JB[e]=!0,nA(!1,r))}_e.memo(HM);function HM({routes:e,future:t,state:r}){return LF(e,void 0,r,t)}function S1({to:e,replace:t,state:r,relative:i}){La(ug(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=_e.useContext(VA);nA(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=_e.useContext(GA),{pathname:c}=sh(),s=Va(),d=A4(e,h4(a),c,i==="path"),g=JSON.stringify(d);return _e.useEffect(()=>{s(JSON.parse(g),{replace:t,state:r,relative:i})},[s,g,i,t,r]),null}function PF(e){return kM(e.context)}function Dn(e){La(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VM({basename:e="/",children:t=null,location:r,navigationType:i="POP",navigator:n,static:a=!1}){La(!ug(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),s=_e.useMemo(()=>({basename:c,navigator:n,static:a,future:{}}),[c,n,a]);typeof r=="string"&&(r=lg(r));let{pathname:d="/",search:g="",hash:x="",state:C=null,key:N="default"}=r,B=_e.useMemo(()=>{let M=md(d,c);return M==null?null:{location:{pathname:M,search:g,hash:x,state:C,key:N},navigationType:i}},[c,d,g,x,C,N,i]);return nA(B!=null,`<Router basename="${c}"> is not able to match the URL "${d}${g}${x}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:_e.createElement(VA.Provider,{value:s},_e.createElement(Pv.Provider,{children:t,value:B}))}function GM({children:e,location:t}){return NM(jw(e),t)}function jw(e,t=[]){let r=[];return _e.Children.forEach(e,(i,n)=>{if(!_e.isValidElement(i))return;let a=[...t,n];if(i.type===_e.Fragment){r.push.apply(r,jw(i.props.children,a));return}La(i.type===Dn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),La(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=jw(i.props.children,a)),r.push(c)}),r}var $y="get",Xy="application/x-www-form-urlencoded";function i2(e){return e!=null&&typeof e.tagName=="string"}function qM(e){return i2(e)&&e.tagName.toLowerCase()==="button"}function KM(e){return i2(e)&&e.tagName.toLowerCase()==="form"}function WM(e){return i2(e)&&e.tagName.toLowerCase()==="input"}function $M(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function XM(e,t){return e.button===0&&(!t||t==="_self")&&!$M(e)}function Ow(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let i=e[r];return t.concat(Array.isArray(i)?i.map(n=>[r,n]):[[r,i]])},[]))}function ZM(e,t){let r=Ow(e);return t&&t.forEach((i,n)=>{r.has(n)||t.getAll(n).forEach(a=>{r.append(n,a)})}),r}var Qx=null;function YM(){if(Qx===null)try{new FormData(document.createElement("form"),0),Qx=!1}catch{Qx=!0}return Qx}var JM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ab(e){return e!=null&&!JM.has(e)?(nA(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xy}"`),null):e}function eP(e,t){let r,i,n,a,c;if(KM(e)){let s=e.getAttribute("action");i=s?md(s,t):null,r=e.getAttribute("method")||$y,n=Ab(e.getAttribute("enctype"))||Xy,a=new FormData(e)}else if(qM(e)||WM(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||s.getAttribute("action");if(i=d?md(d,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||$y,n=Ab(e.getAttribute("formenctype"))||Ab(s.getAttribute("enctype"))||Xy,a=new FormData(s,e),!YM()){let{name:g,type:x,value:C}=e;if(x==="image"){let N=g?`${g}.`:"";a.append(`${N}x`,"0"),a.append(`${N}y`,"0")}else g&&a.append(g,C)}}else{if(i2(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=$y,i=null,n=Xy,c=e}return a&&n==="text/plain"&&(c=a,a=void 0),{action:i,method:r.toLowerCase(),encType:n,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function m4(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tP(e,t,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${r}`:t&&md(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function rP(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iP(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function nP(e,t,r){let i=await Promise.all(e.map(async n=>{let a=t.routes[n.route.id];if(a){let c=await rP(a,r);return c.links?c.links():[]}return[]}));return lP(i.flat(1).filter(iP).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function eC(e,t,r,i,n,a){let c=(d,g)=>r[g]?d.route.id!==r[g].route.id:!0,s=(d,g)=>r[g].pathname!==d.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==d.params["*"];return a==="assets"?t.filter((d,g)=>c(d,g)||s(d,g)):a==="data"?t.filter((d,g)=>{let x=i.routes[d.route.id];if(!x||!x.hasLoader)return!1;if(c(d,g)||s(d,g))return!0;if(d.route.shouldRevalidate){let C=d.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function sP(e,t,{includeHydrateFallback:r}={}){return aP(e.map(i=>{let n=t.routes[i.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1))}function aP(e){return[...new Set(e)]}function oP(e){let t={},r=Object.keys(e).sort();for(let i of r)t[i]=e[i];return t}function lP(e,t){let r=new Set;return new Set(t),e.reduce((i,n)=>{let a=JSON.stringify(oP(n));return r.has(a)||(r.add(a),i.push({key:a,link:n})),i},[])}function DF(){let e=_e.useContext(cg);return m4(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function cP(){let e=_e.useContext(r2);return m4(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var g4=_e.createContext(void 0);g4.displayName="FrameworkContext";function RF(){let e=_e.useContext(g4);return m4(e,"You must render this element inside a <HydratedRouter> element"),e}function uP(e,t){let r=_e.useContext(g4),[i,n]=_e.useState(!1),[a,c]=_e.useState(!1),{onFocus:s,onBlur:d,onMouseEnter:g,onMouseLeave:x,onTouchStart:C}=t,N=_e.useRef(null);_e.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let I=D=>{D.forEach(V=>{c(V.isIntersecting)})},R=new IntersectionObserver(I,{threshold:.5});return N.current&&R.observe(N.current),()=>{R.disconnect()}}},[e]),_e.useEffect(()=>{if(i){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[i]);let B=()=>{n(!0)},M=()=>{n(!1),c(!1)};return r?e!=="intent"?[a,N,{}]:[a,N,{onFocus:h1(s,B),onBlur:h1(d,M),onMouseEnter:h1(g,B),onMouseLeave:h1(x,M),onTouchStart:h1(C,B)}]:[!1,N,{}]}function h1(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function hP({page:e,...t}){let{router:r}=DF(),i=_e.useMemo(()=>SF(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?_e.createElement(fP,{page:e,matches:i,...t}):null}function AP(e){let{manifest:t,routeModules:r}=RF(),[i,n]=_e.useState([]);return _e.useEffect(()=>{let a=!1;return nP(e,t,r).then(c=>{a||n(c)}),()=>{a=!0}},[e,t,r]),i}function fP({page:e,matches:t,...r}){let i=sh(),{manifest:n,routeModules:a}=RF(),{basename:c}=DF(),{loaderData:s,matches:d}=cP(),g=_e.useMemo(()=>eC(e,t,d,n,i,"data"),[e,t,d,n,i]),x=_e.useMemo(()=>eC(e,t,d,n,i,"assets"),[e,t,d,n,i]),C=_e.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let M=new Set,I=!1;if(t.forEach(D=>{let V=n.routes[D.route.id];!V||!V.hasLoader||(!g.some(G=>G.route.id===D.route.id)&&D.route.id in s&&a[D.route.id]?.shouldRevalidate||V.hasClientLoader?I=!0:M.add(D.route.id))}),M.size===0)return[];let R=tP(e,c,"data");return I&&M.size>0&&R.searchParams.set("_routes",t.filter(D=>M.has(D.route.id)).map(D=>D.route.id).join(",")),[R.pathname+R.search]},[c,s,i,n,g,t,e,a]),N=_e.useMemo(()=>sP(x,n),[x,n]),B=AP(x);return _e.createElement(_e.Fragment,null,C.map(M=>_e.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...r})),N.map(M=>_e.createElement("link",{key:M,rel:"modulepreload",href:M,...r})),B.map(({key:M,link:I})=>_e.createElement("link",{key:M,...I})))}function dP(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var UF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{UF&&(window.__reactRouterVersion="7.7.1")}catch{}function pP({basename:e,children:t,window:r}){let i=_e.useRef();i.current==null&&(i.current=eM({window:r,v5Compat:!0}));let n=i.current,[a,c]=_e.useState({action:n.action,location:n.location}),s=_e.useCallback(d=>{_e.startTransition(()=>c(d))},[c]);return _e.useLayoutEffect(()=>n.listen(s),[n,s]),_e.createElement(VM,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:n})}var jF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Na=_e.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:n,reloadDocument:a,replace:c,state:s,target:d,to:g,preventScrollReset:x,viewTransition:C,...N},B){let{basename:M}=_e.useContext(VA),I=typeof g=="string"&&jF.test(g),R,D=!1;if(typeof g=="string"&&I&&(R=g,UF))try{let se=new URL(window.location.href),ue=g.startsWith("//")?new URL(se.protocol+g):new URL(g),re=md(ue.pathname,M);ue.origin===se.origin&&re!=null?g=re+ue.search+ue.hash:D=!0}catch{nA(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=EM(g,{relative:n}),[G,Z,X]=uP(i,N),le=xP(g,{replace:c,state:s,target:d,preventScrollReset:x,relative:n,viewTransition:C});function ae(se){t&&t(se),se.defaultPrevented||le(se)}let ce=_e.createElement("a",{...N,...X,href:R||V,onClick:D||a?t:ae,ref:dP(B,Z),target:d,"data-discover":!I&&r==="render"?"true":void 0});return G&&!I?_e.createElement(_e.Fragment,null,ce,_e.createElement(hP,{page:V})):ce});Na.displayName="Link";var mP=_e.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:n=!1,style:a,to:c,viewTransition:s,children:d,...g},x){let C=Dv(c,{relative:g.relative}),N=sh(),B=_e.useContext(r2),{navigator:M,basename:I}=_e.useContext(VA),R=B!=null&&CP(C)&&s===!0,D=M.encodeLocation?M.encodeLocation(C).pathname:C.pathname,V=N.pathname,G=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;r||(V=V.toLowerCase(),G=G?G.toLowerCase():null,D=D.toLowerCase()),G&&I&&(G=md(G,I)||G);const Z=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let X=V===D||!n&&V.startsWith(D)&&V.charAt(Z)==="/",le=G!=null&&(G===D||!n&&G.startsWith(D)&&G.charAt(D.length)==="/"),ae={isActive:X,isPending:le,isTransitioning:R},ce=X?t:void 0,se;typeof i=="function"?se=i(ae):se=[i,X?"active":null,le?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let ue=typeof a=="function"?a(ae):a;return _e.createElement(Na,{...g,"aria-current":ce,className:se,ref:x,style:ue,to:c,viewTransition:s},typeof d=="function"?d(ae):d)});mP.displayName="NavLink";var gP=_e.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:n,state:a,method:c=$y,action:s,onSubmit:d,relative:g,preventScrollReset:x,viewTransition:C,...N},B)=>{let M=wP(),I=BP(s,{relative:g}),R=c.toLowerCase()==="get"?"get":"post",D=typeof s=="string"&&jF.test(s),V=G=>{if(d&&d(G),G.defaultPrevented)return;G.preventDefault();let Z=G.nativeEvent.submitter,X=Z?.getAttribute("formmethod")||c;M(Z||G.currentTarget,{fetcherKey:t,method:X,navigate:r,replace:n,state:a,relative:g,preventScrollReset:x,viewTransition:C})};return _e.createElement("form",{ref:B,method:R,action:I,onSubmit:i?d:V,...N,"data-discover":!D&&e==="render"?"true":void 0})});gP.displayName="Form";function vP(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OF(e){let t=_e.useContext(cg);return La(t,vP(e)),t}function xP(e,{target:t,replace:r,state:i,preventScrollReset:n,relative:a,viewTransition:c}={}){let s=Va(),d=sh(),g=Dv(e,{relative:a});return _e.useCallback(x=>{if(XM(x,t)){x.preventDefault();let C=r!==void 0?r:uv(d)===uv(g);s(e,{replace:C,state:i,preventScrollReset:n,relative:a,viewTransition:c})}},[d,s,g,r,i,t,e,n,a,c])}function yP(e){nA(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=_e.useRef(Ow(e)),r=_e.useRef(!1),i=sh(),n=_e.useMemo(()=>ZM(i.search,r.current?null:t.current),[i.search]),a=Va(),c=_e.useCallback((s,d)=>{const g=Ow(typeof s=="function"?s(new URLSearchParams(n)):s);r.current=!0,a("?"+g,d)},[a,n]);return[n,c]}var _P=0,bP=()=>`__${String(++_P)}__`;function wP(){let{router:e}=OF("useSubmit"),{basename:t}=_e.useContext(VA),r=OM();return _e.useCallback(async(i,n={})=>{let{action:a,method:c,encType:s,formData:d,body:g}=eP(i,t);if(n.navigate===!1){let x=n.fetcherKey||bP();await e.fetch(x,r,n.action||a,{preventScrollReset:n.preventScrollReset,formData:d,body:g,formMethod:n.method||c,formEncType:n.encType||s,flushSync:n.flushSync})}else await e.navigate(n.action||a,{preventScrollReset:n.preventScrollReset,formData:d,body:g,formMethod:n.method||c,formEncType:n.encType||s,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,r])}function BP(e,{relative:t}={}){let{basename:r}=_e.useContext(VA),i=_e.useContext(GA);La(i,"useFormAction must be used inside a RouteContext");let[n]=i.matches.slice(-1),a={...Dv(e||".",{relative:t})},c=sh();if(e==null){a.search=c.search;let s=new URLSearchParams(a.search),d=s.getAll("index");if(d.some(x=>x==="")){s.delete("index"),d.filter(C=>C).forEach(C=>s.append("index",C));let x=s.toString();a.search=x?`?${x}`:""}}return(!e||e===".")&&n.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Ad([r,a.pathname])),uv(a)}function CP(e,{relative:t}={}){let r=_e.useContext(kF);La(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=OF("useViewTransitionState"),n=Dv(e,{relative:t});if(!r.isTransitioning)return!1;let a=md(r.currentLocation.pathname,i)||r.currentLocation.pathname,c=md(r.nextLocation.pathname,i)||r.nextLocation.pathname;return v_(n.pathname,c)!=null||v_(n.pathname,a)!=null}function QF(e,t){return function(){return e.apply(t,arguments)}}const{toString:SP}=Object.prototype,{getPrototypeOf:v4}=Object,{iterator:n2,toStringTag:zF}=Symbol,s2=(e=>t=>{const r=SP.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),qA=e=>(e=e.toLowerCase(),t=>s2(t)===e),a2=e=>t=>typeof t===e,{isArray:hg}=Array,eg=a2("undefined");function Rv(e){return e!==null&&!eg(e)&&e.constructor!==null&&!eg(e.constructor)&&ih(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const HF=qA("ArrayBuffer");function EP(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&HF(e.buffer),t}const TP=a2("string"),ih=a2("function"),VF=a2("number"),Uv=e=>e!==null&&typeof e=="object",FP=e=>e===!0||e===!1,Zy=e=>{if(s2(e)!=="object")return!1;const t=v4(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(zF in e)&&!(n2 in e)},kP=e=>{if(!Uv(e)||Rv(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},NP=qA("Date"),IP=qA("File"),LP=qA("Blob"),MP=qA("FileList"),PP=e=>Uv(e)&&ih(e.pipe),DP=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ih(e.append)&&((t=s2(e))==="formdata"||t==="object"&&ih(e.toString)&&e.toString()==="[object FormData]"))},RP=qA("URLSearchParams"),[UP,jP,OP,QP]=["ReadableStream","Request","Response","Headers"].map(qA),zP=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jv(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,n;if(typeof e!="object"&&(e=[e]),hg(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{if(Rv(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),c=a.length;let s;for(i=0;i<c;i++)s=a[i],t.call(null,e[s],s,e)}}function GF(e,t){if(Rv(e))return null;t=t.toLowerCase();const r=Object.keys(e);let i=r.length,n;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const s0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qF=e=>!eg(e)&&e!==s0;function Qw(){const{caseless:e,skipUndefined:t}=qF(this)&&this||{},r={},i=(n,a)=>{const c=e&&GF(r,a)||a;Zy(r[c])&&Zy(n)?r[c]=Qw(r[c],n):Zy(n)?r[c]=Qw({},n):hg(n)?r[c]=n.slice():(!t||!eg(n))&&(r[c]=n)};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&jv(arguments[n],i);return r}const HP=(e,t,r,{allOwnKeys:i}={})=>(jv(t,(n,a)=>{r&&ih(n)?e[a]=QF(n,r):e[a]=n},{allOwnKeys:i}),e),VP=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),GP=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},qP=(e,t,r,i)=>{let n,a,c;const s={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)c=n[a],(!i||i(c,e,t))&&!s[c]&&(t[c]=e[c],s[c]=!0);e=r!==!1&&v4(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},KP=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},WP=e=>{if(!e)return null;if(hg(e))return e;let t=e.length;if(!VF(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},$P=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&v4(Uint8Array)),XP=(e,t)=>{const i=(e&&e[n2]).call(e);let n;for(;(n=i.next())&&!n.done;){const a=n.value;t.call(e,a[0],a[1])}},ZP=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},YP=qA("HTMLFormElement"),JP=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,n){return i.toUpperCase()+n}),tC=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),eD=qA("RegExp"),KF=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};jv(r,(n,a)=>{let c;(c=t(n,a,e))!==!1&&(i[a]=c||n)}),Object.defineProperties(e,i)},tD=e=>{KF(e,(t,r)=>{if(ih(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(ih(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},rD=(e,t)=>{const r={},i=n=>{n.forEach(a=>{r[a]=!0})};return hg(e)?i(e):i(String(e).split(t)),r},iD=()=>{},nD=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function sD(e){return!!(e&&ih(e.append)&&e[zF]==="FormData"&&e[n2])}const aD=e=>{const t=new Array(10),r=(i,n)=>{if(Uv(i)){if(t.indexOf(i)>=0)return;if(Rv(i))return i;if(!("toJSON"in i)){t[n]=i;const a=hg(i)?[]:{};return jv(i,(c,s)=>{const d=r(c,n+1);!eg(d)&&(a[s]=d)}),t[n]=void 0,a}}return i};return r(e,0)},oD=qA("AsyncFunction"),lD=e=>e&&(Uv(e)||ih(e))&&ih(e.then)&&ih(e.catch),WF=((e,t)=>e?setImmediate:t?((r,i)=>(s0.addEventListener("message",({source:n,data:a})=>{n===s0&&a===r&&i.length&&i.shift()()},!1),n=>{i.push(n),s0.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ih(s0.postMessage)),cD=typeof queueMicrotask<"u"?queueMicrotask.bind(s0):typeof process<"u"&&process.nextTick||WF,uD=e=>e!=null&&ih(e[n2]),ur={isArray:hg,isArrayBuffer:HF,isBuffer:Rv,isFormData:DP,isArrayBufferView:EP,isString:TP,isNumber:VF,isBoolean:FP,isObject:Uv,isPlainObject:Zy,isEmptyObject:kP,isReadableStream:UP,isRequest:jP,isResponse:OP,isHeaders:QP,isUndefined:eg,isDate:NP,isFile:IP,isBlob:LP,isRegExp:eD,isFunction:ih,isStream:PP,isURLSearchParams:RP,isTypedArray:$P,isFileList:MP,forEach:jv,merge:Qw,extend:HP,trim:zP,stripBOM:VP,inherits:GP,toFlatObject:qP,kindOf:s2,kindOfTest:qA,endsWith:KP,toArray:WP,forEachEntry:XP,matchAll:ZP,isHTMLForm:YP,hasOwnProperty:tC,hasOwnProp:tC,reduceDescriptors:KF,freezeMethods:tD,toObjectSet:rD,toCamelCase:JP,noop:iD,toFiniteNumber:nD,findKey:GF,global:s0,isContextDefined:qF,isSpecCompliantForm:sD,toJSONObject:aD,isAsyncFn:oD,isThenable:lD,setImmediate:WF,asap:cD,isIterable:uD};function dn(e,t,r,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n,this.status=n.status?n.status:null)}ur.inherits(dn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ur.toJSONObject(this.config),code:this.code,status:this.status}}});const $F=dn.prototype,XF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{XF[e]={value:e}});Object.defineProperties(dn,XF);Object.defineProperty($F,"isAxiosError",{value:!0});dn.from=(e,t,r,i,n,a)=>{const c=Object.create($F);ur.toFlatObject(e,c,function(x){return x!==Error.prototype},g=>g!=="isAxiosError");const s=e&&e.message?e.message:"Error",d=t==null&&e?e.code:t;return dn.call(c,s,d,r,i,n),e&&c.cause==null&&Object.defineProperty(c,"cause",{value:e,configurable:!0}),c.name=e&&e.name||"Error",a&&Object.assign(c,a),c};const hD=null;function zw(e){return ur.isPlainObject(e)||ur.isArray(e)}function ZF(e){return ur.endsWith(e,"[]")?e.slice(0,-2):e}function rC(e,t,r){return e?e.concat(t).map(function(n,a){return n=ZF(n),!r&&a?"["+n+"]":n}).join(r?".":""):t}function AD(e){return ur.isArray(e)&&!e.some(zw)}const fD=ur.toFlatObject(ur,{},null,function(t){return/^is[A-Z]/.test(t)});function o2(e,t,r){if(!ur.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=ur.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,R){return!ur.isUndefined(R[I])});const i=r.metaTokens,n=r.visitor||x,a=r.dots,c=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&ur.isSpecCompliantForm(t);if(!ur.isFunction(n))throw new TypeError("visitor must be a function");function g(M){if(M===null)return"";if(ur.isDate(M))return M.toISOString();if(ur.isBoolean(M))return M.toString();if(!d&&ur.isBlob(M))throw new dn("Blob is not supported. Use a Buffer instead.");return ur.isArrayBuffer(M)||ur.isTypedArray(M)?d&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function x(M,I,R){let D=M;if(M&&!R&&typeof M=="object"){if(ur.endsWith(I,"{}"))I=i?I:I.slice(0,-2),M=JSON.stringify(M);else if(ur.isArray(M)&&AD(M)||(ur.isFileList(M)||ur.endsWith(I,"[]"))&&(D=ur.toArray(M)))return I=ZF(I),D.forEach(function(G,Z){!(ur.isUndefined(G)||G===null)&&t.append(c===!0?rC([I],Z,a):c===null?I:I+"[]",g(G))}),!1}return zw(M)?!0:(t.append(rC(R,I,a),g(M)),!1)}const C=[],N=Object.assign(fD,{defaultVisitor:x,convertValue:g,isVisitable:zw});function B(M,I){if(!ur.isUndefined(M)){if(C.indexOf(M)!==-1)throw Error("Circular reference detected in "+I.join("."));C.push(M),ur.forEach(M,function(D,V){(!(ur.isUndefined(D)||D===null)&&n.call(t,D,ur.isString(V)?V.trim():V,I,N))===!0&&B(D,I?I.concat(V):[V])}),C.pop()}}if(!ur.isObject(e))throw new TypeError("data must be an object");return B(e),t}function iC(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function x4(e,t){this._pairs=[],e&&o2(e,this,t)}const YF=x4.prototype;YF.append=function(t,r){this._pairs.push([t,r])};YF.toString=function(t){const r=t?function(i){return t.call(this,i,iC)}:iC;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function dD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function JF(e,t,r){if(!t)return e;const i=r&&r.encode||dD;ur.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let a;if(n?a=n(t,r):a=ur.isURLSearchParams(t)?t.toString():new x4(t,r).toString(i),a){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class nC{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ur.forEach(this.handlers,function(i){i!==null&&t(i)})}}const ek={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pD=typeof URLSearchParams<"u"?URLSearchParams:x4,mD=typeof FormData<"u"?FormData:null,gD=typeof Blob<"u"?Blob:null,vD={isBrowser:!0,classes:{URLSearchParams:pD,FormData:mD,Blob:gD},protocols:["http","https","file","blob","url","data"]},y4=typeof window<"u"&&typeof document<"u",Hw=typeof navigator=="object"&&navigator||void 0,xD=y4&&(!Hw||["ReactNative","NativeScript","NS"].indexOf(Hw.product)<0),yD=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_D=y4&&window.location.href||"http://localhost",bD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:y4,hasStandardBrowserEnv:xD,hasStandardBrowserWebWorkerEnv:yD,navigator:Hw,origin:_D},Symbol.toStringTag,{value:"Module"})),Wc={...bD,...vD};function wD(e,t){return o2(e,new Wc.classes.URLSearchParams,{visitor:function(r,i,n,a){return Wc.isNode&&ur.isBuffer(r)?(this.append(i,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function BD(e){return ur.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function CD(e){const t={},r=Object.keys(e);let i;const n=r.length;let a;for(i=0;i<n;i++)a=r[i],t[a]=e[a];return t}function tk(e){function t(r,i,n,a){let c=r[a++];if(c==="__proto__")return!0;const s=Number.isFinite(+c),d=a>=r.length;return c=!c&&ur.isArray(n)?n.length:c,d?(ur.hasOwnProp(n,c)?n[c]=[n[c],i]:n[c]=i,!s):((!n[c]||!ur.isObject(n[c]))&&(n[c]=[]),t(r,i,n[c],a)&&ur.isArray(n[c])&&(n[c]=CD(n[c])),!s)}if(ur.isFormData(e)&&ur.isFunction(e.entries)){const r={};return ur.forEachEntry(e,(i,n)=>{t(BD(i),n,r,0)}),r}return null}function SD(e,t,r){if(ur.isString(e))try{return(t||JSON.parse)(e),ur.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const Ov={transitional:ek,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const i=r.getContentType()||"",n=i.indexOf("application/json")>-1,a=ur.isObject(t);if(a&&ur.isHTMLForm(t)&&(t=new FormData(t)),ur.isFormData(t))return n?JSON.stringify(tk(t)):t;if(ur.isArrayBuffer(t)||ur.isBuffer(t)||ur.isStream(t)||ur.isFile(t)||ur.isBlob(t)||ur.isReadableStream(t))return t;if(ur.isArrayBufferView(t))return t.buffer;if(ur.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return wD(t,this.formSerializer).toString();if((s=ur.isFileList(t))||i.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return o2(s?{"files[]":t}:t,d&&new d,this.formSerializer)}}return a||n?(r.setContentType("application/json",!1),SD(t)):t}],transformResponse:[function(t){const r=this.transitional||Ov.transitional,i=r&&r.forcedJSONParsing,n=this.responseType==="json";if(ur.isResponse(t)||ur.isReadableStream(t))return t;if(t&&ur.isString(t)&&(i&&!this.responseType||n)){const c=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(s){if(c)throw s.name==="SyntaxError"?dn.from(s,dn.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wc.classes.FormData,Blob:Wc.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ur.forEach(["delete","get","head","post","put","patch"],e=>{Ov.headers[e]={}});const ED=ur.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),TD=e=>{const t={};let r,i,n;return e&&e.split(`
`).forEach(function(c){n=c.indexOf(":"),r=c.substring(0,n).trim().toLowerCase(),i=c.substring(n+1).trim(),!(!r||t[r]&&ED[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},sC=Symbol("internals");function A1(e){return e&&String(e).trim().toLowerCase()}function Yy(e){return e===!1||e==null?e:ur.isArray(e)?e.map(Yy):String(e)}function FD(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const kD=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fb(e,t,r,i,n){if(ur.isFunction(i))return i.call(this,t,r);if(n&&(t=r),!!ur.isString(t)){if(ur.isString(i))return t.indexOf(i)!==-1;if(ur.isRegExp(i))return i.test(t)}}function ND(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function ID(e,t){const r=ur.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(n,a,c){return this[i].call(this,t,n,a,c)},configurable:!0})})}let nh=class{constructor(t){t&&this.set(t)}set(t,r,i){const n=this;function a(s,d,g){const x=A1(d);if(!x)throw new Error("header name must be a non-empty string");const C=ur.findKey(n,x);(!C||n[C]===void 0||g===!0||g===void 0&&n[C]!==!1)&&(n[C||d]=Yy(s))}const c=(s,d)=>ur.forEach(s,(g,x)=>a(g,x,d));if(ur.isPlainObject(t)||t instanceof this.constructor)c(t,r);else if(ur.isString(t)&&(t=t.trim())&&!kD(t))c(TD(t),r);else if(ur.isObject(t)&&ur.isIterable(t)){let s={},d,g;for(const x of t){if(!ur.isArray(x))throw TypeError("Object iterator must return a key-value pair");s[g=x[0]]=(d=s[g])?ur.isArray(d)?[...d,x[1]]:[d,x[1]]:x[1]}c(s,r)}else t!=null&&a(r,t,i);return this}get(t,r){if(t=A1(t),t){const i=ur.findKey(this,t);if(i){const n=this[i];if(!r)return n;if(r===!0)return FD(n);if(ur.isFunction(r))return r.call(this,n,i);if(ur.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=A1(t),t){const i=ur.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||fb(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let n=!1;function a(c){if(c=A1(c),c){const s=ur.findKey(i,c);s&&(!r||fb(i,i[s],s,r))&&(delete i[s],n=!0)}}return ur.isArray(t)?t.forEach(a):a(t),n}clear(t){const r=Object.keys(this);let i=r.length,n=!1;for(;i--;){const a=r[i];(!t||fb(this,this[a],a,t,!0))&&(delete this[a],n=!0)}return n}normalize(t){const r=this,i={};return ur.forEach(this,(n,a)=>{const c=ur.findKey(i,a);if(c){r[c]=Yy(n),delete r[a];return}const s=t?ND(a):String(a).trim();s!==a&&delete r[a],r[s]=Yy(n),i[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return ur.forEach(this,(i,n)=>{i!=null&&i!==!1&&(r[n]=t&&ur.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(n=>i.set(n)),i}static accessor(t){const i=(this[sC]=this[sC]={accessors:{}}).accessors,n=this.prototype;function a(c){const s=A1(c);i[s]||(ID(n,c),i[s]=!0)}return ur.isArray(t)?t.forEach(a):a(t),this}};nh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ur.reduceDescriptors(nh.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[r]=i}}});ur.freezeMethods(nh);function db(e,t){const r=this||Ov,i=t||r,n=nh.from(i.headers);let a=i.data;return ur.forEach(e,function(s){a=s.call(r,a,n.normalize(),t?t.status:void 0)}),n.normalize(),a}function rk(e){return!!(e&&e.__CANCEL__)}function Ag(e,t,r){dn.call(this,e??"canceled",dn.ERR_CANCELED,t,r),this.name="CanceledError"}ur.inherits(Ag,dn,{__CANCEL__:!0});function ik(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new dn("Request failed with status code "+r.status,[dn.ERR_BAD_REQUEST,dn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function LD(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function MD(e,t){e=e||10;const r=new Array(e),i=new Array(e);let n=0,a=0,c;return t=t!==void 0?t:1e3,function(d){const g=Date.now(),x=i[a];c||(c=g),r[n]=d,i[n]=g;let C=a,N=0;for(;C!==n;)N+=r[C++],C=C%e;if(n=(n+1)%e,n===a&&(a=(a+1)%e),g-c<t)return;const B=x&&g-x;return B?Math.round(N*1e3/B):void 0}}function PD(e,t){let r=0,i=1e3/t,n,a;const c=(g,x=Date.now())=>{r=x,n=null,a&&(clearTimeout(a),a=null),e(...g)};return[(...g)=>{const x=Date.now(),C=x-r;C>=i?c(g,x):(n=g,a||(a=setTimeout(()=>{a=null,c(n)},i-C)))},()=>n&&c(n)]}const x_=(e,t,r=3)=>{let i=0;const n=MD(50,250);return PD(a=>{const c=a.loaded,s=a.lengthComputable?a.total:void 0,d=c-i,g=n(d),x=c<=s;i=c;const C={loaded:c,total:s,progress:s?c/s:void 0,bytes:d,rate:g||void 0,estimated:g&&s&&x?(s-c)/g:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(C)},r)},aC=(e,t)=>{const r=e!=null;return[i=>t[0]({lengthComputable:r,total:e,loaded:i}),t[1]]},oC=e=>(...t)=>ur.asap(()=>e(...t)),DD=Wc.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Wc.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Wc.origin),Wc.navigator&&/(msie|trident)/i.test(Wc.navigator.userAgent)):()=>!0,RD=Wc.hasStandardBrowserEnv?{write(e,t,r,i,n,a){const c=[e+"="+encodeURIComponent(t)];ur.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),ur.isString(i)&&c.push("path="+i),ur.isString(n)&&c.push("domain="+n),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function UD(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function jD(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function nk(e,t,r){let i=!UD(t);return e&&(i||r==!1)?jD(e,t):t}const lC=e=>e instanceof nh?{...e}:e;function g0(e,t){t=t||{};const r={};function i(g,x,C,N){return ur.isPlainObject(g)&&ur.isPlainObject(x)?ur.merge.call({caseless:N},g,x):ur.isPlainObject(x)?ur.merge({},x):ur.isArray(x)?x.slice():x}function n(g,x,C,N){if(ur.isUndefined(x)){if(!ur.isUndefined(g))return i(void 0,g,C,N)}else return i(g,x,C,N)}function a(g,x){if(!ur.isUndefined(x))return i(void 0,x)}function c(g,x){if(ur.isUndefined(x)){if(!ur.isUndefined(g))return i(void 0,g)}else return i(void 0,x)}function s(g,x,C){if(C in t)return i(g,x);if(C in e)return i(void 0,g)}const d={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:s,headers:(g,x,C)=>n(lC(g),lC(x),C,!0)};return ur.forEach(Object.keys({...e,...t}),function(x){const C=d[x]||n,N=C(e[x],t[x],x);ur.isUndefined(N)&&C!==s||(r[x]=N)}),r}const sk=e=>{const t=g0({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:n,xsrfCookieName:a,headers:c,auth:s}=t;if(t.headers=c=nh.from(c),t.url=JF(nk(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&c.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),ur.isFormData(r)){if(Wc.hasStandardBrowserEnv||Wc.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(ur.isFunction(r.getHeaders)){const d=r.getHeaders(),g=["content-type","content-length"];Object.entries(d).forEach(([x,C])=>{g.includes(x.toLowerCase())&&c.set(x,C)})}}if(Wc.hasStandardBrowserEnv&&(i&&ur.isFunction(i)&&(i=i(t)),i||i!==!1&&DD(t.url))){const d=n&&a&&RD.read(a);d&&c.set(n,d)}return t},OD=typeof XMLHttpRequest<"u",QD=OD&&function(e){return new Promise(function(r,i){const n=sk(e);let a=n.data;const c=nh.from(n.headers).normalize();let{responseType:s,onUploadProgress:d,onDownloadProgress:g}=n,x,C,N,B,M;function I(){B&&B(),M&&M(),n.cancelToken&&n.cancelToken.unsubscribe(x),n.signal&&n.signal.removeEventListener("abort",x)}let R=new XMLHttpRequest;R.open(n.method.toUpperCase(),n.url,!0),R.timeout=n.timeout;function D(){if(!R)return;const G=nh.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),X={data:!s||s==="text"||s==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:G,config:e,request:R};ik(function(ae){r(ae),I()},function(ae){i(ae),I()},X),R=null}"onloadend"in R?R.onloadend=D:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(D)},R.onabort=function(){R&&(i(new dn("Request aborted",dn.ECONNABORTED,e,R)),R=null)},R.onerror=function(Z){const X=Z&&Z.message?Z.message:"Network Error",le=new dn(X,dn.ERR_NETWORK,e,R);le.event=Z||null,i(le),R=null},R.ontimeout=function(){let Z=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const X=n.transitional||ek;n.timeoutErrorMessage&&(Z=n.timeoutErrorMessage),i(new dn(Z,X.clarifyTimeoutError?dn.ETIMEDOUT:dn.ECONNABORTED,e,R)),R=null},a===void 0&&c.setContentType(null),"setRequestHeader"in R&&ur.forEach(c.toJSON(),function(Z,X){R.setRequestHeader(X,Z)}),ur.isUndefined(n.withCredentials)||(R.withCredentials=!!n.withCredentials),s&&s!=="json"&&(R.responseType=n.responseType),g&&([N,M]=x_(g,!0),R.addEventListener("progress",N)),d&&R.upload&&([C,B]=x_(d),R.upload.addEventListener("progress",C),R.upload.addEventListener("loadend",B)),(n.cancelToken||n.signal)&&(x=G=>{R&&(i(!G||G.type?new Ag(null,e,R):G),R.abort(),R=null)},n.cancelToken&&n.cancelToken.subscribe(x),n.signal&&(n.signal.aborted?x():n.signal.addEventListener("abort",x)));const V=LD(n.url);if(V&&Wc.protocols.indexOf(V)===-1){i(new dn("Unsupported protocol "+V+":",dn.ERR_BAD_REQUEST,e));return}R.send(a||null)})},zD=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let i=new AbortController,n;const a=function(g){if(!n){n=!0,s();const x=g instanceof Error?g:this.reason;i.abort(x instanceof dn?x:new Ag(x instanceof Error?x.message:x))}};let c=t&&setTimeout(()=>{c=null,a(new dn(`timeout ${t} of ms exceeded`,dn.ETIMEDOUT))},t);const s=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(g=>{g.unsubscribe?g.unsubscribe(a):g.removeEventListener("abort",a)}),e=null)};e.forEach(g=>g.addEventListener("abort",a));const{signal:d}=i;return d.unsubscribe=()=>ur.asap(s),d}},HD=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let i=0,n;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},VD=async function*(e,t){for await(const r of GD(e))yield*HD(r,t)},GD=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:i}=await t.read();if(r)break;yield i}}finally{await t.cancel()}},cC=(e,t,r,i)=>{const n=VD(e,t);let a=0,c,s=d=>{c||(c=!0,i&&i(d))};return new ReadableStream({async pull(d){try{const{done:g,value:x}=await n.next();if(g){s(),d.close();return}let C=x.byteLength;if(r){let N=a+=C;r(N)}d.enqueue(new Uint8Array(x))}catch(g){throw s(g),g}},cancel(d){return s(d),n.return()}},{highWaterMark:2})},uC=64*1024,{isFunction:zx}=ur,qD=(({Request:e,Response:t})=>({Request:e,Response:t}))(ur.global),{ReadableStream:hC,TextEncoder:AC}=ur.global,fC=(e,...t)=>{try{return!!e(...t)}catch{return!1}},KD=e=>{e=ur.merge.call({skipUndefined:!0},qD,e);const{fetch:t,Request:r,Response:i}=e,n=t?zx(t):typeof fetch=="function",a=zx(r),c=zx(i);if(!n)return!1;const s=n&&zx(hC),d=n&&(typeof AC=="function"?(M=>I=>M.encode(I))(new AC):async M=>new Uint8Array(await new r(M).arrayBuffer())),g=a&&s&&fC(()=>{let M=!1;const I=new r(Wc.origin,{body:new hC,method:"POST",get duplex(){return M=!0,"half"}}).headers.has("Content-Type");return M&&!I}),x=c&&s&&fC(()=>ur.isReadableStream(new i("").body)),C={stream:x&&(M=>M.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(M=>{!C[M]&&(C[M]=(I,R)=>{let D=I&&I[M];if(D)return D.call(I);throw new dn(`Response type '${M}' is not supported`,dn.ERR_NOT_SUPPORT,R)})});const N=async M=>{if(M==null)return 0;if(ur.isBlob(M))return M.size;if(ur.isSpecCompliantForm(M))return(await new r(Wc.origin,{method:"POST",body:M}).arrayBuffer()).byteLength;if(ur.isArrayBufferView(M)||ur.isArrayBuffer(M))return M.byteLength;if(ur.isURLSearchParams(M)&&(M=M+""),ur.isString(M))return(await d(M)).byteLength},B=async(M,I)=>{const R=ur.toFiniteNumber(M.getContentLength());return R??N(I)};return async M=>{let{url:I,method:R,data:D,signal:V,cancelToken:G,timeout:Z,onDownloadProgress:X,onUploadProgress:le,responseType:ae,headers:ce,withCredentials:se="same-origin",fetchOptions:ue}=sk(M),re=t||fetch;ae=ae?(ae+"").toLowerCase():"text";let W=zD([V,G&&G.toAbortSignal()],Z),de=null;const Ee=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let Ne;try{if(le&&g&&R!=="get"&&R!=="head"&&(Ne=await B(ce,D))!==0){let tt=new r(I,{method:"POST",body:D,duplex:"half"}),ee;if(ur.isFormData(D)&&(ee=tt.headers.get("content-type"))&&ce.setContentType(ee),tt.body){const[fe,pe]=aC(Ne,x_(oC(le)));D=cC(tt.body,uC,fe,pe)}}ur.isString(se)||(se=se?"include":"omit");const ge=a&&"credentials"in r.prototype,Pe={...ue,signal:W,method:R.toUpperCase(),headers:ce.normalize().toJSON(),body:D,duplex:"half",credentials:ge?se:void 0};de=a&&new r(I,Pe);let Ye=await(a?re(de,ue):re(I,Pe));const Me=x&&(ae==="stream"||ae==="response");if(x&&(X||Me&&Ee)){const tt={};["status","statusText","headers"].forEach(we=>{tt[we]=Ye[we]});const ee=ur.toFiniteNumber(Ye.headers.get("content-length")),[fe,pe]=X&&aC(ee,x_(oC(X),!0))||[];Ye=new i(cC(Ye.body,uC,fe,()=>{pe&&pe(),Ee&&Ee()}),tt)}ae=ae||"text";let De=await C[ur.findKey(C,ae)||"text"](Ye,M);return!Me&&Ee&&Ee(),await new Promise((tt,ee)=>{ik(tt,ee,{data:De,headers:nh.from(Ye.headers),status:Ye.status,statusText:Ye.statusText,config:M,request:de})})}catch(ge){throw Ee&&Ee(),ge&&ge.name==="TypeError"&&/Load failed|fetch/i.test(ge.message)?Object.assign(new dn("Network Error",dn.ERR_NETWORK,M,de),{cause:ge.cause||ge}):dn.from(ge,ge&&ge.code,M,de)}}},WD=new Map,ak=e=>{let t=e?e.env:{};const{fetch:r,Request:i,Response:n}=t,a=[i,n,r];let c=a.length,s=c,d,g,x=WD;for(;s--;)d=a[s],g=x.get(d),g===void 0&&x.set(d,g=s?new Map:KD(t)),x=g;return g};ak();const Vw={http:hD,xhr:QD,fetch:{get:ak}};ur.forEach(Vw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const dC=e=>`- ${e}`,$D=e=>ur.isFunction(e)||e===null||e===!1,ok={getAdapter:(e,t)=>{e=ur.isArray(e)?e:[e];const{length:r}=e;let i,n;const a={};for(let c=0;c<r;c++){i=e[c];let s;if(n=i,!$D(i)&&(n=Vw[(s=String(i)).toLowerCase()],n===void 0))throw new dn(`Unknown adapter '${s}'`);if(n&&(ur.isFunction(n)||(n=n.get(t))))break;a[s||"#"+c]=n}if(!n){const c=Object.entries(a).map(([d,g])=>`adapter ${d} `+(g===!1?"is not supported by the environment":"is not available in the build"));let s=r?c.length>1?`since :
`+c.map(dC).join(`
`):" "+dC(c[0]):"as no adapter specified";throw new dn("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:Vw};function pb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ag(null,e)}function pC(e){return pb(e),e.headers=nh.from(e.headers),e.data=db.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ok.getAdapter(e.adapter||Ov.adapter,e)(e).then(function(i){return pb(e),i.data=db.call(e,e.transformResponse,i),i.headers=nh.from(i.headers),i},function(i){return rk(i)||(pb(e),i&&i.response&&(i.response.data=db.call(e,e.transformResponse,i.response),i.response.headers=nh.from(i.response.headers))),Promise.reject(i)})}const lk="1.12.2",l2={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{l2[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const mC={};l2.transitional=function(t,r,i){function n(a,c){return"[Axios v"+lk+"] Transitional option '"+a+"'"+c+(i?". "+i:"")}return(a,c,s)=>{if(t===!1)throw new dn(n(c," has been removed"+(r?" in "+r:"")),dn.ERR_DEPRECATED);return r&&!mC[c]&&(mC[c]=!0,console.warn(n(c," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,c,s):!0}};l2.spelling=function(t){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function XD(e,t,r){if(typeof e!="object")throw new dn("options must be an object",dn.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let n=i.length;for(;n-- >0;){const a=i[n],c=t[a];if(c){const s=e[a],d=s===void 0||c(s,a,e);if(d!==!0)throw new dn("option "+a+" must be "+d,dn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new dn("Unknown option "+a,dn.ERR_BAD_OPTION)}}const Jy={assertOptions:XD,validators:l2},ff=Jy.validators;let c0=class{constructor(t){this.defaults=t||{},this.interceptors={request:new nC,response:new nC}}async request(t,r){try{return await this._request(t,r)}catch(i){if(i instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const a=n.stack?n.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=g0(this.defaults,r);const{transitional:i,paramsSerializer:n,headers:a}=r;i!==void 0&&Jy.assertOptions(i,{silentJSONParsing:ff.transitional(ff.boolean),forcedJSONParsing:ff.transitional(ff.boolean),clarifyTimeoutError:ff.transitional(ff.boolean)},!1),n!=null&&(ur.isFunction(n)?r.paramsSerializer={serialize:n}:Jy.assertOptions(n,{encode:ff.function,serialize:ff.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Jy.assertOptions(r,{baseUrl:ff.spelling("baseURL"),withXsrfToken:ff.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let c=a&&ur.merge(a.common,a[r.method]);a&&ur.forEach(["delete","get","head","post","put","patch","common"],M=>{delete a[M]}),r.headers=nh.concat(c,a);const s=[];let d=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(r)===!1||(d=d&&I.synchronous,s.unshift(I.fulfilled,I.rejected))});const g=[];this.interceptors.response.forEach(function(I){g.push(I.fulfilled,I.rejected)});let x,C=0,N;if(!d){const M=[pC.bind(this),void 0];for(M.unshift(...s),M.push(...g),N=M.length,x=Promise.resolve(r);C<N;)x=x.then(M[C++],M[C++]);return x}N=s.length;let B=r;for(;C<N;){const M=s[C++],I=s[C++];try{B=M(B)}catch(R){I.call(this,R);break}}try{x=pC.call(this,B)}catch(M){return Promise.reject(M)}for(C=0,N=g.length;C<N;)x=x.then(g[C++],g[C++]);return x}getUri(t){t=g0(this.defaults,t);const r=nk(t.baseURL,t.url,t.allowAbsoluteUrls);return JF(r,t.params,t.paramsSerializer)}};ur.forEach(["delete","get","head","options"],function(t){c0.prototype[t]=function(r,i){return this.request(g0(i||{},{method:t,url:r,data:(i||{}).data}))}});ur.forEach(["post","put","patch"],function(t){function r(i){return function(a,c,s){return this.request(g0(s||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}c0.prototype[t]=r(),c0.prototype[t+"Form"]=r(!0)});let ZD=class ck{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const i=this;this.promise.then(n=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](n);i._listeners=null}),this.promise.then=n=>{let a;const c=new Promise(s=>{i.subscribe(s),a=s}).then(n);return c.cancel=function(){i.unsubscribe(a)},c},t(function(a,c,s){i.reason||(i.reason=new Ag(a,c,s),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=i=>{t.abort(i)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new ck(function(n){t=n}),cancel:t}}};function YD(e){return function(r){return e.apply(null,r)}}function JD(e){return ur.isObject(e)&&e.isAxiosError===!0}const Gw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gw).forEach(([e,t])=>{Gw[t]=e});function uk(e){const t=new c0(e),r=QF(c0.prototype.request,t);return ur.extend(r,c0.prototype,t,{allOwnKeys:!0}),ur.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return uk(g0(e,n))},r}const Fo=uk(Ov);Fo.Axios=c0;Fo.CanceledError=Ag;Fo.CancelToken=ZD;Fo.isCancel=rk;Fo.VERSION=lk;Fo.toFormData=o2;Fo.AxiosError=dn;Fo.Cancel=Fo.CanceledError;Fo.all=function(t){return Promise.all(t)};Fo.spread=YD;Fo.isAxiosError=JD;Fo.mergeConfig=g0;Fo.AxiosHeaders=nh;Fo.formToJSON=e=>tk(ur.isHTMLForm(e)?new FormData(e):e);Fo.getAdapter=ok.getAdapter;Fo.HttpStatusCode=Gw;Fo.default=Fo;const{Axios:zoe,AxiosError:Hoe,CanceledError:Voe,isCancel:Goe,CancelToken:qoe,VERSION:Koe,all:Woe,Cancel:$oe,isAxiosError:Xoe,spread:Zoe,toFormData:Yoe,AxiosHeaders:Joe,HttpStatusCode:ele,formToJSON:tle,getAdapter:rle,mergeConfig:ile}=Fo,eR="http://192.168.1.12:4000/api/v1",tR=5,rR=1e3,iR=2,Cr=Fo.create({baseURL:eR,withCredentials:!0});Cr.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Cr.interceptors.response.use(e=>e,e=>{const t=e.config;t._retryCount||(t._retryCount=0);const r=t.url?.includes("/user/register");if(e.response?.status===429&&t._retryCount<tR&&!r){t._retryCount+=1;const i=rR*Math.pow(iR,t._retryCount-1);return new Promise(n=>{setTimeout(()=>{n(Cr.request(t))},i)})}return Promise.reject(e)});let nR={data:""},sR=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||nR,aR=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,oR=/\/\*[^]*?\*\/|  +/g,gC=/\n+/g,np=(e,t)=>{let r="",i="",n="";for(let a in e){let c=e[a];a[0]=="@"?a[1]=="i"?r=a+" "+c+";":i+=a[1]=="f"?np(c,a):a+"{"+np(c,a[1]=="k"?"":t)+"}":typeof c=="object"?i+=np(c,t?t.replace(/([^,])+/g,s=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,s):s?s+" "+d:d)):a):c!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=np.p?np.p(a,c):a+":"+c+";")}return r+(t&&n?t+"{"+n+"}":n)+i},Zf={},hk=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+hk(e[r]);return t}return e},lR=(e,t,r,i,n)=>{let a=hk(e),c=Zf[a]||(Zf[a]=(d=>{let g=0,x=11;for(;g<d.length;)x=101*x+d.charCodeAt(g++)>>>0;return"go"+x})(a));if(!Zf[c]){let d=a!==e?e:(g=>{let x,C,N=[{}];for(;x=aR.exec(g.replace(oR,""));)x[4]?N.shift():x[3]?(C=x[3].replace(gC," ").trim(),N.unshift(N[0][C]=N[0][C]||{})):N[0][x[1]]=x[2].replace(gC," ").trim();return N[0]})(e);Zf[c]=np(n?{["@keyframes "+c]:d}:d,r?"":"."+c)}let s=r&&Zf.g?Zf.g:null;return r&&(Zf.g=Zf[c]),((d,g,x,C)=>{C?g.data=g.data.replace(C,d):g.data.indexOf(d)===-1&&(g.data=x?d+g.data:g.data+d)})(Zf[c],t,i,s),c},cR=(e,t,r)=>e.reduce((i,n,a)=>{let c=t[a];if(c&&c.call){let s=c(r),d=s&&s.props&&s.props.className||/^go/.test(s)&&s;c=d?"."+d:s&&typeof s=="object"?s.props?"":np(s,""):s===!1?"":s}return i+n+(c??"")},"");function c2(e){let t=this||{},r=e.call?e(t.p):e;return lR(r.unshift?r.raw?cR(r,[].slice.call(arguments,1),t.p):r.reduce((i,n)=>Object.assign(i,n&&n.call?n(t.p):n),{}):r,sR(t.target),t.g,t.o,t.k)}let Ak,qw,Kw;c2.bind({g:1});let gd=c2.bind({k:1});function uR(e,t,r,i){np.p=t,Ak=e,qw=r,Kw=i}function Bp(e,t){let r=this||{};return function(){let i=arguments;function n(a,c){let s=Object.assign({},a),d=s.className||n.className;r.p=Object.assign({theme:qw&&qw()},s),r.o=/ *go\d+/.test(d),s.className=c2.apply(r,i)+(d?" "+d:"");let g=e;return e[0]&&(g=s.as||e,delete s.as),Kw&&g[0]&&Kw(s),Ak(g,s)}return n}}var hR=e=>typeof e=="function",Ww=(e,t)=>hR(e)?e(t):e,AR=(()=>{let e=0;return()=>(++e).toString()})(),fR=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),dR=20,fk="default",dk=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(c=>c.id===t.toast.id?{...c,...t.toast}:c)};case 2:let{toast:i}=t;return dk(e,{type:e.toasts.find(c=>c.id===i.id)?1:0,toast:i});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(c=>c.id===n||n===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(c=>c.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+a}))}}},pR=[],mR={toasts:[],pausedAt:void 0,settings:{toastLimit:dR}},Om={},pk=(e,t=fk)=>{Om[t]=dk(Om[t]||mR,e),pR.forEach(([r,i])=>{r===t&&i(Om[t])})},mk=e=>Object.keys(Om).forEach(t=>pk(e,t)),gR=e=>Object.keys(Om).find(t=>Om[t].toasts.some(r=>r.id===e)),_4=(e=fk)=>t=>{pk(t,e)},vR=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:r?.id||AR()}),Qv=e=>(t,r)=>{let i=vR(t,e,r);return _4(i.toasterId||gR(i.id))({type:2,toast:i}),i.id},dc=(e,t)=>Qv("blank")(e,t);dc.error=Qv("error");dc.success=Qv("success");dc.loading=Qv("loading");dc.custom=Qv("custom");dc.dismiss=(e,t)=>{let r={type:3,toastId:e};t?_4(t)(r):mk(r)};dc.dismissAll=e=>dc.dismiss(void 0,e);dc.remove=(e,t)=>{let r={type:4,toastId:e};t?_4(t)(r):mk(r)};dc.removeAll=e=>dc.remove(void 0,e);dc.promise=(e,t,r)=>{let i=dc.loading(t.loading,{...r,...r?.loading});return typeof e=="function"&&(e=e()),e.then(n=>{let a=t.success?Ww(t.success,n):void 0;return a?dc.success(a,{id:i,...r,...r?.success}):dc.dismiss(i),n}).catch(n=>{let a=t.error?Ww(t.error,n):void 0;a?dc.error(a,{id:i,...r,...r?.error}):dc.dismiss(i)}),e};var xR=gd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,yR=gd`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_R=gd`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,bR=Bp("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${yR} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${_R} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,wR=gd`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,BR=Bp("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${wR} 1s linear infinite;
`,CR=gd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,SR=gd`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ER=Bp("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${CR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${SR} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,TR=Bp("div")`
  position: absolute;
`,FR=Bp("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kR=gd`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,NR=Bp("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kR} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,IR=({toast:e})=>{let{icon:t,type:r,iconTheme:i}=e;return t!==void 0?typeof t=="string"?_e.createElement(NR,null,t):t:r==="blank"?null:_e.createElement(FR,null,_e.createElement(BR,{...i}),r!=="loading"&&_e.createElement(TR,null,r==="error"?_e.createElement(bR,{...i}):_e.createElement(ER,{...i})))},LR=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,MR=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,PR="0%{opacity:0;} 100%{opacity:1;}",DR="0%{opacity:1;} 100%{opacity:0;}",RR=Bp("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,UR=Bp("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,jR=(e,t)=>{let r=e.includes("top")?1:-1,[i,n]=fR()?[PR,DR]:[LR(r),MR(r)];return{animation:t?`${gd(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${gd(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};_e.memo(({toast:e,position:t,style:r,children:i})=>{let n=e.height?jR(e.position||t||"top-center",e.visible):{opacity:0},a=_e.createElement(IR,{toast:e}),c=_e.createElement(UR,{...e.ariaProps},Ww(e.message,e));return _e.createElement(RR,{className:e.className,style:{...n,...r,...e.style}},typeof i=="function"?i({icon:a,message:c}):_e.createElement(_e.Fragment,null,a,c))});uR(_e.createElement);c2`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Qr=dc;const Sf=Object.create(null);Sf.open="0";Sf.close="1";Sf.ping="2";Sf.pong="3";Sf.message="4";Sf.upgrade="5";Sf.noop="6";const e_=Object.create(null);Object.keys(Sf).forEach(e=>{e_[Sf[e]]=e});const $w={type:"error",data:"parser error"},gk=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",vk=typeof ArrayBuffer=="function",xk=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,b4=({type:e,data:t},r,i)=>gk&&t instanceof Blob?r?i(t):vC(t,i):vk&&(t instanceof ArrayBuffer||xk(t))?r?i(t):vC(new Blob([t]),i):i(Sf[e]+(t||"")),vC=(e,t)=>{const r=new FileReader;return r.onload=function(){const i=r.result.split(",")[1];t("b"+(i||""))},r.readAsDataURL(e)};function xC(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let mb;function OR(e,t){if(gk&&e.data instanceof Blob)return e.data.arrayBuffer().then(xC).then(t);if(vk&&(e.data instanceof ArrayBuffer||xk(e.data)))return t(xC(e.data));b4(e,!1,r=>{mb||(mb=new TextEncoder),t(mb.encode(r))})}const yC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<yC.length;e++)E1[yC.charCodeAt(e)]=e;const QR=e=>{let t=e.length*.75,r=e.length,i,n=0,a,c,s,d;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const g=new ArrayBuffer(t),x=new Uint8Array(g);for(i=0;i<r;i+=4)a=E1[e.charCodeAt(i)],c=E1[e.charCodeAt(i+1)],s=E1[e.charCodeAt(i+2)],d=E1[e.charCodeAt(i+3)],x[n++]=a<<2|c>>4,x[n++]=(c&15)<<4|s>>2,x[n++]=(s&3)<<6|d&63;return g},zR=typeof ArrayBuffer=="function",w4=(e,t)=>{if(typeof e!="string")return{type:"message",data:yk(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:HR(e.substring(1),t)}:e_[r]?e.length>1?{type:e_[r],data:e.substring(1)}:{type:e_[r]}:$w},HR=(e,t)=>{if(zR){const r=QR(e);return yk(r,t)}else return{base64:!0,data:e}},yk=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},_k="",VR=(e,t)=>{const r=e.length,i=new Array(r);let n=0;e.forEach((a,c)=>{b4(a,!1,s=>{i[c]=s,++n===r&&t(i.join(_k))})})},GR=(e,t)=>{const r=e.split(_k),i=[];for(let n=0;n<r.length;n++){const a=w4(r[n],t);if(i.push(a),a.type==="error")break}return i};function qR(){return new TransformStream({transform(e,t){OR(e,r=>{const i=r.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const a=new DataView(n.buffer);a.setUint8(0,126),a.setUint16(1,i)}else{n=new Uint8Array(9);const a=new DataView(n.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(r)})}})}let gb;function Hx(e){return e.reduce((t,r)=>t+r.length,0)}function Vx(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)r[n]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}function KR(e,t){gb||(gb=new TextDecoder);const r=[];let i=0,n=-1,a=!1;return new TransformStream({transform(c,s){for(r.push(c);;){if(i===0){if(Hx(r)<1)break;const d=Vx(r,1);a=(d[0]&128)===128,n=d[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(Hx(r)<2)break;const d=Vx(r,2);n=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),i=3}else if(i===2){if(Hx(r)<8)break;const d=Vx(r,8),g=new DataView(d.buffer,d.byteOffset,d.length),x=g.getUint32(0);if(x>Math.pow(2,21)-1){s.enqueue($w);break}n=x*Math.pow(2,32)+g.getUint32(4),i=3}else{if(Hx(r)<n)break;const d=Vx(r,n);s.enqueue(w4(a?d:gb.decode(d),t)),i=0}if(n===0||n>e){s.enqueue($w);break}}}})}const bk=4;function $o(e){if(e)return WR(e)}function WR(e){for(var t in $o.prototype)e[t]=$o.prototype[t];return e}$o.prototype.on=$o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};$o.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};$o.prototype.off=$o.prototype.removeListener=$o.prototype.removeAllListeners=$o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,n=0;n<r.length;n++)if(i=r[n],i===t||i.fn===t){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+e],this};$o.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,n=r.length;i<n;++i)r[i].apply(this,t)}return this};$o.prototype.emitReserved=$o.prototype.emit;$o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};$o.prototype.hasListeners=function(e){return!!this.listeners(e).length};const u2=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Jh=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),$R="arraybuffer";function wk(e,...t){return t.reduce((r,i)=>(e.hasOwnProperty(i)&&(r[i]=e[i]),r),{})}const XR=Jh.setTimeout,ZR=Jh.clearTimeout;function h2(e,t){t.useNativeTimers?(e.setTimeoutFn=XR.bind(Jh),e.clearTimeoutFn=ZR.bind(Jh)):(e.setTimeoutFn=Jh.setTimeout.bind(Jh),e.clearTimeoutFn=Jh.clearTimeout.bind(Jh))}const YR=1.33;function JR(e){return typeof e=="string"?eU(e):Math.ceil((e.byteLength||e.size)*YR)}function eU(e){let t=0,r=0;for(let i=0,n=e.length;i<n;i++)t=e.charCodeAt(i),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}function Bk(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function tU(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function rU(e){let t={},r=e.split("&");for(let i=0,n=r.length;i<n;i++){let a=r[i].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class iU extends Error{constructor(t,r,i){super(t),this.description=r,this.context=i,this.type="TransportError"}}class B4 extends $o{constructor(t){super(),this.writable=!1,h2(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,i){return super.emitReserved("error",new iU(t,r,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=w4(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=tU(t);return r.length?"?"+r:""}}class nU extends B4{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||r()})),this.writable||(i++,this.once("drain",function(){--i||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};GR(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,VR(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Bk()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Ck=!1;try{Ck=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const sU=Ck;function aU(){}class oU extends nU{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,r){const i=this.request({method:"POST",data:t});i.on("success",r),i.on("error",(n,a)=>{this.onError("xhr post error",n,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,i)=>{this.onError("xhr poll error",r,i)}),this.pollXhr=t}}let Qm=class t_ extends $o{constructor(t,r,i){super(),this.createRequest=t,h2(this,i),this._opts=i,this._method=i.method||"GET",this._uri=r,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const r=wk(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=t_.requestsCount++,t_.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=aU,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete t_.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Qm.requestsCount=0;Qm.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_C);else if(typeof addEventListener=="function"){const e="onpagehide"in Jh?"pagehide":"unload";addEventListener(e,_C,!1)}}function _C(){for(let e in Qm.requests)Qm.requests.hasOwnProperty(e)&&Qm.requests[e].abort()}const lU=function(){const e=Sk({xdomain:!1});return e&&e.responseType!==null}();class cU extends oU{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=lU&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Qm(Sk,this.uri(),t)}}function Sk(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||sU))return new XMLHttpRequest}catch{}if(!t)try{return new Jh[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ek=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class uU extends B4{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,i=Ek?{}:wk(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],n=r===t.length-1;b4(i,this.supportsBinary,a=>{try{this.doWrite(i,a)}catch{}n&&u2(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Bk()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const vb=Jh.WebSocket||Jh.MozWebSocket;class hU extends uU{createSocket(t,r,i){return Ek?new vb(t,r,i):r?new vb(t,r):new vb(t)}doWrite(t,r){this.ws.send(r)}}class AU extends B4{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=KR(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(r).getReader(),n=qR();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const a=()=>{i.read().then(({done:s,value:d})=>{s||(this.onPacket(d),a())}).catch(s=>{})};a();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],n=r===t.length-1;this._writer.write(i).then(()=>{n&&u2(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const fU={websocket:hU,webtransport:AU,polling:cU},dU=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,pU=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Xw(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),i=e.indexOf("]");r!=-1&&i!=-1&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));let n=dU.exec(e||""),a={},c=14;for(;c--;)a[pU[c]]=n[c]||"";return r!=-1&&i!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=mU(a,a.path),a.queryKey=gU(a,a.query),a}function mU(e,t){const r=/\/{2,9}/g,i=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function gU(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,a){n&&(r[n]=a)}),r}const Zw=typeof addEventListener=="function"&&typeof removeEventListener=="function",r_=[];Zw&&addEventListener("offline",()=>{r_.forEach(e=>e())},!1);class dp extends $o{constructor(t,r){if(super(),this.binaryType=$R,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const i=Xw(t);r.hostname=i.host,r.secure=i.protocol==="https"||i.protocol==="wss",r.port=i.port,i.query&&(r.query=i.query)}else r.host&&(r.hostname=Xw(r.host).host);h2(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=rU(this.opts.query)),Zw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},r_.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=bk,r.transport=t,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&dp.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",dp.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(r+=JR(n)),i>0&&r>this._maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,u2(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,i){return this._sendPacket("message",t,r,i),this}send(t,r,i){return this._sendPacket("message",t,r,i),this}_sendPacket(t,r,i,n){if(typeof r=="function"&&(n=r,r=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const a={type:t,data:r,options:i};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(dp.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Zw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=r_.indexOf(this._offlineEventListener);i!==-1&&r_.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}dp.protocol=bk;class vU extends dp{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),i=!1;dp.priorWebsocketSuccess=!1;const n=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",C=>{if(!i)if(C.type==="pong"&&C.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;dp.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(x(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const N=new Error("probe error");N.transport=r.name,this.emitReserved("upgradeError",N)}}))};function a(){i||(i=!0,x(),r.close(),r=null)}const c=C=>{const N=new Error("probe error: "+C);N.transport=r.name,a(),this.emitReserved("upgradeError",N)};function s(){c("transport closed")}function d(){c("socket closed")}function g(C){r&&C.name!==r.name&&a()}const x=()=>{r.removeListener("open",n),r.removeListener("error",c),r.removeListener("close",s),this.off("close",d),this.off("upgrading",g)};r.once("open",n),r.once("error",c),r.once("close",s),this.once("close",d),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&r.push(t[i]);return r}}let xU=class extends vU{constructor(t,r={}){const i=typeof t=="object"?t:r;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>fU[n]).filter(n=>!!n)),super(t,i)}};function yU(e,t="",r){let i=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),i=Xw(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const a=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+a+":"+i.port+t,i.href=i.protocol+"://"+a+(r&&r.port===i.port?"":":"+i.port),i}const _U=typeof ArrayBuffer=="function",bU=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Tk=Object.prototype.toString,wU=typeof Blob=="function"||typeof Blob<"u"&&Tk.call(Blob)==="[object BlobConstructor]",BU=typeof File=="function"||typeof File<"u"&&Tk.call(File)==="[object FileConstructor]";function C4(e){return _U&&(e instanceof ArrayBuffer||bU(e))||wU&&e instanceof Blob||BU&&e instanceof File}function i_(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,i=e.length;r<i;r++)if(i_(e[r]))return!0;return!1}if(C4(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return i_(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&i_(e[r]))return!0;return!1}function CU(e){const t=[],r=e.data,i=e;return i.data=Yw(r,t),i.attachments=t.length,{packet:i,buffers:t}}function Yw(e,t){if(!e)return e;if(C4(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=Yw(e[i],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=Yw(e[i],t));return r}return e}function SU(e,t){return e.data=Jw(e.data,t),delete e.attachments,e}function Jw(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Jw(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Jw(e[r],t));return e}const EU=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],TU=5;var Gn;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Gn||(Gn={}));class FU{constructor(t){this.replacer=t}encode(t){return(t.type===Gn.EVENT||t.type===Gn.ACK)&&i_(t)?this.encodeAsBinary({type:t.type===Gn.EVENT?Gn.BINARY_EVENT:Gn.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Gn.BINARY_EVENT||t.type===Gn.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=CU(t),i=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(i),n}}function bC(e){return Object.prototype.toString.call(e)==="[object Object]"}class S4 extends $o{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const i=r.type===Gn.BINARY_EVENT;i||r.type===Gn.BINARY_ACK?(r.type=i?Gn.EVENT:Gn.ACK,this.reconstructor=new kU(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(C4(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const i={type:Number(t.charAt(0))};if(Gn[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Gn.BINARY_EVENT||i.type===Gn.BINARY_ACK){const a=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const c=t.substring(a,r);if(c!=Number(c)||t.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(c)}if(t.charAt(r+1)==="/"){const a=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););i.nsp=t.substring(a,r)}else i.nsp="/";const n=t.charAt(r+1);if(n!==""&&Number(n)==n){const a=r+1;for(;++r;){const c=t.charAt(r);if(c==null||Number(c)!=c){--r;break}if(r===t.length)break}i.id=Number(t.substring(a,r+1))}if(t.charAt(++r)){const a=this.tryParse(t.substr(r));if(S4.isPayloadValid(i.type,a))i.data=a;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Gn.CONNECT:return bC(r);case Gn.DISCONNECT:return r===void 0;case Gn.CONNECT_ERROR:return typeof r=="string"||bC(r);case Gn.EVENT:case Gn.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&EU.indexOf(r[0])===-1);case Gn.ACK:case Gn.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class kU{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=SU(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const NU=Object.freeze(Object.defineProperty({__proto__:null,Decoder:S4,Encoder:FU,get PacketType(){return Gn},protocol:TU},Symbol.toStringTag,{value:"Module"}));function UA(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const IU=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Fk extends $o{constructor(t,r,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[UA(t,"open",this.onopen.bind(this)),UA(t,"packet",this.onpacket.bind(this)),UA(t,"error",this.onerror.bind(this)),UA(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var i,n,a;if(IU.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const c={type:Gn.EVENT,data:r};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const x=this.ids++,C=r.pop();this._registerAckCallback(x,C),c.id=x}const s=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,d=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!s||(d?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,r){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=r;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);r.call(this,new Error("operation has timed out"))},n),c=(...s)=>{this.io.clearTimeoutFn(a),r.apply(this,s)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...r){return new Promise((i,n)=>{const a=(c,s)=>c?n(c):i(s);a.withError=!0,r.push(a),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...a)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...a)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Gn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Gn.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Gn.EVENT:case Gn.BINARY_EVENT:this.onevent(t);break;case Gn.ACK:case Gn.BINARY_ACK:this.onack(t);break;case Gn.DISCONNECT:this.ondisconnect();break;case Gn.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const i of r)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let i=!1;return function(...n){i||(i=!0,r.packet({type:Gn.ACK,id:t,data:n}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Gn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const i of r)i.apply(this,t.data)}}}function fg(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}fg.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-r:e+r}return Math.min(e,this.max)|0};fg.prototype.reset=function(){this.attempts=0};fg.prototype.setMin=function(e){this.ms=e};fg.prototype.setMax=function(e){this.max=e};fg.prototype.setJitter=function(e){this.jitter=e};class e5 extends $o{constructor(t,r){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,h2(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new fg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const n=r.parser||NU;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new xU(this.uri,this.opts);const r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=UA(r,"open",function(){i.onopen(),t&&t()}),a=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),t?t(s):this.maybeReconnectOnOpen()},c=UA(r,"error",a);if(this._timeout!==!1){const s=this._timeout,d=this.setTimeoutFn(()=>{n(),a(new Error("timeout")),r.close()},s);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(n),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(UA(t,"ping",this.onping.bind(this)),UA(t,"data",this.ondata.bind(this)),UA(t,"error",this.onerror.bind(this)),UA(t,"close",this.onclose.bind(this)),UA(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){u2(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new Fk(this,t,r),this.nsps[t]=i),i}_destroy(t){const r=Object.keys(this.nsps);for(const i of r)if(this.nsps[i].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let i=0;i<r.length;i++)this.engine.write(r[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const f1={};function n_(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=yU(e,t.path||"/socket.io"),i=r.source,n=r.id,a=r.path,c=f1[n]&&a in f1[n].nsps,s=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let d;return s?d=new e5(i,t):(f1[n]||(f1[n]=new e5(i,t)),d=f1[n]),r.query&&!t.query&&(t.query=r.queryKey),d.socket(r.path,t)}Object.assign(n_,{Manager:e5,Socket:Fk,io:n_,connect:n_});const LU=()=>"http://192.168.1.12:4000/api/v1".replace(/\/api\/v1$|\/api$/,""),MU=LU();let ds=null,zm=[];const rn={on(e,t){if(ds&&typeof ds.on=="function")return ds.on(e,t);zm.push({event:e,cb:t})},off(e,t){if(ds&&typeof ds.off=="function")return ds.off(e,t);zm=zm.filter(r=>r.event!==e?!0:t?r.cb!==t:!1)},emit(e,...t){if(ds&&typeof ds.emit=="function")return ds.emit(e,...t)},disconnect(){ds&&typeof ds.disconnect=="function"&&(ds.disconnect(),ds=null)},get connected(){return ds?ds.connected:!1},_getRaw(){return ds}},PU=e=>e?(ds=n_(MU,{withCredentials:!0,query:{token:e}}),ds.on("connect_error",t=>{console.warn("Socket connection error:",t.message),t.message==="Authentication error"&&(ds.disconnect(),ds=null)}),ds.on("connect",()=>{console.log("Socket connected successfully")}),zm.length>0&&(zm.forEach(({event:t,cb:r})=>{try{ds.on(t,r)}catch(i){console.error("Failed to attach pending listener",t,i)}}),zm=[]),ds):null,t5=e=>{ds&&(ds.disconnect(),ds=null),e?(localStorage.setItem("token",e),ds=PU(e)):(localStorage.removeItem("token"),ds=null)},Gx=()=>{ds&&(ds.disconnect(),ds=null),localStorage.removeItem("token")},kk=_e.createContext(),DU=({children:e})=>{const[t,r]=_e.useState(!1),[i,n]=_e.useState(!1),[a,c]=_e.useState(null),[s,d]=_e.useState(null),[g,x]=_e.useState(null),[C,N]=_e.useState(!1),[B,M]=_e.useState(!1),[I,R]=_e.useState(null),D=_e.useRef(!1),V=async(X=null)=>{if(!B){M(!0);try{const le=localStorage.getItem("tokenType"),ae=JSON.parse(localStorage.getItem("admin")||"null"),ce=JSON.parse(localStorage.getItem("user")||"null");let se;if(le==="admin")ae&&(se=(await Cr.get("/admin/auth/me")).data);else if(ce)try{se=(await Cr.get("/user/me")).data}catch(ue){if(ue.response?.data?.code==="ACCOUNT_NOT_VERIFIED"){d(ce),r(!0),c("user"),x(null),N(!1),localStorage.setItem("user",JSON.stringify(ce)),Qr.error("Account not verified. Please wait for admin verification.");return}throw ue}if(se&&se.success&&se.user){const ue=se.user;if(ue.type==="admin"||ue.role==="Admin")x(ue),r(!0),c("admin"),d(null),localStorage.setItem("admin",JSON.stringify(ue));else{if(ue.banned){localStorage.clear(),Gx(),d(null),x(null),N(!1),r(!1),c(null),Qr.error("Your account has been banned");return}d(ue),r(!0),c("user"),x(null),N(ue.verified||!1),localStorage.setItem("user",JSON.stringify(ue))}const re=localStorage.getItem("token");if(re&&t5(re),X)if(le==="admin"){const W=localStorage.getItem("adminLastPath");W&&W.startsWith("/admin/")?X(W,{replace:!0}):X("/admin/analytics",{replace:!0})}else{const W=localStorage.getItem("userLastPath");W&&W.startsWith("/user/")?X(W,{replace:!0}):ue.role==="Service Provider"?(X("/user/my-service",{replace:!0}),localStorage.setItem("userLastPath","/user/my-service")):(X("/user/service-request",{replace:!0}),localStorage.setItem("userLastPath","/user/service-request"))}return}}catch(le){console.warn("Authentication failed:",le.message),localStorage.removeItem("token"),Gx();try{if(localStorage.getItem("tokenType")==="admin"){const ce=JSON.parse(localStorage.getItem("admin")||"null");if(ce){x(ce),r(!0),c("admin"),d(null);return}}else{const ce=JSON.parse(localStorage.getItem("user")||"null");if(ce){d(ce),r(!0),c("user"),x(null),N(ce.verified||!1);return}}}catch{localStorage.clear(),Gx(),d(null),x(null),r(!1),c(null)}}finally{M(!1),n(!0)}}},G=async()=>{try{await Promise.all([Cr.get("/user/logout",{withCredentials:!0}),Cr.get("/admin/auth/logout",{withCredentials:!0})])}catch{console.warn("Logout request failed, clearing local data anyway.")}localStorage.clear(),Gx(),d(null),x(null),N(!1),r(!1),c(null),Qr.success("Logged out successfully")};_e.useEffect(()=>{if(D.current)return;D.current=!0;const X=JSON.parse(localStorage.getItem("user")||"null"),le=JSON.parse(localStorage.getItem("admin")||"null"),ae=localStorage.getItem("isAuthorized")==="true",ce=localStorage.getItem("tokenType");if(le&&ae&&ce==="admin"){x(le),r(!0),c("admin"),d(null),n(!0),V();return}X&&ae&&ce==="user"&&(d(X),r(!0),c("user"),x(null),N(X.verified||!1),n(!0)),V()},[]);const Z=X=>{R(X)};return p.jsx(kk.Provider,{value:{isAuthorized:t,setIsAuthorized:r,authLoaded:i,tokenType:a,setTokenType:c,user:s,setUser:d,admin:g,setAdmin:x,isUserVerified:C,setIsUserVerified:N,fetchProfile:V,logout:G,openChatAppointmentId:I,setOpenChatAppointmentId:R,openChat:Z},children:e})},Ma=()=>_e.useContext(kk);function Nk(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=Nk(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function u0(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=Nk(e))&&(i&&(i+=" "),i+=t);return i}function RU(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}RU(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var zv=e=>typeof e=="number"&&!isNaN(e),v0=e=>typeof e=="string",vd=e=>typeof e=="function",UU=e=>v0(e)||zv(e),r5=e=>v0(e)||vd(e)?e:null,jU=(e,t)=>e===!1||zv(e)&&e>0?e:t,i5=e=>_e.isValidElement(e)||v0(e)||vd(e)||zv(e);function OU(e,t,r=300){let{scrollHeight:i,style:n}=e;requestAnimationFrame(()=>{n.minHeight="initial",n.height=i+"px",n.transition=`all ${r}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(t,r)})})}function QU({enter:e,exit:t,appendPosition:r=!1,collapse:i=!0,collapseDuration:n=300}){return function({children:a,position:c,preventExitTransition:s,done:d,nodeRef:g,isIn:x,playToast:C}){let N=r?`${e}--${c}`:e,B=r?`${t}--${c}`:t,M=_e.useRef(0);return _e.useLayoutEffect(()=>{let I=g.current,R=N.split(" "),D=V=>{V.target===g.current&&(C(),I.removeEventListener("animationend",D),I.removeEventListener("animationcancel",D),M.current===0&&V.type!=="animationcancel"&&I.classList.remove(...R))};I.classList.add(...R),I.addEventListener("animationend",D),I.addEventListener("animationcancel",D)},[]),_e.useEffect(()=>{let I=g.current,R=()=>{I.removeEventListener("animationend",R),i?OU(I,d,n):d()};x||(s?R():(M.current=1,I.className+=` ${B}`,I.addEventListener("animationend",R)))},[x]),On.createElement(On.Fragment,null,a)}}function wC(e,t){return{content:Ik(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function Ik(e,t,r=!1){return _e.isValidElement(e)&&!v0(e.type)?_e.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):vd(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function zU({closeToast:e,theme:t,ariaLabel:r="close"}){return On.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:i=>{i.stopPropagation(),e(!0)},"aria-label":r},On.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},On.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function HU({delay:e,isRunning:t,closeToast:r,type:i="default",hide:n,className:a,controlledProgress:c,progress:s,rtl:d,isIn:g,theme:x}){let C=n||c&&s===0,N={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};c&&(N.transform=`scaleX(${s})`);let B=u0("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${x}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":d}),M=vd(a)?a({rtl:d,type:i,defaultClassName:B}):u0(B,a),I={[c&&s>=1?"onTransitionEnd":"onAnimationEnd"]:c&&s<1?null:()=>{g&&r()}};return On.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":C},On.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${x} Toastify__progress-bar--${i}`}),On.createElement("div",{role:"progressbar","aria-hidden":C?"true":"false","aria-label":"notification timer",className:M,style:N,...I}))}var VU=1,Lk=()=>`${VU++}`;function GU(e,t,r){let i=1,n=0,a=[],c=[],s=t,d=new Map,g=new Set,x=V=>(g.add(V),()=>g.delete(V)),C=()=>{c=Array.from(d.values()),g.forEach(V=>V())},N=({containerId:V,toastId:G,updateId:Z})=>{let X=V?V!==e:e!==1,le=d.has(G)&&Z==null;return X||le},B=(V,G)=>{d.forEach(Z=>{var X;(G==null||G===Z.props.toastId)&&((X=Z.toggle)==null||X.call(Z,V))})},M=V=>{var G,Z;(Z=(G=V.props)==null?void 0:G.onClose)==null||Z.call(G,V.removalReason),V.isActive=!1},I=V=>{if(V==null)d.forEach(M);else{let G=d.get(V);G&&M(G)}C()},R=()=>{n-=a.length,a=[]},D=V=>{var G,Z;let{toastId:X,updateId:le}=V.props,ae=le==null;V.staleId&&d.delete(V.staleId),V.isActive=!0,d.set(X,V),C(),r(wC(V,ae?"added":"updated")),ae&&((Z=(G=V.props).onOpen)==null||Z.call(G))};return{id:e,props:s,observe:x,toggle:B,removeToast:I,toasts:d,clearQueue:R,buildToast:(V,G)=>{if(N(G))return;let{toastId:Z,updateId:X,data:le,staleId:ae,delay:ce}=G,se=X==null;se&&n++;let ue={...s,style:s.toastStyle,key:i++,...Object.fromEntries(Object.entries(G).filter(([W,de])=>de!=null)),toastId:Z,updateId:X,data:le,isIn:!1,className:r5(G.className||s.toastClassName),progressClassName:r5(G.progressClassName||s.progressClassName),autoClose:G.isLoading?!1:jU(G.autoClose,s.autoClose),closeToast(W){d.get(Z).removalReason=W,I(Z)},deleteToast(){let W=d.get(Z);if(W!=null){if(r(wC(W,"removed")),d.delete(Z),n--,n<0&&(n=0),a.length>0){D(a.shift());return}C()}}};ue.closeButton=s.closeButton,G.closeButton===!1||i5(G.closeButton)?ue.closeButton=G.closeButton:G.closeButton===!0&&(ue.closeButton=i5(s.closeButton)?s.closeButton:!0);let re={content:V,props:ue,staleId:ae};s.limit&&s.limit>0&&n>s.limit&&se?a.push(re):zv(ce)?setTimeout(()=>{D(re)},ce):D(re)},setProps(V){s=V},setToggle:(V,G)=>{let Z=d.get(V);Z&&(Z.toggle=G)},isToastActive:V=>{var G;return(G=d.get(V))==null?void 0:G.isActive},getSnapshot:()=>c}}var wu=new Map,hv=[],n5=new Set,qU=e=>n5.forEach(t=>t(e)),Mk=()=>wu.size>0;function KU(){hv.forEach(e=>Dk(e.content,e.options)),hv=[]}var WU=(e,{containerId:t})=>{var r;return(r=wu.get(t||1))==null?void 0:r.toasts.get(e)};function Pk(e,t){var r;if(t)return!!((r=wu.get(t))!=null&&r.isToastActive(e));let i=!1;return wu.forEach(n=>{n.isToastActive(e)&&(i=!0)}),i}function $U(e){if(!Mk()){hv=hv.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||UU(e))wu.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=wu.get(e.containerId);t?t.removeToast(e.id):wu.forEach(r=>{r.removeToast(e.id)})}}var XU=(e={})=>{wu.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function Dk(e,t){i5(e)&&(Mk()||hv.push({content:e,options:t}),wu.forEach(r=>{r.buildToast(e,t)}))}function ZU(e){var t;(t=wu.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function Rk(e,t){wu.forEach(r=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===r.id)&&r.toggle(e,t?.id)})}function YU(e){let t=e.containerId||1;return{subscribe(r){let i=GU(t,e,qU);wu.set(t,i);let n=i.observe(r);return KU(),()=>{n(),wu.delete(t)}},setProps(r){var i;(i=wu.get(t))==null||i.setProps(r)},getSnapshot(){var r;return(r=wu.get(t))==null?void 0:r.getSnapshot()}}}function JU(e){return n5.add(e),()=>{n5.delete(e)}}function ej(e){return e&&(v0(e.toastId)||zv(e.toastId))?e.toastId:Lk()}function Hv(e,t){return Dk(e,t),t.toastId}function A2(e,t){return{...t,type:t&&t.type||e,toastId:ej(t)}}function f2(e){return(t,r)=>Hv(t,A2(e,r))}function es(e,t){return Hv(e,A2("default",t))}es.loading=(e,t)=>Hv(e,A2("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function tj(e,{pending:t,error:r,success:i},n){let a;t&&(a=v0(t)?es.loading(t,n):es.loading(t.render,{...n,...t}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(g,x,C)=>{if(x==null){es.dismiss(a);return}let N={type:g,...c,...n,data:C},B=v0(x)?{render:x}:x;return a?es.update(a,{...N,...B}):es(B.render,{...N,...B}),C},d=vd(e)?e():e;return d.then(g=>s("success",i,g)).catch(g=>s("error",r,g)),d}es.promise=tj;es.success=f2("success");es.info=f2("info");es.error=f2("error");es.warning=f2("warning");es.warn=es.warning;es.dark=(e,t)=>Hv(e,A2("default",{theme:"dark",...t}));function rj(e){$U(e)}es.dismiss=rj;es.clearWaitingQueue=XU;es.isActive=Pk;es.update=(e,t={})=>{let r=WU(e,t);if(r){let{props:i,content:n}=r,a={delay:100,...i,...t,toastId:t.toastId||e,updateId:Lk()};a.toastId!==e&&(a.staleId=e);let c=a.render||n;delete a.render,Hv(c,a)}};es.done=e=>{es.update(e,{progress:1})};es.onChange=JU;es.play=e=>Rk(!0,e);es.pause=e=>Rk(!1,e);function ij(e){var t;let{subscribe:r,getSnapshot:i,setProps:n}=_e.useRef(YU(e)).current;n(e);let a=(t=_e.useSyncExternalStore(r,i,i))==null?void 0:t.slice();function c(s){if(!a)return[];let d=new Map;return e.newestOnTop&&a.reverse(),a.forEach(g=>{let{position:x}=g.props;d.has(x)||d.set(x,[]),d.get(x).push(g)}),Array.from(d,g=>s(g[0],g[1]))}return{getToastToRender:c,isToastActive:Pk,count:a?.length}}function nj(e){let[t,r]=_e.useState(!1),[i,n]=_e.useState(!1),a=_e.useRef(null),c=_e.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:s,pauseOnHover:d,closeToast:g,onClick:x,closeOnClick:C}=e;ZU({id:e.toastId,containerId:e.containerId,fn:r}),_e.useEffect(()=>{if(e.pauseOnFocusLoss)return N(),()=>{B()}},[e.pauseOnFocusLoss]);function N(){document.hasFocus()||D(),window.addEventListener("focus",R),window.addEventListener("blur",D)}function B(){window.removeEventListener("focus",R),window.removeEventListener("blur",D)}function M(ae){if(e.draggable===!0||e.draggable===ae.pointerType){V();let ce=a.current;c.canCloseOnClick=!0,c.canDrag=!0,ce.style.transition="none",e.draggableDirection==="x"?(c.start=ae.clientX,c.removalDistance=ce.offsetWidth*(e.draggablePercent/100)):(c.start=ae.clientY,c.removalDistance=ce.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function I(ae){let{top:ce,bottom:se,left:ue,right:re}=a.current.getBoundingClientRect();ae.nativeEvent.type!=="touchend"&&e.pauseOnHover&&ae.clientX>=ue&&ae.clientX<=re&&ae.clientY>=ce&&ae.clientY<=se?D():R()}function R(){r(!0)}function D(){r(!1)}function V(){c.didMove=!1,document.addEventListener("pointermove",Z),document.addEventListener("pointerup",X)}function G(){document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",X)}function Z(ae){let ce=a.current;if(c.canDrag&&ce){c.didMove=!0,t&&D(),e.draggableDirection==="x"?c.delta=ae.clientX-c.start:c.delta=ae.clientY-c.start,c.start!==ae.clientX&&(c.canCloseOnClick=!1);let se=e.draggableDirection==="x"?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;ce.style.transform=`translate3d(${se},0)`,ce.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function X(){G();let ae=a.current;if(c.canDrag&&c.didMove&&ae){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){n(!0),e.closeToast(!0),e.collapseAll();return}ae.style.transition="transform 0.2s, opacity 0.2s",ae.style.removeProperty("transform"),ae.style.removeProperty("opacity")}}let le={onPointerDown:M,onPointerUp:I};return s&&d&&(le.onMouseEnter=D,e.stacked||(le.onMouseLeave=R)),C&&(le.onClick=ae=>{x&&x(ae),c.canCloseOnClick&&g(!0)}),{playToast:R,pauseToast:D,isRunning:t,preventExitTransition:i,toastRef:a,eventHandlers:le}}var sj=typeof window<"u"?_e.useLayoutEffect:_e.useEffect,d2=({theme:e,type:t,isLoading:r,...i})=>On.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...i});function aj(e){return On.createElement(d2,{...e},On.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function oj(e){return On.createElement(d2,{...e},On.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function lj(e){return On.createElement(d2,{...e},On.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function cj(e){return On.createElement(d2,{...e},On.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function uj(){return On.createElement("div",{className:"Toastify__spinner"})}var s5={info:oj,warning:aj,success:lj,error:cj,spinner:uj},hj=e=>e in s5;function Aj({theme:e,type:t,isLoading:r,icon:i}){let n=null,a={theme:e,type:t};return i===!1||(vd(i)?n=i({...a,isLoading:r}):_e.isValidElement(i)?n=_e.cloneElement(i,a):r?n=s5.spinner():hj(t)&&(n=s5[t](a))),n}var fj=e=>{let{isRunning:t,preventExitTransition:r,toastRef:i,eventHandlers:n,playToast:a}=nj(e),{closeButton:c,children:s,autoClose:d,onClick:g,type:x,hideProgressBar:C,closeToast:N,transition:B,position:M,className:I,style:R,progressClassName:D,updateId:V,role:G,progress:Z,rtl:X,toastId:le,deleteToast:ae,isIn:ce,isLoading:se,closeOnClick:ue,theme:re,ariaLabel:W}=e,de=u0("Toastify__toast",`Toastify__toast-theme--${re}`,`Toastify__toast--${x}`,{"Toastify__toast--rtl":X},{"Toastify__toast--close-on-click":ue}),Ee=vd(I)?I({rtl:X,position:M,type:x,defaultClassName:de}):u0(de,I),Ne=Aj(e),ge=!!Z||!d,Pe={closeToast:N,type:x,theme:re},Ye=null;return c===!1||(vd(c)?Ye=c(Pe):_e.isValidElement(c)?Ye=_e.cloneElement(c,Pe):Ye=zU(Pe)),On.createElement(B,{isIn:ce,done:ae,position:M,preventExitTransition:r,nodeRef:i,playToast:a},On.createElement("div",{id:le,tabIndex:0,onClick:g,"data-in":ce,className:Ee,...n,style:R,ref:i,...ce&&{role:G,"aria-label":W}},Ne!=null&&On.createElement("div",{className:u0("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!se})},Ne),Ik(s,e,!t),Ye,!e.customProgressBar&&On.createElement(HU,{...V&&!ge?{key:`p-${V}`}:{},rtl:X,theme:re,delay:d,isRunning:t,isIn:ce,closeToast:N,hide:C,type:x,className:D,controlledProgress:ge,progress:Z||0})))},dj=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),pj=QU(dj("bounce",!0)),mj={position:"top-right",transition:pj,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function gj(e){let t={...mj,...e},r=e.stacked,[i,n]=_e.useState(!0),a=_e.useRef(null),{getToastToRender:c,isToastActive:s,count:d}=ij(t),{className:g,style:x,rtl:C,containerId:N,hotKeys:B}=t;function M(R){let D=u0("Toastify__toast-container",`Toastify__toast-container--${R}`,{"Toastify__toast-container--rtl":C});return vd(g)?g({position:R,rtl:C,defaultClassName:D}):u0(D,r5(g))}function I(){r&&(n(!0),es.play())}return sj(()=>{var R;if(r){let D=a.current.querySelectorAll('[data-in="true"]'),V=12,G=(R=t.position)==null?void 0:R.includes("top"),Z=0,X=0;Array.from(D).reverse().forEach((le,ae)=>{let ce=le;ce.classList.add("Toastify__toast--stacked"),ae>0&&(ce.dataset.collapsed=`${i}`),ce.dataset.pos||(ce.dataset.pos=G?"top":"bot");let se=Z*(i?.2:1)+(i?0:V*ae);ce.style.setProperty("--y",`${G?se:se*-1}px`),ce.style.setProperty("--g",`${V}`),ce.style.setProperty("--s",`${1-(i?X:0)}`),Z+=ce.offsetHeight,X+=.025})}},[i,d,r]),_e.useEffect(()=>{function R(D){var V;let G=a.current;B(D)&&((V=G.querySelector('[tabIndex="0"]'))==null||V.focus(),n(!1),es.pause()),D.key==="Escape"&&(document.activeElement===G||G!=null&&G.contains(document.activeElement))&&(n(!0),es.play())}return document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[B]),On.createElement("section",{ref:a,className:"Toastify",id:N,onMouseEnter:()=>{r&&(n(!1),es.pause())},onMouseLeave:I,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},c((R,D)=>{let V=D.length?{...x}:{...x,pointerEvents:"none"};return On.createElement("div",{tabIndex:-1,className:M(R),"data-stacked":r,style:V,key:`c-${R}`},D.map(({content:G,props:Z})=>On.createElement(fj,{...Z,stacked:r,collapseAll:I,isIn:s(Z.toastId,Z.containerId),key:`t-${Z.key}`},G)))}))}function vj({user:e}){return _e.useEffect(()=>{if(e?._id)return rn.emit("register",e._id),Notification.permission==="default"&&Notification.requestPermission(),rn.on("new-notification",t=>{es.info(`${t.title}: ${t.message}`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),Notification.permission==="granted"&&new Notification(t.title,{body:t.message,icon:"/skillconnect.png"})}),rn.on("appointment-notification",t=>{es.info(`${t.title}: ${new Date(t.appointment.appointmentDate).toLocaleString()}`,{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),rn.on("verification-status",t=>{es.info(`Verification status updated: ${t.status}`,{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),rn.on("request-cancelled",t=>{es.warn(t.message||"A service request was been cancelled.",{position:"top-right",autoClose:8e3,hideProgressBar:!1})}),rn.on("service-request-updated",t=>{t.action==="cancelled"&&es.info("A service request has been cancelled.",{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}),rn.on("request-accepted",t=>{es.success("A service request has been accepted.",{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}),()=>{rn.off("new-notification"),rn.off("appointment-notification"),rn.off("verification-status"),rn.off("request-cancelled"),rn.off("service-request-updated"),rn.off("request-accepted")}},[e]),null}var Uk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},BC=On.createContext&&On.createContext(Uk),xj=["attr","size","title"];function yj(e,t){if(e==null)return{};var r=_j(e,t),i,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function _j(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},y_.apply(this,arguments)}function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function __(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(i){bj(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function bj(e,t,r){return t=wj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wj(e){var t=Bj(e,"string");return typeof t=="symbol"?t:t+""}function Bj(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jk(e){return e&&e.map((t,r)=>On.createElement(t.tag,__({key:r},t.attr),jk(t.child)))}function Qi(e){return t=>On.createElement(Cj,y_({attr:__({},e.attr)},t),jk(e.child))}function Cj(e){var t=r=>{var{attr:i,size:n,title:a}=e,c=yj(e,xj),s=n||r.size||"1em",d;return r.className&&(d=r.className),e.className&&(d=(d?d+" ":"")+e.className),On.createElement("svg",y_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,c,{className:d,style:__(__({color:e.color||r.color},r.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&On.createElement("title",null,a),e.children)};return BC!==void 0?On.createElement(BC.Consumer,null,r=>t(r)):t(Uk)}function Sj(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"},child:[]}]})(e)}function Ej(e){return Qi({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(e)}function Tj(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(e)}function Fj(e){return Qi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function kj(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(e)}function Nj(e){return Qi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(e)}function Vv(e){return Qi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function SC(e){return Qi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(e)}function Ij(e){return Qi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(e)}function Lj(e){return Qi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(e)}function Ok(e){return Qi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function EC(e){return Qi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z"},child:[]}]})(e)}function Mj(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function qx(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(e)}function T1(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function Pj(e){return Qi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function TC(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(e)}function E4(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function Qk(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function Dj(e){return Qi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function tg(e){return Qi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function rg(e){return Qi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function Rj(e){return Qi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function Uj(e){return Qi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm192.81 248H304c8.84 0 16 7.16 16 16s-7.16 16-16 16h-47.19c-16.45 0-31.27-9.14-38.64-23.86-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34a15.986 15.986 0 0 1-14.31 8.84c-.38 0-.75-.02-1.14-.05-6.45-.45-12-4.75-14.03-10.89L144 354.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.77-16.19 54.05-9.7 66 14.16 2.02 4.06 5.96 6.5 10.16 6.5zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(e)}function FC(e){return Qi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(e)}function jj(e){return Qi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M434.7 64h-85.9c-8 0-15.7 3-21.6 8.4l-98.3 90c-.1.1-.2.3-.3.4-16.6 15.6-16.3 40.5-2.1 56 12.7 13.9 39.4 17.6 56.1 2.7.1-.1.3-.1.4-.2l79.9-73.2c6.5-5.9 16.7-5.5 22.6 1 6 6.5 5.5 16.6-1 22.6l-26.1 23.9L504 313.8c2.9 2.4 5.5 5 7.9 7.7V128l-54.6-54.6c-5.9-6-14.1-9.4-22.6-9.4zM544 128.2v223.9c0 17.7 14.3 32 32 32h64V128.2h-96zm48 223.9c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zM0 384h64c17.7 0 32-14.3 32-32V128.2H0V384zm48-63.9c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16c0-8.9 7.2-16 16-16zm435.9 18.6L334.6 217.5l-30 27.5c-29.7 27.1-75.2 24.5-101.7-4.4-26.9-29.4-24.8-74.9 4.4-101.7L289.1 64h-83.8c-8.5 0-16.6 3.4-22.6 9.4L128 128v223.9h18.3l90.5 81.9c27.4 22.3 67.7 18.1 90-9.3l.2-.2 17.9 15.5c15.9 13 39.4 10.5 52.3-5.4l31.4-38.6 5.4 4.4c13.7 11.1 33.9 9.1 45-4.7l9.5-11.7c11.2-13.8 9.1-33.9-4.6-45.1z"},child:[]}]})(e)}function zk(e){return Qi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function T4(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function Hk(e){return Qi({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(e)}function Oj(e){return Qi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(e)}function Qj(e){return Qi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M384 320H256c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM192 32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v128c0 17.67 14.33 32 32 32h95.72l73.16 128.04C211.98 300.98 232.4 288 256 288h.28L192 175.51V128h224V64H192V32zM608 0H480c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function zj(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(e)}function Hj(e){return Qi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function Vk(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function Vj(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"},child:[]}]})(e)}function Gj(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(e)}function Gk(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function a5(e){return Qi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function Av(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(e)}function kC(e){return Qi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"},child:[]}]})(e)}function xb(e){return Qi({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function wf(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(e)}function qj(e){return Qi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(e)}function Kj(e){return Qi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function NC(e){return Qi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function od(e){return Qi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function Wj(e){return Qi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"},child:[]}]})(e)}function $j(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M427.68 351.43C402 320 383.87 304 383.87 217.35 383.87 138 343.35 109.73 310 96c-4.43-1.82-8.6-6-9.95-10.55C294.2 65.54 277.8 48 256 48s-38.21 17.55-44 37.47c-1.35 4.6-5.52 8.71-9.95 10.53-33.39 13.75-73.87 41.92-73.87 121.35C128.13 304 110 320 84.32 351.43 73.68 364.45 83 384 101.61 384h308.88c18.51 0 27.77-19.61 17.19-32.57zM320 384v16a64 64 0 0 1-128 0v-16"},child:[]}]})(e)}function Xj(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M262.29 192.31a64 64 0 1 0 57.4 57.4 64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22 155.3 155.3 0 0 1-21.46-12.57 16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22 155.3 155.3 0 0 1 21.46 12.57 16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z"},child:[]}]})(e)}function Zj(e){return Qi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"},child:[]}]})(e)}function Yj(e){return Qi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(e)}function Jj(e){return Qi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}const eO="http://192.168.1.12:4000/api/v1",IC=e=>e.sort((t,r)=>{const i=t.lastMessage?new Date(t.lastMessage.timestamp):new Date(0);return(r.lastMessage?new Date(r.lastMessage.timestamp):new Date(0))-i}),tO=()=>{const e=Va(),{isAuthorized:t,tokenType:r,user:i,admin:n,openChatAppointmentId:a,setOpenChatAppointmentId:c}=Ma(),[s,d]=_e.useState(!1),[g,x]=_e.useState("list"),[C,N]=_e.useState([]),[B,M]=_e.useState(null),[I,R]=_e.useState([]),[D,V]=_e.useState(""),[G,Z]=_e.useState(!1),[X,le]=_e.useState(null),[ae,ce]=_e.useState(new Set),[se,ue]=_e.useState({}),[re,W]=_e.useState([]),[de,Ee]=_e.useState(""),[Ne,ge]=_e.useState(!1),[Pe,Ye]=_e.useState([]),[Me,De]=_e.useState(null),[tt,ee]=_e.useState([]),[fe,pe]=_e.useState(null),[we,Le]=_e.useState(!1),[lt,rt]=_e.useState(!1),gt=_e.useRef(null),dt=_e.useRef(null),qt=()=>{gt.current?.scrollIntoView({behavior:"smooth"})},Te=async()=>{Z(!0),le(null);try{const{data:Ce}=await Cr.get("/user/chat-list"),je=Ce.chatList||[],Ke={};je.forEach(Nt=>{const Ht=Nt.otherUser?._id?.toString();Ht&&(Ke[Ht]?(Ke[Ht].appointments.push(Nt.appointmentId),Ke[Ht].totalUnreadCount+=Nt.unreadCount||0,Nt.lastMessage&&(!Ke[Ht].lastMessage||new Date(Nt.lastMessage.timestamp)>new Date(Ke[Ht].lastMessage.timestamp))&&(Ke[Ht].lastMessage=Nt.lastMessage,Ke[Ht].serviceRequest=Nt.serviceRequest,Ke[Ht].status=Nt.status),Nt.canComplete&&(Ke[Ht].canComplete=!0)):Ke[Ht]={...Nt,appointments:[Nt.appointmentId],totalUnreadCount:Nt.unreadCount||0})});const At=Object.values(Ke),Ft=IC(At);N(Ft);const vt={};Ft.forEach(Nt=>{vt[Nt.appointments[0]]=Nt.totalUnreadCount}),ue(vt)}catch(Ce){console.error("Error fetching chat list:",Ce),le("Failed to load chats")}finally{Z(!1)}},at=async Ce=>{try{await Cr.put(`/user/chat/${Ce}/mark-seen`),ue(je=>({...je,[Ce]:0}))}catch(je){console.error("Error marking messages as seen:",je)}};_e.useEffect(()=>{if(!t||r!=="user"||!i)return;Te();const Ce=Nt=>{B&&Nt.appointment.toString()===B.appointmentId.toString()?(R(Ht=>[...Ht,Nt]),at(B.appointmentId)):(ue(Ht=>({...Ht,[Nt.appointment]:(Ht[Nt.appointment]||0)+1})),N(Ht=>{const Gt=Ht.map(Fr=>Fr.appointments.includes(Nt.appointment)?{...Fr,lastMessage:Nt,totalUnreadCount:Fr.totalUnreadCount+1}:Fr);return IC(Gt)})),qt()},je=Nt=>{R(Nt||[]),B&&at(B.appointmentId),qt()},Ke=Nt=>{i&&B&&Nt.userId!==i._id&&ce(Ht=>new Set([...Ht,Nt.userId]))},At=Nt=>{i&&Nt.userId!==i._id&&ce(Ht=>{const Gt=new Set(Ht);return Gt.delete(Nt.userId),Gt})},Ft=Nt=>{(!s||B&&B.appointmentId!==Nt.appointmentId)&&Notification.permission==="granted"&&new Notification(`New message from ${Nt.from}`,{body:Nt.message.message,icon:"/skillconnect.png"})},vt=Nt=>{console.error("Socket error:",Nt),le(Nt)};return rn.on("new-message",Ce),rn.on("chat-history",je),rn.on("user-typing",Ke),rn.on("user-stopped-typing",At),rn.on("message-notification",Ft),rn.on("error",vt),Notification.permission==="default"&&Notification.requestPermission(),()=>{rn.off("new-message",Ce),rn.off("chat-history",je),rn.off("user-typing",Ke),rn.off("user-stopped-typing",At),rn.off("message-notification",Ft),rn.off("error",vt)}},[B,i,s,t,r]),_e.useEffect(()=>{!t||r!=="user"||!i||qt()},[I,t,r,i]);const kt=()=>{Ye([{id:1,category:"Account",title:"Password Reset",description:"Forgot your password or need to change it",content:"Go to Settings > Account > Change Password. If you forgot your password, use 'Forgot Password' on the login screen."},{id:2,category:"Account",title:"Profile Updates",description:"Update your personal information and profile",content:"Navigate to Profile section to edit your name, email, phone, and profile picture."},{id:3,category:"Booking",title:"How to Book Services",description:"Learn how to find and book skilled workers",content:"Browse skilled users by service type, check their ratings and reviews, then send a service request with your requirements."},{id:4,category:"Booking",title:"Track Service Requests",description:"Monitor the status of your service requests",content:"Check your dashboard for active requests. You'll receive notifications when workers respond or accept your requests."},{id:5,category:"Payments",title:"Payment Methods",description:"Information about payments and billing",content:"Payments are processed securely through our platform. Contact support for billing questions."},{id:6,category:"Technical",title:"App Issues",description:"Report bugs or technical problems",content:"Please describe the issue you're experiencing. Include your device type and app version for faster resolution."},{id:7,category:"Technical",title:"Connection Problems",description:"Issues with internet connectivity",content:"Ensure you have a stable internet connection. Try restarting the app or checking your network settings."},{id:8,category:"General",title:"Contact Support",description:"Get in touch with our support team",content:`Email: skillconnect4b410@gmail.com
Phone: Available during business hours
We'll respond within 24 hours.`}])},ze=async Ce=>{try{return(await Cr.get(`/user/booking/${Ce}`)).data.booking}catch(je){return console.error("Error fetching booking details:",je),null}};if(_e.useEffect(()=>{if(a&&C.length>0){const Ce=C.find(je=>je.appointments.includes(a));Ce?(d(!0),Gr(Ce,a),c(null)):ze(a).then(je=>{if(je){const Ft={otherUser:i?.role==="Service Provider"?je.requester:je.provider,serviceRequest:je.serviceRequest,status:je.status,canComplete:je.provider.toString()===i._id.toString()&&je.status==="Working",appointments:[a],appointmentId:a,totalUnreadCount:0,lastMessage:null};d(!0),Gr(Ft,a)}else console.warn("Appointment not found:",a);c(null)}).catch(je=>{console.error("Error fetching booking:",je),c(null)})}},[a,C,i]),_e.useEffect(()=>{if(Pe.length>0){const Ce={};Pe.forEach(je=>{const Ke=je.category||"General";Ce[Ke]||(Ce[Ke]=[]),Ce[Ke].push(je)}),ee(Object.entries(Ce))}},[Pe]),_e.useEffect(()=>{g==="help"&&Pe.length===0&&kt()},[g]),!t||!i&&!n)return null;const Et=async Ce=>{try{const At=(await Cr.get("/user/chat-history")).data.chatHistory?.find(Ft=>Ft.appointmentId.toString()===Ce.toString())?.messages||[];R(At),At.length>0&&await Cr.put(`/user/chat/${Ce}/mark-seen`),qt(),rn.emit("join-chat",Ce)}catch(je){console.error("Error fetching chat history:",je),le("Failed to load chat history")}},Pt=async()=>{if(!D.trim()||!B)return;const Ce={id:Date.now(),message:D.trim(),sender:{_id:i._id,firstName:i.firstName,lastName:i.lastName,profilePic:i.profilePic},timestamp:new Date,status:"sent"};R(je=>[...je,Ce]);try{await Cr.post("/user/send-message",{appointmentId:B.appointmentId,message:D.trim()}),V(""),rn.emit("stop-typing",B.appointmentId),dt.current&&clearTimeout(dt.current)}catch(je){console.error("Error sending message:",je),le("Failed to send message"),R(Ke=>Ke.filter(At=>At.id!==Ce.id))}},Sr=()=>{B&&(rn.emit("typing",B.appointmentId),dt.current&&clearTimeout(dt.current),dt.current=setTimeout(()=>{rn.emit("stop-typing",B.appointmentId)},1e3))},or=Ce=>{if(!Ce)return"";const je=new Date(Ce);return isNaN(je.getTime())?"":je.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},Wr=Ce=>Ce?Ce.startsWith("http")?Ce:`${eO}${Ce}`:"/default-profile.png",Hr=Ce=>{switch(Ce){case"sent":return"";case"delivered":return"";case"seen":return"";default:return""}},ti=()=>{d(!s),s||(x("list"),M(null),R([]),le(null))},Gr=async(Ce,je=null)=>{const Ke=je||Ce.appointmentId;let At={...Ce,appointmentId:Ke};if(Ke)try{const Ft=await ze(Ke);Ft&&(At.status=Ft.status,At.serviceRequest=Ft.serviceRequest,At.canComplete=Ft.provider.toString()===i._id.toString()&&Ft.status==="Working")}catch(Ft){console.error("Error fetching booking details:",Ft)}M(At),x("chat"),le(null),Et(Ke)},wi=()=>{x("list"),M(null),R([]),ce(new Set),W([])},Bi=()=>{if(!de.trim())return;const Ce={sender:"user",message:de.trim(),timestamp:new Date};W(je=>[...je,Ce]),Ee(""),ge(!0),setTimeout(()=>{const Ke={sender:"support",message:Zr(Ce.message),timestamp:new Date};W(At=>[...At,Ke]),ge(!1)},1e3)},Zr=Ce=>{const je=Ce.toLowerCase();return je.includes("password")?"For password issues, please visit the Account Settings page or contact us at skillconnect4b410@gmail.com.":je.includes("booking")?"To book a service, navigate to the skilled users list and select a service. If you need help, check our help center.":je.includes("account")?"For account-related issues, please check your profile settings or contact us at skillconnect4b410@gmail.com.":je.includes("technical")||je.includes("bug")||je.includes("report")?"For technical issues or bugs, please provide details about what happened and your device/browser info. We'll investigate and get back to you.":je.includes("help")||je.includes("support")||je.includes("other")||je.includes("contact")?"I'm here to help! Please describe your issue in detail.":"Thank you for contacting support. Our team will respond shortly. For urgent issues, email skillconnect4b410@gmail.com."},Xr=Ce=>{const Ke={sender:"user",message:{password:"I need help with password reset",booking:"I need help with booking a service",account:"I have account issues",technical:"I have a technical issue or found a bug",other:"I have another support request"}[Ce],timestamp:new Date};W([Ke]),ge(!0),setTimeout(()=>{const At={sender:"support",message:Zr(Ke.message),timestamp:new Date};W([Ke,At]),ge(!1)},1e3)},$r=async()=>{if(!B)return;const Ce=prompt("Please provide a reason for reporting this user:");if(Ce&&Ce.trim())try{(await Cr.post("/user/report-user",{reportedUserId:B.otherUser._id,reason:Ce.trim(),appointmentId:B.appointmentId})).data.success&&alert("User reported successfully. Our team will review your report.")}catch(je){console.error("Error reporting user:",je);const Ke=je.response?.data?.message||"Failed to report user. Please try again.";alert(Ke)}},ot=async()=>{if(!B)return;if(window.confirm(`Are you sure you want to block ${B.otherUser.firstName} ${B.otherUser.lastName}? You won't be able to send or receive messages from this user.`))try{(await Cr.post("/user/block-user",{targetUserId:B.otherUser._id})).data.success&&(alert(`User ${B.otherUser.firstName} ${B.otherUser.lastName} has been blocked.`),wi())}catch(je){console.error("Error blocking user:",je);const Ke=je.response?.data?.message||"Failed to block user. Please try again.";alert(Ke)}},xe=async()=>{if(!B)return;const Ce=prompt("Rate this user (1-5 stars):","5"),je=parseInt(Ce);if(je>=1&&je<=5){const Ke=prompt("Add a comment (optional):");try{(await Cr.post("/review",{bookingId:B.appointmentId,rating:je,comments:Ke||""})).data.success&&alert(`Thank you for rating ${B.otherUser.firstName} ${B.otherUser.lastName} with ${je} stars!`)}catch(At){console.error("Error rating user:",At);const Ft=At.response?.data?.message||"Failed to submit rating. Please try again.";alert(Ft)}}else Ce!==null&&alert("Please enter a rating between 1 and 5.")},ye=Object.values(se).reduce((Ce,je)=>Ce+je,0);return p.jsxs(p.Fragment,{children:[p.jsxs("button",{className:"navbar-icon-btn",onClick:ti,children:[p.jsx(Tj,{size:24}),ye>0&&p.jsx("span",{className:"chat-badge",children:ye})]}),s&&p.jsxs("div",{className:"chat-panel",children:[p.jsx("div",{className:"chat-header",children:g==="chat"?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"back-button",onClick:wi,children:p.jsx("i",{className:"fas fa-chevron-left"})}),p.jsx("div",{className:"header-title-section",children:p.jsxs("h2",{className:"chat-header-title",children:[B?.otherUser?.firstName," ",B?.otherUser?.lastName]})}),p.jsxs("div",{className:"chat-header-actions",children:[p.jsx("button",{className:`status-badge ${B?.status?.toLowerCase()}`,onClick:()=>{B?.serviceRequest&&(B.serviceRequest.provider._id===i._id?e("/user/client-accepted",{state:{requestId:B.appointmentId}}):e("/user/waiting-for-worker"))},title:"View Request Details",children:B?.status}),p.jsx("button",{className:"user-menu-btn",onClick:()=>rt(!lt),title:"User options",children:p.jsx(Zj,{size:20})})]})]}):g==="help"?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"back-button",onClick:()=>x("list"),children:p.jsx("i",{className:"fas fa-chevron-left"})}),p.jsx("h2",{children:"Help Center"})]}):g==="help-topics"?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"back-button",onClick:()=>x("help"),children:p.jsx("i",{className:"fas fa-chevron-left"})}),p.jsx("h2",{children:"Help Topics"})]}):p.jsxs(p.Fragment,{children:[p.jsx("h2",{children:"Messages"}),p.jsxs("div",{className:"header-actions",children:[p.jsx("button",{className:"help-header-btn",onClick:()=>x("help"),title:"Help",children:"?"}),p.jsx("button",{className:"close-header-btn",onClick:ti,children:p.jsx(Jj,{size:20})})]})]})}),lt&&B&&p.jsxs("div",{className:"user-menu-dropdown",children:[p.jsx("button",{className:"user-menu-item",onClick:()=>{rt(!1),$r()},children:" Report User"}),p.jsx("button",{className:"user-menu-item",onClick:()=>{rt(!1),ot()},children:" Block User"}),i?.role!=="Service Provider"&&p.jsx("button",{className:"user-menu-item",onClick:()=>{rt(!1),xe()},children:" Rate User"})]}),p.jsx("div",{className:"messages-container",children:g==="list"?G?p.jsxs("div",{className:"loading-text",children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[p.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #c20884",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Loading conversations..."]}),p.jsx("style",{children:`
                    @keyframes spin {
                      0% { transform: rotate(0deg); }
                      100% { transform: rotate(360deg); }
                    }
                  `})]}):X?p.jsx("div",{className:"error-text",children:p.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[p.jsx("span",{style:{fontSize:"24px"},children:""}),X]})}):p.jsxs("div",{className:"chat-list",children:[p.jsxs("div",{className:"chat-item",onClick:()=>x("help"),children:[p.jsxs("div",{className:"chat-item-header",children:[p.jsx("h4",{children:"Help Center"}),p.jsx("small",{children:"Support"})]}),p.jsx("p",{className:"last-message",children:"Get help with your questions"})]}),r==="user"&&C.map(Ce=>p.jsxs("div",{className:"chat-item",onClick:()=>Gr(Ce),children:[p.jsxs("div",{className:"chat-item-header",children:[p.jsxs("h4",{children:[Ce.otherUser?.firstName," ",Ce.otherUser?.lastName]}),Ce.lastMessage&&p.jsx("small",{children:or(Ce.lastMessage.timestamp)})]}),p.jsxs("div",{className:"chat-item-content",children:[p.jsx("p",{className:"service-name",children:Ce.serviceRequest?.name}),Ce.lastMessage?p.jsxs("p",{className:"last-message",children:[p.jsxs("strong",{children:[Ce.lastMessage.sender?.firstName,":"]})," ",Ce.lastMessage.message]}):p.jsx("p",{className:"no-messages",children:"No messages yet"})]}),se[Ce.appointmentId]>0&&p.jsx("span",{className:"unread-badge",children:se[Ce.appointmentId]})]},Ce.appointmentId))]}):g==="chat"?p.jsxs("div",{className:"chat-messages",children:[X&&p.jsx("p",{className:"error",children:X}),p.jsxs("div",{className:"messages-container",children:[I.map(Ce=>p.jsxs("div",{className:`message-wrapper ${Ce.sender._id===i._id?"own":"other"}`,children:[p.jsx("div",{className:"message-timestamp",children:p.jsx("small",{children:or(Ce.timestamp)})}),p.jsxs("div",{className:`message ${Ce.sender._id===i._id?"own":"other"}`,children:[Ce.sender._id!==i._id&&p.jsx("img",{src:Wr(Ce.sender.profilePic),alt:`${Ce.sender.firstName} ${Ce.sender.lastName}`,className:"message-avatar",onError:je=>{je.target.src="/default-profile.png"}}),p.jsx("div",{className:"message-content",children:p.jsx("span",{children:Ce.message})}),Ce.sender._id===i._id&&p.jsx("span",{className:`message-status ${Ce.status}`,children:Hr(Ce.status)})]})]},Ce.id||Ce._id)),ae.size>0&&p.jsx("div",{className:"typing-indicator",children:p.jsx("span",{children:"Someone is typing..."})}),p.jsx("div",{ref:gt})]}),p.jsxs("div",{className:"message-input-section",children:[p.jsx("input",{type:"text",value:D,onChange:Ce=>{V(Ce.target.value),Sr()},onKeyPress:Ce=>Ce.key==="Enter"&&Pt(),placeholder:"Type a message...",disabled:G,className:"message-input"}),p.jsx("button",{className:"send-button",onClick:Pt,disabled:!D.trim()||G,title:"Send message",children:p.jsx("i",{className:"fas fa-paper-plane"})})]})]}):g==="help-topics"?p.jsx("div",{className:"help-topics-view",children:tt.map(([Ce,je])=>p.jsxs("div",{className:"category-section",children:[p.jsx("h4",{className:"category-title",children:Ce}),je.map(Ke=>p.jsxs("div",{className:"help-topic-item",onClick:()=>{De(Ke),x("help");const At={sender:"user",message:`I need help with: ${Ke.title}`,timestamp:new Date};W([At]),ge(!0),setTimeout(()=>{const Ft={sender:"support",message:Ke.content,timestamp:new Date};W([At,Ft]),ge(!1)},1e3)},children:[p.jsxs("div",{className:"help-topic-content",children:[p.jsx("h5",{className:"help-topic-title",children:Ke.title}),p.jsx("p",{className:"help-topic-desc",children:Ke.description})]}),p.jsx("span",{className:"help-topic-arrow",children:""})]},Ke.id))]},Ce))}):p.jsxs("div",{className:"chat-messages",children:[p.jsxs("div",{className:"messages-container",children:[re.map((Ce,je)=>p.jsx("div",{className:`message-wrapper ${Ce.sender==="user"?"own":"other"}`,children:p.jsx("div",{className:`message ${Ce.sender==="user"?"own":"other"}`,children:p.jsx("div",{className:"message-content",children:p.jsx("span",{children:Ce.message})})})},je)),Ne&&p.jsx("div",{className:"typing-indicator",children:p.jsx("span",{children:"Support is typing..."})}),re.length===0&&!Ne&&p.jsx("div",{className:"message-wrapper other",children:p.jsx("div",{className:"message other",children:p.jsxs("div",{className:"message-content",children:[p.jsx("span",{children:"Welcome to Help Center! How can we assist you today?"}),p.jsxs("div",{className:"quick-actions",children:[p.jsx("button",{className:"quick-action-button",onClick:()=>Xr("password"),children:"Password Reset"}),p.jsx("button",{className:"quick-action-button",onClick:()=>Xr("booking"),children:"Booking Help"}),p.jsx("button",{className:"quick-action-button",onClick:()=>Xr("account"),children:"Account Issues"}),p.jsx("button",{className:"quick-action-button",onClick:()=>Xr("technical"),children:"Technical Issues"}),p.jsx("button",{className:"quick-action-button",onClick:()=>Xr("other"),children:"Other"})]}),p.jsxs("div",{className:"browse-topics-button",children:[p.jsx("span",{children:""}),p.jsx("span",{className:"browse-topics-text",children:"Browse Help Topics"})]})]})})}),re.length>0&&re[re.length-1].sender==="support"&&!Ne&&p.jsx("div",{className:"message-wrapper other",children:p.jsx("div",{className:"message other",children:p.jsxs("div",{className:"message-content",children:[p.jsx("span",{children:"Is there anything else I can help you with?"}),p.jsxs("div",{className:"quick-actions",children:[p.jsx("button",{className:"quick-action-button",onClick:()=>Xr("password"),children:"Password Reset"}),p.jsx("button",{className:"quick-action-button",onClick:()=>Xr("booking"),children:"Booking Help"}),p.jsx("button",{className:"quick-action-button",onClick:()=>Xr("account"),children:"Account Issues"}),p.jsx("button",{className:"quick-action-button",onClick:()=>Xr("technical"),children:"Technical Issues"}),p.jsx("button",{className:"quick-action-button",onClick:()=>Xr("other"),children:"Other"})]})]})})}),p.jsx("div",{ref:gt})]}),p.jsxs("div",{className:"message-input",children:[p.jsx("input",{type:"text",value:de,onChange:Ce=>Ee(Ce.target.value),onKeyPress:Ce=>Ce.key==="Enter"&&Bi(),placeholder:"Type your message to support...",disabled:Ne}),p.jsx("button",{className:"send-btn",onClick:Bi,disabled:!de.trim()||Ne,children:""})]})]})})]})]})},rO=()=>{const{user:e,admin:t,isAuthorized:r,tokenType:i,logout:n}=Ma(),[a,c]=_e.useState(!1),[s,d]=_e.useState(!1),[g,x]=_e.useState(!1),[C,N]=_e.useState(!1),[B,M]=_e.useState([]),[I,R]=_e.useState(!1),[D,V]=_e.useState(0),G=Va(),Z=ge=>{ge.key==="Escape"&&(c(!1),d(!1))},X=ge=>{ge.target.closest(".dropdown")||d(!1)};_e.useEffect(()=>(a||s?(document.addEventListener("keydown",Z),document.addEventListener("click",X)):(document.removeEventListener("keydown",Z),document.removeEventListener("click",X)),()=>{document.removeEventListener("keydown",Z),document.removeEventListener("click",X)}),[a,s]),_e.useEffect(()=>{r?ce():V(0)},[r]);const le=async()=>{if(!g){x(!0);try{await n(),localStorage.removeItem("user"),localStorage.removeItem("admin"),localStorage.removeItem("isAuthorized"),localStorage.removeItem("tokenType"),localStorage.removeItem("rememberedEmail"),G(i==="admin"?"/admin/login":"/login")}catch(ge){console.error("Logout failed:",ge.message),localStorage.removeItem("user"),localStorage.removeItem("admin"),localStorage.removeItem("isAuthorized"),localStorage.removeItem("tokenType"),localStorage.removeItem("rememberedEmail"),G(i==="admin"?"/admin/login":"/user/my-service")}finally{x(!1)}}},ae=async()=>{if(!r||!localStorage.getItem("token")){M([]),R(!1);return}R(!0);try{const{data:ge}=await Cr.get("/user/notifications");M(ge.notifications||[])}catch(ge){console.error("Error fetching notifications:",ge),ge.response?.status===401&&M([])}finally{R(!1)}},ce=async()=>{if(!r||!localStorage.getItem("token")){V(0);return}try{const{data:ge}=await Cr.get("/user/notifications/unread-count");V(ge.unreadCount||0)}catch(ge){console.error("Error fetching unread count:",ge),ge.response?.status===401&&V(0)}},se=async()=>{N(!C),C||ae(),await re()},ue=async ge=>{try{await Cr.put(`/user/notifications/${ge._id}/read`),M(Ye=>Ye.map(Me=>Me._id===ge._id?{...Me,read:!0}:Me)),V(Ye=>Math.max(0,Ye-1));const{meta:Pe}=ge;Pe&&(Pe.type==="apply-provider"?G("/user/manage-profile"):(Pe.type==="service-request"||Pe.type==="service-request-posted")&&Pe.requestId?G("/user/my-service"):Pe.bookingId?G("/user/chat"):Pe.apptId?t&&G("/admin/verification"):Pe.type==="verification_appointment"&&G("/user/manage-profile")),N(!1)}catch(Pe){console.error("Error handling notification click:",Pe)}},re=async()=>{try{await Cr.put("/user/notifications/mark-all-read"),M(ge=>ge.map(Pe=>({...Pe,read:!0}))),V(0)}catch(ge){console.error("Error marking all notifications as read:",ge)}},W=ge=>{if(!ge)return"";const Pe=new Date(ge);return isNaN(Pe.getTime())?"":Pe.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};_e.useEffect(()=>{if(typeof window>"u")return;const ge=()=>{window.innerWidth>1024&&c(!1)};return window.addEventListener("resize",ge),()=>window.removeEventListener("resize",ge)},[]),_e.useEffect(()=>{if(typeof document>"u")return;const ge=document.body.style.overflow;return a?document.body.style.overflow="hidden":document.body.style.overflow=ge,()=>{document.body.style.overflow=ge}},[a]);const de=_e.useMemo(()=>e?`${e.firstName||""} ${e.lastName||""}`.trim():"",[e]),Ee=_e.useMemo(()=>e?.profilePic?e.profilePic:de?`https://ui-avatars.com/api/?background=FC60AE&color=fff&name=${encodeURIComponent(de)}`:"https://ui-avatars.com/api/?background=FC60AE&color=fff&name=User",[e?.profilePic,de]),Ne=_e.useMemo(()=>[{to:"/user/manage-profile",icon:p.jsx(NC,{}),label:"Profile",helper:"Profile, identity & verification"},{to:"/user/service-request",icon:p.jsx(EC,{}),label:"Request Service",helper:"Create or track service requests"},{to:"/user/records",icon:p.jsx(Rj,{}),label:"My Records",helper:"Invoices, receipts & history"},{to:"/user/general-settings",icon:p.jsx(Xj,{}),label:"General Settings",helper:"Preferences & notifications"}],[]);return p.jsxs("nav",{className:"navbar",role:"navigation","aria-label":"Main navigation",children:[p.jsxs("div",{className:"navbar-container",children:[p.jsxs(Na,{to:"/home",className:"navbar-logo",children:[p.jsx("img",{src:"/skillconnect.png",alt:"SkillConnect4B410 logo",className:"navbar-logo-image"}),p.jsx("span",{className:"navbar-logo-text",children:"SkillConnect4B410"})]}),a&&p.jsx("div",{className:"navbar-backdrop",onClick:()=>{c(!1)}}),p.jsxs("div",{className:`navbar-menu ${a?"mobile-menu show":""}`,id:"navigation-menu",children:[a&&p.jsxs("div",{className:"mobile-menu-header",children:[p.jsxs(Na,{to:"/home",className:"navbar-logo",onClick:()=>c(!1),children:[p.jsx("img",{src:"/skillconnect.png",alt:"SkillConnect4B410 logo",className:"navbar-logo-image"}),p.jsx("span",{className:"navbar-logo-text",children:"SkillConnect4B410"})]}),p.jsx("button",{type:"button",className:"mobile-menu-close",onClick:()=>c(!1),"aria-label":"Close menu",children:""})]}),p.jsxs("ul",{className:"navbar-menu-list",children:[!r&&p.jsxs(p.Fragment,{children:[p.jsx("li",{role:"none",children:p.jsx(Na,{to:"/home",className:"navbar-link",role:"menuitem","aria-label":"Go to home page",children:"HOME"})}),p.jsx("li",{role:"none",children:p.jsx(Na,{to:"/about",className:"navbar-link",role:"menuitem","aria-label":"About SkillConnect4B410",children:"ABOUT"})})]}),!r&&p.jsxs(p.Fragment,{children:[p.jsx("li",{role:"none",children:p.jsx(Na,{to:"/login",className:"navbar-link",role:"menuitem","aria-label":"Login to your account",children:"LOGIN"})}),p.jsx("li",{role:"none",children:p.jsx(Na,{to:"/register",className:"navbar-link",role:"menuitem","aria-label":"Create a new account",children:"REGISTER"})})]}),r&&i!=="admin"&&p.jsx("li",{role:"none",children:p.jsxs("button",{type:"button",onClick:se,className:"navbar-icon-btn","aria-label":"View notifications",children:[p.jsx($j,{size:24}),D>0&&p.jsx("span",{className:"notification-badge",children:D>99?"99+":D})]})}),r&&i!=="admin"&&p.jsx("li",{role:"none",children:p.jsx(tO,{})}),e?.role==="Service Provider"&&i!=="admin"&&p.jsx("li",{role:"none",children:p.jsx(Na,{to:"/user/my-service",className:"navbar-icon-btn","aria-label":"My Service",children:p.jsx(EC,{size:24})})}),e&&i!=="admin"&&p.jsxs("li",{role:"none",className:"dropdown",children:[p.jsx("button",{type:"button",className:"dashboard-toggle",onClick:()=>d(!s),"aria-label":"User dashboard menu","aria-expanded":s,children:p.jsx(NC,{size:24})}),s&&p.jsxs("ul",{className:"dropdown-menu",role:"menu",children:[p.jsx("li",{className:"dropdown-profile",children:p.jsxs(Na,{to:"/user/manage-profile",className:"dropdown-profile-link",children:[p.jsx("img",{src:Ee,alt:"User avatar"}),p.jsxs("div",{className:"dropdown-profile-info",children:[p.jsx("strong",{children:de||"SkillConnect User"}),p.jsx("small",{children:e?.role||"Member"})]})]})}),p.jsx("li",{className:"dropdown-grid",role:"presentation",children:Ne.map(({to:ge,icon:Pe,label:Ye,helper:Me})=>p.jsxs(Na,{to:ge,className:"dropdown-action",onClick:()=>d(!1),children:[p.jsx("span",{className:"dropdown-action-icon",children:Pe}),p.jsxs("div",{children:[p.jsx("p",{children:Ye}),p.jsx("small",{children:Me})]})]},Ye))}),p.jsx("li",{className:"logout-item",children:p.jsxs("button",{type:"button",onClick:le,children:[p.jsx(Gk,{}),"Log Out"]})})]})]})]})]}),p.jsx("button",{type:"button",className:"hamburger",onClick:()=>c(!a),"aria-label":a?"Close navigation menu":"Open navigation menu","aria-expanded":a,"aria-controls":"navigation-menu",children:p.jsx(Sj,{})})]}),C&&p.jsx("div",{className:"notification-popup-overlay",onClick:()=>N(!1),children:p.jsxs("div",{className:"notification-popup",onClick:ge=>ge.stopPropagation(),children:[p.jsxs("div",{className:"notification-popup-header",children:[p.jsx("h3",{children:"Notifications"}),p.jsx("button",{className:"notification-popup-close",onClick:()=>N(!1),children:""})]}),p.jsx("div",{className:"notification-popup-content",children:I?p.jsx("p",{children:"Loading..."}):B.length===0?p.jsx("div",{className:"notification-empty",children:p.jsx("p",{children:"No notifications yet"})}):p.jsx(p.Fragment,{children:B.map(ge=>p.jsx("div",{className:`notification-item ${ge.read?"":"notification-item-unread"}`,onClick:()=>ue(ge),children:p.jsxs("div",{className:"notification-item-content",children:[p.jsx("div",{className:"notification-item-title",children:ge.title}),p.jsx("div",{className:"notification-item-message",children:ge.message}),p.jsx("div",{className:"notification-item-time",children:W(ge.createdAt)})]})},ge._id))})})]})})]})};function iO(e){return Qi({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13.0281 2.00073C14.1535 2.00259 14.7238 2.00855 15.2166 2.02322L15.4107 2.02956C15.6349 2.03753 15.8561 2.04753 16.1228 2.06003C17.1869 2.1092 17.9128 2.27753 18.5503 2.52503C19.2094 2.7792 19.7661 3.12253 20.3219 3.67837C20.8769 4.2342 21.2203 4.79253 21.4753 5.45003C21.7219 6.0867 21.8903 6.81337 21.9403 7.87753C21.9522 8.1442 21.9618 8.3654 21.9697 8.58964L21.976 8.78373C21.9906 9.27647 21.9973 9.84686 21.9994 10.9723L22.0002 11.7179C22.0003 11.809 22.0003 11.903 22.0003 12L22.0002 12.2821L21.9996 13.0278C21.9977 14.1532 21.9918 14.7236 21.9771 15.2163L21.9707 15.4104C21.9628 15.6347 21.9528 15.8559 21.9403 16.1225C21.8911 17.1867 21.7219 17.9125 21.4753 18.55C21.2211 19.2092 20.8769 19.7659 20.3219 20.3217C19.7661 20.8767 19.2069 21.22 18.5503 21.475C17.9128 21.7217 17.1869 21.89 16.1228 21.94C15.8561 21.9519 15.6349 21.9616 15.4107 21.9694L15.2166 21.9757C14.7238 21.9904 14.1535 21.997 13.0281 21.9992L12.2824 22C12.1913 22 12.0973 22 12.0003 22L11.7182 22L10.9725 21.9993C9.8471 21.9975 9.27672 21.9915 8.78397 21.9768L8.58989 21.9705C8.36564 21.9625 8.14444 21.9525 7.87778 21.94C6.81361 21.8909 6.08861 21.7217 5.45028 21.475C4.79194 21.2209 4.23444 20.8767 3.67861 20.3217C3.12278 19.7659 2.78028 19.2067 2.52528 18.55C2.27778 17.9125 2.11028 17.1867 2.06028 16.1225C2.0484 15.8559 2.03871 15.6347 2.03086 15.4104L2.02457 15.2163C2.00994 14.7236 2.00327 14.1532 2.00111 13.0278L2.00098 10.9723C2.00284 9.84686 2.00879 9.27647 2.02346 8.78373L2.02981 8.58964C2.03778 8.3654 2.04778 8.1442 2.06028 7.87753C2.10944 6.81253 2.27778 6.08753 2.52528 5.45003C2.77944 4.7917 3.12278 4.2342 3.67861 3.67837C4.23444 3.12253 4.79278 2.78003 5.45028 2.52503C6.08778 2.27753 6.81278 2.11003 7.87778 2.06003C8.14444 2.04816 8.36564 2.03847 8.58989 2.03062L8.78397 2.02433C9.27672 2.00969 9.8471 2.00302 10.9725 2.00086L13.0281 2.00073ZM12.0003 7.00003C9.23738 7.00003 7.00028 9.23956 7.00028 12C7.00028 14.7629 9.23981 17 12.0003 17C14.7632 17 17.0003 14.7605 17.0003 12C17.0003 9.23713 14.7607 7.00003 12.0003 7.00003ZM12.0003 9.00003C13.6572 9.00003 15.0003 10.3427 15.0003 12C15.0003 13.6569 13.6576 15 12.0003 15C10.3434 15 9.00028 13.6574 9.00028 12C9.00028 10.3431 10.3429 9.00003 12.0003 9.00003ZM17.2503 5.50003C16.561 5.50003 16.0003 6.05994 16.0003 6.74918C16.0003 7.43843 16.5602 7.9992 17.2503 7.9992C17.9395 7.9992 18.5003 7.4393 18.5003 6.74918C18.5003 6.05994 17.9386 5.49917 17.2503 5.50003Z"},child:[]}]})(e)}const nO=()=>{const[e,t]=_e.useState({name:"",email:"",subject:"",message:""}),[r,i]=_e.useState(!1),n=c=>{t({...e,[c.target.name]:c.target.value})},a=async c=>{if(c.preventDefault(),!e.name||!e.email||!e.subject||!e.message){Qr.error("Please fill in all fields");return}i(!0);try{const s=await Cr.post("/contact/send",e);s.data.success&&(Qr.success(s.data.message||"Email Sent Successfully!!"),t({name:"",email:"",subject:"",message:""}))}catch(s){const d=s.response?.data?.message||"Failed to send your email!";Qr.error(d)}finally{i(!1)}};return p.jsxs("footer",{className:"footer",children:[p.jsxs("div",{className:"footer-content",children:[p.jsxs("div",{className:"footer-section",children:[p.jsx("h2",{className:"footer-brand",children:"SkillConnect4b410"}),p.jsx("p",{className:"footer-desc",children:"Building modern solutions with simplicity and elegance."})]}),p.jsxs("div",{className:"footer-section",children:[p.jsx("h3",{children:"Quick Links"}),p.jsxs("ul",{className:"footer-links",children:[p.jsx("li",{children:p.jsx(Na,{to:"/",children:"Home"})}),p.jsx("li",{children:p.jsx(Na,{to:"/about",children:"About"})}),p.jsx("li",{children:p.jsx("a",{href:"/services",children:"Services"})}),p.jsx("li",{children:p.jsx("a",{href:"/contact",children:"Contact"})})]})]}),p.jsxs("div",{className:"footer-section",children:[p.jsx("h3",{children:"Contact Us"}),p.jsxs("form",{onSubmit:a,className:"footer-contact-form",children:[p.jsx("input",{type:"text",name:"name",placeholder:"Your Name",value:e.name,onChange:n,required:!0,className:"footer-input"}),p.jsx("input",{type:"email",name:"email",placeholder:"Your Email",value:e.email,onChange:n,required:!0,className:"footer-input"}),p.jsx("input",{type:"text",name:"subject",placeholder:"Subject",value:e.subject,onChange:n,required:!0,className:"footer-input"}),p.jsx("textarea",{name:"message",placeholder:"Your Message",value:e.message,onChange:n,required:!0,className:"footer-textarea"}),p.jsx("button",{type:"submit",disabled:r,className:"footer-submit-btn",children:r?"Sending...":"Send"})]}),status&&p.jsx("p",{className:`footer-status ${status.includes("success")?"success":"error"}`,children:status})]}),p.jsxs("div",{className:"footer-section",children:[p.jsx("h3",{children:"Follow Us"}),p.jsxs("div",{className:"footer-socials",children:[p.jsx("a",{href:"#",className:"footer-social-link",children:p.jsx(Ej,{})}),p.jsx("a",{href:"#",className:"footer-social-link",children:p.jsx(iO,{})}),p.jsx("a",{href:"#",className:"footer-social-link",children:p.jsx(kj,{})}),p.jsx("a",{href:"#",className:"footer-social-link",children:p.jsx(Fj,{})}),p.jsx("a",{href:"#",className:"footer-social-link",children:p.jsx(Nj,{})})]})]})]}),p.jsxs("div",{className:"footer-bottom",children:[p.jsxs("p",{children:[" ",new Date().getFullYear()," SkillConnect4b410. All rights reserved."]}),p.jsxs("div",{className:"footer-legal",children:[p.jsx("a",{href:"/terms",children:"Terms & Conditions"}),p.jsx("span",{className:"footer-separator",children:" | "}),p.jsx("a",{href:"/privacy",children:"Privacy Policy"})]})]})]})},sO=()=>p.jsxs("div",{className:"hero",children:[p.jsxs("div",{className:"hero-background",children:[p.jsx("div",{className:"hero-pattern"}),p.jsx("div",{className:"hero-gradient"})]}),p.jsxs("div",{className:"hero-content",children:[p.jsxs("div",{className:"hero-text",children:[p.jsx("h6",{className:"hero-welcome",children:"Welcome to"}),p.jsxs("div",{className:"hero-title-container",children:[p.jsxs("h1",{className:"hero-title",children:["SkillConnect",p.jsx("span",{className:"hero-title-highlight",children:"4B410"})]}),p.jsx("div",{className:"hero-title-underline"})]}),p.jsx("div",{className:"hero-subtitle",children:p.jsx("h4",{children:"BARANGAY 410 ZONE 42"})}),p.jsx("p",{className:"hero-description",children:"Connecting skilled workers with opportunities in Barangay 410 Zone 42. Find local services, post your skills, and build a stronger community together. Join our network of local professionals and discover new possibilities."})]}),p.jsxs("div",{className:"hero-buttons",children:[p.jsxs(Na,{to:"/register",className:"cta-button primary hero-cta",children:[p.jsx(wf,{className:"btn-icon"}),"Post Service Request",p.jsx(SC,{className:"btn-arrow"})]}),p.jsxs(Na,{to:"/register",className:"cta-button secondary hero-cta",children:[p.jsx(od,{className:"btn-icon"}),"Provide a Service",p.jsx(SC,{className:"btn-arrow"})]})]}),p.jsxs("div",{className:"hero-trust",children:[p.jsxs("div",{className:"trust-item",children:[p.jsx(a5,{className:"trust-icon"}),p.jsx("span",{children:"Verified Professionals"})]}),p.jsxs("div",{className:"trust-item",children:[p.jsx(od,{className:"trust-icon"}),p.jsx("span",{children:"Local Community"})]}),p.jsxs("div",{className:"trust-item",children:[p.jsx(Vk,{className:"trust-icon"}),p.jsx("span",{children:"Easy to Find Services"})]})]})]}),p.jsxs("div",{className:"hero-floating-elements",children:[p.jsx("div",{className:"floating-element element-1",children:p.jsx(wf,{})}),p.jsx("div",{className:"floating-element element-2",children:p.jsx(od,{})}),p.jsx("div",{className:"floating-element element-3",children:p.jsx(a5,{})})]})]});function aO(e){return Qi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 448l416-192L48 64v149.333L346 256 48 298.667z"},child:[]}]})(e)}const oO=()=>p.jsx(p.Fragment,{children:p.jsx("div",{className:"howitworks",children:p.jsxs("div",{className:"container",children:[p.jsx("h3",{children:"How SkillConnect4B410 Works"}),p.jsxs("div",{className:"banner",children:[p.jsxs("div",{className:"card",children:[p.jsx(Kj,{}),p.jsx("p",{className:"card-title",children:"Create Account "}),p.jsx("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Consequuntur, culpa."})]}),p.jsxs("div",{className:"card",children:[p.jsx(Yj,{}),p.jsx("p",{className:"card-title",children:"Find a Job/Post a Job"}),p.jsx("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Consequuntur, culpa."})]}),p.jsxs("div",{className:"card",children:[p.jsx(aO,{}),p.jsx("p",{className:"card-title",children:"Apply For Job/Recruit Suitable Candidates"}),p.jsx("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Consequuntur, culpa."})]})]})]})})}),lO=()=>p.jsx("div",{children:p.jsxs("div",{className:"mcontainer",children:[p.jsxs("div",{className:"mission",children:[p.jsx("h3",{children:"MISSION"}),p.jsx("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Molestias minima, inventore, architecto voluptatum excepturi porro odit ducimus velit ipsam laudantium labore dicta, totam eveniet ad alias consequuntur voluptate voluptatem impedit!"})]}),p.jsxs("div",{className:"vision",children:[p.jsx("h3",{children:"VISION"}),p.jsx("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores at expedita aut adipisci itaque architecto modi aliquam! Ad tempora, incidunt quae a quia repellendus dolore fugiat recusandae vel quibusdam ea."})]})]})}),cO=()=>{const[e,t]=_e.useState(null),[r,i]=_e.useState(!0),[n,a]=_e.useState("");return _e.useEffect(()=>{(async()=>{try{const{data:s}=await Cr.get("/settings/jobfair");s.success&&t(s.jobfair)}catch(s){a("Error: "+(s.response?.data?.message||s.message))}finally{i(!1)}})()},[]),r?p.jsx("div",{children:"Loading..."}):n?p.jsx("div",{}):!e||new Date(e.date)<new Date?p.jsx("div",{}):p.jsx(p.Fragment,{children:p.jsxs("div",{className:"sectionann",children:[p.jsx("div",{className:"section-main-title",children:p.jsx("h1",{children:"CAREER FAIR"})}),p.jsx("div",{className:"section-title",children:p.jsxs("div",{className:"announcement-section",children:[p.jsx("div",{className:"announcement-background"}),p.jsxs("div",{className:"announcement-content",children:[p.jsxs("div",{className:"announcement-left",children:[p.jsx("div",{className:"career-fair-title",children:e.title}),e.description&&p.jsx("div",{className:"announcement-description",children:p.jsx("p",{children:e.description})}),p.jsxs("div",{className:"announcement-info",children:[p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-icon date-icon",children:p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),p.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),p.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),p.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),p.jsxs("div",{className:"info-text",children:[p.jsx("div",{className:"info-label",children:"DATE"}),p.jsx("div",{className:"info-value",children:e.date?new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Jun 24, 2025"})]})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-icon time-icon",children:p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("polyline",{points:"12,6 12,12 16,14"})]})}),p.jsxs("div",{className:"info-text",children:[p.jsx("div",{className:"info-label",children:"TIME"}),p.jsxs("div",{className:"info-value",children:[e.startTime," - ",e.endTime]})]})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-icon location-icon",children:p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),p.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}),p.jsxs("div",{className:"info-text",children:[p.jsx("div",{className:"info-label",children:"LOCATION"}),p.jsx("div",{className:"info-value",children:e.location})]})]})]})]}),p.jsxs("div",{className:"announcement-right",children:[p.jsx("div",{className:"image-container top-image",children:p.jsx("img",{src:"https://images.unsplash.com/photo-1521791136064-7986c2920216?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1469&q=80",alt:"People waiting for interviews"})}),p.jsx("div",{className:"image-container bottom-image",children:p.jsx("img",{src:"https://images.unsplash.com/photo-1556761175-b413da4baf72?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1574&q=80",alt:"People in meeting"})})]})]})]})})]})})},LC=()=>p.jsx(p.Fragment,{children:p.jsxs("section",{className:"homePage page",children:[p.jsx(sO,{}),p.jsx(cO,{}),p.jsx(lO,{}),p.jsx(oO,{})]})}),uO=()=>p.jsxs("div",{className:"aboutus-container",children:[p.jsxs("div",{className:"header-section",children:[p.jsx("div",{className:"barangay-namec",children:"Barangay 410 Zone 42"}),p.jsx("h1",{className:"page-title",children:"GALING at GANDA"}),p.jsx("div",{className:"header-image",children:p.jsx("img",{src:"https://ibb.co/84MzQQf8",alt:"Barangay Team"})})]}),p.jsxs("div",{className:"info-section",children:[p.jsx("div",{className:"description-text",children:"Barangay 410 is a community located in the district of Sampaloc, Manila. Based on the 2020 Census, it had a population of 2,444 with a coverage of 0.13% of the city's total population."}),p.jsx("div",{className:"map-container",children:p.jsx("img",{src:"https://ibb.co/MxQxQp9g",alt:"Map Location"})})]}),p.jsxs("div",{className:"mission-vision-section",children:[p.jsxs("div",{className:"card mission-card",children:[p.jsx("h3",{children:"Mission"}),p.jsx("p",{children:"To provide high-quality, ethically sourced coffees in a welcoming environment where people can connect, relax, and recharge."})]}),p.jsxs("div",{className:"card vision-card",children:[p.jsx("h3",{children:"Vision"}),p.jsx("p",{children:"To be the most loved local coffee brand known for exceptional flavor, sustainability, and community impact."})]})]}),p.jsxs("div",{className:"development-cards",children:[p.jsxs("div",{className:"dev-card",children:[p.jsx("img",{src:"https://ibb.co/jZZQYb0h",alt:"Encourage Skill Development"}),p.jsx("h4",{children:"Encourage Skill Development"}),p.jsx("p",{children:"Providing continuous training and education programs to equip individuals with necessary skills."})]}),p.jsxs("div",{className:"dev-card",children:[p.jsx("img",{src:"https://ibb.co/qT2wQyT",alt:"Expand Career Opportunities"}),p.jsx("h4",{children:"Expand Career Opportunities"}),p.jsx("p",{children:"Offering pathways for employment and advancement across various fields."})]}),p.jsxs("div",{className:"dev-card",children:[p.jsx("img",{src:"https://ibb.co/rKddwgMk",alt:"Promote Sustainable Livelihood"}),p.jsx("h4",{children:"Promote Sustainable Livelihood"}),p.jsx("p",{children:"Supporting sustainable projects that help maintain long-term economic growth for residents."})]})]}),p.jsxs("div",{className:"about-skillconnect",children:[p.jsx("h3",{children:"About SkillConnect"}),p.jsx("p",{children:"SkillConnect is a platform designed to connect skilled laborers with industries and businesses who need their services. Whether youre a professional looking for opportunities or someone seeking reliable help, SkillConnect bridges the gap."}),p.jsx("div",{className:"skillconnect-image",children:p.jsx("img",{src:"https://ibb.co/nsYsmHQ1",alt:"SkillConnect"})})]}),p.jsxs("div",{className:"contact-section",children:[p.jsxs("div",{className:"contact-form",children:[p.jsx("h3",{children:"Lets Get In Touch"}),p.jsxs("form",{children:[p.jsx("label",{htmlFor:"name",children:"Name"}),p.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Your name"}),p.jsx("label",{htmlFor:"email",children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Your email"}),p.jsx("label",{htmlFor:"message",children:"How Can We Help?"}),p.jsx("textarea",{id:"message",name:"message",rows:"4",placeholder:"Type your message here..."}),p.jsx("button",{type:"submit",className:"send-btn",children:"Send Message"})]})]}),p.jsx("div",{className:"contact-image",children:p.jsx("img",{src:"https://ibb.co/FLCfgXNr",alt:"Contact Person"})})]})]}),hO=()=>{const[e,t]=_e.useState({email:"",password:""}),[r,i]=_e.useState({}),[n,a]=_e.useState(!1),[c,s]=_e.useState(!1),[d,g]=_e.useState(!1),{setIsAuthorized:x,setUser:C,setTokenType:N,setIsUserVerified:B}=Ma(),M=Va(),I=(G,Z)=>{let X="";return G==="email"?Z?/\S+@\S+\.\S+/.test(Z)||(X="Please enter a valid email address"):X="Email is required":G==="password"&&(Z?Z.length<6&&(X="Password must be at least 6 characters"):X="Password is required"),X},R=()=>{const G={},Z=I("email",e.email);Z&&(G.email=Z);const X=I("password",e.password);return X&&(G.password=X),i(G),Object.keys(G).length===0};_e.useEffect(()=>{const G=JSON.parse(localStorage.getItem("user")||"null"),Z=localStorage.getItem("token"),X=localStorage.getItem("isAuthorized")==="true",le=localStorage.getItem("tokenType");G&&X&&Z&&le==="user"&&(C(G),x(!0),N(le),B(G.role==="Service Provider"||!1),t5(Z),G.role==="Service Provider"?(M("/user/my-service",{replace:!0}),localStorage.setItem("userLastPath","/user/my-service")):(M("/user/service-request",{replace:!0}),localStorage.setItem("userLastPath","/user/service-request")))},[M,C,x,N,B]);const D=G=>{const{name:Z,value:X}=G.target;t(ae=>({...ae,[Z]:X}));const le=I(Z,X);i(ae=>({...ae,[Z]:le}))},V=async G=>{if(G.preventDefault(),!!R()){a(!0);try{const{data:Z}=await Cr.post("/user/login",{email:e.email,password:e.password});C(Z.user),x(!0),N("user"),B(Z.user.isVerified||!1),localStorage.setItem("user",JSON.stringify(Z.user)),localStorage.setItem("token",Z.token),localStorage.setItem("isAuthorized","true"),localStorage.setItem("tokenType","user"),c&&localStorage.setItem("rememberedEmail",e.email);const X=localStorage.getItem("token");X&&t5(X),Qr.success(Z.message||"Login successful!"),t({email:"",password:""}),i({}),Z.user.role==="Service Provider"?(M("/user/my-service",{replace:!0}),localStorage.setItem("userLastPath","/user/my-service")):(M("/user/service-request",{replace:!0}),localStorage.setItem("userLastPath","/user/service-request"))}catch(Z){const X=Z.response?.data?.message||"Login failed. Please try again.";Qr.error(X),(X.toLowerCase().includes("email")||X.toLowerCase().includes("password"))&&i({general:X})}finally{a(!1)}}};return p.jsx("div",{className:"auth-container",children:p.jsxs("div",{className:"auth-card",children:[p.jsxs("div",{className:"auth-banner",children:[p.jsx("h2",{children:"Welcome Back"}),p.jsx("p",{children:"Sign in to your account"})]}),r.general&&p.jsxs("div",{className:"error-message",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),r.general]}),p.jsxs("form",{onSubmit:V,className:"auth-form",children:[p.jsxs("div",{className:"input-container",children:[p.jsx("label",{htmlFor:"email",className:"field-label",children:"Email Address"}),p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-envelope"}),p.jsx("input",{type:"email",id:"email",name:"email",placeholder:"your.email@example.com",value:e.email,onChange:D,className:`auth-input ${r.email?"error":e.email&&!r.email?"success":""}`,disabled:n,"aria-describedby":r.email?"email-error":"email-help","aria-invalid":!!r.email,autoComplete:"email",required:!0})]}),r.email&&p.jsxs("span",{id:"email-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),r.email]}),p.jsx("small",{id:"email-help",className:"form-help",children:"Enter the email address associated with your account"})]}),p.jsxs("div",{className:"input-container",children:[p.jsx("label",{htmlFor:"password",className:"field-label",children:"Password"}),p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-lock"}),p.jsx("input",{type:d?"text":"password",id:"password",name:"password",placeholder:"Enter your password",value:e.password,onChange:D,className:`auth-input ${r.password?"error":e.password&&!r.password?"success":""}`,disabled:n,"aria-describedby":r.password?"password-error":"password-help","aria-invalid":!!r.password,autoComplete:"current-password",required:!0}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>g(!d),"aria-label":d?"Hide password":"Show password",children:d?p.jsx(tg,{}):p.jsx(rg,{})})]}),r.password&&p.jsxs("span",{id:"password-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),r.password]}),p.jsx("small",{id:"password-help",className:"form-help",children:"Minimum 6 characters required"})]}),p.jsxs("div",{className:"form-options",children:[p.jsxs("label",{className:"checkbox-container",children:[p.jsx("input",{type:"checkbox",checked:c,onChange:G=>s(G.target.checked),disabled:n}),"Remember me"]}),p.jsx(Na,{to:"/forgot-password",className:"forgot-password",children:"Forgot password?"})]}),p.jsx("button",{type:"submit",className:"auth-btn",disabled:n,children:n?p.jsx(p.Fragment,{children:"Signing In..."}):"Sign In"}),p.jsxs("div",{className:"auth-links",children:[p.jsxs("p",{children:["Don't have an account?"," ",p.jsx(Na,{to:"/register",className:"auth-link-text",children:"Create one here"})]}),p.jsxs("p",{className:"admin-link",children:["Admin?"," ",p.jsx(Na,{to:"/admin/login",className:"admin-link-text",children:"Login as Administrator"})]})]})]})]})})},AO=()=>{const[e,t]=_e.useState({role:"",skills:[],profilePic:null,username:"",password:"",confirmPassword:"",firstName:"",lastName:"",email:"",phone:"",address:"",occupation:"",birthdate:"",employed:"",isApplyingProvider:!1,certificates:[],validId:null}),[r,i]=_e.useState(!1),[n,a]=_e.useState(!1),[c,s]=_e.useState(!1),[d,g]=_e.useState({}),[x,C]=_e.useState(!1),{isAuthorized:N,setIsAuthorized:B,setUser:M,setTokenType:I}=Ma(),R=Va(),D=()=>{const X={};(!e.username||e.username.length<3)&&(X.username="Username must be at least 3 characters long"),(!e.password||e.password.length<8)&&(X.password="Password must be at least 8 characters long"),e.password!==e.confirmPassword&&(X.confirmPassword="Passwords do not match");const le=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;(!e.email||!le.test(e.email))&&(X.email="Please enter a valid email address");const ae=/^(\+63|0)[0-9]{10}$/;return(!e.phone||!ae.test(e.phone))&&(X.phone="Invalid phone number format. Use +63XXXXXXXXXX or 0XXXXXXXXXX"),e.firstName.trim()||(X.firstName="First name is required"),e.lastName.trim()||(X.lastName="Last name is required"),e.address.trim()||(X.address="Address is required"),e.birthdate||(X.birthdate="Birthdate is required"),(!e.employed||!["employed","unemployed"].includes(e.employed))&&(X.employed="Employment status must be Employed or Unemployed"),(!e.role||!["Community Member","Service Provider"].includes(e.role))&&(X.role="Please select a valid role"),e.validId?e.validId.type.startsWith("image/")||(X.validId="Valid ID must be an image file (JPG, PNG, etc.)"):X.validId="Valid ID is required",e.role==="Service Provider"&&(!e.skills||e.skills.length===0?X.skills="At least one skill is required for Service Providers":e.skills.length>3&&(X.skills="You can select a maximum of 3 skills"),e.certificates.length===0&&(X.certificates="Certificates are required for Service Providers")),g(X),Object.keys(X).length===0},V=X=>{const{name:le,value:ae,type:ce,files:se}=X.target;if(ce==="file")t(le==="certificates"?{...e,certificates:Array.from(se)}:{...e,[le]:se[0]});else{const ue={...e,[le]:ae};le==="role"&&(ue.isApplyingProvider=ae==="Service Provider"),t(ue)}D()},G=async X=>{if(X.preventDefault(),!D()){Qr.error("Please fix the errors in the form before submitting");return}C(!0);try{const le=new FormData;le.append("username",e.username),le.append("password",e.password),le.append("confirmPassword",e.confirmPassword),le.append("firstName",e.firstName),le.append("lastName",e.lastName),le.append("email",e.email),le.append("phone",e.phone),le.append("address",e.address),le.append("birthdate",e.birthdate),le.append("employed",e.employed),le.append("role",e.role),e.occupation&&le.append("occupation",e.occupation),e.profilePic&&le.append("profilePic",e.profilePic),e.role==="Service Provider"&&(e.skills&&e.skills.length>0&&e.skills.forEach(ce=>le.append("skills",ce)),e.certificates&&e.certificates.length>0&&e.certificates.forEach(ce=>le.append("certificates",ce)),e.validId&&le.append("validId",e.validId));const{data:ae}=await Cr.post("/user/register",le,{headers:{"Content-Type":"multipart/form-data"}});Qr.success(ae.message),i(!0),M(ae.user),B(!0),I("user"),ae.user.role==="Service Provider"?(R("/user/my-service",{replace:!0}),localStorage.setItem("userLastPath","/user/my-service")):(R("/user/service-request",{replace:!0}),localStorage.setItem("userLastPath","/user/service-request")),localStorage.setItem("user",JSON.stringify(ae.user)),localStorage.setItem("isAuthorized","true"),localStorage.setItem("tokenType","user"),setTimeout(()=>i(!1),5e3)}catch(le){console.error("Registration error:",le);const ae=le.response?.data?.message||le.message||"Registration failed";Qr.error(ae),le.response?.data?.errors&&console.error("Validation errors:",le.response.data.errors)}finally{C(!1)}};return(X=>X.length===0?{strength:0,label:""}:X.length<8?{strength:1,label:"Weak"}:X.length<12?{strength:2,label:"Medium"}:{strength:3,label:"Strong"})(e.password),p.jsxs("div",{className:"auth-container",children:[p.jsxs("div",{className:"auth-card register-card",children:[p.jsxs("div",{className:"auth-banner",children:[p.jsx("h2",{children:"SkillConnect4B410"}),p.jsx("p",{children:"Create your account to book or offer services in the community."})]}),p.jsxs("form",{onSubmit:G,className:"auth-form register-form",noValidate:!0,children:[p.jsxs("div",{className:"form-section",children:[p.jsx("h3",{className:"section-title",children:"Account Information"}),p.jsxs("div",{className:"form-group file-upload register-file",children:[p.jsx("label",{htmlFor:"profilePic",className:"register-label",children:"Profile Picture (Optional)"}),p.jsx("input",{type:"file",id:"profilePic",name:"profilePic",accept:"image/*",onChange:V,className:`auth-input ${e.profilePic?"success":""}`,"aria-describedby":"profilePic-help"}),p.jsx("div",{className:"preview-box","aria-live":"polite",children:e.profilePic?p.jsx("img",{src:URL.createObjectURL(e.profilePic),alt:"Profile preview"}):p.jsx("span",{children:"No file selected"})}),p.jsx("small",{id:"profilePic-help",className:"form-help",children:"Upload a profile picture (JPG, PNG only, max 5MB)"})]}),p.jsxs("div",{className:"input-container",children:[p.jsx("label",{htmlFor:"username",className:"field-label",children:"Username"}),p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-user"}),p.jsx("input",{type:"text",id:"username",name:"username",placeholder:"Choose a unique username",value:e.username,onChange:V,required:!0,className:`auth-input ${d.username?"error":""}`,"aria-describedby":d.username?"username-error":"username-help","aria-invalid":!!d.username,autoComplete:"username"})]}),d.username&&p.jsxs("span",{id:"username-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),d.username]}),p.jsx("small",{id:"username-help",className:"form-help",children:"Choose a unique username (minimum 3 characters) - this will be visible to other users"})]})]}),p.jsxs("div",{className:"form-section",children:[p.jsx("h3",{className:"section-title",children:"Personal Details"}),p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-lock"}),p.jsx("input",{type:n?"text":"password",name:"password",placeholder:"Enter Password",value:e.password,onChange:V,required:!0,className:`auth-input ${d.password?"error":""}`,"aria-describedby":d.password?"password-error":"password-help","aria-invalid":!!d.password}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>a(!n),"aria-label":n?"Hide password":"Show password",children:n?p.jsx(tg,{}):p.jsx(rg,{})})]}),d.password&&p.jsxs("span",{id:"password-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),d.password]}),p.jsx("small",{id:"password-help",className:"form-help",children:"Password must be at least 8 characters long"})]}),p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-lock"}),p.jsx("input",{type:c?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",value:e.confirmPassword,onChange:V,required:!0,className:`auth-input ${d.confirmPassword?"error":""}`,"aria-describedby":d.confirmPassword?"confirmPassword-error":"confirmPassword-help","aria-invalid":!!d.confirmPassword}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>s(!c),"aria-label":c?"Hide password":"Show password",children:c?p.jsx(tg,{}):p.jsx(rg,{})})]}),d.confirmPassword&&p.jsxs("span",{id:"confirmPassword-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),d.confirmPassword]}),p.jsx("small",{id:"confirmPassword-help",className:"form-help",children:"Re-enter your password to confirm"})]}),p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-envelope"}),p.jsx("input",{type:"email",name:"email",placeholder:"Enter your email address",value:e.email,onChange:V,required:!0,className:`auth-input ${d.email?"error":""}`,"aria-describedby":d.email?"email-error":"email-help","aria-invalid":!!d.email})]}),d.email&&p.jsxs("span",{id:"email-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),d.email]}),p.jsx("small",{id:"email-help",className:"form-help",children:"We'll use this email to send you important updates about your account"})]}),p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-id-card"}),p.jsx("input",{type:"text",name:"firstName",placeholder:"First Name",value:e.firstName,onChange:V,required:!0,className:`auth-input ${d.firstName?"error":""}`,"aria-describedby":d.firstName?"firstName-error":"firstName-help","aria-invalid":!!d.firstName})]}),d.firstName&&p.jsxs("span",{id:"firstName-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),d.firstName]})]}),p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-id-card"}),p.jsx("input",{type:"text",name:"lastName",placeholder:"Last Name",value:e.lastName,onChange:V,required:!0,className:`auth-input ${d.lastName?"error":""}`,"aria-describedby":d.lastName?"lastName-error":"lastName-help","aria-invalid":!!d.lastName})]}),d.lastName&&p.jsxs("span",{id:"lastName-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),d.lastName]})]}),p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-phone"}),p.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:e.phone,onChange:V,required:!0,className:`auth-input ${d.phone?"error":""}`,"aria-describedby":d.phone?"phone-error":"phone-help","aria-invalid":!!d.phone})]}),d.phone&&p.jsxs("span",{id:"phone-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),d.phone]}),p.jsx("small",{id:"phone-help",className:"form-help",children:"Use format: +63XXXXXXXXXX or 0XXXXXXXXXX (10 digits after country code)"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Address"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-map-marker-alt","aria-hidden":"true"}),p.jsx("input",{type:"text",name:"address",placeholder:"Address",value:e.address,onChange:V,required:!0,className:`register-input ${d.address?"error":e.address?"success":""}`,"aria-describedby":d.address?"address-error":"address-help","aria-invalid":!!d.address}),e.address&&!d.address&&p.jsx(T1,{className:"validation-icon success","aria-hidden":"true"}),d.address&&p.jsx(xb,{className:"validation-icon error","aria-hidden":"true"})]})]}),d.address&&p.jsx("small",{id:"address-error",className:"field-error",role:"alert",children:d.address}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Occupation"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-briefcase","aria-hidden":"true"}),p.jsx("input",{type:"text",name:"occupation",placeholder:"Occupation",value:e.occupation,onChange:V,className:`register-input ${e.occupation?"success":""}`,"aria-describedby":"occupation-help"}),e.occupation&&p.jsx(T1,{className:"validation-icon success","aria-hidden":"true"})]})]}),p.jsx("small",{id:"occupation-help",className:"form-help",children:"Optional: Enter your current occupation or profession"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Role"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-user-tag","aria-hidden":"true"}),p.jsxs("select",{name:"role",value:e.role,onChange:V,required:!0,className:`register-input ${e.role?"success":""}`,"aria-describedby":"role-help","aria-label":"Select your role in the community",children:[p.jsx("option",{value:"Community Member",children:"Community Member"}),p.jsx("option",{value:"Service Provider",children:"Service Provider"})]})]})]}),p.jsx("small",{id:"role-help",className:"form-help",children:"Community Members can request services, Service Providers can offer services"}),e.role==="Service Provider"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"skills-selection",children:[p.jsxs("label",{className:"skills-label",children:[p.jsx("i",{className:"fas fa-tools","aria-hidden":"true"}),"Select Your Skills (Choose 1-3)"]}),p.jsx("div",{className:"skills-grid",children:["Pipe Installation","Leak Repair","Toilet Installation","Drain Cleaning","Water Heater Setup","Wiring Installation","Lighting Repair","Appliance Troubleshooting","Outlet Installation","Circuit Breaker Maintenance","General House Cleaning","Deep Cleaning","Carpet Cleaning","Sofa Shampooing","Post-Construction Cleaning","Furniture Repair","Wood Polishing","Door and Window Fixing","Custom Woodwork","Cabinet Installation","Interior Painting","Exterior Painting","Repainting","Wallpaper Installation","Color Consultation","Air Conditioner Repair","Refrigerator Repair","Washing Machine Repair","Microwave Oven Fixing","Electric Fan Maintenance","Tiling","Roofing","Masonry","Floor Installation","Room Remodeling","Termite Treatment","Cockroach Control","Rodent Control","Disinfection","Mosquito Control","Lawn Mowing","Plant Care","Landscape Design","Tree Trimming","Garden Cleanup","Aircon Installation","Aircon Cleaning","HVAC Maintenance","Filter Replacement","Ventilation Setup","Washing Clothes","Drying & Ironing","Folding & Packaging","Delicate Fabric Care","Stain Removal"].map(X=>p.jsx("div",{className:"skill-item",children:p.jsxs("label",{className:"skill-checkbox",children:[p.jsx("input",{type:"checkbox",checked:e.skills.includes(X),onChange:le=>{const ae=[...e.skills];if(le.target.checked)ae.length<3&&ae.push(X);else{const ce=ae.indexOf(X);ce>-1&&ae.splice(ce,1)}t({...e,skills:ae}),D()},disabled:!e.skills.includes(X)&&e.skills.length>=3}),p.jsx("span",{className:"checkmark"}),p.jsx("div",{className:"skill-content",children:p.jsx("div",{className:"skill-name",children:X})})]})},X))}),p.jsxs("div",{className:"skills-count",children:["Selected: ",e.skills.length,"/3 skills"]})]}),d.skills&&p.jsx("small",{id:"skills-error",className:"field-error",role:"alert",children:d.skills}),p.jsx("small",{id:"skills-help",className:"form-help",children:"Choose up to 3 skills that best match your expertise"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Birth Date"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-calendar","aria-hidden":"true"}),p.jsx("input",{type:"date",name:"birthdate",value:e.birthdate,onChange:V,required:!0,className:`register-input ${d.birthdate?"error":e.birthdate?"success":""}`,"aria-describedby":d.birthdate?"birthdate-error":"birthdate-help","aria-invalid":!!d.birthdate,max:new Date().toISOString().split("T")[0]}),e.birthdate&&!d.birthdate&&p.jsx(T1,{className:"validation-icon success","aria-hidden":"true"}),d.birthdate&&p.jsx(xb,{className:"validation-icon error","aria-hidden":"true"})]})]}),d.birthdate&&p.jsx("small",{id:"birthdate-error",className:"field-error",role:"alert",children:d.birthdate}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Employment Status"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-briefcase","aria-hidden":"true"}),p.jsxs("select",{name:"employed",value:e.employed,onChange:V,required:!0,className:`register-input ${d.employed?"error":e.employed?"success":""}`,"aria-describedby":d.employed?"employed-error":"employed-help","aria-invalid":!!d.employed,"aria-label":"Select your employment status",children:[p.jsx("option",{value:"",children:"Select Employment Status"}),p.jsx("option",{value:"employed",children:"Employed"}),p.jsx("option",{value:"unemployed",children:"Unemployed"})]}),e.employed&&!d.employed&&p.jsx(T1,{className:"validation-icon success","aria-hidden":"true"}),d.employed&&p.jsx(xb,{className:"validation-icon error","aria-hidden":"true"})]})]}),d.employed&&p.jsx("small",{id:"employed-error",className:"field-error",role:"alert",children:d.employed})]}),p.jsxs("div",{className:"form-group file-upload",children:[p.jsx("label",{htmlFor:"validId",className:"register-label",children:"Upload Valid ID *"}),p.jsx("input",{type:"file",id:"validId",name:"validId",accept:"image/*",onChange:V,className:`register-input ${d.validId?"error":e.validId?"success":""}`,"aria-describedby":d.validId?"validId-error":"validId-help","aria-invalid":!!d.validId}),p.jsx("div",{className:"file-preview","aria-live":"polite",children:e.validId?e.validId.type.startsWith("image/")?p.jsx("img",{src:URL.createObjectURL(e.validId),alt:"Valid ID preview"}):p.jsx("span",{className:"file-name",children:"Invalid file type. Please select an image."}):p.jsx("span",{className:"no-file",children:"No file selected"})}),d.validId&&p.jsx("small",{id:"validId-error",className:"field-error",role:"alert",children:d.validId}),p.jsx("small",{id:"validId-help",className:"form-help",children:"Upload a government-issued ID (images only: JPG, PNG, etc.)"})]}),e.role==="Service Provider"&&p.jsx(p.Fragment,{children:p.jsxs("div",{className:"form-group file-upload",children:[p.jsx("label",{htmlFor:"certificates",className:"register-label",children:"Upload Certificates *"}),p.jsx("input",{type:"file",id:"certificates",name:"certificates",accept:"image/*,application/pdf",multiple:!0,onChange:V,className:`register-input ${d.certificates?"error":e.certificates.length>0?"success":""}`,"aria-describedby":d.certificates?"certificates-error":"certificates-help","aria-invalid":!!d.certificates}),p.jsx("div",{className:"file-list","aria-live":"polite",children:e.certificates.length>0?e.certificates.map((X,le)=>p.jsx("div",{className:"file-item",children:X.type.startsWith("image/")?p.jsx("img",{src:URL.createObjectURL(X),alt:`Certificate ${le+1}`}):p.jsx("span",{className:"file-name",children:X.name})},le)):p.jsx("span",{className:"no-files",children:"No files selected"})}),d.certificates&&p.jsx("small",{id:"certificates-error",className:"field-error",role:"alert",children:d.certificates}),p.jsx("small",{id:"certificates-help",className:"form-help",children:"Upload certificates or licenses that prove your skills"})]})}),p.jsx("button",{type:"submit",className:"auth-btn register-btn",disabled:x||Object.keys(d).length>0,"aria-describedby":"submit-help",children:x?p.jsx(p.Fragment,{children:"Creating Account..."}):"Create Account"}),p.jsx("small",{id:"submit-help",className:"form-help",children:"By creating an account, you agree to our terms of service"}),p.jsx("div",{className:"auth-links",children:p.jsxs("p",{children:["Already have an account? ",p.jsx(Na,{to:"/login",children:"Login"})," |"," ",p.jsx(Na,{to:"/admin/login",children:"Admin Login"})]})})]})]}),r&&p.jsx("div",{className:"popup-overlay",children:p.jsx("div",{className:"popup-box",children:p.jsx("h3",{children:"Registration successful! Welcome to SkillConnect."})})})]})},fO=()=>{const e=Va(),[t,r]=_e.useState(""),[i,n]=_e.useState(!1),[a,c]=_e.useState({}),s=x=>{const C=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return x?C.test(x)?"":"Please enter a valid email address":"Email address is required"},d=x=>{const C=x.target.value;r(C),c({...a,email:s(C)})},g=async x=>{x.preventDefault();const C=s(t);if(C){c({email:C}),Qr.error("Please enter a valid email address");return}n(!0);try{const{data:N}=await Cr.post("/user/send-verification-otp",{email:t,purpose:"password_reset"});N.success?(localStorage.setItem("resetEmail",t),Qr.success("Verification code sent to your email!"),e("/verify-email")):Qr.error(N.message||"Failed to send verification code")}catch(N){Qr.error(N.response?.data?.message||"Failed to send verification code. Please try again.")}finally{n(!1)}};return p.jsx("div",{className:"forgot-password-container",children:p.jsxs("div",{className:"forgot-password-card",children:[p.jsxs("div",{className:"forgot-password-header",children:[p.jsx("h2",{children:"Forgot Password?"}),p.jsx("p",{children:"Enter your email address and we'll send you a link to reset your password."})]}),p.jsxs("form",{onSubmit:g,className:"forgot-password-form",noValidate:!0,children:[p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-envelope"}),p.jsx("input",{type:"email",name:"email",placeholder:"your.email@example.com",value:t,onChange:d,className:`auth-input ${a.email?"error":t&&!a.email?"success":""}`,"aria-describedby":a.email?"email-error":"email-help","aria-invalid":!!a.email,autoComplete:"email",required:!0})]}),a.email&&p.jsxs("span",{id:"email-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),a.email]}),p.jsx("small",{id:"email-help",className:"form-help",children:"Enter the email address associated with your account - we'll send you a password reset link"})]}),p.jsx("button",{type:"submit",className:"submit-button",disabled:i||!!a.email,"aria-describedby":"submit-help",children:i?p.jsx(p.Fragment,{children:"Sending Reset Email..."}):p.jsxs(p.Fragment,{children:[p.jsx(Qk,{className:"button-icon"}),"Send Reset Email"]})}),p.jsx("small",{id:"submit-help",className:"help-text",children:"We'll send you an email with instructions to reset your password"}),p.jsx("div",{className:"back-to-login-section",children:p.jsxs(Na,{to:"/login",className:"back-link",children:[p.jsx(Vv,{className:"link-icon"}),"Back to Login"]})})]})]})})},dO=()=>{const e=Va(),[t,r]=_e.useState(""),[i,n]=_e.useState(["","","","","",""]),[a,c]=_e.useState(!1),[s,d]=_e.useState(!1),[g,x]=_e.useState(60),[C,N]=_e.useState({});_e.useEffect(()=>{const D=localStorage.getItem("resetEmail");D?r(D):(Qr.error("No email found. Please try again."),e("/forgot-password"))},[e]),_e.useEffect(()=>{let D;return g>0&&(D=setTimeout(()=>x(g-1),1e3)),()=>clearTimeout(D)},[g]);const B=(D,V)=>{if(D.length>1)return;const G=[...i];if(G[V]=D,n(G),D&&V<i.length-1){const Z=document.getElementById(`otp-${V+1}`);Z&&Z.focus()}},M=(D,V)=>{if(D.key==="Backspace"&&!i[V]&&V>0){const G=document.getElementById(`otp-${V-1}`);G&&G.focus()}},I=async D=>{D.preventDefault();const V=i.join("");if(V.length!==6){N({otp:"Please enter the complete 6-digit code"});return}c(!0);try{const{data:G}=await Cr.post("/user/verify-otp",{email:t,otp:V,purpose:"password_reset"});G.success?(localStorage.setItem("resetToken",G.token),Qr.success("Email verified successfully!"),e(`/reset-password?email=${encodeURIComponent(t)}&token=${encodeURIComponent(G.token)}`)):N({otp:G.message||"Invalid verification code"})}catch(G){N({otp:G.response?.data?.message||"Failed to verify code. Please try again."})}finally{c(!1)}},R=async()=>{if(!(g>0)){d(!0);try{const{data:D}=await Cr.post("/user/send-verification-otp",{email:t,purpose:"password_reset"});D.success?(x(60),Qr.success("Verification code sent again!")):Qr.error(D.message||"Failed to resend code")}catch(D){Qr.error(D.response?.data?.message||"Failed to resend verification code. Please try again.")}finally{d(!1)}}};return p.jsx("div",{className:"auth-container",children:p.jsxs("div",{className:"auth-card verify-email-card",children:[p.jsxs("div",{className:"auth-banner",children:[p.jsx("h2",{children:"Verify Your Email"}),p.jsx("p",{children:"Enter the 6-digit code sent to your email"})]}),p.jsxs("form",{onSubmit:I,className:"auth-form",noValidate:!0,children:[p.jsxs("div",{className:"email-display",children:[p.jsx(Qk,{className:"email-icon"}),p.jsx("span",{children:t})]}),p.jsx("div",{className:"otp-container",children:i.map((D,V)=>p.jsx("input",{id:`otp-${V}`,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"1",value:D,onChange:G=>B(G.target.value,V),onKeyDown:G=>M(G,V),className:`otp-input ${C.otp?"error":D?"filled":""}`,"aria-describedby":C.otp?"otp-error":"otp-help","aria-invalid":!!C.otp,autoComplete:"one-time-code",required:!0},V))}),C.otp&&p.jsx("small",{id:"otp-error",className:"field-error",role:"alert",children:C.otp}),p.jsx("small",{id:"otp-help",className:"form-help",children:"Enter the 6-digit verification code sent to your email address"}),p.jsx("div",{className:"resend-container",children:p.jsx("button",{type:"button",className:"resend-btn",onClick:R,disabled:g>0||s,children:s?"Sending...":g>0?`Resend code in ${g}s`:"Resend verification code"})}),p.jsx("button",{type:"submit",className:"auth-btn primary",disabled:a||i.join("").length!==6,"aria-describedby":"submit-help",children:a?p.jsx(p.Fragment,{children:"Verifying..."}):p.jsxs(p.Fragment,{children:[p.jsx(T1,{className:"btn-icon"}),"Verify Email"]})}),p.jsx("small",{id:"submit-help",className:"form-help",children:"Verify your email to proceed with password reset"}),p.jsx("div",{className:"verify-email-footer",children:p.jsxs("button",{type:"button",className:"back-to-forgot",onClick:()=>e("/forgot-password"),children:[p.jsx(Vv,{className:"btn-icon"}),"Back to Forgot Password"]})})]})]})})},pO=()=>{const[e]=yP(),t=Va(),[r,i]=_e.useState({email:"",token:"",newPassword:"",confirmPassword:""}),[n,a]=_e.useState(!1),[c,s]=_e.useState({}),[d,g]=_e.useState(!1),[x,C]=_e.useState(!1);_e.useEffect(()=>{const R=e.get("email"),D=e.get("token");R&&D?i(V=>({...V,email:R,token:D})):(Qr.error("Invalid reset link. Please request a new password reset."),t("/forgot-password"))},[e,t]);const N=R=>R?R.length<8?"Password must be at least 8 characters long":"":"Password is required",B=(R,D)=>R?R!==D?"Passwords do not match":"":"Please confirm your password",M=(R,D)=>{i(V=>({...V,[R]:D})),R==="newPassword"?s(V=>({...V,newPassword:N(D),confirmPassword:r.confirmPassword?B(r.confirmPassword,D):V.confirmPassword})):R==="confirmPassword"&&s(V=>({...V,confirmPassword:B(D,r.newPassword)}))},I=async R=>{R.preventDefault();const D=N(r.newPassword),V=B(r.confirmPassword,r.newPassword);if(D||V){s({newPassword:D,confirmPassword:V});return}a(!0);try{const{data:G}=await Cr.post("/user/reset-password",{email:r.email,token:r.token,newPassword:r.newPassword});G.success?(Qr.success("Password reset successfully! You can now log in with your new password."),t("/login")):Qr.error(G.message||"Failed to reset password")}catch(G){Qr.error(G.response?.data?.message||"Failed to reset password. Please try again.")}finally{a(!1)}};return p.jsx("div",{className:"auth-container",children:p.jsxs("div",{className:"auth-card reset-password-card",children:[p.jsxs("div",{className:"auth-banner",children:[p.jsx("h2",{children:"Reset Your Password"}),p.jsx("p",{children:"Enter your new password below"})]}),p.jsxs("form",{onSubmit:I,className:"auth-form",noValidate:!0,children:[p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-lock"}),p.jsx("input",{type:d?"text":"password",name:"newPassword",placeholder:"New Password",value:r.newPassword,onChange:R=>M("newPassword",R.target.value),className:`auth-input ${c.newPassword?"error":r.newPassword&&!c.newPassword?"success":""}`,"aria-describedby":c.newPassword?"password-error":"password-help","aria-invalid":!!c.newPassword,autoComplete:"new-password",required:!0}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>g(!d),"aria-label":d?"Hide password":"Show password",children:d?p.jsx(tg,{}):p.jsx(rg,{})})]}),c.newPassword&&p.jsxs("span",{id:"password-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),c.newPassword]})]}),p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-lock"}),p.jsx("input",{type:x?"text":"password",name:"confirmPassword",placeholder:"Confirm New Password",value:r.confirmPassword,onChange:R=>M("confirmPassword",R.target.value),className:`auth-input ${c.confirmPassword?"error":r.confirmPassword&&!c.confirmPassword?"success":""}`,"aria-describedby":c.confirmPassword?"confirm-error":"confirm-help","aria-invalid":!!c.confirmPassword,autoComplete:"new-password",required:!0}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>C(!x),"aria-label":x?"Hide password":"Show password",children:x?p.jsx(tg,{}):p.jsx(rg,{})})]}),c.confirmPassword&&p.jsxs("span",{id:"confirm-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),c.confirmPassword]})]}),p.jsx("small",{id:"password-help",className:"form-help",children:"Password must be at least 8 characters long and contain a mix of letters, numbers, and symbols"}),p.jsx("button",{type:"submit",className:"auth-btn primary",disabled:n||!!c.newPassword||!!c.confirmPassword,"aria-describedby":"submit-help",children:n?p.jsx(p.Fragment,{children:"Resetting Password..."}):p.jsxs(p.Fragment,{children:[p.jsx(Oj,{className:"btn-icon"}),"Reset Password"]})}),p.jsx("small",{id:"submit-help",className:"form-help",children:"Your new password will be saved and you can use it to log in immediately"}),p.jsx("div",{className:"reset-password-footer",children:p.jsxs("button",{type:"button",className:"back-to-login",onClick:()=>t("/login"),children:[p.jsx(Vv,{className:"btn-icon"}),"Back to Login"]})})]})]})})},mO=()=>{const[e,t]=_e.useState({email:"",password:""}),[r,i]=_e.useState({}),[n,a]=_e.useState(!1),[c,s]=_e.useState(!1),{setIsAuthorized:d,setAdmin:g,setTokenType:x}=Ma(),C=Va(),N=(R,D)=>{let V="";return R==="email"?D.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D.trim())||(V="Please enter a valid email address"):V="Email address is required":R==="password"&&(D.trim()?D.trim().length<6&&(V="Password must be at least 6 characters long"):V="Password is required"),V},B=R=>{const{name:D,value:V}=R.target;t(Z=>({...Z,[D]:V}));const G=N(D,V);i(Z=>({...Z,[D]:G}))},M=()=>{const R={};return e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email.trim())||(R.email="Please enter a valid email address"):R.email="Email address is required",e.password.trim()?e.password.trim().length<6&&(R.password="Password must be at least 6 characters long"):R.password="Password is required",i(R),Object.keys(R).length===0},I=async R=>{if(R.preventDefault(),!M()){Qr.error("Please check the form and fix any errors");return}a(!0);try{const{data:D}=await Cr.post("/admin/auth/login",{email:e.email.trim(),password:e.password.trim()});g(D.user),d(!0),x("admin"),localStorage.setItem("admin",JSON.stringify(D.user)),localStorage.setItem("isAuthorized","true"),localStorage.setItem("tokenType","admin"),localStorage.setItem("token",D.token),Qr.success(`Welcome back, ${D.user.name||"Admin"}!`),t({email:"",password:""}),i({}),C("/admin/analytics")}catch(D){const V=D.response?.data?.message||"Login failed. Please check your credentials.";V.toLowerCase().includes("not found")||V.toLowerCase().includes("invalid")?i({general:"Invalid email or password. Please check your credentials and try again."}):V.toLowerCase().includes("admin")?i({general:"This account doesn't have administrator privileges. Please contact support if you need admin access."}):i({general:V}),Qr.error("Login failed. Please check your information and try again.")}finally{a(!1)}};return p.jsx("div",{className:"auth-container",children:p.jsxs("div",{className:"auth-card admin-card",children:[p.jsxs("div",{className:"auth-banner admin-banner",children:[p.jsx("h2",{children:"Administrator Portal"}),p.jsx("p",{className:"admin-subtitle",children:"Secure access for authorized administrators"})]}),r.general&&p.jsxs("div",{className:"error-message admin-error",children:[p.jsx(T4,{className:"message-icon"}),r.general]}),p.jsxs("form",{onSubmit:I,className:"auth-form admin-form",noValidate:!0,children:[p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-envelope"}),p.jsx("input",{id:"admin-email",type:"email",name:"email",placeholder:"admin@skillconnect.com",value:e.email,onChange:B,className:`auth-input ${r.email?"error":e.email&&!r.email?"success":""}`,disabled:n,"aria-describedby":r.email?"email-error":"email-help","aria-invalid":!!r.email,autoComplete:"email",required:!0})]}),r.email&&p.jsxs("span",{id:"email-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),r.email]}),p.jsx("small",{id:"email-help",className:"form-help",children:"Use the email address registered with your administrator account"})]}),p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-lock"}),p.jsx("input",{id:"admin-password",type:c?"text":"password",name:"password",placeholder:"Enter your administrator password",value:e.password,onChange:B,className:`auth-input ${r.password?"error":e.password&&!r.password?"success":""}`,disabled:n,"aria-describedby":r.password?"password-error":"password-help","aria-invalid":!!r.password,autoComplete:"current-password",required:!0}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>s(!c),"aria-label":c?"Hide password":"Show password",disabled:n,children:c?p.jsx(tg,{}):p.jsx(rg,{})})]}),r.password&&p.jsxs("span",{id:"password-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),r.password]}),p.jsx("small",{id:"password-help",className:"form-help",children:"Enter the password for your administrator account (minimum 6 characters)"})]}),p.jsx("button",{type:"submit",className:"auth-btn admin-btn",disabled:n,"aria-describedby":"submit-help",children:n?p.jsx(p.Fragment,{children:"Authenticating..."}):p.jsxs(p.Fragment,{children:[p.jsx(Gj,{className:"btn-icon"}),"Access Admin Dashboard"]})}),p.jsx("small",{id:"submit-help",className:"form-help submit-help",children:"This will log you into the administrator control panel"}),p.jsxs("div",{className:"admin-navigation",children:[p.jsx("div",{className:"nav-item",children:p.jsxs(Na,{to:"/login",className:"nav-link",children:[p.jsx(Vv,{className:"nav-icon"}),"Back to User Login"]})}),p.jsx("div",{className:"nav-item",children:p.jsx(Na,{to:"/forgot-password",className:"nav-link secondary",children:"Forgot your password?"})})]}),p.jsx("div",{className:"admin-help",children:p.jsxs("div",{className:"help-section",children:[p.jsx("h4",{children:"Need Help?"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Make sure you're using the correct administrator email"}),p.jsx("li",{children:"Check that your account has administrator privileges"}),p.jsx("li",{children:"Contact your system administrator if you need access"})]})]})})]})]})})},gO=()=>{const e=Va(),t=sh(),r=t.pathname==="/admin/analytics",i=t.pathname==="/admin/recommendations",n=t.pathname==="/admin/jobfairs",a=t.pathname==="/admin/service-requests",c=t.pathname==="/admin/users",s=t.pathname==="/admin/residents",d=t.pathname==="/admin/admin-settings",g=t.pathname==="/admin/admin-register",{setAdmin:x,setIsAuthorized:C,setTokenType:N,logout:B,admin:M}=Ma();_e.useEffect(()=>{t.pathname.startsWith("/admin/")&&localStorage.setItem("adminLastPath",t.pathname)},[t.pathname]);const I=async()=>{try{await B(),e("/admin/login")}catch(G){console.error("Logout failed:",G),e("/admin/analytics")}},R=M?.name||"Admin",D=M?.profilePic&&M.profilePic.startsWith("http")?M.profilePic:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",V=[{to:"/admin/analytics",label:"Dashboard",icon:zk,active:r},{to:"/admin/recommendations",label:"Recommendations",icon:Hk,active:i},{to:"/admin/jobfairs",label:"Job Fairs",icon:Ok,active:n},{to:"/admin/service-requests",label:"Requests",icon:Pj,active:a},{to:"/admin/users",label:"Users",icon:od,active:c},{to:"/admin/residents",label:"Barangay Residents List",icon:qj,active:s},{to:"/admin/admin-settings",label:"Settings",icon:wf,active:d},{to:"/admin/admin-register",label:"Admin Register",icon:wf,active:g}];return p.jsxs("div",{className:`admin-shell ${d?"admin-shell--no-sidebar":""}`,children:[!d&&p.jsxs("aside",{className:"admin-shell__sidebar",children:[p.jsxs("div",{className:"admin-shell__sidebar-brand",children:[p.jsx("img",{src:D,alt:"Admin avatar",className:"admin-shell__avatar"}),p.jsx("h2",{className:"admin-shell__name",children:R}),p.jsx("p",{className:"admin-shell__role",children:"System Administrator"})]}),p.jsx("nav",{className:"admin-shell__nav","aria-label":"Admin navigation",children:p.jsx("ul",{children:V.map(({to:G,label:Z,icon:X,active:le})=>p.jsx("li",{children:p.jsxs(Na,{to:G,className:`admin-link ${le?"active":""}`,children:[p.jsx(X,{}),Z]})},G))})}),p.jsx("div",{className:"admin-shell__footer",children:p.jsxs("button",{className:"admin-shell__logout",onClick:I,children:[p.jsx(Gk,{})," Logout"]})})]}),p.jsx("main",{className:`admin-shell__content ${d?"admin-shell__content--full-width":""}`,children:p.jsx(PF,{})})]})},vO=()=>{const[e,t]=_e.useState([]),[r,i]=_e.useState(!0),[n,a]=_e.useState("");return _e.useEffect(()=>{(async()=>{try{const s=await Cr.get("/admin/service-providers");t(s.data.workers||s.data||[])}catch{a("Failed to fetch service providers")}finally{i(!1)}})()},[]),r?p.jsx("div",{className:"loading-skeleton"}):n?p.jsxs("div",{className:"analytics-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsx("h1",{children:"Error"})}),p.jsx("div",{className:"analytics-card",children:p.jsx("p",{className:"metric-change negative",children:n})})]}):e.length===0?p.jsxs("div",{className:"analytics-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsx("h1",{children:"No Service Providers"})}),p.jsx("div",{className:"analytics-card",children:p.jsx("p",{children:"No service providers found."})})]}):p.jsxs("div",{className:"analytics-container",children:[p.jsxs("div",{className:"analytics-header",children:[p.jsx("h1",{children:"Service Providers"}),p.jsx("p",{children:"List of all service providers"})]}),p.jsx("div",{className:"analytics-card",children:e.map(c=>p.jsxs("div",{className:"analytics-card",children:[p.jsx("img",{src:c.profilePic||"/default-avatar.png",alt:`${c.firstName} ${c.lastName}`,className:"profile-pic"}),p.jsxs("h2",{children:[c.firstName," ",c.lastName]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Skills:"})," ",Array.isArray(c.skills)&&c.skills.length>0?c.skills.join(", "):"N/A"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Availability:"})," ",c.availability||"Not set"]})]},c._id))})]})},xO=()=>{const[e,t]=_e.useState({title:"",description:"",date:"",startTime:"",endTime:"",location:""}),[r,i]=_e.useState(!1),n=c=>{t({...e,[c.target.name]:c.target.value})},a=async c=>{c.preventDefault(),i(!0);try{const s=new FormData;s.append("title",e.title),s.append("description",e.description),s.append("date",e.date),s.append("startTime",e.startTime),s.append("endTime",e.endTime),s.append("location",e.location);const d=await Cr.post("/admin/jobfairs",s);d.data.success?(Qr.success("Job fair created successfully!"),t({title:"",description:"",date:"",startTime:"",endTime:"",location:""})):Qr.error(d.data.message||"Failed to create job fair")}catch(s){Qr.error("Error: "+s.message)}finally{i(!1)}};return p.jsxs("div",{className:"container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"Create Job Fair"}),p.jsx("p",{className:"header-description",children:"Set up a new job fair event"})]})}),p.jsx("div",{className:"form-container",children:p.jsxs("form",{onSubmit:a,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Title"}),p.jsx("input",{type:"text",name:"title",value:e.title,onChange:n,autoComplete:"off",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Description"}),p.jsx("textarea",{name:"description",value:e.description,onChange:n,rows:"3",autoComplete:"off",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Date"}),p.jsx("input",{type:"date",name:"date",value:e.date,onChange:n,autoComplete:"off",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Start Time"}),p.jsx("input",{type:"time",name:"startTime",value:e.startTime,onChange:n,autoComplete:"off",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"End Time"}),p.jsx("input",{type:"time",name:"endTime",value:e.endTime,onChange:n,autoComplete:"off",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Location"}),p.jsx("input",{type:"text",name:"location",value:e.location,onChange:n,autoComplete:"address-level2",required:!0})]}),p.jsx("div",{className:"actions-section",children:p.jsx("button",{type:"submit",disabled:r,className:"export-btn",children:r?"Creating...":"Create Job Fair"})})]})})]})},yO=()=>{const[e,t]=_e.useState([]),[r,i]=_e.useState(1),[n,a]=_e.useState(10),[c,s]=_e.useState(1),[d,g]=_e.useState(0),[x,C]=_e.useState(!1),[N,B]=_e.useState(""),[M,I]=_e.useState(""),[R,D]=_e.useState(""),[V]=_e.useState("createdAt"),[G]=_e.useState("desc"),Z=async(X=1,le=n)=>{C(!0),B("");try{const ae=new URLSearchParams;ae.set("page",X),ae.set("limit",le),M&&ae.set("skill",M),R&&ae.set("status",R),ae.set("sort",`${V}:${G}`);const ce=await Cr.get(`/admin/service-requests?${ae.toString()}`);if(!ce.data)throw new Error("Invalid response format");const se=ce.data;t(Array.isArray(se.requests)?se.requests:[]),i(X),s(se.totalPages||1),g(se.count||0)}catch(ae){console.error("Failed to fetch requests",ae),B(ae.response?.data?.message||ae.message||"Failed to fetch service requests"),t([]),g(0),s(1)}finally{C(!1)}};return _e.useEffect(()=>{Z(1)},[]),p.jsxs("div",{className:"user-management-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"Service Requests Review"}),p.jsx("p",{className:"header-description",children:"Review and manage all service requests from the platform"})]})}),p.jsx("div",{className:"filters-section",children:p.jsxs("div",{className:"filters-grid",children:[p.jsxs("div",{className:"filter-group",children:[p.jsxs("label",{className:"filter-label",children:[p.jsx("i",{className:"fas fa-tools"}),"Filter by Skill"]}),p.jsx("input",{type:"text",placeholder:"Enter skill name...",value:M,onChange:X=>I(X.target.value),className:"filter-input"})]}),p.jsxs("div",{className:"filter-group",children:[p.jsxs("label",{className:"filter-label",children:[p.jsx("i",{className:"fas fa-filter"}),"Status Filter"]}),p.jsxs("select",{value:R,onChange:X=>D(X.target.value),className:"filter-select",children:[p.jsx("option",{value:"",children:"All Status"}),p.jsx("option",{value:"pending",children:"Pending"}),p.jsx("option",{value:"accepted",children:"Accepted"}),p.jsx("option",{value:"complete",children:"Complete"}),p.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsxs("label",{className:"filter-label",children:[p.jsx("i",{className:"fas fa-list"}),"Items per Page"]}),p.jsxs("select",{value:n,onChange:X=>{a(parseInt(X.target.value)),Z(1,parseInt(X.target.value))},className:"filter-select",children:[p.jsx("option",{value:5,children:"5 per page"}),p.jsx("option",{value:10,children:"10 per page"}),p.jsx("option",{value:25,children:"25 per page"}),p.jsx("option",{value:50,children:"50 per page"})]})]}),p.jsx("div",{className:"filter-actions",children:p.jsxs("button",{onClick:()=>Z(1),className:"apply-filters-btn",disabled:x,children:[p.jsx("i",{className:"fas fa-search"}),"Apply Filters"]})})]})}),N?p.jsx("div",{className:"error-container",children:p.jsxs("div",{className:"error-content",children:[p.jsx("i",{className:"fas fa-exclamation-triangle error-icon"}),p.jsx("h3",{children:"Failed to Load Service Requests"}),p.jsx("p",{children:N}),p.jsxs("button",{onClick:()=>Z(1),className:"retry-btn",disabled:x,children:[p.jsx("i",{className:"fas fa-redo"}),"Try Again"]})]})}):x?p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Loading service requests..."})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"content-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-clipboard-list"}),"Service Requests (",d,")"]}),p.jsxs("div",{className:"card-stats",children:[p.jsxs("span",{className:"stat-item",children:[p.jsx("i",{className:"fas fa-clock"}),e.filter(X=>X.status?.toLowerCase()==="pending"||X.status?.toLowerCase()==="available").length," Pending"]}),p.jsxs("span",{className:"stat-item",children:[p.jsx("i",{className:"fas fa-check-circle"}),e.filter(X=>X.status?.toLowerCase()==="accepted"||X.status?.toLowerCase()==="working").length," Accepted"]}),p.jsxs("span",{className:"stat-item",children:[p.jsx("i",{className:"fas fa-check-double"}),e.filter(X=>X.status?.toLowerCase()==="complete").length," Complete"]})]})]}),p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"data-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{children:[p.jsx("i",{className:"fas fa-user"}),"Customer"]}),p.jsxs("th",{children:[p.jsx("i",{className:"fas fa-wrench"}),"Service Type"]}),p.jsxs("th",{children:[p.jsx("i",{className:"fas fa-file-alt"}),"Description"]}),p.jsxs("th",{children:[p.jsx("i",{className:"fas fa-info-circle"}),"Status"]}),p.jsxs("th",{children:[p.jsx("i",{className:"fas fa-calendar"}),"Created"]})]})}),p.jsx("tbody",{children:e.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:"5",className:"no-data",children:p.jsxs("div",{className:"empty-state",children:[p.jsx("i",{className:"fas fa-inbox"}),p.jsx("h3",{children:"No service requests found"}),p.jsx("p",{children:"Try adjusting your filters or check back later for new requests."})]})})}):e.map(X=>p.jsxs("tr",{className:"request-row",children:[p.jsx("td",{children:p.jsxs("div",{className:"user-info",children:[p.jsx("div",{className:"user-name",children:X.requester?.firstName&&X.requester?.lastName?`${X.requester.firstName} ${X.requester.lastName}`:X.requester?.username||X.requester?.email||"Anonymous User"}),p.jsxs("div",{className:"user-id",children:["ID: ",X._id.slice(-6)]})]})}),p.jsx("td",{children:p.jsx("div",{className:"service-type",children:p.jsx("span",{className:"service-badge",children:X.typeOfWork||X.name||"Service"})})}),p.jsx("td",{children:p.jsxs("div",{className:"description-cell",children:[p.jsx("p",{className:"description-text",children:X.notes&&X.notes.length>100?`${X.notes.substring(0,100)}...`:X.notes||"No description provided"}),X.status?.toLowerCase()==="cancelled"&&X.cancellationReason&&p.jsxs("p",{className:"cancellation-reason",children:[p.jsx("strong",{children:"Cancellation Reason:"})," ",X.cancellationReason]})]})}),p.jsx("td",{children:p.jsxs("span",{className:`status-badge ${(X.status||"").toLowerCase()}`,children:[p.jsx("i",{className:`fas ${X.status?.toLowerCase()==="available"||X.status?.toLowerCase()==="pending"?"fa-clock":X.status?.toLowerCase()==="working"||X.status?.toLowerCase()==="accepted"?"fa-play-circle":X.status?.toLowerCase()==="complete"?"fa-check-double":X.status?.toLowerCase()==="cancelled"?"fa-times-circle":"fa-question-circle"}`}),X.status||"Unknown"]})}),p.jsx("td",{children:p.jsxs("div",{className:"date-info",children:[p.jsx("div",{className:"date-main",children:new Date(X.createdAt).toLocaleDateString()}),p.jsx("div",{className:"date-time",children:new Date(X.createdAt).toLocaleTimeString()})]})})]},X._id))})]})})]}),p.jsxs("div",{className:"pagination-section",children:[p.jsxs("div",{className:"pagination-info",children:[p.jsxs("div",{className:"total-info",children:[p.jsx("i",{className:"fas fa-database"}),p.jsxs("span",{children:["Showing ",e.length," of ",d," service requests"]})]}),p.jsx("div",{className:"page-info",children:p.jsxs("span",{children:["Page ",r," of ",c]})})]}),p.jsxs("div",{className:"pagination-controls",children:[p.jsxs("button",{className:"pagination-btn prev-btn",disabled:r<=1||x,onClick:()=>Z(r-1),children:[p.jsx("i",{className:"fas fa-chevron-left"}),"Previous"]}),p.jsxs("div",{className:"page-jumper",children:[p.jsx("label",{className:"jump-label",children:"Go to page:"}),p.jsx("input",{type:"number",min:1,max:c,placeholder:r,onKeyDown:X=>{if(X.key==="Enter"){const le=parseInt(X.target.value);le>=1&&le<=c&&Z(le),X.target.value=""}},className:"page-input",disabled:x}),p.jsxs("span",{className:"page-total",children:["of ",c]})]}),p.jsxs("button",{className:"pagination-btn next-btn",disabled:r>=c||x,onClick:()=>Z(r+1),children:["Next",p.jsx("i",{className:"fas fa-chevron-right"})]})]})]})]})]})},_O=[{name:"Plumbing",description:"Pipe installation, leak repair, and bathroom plumbing maintenance.",icon:"water-outline"},{name:"Electrical",description:"Wiring, lighting, and electrical appliance repair.",icon:"flash-outline"},{name:"Cleaning",description:"House cleaning, deep cleaning, and carpet or sofa cleaning.",icon:"broom-outline"},{name:"Carpentry",description:"Furniture repair, assembly, and custom woodwork.",icon:"construct-outline"},{name:"Painting",description:"Interior and exterior wall painting, color consultation.",icon:"color-palette-outline"},{name:"Appliance Repair",description:"Aircon, refrigerator, and washing machine maintenance.",icon:"build-outline"},{name:"Home Renovation",description:"Tile, flooring, roofing, and home improvement.",icon:"hammer-outline"},{name:"Pest Control",description:"Termite, rodent, and insect control for safer homes.",icon:"bug-outline"},{name:"Gardening & Landscaping",description:"Lawn care, plant maintenance, and landscape design.",icon:"leaf-outline"},{name:"Air Conditioning & Ventilation",description:"Aircon installation, cleaning, and HVAC servicing.",icon:"snow-outline"}],bO=()=>{const{admin:e,isAuthorized:t,tokenType:r}=Ma(),[i,n]=_e.useState([]),[a,c]=_e.useState(!0),[s,d]=_e.useState(""),[g,x]=_e.useState("users"),[C,N]=_e.useState(null),[B,M]=_e.useState(!1),[I,R]=_e.useState(null),[D,V]=_e.useState([]),[G,Z]=_e.useState(!1),[X,le]=_e.useState(""),[ae,ce]=_e.useState([]),[se,ue]=_e.useState(!1),[re,W]=_e.useState(null),[de,Ee]=_e.useState(""),[Ne,ge]=_e.useState(1),[Pe,Ye]=_e.useState({x:0,y:0}),[Me,De]=_e.useState(!1),[tt,ee]=_e.useState({x:0,y:0}),[fe,pe]=_e.useState("all"),we=()=>{ge(Et=>Math.min(Et+.25,3))},Le=()=>{ge(Et=>Math.max(Et-.25,.5))},lt=()=>{ge(1),Ye({x:0,y:0})},rt=Et=>{Et.preventDefault();const Pt=Et.deltaY>0?-.1:.1;ge(Sr=>Math.max(.5,Math.min(3,Sr+Pt)))},gt=Et=>{Ne>1&&(De(!0),ee({x:Et.clientX-Pe.x,y:Et.clientY-Pe.y}))},dt=Et=>{Me&&Ne>1&&Ye({x:Et.clientX-tt.x,y:Et.clientY-tt.y})},qt=()=>{De(!1)};_e.useEffect(()=>{t!=null&&(t===!1?(c(!1),d("Please login to access this page.")):t&&r==="admin"&&e?Te():t&&r!=="admin"?(c(!1),d("Access denied. Admin authentication required.")):(c(!1),d("Loading admin data...")))},[t,r,e]);const Te=async()=>{try{c(!0),d("");const Et=await Cr.get("/admin/users");console.log("Users response:",Et.data);const Pt=Array.isArray(Et.data.users)?Et.data.users:[],Sr=new Date;Sr.setDate(Sr.getDate()-30);const or=Pt.filter(Wr=>new Date(Wr.createdAt)>=Sr);n(Pt),ce(or)}catch(Et){console.error("Failed to fetch data:",Et),d(`Failed to fetch data: ${Et.response?.data?.message||Et.message}`)}finally{c(!1)}},at=async Et=>{try{(await Cr.put(`/admin/user/verify/${Et}`)).data.success?(Qr.success("User verified successfully"),Te()):Qr.error("Failed to verify user")}catch(Pt){console.error("Error verifying user:",Pt),Qr.error("Error verifying user")}},kt=async Et=>{if(window.confirm("Are you sure you want to ban this user?"))try{(await Cr.delete(`/admin/user/${Et}`)).data.success?(Qr.success("User banned successfully"),Te()):Qr.error("Failed to ban user")}catch(Pt){console.error("Error banning user:",Pt),Qr.error("Error banning user")}},ze=async()=>{if(!I)return;const Et=D.filter(Pt=>Pt.name&&Pt.name.trim()!=="").map(Pt=>({name:Pt.name.trim(),rate:typeof Pt.rate=="number"?Pt.rate:parseFloat(Pt.rate)||0,description:Pt.description?Pt.description.trim():""}));if(Et.length===0){Qr.error("At least one service with a valid name is required");return}N("save-service");try{(await Cr.put(`/admin/user/service-profile/${I._id}`,{services:Et})).data.success?(Qr.success("User service profile updated successfully"),M(!1),Te()):Qr.error("Failed to update service profile")}catch(Pt){console.error("Error updating service profile:",Pt);const Sr=Pt.response?.data?.message||"Error updating service profile";Qr.error(Sr)}finally{N(null)}};return a?p.jsx("div",{className:"user-management-container",children:p.jsx("div",{className:"loading-spinner"})}):s?p.jsxs("div",{className:"user-management-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsx("div",{children:p.jsx("h1",{children:"Error"})})}),p.jsx("div",{className:"content-card",children:p.jsx("p",{className:"empty-state",children:s})})]}):p.jsxs("div",{className:"user-management-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"User Management"}),p.jsx("p",{className:"header-description",children:"Manage All Users"})]})}),p.jsxs("div",{className:"tab-navigation",children:[p.jsxs("button",{onClick:()=>x("users"),className:`tab-btn ${g==="users"?"active":""}`,children:[p.jsx("i",{className:"fas fa-users"}),p.jsx("span",{className:"tab-text",children:"Verified Users"}),p.jsx("span",{className:"tab-count",children:i.filter(Et=>Et.verified).length})]}),p.jsxs("button",{onClick:()=>x("new-users"),className:`tab-btn ${g==="new-users"?"active":""}`,children:[p.jsx("i",{className:"fas fa-user-clock"}),p.jsx("span",{className:"tab-text",children:"New Registered Users"}),p.jsx("span",{className:"tab-count",children:ae.length})]})]}),g==="users"&&(()=>{const Et=i.filter(Pt=>Pt.verified&&(fe==="all"||Pt.role===fe));return p.jsxs("div",{className:"content-card",children:[p.jsx("div",{className:"card-header",children:p.jsxs("div",{className:"header-content",children:[p.jsxs("div",{className:"header-title",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-users"})," All Verified Users"]}),p.jsx("span",{className:"count",children:Et.length})]}),p.jsxs("div",{className:"filter-section",children:[p.jsx("label",{className:"filter-label",children:"Filter by Role:"}),p.jsxs("select",{value:fe,onChange:Pt=>pe(Pt.target.value),className:"role-filter-select",children:[p.jsx("option",{value:"all",children:"All Roles"}),p.jsx("option",{value:"Service Provider",children:"Service Provider"}),p.jsx("option",{value:"Community Member",children:"Community Member"})]})]})]})}),p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"data-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Profile"}),p.jsx("th",{children:"Name"}),p.jsx("th",{children:"Email"}),p.jsx("th",{children:"Role"}),p.jsx("th",{children:"Status"}),p.jsx("th",{children:"Joined"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:Et.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:"7",className:"no-data",children:fe==="all"?"No verified users found":`No verified ${fe==="Service Provider"?"service providers":"community members"} found`})}):Et.map(Pt=>p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("img",{src:Pt.profilePic||"/default-avatar.png",alt:`${Pt.firstName} ${Pt.lastName}`,className:"admin-avatar"})}),p.jsx("td",{children:p.jsxs("div",{className:"status-container",children:[p.jsxs("div",{className:"name",children:[Pt.firstName," ",Pt.lastName]}),p.jsxs("div",{className:"user-id",children:["ID: ",Pt._id.slice(-6)]})]})}),p.jsx("td",{children:p.jsx("div",{className:"contact-info",children:p.jsx("div",{className:"email",children:Pt.email})})}),p.jsx("td",{children:Pt.role==="Community Member"?"Resident":Pt.role}),p.jsx("td",{children:p.jsx("span",{className:`status-badge ${Pt.banned?"banned":Pt.suspended?"suspended":Pt.verified?"approved":"pending"}`,children:Pt.banned?"Banned":Pt.suspended?"Suspended":Pt.verified?"Verified":"Unverified"})}),p.jsx("td",{children:new Date(Pt.createdAt).toLocaleDateString()}),p.jsx("td",{children:p.jsx("div",{className:"action-buttons",children:p.jsxs("button",{onClick:()=>{R(Pt),le("users"),Z(!0)},className:"action-btn view-btn",title:"View user details and manage account",children:[p.jsx("i",{className:"fas fa-eye"}),p.jsx("span",{children:"View"})]})})})]},Pt._id))})]})})]})})(),g==="new-users"&&p.jsxs("div",{className:"content-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-user-clock"})," New Registered Users"]}),p.jsx("span",{className:"count",children:ae.length})]}),p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"data-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Profile"}),p.jsx("th",{children:"Name"}),p.jsx("th",{children:"Email"}),p.jsx("th",{children:"Role"}),p.jsx("th",{children:"Status"}),p.jsx("th",{children:"Registered"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:ae.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:"7",className:"no-data",children:"No new registered users in the last 30 days"})}):ae.map(Et=>p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("img",{src:Et.profilePic||"/default-avatar.png",alt:`${Et.firstName} ${Et.lastName}`,className:"admin-avatar"})}),p.jsx("td",{children:p.jsxs("div",{className:"status-container",children:[p.jsxs("div",{className:"name",children:[Et.firstName," ",Et.lastName]}),p.jsxs("div",{className:"user-id",children:["ID: ",Et._id.slice(-6)]})]})}),p.jsx("td",{children:p.jsx("div",{className:"contact-info",children:p.jsx("div",{className:"email",children:Et.email})})}),p.jsx("td",{children:Et.role==="Community Member"?"Resident":Et.role}),p.jsx("td",{children:p.jsx("span",{className:`status-badge ${Et.banned?"banned":Et.suspended?"suspended":Et.verified?"approved":"pending"}`,children:Et.banned?"Banned":Et.suspended?"Suspended":Et.verified?"Verified":"Unverified"})}),p.jsx("td",{children:p.jsxs("div",{className:"registration-info",children:[p.jsx("div",{className:"registration-date",children:new Date(Et.createdAt).toLocaleDateString()}),p.jsxs("div",{className:"days-ago",children:[Math.floor((new Date-new Date(Et.createdAt))/(1e3*60*60*24))," days ago"]})]})}),p.jsx("td",{children:p.jsx("div",{className:"action-buttons",children:p.jsxs("button",{onClick:()=>{R(Et),le("new-users"),Z(!0)},className:"action-btn view-btn",title:"View user details and manage account",children:[p.jsx("i",{className:"fas fa-eye"}),p.jsx("span",{children:"View"})]})})})]},Et._id))})]})})]}),B&&I&&p.jsx("div",{className:"modal-overlay",onClick:()=>M(!1),children:p.jsxs("div",{className:"modal-content service-modal",onClick:Et=>Et.stopPropagation(),children:[p.jsxs("div",{className:"modal-header service-modal-header",children:[p.jsxs("div",{className:"modal-title-section",children:[p.jsx("i",{className:"fas fa-edit modal-icon"}),p.jsxs("div",{className:"modal-title-content",children:[p.jsx("h2",{children:"Edit Service Profile"}),p.jsxs("p",{className:"modal-subtitle",children:[I.firstName," ",I.lastName]})]})]}),p.jsx("button",{className:"close-modal",onClick:()=>M(!1),children:""})]}),p.jsxs("div",{className:"modal-body service-modal-body",children:[p.jsxs("div",{className:"service-instructions",children:[p.jsx("i",{className:"fas fa-info-circle instruction-icon"}),p.jsxs("div",{className:"instruction-content",children:[p.jsx("h4",{children:"Service Management"}),p.jsx("p",{children:"Configure the services this provider offers. Each service includes a name, rate, and detailed description."})]})]}),p.jsx("div",{className:"services-container",children:D.map((Et,Pt)=>p.jsxs("div",{className:"service-card",children:[p.jsxs("div",{className:"service-card-header",children:[p.jsx("span",{className:"service-badge",children:Pt+1}),p.jsx("h4",{children:"Service Configuration"}),D.length>1&&p.jsx("button",{type:"button",className:"remove-service-btn",onClick:()=>{const Sr=D.filter((or,Wr)=>Wr!==Pt);V(Sr)},title:"Remove this service",children:p.jsx("i",{className:"fas fa-trash-alt"})})]}),p.jsxs("div",{className:"service-form-grid",children:[p.jsxs("div",{className:"form-group service-name-group",children:[p.jsxs("label",{className:"form-label",children:[p.jsx("i",{className:"fas fa-tools"}),"Service Category"]}),p.jsxs("div",{className:"select-wrapper",children:[p.jsxs("select",{value:Et.name,onChange:Sr=>{const or=[...D];or[Pt].name=Sr.target.value,V(or)},className:"form-input service-select",required:!0,children:[p.jsx("option",{value:"",children:"Choose a service category"}),_O.map(Sr=>p.jsx("option",{value:Sr.name,children:Sr.name},Sr.name))]}),p.jsx("i",{className:"fas fa-chevron-down select-arrow"})]})]}),p.jsxs("div",{className:"form-group service-rate-group",children:[p.jsxs("label",{className:"form-label",children:[p.jsx("i",{className:"fas fa-peso-sign"}),"Service Rate "]}),p.jsx("div",{className:"input-wrapper",children:p.jsx("input",{type:"number",value:Et.rate,onChange:Sr=>{const or=[...D];or[Pt].rate=parseFloat(Sr.target.value)||0,V(or)},className:"form-input rate-input",placeholder:"0.00",min:"0",step:"50"})})]})]}),p.jsxs("div",{className:"form-group service-description-group",children:[p.jsxs("label",{className:"form-label",children:[p.jsx("i",{className:"fas fa-file-alt"}),"Service Description"]}),p.jsxs("div",{className:"textarea-wrapper",children:[p.jsx("textarea",{value:Et.description,onChange:Sr=>{const or=[...D];or[Pt].description=Sr.target.value,V(or)},className:"form-input description-textarea",rows:"4",placeholder:"Provide a detailed description of the service offered, including what it includes and any special considerations..."}),p.jsx("div",{className:"textarea-footer",children:p.jsxs("span",{className:"char-count",children:[Et.description.length,"/500"]})})]})]})]},Pt))}),p.jsx("div",{className:"add-service-section",children:p.jsx("button",{type:"button",className:"add-service-btn",onClick:()=>{V([...D,{name:"",rate:0,description:""}])},children:p.jsxs("div",{className:"add-service-content",children:[p.jsx("i",{className:"fas fa-plus-circle"}),p.jsx("span",{children:"Add New Service"})]})})})]}),p.jsxs("div",{className:"modal-actions service-modal-actions",children:[p.jsxs("div",{className:"action-summary",children:[p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Total Services:"}),p.jsx("span",{className:"summary-value",children:D.length})]}),p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Configured:"}),p.jsx("span",{className:"summary-value",children:D.filter(Et=>Et.name&&Et.name.trim()!=="").length})]})]}),p.jsxs("div",{className:"action-buttons",children:[p.jsxs("button",{className:"btn-secondary cancel-btn",onClick:()=>M(!1),disabled:C==="save-service",children:[p.jsx("i",{className:"fas fa-times"}),"Cancel"]}),p.jsx("button",{className:"btn-primary save-btn",onClick:ze,disabled:C==="save-service",children:C==="save-service"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"Saving Changes..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-save"}),p.jsx("span",{children:"Save Service Profile"})]})})]})]})]})}),G&&I&&p.jsx("div",{className:"modal-overlay",onClick:()=>Z(!1),children:p.jsxs("div",{className:"modal-content user-details-modal",onClick:Et=>Et.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-user-circle"})," ",X==="new-users"?"New User Profile Details":"User Profile Details"]}),p.jsx("button",{className:"close-modal",onClick:()=>Z(!1),children:""})]}),p.jsx("div",{className:"modal-body",children:p.jsxs("div",{className:"user-profile",children:[p.jsxs("div",{className:"profile-header",children:[p.jsx("img",{src:I.profilePic||"/default-avatar.png",alt:`${I.firstName} ${I.lastName}`,className:"applicant-avatar"}),p.jsxs("div",{className:"profile-info",children:[p.jsxs("h3",{children:[I.firstName," ",I.lastName]}),p.jsx("p",{className:"user-email",children:I.email}),p.jsxs("p",{className:"user-id",children:["ID: ",I._id.slice(-6)]}),p.jsxs("div",{className:"user-status-badges",children:[p.jsx("span",{className:`status-badge ${I.banned?"banned":I.suspended?"suspended":I.verified?"approved":"pending"}`,children:I.banned?"Banned":I.suspended?"Suspended":I.verified?"Verified":"Unverified"}),p.jsx("span",{className:`status-badge ${I.isOnline?"approved":"pending"}`,children:I.isOnline?"Online":"Offline"})]})]})]}),p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-id-card"})," Account Information"]}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Username"}),p.jsx("p",{children:I.username})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Full Name"}),p.jsxs("p",{children:[I.firstName," ",I.lastName]})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Email"}),p.jsx("p",{children:I.email})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Phone"}),p.jsx("p",{children:I.phone||"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Other Contact"}),p.jsx("p",{children:I.otherContact||"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Role"}),p.jsx("p",{children:I.role==="Community Member"?"Community Resident":I.role})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Member Since"}),p.jsx("p",{children:new Date(I.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-user"})," Personal Information"]}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Birthdate"}),p.jsx("p",{children:I.birthdate?new Date(I.birthdate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Occupation"}),p.jsx("p",{children:I.occupation||"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Employment Status"}),p.jsx("p",{children:I.employed||"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Availability"}),p.jsx("p",{children:I.availability||"Not Available"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Accepted Work"}),p.jsx("p",{children:I.acceptedWork?"Yes":"No"})]}),p.jsxs("div",{className:"detail-item full-width",children:[p.jsx("label",{children:"Address"}),p.jsx("p",{children:I.address||"No address information provided"})]})]})]}),I.skills&&I.skills.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-tools"})," Skills & Expertise (",I.skills.length,")"]}),p.jsx("div",{className:"skills-grid",children:I.skills.map((Et,Pt)=>p.jsx("span",{className:"skill-tag",children:Et},Pt))})]}),I.certificates&&I.certificates.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-certificate"})," Certificates (",I.certificates.length,")"]}),p.jsx("div",{className:"documents-preview",children:I.certificates.map((Et,Pt)=>p.jsxs("div",{className:"document-item",children:[p.jsxs("div",{className:"document-info",children:[p.jsx("i",{className:"fas fa-file-alt"}),p.jsxs("span",{children:["Certificate ",Pt+1]})]}),p.jsx("div",{className:"document-preview",children:Et.match(/\.(jpg|jpeg|png|gif)$/i)?p.jsx("img",{src:Et,alt:`Certificate ${Pt+1}`,className:"document-image",onClick:()=>{W(Et),Ee("certificate"),lt(),ue(!0)},style:{cursor:"pointer"}}):p.jsxs("div",{className:"document-placeholder",children:[p.jsx("i",{className:"fas fa-file-pdf"}),p.jsx("span",{children:"PDF Document"}),p.jsxs("button",{className:"preview-btn",onClick:()=>{W(Et),Ee("certificate"),ue(!0)},children:[p.jsx("i",{className:"fas fa-external-link-alt"})," View"]})]})})]},Pt))})]}),I.validId&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-id-badge"})," Government ID"]}),p.jsx("div",{className:"document-preview",children:p.jsxs("div",{className:"document-item",children:[p.jsxs("div",{className:"document-info",children:[p.jsx("i",{className:"fas fa-id-card"}),p.jsx("span",{children:"Valid ID Document"})]}),p.jsx("div",{className:"document-preview",children:I.validId.match(/\.(jpg|jpeg|png|gif)$/i)?p.jsx("img",{src:I.validId,alt:"Valid ID",className:"document-image",onClick:()=>{W(I.validId),Ee("validId"),lt(),ue(!0)},style:{cursor:"pointer"}}):p.jsxs("div",{className:"document-placeholder",children:[p.jsx("i",{className:"fas fa-file-pdf"}),p.jsx("span",{children:"ID Document"}),p.jsxs("button",{className:"preview-btn",onClick:()=>{W(I.validId),Ee("validId"),ue(!0)},children:[p.jsx("i",{className:"fas fa-external-link-alt"})," View"]})]})})]})})]}),I.notificationPreferences&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-bell"})," Notification Preferences"]}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"E-Receipts"}),p.jsx("p",{children:I.notificationPreferences.eReceipts?"Enabled":"Disabled"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Proof of Delivery"}),p.jsx("p",{children:I.notificationPreferences.proofOfDelivery?"Enabled":"Disabled"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Email Notifications"}),p.jsx("p",{children:I.notificationPreferences.emailNotifications?"Enabled":"Disabled"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Push Notifications"}),p.jsx("p",{children:I.notificationPreferences.pushNotifications?"Enabled":"Disabled"})]})]})]}),I.blockedUsers&&I.blockedUsers.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-user-slash"})," Blocked Users"]}),p.jsx("div",{className:"detail-grid",children:p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Total Blocked"}),p.jsxs("p",{children:[I.blockedUsers.length," user",I.blockedUsers.length!==1?"s":""]})]})})]}),I.role==="Service Provider"&&I.services&&I.services.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-concierge-bell"})," Services Offered (",I.services.length,")"]}),p.jsx("div",{className:"services-grid",children:I.services.map((Et,Pt)=>p.jsxs("div",{className:"service-card-item",children:[p.jsx("h4",{children:Et.name}),p.jsxs("div",{className:"service-rate",children:["",Et.rate.toLocaleString()]}),p.jsx("p",{className:"service-description",children:Et.description||"No description available"})]},Pt))})]}),I.bookings&&I.bookings.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-calendar-check"})," Booking History"]}),p.jsx("div",{className:"detail-grid",children:p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Total Bookings"}),p.jsx("p",{children:I.bookings.length})]})})]}),I.notifications&&I.notifications.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-bell"})," Notifications"]}),p.jsx("div",{className:"detail-grid",children:p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Total Notifications"}),p.jsx("p",{children:I.notifications.length})]})})]})]})}),p.jsxs("div",{className:"modal-actions user-modal-actions",children:[X==="new-users"&&!I.verified&&p.jsxs("div",{className:"verification-section",children:[p.jsxs("div",{className:"decision-header",children:[p.jsxs("h4",{children:[p.jsx("i",{className:"fas fa-check-circle"})," User Verification"]}),p.jsx("p",{className:"decision-subtitle",children:"Verify this new user's account to grant full access"})]}),p.jsx("div",{className:"action-buttons-grid",children:p.jsx("button",{className:"action-btn verify-user-btn",onClick:async()=>{N("verify"),await at(I._id),N(null),Z(!1)},disabled:C==="verify",title:"Verify this user's account",children:C==="verify"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"Verifying..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-check"}),p.jsx("span",{children:"Verify User"})]})})})]}),p.jsxs("div",{className:"decision-section",children:[p.jsxs("div",{className:"decision-header",children:[p.jsxs("h4",{children:[p.jsx("i",{className:"fas fa-cogs"})," Account Management"]}),p.jsx("p",{className:"decision-subtitle",children:"Manage this user's account status and permissions"})]}),p.jsxs("div",{className:"action-buttons-grid",children:[I.role==="Service Provider"&&p.jsxs("button",{className:"action-btn edit-services-btn",onClick:()=>{V(I.services&&I.services.length>0?I.services:[{name:"",rate:0,description:""}]),M(!0),Z(!1)},title:"Edit this service provider's services",children:[p.jsx("i",{className:"fas fa-edit"}),p.jsx("span",{children:"Edit Services"})]}),!I.banned&&p.jsx("button",{className:"action-btn ban-user-btn",onClick:()=>{kt(I._id),Z(!1)},disabled:C==="ban",title:"Permanently ban this user from the platform",children:C==="ban"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"Banning..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-user-slash"}),p.jsx("span",{children:"Ban Account"})]})}),p.jsxs("button",{className:"action-btn close-modal-btn",onClick:()=>Z(!1),disabled:C!==null,title:"Close this modal",children:[p.jsx("i",{className:"fas fa-times"}),p.jsx("span",{children:"Close"})]})]})]})]})]})}),se&&re&&p.jsx("div",{className:"modal-overlay",onClick:()=>ue(!1),children:p.jsxs("div",{className:"modal-content document-preview-modal",onClick:Et=>Et.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:`fas ${de==="validId"?"fa-id-badge":"fa-certificate"}`}),de==="validId"?"Valid ID Preview":"Certificate Preview"]}),p.jsx("button",{className:"close-modal",onClick:()=>ue(!1),children:""})]}),p.jsxs("div",{className:"modal-body document-modal-body",children:[re.match(/\.(jpg|jpeg|png|gif)$/i)&&p.jsxs("div",{className:"zoom-controls",children:[p.jsx("button",{className:"zoom-btn zoom-out-btn",onClick:Le,disabled:Ne<=.5,title:"Zoom Out",children:p.jsx("i",{className:"fas fa-search-minus"})}),p.jsxs("span",{className:"zoom-level",children:[Math.round(Ne*100),"%"]}),p.jsx("button",{className:"zoom-btn zoom-in-btn",onClick:we,disabled:Ne>=3,title:"Zoom In",children:p.jsx("i",{className:"fas fa-search-plus"})}),p.jsx("button",{className:"zoom-btn zoom-reset-btn",onClick:lt,title:"Reset Zoom",children:p.jsx("i",{className:"fas fa-expand"})})]}),p.jsx("div",{className:"document-full-preview",children:re.match(/\.(jpg|jpeg|png|gif)$/i)?p.jsx("div",{className:"image-container",onWheel:rt,onMouseDown:gt,onMouseMove:dt,onMouseUp:qt,onMouseLeave:qt,style:{cursor:Ne>1?Me?"grabbing":"grab":"default",overflow:"hidden"},children:p.jsx("img",{src:re,alt:de==="validId"?"Valid ID Document":"Certificate Document",className:"document-full-image",style:{transform:`scale(${Ne}) translate(${Pe.x/Ne}px, ${Pe.y/Ne}px)`,transformOrigin:"center center",transition:Me?"none":"transform 0.1s ease-out"},draggable:!1})}):p.jsxs("div",{className:"document-full-placeholder",children:[p.jsx("i",{className:"fas fa-file-pdf"}),p.jsx("h3",{children:"PDF Document"}),p.jsx("p",{children:"This document is in PDF format and cannot be previewed directly."}),p.jsxs("button",{className:"preview-btn download-btn",onClick:()=>window.open(re,"_blank"),children:[p.jsx("i",{className:"fas fa-external-link-alt"}),p.jsx("span",{children:"Open in New Tab"})]})]})})]}),p.jsxs("div",{className:"modal-actions document-modal-actions",children:[p.jsxs("button",{className:"secondary-btn close-modal-btn",onClick:()=>ue(!1),children:[p.jsx("i",{className:"fas fa-times"}),p.jsx("span",{children:"Close"})]}),p.jsxs("button",{className:"primary-btn download-btn",onClick:()=>window.open(re,"_blank"),children:[p.jsx("i",{className:"fas fa-download"}),p.jsx("span",{children:"Download/Open"})]})]})]})})]})};function Gv(e){return e+.5|0}const ap=(e,t,r)=>Math.max(Math.min(e,r),t);function F1(e){return ap(Gv(e*2.55),0,255)}function pp(e){return ap(Gv(e*255),0,255)}function sd(e){return ap(Gv(e/2.55)/100,0,1)}function MC(e){return ap(Gv(e*100),0,100)}const Wh={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},o5=[..."0123456789ABCDEF"],wO=e=>o5[e&15],BO=e=>o5[(e&240)>>4]+o5[e&15],Kx=e=>(e&240)>>4===(e&15),CO=e=>Kx(e.r)&&Kx(e.g)&&Kx(e.b)&&Kx(e.a);function SO(e){var t=e.length,r;return e[0]==="#"&&(t===4||t===5?r={r:255&Wh[e[1]]*17,g:255&Wh[e[2]]*17,b:255&Wh[e[3]]*17,a:t===5?Wh[e[4]]*17:255}:(t===7||t===9)&&(r={r:Wh[e[1]]<<4|Wh[e[2]],g:Wh[e[3]]<<4|Wh[e[4]],b:Wh[e[5]]<<4|Wh[e[6]],a:t===9?Wh[e[7]]<<4|Wh[e[8]]:255})),r}const EO=(e,t)=>e<255?t(e):"";function TO(e){var t=CO(e)?wO:BO;return e?"#"+t(e.r)+t(e.g)+t(e.b)+EO(e.a,t):void 0}const FO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qk(e,t,r){const i=t*Math.min(r,1-r),n=(a,c=(a+e/30)%12)=>r-i*Math.max(Math.min(c-3,9-c,1),-1);return[n(0),n(8),n(4)]}function kO(e,t,r){const i=(n,a=(n+e/60)%6)=>r-r*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function NO(e,t,r){const i=qk(e,1,.5);let n;for(t+r>1&&(n=1/(t+r),t*=n,r*=n),n=0;n<3;n++)i[n]*=1-t-r,i[n]+=t;return i}function IO(e,t,r,i,n){return e===n?(t-r)/i+(t<r?6:0):t===n?(r-e)/i+2:(e-t)/i+4}function F4(e){const r=e.r/255,i=e.g/255,n=e.b/255,a=Math.max(r,i,n),c=Math.min(r,i,n),s=(a+c)/2;let d,g,x;return a!==c&&(x=a-c,g=s>.5?x/(2-a-c):x/(a+c),d=IO(r,i,n,x,a),d=d*60+.5),[d|0,g||0,s]}function k4(e,t,r,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,i)).map(pp)}function N4(e,t,r){return k4(qk,e,t,r)}function LO(e,t,r){return k4(NO,e,t,r)}function MO(e,t,r){return k4(kO,e,t,r)}function Kk(e){return(e%360+360)%360}function PO(e){const t=FO.exec(e);let r=255,i;if(!t)return;t[5]!==i&&(r=t[6]?F1(+t[5]):pp(+t[5]));const n=Kk(+t[2]),a=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=LO(n,a,c):t[1]==="hsv"?i=MO(n,a,c):i=N4(n,a,c),{r:i[0],g:i[1],b:i[2],a:r}}function DO(e,t){var r=F4(e);r[0]=Kk(r[0]+t),r=N4(r),e.r=r[0],e.g=r[1],e.b=r[2]}function RO(e){if(!e)return;const t=F4(e),r=t[0],i=MC(t[1]),n=MC(t[2]);return e.a<255?`hsla(${r}, ${i}%, ${n}%, ${sd(e.a)})`:`hsl(${r}, ${i}%, ${n}%)`}const PC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},DC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function UO(){const e={},t=Object.keys(DC),r=Object.keys(PC);let i,n,a,c,s;for(i=0;i<t.length;i++){for(c=s=t[i],n=0;n<r.length;n++)a=r[n],s=s.replace(a,PC[a]);a=parseInt(DC[c],16),e[s]=[a>>16&255,a>>8&255,a&255]}return e}let Wx;function jO(e){Wx||(Wx=UO(),Wx.transparent=[0,0,0,0]);const t=Wx[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const OO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function QO(e){const t=OO.exec(e);let r=255,i,n,a;if(t){if(t[7]!==i){const c=+t[7];r=t[8]?F1(c):ap(c*255,0,255)}return i=+t[1],n=+t[3],a=+t[5],i=255&(t[2]?F1(i):ap(i,0,255)),n=255&(t[4]?F1(n):ap(n,0,255)),a=255&(t[6]?F1(a):ap(a,0,255)),{r:i,g:n,b:a,a:r}}}function zO(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${sd(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const yb=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ym=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function HO(e,t,r){const i=ym(sd(e.r)),n=ym(sd(e.g)),a=ym(sd(e.b));return{r:pp(yb(i+r*(ym(sd(t.r))-i))),g:pp(yb(n+r*(ym(sd(t.g))-n))),b:pp(yb(a+r*(ym(sd(t.b))-a))),a:e.a+r*(t.a-e.a)}}function $x(e,t,r){if(e){let i=F4(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*r,t===0?360:1)),i=N4(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Wk(e,t){return e&&Object.assign(t||{},e)}function RC(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=pp(e[3]))):(t=Wk(e,{r:0,g:0,b:0,a:1}),t.a=pp(t.a)),t}function VO(e){return e.charAt(0)==="r"?QO(e):PO(e)}class fv{constructor(t){if(t instanceof fv)return t;const r=typeof t;let i;r==="object"?i=RC(t):r==="string"&&(i=SO(t)||jO(t)||VO(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Wk(this._rgb);return t&&(t.a=sd(t.a)),t}set rgb(t){this._rgb=RC(t)}rgbString(){return this._valid?zO(this._rgb):void 0}hexString(){return this._valid?TO(this._rgb):void 0}hslString(){return this._valid?RO(this._rgb):void 0}mix(t,r){if(t){const i=this.rgb,n=t.rgb;let a;const c=r===a?.5:r,s=2*c-1,d=i.a-n.a,g=((s*d===-1?s:(s+d)/(1+s*d))+1)/2;a=1-g,i.r=255&g*i.r+a*n.r+.5,i.g=255&g*i.g+a*n.g+.5,i.b=255&g*i.b+a*n.b+.5,i.a=c*i.a+(1-c)*n.a,this.rgb=i}return this}interpolate(t,r){return t&&(this._rgb=HO(this._rgb,t._rgb,r)),this}clone(){return new fv(this.rgb)}alpha(t){return this._rgb.a=pp(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=Gv(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return $x(this._rgb,2,t),this}darken(t){return $x(this._rgb,2,-t),this}saturate(t){return $x(this._rgb,1,t),this}desaturate(t){return $x(this._rgb,1,-t),this}rotate(t){return DO(this._rgb,t),this}}function Yf(){}const GO=(()=>{let e=0;return()=>e++})();function xs(e){return e==null}function Wo(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function jn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function eu(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function df(e,t){return eu(e)?e:t}function Bn(e,t){return typeof e>"u"?t:e}const qO=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,$k=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ga(e,t,r){if(e&&typeof e.call=="function")return e.apply(r,t)}function ks(e,t,r,i){let n,a,c;if(Wo(e))for(a=e.length,n=0;n<a;n++)t.call(r,e[n],n);else if(jn(e))for(c=Object.keys(e),a=c.length,n=0;n<a;n++)t.call(r,e[c[n]],c[n])}function b_(e,t){let r,i,n,a;if(!e||!t||e.length!==t.length)return!1;for(r=0,i=e.length;r<i;++r)if(n=e[r],a=t[r],n.datasetIndex!==a.datasetIndex||n.index!==a.index)return!1;return!0}function w_(e){if(Wo(e))return e.map(w_);if(jn(e)){const t=Object.create(null),r=Object.keys(e),i=r.length;let n=0;for(;n<i;++n)t[r[n]]=w_(e[r[n]]);return t}return e}function Xk(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function KO(e,t,r,i){if(!Xk(e))return;const n=t[e],a=r[e];jn(n)&&jn(a)?dv(n,a,i):t[e]=w_(a)}function dv(e,t,r){const i=Wo(t)?t:[t],n=i.length;if(!jn(e))return e;r=r||{};const a=r.merger||KO;let c;for(let s=0;s<n;++s){if(c=i[s],!jn(c))continue;const d=Object.keys(c);for(let g=0,x=d.length;g<x;++g)a(d[g],e,c,r)}return e}function H1(e,t){return dv(e,t,{merger:WO})}function WO(e,t,r){if(!Xk(e))return;const i=t[e],n=r[e];jn(i)&&jn(n)?H1(i,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=w_(n))}const UC={"":e=>e,x:e=>e.x,y:e=>e.y};function $O(e){const t=e.split("."),r=[];let i="";for(const n of t)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(r.push(i),i="");return r}function XO(e){const t=$O(e);return r=>{for(const i of t){if(i==="")break;r=r&&r[i]}return r}}function x0(e,t){return(UC[t]||(UC[t]=XO(t)))(e)}function I4(e){return e.charAt(0).toUpperCase()+e.slice(1)}const pv=e=>typeof e<"u",xp=e=>typeof e=="function",jC=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};function ZO(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Is=Math.PI,Ha=2*Is,YO=Ha+Is,B_=Number.POSITIVE_INFINITY,JO=Is/180,gl=Is/2,$p=Is/4,OC=Is*2/3,Zk=Math.log10,Cf=Math.sign;function V1(e,t,r){return Math.abs(e-t)<r}function QC(e){const t=Math.round(e);e=V1(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(Zk(e))),i=e/r;return(i<=1?1:i<=2?2:i<=5?5:10)*r}function e7(e){const t=[],r=Math.sqrt(e);let i;for(i=1;i<r;i++)e%i===0&&(t.push(i),t.push(e/i));return r===(r|0)&&t.push(r),t.sort((n,a)=>n-a).pop(),t}function t7(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function mv(e){return!t7(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function r7(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}function i7(e,t,r){let i,n,a;for(i=0,n=e.length;i<n;i++)a=e[i][r],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function ld(e){return e*(Is/180)}function n7(e){return e*(180/Is)}function zC(e){if(!eu(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function Yk(e,t){const r=t.x-e.x,i=t.y-e.y,n=Math.sqrt(r*r+i*i);let a=Math.atan2(i,r);return a<-.5*Is&&(a+=Ha),{angle:a,distance:n}}function l5(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s7(e,t){return(e-t+YO)%Ha-Is}function Sh(e){return(e%Ha+Ha)%Ha}function gv(e,t,r,i){const n=Sh(e),a=Sh(t),c=Sh(r),s=Sh(a-n),d=Sh(c-n),g=Sh(n-a),x=Sh(n-c);return n===a||n===c||i&&a===c||s>d&&g<x}function Xc(e,t,r){return Math.max(t,Math.min(r,e))}function a7(e){return Xc(e,-32768,32767)}function cd(e,t,r,i=1e-6){return e>=Math.min(t,r)-i&&e<=Math.max(t,r)+i}function L4(e,t,r){r=r||(c=>e[c]<t);let i=e.length-1,n=0,a;for(;i-n>1;)a=n+i>>1,r(a)?n=a:i=a;return{lo:n,hi:i}}const a0=(e,t,r,i)=>L4(e,r,i?n=>{const a=e[n][t];return a<r||a===r&&e[n+1][t]===r}:n=>e[n][t]<r),o7=(e,t,r)=>L4(e,r,i=>e[i][t]>=r);function l7(e,t,r){let i=0,n=e.length;for(;i<n&&e[i]<t;)i++;for(;n>i&&e[n-1]>r;)n--;return i>0||n<e.length?e.slice(i,n):e}const Jk=["push","pop","shift","splice","unshift"];function c7(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Jk.forEach(r=>{const i="_onData"+I4(r),n=e[r];Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value(...a){const c=n.apply(this,a);return e._chartjs.listeners.forEach(s=>{typeof s[i]=="function"&&s[i](...a)}),c}})})}function HC(e,t){const r=e._chartjs;if(!r)return;const i=r.listeners,n=i.indexOf(t);n!==-1&&i.splice(n,1),!(i.length>0)&&(Jk.forEach(a=>{delete e[a]}),delete e._chartjs)}function e6(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const t6=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function r6(e,t){let r=[],i=!1;return function(...n){r=n,i||(i=!0,t6.call(window,()=>{i=!1,e.apply(t,r)}))}}function u7(e,t){let r;return function(...i){return t?(clearTimeout(r),r=setTimeout(e,t,i)):e.apply(this,i),t}}const M4=e=>e==="start"?"left":e==="end"?"right":"center",Gc=(e,t,r)=>e==="start"?t:e==="end"?r:(t+r)/2,h7=(e,t,r,i)=>e===(i?"left":"right")?r:e==="center"?(t+r)/2:t;function A7(e,t,r){const i=t.length;let n=0,a=i;if(e._sorted){const{iScale:c,vScale:s,_parsed:d}=e,g=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,x=c.axis,{min:C,max:N,minDefined:B,maxDefined:M}=c.getUserBounds();if(B){if(n=Math.min(a0(d,x,C).lo,r?i:a0(t,x,c.getPixelForValue(C)).lo),g){const I=d.slice(0,n+1).reverse().findIndex(R=>!xs(R[s.axis]));n-=Math.max(0,I)}n=Xc(n,0,i-1)}if(M){let I=Math.max(a0(d,c.axis,N,!0).hi+1,r?0:a0(t,x,c.getPixelForValue(N),!0).hi+1);if(g){const R=d.slice(I-1).findIndex(D=>!xs(D[s.axis]));I+=Math.max(0,R)}a=Xc(I,n,i)-n}else a=i-n}return{start:n,count:a}}function f7(e){const{xScale:t,yScale:r,_scaleRanges:i}=e,n={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!i)return e._scaleRanges=n,!0;const a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==r.min||i.ymax!==r.max;return Object.assign(i,n),a}const Xx=e=>e===0||e===1,VC=(e,t,r)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ha/r)),GC=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ha/r)+1,G1={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*gl)+1,easeOutSine:e=>Math.sin(e*gl),easeInOutSine:e=>-.5*(Math.cos(Is*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Xx(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Xx(e)?e:VC(e,.075,.3),easeOutElastic:e=>Xx(e)?e:GC(e,.075,.3),easeInOutElastic(e){return Xx(e)?e:e<.5?.5*VC(e*2,.1125,.45):.5+.5*GC(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-G1.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?G1.easeInBounce(e*2)*.5:G1.easeOutBounce(e*2-1)*.5+.5};function P4(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function qC(e){return P4(e)?e:new fv(e)}function _b(e){return P4(e)?e:new fv(e).saturate(.5).darken(.1).hexString()}const d7=["x","y","borderWidth","radius","tension"],p7=["color","borderColor","backgroundColor"];function m7(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:p7},numbers:{type:"number",properties:d7}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function g7(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const KC=new Map;function v7(e,t){t=t||{};const r=e+JSON.stringify(t);let i=KC.get(r);return i||(i=new Intl.NumberFormat(e,t),KC.set(r,i)),i}function D4(e,t,r){return v7(t,r).format(e)}const x7={values(e){return Wo(e)?e:""+e},numeric(e,t,r){if(e===0)return"0";const i=this.chart.options.locale;let n,a=e;if(r.length>1){const g=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(g<1e-4||g>1e15)&&(n="scientific"),a=y7(e,r)}const c=Zk(Math.abs(a)),s=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),d={notation:n,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(d,this.options.ticks.format),D4(e,i,d)}};function y7(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e)),r}var i6={formatters:x7};function _7(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:i6.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const y0=Object.create(null),c5=Object.create(null);function q1(e,t){if(!t)return e;const r=t.split(".");for(let i=0,n=r.length;i<n;++i){const a=r[i];e=e[a]||(e[a]=Object.create(null))}return e}function bb(e,t,r){return typeof t=="string"?dv(q1(e,t),r):dv(q1(e,""),t)}class b7{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>_b(n.backgroundColor),this.hoverBorderColor=(i,n)=>_b(n.borderColor),this.hoverColor=(i,n)=>_b(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return bb(this,t,r)}get(t){return q1(this,t)}describe(t,r){return bb(c5,t,r)}override(t,r){return bb(y0,t,r)}route(t,r,i,n){const a=q1(this,t),c=q1(this,i),s="_"+r;Object.defineProperties(a,{[s]:{value:a[r],writable:!0},[r]:{enumerable:!0,get(){const d=this[s],g=c[n];return jn(d)?Object.assign({},g,d):Bn(d,g)},set(d){this[s]=d}}})}apply(t){t.forEach(r=>r(this))}}var To=new b7({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[m7,g7,_7]);function w7(e){return!e||xs(e.size)||xs(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function WC(e,t,r,i,n){let a=t[n];return a||(a=t[n]=e.measureText(n).width,r.push(n)),a>i&&(i=a),i}function Xp(e,t,r){const i=e.currentDevicePixelRatio,n=r!==0?Math.max(r/2,.5):0;return Math.round((t-n)*i)/i+n}function $C(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function u5(e,t,r,i){n6(e,t,r,i,null)}function n6(e,t,r,i,n){let a,c,s,d,g,x,C,N;const B=t.pointStyle,M=t.rotation,I=t.radius;let R=(M||0)*JO;if(B&&typeof B=="object"&&(a=B.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){e.save(),e.translate(r,i),e.rotate(R),e.drawImage(B,-B.width/2,-B.height/2,B.width,B.height),e.restore();return}if(!(isNaN(I)||I<=0)){switch(e.beginPath(),B){default:n?e.ellipse(r,i,n/2,I,0,0,Ha):e.arc(r,i,I,0,Ha),e.closePath();break;case"triangle":x=n?n/2:I,e.moveTo(r+Math.sin(R)*x,i-Math.cos(R)*I),R+=OC,e.lineTo(r+Math.sin(R)*x,i-Math.cos(R)*I),R+=OC,e.lineTo(r+Math.sin(R)*x,i-Math.cos(R)*I),e.closePath();break;case"rectRounded":g=I*.516,d=I-g,c=Math.cos(R+$p)*d,C=Math.cos(R+$p)*(n?n/2-g:d),s=Math.sin(R+$p)*d,N=Math.sin(R+$p)*(n?n/2-g:d),e.arc(r-C,i-s,g,R-Is,R-gl),e.arc(r+N,i-c,g,R-gl,R),e.arc(r+C,i+s,g,R,R+gl),e.arc(r-N,i+c,g,R+gl,R+Is),e.closePath();break;case"rect":if(!M){d=Math.SQRT1_2*I,x=n?n/2:d,e.rect(r-x,i-d,2*x,2*d);break}R+=$p;case"rectRot":C=Math.cos(R)*(n?n/2:I),c=Math.cos(R)*I,s=Math.sin(R)*I,N=Math.sin(R)*(n?n/2:I),e.moveTo(r-C,i-s),e.lineTo(r+N,i-c),e.lineTo(r+C,i+s),e.lineTo(r-N,i+c),e.closePath();break;case"crossRot":R+=$p;case"cross":C=Math.cos(R)*(n?n/2:I),c=Math.cos(R)*I,s=Math.sin(R)*I,N=Math.sin(R)*(n?n/2:I),e.moveTo(r-C,i-s),e.lineTo(r+C,i+s),e.moveTo(r+N,i-c),e.lineTo(r-N,i+c);break;case"star":C=Math.cos(R)*(n?n/2:I),c=Math.cos(R)*I,s=Math.sin(R)*I,N=Math.sin(R)*(n?n/2:I),e.moveTo(r-C,i-s),e.lineTo(r+C,i+s),e.moveTo(r+N,i-c),e.lineTo(r-N,i+c),R+=$p,C=Math.cos(R)*(n?n/2:I),c=Math.cos(R)*I,s=Math.sin(R)*I,N=Math.sin(R)*(n?n/2:I),e.moveTo(r-C,i-s),e.lineTo(r+C,i+s),e.moveTo(r+N,i-c),e.lineTo(r-N,i+c);break;case"line":c=n?n/2:Math.cos(R)*I,s=Math.sin(R)*I,e.moveTo(r-c,i-s),e.lineTo(r+c,i+s);break;case"dash":e.moveTo(r,i),e.lineTo(r+Math.cos(R)*(n?n/2:I),i+Math.sin(R)*I);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function vv(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function p2(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function m2(e){e.restore()}function B7(e,t,r,i,n){if(!t)return e.lineTo(r.x,r.y);if(n==="middle"){const a=(t.x+r.x)/2;e.lineTo(a,t.y),e.lineTo(a,r.y)}else n==="after"!=!!i?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function C7(e,t,r,i){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?r.cp2x:r.cp1x,i?r.cp2y:r.cp1y,r.x,r.y)}function S7(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),xs(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function E7(e,t,r,i,n){if(n.strikethrough||n.underline){const a=e.measureText(i),c=t-a.actualBoundingBoxLeft,s=t+a.actualBoundingBoxRight,d=r-a.actualBoundingBoxAscent,g=r+a.actualBoundingBoxDescent,x=n.strikethrough?(d+g)/2:g;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(c,x),e.lineTo(s,x),e.stroke()}}function T7(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function xv(e,t,r,i,n,a={}){const c=Wo(t)?t:[t],s=a.strokeWidth>0&&a.strokeColor!=="";let d,g;for(e.save(),e.font=n.string,S7(e,a),d=0;d<c.length;++d)g=c[d],a.backdrop&&T7(e,a.backdrop),s&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),xs(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(g,r,i,a.maxWidth)),e.fillText(g,r,i,a.maxWidth),E7(e,r,i,g,a),i+=Number(n.lineHeight);e.restore()}function C_(e,t){const{x:r,y:i,w:n,h:a,radius:c}=t;e.arc(r+c.topLeft,i+c.topLeft,c.topLeft,1.5*Is,Is,!0),e.lineTo(r,i+a-c.bottomLeft),e.arc(r+c.bottomLeft,i+a-c.bottomLeft,c.bottomLeft,Is,gl,!0),e.lineTo(r+n-c.bottomRight,i+a),e.arc(r+n-c.bottomRight,i+a-c.bottomRight,c.bottomRight,gl,0,!0),e.lineTo(r+n,i+c.topRight),e.arc(r+n-c.topRight,i+c.topRight,c.topRight,0,-gl,!0),e.lineTo(r+c.topLeft,i)}const F7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,k7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function N7(e,t){const r=(""+e).match(F7);if(!r||r[1]==="normal")return t*1.2;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100;break}return t*e}const I7=e=>+e||0;function R4(e,t){const r={},i=jn(t),n=i?Object.keys(t):t,a=jn(e)?i?c=>Bn(e[c],e[t[c]]):c=>e[c]:()=>e;for(const c of n)r[c]=I7(a(c));return r}function s6(e){return R4(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Hm(e){return R4(e,["topLeft","topRight","bottomLeft","bottomRight"])}function sA(e){const t=s6(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Zc(e,t){e=e||{},t=t||To.font;let r=Bn(e.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let i=Bn(e.style,t.style);i&&!(""+i).match(k7)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:Bn(e.family,t.family),lineHeight:N7(Bn(e.lineHeight,t.lineHeight),r),size:r,style:i,weight:Bn(e.weight,t.weight),string:""};return n.string=w7(n),n}function Zx(e,t,r,i){let n,a,c;for(n=0,a=e.length;n<a;++n)if(c=e[n],c!==void 0&&c!==void 0)return c}function L7(e,t,r){const{min:i,max:n}=e,a=$k(t,(n-i)/2),c=(s,d)=>r&&s===0?0:s+d;return{min:c(i,-Math.abs(a)),max:c(n,a)}}function S0(e,t){return Object.assign(Object.create(e),t)}function U4(e,t=[""],r,i,n=()=>e[0]){const a=r||e;typeof i>"u"&&(i=c6("_fallback",e));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:i,_getTarget:n,override:s=>U4([s,...e],t,a,i)};return new Proxy(c,{deleteProperty(s,d){return delete s[d],delete s._keys,delete e[0][d],!0},get(s,d){return o6(s,d,()=>Q7(d,t,e,s))},getOwnPropertyDescriptor(s,d){return Reflect.getOwnPropertyDescriptor(s._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(s,d){return ZC(s).includes(d)},ownKeys(s){return ZC(s)},set(s,d,g){const x=s._storage||(s._storage=n());return s[d]=x[d]=g,delete s._keys,!0}})}function ig(e,t,r,i){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:a6(e,i),setContext:a=>ig(e,a,r,i),override:a=>ig(e.override(a),t,r,i)};return new Proxy(n,{deleteProperty(a,c){return delete a[c],delete e[c],!0},get(a,c,s){return o6(a,c,()=>P7(a,c,s))},getOwnPropertyDescriptor(a,c){return a._descriptors.allKeys?Reflect.has(e,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,c)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(a,c){return Reflect.has(e,c)},ownKeys(){return Reflect.ownKeys(e)},set(a,c,s){return e[c]=s,delete a[c],!0}})}function a6(e,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:i=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:r,indexable:i,isScriptable:xp(r)?r:()=>r,isIndexable:xp(i)?i:()=>i}}const M7=(e,t)=>e?e+I4(t):t,j4=(e,t)=>jn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function o6(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=r();return e[t]=i,i}function P7(e,t,r){const{_proxy:i,_context:n,_subProxy:a,_descriptors:c}=e;let s=i[t];return xp(s)&&c.isScriptable(t)&&(s=D7(t,s,e,r)),Wo(s)&&s.length&&(s=R7(t,s,e,c.isIndexable)),j4(t,s)&&(s=ig(s,n,a&&a[t],c)),s}function D7(e,t,r,i){const{_proxy:n,_context:a,_subProxy:c,_stack:s}=r;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e);let d=t(a,c||i);return s.delete(e),j4(e,d)&&(d=O4(n._scopes,n,e,d)),d}function R7(e,t,r,i){const{_proxy:n,_context:a,_subProxy:c,_descriptors:s}=r;if(typeof a.index<"u"&&i(e))return t[a.index%t.length];if(jn(t[0])){const d=t,g=n._scopes.filter(x=>x!==d);t=[];for(const x of d){const C=O4(g,n,e,x);t.push(ig(C,a,c&&c[e],s))}}return t}function l6(e,t,r){return xp(e)?e(t,r):e}const U7=(e,t)=>e===!0?t:typeof e=="string"?x0(t,e):void 0;function j7(e,t,r,i,n){for(const a of t){const c=U7(r,a);if(c){e.add(c);const s=l6(c._fallback,r,n);if(typeof s<"u"&&s!==r&&s!==i)return s}else if(c===!1&&typeof i<"u"&&r!==i)return null}return!1}function O4(e,t,r,i){const n=t._rootScopes,a=l6(t._fallback,r,i),c=[...e,...n],s=new Set;s.add(i);let d=XC(s,c,r,a||r,i);return d===null||typeof a<"u"&&a!==r&&(d=XC(s,c,a,d,i),d===null)?!1:U4(Array.from(s),[""],n,a,()=>O7(t,r,i))}function XC(e,t,r,i,n){for(;r;)r=j7(e,t,r,i,n);return r}function O7(e,t,r){const i=e._getTarget();t in i||(i[t]={});const n=i[t];return Wo(n)&&jn(r)?r:n||{}}function Q7(e,t,r,i){let n;for(const a of t)if(n=c6(M7(a,e),r),typeof n<"u")return j4(e,n)?O4(r,i,e,n):n}function c6(e,t){for(const r of t){if(!r)continue;const i=r[e];if(typeof i<"u")return i}}function ZC(e){let t=e._keys;return t||(t=e._keys=z7(e._scopes)),t}function z7(e){const t=new Set;for(const r of e)for(const i of Object.keys(r).filter(n=>!n.startsWith("_")))t.add(i);return Array.from(t)}const H7=Number.EPSILON||1e-14,ng=(e,t)=>t<e.length&&!e[t].skip&&e[t],u6=e=>e==="x"?"y":"x";function V7(e,t,r,i){const n=e.skip?t:e,a=t,c=r.skip?t:r,s=l5(a,n),d=l5(c,a);let g=s/(s+d),x=d/(s+d);g=isNaN(g)?0:g,x=isNaN(x)?0:x;const C=i*g,N=i*x;return{previous:{x:a.x-C*(c.x-n.x),y:a.y-C*(c.y-n.y)},next:{x:a.x+N*(c.x-n.x),y:a.y+N*(c.y-n.y)}}}function G7(e,t,r){const i=e.length;let n,a,c,s,d,g=ng(e,0);for(let x=0;x<i-1;++x)if(d=g,g=ng(e,x+1),!(!d||!g)){if(V1(t[x],0,H7)){r[x]=r[x+1]=0;continue}n=r[x]/t[x],a=r[x+1]/t[x],s=Math.pow(n,2)+Math.pow(a,2),!(s<=9)&&(c=3/Math.sqrt(s),r[x]=n*c*t[x],r[x+1]=a*c*t[x])}}function q7(e,t,r="x"){const i=u6(r),n=e.length;let a,c,s,d=ng(e,0);for(let g=0;g<n;++g){if(c=s,s=d,d=ng(e,g+1),!s)continue;const x=s[r],C=s[i];c&&(a=(x-c[r])/3,s[`cp1${r}`]=x-a,s[`cp1${i}`]=C-a*t[g]),d&&(a=(d[r]-x)/3,s[`cp2${r}`]=x+a,s[`cp2${i}`]=C+a*t[g])}}function K7(e,t="x"){const r=u6(t),i=e.length,n=Array(i).fill(0),a=Array(i);let c,s,d,g=ng(e,0);for(c=0;c<i;++c)if(s=d,d=g,g=ng(e,c+1),!!d){if(g){const x=g[t]-d[t];n[c]=x!==0?(g[r]-d[r])/x:0}a[c]=s?g?Cf(n[c-1])!==Cf(n[c])?0:(n[c-1]+n[c])/2:n[c-1]:n[c]}G7(e,n,a),q7(e,a,t)}function Yx(e,t,r){return Math.max(Math.min(e,r),t)}function W7(e,t){let r,i,n,a,c,s=vv(e[0],t);for(r=0,i=e.length;r<i;++r)c=a,a=s,s=r<i-1&&vv(e[r+1],t),a&&(n=e[r],c&&(n.cp1x=Yx(n.cp1x,t.left,t.right),n.cp1y=Yx(n.cp1y,t.top,t.bottom)),s&&(n.cp2x=Yx(n.cp2x,t.left,t.right),n.cp2y=Yx(n.cp2y,t.top,t.bottom)))}function $7(e,t,r,i,n){let a,c,s,d;if(t.spanGaps&&(e=e.filter(g=>!g.skip)),t.cubicInterpolationMode==="monotone")K7(e,n);else{let g=i?e[e.length-1]:e[0];for(a=0,c=e.length;a<c;++a)s=e[a],d=V7(g,s,e[Math.min(a+1,c-(i?0:1))%c],t.tension),s.cp1x=d.previous.x,s.cp1y=d.previous.y,s.cp2x=d.next.x,s.cp2y=d.next.y,g=s}t.capBezierPoints&&W7(e,r)}function Q4(){return typeof window<"u"&&typeof document<"u"}function z4(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function S_(e,t,r){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[r])):i=e,i}const g2=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function X7(e,t){return g2(e).getPropertyValue(t)}const Z7=["top","right","bottom","left"];function h0(e,t,r){const i={};r=r?"-"+r:"";for(let n=0;n<4;n++){const a=Z7[n];i[a]=parseFloat(e[t+"-"+a+r])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Y7=(e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot);function J7(e,t){const r=e.touches,i=r&&r.length?r[0]:e,{offsetX:n,offsetY:a}=i;let c=!1,s,d;if(Y7(n,a,e.target))s=n,d=a;else{const g=t.getBoundingClientRect();s=i.clientX-g.left,d=i.clientY-g.top,c=!0}return{x:s,y:d,box:c}}function Jp(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:i}=t,n=g2(r),a=n.boxSizing==="border-box",c=h0(n,"padding"),s=h0(n,"border","width"),{x:d,y:g,box:x}=J7(e,r),C=c.left+(x&&s.left),N=c.top+(x&&s.top);let{width:B,height:M}=t;return a&&(B-=c.width+s.width,M-=c.height+s.height),{x:Math.round((d-C)/B*r.width/i),y:Math.round((g-N)/M*r.height/i)}}function e9(e,t,r){let i,n;if(t===void 0||r===void 0){const a=e&&z4(e);if(!a)t=e.clientWidth,r=e.clientHeight;else{const c=a.getBoundingClientRect(),s=g2(a),d=h0(s,"border","width"),g=h0(s,"padding");t=c.width-g.width-d.width,r=c.height-g.height-d.height,i=S_(s.maxWidth,a,"clientWidth"),n=S_(s.maxHeight,a,"clientHeight")}}return{width:t,height:r,maxWidth:i||B_,maxHeight:n||B_}}const Jx=e=>Math.round(e*10)/10;function t9(e,t,r,i){const n=g2(e),a=h0(n,"margin"),c=S_(n.maxWidth,e,"clientWidth")||B_,s=S_(n.maxHeight,e,"clientHeight")||B_,d=e9(e,t,r);let{width:g,height:x}=d;if(n.boxSizing==="content-box"){const N=h0(n,"border","width"),B=h0(n,"padding");g-=B.width+N.width,x-=B.height+N.height}return g=Math.max(0,g-a.width),x=Math.max(0,i?g/i:x-a.height),g=Jx(Math.min(g,c,d.maxWidth)),x=Jx(Math.min(x,s,d.maxHeight)),g&&!x&&(x=Jx(g/2)),(t!==void 0||r!==void 0)&&i&&d.height&&x>d.height&&(x=d.height,g=Jx(Math.floor(x*i))),{width:g,height:x}}function YC(e,t,r){const i=t||1,n=Math.floor(e.height*i),a=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const c=e.canvas;return c.style&&(r||!c.style.height&&!c.style.width)&&(c.style.height=`${e.height}px`,c.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||c.height!==n||c.width!==a?(e.currentDevicePixelRatio=i,c.height=n,c.width=a,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const r9=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Q4()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function JC(e,t){const r=X7(e,t),i=r&&r.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function e0(e,t,r,i){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function i9(e,t,r,i){return{x:e.x+r*(t.x-e.x),y:i==="middle"?r<.5?e.y:t.y:i==="after"?r<1?e.y:t.y:r>0?t.y:e.y}}function n9(e,t,r,i){const n={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},c=e0(e,n,r),s=e0(n,a,r),d=e0(a,t,r),g=e0(c,s,r),x=e0(s,d,r);return e0(g,x,r)}const s9=function(e,t){return{x(r){return e+e+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,i){return r-i},leftForLtr(r,i){return r-i}}},a9=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Vm(e,t,r){return e?s9(t,r):a9()}function h6(e,t){let r,i;(t==="ltr"||t==="rtl")&&(r=e.canvas.style,i=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=i)}function A6(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function f6(e){return e==="angle"?{between:gv,compare:s7,normalize:Sh}:{between:cd,compare:(t,r)=>t-r,normalize:t=>t}}function eS({start:e,end:t,count:r,loop:i,style:n}){return{start:e%r,end:t%r,loop:i&&(t-e+1)%r===0,style:n}}function o9(e,t,r){const{property:i,start:n,end:a}=r,{between:c,normalize:s}=f6(i),d=t.length;let{start:g,end:x,loop:C}=e,N,B;if(C){for(g+=d,x+=d,N=0,B=d;N<B&&c(s(t[g%d][i]),n,a);++N)g--,x--;g%=d,x%=d}return x<g&&(x+=d),{start:g,end:x,loop:C,style:e.style}}function d6(e,t,r){if(!r)return[e];const{property:i,start:n,end:a}=r,c=t.length,{compare:s,between:d,normalize:g}=f6(i),{start:x,end:C,loop:N,style:B}=o9(e,t,r),M=[];let I=!1,R=null,D,V,G;const Z=()=>d(n,G,D)&&s(n,G)!==0,X=()=>s(a,D)===0||d(a,G,D),le=()=>I||Z(),ae=()=>!I||X();for(let ce=x,se=x;ce<=C;++ce)V=t[ce%c],!V.skip&&(D=g(V[i]),D!==G&&(I=d(D,n,a),R===null&&le()&&(R=s(D,n)===0?ce:se),R!==null&&ae()&&(M.push(eS({start:R,end:ce,loop:N,count:c,style:B})),R=null),se=ce,G=D));return R!==null&&M.push(eS({start:R,end:C,loop:N,count:c,style:B})),M}function p6(e,t){const r=[],i=e.segments;for(let n=0;n<i.length;n++){const a=d6(i[n],e.points,t);a.length&&r.push(...a)}return r}function l9(e,t,r,i){let n=0,a=t-1;if(r&&!i)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,r&&(a+=n);a>n&&e[a%t].skip;)a--;return a%=t,{start:n,end:a}}function c9(e,t,r,i){const n=e.length,a=[];let c=t,s=e[t],d;for(d=t+1;d<=r;++d){const g=e[d%n];g.skip||g.stop?s.skip||(i=!1,a.push({start:t%n,end:(d-1)%n,loop:i}),t=c=g.stop?d:null):(c=d,s.skip&&(t=d)),s=g}return c!==null&&a.push({start:t%n,end:c%n,loop:i}),a}function u9(e,t){const r=e.points,i=e.options.spanGaps,n=r.length;if(!n)return[];const a=!!e._loop,{start:c,end:s}=l9(r,n,a,i);if(i===!0)return tS(e,[{start:c,end:s,loop:a}],r,t);const d=s<c?s+n:s,g=!!e._fullLoop&&c===0&&s===n-1;return tS(e,c9(r,c,d,g),r,t)}function tS(e,t,r,i){return!i||!i.setContext||!r?t:h9(e,t,r,i)}function h9(e,t,r,i){const n=e._chart.getContext(),a=rS(e.options),{_datasetIndex:c,options:{spanGaps:s}}=e,d=r.length,g=[];let x=a,C=t[0].start,N=C;function B(M,I,R,D){const V=s?-1:1;if(M!==I){for(M+=d;r[M%d].skip;)M-=V;for(;r[I%d].skip;)I+=V;M%d!==I%d&&(g.push({start:M%d,end:I%d,loop:R,style:D}),x=D,C=I%d)}}for(const M of t){C=s?C:M.start;let I=r[C%d],R;for(N=C+1;N<=M.end;N++){const D=r[N%d];R=rS(i.setContext(S0(n,{type:"segment",p0:I,p1:D,p0DataIndex:(N-1)%d,p1DataIndex:N%d,datasetIndex:c}))),A9(R,x)&&B(C,N-1,M.loop,x),I=D,x=R}C<N-1&&B(C,N-1,M.loop,x)}return g}function rS(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function A9(e,t){if(!t)return!1;const r=[],i=function(n,a){return P4(a)?(r.includes(a)||r.push(a),r.indexOf(a)):a};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function ey(e,t,r){return e.options.clip?e[r]:t[r]}function f9(e,t){const{xScale:r,yScale:i}=e;return r&&i?{left:ey(r,t,"left"),right:ey(r,t,"right"),top:ey(i,t,"top"),bottom:ey(i,t,"bottom")}:t}function m6(e,t){const r=t._clip;if(r.disabled)return!1;const i=f9(t,e.chartArea);return{left:r.left===!1?0:i.left-(r.left===!0?0:r.left),right:r.right===!1?e.width:i.right+(r.right===!0?0:r.right),top:r.top===!1?0:i.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?e.height:i.bottom+(r.bottom===!0?0:r.bottom)}}class d9{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,i,n){const a=r.listeners[n],c=r.duration;a.forEach(s=>s({chart:t,initial:r.initial,numSteps:c,currentStep:Math.min(i-r.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=t6.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const a=i.items;let c=a.length-1,s=!1,d;for(;c>=0;--c)d=a[c],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),s=!0):(a[c]=a[a.length-1],a.pop());s&&(n.draw(),this._notify(n,i,t,"progress")),a.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),r+=a.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let i=r.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,i)),i}listen(t,r,i){this._getAnims(t).listeners[r].push(i)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const i=r.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var id=new d9;const iS="transparent",p9={boolean(e,t,r){return r>.5?t:e},color(e,t,r){const i=qC(e||iS),n=i.valid&&qC(t||iS);return n&&n.valid?n.mix(i,r).hexString():t},number(e,t,r){return e+(t-e)*r}};class m9{constructor(t,r,i,n){const a=r[i];n=Zx([t.to,n,a,t.from]);const c=Zx([t.from,a,n]);this._active=!0,this._fn=t.fn||p9[t.type||typeof c],this._easing=G1[t.easing]||G1.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=i,this._from=c,this._to=n,this._promises=void 0}active(){return this._active}update(t,r,i){if(this._active){this._notify(!1);const n=this._target[this._prop],a=i-this._start,c=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=Zx([t.to,r,n,t.from]),this._from=Zx([t.from,n,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,i=this._duration,n=this._prop,a=this._from,c=this._loop,s=this._to;let d;if(this._active=a!==s&&(c||r<i),!this._active){this._target[n]=s,this._notify(!0);return}if(r<0){this._target[n]=a;return}d=r/i%2,d=c&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[n]=this._fn(a,s,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,i)=>{t.push({res:r,rej:i})})}_notify(t){const r=t?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][r]()}}class g6{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!jn(t))return;const r=Object.keys(To.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const a=t[n];if(!jn(a))return;const c={};for(const s of r)c[s]=a[s];(Wo(a.properties)&&a.properties||[n]).forEach(s=>{(s===n||!i.has(s))&&i.set(s,c)})})}_animateOptions(t,r){const i=r.options,n=v9(t,i);if(!n)return[];const a=this._createAnimations(n,i);return i.$shared&&g9(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,r){const i=this._properties,n=[],a=t.$animations||(t.$animations={}),c=Object.keys(r),s=Date.now();let d;for(d=c.length-1;d>=0;--d){const g=c[d];if(g.charAt(0)==="$")continue;if(g==="options"){n.push(...this._animateOptions(t,r));continue}const x=r[g];let C=a[g];const N=i.get(g);if(C)if(N&&C.active()){C.update(N,x,s);continue}else C.cancel();if(!N||!N.duration){t[g]=x;continue}a[g]=C=new m9(N,t,g,x),n.push(C)}return n}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const i=this._createAnimations(t,r);if(i.length)return id.add(this._chart,i),!0}}function g9(e,t){const r=[],i=Object.keys(t);for(let n=0;n<i.length;n++){const a=e[i[n]];a&&a.active()&&r.push(a.wait())}return Promise.all(r)}function v9(e,t){if(!t)return;let r=e.options;if(!r){e.options=t;return}return r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function nS(e,t){const r=e&&e.options||{},i=r.reverse,n=r.min===void 0?t:0,a=r.max===void 0?t:0;return{start:i?a:n,end:i?n:a}}function x9(e,t,r){if(r===!1)return!1;const i=nS(e,r),n=nS(t,r);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function y9(e){let t,r,i,n;return jn(e)?(t=e.top,r=e.right,i=e.bottom,n=e.left):t=r=i=n=e,{top:t,right:r,bottom:i,left:n,disabled:e===!1}}function v6(e,t){const r=[],i=e._getSortedDatasetMetas(t);let n,a;for(n=0,a=i.length;n<a;++n)r.push(i[n].index);return r}function sS(e,t,r,i={}){const n=e.keys,a=i.mode==="single";let c,s,d,g;if(t===null)return;let x=!1;for(c=0,s=n.length;c<s;++c){if(d=+n[c],d===r){if(x=!0,i.all)continue;break}g=e.values[d],eu(g)&&(a||t===0||Cf(t)===Cf(g))&&(t+=g)}return!x&&!i.all?0:t}function _9(e,t){const{iScale:r,vScale:i}=t,n=r.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",c=Object.keys(e),s=new Array(c.length);let d,g,x;for(d=0,g=c.length;d<g;++d)x=c[d],s[d]={[n]:x,[a]:e[x]};return s}function wb(e,t){const r=e&&e.options.stacked;return r||r===void 0&&t.stack!==void 0}function b9(e,t,r){return`${e.id}.${t.id}.${r.stack||r.type}`}function w9(e){const{min:t,max:r,minDefined:i,maxDefined:n}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:n?r:Number.POSITIVE_INFINITY}}function B9(e,t,r){const i=e[t]||(e[t]={});return i[r]||(i[r]={})}function aS(e,t,r,i){for(const n of t.getMatchingVisibleMetas(i).reverse()){const a=e[n.index];if(r&&a>0||!r&&a<0)return n.index}return null}function oS(e,t){const{chart:r,_cachedMeta:i}=e,n=r._stacks||(r._stacks={}),{iScale:a,vScale:c,index:s}=i,d=a.axis,g=c.axis,x=b9(a,c,i),C=t.length;let N;for(let B=0;B<C;++B){const M=t[B],{[d]:I,[g]:R}=M,D=M._stacks||(M._stacks={});N=D[g]=B9(n,x,I),N[s]=R,N._top=aS(N,c,!0,i.type),N._bottom=aS(N,c,!1,i.type);const V=N._visualValues||(N._visualValues={});V[s]=R}}function Bb(e,t){const r=e.scales;return Object.keys(r).filter(i=>r[i].axis===t).shift()}function C9(e,t){return S0(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function S9(e,t,r){return S0(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function d1(e,t){const r=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const n of t){const a=n._stacks;if(!a||a[i]===void 0||a[i][r]===void 0)return;delete a[i][r],a[i]._visualValues!==void 0&&a[i]._visualValues[r]!==void 0&&delete a[i]._visualValues[r]}}}const Cb=e=>e==="reset"||e==="none",lS=(e,t)=>t?e:Object.assign({},e),E9=(e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:v6(r,!0),values:null};class v2{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=wb(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&d1(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,i=this.getDataset(),n=(C,N,B,M)=>C==="x"?N:C==="r"?M:B,a=r.xAxisID=Bn(i.xAxisID,Bb(t,"x")),c=r.yAxisID=Bn(i.yAxisID,Bb(t,"y")),s=r.rAxisID=Bn(i.rAxisID,Bb(t,"r")),d=r.indexAxis,g=r.iAxisID=n(d,a,c,s),x=r.vAxisID=n(d,c,a,s);r.xScale=this.getScaleForId(a),r.yScale=this.getScaleForId(c),r.rScale=this.getScaleForId(s),r.iScale=this.getScaleForId(g),r.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&HC(this._data,this),t._stacked&&d1(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(jn(r)){const n=this._cachedMeta;this._data=_9(r,n)}else if(i!==r){if(i){HC(i,this);const n=this._cachedMeta;d1(n),n._parsed=[]}r&&Object.isExtensible(r)&&c7(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const a=r._stacked;r._stacked=wb(r.vScale,r),r.stack!==i.stack&&(n=!0,d1(r),r.stack=i.stack),this._resyncElements(t),(n||a!==r._stacked)&&(oS(this,r._parsed),r._stacked=wb(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:i,_data:n}=this,{iScale:a,_stacked:c}=i,s=a.axis;let d=t===0&&r===n.length?!0:i._sorted,g=t>0&&i._parsed[t-1],x,C,N;if(this._parsing===!1)i._parsed=n,i._sorted=!0,N=n;else{Wo(n[t])?N=this.parseArrayData(i,n,t,r):jn(n[t])?N=this.parseObjectData(i,n,t,r):N=this.parsePrimitiveData(i,n,t,r);const B=()=>C[s]===null||g&&C[s]<g[s];for(x=0;x<r;++x)i._parsed[x+t]=C=N[x],d&&(B()&&(d=!1),g=C);i._sorted=d}c&&oS(this,N)}parsePrimitiveData(t,r,i,n){const{iScale:a,vScale:c}=t,s=a.axis,d=c.axis,g=a.getLabels(),x=a===c,C=new Array(n);let N,B,M;for(N=0,B=n;N<B;++N)M=N+i,C[N]={[s]:x||a.parse(g[M],M),[d]:c.parse(r[M],M)};return C}parseArrayData(t,r,i,n){const{xScale:a,yScale:c}=t,s=new Array(n);let d,g,x,C;for(d=0,g=n;d<g;++d)x=d+i,C=r[x],s[d]={x:a.parse(C[0],x),y:c.parse(C[1],x)};return s}parseObjectData(t,r,i,n){const{xScale:a,yScale:c}=t,{xAxisKey:s="x",yAxisKey:d="y"}=this._parsing,g=new Array(n);let x,C,N,B;for(x=0,C=n;x<C;++x)N=x+i,B=r[N],g[x]={x:a.parse(x0(B,s),N),y:c.parse(x0(B,d),N)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){const n=this.chart,a=this._cachedMeta,c=r[t.axis],s={keys:v6(n,!0),values:r._stacks[t.axis]._visualValues};return sS(s,c,a.index,{mode:i})}updateRangeFromParsed(t,r,i,n){const a=i[r.axis];let c=a===null?NaN:a;const s=n&&i._stacks[r.axis];n&&s&&(n.values=s,c=sS(n,a,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,r){const i=this._cachedMeta,n=i._parsed,a=i._sorted&&t===i.iScale,c=n.length,s=this._getOtherScale(t),d=E9(r,i,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:C}=w9(s);let N,B;function M(){B=n[N];const I=B[s.axis];return!eu(B[t.axis])||x>I||C<I}for(N=0;N<c&&!(!M()&&(this.updateRangeFromParsed(g,t,B,d),a));++N);if(a){for(N=c-1;N>=0;--N)if(!M()){this.updateRangeFromParsed(g,t,B,d);break}}return g}getAllParsedValues(t){const r=this._cachedMeta._parsed,i=[];let n,a,c;for(n=0,a=r.length;n<a;++n)c=r[n][t.axis],eu(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,i=r.iScale,n=r.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=y9(Bn(this.options.clip,x9(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,i=this._cachedMeta,n=i.data||[],a=r.chartArea,c=[],s=this._drawStart||0,d=this._drawCount||n.length-s,g=this.options.drawActiveElementsOnTop;let x;for(i.dataset&&i.dataset.draw(t,a,s,d),x=s;x<s+d;++x){const C=n[x];C.hidden||(C.active&&g?c.push(C):C.draw(t,a))}for(x=0;x<c.length;++x)c[x].draw(t,a)}getStyle(t,r){const i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){const n=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];a=c.$context||(c.$context=S9(this.getContext(),t,c)),a.parsed=this.getParsed(t),a.raw=n.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=C9(this.chart.getContext(),this.index)),a.dataset=n,a.index=a.datasetIndex=this.index;return a.active=!!r,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){const n=r==="active",a=this._cachedDataOpts,c=t+"-"+r,s=a[c],d=this.enableOptionSharing&&pv(i);if(s)return lS(s,d);const g=this.chart.config,x=g.datasetElementScopeKeys(this._type,t),C=n?[`${t}Hover`,"hover",t,""]:[t,""],N=g.getOptionScopes(this.getDataset(),x),B=Object.keys(To.elements[t]),M=()=>this.getContext(i,n,r),I=g.resolveNamedOptions(N,B,M,C);return I.$shared&&(I.$shared=d,a[c]=Object.freeze(lS(I,d))),I}_resolveAnimations(t,r,i){const n=this.chart,a=this._cachedDataOpts,c=`animation-${r}`,s=a[c];if(s)return s;let d;if(n.options.animation!==!1){const x=this.chart.config,C=x.datasetAnimationScopeKeys(this._type,r),N=x.getOptionScopes(this.getDataset(),C);d=x.createResolver(N,this.getContext(t,i,r))}const g=new g6(n,d&&d.animations);return d&&d._cacheable&&(a[c]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||Cb(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const i=this.resolveDataElementOptions(t,r),n=this._sharedOptions,a=this.getSharedOptions(i),c=this.includeOptions(r,a)||a!==n;return this.updateSharedOptions(a,r,i),{sharedOptions:a,includeOptions:c}}updateElement(t,r,i,n){Cb(n)?Object.assign(t,i):this._resolveAnimations(r,n).update(t,i)}updateSharedOptions(t,r,i){t&&!Cb(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,n){t.active=n;const a=this.getStyle(r,n);this._resolveAnimations(r,i,n).update(t,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,i=this._cachedMeta.data;for(const[s,d,g]of this._syncList)this[s](d,g);this._syncList=[];const n=i.length,a=r.length,c=Math.min(a,n);c&&this.parse(0,c),a>n?this._insertElements(n,a-n,t):a<n&&this._removeElements(a,n-a)}_insertElements(t,r,i=!0){const n=this._cachedMeta,a=n.data,c=t+r;let s;const d=g=>{for(g.length+=r,s=g.length-1;s>=c;s--)g[s]=g[s-r]};for(d(a),s=t;s<c;++s)a[s]=new this.dataElementType;this._parsing&&d(n._parsed),this.parse(t,r),i&&this.updateElements(a,t,r,"reset")}updateElements(t,r,i,n){}_removeElements(t,r){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,r);i._stacked&&d1(i,n)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,i,n]=t;this[r](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function T9(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let i=[];for(let n=0,a=r.length;n<a;n++)i=i.concat(r[n].controller.getAllParsedValues(e));e._cache.$bar=e6(i.sort((n,a)=>n-a))}return e._cache.$bar}function F9(e){const t=e.iScale,r=T9(t,e.type);let i=t._length,n,a,c,s;const d=()=>{c===32767||c===-32768||(pv(s)&&(i=Math.min(i,Math.abs(c-s)||i)),s=c)};for(n=0,a=r.length;n<a;++n)c=t.getPixelForValue(r[n]),d();for(s=void 0,n=0,a=t.ticks.length;n<a;++n)c=t.getPixelForTick(n),d();return i}function k9(e,t,r,i){const n=r.barThickness;let a,c;return xs(n)?(a=t.min*r.categoryPercentage,c=r.barPercentage):(a=n*i,c=1),{chunk:a/i,ratio:c,start:t.pixels[e]-a/2}}function N9(e,t,r,i){const n=t.pixels,a=n[e];let c=e>0?n[e-1]:null,s=e<n.length-1?n[e+1]:null;const d=r.categoryPercentage;c===null&&(c=a-(s===null?t.end-t.start:s-a)),s===null&&(s=a+a-c);const g=a-(a-Math.min(c,s))/2*d;return{chunk:Math.abs(s-c)/2*d/i,ratio:r.barPercentage,start:g}}function I9(e,t,r,i){const n=r.parse(e[0],i),a=r.parse(e[1],i),c=Math.min(n,a),s=Math.max(n,a);let d=c,g=s;Math.abs(c)>Math.abs(s)&&(d=s,g=c),t[r.axis]=g,t._custom={barStart:d,barEnd:g,start:n,end:a,min:c,max:s}}function x6(e,t,r,i){return Wo(e)?I9(e,t,r,i):t[r.axis]=r.parse(e,i),t}function cS(e,t,r,i){const n=e.iScale,a=e.vScale,c=n.getLabels(),s=n===a,d=[];let g,x,C,N;for(g=r,x=r+i;g<x;++g)N=t[g],C={},C[n.axis]=s||n.parse(c[g],g),d.push(x6(N,C,a,g));return d}function Sb(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function L9(e,t,r){return e!==0?Cf(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}function M9(e){let t,r,i,n,a;return e.horizontal?(t=e.base>e.x,r="left",i="right"):(t=e.base<e.y,r="bottom",i="top"),t?(n="end",a="start"):(n="start",a="end"),{start:r,end:i,reverse:t,top:n,bottom:a}}function P9(e,t,r,i){let n=t.borderSkipped;const a={};if(!n){e.borderSkipped=a;return}if(n===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:s,reverse:d,top:g,bottom:x}=M9(e);n==="middle"&&r&&(e.enableBorderRadius=!0,(r._top||0)===i?n=g:(r._bottom||0)===i?n=x:(a[uS(x,c,s,d)]=!0,n=g)),a[uS(n,c,s,d)]=!0,e.borderSkipped=a}function uS(e,t,r,i){return i?(e=D9(e,t,r),e=hS(e,r,t)):e=hS(e,t,r),e}function D9(e,t,r){return e===t?r:e===r?t:e}function hS(e,t,r){return e==="start"?t:e==="end"?r:e}function R9(e,{inflateAmount:t},r){e.inflateAmount=t==="auto"?r===1?.33:0:t}class U9 extends v2{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,n){return cS(t,r,i,n)}parseArrayData(t,r,i,n){return cS(t,r,i,n)}parseObjectData(t,r,i,n){const{iScale:a,vScale:c}=t,{xAxisKey:s="x",yAxisKey:d="y"}=this._parsing,g=a.axis==="x"?s:d,x=c.axis==="x"?s:d,C=[];let N,B,M,I;for(N=i,B=i+n;N<B;++N)I=r[N],M={},M[a.axis]=a.parse(x0(I,g),N),C.push(x6(x0(I,x),M,c,N));return C}updateRangeFromParsed(t,r,i,n){super.updateRangeFromParsed(t,r,i,n);const a=i._custom;a&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:i,vScale:n}=r,a=this.getParsed(t),c=a._custom,s=Sb(c)?"["+c.start+", "+c.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,n){const a=n==="reset",{index:c,_cachedMeta:{vScale:s}}=this,d=s.getBasePixel(),g=s.isHorizontal(),x=this._getRuler(),{sharedOptions:C,includeOptions:N}=this._getSharedOptions(r,n);for(let B=r;B<r+i;B++){const M=this.getParsed(B),I=a||xs(M[s.axis])?{base:d,head:d}:this._calculateBarValuePixels(B),R=this._calculateBarIndexPixels(B,x),D=(M._stacks||{})[s.axis],V={horizontal:g,base:I.base,enableBorderRadius:!D||Sb(M._custom)||c===D._top||c===D._bottom,x:g?I.head:R.center,y:g?R.center:I.head,height:g?R.size:Math.abs(I.size),width:g?Math.abs(I.size):R.size};N&&(V.options=C||this.resolveDataElementOptions(B,t[B].active?"active":n));const G=V.options||t[B].options;P9(V,G,D,c),R9(V,G,x.ratio),this.updateElement(t[B],B,V,n)}}_getStacks(t,r){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(x=>x.controller.options.grouped),a=i.options.stacked,c=[],s=this._cachedMeta.controller.getParsed(r),d=s&&s[i.axis],g=x=>{const C=x._parsed.find(B=>B[i.axis]===d),N=C&&C[x.vScale.axis];if(xs(N)||isNaN(N))return!0};for(const x of n)if(!(r!==void 0&&g(x))&&((a===!1||c.indexOf(x.stack)===-1||a===void 0&&x.stack===void 0)&&c.push(x.stack),x.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Bn(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,i){const n=this._getStacks(t,i),a=r!==void 0?n.indexOf(r):-1;return a===-1?n.length-1:a}_getRuler(){const t=this.options,r=this._cachedMeta,i=r.iScale,n=[];let a,c;for(a=0,c=r.data.length;a<c;++a)n.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const s=t.barThickness;return{min:s||F9(r),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:i,index:n},options:{base:a,minBarLength:c}}=this,s=a||0,d=this.getParsed(t),g=d._custom,x=Sb(g);let C=d[r.axis],N=0,B=i?this.applyStack(r,d,i):C,M,I;B!==C&&(N=B-C,B=C),x&&(C=g.barStart,B=g.barEnd-g.barStart,C!==0&&Cf(C)!==Cf(g.barEnd)&&(N=0),N+=C);const R=!xs(a)&&!x?a:N;let D=r.getPixelForValue(R);if(this.chart.getDataVisibility(t)?M=r.getPixelForValue(N+B):M=D,I=M-D,Math.abs(I)<c){I=L9(I,r,s)*c,C===s&&(D-=I/2);const V=r.getPixelForDecimal(0),G=r.getPixelForDecimal(1),Z=Math.min(V,G),X=Math.max(V,G);D=Math.max(Math.min(D,X),Z),M=D+I,i&&!x&&(d._stacks[r.axis]._visualValues[n]=r.getValueForPixel(M)-r.getValueForPixel(D))}if(D===r.getPixelForValue(s)){const V=Cf(I)*r.getLineWidthForValue(s)/2;D+=V,I-=V}return{size:I,base:D,head:M,center:M+I/2}}_calculateBarIndexPixels(t,r){const i=r.scale,n=this.options,a=n.skipNull,c=Bn(n.maxBarThickness,1/0);let s,d;const g=this._getAxisCount();if(r.grouped){const x=a?this._getStackCount(t):r.stackCount,C=n.barThickness==="flex"?N9(t,r,n,x*g):k9(t,r,n,x*g),N=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,B=this._getAxis().indexOf(Bn(N,this.getFirstScaleIdForIndexAxis())),M=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0)+B;s=C.start+C.chunk*M+C.chunk/2,d=Math.min(c,C.chunk*C.ratio)}else s=i.getPixelForValue(this.getParsed(t)[i.axis],t),d=Math.min(c,r.min*r.ratio);return{base:s-d/2,head:s+d/2,center:s,size:d}}draw(){const t=this._cachedMeta,r=t.vScale,i=t.data,n=i.length;let a=0;for(;a<n;++a)this.getParsed(a)[r.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}function j9(e,t,r){let i=1,n=1,a=0,c=0;if(t<Ha){const s=e,d=s+t,g=Math.cos(s),x=Math.sin(s),C=Math.cos(d),N=Math.sin(d),B=(G,Z,X)=>gv(G,s,d,!0)?1:Math.max(Z,Z*r,X,X*r),M=(G,Z,X)=>gv(G,s,d,!0)?-1:Math.min(Z,Z*r,X,X*r),I=B(0,g,C),R=B(gl,x,N),D=M(Is,g,C),V=M(Is+gl,x,N);i=(I-D)/2,n=(R-V)/2,a=-(I+D)/2,c=-(R+V)/2}return{ratioX:i,ratioY:n,offsetX:a,offsetY:c}}class O9 extends v2{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:i,color:n}}=t.legend.options;return r.labels.map((a,c)=>{const d=t.getDatasetMeta(0).controller.getStyle(c);return{text:a,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:n,lineWidth:d.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const i=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=i;else{let a=d=>+i[d];if(jn(i[t])){const{key:d="value"}=this._parsing;a=g=>+x0(i[g],d)}let c,s;for(c=t,s=t+r;c<s;++c)n._parsed[c]=a(c)}}_getRotation(){return ld(this.options.rotation-90)}_getCircumference(){return ld(this.options.circumference)}_getRotationExtents(){let t=Ha,r=-Ha;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,a=n._getRotation(),c=n._getCircumference();t=Math.min(t,a),r=Math.max(r,a+c)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:i}=r,n=this._cachedMeta,a=n.data,c=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,s=Math.max((Math.min(i.width,i.height)-c)/2,0),d=Math.min(qO(this.options.cutout,s),1),g=this._getRingWeight(this.index),{circumference:x,rotation:C}=this._getRotationExtents(),{ratioX:N,ratioY:B,offsetX:M,offsetY:I}=j9(C,x,d),R=(i.width-c)/N,D=(i.height-c)/B,V=Math.max(Math.min(R,D)/2,0),G=$k(this.options.radius,V),Z=Math.max(G*d,0),X=(G-Z)/this._getVisibleDatasetWeightTotal();this.offsetX=M*G,this.offsetY=I*G,n.total=this.calculateTotal(),this.outerRadius=G-X*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-X*g,0),this.updateElements(a,0,a.length,t)}_circumference(t,r){const i=this.options,n=this._cachedMeta,a=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*a/Ha)}updateElements(t,r,i,n){const a=n==="reset",c=this.chart,s=c.chartArea,g=c.options.animation,x=(s.left+s.right)/2,C=(s.top+s.bottom)/2,N=a&&g.animateScale,B=N?0:this.innerRadius,M=N?0:this.outerRadius,{sharedOptions:I,includeOptions:R}=this._getSharedOptions(r,n);let D=this._getRotation(),V;for(V=0;V<r;++V)D+=this._circumference(V,a);for(V=r;V<r+i;++V){const G=this._circumference(V,a),Z=t[V],X={x:x+this.offsetX,y:C+this.offsetY,startAngle:D,endAngle:D+G,circumference:G,outerRadius:M,innerRadius:B};R&&(X.options=I||this.resolveDataElementOptions(V,Z.active?"active":n)),D+=G,this.updateElement(Z,V,X,n)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let i=0,n;for(n=0;n<r.length;n++){const a=t._parsed[n];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(n)&&!r[n].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?Ha*(Math.abs(t)/r):0}getLabelAndValue(t){const r=this._cachedMeta,i=this.chart,n=i.data.labels||[],a=D4(r._parsed[t],i.options.locale);return{label:n[t]||"",value:a}}getMaxBorderWidth(t){let r=0;const i=this.chart;let n,a,c,s,d;if(!t){for(n=0,a=i.data.datasets.length;n<a;++n)if(i.isDatasetVisible(n)){c=i.getDatasetMeta(n),t=c.data,s=c.controller;break}}if(!t)return 0;for(n=0,a=t.length;n<a;++n)d=s.resolveDataElementOptions(n),d.borderAlign!=="inner"&&(r=Math.max(r,d.borderWidth||0,d.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,n=t.length;i<n;++i){const a=this.resolveDataElementOptions(i);r=Math.max(r,a.offset||0,a.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(Bn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Q9 extends v2{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:i,data:n=[],_dataset:a}=r,c=this.chart._animationsDisabled;let{start:s,count:d}=A7(r,n,c);this._drawStart=s,this._drawCount=d,f7(r)&&(s=0,d=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=n;const g=this.resolveDatasetElementOptions(t);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:g},t),this.updateElements(n,s,d,t)}updateElements(t,r,i,n){const a=n==="reset",{iScale:c,vScale:s,_stacked:d,_dataset:g}=this._cachedMeta,{sharedOptions:x,includeOptions:C}=this._getSharedOptions(r,n),N=c.axis,B=s.axis,{spanGaps:M,segment:I}=this.options,R=mv(M)?M:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||a||n==="none",V=r+i,G=t.length;let Z=r>0&&this.getParsed(r-1);for(let X=0;X<G;++X){const le=t[X],ae=D?le:{};if(X<r||X>=V){ae.skip=!0;continue}const ce=this.getParsed(X),se=xs(ce[B]),ue=ae[N]=c.getPixelForValue(ce[N],X),re=ae[B]=a||se?s.getBasePixel():s.getPixelForValue(d?this.applyStack(s,ce,d):ce[B],X);ae.skip=isNaN(ue)||isNaN(re)||se,ae.stop=X>0&&Math.abs(ce[N]-Z[N])>R,I&&(ae.parsed=ce,ae.raw=g.data[X]),C&&(ae.options=x||this.resolveDataElementOptions(X,le.active?"active":n)),D||this.updateElement(le,X,ae,n),Z=ce}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,n=t.data||[];if(!n.length)return i;const a=n[0].size(this.resolveDataElementOptions(0)),c=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,a,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function Zp(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class H4{static override(t){Object.assign(H4.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Zp()}parse(){return Zp()}format(){return Zp()}add(){return Zp()}diff(){return Zp()}startOf(){return Zp()}endOf(){return Zp()}}var z9={_date:H4};function H9(e,t,r,i){const{controller:n,data:a,_sorted:c}=e,s=n._cachedMeta.iScale,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(s&&t===s.axis&&t!=="r"&&c&&a.length){const g=s._reversePixels?o7:a0;if(i){if(n._sharedOptions){const x=a[0],C=typeof x.getRange=="function"&&x.getRange(t);if(C){const N=g(a,t,r-C),B=g(a,t,r+C);return{lo:N.lo,hi:B.hi}}}}else{const x=g(a,t,r);if(d){const{vScale:C}=n._cachedMeta,{_parsed:N}=e,B=N.slice(0,x.lo+1).reverse().findIndex(I=>!xs(I[C.axis]));x.lo-=Math.max(0,B);const M=N.slice(x.hi).findIndex(I=>!xs(I[C.axis]));x.hi+=Math.max(0,M)}return x}}return{lo:0,hi:a.length-1}}function x2(e,t,r,i,n){const a=e.getSortedVisibleDatasetMetas(),c=r[t];for(let s=0,d=a.length;s<d;++s){const{index:g,data:x}=a[s],{lo:C,hi:N}=H9(a[s],t,c,n);for(let B=C;B<=N;++B){const M=x[B];M.skip||i(M,g,B)}}}function V9(e){const t=e.indexOf("x")!==-1,r=e.indexOf("y")!==-1;return function(i,n){const a=t?Math.abs(i.x-n.x):0,c=r?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(c,2))}}function Eb(e,t,r,i,n){const a=[];return!n&&!e.isPointInArea(t)||x2(e,r,t,function(s,d,g){!n&&!vv(s,e.chartArea,0)||s.inRange(t.x,t.y,i)&&a.push({element:s,datasetIndex:d,index:g})},!0),a}function G9(e,t,r,i){let n=[];function a(c,s,d){const{startAngle:g,endAngle:x}=c.getProps(["startAngle","endAngle"],i),{angle:C}=Yk(c,{x:t.x,y:t.y});gv(C,g,x)&&n.push({element:c,datasetIndex:s,index:d})}return x2(e,r,t,a),n}function q9(e,t,r,i,n,a){let c=[];const s=V9(r);let d=Number.POSITIVE_INFINITY;function g(x,C,N){const B=x.inRange(t.x,t.y,n);if(i&&!B)return;const M=x.getCenterPoint(n);if(!(!!a||e.isPointInArea(M))&&!B)return;const R=s(t,M);R<d?(c=[{element:x,datasetIndex:C,index:N}],d=R):R===d&&c.push({element:x,datasetIndex:C,index:N})}return x2(e,r,t,g),c}function Tb(e,t,r,i,n,a){return!a&&!e.isPointInArea(t)?[]:r==="r"&&!i?G9(e,t,r,n):q9(e,t,r,i,n,a)}function AS(e,t,r,i,n){const a=[],c=r==="x"?"inXRange":"inYRange";let s=!1;return x2(e,r,t,(d,g,x)=>{d[c]&&d[c](t[r],n)&&(a.push({element:d,datasetIndex:g,index:x}),s=s||d.inRange(t.x,t.y,n))}),i&&!s?[]:a}var K9={modes:{index(e,t,r,i){const n=Jp(t,e),a=r.axis||"x",c=r.includeInvisible||!1,s=r.intersect?Eb(e,n,a,i,c):Tb(e,n,a,!1,i,c),d=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach(g=>{const x=s[0].index,C=g.data[x];C&&!C.skip&&d.push({element:C,datasetIndex:g.index,index:x})}),d):[]},dataset(e,t,r,i){const n=Jp(t,e),a=r.axis||"xy",c=r.includeInvisible||!1;let s=r.intersect?Eb(e,n,a,i,c):Tb(e,n,a,!1,i,c);if(s.length>0){const d=s[0].datasetIndex,g=e.getDatasetMeta(d).data;s=[];for(let x=0;x<g.length;++x)s.push({element:g[x],datasetIndex:d,index:x})}return s},point(e,t,r,i){const n=Jp(t,e),a=r.axis||"xy",c=r.includeInvisible||!1;return Eb(e,n,a,i,c)},nearest(e,t,r,i){const n=Jp(t,e),a=r.axis||"xy",c=r.includeInvisible||!1;return Tb(e,n,a,r.intersect,i,c)},x(e,t,r,i){const n=Jp(t,e);return AS(e,n,"x",r.intersect,i)},y(e,t,r,i){const n=Jp(t,e);return AS(e,n,"y",r.intersect,i)}}};const y6=["left","top","right","bottom"];function p1(e,t){return e.filter(r=>r.pos===t)}function fS(e,t){return e.filter(r=>y6.indexOf(r.pos)===-1&&r.box.axis===t)}function m1(e,t){return e.sort((r,i)=>{const n=t?i:r,a=t?r:i;return n.weight===a.weight?n.index-a.index:n.weight-a.weight})}function W9(e){const t=[];let r,i,n,a,c,s;for(r=0,i=(e||[]).length;r<i;++r)n=e[r],{position:a,options:{stack:c,stackWeight:s=1}}=n,t.push({index:r,box:n,pos:a,horizontal:n.isHorizontal(),weight:n.weight,stack:c&&a+c,stackWeight:s});return t}function $9(e){const t={};for(const r of e){const{stack:i,pos:n,stackWeight:a}=r;if(!i||!y6.includes(n))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=a}return t}function X9(e,t){const r=$9(e),{vBoxMaxWidth:i,hBoxMaxHeight:n}=t;let a,c,s;for(a=0,c=e.length;a<c;++a){s=e[a];const{fullSize:d}=s.box,g=r[s.stack],x=g&&s.stackWeight/g.weight;s.horizontal?(s.width=x?x*i:d&&t.availableWidth,s.height=n):(s.width=i,s.height=x?x*n:d&&t.availableHeight)}return r}function Z9(e){const t=W9(e),r=m1(t.filter(g=>g.box.fullSize),!0),i=m1(p1(t,"left"),!0),n=m1(p1(t,"right")),a=m1(p1(t,"top"),!0),c=m1(p1(t,"bottom")),s=fS(t,"x"),d=fS(t,"y");return{fullSize:r,leftAndTop:i.concat(a),rightAndBottom:n.concat(d).concat(c).concat(s),chartArea:p1(t,"chartArea"),vertical:i.concat(n).concat(d),horizontal:a.concat(c).concat(s)}}function dS(e,t,r,i){return Math.max(e[r],t[r])+Math.max(e[i],t[i])}function _6(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Y9(e,t,r,i){const{pos:n,box:a}=r,c=e.maxPadding;if(!jn(n)){r.size&&(e[n]-=r.size);const C=i[r.stack]||{size:0,count:1};C.size=Math.max(C.size,r.horizontal?a.height:a.width),r.size=C.size/C.count,e[n]+=r.size}a.getPadding&&_6(c,a.getPadding());const s=Math.max(0,t.outerWidth-dS(c,e,"left","right")),d=Math.max(0,t.outerHeight-dS(c,e,"top","bottom")),g=s!==e.w,x=d!==e.h;return e.w=s,e.h=d,r.horizontal?{same:g,other:x}:{same:x,other:g}}function J9(e){const t=e.maxPadding;function r(i){const n=Math.max(t[i]-e[i],0);return e[i]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}function eQ(e,t){const r=t.maxPadding;function i(n){const a={left:0,top:0,right:0,bottom:0};return n.forEach(c=>{a[c]=Math.max(t[c],r[c])}),a}return i(e?["left","right"]:["top","bottom"])}function k1(e,t,r,i){const n=[];let a,c,s,d,g,x;for(a=0,c=e.length,g=0;a<c;++a){s=e[a],d=s.box,d.update(s.width||t.w,s.height||t.h,eQ(s.horizontal,t));const{same:C,other:N}=Y9(t,r,s,i);g|=C&&n.length,x=x||N,d.fullSize||n.push(s)}return g&&k1(n,t,r,i)||x}function ty(e,t,r,i,n){e.top=r,e.left=t,e.right=t+i,e.bottom=r+n,e.width=i,e.height=n}function pS(e,t,r,i){const n=r.padding;let{x:a,y:c}=t;for(const s of e){const d=s.box,g=i[s.stack]||{placed:0,weight:1},x=s.stackWeight/g.weight||1;if(s.horizontal){const C=t.w*x,N=g.size||d.height;pv(g.start)&&(c=g.start),d.fullSize?ty(d,n.left,c,r.outerWidth-n.right-n.left,N):ty(d,t.left+g.placed,c,C,N),g.start=c,g.placed+=C,c=d.bottom}else{const C=t.h*x,N=g.size||d.width;pv(g.start)&&(a=g.start),d.fullSize?ty(d,a,n.top,N,r.outerHeight-n.bottom-n.top):ty(d,a,t.top+g.placed,N,C),g.start=a,g.placed+=C,a=d.right}}t.x=a,t.y=c}var tA={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;r!==-1&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,i){if(!e)return;const n=sA(e.options.layout.padding),a=Math.max(t-n.width,0),c=Math.max(r-n.height,0),s=Z9(e.boxes),d=s.vertical,g=s.horizontal;ks(e.boxes,I=>{typeof I.beforeLayout=="function"&&I.beforeLayout()});const x=d.reduce((I,R)=>R.box.options&&R.box.options.display===!1?I:I+1,0)||1,C=Object.freeze({outerWidth:t,outerHeight:r,padding:n,availableWidth:a,availableHeight:c,vBoxMaxWidth:a/2/x,hBoxMaxHeight:c/2}),N=Object.assign({},n);_6(N,sA(i));const B=Object.assign({maxPadding:N,w:a,h:c,x:n.left,y:n.top},n),M=X9(d.concat(g),C);k1(s.fullSize,B,C,M),k1(d,B,C,M),k1(g,B,C,M)&&k1(d,B,C,M),J9(B),pS(s.leftAndTop,B,C,M),B.x+=B.w,B.y+=B.h,pS(s.rightAndBottom,B,C,M),e.chartArea={left:B.left,top:B.top,right:B.left+B.w,bottom:B.top+B.h,height:B.h,width:B.w},ks(s.chartArea,I=>{const R=I.box;Object.assign(R,e.chartArea),R.update(B.w,B.h,{left:0,top:0,right:0,bottom:0})})}};class b6{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,i){}removeEventListener(t,r,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,i,n){return r=Math.max(0,r||t.width),i=i||t.height,{width:r,height:Math.max(0,n?Math.floor(r/n):i)}}isAttached(t){return!0}updateConfig(t){}}class tQ extends b6{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const s_="$chartjs",rQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mS=e=>e===null||e==="";function iQ(e,t){const r=e.style,i=e.getAttribute("height"),n=e.getAttribute("width");if(e[s_]={initial:{height:i,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",mS(n)){const a=JC(e,"width");a!==void 0&&(e.width=a)}if(mS(i))if(e.style.height==="")e.height=e.width/(t||2);else{const a=JC(e,"height");a!==void 0&&(e.height=a)}return e}const w6=r9?{passive:!0}:!1;function nQ(e,t,r){e&&e.addEventListener(t,r,w6)}function sQ(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,w6)}function aQ(e,t){const r=rQ[e.type]||e.type,{x:i,y:n}=Jp(e,t);return{type:r,chart:t,native:e,x:i!==void 0?i:null,y:n!==void 0?n:null}}function E_(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function oQ(e,t,r){const i=e.canvas,n=new MutationObserver(a=>{let c=!1;for(const s of a)c=c||E_(s.addedNodes,i),c=c&&!E_(s.removedNodes,i);c&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}function lQ(e,t,r){const i=e.canvas,n=new MutationObserver(a=>{let c=!1;for(const s of a)c=c||E_(s.removedNodes,i),c=c&&!E_(s.addedNodes,i);c&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}const yv=new Map;let gS=0;function B6(){const e=window.devicePixelRatio;e!==gS&&(gS=e,yv.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function cQ(e,t){yv.size||window.addEventListener("resize",B6),yv.set(e,t)}function uQ(e){yv.delete(e),yv.size||window.removeEventListener("resize",B6)}function hQ(e,t,r){const i=e.canvas,n=i&&z4(i);if(!n)return;const a=r6((s,d)=>{const g=n.clientWidth;r(s,d),g<n.clientWidth&&r()},window),c=new ResizeObserver(s=>{const d=s[0],g=d.contentRect.width,x=d.contentRect.height;g===0&&x===0||a(g,x)});return c.observe(n),cQ(e,a),c}function Fb(e,t,r){r&&r.disconnect(),t==="resize"&&uQ(e)}function AQ(e,t,r){const i=e.canvas,n=r6(a=>{e.ctx!==null&&r(aQ(a,e))},e);return nQ(i,t,n),n}class fQ extends b6{acquireContext(t,r){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(iQ(t,r),i):null}releaseContext(t){const r=t.canvas;if(!r[s_])return!1;const i=r[s_].initial;["height","width"].forEach(a=>{const c=i[a];xs(c)?r.removeAttribute(a):r.setAttribute(a,c)});const n=i.style||{};return Object.keys(n).forEach(a=>{r.style[a]=n[a]}),r.width=r.width,delete r[s_],!0}addEventListener(t,r,i){this.removeEventListener(t,r);const n=t.$proxies||(t.$proxies={}),c={attach:oQ,detach:lQ,resize:hQ}[r]||AQ;n[r]=c(t,r,i)}removeEventListener(t,r){const i=t.$proxies||(t.$proxies={}),n=i[r];if(!n)return;({attach:Fb,detach:Fb,resize:Fb}[r]||sQ)(t,r,n),i[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,i,n){return t9(t,r,i,n)}isAttached(t){const r=t&&z4(t);return!!(r&&r.isConnected)}}function dQ(e){return!Q4()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?tQ:fQ}class bd{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}hasValue(){return mv(this.x)&&mv(this.y)}getProps(t,r){const i=this.$animations;if(!r||!i)return this;const n={};return t.forEach(a=>{n[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),n}}function pQ(e,t){const r=e.options.ticks,i=mQ(e),n=Math.min(r.maxTicksLimit||i,i),a=r.major.enabled?vQ(t):[],c=a.length,s=a[0],d=a[c-1],g=[];if(c>n)return xQ(t,g,a,c/n),g;const x=gQ(a,t,n);if(c>0){let C,N;const B=c>1?Math.round((d-s)/(c-1)):null;for(ry(t,g,x,xs(B)?0:s-B,s),C=0,N=c-1;C<N;C++)ry(t,g,x,a[C],a[C+1]);return ry(t,g,x,d,xs(B)?t.length:d+B),g}return ry(t,g,x),g}function mQ(e){const t=e.options.offset,r=e._tickSize(),i=e._length/r+(t?0:1),n=e._maxLength/r;return Math.floor(Math.min(i,n))}function gQ(e,t,r){const i=yQ(e),n=t.length/r;if(!i)return Math.max(n,1);const a=e7(i);for(let c=0,s=a.length-1;c<s;c++){const d=a[c];if(d>n)return d}return Math.max(n,1)}function vQ(e){const t=[];let r,i;for(r=0,i=e.length;r<i;r++)e[r].major&&t.push(r);return t}function xQ(e,t,r,i){let n=0,a=r[0],c;for(i=Math.ceil(i),c=0;c<e.length;c++)c===a&&(t.push(e[c]),n++,a=r[n*i])}function ry(e,t,r,i,n){const a=Bn(i,0),c=Math.min(Bn(n,e.length),e.length);let s=0,d,g,x;for(r=Math.ceil(r),n&&(d=n-i,r=d/Math.floor(d/r)),x=a;x<0;)s++,x=Math.round(a+s*r);for(g=Math.max(a,0);g<c;g++)g===x&&(t.push(e[g]),s++,x=Math.round(a+s*r))}function yQ(e){const t=e.length;let r,i;if(t<2)return!1;for(i=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==i)return!1;return i}const _Q=e=>e==="left"?"right":e==="right"?"left":e,vS=(e,t,r)=>t==="top"||t==="left"?e[t]+r:e[t]-r,xS=(e,t)=>Math.min(t||e,e);function yS(e,t){const r=[],i=e.length/t,n=e.length;let a=0;for(;a<n;a+=i)r.push(e[Math.floor(a)]);return r}function bQ(e,t,r){const i=e.ticks.length,n=Math.min(t,i-1),a=e._startPixel,c=e._endPixel,s=1e-6;let d=e.getPixelForTick(n),g;if(!(r&&(i===1?g=Math.max(d-a,c-d):t===0?g=(e.getPixelForTick(1)-d)/2:g=(d-e.getPixelForTick(n-1))/2,d+=n<t?g:-g,d<a-s||d>c+s)))return d}function wQ(e,t){ks(e,r=>{const i=r.gc,n=i.length/2;let a;if(n>t){for(a=0;a<n;++a)delete r.data[i[a]];i.splice(0,n)}})}function g1(e){return e.drawTicks?e.tickLength:0}function _S(e,t){if(!e.display)return 0;const r=Zc(e.font,t),i=sA(e.padding);return(Wo(e.text)?e.text.length:1)*r.lineHeight+i.height}function BQ(e,t){return S0(e,{scale:t,type:"scale"})}function CQ(e,t,r){return S0(e,{tick:r,index:t,type:"tick"})}function SQ(e,t,r){let i=M4(e);return(r&&t!=="right"||!r&&t==="right")&&(i=_Q(i)),i}function EQ(e,t,r,i){const{top:n,left:a,bottom:c,right:s,chart:d}=e,{chartArea:g,scales:x}=d;let C=0,N,B,M;const I=c-n,R=s-a;if(e.isHorizontal()){if(B=Gc(i,a,s),jn(r)){const D=Object.keys(r)[0],V=r[D];M=x[D].getPixelForValue(V)+I-t}else r==="center"?M=(g.bottom+g.top)/2+I-t:M=vS(e,r,t);N=s-a}else{if(jn(r)){const D=Object.keys(r)[0],V=r[D];B=x[D].getPixelForValue(V)-R+t}else r==="center"?B=(g.left+g.right)/2-R+t:B=vS(e,r,t);M=Gc(i,c,n),C=r==="left"?-gl:gl}return{titleX:B,titleY:M,maxWidth:N,rotation:C}}class dg extends bd{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:i,_suggestedMax:n}=this;return t=df(t,Number.POSITIVE_INFINITY),r=df(r,Number.NEGATIVE_INFINITY),i=df(i,Number.POSITIVE_INFINITY),n=df(n,Number.NEGATIVE_INFINITY),{min:df(t,i),max:df(r,n),minDefined:eu(t),maxDefined:eu(r)}}getMinMax(t){let{min:r,max:i,minDefined:n,maxDefined:a}=this.getUserBounds(),c;if(n&&a)return{min:r,max:i};const s=this.getMatchingVisibleMetas();for(let d=0,g=s.length;d<g;++d)c=s[d].controller.getMinMax(this,t),n||(r=Math.min(r,c.min)),a||(i=Math.max(i,c.max));return r=a&&r>i?i:r,i=n&&r>i?r:i,{min:df(r,df(i,r)),max:df(i,df(r,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ga(this.options.beforeUpdate,[this])}update(t,r,i){const{beginAtZero:n,grace:a,ticks:c}=this.options,s=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=L7(this,a,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=s<this.ticks.length;this._convertTicksToLabels(d?yS(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=pQ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,i;this.isHorizontal()?(r=this.left,i=this.right):(r=this.top,i=this.bottom,t=!t),this._startPixel=r,this._endPixel=i,this._reversePixels=t,this._length=i-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ga(this.options.afterUpdate,[this])}beforeSetDimensions(){ga(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ga(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ga(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ga(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let i,n,a;for(i=0,n=t.length;i<n;i++)a=t[i],a.label=ga(r.callback,[a.value,i,t],this)}afterTickToLabelConversion(){ga(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ga(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,i=xS(this.ticks.length,t.ticks.maxTicksLimit),n=r.minRotation||0,a=r.maxRotation;let c=n,s,d,g;if(!this._isVisible()||!r.display||n>=a||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const x=this._getLabelSizes(),C=x.widest.width,N=x.highest.height,B=Xc(this.chart.width-C,0,this.maxWidth);s=t.offset?this.maxWidth/i:B/(i-1),C+6>s&&(s=B/(i-(t.offset?.5:1)),d=this.maxHeight-g1(t.grid)-r.padding-_S(t.title,this.chart.options.font),g=Math.sqrt(C*C+N*N),c=n7(Math.min(Math.asin(Xc((x.highest.height+6)/s,-1,1)),Math.asin(Xc(d/g,-1,1))-Math.asin(Xc(N/g,-1,1)))),c=Math.max(n,Math.min(a,c))),this.labelRotation=c}afterCalculateLabelRotation(){ga(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ga(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:i,title:n,grid:a}}=this,c=this._isVisible(),s=this.isHorizontal();if(c){const d=_S(n,r.options.font);if(s?(t.width=this.maxWidth,t.height=g1(a)+d):(t.height=this.maxHeight,t.width=g1(a)+d),i.display&&this.ticks.length){const{first:g,last:x,widest:C,highest:N}=this._getLabelSizes(),B=i.padding*2,M=ld(this.labelRotation),I=Math.cos(M),R=Math.sin(M);if(s){const D=i.mirror?0:R*C.width+I*N.height;t.height=Math.min(this.maxHeight,t.height+D+B)}else{const D=i.mirror?0:I*C.width+R*N.height;t.width=Math.min(this.maxWidth,t.width+D+B)}this._calculatePadding(g,x,R,I)}}this._handleMargins(),s?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,i,n){const{ticks:{align:a,padding:c},position:s}=this.options,d=this.labelRotation!==0,g=s!=="top"&&this.axis==="x";if(this.isHorizontal()){const x=this.getPixelForTick(0)-this.left,C=this.right-this.getPixelForTick(this.ticks.length-1);let N=0,B=0;d?g?(N=n*t.width,B=i*r.height):(N=i*t.height,B=n*r.width):a==="start"?B=r.width:a==="end"?N=t.width:a!=="inner"&&(N=t.width/2,B=r.width/2),this.paddingLeft=Math.max((N-x+c)*this.width/(this.width-x),0),this.paddingRight=Math.max((B-C+c)*this.width/(this.width-C),0)}else{let x=r.height/2,C=t.height/2;a==="start"?(x=0,C=t.height):a==="end"&&(x=r.height,C=0),this.paddingTop=x+c,this.paddingBottom=C+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ga(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,i;for(r=0,i=t.length;r<i;r++)xs(t[r].label)&&(t.splice(r,1),i--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let i=this.ticks;r<i.length&&(i=yS(i,r)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,i){const{ctx:n,_longestTextCache:a}=this,c=[],s=[],d=Math.floor(r/xS(r,i));let g=0,x=0,C,N,B,M,I,R,D,V,G,Z,X;for(C=0;C<r;C+=d){if(M=t[C].label,I=this._resolveTickFontOptions(C),n.font=R=I.string,D=a[R]=a[R]||{data:{},gc:[]},V=I.lineHeight,G=Z=0,!xs(M)&&!Wo(M))G=WC(n,D.data,D.gc,G,M),Z=V;else if(Wo(M))for(N=0,B=M.length;N<B;++N)X=M[N],!xs(X)&&!Wo(X)&&(G=WC(n,D.data,D.gc,G,X),Z+=V);c.push(G),s.push(Z),g=Math.max(G,g),x=Math.max(Z,x)}wQ(a,r);const le=c.indexOf(g),ae=s.indexOf(x),ce=se=>({width:c[se]||0,height:s[se]||0});return{first:ce(0),last:ce(r-1),widest:ce(le),highest:ce(ae),widths:c,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return a7(this._alignToPixels?Xp(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const i=r[t];return i.$context||(i.$context=CQ(this.getContext(),t,i))}return this.$context||(this.$context=BQ(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=ld(this.labelRotation),i=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),a=this._getLabelSizes(),c=t.autoSkipPadding||0,s=a?a.widest.width+c:0,d=a?a.highest.height+c:0;return this.isHorizontal()?d*i>s*n?s/i:d/n:d*n<s*i?d/i:s/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,i=this.chart,n=this.options,{grid:a,position:c,border:s}=n,d=a.offset,g=this.isHorizontal(),C=this.ticks.length+(d?1:0),N=g1(a),B=[],M=s.setContext(this.getContext()),I=M.display?M.width:0,R=I/2,D=function(ge){return Xp(i,ge,I)};let V,G,Z,X,le,ae,ce,se,ue,re,W,de;if(c==="top")V=D(this.bottom),ae=this.bottom-N,se=V-R,re=D(t.top)+R,de=t.bottom;else if(c==="bottom")V=D(this.top),re=t.top,de=D(t.bottom)-R,ae=V+R,se=this.top+N;else if(c==="left")V=D(this.right),le=this.right-N,ce=V-R,ue=D(t.left)+R,W=t.right;else if(c==="right")V=D(this.left),ue=t.left,W=D(t.right)-R,le=V+R,ce=this.left+N;else if(r==="x"){if(c==="center")V=D((t.top+t.bottom)/2+.5);else if(jn(c)){const ge=Object.keys(c)[0],Pe=c[ge];V=D(this.chart.scales[ge].getPixelForValue(Pe))}re=t.top,de=t.bottom,ae=V+R,se=ae+N}else if(r==="y"){if(c==="center")V=D((t.left+t.right)/2);else if(jn(c)){const ge=Object.keys(c)[0],Pe=c[ge];V=D(this.chart.scales[ge].getPixelForValue(Pe))}le=V-R,ce=le-N,ue=t.left,W=t.right}const Ee=Bn(n.ticks.maxTicksLimit,C),Ne=Math.max(1,Math.ceil(C/Ee));for(G=0;G<C;G+=Ne){const ge=this.getContext(G),Pe=a.setContext(ge),Ye=s.setContext(ge),Me=Pe.lineWidth,De=Pe.color,tt=Ye.dash||[],ee=Ye.dashOffset,fe=Pe.tickWidth,pe=Pe.tickColor,we=Pe.tickBorderDash||[],Le=Pe.tickBorderDashOffset;Z=bQ(this,G,d),Z!==void 0&&(X=Xp(i,Z,Me),g?le=ce=ue=W=X:ae=se=re=de=X,B.push({tx1:le,ty1:ae,tx2:ce,ty2:se,x1:ue,y1:re,x2:W,y2:de,width:Me,color:De,borderDash:tt,borderDashOffset:ee,tickWidth:fe,tickColor:pe,tickBorderDash:we,tickBorderDashOffset:Le}))}return this._ticksLength=C,this._borderValue=V,B}_computeLabelItems(t){const r=this.axis,i=this.options,{position:n,ticks:a}=i,c=this.isHorizontal(),s=this.ticks,{align:d,crossAlign:g,padding:x,mirror:C}=a,N=g1(i.grid),B=N+x,M=C?-x:B,I=-ld(this.labelRotation),R=[];let D,V,G,Z,X,le,ae,ce,se,ue,re,W,de="middle";if(n==="top")le=this.bottom-M,ae=this._getXAxisLabelAlignment();else if(n==="bottom")le=this.top+M,ae=this._getXAxisLabelAlignment();else if(n==="left"){const Ne=this._getYAxisLabelAlignment(N);ae=Ne.textAlign,X=Ne.x}else if(n==="right"){const Ne=this._getYAxisLabelAlignment(N);ae=Ne.textAlign,X=Ne.x}else if(r==="x"){if(n==="center")le=(t.top+t.bottom)/2+B;else if(jn(n)){const Ne=Object.keys(n)[0],ge=n[Ne];le=this.chart.scales[Ne].getPixelForValue(ge)+B}ae=this._getXAxisLabelAlignment()}else if(r==="y"){if(n==="center")X=(t.left+t.right)/2-B;else if(jn(n)){const Ne=Object.keys(n)[0],ge=n[Ne];X=this.chart.scales[Ne].getPixelForValue(ge)}ae=this._getYAxisLabelAlignment(N).textAlign}r==="y"&&(d==="start"?de="top":d==="end"&&(de="bottom"));const Ee=this._getLabelSizes();for(D=0,V=s.length;D<V;++D){G=s[D],Z=G.label;const Ne=a.setContext(this.getContext(D));ce=this.getPixelForTick(D)+a.labelOffset,se=this._resolveTickFontOptions(D),ue=se.lineHeight,re=Wo(Z)?Z.length:1;const ge=re/2,Pe=Ne.color,Ye=Ne.textStrokeColor,Me=Ne.textStrokeWidth;let De=ae;c?(X=ce,ae==="inner"&&(D===V-1?De=this.options.reverse?"left":"right":D===0?De=this.options.reverse?"right":"left":De="center"),n==="top"?g==="near"||I!==0?W=-re*ue+ue/2:g==="center"?W=-Ee.highest.height/2-ge*ue+ue:W=-Ee.highest.height+ue/2:g==="near"||I!==0?W=ue/2:g==="center"?W=Ee.highest.height/2-ge*ue:W=Ee.highest.height-re*ue,C&&(W*=-1),I!==0&&!Ne.showLabelBackdrop&&(X+=ue/2*Math.sin(I))):(le=ce,W=(1-re)*ue/2);let tt;if(Ne.showLabelBackdrop){const ee=sA(Ne.backdropPadding),fe=Ee.heights[D],pe=Ee.widths[D];let we=W-ee.top,Le=0-ee.left;switch(de){case"middle":we-=fe/2;break;case"bottom":we-=fe;break}switch(ae){case"center":Le-=pe/2;break;case"right":Le-=pe;break;case"inner":D===V-1?Le-=pe:D>0&&(Le-=pe/2);break}tt={left:Le,top:we,width:pe+ee.width,height:fe+ee.height,color:Ne.backdropColor}}R.push({label:Z,font:se,textOffset:W,options:{rotation:I,color:Pe,strokeColor:Ye,strokeWidth:Me,textAlign:De,textBaseline:de,translation:[X,le],backdrop:tt}})}return R}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-ld(this.labelRotation))return t==="top"?"left":"right";let n="center";return r.align==="start"?n="left":r.align==="end"?n="right":r.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:i,mirror:n,padding:a}}=this.options,c=this._getLabelSizes(),s=t+a,d=c.widest.width;let g,x;return r==="left"?n?(x=this.right+a,i==="near"?g="left":i==="center"?(g="center",x+=d/2):(g="right",x+=d)):(x=this.right-s,i==="near"?g="right":i==="center"?(g="center",x-=d/2):(g="left",x=this.left)):r==="right"?n?(x=this.left+a,i==="near"?g="right":i==="center"?(g="center",x-=d/2):(g="left",x-=d)):(x=this.left+s,i==="near"?g="left":i==="center"?(g="center",x+=d/2):(g="right",x=this.right)):g="right",{textAlign:g,x}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:i,top:n,width:a,height:c}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(i,n,a,c),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const n=this.ticks.findIndex(a=>a.value===t);return n>=0?r.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const r=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,c;const s=(d,g,x)=>{!x.width||!x.color||(i.save(),i.lineWidth=x.width,i.strokeStyle=x.color,i.setLineDash(x.borderDash||[]),i.lineDashOffset=x.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(g.x,g.y),i.stroke(),i.restore())};if(r.display)for(a=0,c=n.length;a<c;++a){const d=n[a];r.drawOnChartArea&&s({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),r.drawTicks&&s({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:i,grid:n}}=this,a=i.setContext(this.getContext()),c=i.display?a.width:0;if(!c)return;const s=n.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let g,x,C,N;this.isHorizontal()?(g=Xp(t,this.left,c)-c/2,x=Xp(t,this.right,s)+s/2,C=N=d):(C=Xp(t,this.top,c)-c/2,N=Xp(t,this.bottom,s)+s/2,g=x=d),r.save(),r.lineWidth=a.width,r.strokeStyle=a.color,r.beginPath(),r.moveTo(g,C),r.lineTo(x,N),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&p2(i,n);const a=this.getLabelItems(t);for(const c of a){const s=c.options,d=c.font,g=c.label,x=c.textOffset;xv(i,g,0,x,d,s)}n&&m2(i)}drawTitle(){const{ctx:t,options:{position:r,title:i,reverse:n}}=this;if(!i.display)return;const a=Zc(i.font),c=sA(i.padding),s=i.align;let d=a.lineHeight/2;r==="bottom"||r==="center"||jn(r)?(d+=c.bottom,Wo(i.text)&&(d+=a.lineHeight*(i.text.length-1))):d+=c.top;const{titleX:g,titleY:x,maxWidth:C,rotation:N}=EQ(this,d,r,s);xv(t,i.text,0,0,a,{color:i.color,maxWidth:C,rotation:N,textAlign:SQ(s,r,n),textBaseline:"middle",translation:[g,x]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,i=Bn(t.grid&&t.grid.z,-1),n=Bn(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==dg.prototype.draw?[{z:r,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:r,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let a,c;for(a=0,c=r.length;a<c;++a){const s=r[a];s[i]===this.id&&(!t||s.type===t)&&n.push(s)}return n}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return Zc(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class iy{constructor(t,r,i){this.type=t,this.scope=r,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let i;kQ(r)&&(i=this.register(r));const n=this.items,a=t.id,c=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in n||(n[a]=t,TQ(t,c,i),this.override&&To.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const r=this.items,i=t.id,n=this.scope;i in r&&delete r[i],n&&i in To[n]&&(delete To[n][i],this.override&&delete y0[i])}}function TQ(e,t,r){const i=dv(Object.create(null),[r?To.get(r):{},To.get(t),e.defaults]);To.set(t,i),e.defaultRoutes&&FQ(t,e.defaultRoutes),e.descriptors&&To.describe(t,e.descriptors)}function FQ(e,t){Object.keys(t).forEach(r=>{const i=r.split("."),n=i.pop(),a=[e].concat(i).join("."),c=t[r].split("."),s=c.pop(),d=c.join(".");To.route(a,n,d,s)})}function kQ(e){return"id"in e&&"defaults"in e}class NQ{constructor(){this.controllers=new iy(v2,"datasets",!0),this.elements=new iy(bd,"elements"),this.plugins=new iy(Object,"plugins"),this.scales=new iy(dg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,i){[...r].forEach(n=>{const a=i||this._getRegistryForType(n);i||a.isForType(n)||a===this.plugins&&n.id?this._exec(t,a,n):ks(n,c=>{const s=i||this._getRegistryForType(c);this._exec(t,s,c)})})}_exec(t,r,i){const n=I4(t);ga(i["before"+n],[],i),r[t](i),ga(i["after"+n],[],i)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const i=this._typedRegistries[r];if(i.isForType(t))return i}return this.plugins}_get(t,r,i){const n=r.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return n}}var _f=new NQ;class IQ{constructor(){this._init=[]}notify(t,r,i,n){r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const a=n?this._descriptors(t).filter(n):this._descriptors(t),c=this._notify(a,t,r,i);return r==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,r,i,n){n=n||{};for(const a of t){const c=a.plugin,s=c[i],d=[r,n,a.options];if(ga(s,d,c)===!1&&n.cancelable)return!1}return!0}invalidate(){xs(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const i=t&&t.config,n=Bn(i.options&&i.options.plugins,{}),a=LQ(i);return n===!1&&!r?[]:PQ(t,a,n,r)}_notifyStateChanges(t){const r=this._oldCache||[],i=this._cache,n=(a,c)=>a.filter(s=>!c.some(d=>s.plugin.id===d.plugin.id));this._notify(n(r,i),t,"stop"),this._notify(n(i,r),t,"start")}}function LQ(e){const t={},r=[],i=Object.keys(_f.plugins.items);for(let a=0;a<i.length;a++)r.push(_f.getPlugin(i[a]));const n=e.plugins||[];for(let a=0;a<n.length;a++){const c=n[a];r.indexOf(c)===-1&&(r.push(c),t[c.id]=!0)}return{plugins:r,localIds:t}}function MQ(e,t){return!t&&e===!1?null:e===!0?{}:e}function PQ(e,{plugins:t,localIds:r},i,n){const a=[],c=e.getContext();for(const s of t){const d=s.id,g=MQ(i[d],n);g!==null&&a.push({plugin:s,options:DQ(e.config,{plugin:s,local:r[d]},g,c)})}return a}function DQ(e,{plugin:t,local:r},i,n){const a=e.pluginScopeKeys(t),c=e.getOptionScopes(i,a);return r&&t.defaults&&c.push(t.defaults),e.createResolver(c,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function h5(e,t){const r=To.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function RQ(e,t){let r=e;return e==="_index_"?r=t:e==="_value_"&&(r=t==="x"?"y":"x"),r}function UQ(e,t){return e===t?"_index_":"_value_"}function bS(e){if(e==="x"||e==="y"||e==="r")return e}function jQ(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function A5(e,...t){if(bS(e))return e;for(const r of t){const i=r.axis||jQ(r.position)||e.length>1&&bS(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function wS(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function OQ(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(r.length)return wS(e,"x",r[0])||wS(e,"y",r[0])}return{}}function QQ(e,t){const r=y0[e.type]||{scales:{}},i=t.scales||{},n=h5(e.type,t),a=Object.create(null);return Object.keys(i).forEach(c=>{const s=i[c];if(!jn(s))return console.error(`Invalid scale configuration for scale: ${c}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const d=A5(c,s,OQ(c,e),To.scales[s.type]),g=UQ(d,n),x=r.scales||{};a[c]=H1(Object.create(null),[{axis:d},s,x[d],x[g]])}),e.data.datasets.forEach(c=>{const s=c.type||e.type,d=c.indexAxis||h5(s,t),x=(y0[s]||{}).scales||{};Object.keys(x).forEach(C=>{const N=RQ(C,d),B=c[N+"AxisID"]||N;a[B]=a[B]||Object.create(null),H1(a[B],[{axis:N},i[B],x[C]])})}),Object.keys(a).forEach(c=>{const s=a[c];H1(s,[To.scales[s.type],To.scale])}),a}function C6(e){const t=e.options||(e.options={});t.plugins=Bn(t.plugins,{}),t.scales=QQ(e,t)}function S6(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function zQ(e){return e=e||{},e.data=S6(e.data),C6(e),e}const BS=new Map,E6=new Set;function ny(e,t){let r=BS.get(e);return r||(r=t(),BS.set(e,r),E6.add(r)),r}const v1=(e,t,r)=>{const i=x0(t,r);i!==void 0&&e.add(i)};class HQ{constructor(t){this._config=zQ(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=S6(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),C6(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ny(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return ny(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return ny(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,i=this.type;return ny(`${i}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const i=this._scopeCache;let n=i.get(t);return(!n||r)&&(n=new Map,i.set(t,n)),n}getOptionScopes(t,r,i){const{options:n,type:a}=this,c=this._cachedScopes(t,i),s=c.get(r);if(s)return s;const d=new Set;r.forEach(x=>{t&&(d.add(t),x.forEach(C=>v1(d,t,C))),x.forEach(C=>v1(d,n,C)),x.forEach(C=>v1(d,y0[a]||{},C)),x.forEach(C=>v1(d,To,C)),x.forEach(C=>v1(d,c5,C))});const g=Array.from(d);return g.length===0&&g.push(Object.create(null)),E6.has(r)&&c.set(r,g),g}chartOptionScopes(){const{options:t,type:r}=this;return[t,y0[r]||{},To.datasets[r]||{},{type:r},To,c5]}resolveNamedOptions(t,r,i,n=[""]){const a={$shared:!0},{resolver:c,subPrefixes:s}=CS(this._resolverCache,t,n);let d=c;if(GQ(c,r)){a.$shared=!1,i=xp(i)?i():i;const g=this.createResolver(t,i,s);d=ig(c,i,g)}for(const g of r)a[g]=d[g];return a}createResolver(t,r,i=[""],n){const{resolver:a}=CS(this._resolverCache,t,i);return jn(r)?ig(a,r,void 0,n):a}}function CS(e,t,r){let i=e.get(t);i||(i=new Map,e.set(t,i));const n=r.join();let a=i.get(n);return a||(a={resolver:U4(t,r),subPrefixes:r.filter(s=>!s.toLowerCase().includes("hover"))},i.set(n,a)),a}const VQ=e=>jn(e)&&Object.getOwnPropertyNames(e).some(t=>xp(e[t]));function GQ(e,t){const{isScriptable:r,isIndexable:i}=a6(e);for(const n of t){const a=r(n),c=i(n),s=(c||a)&&e[n];if(a&&(xp(s)||VQ(s))||c&&Wo(s))return!0}return!1}var qQ="4.5.0";const KQ=["top","bottom","left","right","chartArea"];function SS(e,t){return e==="top"||e==="bottom"||KQ.indexOf(e)===-1&&t==="x"}function ES(e,t){return function(r,i){return r[e]===i[e]?r[t]-i[t]:r[e]-i[e]}}function TS(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),ga(r&&r.onComplete,[e],t)}function WQ(e){const t=e.chart,r=t.options.animation;ga(r&&r.onProgress,[e],t)}function T6(e){return Q4()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const a_={},FS=e=>{const t=T6(e);return Object.values(a_).filter(r=>r.canvas===t).pop()};function $Q(e,t,r){const i=Object.keys(e);for(const n of i){const a=+n;if(a>=t){const c=e[n];delete e[n],(r>0||a>t)&&(e[a+r]=c)}}}function XQ(e,t,r,i){return!r||e.type==="mouseout"?null:i?t:e}let pg=class{static defaults=To;static instances=a_;static overrides=y0;static registry=_f;static version=qQ;static getChart=FS;static register(...t){_f.add(...t),kS()}static unregister(...t){_f.remove(...t),kS()}constructor(t,r){const i=this.config=new HQ(r),n=T6(t),a=FS(n);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||dQ(n)),this.platform.updateConfig(i);const s=this.platform.acquireContext(n,c.aspectRatio),d=s&&s.canvas,g=d&&d.height,x=d&&d.width;if(this.id=GO(),this.ctx=s,this.canvas=d,this.width=x,this.height=g,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new IQ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=u7(C=>this.update(C),c.resizeDelay||0),this._dataChanges=[],a_[this.id]=this,!s||!d){console.error("Failed to create chart: can't acquire context from the given item");return}id.listen(this,"complete",TS),id.listen(this,"progress",WQ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:n,_aspectRatio:a}=this;return xs(t)?r&&a?a:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return _f}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():YC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $C(this.canvas,this.ctx),this}stop(){return id.stop(this),this}resize(t,r){id.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const i=this.options,n=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(n,t,r,a),s=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,YC(this,s,!0)&&(this.notifyPlugins("resize",{size:c}),ga(i.onResize,[this,c],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};ks(r,(i,n)=>{i.id=n})}buildOrUpdateScales(){const t=this.options,r=t.scales,i=this.scales,n=Object.keys(i).reduce((c,s)=>(c[s]=!1,c),{});let a=[];r&&(a=a.concat(Object.keys(r).map(c=>{const s=r[c],d=A5(c,s),g=d==="r",x=d==="x";return{options:s,dposition:g?"chartArea":x?"bottom":"left",dtype:g?"radialLinear":x?"category":"linear"}}))),ks(a,c=>{const s=c.options,d=s.id,g=A5(d,s),x=Bn(s.type,c.dtype);(s.position===void 0||SS(s.position,g)!==SS(c.dposition))&&(s.position=c.dposition),n[d]=!0;let C=null;if(d in i&&i[d].type===x)C=i[d];else{const N=_f.getScale(x);C=new N({id:d,type:x,ctx:this.ctx,chart:this}),i[C.id]=C}C.init(s,t)}),ks(n,(c,s)=>{c||delete i[s]}),ks(i,c=>{tA.configure(this,c,c.options),tA.addBox(this,c)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((n,a)=>n.index-a.index),i>r){for(let n=r;n<i;++n)this._destroyDatasetMeta(n);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(ES("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,n)=>{r.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=r.length;i<n;i++){const a=r[i];let c=this.getDatasetMeta(i);const s=a.type||this.config.type;if(c.type&&c.type!==s&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=s,c.indexAxis=a.indexAxis||h5(s,this.options),c.order=a.order||0,c.index=i,c.label=""+a.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const d=_f.getController(s),{datasetElementType:g,dataElementType:x}=To.datasets[s];Object.assign(d,{dataElementType:_f.getElement(x),datasetElementType:g&&_f.getElement(g)}),c.controller=new d(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){ks(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let g=0,x=this.data.datasets.length;g<x;g++){const{controller:C}=this.getDatasetMeta(g),N=!n&&a.indexOf(C)===-1;C.buildOrUpdateElements(N),c=Math.max(+C.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),n||ks(a,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ES("z","_idx"));const{_active:s,_lastEvent:d}=this;d?this._eventHandler(d,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){ks(this.scales,t=>{tA.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!jC(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:a}of r){const c=i==="_removeElements"?-a:a;$Q(t,n,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,i=a=>new Set(t.filter(c=>c[0]===a).map((c,s)=>s+","+c.splice(1).join(","))),n=i(0);for(let a=1;a<r;a++)if(!jC(n,i(a)))return;return Array.from(n).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;tA.update(this,this.width,this.height,t);const r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],ks(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,a)=>{n._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,xp(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(r),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(id.has(this)?this.attached&&!id.running(this)&&id.start(this):(this.draw(),TS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,i=[];let n,a;for(n=0,a=r.length;n<a;++n){const c=r[n];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,i={meta:t,index:t.index,cancelable:!0},n=m6(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(n&&p2(r,n),t.controller.draw(),n&&m2(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return vv(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,n){const a=K9.modes[r];return typeof a=="function"?a(this,t,i,n):[]}getDatasetMeta(t){const r=this.data.datasets[t],i=this._metasets;let n=i.filter(a=>a&&a._dataset===r).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=S0(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){const i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){const n=i?"show":"hide",a=this.getDatasetMeta(t),c=a.controller._resolveAnimations(void 0,n);pv(r)?(a.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(a,{visible:i}),this.update(s=>s.datasetIndex===t?n:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),id.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),$C(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete a_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,i=(a,c)=>{r.addEventListener(this,a,c),t[a]=c},n=(a,c,s)=>{a.offsetX=c,a.offsetY=s,this._eventHandler(a)};ks(this.options.events,a=>i(a,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,i=(d,g)=>{r.addEventListener(this,d,g),t[d]=g},n=(d,g)=>{t[d]&&(r.removeEventListener(this,d,g),delete t[d])},a=(d,g)=>{this.canvas&&this.resize(d,g)};let c;const s=()=>{n("attach",s),this.attached=!0,this.resize(),i("resize",a),i("detach",c)};c=()=>{this.attached=!1,n("resize",a),this._stop(),this._resize(0,0),i("attach",s)},r.isAttached(this.canvas)?s():c()}unbindEvents(){ks(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},ks(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){const n=i?"set":"remove";let a,c,s,d;for(r==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+n+"DatasetHoverStyle"]()),s=0,d=t.length;s<d;++s){c=t[s];const g=c&&this.getDatasetMeta(c.datasetIndex).controller;g&&g[n+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],i=t.map(({datasetIndex:a,index:c})=>{const s=this.getDatasetMeta(a);if(!s)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:s.data[c],index:c}});!b_(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){const n=this.options.hover,a=(d,g)=>d.filter(x=>!g.some(C=>x.datasetIndex===C.datasetIndex&&x.index===C.index)),c=a(r,t),s=i?t:a(t,r);c.length&&this.updateHoverStyle(c,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}_eventHandler(t,r){const i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},n=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const a=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(a||i.changed)&&this.render(),this}_handleEvent(t,r,i){const{_active:n=[],options:a}=this,c=r,s=this._getActiveElements(t,n,i,c),d=ZO(t),g=XQ(t,this._lastEvent,i,d);i&&(this._lastEvent=null,ga(a.onHover,[t,s,this],this),d&&ga(a.onClick,[t,s,this],this));const x=!b_(s,n);return(x||r)&&(this._active=s,this._updateHoverStyles(s,n,r)),this._lastEvent=g,x}_getActiveElements(t,r,i,n){if(t.type==="mouseout")return[];if(!i)return r;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,n)}};function kS(){return ks(pg.instances,e=>e._plugins.invalidate())}function ZQ(e,t,r){const{startAngle:i,x:n,y:a,outerRadius:c,innerRadius:s,options:d}=t,{borderWidth:g,borderJoinStyle:x}=d,C=Math.min(g/c,Sh(i-r));if(e.beginPath(),e.arc(n,a,c-g/2,i+C/2,r-C/2),s>0){const N=Math.min(g/s,Sh(i-r));e.arc(n,a,s+g/2,r-N/2,i+N/2,!0)}else{const N=Math.min(g/2,c*Sh(i-r));if(x==="round")e.arc(n,a,N,r-Is/2,i+Is/2,!0);else if(x==="bevel"){const B=2*N*N,M=-B*Math.cos(r+Is/2)+n,I=-B*Math.sin(r+Is/2)+a,R=B*Math.cos(i+Is/2)+n,D=B*Math.sin(i+Is/2)+a;e.lineTo(M,I),e.lineTo(R,D)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function YQ(e,t,r){const{startAngle:i,pixelMargin:n,x:a,y:c,outerRadius:s,innerRadius:d}=t;let g=n/s;e.beginPath(),e.arc(a,c,s,i-g,r+g),d>n?(g=n/d,e.arc(a,c,d,r+g,i-g,!0)):e.arc(a,c,n,r+gl,i-gl),e.closePath(),e.clip()}function JQ(e){return R4(e,["outerStart","outerEnd","innerStart","innerEnd"])}function ez(e,t,r,i){const n=JQ(e.options.borderRadius),a=(r-t)/2,c=Math.min(a,i*t/2),s=d=>{const g=(r-Math.min(a,d))*i/2;return Xc(d,0,Math.min(a,g))};return{outerStart:s(n.outerStart),outerEnd:s(n.outerEnd),innerStart:Xc(n.innerStart,0,c),innerEnd:Xc(n.innerEnd,0,c)}}function _m(e,t,r,i){return{x:r+e*Math.cos(t),y:i+e*Math.sin(t)}}function T_(e,t,r,i,n,a){const{x:c,y:s,startAngle:d,pixelMargin:g,innerRadius:x}=t,C=Math.max(t.outerRadius+i+r-g,0),N=x>0?x+i+r+g:0;let B=0;const M=n-d;if(i){const Ne=x>0?x-i:0,ge=C>0?C-i:0,Pe=(Ne+ge)/2,Ye=Pe!==0?M*Pe/(Pe+i):M;B=(M-Ye)/2}const I=Math.max(.001,M*C-r/Is)/C,R=(M-I)/2,D=d+R+B,V=n-R-B,{outerStart:G,outerEnd:Z,innerStart:X,innerEnd:le}=ez(t,N,C,V-D),ae=C-G,ce=C-Z,se=D+G/ae,ue=V-Z/ce,re=N+X,W=N+le,de=D+X/re,Ee=V-le/W;if(e.beginPath(),a){const Ne=(se+ue)/2;if(e.arc(c,s,C,se,Ne),e.arc(c,s,C,Ne,ue),Z>0){const Me=_m(ce,ue,c,s);e.arc(Me.x,Me.y,Z,ue,V+gl)}const ge=_m(W,V,c,s);if(e.lineTo(ge.x,ge.y),le>0){const Me=_m(W,Ee,c,s);e.arc(Me.x,Me.y,le,V+gl,Ee+Math.PI)}const Pe=(V-le/N+(D+X/N))/2;if(e.arc(c,s,N,V-le/N,Pe,!0),e.arc(c,s,N,Pe,D+X/N,!0),X>0){const Me=_m(re,de,c,s);e.arc(Me.x,Me.y,X,de+Math.PI,D-gl)}const Ye=_m(ae,D,c,s);if(e.lineTo(Ye.x,Ye.y),G>0){const Me=_m(ae,se,c,s);e.arc(Me.x,Me.y,G,D-gl,se)}}else{e.moveTo(c,s);const Ne=Math.cos(se)*C+c,ge=Math.sin(se)*C+s;e.lineTo(Ne,ge);const Pe=Math.cos(ue)*C+c,Ye=Math.sin(ue)*C+s;e.lineTo(Pe,Ye)}e.closePath()}function tz(e,t,r,i,n){const{fullCircles:a,startAngle:c,circumference:s}=t;let d=t.endAngle;if(a){T_(e,t,r,i,d,n);for(let g=0;g<a;++g)e.fill();isNaN(s)||(d=c+(s%Ha||Ha))}return T_(e,t,r,i,d,n),e.fill(),d}function rz(e,t,r,i,n){const{fullCircles:a,startAngle:c,circumference:s,options:d}=t,{borderWidth:g,borderJoinStyle:x,borderDash:C,borderDashOffset:N,borderRadius:B}=d,M=d.borderAlign==="inner";if(!g)return;e.setLineDash(C||[]),e.lineDashOffset=N,M?(e.lineWidth=g*2,e.lineJoin=x||"round"):(e.lineWidth=g,e.lineJoin=x||"bevel");let I=t.endAngle;if(a){T_(e,t,r,i,I,n);for(let R=0;R<a;++R)e.stroke();isNaN(s)||(I=c+(s%Ha||Ha))}M&&YQ(e,t,I),d.selfJoin&&I-c>=Is&&B===0&&x!=="miter"&&ZQ(e,t,I),a||(T_(e,t,r,i,I,n),e.stroke())}class V4 extends bd{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,i){const n=this.getProps(["x","y"],i),{angle:a,distance:c}=Yk(n,{x:t,y:r}),{startAngle:s,endAngle:d,innerRadius:g,outerRadius:x,circumference:C}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),N=(this.options.spacing+this.options.borderWidth)/2,B=Bn(C,d-s),M=gv(a,s,d)&&s!==d,I=B>=Ha||M,R=cd(c,g+N,x+N);return I&&R}getCenterPoint(t){const{x:r,y:i,startAngle:n,endAngle:a,innerRadius:c,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:d,spacing:g}=this.options,x=(n+a)/2,C=(c+s+g+d)/2;return{x:r+Math.cos(x)*C,y:i+Math.sin(x)*C}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:i}=this,n=(r.offset||0)/4,a=(r.spacing||0)/2,c=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Ha?Math.floor(i/Ha):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const s=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(s)*n,Math.sin(s)*n);const d=1-Math.sin(Math.min(Is,i||0)),g=n*d;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,tz(t,this,g,a,c),rz(t,this,g,a,c),t.restore()}}function F6(e,t,r=t){e.lineCap=Bn(r.borderCapStyle,t.borderCapStyle),e.setLineDash(Bn(r.borderDash,t.borderDash)),e.lineDashOffset=Bn(r.borderDashOffset,t.borderDashOffset),e.lineJoin=Bn(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Bn(r.borderWidth,t.borderWidth),e.strokeStyle=Bn(r.borderColor,t.borderColor)}function iz(e,t,r){e.lineTo(r.x,r.y)}function nz(e){return e.stepped?B7:e.tension||e.cubicInterpolationMode==="monotone"?C7:iz}function k6(e,t,r={}){const i=e.length,{start:n=0,end:a=i-1}=r,{start:c,end:s}=t,d=Math.max(n,c),g=Math.min(a,s),x=n<c&&a<c||n>s&&a>s;return{count:i,start:d,loop:t.loop,ilen:g<d&&!x?i+g-d:g-d}}function sz(e,t,r,i){const{points:n,options:a}=t,{count:c,start:s,loop:d,ilen:g}=k6(n,r,i),x=nz(a);let{move:C=!0,reverse:N}=i||{},B,M,I;for(B=0;B<=g;++B)M=n[(s+(N?g-B:B))%c],!M.skip&&(C?(e.moveTo(M.x,M.y),C=!1):x(e,I,M,N,a.stepped),I=M);return d&&(M=n[(s+(N?g:0))%c],x(e,I,M,N,a.stepped)),!!d}function az(e,t,r,i){const n=t.points,{count:a,start:c,ilen:s}=k6(n,r,i),{move:d=!0,reverse:g}=i||{};let x=0,C=0,N,B,M,I,R,D;const V=Z=>(c+(g?s-Z:Z))%a,G=()=>{I!==R&&(e.lineTo(x,R),e.lineTo(x,I),e.lineTo(x,D))};for(d&&(B=n[V(0)],e.moveTo(B.x,B.y)),N=0;N<=s;++N){if(B=n[V(N)],B.skip)continue;const Z=B.x,X=B.y,le=Z|0;le===M?(X<I?I=X:X>R&&(R=X),x=(C*x+Z)/++C):(G(),e.lineTo(Z,X),M=le,C=0,I=R=X),D=X}G()}function f5(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?az:sz}function oz(e){return e.stepped?i9:e.tension||e.cubicInterpolationMode==="monotone"?n9:e0}function lz(e,t,r,i){let n=t._path;n||(n=t._path=new Path2D,t.path(n,r,i)&&n.closePath()),F6(e,t.options),e.stroke(n)}function cz(e,t,r,i){const{segments:n,options:a}=t,c=f5(t);for(const s of n)F6(e,a,s.style),e.beginPath(),c(e,t,s,{start:r,end:r+i-1})&&e.closePath(),e.stroke()}const uz=typeof Path2D=="function";function hz(e,t,r,i){uz&&!t.options.segment?lz(e,t,r,i):cz(e,t,r,i)}class mg extends bd{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;$7(this._points,i,t,n,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=u9(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){const i=this.options,n=t[r],a=this.points,c=p6(this,{property:r,start:n,end:n});if(!c.length)return;const s=[],d=oz(i);let g,x;for(g=0,x=c.length;g<x;++g){const{start:C,end:N}=c[g],B=a[C],M=a[N];if(B===M){s.push(B);continue}const I=Math.abs((n-B[r])/(M[r]-B[r])),R=d(B,M,I,i.stepped);R[r]=t[r],s.push(R)}return s.length===1?s[0]:s}pathSegment(t,r,i){return f5(this)(t,this,r,i)}path(t,r,i){const n=this.segments,a=f5(this);let c=this._loop;r=r||0,i=i||this.points.length-r;for(const s of n)c&=a(t,this,s,{start:r,end:r+i-1});return!!c}draw(t,r,i,n){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),hz(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function NS(e,t,r,i){const n=e.options,{[r]:a}=e.getProps([r],i);return Math.abs(t-a)<n.radius+n.hitRadius}class G4 extends bd{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const n=this.options,{x:a,y:c}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(r-c,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,r){return NS(this,t,"x",r)}inYRange(t,r){return NS(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){const i=this.options;this.skip||i.radius<.1||!vv(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,u5(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function N6(e,t){const{x:r,y:i,base:n,width:a,height:c}=e.getProps(["x","y","base","width","height"],t);let s,d,g,x,C;return e.horizontal?(C=c/2,s=Math.min(r,n),d=Math.max(r,n),g=i-C,x=i+C):(C=a/2,s=r-C,d=r+C,g=Math.min(i,n),x=Math.max(i,n)),{left:s,top:g,right:d,bottom:x}}function op(e,t,r,i){return e?0:Xc(t,r,i)}function Az(e,t,r){const i=e.options.borderWidth,n=e.borderSkipped,a=s6(i);return{t:op(n.top,a.top,0,r),r:op(n.right,a.right,0,t),b:op(n.bottom,a.bottom,0,r),l:op(n.left,a.left,0,t)}}function fz(e,t,r){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,a=Hm(n),c=Math.min(t,r),s=e.borderSkipped,d=i||jn(n);return{topLeft:op(!d||s.top||s.left,a.topLeft,0,c),topRight:op(!d||s.top||s.right,a.topRight,0,c),bottomLeft:op(!d||s.bottom||s.left,a.bottomLeft,0,c),bottomRight:op(!d||s.bottom||s.right,a.bottomRight,0,c)}}function dz(e){const t=N6(e),r=t.right-t.left,i=t.bottom-t.top,n=Az(e,r/2,i/2),a=fz(e,r/2,i/2);return{outer:{x:t.left,y:t.top,w:r,h:i,radius:a},inner:{x:t.left+n.l,y:t.top+n.t,w:r-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,a.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(n.b,n.r))}}}}function kb(e,t,r,i){const n=t===null,a=r===null,s=e&&!(n&&a)&&N6(e,i);return s&&(n||cd(t,s.left,s.right))&&(a||cd(r,s.top,s.bottom))}function pz(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function mz(e,t){e.rect(t.x,t.y,t.w,t.h)}function Nb(e,t,r={}){const i=e.x!==r.x?-t:0,n=e.y!==r.y?-t:0,a=(e.x+e.w!==r.x+r.w?t:0)-i,c=(e.y+e.h!==r.y+r.h?t:0)-n;return{x:e.x+i,y:e.y+n,w:e.w+a,h:e.h+c,radius:e.radius}}class q4 extends bd{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:i,backgroundColor:n}}=this,{inner:a,outer:c}=dz(this),s=pz(c.radius)?C_:mz;t.save(),(c.w!==a.w||c.h!==a.h)&&(t.beginPath(),s(t,Nb(c,r,a)),t.clip(),s(t,Nb(a,-r,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),s(t,Nb(a,r)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,r,i){return kb(this,t,r,i)}inXRange(t,r){return kb(this,t,null,r)}inYRange(t,r){return kb(this,null,t,r)}getCenterPoint(t){const{x:r,y:i,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(r+n)/2:r,y:a?i:(i+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function gz(e,t,r){const i=e.segments,n=e.points,a=t.points,c=[];for(const s of i){let{start:d,end:g}=s;g=y2(d,g,n);const x=d5(r,n[d],n[g],s.loop);if(!t.segments){c.push({source:s,target:x,start:n[d],end:n[g]});continue}const C=p6(t,x);for(const N of C){const B=d5(r,a[N.start],a[N.end],N.loop),M=d6(s,n,B);for(const I of M)c.push({source:I,target:N,start:{[r]:IS(x,B,"start",Math.max)},end:{[r]:IS(x,B,"end",Math.min)}})}}return c}function d5(e,t,r,i){if(i)return;let n=t[e],a=r[e];return e==="angle"&&(n=Sh(n),a=Sh(a)),{property:e,start:n,end:a}}function vz(e,t){const{x:r=null,y:i=null}=e||{},n=t.points,a=[];return t.segments.forEach(({start:c,end:s})=>{s=y2(c,s,n);const d=n[c],g=n[s];i!==null?(a.push({x:d.x,y:i}),a.push({x:g.x,y:i})):r!==null&&(a.push({x:r,y:d.y}),a.push({x:r,y:g.y}))}),a}function y2(e,t,r){for(;t>e;t--){const i=r[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function IS(e,t,r,i){return e&&t?i(e[r],t[r]):e?e[r]:t?t[r]:0}function I6(e,t){let r=[],i=!1;return Wo(e)?(i=!0,r=e):r=vz(e,t),r.length?new mg({points:r,options:{tension:0},_loop:i,_fullLoop:i}):null}function LS(e){return e&&e.fill!==!1}function xz(e,t,r){let n=e[t].fill;const a=[t];let c;if(!r)return n;for(;n!==!1&&a.indexOf(n)===-1;){if(!eu(n))return n;if(c=e[n],!c)return!1;if(c.visible)return n;a.push(n),n=c.fill}return!1}function yz(e,t,r){const i=Bz(e);if(jn(i))return isNaN(i.value)?!1:i;let n=parseFloat(i);return eu(n)&&Math.floor(n)===n?_z(i[0],t,n,r):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function _z(e,t,r,i){return(e==="-"||e==="+")&&(r=t+r),r===t||r<0||r>=i?!1:r}function bz(e,t){let r=null;return e==="start"?r=t.bottom:e==="end"?r=t.top:jn(e)?r=t.getPixelForValue(e.value):t.getBasePixel&&(r=t.getBasePixel()),r}function wz(e,t,r){let i;return e==="start"?i=r:e==="end"?i=t.options.reverse?t.min:t.max:jn(e)?i=e.value:i=t.getBaseValue(),i}function Bz(e){const t=e.options,r=t.fill;let i=Bn(r&&r.target,r);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Cz(e){const{scale:t,index:r,line:i}=e,n=[],a=i.segments,c=i.points,s=Sz(t,r);s.push(I6({x:null,y:t.bottom},i));for(let d=0;d<a.length;d++){const g=a[d];for(let x=g.start;x<=g.end;x++)Ez(n,c[x],s)}return new mg({points:n,options:{}})}function Sz(e,t){const r=[],i=e.getMatchingVisibleMetas("line");for(let n=0;n<i.length;n++){const a=i[n];if(a.index===t)break;a.hidden||r.unshift(a.dataset)}return r}function Ez(e,t,r){const i=[];for(let n=0;n<r.length;n++){const a=r[n],{first:c,last:s,point:d}=Tz(a,t,"x");if(!(!d||c&&s)){if(c)i.unshift(d);else if(e.push(d),!s)break}}e.push(...i)}function Tz(e,t,r){const i=e.interpolate(t,r);if(!i)return{};const n=i[r],a=e.segments,c=e.points;let s=!1,d=!1;for(let g=0;g<a.length;g++){const x=a[g],C=c[x.start][r],N=c[x.end][r];if(cd(n,C,N)){s=n===C,d=n===N;break}}return{first:s,last:d,point:i}}class L6{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,r,i){const{x:n,y:a,radius:c}=this;return r=r||{start:0,end:Ha},t.arc(n,a,c,r.end,r.start,!0),!i.bounds}interpolate(t){const{x:r,y:i,radius:n}=this,a=t.angle;return{x:r+Math.cos(a)*n,y:i+Math.sin(a)*n,angle:a}}}function Fz(e){const{chart:t,fill:r,line:i}=e;if(eu(r))return kz(t,r);if(r==="stack")return Cz(e);if(r==="shape")return!0;const n=Nz(e);return n instanceof L6?n:I6(n,i)}function kz(e,t){const r=e.getDatasetMeta(t);return r&&e.isDatasetVisible(t)?r.dataset:null}function Nz(e){return(e.scale||{}).getPointPositionForValue?Lz(e):Iz(e)}function Iz(e){const{scale:t={},fill:r}=e,i=bz(r,t);if(eu(i)){const n=t.isHorizontal();return{x:n?i:null,y:n?null:i}}return null}function Lz(e){const{scale:t,fill:r}=e,i=t.options,n=t.getLabels().length,a=i.reverse?t.max:t.min,c=wz(r,t,a),s=[];if(i.grid.circular){const d=t.getPointPositionForValue(0,a);return new L6({x:d.x,y:d.y,radius:t.getDistanceFromCenterForValue(c)})}for(let d=0;d<n;++d)s.push(t.getPointPositionForValue(d,c));return s}function Ib(e,t,r){const i=Fz(t),{chart:n,index:a,line:c,scale:s,axis:d}=t,g=c.options,x=g.fill,C=g.backgroundColor,{above:N=C,below:B=C}=x||{},M=n.getDatasetMeta(a),I=m6(n,M);i&&c.points.length&&(p2(e,r),Mz(e,{line:c,target:i,above:N,below:B,area:r,scale:s,axis:d,clip:I}),m2(e))}function Mz(e,t){const{line:r,target:i,above:n,below:a,area:c,scale:s,clip:d}=t,g=r._loop?"angle":t.axis;e.save();let x=a;a!==n&&(g==="x"?(MS(e,i,c.top),Lb(e,{line:r,target:i,color:n,scale:s,property:g,clip:d}),e.restore(),e.save(),MS(e,i,c.bottom)):g==="y"&&(PS(e,i,c.left),Lb(e,{line:r,target:i,color:a,scale:s,property:g,clip:d}),e.restore(),e.save(),PS(e,i,c.right),x=n)),Lb(e,{line:r,target:i,color:x,scale:s,property:g,clip:d}),e.restore()}function MS(e,t,r){const{segments:i,points:n}=t;let a=!0,c=!1;e.beginPath();for(const s of i){const{start:d,end:g}=s,x=n[d],C=n[y2(d,g,n)];a?(e.moveTo(x.x,x.y),a=!1):(e.lineTo(x.x,r),e.lineTo(x.x,x.y)),c=!!t.pathSegment(e,s,{move:c}),c?e.closePath():e.lineTo(C.x,r)}e.lineTo(t.first().x,r),e.closePath(),e.clip()}function PS(e,t,r){const{segments:i,points:n}=t;let a=!0,c=!1;e.beginPath();for(const s of i){const{start:d,end:g}=s,x=n[d],C=n[y2(d,g,n)];a?(e.moveTo(x.x,x.y),a=!1):(e.lineTo(r,x.y),e.lineTo(x.x,x.y)),c=!!t.pathSegment(e,s,{move:c}),c?e.closePath():e.lineTo(r,C.y)}e.lineTo(r,t.first().y),e.closePath(),e.clip()}function Lb(e,t){const{line:r,target:i,property:n,color:a,scale:c,clip:s}=t,d=gz(r,i,n);for(const{source:g,target:x,start:C,end:N}of d){const{style:{backgroundColor:B=a}={}}=g,M=i!==!0;e.save(),e.fillStyle=B,Pz(e,c,s,M&&d5(n,C,N)),e.beginPath();const I=!!r.pathSegment(e,g);let R;if(M){I?e.closePath():DS(e,i,N,n);const D=!!i.pathSegment(e,x,{move:I,reverse:!0});R=I&&D,R||DS(e,i,C,n)}e.closePath(),e.fill(R?"evenodd":"nonzero"),e.restore()}}function Pz(e,t,r,i){const n=t.chart.chartArea,{property:a,start:c,end:s}=i||{};if(a==="x"||a==="y"){let d,g,x,C;a==="x"?(d=c,g=n.top,x=s,C=n.bottom):(d=n.left,g=c,x=n.right,C=s),e.beginPath(),r&&(d=Math.max(d,r.left),x=Math.min(x,r.right),g=Math.max(g,r.top),C=Math.min(C,r.bottom)),e.rect(d,g,x-d,C-g),e.clip()}}function DS(e,t,r,i){const n=t.interpolate(r,i);n&&e.lineTo(n.x,n.y)}var M6={id:"filler",afterDatasetsUpdate(e,t,r){const i=(e.data.datasets||[]).length,n=[];let a,c,s,d;for(c=0;c<i;++c)a=e.getDatasetMeta(c),s=a.dataset,d=null,s&&s.options&&s instanceof mg&&(d={visible:e.isDatasetVisible(c),index:c,fill:yz(s,c,i),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:s}),a.$filler=d,n.push(d);for(c=0;c<i;++c)d=n[c],!(!d||d.fill===!1)&&(d.fill=xz(n,c,r.propagate))},beforeDraw(e,t,r){const i=r.drawTime==="beforeDraw",n=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let c=n.length-1;c>=0;--c){const s=n[c].$filler;s&&(s.line.updateControlPoints(a,s.axis),i&&s.fill&&Ib(e.ctx,s,a))}},beforeDatasetsDraw(e,t,r){if(r.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let n=i.length-1;n>=0;--n){const a=i[n].$filler;LS(a)&&Ib(e.ctx,a,e.chartArea)}},beforeDatasetDraw(e,t,r){const i=t.meta.$filler;!LS(i)||r.drawTime!=="beforeDatasetDraw"||Ib(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const RS=(e,t)=>{let{boxHeight:r=t,boxWidth:i=t}=e;return e.usePointStyle&&(r=Math.min(r,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:r,itemHeight:Math.max(t,r)}},Dz=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class US extends bd{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,i){this.maxWidth=t,this.maxHeight=r,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=ga(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(i=>t.filter(i,this.chart.data))),t.sort&&(r=r.sort((i,n)=>t.sort(i,n,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,n=Zc(i.font),a=n.size,c=this._computeTitleHeight(),{boxWidth:s,itemHeight:d}=RS(i,a);let g,x;r.font=n.string,this.isHorizontal()?(g=this.maxWidth,x=this._fitRows(c,a,s,d)+10):(x=this.maxHeight,g=this._fitCols(c,n,s,d)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(x,t.maxHeight||this.maxHeight)}_fitRows(t,r,i,n){const{ctx:a,maxWidth:c,options:{labels:{padding:s}}}=this,d=this.legendHitBoxes=[],g=this.lineWidths=[0],x=n+s;let C=t;a.textAlign="left",a.textBaseline="middle";let N=-1,B=-x;return this.legendItems.forEach((M,I)=>{const R=i+r/2+a.measureText(M.text).width;(I===0||g[g.length-1]+R+2*s>c)&&(C+=x,g[g.length-(I>0?0:1)]=0,B+=x,N++),d[I]={left:0,top:B,row:N,width:R,height:n},g[g.length-1]+=R+s}),C}_fitCols(t,r,i,n){const{ctx:a,maxHeight:c,options:{labels:{padding:s}}}=this,d=this.legendHitBoxes=[],g=this.columnSizes=[],x=c-t;let C=s,N=0,B=0,M=0,I=0;return this.legendItems.forEach((R,D)=>{const{itemWidth:V,itemHeight:G}=Rz(i,r,a,R,n);D>0&&B+G+2*s>x&&(C+=N+s,g.push({width:N,height:B}),M+=N+s,I++,N=B=0),d[D]={left:M,top:B,col:I,width:V,height:G},N=Math.max(N,V),B+=G+s}),C+=N,g.push({width:N,height:B}),C}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:i,labels:{padding:n},rtl:a}}=this,c=Vm(a,this.left,this.width);if(this.isHorizontal()){let s=0,d=Gc(i,this.left+n,this.right-this.lineWidths[s]);for(const g of r)s!==g.row&&(s=g.row,d=Gc(i,this.left+n,this.right-this.lineWidths[s])),g.top+=this.top+t+n,g.left=c.leftForLtr(c.x(d),g.width),d+=g.width+n}else{let s=0,d=Gc(i,this.top+t+n,this.bottom-this.columnSizes[s].height);for(const g of r)g.col!==s&&(s=g.col,d=Gc(i,this.top+t+n,this.bottom-this.columnSizes[s].height)),g.top=d,g.left+=this.left+n,g.left=c.leftForLtr(c.x(g.left),g.width),d+=g.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;p2(t,this),this._draw(),m2(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:i,ctx:n}=this,{align:a,labels:c}=t,s=To.color,d=Vm(t.rtl,this.left,this.width),g=Zc(c.font),{padding:x}=c,C=g.size,N=C/2;let B;this.drawTitle(),n.textAlign=d.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=g.string;const{boxWidth:M,boxHeight:I,itemHeight:R}=RS(c,C),D=function(le,ae,ce){if(isNaN(M)||M<=0||isNaN(I)||I<0)return;n.save();const se=Bn(ce.lineWidth,1);if(n.fillStyle=Bn(ce.fillStyle,s),n.lineCap=Bn(ce.lineCap,"butt"),n.lineDashOffset=Bn(ce.lineDashOffset,0),n.lineJoin=Bn(ce.lineJoin,"miter"),n.lineWidth=se,n.strokeStyle=Bn(ce.strokeStyle,s),n.setLineDash(Bn(ce.lineDash,[])),c.usePointStyle){const ue={radius:I*Math.SQRT2/2,pointStyle:ce.pointStyle,rotation:ce.rotation,borderWidth:se},re=d.xPlus(le,M/2),W=ae+N;n6(n,ue,re,W,c.pointStyleWidth&&M)}else{const ue=ae+Math.max((C-I)/2,0),re=d.leftForLtr(le,M),W=Hm(ce.borderRadius);n.beginPath(),Object.values(W).some(de=>de!==0)?C_(n,{x:re,y:ue,w:M,h:I,radius:W}):n.rect(re,ue,M,I),n.fill(),se!==0&&n.stroke()}n.restore()},V=function(le,ae,ce){xv(n,ce.text,le,ae+R/2,g,{strikethrough:ce.hidden,textAlign:d.textAlign(ce.textAlign)})},G=this.isHorizontal(),Z=this._computeTitleHeight();G?B={x:Gc(a,this.left+x,this.right-i[0]),y:this.top+x+Z,line:0}:B={x:this.left+x,y:Gc(a,this.top+Z+x,this.bottom-r[0].height),line:0},h6(this.ctx,t.textDirection);const X=R+x;this.legendItems.forEach((le,ae)=>{n.strokeStyle=le.fontColor,n.fillStyle=le.fontColor;const ce=n.measureText(le.text).width,se=d.textAlign(le.textAlign||(le.textAlign=c.textAlign)),ue=M+N+ce;let re=B.x,W=B.y;d.setWidth(this.width),G?ae>0&&re+ue+x>this.right&&(W=B.y+=X,B.line++,re=B.x=Gc(a,this.left+x,this.right-i[B.line])):ae>0&&W+X>this.bottom&&(re=B.x=re+r[B.line].width+x,B.line++,W=B.y=Gc(a,this.top+Z+x,this.bottom-r[B.line].height));const de=d.x(re);if(D(de,W,le),re=h7(se,re+M+N,G?re+ue:this.right,t.rtl),V(d.x(re),W,le),G)B.x+=ue+x;else if(typeof le.text!="string"){const Ee=g.lineHeight;B.y+=P6(le,Ee)+x}else B.y+=X}),A6(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,i=Zc(r.font),n=sA(r.padding);if(!r.display)return;const a=Vm(t.rtl,this.left,this.width),c=this.ctx,s=r.position,d=i.size/2,g=n.top+d;let x,C=this.left,N=this.width;if(this.isHorizontal())N=Math.max(...this.lineWidths),x=this.top+g,C=Gc(t.align,C,this.right-N);else{const M=this.columnSizes.reduce((I,R)=>Math.max(I,R.height),0);x=g+Gc(t.align,this.top,this.bottom-M-t.labels.padding-this._computeTitleHeight())}const B=Gc(s,C,C+N);c.textAlign=a.textAlign(M4(s)),c.textBaseline="middle",c.strokeStyle=r.color,c.fillStyle=r.color,c.font=i.string,xv(c,r.text,B,x,i)}_computeTitleHeight(){const t=this.options.title,r=Zc(t.font),i=sA(t.padding);return t.display?r.lineHeight+i.height:0}_getLegendItemAt(t,r){let i,n,a;if(cd(t,this.left,this.right)&&cd(r,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(n=a[i],cd(t,n.left,n.left+n.width)&&cd(r,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(t){const r=this.options;if(!Oz(t.type,r))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,a=Dz(n,i);n&&!a&&ga(r.onLeave,[t,n,this],this),this._hoveredItem=i,i&&!a&&ga(r.onHover,[t,i,this],this)}else i&&ga(r.onClick,[t,i,this],this)}}function Rz(e,t,r,i,n){const a=Uz(i,e,t,r),c=jz(n,i,t.lineHeight);return{itemWidth:a,itemHeight:c}}function Uz(e,t,r,i){let n=e.text;return n&&typeof n!="string"&&(n=n.reduce((a,c)=>a.length>c.length?a:c)),t+r.size/2+i.measureText(n).width}function jz(e,t,r){let i=e;return typeof t.text!="string"&&(i=P6(t,r)),i}function P6(e,t){const r=e.text?e.text.length:0;return t*r}function Oz(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var K4={id:"legend",_element:US,start(e,t,r){const i=e.legend=new US({ctx:e.ctx,options:r,chart:e});tA.configure(e,i,r),tA.addBox(e,i)},stop(e){tA.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const i=e.legend;tA.configure(e,i,r),i.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const i=t.datasetIndex,n=r.chart;n.isDatasetVisible(i)?(n.hide(i),t.hidden=!0):(n.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:i,textAlign:n,color:a,useBorderRadius:c,borderRadius:s}}=e.legend.options;return e._getSortedDatasetMetas().map(d=>{const g=d.controller.getStyle(r?0:void 0),x=sA(g.borderWidth);return{text:t[d.index].label,fillStyle:g.backgroundColor,fontColor:a,hidden:!d.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:g.borderColor,pointStyle:i||g.pointStyle,rotation:g.rotation,textAlign:n||g.textAlign,borderRadius:c&&(s||g.borderRadius),datasetIndex:d.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class D6 extends bd{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const n=Wo(i.text)?i.text.length:1;this._padding=sA(i.padding);const a=n*Zc(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:i,bottom:n,right:a,options:c}=this,s=c.align;let d=0,g,x,C;return this.isHorizontal()?(x=Gc(s,i,a),C=r+t,g=a-i):(c.position==="left"?(x=i+t,C=Gc(s,n,r),d=Is*-.5):(x=a-t,C=Gc(s,r,n),d=Is*.5),g=n-r),{titleX:x,titleY:C,maxWidth:g,rotation:d}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const i=Zc(r.font),a=i.lineHeight/2+this._padding.top,{titleX:c,titleY:s,maxWidth:d,rotation:g}=this._drawArgs(a);xv(t,r.text,0,0,i,{color:r.color,maxWidth:d,rotation:g,textAlign:M4(r.align),textBaseline:"middle",translation:[c,s]})}}function Qz(e,t){const r=new D6({ctx:e.ctx,options:t,chart:e});tA.configure(e,r,t),tA.addBox(e,r),e.titleBlock=r}var W4={id:"title",_element:D6,start(e,t,r){Qz(e,r)},stop(e){const t=e.titleBlock;tA.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const i=e.titleBlock;tA.configure(e,i,r),i.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const N1={average(e){if(!e.length)return!1;let t,r,i=new Set,n=0,a=0;for(t=0,r=e.length;t<r;++t){const s=e[t].element;if(s&&s.hasValue()){const d=s.tooltipPosition();i.add(d.x),n+=d.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((s,d)=>s+d)/i.size,y:n/a}},nearest(e,t){if(!e.length)return!1;let r=t.x,i=t.y,n=Number.POSITIVE_INFINITY,a,c,s;for(a=0,c=e.length;a<c;++a){const d=e[a].element;if(d&&d.hasValue()){const g=d.getCenterPoint(),x=l5(t,g);x<n&&(n=x,s=d)}}if(s){const d=s.tooltipPosition();r=d.x,i=d.y}return{x:r,y:i}}};function vf(e,t){return t&&(Wo(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function nd(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function zz(e,t){const{element:r,datasetIndex:i,index:n}=t,a=e.getDatasetMeta(i).controller,{label:c,value:s}=a.getLabelAndValue(n);return{chart:e,label:c,parsed:a.getParsed(n),raw:e.data.datasets[i].data[n],formattedValue:s,dataset:a.getDataset(),dataIndex:n,datasetIndex:i,element:r}}function jS(e,t){const r=e.chart.ctx,{body:i,footer:n,title:a}=e,{boxWidth:c,boxHeight:s}=t,d=Zc(t.bodyFont),g=Zc(t.titleFont),x=Zc(t.footerFont),C=a.length,N=n.length,B=i.length,M=sA(t.padding);let I=M.height,R=0,D=i.reduce((Z,X)=>Z+X.before.length+X.lines.length+X.after.length,0);if(D+=e.beforeBody.length+e.afterBody.length,C&&(I+=C*g.lineHeight+(C-1)*t.titleSpacing+t.titleMarginBottom),D){const Z=t.displayColors?Math.max(s,d.lineHeight):d.lineHeight;I+=B*Z+(D-B)*d.lineHeight+(D-1)*t.bodySpacing}N&&(I+=t.footerMarginTop+N*x.lineHeight+(N-1)*t.footerSpacing);let V=0;const G=function(Z){R=Math.max(R,r.measureText(Z).width+V)};return r.save(),r.font=g.string,ks(e.title,G),r.font=d.string,ks(e.beforeBody.concat(e.afterBody),G),V=t.displayColors?c+2+t.boxPadding:0,ks(i,Z=>{ks(Z.before,G),ks(Z.lines,G),ks(Z.after,G)}),V=0,r.font=x.string,ks(e.footer,G),r.restore(),R+=M.width,{width:R,height:I}}function Hz(e,t){const{y:r,height:i}=t;return r<i/2?"top":r>e.height-i/2?"bottom":"center"}function Vz(e,t,r,i){const{x:n,width:a}=i,c=r.caretSize+r.caretPadding;if(e==="left"&&n+a+c>t.width||e==="right"&&n-a-c<0)return!0}function Gz(e,t,r,i){const{x:n,width:a}=r,{width:c,chartArea:{left:s,right:d}}=e;let g="center";return i==="center"?g=n<=(s+d)/2?"left":"right":n<=a/2?g="left":n>=c-a/2&&(g="right"),Vz(g,e,t,r)&&(g="center"),g}function OS(e,t,r){const i=r.yAlign||t.yAlign||Hz(e,r);return{xAlign:r.xAlign||t.xAlign||Gz(e,t,r,i),yAlign:i}}function qz(e,t){let{x:r,width:i}=e;return t==="right"?r-=i:t==="center"&&(r-=i/2),r}function Kz(e,t,r){let{y:i,height:n}=e;return t==="top"?i+=r:t==="bottom"?i-=n+r:i-=n/2,i}function QS(e,t,r,i){const{caretSize:n,caretPadding:a,cornerRadius:c}=e,{xAlign:s,yAlign:d}=r,g=n+a,{topLeft:x,topRight:C,bottomLeft:N,bottomRight:B}=Hm(c);let M=qz(t,s);const I=Kz(t,d,g);return d==="center"?s==="left"?M+=g:s==="right"&&(M-=g):s==="left"?M-=Math.max(x,N)+n:s==="right"&&(M+=Math.max(C,B)+n),{x:Xc(M,0,i.width-t.width),y:Xc(I,0,i.height-t.height)}}function sy(e,t,r){const i=sA(r.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function zS(e){return vf([],nd(e))}function Wz(e,t,r){return S0(e,{tooltip:t,tooltipItems:r,type:"tooltip"})}function HS(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const R6={beforeTitle:Yf,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,i=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return r[t.dataIndex]}return""},afterTitle:Yf,beforeBody:Yf,beforeLabel:Yf,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return xs(r)||(t+=r),t},labelColor(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Yf,afterBody:Yf,beforeFooter:Yf,footer:Yf,afterFooter:Yf};function Ju(e,t,r,i){const n=e[t].call(r,i);return typeof n>"u"?R6[t].call(r,i):n}class VS extends bd{static positioners=N1;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&r.options.animation&&i.animations,a=new g6(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=Wz(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:i}=r,n=Ju(i,"beforeTitle",this,t),a=Ju(i,"title",this,t),c=Ju(i,"afterTitle",this,t);let s=[];return s=vf(s,nd(n)),s=vf(s,nd(a)),s=vf(s,nd(c)),s}getBeforeBody(t,r){return zS(Ju(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:i}=r,n=[];return ks(t,a=>{const c={before:[],lines:[],after:[]},s=HS(i,a);vf(c.before,nd(Ju(s,"beforeLabel",this,a))),vf(c.lines,Ju(s,"label",this,a)),vf(c.after,nd(Ju(s,"afterLabel",this,a))),n.push(c)}),n}getAfterBody(t,r){return zS(Ju(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:i}=r,n=Ju(i,"beforeFooter",this,t),a=Ju(i,"footer",this,t),c=Ju(i,"afterFooter",this,t);let s=[];return s=vf(s,nd(n)),s=vf(s,nd(a)),s=vf(s,nd(c)),s}_createItems(t){const r=this._active,i=this.chart.data,n=[],a=[],c=[];let s=[],d,g;for(d=0,g=r.length;d<g;++d)s.push(zz(this.chart,r[d]));return t.filter&&(s=s.filter((x,C,N)=>t.filter(x,C,N,i))),t.itemSort&&(s=s.sort((x,C)=>t.itemSort(x,C,i))),ks(s,x=>{const C=HS(t.callbacks,x);n.push(Ju(C,"labelColor",this,x)),a.push(Ju(C,"labelPointStyle",this,x)),c.push(Ju(C,"labelTextColor",this,x))}),this.labelColors=n,this.labelPointStyles=a,this.labelTextColors=c,this.dataPoints=s,s}update(t,r){const i=this.options.setContext(this.getContext()),n=this._active;let a,c=[];if(!n.length)this.opacity!==0&&(a={opacity:0});else{const s=N1[i.position].call(this,n,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const d=this._size=jS(this,i),g=Object.assign({},s,d),x=OS(this.chart,i,g),C=QS(i,g,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,a={opacity:1,x:C.x,y:C.y,width:d.width,height:d.height,caretX:s.x,caretY:s.y}}this._tooltipItems=c,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,n){const a=this.getCaretPosition(t,i,n);r.lineTo(a.x1,a.y1),r.lineTo(a.x2,a.y2),r.lineTo(a.x3,a.y3)}getCaretPosition(t,r,i){const{xAlign:n,yAlign:a}=this,{caretSize:c,cornerRadius:s}=i,{topLeft:d,topRight:g,bottomLeft:x,bottomRight:C}=Hm(s),{x:N,y:B}=t,{width:M,height:I}=r;let R,D,V,G,Z,X;return a==="center"?(Z=B+I/2,n==="left"?(R=N,D=R-c,G=Z+c,X=Z-c):(R=N+M,D=R+c,G=Z-c,X=Z+c),V=R):(n==="left"?D=N+Math.max(d,x)+c:n==="right"?D=N+M-Math.max(g,C)-c:D=this.caretX,a==="top"?(G=B,Z=G-c,R=D-c,V=D+c):(G=B+I,Z=G+c,R=D+c,V=D-c),X=G),{x1:R,x2:D,x3:V,y1:G,y2:Z,y3:X}}drawTitle(t,r,i){const n=this.title,a=n.length;let c,s,d;if(a){const g=Vm(i.rtl,this.x,this.width);for(t.x=sy(this,i.titleAlign,i),r.textAlign=g.textAlign(i.titleAlign),r.textBaseline="middle",c=Zc(i.titleFont),s=i.titleSpacing,r.fillStyle=i.titleColor,r.font=c.string,d=0;d<a;++d)r.fillText(n[d],g.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+s,d+1===a&&(t.y+=i.titleMarginBottom-s)}}_drawColorBox(t,r,i,n,a){const c=this.labelColors[i],s=this.labelPointStyles[i],{boxHeight:d,boxWidth:g}=a,x=Zc(a.bodyFont),C=sy(this,"left",a),N=n.x(C),B=d<x.lineHeight?(x.lineHeight-d)/2:0,M=r.y+B;if(a.usePointStyle){const I={radius:Math.min(g,d)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},R=n.leftForLtr(N,g)+g/2,D=M+d/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,u5(t,I,R,D),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,u5(t,I,R,D)}else{t.lineWidth=jn(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const I=n.leftForLtr(N,g),R=n.leftForLtr(n.xPlus(N,1),g-2),D=Hm(c.borderRadius);Object.values(D).some(V=>V!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,C_(t,{x:I,y:M,w:g,h:d,radius:D}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),C_(t,{x:R,y:M+1,w:g-2,h:d-2,radius:D}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(I,M,g,d),t.strokeRect(I,M,g,d),t.fillStyle=c.backgroundColor,t.fillRect(R,M+1,g-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){const{body:n}=this,{bodySpacing:a,bodyAlign:c,displayColors:s,boxHeight:d,boxWidth:g,boxPadding:x}=i,C=Zc(i.bodyFont);let N=C.lineHeight,B=0;const M=Vm(i.rtl,this.x,this.width),I=function(ce){r.fillText(ce,M.x(t.x+B),t.y+N/2),t.y+=N+a},R=M.textAlign(c);let D,V,G,Z,X,le,ae;for(r.textAlign=c,r.textBaseline="middle",r.font=C.string,t.x=sy(this,R,i),r.fillStyle=i.bodyColor,ks(this.beforeBody,I),B=s&&R!=="right"?c==="center"?g/2+x:g+2+x:0,Z=0,le=n.length;Z<le;++Z){for(D=n[Z],V=this.labelTextColors[Z],r.fillStyle=V,ks(D.before,I),G=D.lines,s&&G.length&&(this._drawColorBox(r,t,Z,M,i),N=Math.max(C.lineHeight,d)),X=0,ae=G.length;X<ae;++X)I(G[X]),N=C.lineHeight;ks(D.after,I)}B=0,N=C.lineHeight,ks(this.afterBody,I),t.y-=a}drawFooter(t,r,i){const n=this.footer,a=n.length;let c,s;if(a){const d=Vm(i.rtl,this.x,this.width);for(t.x=sy(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=d.textAlign(i.footerAlign),r.textBaseline="middle",c=Zc(i.footerFont),r.fillStyle=i.footerColor,r.font=c.string,s=0;s<a;++s)r.fillText(n[s],d.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,r,i,n){const{xAlign:a,yAlign:c}=this,{x:s,y:d}=t,{width:g,height:x}=i,{topLeft:C,topRight:N,bottomLeft:B,bottomRight:M}=Hm(n.cornerRadius);r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.beginPath(),r.moveTo(s+C,d),c==="top"&&this.drawCaret(t,r,i,n),r.lineTo(s+g-N,d),r.quadraticCurveTo(s+g,d,s+g,d+N),c==="center"&&a==="right"&&this.drawCaret(t,r,i,n),r.lineTo(s+g,d+x-M),r.quadraticCurveTo(s+g,d+x,s+g-M,d+x),c==="bottom"&&this.drawCaret(t,r,i,n),r.lineTo(s+B,d+x),r.quadraticCurveTo(s,d+x,s,d+x-B),c==="center"&&a==="left"&&this.drawCaret(t,r,i,n),r.lineTo(s,d+C),r.quadraticCurveTo(s,d,s+C,d),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,i=this.$animations,n=i&&i.x,a=i&&i.y;if(n||a){const c=N1[t.position].call(this,this._active,this._eventPosition);if(!c)return;const s=this._size=jS(this,t),d=Object.assign({},c,this._size),g=OS(r,t,d),x=QS(t,d,g,r);(n._to!==x.x||a._to!==x.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=s.width,this.height=s.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(r);const n={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=sA(r.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&s&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,n,r),h6(t,r.textDirection),a.y+=c.top,this.drawTitle(a,t,r),this.drawBody(a,t,r),this.drawFooter(a,t,r),A6(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const i=this._active,n=t.map(({datasetIndex:s,index:d})=>{const g=this.chart.getDatasetMeta(s);if(!g)throw new Error("Cannot find a dataset at index "+s);return{datasetIndex:s,element:g.data[d],index:d}}),a=!b_(i,n),c=this._positionChanged(n,r);(a||c)&&(this._active=n,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,a=this._active||[],c=this._getActiveElements(t,a,r,i),s=this._positionChanged(c,t),d=r||!b_(c,a)||s;return d&&(this._active=c,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),d}_getActiveElements(t,r,i,n){const a=this.options;if(t.type==="mouseout")return[];if(!n)return r.filter(s=>this.chart.data.datasets[s.datasetIndex]&&this.chart.getDatasetMeta(s.datasetIndex).controller.getParsed(s.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&c.reverse(),c}_positionChanged(t,r){const{caretX:i,caretY:n,options:a}=this,c=N1[a.position].call(this,t,r);return c!==!1&&(i!==c.x||n!==c.y)}}var $4={id:"tooltip",_element:VS,positioners:N1,afterInit(e,t,r){r&&(e.tooltip=new VS({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:R6},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const $z=(e,t,r,i)=>(typeof t=="string"?(r=e.push(t)-1,i.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function Xz(e,t,r,i){const n=e.indexOf(t);if(n===-1)return $z(e,t,r,i);const a=e.lastIndexOf(t);return n!==a?r:n}const Zz=(e,t)=>e===null?null:Xc(Math.round(e),0,t);function GS(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class X4 extends dg{static id="category";static defaults={ticks:{callback:GS}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const i=this.getLabels();for(const{index:n,label:a}of r)i[n]===a&&i.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(xs(t))return null;const i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:Xz(i,t,Bn(r,t),this._addedLabels),Zz(r,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const t=this.min,r=this.max,i=this.options.offset,n=[];let a=this.getLabels();a=t===0&&r===a.length-1?a:a.slice(t,r+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=r;c++)n.push({value:c});return n}getLabelForValue(t){return GS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Yz(e,t){const r=[],{bounds:n,step:a,min:c,max:s,precision:d,count:g,maxTicks:x,maxDigits:C,includeBounds:N}=e,B=a||1,M=x-1,{min:I,max:R}=t,D=!xs(c),V=!xs(s),G=!xs(g),Z=(R-I)/(C+1);let X=QC((R-I)/M/B)*B,le,ae,ce,se;if(X<1e-14&&!D&&!V)return[{value:I},{value:R}];se=Math.ceil(R/X)-Math.floor(I/X),se>M&&(X=QC(se*X/M/B)*B),xs(d)||(le=Math.pow(10,d),X=Math.ceil(X*le)/le),n==="ticks"?(ae=Math.floor(I/X)*X,ce=Math.ceil(R/X)*X):(ae=I,ce=R),D&&V&&a&&r7((s-c)/a,X/1e3)?(se=Math.round(Math.min((s-c)/X,x)),X=(s-c)/se,ae=c,ce=s):G?(ae=D?c:ae,ce=V?s:ce,se=g-1,X=(ce-ae)/se):(se=(ce-ae)/X,V1(se,Math.round(se),X/1e3)?se=Math.round(se):se=Math.ceil(se));const ue=Math.max(zC(X),zC(ae));le=Math.pow(10,xs(d)?ue:d),ae=Math.round(ae*le)/le,ce=Math.round(ce*le)/le;let re=0;for(D&&(N&&ae!==c?(r.push({value:c}),ae<c&&re++,V1(Math.round((ae+re*X)*le)/le,c,qS(c,Z,e))&&re++):ae<c&&re++);re<se;++re){const W=Math.round((ae+re*X)*le)/le;if(V&&W>s)break;r.push({value:W})}return V&&N&&ce!==s?r.length&&V1(r[r.length-1].value,s,qS(s,Z,e))?r[r.length-1].value=s:r.push({value:s}):(!V||ce===s)&&r.push({value:ce}),r}function qS(e,t,{horizontal:r,minRotation:i}){const n=ld(i),a=(r?Math.sin(n):Math.cos(n))||.001,c=.75*t*(""+e).length;return Math.min(t/a,c)}class Jz extends dg{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return xs(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:i}=this.getUserBounds();let{min:n,max:a}=this;const c=d=>n=r?n:d,s=d=>a=i?a:d;if(t){const d=Cf(n),g=Cf(a);d<0&&g<0?s(0):d>0&&g>0&&c(0)}if(n===a){let d=a===0?1:Math.abs(a*.05);s(a+d),t||c(n-d)}this.min=n,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:i}=t,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),r=r||11),r&&(n=Math.min(r,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},a=this._range||this,c=Yz(n,a);return t.bounds==="ticks"&&i7(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let r=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-r)/Math.max(t.length-1,1)/2;r-=n,i+=n}this._startValue=r,this._endValue=i,this._valueRange=i-r}getLabelForValue(t){return D4(t,this.chart.options.locale,this.options.ticks.format)}}class Z4 extends Jz{static id="linear";static defaults={ticks:{callback:i6.formatters.numeric}};determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=eu(t)?t:0,this.max=eu(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,i=ld(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,a.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const _2={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},rh=Object.keys(_2);function KS(e,t){return e-t}function WS(e,t){if(xs(t))return null;const r=e._adapter,{parser:i,round:n,isoWeekday:a}=e._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),eu(c)||(c=typeof i=="string"?r.parse(c,i):r.parse(c)),c===null?null:(n&&(c=n==="week"&&(mv(a)||a===!0)?r.startOf(c,"isoWeek",a):r.startOf(c,n)),+c)}function $S(e,t,r,i){const n=rh.length;for(let a=rh.indexOf(e);a<n-1;++a){const c=_2[rh[a]],s=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((r-t)/(s*c.size))<=i)return rh[a]}return rh[n-1]}function eH(e,t,r,i,n){for(let a=rh.length-1;a>=rh.indexOf(r);a--){const c=rh[a];if(_2[c].common&&e._adapter.diff(n,i,c)>=t-1)return c}return rh[r?rh.indexOf(r):0]}function tH(e){for(let t=rh.indexOf(e)+1,r=rh.length;t<r;++t)if(_2[rh[t]].common)return rh[t]}function XS(e,t,r){if(!r)e[t]=!0;else if(r.length){const{lo:i,hi:n}=L4(r,t),a=r[i]>=t?r[i]:r[n];e[a]=!0}}function rH(e,t,r,i){const n=e._adapter,a=+n.startOf(t[0].value,i),c=t[t.length-1].value;let s,d;for(s=a;s<=c;s=+n.add(s,1,i))d=r[s],d>=0&&(t[d].major=!0);return t}function ZS(e,t,r){const i=[],n={},a=t.length;let c,s;for(c=0;c<a;++c)s=t[c],n[s]=c,i.push({value:s,major:!1});return a===0||!r?i:rH(e,i,n,r)}class YS extends dg{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const i=t.time||(t.time={}),n=this._adapter=new z9._date(t.adapters.date);n.init(r),H1(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:WS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,i=t.time.unit||"day";let{min:n,max:a,minDefined:c,maxDefined:s}=this.getUserBounds();function d(g){!c&&!isNaN(g.min)&&(n=Math.min(n,g.min)),!s&&!isNaN(g.max)&&(a=Math.max(a,g.max))}(!c||!s)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),n=eu(n)&&!isNaN(n)?n:+r.startOf(Date.now(),i),a=eu(a)&&!isNaN(a)?a:+r.endOf(Date.now(),i)+1,this.min=Math.min(n,a-1),this.max=Math.max(n+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){const t=this.options,r=t.time,i=t.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const a=this.min,c=this.max,s=l7(n,a,c);return this._unit=r.unit||(i.autoSkip?$S(r.minUnit,this.min,this.max,this._getLabelCapacity(a)):eH(this,s.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:tH(this._unit),this.initOffsets(n),t.reverse&&s.reverse(),ZS(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,n,a;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?r=1-n:r=(this.getDecimalForValue(t[1])-n)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;r=Xc(r,0,c),i=Xc(i,0,c),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,r=this.min,i=this.max,n=this.options,a=n.time,c=a.unit||$S(a.minUnit,r,i,this._getLabelCapacity(r)),s=Bn(n.ticks.stepSize,1),d=c==="week"?a.isoWeekday:!1,g=mv(d)||d===!0,x={};let C=r,N,B;if(g&&(C=+t.startOf(C,"isoWeek",d)),C=+t.startOf(C,g?"day":c),t.diff(i,r,c)>1e5*s)throw new Error(r+" and "+i+" are too far apart with stepSize of "+s+" "+c);const M=n.ticks.source==="data"&&this.getDataTimestamps();for(N=C,B=0;N<i;N=+t.add(N,s,c),B++)XS(x,N,M);return(N===i||n.bounds==="ticks"||B===1)&&XS(x,N,M),Object.keys(x).sort(KS).map(I=>+I)}getLabelForValue(t){const r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){const n=this.options.time.displayFormats,a=this._unit,c=r||n[a];return this._adapter.format(t,c)}_tickFormatFunction(t,r,i,n){const a=this.options,c=a.ticks.callback;if(c)return ga(c,[t,r,i],this);const s=a.time.displayFormats,d=this._unit,g=this._majorUnit,x=d&&s[d],C=g&&s[g],N=i[r],B=g&&C&&N&&N.major;return this._adapter.format(t,n||(B?C:x))}generateTickLabels(t){let r,i,n;for(r=0,i=t.length;r<i;++r)n=t[r],n.label=this._tickFormatFunction(n.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){const r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,i=this.ctx.measureText(t).width,n=ld(this.isHorizontal()?r.maxRotation:r.minRotation),a=Math.cos(n),c=Math.sin(n),s=this._resolveTickFontOptions(0).size;return{w:i*a+s*c,h:i*c+s*a}}_getLabelCapacity(t){const r=this.options.time,i=r.displayFormats,n=i[r.unit]||i.millisecond,a=this._tickFormatFunction(t,0,ZS(this,[t],this._majorUnit),n),c=this._getLabelSize(a),s=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return s>0?s:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(r=0,i=n.length;r<i;++r)t=t.concat(n[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,i;if(t.length)return t;const n=this.getLabels();for(r=0,i=n.length;r<i;++r)t.push(WS(this,n[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return e6(t.sort(KS))}}function ay(e,t,r){let i=0,n=e.length-1,a,c,s,d;r?(t>=e[i].pos&&t<=e[n].pos&&({lo:i,hi:n}=a0(e,"pos",t)),{pos:a,time:s}=e[i],{pos:c,time:d}=e[n]):(t>=e[i].time&&t<=e[n].time&&({lo:i,hi:n}=a0(e,"time",t)),{time:a,pos:s}=e[i],{time:c,pos:d}=e[n]);const g=c-a;return g?s+(d-s)*(t-a)/g:s}class ale extends YS{static id="timeseries";static defaults=YS.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=ay(r,this.min),this._tableRange=ay(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:i}=this,n=[],a=[];let c,s,d,g,x;for(c=0,s=t.length;c<s;++c)g=t[c],g>=r&&g<=i&&n.push(g);if(n.length<2)return[{time:r,pos:0},{time:i,pos:1}];for(c=0,s=n.length;c<s;++c)x=n[c+1],d=n[c-1],g=n[c],Math.round((x+d)/2)!==g&&a.push({time:g,pos:c/(s-1)});return a}_generate(){const t=this.min,r=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(r)||i.length===1)&&i.push(r),i.sort((n,a)=>n-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),i=this.getLabelTimestamps();return r.length&&i.length?t=this.normalize(r.concat(i)):t=r.length?r:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ay(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return ay(this._table,i*this._tableRange+this._minPos,!0)}}const U6="label";function JS(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function iH(e,t){const r=e.options;r&&t&&Object.assign(r,t)}function j6(e,t){e.labels=t}function O6(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U6;const i=[];e.datasets=t.map(n=>{const a=e.datasets.find(c=>c[r]===n[r]);return!a||!n.data||i.includes(a)?{...n}:(i.push(a),Object.assign(a,n),a)})}function nH(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U6;const r={labels:[],datasets:[]};return j6(r,e.labels),O6(r,e.datasets,t),r}function sH(e,t){const{height:r=150,width:i=300,redraw:n=!1,datasetIdKey:a,type:c,data:s,options:d,plugins:g=[],fallbackContent:x,updateMode:C,...N}=e,B=_e.useRef(null),M=_e.useRef(null),I=()=>{B.current&&(M.current=new pg(B.current,{type:c,data:nH(s,a),options:d&&{...d},plugins:g}),JS(t,M.current))},R=()=>{JS(t,null),M.current&&(M.current.destroy(),M.current=null)};return _e.useEffect(()=>{!n&&M.current&&d&&iH(M.current,d)},[n,d]),_e.useEffect(()=>{!n&&M.current&&j6(M.current.config.data,s.labels)},[n,s.labels]),_e.useEffect(()=>{!n&&M.current&&s.datasets&&O6(M.current.config.data,s.datasets,a)},[n,s.datasets]),_e.useEffect(()=>{M.current&&(n?(R(),setTimeout(I)):M.current.update(C))},[n,d,s.labels,s.datasets,C]),_e.useEffect(()=>{M.current&&(R(),setTimeout(I))},[c]),_e.useEffect(()=>(I(),()=>R()),[]),On.createElement("canvas",{ref:B,role:"img",height:r,width:i,...N},x)}const aH=_e.forwardRef(sH);function Y4(e,t){return pg.register(t),_e.forwardRef((r,i)=>On.createElement(aH,{...r,ref:i,type:e}))}const oH=Y4("line",Q9),Mb=Y4("bar",U9),e3=Y4("doughnut",O9),lH="modulepreload",cH=function(e){return"/"+e},t3={},Pb=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){let d=function(g){return Promise.all(g.map(x=>Promise.resolve(x).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),s=c?.nonce||c?.getAttribute("nonce");n=d(r.map(g=>{if(g=cH(g),g in t3)return;t3[g]=!0;const x=g.endsWith(".css"),C=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${C}`))return;const N=document.createElement("link");if(N.rel=x?"stylesheet":lH,x||(N.as="script"),N.crossOrigin="",N.href=g,s&&N.setAttribute("nonce",s),document.head.appendChild(N),x)return new Promise((B,M)=>{N.addEventListener("load",B),N.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(c){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=c,window.dispatchEvent(s),!s.defaultPrevented)throw c}return n.then(c=>{for(const s of c||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})};function Ns(e){"@babel/helpers - typeof";return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(e)}var HA=Uint8Array,Fh=Uint16Array,J4=Int32Array,eB=new HA([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tB=new HA([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),r3=new HA([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Q6=function(e,t){for(var r=new Fh(31),i=0;i<31;++i)r[i]=t+=1<<e[i-1];for(var n=new J4(r[30]),i=1;i<30;++i)for(var a=r[i];a<r[i+1];++a)n[a]=a-r[i]<<5|i;return{b:r,r:n}},z6=Q6(eB,2),uH=z6.b,p5=z6.r;uH[28]=258,p5[258]=28;var hH=Q6(tB,0),i3=hH.r,m5=new Fh(32768);for(var va=0;va<32768;++va){var Zd=(va&43690)>>1|(va&21845)<<1;Zd=(Zd&52428)>>2|(Zd&13107)<<2,Zd=(Zd&61680)>>4|(Zd&3855)<<4,m5[va]=((Zd&65280)>>8|(Zd&255)<<8)>>1}var K1=function(e,t,r){for(var i=e.length,n=0,a=new Fh(t);n<i;++n)e[n]&&++a[e[n]-1];var c=new Fh(t);for(n=1;n<t;++n)c[n]=c[n-1]+a[n-1]<<1;var s;if(r){s=new Fh(1<<t);var d=15-t;for(n=0;n<i;++n)if(e[n])for(var g=n<<4|e[n],x=t-e[n],C=c[e[n]-1]++<<x,N=C|(1<<x)-1;C<=N;++C)s[m5[C]>>d]=g}else for(s=new Fh(i),n=0;n<i;++n)e[n]&&(s[n]=m5[c[e[n]-1]++]>>15-e[n]);return s},_0=new HA(288);for(var va=0;va<144;++va)_0[va]=8;for(var va=144;va<256;++va)_0[va]=9;for(var va=256;va<280;++va)_0[va]=7;for(var va=280;va<288;++va)_0[va]=8;var F_=new HA(32);for(var va=0;va<32;++va)F_[va]=5;var AH=K1(_0,9,0),fH=K1(F_,5,0),H6=function(e){return(e+7)/8|0},dH=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new HA(e.subarray(t,r))},Jf=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8},x1=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8,e[i+2]|=r>>16},Db=function(e,t){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var n=r.length,a=r.slice();if(!n)return{t:G6,l:0};if(n==1){var c=new HA(r[0].s+1);return c[r[0].s]=1,{t:c,l:1}}r.sort(function(X,le){return X.f-le.f}),r.push({s:-1,f:25001});var s=r[0],d=r[1],g=0,x=1,C=2;for(r[0]={s:-1,f:s.f+d.f,l:s,r:d};x!=n-1;)s=r[r[g].f<r[C].f?g++:C++],d=r[g!=x&&r[g].f<r[C].f?g++:C++],r[x++]={s:-1,f:s.f+d.f,l:s,r:d};for(var N=a[0].s,i=1;i<n;++i)a[i].s>N&&(N=a[i].s);var B=new Fh(N+1),M=g5(r[x-1],B,0);if(M>t){var i=0,I=0,R=M-t,D=1<<R;for(a.sort(function(le,ae){return B[ae.s]-B[le.s]||le.f-ae.f});i<n;++i){var V=a[i].s;if(B[V]>t)I+=D-(1<<M-B[V]),B[V]=t;else break}for(I>>=R;I>0;){var G=a[i].s;B[G]<t?I-=1<<t-B[G]++-1:++i}for(;i>=0&&I;--i){var Z=a[i].s;B[Z]==t&&(--B[Z],++I)}M=t}return{t:new HA(B),l:M}},g5=function(e,t,r){return e.s==-1?Math.max(g5(e.l,t,r+1),g5(e.r,t,r+1)):t[e.s]=r},n3=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Fh(++t),i=0,n=e[0],a=1,c=function(d){r[i++]=d},s=1;s<=t;++s)if(e[s]==n&&s!=t)++a;else{if(!n&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(n),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(n);a=1,n=e[s]}return{c:r.subarray(0,i),n:t}},y1=function(e,t){for(var r=0,i=0;i<t.length;++i)r+=e[i]*t[i];return r},V6=function(e,t,r){var i=r.length,n=H6(t+2);e[n]=i&255,e[n+1]=i>>8,e[n+2]=e[n]^255,e[n+3]=e[n+1]^255;for(var a=0;a<i;++a)e[n+a+4]=r[a];return(n+4+i)*8},s3=function(e,t,r,i,n,a,c,s,d,g,x){Jf(t,x++,r),++n[256];for(var C=Db(n,15),N=C.t,B=C.l,M=Db(a,15),I=M.t,R=M.l,D=n3(N),V=D.c,G=D.n,Z=n3(I),X=Z.c,le=Z.n,ae=new Fh(19),ce=0;ce<V.length;++ce)++ae[V[ce]&31];for(var ce=0;ce<X.length;++ce)++ae[X[ce]&31];for(var se=Db(ae,7),ue=se.t,re=se.l,W=19;W>4&&!ue[r3[W-1]];--W);var de=g+5<<3,Ee=y1(n,_0)+y1(a,F_)+c,Ne=y1(n,N)+y1(a,I)+c+14+3*W+y1(ae,ue)+2*ae[16]+3*ae[17]+7*ae[18];if(d>=0&&de<=Ee&&de<=Ne)return V6(t,x,e.subarray(d,d+g));var ge,Pe,Ye,Me;if(Jf(t,x,1+(Ne<Ee)),x+=2,Ne<Ee){ge=K1(N,B,0),Pe=N,Ye=K1(I,R,0),Me=I;var De=K1(ue,re,0);Jf(t,x,G-257),Jf(t,x+5,le-1),Jf(t,x+10,W-4),x+=14;for(var ce=0;ce<W;++ce)Jf(t,x+3*ce,ue[r3[ce]]);x+=3*W;for(var tt=[V,X],ee=0;ee<2;++ee)for(var fe=tt[ee],ce=0;ce<fe.length;++ce){var pe=fe[ce]&31;Jf(t,x,De[pe]),x+=ue[pe],pe>15&&(Jf(t,x,fe[ce]>>5&127),x+=fe[ce]>>12)}}else ge=AH,Pe=_0,Ye=fH,Me=F_;for(var ce=0;ce<s;++ce){var we=i[ce];if(we>255){var pe=we>>18&31;x1(t,x,ge[pe+257]),x+=Pe[pe+257],pe>7&&(Jf(t,x,we>>23&31),x+=eB[pe]);var Le=we&31;x1(t,x,Ye[Le]),x+=Me[Le],Le>3&&(x1(t,x,we>>5&8191),x+=tB[Le])}else x1(t,x,ge[we]),x+=Pe[we]}return x1(t,x,ge[256]),x+Pe[256]},pH=new J4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),G6=new HA(0),mH=function(e,t,r,i,n,a){var c=a.z||e.length,s=new HA(i+c+5*(1+Math.ceil(c/7e3))+n),d=s.subarray(i,s.length-n),g=a.l,x=(a.r||0)&7;if(t){x&&(d[0]=a.r>>3);for(var C=pH[t-1],N=C>>13,B=C&8191,M=(1<<r)-1,I=a.p||new Fh(32768),R=a.h||new Fh(M+1),D=Math.ceil(r/3),V=2*D,G=function(kt){return(e[kt]^e[kt+1]<<D^e[kt+2]<<V)&M},Z=new J4(25e3),X=new Fh(288),le=new Fh(32),ae=0,ce=0,se=a.i||0,ue=0,re=a.w||0,W=0;se+2<c;++se){var de=G(se),Ee=se&32767,Ne=R[de];if(I[Ee]=Ne,R[de]=Ee,re<=se){var ge=c-se;if((ae>7e3||ue>24576)&&(ge>423||!g)){x=s3(e,d,0,Z,X,le,ce,ue,W,se-W,x),ue=ae=ce=0,W=se;for(var Pe=0;Pe<286;++Pe)X[Pe]=0;for(var Pe=0;Pe<30;++Pe)le[Pe]=0}var Ye=2,Me=0,De=B,tt=Ee-Ne&32767;if(ge>2&&de==G(se-tt))for(var ee=Math.min(N,ge)-1,fe=Math.min(32767,se),pe=Math.min(258,ge);tt<=fe&&--De&&Ee!=Ne;){if(e[se+Ye]==e[se+Ye-tt]){for(var we=0;we<pe&&e[se+we]==e[se+we-tt];++we);if(we>Ye){if(Ye=we,Me=tt,we>ee)break;for(var Le=Math.min(tt,we-2),lt=0,Pe=0;Pe<Le;++Pe){var rt=se-tt+Pe&32767,gt=I[rt],dt=rt-gt&32767;dt>lt&&(lt=dt,Ne=rt)}}}Ee=Ne,Ne=I[Ee],tt+=Ee-Ne&32767}if(Me){Z[ue++]=268435456|p5[Ye]<<18|i3[Me];var qt=p5[Ye]&31,Te=i3[Me]&31;ce+=eB[qt]+tB[Te],++X[257+qt],++le[Te],re=se+Ye,++ae}else Z[ue++]=e[se],++X[e[se]]}}for(se=Math.max(se,re);se<c;++se)Z[ue++]=e[se],++X[e[se]];x=s3(e,d,g,Z,X,le,ce,ue,W,se-W,x),g||(a.r=x&7|d[x/8|0]<<3,x-=7,a.h=R,a.p=I,a.i=se,a.w=re)}else{for(var se=a.w||0;se<c+g;se+=65535){var at=se+65535;at>=c&&(d[x/8|0]=g,at=c),x=V6(d,x+1,e.subarray(se,at))}a.i=c}return dH(s,0,i+H6(x)+n)},q6=function(){var e=1,t=0;return{p:function(r){for(var i=e,n=t,a=r.length|0,c=0;c!=a;){for(var s=Math.min(c+2655,a);c<s;++c)n+=i+=r[c];i=(i&65535)+15*(i>>16),n=(n&65535)+15*(n>>16)}e=i,t=n},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},gH=function(e,t,r,i,n){if(!n&&(n={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),c=new HA(a.length+e.length);c.set(a),c.set(e,a.length),e=c,n.w=a.length}return mH(e,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,i,n)},K6=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},vH=function(e,t){var r=t.level,i=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=q6();n.p(t.dictionary),K6(e,2,n.d())}};function v5(e,t){t||(t={});var r=q6();r.p(e);var i=gH(e,t,t.dictionary?6:2,4);return vH(i,t),K6(i,i.length-4,r.d()),i}var xH=typeof TextDecoder<"u"&&new TextDecoder,yH=0;try{xH.decode(G6,{stream:!0}),yH=1}catch{}function _H(e){if(Array.isArray(e))return e}function bH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,n,a,c,s=[],d=!0,g=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(d=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);d=!0);}catch(x){g=!0,n=x}finally{try{if(!d&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(g)throw n}}return s}}function a3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function wH(e,t){if(e){if(typeof e=="string")return a3(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a3(e,t):void 0}}function BH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o3(e,t){return _H(e)||bH(e,t)||wH(e,t)||BH()}function l3(e,t="utf8"){return new TextDecoder(t).decode(e)}const CH=new TextEncoder;function SH(e){return CH.encode(e)}const EH=1024*8,TH=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),Rb={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class rB{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=EH,r={}){let i=!1;typeof t=="number"?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);const n=r.offset?r.offset>>>0:0,a=t.byteLength-n;let c=n;(ArrayBuffer.isView(t)||t instanceof rB)&&(t.byteLength!==t.buffer.byteLength&&(c=t.byteOffset+n),t=t.buffer),i?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const i=(this.offset+t)*2,n=new Uint8Array(i);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const i=Rb[r].BYTES_PER_ELEMENT*t,n=this.byteOffset+this.offset,a=this.buffer.slice(n,n+i);if(this.littleEndian===TH&&r!=="uint8"&&r!=="int8"){const s=new Uint8Array(this.buffer.slice(n,n+i));s.reverse();const d=new Rb[r](s.buffer);return this.offset+=i,d.reverse(),d}const c=new Rb[r](a);return this.offset+=i,c}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let i=0;i<t;i++)r+=this.readChar();return r}readUtf8(t=1){return l3(this.readBytes(t))}decodeText(t=1,r="utf8"){return l3(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(SH(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function gg(e){let t=e.length;for(;--t>=0;)e[t]=0}const FH=3,kH=258,W6=29,NH=256,IH=NH+1+W6,$6=30,LH=512,MH=new Array((IH+2)*2);gg(MH);const PH=new Array($6*2);gg(PH);const DH=new Array(LH);gg(DH);const RH=new Array(kH-FH+1);gg(RH);const UH=new Array(W6);gg(UH);const jH=new Array($6);gg(jH);const OH=(e,t,r,i)=>{let n=e&65535|0,a=e>>>16&65535|0,c=0;for(;r!==0;){c=r>2e3?2e3:r,r-=c;do n=n+t[i++]|0,a=a+n|0;while(--c);n%=65521,a%=65521}return n|a<<16|0};var x5=OH;const QH=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},zH=new Uint32Array(QH()),HH=(e,t,r,i)=>{const n=zH,a=i+r;e^=-1;for(let c=i;c<a;c++)e=e>>>8^n[(e^t[c])&255];return e^-1};var pf=HH,y5={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},X6={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const VH=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var GH=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const i in r)VH(r,i)&&(e[i]=r[i])}}return e},qH=e=>{let t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].length;const r=new Uint8Array(t);for(let i=0,n=0,a=e.length;i<a;i++){let c=e[i];r.set(c,n),n+=c.length}return r},Z6={assign:GH,flattenChunks:qH};let Y6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Y6=!1}const _v=new Uint8Array(256);for(let e=0;e<256;e++)_v[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;_v[254]=_v[254]=1;var KH=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,i,n,a,c=e.length,s=0;for(n=0;n<c;n++)r=e.charCodeAt(n),(r&64512)===55296&&n+1<c&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,n=0;a<s;n++)r=e.charCodeAt(n),(r&64512)===55296&&n+1<c&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};const WH=(e,t)=>{if(t<65534&&e.subarray&&Y6)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r};var $H=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i,n;const a=new Array(r*2);for(n=0,i=0;i<r;){let c=e[i++];if(c<128){a[n++]=c;continue}let s=_v[c];if(s>4){a[n++]=65533,i+=s-1;continue}for(c&=s===2?31:s===3?15:7;s>1&&i<r;)c=c<<6|e[i++]&63,s--;if(s>1){a[n++]=65533;continue}c<65536?a[n++]=c:(c-=65536,a[n++]=55296|c>>10&1023,a[n++]=56320|c&1023)}return WH(a,n)},XH=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+_v[e[r]]>t?r:t},_5={string2buf:KH,buf2string:$H,utf8border:XH};function ZH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var YH=ZH;const oy=16209,JH=16191;var eV=function(t,r){let i,n,a,c,s,d,g,x,C,N,B,M,I,R,D,V,G,Z,X,le,ae,ce,se,ue;const re=t.state;i=t.next_in,se=t.input,n=i+(t.avail_in-5),a=t.next_out,ue=t.output,c=a-(r-t.avail_out),s=a+(t.avail_out-257),d=re.dmax,g=re.wsize,x=re.whave,C=re.wnext,N=re.window,B=re.hold,M=re.bits,I=re.lencode,R=re.distcode,D=(1<<re.lenbits)-1,V=(1<<re.distbits)-1;e:do{M<15&&(B+=se[i++]<<M,M+=8,B+=se[i++]<<M,M+=8),G=I[B&D];t:for(;;){if(Z=G>>>24,B>>>=Z,M-=Z,Z=G>>>16&255,Z===0)ue[a++]=G&65535;else if(Z&16){X=G&65535,Z&=15,Z&&(M<Z&&(B+=se[i++]<<M,M+=8),X+=B&(1<<Z)-1,B>>>=Z,M-=Z),M<15&&(B+=se[i++]<<M,M+=8,B+=se[i++]<<M,M+=8),G=R[B&V];r:for(;;){if(Z=G>>>24,B>>>=Z,M-=Z,Z=G>>>16&255,Z&16){if(le=G&65535,Z&=15,M<Z&&(B+=se[i++]<<M,M+=8,M<Z&&(B+=se[i++]<<M,M+=8)),le+=B&(1<<Z)-1,le>d){t.msg="invalid distance too far back",re.mode=oy;break e}if(B>>>=Z,M-=Z,Z=a-c,le>Z){if(Z=le-Z,Z>x&&re.sane){t.msg="invalid distance too far back",re.mode=oy;break e}if(ae=0,ce=N,C===0){if(ae+=g-Z,Z<X){X-=Z;do ue[a++]=N[ae++];while(--Z);ae=a-le,ce=ue}}else if(C<Z){if(ae+=g+C-Z,Z-=C,Z<X){X-=Z;do ue[a++]=N[ae++];while(--Z);if(ae=0,C<X){Z=C,X-=Z;do ue[a++]=N[ae++];while(--Z);ae=a-le,ce=ue}}}else if(ae+=C-Z,Z<X){X-=Z;do ue[a++]=N[ae++];while(--Z);ae=a-le,ce=ue}for(;X>2;)ue[a++]=ce[ae++],ue[a++]=ce[ae++],ue[a++]=ce[ae++],X-=3;X&&(ue[a++]=ce[ae++],X>1&&(ue[a++]=ce[ae++]))}else{ae=a-le;do ue[a++]=ue[ae++],ue[a++]=ue[ae++],ue[a++]=ue[ae++],X-=3;while(X>2);X&&(ue[a++]=ue[ae++],X>1&&(ue[a++]=ue[ae++]))}}else if((Z&64)===0){G=R[(G&65535)+(B&(1<<Z)-1)];continue r}else{t.msg="invalid distance code",re.mode=oy;break e}break}}else if((Z&64)===0){G=I[(G&65535)+(B&(1<<Z)-1)];continue t}else if(Z&32){re.mode=JH;break e}else{t.msg="invalid literal/length code",re.mode=oy;break e}break}}while(i<n&&a<s);X=M>>3,i-=X,M-=X<<3,B&=(1<<M)-1,t.next_in=i,t.next_out=a,t.avail_in=i<n?5+(n-i):5-(i-n),t.avail_out=a<s?257+(s-a):257-(a-s),re.hold=B,re.bits=M};const bm=15,c3=852,u3=592,h3=0,Ub=1,A3=2,tV=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),rV=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),iV=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),nV=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),sV=(e,t,r,i,n,a,c,s)=>{const d=s.bits;let g=0,x=0,C=0,N=0,B=0,M=0,I=0,R=0,D=0,V=0,G,Z,X,le,ae,ce=null,se;const ue=new Uint16Array(bm+1),re=new Uint16Array(bm+1);let W=null,de,Ee,Ne;for(g=0;g<=bm;g++)ue[g]=0;for(x=0;x<i;x++)ue[t[r+x]]++;for(B=d,N=bm;N>=1&&ue[N]===0;N--);if(B>N&&(B=N),N===0)return n[a++]=1<<24|64<<16|0,n[a++]=1<<24|64<<16|0,s.bits=1,0;for(C=1;C<N&&ue[C]===0;C++);for(B<C&&(B=C),R=1,g=1;g<=bm;g++)if(R<<=1,R-=ue[g],R<0)return-1;if(R>0&&(e===h3||N!==1))return-1;for(re[1]=0,g=1;g<bm;g++)re[g+1]=re[g]+ue[g];for(x=0;x<i;x++)t[r+x]!==0&&(c[re[t[r+x]]++]=x);if(e===h3?(ce=W=c,se=20):e===Ub?(ce=tV,W=rV,se=257):(ce=iV,W=nV,se=0),V=0,x=0,g=C,ae=a,M=B,I=0,X=-1,D=1<<B,le=D-1,e===Ub&&D>c3||e===A3&&D>u3)return 1;for(;;){de=g-I,c[x]+1<se?(Ee=0,Ne=c[x]):c[x]>=se?(Ee=W[c[x]-se],Ne=ce[c[x]-se]):(Ee=96,Ne=0),G=1<<g-I,Z=1<<M,C=Z;do Z-=G,n[ae+(V>>I)+Z]=de<<24|Ee<<16|Ne|0;while(Z!==0);for(G=1<<g-1;V&G;)G>>=1;if(G!==0?(V&=G-1,V+=G):V=0,x++,--ue[g]===0){if(g===N)break;g=t[r+c[x]]}if(g>B&&(V&le)!==X){for(I===0&&(I=B),ae+=C,M=g-I,R=1<<M;M+I<N&&(R-=ue[M+I],!(R<=0));)M++,R<<=1;if(D+=1<<M,e===Ub&&D>c3||e===A3&&D>u3)return 1;X=V&le,n[X]=B<<24|M<<16|ae-a|0}}return V!==0&&(n[ae+V]=g-I<<24|64<<16|0),s.bits=B,0};var W1=sV;const aV=0,J6=1,eN=2,{Z_FINISH:f3,Z_BLOCK:oV,Z_TREES:ly,Z_OK:b0,Z_STREAM_END:lV,Z_NEED_DICT:cV,Z_STREAM_ERROR:aA,Z_DATA_ERROR:tN,Z_MEM_ERROR:rN,Z_BUF_ERROR:uV,Z_DEFLATED:d3}=X6,b2=16180,p3=16181,m3=16182,g3=16183,v3=16184,x3=16185,y3=16186,_3=16187,b3=16188,w3=16189,k_=16190,ed=16191,jb=16192,B3=16193,Ob=16194,C3=16195,S3=16196,E3=16197,T3=16198,cy=16199,uy=16200,F3=16201,k3=16202,N3=16203,I3=16204,L3=16205,Qb=16206,M3=16207,P3=16208,Fa=16209,iN=16210,nN=16211,hV=852,AV=592,fV=15,dV=fV,D3=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function pV(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const E0=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<b2||t.mode>nN?1:0},sN=e=>{if(E0(e))return aA;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=b2,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(hV),t.distcode=t.distdyn=new Int32Array(AV),t.sane=1,t.back=-1,b0},aN=e=>{if(E0(e))return aA;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,sN(e)},oN=(e,t)=>{let r;if(E0(e))return aA;const i=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?aA:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,aN(e))},lN=(e,t)=>{if(!e)return aA;const r=new pV;e.state=r,r.strm=e,r.window=null,r.mode=b2;const i=oN(e,t);return i!==b0&&(e.state=null),i},mV=e=>lN(e,dV);let R3=!0,zb,Hb;const gV=e=>{if(R3){zb=new Int32Array(512),Hb=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(W1(J6,e.lens,0,288,zb,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;W1(eN,e.lens,0,32,Hb,0,e.work,{bits:5}),R3=!1}e.lencode=zb,e.lenbits=9,e.distcode=Hb,e.distbits=5},cN=(e,t,r,i)=>{let n;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>i&&(n=i),a.window.set(t.subarray(r-i,r-i+n),a.wnext),i-=n,i?(a.window.set(t.subarray(r-i,r),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0},vV=(e,t)=>{let r,i,n,a,c,s,d,g,x,C,N,B,M,I,R=0,D,V,G,Z,X,le,ae,ce;const se=new Uint8Array(4);let ue,re;const W=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(E0(e)||!e.output||!e.input&&e.avail_in!==0)return aA;r=e.state,r.mode===ed&&(r.mode=jb),c=e.next_out,n=e.output,d=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,g=r.hold,x=r.bits,C=s,N=d,ce=b0;e:for(;;)switch(r.mode){case b2:if(r.wrap===0){r.mode=jb;break}for(;x<16;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}if(r.wrap&2&&g===35615){r.wbits===0&&(r.wbits=15),r.check=0,se[0]=g&255,se[1]=g>>>8&255,r.check=pf(r.check,se,2,0),g=0,x=0,r.mode=p3;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((g&255)<<8)+(g>>8))%31){e.msg="incorrect header check",r.mode=Fa;break}if((g&15)!==d3){e.msg="unknown compression method",r.mode=Fa;break}if(g>>>=4,x-=4,ae=(g&15)+8,r.wbits===0&&(r.wbits=ae),ae>15||ae>r.wbits){e.msg="invalid window size",r.mode=Fa;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=g&512?w3:ed,g=0,x=0;break;case p3:for(;x<16;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}if(r.flags=g,(r.flags&255)!==d3){e.msg="unknown compression method",r.mode=Fa;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Fa;break}r.head&&(r.head.text=g>>8&1),r.flags&512&&r.wrap&4&&(se[0]=g&255,se[1]=g>>>8&255,r.check=pf(r.check,se,2,0)),g=0,x=0,r.mode=m3;case m3:for(;x<32;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}r.head&&(r.head.time=g),r.flags&512&&r.wrap&4&&(se[0]=g&255,se[1]=g>>>8&255,se[2]=g>>>16&255,se[3]=g>>>24&255,r.check=pf(r.check,se,4,0)),g=0,x=0,r.mode=g3;case g3:for(;x<16;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}r.head&&(r.head.xflags=g&255,r.head.os=g>>8),r.flags&512&&r.wrap&4&&(se[0]=g&255,se[1]=g>>>8&255,r.check=pf(r.check,se,2,0)),g=0,x=0,r.mode=v3;case v3:if(r.flags&1024){for(;x<16;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}r.length=g,r.head&&(r.head.extra_len=g),r.flags&512&&r.wrap&4&&(se[0]=g&255,se[1]=g>>>8&255,r.check=pf(r.check,se,2,0)),g=0,x=0}else r.head&&(r.head.extra=null);r.mode=x3;case x3:if(r.flags&1024&&(B=r.length,B>s&&(B=s),B&&(r.head&&(ae=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(i.subarray(a,a+B),ae)),r.flags&512&&r.wrap&4&&(r.check=pf(r.check,i,B,a)),s-=B,a+=B,r.length-=B),r.length))break e;r.length=0,r.mode=y3;case y3:if(r.flags&2048){if(s===0)break e;B=0;do ae=i[a+B++],r.head&&ae&&r.length<65536&&(r.head.name+=String.fromCharCode(ae));while(ae&&B<s);if(r.flags&512&&r.wrap&4&&(r.check=pf(r.check,i,B,a)),s-=B,a+=B,ae)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=_3;case _3:if(r.flags&4096){if(s===0)break e;B=0;do ae=i[a+B++],r.head&&ae&&r.length<65536&&(r.head.comment+=String.fromCharCode(ae));while(ae&&B<s);if(r.flags&512&&r.wrap&4&&(r.check=pf(r.check,i,B,a)),s-=B,a+=B,ae)break e}else r.head&&(r.head.comment=null);r.mode=b3;case b3:if(r.flags&512){for(;x<16;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}if(r.wrap&4&&g!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Fa;break}g=0,x=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=ed;break;case w3:for(;x<32;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}e.adler=r.check=D3(g),g=0,x=0,r.mode=k_;case k_:if(r.havedict===0)return e.next_out=c,e.avail_out=d,e.next_in=a,e.avail_in=s,r.hold=g,r.bits=x,cV;e.adler=r.check=1,r.mode=ed;case ed:if(t===oV||t===ly)break e;case jb:if(r.last){g>>>=x&7,x-=x&7,r.mode=Qb;break}for(;x<3;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}switch(r.last=g&1,g>>>=1,x-=1,g&3){case 0:r.mode=B3;break;case 1:if(gV(r),r.mode=cy,t===ly){g>>>=2,x-=2;break e}break;case 2:r.mode=S3;break;case 3:e.msg="invalid block type",r.mode=Fa}g>>>=2,x-=2;break;case B3:for(g>>>=x&7,x-=x&7;x<32;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}if((g&65535)!==(g>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Fa;break}if(r.length=g&65535,g=0,x=0,r.mode=Ob,t===ly)break e;case Ob:r.mode=C3;case C3:if(B=r.length,B){if(B>s&&(B=s),B>d&&(B=d),B===0)break e;n.set(i.subarray(a,a+B),c),s-=B,a+=B,d-=B,c+=B,r.length-=B;break}r.mode=ed;break;case S3:for(;x<14;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}if(r.nlen=(g&31)+257,g>>>=5,x-=5,r.ndist=(g&31)+1,g>>>=5,x-=5,r.ncode=(g&15)+4,g>>>=4,x-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Fa;break}r.have=0,r.mode=E3;case E3:for(;r.have<r.ncode;){for(;x<3;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}r.lens[W[r.have++]]=g&7,g>>>=3,x-=3}for(;r.have<19;)r.lens[W[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ue={bits:r.lenbits},ce=W1(aV,r.lens,0,19,r.lencode,0,r.work,ue),r.lenbits=ue.bits,ce){e.msg="invalid code lengths set",r.mode=Fa;break}r.have=0,r.mode=T3;case T3:for(;r.have<r.nlen+r.ndist;){for(;R=r.lencode[g&(1<<r.lenbits)-1],D=R>>>24,V=R>>>16&255,G=R&65535,!(D<=x);){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}if(G<16)g>>>=D,x-=D,r.lens[r.have++]=G;else{if(G===16){for(re=D+2;x<re;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}if(g>>>=D,x-=D,r.have===0){e.msg="invalid bit length repeat",r.mode=Fa;break}ae=r.lens[r.have-1],B=3+(g&3),g>>>=2,x-=2}else if(G===17){for(re=D+3;x<re;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}g>>>=D,x-=D,ae=0,B=3+(g&7),g>>>=3,x-=3}else{for(re=D+7;x<re;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}g>>>=D,x-=D,ae=0,B=11+(g&127),g>>>=7,x-=7}if(r.have+B>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Fa;break}for(;B--;)r.lens[r.have++]=ae}}if(r.mode===Fa)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Fa;break}if(r.lenbits=9,ue={bits:r.lenbits},ce=W1(J6,r.lens,0,r.nlen,r.lencode,0,r.work,ue),r.lenbits=ue.bits,ce){e.msg="invalid literal/lengths set",r.mode=Fa;break}if(r.distbits=6,r.distcode=r.distdyn,ue={bits:r.distbits},ce=W1(eN,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ue),r.distbits=ue.bits,ce){e.msg="invalid distances set",r.mode=Fa;break}if(r.mode=cy,t===ly)break e;case cy:r.mode=uy;case uy:if(s>=6&&d>=258){e.next_out=c,e.avail_out=d,e.next_in=a,e.avail_in=s,r.hold=g,r.bits=x,eV(e,N),c=e.next_out,n=e.output,d=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,g=r.hold,x=r.bits,r.mode===ed&&(r.back=-1);break}for(r.back=0;R=r.lencode[g&(1<<r.lenbits)-1],D=R>>>24,V=R>>>16&255,G=R&65535,!(D<=x);){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}if(V&&(V&240)===0){for(Z=D,X=V,le=G;R=r.lencode[le+((g&(1<<Z+X)-1)>>Z)],D=R>>>24,V=R>>>16&255,G=R&65535,!(Z+D<=x);){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}g>>>=Z,x-=Z,r.back+=Z}if(g>>>=D,x-=D,r.back+=D,r.length=G,V===0){r.mode=L3;break}if(V&32){r.back=-1,r.mode=ed;break}if(V&64){e.msg="invalid literal/length code",r.mode=Fa;break}r.extra=V&15,r.mode=F3;case F3:if(r.extra){for(re=r.extra;x<re;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,x-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=k3;case k3:for(;R=r.distcode[g&(1<<r.distbits)-1],D=R>>>24,V=R>>>16&255,G=R&65535,!(D<=x);){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}if((V&240)===0){for(Z=D,X=V,le=G;R=r.distcode[le+((g&(1<<Z+X)-1)>>Z)],D=R>>>24,V=R>>>16&255,G=R&65535,!(Z+D<=x);){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}g>>>=Z,x-=Z,r.back+=Z}if(g>>>=D,x-=D,r.back+=D,V&64){e.msg="invalid distance code",r.mode=Fa;break}r.offset=G,r.extra=V&15,r.mode=N3;case N3:if(r.extra){for(re=r.extra;x<re;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,x-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Fa;break}r.mode=I3;case I3:if(d===0)break e;if(B=N-d,r.offset>B){if(B=r.offset-B,B>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Fa;break}B>r.wnext?(B-=r.wnext,M=r.wsize-B):M=r.wnext-B,B>r.length&&(B=r.length),I=r.window}else I=n,M=c-r.offset,B=r.length;B>d&&(B=d),d-=B,r.length-=B;do n[c++]=I[M++];while(--B);r.length===0&&(r.mode=uy);break;case L3:if(d===0)break e;n[c++]=r.length,d--,r.mode=uy;break;case Qb:if(r.wrap){for(;x<32;){if(s===0)break e;s--,g|=i[a++]<<x,x+=8}if(N-=d,e.total_out+=N,r.total+=N,r.wrap&4&&N&&(e.adler=r.check=r.flags?pf(r.check,n,N,c-N):x5(r.check,n,N,c-N)),N=d,r.wrap&4&&(r.flags?g:D3(g))!==r.check){e.msg="incorrect data check",r.mode=Fa;break}g=0,x=0}r.mode=M3;case M3:if(r.wrap&&r.flags){for(;x<32;){if(s===0)break e;s--,g+=i[a++]<<x,x+=8}if(r.wrap&4&&g!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Fa;break}g=0,x=0}r.mode=P3;case P3:ce=lV;break e;case Fa:ce=tN;break e;case iN:return rN;case nN:default:return aA}return e.next_out=c,e.avail_out=d,e.next_in=a,e.avail_in=s,r.hold=g,r.bits=x,(r.wsize||N!==e.avail_out&&r.mode<Fa&&(r.mode<Qb||t!==f3))&&cN(e,e.output,e.next_out,N-e.avail_out),C-=e.avail_in,N-=e.avail_out,e.total_in+=C,e.total_out+=N,r.total+=N,r.wrap&4&&N&&(e.adler=r.check=r.flags?pf(r.check,n,N,e.next_out-N):x5(r.check,n,N,e.next_out-N)),e.data_type=r.bits+(r.last?64:0)+(r.mode===ed?128:0)+(r.mode===cy||r.mode===Ob?256:0),(C===0&&N===0||t===f3)&&ce===b0&&(ce=uV),ce},xV=e=>{if(E0(e))return aA;let t=e.state;return t.window&&(t.window=null),e.state=null,b0},yV=(e,t)=>{if(E0(e))return aA;const r=e.state;return(r.wrap&2)===0?aA:(r.head=t,t.done=!1,b0)},_V=(e,t)=>{const r=t.length;let i,n,a;return E0(e)||(i=e.state,i.wrap!==0&&i.mode!==k_)?aA:i.mode===k_&&(n=1,n=x5(n,t,r,0),n!==i.check)?tN:(a=cN(e,t,r,r),a?(i.mode=iN,rN):(i.havedict=1,b0))};var bV=aN,wV=oN,BV=sN,CV=mV,SV=lN,EV=vV,TV=xV,FV=yV,kV=_V,NV="pako inflate (from Nodeca project)",ad={inflateReset:bV,inflateReset2:wV,inflateResetKeep:BV,inflateInit:CV,inflateInit2:SV,inflate:EV,inflateEnd:TV,inflateGetHeader:FV,inflateSetDictionary:kV,inflateInfo:NV};function IV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var LV=IV;const uN=Object.prototype.toString,{Z_NO_FLUSH:MV,Z_FINISH:PV,Z_OK:bv,Z_STREAM_END:Vb,Z_NEED_DICT:Gb,Z_STREAM_ERROR:DV,Z_DATA_ERROR:U3,Z_MEM_ERROR:RV}=X6;function qv(e){this.options=Z6.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new YH,this.strm.avail_out=0;let r=ad.inflateInit2(this.strm,t.windowBits);if(r!==bv)throw new Error(y5[r]);if(this.header=new LV,ad.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=_5.string2buf(t.dictionary):uN.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=ad.inflateSetDictionary(this.strm,t.dictionary),r!==bv)))throw new Error(y5[r])}qv.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let a,c,s;if(this.ended)return!1;for(t===~~t?c=t:c=t===!0?PV:MV,uN.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),a=ad.inflate(r,c),a===Gb&&n&&(a=ad.inflateSetDictionary(r,n),a===bv?a=ad.inflate(r,c):a===U3&&(a=Gb));r.avail_in>0&&a===Vb&&r.state.wrap>0&&e[r.next_in]!==0;)ad.inflateReset(r),a=ad.inflate(r,c);switch(a){case DV:case U3:case Gb:case RV:return this.onEnd(a),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(r.avail_out===0||a===Vb))if(this.options.to==="string"){let d=_5.utf8border(r.output,r.next_out),g=r.next_out-d,x=_5.buf2string(r.output,d);r.next_out=g,r.avail_out=i-g,g&&r.output.set(r.output.subarray(d,d+g),0),this.onData(x)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===bv&&s===0)){if(a===Vb)return a=ad.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};qv.prototype.onData=function(e){this.chunks.push(e)};qv.prototype.onEnd=function(e){e===bv&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Z6.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function UV(e,t){const r=new qv(t);if(r.push(e),r.err)throw r.msg||y5[r.err];return r.result}var jV=qv,OV=UV,QV={Inflate:jV,inflate:OV};const{Inflate:zV,inflate:HV}=QV;var j3=zV,VV=HV;const hN=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;hN[e]=t}const O3=4294967295;function GV(e,t,r){let i=e;for(let n=0;n<r;n++)i=hN[(i^t[n])&255]^i>>>8;return i}function qV(e,t){return(GV(O3,e,t)^O3)>>>0}function Q3(e,t,r){const i=e.readUint32(),n=qV(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(n!==i)throw new Error(`CRC mismatch for chunk ${r}. Expected ${i}, found ${n}`)}function AN(e,t,r){for(let i=0;i<r;i++)t[i]=e[i]}function fN(e,t,r,i){let n=0;for(;n<i;n++)t[n]=e[n];for(;n<r;n++)t[n]=e[n]+t[n-i]&255}function dN(e,t,r,i){let n=0;if(r.length===0)for(;n<i;n++)t[n]=e[n];else for(;n<i;n++)t[n]=e[n]+r[n]&255}function pN(e,t,r,i,n){let a=0;if(r.length===0){for(;a<n;a++)t[a]=e[a];for(;a<i;a++)t[a]=e[a]+(t[a-n]>>1)&255}else{for(;a<n;a++)t[a]=e[a]+(r[a]>>1)&255;for(;a<i;a++)t[a]=e[a]+(t[a-n]+r[a]>>1)&255}}function mN(e,t,r,i,n){let a=0;if(r.length===0){for(;a<n;a++)t[a]=e[a];for(;a<i;a++)t[a]=e[a]+t[a-n]&255}else{for(;a<n;a++)t[a]=e[a]+r[a]&255;for(;a<i;a++)t[a]=e[a]+KV(t[a-n],r[a],r[a-n])&255}}function KV(e,t,r){const i=e+t-r,n=Math.abs(i-e),a=Math.abs(i-t),c=Math.abs(i-r);return n<=a&&n<=c?e:a<=c?t:r}function WV(e,t,r,i,n,a){switch(e){case 0:AN(t,r,n);break;case 1:fN(t,r,n,a);break;case 2:dN(t,r,i,n);break;case 3:pN(t,r,i,n,a);break;case 4:mN(t,r,i,n,a);break;default:throw new Error(`Unsupported filter: ${e}`)}}const $V=new Uint16Array([255]),XV=new Uint8Array($V.buffer),ZV=XV[0]===255;function YV(e){const{data:t,width:r,height:i,channels:n,depth:a}=e,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],s=Math.ceil(a/8)*n,d=new Uint8Array(i*r*s);let g=0;for(let x=0;x<7;x++){const C=c[x],N=Math.ceil((r-C.x)/C.xStep),B=Math.ceil((i-C.y)/C.yStep);if(N<=0||B<=0)continue;const M=N*s,I=new Uint8Array(M);for(let R=0;R<B;R++){const D=t[g++],V=t.subarray(g,g+M);g+=M;const G=new Uint8Array(M);WV(D,V,G,I,M,s),I.set(G);for(let Z=0;Z<N;Z++){const X=C.x+Z*C.xStep,le=C.y+R*C.yStep;if(!(X>=r||le>=i))for(let ae=0;ae<s;ae++)d[(le*r+X)*s+ae]=G[Z*s+ae]}}}if(a===16){const x=new Uint16Array(d.buffer);if(ZV)for(let C=0;C<x.length;C++)x[C]=JV(x[C]);return x}else return d}function JV(e){return(e&255)<<8|e>>8&255}const eG=new Uint16Array([255]),tG=new Uint8Array(eG.buffer),rG=tG[0]===255,iG=new Uint8Array(0);function z3(e){const{data:t,width:r,height:i,channels:n,depth:a}=e,c=Math.ceil(a/8)*n,s=Math.ceil(a/8*n*r),d=new Uint8Array(i*s);let g=iG,x=0,C,N;for(let B=0;B<i;B++){switch(C=t.subarray(x+1,x+1+s),N=d.subarray(B*s,(B+1)*s),t[x]){case 0:AN(C,N,s);break;case 1:fN(C,N,s,c);break;case 2:dN(C,N,g,s);break;case 3:pN(C,N,g,s,c);break;case 4:mN(C,N,g,s,c);break;default:throw new Error(`Unsupported filter: ${t[x]}`)}g=N,x+=s+1}if(a===16){const B=new Uint16Array(d.buffer);if(rG)for(let M=0;M<B.length;M++)B[M]=nG(B[M]);return B}else return d}function nG(e){return(e&255)<<8|e>>8&255}const o_=Uint8Array.of(137,80,78,71,13,10,26,10);function H3(e){if(!sG(e.readBytes(o_.length)))throw new Error("wrong PNG signature")}function sG(e){if(e.length<o_.length)return!1;for(let t=0;t<o_.length;t++)if(e[t]!==o_[t])return!1;return!0}const aG="tEXt",oG=0,gN=new TextDecoder("latin1");function lG(e){if(uG(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const cG=/^[\u0000-\u00FF]*$/;function uG(e){if(!cG.test(e))throw new Error("invalid latin1 text")}function hG(e,t,r){const i=vN(t);e[i]=AG(t,r-i.length-1)}function vN(e){for(e.mark();e.readByte()!==oG;);const t=e.offset;e.reset();const r=gN.decode(e.readBytes(t-e.offset-1));return e.skip(1),lG(r),r}function AG(e,t){return gN.decode(e.readBytes(t))}const Bh={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},qb={UNKNOWN:-1,DEFLATE:0},V3={UNKNOWN:-1,ADAPTIVE:0},Kb={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},hy={NONE:0,BACKGROUND:1,PREVIOUS:2},Wb={SOURCE:0,OVER:1};class fG extends rB{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new j3,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=qb.UNKNOWN,this._filterMethod=V3.UNKNOWN,this._interlaceMethod=Kb.UNKNOWN,this._colorType=Bh.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(H3(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(H3(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case aG:hG(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Q3(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Q3(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=dG(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Bh.GREYSCALE:i=1;break;case Bh.TRUECOLOUR:i=3;break;case Bh.INDEXED_COLOUR:i=1;break;case Bh.GREYSCALE_ALPHA:i=2;break;case Bh.TRUECOLOUR_ALPHA:i=4;break;case Bh.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==qb.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let n=0;n<r;n++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Bh.GREYSCALE:case Bh.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case Bh.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Bh.UNKNOWN:case Bh.GREYSCALE_ALPHA:case Bh.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=vN(this),i=this.readUint8();if(i!==qb.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const n=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:VV(n)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=z3({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const n=this._apng.frames.at(t-1);this.disposeFrame(i,n,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,i){switch(t.disposeOp){case hy.NONE:break;case hy.BACKGROUND:for(let n=0;n<this._png.height;n++)for(let a=0;a<this._png.width;a++){const c=(n*t.width+a)*this._png.channels;for(let s=0;s<this._png.channels;s++)i.data[c+s]=0}break;case hy.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const i=1<<this._png.depth,n=(a,c)=>{const s=((a+r.yOffset)*this._png.width+r.xOffset+c)*this._png.channels,d=(a*r.width+c)*this._png.channels;return{index:s,frameIndex:d}};switch(r.blendOp){case Wb.SOURCE:for(let a=0;a<r.height;a++)for(let c=0;c<r.width;c++){const{index:s,frameIndex:d}=n(a,c);for(let g=0;g<this._png.channels;g++)t.data[s+g]=r.data[d+g]}break;case Wb.OVER:for(let a=0;a<r.height;a++)for(let c=0;c<r.width;c++){const{index:s,frameIndex:d}=n(a,c);for(let g=0;g<this._png.channels;g++){const x=r.data[d+this._png.channels-1]/i,C=g%(this._png.channels-1)===0?1:r.data[d+g],N=Math.floor(x*C+(1-x)*t.data[s+g]);t.data[s+g]+=N}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==V3.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Kb.NO_INTERLACE)this._png.data=z3({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Kb.ADAM7)this._png.data=YV({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:hy.NONE,blendOp:Wb.SOURCE,data:t}),this._inflator=new j3,this._writingDataChunks=!1}}function dG(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var G3;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(G3||(G3={}));function pG(e,t){return new fG(e,t).decode()}var en=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function $b(){en.console&&typeof en.console.log=="function"&&en.console.log.apply(en.console,arguments)}var Js={log:$b,warn:function(e){en.console&&(typeof en.console.warn=="function"?en.console.warn.apply(en.console,arguments):$b.call(null,arguments))},error:function(e){en.console&&(typeof en.console.error=="function"?en.console.error.apply(en.console,arguments):$b(e))}};function Xb(e,t,r){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){t0(i.response,t,r)},i.onerror=function(){Js.error("could not download file")},i.send()}function q3(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ay(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var t0=en.saveAs||((typeof window>"u"?"undefined":Ns(window))!=="object"||window!==en?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var i=en.URL||en.webkitURL,n=document.createElement("a");t=t||e.name||"download",n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?q3(n.href)?Xb(e,t,r):Ay(n,n.target="_blank"):Ay(n)):(n.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(n.href)},4e4),setTimeout(function(){Ay(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(q3(e))Xb(e,t,r);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){Ay(i)})}else navigator.msSaveOrOpenBlob(function(n,a){return a===void 0?a={autoBom:!1}:Ns(a)!=="object"&&(Js.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(e,r),t)}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return Xb(e,t,r);var n=e.type==="application/octet-stream",a=/constructor/i.test(en.HTMLElement)||en.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||n&&a)&&(typeof FileReader>"u"?"undefined":Ns(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var x=s.result;x=c?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=x:location=x,i=null},s.readAsDataURL(e)}else{var d=en.URL||en.webkitURL,g=d.createObjectURL(e);i?i.location=g:location.href=g,i=null,setTimeout(function(){d.revokeObjectURL(g)},4e4)}});function xN(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],i=0;i<r.length;i++){var n=r[i].re,a=r[i].process,c=n.exec(e);c&&(t=a(c),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),d=this.g.toString(16),g=this.b.toString(16);return s.length==1&&(s="0"+s),d.length==1&&(d="0"+d),g.length==1&&(g="0"+g),"#"+s+d+g}}var l_=en.atob.bind(en),K3=en.btoa.bind(en);function Zb(e,t){var r=e[0],i=e[1],n=e[2],a=e[3];r=jc(r,i,n,a,t[0],7,-680876936),a=jc(a,r,i,n,t[1],12,-389564586),n=jc(n,a,r,i,t[2],17,606105819),i=jc(i,n,a,r,t[3],22,-1044525330),r=jc(r,i,n,a,t[4],7,-176418897),a=jc(a,r,i,n,t[5],12,1200080426),n=jc(n,a,r,i,t[6],17,-1473231341),i=jc(i,n,a,r,t[7],22,-45705983),r=jc(r,i,n,a,t[8],7,1770035416),a=jc(a,r,i,n,t[9],12,-1958414417),n=jc(n,a,r,i,t[10],17,-42063),i=jc(i,n,a,r,t[11],22,-1990404162),r=jc(r,i,n,a,t[12],7,1804603682),a=jc(a,r,i,n,t[13],12,-40341101),n=jc(n,a,r,i,t[14],17,-1502002290),r=Oc(r,i=jc(i,n,a,r,t[15],22,1236535329),n,a,t[1],5,-165796510),a=Oc(a,r,i,n,t[6],9,-1069501632),n=Oc(n,a,r,i,t[11],14,643717713),i=Oc(i,n,a,r,t[0],20,-373897302),r=Oc(r,i,n,a,t[5],5,-701558691),a=Oc(a,r,i,n,t[10],9,38016083),n=Oc(n,a,r,i,t[15],14,-660478335),i=Oc(i,n,a,r,t[4],20,-405537848),r=Oc(r,i,n,a,t[9],5,568446438),a=Oc(a,r,i,n,t[14],9,-1019803690),n=Oc(n,a,r,i,t[3],14,-187363961),i=Oc(i,n,a,r,t[8],20,1163531501),r=Oc(r,i,n,a,t[13],5,-1444681467),a=Oc(a,r,i,n,t[2],9,-51403784),n=Oc(n,a,r,i,t[7],14,1735328473),r=Qc(r,i=Oc(i,n,a,r,t[12],20,-1926607734),n,a,t[5],4,-378558),a=Qc(a,r,i,n,t[8],11,-2022574463),n=Qc(n,a,r,i,t[11],16,1839030562),i=Qc(i,n,a,r,t[14],23,-35309556),r=Qc(r,i,n,a,t[1],4,-1530992060),a=Qc(a,r,i,n,t[4],11,1272893353),n=Qc(n,a,r,i,t[7],16,-155497632),i=Qc(i,n,a,r,t[10],23,-1094730640),r=Qc(r,i,n,a,t[13],4,681279174),a=Qc(a,r,i,n,t[0],11,-358537222),n=Qc(n,a,r,i,t[3],16,-722521979),i=Qc(i,n,a,r,t[6],23,76029189),r=Qc(r,i,n,a,t[9],4,-640364487),a=Qc(a,r,i,n,t[12],11,-421815835),n=Qc(n,a,r,i,t[15],16,530742520),r=zc(r,i=Qc(i,n,a,r,t[2],23,-995338651),n,a,t[0],6,-198630844),a=zc(a,r,i,n,t[7],10,1126891415),n=zc(n,a,r,i,t[14],15,-1416354905),i=zc(i,n,a,r,t[5],21,-57434055),r=zc(r,i,n,a,t[12],6,1700485571),a=zc(a,r,i,n,t[3],10,-1894986606),n=zc(n,a,r,i,t[10],15,-1051523),i=zc(i,n,a,r,t[1],21,-2054922799),r=zc(r,i,n,a,t[8],6,1873313359),a=zc(a,r,i,n,t[15],10,-30611744),n=zc(n,a,r,i,t[6],15,-1560198380),i=zc(i,n,a,r,t[13],21,1309151649),r=zc(r,i,n,a,t[4],6,-145523070),a=zc(a,r,i,n,t[11],10,-1120210379),n=zc(n,a,r,i,t[2],15,718787259),i=zc(i,n,a,r,t[9],21,-343485551),e[0]=lp(r,e[0]),e[1]=lp(i,e[1]),e[2]=lp(n,e[2]),e[3]=lp(a,e[3])}function w2(e,t,r,i,n,a){return t=lp(lp(t,e),lp(i,a)),lp(t<<n|t>>>32-n,r)}function jc(e,t,r,i,n,a,c){return w2(t&r|~t&i,e,t,n,a,c)}function Oc(e,t,r,i,n,a,c){return w2(t&i|r&~i,e,t,n,a,c)}function Qc(e,t,r,i,n,a,c){return w2(t^r^i,e,t,n,a,c)}function zc(e,t,r,i,n,a,c){return w2(r^(t|~i),e,t,n,a,c)}function yN(e){var t,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Zb(i,mG(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(Zb(i,n),t=0;t<16;t++)n[t]=0;return n[14]=8*r,Zb(i,n),i}function mG(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var W3="0123456789abcdef".split("");function gG(e){for(var t="",r=0;r<4;r++)t+=W3[e>>8*r+4&15]+W3[e>>8*r&15];return t}function vG(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function b5(e){return yN(e).map(vG).join("")}var xG=function(e){for(var t=0;t<e.length;t++)e[t]=gG(e[t]);return e.join("")}(yN("hello"))!="5d41402abc4b2a76b9719d911017c592";function lp(e,t){if(xG){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function w5(e,t){var r,i,n,a;if(e!==r){for(var c=(n=e,a=1+(256/e.length|0),new Array(a+1).join(n)),s=[],d=0;d<256;d++)s[d]=d;var g=0;for(d=0;d<256;d++){var x=s[d];g=(g+x+c.charCodeAt(d))%256,s[d]=s[g],s[g]=x}r=e,i=s}else s=i;var C=t.length,N=0,B=0,M="";for(d=0;d<C;d++)B=(B+(x=s[N=(N+1)%256]))%256,s[N]=s[B],s[B]=x,c=s[(s[N]+s[B])%256],M+=String.fromCharCode(t.charCodeAt(d)^c);return M}var $3={print:4,modify:8,copy:16,"annot-forms":32};function Im(e,t,r,i){this.v=1,this.r=2;var n=192;e.forEach(function(s){if($3.perm!==void 0)throw new Error("Invalid permission: "+s);n+=$3[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),c=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,c),this.P=-(1+(255^n)),this.encryptionKey=b5(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=w5(this.encryptionKey,this.padding)}function Lm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,i=0;i<r;i++){var n=e.charCodeAt(i);t+=n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?"#"+("0"+n.toString(16)).slice(-2):e[i]}return t}function X3(e){if(Ns(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,i,n){if(n=n||!1,typeof r!="string"||typeof i!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var a=Math.random().toString(35);return t[r][a]=[i,!!n],a},this.unsubscribe=function(r){for(var i in t)if(t[i][r])return delete t[i][r],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),n=[];for(var a in t[r]){var c=t[r][a];try{c[0].apply(e,i)}catch(s){en.console&&Js.error("jsPDF PubSub Error",s.message,s)}c[1]&&n.push(a)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function N_(e){if(!(this instanceof N_))return new N_(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function _N(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function r0(e,t,r,i,n){if(!(this instanceof r0))return new r0(e,t,r,i,n);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,_N.call(this,i,n)}function Rm(e,t,r,i,n){if(!(this instanceof Rm))return new Rm(e,t,r,i,n);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,_N.call(this,i,n)}function Fi(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],n=arguments[2],a=arguments[3],c=[],s=1,d=16,g="S",x=null;Ns(e=e||{})==="object"&&(r=e.orientation,i=e.unit||i,n=e.format||n,a=e.compress||e.compressPdf||a,(x=e.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),s=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),g=e.defaultPathOperation||"S"),c=e.filters||(a===!0?["FlateEncode"]:c),i=i||"mm",r=(""+(r||"P")).toLowerCase();var C=e.putOnlyUsedFonts||!1,N={},B={internal:{},__private__:{}};B.__private__.PubSub=X3;var M="1.3",I=B.__private__.getPdfVersion=function(){return M};B.__private__.setPdfVersion=function(Y){M=Y};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};B.__private__.getPageFormats=function(){return R};var D=B.__private__.getPageFormat=function(Y){return R[Y]};n=n||"a4";var V="compat",G="advanced",Z=V;function X(){this.saveGraphicsState(),ze(new Yr(xe,0,0,-xe,0,Zl()*xe).toString()+" cm"),this.setFontSize(this.getFontSize()/xe),g="n",Z=G}function le(){this.restoreGraphicsState(),g="S",Z=V}var ae=B.__private__.combineFontStyleAndFontWeight=function(Y,ke){if(Y=="bold"&&ke=="normal"||Y=="bold"&&ke==400||Y=="normal"&&ke=="italic"||Y=="bold"&&ke=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ke&&(Y=ke==400||ke==="normal"?Y==="italic"?"italic":"normal":ke!=700&&ke!=="bold"||Y!=="normal"?(ke==700?"bold":ke)+""+Y:"bold"),Y};B.advancedAPI=function(Y){var ke=Z===V;return ke&&X.call(this),typeof Y!="function"||(Y(this),ke&&le.call(this)),this},B.compatAPI=function(Y){var ke=Z===G;return ke&&le.call(this),typeof Y!="function"||(Y(this),ke&&X.call(this)),this},B.isAdvancedAPI=function(){return Z===G};var ce,se=function(Y){if(Z!==G)throw new Error(Y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ue=B.roundToPrecision=B.__private__.roundToPrecision=function(Y,ke){var ft=t||ke;if(isNaN(Y)||isNaN(ft))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Y.toFixed(ft).replace(/0+$/,"")};ce=B.hpf=B.__private__.hpf=typeof d=="number"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(Y,d)}:d==="smart"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(Y,Y>-1&&Y<1?16:5)}:function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(Y,16)};var re=B.f2=B.__private__.f2=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f2");return ue(Y,2)},W=B.__private__.f3=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f3");return ue(Y,3)},de=B.scale=B.__private__.scale=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.scale");return Z===V?Y*xe:Z===G?Y:void 0},Ee=function(Y){return de(function(ke){return Z===V?Zl()-ke:Z===G?ke:void 0}(Y))};B.__private__.setPrecision=B.setPrecision=function(Y){typeof parseInt(Y,10)=="number"&&(t=parseInt(Y,10))};var Ne,ge="00000000000000000000000000000000",Pe=B.__private__.getFileId=function(){return ge},Ye=B.__private__.setFileId=function(Y){return ge=Y!==void 0&&/^[a-fA-F0-9]{32}$/.test(Y)?Y.toUpperCase():ge.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(Fn=new Im(x.userPermissions,x.userPassword,x.ownerPassword,ge)),ge};B.setFileId=function(Y){return Ye(Y),this},B.getFileId=function(){return Pe()};var Me=B.__private__.convertDateToPDFDate=function(Y){var ke=Y.getTimezoneOffset(),ft=ke<0?"+":"-",Tt=Math.floor(Math.abs(ke/60)),Wt=Math.abs(ke%60),lr=[ft,pe(Tt),"'",pe(Wt),"'"].join("");return["D:",Y.getFullYear(),pe(Y.getMonth()+1),pe(Y.getDate()),pe(Y.getHours()),pe(Y.getMinutes()),pe(Y.getSeconds()),lr].join("")},De=B.__private__.convertPDFDateToDate=function(Y){var ke=parseInt(Y.substr(2,4),10),ft=parseInt(Y.substr(6,2),10)-1,Tt=parseInt(Y.substr(8,2),10),Wt=parseInt(Y.substr(10,2),10),lr=parseInt(Y.substr(12,2),10),br=parseInt(Y.substr(14,2),10);return new Date(ke,ft,Tt,Wt,lr,br,0)},tt=B.__private__.setCreationDate=function(Y){var ke;if(Y===void 0&&(Y=new Date),Y instanceof Date)ke=Me(Y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ke=Y}return Ne=ke},ee=B.__private__.getCreationDate=function(Y){var ke=Ne;return Y==="jsDate"&&(ke=De(Ne)),ke};B.setCreationDate=function(Y){return tt(Y),this},B.getCreationDate=function(Y){return ee(Y)};var fe,pe=B.__private__.padd2=function(Y){return("0"+parseInt(Y)).slice(-2)},we=B.__private__.padd2Hex=function(Y){return("00"+(Y=Y.toString())).substr(Y.length)},Le=0,lt=[],rt=[],gt=0,dt=[],qt=[],Te=!1,at=rt;B.__private__.setCustomOutputDestination=function(Y){Te=!0,at=Y};var kt=function(Y){Te||(at=Y)};B.__private__.resetCustomOutputDestination=function(){Te=!1,at=rt};var ze=B.__private__.out=function(Y){return Y=Y.toString(),gt+=Y.length+1,at.push(Y),at},Et=B.__private__.write=function(Y){return ze(arguments.length===1?Y.toString():Array.prototype.join.call(arguments," "))},Pt=B.__private__.getArrayBuffer=function(Y){for(var ke=Y.length,ft=new ArrayBuffer(ke),Tt=new Uint8Array(ft);ke--;)Tt[ke]=Y.charCodeAt(ke);return ft},Sr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];B.__private__.getStandardFonts=function(){return Sr};var or=e.fontSize||16;B.__private__.setFontSize=B.setFontSize=function(Y){return or=Z===G?Y/xe:Y,this};var Wr,Hr=B.__private__.getFontSize=B.getFontSize=function(){return Z===V?or:or*xe},ti=e.R2L||!1;B.__private__.setR2L=B.setR2L=function(Y){return ti=Y,this},B.__private__.getR2L=B.getR2L=function(){return ti};var Gr,wi=B.__private__.setZoomMode=function(Y){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Y))Wr=Y;else if(isNaN(Y)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(Y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Y+'" is not recognized.');Wr=Y}else Wr=parseInt(Y,10)};B.__private__.getZoomMode=function(){return Wr};var Bi,Zr=B.__private__.setPageMode=function(Y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Y+'" is not recognized.');Gr=Y};B.__private__.getPageMode=function(){return Gr};var Xr=B.__private__.setLayoutMode=function(Y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Y+'" is not recognized.');Bi=Y};B.__private__.getLayoutMode=function(){return Bi},B.__private__.setDisplayMode=B.setDisplayMode=function(Y,ke,ft){return wi(Y),Xr(ke),Zr(ft),this};var $r={title:"",subject:"",author:"",keywords:"",creator:""};B.__private__.getDocumentProperty=function(Y){if(Object.keys($r).indexOf(Y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return $r[Y]},B.__private__.getDocumentProperties=function(){return $r},B.__private__.setDocumentProperties=B.setProperties=B.setDocumentProperties=function(Y){for(var ke in $r)$r.hasOwnProperty(ke)&&Y[ke]&&($r[ke]=Y[ke]);return this},B.__private__.setDocumentProperty=function(Y,ke){if(Object.keys($r).indexOf(Y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return $r[Y]=ke};var ot,xe,ye,Ce,je,Ke={},At={},Ft=[],vt={},Nt={},Ht={},Gt={},Fr=null,kr=0,Bt=[],ei=new X3(B),Yi=e.hotfixes||[],jr={},Di={},In=[],Yr=function Y(ke,ft,Tt,Wt,lr,br){if(!(this instanceof Y))return new Y(ke,ft,Tt,Wt,lr,br);isNaN(ke)&&(ke=1),isNaN(ft)&&(ft=0),isNaN(Tt)&&(Tt=0),isNaN(Wt)&&(Wt=1),isNaN(lr)&&(lr=0),isNaN(br)&&(br=0),this._matrix=[ke,ft,Tt,Wt,lr,br]};Object.defineProperty(Yr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(Yr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(Yr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(Yr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(Yr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(Yr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(Yr.prototype,"a",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(Yr.prototype,"b",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(Yr.prototype,"c",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(Yr.prototype,"d",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(Yr.prototype,"e",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(Yr.prototype,"f",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(Yr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Yr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Yr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Yr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Yr.prototype.join=function(Y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ce).join(Y)},Yr.prototype.multiply=function(Y){var ke=Y.sx*this.sx+Y.shy*this.shx,ft=Y.sx*this.shy+Y.shy*this.sy,Tt=Y.shx*this.sx+Y.sy*this.shx,Wt=Y.shx*this.shy+Y.sy*this.sy,lr=Y.tx*this.sx+Y.ty*this.shx+this.tx,br=Y.tx*this.shy+Y.ty*this.sy+this.ty;return new Yr(ke,ft,Tt,Wt,lr,br)},Yr.prototype.decompose=function(){var Y=this.sx,ke=this.shy,ft=this.shx,Tt=this.sy,Wt=this.tx,lr=this.ty,br=Math.sqrt(Y*Y+ke*ke),qr=(Y/=br)*ft+(ke/=br)*Tt;ft-=Y*qr,Tt-=ke*qr;var ui=Math.sqrt(ft*ft+Tt*Tt);return qr/=ui,Y*(Tt/=ui)<ke*(ft/=ui)&&(Y=-Y,ke=-ke,qr=-qr,br=-br),{scale:new Yr(br,0,0,ui,0,0),translate:new Yr(1,0,0,1,Wt,lr),rotate:new Yr(Y,ke,-ke,Y,0,0),skew:new Yr(1,0,qr,1,0,0)}},Yr.prototype.toString=function(Y){return this.join(" ")},Yr.prototype.inversed=function(){var Y=this.sx,ke=this.shy,ft=this.shx,Tt=this.sy,Wt=this.tx,lr=this.ty,br=1/(Y*Tt-ke*ft),qr=Tt*br,ui=-ke*br,Ui=-ft*br,Hi=Y*br;return new Yr(qr,ui,Ui,Hi,-qr*Wt-Ui*lr,-ui*Wt-Hi*lr)},Yr.prototype.applyToPoint=function(Y){var ke=Y.x*this.sx+Y.y*this.shx+this.tx,ft=Y.x*this.shy+Y.y*this.sy+this.ty;return new $l(ke,ft)},Yr.prototype.applyToRectangle=function(Y){var ke=this.applyToPoint(Y),ft=this.applyToPoint(new $l(Y.x+Y.w,Y.y+Y.h));return new Xl(ke.x,ke.y,ft.x-ke.x,ft.y-ke.y)},Yr.prototype.clone=function(){var Y=this.sx,ke=this.shy,ft=this.shx,Tt=this.sy,Wt=this.tx,lr=this.ty;return new Yr(Y,ke,ft,Tt,Wt,lr)},B.Matrix=Yr;var on=B.matrixMult=function(Y,ke){return ke.multiply(Y)},Wi=new Yr(1,0,0,1,0,0);B.unitMatrix=B.identityMatrix=Wi;var mi=function(Y,ke){if(!Nt[Y]){var ft=(ke instanceof r0?"Sh":"P")+(Object.keys(vt).length+1).toString(10);ke.id=ft,Nt[Y]=ft,vt[ft]=ke,ei.publish("addPattern",ke)}};B.ShadingPattern=r0,B.TilingPattern=Rm,B.addShadingPattern=function(Y,ke){return se("addShadingPattern()"),mi(Y,ke),this},B.beginTilingPattern=function(Y){se("beginTilingPattern()"),No(Y.boundingBox[0],Y.boundingBox[1],Y.boundingBox[2]-Y.boundingBox[0],Y.boundingBox[3]-Y.boundingBox[1],Y.matrix)},B.endTilingPattern=function(Y,ke){se("endTilingPattern()"),ke.stream=qt[fe].join(`
`),mi(Y,ke),ei.publish("endTilingPattern",ke),In.pop().restore()};var ln,gi=B.__private__.newObject=function(){var Y=hr();return Re(Y,!0),Y},hr=B.__private__.newObjectDeferred=function(){return Le++,lt[Le]=function(){return gt},Le},Re=function(Y,ke){return ke=typeof ke=="boolean"&&ke,lt[Y]=gt,ke&&ze(Y+" 0 obj"),Y},ct=B.__private__.newAdditionalObject=function(){var Y={objId:hr(),content:""};return dt.push(Y),Y},$e=hr(),it=hr(),He=B.__private__.decodeColorString=function(Y){var ke=Y.split(" ");if(ke.length!==2||ke[1]!=="g"&&ke[1]!=="G")ke.length!==5||ke[4]!=="k"&&ke[4]!=="K"||(ke=[(1-ke[0])*(1-ke[3]),(1-ke[1])*(1-ke[3]),(1-ke[2])*(1-ke[3]),"r"]);else{var ft=parseFloat(ke[0]);ke=[ft,ft,ft,"r"]}for(var Tt="#",Wt=0;Wt<3;Wt++)Tt+=("0"+Math.floor(255*parseFloat(ke[Wt])).toString(16)).slice(-2);return Tt},nt=B.__private__.encodeColorString=function(Y){var ke;typeof Y=="string"&&(Y={ch1:Y});var ft=Y.ch1,Tt=Y.ch2,Wt=Y.ch3,lr=Y.ch4,br=Y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ft=="string"&&ft.charAt(0)!=="#"){var qr=new xN(ft);if(qr.ok)ft=qr.toHex();else if(!/^\d*\.?\d*$/.test(ft))throw new Error('Invalid color "'+ft+'" passed to jsPDF.encodeColorString.')}if(typeof ft=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ft)&&(ft="#"+ft[1]+ft[1]+ft[2]+ft[2]+ft[3]+ft[3]),typeof ft=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ft)){var ui=parseInt(ft.substr(1),16);ft=ui>>16&255,Tt=ui>>8&255,Wt=255&ui}if(Tt===void 0||lr===void 0&&ft===Tt&&Tt===Wt)ke=typeof ft=="string"?ft+" "+br[0]:Y.precision===2?re(ft/255)+" "+br[0]:W(ft/255)+" "+br[0];else if(lr===void 0||Ns(lr)==="object"){if(lr&&!isNaN(lr.a)&&lr.a===0)return["1.","1.","1.",br[1]].join(" ");ke=typeof ft=="string"?[ft,Tt,Wt,br[1]].join(" "):Y.precision===2?[re(ft/255),re(Tt/255),re(Wt/255),br[1]].join(" "):[W(ft/255),W(Tt/255),W(Wt/255),br[1]].join(" ")}else ke=typeof ft=="string"?[ft,Tt,Wt,lr,br[2]].join(" "):Y.precision===2?[re(ft),re(Tt),re(Wt),re(lr),br[2]].join(" "):[W(ft),W(Tt),W(Wt),W(lr),br[2]].join(" ");return ke},It=B.__private__.getFilters=function(){return c},sr=B.__private__.putStream=function(Y){var ke=(Y=Y||{}).data||"",ft=Y.filters||It(),Tt=Y.alreadyAppliedFilters||[],Wt=Y.addLength1||!1,lr=ke.length,br=Y.objectId,qr=function(fa){return fa};if(x!==null&&br===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(qr=Fn.encryptor(br,0));var ui={};ft===!0&&(ft=["FlateEncode"]);var Ui=Y.additionalKeyValues||[],Hi=(ui=Fi.API.processDataByFilters!==void 0?Fi.API.processDataByFilters(ke,ft):{data:ke,reverseChain:[]}).reverseChain+(Array.isArray(Tt)?Tt.join(" "):Tt.toString());if(ui.data.length!==0&&(Ui.push({key:"Length",value:ui.data.length}),Wt===!0&&Ui.push({key:"Length1",value:lr})),Hi.length!=0)if(Hi.split("/").length-1==1)Ui.push({key:"Filter",value:Hi});else{Ui.push({key:"Filter",value:"["+Hi+"]"});for(var Xi=0;Xi<Ui.length;Xi+=1)if(Ui[Xi].key==="DecodeParms"){for(var Cn=[],Gs=0;Gs<ui.reverseChain.split("/").length-1;Gs+=1)Cn.push("null");Cn.push(Ui[Xi].value),Ui[Xi].value="["+Cn.join(" ")+"]"}}ze("<<");for(var Qn=0;Qn<Ui.length;Qn++)ze("/"+Ui[Qn].key+" "+Ui[Qn].value);ze(">>"),ui.data.length!==0&&(ze("stream"),ze(qr(ui.data)),ze("endstream"))},Qt=B.__private__.putPage=function(Y){var ke=Y.number,ft=Y.data,Tt=Y.objId,Wt=Y.contentsObjId;Re(Tt,!0),ze("<</Type /Page"),ze("/Parent "+Y.rootDictionaryObjId+" 0 R"),ze("/Resources "+Y.resourceDictionaryObjId+" 0 R"),ze("/MediaBox ["+parseFloat(ce(Y.mediaBox.bottomLeftX))+" "+parseFloat(ce(Y.mediaBox.bottomLeftY))+" "+ce(Y.mediaBox.topRightX)+" "+ce(Y.mediaBox.topRightY)+"]"),Y.cropBox!==null&&ze("/CropBox ["+ce(Y.cropBox.bottomLeftX)+" "+ce(Y.cropBox.bottomLeftY)+" "+ce(Y.cropBox.topRightX)+" "+ce(Y.cropBox.topRightY)+"]"),Y.bleedBox!==null&&ze("/BleedBox ["+ce(Y.bleedBox.bottomLeftX)+" "+ce(Y.bleedBox.bottomLeftY)+" "+ce(Y.bleedBox.topRightX)+" "+ce(Y.bleedBox.topRightY)+"]"),Y.trimBox!==null&&ze("/TrimBox ["+ce(Y.trimBox.bottomLeftX)+" "+ce(Y.trimBox.bottomLeftY)+" "+ce(Y.trimBox.topRightX)+" "+ce(Y.trimBox.topRightY)+"]"),Y.artBox!==null&&ze("/ArtBox ["+ce(Y.artBox.bottomLeftX)+" "+ce(Y.artBox.bottomLeftY)+" "+ce(Y.artBox.topRightX)+" "+ce(Y.artBox.topRightY)+"]"),typeof Y.userUnit=="number"&&Y.userUnit!==1&&ze("/UserUnit "+Y.userUnit),ei.publish("putPage",{objId:Tt,pageContext:Bt[ke],pageNumber:ke,page:ft}),ze("/Contents "+Wt+" 0 R"),ze(">>"),ze("endobj");var lr=ft.join(`
`);return Z===G&&(lr+=`
Q`),Re(Wt,!0),sr({data:lr,filters:It(),objectId:Wt}),ze("endobj"),Tt},Xt=B.__private__.putPages=function(){var Y,ke,ft=[];for(Y=1;Y<=kr;Y++)Bt[Y].objId=hr(),Bt[Y].contentsObjId=hr();for(Y=1;Y<=kr;Y++)ft.push(Qt({number:Y,data:qt[Y],objId:Bt[Y].objId,contentsObjId:Bt[Y].contentsObjId,mediaBox:Bt[Y].mediaBox,cropBox:Bt[Y].cropBox,bleedBox:Bt[Y].bleedBox,trimBox:Bt[Y].trimBox,artBox:Bt[Y].artBox,userUnit:Bt[Y].userUnit,rootDictionaryObjId:$e,resourceDictionaryObjId:it}));Re($e,!0),ze("<</Type /Pages");var Tt="/Kids [";for(ke=0;ke<kr;ke++)Tt+=ft[ke]+" 0 R ";ze(Tt+"]"),ze("/Count "+kr),ze(">>"),ze("endobj"),ei.publish("postPutPages")},jt=function(Y){ei.publish("putFont",{font:Y,out:ze,newObject:gi,putStream:sr}),Y.isAlreadyPutted!==!0&&(Y.objectNumber=gi(),ze("<<"),ze("/Type /Font"),ze("/BaseFont /"+Lm(Y.postScriptName)),ze("/Subtype /Type1"),typeof Y.encoding=="string"&&ze("/Encoding /"+Y.encoding),ze("/FirstChar 32"),ze("/LastChar 255"),ze(">>"),ze("endobj"))},_r=function(Y){Y.objectNumber=gi();var ke=[];ke.push({key:"Type",value:"/XObject"}),ke.push({key:"Subtype",value:"/Form"}),ke.push({key:"BBox",value:"["+[ce(Y.x),ce(Y.y),ce(Y.x+Y.width),ce(Y.y+Y.height)].join(" ")+"]"}),ke.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"});var ft=Y.pages[1].join(`
`);sr({data:ft,additionalKeyValues:ke,objectId:Y.objectNumber}),ze("endobj")},Mr=function(Y,ke){ke||(ke=21);var ft=gi(),Tt=function(br,qr){var ui,Ui=[],Hi=1/(qr-1);for(ui=0;ui<1;ui+=Hi)Ui.push(ui);if(Ui.push(1),br[0].offset!=0){var Xi={offset:0,color:br[0].color};br.unshift(Xi)}if(br[br.length-1].offset!=1){var Cn={offset:1,color:br[br.length-1].color};br.push(Cn)}for(var Gs="",Qn=0,fa=0;fa<Ui.length;fa++){for(ui=Ui[fa];ui>br[Qn+1].offset;)Qn++;var Ms=br[Qn].offset,ja=(ui-Ms)/(br[Qn+1].offset-Ms),_l=br[Qn].color,rl=br[Qn+1].color;Gs+=we(Math.round((1-ja)*_l[0]+ja*rl[0]).toString(16))+we(Math.round((1-ja)*_l[1]+ja*rl[1]).toString(16))+we(Math.round((1-ja)*_l[2]+ja*rl[2]).toString(16))}return Gs.trim()}(Y.colors,ke),Wt=[];Wt.push({key:"FunctionType",value:"0"}),Wt.push({key:"Domain",value:"[0.0 1.0]"}),Wt.push({key:"Size",value:"["+ke+"]"}),Wt.push({key:"BitsPerSample",value:"8"}),Wt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Wt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sr({data:Tt,additionalKeyValues:Wt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ft}),ze("endobj"),Y.objectNumber=gi(),ze("<< /ShadingType "+Y.type),ze("/ColorSpace /DeviceRGB");var lr="/Coords ["+ce(parseFloat(Y.coords[0]))+" "+ce(parseFloat(Y.coords[1]))+" ";Y.type===2?lr+=ce(parseFloat(Y.coords[2]))+" "+ce(parseFloat(Y.coords[3])):lr+=ce(parseFloat(Y.coords[2]))+" "+ce(parseFloat(Y.coords[3]))+" "+ce(parseFloat(Y.coords[4]))+" "+ce(parseFloat(Y.coords[5])),ze(lr+="]"),Y.matrix&&ze("/Matrix ["+Y.matrix.toString()+"]"),ze("/Function "+ft+" 0 R"),ze("/Extend [true true]"),ze(">>"),ze("endobj")},Vr=function(Y,ke){var ft=hr(),Tt=gi();ke.push({resourcesOid:ft,objectOid:Tt}),Y.objectNumber=Tt;var Wt=[];Wt.push({key:"Type",value:"/Pattern"}),Wt.push({key:"PatternType",value:"1"}),Wt.push({key:"PaintType",value:"1"}),Wt.push({key:"TilingType",value:"1"}),Wt.push({key:"BBox",value:"["+Y.boundingBox.map(ce).join(" ")+"]"}),Wt.push({key:"XStep",value:ce(Y.xStep)}),Wt.push({key:"YStep",value:ce(Y.yStep)}),Wt.push({key:"Resources",value:ft+" 0 R"}),Y.matrix&&Wt.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"}),sr({data:Y.stream,additionalKeyValues:Wt,objectId:Y.objectNumber}),ze("endobj")},Ir=function(Y){for(var ke in Y.objectNumber=gi(),ze("<<"),Y)switch(ke){case"opacity":ze("/ca "+re(Y[ke]));break;case"stroke-opacity":ze("/CA "+re(Y[ke]))}ze(">>"),ze("endobj")},zr=function(Y){Re(Y.resourcesOid,!0),ze("<<"),ze("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ke in ze("/Font <<"),Ke)Ke.hasOwnProperty(ke)&&(C===!1||C===!0&&N.hasOwnProperty(ke))&&ze("/"+ke+" "+Ke[ke].objectNumber+" 0 R");ze(">>")}(),function(){if(Object.keys(vt).length>0){for(var ke in ze("/Shading <<"),vt)vt.hasOwnProperty(ke)&&vt[ke]instanceof r0&&vt[ke].objectNumber>=0&&ze("/"+ke+" "+vt[ke].objectNumber+" 0 R");ei.publish("putShadingPatternDict"),ze(">>")}}(),function(ke){if(Object.keys(vt).length>0){for(var ft in ze("/Pattern <<"),vt)vt.hasOwnProperty(ft)&&vt[ft]instanceof B.TilingPattern&&vt[ft].objectNumber>=0&&vt[ft].objectNumber<ke&&ze("/"+ft+" "+vt[ft].objectNumber+" 0 R");ei.publish("putTilingPatternDict"),ze(">>")}}(Y.objectOid),function(){if(Object.keys(Ht).length>0){var ke;for(ke in ze("/ExtGState <<"),Ht)Ht.hasOwnProperty(ke)&&Ht[ke].objectNumber>=0&&ze("/"+ke+" "+Ht[ke].objectNumber+" 0 R");ei.publish("putGStateDict"),ze(">>")}}(),function(){for(var ke in ze("/XObject <<"),jr)jr.hasOwnProperty(ke)&&jr[ke].objectNumber>=0&&ze("/"+ke+" "+jr[ke].objectNumber+" 0 R");ei.publish("putXobjectDict"),ze(">>")}(),ze(">>"),ze("endobj")},yi=function(Y){At[Y.fontName]=At[Y.fontName]||{},At[Y.fontName][Y.fontStyle]=Y.id},ki=function(Y,ke,ft,Tt,Wt){var lr={id:"F"+(Object.keys(Ke).length+1).toString(10),postScriptName:Y,fontName:ke,fontStyle:ft,encoding:Tt,isStandardFont:Wt||!1,metadata:{}};return ei.publish("addFont",{font:lr,instance:this}),Ke[lr.id]=lr,yi(lr),lr.id},Ni=B.__private__.pdfEscape=B.pdfEscape=function(Y,ke){return function(ft,Tt){var Wt,lr,br,qr,ui,Ui,Hi,Xi,Cn;if(br=(Tt=Tt||{}).sourceEncoding||"Unicode",ui=Tt.outputEncoding,(Tt.autoencode||ui)&&Ke[ot].metadata&&Ke[ot].metadata[br]&&Ke[ot].metadata[br].encoding&&(qr=Ke[ot].metadata[br].encoding,!ui&&Ke[ot].encoding&&(ui=Ke[ot].encoding),!ui&&qr.codePages&&(ui=qr.codePages[0]),typeof ui=="string"&&(ui=qr[ui]),ui)){for(Hi=!1,Ui=[],Wt=0,lr=ft.length;Wt<lr;Wt++)(Xi=ui[ft.charCodeAt(Wt)])?Ui.push(String.fromCharCode(Xi)):Ui.push(ft[Wt]),Ui[Wt].charCodeAt(0)>>8&&(Hi=!0);ft=Ui.join("")}for(Wt=ft.length;Hi===void 0&&Wt!==0;)ft.charCodeAt(Wt-1)>>8&&(Hi=!0),Wt--;if(!Hi)return ft;for(Ui=Tt.noBOM?[]:[254,255],Wt=0,lr=ft.length;Wt<lr;Wt++){if((Cn=(Xi=ft.charCodeAt(Wt))>>8)>>8)throw new Error("Character at position "+Wt+" of string '"+ft+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ui.push(Cn),Ui.push(Xi-(Cn<<8))}return String.fromCharCode.apply(void 0,Ui)}(Y,ke).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_i=B.__private__.beginPage=function(Y){qt[++kr]=[],Bt[kr]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Y[0]),topRightY:Number(Y[1])}},Da(kr),kt(qt[fe])},Ga=function(Y,ke){var ft,Tt,Wt;switch(r=ke||r,typeof Y=="string"&&(ft=D(Y.toLowerCase()),Array.isArray(ft)&&(Tt=ft[0],Wt=ft[1])),Array.isArray(Y)&&(Tt=Y[0]*xe,Wt=Y[1]*xe),isNaN(Tt)&&(Tt=n[0],Wt=n[1]),(Tt>14400||Wt>14400)&&(Js.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Tt=Math.min(14400,Tt),Wt=Math.min(14400,Wt)),n=[Tt,Wt],r.substr(0,1)){case"l":Wt>Tt&&(n=[Wt,Tt]);break;case"p":Tt>Wt&&(n=[Wt,Tt])}_i(n),li(oo),ze(tl),bi!==0&&ze(bi+" J"),Wl!==0&&ze(Wl+" j"),ei.publish("addPage",{pageNumber:kr})},Pa=function(Y){Y>0&&Y<=kr&&(qt.splice(Y,1),Bt.splice(Y,1),kr--,fe>kr&&(fe=kr),this.setPage(fe))},Da=function(Y){Y>0&&Y<=kr&&(fe=Y)},ea=B.__private__.getNumberOfPages=B.getNumberOfPages=function(){return qt.length-1},xa=function(Y,ke,ft){var Tt,Wt=void 0;return ft=ft||{},Y=Y!==void 0?Y:Ke[ot].fontName,ke=ke!==void 0?ke:Ke[ot].fontStyle,Tt=Y.toLowerCase(),At[Tt]!==void 0&&At[Tt][ke]!==void 0?Wt=At[Tt][ke]:At[Y]!==void 0&&At[Y][ke]!==void 0?Wt=At[Y][ke]:ft.disableWarning===!1&&Js.warn("Unable to look up font label for font '"+Y+"', '"+ke+"'. Refer to getFontList() for available fonts."),Wt||ft.noFallback||(Wt=At.times[ke])==null&&(Wt=At.times.normal),Wt},zs=B.__private__.putInfo=function(){var Y=gi(),ke=function(Tt){return Tt};for(var ft in x!==null&&(ke=Fn.encryptor(Y,0)),ze("<<"),ze("/Producer ("+Ni(ke("jsPDF "+Fi.version))+")"),$r)$r.hasOwnProperty(ft)&&$r[ft]&&ze("/"+ft.substr(0,1).toUpperCase()+ft.substr(1)+" ("+Ni(ke($r[ft]))+")");ze("/CreationDate ("+Ni(ke(Ne))+")"),ze(">>"),ze("endobj")},iu=B.__private__.putCatalog=function(Y){var ke=(Y=Y||{}).rootDictionaryObjId||$e;switch(gi(),ze("<<"),ze("/Type /Catalog"),ze("/Pages "+ke+" 0 R"),Wr||(Wr="fullwidth"),Wr){case"fullwidth":ze("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ze("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ze("/OpenAction [3 0 R /Fit]");break;case"original":ze("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ft=""+Wr;ft.substr(ft.length-1)==="%"&&(Wr=parseInt(Wr)/100),typeof Wr=="number"&&ze("/OpenAction [3 0 R /XYZ null null "+re(Wr)+"]")}switch(Bi||(Bi="continuous"),Bi){case"continuous":ze("/PageLayout /OneColumn");break;case"single":ze("/PageLayout /SinglePage");break;case"two":case"twoleft":ze("/PageLayout /TwoColumnLeft");break;case"tworight":ze("/PageLayout /TwoColumnRight")}Gr&&ze("/PageMode /"+Gr),ei.publish("putCatalog"),ze(">>"),ze("endobj")},ao=B.__private__.putTrailer=function(){ze("trailer"),ze("<<"),ze("/Size "+(Le+1)),ze("/Root "+Le+" 0 R"),ze("/Info "+(Le-1)+" 0 R"),x!==null&&ze("/Encrypt "+Fn.oid+" 0 R"),ze("/ID [ <"+ge+"> <"+ge+"> ]"),ze(">>")},rs=B.__private__.putHeader=function(){ze("%PDF-"+M),ze("%")},cA=B.__private__.putXRef=function(){var Y="0000000000";ze("xref"),ze("0 "+(Le+1)),ze("0000000000 65535 f ");for(var ke=1;ke<=Le;ke++)typeof lt[ke]=="function"?ze((Y+lt[ke]()).slice(-10)+" 00000 n "):lt[ke]!==void 0?ze((Y+lt[ke]).slice(-10)+" 00000 n "):ze("0000000000 00000 n ")},Xo=B.__private__.buildDocument=function(){var Y;Le=0,gt=0,rt=[],lt=[],dt=[],$e=hr(),it=hr(),kt(rt),ei.publish("buildDocument"),rs(),Xt(),function(){ei.publish("putAdditionalObjects");for(var ft=0;ft<dt.length;ft++){var Tt=dt[ft];Re(Tt.objId,!0),ze(Tt.content),ze("endobj")}ei.publish("postPutAdditionalObjects")}(),Y=[],function(){for(var ft in Ke)Ke.hasOwnProperty(ft)&&(C===!1||C===!0&&N.hasOwnProperty(ft))&&jt(Ke[ft])}(),function(){var ft;for(ft in Ht)Ht.hasOwnProperty(ft)&&Ir(Ht[ft])}(),function(){for(var ft in jr)jr.hasOwnProperty(ft)&&_r(jr[ft])}(),function(ft){var Tt;for(Tt in vt)vt.hasOwnProperty(Tt)&&(vt[Tt]instanceof r0?Mr(vt[Tt]):vt[Tt]instanceof Rm&&Vr(vt[Tt],ft))}(Y),ei.publish("putResources"),Y.forEach(zr),zr({resourcesOid:it,objectOid:Number.MAX_SAFE_INTEGER}),ei.publish("postPutResources"),x!==null&&(Fn.oid=gi(),ze("<<"),ze("/Filter /Standard"),ze("/V "+Fn.v),ze("/R "+Fn.r),ze("/U <"+Fn.toHexString(Fn.U)+">"),ze("/O <"+Fn.toHexString(Fn.O)+">"),ze("/P "+Fn.P),ze(">>"),ze("endobj")),zs(),iu();var ke=gt;return cA(),ao(),ze("startxref"),ze(""+ke),ze("%%EOF"),kt(qt[fe]),rt.join(`
`)},oh=B.__private__.getBlob=function(Y){return new Blob([Pt(Y)],{type:"application/pdf"})},lh=B.output=B.__private__.output=(ln=function(Y,ke){switch(typeof(ke=ke||{})=="string"?ke={filename:ke}:ke.filename=ke.filename||"generated.pdf",Y){case void 0:return Xo();case"save":B.save(ke.filename);break;case"arraybuffer":return Pt(Xo());case"blob":return oh(Xo());case"bloburi":case"bloburl":if(en.URL!==void 0&&typeof en.URL.createObjectURL=="function")return en.URL&&en.URL.createObjectURL(oh(Xo()))||void 0;Js.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ft="",Tt=Xo();try{ft=K3(Tt)}catch{ft=K3(unescape(encodeURIComponent(Tt)))}return"data:application/pdf;filename="+ke.filename+";base64,"+ft;case"pdfobjectnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Wt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",lr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ke.pdfObjectUrl&&(Wt=ke.pdfObjectUrl,lr="");var br='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Wt+'"'+lr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ke)+");<\/script></body></html>",qr=en.open();return qr!==null&&qr.document.write(br),qr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var ui='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ke.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ke.filename+'" width="500px" height="400px" /></body></html>',Ui=en.open();if(Ui!==null){Ui.document.write(ui);var Hi=this;Ui.document.documentElement.querySelector("#pdfViewer").onload=function(){Ui.document.title=ke.filename,Ui.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Hi.output("bloburl"))}}return Ui}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(en)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ke)+'"></iframe></body></html>',Cn=en.open();if(Cn!==null&&(Cn.document.write(Xi),Cn.document.title=ke.filename),Cn||typeof safari>"u")return Cn;break;case"datauri":case"dataurl":return en.document.location.href=this.output("datauristring",ke);default:return null}},ln.foo=function(){try{return ln.apply(this,arguments)}catch(ft){var Y=ft.stack||"";~Y.indexOf(" at ")&&(Y=Y.split(" at ")[1]);var ke="Error in function "+Y.split(`
`)[0].split("<")[0]+": "+ft.message;if(!en.console)throw new Error(ke);en.console.error(ke,ft),en.alert&&alert(ke)}},ln.foo.bar=ln,ln.foo),Zo=function(Y){return Array.isArray(Yi)===!0&&Yi.indexOf(Y)>-1};switch(i){case"pt":xe=1;break;case"mm":xe=72/25.4;break;case"cm":xe=72/2.54;break;case"in":xe=72;break;case"px":xe=Zo("px_scaling")==1?.75:96/72;break;case"pc":case"em":xe=12;break;case"ex":xe=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);xe=i}var Fn=null;tt(),Ye();var Ra=B.__private__.getPageInfo=B.getPageInfo=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Bt[Y].objId,pageNumber:Y,pageContext:Bt[Y]}},ch=B.__private__.getPageInfoByObjId=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ke in Bt)if(Bt[ke].objId===Y)break;return Ra(ke)},Nh=B.__private__.getCurrentPageInfo=B.getCurrentPageInfo=function(){return{objId:Bt[fe].objId,pageNumber:fe,pageContext:Bt[fe]}};B.addPage=function(){return Ga.apply(this,arguments),this},B.setPage=function(){return Da.apply(this,arguments),kt.call(this,qt[fe]),this},B.insertPage=function(Y){return this.addPage(),this.movePage(fe,Y),this},B.movePage=function(Y,ke){var ft,Tt;if(Y>ke){ft=qt[Y],Tt=Bt[Y];for(var Wt=Y;Wt>ke;Wt--)qt[Wt]=qt[Wt-1],Bt[Wt]=Bt[Wt-1];qt[ke]=ft,Bt[ke]=Tt,this.setPage(ke)}else if(Y<ke){ft=qt[Y],Tt=Bt[Y];for(var lr=Y;lr<ke;lr++)qt[lr]=qt[lr+1],Bt[lr]=Bt[lr+1];qt[ke]=ft,Bt[ke]=Tt,this.setPage(ke)}return this},B.deletePage=function(){return Pa.apply(this,arguments),this},B.__private__.text=B.text=function(Y,ke,ft,Tt,Wt){var lr,br,qr,ui,Ui,Hi,Xi,Cn,Gs,Qn=(Tt=Tt||{}).scope||this;if(typeof Y=="number"&&typeof ke=="number"&&(typeof ft=="string"||Array.isArray(ft))){var fa=ft;ft=ke,ke=Y,Y=fa}if(arguments[3]instanceof Yr==0?(qr=arguments[4],ui=arguments[5],Ns(Xi=arguments[3])==="object"&&Xi!==null||(typeof qr=="string"&&(ui=qr,qr=null),typeof Xi=="string"&&(ui=Xi,Xi=null),typeof Xi=="number"&&(qr=Xi,Xi=null),Tt={flags:Xi,angle:qr,align:ui})):(se("The transform parameter of text() with a Matrix value"),Gs=Wt),isNaN(ke)||isNaN(ft)||Y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Y.length===0)return Qn;var Ms,ja="",_l=typeof Tt.lineHeightFactor=="number"?Tt.lineHeightFactor:qa,rl=Qn.internal.scaleFactor;function bl(pn){return pn=pn.split("	").join(Array(Tt.TabLen||9).join(" ")),Ni(pn,Xi)}function wl(pn){for(var zn,Bs=pn.concat(),os=[],ic=Bs.length;ic--;)typeof(zn=Bs.shift())=="string"?os.push(zn):Array.isArray(pn)&&(zn.length===1||zn[1]===void 0&&zn[2]===void 0)?os.push(zn[0]):os.push([zn[0],zn[1],zn[2]]);return os}function Bl(pn,zn){var Bs;if(typeof pn=="string")Bs=zn(pn)[0];else if(Array.isArray(pn)){for(var os,ic,cu=pn.concat(),Cc=[],Ah=cu.length;Ah--;)typeof(os=cu.shift())=="string"?Cc.push(zn(os)[0]):Array.isArray(os)&&typeof os[0]=="string"&&(ic=zn(os[0],os[1],os[2]),Cc.push([ic[0],ic[1],ic[2]]));Bs=Cc}return Bs}var wa=!1,su=!0;if(typeof Y=="string")wa=!0;else if(Array.isArray(Y)){var _c=Y.concat();br=[];for(var Lo,Ps=_c.length;Ps--;)(typeof(Lo=_c.shift())!="string"||Array.isArray(Lo)&&typeof Lo[0]!="string")&&(su=!1);wa=su}if(wa===!1)throw new Error('Type of text must be string or Array. "'+Y+'" is not recognized.');typeof Y=="string"&&(Y=Y.match(/[\r?\n]/)?Y.split(/\r\n|\r|\n/g):[Y]);var ku=or/Qn.internal.scaleFactor,lo=ku*(_l-1);switch(Tt.baseline){case"bottom":ft-=lo;break;case"top":ft+=ku-lo;break;case"hanging":ft+=ku-2*lo;break;case"middle":ft+=ku/2-lo}if((Hi=Tt.maxWidth||0)>0&&(typeof Y=="string"?Y=Qn.splitTextToSize(Y,Hi):Object.prototype.toString.call(Y)==="[object Array]"&&(Y=Y.reduce(function(pn,zn){return pn.concat(Qn.splitTextToSize(zn,Hi))},[]))),lr={text:Y,x:ke,y:ft,options:Tt,mutex:{pdfEscape:Ni,activeFontKey:ot,fonts:Ke,activeFontSize:or}},ei.publish("preProcessText",lr),Y=lr.text,qr=(Tt=lr.options).angle,Gs instanceof Yr==0&&qr&&typeof qr=="number"){qr*=Math.PI/180,Tt.rotationDirection===0&&(qr=-qr),Z===G&&(qr=-qr);var hA=Math.cos(qr),bc=Math.sin(qr);Gs=new Yr(hA,bc,-bc,hA,0,0)}else qr&&qr instanceof Yr&&(Gs=qr);Z!==G||Gs||(Gs=Wi),(Ui=Tt.charSpace||di)!==void 0&&(ja+=ce(de(Ui))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Cn=Tt.horizontalScale)!==void 0&&(ja+=ce(100*Cn)+` Tz
`),Tt.lang;var Wa=-1,Cl=Tt.renderingMode!==void 0?Tt.renderingMode:Tt.stroke,Nu=Qn.internal.getCurrentPageInfo().pageContext;switch(Cl){case 0:case!1:case"fill":Wa=0;break;case 1:case!0:case"stroke":Wa=1;break;case 2:case"fillThenStroke":Wa=2;break;case 3:case"invisible":Wa=3;break;case 4:case"fillAndAddForClipping":Wa=4;break;case 5:case"strokeAndAddPathForClipping":Wa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wa=6;break;case 7:case"addToPathForClipping":Wa=7}var au=Nu.usedRenderingMode!==void 0?Nu.usedRenderingMode:-1;Wa!==-1?ja+=Wa+` Tr
`:au!==-1&&(ja+=`0 Tr
`),Wa!==-1&&(Nu.usedRenderingMode=Wa),ui=Tt.align||"left";var Ba,Iu=or*_l,ou=Qn.internal.pageSize.getWidth(),wc=Ke[ot];Ui=Tt.charSpace||di,Hi=Tt.maxWidth||0,Xi=Object.assign({autoencode:!0,noBOM:!0},Tt.flags);var Bc=[],co=function(pn){return Qn.getStringUnitWidth(pn,{font:wc,charSpace:Ui,fontSize:or,doKerning:!1})*or/rl};if(Object.prototype.toString.call(Y)==="[object Array]"){var $a;br=wl(Y),ui!=="left"&&(Ba=br.map(co));var uo,ho=0;if(ui==="right"){ke-=Ba[0],Y=[],Ps=br.length;for(var Jl=0;Jl<Ps;Jl++)Jl===0?(uo=Ka(ke),$a=Zn(ft)):(uo=de(ho-Ba[Jl]),$a=-Iu),Y.push([br[Jl],uo,$a]),ho=Ba[Jl]}else if(ui==="center"){ke-=Ba[0]/2,Y=[],Ps=br.length;for(var ec=0;ec<Ps;ec++)ec===0?(uo=Ka(ke),$a=Zn(ft)):(uo=de((ho-Ba[ec])/2),$a=-Iu),Y.push([br[ec],uo,$a]),ho=Ba[ec]}else if(ui==="left"){Y=[],Ps=br.length;for(var AA=0;AA<Ps;AA++)Y.push(br[AA])}else if(ui==="justify"&&wc.encoding==="Identity-H"){Y=[],Ps=br.length,Hi=Hi!==0?Hi:ou;for(var hh=0,bs=0;bs<Ps;bs++)if($a=bs===0?Zn(ft):-Iu,uo=bs===0?Ka(ke):hh,bs<Ps-1){var fA=de((Hi-Ba[bs])/(br[bs].split(" ").length-1)),ws=br[bs].split(" ");Y.push([ws[0]+" ",uo,$a]),hh=0;for(var Xa=1;Xa<ws.length;Xa++){var Lu=(co(ws[Xa-1]+" "+ws[Xa])-co(ws[Xa]))*rl+fA;Xa==ws.length-1?Y.push([ws[Xa],Lu,0]):Y.push([ws[Xa]+" ",Lu,0]),hh-=Lu}}else Y.push([br[bs],uo,$a]);Y.push(["",hh,0])}else{if(ui!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Y=[],Ps=br.length,Hi=Hi!==0?Hi:ou,bs=0;bs<Ps;bs++){$a=bs===0?Zn(ft):-Iu,uo=bs===0?Ka(ke):0;var lu=br[bs].split(" ").length-1,Mo=lu>0?(Hi-Ba[bs])/lu:0;bs<Ps-1?Bc.push(ce(de(Mo))):Bc.push(0),Y.push([br[bs],uo,$a])}}}(typeof Tt.R2L=="boolean"?Tt.R2L:ti)===!0&&(Y=Bl(Y,function(pn,zn,Bs){return[pn.split("").reverse().join(""),zn,Bs]})),lr={text:Y,x:ke,y:ft,options:Tt,mutex:{pdfEscape:Ni,activeFontKey:ot,fonts:Ke,activeFontSize:or}},ei.publish("postProcessText",lr),Y=lr.text,Ms=lr.mutex.isHex||!1;var Mu=Ke[ot].encoding;Mu!=="WinAnsiEncoding"&&Mu!=="StandardEncoding"||(Y=Bl(Y,function(pn,zn,Bs){return[bl(pn),zn,Bs]})),br=wl(Y),Y=[];for(var Sl,Ji,Po,tc=Array.isArray(br[0])?1:0,Ca="",rc=function(pn,zn,Bs){var os="";return Bs instanceof Yr?(Bs=typeof Tt.angle=="number"?on(Bs,new Yr(1,0,0,1,pn,zn)):on(new Yr(1,0,0,1,pn,zn),Bs),Z===G&&(Bs=on(new Yr(1,0,0,-1,0,0),Bs)),os=Bs.join(" ")+` Tm
`):os=ce(pn)+" "+ce(zn)+` Td
`,os},il=0;il<br.length;il++){switch(Ca="",tc){case 1:Po=(Ms?"<":"(")+br[il][0]+(Ms?">":")"),Sl=parseFloat(br[il][1]),Ji=parseFloat(br[il][2]);break;case 0:Po=(Ms?"<":"(")+br[il]+(Ms?">":")"),Sl=Ka(ke),Ji=Zn(ft)}Bc!==void 0&&Bc[il]!==void 0&&(Ca=Bc[il]+` Tw
`),il===0?Y.push(Ca+rc(Sl,Ji,Gs)+Po):tc===0?Y.push(Ca+Po):tc===1&&Y.push(Ca+rc(Sl,Ji,Gs)+Po)}Y=tc===0?Y.join(` Tj
T* `):Y.join(` Tj
`),Y+=` Tj
`;var Za=`BT
/`;return Za+=ot+" "+or+` Tf
`,Za+=ce(or*_l)+` TL
`,Za+=kn+`
`,Za+=ja,Za+=Y,ze(Za+="ET"),N[ot]=!0,Qn};var ko=B.__private__.clip=B.clip=function(Y){return ze(Y==="evenodd"?"W*":"W"),this};B.clipEvenOdd=function(){return ko("evenodd")},B.__private__.discardPath=B.discardPath=function(){return ze("n"),this};var Yo=B.__private__.isValidStyle=function(Y){var ke=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Y)!==-1&&(ke=!0),ke};B.__private__.setDefaultPathOperation=B.setDefaultPathOperation=function(Y){return Yo(Y)&&(g=Y),this};var uA=B.__private__.getStyle=B.getStyle=function(Y){var ke=g;switch(Y){case"D":case"S":ke="S";break;case"F":ke="f";break;case"FD":case"DF":ke="B";break;case"f":case"f*":case"B":case"B*":ke=Y}return ke},Jo=B.close=function(){return ze("h"),this};B.stroke=function(){return ze("S"),this},B.fill=function(Y){return vc("f",Y),this},B.fillEvenOdd=function(Y){return vc("f*",Y),this},B.fillStroke=function(Y){return vc("B",Y),this},B.fillStrokeEvenOdd=function(Y){return vc("B*",Y),this};var vc=function(Y,ke){Ns(ke)==="object"?$i(ke,Y):ze(Y)},xc=function(Y){Y===null||Z===G&&Y===void 0||(Y=uA(Y),ze(Y))};function ya(Y,ke,ft,Tt,Wt){var lr=new Rm(ke||this.boundingBox,ft||this.xStep,Tt||this.yStep,this.gState,Wt||this.matrix);lr.stream=this.stream;var br=Y+"$$"+this.cloneIndex+++"$$";return mi(br,lr),lr}var $i=function(Y,ke){var ft=Nt[Y.key],Tt=vt[ft];if(Tt instanceof r0)ze("q"),ze(Eu(ke)),Tt.gState&&B.setGState(Tt.gState),ze(Y.matrix.toString()+" cm"),ze("/"+ft+" sh"),ze("Q");else if(Tt instanceof Rm){var Wt=new Yr(1,0,0,-1,0,Zl());Y.matrix&&(Wt=Wt.multiply(Y.matrix||Wi),ft=ya.call(Tt,Y.key,Y.boundingBox,Y.xStep,Y.yStep,Wt).id),ze("q"),ze("/Pattern cs"),ze("/"+ft+" scn"),Tt.gState&&B.setGState(Tt.gState),ze(ke),ze("Q")}},Eu=function(Y){switch(Y){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Aa=B.moveTo=function(Y,ke){return ze(ce(de(Y))+" "+ce(Ee(ke))+" m"),this},el=B.lineTo=function(Y,ke){return ze(ce(de(Y))+" "+ce(Ee(ke))+" l"),this},Ti=B.curveTo=function(Y,ke,ft,Tt,Wt,lr){return ze([ce(de(Y)),ce(Ee(ke)),ce(de(ft)),ce(Ee(Tt)),ce(de(Wt)),ce(Ee(lr)),"c"].join(" ")),this};B.__private__.line=B.line=function(Y,ke,ft,Tt,Wt){if(isNaN(Y)||isNaN(ke)||isNaN(ft)||isNaN(Tt)||!Yo(Wt))throw new Error("Invalid arguments passed to jsPDF.line");return Z===V?this.lines([[ft-Y,Tt-ke]],Y,ke,[1,1],Wt||"S"):this.lines([[ft-Y,Tt-ke]],Y,ke,[1,1]).stroke()},B.__private__.lines=B.lines=function(Y,ke,ft,Tt,Wt,lr){var br,qr,ui,Ui,Hi,Xi,Cn,Gs,Qn,fa,Ms,ja;if(typeof Y=="number"&&(ja=ft,ft=ke,ke=Y,Y=ja),Tt=Tt||[1,1],lr=lr||!1,isNaN(ke)||isNaN(ft)||!Array.isArray(Y)||!Array.isArray(Tt)||!Yo(Wt)||typeof lr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Aa(ke,ft),br=Tt[0],qr=Tt[1],Ui=Y.length,fa=ke,Ms=ft,ui=0;ui<Ui;ui++)(Hi=Y[ui]).length===2?(fa=Hi[0]*br+fa,Ms=Hi[1]*qr+Ms,el(fa,Ms)):(Xi=Hi[0]*br+fa,Cn=Hi[1]*qr+Ms,Gs=Hi[2]*br+fa,Qn=Hi[3]*qr+Ms,fa=Hi[4]*br+fa,Ms=Hi[5]*qr+Ms,Ti(Xi,Cn,Gs,Qn,fa,Ms));return lr&&Jo(),xc(Wt),this},B.path=function(Y){for(var ke=0;ke<Y.length;ke++){var ft=Y[ke],Tt=ft.c;switch(ft.op){case"m":Aa(Tt[0],Tt[1]);break;case"l":el(Tt[0],Tt[1]);break;case"c":Ti.apply(this,Tt);break;case"h":Jo()}}return this},B.__private__.rect=B.rect=function(Y,ke,ft,Tt,Wt){if(isNaN(Y)||isNaN(ke)||isNaN(ft)||isNaN(Tt)||!Yo(Wt))throw new Error("Invalid arguments passed to jsPDF.rect");return Z===V&&(Tt=-Tt),ze([ce(de(Y)),ce(Ee(ke)),ce(de(ft)),ce(de(Tt)),"re"].join(" ")),xc(Wt),this},B.__private__.triangle=B.triangle=function(Y,ke,ft,Tt,Wt,lr,br){if(isNaN(Y)||isNaN(ke)||isNaN(ft)||isNaN(Tt)||isNaN(Wt)||isNaN(lr)||!Yo(br))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ft-Y,Tt-ke],[Wt-ft,lr-Tt],[Y-Wt,ke-lr]],Y,ke,[1,1],br,!0),this},B.__private__.roundedRect=B.roundedRect=function(Y,ke,ft,Tt,Wt,lr,br){if(isNaN(Y)||isNaN(ke)||isNaN(ft)||isNaN(Tt)||isNaN(Wt)||isNaN(lr)||!Yo(br))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qr=4/3*(Math.SQRT2-1);return Wt=Math.min(Wt,.5*ft),lr=Math.min(lr,.5*Tt),this.lines([[ft-2*Wt,0],[Wt*qr,0,Wt,lr-lr*qr,Wt,lr],[0,Tt-2*lr],[0,lr*qr,-Wt*qr,lr,-Wt,lr],[2*Wt-ft,0],[-Wt*qr,0,-Wt,-lr*qr,-Wt,-lr],[0,2*lr-Tt],[0,-lr*qr,Wt*qr,-lr,Wt,-lr]],Y+Wt,ke,[1,1],br,!0),this},B.__private__.ellipse=B.ellipse=function(Y,ke,ft,Tt,Wt){if(isNaN(Y)||isNaN(ke)||isNaN(ft)||isNaN(Tt)||!Yo(Wt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var lr=4/3*(Math.SQRT2-1)*ft,br=4/3*(Math.SQRT2-1)*Tt;return Aa(Y+ft,ke),Ti(Y+ft,ke-br,Y+lr,ke-Tt,Y,ke-Tt),Ti(Y-lr,ke-Tt,Y-ft,ke-br,Y-ft,ke),Ti(Y-ft,ke+br,Y-lr,ke+Tt,Y,ke+Tt),Ti(Y+lr,ke+Tt,Y+ft,ke+br,Y+ft,ke),xc(Wt),this},B.__private__.circle=B.circle=function(Y,ke,ft,Tt){if(isNaN(Y)||isNaN(ke)||isNaN(ft)||!Yo(Tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Y,ke,ft,ft,Tt)},B.setFont=function(Y,ke,ft){return ft&&(ke=ae(ke,ft)),ot=xa(Y,ke,{disableWarning:!1}),this};var nu=B.__private__.getFont=B.getFont=function(){return Ke[xa.apply(B,arguments)]};B.__private__.getFontList=B.getFontList=function(){var Y,ke,ft={};for(Y in At)if(At.hasOwnProperty(Y))for(ke in ft[Y]=[],At[Y])At[Y].hasOwnProperty(ke)&&ft[Y].push(ke);return ft},B.addFont=function(Y,ke,ft,Tt,Wt){var lr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&lr.indexOf(arguments[3])!==-1?Wt=arguments[3]:arguments[3]&&lr.indexOf(arguments[3])==-1&&(ft=ae(ft,Tt)),ki.call(this,Y,ke,ft,Wt=Wt||"Identity-H")};var qa,oo=e.lineWidth||.200025,Ua=B.__private__.getLineWidth=B.getLineWidth=function(){return oo},li=B.__private__.setLineWidth=B.setLineWidth=function(Y){return oo=Y,ze(ce(de(Y))+" w"),this};B.__private__.setLineDash=Fi.API.setLineDash=Fi.API.setLineDashPattern=function(Y,ke){if(Y=Y||[],ke=ke||0,isNaN(ke)||!Array.isArray(Y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Y=Y.map(function(ft){return ce(de(ft))}).join(" "),ke=ce(de(ke)),ze("["+Y+"] "+ke+" d"),this};var Hs=B.__private__.getLineHeight=B.getLineHeight=function(){return or*qa};B.__private__.getLineHeight=B.getLineHeight=function(){return or*qa};var ys=B.__private__.setLineHeightFactor=B.setLineHeightFactor=function(Y){return typeof(Y=Y||1.15)=="number"&&(qa=Y),this},An=B.__private__.getLineHeightFactor=B.getLineHeightFactor=function(){return qa};ys(e.lineHeight);var Ka=B.__private__.getHorizontalCoordinate=function(Y){return de(Y)},Zn=B.__private__.getVerticalCoordinate=function(Y){return Z===G?Y:Bt[fe].mediaBox.topRightY-Bt[fe].mediaBox.bottomLeftY-de(Y)},Ls=B.__private__.getHorizontalCoordinateString=B.getHorizontalCoordinateString=function(Y){return ce(Ka(Y))},_a=B.__private__.getVerticalCoordinateString=B.getVerticalCoordinateString=function(Y){return ce(Zn(Y))},tl=e.strokeColor||"0 G";B.__private__.getStrokeColor=B.getDrawColor=function(){return He(tl)},B.__private__.setStrokeColor=B.setDrawColor=function(Y,ke,ft,Tt){return tl=nt({ch1:Y,ch2:ke,ch3:ft,ch4:Tt,pdfColorType:"draw",precision:2}),ze(tl),this};var _n=e.fillColor||"0 g";B.__private__.getFillColor=B.getFillColor=function(){return He(_n)},B.__private__.setFillColor=B.setFillColor=function(Y,ke,ft,Tt){return _n=nt({ch1:Y,ch2:ke,ch3:ft,ch4:Tt,pdfColorType:"fill",precision:2}),ze(_n),this};var kn=e.textColor||"0 g",Ki=B.__private__.getTextColor=B.getTextColor=function(){return He(kn)};B.__private__.setTextColor=B.setTextColor=function(Y,ke,ft,Tt){return kn=nt({ch1:Y,ch2:ke,ch3:ft,ch4:Tt,pdfColorType:"text",precision:3}),this};var di=e.charSpace,Vs=B.__private__.getCharSpace=B.getCharSpace=function(){return parseFloat(di||0)};B.__private__.setCharSpace=B.setCharSpace=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return di=Y,this};var bi=0;B.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},B.__private__.setLineCap=B.setLineCap=function(Y){var ke=B.CapJoinStyles[Y];if(ke===void 0)throw new Error("Line cap style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bi=ke,ze(ke+" J"),this};var Wl=0;B.__private__.setLineJoin=B.setLineJoin=function(Y){var ke=B.CapJoinStyles[Y];if(ke===void 0)throw new Error("Line join style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wl=ke,ze(ke+" j"),this},B.__private__.setLineMiterLimit=B.__private__.setMiterLimit=B.setLineMiterLimit=B.setMiterLimit=function(Y){if(Y=Y||0,isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ze(ce(de(Y))+" M"),this},B.GState=N_,B.setGState=function(Y){(Y=typeof Y=="string"?Ht[Gt[Y]]:_s(null,Y)).equals(Fr)||(ze("/"+Y.id+" gs"),Fr=Y)};var _s=function(Y,ke){if(!Y||!Gt[Y]){var ft=!1;for(var Tt in Ht)if(Ht.hasOwnProperty(Tt)&&Ht[Tt].equals(ke)){ft=!0;break}if(ft)ke=Ht[Tt];else{var Wt="GS"+(Object.keys(Ht).length+1).toString(10);Ht[Wt]=ke,ke.id=Wt}return Y&&(Gt[Y]=ke.id),ei.publish("addGState",ke),ke}};B.addGState=function(Y,ke){return _s(Y,ke),this},B.saveGraphicsState=function(){return ze("q"),Ft.push({key:ot,size:or,color:kn}),this},B.restoreGraphicsState=function(){ze("Q");var Y=Ft.pop();return ot=Y.key,or=Y.size,kn=Y.color,Fr=null,this},B.setCurrentTransformationMatrix=function(Y){return ze(Y.toString()+" cm"),this},B.comment=function(Y){return ze("#"+Y),this};var $l=function(Y,ke){var ft=Y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ft},set:function(lr){isNaN(lr)||(ft=parseFloat(lr))}});var Tt=ke||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Tt},set:function(lr){isNaN(lr)||(Tt=parseFloat(lr))}});var Wt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Wt},set:function(lr){Wt=lr.toString()}}),this},Xl=function(Y,ke,ft,Tt){$l.call(this,Y,ke),this.type="rect";var Wt=ft||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Wt},set:function(br){isNaN(br)||(Wt=parseFloat(br))}});var lr=Tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return lr},set:function(br){isNaN(br)||(lr=parseFloat(br))}}),this},yl=function(){this.page=kr,this.currentPage=fe,this.pages=qt.slice(0),this.pagesContext=Bt.slice(0),this.x=ye,this.y=Ce,this.matrix=je,this.width=Tu(fe),this.height=Fu(fe),this.outputDestination=at,this.id="",this.objectNumber=-1};yl.prototype.restore=function(){kr=this.page,fe=this.currentPage,Bt=this.pagesContext,qt=this.pages,ye=this.x,Ce=this.y,je=this.matrix,uh(fe,this.width),ba(fe,this.height),at=this.outputDestination};var No=function(Y,ke,ft,Tt,Wt){In.push(new yl),kr=fe=0,qt=[],ye=Y,Ce=ke,je=Wt,_i([ft,Tt])};for(var Io in B.beginFormObject=function(Y,ke,ft,Tt,Wt){return No(Y,ke,ft,Tt,Wt),this},B.endFormObject=function(Y){return function(ke){if(Di[ke])In.pop().restore();else{var ft=new yl,Tt="Xo"+(Object.keys(jr).length+1).toString(10);ft.id=Tt,Di[ke]=Tt,jr[Tt]=ft,ei.publish("addFormObject",ft),In.pop().restore()}}(Y),this},B.doFormObject=function(Y,ke){var ft=jr[Di[Y]];return ze("q"),ze(ke.toString()+" cm"),ze("/"+ft.id+" Do"),ze("Q"),this},B.getFormObject=function(Y){var ke=jr[Di[Y]];return{x:ke.x,y:ke.y,width:ke.width,height:ke.height,matrix:ke.matrix}},B.save=function(Y,ke){return Y=Y||"generated.pdf",(ke=ke||{}).returnPromise=ke.returnPromise||!1,ke.returnPromise===!1?(t0(oh(Xo()),Y),typeof t0.unload=="function"&&en.setTimeout&&setTimeout(t0.unload,911),this):new Promise(function(ft,Tt){try{var Wt=t0(oh(Xo()),Y);typeof t0.unload=="function"&&en.setTimeout&&setTimeout(t0.unload,911),ft(Wt)}catch(lr){Tt(lr.message)}})},Fi.API)Fi.API.hasOwnProperty(Io)&&(Io==="events"&&Fi.API.events.length?function(Y,ke){var ft,Tt,Wt;for(Wt=ke.length-1;Wt!==-1;Wt--)ft=ke[Wt][0],Tt=ke[Wt][1],Y.subscribe.apply(Y,[ft].concat(typeof Tt=="function"?[Tt]:Tt))}(ei,Fi.API.events):B[Io]=Fi.API[Io]);function Tu(Y){return Bt[Y].mediaBox.topRightX-Bt[Y].mediaBox.bottomLeftX}function uh(Y,ke){Bt[Y].mediaBox.topRightX=ke+Bt[Y].mediaBox.bottomLeftX}function Fu(Y){return Bt[Y].mediaBox.topRightY-Bt[Y].mediaBox.bottomLeftY}function ba(Y,ke){Bt[Y].mediaBox.topRightY=ke+Bt[Y].mediaBox.bottomLeftY}var Kn=B.getPageWidth=function(Y){return Tu(Y=Y||fe)/xe},yc=B.setPageWidth=function(Y,ke){uh(Y,ke*xe)},Zl=B.getPageHeight=function(Y){return Fu(Y=Y||fe)/xe},Yl=B.setPageHeight=function(Y,ke){ba(Y,ke*xe)};return B.internal={pdfEscape:Ni,getStyle:uA,getFont:nu,getFontSize:Hr,getCharSpace:Vs,getTextColor:Ki,getLineHeight:Hs,getLineHeightFactor:An,getLineWidth:Ua,write:Et,getHorizontalCoordinate:Ka,getVerticalCoordinate:Zn,getCoordinateString:Ls,getVerticalCoordinateString:_a,collections:{},newObject:gi,newAdditionalObject:ct,newObjectDeferred:hr,newObjectDeferredBegin:Re,getFilters:It,putStream:sr,events:ei,scaleFactor:xe,pageSize:{getWidth:function(){return Kn(fe)},setWidth:function(Y){yc(fe,Y)},getHeight:function(){return Zl(fe)},setHeight:function(Y){Yl(fe,Y)}},encryptionOptions:x,encryption:Fn,getEncryptor:function(Y){return x!==null?Fn.encryptor(Y,0):function(ke){return ke}},output:lh,getNumberOfPages:ea,get pages(){return qt},out:ze,f2:re,f3:W,getPageInfo:Ra,getPageInfoByObjId:ch,getCurrentPageInfo:Nh,getPDFVersion:I,Point:$l,Rectangle:Xl,Matrix:Yr,hasHotfix:Zo},Object.defineProperty(B.internal.pageSize,"width",{get:function(){return Kn(fe)},set:function(Y){yc(fe,Y)},enumerable:!0,configurable:!0}),Object.defineProperty(B.internal.pageSize,"height",{get:function(){return Zl(fe)},set:function(Y){Yl(fe,Y)},enumerable:!0,configurable:!0}),(function(Y){for(var ke=0,ft=Sr.length;ke<ft;ke++){var Tt=ki.call(this,Y[ke][0],Y[ke][1],Y[ke][2],Sr[ke][3],!0);C===!1&&(N[Tt]=!0);var Wt=Y[ke][0].split("-");yi({id:Tt,fontName:Wt[0],fontStyle:Wt[1]||""})}ei.publish("addFonts",{fonts:Ke,dictionary:At})}).call(B,Sr),ot="F1",Ga(n,r),ei.publish("initialized"),B}Im.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Im.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Im.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Im.prototype.processOwnerPassword=function(e,t){return w5(b5(t).substr(0,5),e)},Im.prototype.encryptor=function(e,t){var r=b5(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return w5(r,i)}},N_.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ns(e)!==Ns(this))return!1;var i=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&i--;return i===0},Fi.API={events:[]},Fi.version="3.0.4";var io=Fi.API,iB=1,T0=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wm=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},sn=function(e){return e.toFixed(2)},Yd=function(e){return e.toFixed(5)};io.__acroform__={};var ah=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Z3=function(e){return e*iB},xf=function(e){var t=new wN,r=pi.internal.getHeight(e)||0,i=pi.internal.getWidth(e)||0;return t.BBox=[0,0,Number(sn(i)),Number(sn(r))],t},yG=io.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},_G=io.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},bG=io.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Co=io.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bG(e,t-1)},So=io.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yG(e,t-1)},Eo=io.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _G(e,t-1)},wG=io.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,n=e[0],a=e[1],c=e[2],s=e[3],d={};return d.lowerLeft_X=r(n)||0,d.lowerLeft_Y=i(a+s)||0,d.upperRight_X=r(n+c)||0,d.upperRight_Y=i(a)||0,[Number(sn(d.lowerLeft_X)),Number(sn(d.lowerLeft_Y)),Number(sn(d.upperRight_X)),Number(sn(d.upperRight_Y))]},BG=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,i=B5(e,r),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+n+" "+sn(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=xf(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},B5=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=e.multiline?n.map(function(re){return re.split(`
`)}):n.map(function(re){return[re]});var a=r,c=pi.internal.getHeight(e)||0;c=c<0?-c:c;var s=pi.internal.getWidth(e)||0;s=s<0?-s:s;var d=function(re,W,de){if(re+1<n.length){var Ee=W+" "+n[re+1][0];return fy(Ee,e,de).width<=s-4}return!1};a++;e:for(;a>0;){t="",a--;var g,x,C=fy("3",e,a).height,N=e.multiline?c-a:(c-C)/2,B=N+=2,M=0,I=0,R=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+fy(t,e,a=12).width+", FieldWidth:"+s+`
`;break}for(var D="",V=0,G=0;G<n.length;G++)if(n.hasOwnProperty(G)){var Z=!1;if(n[G].length!==1&&R!==n[G].length-1){if((C+2)*(V+2)+2>c)continue e;D+=n[G][R],Z=!0,I=G,G--}else{D=(D+=n[G][R]+" ").substr(D.length-1)==" "?D.substr(0,D.length-1):D;var X=parseInt(G),le=d(X,D,a),ae=G>=n.length-1;if(le&&!ae){D+=" ",R=0;continue}if(le||ae){if(ae)I=X;else if(e.multiline&&(C+2)*(V+2)+2>c)continue e}else{if(!e.multiline||(C+2)*(V+2)+2>c)continue e;I=X}}for(var ce="",se=M;se<=I;se++){var ue=n[se];if(e.multiline){if(se===I){ce+=ue[R]+" ",R=(R+1)%ue.length;continue}if(se===M){ce+=ue[ue.length-1]+" ";continue}}ce+=ue[0]+" "}switch(ce=ce.substr(ce.length-1)==" "?ce.substr(0,ce.length-1):ce,x=fy(ce,e,a).width,e.textAlign){case"right":g=s-x-2;break;case"center":g=(s-x)/2;break;default:g=2}t+=sn(g)+" "+sn(B)+` Td
`,t+="("+T0(ce)+`) Tj
`,t+=-sn(g)+` 0 Td
`,B=-(a+2),x=0,M=Z?I:I+1,V++,D=""}break}return i.text=t,i.fontSize=a,i},fy=function(e,t,r){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},CG={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},SG=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===r.type&&i.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},EG=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(KA.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(CG)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");iB=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new BN,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in i)if(i.hasOwnProperty(n)){var a=i[n];a.objId=void 0,a.hasAnnotation&&SG(a,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(i,n){var a=!i;for(var c in i||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(c)){var s=i[c],d=[],g=s.Rect;if(s.Rect&&(s.Rect=wG(s.Rect,n)),n.internal.newObjectDeferredBegin(s.objId,!0),s.DA=pi.createDefaultAppearanceStream(s),Ns(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(d=s.getKeyValueListForStream()),s.Rect=g,s.hasAppearanceStream&&!s.appearanceStreamContent){var x=BG(s);d.push({key:"AP",value:"<</N "+x+">>"}),n.internal.acroformPlugin.xForms.push(x)}if(s.appearanceStreamContent){var C="";for(var N in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(N)){var B=s.appearanceStreamContent[N];if(C+="/"+N+" ",C+="<<",Object.keys(B).length>=1||Array.isArray(B)){for(var c in B)if(B.hasOwnProperty(c)){var M=B[c];typeof M=="function"&&(M=M.call(n,s)),C+="/"+c+" "+M+" ",n.internal.acroformPlugin.xForms.indexOf(M)>=0||n.internal.acroformPlugin.xForms.push(M)}}else typeof(M=B)=="function"&&(M=M.call(n,s)),C+="/"+c+" "+M,n.internal.acroformPlugin.xForms.indexOf(M)>=0||n.internal.acroformPlugin.xForms.push(M);C+=">>"}d.push({key:"AP",value:`<<
`+C+">>"})}n.internal.putStream({additionalKeyValues:d,objectId:s.objId}),n.internal.out("endobj")}a&&function(I,R){for(var D in I)if(I.hasOwnProperty(D)){var V=D,G=I[D];R.internal.newObjectDeferredBegin(G.objId,!0),Ns(G)==="object"&&typeof G.putStream=="function"&&G.putStream(),delete I[V]}}(n.internal.acroformPlugin.xForms,n)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},bN=io.__acroform__.arrayToPdfArray=function(e,t,r){var i=function(c){return c};if(Array.isArray(e)){for(var n="[",a=0;a<e.length;a++)switch(a!==0&&(n+=" "),Ns(e[a])){case"boolean":case"number":case"object":n+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&r&&(i=r.internal.getEncryptor(t)),n+="("+T0(i(e[a].toString()))+")"):n+=e[a].toString()}return n+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Yb=function(e,t,r){var i=function(n){return n};return t!==void 0&&r&&(i=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+T0(i(e))+")"},Bf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Bf.prototype.toString=function(){return this.objId+" 0 R"},Bf.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Bf.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var i=t[r],n=this[i];n&&(Array.isArray(n)?e.push({key:i,value:bN(n,this.objId,this.scope)}):n instanceof Bf?(n.scope=this.scope,e.push({key:i,value:n.objId+" 0 R"})):typeof n!="function"&&e.push({key:i,value:n}))}return e};var wN=function(){Bf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ah(wN,Bf);var BN=function(){Bf.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(i){return i};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+T0(r(e))+")"}},set:function(r){e=r}})};ah(BN,Bf);var KA=function e(){Bf.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute F supplied.');t=D}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Co(t,3)},set:function(D){D?this.F=So(t,3):this.F=Eo(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute Ff supplied.');r=D}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(D){i=D!==void 0?D:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(D){i[0]=D}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(D){i[1]=D}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(D){i[2]=D}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(D){i[3]=D}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(D){switch(D){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=D;break;default:throw new Error('Invalid value "'+D+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof I_)return;a="FieldObject"+e.FieldNum++}var D=function(V){return V};return this.scope&&(D=this.scope.internal.getEncryptor(this.objId)),"("+T0(D(a))+")"},set:function(D){a=D.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(D){a=D}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(D){c=D}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(D){s=D}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(D){d=D}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/iB:g},set:function(D){g=D}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(D){x=D}});var C="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!C||this instanceof I_||this instanceof A0))return Yb(C,this.objId,this.scope)},set:function(D){D=D.toString(),C=D}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof ql==0?Yb(N,this.objId,this.scope):N},set:function(D){D=D.toString(),N=this instanceof ql==0?D.substr(0,1)==="("?wm(D.substr(1,D.length-2)):wm(D):D}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ql==1?wm(N.substr(1,N.length-1)):N},set:function(D){D=D.toString(),N=this instanceof ql==1?"/"+D:D}});var B=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(B)return B},set:function(D){this.V=D}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(B)return this instanceof ql==0?Yb(B,this.objId,this.scope):B},set:function(D){D=D.toString(),B=this instanceof ql==0?D.substr(0,1)==="("?wm(D.substr(1,D.length-2)):wm(D):D}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ql==1?wm(B.substr(1,B.length-1)):B},set:function(D){D=D.toString(),B=this instanceof ql==1?"/"+D:D}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var M,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(D){D=!!D,I=D}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(M)return M},set:function(D){M=D}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,1)},set:function(D){D?this.Ff=So(this.Ff,1):this.Ff=Eo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,2)},set:function(D){D?this.Ff=So(this.Ff,2):this.Ff=Eo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,3)},set:function(D){D?this.Ff=So(this.Ff,3):this.Ff=Eo(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(D){if([0,1,2].indexOf(D)===-1)throw new Error('Invalid value "'+D+'" for attribute Q supplied.');R=D}}),Object.defineProperty(this,"textAlign",{get:function(){var D;switch(R){case 0:default:D="left";break;case 1:D="center";break;case 2:D="right"}return D},configurable:!0,enumerable:!0,set:function(D){switch(D){case"right":case 2:R=2;break;case"center":case 1:R=1;break;default:R=0}}})};ah(KA,Bf);var Gm=function(){KA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return bN(t,this.objId,this.scope)},set:function(r){var i,n;n=[],typeof(i=r)=="string"&&(n=function(a,c,s){s||(s=1);for(var d,g=[];d=c.exec(a);)g.push(d[s]);return g}(i,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,i){for(i=i||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,18)},set:function(r){r?this.Ff=So(this.Ff,18):this.Ff=Eo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=So(this.Ff,19):this.Ff=Eo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,20)},set:function(r){r?(this.Ff=So(this.Ff,20),t.sort()):this.Ff=Eo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,22)},set:function(r){r?this.Ff=So(this.Ff,22):this.Ff=Eo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,23)},set:function(r){r?this.Ff=So(this.Ff,23):this.Ff=Eo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,27)},set:function(r){r?this.Ff=So(this.Ff,27):this.Ff=Eo(this.Ff,27)}}),this.hasAppearanceStream=!1};ah(Gm,KA);var qm=function(){Gm.call(this),this.fontName="helvetica",this.combo=!1};ah(qm,Gm);var Km=function(){qm.call(this),this.combo=!0};ah(Km,qm);var c_=function(){Km.call(this),this.edit=!0};ah(c_,Km);var ql=function(){KA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,15)},set:function(r){r?this.Ff=So(this.Ff,15):this.Ff=Eo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,16)},set:function(r){r?this.Ff=So(this.Ff,16):this.Ff=Eo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,17)},set:function(r){r?this.Ff=So(this.Ff,17):this.Ff=Eo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,26)},set:function(r){r?this.Ff=So(this.Ff,26):this.Ff=Eo(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,n=[];for(i in n.push("<<"),t)n.push("/"+i+" ("+T0(r(t[i]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){Ns(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ah(ql,KA);var u_=function(){ql.call(this),this.pushButton=!0};ah(u_,ql);var Wm=function(){ql.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ah(Wm,ql);var I_=function(){var e,t;KA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var a,c=[];for(a in c.push("<<"),i)c.push("/"+a+" ("+T0(n(i[a]))+")");return c.push(">>"),c.join(`
`)},set:function(n){Ns(n)==="object"&&(i=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(n){typeof n=="string"&&(i.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pi.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ah(I_,KA),Wm.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Wm.prototype.createOption=function(e){var t=new I_;return t.Parent=this,t.optionName=e,this.Kids.push(t),TG.call(this.scope,t),t};var h_=function(){ql.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pi.CheckBox.createAppearanceStream()};ah(h_,ql);var A0=function(){KA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,13)},set:function(t){t?this.Ff=So(this.Ff,13):this.Ff=Eo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,21)},set:function(t){t?this.Ff=So(this.Ff,21):this.Ff=Eo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,23)},set:function(t){t?this.Ff=So(this.Ff,23):this.Ff=Eo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,24)},set:function(t){t?this.Ff=So(this.Ff,24):this.Ff=Eo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,25)},set:function(t){t?this.Ff=So(this.Ff,25):this.Ff=Eo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,26)},set:function(t){t?this.Ff=So(this.Ff,26):this.Ff=Eo(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ah(A0,KA);var A_=function(){A0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Co(this.Ff,14)},set:function(e){e?this.Ff=So(this.Ff,14):this.Ff=Eo(this.Ff,14)}}),this.password=!0};ah(A_,A0);var pi={CheckBox:{createAppearanceStream:function(){return{N:{On:pi.CheckBox.YesNormal},D:{On:pi.CheckBox.YesPushDown,Off:pi.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=xf(e);t.scope=e.scope;var r=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=B5(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+sn(pi.internal.getWidth(e))+" "+sn(pi.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+sn(a.fontSize)+" Tf "+n),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=xf(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),n=[],a=pi.internal.getHeight(e),c=pi.internal.getWidth(e),s=B5(e,e.caption);return n.push("1 g"),n.push("0 0 "+sn(c)+" "+sn(a)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+sn(c-1)+" "+sn(a-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+sn(s.fontSize)+" Tf "+i),n.push(s.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=xf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sn(pi.internal.getWidth(e))+" "+sn(pi.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:pi.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=pi.RadioButton.Circle.YesNormal,t.D[e]=pi.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=xf(e);t.scope=e.scope;var r=[],i=pi.internal.getWidth(e)<=pi.internal.getHeight(e)?pi.internal.getWidth(e)/4:pi.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var n=pi.internal.Bezier_C,a=Number((i*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Yd(pi.internal.getWidth(e)/2)+" "+Yd(pi.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=xf(e);t.scope=e.scope;var r=[],i=pi.internal.getWidth(e)<=pi.internal.getHeight(e)?pi.internal.getWidth(e)/4:pi.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var n=Number((2*i).toFixed(5)),a=Number((n*pi.internal.Bezier_C).toFixed(5)),c=Number((i*pi.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Yd(pi.internal.getWidth(e)/2)+" "+Yd(pi.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Yd(pi.internal.getWidth(e)/2)+" "+Yd(pi.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),r.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),r.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),r.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=xf(e);t.scope=e.scope;var r=[],i=pi.internal.getWidth(e)<=pi.internal.getHeight(e)?pi.internal.getWidth(e)/4:pi.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var n=Number((2*i).toFixed(5)),a=Number((n*pi.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Yd(pi.internal.getWidth(e)/2)+" "+Yd(pi.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:pi.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=pi.RadioButton.Cross.YesNormal,t.D[e]=pi.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=xf(e);t.scope=e.scope;var r=[],i=pi.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+sn(pi.internal.getWidth(e)-2)+" "+sn(pi.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(sn(i.x1.x)+" "+sn(i.x1.y)+" m"),r.push(sn(i.x2.x)+" "+sn(i.x2.y)+" l"),r.push(sn(i.x4.x)+" "+sn(i.x4.y)+" m"),r.push(sn(i.x3.x)+" "+sn(i.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=xf(e);t.scope=e.scope;var r=pi.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+sn(pi.internal.getWidth(e))+" "+sn(pi.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+sn(pi.internal.getWidth(e)-2)+" "+sn(pi.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(sn(r.x1.x)+" "+sn(r.x1.y)+" m"),i.push(sn(r.x2.x)+" "+sn(r.x2.y)+" l"),i.push(sn(r.x4.x)+" "+sn(r.x4.y)+" m"),i.push(sn(r.x3.x)+" "+sn(r.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=xf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sn(pi.internal.getWidth(e))+" "+sn(pi.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};pi.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=pi.internal.getWidth(e),r=pi.internal.getHeight(e),i=Math.min(t,r);return{x1:{x:(t-i)/2,y:(r-i)/2+i},x2:{x:(t-i)/2+i,y:(r-i)/2},x3:{x:(t-i)/2,y:(r-i)/2},x4:{x:(t-i)/2+i,y:(r-i)/2+i}}}},pi.internal.getWidth=function(e){var t=0;return Ns(e)==="object"&&(t=Z3(e.Rect[2])),t},pi.internal.getHeight=function(e){var t=0;return Ns(e)==="object"&&(t=Z3(e.Rect[3])),t};var TG=io.addField=function(e){if(EG(this,e),!(e instanceof KA))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};io.AcroFormChoiceField=Gm,io.AcroFormListBox=qm,io.AcroFormComboBox=Km,io.AcroFormEditBox=c_,io.AcroFormButton=ql,io.AcroFormPushButton=u_,io.AcroFormRadioButton=Wm,io.AcroFormCheckBox=h_,io.AcroFormTextField=A0,io.AcroFormPasswordField=A_,io.AcroFormAppearance=pi,io.AcroForm={ChoiceField:Gm,ListBox:qm,ComboBox:Km,EditBox:c_,Button:ql,PushButton:u_,RadioButton:Wm,CheckBox:h_,TextField:A0,PasswordField:A_,Appearance:pi},Fi.AcroForm={ChoiceField:Gm,ListBox:qm,ComboBox:Km,EditBox:c_,Button:ql,PushButton:u_,RadioButton:Wm,CheckBox:h_,TextField:A0,PasswordField:A_,Appearance:pi};Fi.AcroForm;function CN(e){return e.reduce(function(t,r,i){return t[r]=i,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(re,W){var de,Ee,Ne,ge,Pe,Ye=r;if((W=W||r)==="RGBA"||re.data!==void 0&&re.data instanceof Uint8ClampedArray&&"height"in re&&"width"in re)return"RGBA";if(le(re))for(Pe in i)for(Ne=i[Pe],de=0;de<Ne.length;de+=1){for(ge=!0,Ee=0;Ee<Ne[de].length;Ee+=1)if(Ne[de][Ee]!==void 0&&Ne[de][Ee]!==re[Ee]){ge=!1;break}if(ge===!0){Ye=Pe;break}}else for(Pe in i)for(Ne=i[Pe],de=0;de<Ne.length;de+=1){for(ge=!0,Ee=0;Ee<Ne[de].length;Ee+=1)if(Ne[de][Ee]!==void 0&&Ne[de][Ee]!==re.charCodeAt(Ee)){ge=!1;break}if(ge===!0){Ye=Pe;break}}return Ye===r&&W!==r&&(Ye=W),Ye},a=function re(W){for(var de=this.internal.write,Ee=this.internal.putStream,Ne=(0,this.internal.getFilters)();Ne.indexOf("FlateEncode")!==-1;)Ne.splice(Ne.indexOf("FlateEncode"),1);W.objectId=this.internal.newObject();var ge=[];if(ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Image"}),ge.push({key:"Width",value:W.width}),ge.push({key:"Height",value:W.height}),W.colorSpace===D.INDEXED?ge.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(W.palette.length/3-1)+" "+("sMask"in W&&W.sMask!==void 0?W.objectId+2:W.objectId+1)+" 0 R]"}):(ge.push({key:"ColorSpace",value:"/"+W.colorSpace}),W.colorSpace===D.DEVICE_CMYK&&ge.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ge.push({key:"BitsPerComponent",value:W.bitsPerComponent}),"decodeParameters"in W&&W.decodeParameters!==void 0&&ge.push({key:"DecodeParms",value:"<<"+W.decodeParameters+">>"}),"transparency"in W&&Array.isArray(W.transparency)&&W.transparency.length>0){for(var Pe="",Ye=0,Me=W.transparency.length;Ye<Me;Ye++)Pe+=W.transparency[Ye]+" "+W.transparency[Ye]+" ";ge.push({key:"Mask",value:"["+Pe+"]"})}W.sMask!==void 0&&ge.push({key:"SMask",value:W.objectId+1+" 0 R"});var De=W.filter!==void 0?["/"+W.filter]:void 0;if(Ee({data:W.data,additionalKeyValues:ge,alreadyAppliedFilters:De,objectId:W.objectId}),de("endobj"),"sMask"in W&&W.sMask!==void 0){var tt,ee=(tt=W.sMaskBitsPerComponent)!==null&&tt!==void 0?tt:W.bitsPerComponent,fe={width:W.width,height:W.height,colorSpace:"DeviceGray",bitsPerComponent:ee,data:W.sMask};"filter"in W&&(fe.decodeParameters="/Predictor ".concat(W.predictor," /Colors 1 /BitsPerComponent ").concat(ee," /Columns ").concat(W.width),fe.filter=W.filter),re.call(this,fe)}if(W.colorSpace===D.INDEXED){var pe=this.internal.newObject();Ee({data:ce(new Uint8Array(W.palette)),objectId:pe}),de("endobj")}},c=function(){var re=this.internal.collections[t+"images"];for(var W in re)a.call(this,re[W])},s=function(){var re,W=this.internal.collections[t+"images"],de=this.internal.write;for(var Ee in W)de("/I"+(re=W[Ee]).index,re.objectId,"0","R")},d=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",s))},g=function(){var re=this.internal.collections[t+"images"];return d.call(this),re},x=function(){return Object.keys(this.internal.collections[t+"images"]).length},C=function(re){return typeof e["process"+re.toUpperCase()]=="function"},N=function(re){return Ns(re)==="object"&&re.nodeType===1},B=function(re,W){if(re.nodeName==="IMG"&&re.hasAttribute("src")){var de=""+re.getAttribute("src");if(de.indexOf("data:image/")===0)return l_(unescape(de).split("base64,").pop());var Ee=e.loadFile(de,!0);if(Ee!==void 0)return Ee}if(re.nodeName==="CANVAS"){if(re.width===0||re.height===0)throw new Error("Given canvas must have data. Canvas width: "+re.width+", height: "+re.height);var Ne;switch(W){case"PNG":Ne="image/png";break;case"WEBP":Ne="image/webp";break;default:Ne="image/jpeg"}return l_(re.toDataURL(Ne,1).split("base64,").pop())}},M=function(re){var W=this.internal.collections[t+"images"];if(W){for(var de in W)if(re===W[de].alias)return W[de]}},I=function(re,W,de){return re||W||(re=-96,W=-96),re<0&&(re=-1*de.width*72/re/this.internal.scaleFactor),W<0&&(W=-1*de.height*72/W/this.internal.scaleFactor),re===0&&(re=W*de.width/de.height),W===0&&(W=re*de.height/de.width),[re,W]},R=function(re,W,de,Ee,Ne,ge){var Pe=I.call(this,de,Ee,Ne),Ye=this.internal.getCoordinateString,Me=this.internal.getVerticalCoordinateString,De=g.call(this);if(de=Pe[0],Ee=Pe[1],De[Ne.index]=Ne,ge){ge*=Math.PI/180;var tt=Math.cos(ge),ee=Math.sin(ge),fe=function(we){return we.toFixed(4)},pe=[fe(tt),fe(ee),fe(-1*ee),fe(tt),0,0,"cm"]}this.internal.write("q"),ge?(this.internal.write([1,"0","0",1,Ye(re),Me(W+Ee),"cm"].join(" ")),this.internal.write(pe.join(" ")),this.internal.write([Ye(de),"0","0",Ye(Ee),"0","0","cm"].join(" "))):this.internal.write([Ye(de),"0","0",Ye(Ee),Ye(re),Me(W+Ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ne.index+" Do"),this.internal.write("Q")},D=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var V=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},G=e.__addimage__.sHashCode=function(re){var W,de,Ee=0;if(typeof re=="string")for(de=re.length,W=0;W<de;W++)Ee=(Ee<<5)-Ee+re.charCodeAt(W),Ee|=0;else if(le(re))for(de=re.byteLength/2,W=0;W<de;W++)Ee=(Ee<<5)-Ee+re[W],Ee|=0;return Ee},Z=e.__addimage__.validateStringAsBase64=function(re){(re=re||"").toString().trim();var W=!0;return re.length===0&&(W=!1),re.length%4!=0&&(W=!1),/^[A-Za-z0-9+/]+$/.test(re.substr(0,re.length-2))===!1&&(W=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(re.substr(-2))===!1&&(W=!1),W},X=e.__addimage__.extractImageFromDataUrl=function(re){if(re==null||!(re=re.trim()).startsWith("data:"))return null;var W=re.indexOf(",");return W<0?null:re.substring(0,W).trim().endsWith("base64")?re.substring(W+1):null};e.__addimage__.isArrayBuffer=function(re){return re instanceof ArrayBuffer};var le=e.__addimage__.isArrayBufferView=function(re){return re instanceof Int8Array||re instanceof Uint8Array||re instanceof Uint8ClampedArray||re instanceof Int16Array||re instanceof Uint16Array||re instanceof Int32Array||re instanceof Uint32Array||re instanceof Float32Array||re instanceof Float64Array},ae=e.__addimage__.binaryStringToUint8Array=function(re){for(var W=re.length,de=new Uint8Array(W),Ee=0;Ee<W;Ee++)de[Ee]=re.charCodeAt(Ee);return de},ce=e.__addimage__.arrayBufferToBinaryString=function(re){for(var W="",de=le(re)?re:new Uint8Array(re),Ee=0;Ee<de.length;Ee+=8192)W+=String.fromCharCode.apply(null,de.subarray(Ee,Ee+8192));return W};e.addImage=function(){var re,W,de,Ee,Ne,ge,Pe,Ye,Me;if(typeof arguments[1]=="number"?(W=r,de=arguments[1],Ee=arguments[2],Ne=arguments[3],ge=arguments[4],Pe=arguments[5],Ye=arguments[6],Me=arguments[7]):(W=arguments[1],de=arguments[2],Ee=arguments[3],Ne=arguments[4],ge=arguments[5],Pe=arguments[6],Ye=arguments[7],Me=arguments[8]),Ns(re=arguments[0])==="object"&&!N(re)&&"imageData"in re){var De=re;re=De.imageData,W=De.format||W||r,de=De.x||de||0,Ee=De.y||Ee||0,Ne=De.w||De.width||Ne,ge=De.h||De.height||ge,Pe=De.alias||Pe,Ye=De.compression||Ye,Me=De.rotation||De.angle||Me}var tt=this.internal.getFilters();if(Ye===void 0&&tt.indexOf("FlateEncode")!==-1&&(Ye="SLOW"),isNaN(de)||isNaN(Ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var ee=se.call(this,re,W,Pe,Ye);return R.call(this,de,Ee,Ne,ge,ee,Me),this};var se=function(re,W,de,Ee){var Ne,ge,Pe;if(typeof re=="string"&&n(re)===r){re=unescape(re);var Ye=ue(re,!1);(Ye!==""||(Ye=e.loadFile(re,!0))!==void 0)&&(re=Ye)}if(N(re)&&(re=B(re,W)),W=n(re,W),!C(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(((Pe=de)==null||Pe.length===0)&&(de=function(Me){return typeof Me=="string"||le(Me)?G(Me):le(Me.data)?G(Me.data):null}(re)),(Ne=M.call(this,de))||(re instanceof Uint8Array||W==="RGBA"||(ge=re,re=ae(re)),Ne=this["process"+W.toUpperCase()](re,x.call(this),de,function(Me){return Me&&typeof Me=="string"&&(Me=Me.toUpperCase()),Me in e.image_compression?Me:V.NONE}(Ee),ge)),!Ne)throw new Error("An unknown error occurred whilst processing the image.");return Ne},ue=e.__addimage__.convertBase64ToBinaryString=function(re,W){W=typeof W!="boolean"||W;var de,Ee="";if(typeof re=="string"){var Ne;de=(Ne=X(re))!==null&&Ne!==void 0?Ne:re;try{Ee=l_(de)}catch(ge){if(W)throw Z(de)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ge.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ee};e.getImageProperties=function(re){var W,de,Ee="";if(N(re)&&(re=B(re)),typeof re=="string"&&n(re)===r&&((Ee=ue(re,!1))===""&&(Ee=e.loadFile(re)||""),re=Ee),de=n(re),!C(de))throw new Error("addImage does not support files of type '"+de+"', please ensure that a plugin for '"+de+"' support is added.");if(re instanceof Uint8Array||(re=ae(re)),!(W=this["process"+de.toUpperCase()](re)))throw new Error("An unknown error occurred whilst processing the image");return W.fileType=de,W}})(Fi.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Fi.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var i,n,a,c=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),g=r.pageContext.annotations,x=!1,C=0;C<g.length&&!x;C++)switch((i=g[C]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var N=0;N<g.length;N++){i=g[N];var B=this.internal.pdfEscape,M=this.internal.getEncryptor(r.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),D=this.internal.getEncryptor(I.objId),V=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(n="/Rect ["+c(i.bounds.x)+" "+s(i.bounds.y+i.bounds.h)+" "+c(i.bounds.x+i.bounds.w)+" "+s(i.bounds.y)+"] ")+"/Contents ("+B(D(i.contents))+")",a+=" /Popup "+R.objId+" 0 R",a+=" /P "+d.objId+" 0 R",a+=" /T ("+B(D(V))+") >>",I.content=a;var G=I.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+c(i.bounds.x+30)+" "+s(i.bounds.y+i.bounds.h)+" "+c(i.bounds.x+i.bounds.w+30)+" "+s(i.bounds.y)+"] ")+" /Parent "+G,i.open&&(a+=" /Open true"),a+=" >>",R.content=a,this.internal.write(I.objId,"0 R",R.objId,"0 R");break;case"freetext":n="/Rect ["+c(i.bounds.x)+" "+s(i.bounds.y)+" "+c(i.bounds.x+i.bounds.w)+" "+s(i.bounds.y+i.bounds.h)+"] ";var Z=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+B(M(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var X=this.annotations._nameMap[i.options.name];i.options.pageNumber=X.page,i.options.top=X.y}else i.options.top||(i.options.top=0);if(n="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+B(M(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;default:var le=s(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+le+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var i=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":i.pageContext.annotations.push(r)}},e.link=function(r,i,n,a,c){var s=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:d(r),y:g(i),w:d(r+n),h:g(i+a)},options:c,type:"link"})},e.textWithLink=function(r,i,n,a){var c,s,d=this.getTextWidth(r),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var x=this.splitTextToSize(r,s).length;c=Math.ceil(g*x)}else s=d,c=g;return this.text(r,i,n,a),n+=.2*g,a.align==="center"&&(i-=d/2),a.align==="right"&&(i-=d),this.link(i,n-g,s,c,a),d},e.getTextWidth=function(r){var i=this.internal.getFontSize();return this.getStringUnitWidth(r)*i/this.internal.scaleFactor}}(Fi.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(I){return t[I.charCodeAt(0)]!==void 0},c=e.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},s=e.__arabicParser__.isArabicEndLetter=function(I){return c(I)&&a(I)&&t[I.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(I){return c(I)&&n.indexOf(I.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return c(I)&&a(I)&&t[I.charCodeAt(0)].length>=1};var g=e.__arabicParser__.arabicLetterHasFinalForm=function(I){return c(I)&&a(I)&&t[I.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(I){return c(I)&&a(I)&&t[I.charCodeAt(0)].length>=3};var x=e.__arabicParser__.arabicLetterHasMedialForm=function(I){return c(I)&&a(I)&&t[I.charCodeAt(0)].length==4},C=e.__arabicParser__.resolveLigatures=function(I){var R=0,D=r,V="",G=0;for(R=0;R<I.length;R+=1)D[I.charCodeAt(R)]!==void 0?(G++,typeof(D=D[I.charCodeAt(R)])=="number"&&(V+=String.fromCharCode(D),D=r,G=0),R===I.length-1&&(D=r,V+=I.charAt(R-(G-1)),R-=G-1,G=0)):(D=r,V+=I.charAt(R-G),R-=G,G=0);return V};e.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&i[I.charCodeAt(0)]!==void 0};var N=e.__arabicParser__.getCorrectForm=function(I,R,D){return c(I)?a(I)===!1?-1:!g(I)||!c(R)&&!c(D)||!c(D)&&s(R)||s(I)&&!c(R)||s(I)&&d(R)||s(I)&&s(R)?0:x(I)&&c(R)&&!s(R)&&c(D)&&g(D)?3:s(I)||!c(D)?1:2:-1},B=function(I){var R=0,D=0,V=0,G="",Z="",X="",le=(I=I||"").split("\\s+"),ae=[];for(R=0;R<le.length;R+=1){for(ae.push(""),D=0;D<le[R].length;D+=1)G=le[R][D],Z=le[R][D-1],X=le[R][D+1],c(G)?(V=N(G,Z,X),ae[R]+=V!==-1?String.fromCharCode(t[G.charCodeAt(0)][V]):G):ae[R]+=G;ae[R]=C(ae[R])}return ae.join(" ")},M=e.__arabicParser__.processArabic=e.processArabic=function(){var I,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,D=[];if(Array.isArray(R)){var V=0;for(D=[],V=0;V<R.length;V+=1)Array.isArray(R[V])?D.push([B(R[V][0]),R[V][1],R[V][2]]):D.push([B(R[V])]);I=D}else I=B(R);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};e.events.push(["preProcessText",M])}(Fi.API),Fi.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(s){r=s}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(s){c=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,i){var n;if((r=r||"2d")!=="2d")return null;for(n in i)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=i[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Fi.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(I){d=I}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(I){g=I}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(I){x=I}});var C=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return C},set:function(I){C=I}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(I){N=I}});var B=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return B},set:function(I){B=I}});var M=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return M},set:function(I){M=I}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return i.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,g){i.call(this);var x=(g=g||{}).fontSize||this.getFontSize(),C=g.font||this.getFont(),N=g.scaleFactor||this.internal.scaleFactor,B=0,M=0,I=0,R=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var D=g.maxWidth;D>0?typeof d=="string"?d=this.splitTextToSize(d,D):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(G,Z){return G.concat(R.splitTextToSize(Z,D))},[])):d=Array.isArray(d)?d:[d];for(var V=0;V<d.length;V++)B<(I=this.getStringUnitWidth(d[V],{font:C})*x)&&(B=I);return B!==0&&(M=d.length),{w:B/=N,h:Math.max((M*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/N,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=e.cell=function(){var d;d=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var g=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,C=this.internal.__cell__.margins||t,N=this.internal.__cell__.tableHeaderRow,B=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===d.lineNumber?(d.x=(g.x||0)+(g.width||0),d.y=g.y||0):g.y+g.height+d.height+C.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=C.top,B&&N&&(this.printHeaderRow(d.lineNumber,!0),d.y+=N[0].height)):d.y=g.y+g.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-x,d.y+x,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+x,{align:"center",baseline:"top",maxWidth:d.width-x-x}):this.text(d.text,d.x+x,d.y+x,{align:"left",baseline:"top",maxWidth:d.width-x-x})),this.internal.__cell__.lastCell=d,this};e.table=function(d,g,x,C,N){if(i.call(this),!x)throw new Error("No data for PDF table.");var B,M,I,R,D=[],V=[],G=[],Z={},X={},le=[],ae=[],ce=(N=N||{}).autoSize||!1,se=N.printHeaders!==!1,ue=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,re=N.margins||Object.assign({width:this.getPageWidth()},t),W=typeof N.padding=="number"?N.padding:3,de=N.headerBackgroundColor||"#c8c8c8",Ee=N.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=se,this.internal.__cell__.margins=re,this.internal.__cell__.table_font_size=ue,this.internal.__cell__.padding=W,this.internal.__cell__.headerBackgroundColor=de,this.internal.__cell__.headerTextColor=Ee,this.setFontSize(ue),C==null)V=D=Object.keys(x[0]),G=D.map(function(){return"left"});else if(Array.isArray(C)&&Ns(C[0])==="object")for(D=C.map(function(De){return De.name}),V=C.map(function(De){return De.prompt||De.name||""}),G=C.map(function(De){return De.align||"left"}),B=0;B<C.length;B+=1)X[C[B].name]=.7499990551181103*C[B].width;else Array.isArray(C)&&typeof C[0]=="string"&&(V=D=C,G=D.map(function(){return"left"}));if(ce||Array.isArray(C)&&typeof C[0]=="string")for(B=0;B<D.length;B+=1){for(Z[R=D[B]]=x.map(function(De){return De[R]}),this.setFont(void 0,"bold"),le.push(this.getTextDimensions(V[B],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),M=Z[R],this.setFont(void 0,"normal"),I=0;I<M.length;I+=1)le.push(this.getTextDimensions(M[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);X[R]=Math.max.apply(null,le)+W+W,le=[]}if(se){var Ne={};for(B=0;B<D.length;B+=1)Ne[D[B]]={},Ne[D[B]].text=V[B],Ne[D[B]].align=G[B];var ge=s.call(this,Ne,X);ae=D.map(function(De){return new a(d,g,X[De],ge,Ne[De].text,void 0,Ne[De].align)}),this.setTableHeaderRow(ae),this.printHeaderRow(1,!1)}var Pe=C.reduce(function(De,tt){return De[tt.name]=tt.align,De},{});for(B=0;B<x.length;B+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:B,data:x[B]},this);var Ye=s.call(this,x[B],X);for(I=0;I<D.length;I+=1){var Me=x[B][D[I]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:B,col:I,data:Me},this),c.call(this,new a(d,g,X[D[I]],Ye,Me,B+2,Pe[D[I]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=g,this};var s=function(d,g){var x=this.internal.__cell__.padding,C=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(d).map(function(B){var M=d[B];return this.splitTextToSize(M.hasOwnProperty("text")?M.text:M,g[B]-x-x)},this).map(function(B){return this.getLineHeightFactor()*B.length*C/N+x+x},this).reduce(function(B,M){return Math.max(B,M)},0)};e.setTableHeaderRow=function(d){i.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,g){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var C=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(C[0],C[1],C[2],C[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],B=0;B<this.internal.__cell__.tableHeaderRow.length;B+=1){x=this.internal.__cell__.tableHeaderRow[B].clone(),g&&(x.y=this.internal.__cell__.margins.top||0,N.push(x)),x.lineNumber=d;var M=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,x),this.setTextColor(M)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),r=!1}}(Fi.API);var SN={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},EN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],C5=CN(EN),TN=[100,200,300,400,500,600,700,800,900],FG=CN(TN);function Jb(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return SN[a=a||"normal"]?a:"normal"}(e.style),i=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(e.weight),n=function(a){return typeof C5[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:r,weight:i,stretch:n,src:e.src||[],ref:e.ref||{name:t,style:[n,r,i].join(" ")}}}function Y3(e,t,r,i){var n;for(n=r;n>=0&&n<t.length;n+=i)if(e[t[n]])return e[t[n]];for(n=r;n>=0&&n<t.length;n-=i)if(e[t[n]])return e[t[n]]}var kG={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},J3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function eE(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function tE(e){return e.trimLeft()}function NG(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function IG(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var dy,rE,iE,Bm,py,nE,sE,aE,ew=["times"];function oE(e,t,r,i,n){var a=4,c=cE;switch(n){case Fi.API.image_compression.FAST:a=1,c=lE;break;case Fi.API.image_compression.MEDIUM:a=6,c=uE;break;case Fi.API.image_compression.SLOW:a=9,c=hE}e=function(d,g,x,C){for(var N,B=d.length/g,M=new Uint8Array(d.length+B),I=[LG,lE,cE,uE,hE],R=0;R<B;R+=1){var D=R*g,V=d.subarray(D,D+g);if(C)M.set(C(V,x,N),D+R);else{for(var G=I.length,Z=[],X=0;X<G;X+=1)Z[X]=I[X](V,x,N);var le=PG(Z.concat());M.set(Z[le],D+R)}N=V}return M}(e,t,Math.ceil(r*i/8),c);var s=v5(e,{level:a});return Fi.API.__addimage__.arrayBufferToBinaryString(s)}function LG(e){var t=Array.apply([],e);return t.unshift(0),t}function lE(e,t){var r=e.length,i=[];i[0]=1;for(var n=0;n<r;n+=1){var a=e[n-t]||0;i[n+1]=e[n]-a+256&255}return i}function cE(e,t,r){var i=e.length,n=[];n[0]=2;for(var a=0;a<i;a+=1){var c=r&&r[a]||0;n[a+1]=e[a]-c+256&255}return n}function uE(e,t,r){var i=e.length,n=[];n[0]=3;for(var a=0;a<i;a+=1){var c=e[a-t]||0,s=r&&r[a]||0;n[a+1]=e[a]+256-(c+s>>>1)&255}return n}function hE(e,t,r){var i=e.length,n=[];n[0]=4;for(var a=0;a<i;a+=1){var c=MG(e[a-t]||0,r&&r[a]||0,r&&r[a-t]||0);n[a+1]=e[a]-c+256&255}return n}function MG(e,t,r){if(e===t&&t===r)return e;var i=Math.abs(t-r),n=Math.abs(e-r),a=Math.abs(e+t-r-r);return i<=n&&i<=a?e:n<=a?t:r}function PG(e){var t=e.map(function(r){return r.reduce(function(i,n){return i+Math.abs(n)},0)});return t.indexOf(Math.min.apply(null,t))}function tw(e,t,r){var i=t*r,n=Math.floor(i/8),a=16-(i-8*n+r),c=(1<<r)-1;return FN(e,n)>>a&c}function AE(e,t,r,i){var n=r*i,a=Math.floor(n/8),c=16-(n-8*a+i),s=(1<<i)-1,d=(t&s)<<c;(function(g,x,C){if(x+1<g.byteLength)g.setUint16(x,C,!1);else{var N=C>>8&255;g.setUint8(x,N)}})(e,a,FN(e,a)&~(s<<c)&65535|d)}function FN(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function DG(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,n=e[t++],a=n>>7,c=1<<1+(7&n);e[t++],e[t++];var s=null,d=null;a&&(s=t,d=c,t+=3*c);var g=!0,x=[],C=0,N=null,B=0,M=null;for(this.width=r,this.height=i;g&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,M=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((re=e[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var I=e[t++];C=e[t++]|e[t++]<<8,N=e[t++],1&I||(N=null),B=I>>2&7,t++;break;case 254:for(;;){if(!((re=e[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var R=e[t++]|e[t++]<<8,D=e[t++]|e[t++]<<8,V=e[t++]|e[t++]<<8,G=e[t++]|e[t++]<<8,Z=e[t++],X=Z>>6&1,le=1<<1+(7&Z),ae=s,ce=d,se=!1;Z>>7&&(se=!0,ae=t,ce=le,t+=3*le);var ue=t;for(t++;;){var re;if(!((re=e[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}x.push({x:R,y:D,width:V,height:G,has_local_palette:se,palette_offset:ae,palette_size:ce,data_offset:ue,data_length:t-ue,transparent_index:N,interlaced:!!X,delay:C,disposal:B});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return M},this.frameInfo=function(W){if(W<0||W>=x.length)throw new Error("Frame index out of range.");return x[W]},this.decodeAndBlitFrameBGRA=function(W,de){var Ee=this.frameInfo(W),Ne=Ee.width*Ee.height,ge=new Uint8Array(Ne);fE(e,Ee.data_offset,ge,Ne);var Pe=Ee.palette_offset,Ye=Ee.transparent_index;Ye===null&&(Ye=256);var Me=Ee.width,De=r-Me,tt=Me,ee=4*(Ee.y*r+Ee.x),fe=4*((Ee.y+Ee.height)*r+Ee.x),pe=ee,we=4*De;Ee.interlaced===!0&&(we+=4*r*7);for(var Le=8,lt=0,rt=ge.length;lt<rt;++lt){var gt=ge[lt];if(tt===0&&(tt=Me,(pe+=we)>=fe&&(we=4*De+4*r*(Le-1),pe=ee+(Me+De)*(Le<<1),Le>>=1)),gt===Ye)pe+=4;else{var dt=e[Pe+3*gt],qt=e[Pe+3*gt+1],Te=e[Pe+3*gt+2];de[pe++]=Te,de[pe++]=qt,de[pe++]=dt,de[pe++]=255}--tt}},this.decodeAndBlitFrameRGBA=function(W,de){var Ee=this.frameInfo(W),Ne=Ee.width*Ee.height,ge=new Uint8Array(Ne);fE(e,Ee.data_offset,ge,Ne);var Pe=Ee.palette_offset,Ye=Ee.transparent_index;Ye===null&&(Ye=256);var Me=Ee.width,De=r-Me,tt=Me,ee=4*(Ee.y*r+Ee.x),fe=4*((Ee.y+Ee.height)*r+Ee.x),pe=ee,we=4*De;Ee.interlaced===!0&&(we+=4*r*7);for(var Le=8,lt=0,rt=ge.length;lt<rt;++lt){var gt=ge[lt];if(tt===0&&(tt=Me,(pe+=we)>=fe&&(we=4*De+4*r*(Le-1),pe=ee+(Me+De)*(Le<<1),Le>>=1)),gt===Ye)pe+=4;else{var dt=e[Pe+3*gt],qt=e[Pe+3*gt+1],Te=e[Pe+3*gt+2];de[pe++]=dt,de[pe++]=qt,de[pe++]=Te,de[pe++]=255}--tt}}}function fE(e,t,r,i){for(var n=e[t++],a=1<<n,c=a+1,s=c+1,d=n+1,g=(1<<d)-1,x=0,C=0,N=0,B=e[t++],M=new Int32Array(4096),I=null;;){for(;x<16&&B!==0;)C|=e[t++]<<x,x+=8,B===1?B=e[t++]:--B;if(x<d)break;var R=C&g;if(C>>=d,x-=d,R!==a){if(R===c)break;for(var D=R<s?R:I,V=0,G=D;G>a;)G=M[G]>>8,++V;var Z=G;if(N+V+(D!==R?1:0)>i)return void Js.log("Warning, gif stream longer than expected.");r[N++]=Z;var X=N+=V;for(D!==R&&(r[N++]=Z),G=D;V--;)G=M[G],r[--X]=255&G,G>>=8;I!==null&&s<4096&&(M[s++]=I<<8|Z,s>=g+1&&d<12&&(++d,g=g<<1|1)),I=R}else s=c+1,g=(1<<(d=n+1))-1,I=null}return N!==i&&Js.log("Warning, gif stream shorter than expected."),r}function rw(e){var t,r,i,n,a,c=Math.floor,s=new Array(64),d=new Array(64),g=new Array(64),x=new Array(64),C=new Array(65535),N=new Array(65535),B=new Array(64),M=new Array(64),I=[],R=0,D=7,V=new Array(64),G=new Array(64),Z=new Array(64),X=new Array(256),le=new Array(2048),ae=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ce=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],se=[0,1,2,3,4,5,6,7,8,9,10,11],ue=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],re=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],W=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],de=[0,1,2,3,4,5,6,7,8,9,10,11],Ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ge(ee,fe){for(var pe=0,we=0,Le=new Array,lt=1;lt<=16;lt++){for(var rt=1;rt<=ee[lt];rt++)Le[fe[we]]=[],Le[fe[we]][0]=pe,Le[fe[we]][1]=lt,we++,pe++;pe*=2}return Le}function Pe(ee){for(var fe=ee[0],pe=ee[1]-1;pe>=0;)fe&1<<pe&&(R|=1<<D),pe--,--D<0&&(R==255?(Ye(255),Ye(0)):Ye(R),D=7,R=0)}function Ye(ee){I.push(ee)}function Me(ee){Ye(ee>>8&255),Ye(255&ee)}function De(ee,fe,pe,we,Le){for(var lt,rt=Le[0],gt=Le[240],dt=function(or,Wr){var Hr,ti,Gr,wi,Bi,Zr,Xr,$r,ot,xe,ye=0;for(ot=0;ot<8;++ot){Hr=or[ye],ti=or[ye+1],Gr=or[ye+2],wi=or[ye+3],Bi=or[ye+4],Zr=or[ye+5],Xr=or[ye+6];var Ce=Hr+($r=or[ye+7]),je=Hr-$r,Ke=ti+Xr,At=ti-Xr,Ft=Gr+Zr,vt=Gr-Zr,Nt=wi+Bi,Ht=wi-Bi,Gt=Ce+Nt,Fr=Ce-Nt,kr=Ke+Ft,Bt=Ke-Ft;or[ye]=Gt+kr,or[ye+4]=Gt-kr;var ei=.707106781*(Bt+Fr);or[ye+2]=Fr+ei,or[ye+6]=Fr-ei;var Yi=.382683433*((Gt=Ht+vt)-(Bt=At+je)),jr=.5411961*Gt+Yi,Di=1.306562965*Bt+Yi,In=.707106781*(kr=vt+At),Yr=je+In,on=je-In;or[ye+5]=on+jr,or[ye+3]=on-jr,or[ye+1]=Yr+Di,or[ye+7]=Yr-Di,ye+=8}for(ye=0,ot=0;ot<8;++ot){Hr=or[ye],ti=or[ye+8],Gr=or[ye+16],wi=or[ye+24],Bi=or[ye+32],Zr=or[ye+40],Xr=or[ye+48];var Wi=Hr+($r=or[ye+56]),mi=Hr-$r,ln=ti+Xr,gi=ti-Xr,hr=Gr+Zr,Re=Gr-Zr,ct=wi+Bi,$e=wi-Bi,it=Wi+ct,He=Wi-ct,nt=ln+hr,It=ln-hr;or[ye]=it+nt,or[ye+32]=it-nt;var sr=.707106781*(It+He);or[ye+16]=He+sr,or[ye+48]=He-sr;var Qt=.382683433*((it=$e+Re)-(It=gi+mi)),Xt=.5411961*it+Qt,jt=1.306562965*It+Qt,_r=.707106781*(nt=Re+gi),Mr=mi+_r,Vr=mi-_r;or[ye+40]=Vr+Xt,or[ye+24]=Vr-Xt,or[ye+8]=Mr+jt,or[ye+56]=Mr-jt,ye++}for(ot=0;ot<64;++ot)xe=or[ot]*Wr[ot],B[ot]=xe>0?xe+.5|0:xe-.5|0;return B}(ee,fe),qt=0;qt<64;++qt)M[ae[qt]]=dt[qt];var Te=M[0]-pe;pe=M[0],Te==0?Pe(we[0]):(Pe(we[N[lt=32767+Te]]),Pe(C[lt]));for(var at=63;at>0&&M[at]==0;)at--;if(at==0)return Pe(rt),pe;for(var kt,ze=1;ze<=at;){for(var Et=ze;M[ze]==0&&ze<=at;)++ze;var Pt=ze-Et;if(Pt>=16){kt=Pt>>4;for(var Sr=1;Sr<=kt;++Sr)Pe(gt);Pt&=15}lt=32767+M[ze],Pe(Le[(Pt<<4)+N[lt]]),Pe(C[lt]),ze++}return at!=63&&Pe(rt),pe}function tt(ee){ee=Math.min(Math.max(ee,1),100),a!=ee&&(function(fe){for(var pe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],we=0;we<64;we++){var Le=c((pe[we]*fe+50)/100);Le=Math.min(Math.max(Le,1),255),s[ae[we]]=Le}for(var lt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],rt=0;rt<64;rt++){var gt=c((lt[rt]*fe+50)/100);gt=Math.min(Math.max(gt,1),255),d[ae[rt]]=gt}for(var dt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qt=0,Te=0;Te<8;Te++)for(var at=0;at<8;at++)g[qt]=1/(s[ae[qt]]*dt[Te]*dt[at]*8),x[qt]=1/(d[ae[qt]]*dt[Te]*dt[at]*8),qt++}(ee<50?Math.floor(5e3/ee):Math.floor(200-2*ee)),a=ee)}this.encode=function(ee,fe){fe&&tt(fe),I=new Array,R=0,D=7,Me(65496),Me(65504),Me(16),Ye(74),Ye(70),Ye(73),Ye(70),Ye(0),Ye(1),Ye(1),Ye(0),Me(1),Me(1),Ye(0),Ye(0),function(){Me(65499),Me(132),Ye(0);for(var ti=0;ti<64;ti++)Ye(s[ti]);Ye(1);for(var Gr=0;Gr<64;Gr++)Ye(d[Gr])}(),function(ti,Gr){Me(65472),Me(17),Ye(8),Me(Gr),Me(ti),Ye(3),Ye(1),Ye(17),Ye(0),Ye(2),Ye(17),Ye(1),Ye(3),Ye(17),Ye(1)}(ee.width,ee.height),function(){Me(65476),Me(418),Ye(0);for(var ti=0;ti<16;ti++)Ye(ce[ti+1]);for(var Gr=0;Gr<=11;Gr++)Ye(se[Gr]);Ye(16);for(var wi=0;wi<16;wi++)Ye(ue[wi+1]);for(var Bi=0;Bi<=161;Bi++)Ye(re[Bi]);Ye(1);for(var Zr=0;Zr<16;Zr++)Ye(W[Zr+1]);for(var Xr=0;Xr<=11;Xr++)Ye(de[Xr]);Ye(17);for(var $r=0;$r<16;$r++)Ye(Ee[$r+1]);for(var ot=0;ot<=161;ot++)Ye(Ne[ot])}(),Me(65498),Me(12),Ye(3),Ye(1),Ye(0),Ye(2),Ye(17),Ye(3),Ye(17),Ye(0),Ye(63),Ye(0);var pe=0,we=0,Le=0;R=0,D=7,this.encode.displayName="_encode_";for(var lt,rt,gt,dt,qt,Te,at,kt,ze,Et=ee.data,Pt=ee.width,Sr=ee.height,or=4*Pt,Wr=0;Wr<Sr;){for(lt=0;lt<or;){for(qt=or*Wr+lt,at=-1,kt=0,ze=0;ze<64;ze++)Te=qt+(kt=ze>>3)*or+(at=4*(7&ze)),Wr+kt>=Sr&&(Te-=or*(Wr+1+kt-Sr)),lt+at>=or&&(Te-=lt+at-or+4),rt=Et[Te++],gt=Et[Te++],dt=Et[Te++],V[ze]=(le[rt]+le[gt+256|0]+le[dt+512|0]>>16)-128,G[ze]=(le[rt+768|0]+le[gt+1024|0]+le[dt+1280|0]>>16)-128,Z[ze]=(le[rt+1280|0]+le[gt+1536|0]+le[dt+1792|0]>>16)-128;pe=De(V,g,pe,t,i),we=De(G,x,we,r,n),Le=De(Z,x,Le,r,n),lt+=32}Wr+=8}if(D>=0){var Hr=[];Hr[1]=D+1,Hr[0]=(1<<D+1)-1,Pe(Hr)}return Me(65497),new Uint8Array(I)},e=e||50,function(){for(var ee=String.fromCharCode,fe=0;fe<256;fe++)X[fe]=ee(fe)}(),t=ge(ce,se),r=ge(W,de),i=ge(ue,re),n=ge(Ee,Ne),function(){for(var ee=1,fe=2,pe=1;pe<=15;pe++){for(var we=ee;we<fe;we++)N[32767+we]=pe,C[32767+we]=[],C[32767+we][1]=pe,C[32767+we][0]=we;for(var Le=-(fe-1);Le<=-ee;Le++)N[32767+Le]=pe,C[32767+Le]=[],C[32767+Le][1]=pe,C[32767+Le][0]=fe-1+Le;ee<<=1,fe<<=1}}(),function(){for(var ee=0;ee<256;ee++)le[ee]=19595*ee,le[ee+256|0]=38470*ee,le[ee+512|0]=7471*ee+32768,le[ee+768|0]=-11059*ee,le[ee+1024|0]=-21709*ee,le[ee+1280|0]=32768*ee+8421375,le[ee+1536|0]=-27439*ee,le[ee+1792|0]=-5329*ee}(),tt(e)}function MA(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function dE(e){function t(se){if(!se)throw Error("assert :P")}function r(se,ue,re){for(var W=0;4>W;W++)if(se[ue+W]!=re.charCodeAt(W))return!0;return!1}function i(se,ue,re,W,de){for(var Ee=0;Ee<de;Ee++)se[ue+Ee]=re[W+Ee]}function n(se,ue,re,W){for(var de=0;de<W;de++)se[ue+de]=re}function a(se){return new Int32Array(se)}function c(se,ue){for(var re=[],W=0;W<se;W++)re.push(new ue);return re}function s(se,ue){var re=[];return function W(de,Ee,Ne){for(var ge=Ne[Ee],Pe=0;Pe<ge&&(de.push(Ne.length>Ee+1?[]:new ue),!(Ne.length<Ee+1));Pe++)W(de[Pe],Ee+1,Ne)}(re,0,se),re}var d=function(){var se=this;function ue(U,z){for(var ie=1<<z-1>>>0;U&ie;)ie>>>=1;return ie?(U&ie-1)+ie:U}function re(U,z,ie,Ae,Ie){t(!(Ae%ie));do U[z+(Ae-=ie)]=Ie;while(0<Ae)}function W(U,z,ie,Ae,Ie){if(t(2328>=Ie),512>=Ie)var Qe=a(512);else if((Qe=a(Ie))==null)return 0;return function(qe,We,et,Ge,Mt,tr){var ut,Ot,Kt=We,cr=1<<et,Rt=a(16),Ar=a(16);for(t(Mt!=0),t(Ge!=null),t(qe!=null),t(0<et),Ot=0;Ot<Mt;++Ot){if(15<Ge[Ot])return 0;++Rt[Ge[Ot]]}if(Rt[0]==Mt)return 0;for(Ar[1]=0,ut=1;15>ut;++ut){if(Rt[ut]>1<<ut)return 0;Ar[ut+1]=Ar[ut]+Rt[ut]}for(Ot=0;Ot<Mt;++Ot)ut=Ge[Ot],0<Ge[Ot]&&(tr[Ar[ut]++]=Ot);if(Ar[15]==1)return(Ge=new de).g=0,Ge.value=tr[0],re(qe,Kt,1,cr,Ge),cr;var dr,Er=-1,yr=cr-1,Ai=0,ri=1,ji=1,ni=1<<et;for(Ot=0,ut=1,Mt=2;ut<=et;++ut,Mt<<=1){if(ri+=ji<<=1,0>(ji-=Rt[ut]))return 0;for(;0<Rt[ut];--Rt[ut])(Ge=new de).g=ut,Ge.value=tr[Ot++],re(qe,Kt+Ai,Mt,ni,Ge),Ai=ue(Ai,ut)}for(ut=et+1,Mt=2;15>=ut;++ut,Mt<<=1){if(ri+=ji<<=1,0>(ji-=Rt[ut]))return 0;for(;0<Rt[ut];--Rt[ut]){if(Ge=new de,(Ai&yr)!=Er){for(Kt+=ni,dr=1<<(Er=ut)-et;15>Er&&!(0>=(dr-=Rt[Er]));)++Er,dr<<=1;cr+=ni=1<<(dr=Er-et),qe[We+(Er=Ai&yr)].g=dr+et,qe[We+Er].value=Kt-We-Er}Ge.g=ut-et,Ge.value=tr[Ot++],re(qe,Kt+(Ai>>et),Mt,ni,Ge),Ai=ue(Ai,ut)}}return ri!=2*Ar[15]-1?0:cr}(U,z,ie,Ae,Ie,Qe)}function de(){this.value=this.g=0}function Ee(){this.value=this.g=0}function Ne(){this.G=c(5,de),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(co,Ee)}function ge(U,z,ie,Ae){t(U!=null),t(z!=null),t(2147483648>Ae),U.Ca=254,U.I=0,U.b=-8,U.Ka=0,U.oa=z,U.pa=ie,U.Jd=z,U.Yc=ie+Ae,U.Zc=4<=Ae?ie+Ae-4+1:ie,rt(U)}function Pe(U,z){for(var ie=0;0<z--;)ie|=dt(U,128)<<z;return ie}function Ye(U,z){var ie=Pe(U,z);return gt(U)?-ie:ie}function Me(U,z,ie,Ae){var Ie,Qe=0;for(t(U!=null),t(z!=null),t(4294967288>Ae),U.Sb=Ae,U.Ra=0,U.u=0,U.h=0,4<Ae&&(Ae=4),Ie=0;Ie<Ae;++Ie)Qe+=z[ie+Ie]<<8*Ie;U.Ra=Qe,U.bb=Ae,U.oa=z,U.pa=ie}function De(U){for(;8<=U.u&&U.bb<U.Sb;)U.Ra>>>=8,U.Ra+=U.oa[U.pa+U.bb]<<ho-8>>>0,++U.bb,U.u-=8;we(U)&&(U.h=1,U.u=0)}function tt(U,z){if(t(0<=z),!U.h&&z<=uo){var ie=pe(U)&$a[z];return U.u+=z,De(U),ie}return U.h=1,U.u=0}function ee(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function fe(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function pe(U){return U.Ra>>>(U.u&ho-1)>>>0}function we(U){return t(U.bb<=U.Sb),U.h||U.bb==U.Sb&&U.u>ho}function Le(U,z){U.u=z,U.h=we(U)}function lt(U){U.u>=Jl&&(t(U.u>=Jl),De(U))}function rt(U){t(U!=null&&U.oa!=null),U.pa<U.Zc?(U.I=(U.oa[U.pa++]|U.I<<8)>>>0,U.b+=8):(t(U!=null&&U.oa!=null),U.pa<U.Yc?(U.b+=8,U.I=U.oa[U.pa++]|U.I<<8):U.Ka?U.b=0:(U.I<<=8,U.b+=8,U.Ka=1))}function gt(U){return Pe(U,1)}function dt(U,z){var ie=U.Ca;0>U.b&&rt(U);var Ae=U.b,Ie=ie*z>>>8,Qe=(U.I>>>Ae>Ie)+0;for(Qe?(ie-=Ie,U.I-=Ie+1<<Ae>>>0):ie=Ie+1,Ae=ie,Ie=0;256<=Ae;)Ie+=8,Ae>>=8;return Ae=7^Ie+ec[Ae],U.b-=Ae,U.Ca=(ie<<Ae)-1,Qe}function qt(U,z,ie){U[z+0]=ie>>24&255,U[z+1]=ie>>16&255,U[z+2]=ie>>8&255,U[z+3]=255&ie}function Te(U,z){return U[z+0]|U[z+1]<<8}function at(U,z){return Te(U,z)|U[z+2]<<16}function kt(U,z){return Te(U,z)|Te(U,z+2)<<16}function ze(U,z){var ie=1<<z;return t(U!=null),t(0<z),U.X=a(ie),U.X==null?0:(U.Mb=32-z,U.Xa=z,1)}function Et(U,z){t(U!=null),t(z!=null),t(U.Xa==z.Xa),i(z.X,0,U.X,0,1<<z.Xa)}function Pt(){this.X=[],this.Xa=this.Mb=0}function Sr(U,z,ie,Ae){t(ie!=null),t(Ae!=null);var Ie=ie[0],Qe=Ae[0];return Ie==0&&(Ie=(U*Qe+z/2)/z),Qe==0&&(Qe=(z*Ie+U/2)/U),0>=Ie||0>=Qe?0:(ie[0]=Ie,Ae[0]=Qe,1)}function or(U,z){return U+(1<<z)-1>>>z}function Wr(U,z){return((4278255360&U)+(4278255360&z)>>>0&4278255360)+((16711935&U)+(16711935&z)>>>0&16711935)>>>0}function Hr(U,z){se[z]=function(ie,Ae,Ie,Qe,qe,We,et){var Ge;for(Ge=0;Ge<qe;++Ge){var Mt=se[U](We[et+Ge-1],Ie,Qe+Ge);We[et+Ge]=Wr(ie[Ae+Ge],Mt)}}}function ti(){this.ud=this.hd=this.jd=0}function Gr(U,z){return((4278124286&(U^z))>>>1)+(U&z)>>>0}function wi(U){return 0<=U&&256>U?U:0>U?0:255<U?255:void 0}function Bi(U,z){return wi(U+(U-z+.5>>1))}function Zr(U,z,ie){return Math.abs(z-ie)-Math.abs(U-ie)}function Xr(U,z,ie,Ae,Ie,Qe,qe){for(Ae=Qe[qe-1],ie=0;ie<Ie;++ie)Qe[qe+ie]=Ae=Wr(U[z+ie],Ae)}function $r(U,z,ie,Ae,Ie){var Qe;for(Qe=0;Qe<ie;++Qe){var qe=U[z+Qe],We=qe>>8&255,et=16711935&(et=(et=16711935&qe)+((We<<16)+We));Ae[Ie+Qe]=(4278255360&qe)+et>>>0}}function ot(U,z){z.jd=255&U,z.hd=U>>8&255,z.ud=U>>16&255}function xe(U,z,ie,Ae,Ie,Qe){var qe;for(qe=0;qe<Ae;++qe){var We=z[ie+qe],et=We>>>8,Ge=We,Mt=255&(Mt=(Mt=We>>>16)+((U.jd<<24>>24)*(et<<24>>24)>>>5));Ge=255&(Ge=(Ge+=(U.hd<<24>>24)*(et<<24>>24)>>>5)+((U.ud<<24>>24)*(Mt<<24>>24)>>>5)),Ie[Qe+qe]=(4278255360&We)+(Mt<<16)+Ge}}function ye(U,z,ie,Ae,Ie){se[z]=function(Qe,qe,We,et,Ge,Mt,tr,ut,Ot){for(et=tr;et<ut;++et)for(tr=0;tr<Ot;++tr)Ge[Mt++]=Ie(We[Ae(Qe[qe++])])},se[U]=function(Qe,qe,We,et,Ge,Mt,tr){var ut=8>>Qe.b,Ot=Qe.Ea,Kt=Qe.K[0],cr=Qe.w;if(8>ut)for(Qe=(1<<Qe.b)-1,cr=(1<<ut)-1;qe<We;++qe){var Rt,Ar=0;for(Rt=0;Rt<Ot;++Rt)Rt&Qe||(Ar=Ae(et[Ge++])),Mt[tr++]=Ie(Kt[Ar&cr]),Ar>>=ut}else se["VP8LMapColor"+ie](et,Ge,Kt,cr,Mt,tr,qe,We,Ot)}}function Ce(U,z,ie,Ae,Ie){for(ie=z+ie;z<ie;){var Qe=U[z++];Ae[Ie++]=Qe>>16&255,Ae[Ie++]=Qe>>8&255,Ae[Ie++]=255&Qe}}function je(U,z,ie,Ae,Ie){for(ie=z+ie;z<ie;){var Qe=U[z++];Ae[Ie++]=Qe>>16&255,Ae[Ie++]=Qe>>8&255,Ae[Ie++]=255&Qe,Ae[Ie++]=Qe>>24&255}}function Ke(U,z,ie,Ae,Ie){for(ie=z+ie;z<ie;){var Qe=(qe=U[z++])>>16&240|qe>>12&15,qe=240&qe|qe>>28&15;Ae[Ie++]=Qe,Ae[Ie++]=qe}}function At(U,z,ie,Ae,Ie){for(ie=z+ie;z<ie;){var Qe=(qe=U[z++])>>16&248|qe>>13&7,qe=qe>>5&224|qe>>3&31;Ae[Ie++]=Qe,Ae[Ie++]=qe}}function Ft(U,z,ie,Ae,Ie){for(ie=z+ie;z<ie;){var Qe=U[z++];Ae[Ie++]=255&Qe,Ae[Ie++]=Qe>>8&255,Ae[Ie++]=Qe>>16&255}}function vt(U,z,ie,Ae,Ie,Qe){if(Qe==0)for(ie=z+ie;z<ie;)qt(Ae,((Qe=U[z++])[0]>>24|Qe[1]>>8&65280|Qe[2]<<8&16711680|Qe[3]<<24)>>>0),Ie+=32;else i(Ae,Ie,U,z,ie)}function Nt(U,z){se[z][0]=se[U+"0"],se[z][1]=se[U+"1"],se[z][2]=se[U+"2"],se[z][3]=se[U+"3"],se[z][4]=se[U+"4"],se[z][5]=se[U+"5"],se[z][6]=se[U+"6"],se[z][7]=se[U+"7"],se[z][8]=se[U+"8"],se[z][9]=se[U+"9"],se[z][10]=se[U+"10"],se[z][11]=se[U+"11"],se[z][12]=se[U+"12"],se[z][13]=se[U+"13"],se[z][14]=se[U+"0"],se[z][15]=se[U+"0"]}function Ht(U){return U==pA||U==Ec||U==kl||U==fu}function Gt(){this.eb=[],this.size=this.A=this.fb=0}function Fr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function kr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Gt,this.f.kb=new Fr,this.sd=null}function Bt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ei(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Yi(U){return alert("todo:WebPSamplerProcessPlane"),U.T}function jr(U,z){var ie=U.T,Ae=z.ba.f.RGBA,Ie=Ae.eb,Qe=Ae.fb+U.ka*Ae.A,qe=qs[z.ba.S],We=U.y,et=U.O,Ge=U.f,Mt=U.N,tr=U.ea,ut=U.W,Ot=z.cc,Kt=z.dc,cr=z.Mc,Rt=z.Nc,Ar=U.ka,dr=U.ka+U.T,Er=U.U,yr=Er+1>>1;for(Ar==0?qe(We,et,null,null,Ge,Mt,tr,ut,Ge,Mt,tr,ut,Ie,Qe,null,null,Er):(qe(z.ec,z.fc,We,et,Ot,Kt,cr,Rt,Ge,Mt,tr,ut,Ie,Qe-Ae.A,Ie,Qe,Er),++ie);Ar+2<dr;Ar+=2)Ot=Ge,Kt=Mt,cr=tr,Rt=ut,Mt+=U.Rc,ut+=U.Rc,Qe+=2*Ae.A,qe(We,(et+=2*U.fa)-U.fa,We,et,Ot,Kt,cr,Rt,Ge,Mt,tr,ut,Ie,Qe-Ae.A,Ie,Qe,Er);return et+=U.fa,U.j+dr<U.o?(i(z.ec,z.fc,We,et,Er),i(z.cc,z.dc,Ge,Mt,yr),i(z.Mc,z.Nc,tr,ut,yr),ie--):1&dr||qe(We,et,null,null,Ge,Mt,tr,ut,Ge,Mt,tr,ut,Ie,Qe+Ae.A,null,null,Er),ie}function Di(U,z,ie){var Ae=U.F,Ie=[U.J];if(Ae!=null){var Qe=U.U,qe=z.ba.S,We=qe==mh||qe==kl;z=z.ba.f.RGBA;var et=[0],Ge=U.ka;et[0]=U.T,U.Kb&&(Ge==0?--et[0]:(--Ge,Ie[0]-=U.width),U.j+U.ka+U.T==U.o&&(et[0]=U.o-U.j-Ge));var Mt=z.eb;Ge=z.fb+Ge*z.A,U=da(Ae,Ie[0],U.width,Qe,et,Mt,Ge+(We?0:3),z.A),t(ie==et),U&&Ht(qe)&&dh(Mt,Ge,We,Qe,et,z.A)}return 0}function In(U){var z=U.ma,ie=z.ba.S,Ae=11>ie,Ie=ie==Ih||ie==Au||ie==mh||ie==Fl||ie==12||Ht(ie);if(z.memory=null,z.Ib=null,z.Jb=null,z.Nd=null,!ou(z.Oa,U,Ie?11:12))return 0;if(Ie&&Ht(ie)&&wl(),U.da)alert("todo:use_scaling");else{if(Ae){if(z.Ib=Yi,U.Kb){if(ie=U.U+1>>1,z.memory=a(U.U+2*ie),z.memory==null)return 0;z.ec=z.memory,z.fc=0,z.cc=z.ec,z.dc=z.fc+U.U,z.Mc=z.cc,z.Nc=z.dc+ie,z.Ib=jr,wl()}}else alert("todo:EmitYUV");Ie&&(z.Jb=Di,Ae&&rl())}if(Ae&&!Lf){for(U=0;256>U;++U)Cd[U]=89858*(U-128)+Ks>>Pl,kc[U]=-22014*(U-128)+Ks,ZA[U]=-45773*(U-128),ta[U]=113618*(U-128)+Ks>>Pl;for(U=ll;U<Fc;++U)z=76283*(U-16)+Ks>>Pl,Nc[U-ll]=zs(z,255),Ja[U-ll]=zs(z+8>>4,15);Lf=1}return 1}function Yr(U){var z=U.ma,ie=U.U,Ae=U.T;return t(!(1&U.ka)),0>=ie||0>=Ae?0:(ie=z.Ib(U,z),z.Jb!=null&&z.Jb(U,z,ie),z.Dc+=ie,1)}function on(U){U.ma.memory=null}function Wi(U,z,ie,Ae){return tt(U,8)!=47?0:(z[0]=tt(U,14)+1,ie[0]=tt(U,14)+1,Ae[0]=tt(U,1),tt(U,3)!=0?0:!U.h)}function mi(U,z){if(4>U)return U+1;var ie=U-2>>1;return(2+(1&U)<<ie)+tt(z,ie)+1}function ln(U,z){return 120<z?z-120:1<=(ie=((ie=sl[z-1])>>4)*U+(8-(15&ie)))?ie:1;var ie}function gi(U,z,ie){var Ae=pe(ie),Ie=U[z+=255&Ae].g-8;return 0<Ie&&(Le(ie,ie.u+8),Ae=pe(ie),z+=U[z].value,z+=Ae&(1<<Ie)-1),Le(ie,ie.u+U[z].g),U[z].value}function hr(U,z,ie){return ie.g+=U.g,ie.value+=U.value<<z>>>0,t(8>=ie.g),U.g}function Re(U,z,ie){var Ae=U.xc;return t((z=Ae==0?0:U.vc[U.md*(ie>>Ae)+(z>>Ae)])<U.Wb),U.Ya[z]}function ct(U,z,ie,Ae){var Ie=U.ab,Qe=U.c*z,qe=U.C;z=qe+z;var We=ie,et=Ae;for(Ae=U.Ta,ie=U.Ua;0<Ie--;){var Ge=U.gc[Ie],Mt=qe,tr=z,ut=We,Ot=et,Kt=(et=Ae,We=ie,Ge.Ea);switch(t(Mt<tr),t(tr<=Ge.nc),Ge.hc){case 2:bs(ut,Ot,(tr-Mt)*Kt,et,We);break;case 0:var cr=Mt,Rt=tr,Ar=et,dr=We,Er=(ni=Ge).Ea;cr==0&&(AA(ut,Ot,null,null,1,Ar,dr),Xr(ut,Ot+1,0,0,Er-1,Ar,dr+1),Ot+=Er,dr+=Er,++cr);for(var yr=1<<ni.b,Ai=yr-1,ri=or(Er,ni.b),ji=ni.K,ni=ni.w+(cr>>ni.b)*ri;cr<Rt;){var cn=ji,Ws=ni,zi=1;for(hh(ut,Ot,Ar,dr-Er,1,Ar,dr);zi<Er;){var oi=(zi&~Ai)+yr;oi>Er&&(oi=Er),(0,lu[cn[Ws++]>>8&15])(ut,Ot+ +zi,Ar,dr+zi-Er,oi-zi,Ar,dr+zi),zi=oi}Ot+=Er,dr+=Er,++cr&Ai||(ni+=ri)}tr!=Ge.nc&&i(et,We-Kt,et,We+(tr-Mt-1)*Kt,Kt);break;case 1:for(Kt=ut,Rt=Ot,Er=(ut=Ge.Ea)-(dr=ut&~(Ar=(Ot=1<<Ge.b)-1)),cr=or(ut,Ge.b),yr=Ge.K,Ge=Ge.w+(Mt>>Ge.b)*cr;Mt<tr;){for(Ai=yr,ri=Ge,ji=new ti,ni=Rt+dr,cn=Rt+ut;Rt<ni;)ot(Ai[ri++],ji),Mo(ji,Kt,Rt,Ot,et,We),Rt+=Ot,We+=Ot;Rt<cn&&(ot(Ai[ri++],ji),Mo(ji,Kt,Rt,Er,et,We),Rt+=Er,We+=Er),++Mt&Ar||(Ge+=cr)}break;case 3:if(ut==et&&Ot==We&&0<Ge.b){for(Rt=et,ut=Kt=We+(tr-Mt)*Kt-(dr=(tr-Mt)*or(Ge.Ea,Ge.b)),Ot=et,Ar=We,cr=[],dr=(Er=dr)-1;0<=dr;--dr)cr[dr]=Ot[Ar+dr];for(dr=Er-1;0<=dr;--dr)Rt[ut+dr]=cr[dr];fA(Ge,Mt,tr,et,Kt,et,We)}else fA(Ge,Mt,tr,ut,Ot,et,We)}We=Ae,et=ie}et!=ie&&i(Ae,ie,We,et,Qe)}function $e(U,z){var ie=U.V,Ae=U.Ba+U.c*U.C,Ie=z-U.C;if(t(z<=U.l.o),t(16>=Ie),0<Ie){var Qe=U.l,qe=U.Ta,We=U.Ua,et=Qe.width;if(ct(U,Ie,ie,Ae),Ie=We=[We],t((ie=U.C)<(Ae=z)),t(Qe.v<Qe.va),Ae>Qe.o&&(Ae=Qe.o),ie<Qe.j){var Ge=Qe.j-ie;ie=Qe.j,Ie[0]+=Ge*et}if(ie>=Ae?ie=0:(Ie[0]+=4*Qe.v,Qe.ka=ie-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=Ae-ie,ie=1),ie){if(We=We[0],11>(ie=U.ca).S){var Mt=ie.f.RGBA,tr=(Ae=ie.S,Ie=Qe.U,Qe=Qe.T,Ge=Mt.eb,Mt.A),ut=Qe;for(Mt=Mt.fb+U.Ma*Mt.A;0<ut--;){var Ot=qe,Kt=We,cr=Ie,Rt=Ge,Ar=Mt;switch(Ae){case pa:Mu(Ot,Kt,cr,Rt,Ar);break;case Ih:Sl(Ot,Kt,cr,Rt,Ar);break;case pA:Sl(Ot,Kt,cr,Rt,Ar),dh(Rt,Ar,0,cr,1,0);break;case Tl:tc(Ot,Kt,cr,Rt,Ar);break;case Au:vt(Ot,Kt,cr,Rt,Ar,1);break;case Ec:vt(Ot,Kt,cr,Rt,Ar,1),dh(Rt,Ar,0,cr,1,0);break;case mh:vt(Ot,Kt,cr,Rt,Ar,0);break;case kl:vt(Ot,Kt,cr,Rt,Ar,0),dh(Rt,Ar,1,cr,1,0);break;case Fl:Ji(Ot,Kt,cr,Rt,Ar);break;case fu:Ji(Ot,Kt,cr,Rt,Ar),fo(Rt,Ar,cr,1,0);break;case Lh:Po(Ot,Kt,cr,Rt,Ar);break;default:t(0)}We+=et,Mt+=tr}U.Ma+=Qe}else alert("todo:EmitRescaledRowsYUVA");t(U.Ma<=ie.height)}}U.C=z,t(U.C<=U.i)}function it(U){var z;if(0<U.ua)return 0;for(z=0;z<U.Wb;++z){var ie=U.Ya[z].G,Ae=U.Ya[z].H;if(0<ie[1][Ae[1]+0].g||0<ie[2][Ae[2]+0].g||0<ie[3][Ae[3]+0].g)return 0}return 1}function He(U,z,ie,Ae,Ie,Qe){if(U.Z!=0){var qe=U.qd,We=U.rd;for(t(Ml[U.Z]!=null);z<ie;++z)Ml[U.Z](qe,We,Ae,Ie,Ae,Ie,Qe),qe=Ae,We=Ie,Ie+=Qe;U.qd=qe,U.rd=We}}function nt(U,z){var ie=U.l.ma,Ae=ie.Z==0||ie.Z==1?U.l.j:U.C;if(Ae=U.C<Ae?Ae:U.C,t(z<=U.l.o),z>Ae){var Ie=U.l.width,Qe=ie.ca,qe=ie.tb+Ie*Ae,We=U.V,et=U.Ba+U.c*Ae,Ge=U.gc;t(U.ab==1),t(Ge[0].hc==3),Xa(Ge[0],Ae,z,We,et,Qe,qe),He(ie,Ae,z,Qe,qe,Ie)}U.C=U.Ma=z}function It(U,z,ie,Ae,Ie,Qe,qe){var We=U.$/Ae,et=U.$%Ae,Ge=U.m,Mt=U.s,tr=ie+U.$,ut=tr;Ie=ie+Ae*Ie;var Ot=ie+Ae*Qe,Kt=280+Mt.ua,cr=U.Pb?We:16777216,Rt=0<Mt.ua?Mt.Wa:null,Ar=Mt.wc,dr=tr<Ot?Re(Mt,et,We):null;t(U.C<Qe),t(Ot<=Ie);var Er=!1;e:for(;;){for(;Er||tr<Ot;){var yr=0;if(We>=cr){var Ai=tr-ie;t((cr=U).Pb),cr.wd=cr.m,cr.xd=Ai,0<cr.s.ua&&Et(cr.s.Wa,cr.s.vb),cr=We+mA}if(et&Ar||(dr=Re(Mt,et,We)),t(dr!=null),dr.Qb&&(z[tr]=dr.qb,Er=!0),!Er)if(lt(Ge),dr.jc){yr=Ge,Ai=z;var ri=tr,ji=dr.pd[pe(yr)&co-1];t(dr.jc),256>ji.g?(Le(yr,yr.u+ji.g),Ai[ri]=ji.value,yr=0):(Le(yr,yr.u+ji.g-256),t(256<=ji.value),yr=ji.value),yr==0&&(Er=!0)}else yr=gi(dr.G[0],dr.H[0],Ge);if(Ge.h)break;if(Er||256>yr){if(!Er)if(dr.nd)z[tr]=(dr.qb|yr<<8)>>>0;else{if(lt(Ge),Er=gi(dr.G[1],dr.H[1],Ge),lt(Ge),Ai=gi(dr.G[2],dr.H[2],Ge),ri=gi(dr.G[3],dr.H[3],Ge),Ge.h)break;z[tr]=(ri<<24|Er<<16|yr<<8|Ai)>>>0}if(Er=!1,++tr,++et>=Ae&&(et=0,++We,qe!=null&&We<=Qe&&!(We%16)&&qe(U,We),Rt!=null))for(;ut<tr;)yr=z[ut++],Rt.X[(506832829*yr&4294967295)>>>Rt.Mb]=yr}else if(280>yr){if(yr=mi(yr-256,Ge),Ai=gi(dr.G[4],dr.H[4],Ge),lt(Ge),Ai=ln(Ae,Ai=mi(Ai,Ge)),Ge.h)break;if(tr-ie<Ai||Ie-tr<yr)break e;for(ri=0;ri<yr;++ri)z[tr+ri]=z[tr+ri-Ai];for(tr+=yr,et+=yr;et>=Ae;)et-=Ae,++We,qe!=null&&We<=Qe&&!(We%16)&&qe(U,We);if(t(tr<=Ie),et&Ar&&(dr=Re(Mt,et,We)),Rt!=null)for(;ut<tr;)yr=z[ut++],Rt.X[(506832829*yr&4294967295)>>>Rt.Mb]=yr}else{if(!(yr<Kt))break e;for(Er=yr-280,t(Rt!=null);ut<tr;)yr=z[ut++],Rt.X[(506832829*yr&4294967295)>>>Rt.Mb]=yr;yr=tr,t(!(Er>>>(Ai=Rt).Xa)),z[yr]=Ai.X[Er],Er=!0}Er||t(Ge.h==we(Ge))}if(U.Pb&&Ge.h&&tr<Ie)t(U.m.h),U.a=5,U.m=U.wd,U.$=U.xd,0<U.s.ua&&Et(U.s.vb,U.s.Wa);else{if(Ge.h)break e;qe?.(U,We>Qe?Qe:We),U.a=0,U.$=tr-ie}return 1}return U.a=3,0}function sr(U){t(U!=null),U.vc=null,U.yc=null,U.Ya=null;var z=U.Wa;z!=null&&(z.X=null),U.vb=null,t(U!=null)}function Qt(){var U=new Ui;return U==null?null:(U.a=0,U.xb=Oa,Nt("Predictor","VP8LPredictors"),Nt("Predictor","VP8LPredictors_C"),Nt("PredictorAdd","VP8LPredictorsAdd"),Nt("PredictorAdd","VP8LPredictorsAdd_C"),bs=$r,Mo=xe,Mu=Ce,Sl=je,Ji=Ke,Po=At,tc=Ft,se.VP8LMapColor32b=ws,se.VP8LMapColor8b=Lu,U)}function Xt(U,z,ie,Ae,Ie){var Qe=1,qe=[U],We=[z],et=Ae.m,Ge=Ae.s,Mt=null,tr=0;e:for(;;){if(ie)for(;Qe&&tt(et,1);){var ut=qe,Ot=We,Kt=Ae,cr=1,Rt=Kt.m,Ar=Kt.gc[Kt.ab],dr=tt(Rt,2);if(Kt.Oc&1<<dr)Qe=0;else{switch(Kt.Oc|=1<<dr,Ar.hc=dr,Ar.Ea=ut[0],Ar.nc=Ot[0],Ar.K=[null],++Kt.ab,t(4>=Kt.ab),dr){case 0:case 1:Ar.b=tt(Rt,3)+2,cr=Xt(or(Ar.Ea,Ar.b),or(Ar.nc,Ar.b),0,Kt,Ar.K),Ar.K=Ar.K[0];break;case 3:var Er,yr=tt(Rt,8)+1,Ai=16<yr?0:4<yr?1:2<yr?2:3;if(ut[0]=or(Ar.Ea,Ai),Ar.b=Ai,Er=cr=Xt(yr,1,0,Kt,Ar.K)){var ri,ji=yr,ni=Ar,cn=1<<(8>>ni.b),Ws=a(cn);if(Ws==null)Er=0;else{var zi=ni.K[0],oi=ni.w;for(Ws[0]=ni.K[0][0],ri=1;ri<1*ji;++ri)Ws[ri]=Wr(zi[oi+ri],Ws[ri-1]);for(;ri<4*cn;++ri)Ws[ri]=0;ni.K[0]=null,ni.K[0]=Ws,Er=1}}cr=Er;break;case 2:break;default:t(0)}Qe=cr}}if(qe=qe[0],We=We[0],Qe&&tt(et,1)&&!(Qe=1<=(tr=tt(et,4))&&11>=tr)){Ae.a=3;break e}var Or;if(Or=Qe)t:{var Li,Vi,qi,si=Ae,Gi=qe,nn=We,is=tr,Ss=ie,Rn=si.m,ls=si.s,Tr=[null],Dr=1,Yn=0,Mi=al[is];r:for(;;){if(Ss&&tt(Rn,1)){var Rs=tt(Rn,3)+2,Jn=or(Gi,Rs),Es=or(nn,Rs),cs=Jn*Es;if(!Xt(Jn,Es,0,si,Tr))break r;for(Tr=Tr[0],ls.xc=Rs,Li=0;Li<cs;++Li){var Sn=Tr[Li]>>8&65535;Tr[Li]=Sn,Sn>=Dr&&(Dr=Sn+1)}}if(Rn.h)break r;for(Vi=0;5>Vi;++Vi){var $s=mo[Vi];!Vi&&0<is&&($s+=1<<is),Yn<$s&&(Yn=$s)}var vo=c(Dr*Mi,de),Qa=Dr,Ln=c(Qa,Ne);if(Ln==null)var vi=null;else t(65536>=Qa),vi=Ln;var un=a(Yn);if(vi==null||un==null||vo==null){si.a=1;break r}var ps=vo;for(Li=qi=0;Li<Dr;++Li){var wn=vi[Li],ra=wn.G,Us=wn.H,Uo=0,cl=1,ns=0;for(Vi=0;5>Vi;++Vi){$s=mo[Vi],ra[Vi]=ps,Us[Vi]=qi,!Vi&&0<is&&($s+=1<<is);n:{var oc,Dh=$s,zu=si,Ul=un,YA=ps,JA=qi,Hu=0,lc=zu.m,S=tt(lc,1);if(n(Ul,0,0,Dh),S){var o=tt(lc,1)+1,f=tt(lc,1),y=tt(lc,f==0?1:8);Ul[y]=1,o==2&&(Ul[y=tt(lc,8)]=1);var w=1}else{var T=a(19),L=tt(lc,4)+4;if(19<L){zu.a=3;var O=0;break n}for(oc=0;oc<L;++oc)T[Nl[oc]]=tt(lc,3);var H=void 0,te=void 0,ne=zu,me=T,he=Dh,Se=Ul,Ue=0,Xe=ne.m,Je=8,st=c(128,de);i:for(;W(st,0,7,me,19);){if(tt(Xe,1)){var pt=2+2*tt(Xe,3);if((H=2+tt(Xe,pt))>he)break i}else H=he;for(te=0;te<he&&H--;){lt(Xe);var xt=st[0+(127&pe(Xe))];Le(Xe,Xe.u+xt.g);var mt=xt.value;if(16>mt)Se[te++]=mt,mt!=0&&(Je=mt);else{var wt=mt==16,St=mt-16,yt=po[St],Lt=tt(Xe,gh[St])+yt;if(te+Lt>he)break i;for(var rr=wt?Je:0;0<Lt--;)Se[te++]=rr}}Ue=1;break i}Ue||(ne.a=3),w=Ue}(w=w&&!lc.h)&&(Hu=W(YA,JA,8,Ul,Dh)),w&&Hu!=0?O=Hu:(zu.a=3,O=0)}if(O==0)break r;if(cl&&Tc[Vi]==1&&(cl=ps[qi].g==0),Uo+=ps[qi].g,qi+=O,3>=Vi){var $t,Zt=un[0];for($t=1;$t<$s;++$t)un[$t]>Zt&&(Zt=un[$t]);ns+=Zt}}if(wn.nd=cl,wn.Qb=0,cl&&(wn.qb=(ra[3][Us[3]+0].value<<24|ra[1][Us[1]+0].value<<16|ra[2][Us[2]+0].value)>>>0,Uo==0&&256>ra[0][Us[0]+0].value&&(wn.Qb=1,wn.qb+=ra[0][Us[0]+0].value<<8)),wn.jc=!wn.Qb&&6>ns,wn.jc){var Yt,wr=wn;for(Yt=0;Yt<co;++Yt){var Br=Yt,pr=wr.pd[Br],Kr=wr.G[0][wr.H[0]+Br];256<=Kr.value?(pr.g=Kr.g+256,pr.value=Kr.value):(pr.g=0,pr.value=0,Br>>=hr(Kr,8,pr),Br>>=hr(wr.G[1][wr.H[1]+Br],16,pr),Br>>=hr(wr.G[2][wr.H[2]+Br],0,pr),hr(wr.G[3][wr.H[3]+Br],24,pr))}}}ls.vc=Tr,ls.Wb=Dr,ls.Ya=vi,ls.yc=vo,Or=1;break t}Or=0}if(!(Qe=Or)){Ae.a=3;break e}if(0<tr){if(Ge.ua=1<<tr,!ze(Ge.Wa,tr)){Ae.a=1,Qe=0;break e}}else Ge.ua=0;var Ci=Ae,En=qe,Nn=We,Mn=Ci.s,ss=Mn.xc;if(Ci.c=En,Ci.i=Nn,Mn.md=or(En,ss),Mn.wc=ss==0?-1:(1<<ss)-1,ie){Ae.xb=ju;break e}if((Mt=a(qe*We))==null){Ae.a=1,Qe=0;break e}Qe=(Qe=It(Ae,Mt,0,qe,We,We,null))&&!et.h;break e}return Qe?(Ie!=null?Ie[0]=Mt:(t(Mt==null),t(ie)),Ae.$=0,ie||sr(Ge)):sr(Ge),Qe}function jt(U,z){var ie=U.c*U.i,Ae=ie+z+16*z;return t(U.c<=z),U.V=a(Ae),U.V==null?(U.Ta=null,U.Ua=0,U.a=1,0):(U.Ta=U.V,U.Ua=U.Ba+ie+z,1)}function _r(U,z){var ie=U.C,Ae=z-ie,Ie=U.V,Qe=U.Ba+U.c*ie;for(t(z<=U.l.o);0<Ae;){var qe=16<Ae?16:Ae,We=U.l.ma,et=U.l.width,Ge=et*qe,Mt=We.ca,tr=We.tb+et*ie,ut=U.Ta,Ot=U.Ua;ct(U,qe,Ie,Qe),Sc(ut,Ot,Mt,tr,Ge),He(We,ie,ie+qe,Mt,tr,et),Ae-=qe,Ie+=qe*U.c,ie+=qe}t(ie==z),U.C=U.Ma=z}function Mr(){this.ub=this.yd=this.td=this.Rb=0}function Vr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ir(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function zr(){this.Yb=function(){var U=[];return function z(ie,Ae,Ie){for(var Qe=Ie[Ae],qe=0;qe<Qe&&(ie.push(Ie.length>Ae+1?[]:0),!(Ie.length<Ae+1));qe++)z(ie[qe],Ae+1,Ie)}(U,0,[3,11]),U}()}function yi(){this.jb=a(3),this.Wc=s([4,8],zr),this.Xc=s([4,17],zr)}function ki(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ni(){this.ld=this.La=this.dd=this.tc=0}function _i(){this.Na=this.la=0}function Ga(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pa(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Da(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ni),this.Y=0,this.ya=Array(new Pa),this.aa=0,this.l=new iu}function ea(){this.y=a(16),this.f=a(8),this.ea=a(8)}function xa(){this.cb=this.a=0,this.sc="",this.m=new ee,this.Od=new Mr,this.Kc=new Vr,this.ed=new ki,this.Qa=new Ir,this.Ic=this.$c=this.Aa=0,this.D=new Da,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,ee),this.ia=0,this.pb=c(4,Ga),this.Pa=new yi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ea),this.Hd=0,this.rb=Array(new _i),this.sb=0,this.wa=Array(new Ni),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pa),this.L=this.aa=0,this.gd=s([4,2],Ni),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function zs(U,z){return 0>U?0:U>z?z:U}function iu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ao(){var U=new xa;return U!=null&&(U.a=0,U.sc="OK",U.cb=0,U.Xb=0,ma||(ma=oh)),U}function rs(U,z,ie){return U.a==0&&(U.a=z,U.sc=ie,U.cb=0),0}function cA(U,z,ie){return 3<=ie&&U[z+0]==157&&U[z+1]==1&&U[z+2]==42}function Xo(U,z){if(U==null)return 0;if(U.a=0,U.sc="OK",z==null)return rs(U,2,"null VP8Io passed to VP8GetHeaders()");var ie=z.data,Ae=z.w,Ie=z.ha;if(4>Ie)return rs(U,7,"Truncated header.");var Qe=ie[Ae+0]|ie[Ae+1]<<8|ie[Ae+2]<<16,qe=U.Od;if(qe.Rb=!(1&Qe),qe.td=Qe>>1&7,qe.yd=Qe>>4&1,qe.ub=Qe>>5,3<qe.td)return rs(U,3,"Incorrect keyframe parameters.");if(!qe.yd)return rs(U,4,"Frame not displayable.");Ae+=3,Ie-=3;var We=U.Kc;if(qe.Rb){if(7>Ie)return rs(U,7,"cannot parse picture header");if(!cA(ie,Ae,Ie))return rs(U,3,"Bad code word");We.c=16383&(ie[Ae+4]<<8|ie[Ae+3]),We.Td=ie[Ae+4]>>6,We.i=16383&(ie[Ae+6]<<8|ie[Ae+5]),We.Ud=ie[Ae+6]>>6,Ae+=7,Ie-=7,U.za=We.c+15>>4,U.Ub=We.i+15>>4,z.width=We.c,z.height=We.i,z.Da=0,z.j=0,z.v=0,z.va=z.width,z.o=z.height,z.da=0,z.ib=z.width,z.hb=z.height,z.U=z.width,z.T=z.height,n((Qe=U.Pa).jb,0,255,Qe.jb.length),t((Qe=U.Qa)!=null),Qe.Cb=0,Qe.Bb=0,Qe.Fb=1,n(Qe.Zb,0,0,Qe.Zb.length),n(Qe.Lb,0,0,Qe.Lb)}if(qe.ub>Ie)return rs(U,7,"bad partition length");ge(Qe=U.m,ie,Ae,qe.ub),Ae+=qe.ub,Ie-=qe.ub,qe.Rb&&(We.Ld=gt(Qe),We.Kd=gt(Qe)),We=U.Qa;var et,Ge=U.Pa;if(t(Qe!=null),t(We!=null),We.Cb=gt(Qe),We.Cb){if(We.Bb=gt(Qe),gt(Qe)){for(We.Fb=gt(Qe),et=0;4>et;++et)We.Zb[et]=gt(Qe)?Ye(Qe,7):0;for(et=0;4>et;++et)We.Lb[et]=gt(Qe)?Ye(Qe,6):0}if(We.Bb)for(et=0;3>et;++et)Ge.jb[et]=gt(Qe)?Pe(Qe,8):255}else We.Bb=0;if(Qe.Ka)return rs(U,3,"cannot parse segment header");if((We=U.ed).zd=gt(Qe),We.Tb=Pe(Qe,6),We.wb=Pe(Qe,3),We.Pc=gt(Qe),We.Pc&&gt(Qe)){for(Ge=0;4>Ge;++Ge)gt(Qe)&&(We.vd[Ge]=Ye(Qe,6));for(Ge=0;4>Ge;++Ge)gt(Qe)&&(We.od[Ge]=Ye(Qe,6))}if(U.L=We.Tb==0?0:We.zd?1:2,Qe.Ka)return rs(U,3,"cannot parse filter header");var Mt=Ie;if(Ie=et=Ae,Ae=et+Mt,We=Mt,U.Xb=(1<<Pe(U.m,2))-1,Mt<3*(Ge=U.Xb))ie=7;else{for(et+=3*Ge,We-=3*Ge,Mt=0;Mt<Ge;++Mt){var tr=ie[Ie+0]|ie[Ie+1]<<8|ie[Ie+2]<<16;tr>We&&(tr=We),ge(U.Jc[+Mt],ie,et,tr),et+=tr,We-=tr,Ie+=3}ge(U.Jc[+Ge],ie,et,We),ie=et<Ae?0:5}if(ie!=0)return rs(U,ie,"cannot parse partitions");for(ie=Pe(et=U.m,7),Ie=gt(et)?Ye(et,4):0,Ae=gt(et)?Ye(et,4):0,We=gt(et)?Ye(et,4):0,Ge=gt(et)?Ye(et,4):0,et=gt(et)?Ye(et,4):0,Mt=U.Qa,tr=0;4>tr;++tr){if(Mt.Cb){var ut=Mt.Zb[tr];Mt.Fb||(ut+=ie)}else{if(0<tr){U.pb[tr]=U.pb[0];continue}ut=ie}var Ot=U.pb[tr];Ot.Sc[0]=gA[zs(ut+Ie,127)],Ot.Sc[1]=du[zs(ut+0,127)],Ot.Eb[0]=2*gA[zs(ut+Ae,127)],Ot.Eb[1]=101581*du[zs(ut+We,127)]>>16,8>Ot.Eb[1]&&(Ot.Eb[1]=8),Ot.Qc[0]=gA[zs(ut+Ge,117)],Ot.Qc[1]=du[zs(ut+et,127)],Ot.lc=ut+et}if(!qe.Rb)return rs(U,4,"Not a key frame.");for(gt(Qe),qe=U.Pa,ie=0;4>ie;++ie){for(Ie=0;8>Ie;++Ie)for(Ae=0;3>Ae;++Ae)for(We=0;11>We;++We)Ge=dt(Qe,Il[ie][Ie][Ae][We])?Pe(Qe,8):ol[ie][Ie][Ae][We],qe.Wc[ie][Ie].Yb[Ae][We]=Ge;for(Ie=0;17>Ie;++Ie)qe.Xc[ie][Ie]=qe.Wc[ie][Ph[Ie]]}return U.kc=gt(Qe),U.kc&&(U.Bd=Pe(Qe,8)),U.cb=1}function oh(U,z,ie,Ae,Ie,Qe,qe){var We=z[Ie].Yb[ie];for(ie=0;16>Ie;++Ie){if(!dt(U,We[ie+0]))return Ie;for(;!dt(U,We[ie+1]);)if(We=z[++Ie].Yb[0],ie=0,Ie==16)return 16;var et=z[Ie+1].Yb;if(dt(U,We[ie+2])){var Ge=U,Mt=0;if(dt(Ge,(ut=We)[(tr=ie)+3]))if(dt(Ge,ut[tr+6])){for(We=0,tr=2*(Mt=dt(Ge,ut[tr+8]))+(ut=dt(Ge,ut[tr+9+Mt])),Mt=0,ut=Cs[tr];ut[We];++We)Mt+=Mt+dt(Ge,ut[We]);Mt+=3+(8<<tr)}else dt(Ge,ut[tr+7])?(Mt=7+2*dt(Ge,165),Mt+=dt(Ge,145)):Mt=5+dt(Ge,159);else Mt=dt(Ge,ut[tr+4])?3+dt(Ge,ut[tr+5]):2;We=et[2]}else Mt=1,We=et[1];et=qe+mn[Ie],0>(Ge=U).b&&rt(Ge);var tr,ut=Ge.b,Ot=(tr=Ge.Ca>>1)-(Ge.I>>ut)>>31;--Ge.b,Ge.Ca+=Ot,Ge.Ca|=1,Ge.I-=(tr+1&Ot)<<ut,Qe[et]=((Mt^Ot)-Ot)*Ae[(0<Ie)+0]}return 16}function lh(U){var z=U.rb[U.sb-1];z.la=0,z.Na=0,n(U.zc,0,0,U.zc.length),U.ja=0}function Zo(U,z,ie,Ae,Ie){Ie=U[z+ie+32*Ae]+(Ie>>3),U[z+ie+32*Ae]=-256&Ie?0>Ie?0:255:Ie}function Fn(U,z,ie,Ae,Ie,Qe){Zo(U,z,0,ie,Ae+Ie),Zo(U,z,1,ie,Ae+Qe),Zo(U,z,2,ie,Ae-Qe),Zo(U,z,3,ie,Ae-Ie)}function Ra(U){return(20091*U>>16)+U}function ch(U,z,ie,Ae){var Ie,Qe=0,qe=a(16);for(Ie=0;4>Ie;++Ie){var We=U[z+0]+U[z+8],et=U[z+0]-U[z+8],Ge=(35468*U[z+4]>>16)-Ra(U[z+12]),Mt=Ra(U[z+4])+(35468*U[z+12]>>16);qe[Qe+0]=We+Mt,qe[Qe+1]=et+Ge,qe[Qe+2]=et-Ge,qe[Qe+3]=We-Mt,Qe+=4,z++}for(Ie=Qe=0;4>Ie;++Ie)We=(U=qe[Qe+0]+4)+qe[Qe+8],et=U-qe[Qe+8],Ge=(35468*qe[Qe+4]>>16)-Ra(qe[Qe+12]),Zo(ie,Ae,0,0,We+(Mt=Ra(qe[Qe+4])+(35468*qe[Qe+12]>>16))),Zo(ie,Ae,1,0,et+Ge),Zo(ie,Ae,2,0,et-Ge),Zo(ie,Ae,3,0,We-Mt),Qe++,Ae+=32}function Nh(U,z,ie,Ae){var Ie=U[z+0]+4,Qe=35468*U[z+4]>>16,qe=Ra(U[z+4]),We=35468*U[z+1]>>16;Fn(ie,Ae,0,Ie+qe,U=Ra(U[z+1]),We),Fn(ie,Ae,1,Ie+Qe,U,We),Fn(ie,Ae,2,Ie-Qe,U,We),Fn(ie,Ae,3,Ie-qe,U,We)}function ko(U,z,ie,Ae,Ie){ch(U,z,ie,Ae),Ie&&ch(U,z+16,ie,Ae+4)}function Yo(U,z,ie,Ae){rc(U,z+0,ie,Ae,1),rc(U,z+32,ie,Ae+128,1)}function uA(U,z,ie,Ae){var Ie;for(U=U[z+0]+4,Ie=0;4>Ie;++Ie)for(z=0;4>z;++z)Zo(ie,Ae,z,Ie,U)}function Jo(U,z,ie,Ae){U[z+0]&&pn(U,z+0,ie,Ae),U[z+16]&&pn(U,z+16,ie,Ae+4),U[z+32]&&pn(U,z+32,ie,Ae+128),U[z+48]&&pn(U,z+48,ie,Ae+128+4)}function vc(U,z,ie,Ae){var Ie,Qe=a(16);for(Ie=0;4>Ie;++Ie){var qe=U[z+0+Ie]+U[z+12+Ie],We=U[z+4+Ie]+U[z+8+Ie],et=U[z+4+Ie]-U[z+8+Ie],Ge=U[z+0+Ie]-U[z+12+Ie];Qe[0+Ie]=qe+We,Qe[8+Ie]=qe-We,Qe[4+Ie]=Ge+et,Qe[12+Ie]=Ge-et}for(Ie=0;4>Ie;++Ie)qe=(U=Qe[0+4*Ie]+3)+Qe[3+4*Ie],We=Qe[1+4*Ie]+Qe[2+4*Ie],et=Qe[1+4*Ie]-Qe[2+4*Ie],Ge=U-Qe[3+4*Ie],ie[Ae+0]=qe+We>>3,ie[Ae+16]=Ge+et>>3,ie[Ae+32]=qe-We>>3,ie[Ae+48]=Ge-et>>3,Ae+=64}function xc(U,z,ie){var Ae,Ie=z-32,Qe=Ds,qe=255-U[Ie-1];for(Ae=0;Ae<ie;++Ae){var We,et=Qe,Ge=qe+U[z-1];for(We=0;We<ie;++We)U[z+We]=et[Ge+U[Ie+We]];z+=32}}function ya(U,z){xc(U,z,4)}function $i(U,z){xc(U,z,8)}function Eu(U,z){xc(U,z,16)}function Aa(U,z){var ie;for(ie=0;16>ie;++ie)i(U,z+32*ie,U,z-32,16)}function el(U,z){var ie;for(ie=16;0<ie;--ie)n(U,z,U[z-1],16),z+=32}function Ti(U,z,ie){var Ae;for(Ae=0;16>Ae;++Ae)n(z,ie+32*Ae,U,16)}function nu(U,z){var ie,Ae=16;for(ie=0;16>ie;++ie)Ae+=U[z-1+32*ie]+U[z+ie-32];Ti(Ae>>5,U,z)}function qa(U,z){var ie,Ae=8;for(ie=0;16>ie;++ie)Ae+=U[z-1+32*ie];Ti(Ae>>4,U,z)}function oo(U,z){var ie,Ae=8;for(ie=0;16>ie;++ie)Ae+=U[z+ie-32];Ti(Ae>>4,U,z)}function Ua(U,z){Ti(128,U,z)}function li(U,z,ie){return U+2*z+ie+2>>2}function Hs(U,z){var ie,Ae=z-32;for(Ae=new Uint8Array([li(U[Ae-1],U[Ae+0],U[Ae+1]),li(U[Ae+0],U[Ae+1],U[Ae+2]),li(U[Ae+1],U[Ae+2],U[Ae+3]),li(U[Ae+2],U[Ae+3],U[Ae+4])]),ie=0;4>ie;++ie)i(U,z+32*ie,Ae,0,Ae.length)}function ys(U,z){var ie=U[z-1],Ae=U[z-1+32],Ie=U[z-1+64],Qe=U[z-1+96];qt(U,z+0,16843009*li(U[z-1-32],ie,Ae)),qt(U,z+32,16843009*li(ie,Ae,Ie)),qt(U,z+64,16843009*li(Ae,Ie,Qe)),qt(U,z+96,16843009*li(Ie,Qe,Qe))}function An(U,z){var ie,Ae=4;for(ie=0;4>ie;++ie)Ae+=U[z+ie-32]+U[z-1+32*ie];for(Ae>>=3,ie=0;4>ie;++ie)n(U,z+32*ie,Ae,4)}function Ka(U,z){var ie=U[z-1+0],Ae=U[z-1+32],Ie=U[z-1+64],Qe=U[z-1-32],qe=U[z+0-32],We=U[z+1-32],et=U[z+2-32],Ge=U[z+3-32];U[z+0+96]=li(Ae,Ie,U[z-1+96]),U[z+1+96]=U[z+0+64]=li(ie,Ae,Ie),U[z+2+96]=U[z+1+64]=U[z+0+32]=li(Qe,ie,Ae),U[z+3+96]=U[z+2+64]=U[z+1+32]=U[z+0+0]=li(qe,Qe,ie),U[z+3+64]=U[z+2+32]=U[z+1+0]=li(We,qe,Qe),U[z+3+32]=U[z+2+0]=li(et,We,qe),U[z+3+0]=li(Ge,et,We)}function Zn(U,z){var ie=U[z+1-32],Ae=U[z+2-32],Ie=U[z+3-32],Qe=U[z+4-32],qe=U[z+5-32],We=U[z+6-32],et=U[z+7-32];U[z+0+0]=li(U[z+0-32],ie,Ae),U[z+1+0]=U[z+0+32]=li(ie,Ae,Ie),U[z+2+0]=U[z+1+32]=U[z+0+64]=li(Ae,Ie,Qe),U[z+3+0]=U[z+2+32]=U[z+1+64]=U[z+0+96]=li(Ie,Qe,qe),U[z+3+32]=U[z+2+64]=U[z+1+96]=li(Qe,qe,We),U[z+3+64]=U[z+2+96]=li(qe,We,et),U[z+3+96]=li(We,et,et)}function Ls(U,z){var ie=U[z-1+0],Ae=U[z-1+32],Ie=U[z-1+64],Qe=U[z-1-32],qe=U[z+0-32],We=U[z+1-32],et=U[z+2-32],Ge=U[z+3-32];U[z+0+0]=U[z+1+64]=Qe+qe+1>>1,U[z+1+0]=U[z+2+64]=qe+We+1>>1,U[z+2+0]=U[z+3+64]=We+et+1>>1,U[z+3+0]=et+Ge+1>>1,U[z+0+96]=li(Ie,Ae,ie),U[z+0+64]=li(Ae,ie,Qe),U[z+0+32]=U[z+1+96]=li(ie,Qe,qe),U[z+1+32]=U[z+2+96]=li(Qe,qe,We),U[z+2+32]=U[z+3+96]=li(qe,We,et),U[z+3+32]=li(We,et,Ge)}function _a(U,z){var ie=U[z+0-32],Ae=U[z+1-32],Ie=U[z+2-32],Qe=U[z+3-32],qe=U[z+4-32],We=U[z+5-32],et=U[z+6-32],Ge=U[z+7-32];U[z+0+0]=ie+Ae+1>>1,U[z+1+0]=U[z+0+64]=Ae+Ie+1>>1,U[z+2+0]=U[z+1+64]=Ie+Qe+1>>1,U[z+3+0]=U[z+2+64]=Qe+qe+1>>1,U[z+0+32]=li(ie,Ae,Ie),U[z+1+32]=U[z+0+96]=li(Ae,Ie,Qe),U[z+2+32]=U[z+1+96]=li(Ie,Qe,qe),U[z+3+32]=U[z+2+96]=li(Qe,qe,We),U[z+3+64]=li(qe,We,et),U[z+3+96]=li(We,et,Ge)}function tl(U,z){var ie=U[z-1+0],Ae=U[z-1+32],Ie=U[z-1+64],Qe=U[z-1+96];U[z+0+0]=ie+Ae+1>>1,U[z+2+0]=U[z+0+32]=Ae+Ie+1>>1,U[z+2+32]=U[z+0+64]=Ie+Qe+1>>1,U[z+1+0]=li(ie,Ae,Ie),U[z+3+0]=U[z+1+32]=li(Ae,Ie,Qe),U[z+3+32]=U[z+1+64]=li(Ie,Qe,Qe),U[z+3+64]=U[z+2+64]=U[z+0+96]=U[z+1+96]=U[z+2+96]=U[z+3+96]=Qe}function _n(U,z){var ie=U[z-1+0],Ae=U[z-1+32],Ie=U[z-1+64],Qe=U[z-1+96],qe=U[z-1-32],We=U[z+0-32],et=U[z+1-32],Ge=U[z+2-32];U[z+0+0]=U[z+2+32]=ie+qe+1>>1,U[z+0+32]=U[z+2+64]=Ae+ie+1>>1,U[z+0+64]=U[z+2+96]=Ie+Ae+1>>1,U[z+0+96]=Qe+Ie+1>>1,U[z+3+0]=li(We,et,Ge),U[z+2+0]=li(qe,We,et),U[z+1+0]=U[z+3+32]=li(ie,qe,We),U[z+1+32]=U[z+3+64]=li(Ae,ie,qe),U[z+1+64]=U[z+3+96]=li(Ie,Ae,ie),U[z+1+96]=li(Qe,Ie,Ae)}function kn(U,z){var ie;for(ie=0;8>ie;++ie)i(U,z+32*ie,U,z-32,8)}function Ki(U,z){var ie;for(ie=0;8>ie;++ie)n(U,z,U[z-1],8),z+=32}function di(U,z,ie){var Ae;for(Ae=0;8>Ae;++Ae)n(z,ie+32*Ae,U,8)}function Vs(U,z){var ie,Ae=8;for(ie=0;8>ie;++ie)Ae+=U[z+ie-32]+U[z-1+32*ie];di(Ae>>4,U,z)}function bi(U,z){var ie,Ae=4;for(ie=0;8>ie;++ie)Ae+=U[z+ie-32];di(Ae>>3,U,z)}function Wl(U,z){var ie,Ae=4;for(ie=0;8>ie;++ie)Ae+=U[z-1+32*ie];di(Ae>>3,U,z)}function _s(U,z){di(128,U,z)}function $l(U,z,ie){var Ae=U[z-ie],Ie=U[z+0],Qe=3*(Ie-Ae)+hu[1020+U[z-2*ie]-U[z+ie]],qe=Uu[112+(Qe+4>>3)];U[z-ie]=Ds[255+Ae+Uu[112+(Qe+3>>3)]],U[z+0]=Ds[255+Ie-qe]}function Xl(U,z,ie,Ae){var Ie=U[z+0],Qe=U[z+ie];return Ii[255+U[z-2*ie]-U[z-ie]]>Ae||Ii[255+Qe-Ie]>Ae}function yl(U,z,ie,Ae){return 4*Ii[255+U[z-ie]-U[z+0]]+Ii[255+U[z-2*ie]-U[z+ie]]<=Ae}function No(U,z,ie,Ae,Ie){var Qe=U[z-3*ie],qe=U[z-2*ie],We=U[z-ie],et=U[z+0],Ge=U[z+ie],Mt=U[z+2*ie],tr=U[z+3*ie];return 4*Ii[255+We-et]+Ii[255+qe-Ge]>Ae?0:Ii[255+U[z-4*ie]-Qe]<=Ie&&Ii[255+Qe-qe]<=Ie&&Ii[255+qe-We]<=Ie&&Ii[255+tr-Mt]<=Ie&&Ii[255+Mt-Ge]<=Ie&&Ii[255+Ge-et]<=Ie}function Io(U,z,ie,Ae){var Ie=2*Ae+1;for(Ae=0;16>Ae;++Ae)yl(U,z+Ae,ie,Ie)&&$l(U,z+Ae,ie)}function Tu(U,z,ie,Ae){var Ie=2*Ae+1;for(Ae=0;16>Ae;++Ae)yl(U,z+Ae*ie,1,Ie)&&$l(U,z+Ae*ie,1)}function uh(U,z,ie,Ae){var Ie;for(Ie=3;0<Ie;--Ie)Io(U,z+=4*ie,ie,Ae)}function Fu(U,z,ie,Ae){var Ie;for(Ie=3;0<Ie;--Ie)Tu(U,z+=4,ie,Ae)}function ba(U,z,ie,Ae,Ie,Qe,qe,We){for(Qe=2*Qe+1;0<Ie--;){if(No(U,z,ie,Qe,qe))if(Xl(U,z,ie,We))$l(U,z,ie);else{var et=U,Ge=z,Mt=ie,tr=et[Ge-2*Mt],ut=et[Ge-Mt],Ot=et[Ge+0],Kt=et[Ge+Mt],cr=et[Ge+2*Mt],Rt=27*(dr=hu[1020+3*(Ot-ut)+hu[1020+tr-Kt]])+63>>7,Ar=18*dr+63>>7,dr=9*dr+63>>7;et[Ge-3*Mt]=Ds[255+et[Ge-3*Mt]+dr],et[Ge-2*Mt]=Ds[255+tr+Ar],et[Ge-Mt]=Ds[255+ut+Rt],et[Ge+0]=Ds[255+Ot-Rt],et[Ge+Mt]=Ds[255+Kt-Ar],et[Ge+2*Mt]=Ds[255+cr-dr]}z+=Ae}}function Kn(U,z,ie,Ae,Ie,Qe,qe,We){for(Qe=2*Qe+1;0<Ie--;){if(No(U,z,ie,Qe,qe))if(Xl(U,z,ie,We))$l(U,z,ie);else{var et=U,Ge=z,Mt=ie,tr=et[Ge-Mt],ut=et[Ge+0],Ot=et[Ge+Mt],Kt=Uu[112+(4+(cr=3*(ut-tr))>>3)],cr=Uu[112+(cr+3>>3)],Rt=Kt+1>>1;et[Ge-2*Mt]=Ds[255+et[Ge-2*Mt]+Rt],et[Ge-Mt]=Ds[255+tr+cr],et[Ge+0]=Ds[255+ut-Kt],et[Ge+Mt]=Ds[255+Ot-Rt]}z+=Ae}}function yc(U,z,ie,Ae,Ie,Qe){ba(U,z,ie,1,16,Ae,Ie,Qe)}function Zl(U,z,ie,Ae,Ie,Qe){ba(U,z,1,ie,16,Ae,Ie,Qe)}function Yl(U,z,ie,Ae,Ie,Qe){var qe;for(qe=3;0<qe;--qe)Kn(U,z+=4*ie,ie,1,16,Ae,Ie,Qe)}function Y(U,z,ie,Ae,Ie,Qe){var qe;for(qe=3;0<qe;--qe)Kn(U,z+=4,1,ie,16,Ae,Ie,Qe)}function ke(U,z,ie,Ae,Ie,Qe,qe,We){ba(U,z,Ie,1,8,Qe,qe,We),ba(ie,Ae,Ie,1,8,Qe,qe,We)}function ft(U,z,ie,Ae,Ie,Qe,qe,We){ba(U,z,1,Ie,8,Qe,qe,We),ba(ie,Ae,1,Ie,8,Qe,qe,We)}function Tt(U,z,ie,Ae,Ie,Qe,qe,We){Kn(U,z+4*Ie,Ie,1,8,Qe,qe,We),Kn(ie,Ae+4*Ie,Ie,1,8,Qe,qe,We)}function Wt(U,z,ie,Ae,Ie,Qe,qe,We){Kn(U,z+4,1,Ie,8,Qe,qe,We),Kn(ie,Ae+4,1,Ie,8,Qe,qe,We)}function lr(){this.ba=new kr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ei,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function br(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function qr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ui(){this.ua=0,this.Wa=new Pt,this.vb=new Pt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ne,this.yc=new de}function Ui(){this.xb=this.a=0,this.l=new iu,this.ca=new kr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new fe,this.Pb=0,this.wd=new fe,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ui,this.ab=0,this.gc=c(4,qr),this.Oc=0}function Hi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new iu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Xi(U,z,ie,Ae,Ie,Qe,qe){for(U=U==null?0:U[z+0],z=0;z<qe;++z)Ie[Qe+z]=U+ie[Ae+z]&255,U=Ie[Qe+z]}function Cn(U,z,ie,Ae,Ie,Qe,qe){var We;if(U==null)Xi(null,null,ie,Ae,Ie,Qe,qe);else for(We=0;We<qe;++We)Ie[Qe+We]=U[z+We]+ie[Ae+We]&255}function Gs(U,z,ie,Ae,Ie,Qe,qe){if(U==null)Xi(null,null,ie,Ae,Ie,Qe,qe);else{var We,et=U[z+0],Ge=et,Mt=et;for(We=0;We<qe;++We)Ge=Mt+(et=U[z+We])-Ge,Mt=ie[Ae+We]+(-256&Ge?0>Ge?0:255:Ge)&255,Ge=et,Ie[Qe+We]=Mt}}function Qn(U,z,ie,Ae){var Ie=z.width,Qe=z.o;if(t(U!=null&&z!=null),0>ie||0>=Ae||ie+Ae>Qe)return null;if(!U.Cc){if(U.ga==null){var qe;if(U.ga=new Hi,(qe=U.ga==null)||(qe=z.width*z.o,t(U.Gb.length==0),U.Gb=a(qe),U.Uc=0,U.Gb==null?qe=0:(U.mb=U.Gb,U.nb=U.Uc,U.rc=null,qe=1),qe=!qe),!qe){qe=U.ga;var We=U.Fa,et=U.P,Ge=U.qc,Mt=U.mb,tr=U.nb,ut=et+1,Ot=Ge-1,Kt=qe.l;if(t(We!=null&&Mt!=null&&z!=null),Ml[0]=null,Ml[1]=Xi,Ml[2]=Cn,Ml[3]=Gs,qe.ca=Mt,qe.tb=tr,qe.c=z.width,qe.i=z.height,t(0<qe.c&&0<qe.i),1>=Ge)z=0;else if(qe.$a=3&We[et+0],qe.Z=We[et+0]>>2&3,qe.Lc=We[et+0]>>4&3,et=We[et+0]>>6&3,0>qe.$a||1<qe.$a||4<=qe.Z||1<qe.Lc||et)z=0;else if(Kt.put=Yr,Kt.ac=In,Kt.bc=on,Kt.ma=qe,Kt.width=z.width,Kt.height=z.height,Kt.Da=z.Da,Kt.v=z.v,Kt.va=z.va,Kt.j=z.j,Kt.o=z.o,qe.$a)e:{t(qe.$a==1),z=Qt();t:for(;;){if(z==null){z=0;break e}if(t(qe!=null),qe.mc=z,z.c=qe.c,z.i=qe.i,z.l=qe.l,z.l.ma=qe,z.l.width=qe.c,z.l.height=qe.i,z.a=0,Me(z.m,We,ut,Ot),!Xt(qe.c,qe.i,1,z,null)||(z.ab==1&&z.gc[0].hc==3&&it(z.s)?(qe.ic=1,We=z.c*z.i,z.Ta=null,z.Ua=0,z.V=a(We),z.Ba=0,z.V==null?(z.a=1,z=0):z=1):(qe.ic=0,z=jt(z,qe.c)),!z))break t;z=1;break e}qe.mc=null,z=0}else z=Ot>=qe.c*qe.i;qe=!z}if(qe)return null;U.ga.Lc!=1?U.Ga=0:Ae=Qe-ie}t(U.ga!=null),t(ie+Ae<=Qe);e:{if(z=(We=U.ga).c,Qe=We.l.o,We.$a==0){if(ut=U.rc,Ot=U.Vc,Kt=U.Fa,et=U.P+1+ie*z,Ge=U.mb,Mt=U.nb+ie*z,t(et<=U.P+U.qc),We.Z!=0)for(t(Ml[We.Z]!=null),qe=0;qe<Ae;++qe)Ml[We.Z](ut,Ot,Kt,et,Ge,Mt,z),ut=Ge,Ot=Mt,Mt+=z,et+=z;else for(qe=0;qe<Ae;++qe)i(Ge,Mt,Kt,et,z),ut=Ge,Ot=Mt,Mt+=z,et+=z;U.rc=ut,U.Vc=Ot}else{if(t(We.mc!=null),z=ie+Ae,t((qe=We.mc)!=null),t(z<=qe.i),qe.C>=z)z=1;else if(We.ic||rl(),We.ic){We=qe.V,ut=qe.Ba,Ot=qe.c;var cr=qe.i,Rt=(Kt=1,et=qe.$/Ot,Ge=qe.$%Ot,Mt=qe.m,tr=qe.s,qe.$),Ar=Ot*cr,dr=Ot*z,Er=tr.wc,yr=Rt<dr?Re(tr,Ge,et):null;t(Rt<=Ar),t(z<=cr),t(it(tr));t:for(;;){for(;!Mt.h&&Rt<dr;){if(Ge&Er||(yr=Re(tr,Ge,et)),t(yr!=null),lt(Mt),256>(cr=gi(yr.G[0],yr.H[0],Mt)))We[ut+Rt]=cr,++Rt,++Ge>=Ot&&(Ge=0,++et<=z&&!(et%16)&&nt(qe,et));else{if(!(280>cr)){Kt=0;break t}cr=mi(cr-256,Mt);var Ai,ri=gi(yr.G[4],yr.H[4],Mt);if(lt(Mt),!(Rt>=(ri=ln(Ot,ri=mi(ri,Mt)))&&Ar-Rt>=cr)){Kt=0;break t}for(Ai=0;Ai<cr;++Ai)We[ut+Rt+Ai]=We[ut+Rt+Ai-ri];for(Rt+=cr,Ge+=cr;Ge>=Ot;)Ge-=Ot,++et<=z&&!(et%16)&&nt(qe,et);Rt<dr&&Ge&Er&&(yr=Re(tr,Ge,et))}t(Mt.h==we(Mt))}nt(qe,et>z?z:et);break t}!Kt||Mt.h&&Rt<Ar?(Kt=0,qe.a=Mt.h?5:3):qe.$=Rt,z=Kt}else z=It(qe,qe.V,qe.Ba,qe.c,qe.i,z,_r);if(!z){Ae=0;break e}}ie+Ae>=Qe&&(U.Cc=1),Ae=1}if(!Ae)return null;if(U.Cc&&((Ae=U.ga)!=null&&(Ae.mc=null),U.ga=null,0<U.Ga))return alert("todo:WebPDequantizeLevels"),null}return U.nb+ie*Ie}function fa(U,z,ie,Ae,Ie,Qe){for(;0<Ie--;){var qe,We=U,et=z+(ie?1:0),Ge=U,Mt=z+(ie?0:3);for(qe=0;qe<Ae;++qe){var tr=Ge[Mt+4*qe];tr!=255&&(tr*=32897,We[et+4*qe+0]=We[et+4*qe+0]*tr>>23,We[et+4*qe+1]=We[et+4*qe+1]*tr>>23,We[et+4*qe+2]=We[et+4*qe+2]*tr>>23)}z+=Qe}}function Ms(U,z,ie,Ae,Ie){for(;0<Ae--;){var Qe;for(Qe=0;Qe<ie;++Qe){var qe=U[z+2*Qe+0],We=15&(Ge=U[z+2*Qe+1]),et=4369*We,Ge=(240&Ge|Ge>>4)*et>>16;U[z+2*Qe+0]=(240&qe|qe>>4)*et>>16&240|(15&qe|qe<<4)*et>>16>>4&15,U[z+2*Qe+1]=240&Ge|We}z+=Ie}}function ja(U,z,ie,Ae,Ie,Qe,qe,We){var et,Ge,Mt=255;for(Ge=0;Ge<Ie;++Ge){for(et=0;et<Ae;++et){var tr=U[z+et];Qe[qe+4*et]=tr,Mt&=tr}z+=ie,qe+=We}return Mt!=255}function _l(U,z,ie,Ae,Ie){var Qe;for(Qe=0;Qe<Ie;++Qe)ie[Ae+Qe]=U[z+Qe]>>8}function rl(){dh=fa,fo=Ms,da=ja,Sc=_l}function bl(U,z,ie){se[U]=function(Ae,Ie,Qe,qe,We,et,Ge,Mt,tr,ut,Ot,Kt,cr,Rt,Ar,dr,Er){var yr,Ai=Er-1>>1,ri=We[et+0]|Ge[Mt+0]<<16,ji=tr[ut+0]|Ot[Kt+0]<<16;t(Ae!=null);var ni=3*ri+ji+131074>>2;for(z(Ae[Ie+0],255&ni,ni>>16,cr,Rt),Qe!=null&&(ni=3*ji+ri+131074>>2,z(Qe[qe+0],255&ni,ni>>16,Ar,dr)),yr=1;yr<=Ai;++yr){var cn=We[et+yr]|Ge[Mt+yr]<<16,Ws=tr[ut+yr]|Ot[Kt+yr]<<16,zi=ri+cn+ji+Ws+524296,oi=zi+2*(cn+ji)>>3;ni=oi+ri>>1,ri=(zi=zi+2*(ri+Ws)>>3)+cn>>1,z(Ae[Ie+2*yr-1],255&ni,ni>>16,cr,Rt+(2*yr-1)*ie),z(Ae[Ie+2*yr-0],255&ri,ri>>16,cr,Rt+(2*yr-0)*ie),Qe!=null&&(ni=zi+ji>>1,ri=oi+Ws>>1,z(Qe[qe+2*yr-1],255&ni,ni>>16,Ar,dr+(2*yr-1)*ie),z(Qe[qe+2*yr+0],255&ri,ri>>16,Ar,dr+(2*yr+0)*ie)),ri=cn,ji=Ws}1&Er||(ni=3*ri+ji+131074>>2,z(Ae[Ie+Er-1],255&ni,ni>>16,cr,Rt+(Er-1)*ie),Qe!=null&&(ni=3*ji+ri+131074>>2,z(Qe[qe+Er-1],255&ni,ni>>16,Ar,dr+(Er-1)*ie)))}}function wl(){qs[pa]=sc,qs[Ih]=go,qs[Tl]=Do,qs[Au]=Ou,qs[mh]=vh,qs[Fl]=Qu,qs[Lh]=vA,qs[pA]=go,qs[Ec]=Ou,qs[kl]=vh,qs[fu]=Qu}function Bl(U){return U&-16384?0>U?0:255:U>>Bd}function wa(U,z){return Bl((19077*U>>8)+(26149*z>>8)-14234)}function su(U,z,ie){return Bl((19077*U>>8)-(6419*z>>8)-(13320*ie>>8)+8708)}function _c(U,z){return Bl((19077*U>>8)+(33050*z>>8)-17685)}function Lo(U,z,ie,Ae,Ie){Ae[Ie+0]=wa(U,ie),Ae[Ie+1]=su(U,z,ie),Ae[Ie+2]=_c(U,z)}function Ps(U,z,ie,Ae,Ie){Ae[Ie+0]=_c(U,z),Ae[Ie+1]=su(U,z,ie),Ae[Ie+2]=wa(U,ie)}function ku(U,z,ie,Ae,Ie){var Qe=su(U,z,ie);z=Qe<<3&224|_c(U,z)>>3,Ae[Ie+0]=248&wa(U,ie)|Qe>>5,Ae[Ie+1]=z}function lo(U,z,ie,Ae,Ie){var Qe=240&_c(U,z)|15;Ae[Ie+0]=240&wa(U,ie)|su(U,z,ie)>>4,Ae[Ie+1]=Qe}function hA(U,z,ie,Ae,Ie){Ae[Ie+0]=255,Lo(U,z,ie,Ae,Ie+1)}function bc(U,z,ie,Ae,Ie){Ps(U,z,ie,Ae,Ie),Ae[Ie+3]=255}function Wa(U,z,ie,Ae,Ie){Lo(U,z,ie,Ae,Ie),Ae[Ie+3]=255}function Cl(U,z,ie){se[U]=function(Ae,Ie,Qe,qe,We,et,Ge,Mt,tr){for(var ut=Mt+(-2&tr)*ie;Mt!=ut;)z(Ae[Ie+0],Qe[qe+0],We[et+0],Ge,Mt),z(Ae[Ie+1],Qe[qe+0],We[et+0],Ge,Mt+ie),Ie+=2,++qe,++et,Mt+=2*ie;1&tr&&z(Ae[Ie+0],Qe[qe+0],We[et+0],Ge,Mt)}}function Nu(U,z,ie){return ie==0?U==0?z==0?6:5:z==0?4:0:ie}function au(U,z,ie,Ae,Ie){switch(U>>>30){case 3:rc(z,ie,Ae,Ie,0);break;case 2:il(z,ie,Ae,Ie);break;case 1:pn(z,ie,Ae,Ie)}}function Ba(U,z){var ie,Ae,Ie=z.M,Qe=z.Nb,qe=U.oc,We=U.pc+40,et=U.oc,Ge=U.pc+584,Mt=U.oc,tr=U.pc+600;for(ie=0;16>ie;++ie)qe[We+32*ie-1]=129;for(ie=0;8>ie;++ie)et[Ge+32*ie-1]=129,Mt[tr+32*ie-1]=129;for(0<Ie?qe[We-1-32]=et[Ge-1-32]=Mt[tr-1-32]=129:(n(qe,We-32-1,127,21),n(et,Ge-32-1,127,9),n(Mt,tr-32-1,127,9)),Ae=0;Ae<U.za;++Ae){var ut=z.ya[z.aa+Ae];if(0<Ae){for(ie=-1;16>ie;++ie)i(qe,We+32*ie-4,qe,We+32*ie+12,4);for(ie=-1;8>ie;++ie)i(et,Ge+32*ie-4,et,Ge+32*ie+4,4),i(Mt,tr+32*ie-4,Mt,tr+32*ie+4,4)}var Ot=U.Gd,Kt=U.Hd+Ae,cr=ut.ad,Rt=ut.Hc;if(0<Ie&&(i(qe,We-32,Ot[Kt].y,0,16),i(et,Ge-32,Ot[Kt].f,0,8),i(Mt,tr-32,Ot[Kt].ea,0,8)),ut.Za){var Ar=qe,dr=We-32+16;for(0<Ie&&(Ae>=U.za-1?n(Ar,dr,Ot[Kt].y[15],4):i(Ar,dr,Ot[Kt+1].y,0,4)),ie=0;4>ie;ie++)Ar[dr+128+ie]=Ar[dr+256+ie]=Ar[dr+384+ie]=Ar[dr+0+ie];for(ie=0;16>ie;++ie,Rt<<=2)Ar=qe,dr=We+Ro[ie],Ya[ut.Ob[ie]](Ar,dr),au(Rt,cr,16*+ie,Ar,dr)}else if(Ar=Nu(Ae,Ie,ut.Ob[0]),Ll[Ar](qe,We),Rt!=0)for(ie=0;16>ie;++ie,Rt<<=2)au(Rt,cr,16*+ie,qe,We+Ro[ie]);for(ie=ut.Gc,Ar=Nu(Ae,Ie,ut.Dd),bn[Ar](et,Ge),bn[Ar](Mt,tr),Rt=cr,Ar=et,dr=Ge,255&(ut=0|ie)&&(170&ut?Za(Rt,256,Ar,dr):zn(Rt,256,Ar,dr)),ut=Mt,Rt=tr,255&(ie>>=8)&&(170&ie?Za(cr,320,ut,Rt):zn(cr,320,ut,Rt)),Ie<U.Ub-1&&(i(Ot[Kt].y,0,qe,We+480,16),i(Ot[Kt].f,0,et,Ge+224,8),i(Ot[Kt].ea,0,Mt,tr+224,8)),ie=8*Qe*U.B,Ot=U.sa,Kt=U.ta+16*Ae+16*Qe*U.R,cr=U.qa,ut=U.ra+8*Ae+ie,Rt=U.Ha,Ar=U.Ia+8*Ae+ie,ie=0;16>ie;++ie)i(Ot,Kt+ie*U.R,qe,We+32*ie,16);for(ie=0;8>ie;++ie)i(cr,ut+ie*U.B,et,Ge+32*ie,8),i(Rt,Ar+ie*U.B,Mt,tr+32*ie,8)}}function Iu(U,z,ie,Ae,Ie,Qe,qe,We,et){var Ge=[0],Mt=[0],tr=0,ut=et!=null?et.kd:0,Ot=et??new br;if(U==null||12>ie)return 7;Ot.data=U,Ot.w=z,Ot.ha=ie,z=[z],ie=[ie],Ot.gb=[Ot.gb];e:{var Kt=z,cr=ie,Rt=Ot.gb;if(t(U!=null),t(cr!=null),t(Rt!=null),Rt[0]=0,12<=cr[0]&&!r(U,Kt[0],"RIFF")){if(r(U,Kt[0]+8,"WEBP")){Rt=3;break e}var Ar=kt(U,Kt[0]+4);if(12>Ar||4294967286<Ar){Rt=3;break e}if(ut&&Ar>cr[0]-8){Rt=7;break e}Rt[0]=Ar,Kt[0]+=12,cr[0]-=12}Rt=0}if(Rt!=0)return Rt;for(Ar=0<Ot.gb[0],ie=ie[0];;){e:{var dr=U;cr=z,Rt=ie;var Er=Ge,yr=Mt,Ai=Kt=[0];if((ni=tr=[tr])[0]=0,8>Rt[0])Rt=7;else{if(!r(dr,cr[0],"VP8X")){if(kt(dr,cr[0]+4)!=10){Rt=3;break e}if(18>Rt[0]){Rt=7;break e}var ri=kt(dr,cr[0]+8),ji=1+at(dr,cr[0]+12);if(2147483648<=ji*(dr=1+at(dr,cr[0]+15))){Rt=3;break e}Ai!=null&&(Ai[0]=ri),Er!=null&&(Er[0]=ji),yr!=null&&(yr[0]=dr),cr[0]+=18,Rt[0]-=18,ni[0]=1}Rt=0}}if(tr=tr[0],Kt=Kt[0],Rt!=0)return Rt;if(cr=!!(2&Kt),!Ar&&tr)return 3;if(Qe!=null&&(Qe[0]=!!(16&Kt)),qe!=null&&(qe[0]=cr),We!=null&&(We[0]=0),qe=Ge[0],Kt=Mt[0],tr&&cr&&et==null){Rt=0;break}if(4>ie){Rt=7;break}if(Ar&&tr||!Ar&&!tr&&!r(U,z[0],"ALPH")){ie=[ie],Ot.na=[Ot.na],Ot.P=[Ot.P],Ot.Sa=[Ot.Sa];e:{ri=U,Rt=z,Ar=ie;var ni=Ot.gb;Er=Ot.na,yr=Ot.P,Ai=Ot.Sa,ji=22,t(ri!=null),t(Ar!=null),dr=Rt[0];var cn=Ar[0];for(t(Er!=null),t(Ai!=null),Er[0]=null,yr[0]=null,Ai[0]=0;;){if(Rt[0]=dr,Ar[0]=cn,8>cn){Rt=7;break e}var Ws=kt(ri,dr+4);if(4294967286<Ws){Rt=3;break e}var zi=8+Ws+1&-2;if(ji+=zi,0<ni&&ji>ni){Rt=3;break e}if(!r(ri,dr,"VP8 ")||!r(ri,dr,"VP8L")){Rt=0;break e}if(cn[0]<zi){Rt=7;break e}r(ri,dr,"ALPH")||(Er[0]=ri,yr[0]=dr+8,Ai[0]=Ws),dr+=zi,cn-=zi}}if(ie=ie[0],Ot.na=Ot.na[0],Ot.P=Ot.P[0],Ot.Sa=Ot.Sa[0],Rt!=0)break}ie=[ie],Ot.Ja=[Ot.Ja],Ot.xa=[Ot.xa];e:if(ni=U,Rt=z,Ar=ie,Er=Ot.gb[0],yr=Ot.Ja,Ai=Ot.xa,ri=Rt[0],dr=!r(ni,ri,"VP8 "),ji=!r(ni,ri,"VP8L"),t(ni!=null),t(Ar!=null),t(yr!=null),t(Ai!=null),8>Ar[0])Rt=7;else{if(dr||ji){if(ni=kt(ni,ri+4),12<=Er&&ni>Er-12){Rt=3;break e}if(ut&&ni>Ar[0]-8){Rt=7;break e}yr[0]=ni,Rt[0]+=8,Ar[0]-=8,Ai[0]=ji}else Ai[0]=5<=Ar[0]&&ni[ri+0]==47&&!(ni[ri+4]>>5),yr[0]=Ar[0];Rt=0}if(ie=ie[0],Ot.Ja=Ot.Ja[0],Ot.xa=Ot.xa[0],z=z[0],Rt!=0)break;if(4294967286<Ot.Ja)return 3;if(We==null||cr||(We[0]=Ot.xa?2:1),qe=[qe],Kt=[Kt],Ot.xa){if(5>ie){Rt=7;break}We=qe,ut=Kt,cr=Qe,U==null||5>ie?U=0:5<=ie&&U[z+0]==47&&!(U[z+4]>>5)?(Ar=[0],ni=[0],Er=[0],Me(yr=new fe,U,z,ie),Wi(yr,Ar,ni,Er)?(We!=null&&(We[0]=Ar[0]),ut!=null&&(ut[0]=ni[0]),cr!=null&&(cr[0]=Er[0]),U=1):U=0):U=0}else{if(10>ie){Rt=7;break}We=Kt,U==null||10>ie||!cA(U,z+3,ie-3)?U=0:(ut=U[z+0]|U[z+1]<<8|U[z+2]<<16,cr=16383&(U[z+7]<<8|U[z+6]),U=16383&(U[z+9]<<8|U[z+8]),1&ut||3<(ut>>1&7)||!(ut>>4&1)||ut>>5>=Ot.Ja||!cr||!U?U=0:(qe&&(qe[0]=cr),We&&(We[0]=U),U=1))}if(!U||(qe=qe[0],Kt=Kt[0],tr&&(Ge[0]!=qe||Mt[0]!=Kt)))return 3;et!=null&&(et[0]=Ot,et.offset=z-et.w,t(4294967286>z-et.w),t(et.offset==et.ha-ie));break}return Rt==0||Rt==7&&tr&&et==null?(Qe!=null&&(Qe[0]|=Ot.na!=null&&0<Ot.na.length),Ae!=null&&(Ae[0]=qe),Ie!=null&&(Ie[0]=Kt),0):Rt}function ou(U,z,ie){var Ae=z.width,Ie=z.height,Qe=0,qe=0,We=Ae,et=Ie;if(z.Da=U!=null&&0<U.Da,z.Da&&(We=U.cd,et=U.bd,Qe=U.v,qe=U.j,11>ie||(Qe&=-2,qe&=-2),0>Qe||0>qe||0>=We||0>=et||Qe+We>Ae||qe+et>Ie))return 0;if(z.v=Qe,z.j=qe,z.va=Qe+We,z.o=qe+et,z.U=We,z.T=et,z.da=U!=null&&0<U.da,z.da){if(!Sr(We,et,ie=[U.ib],Qe=[U.hb]))return 0;z.ib=ie[0],z.hb=Qe[0]}return z.ob=U!=null&&U.ob,z.Kb=U==null||!U.Sd,z.da&&(z.ob=z.ib<3*Ae/4&&z.hb<3*Ie/4,z.Kb=0),1}function wc(U){if(U==null)return 2;if(11>U.S){var z=U.f.RGBA;z.fb+=(U.height-1)*z.A,z.A=-z.A}else z=U.f.kb,U=U.height,z.O+=(U-1)*z.fa,z.fa=-z.fa,z.N+=(U-1>>1)*z.Ab,z.Ab=-z.Ab,z.W+=(U-1>>1)*z.Db,z.Db=-z.Db,z.F!=null&&(z.J+=(U-1)*z.lb,z.lb=-z.lb);return 0}function Bc(U,z,ie,Ae){if(Ae==null||0>=U||0>=z)return 2;if(ie!=null){if(ie.Da){var Ie=ie.cd,Qe=ie.bd,qe=-2&ie.v,We=-2&ie.j;if(0>qe||0>We||0>=Ie||0>=Qe||qe+Ie>U||We+Qe>z)return 2;U=Ie,z=Qe}if(ie.da){if(!Sr(U,z,Ie=[ie.ib],Qe=[ie.hb]))return 2;U=Ie[0],z=Qe[0]}}Ae.width=U,Ae.height=z;e:{var et=Ae.width,Ge=Ae.height;if(U=Ae.S,0>=et||0>=Ge||!(U>=pa&&13>U))U=2;else{if(0>=Ae.Rd&&Ae.sd==null){qe=Qe=Ie=z=0;var Mt=(We=et*xh[U])*Ge;if(11>U||(Qe=(Ge+1)/2*(z=(et+1)/2),U==12&&(qe=(Ie=et)*Ge)),(Ge=a(Mt+2*Qe+qe))==null){U=1;break e}Ae.sd=Ge,11>U?((et=Ae.f.RGBA).eb=Ge,et.fb=0,et.A=We,et.size=Mt):((et=Ae.f.kb).y=Ge,et.O=0,et.fa=We,et.Fd=Mt,et.f=Ge,et.N=0+Mt,et.Ab=z,et.Cd=Qe,et.ea=Ge,et.W=0+Mt+Qe,et.Db=z,et.Ed=Qe,U==12&&(et.F=Ge,et.J=0+Mt+2*Qe),et.Tc=qe,et.lb=Ie)}if(z=1,Ie=Ae.S,Qe=Ae.width,qe=Ae.height,Ie>=pa&&13>Ie)if(11>Ie)U=Ae.f.RGBA,z&=(We=Math.abs(U.A))*(qe-1)+Qe<=U.size,z&=We>=Qe*xh[Ie],z&=U.eb!=null;else{U=Ae.f.kb,We=(Qe+1)/2,Mt=(qe+1)/2,et=Math.abs(U.fa),Ge=Math.abs(U.Ab);var tr=Math.abs(U.Db),ut=Math.abs(U.lb),Ot=ut*(qe-1)+Qe;z&=et*(qe-1)+Qe<=U.Fd,z&=Ge*(Mt-1)+We<=U.Cd,z=(z&=tr*(Mt-1)+We<=U.Ed)&et>=Qe&Ge>=We&tr>=We,z&=U.y!=null,z&=U.f!=null,z&=U.ea!=null,Ie==12&&(z&=ut>=Qe,z&=Ot<=U.Tc,z&=U.F!=null)}else z=0;U=z?0:2}}return U!=0||ie!=null&&ie.fd&&(U=wc(Ae)),U}var co=64,$a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],uo=24,ho=32,Jl=8,ec=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Hr("Predictor0","PredictorAdd0"),se.Predictor0=function(){return 4278190080},se.Predictor1=function(U){return U},se.Predictor2=function(U,z,ie){return z[ie+0]},se.Predictor3=function(U,z,ie){return z[ie+1]},se.Predictor4=function(U,z,ie){return z[ie-1]},se.Predictor5=function(U,z,ie){return Gr(Gr(U,z[ie+1]),z[ie+0])},se.Predictor6=function(U,z,ie){return Gr(U,z[ie-1])},se.Predictor7=function(U,z,ie){return Gr(U,z[ie+0])},se.Predictor8=function(U,z,ie){return Gr(z[ie-1],z[ie+0])},se.Predictor9=function(U,z,ie){return Gr(z[ie+0],z[ie+1])},se.Predictor10=function(U,z,ie){return Gr(Gr(U,z[ie-1]),Gr(z[ie+0],z[ie+1]))},se.Predictor11=function(U,z,ie){var Ae=z[ie+0];return 0>=Zr(Ae>>24&255,U>>24&255,(z=z[ie-1])>>24&255)+Zr(Ae>>16&255,U>>16&255,z>>16&255)+Zr(Ae>>8&255,U>>8&255,z>>8&255)+Zr(255&Ae,255&U,255&z)?Ae:U},se.Predictor12=function(U,z,ie){var Ae=z[ie+0];return(wi((U>>24&255)+(Ae>>24&255)-((z=z[ie-1])>>24&255))<<24|wi((U>>16&255)+(Ae>>16&255)-(z>>16&255))<<16|wi((U>>8&255)+(Ae>>8&255)-(z>>8&255))<<8|wi((255&U)+(255&Ae)-(255&z)))>>>0},se.Predictor13=function(U,z,ie){var Ae=z[ie-1];return(Bi((U=Gr(U,z[ie+0]))>>24&255,Ae>>24&255)<<24|Bi(U>>16&255,Ae>>16&255)<<16|Bi(U>>8&255,Ae>>8&255)<<8|Bi(255&U,255&Ae))>>>0};var AA=se.PredictorAdd0;se.PredictorAdd1=Xr,Hr("Predictor2","PredictorAdd2"),Hr("Predictor3","PredictorAdd3"),Hr("Predictor4","PredictorAdd4"),Hr("Predictor5","PredictorAdd5"),Hr("Predictor6","PredictorAdd6"),Hr("Predictor7","PredictorAdd7"),Hr("Predictor8","PredictorAdd8"),Hr("Predictor9","PredictorAdd9"),Hr("Predictor10","PredictorAdd10"),Hr("Predictor11","PredictorAdd11"),Hr("Predictor12","PredictorAdd12"),Hr("Predictor13","PredictorAdd13");var hh=se.PredictorAdd2;ye("ColorIndexInverseTransform","MapARGB","32b",function(U){return U>>8&255},function(U){return U}),ye("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(U){return U},function(U){return U>>8&255});var bs,fA=se.ColorIndexInverseTransform,ws=se.MapARGB,Xa=se.VP8LColorIndexInverseTransformAlpha,Lu=se.MapAlpha,lu=se.VP8LPredictorsAdd=[];lu.length=16,(se.VP8LPredictors=[]).length=16,(se.VP8LPredictorsAdd_C=[]).length=16,(se.VP8LPredictors_C=[]).length=16;var Mo,Mu,Sl,Ji,Po,tc,Ca,rc,il,Za,pn,zn,Bs,os,ic,cu,Cc,Ah,XA,Pu,fh,Du,Ao,nl,dh,fo,da,Sc,ph=a(511),uu=a(2041),Ru=a(225),dA=a(767),El=0,hu=uu,Uu=Ru,Ds=dA,Ii=ph,pa=0,Ih=1,Tl=2,Au=3,mh=4,Fl=5,Lh=6,pA=7,Ec=8,kl=9,fu=10,gh=[2,3,7],po=[3,3,11],mo=[280,256,256,256,40],Tc=[0,1,1,1,0],Nl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],sl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],al=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],mA=8,gA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],du=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ma=null,Cs=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ol=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Mh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Il=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ph=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ll=[],Ya=[],bn=[],ju=1,Oa=2,Ml=[],qs=[];bl("UpsampleRgbLinePair",Lo,3),bl("UpsampleBgrLinePair",Ps,3),bl("UpsampleRgbaLinePair",Wa,4),bl("UpsampleBgraLinePair",bc,4),bl("UpsampleArgbLinePair",hA,4),bl("UpsampleRgba4444LinePair",lo,2),bl("UpsampleRgb565LinePair",ku,2);var sc=se.UpsampleRgbLinePair,Do=se.UpsampleBgrLinePair,go=se.UpsampleRgbaLinePair,Ou=se.UpsampleBgraLinePair,vh=se.UpsampleArgbLinePair,Qu=se.UpsampleRgba4444LinePair,vA=se.UpsampleRgb565LinePair,Pl=16,Ks=1<<Pl-1,ll=-227,Fc=482,Bd=6,Lf=0,Cd=a(256),ta=a(256),ZA=a(256),kc=a(256),Nc=a(Fc-ll),Ja=a(Fc-ll);Cl("YuvToRgbRow",Lo,3),Cl("YuvToBgrRow",Ps,3),Cl("YuvToRgbaRow",Wa,4),Cl("YuvToBgraRow",bc,4),Cl("YuvToArgbRow",hA,4),Cl("YuvToRgba4444Row",lo,2),Cl("YuvToRgb565Row",ku,2);var Ro=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ac=[0,2,8],Dl=[8,7,6,4,4,2,2,2,1,1,1,1],Rl=1;this.WebPDecodeRGBA=function(U,z,ie,Ae,Ie){var Qe=Ih,qe=new lr,We=new kr;qe.ba=We,We.S=Qe,We.width=[We.width],We.height=[We.height];var et=We.width,Ge=We.height,Mt=new Bt;if(Mt==null||U==null)var tr=2;else t(Mt!=null),tr=Iu(U,z,ie,Mt.width,Mt.height,Mt.Pd,Mt.Qd,Mt.format,null);if(tr!=0?et=0:(et!=null&&(et[0]=Mt.width[0]),Ge!=null&&(Ge[0]=Mt.height[0]),et=1),et){We.width=We.width[0],We.height=We.height[0],Ae!=null&&(Ae[0]=We.width),Ie!=null&&(Ie[0]=We.height);e:{if(Ae=new iu,(Ie=new br).data=U,Ie.w=z,Ie.ha=ie,Ie.kd=1,z=[0],t(Ie!=null),((U=Iu(Ie.data,Ie.w,Ie.ha,null,null,null,z,null,Ie))==0||U==7)&&z[0]&&(U=4),(z=U)==0){if(t(qe!=null),Ae.data=Ie.data,Ae.w=Ie.w+Ie.offset,Ae.ha=Ie.ha-Ie.offset,Ae.put=Yr,Ae.ac=In,Ae.bc=on,Ae.ma=qe,Ie.xa){if((U=Qt())==null){qe=1;break e}if(function(ut,Ot){var Kt=[0],cr=[0],Rt=[0];t:for(;;){if(ut==null)return 0;if(Ot==null)return ut.a=2,0;if(ut.l=Ot,ut.a=0,Me(ut.m,Ot.data,Ot.w,Ot.ha),!Wi(ut.m,Kt,cr,Rt)){ut.a=3;break t}if(ut.xb=Oa,Ot.width=Kt[0],Ot.height=cr[0],!Xt(Kt[0],cr[0],1,ut,null))break t;return 1}return t(ut.a!=0),0}(U,Ae)){if(Ae=(z=Bc(Ae.width,Ae.height,qe.Oa,qe.ba))==0){t:{Ae=U;r:for(;;){if(Ae==null){Ae=0;break t}if(t(Ae.s.yc!=null),t(Ae.s.Ya!=null),t(0<Ae.s.Wb),t((ie=Ae.l)!=null),t((Ie=ie.ma)!=null),Ae.xb!=0){if(Ae.ca=Ie.ba,Ae.tb=Ie.tb,t(Ae.ca!=null),!ou(Ie.Oa,ie,Au)){Ae.a=2;break r}if(!jt(Ae,ie.width)||ie.da)break r;if((ie.da||Ht(Ae.ca.S))&&rl(),11>Ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ae.ca.f.kb.F!=null&&rl()),Ae.Pb&&0<Ae.s.ua&&Ae.s.vb.X==null&&!ze(Ae.s.vb,Ae.s.Wa.Xa)){Ae.a=1;break r}Ae.xb=0}if(!It(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,ie.o,$e))break r;Ie.Dc=Ae.Ma,Ae=1;break t}t(Ae.a!=0),Ae=0}Ae=!Ae}Ae&&(z=U.a)}else z=U.a}else{if((U=new ao)==null){qe=1;break e}if(U.Fa=Ie.na,U.P=Ie.P,U.qc=Ie.Sa,Xo(U,Ae)){if((z=Bc(Ae.width,Ae.height,qe.Oa,qe.ba))==0){if(U.Aa=0,ie=qe.Oa,t((Ie=U)!=null),ie!=null){if(0<(et=0>(et=ie.Md)?0:100<et?255:255*et/100)){for(Ge=Mt=0;4>Ge;++Ge)12>(tr=Ie.pb[Ge]).lc&&(tr.ia=et*Dl[0>tr.lc?0:tr.lc]>>3),Mt|=tr.ia;Mt&&(alert("todo:VP8InitRandom"),Ie.ia=1)}Ie.Ga=ie.Id,100<Ie.Ga?Ie.Ga=100:0>Ie.Ga&&(Ie.Ga=0)}(function(ut,Ot){if(ut==null)return 0;if(Ot==null)return rs(ut,2,"NULL VP8Io parameter in VP8Decode().");if(!ut.cb&&!Xo(ut,Ot))return 0;if(t(ut.cb),Ot.ac==null||Ot.ac(Ot)){Ot.ob&&(ut.L=0);var Kt=ac[ut.L];if(ut.L==2?(ut.yb=0,ut.zb=0):(ut.yb=Ot.v-Kt>>4,ut.zb=Ot.j-Kt>>4,0>ut.yb&&(ut.yb=0),0>ut.zb&&(ut.zb=0)),ut.Va=Ot.o+15+Kt>>4,ut.Hb=Ot.va+15+Kt>>4,ut.Hb>ut.za&&(ut.Hb=ut.za),ut.Va>ut.Ub&&(ut.Va=ut.Ub),0<ut.L){var cr=ut.ed;for(Kt=0;4>Kt;++Kt){var Rt;if(ut.Qa.Cb){var Ar=ut.Qa.Lb[Kt];ut.Qa.Fb||(Ar+=cr.Tb)}else Ar=cr.Tb;for(Rt=0;1>=Rt;++Rt){var dr=ut.gd[Kt][Rt],Er=Ar;if(cr.Pc&&(Er+=cr.vd[0],Rt&&(Er+=cr.od[0])),0<(Er=0>Er?0:63<Er?63:Er)){var yr=Er;0<cr.wb&&(yr=4<cr.wb?yr>>2:yr>>1)>9-cr.wb&&(yr=9-cr.wb),1>yr&&(yr=1),dr.dd=yr,dr.tc=2*Er+yr,dr.ld=40<=Er?2:15<=Er?1:0}else dr.tc=0;dr.La=Rt}}}Kt=0}else rs(ut,6,"Frame setup failed"),Kt=ut.a;if(Kt=Kt==0){if(Kt){ut.$c=0,0<ut.Aa||(ut.Ic=Rl);t:{Kt=ut.Ic,cr=4*(yr=ut.za);var Ai=32*yr,ri=yr+1,ji=0<ut.L?yr*(0<ut.Aa?2:1):0,ni=(ut.Aa==2?2:1)*yr;if((dr=cr+832+(Rt=3*(16*Kt+ac[ut.L])/2*Ai)+(Ar=ut.Fa!=null&&0<ut.Fa.length?ut.Kc.c*ut.Kc.i:0))!=dr)Kt=0;else{if(dr>ut.Vb){if(ut.Vb=0,ut.Ec=a(dr),ut.Fc=0,ut.Ec==null){Kt=rs(ut,1,"no memory during frame initialization.");break t}ut.Vb=dr}dr=ut.Ec,Er=ut.Fc,ut.Ac=dr,ut.Bc=Er,Er+=cr,ut.Gd=c(Ai,ea),ut.Hd=0,ut.rb=c(ri+1,_i),ut.sb=1,ut.wa=ji?c(ji,Ni):null,ut.Y=0,ut.D.Nb=0,ut.D.wa=ut.wa,ut.D.Y=ut.Y,0<ut.Aa&&(ut.D.Y+=yr),t(!0),ut.oc=dr,ut.pc=Er,Er+=832,ut.ya=c(ni,Pa),ut.aa=0,ut.D.ya=ut.ya,ut.D.aa=ut.aa,ut.Aa==2&&(ut.D.aa+=yr),ut.R=16*yr,ut.B=8*yr,yr=(Ai=ac[ut.L])*ut.R,Ai=Ai/2*ut.B,ut.sa=dr,ut.ta=Er+yr,ut.qa=ut.sa,ut.ra=ut.ta+16*Kt*ut.R+Ai,ut.Ha=ut.qa,ut.Ia=ut.ra+8*Kt*ut.B+Ai,ut.$c=0,Er+=Rt,ut.mb=Ar?dr:null,ut.nb=Ar?Er:null,t(Er+Ar<=ut.Fc+ut.Vb),lh(ut),n(ut.Ac,ut.Bc,0,cr),Kt=1}}if(Kt){if(Ot.ka=0,Ot.y=ut.sa,Ot.O=ut.ta,Ot.f=ut.qa,Ot.N=ut.ra,Ot.ea=ut.Ha,Ot.Vd=ut.Ia,Ot.fa=ut.R,Ot.Rc=ut.B,Ot.F=null,Ot.J=0,!El){for(Kt=-255;255>=Kt;++Kt)ph[255+Kt]=0>Kt?-Kt:Kt;for(Kt=-1020;1020>=Kt;++Kt)uu[1020+Kt]=-128>Kt?-128:127<Kt?127:Kt;for(Kt=-112;112>=Kt;++Kt)Ru[112+Kt]=-16>Kt?-16:15<Kt?15:Kt;for(Kt=-255;510>=Kt;++Kt)dA[255+Kt]=0>Kt?0:255<Kt?255:Kt;El=1}Ca=vc,rc=ko,Za=Yo,pn=uA,zn=Jo,il=Nh,Bs=yc,os=Zl,ic=ke,cu=ft,Cc=Yl,Ah=Y,XA=Tt,Pu=Wt,fh=Io,Du=Tu,Ao=uh,nl=Fu,Ya[0]=An,Ya[1]=ya,Ya[2]=Hs,Ya[3]=ys,Ya[4]=Ka,Ya[5]=Ls,Ya[6]=Zn,Ya[7]=_a,Ya[8]=_n,Ya[9]=tl,Ll[0]=nu,Ll[1]=Eu,Ll[2]=Aa,Ll[3]=el,Ll[4]=qa,Ll[5]=oo,Ll[6]=Ua,bn[0]=Vs,bn[1]=$i,bn[2]=kn,bn[3]=Ki,bn[4]=Wl,bn[5]=bi,bn[6]=_s,Kt=1}else Kt=0}Kt&&(Kt=function(cn,Ws){for(cn.M=0;cn.M<cn.Va;++cn.M){var zi,oi=cn.Jc[cn.M&cn.Xb],Or=cn.m,Li=cn;for(zi=0;zi<Li.za;++zi){var Vi=Or,qi=Li,si=qi.Ac,Gi=qi.Bc+4*zi,nn=qi.zc,is=qi.ya[qi.aa+zi];if(qi.Qa.Bb?is.$b=dt(Vi,qi.Pa.jb[0])?2+dt(Vi,qi.Pa.jb[2]):dt(Vi,qi.Pa.jb[1]):is.$b=0,qi.kc&&(is.Ad=dt(Vi,qi.Bd)),is.Za=!dt(Vi,145)+0,is.Za){var Ss=is.Ob,Rn=0;for(qi=0;4>qi;++qi){var ls,Tr=nn[0+qi];for(ls=0;4>ls;++ls){Tr=Mh[si[Gi+ls]][Tr];for(var Dr=nc[dt(Vi,Tr[0])];0<Dr;)Dr=nc[2*Dr+dt(Vi,Tr[Dr])];Tr=-Dr,si[Gi+ls]=Tr}i(Ss,Rn,si,Gi,4),Rn+=4,nn[0+qi]=Tr}}else Tr=dt(Vi,156)?dt(Vi,128)?1:3:dt(Vi,163)?2:0,is.Ob[0]=Tr,n(si,Gi,Tr,4),n(nn,0,Tr,4);is.Dd=dt(Vi,142)?dt(Vi,114)?dt(Vi,183)?1:3:2:0}if(Li.m.Ka)return rs(cn,7,"Premature end-of-partition0 encountered.");for(;cn.ja<cn.za;++cn.ja){if(Li=oi,Vi=(Or=cn).rb[Or.sb-1],si=Or.rb[Or.sb+Or.ja],zi=Or.ya[Or.aa+Or.ja],Gi=Or.kc?zi.Ad:0)Vi.la=si.la=0,zi.Za||(Vi.Na=si.Na=0),zi.Hc=0,zi.Gc=0,zi.ia=0;else{var Yn,Mi;if(Vi=si,si=Li,Gi=Or.Pa.Xc,nn=Or.ya[Or.aa+Or.ja],is=Or.pb[nn.$b],qi=nn.ad,Ss=0,Rn=Or.rb[Or.sb-1],Tr=ls=0,n(qi,Ss,0,384),nn.Za)var Rs=0,Jn=Gi[3];else{Dr=a(16);var Es=Vi.Na+Rn.Na;if(Es=ma(si,Gi[1],Es,is.Eb,0,Dr,0),Vi.Na=Rn.Na=(0<Es)+0,1<Es)Ca(Dr,0,qi,Ss);else{var cs=Dr[0]+3>>3;for(Dr=0;256>Dr;Dr+=16)qi[Ss+Dr]=cs}Rs=1,Jn=Gi[0]}var Sn=15&Vi.la,$s=15&Rn.la;for(Dr=0;4>Dr;++Dr){var vo=1&$s;for(cs=Mi=0;4>cs;++cs)Sn=Sn>>1|(vo=(Es=ma(si,Jn,Es=vo+(1&Sn),is.Sc,Rs,qi,Ss))>Rs)<<7,Mi=Mi<<2|(3<Es?3:1<Es?2:qi[Ss+0]!=0),Ss+=16;Sn>>=4,$s=$s>>1|vo<<7,ls=(ls<<8|Mi)>>>0}for(Jn=Sn,Rs=$s>>4,Yn=0;4>Yn;Yn+=2){for(Mi=0,Sn=Vi.la>>4+Yn,$s=Rn.la>>4+Yn,Dr=0;2>Dr;++Dr){for(vo=1&$s,cs=0;2>cs;++cs)Es=vo+(1&Sn),Sn=Sn>>1|(vo=0<(Es=ma(si,Gi[2],Es,is.Qc,0,qi,Ss)))<<3,Mi=Mi<<2|(3<Es?3:1<Es?2:qi[Ss+0]!=0),Ss+=16;Sn>>=2,$s=$s>>1|vo<<5}Tr|=Mi<<4*Yn,Jn|=Sn<<4<<Yn,Rs|=(240&$s)<<Yn}Vi.la=Jn,Rn.la=Rs,nn.Hc=ls,nn.Gc=Tr,nn.ia=43690&Tr?0:is.ia,Gi=!(ls|Tr)}if(0<Or.L&&(Or.wa[Or.Y+Or.ja]=Or.gd[zi.$b][zi.Za],Or.wa[Or.Y+Or.ja].La|=!Gi),Li.Ka)return rs(cn,7,"Premature end-of-file encountered.")}if(lh(cn),Or=Ws,Li=1,zi=(oi=cn).D,Vi=0<oi.L&&oi.M>=oi.zb&&oi.M<=oi.Va,oi.Aa==0)t:{if(zi.M=oi.M,zi.uc=Vi,Ba(oi,zi),Li=1,zi=(Mi=oi.D).Nb,Vi=(Tr=ac[oi.L])*oi.R,si=Tr/2*oi.B,Dr=16*zi*oi.R,cs=8*zi*oi.B,Gi=oi.sa,nn=oi.ta-Vi+Dr,is=oi.qa,qi=oi.ra-si+cs,Ss=oi.Ha,Rn=oi.Ia-si+cs,$s=(Sn=Mi.M)==0,ls=Sn>=oi.Va-1,oi.Aa==2&&Ba(oi,Mi),Mi.uc)for(vo=(Es=oi).D.M,t(Es.D.uc),Mi=Es.yb;Mi<Es.Hb;++Mi){Rs=Mi,Jn=vo;var Qa=(Ln=(ns=Es).D).Nb;Yn=ns.R;var Ln=Ln.wa[Ln.Y+Rs],vi=ns.sa,un=ns.ta+16*Qa*Yn+16*Rs,ps=Ln.dd,wn=Ln.tc;if(wn!=0)if(t(3<=wn),ns.L==1)0<Rs&&Du(vi,un,Yn,wn+4),Ln.La&&nl(vi,un,Yn,wn),0<Jn&&fh(vi,un,Yn,wn+4),Ln.La&&Ao(vi,un,Yn,wn);else{var ra=ns.B,Us=ns.qa,Uo=ns.ra+8*Qa*ra+8*Rs,cl=ns.Ha,ns=ns.Ia+8*Qa*ra+8*Rs;Qa=Ln.ld,0<Rs&&(os(vi,un,Yn,wn+4,ps,Qa),cu(Us,Uo,cl,ns,ra,wn+4,ps,Qa)),Ln.La&&(Ah(vi,un,Yn,wn,ps,Qa),Pu(Us,Uo,cl,ns,ra,wn,ps,Qa)),0<Jn&&(Bs(vi,un,Yn,wn+4,ps,Qa),ic(Us,Uo,cl,ns,ra,wn+4,ps,Qa)),Ln.La&&(Cc(vi,un,Yn,wn,ps,Qa),XA(Us,Uo,cl,ns,ra,wn,ps,Qa))}}if(oi.ia&&alert("todo:DitherRow"),Or.put!=null){if(Mi=16*Sn,Sn=16*(Sn+1),$s?(Or.y=oi.sa,Or.O=oi.ta+Dr,Or.f=oi.qa,Or.N=oi.ra+cs,Or.ea=oi.Ha,Or.W=oi.Ia+cs):(Mi-=Tr,Or.y=Gi,Or.O=nn,Or.f=is,Or.N=qi,Or.ea=Ss,Or.W=Rn),ls||(Sn-=Tr),Sn>Or.o&&(Sn=Or.o),Or.F=null,Or.J=null,oi.Fa!=null&&0<oi.Fa.length&&Mi<Sn&&(Or.J=Qn(oi,Or,Mi,Sn-Mi),Or.F=oi.mb,Or.F==null&&Or.F.length==0)){Li=rs(oi,3,"Could not decode alpha data.");break t}Mi<Or.j&&(Tr=Or.j-Mi,Mi=Or.j,t(!(1&Tr)),Or.O+=oi.R*Tr,Or.N+=oi.B*(Tr>>1),Or.W+=oi.B*(Tr>>1),Or.F!=null&&(Or.J+=Or.width*Tr)),Mi<Sn&&(Or.O+=Or.v,Or.N+=Or.v>>1,Or.W+=Or.v>>1,Or.F!=null&&(Or.J+=Or.v),Or.ka=Mi-Or.j,Or.U=Or.va-Or.v,Or.T=Sn-Mi,Li=Or.put(Or))}zi+1!=oi.Ic||ls||(i(oi.sa,oi.ta-Vi,Gi,nn+16*oi.R,Vi),i(oi.qa,oi.ra-si,is,qi+8*oi.B,si),i(oi.Ha,oi.Ia-si,Ss,Rn+8*oi.B,si))}if(!Li)return rs(cn,6,"Output aborted.")}return 1}(ut,Ot)),Ot.bc!=null&&Ot.bc(Ot),Kt&=1}return Kt?(ut.cb=0,Kt):0})(U,Ae)||(z=U.a)}}else z=U.a}z==0&&qe.Oa!=null&&qe.Oa.fd&&(z=wc(qe.ba))}qe=z}Qe=qe!=0?null:11>Qe?We.f.RGBA.eb:We.f.kb.y}else Qe=null;return Qe};var xh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(se,ue){for(var re="",W=0;W<4;W++)re+=String.fromCharCode(se[ue++]);return re}function x(se,ue){return se[ue+0]|se[ue+1]<<8}function C(se,ue){return(se[ue+0]|se[ue+1]<<8|se[ue+2]<<16)>>>0}function N(se,ue){return(se[ue+0]|se[ue+1]<<8|se[ue+2]<<16|se[ue+3]<<24)>>>0}new d;var B=[0],M=[0],I=[],R=new d,D=e,V=function(se,ue){var re={},W=0,de=!1,Ee=0,Ne=0;if(re.frames=[],!function(ee,fe){for(var pe=0;pe<4;pe++)if(ee[fe+pe]!="RIFF".charCodeAt(pe))return!0;return!1}(se,ue)){for(N(se,ue+=4),ue+=8;ue<se.length;){var ge=g(se,ue),Pe=N(se,ue+=4);ue+=4;var Ye=Pe+(1&Pe);switch(ge){case"VP8 ":case"VP8L":re.frames[W]===void 0&&(re.frames[W]={}),(tt=re.frames[W]).src_off=de?Ne:ue-8,tt.src_size=Ee+Pe+8,W++,de&&(de=!1,Ee=0,Ne=0);break;case"VP8X":(tt=re.header={}).feature_flags=se[ue];var Me=ue+4;tt.canvas_width=1+C(se,Me),Me+=3,tt.canvas_height=1+C(se,Me),Me+=3;break;case"ALPH":de=!0,Ee=Ye+8,Ne=ue-8;break;case"ANIM":(tt=re.header).bgcolor=N(se,ue),Me=ue+4,tt.loop_count=x(se,Me),Me+=2;break;case"ANMF":var De,tt;(tt=re.frames[W]={}).offset_x=2*C(se,ue),ue+=3,tt.offset_y=2*C(se,ue),ue+=3,tt.width=1+C(se,ue),ue+=3,tt.height=1+C(se,ue),ue+=3,tt.duration=C(se,ue),ue+=3,De=se[ue++],tt.dispose=1&De,tt.blend=De>>1&1}ge!="ANMF"&&(ue+=Ye)}return re}}(D,0);V.response=D,V.rgbaoutput=!0,V.dataurl=!1;var G=V.header?V.header:null,Z=V.frames?V.frames:null;if(G){G.loop_counter=G.loop_count,B=[G.canvas_height],M=[G.canvas_width];for(var X=0;X<Z.length&&Z[X].blend!=0;X++);}var le=Z[0],ae=R.WebPDecodeRGBA(D,le.src_off,le.src_size,M,B);le.rgba=ae,le.imgwidth=M[0],le.imgheight=B[0];for(var ce=0;ce<M[0]*B[0]*4;ce++)I[ce]=ae[ce];return this.width=M,this.height=B,this.data=I,this}(function(e){var t,r,i,n,a,c,s,d,g,x=function(ee){return ee=ee||{},this.isStrokeTransparent=ee.isStrokeTransparent||!1,this.strokeOpacity=ee.strokeOpacity||1,this.strokeStyle=ee.strokeStyle||"#000000",this.fillStyle=ee.fillStyle||"#000000",this.isFillTransparent=ee.isFillTransparent||!1,this.fillOpacity=ee.fillOpacity||1,this.font=ee.font||"10px sans-serif",this.textBaseline=ee.textBaseline||"alphabetic",this.textAlign=ee.textAlign||"left",this.lineWidth=ee.lineWidth||1,this.lineJoin=ee.lineJoin||"miter",this.lineCap=ee.lineCap||"butt",this.path=ee.path||[],this.transform=ee.transform!==void 0?ee.transform.clone():new d,this.globalCompositeOperation=ee.globalCompositeOperation||"normal",this.globalAlpha=ee.globalAlpha||1,this.clip_path=ee.clip_path||[],this.currentPoint=ee.currentPoint||new c,this.miterLimit=ee.miterLimit||10,this.lastPoint=ee.lastPoint||new c,this.lineDashOffset=ee.lineDashOffset||0,this.lineDash=ee.lineDash||[],this.margin=ee.margin||[0,0,0,0],this.prevPageLastElemOffset=ee.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ee.ignoreClearRect!="boolean"||ee.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new C(this),t=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,c=this.internal.Point,s=this.internal.Rectangle,d=this.internal.Matrix,g=new x}]);var C=function(ee){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var fe=ee;Object.defineProperty(this,"pdf",{get:function(){return fe}});var pe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return pe},set:function(ze){pe=!!ze}});var we=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return we},set:function(ze){we=!!ze}});var Le=0;Object.defineProperty(this,"posX",{get:function(){return Le},set:function(ze){isNaN(ze)||(Le=ze)}});var lt=0;Object.defineProperty(this,"posY",{get:function(){return lt},set:function(ze){isNaN(ze)||(lt=ze)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(ze){var Et;typeof ze=="number"?Et=[ze,ze,ze,ze]:((Et=new Array(4))[0]=ze[0],Et[1]=ze.length>=2?ze[1]:Et[0],Et[2]=ze.length>=3?ze[2]:Et[0],Et[3]=ze.length>=4?ze[3]:Et[1]),g.margin=Et}});var rt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return rt},set:function(ze){rt=ze}});var gt=0;Object.defineProperty(this,"lastBreak",{get:function(){return gt},set:function(ze){gt=ze}});var dt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return dt},set:function(ze){dt=ze}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(ze){ze instanceof x&&(g=ze)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(ze){g.path=ze}});var qt=[];Object.defineProperty(this,"ctxStack",{get:function(){return qt},set:function(ze){qt=ze}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ze){var Et;Et=N(ze),this.ctx.fillStyle=Et.style,this.ctx.isFillTransparent=Et.a===0,this.ctx.fillOpacity=Et.a,this.pdf.setFillColor(Et.r,Et.g,Et.b,{a:Et.a}),this.pdf.setTextColor(Et.r,Et.g,Et.b,{a:Et.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ze){var Et=N(ze);this.ctx.strokeStyle=Et.style,this.ctx.isStrokeTransparent=Et.a===0,this.ctx.strokeOpacity=Et.a,Et.a===0?this.pdf.setDrawColor(255,255,255):(Et.a,this.pdf.setDrawColor(Et.r,Et.g,Et.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ze){["butt","round","square"].indexOf(ze)!==-1&&(this.ctx.lineCap=ze,this.pdf.setLineCap(ze))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ze){isNaN(ze)||(this.ctx.lineWidth=ze,this.pdf.setLineWidth(ze))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ze){["bevel","round","miter"].indexOf(ze)!==-1&&(this.ctx.lineJoin=ze,this.pdf.setLineJoin(ze))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ze){isNaN(ze)||(this.ctx.miterLimit=ze,this.pdf.setMiterLimit(ze))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ze){this.ctx.textBaseline=ze}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ze){["right","end","center","left","start"].indexOf(ze)!==-1&&(this.ctx.textAlign=ze)}});var Te=null,at=null,kt=null;Object.defineProperty(this,"fontFaces",{get:function(){return kt},set:function(ze){Te=null,at=null,kt=ze}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ze){var Et;if(this.ctx.font=ze,(Et=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ze))!==null){var Pt=Et[1];Et[2];var Sr=Et[3],or=Et[4];Et[5];var Wr=Et[6],Hr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(or)[2];or=Math.floor(Hr==="px"?parseFloat(or)*this.pdf.internal.scaleFactor:Hr==="em"?parseFloat(or)*this.pdf.getFontSize():parseFloat(or)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(or);var ti=function(ye){var Ce,je,Ke=[],At=ye.trim();if(At==="")return ew;if(At in J3)return[J3[At]];for(;At!=="";){switch(je=null,Ce=(At=tE(At)).charAt(0)){case'"':case"'":je=NG(At.substring(1),Ce);break;default:je=IG(At)}if(je===null||(Ke.push(je[0]),(At=tE(je[1]))!==""&&At.charAt(0)!==","))return ew;At=At.replace(/^,/,"")}return Ke}(Wr);if(this.fontFaces){var Gr=function(ye,Ce){var je=ye.getFontList(),Ke=JSON.stringify(je);if(Te===null||at!==Ke){var At=function(Ft){var vt=[];return Object.keys(Ft).forEach(function(Nt){Ft[Nt].forEach(function(Ht){var Gt=null;switch(Ht){case"bold":Gt={family:Nt,weight:"bold"};break;case"italic":Gt={family:Nt,style:"italic"};break;case"bolditalic":Gt={family:Nt,weight:"bold",style:"italic"};break;case"":case"normal":Gt={family:Nt}}Gt!==null&&(Gt.ref={name:Nt,style:Ht},vt.push(Gt))})}),vt}(je);Te=function(Ft){for(var vt={},Nt=0;Nt<Ft.length;++Nt){var Ht=Jb(Ft[Nt]),Gt=Ht.family,Fr=Ht.stretch,kr=Ht.style,Bt=Ht.weight;vt[Gt]=vt[Gt]||{},vt[Gt][Fr]=vt[Gt][Fr]||{},vt[Gt][Fr][kr]=vt[Gt][Fr][kr]||{},vt[Gt][Fr][kr][Bt]=Ht}return vt}(At.concat(Ce)),at=Ke}return Te}(this.pdf,this.fontFaces),wi=ti.map(function(ye){return{family:ye,stretch:"normal",weight:Sr,style:Pt}}),Bi=function(ye,Ce,je){for(var Ke=(je=je||{}).defaultFontFamily||"times",At=Object.assign({},kG,je.genericFontFamilies||{}),Ft=null,vt=null,Nt=0;Nt<Ce.length;++Nt)if(At[(Ft=Jb(Ce[Nt])).family]&&(Ft.family=At[Ft.family]),ye.hasOwnProperty(Ft.family)){vt=ye[Ft.family];break}if(!(vt=vt||ye[Ke]))throw new Error("Could not find a font-family for the rule '"+eE(Ft)+"' and default family '"+Ke+"'.");if(vt=function(Ht,Gt){if(Gt[Ht])return Gt[Ht];var Fr=C5[Ht],kr=Fr<=C5.normal?-1:1,Bt=Y3(Gt,EN,Fr,kr);if(!Bt)throw new Error("Could not find a matching font-stretch value for "+Ht);return Bt}(Ft.stretch,vt),vt=function(Ht,Gt){if(Gt[Ht])return Gt[Ht];for(var Fr=SN[Ht],kr=0;kr<Fr.length;++kr)if(Gt[Fr[kr]])return Gt[Fr[kr]];throw new Error("Could not find a matching font-style for "+Ht)}(Ft.style,vt),!(vt=function(Ht,Gt){if(Gt[Ht])return Gt[Ht];if(Ht===400&&Gt[500])return Gt[500];if(Ht===500&&Gt[400])return Gt[400];var Fr=FG[Ht],kr=Y3(Gt,TN,Fr,Ht<400?-1:1);if(!kr)throw new Error("Could not find a matching font-weight for value "+Ht);return kr}(Ft.weight,vt)))throw new Error("Failed to resolve a font for the rule '"+eE(Ft)+"'.");return vt}(Gr,wi);this.pdf.setFont(Bi.ref.name,Bi.ref.style)}else{var Zr="";(Sr==="bold"||parseInt(Sr,10)>=700||Pt==="bold")&&(Zr="bold"),Pt==="italic"&&(Zr+="italic"),Zr.length===0&&(Zr="normal");for(var Xr="",$r={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<ti.length;ot++){if(this.pdf.internal.getFont(ti[ot],Zr,{noFallback:!0,disableWarning:!0})!==void 0){Xr=ti[ot];break}if(Zr==="bolditalic"&&this.pdf.internal.getFont(ti[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xr=ti[ot],Zr="bold";else if(this.pdf.internal.getFont(ti[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xr=ti[ot],Zr="normal";break}}if(Xr===""){for(var xe=0;xe<ti.length;xe++)if($r[ti[xe]]){Xr=$r[ti[xe]];break}}Xr=Xr===""?"Times":Xr,this.pdf.setFont(Xr,Zr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ze){this.ctx.globalCompositeOperation=ze}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ze){this.ctx.globalAlpha=ze}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ze){this.ctx.lineDashOffset=ze,tt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ze){this.ctx.lineDash=ze,tt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ze){this.ctx.ignoreClearRect=!!ze}})};C.prototype.setLineDash=function(ee){this.lineDash=ee},C.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},C.prototype.fill=function(){Z.call(this,"fill",!1)},C.prototype.stroke=function(){Z.call(this,"stroke",!1)},C.prototype.beginPath=function(){this.path=[{type:"begin"}]},C.prototype.moveTo=function(ee,fe){if(isNaN(ee)||isNaN(fe))throw Js.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var pe=this.ctx.transform.applyToPoint(new c(ee,fe));this.path.push({type:"mt",x:pe.x,y:pe.y}),this.ctx.lastPoint=new c(ee,fe)},C.prototype.closePath=function(){var ee=new c(0,0),fe=0;for(fe=this.path.length-1;fe!==-1;fe--)if(this.path[fe].type==="begin"&&Ns(this.path[fe+1])==="object"&&typeof this.path[fe+1].x=="number"){ee=new c(this.path[fe+1].x,this.path[fe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(ee.x,ee.y)},C.prototype.lineTo=function(ee,fe){if(isNaN(ee)||isNaN(fe))throw Js.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var pe=this.ctx.transform.applyToPoint(new c(ee,fe));this.path.push({type:"lt",x:pe.x,y:pe.y}),this.ctx.lastPoint=new c(pe.x,pe.y)},C.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},C.prototype.quadraticCurveTo=function(ee,fe,pe,we){if(isNaN(pe)||isNaN(we)||isNaN(ee)||isNaN(fe))throw Js.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Le=this.ctx.transform.applyToPoint(new c(pe,we)),lt=this.ctx.transform.applyToPoint(new c(ee,fe));this.path.push({type:"qct",x1:lt.x,y1:lt.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new c(Le.x,Le.y)},C.prototype.bezierCurveTo=function(ee,fe,pe,we,Le,lt){if(isNaN(Le)||isNaN(lt)||isNaN(ee)||isNaN(fe)||isNaN(pe)||isNaN(we))throw Js.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var rt=this.ctx.transform.applyToPoint(new c(Le,lt)),gt=this.ctx.transform.applyToPoint(new c(ee,fe)),dt=this.ctx.transform.applyToPoint(new c(pe,we));this.path.push({type:"bct",x1:gt.x,y1:gt.y,x2:dt.x,y2:dt.y,x:rt.x,y:rt.y}),this.ctx.lastPoint=new c(rt.x,rt.y)},C.prototype.arc=function(ee,fe,pe,we,Le,lt){if(isNaN(ee)||isNaN(fe)||isNaN(pe)||isNaN(we)||isNaN(Le))throw Js.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(lt=!!lt,!this.ctx.transform.isIdentity){var rt=this.ctx.transform.applyToPoint(new c(ee,fe));ee=rt.x,fe=rt.y;var gt=this.ctx.transform.applyToPoint(new c(0,pe)),dt=this.ctx.transform.applyToPoint(new c(0,0));pe=Math.sqrt(Math.pow(gt.x-dt.x,2)+Math.pow(gt.y-dt.y,2))}Math.abs(Le-we)>=2*Math.PI&&(we=0,Le=2*Math.PI),this.path.push({type:"arc",x:ee,y:fe,radius:pe,startAngle:we,endAngle:Le,counterclockwise:lt})},C.prototype.arcTo=function(ee,fe,pe,we,Le){throw new Error("arcTo not implemented.")},C.prototype.rect=function(ee,fe,pe,we){if(isNaN(ee)||isNaN(fe)||isNaN(pe)||isNaN(we))throw Js.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ee,fe),this.lineTo(ee+pe,fe),this.lineTo(ee+pe,fe+we),this.lineTo(ee,fe+we),this.lineTo(ee,fe),this.lineTo(ee+pe,fe),this.lineTo(ee,fe)},C.prototype.fillRect=function(ee,fe,pe,we){if(isNaN(ee)||isNaN(fe)||isNaN(pe)||isNaN(we))throw Js.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!B.call(this)){var Le={};this.lineCap!=="butt"&&(Le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ee,fe,pe,we),this.fill(),Le.hasOwnProperty("lineCap")&&(this.lineCap=Le.lineCap),Le.hasOwnProperty("lineJoin")&&(this.lineJoin=Le.lineJoin)}},C.prototype.strokeRect=function(ee,fe,pe,we){if(isNaN(ee)||isNaN(fe)||isNaN(pe)||isNaN(we))throw Js.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");M.call(this)||(this.beginPath(),this.rect(ee,fe,pe,we),this.stroke())},C.prototype.clearRect=function(ee,fe,pe,we){if(isNaN(ee)||isNaN(fe)||isNaN(pe)||isNaN(we))throw Js.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ee,fe,pe,we))},C.prototype.save=function(ee){ee=typeof ee!="boolean"||ee;for(var fe=this.pdf.internal.getCurrentPageInfo().pageNumber,pe=0;pe<this.pdf.internal.getNumberOfPages();pe++)this.pdf.setPage(pe+1),this.pdf.internal.out("q");if(this.pdf.setPage(fe),ee){this.ctx.fontSize=this.pdf.internal.getFontSize();var we=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=we}},C.prototype.restore=function(ee){ee=typeof ee!="boolean"||ee;for(var fe=this.pdf.internal.getCurrentPageInfo().pageNumber,pe=0;pe<this.pdf.internal.getNumberOfPages();pe++)this.pdf.setPage(pe+1),this.pdf.internal.out("Q");this.pdf.setPage(fe),ee&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},C.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(ee){var fe,pe,we,Le;if(ee.isCanvasGradient===!0&&(ee=ee.getColor()),!ee)return{r:0,g:0,b:0,a:0,style:ee};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ee))fe=0,pe=0,we=0,Le=0;else{var lt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ee);if(lt!==null)fe=parseInt(lt[1]),pe=parseInt(lt[2]),we=parseInt(lt[3]),Le=1;else if((lt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ee))!==null)fe=parseInt(lt[1]),pe=parseInt(lt[2]),we=parseInt(lt[3]),Le=parseFloat(lt[4]);else{if(Le=1,typeof ee=="string"&&ee.charAt(0)!=="#"){var rt=new xN(ee);ee=rt.ok?rt.toHex():"#000000"}ee.length===4?(fe=ee.substring(1,2),fe+=fe,pe=ee.substring(2,3),pe+=pe,we=ee.substring(3,4),we+=we):(fe=ee.substring(1,3),pe=ee.substring(3,5),we=ee.substring(5,7)),fe=parseInt(fe,16),pe=parseInt(pe,16),we=parseInt(we,16)}}return{r:fe,g:pe,b:we,a:Le,style:ee}},B=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},M=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};C.prototype.fillText=function(ee,fe,pe,we){if(isNaN(fe)||isNaN(pe)||typeof ee!="string")throw Js.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(we=isNaN(we)?void 0:we,!B.call(this)){var Le=Ye(this.ctx.transform.rotation),lt=this.ctx.transform.scaleX;W.call(this,{text:ee,x:fe,y:pe,scale:lt,angle:Le,align:this.textAlign,maxWidth:we})}},C.prototype.strokeText=function(ee,fe,pe,we){if(isNaN(fe)||isNaN(pe)||typeof ee!="string")throw Js.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!M.call(this)){we=isNaN(we)?void 0:we;var Le=Ye(this.ctx.transform.rotation),lt=this.ctx.transform.scaleX;W.call(this,{text:ee,x:fe,y:pe,scale:lt,renderingMode:"stroke",angle:Le,align:this.textAlign,maxWidth:we})}},C.prototype.measureText=function(ee){if(typeof ee!="string")throw Js.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var fe=this.pdf,pe=this.pdf.internal.scaleFactor,we=fe.internal.getFontSize(),Le=fe.getStringUnitWidth(ee)*we/fe.internal.scaleFactor;return new function(lt){var rt=(lt=lt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return rt}}),this}({width:Le*=Math.round(96*pe/72*1e4)/1e4})},C.prototype.scale=function(ee,fe){if(isNaN(ee)||isNaN(fe))throw Js.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var pe=new d(ee,0,0,fe,0,0);this.ctx.transform=this.ctx.transform.multiply(pe)},C.prototype.rotate=function(ee){if(isNaN(ee))throw Js.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var fe=new d(Math.cos(ee),Math.sin(ee),-Math.sin(ee),Math.cos(ee),0,0);this.ctx.transform=this.ctx.transform.multiply(fe)},C.prototype.translate=function(ee,fe){if(isNaN(ee)||isNaN(fe))throw Js.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var pe=new d(1,0,0,1,ee,fe);this.ctx.transform=this.ctx.transform.multiply(pe)},C.prototype.transform=function(ee,fe,pe,we,Le,lt){if(isNaN(ee)||isNaN(fe)||isNaN(pe)||isNaN(we)||isNaN(Le)||isNaN(lt))throw Js.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var rt=new d(ee,fe,pe,we,Le,lt);this.ctx.transform=this.ctx.transform.multiply(rt)},C.prototype.setTransform=function(ee,fe,pe,we,Le,lt){ee=isNaN(ee)?1:ee,fe=isNaN(fe)?0:fe,pe=isNaN(pe)?0:pe,we=isNaN(we)?1:we,Le=isNaN(Le)?0:Le,lt=isNaN(lt)?0:lt,this.ctx.transform=new d(ee,fe,pe,we,Le,lt)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};C.prototype.drawImage=function(ee,fe,pe,we,Le,lt,rt,gt,dt){var qt=this.pdf.getImageProperties(ee),Te=1,at=1,kt=1,ze=1;we!==void 0&&gt!==void 0&&(kt=gt/we,ze=dt/Le,Te=qt.width/we*gt/we,at=qt.height/Le*dt/Le),lt===void 0&&(lt=fe,rt=pe,fe=0,pe=0),we!==void 0&&gt===void 0&&(gt=we,dt=Le),we===void 0&&gt===void 0&&(gt=qt.width,dt=qt.height);var Et=this.ctx.transform.decompose(),Pt=Ye(Et.rotate.shx),Sr=new d,or=(Sr=(Sr=(Sr=Sr.multiply(Et.translate)).multiply(Et.skew)).multiply(Et.scale)).applyToRectangle(new s(lt-fe*kt,rt-pe*ze,we*Te,Le*at));if(this.autoPaging){for(var Wr,Hr=R.call(this,or),ti=[],Gr=0;Gr<Hr.length;Gr+=1)ti.indexOf(Hr[Gr])===-1&&ti.push(Hr[Gr]);G(ti);for(var wi=ti[0],Bi=ti[ti.length-1],Zr=wi;Zr<Bi+1;Zr++){this.pdf.setPage(Zr);var Xr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$r=Zr===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ye=Zr===1?0:ot+(Zr-2)*xe;if(this.ctx.clip_path.length!==0){var Ce=this.path;Wr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(Wr,this.posX+this.margin[3],-ye+$r+this.ctx.prevPageLastElemOffset),X.call(this,"fill",!0),this.path=Ce}var je=JSON.parse(JSON.stringify(or));je=V([je],this.posX+this.margin[3],-ye+$r+this.ctx.prevPageLastElemOffset)[0];var Ke=(Zr>wi||Zr<Bi)&&I.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xr,xe,null).clip().discardPath()),this.pdf.addImage(ee,"JPEG",je.x,je.y,je.w,je.h,null,null,Pt),Ke&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(ee,"JPEG",or.x,or.y,or.w,or.h,null,null,Pt)};var R=function(ee,fe,pe){var we=[];fe=fe||this.pdf.internal.pageSize.width,pe=pe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Le=this.posY+this.ctx.prevPageLastElemOffset;switch(ee.type){default:case"mt":case"lt":we.push(Math.floor((ee.y+Le)/pe)+1);break;case"arc":we.push(Math.floor((ee.y+Le-ee.radius)/pe)+1),we.push(Math.floor((ee.y+Le+ee.radius)/pe)+1);break;case"qct":var lt=Me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ee.x1,ee.y1,ee.x,ee.y);we.push(Math.floor((lt.y+Le)/pe)+1),we.push(Math.floor((lt.y+lt.h+Le)/pe)+1);break;case"bct":var rt=De(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ee.x1,ee.y1,ee.x2,ee.y2,ee.x,ee.y);we.push(Math.floor((rt.y+Le)/pe)+1),we.push(Math.floor((rt.y+rt.h+Le)/pe)+1);break;case"rect":we.push(Math.floor((ee.y+Le)/pe)+1),we.push(Math.floor((ee.y+ee.h+Le)/pe)+1)}for(var gt=0;gt<we.length;gt+=1)for(;this.pdf.internal.getNumberOfPages()<we[gt];)D.call(this);return we},D=function(){var ee=this.fillStyle,fe=this.strokeStyle,pe=this.font,we=this.lineCap,Le=this.lineWidth,lt=this.lineJoin;this.pdf.addPage(),this.fillStyle=ee,this.strokeStyle=fe,this.font=pe,this.lineCap=we,this.lineWidth=Le,this.lineJoin=lt},V=function(ee,fe,pe){for(var we=0;we<ee.length;we++)switch(ee[we].type){case"bct":ee[we].x2+=fe,ee[we].y2+=pe;case"qct":ee[we].x1+=fe,ee[we].y1+=pe;default:ee[we].x+=fe,ee[we].y+=pe}return ee},G=function(ee){return ee.sort(function(fe,pe){return fe-pe})},Z=function(ee,fe){var pe=this.fillStyle,we=this.strokeStyle,Le=this.lineCap,lt=this.lineWidth,rt=Math.abs(lt*this.ctx.transform.scaleX),gt=this.lineJoin;if(this.autoPaging){for(var dt,qt,Te=JSON.parse(JSON.stringify(this.path)),at=JSON.parse(JSON.stringify(this.path)),kt=[],ze=0;ze<at.length;ze++)if(at[ze].x!==void 0)for(var Et=R.call(this,at[ze]),Pt=0;Pt<Et.length;Pt+=1)kt.indexOf(Et[Pt])===-1&&kt.push(Et[Pt]);for(var Sr=0;Sr<kt.length;Sr++)for(;this.pdf.internal.getNumberOfPages()<kt[Sr];)D.call(this);G(kt);for(var or=kt[0],Wr=kt[kt.length-1],Hr=or;Hr<Wr+1;Hr++){this.pdf.setPage(Hr),this.fillStyle=pe,this.strokeStyle=we,this.lineCap=Le,this.lineWidth=rt,this.lineJoin=gt;var ti=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Gr=Hr===1?this.posY+this.margin[0]:this.margin[0],wi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Bi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Zr=Hr===1?0:wi+(Hr-2)*Bi;if(this.ctx.clip_path.length!==0){var Xr=this.path;dt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(dt,this.posX+this.margin[3],-Zr+Gr+this.ctx.prevPageLastElemOffset),X.call(this,ee,!0),this.path=Xr}if(qt=JSON.parse(JSON.stringify(Te)),this.path=V(qt,this.posX+this.margin[3],-Zr+Gr+this.ctx.prevPageLastElemOffset),fe===!1||Hr===0){var $r=(Hr>or||Hr<Wr)&&I.call(this);$r&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ti,Bi,null).clip().discardPath()),X.call(this,ee,fe),$r&&this.pdf.restoreGraphicsState()}this.lineWidth=lt}this.path=Te}else this.lineWidth=rt,X.call(this,ee,fe),this.lineWidth=lt},X=function(ee,fe){if((ee!=="stroke"||fe||!M.call(this))&&(ee==="stroke"||fe||!B.call(this))){for(var pe,we,Le=[],lt=this.path,rt=0;rt<lt.length;rt++){var gt=lt[rt];switch(gt.type){case"begin":Le.push({begin:!0});break;case"close":Le.push({close:!0});break;case"mt":Le.push({start:gt,deltas:[],abs:[]});break;case"lt":var dt=Le.length;if(lt[rt-1]&&!isNaN(lt[rt-1].x)&&(pe=[gt.x-lt[rt-1].x,gt.y-lt[rt-1].y],dt>0)){for(;dt>=0;dt--)if(Le[dt-1].close!==!0&&Le[dt-1].begin!==!0){Le[dt-1].deltas.push(pe),Le[dt-1].abs.push(gt);break}}break;case"bct":pe=[gt.x1-lt[rt-1].x,gt.y1-lt[rt-1].y,gt.x2-lt[rt-1].x,gt.y2-lt[rt-1].y,gt.x-lt[rt-1].x,gt.y-lt[rt-1].y],Le[Le.length-1].deltas.push(pe);break;case"qct":var qt=lt[rt-1].x+2/3*(gt.x1-lt[rt-1].x),Te=lt[rt-1].y+2/3*(gt.y1-lt[rt-1].y),at=gt.x+2/3*(gt.x1-gt.x),kt=gt.y+2/3*(gt.y1-gt.y),ze=gt.x,Et=gt.y;pe=[qt-lt[rt-1].x,Te-lt[rt-1].y,at-lt[rt-1].x,kt-lt[rt-1].y,ze-lt[rt-1].x,Et-lt[rt-1].y],Le[Le.length-1].deltas.push(pe);break;case"arc":Le.push({deltas:[],abs:[],arc:!0}),Array.isArray(Le[Le.length-1].abs)&&Le[Le.length-1].abs.push(gt)}}we=fe?null:ee==="stroke"?"stroke":"fill";for(var Pt=!1,Sr=0;Sr<Le.length;Sr++)if(Le[Sr].arc)for(var or=Le[Sr].abs,Wr=0;Wr<or.length;Wr++){var Hr=or[Wr];Hr.type==="arc"?ce.call(this,Hr.x,Hr.y,Hr.radius,Hr.startAngle,Hr.endAngle,Hr.counterclockwise,void 0,fe,!Pt):de.call(this,Hr.x,Hr.y),Pt=!0}else if(Le[Sr].close===!0)this.pdf.internal.out("h"),Pt=!1;else if(Le[Sr].begin!==!0){var ti=Le[Sr].start.x,Gr=Le[Sr].start.y;Ee.call(this,Le[Sr].deltas,ti,Gr),Pt=!0}we&&se.call(this,we),fe&&ue.call(this)}},le=function(ee){var fe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,pe=fe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ee-pe;case"top":return ee+fe-pe;case"hanging":return ee+fe-2*pe;case"middle":return ee+fe/2-pe;default:return ee}},ae=function(ee){return ee+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};C.prototype.createLinearGradient=function(){var ee=function(){};return ee.colorStops=[],ee.addColorStop=function(fe,pe){this.colorStops.push([fe,pe])},ee.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ee.isCanvasGradient=!0,ee},C.prototype.createPattern=function(){return this.createLinearGradient()},C.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ce=function(ee,fe,pe,we,Le,lt,rt,gt,dt){for(var qt=ge.call(this,pe,we,Le,lt),Te=0;Te<qt.length;Te++){var at=qt[Te];Te===0&&(dt?re.call(this,at.x1+ee,at.y1+fe):de.call(this,at.x1+ee,at.y1+fe)),Ne.call(this,ee,fe,at.x2,at.y2,at.x3,at.y3,at.x4,at.y4)}gt?ue.call(this):se.call(this,rt)},se=function(ee){switch(ee){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ue=function(){this.pdf.clip(),this.pdf.discardPath()},re=function(ee,fe){this.pdf.internal.out(r(ee)+" "+i(fe)+" m")},W=function(ee){var fe;switch(ee.align){case"right":case"end":fe="right";break;case"center":fe="center";break;default:fe="left"}var pe,we,Le,lt=this.pdf.getTextDimensions(ee.text),rt=le.call(this,ee.y),gt=ae.call(this,rt)-lt.h,dt=this.ctx.transform.applyToPoint(new c(ee.x,rt));if(this.autoPaging){var qt=this.ctx.transform.decompose(),Te=new d;Te=(Te=(Te=Te.multiply(qt.translate)).multiply(qt.skew)).multiply(qt.scale);for(var at=this.ctx.transform.applyToRectangle(new s(ee.x,rt,lt.w,lt.h)),kt=Te.applyToRectangle(new s(ee.x,gt,lt.w,lt.h)),ze=R.call(this,kt),Et=[],Pt=0;Pt<ze.length;Pt+=1)Et.indexOf(ze[Pt])===-1&&Et.push(ze[Pt]);G(Et);for(var Sr=Et[0],or=Et[Et.length-1],Wr=Sr;Wr<or+1;Wr++){this.pdf.setPage(Wr);var Hr=Wr===1?this.posY+this.margin[0]:this.margin[0],ti=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gr=this.pdf.internal.pageSize.height-this.margin[2],wi=Gr-this.margin[0],Bi=this.pdf.internal.pageSize.width-this.margin[1],Zr=Bi-this.margin[3],Xr=Wr===1?0:ti+(Wr-2)*wi;if(this.ctx.clip_path.length!==0){var $r=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(pe,this.posX+this.margin[3],-1*Xr+Hr),X.call(this,"fill",!0),this.path=$r}var ot=V([JSON.parse(JSON.stringify(kt))],this.posX+this.margin[3],-Xr+Hr+this.ctx.prevPageLastElemOffset)[0];ee.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*ee.scale),Le=this.lineWidth,this.lineWidth=Le*ee.scale);var xe=this.autoPaging!=="text";if(xe||ot.y+ot.h<=Gr){if(xe||ot.y>=Hr&&ot.x<=Bi){var ye=xe?ee.text:this.pdf.splitTextToSize(ee.text,ee.maxWidth||Bi-ot.x)[0],Ce=V([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-Xr+Hr+this.ctx.prevPageLastElemOffset)[0],je=xe&&(Wr>Sr||Wr<or)&&I.call(this);je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zr,wi,null).clip().discardPath()),this.pdf.text(ye,Ce.x,Ce.y,{angle:ee.angle,align:fe,renderingMode:ee.renderingMode}),je&&this.pdf.restoreGraphicsState()}}else ot.y<Gr&&(this.ctx.prevPageLastElemOffset+=Gr-ot.y);ee.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Le)}}else ee.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*ee.scale),Le=this.lineWidth,this.lineWidth=Le*ee.scale),this.pdf.text(ee.text,dt.x+this.posX,dt.y+this.posY,{angle:ee.angle,align:fe,renderingMode:ee.renderingMode,maxWidth:ee.maxWidth}),ee.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Le)},de=function(ee,fe,pe,we){pe=pe||0,we=we||0,this.pdf.internal.out(r(ee+pe)+" "+i(fe+we)+" l")},Ee=function(ee,fe,pe){return this.pdf.lines(ee,fe,pe,null,null)},Ne=function(ee,fe,pe,we,Le,lt,rt,gt){this.pdf.internal.out([t(n(pe+ee)),t(a(we+fe)),t(n(Le+ee)),t(a(lt+fe)),t(n(rt+ee)),t(a(gt+fe)),"c"].join(" "))},ge=function(ee,fe,pe,we){for(var Le=2*Math.PI,lt=Math.PI/2;fe>pe;)fe-=Le;var rt=Math.abs(pe-fe);rt<Le&&we&&(rt=Le-rt);for(var gt=[],dt=we?-1:1,qt=fe;rt>1e-5;){var Te=qt+dt*Math.min(rt,lt);gt.push(Pe.call(this,ee,qt,Te)),rt-=Math.abs(Te-qt),qt=Te}return gt},Pe=function(ee,fe,pe){var we=(pe-fe)/2,Le=ee*Math.cos(we),lt=ee*Math.sin(we),rt=Le,gt=-lt,dt=rt*rt+gt*gt,qt=dt+rt*Le+gt*lt,Te=4/3*(Math.sqrt(2*dt*qt)-qt)/(rt*lt-gt*Le),at=rt-Te*gt,kt=gt+Te*rt,ze=at,Et=-kt,Pt=we+fe,Sr=Math.cos(Pt),or=Math.sin(Pt);return{x1:ee*Math.cos(fe),y1:ee*Math.sin(fe),x2:at*Sr-kt*or,y2:at*or+kt*Sr,x3:ze*Sr-Et*or,y3:ze*or+Et*Sr,x4:ee*Math.cos(pe),y4:ee*Math.sin(pe)}},Ye=function(ee){return 180*ee/Math.PI},Me=function(ee,fe,pe,we,Le,lt){var rt=ee+.5*(pe-ee),gt=fe+.5*(we-fe),dt=Le+.5*(pe-Le),qt=lt+.5*(we-lt),Te=Math.min(ee,Le,rt,dt),at=Math.max(ee,Le,rt,dt),kt=Math.min(fe,lt,gt,qt),ze=Math.max(fe,lt,gt,qt);return new s(Te,kt,at-Te,ze-kt)},De=function(ee,fe,pe,we,Le,lt,rt,gt){var dt,qt,Te,at,kt,ze,Et,Pt,Sr,or,Wr,Hr,ti,Gr,wi=pe-ee,Bi=we-fe,Zr=Le-pe,Xr=lt-we,$r=rt-Le,ot=gt-lt;for(qt=0;qt<41;qt++)Sr=(Et=(Te=ee+(dt=qt/40)*wi)+dt*((kt=pe+dt*Zr)-Te))+dt*(kt+dt*(Le+dt*$r-kt)-Et),or=(Pt=(at=fe+dt*Bi)+dt*((ze=we+dt*Xr)-at))+dt*(ze+dt*(lt+dt*ot-ze)-Pt),qt==0?(Wr=Sr,Hr=or,ti=Sr,Gr=or):(Wr=Math.min(Wr,Sr),Hr=Math.min(Hr,or),ti=Math.max(ti,Sr),Gr=Math.max(Gr,or));return new s(Math.round(Wr),Math.round(Hr),Math.round(ti-Wr),Math.round(Gr-Hr))},tt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ee,fe,pe=(ee=this.ctx.lineDash,fe=this.ctx.lineDashOffset,JSON.stringify({lineDash:ee,lineDashOffset:fe}));this.prevLineDash!==pe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=pe)}}})(Fi.API),function(e){var t=function(c){var s,d,g,x,C,N,B,M,I,R;for(d=[],g=0,x=(c+=s="\0\0\0\0".slice(c.length%4||4)).length;x>g;g+=4)(C=(c.charCodeAt(g)<<24)+(c.charCodeAt(g+1)<<16)+(c.charCodeAt(g+2)<<8)+c.charCodeAt(g+3))!==0?(N=(C=((C=((C=((C=(C-(R=C%85))/85)-(I=C%85))/85)-(M=C%85))/85)-(B=C%85))/85)%85,d.push(N+33,B+33,M+33,I+33,R+33)):d.push(122);return function(D,V){for(var G=V;G>0;G--)D.pop()}(d,s.length),String.fromCharCode.apply(String,d)+"~>"},r=function(c){var s,d,g,x,C,N=String,B="length",M=255,I="charCodeAt",R="slice",D="replace";for(c[R](-2),c=c[R](0,-2)[D](/\s/g,"")[D]("z","!!!!!"),g=[],x=0,C=(c+=s="uuuuu"[R](c[B]%5||5))[B];C>x;x+=5)d=52200625*(c[I](x)-33)+614125*(c[I](x+1)-33)+7225*(c[I](x+2)-33)+85*(c[I](x+3)-33)+(c[I](x+4)-33),g.push(M&d>>24,M&d>>16,M&d>>8,M&d);return function(V,G){for(var Z=G;Z>0;Z--)V.pop()}(g,s[B]),N.fromCharCode.apply(N,g)},i=function(c){return c.split("").map(function(s){return("0"+s.charCodeAt().toString(16)).slice(-2)}).join("")+">"},n=function(c){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),s.test(c)===!1)return"";for(var d="",g=0;g<c.length;g+=2)d+=String.fromCharCode("0x"+(c[g]+c[g+1]));return d},a=function(c){for(var s=new Uint8Array(c.length),d=c.length;d--;)s[d]=c.charCodeAt(d);return(s=v5(s)).reduce(function(g,x){return g+String.fromCharCode(x)},"")};e.processDataByFilters=function(c,s){var d=0,g=c||"",x=[];for(typeof(s=s||[])=="string"&&(s=[s]),d=0;d<s.length;d+=1)switch(s[d]){case"ASCII85Decode":case"/ASCII85Decode":g=r(g),x.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=t(g),x.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=n(g),x.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=i(g),x.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=a(g),x.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[d]+'" is not implemented')}return{data:g,reverseChain:x.reverse().join(" ")}}}(Fi.API),function(e){e.loadFile=function(t,r,i){return function(n,a,c){a=a!==!1,c=typeof c=="function"?c:function(){};var s=void 0;try{s=function(d,g,x){var C=new XMLHttpRequest,N=0,B=function(M){var I=M.length,R=[],D=String.fromCharCode;for(N=0;N<I;N+=1)R.push(D(255&M.charCodeAt(N)));return R.join("")};if(C.open("GET",d,!g),C.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(C.onload=function(){C.status===200?x(B(this.responseText)):x(void 0)}),C.send(null),g&&C.status===200)return B(C.responseText)}(n,a,c)}catch{}return s}(t,r,i)},e.loadImageFile=e.loadFile}(Fi.API),function(e){function t(){return(en.html2canvas?Promise.resolve(en.html2canvas):Pb(()=>Promise.resolve().then(()=>sY),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function r(){return(en.DOMPurify?Promise.resolve(en.DOMPurify):Pb(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var i=function(s){var d=Ns(s);return d==="undefined"?"undefined":d==="string"||s instanceof String?"string":d==="number"||s instanceof Number?"number":d==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":d==="object"?"object":"unknown"},n=function(s,d){var g=document.createElement(s);for(var x in d.className&&(g.className=d.className),d.innerHTML&&d.dompurify&&(g.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)g.style[x]=d.style[x];return g},a=function s(d,g){for(var x=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),C=d.firstChild;C;C=C.nextSibling)g!==!0&&C.nodeType===1&&C.nodeName==="SCRIPT"||x.appendChild(s(C,g));return d.nodeType===1&&(d.nodeName==="CANVAS"?(x.width=d.width,x.height=d.height,x.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(x.value=d.value),x.addEventListener("load",function(){x.scrollTop=d.scrollTop,x.scrollLeft=d.scrollLeft},!0)),x},c=function s(d){var g=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),x=s.convert(Promise.resolve(),g);return(x=x.setProgress(1,s,1,[s])).set(d)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(s,d){return s.__proto__=d||c.prototype,s},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(s,d){return this.then(function(){switch(d=d||function(g){switch(i(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s),d){case"string":return this.then(r).then(function(g){return this.set({src:n("div",{innerHTML:s,dompurify:g})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},c.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(d){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,d(this.prop.container,g)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(d){var g=this.opt.jsPDF,x=this.opt.fontFaces,C=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:C,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=x,x)for(var B=0;B<x.length;++B){var M=x[B],I=M.src.find(function(R){return R.format==="truetype"});I&&g.addFont(I.url,M.ref.name,M.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,g.context2d.save(!0),d(this.prop.container,N)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(s,d,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(s,d):this.outputPdf(s,d)},c.prototype.outputPdf=function(s,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,d)})},c.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},c.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(s){if(i(s)!=="object")return this;var d=Object.keys(s||{}).map(function(g){if(g in c.template.prop)return function(){this.prop[g]=s[g]};switch(g){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[g]=s[g]}}},this);return this.then(function(){return this.thenList(d)})},c.prototype.get=function(s,d){return this.then(function(){var g=s in c.template.prop?this.prop[s]:this.opt[s];return d?d(g):g})},c.prototype.setMargin=function(s){return this.then(function(){switch(i(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},c.prototype.setPageSize=function(s){function d(g,x){return Math.floor(g*x/72*96)}return this.then(function(){(s=s||Fi.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:d(s.inner.width,s.k),height:d(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},c.prototype.setProgress=function(s,d,g,x){return s!=null&&(this.progress.val=s),d!=null&&(this.progress.state=d),g!=null&&(this.progress.n=g),x!=null&&(this.progress.stack=x),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(s,d,g,x){return this.setProgress(s?this.progress.val+s:null,d||null,g?this.progress.n+g:null,x?this.progress.stack.concat(x):null)},c.prototype.then=function(s,d){var g=this;return this.thenCore(s,d,function(x,C){return g.updateProgress(null,null,1,[x]),Promise.prototype.then.call(this,function(N){return g.updateProgress(null,x),N}).then(x,C).then(function(N){return g.updateProgress(1),N})})},c.prototype.thenCore=function(s,d,g){g=g||Promise.prototype.then;var x=this;s&&(s=s.bind(x)),d&&(d=d.bind(x));var C=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?x:c.convert(Object.assign({},x),Promise.prototype),N=g.call(C,s,d);return c.convert(N,x.__proto__)},c.prototype.thenExternal=function(s,d){return Promise.prototype.then.call(this,s,d)},c.prototype.thenList=function(s){var d=this;return s.forEach(function(g){d=d.thenCore(g)}),d},c.prototype.catch=function(s){s&&(s=s.bind(this));var d=Promise.prototype.catch.call(this,s);return c.convert(d,this)},c.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},c.prototype.error=function(s){return this.then(function(){throw new Error(s)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Fi.getPageSize=function(s,d,g){if(Ns(s)==="object"){var x=s;s=x.orientation,d=x.unit||d,g=x.format||g}d=d||"mm",g=g||"a4",s=(""+(s||"P")).toLowerCase();var C,N=(""+g).toLowerCase(),B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":C=1;break;case"mm":C=72/25.4;break;case"cm":C=72/2.54;break;case"in":C=72;break;case"px":C=.75;break;case"pc":case"em":C=12;break;case"ex":C=6;break;default:throw"Invalid unit: "+d}var M,I=0,R=0;if(B.hasOwnProperty(N))I=B[N][1]/C,R=B[N][0]/C;else try{I=g[1],R=g[0]}catch{throw new Error("Invalid format: "+g)}if(s==="p"||s==="portrait")s="p",R>I&&(M=R,R=I,I=M);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",I>R&&(M=R,R=I,I=M)}return{width:R,height:I,unit:d,k:C,orientation:s}},e.html=function(s,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(Jb):null;var g=new c(d);return d.worker?g:g.from(s).doCallback()}}(Fi.API),Fi.API.addJS=function(e){return iE=e,this.internal.events.subscribe("postPutResources",function(){dy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(dy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),rE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+iE+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){dy!==void 0&&rE!==void 0&&this.internal.out("/Names <</JavaScript "+dy+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),a=0;a<n.length;a++){var c=n[a],s=i.exec(c);if(s!=null){var d=s[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(c)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,x=[];for(a=0;a<g;a++){var C=r.internal.newObject();x.push(C);var N=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var B=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<x.length;a++)r.internal.write("(page_"+(a+1)+")"+x[a]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+B+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(i,n,a){var c={title:n,options:a,children:[]};return i==null&&(i=this.root),i.children.push(c),c},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(i){i.id=r.internal.newObjectDeferred();for(var n=0;n<i.children.length;n++)this.genIds_r(i.children[n])},r.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},r.outline.renderItems=function(i){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var c=i.children[a];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var s=this.count=this.count_r({count:0},c);if(s>0&&this.line("/Count "+s),c.options&&c.options.pageNumber){var d=r.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var g=0;g<i.children.length;g++)this.renderItems(i.children[g])},r.outline.line=function(i){this.ctx.val+=i+`\r
`},r.outline.makeRef=function(i){return i.id+" 0 R"},r.outline.makeString=function(i){return"("+r.internal.pdfEscape(i)+")"},r.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(i,n){for(var a=0;a<n.children.length;a++)i.count++,this.count_r(i,n.children[a]);return i.count}}])}(Fi.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,i,n,a,c,s){var d,g=this.decode.DCT_DECODE,x=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=c||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,d=function(C){for(var N,B=256*C.charCodeAt(4)+C.charCodeAt(5),M=C.length,I={width:0,height:0,numcomponents:1},R=4;R<M;R+=2){if(R+=B,t.indexOf(C.charCodeAt(R+1))!==-1){N=256*C.charCodeAt(R+5)+C.charCodeAt(R+6),I={width:256*C.charCodeAt(R+7)+C.charCodeAt(R+8),height:N,numcomponents:C.charCodeAt(R+9)};break}B=256*C.charCodeAt(R+2)+C.charCodeAt(R+3)}return I}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),d.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}x={data:r,width:d.width,height:d.height,colorSpace:s,bitsPerComponent:8,filter:g,index:i,alias:n}}return x}}(Fi.API),Fi.API.processPNG=function(e,t,r,i){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var n,a=pG(e,{checkCrc:!0}),c=a.width,s=a.height,d=a.channels,g=a.palette,x=a.depth;n=g&&d===1?function(ce){for(var se=ce.width,ue=ce.height,re=ce.data,W=ce.palette,de=ce.depth,Ee=!1,Ne=[],ge=[],Pe=void 0,Ye=!1,Me=0,De=0;De<W.length;De++){var tt=o3(W[De],4),ee=tt[0],fe=tt[1],pe=tt[2],we=tt[3];Ne.push(ee,fe,pe),we!=null&&(we===0?(Me++,ge.length<1&&ge.push(De)):we<255&&(Ye=!0))}if(Ye||Me>1){Ee=!0,ge=void 0;var Le=se*ue;Pe=new Uint8Array(Le);for(var lt=new DataView(re.buffer),rt=0;rt<Le;rt++){var gt=tw(lt,rt,de),dt=o3(W[gt],4)[3];Pe[rt]=dt}}else Me===0&&(ge=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Ee?8:void 0,colorBytes:re,alphaBytes:Pe,needSMask:Ee,palette:Ne,mask:ge}}(a):d===2||d===4?function(ce){for(var se=ce.data,ue=ce.width,re=ce.height,W=ce.channels,de=ce.depth,Ee=W===2?"DeviceGray":"DeviceRGB",Ne=W-1,ge=ue*re,Pe=Ne,Ye=ge*Pe,Me=1*ge,De=Math.ceil(Ye*de/8),tt=Math.ceil(Me*de/8),ee=new Uint8Array(De),fe=new Uint8Array(tt),pe=new DataView(se.buffer),we=new DataView(ee.buffer),Le=new DataView(fe.buffer),lt=!1,rt=0;rt<ge;rt++){for(var gt=rt*W,dt=0;dt<Pe;dt++)AE(we,tw(pe,gt+dt,de),rt*Pe+dt,de);var qt=tw(pe,gt+Pe,de);qt<(1<<de)-1&&(lt=!0),AE(Le,qt,1*rt,de)}return{colorSpace:Ee,colorsPerPixel:Ne,sMaskBitsPerComponent:lt?de:void 0,colorBytes:ee,alphaBytes:fe,needSMask:lt}}(a):function(ce){var se=ce.data,ue=ce.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ue,colorsPerPixel:ue==="DeviceGray"?1:3,colorBytes:se instanceof Uint16Array?function(re){for(var W=re.length,de=new Uint8Array(2*W),Ee=new DataView(de.buffer,de.byteOffset,de.byteLength),Ne=0;Ne<W;Ne++)Ee.setUint16(2*Ne,re[Ne],!1);return de}(se):se,needSMask:!1}}(a);var C,N,B,M=n,I=M.colorSpace,R=M.colorsPerPixel,D=M.sMaskBitsPerComponent,V=M.colorBytes,G=M.alphaBytes,Z=M.needSMask,X=M.palette,le=M.mask,ae=null;return i!==Fi.API.image_compression.NONE&&typeof v5=="function"?(ae=function(ce){var se;switch(ce){case Fi.API.image_compression.FAST:se=11;break;case Fi.API.image_compression.MEDIUM:se=13;break;case Fi.API.image_compression.SLOW:se=14;break;default:se=12}return se}(i),C=this.decode.FLATE_DECODE,N="/Predictor ".concat(ae," /Colors ").concat(R," /BitsPerComponent ").concat(x," /Columns ").concat(c),e=oE(V,Math.ceil(c*R*x/8),R,x,i),Z&&(B=oE(G,Math.ceil(c*D/8),1,D,i))):(C=void 0,N=void 0,e=V,Z&&(B=G)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:r,data:e,index:t,filter:C,decodeParameters:N,transparency:le,palette:X,sMask:B,predictor:ae,width:c,height:s,bitsPerComponent:x,sMaskBitsPerComponent:D,colorSpace:I}}},function(e){e.processGIF89A=function(t,r,i,n){var a=new DG(t),c=a.width,s=a.height,d=[];a.decodeAndBlitFrameRGBA(0,d);var g={data:d,width:c,height:s},x=new rw(100).encode(g,100);return e.processJPEG.call(this,x,r,i,n)},e.processGIF87A=e.processGIF89A}(Fi.API),MA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:i,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},MA.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Js.log("bit decode error:"+r)}},MA.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,n=0;n<t;n++)for(var a=this.datav.getUint8(this.pos++,!0),c=i*this.width*4+8*n*4,s=0;s<8&&8*n+s<this.width;s++){var d=this.palette[a>>7-s&1];this.data[c+4*s]=d.blue,this.data[c+4*s+1]=d.green,this.data[c+4*s+2]=d.red,this.data[c+4*s+3]=255}r!==0&&(this.pos+=4-r)}},MA.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,n=0;n<e;n++){var a=this.datav.getUint8(this.pos++,!0),c=i*this.width*4+2*n*4,s=a>>4,d=15&a,g=this.palette[s];if(this.data[c]=g.blue,this.data[c+1]=g.green,this.data[c+2]=g.red,this.data[c+3]=255,2*n+1>=this.width)break;g=this.palette[d],this.data[c+4]=g.blue,this.data[c+4+1]=g.green,this.data[c+4+2]=g.red,this.data[c+4+3]=255}t!==0&&(this.pos+=4-t)}},MA.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*i;if(n<this.palette.length){var c=this.palette[n];this.data[a]=c.red,this.data[a+1]=c.green,this.data[a+2]=c.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},MA.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&t)/t*255|0,s=(a>>5&t)/t*255|0,d=(a>>10&t)/t*255|0,g=a>>15?255:0,x=i*this.width*4+4*n;this.data[x]=d,this.data[x+1]=s,this.data[x+2]=c,this.data[x+3]=g}this.pos+=e}},MA.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(c&t)/t*255|0,d=(c>>5&r)/r*255|0,g=(c>>11)/t*255|0,x=n*this.width*4+4*a;this.data[x]=g,this.data[x+1]=d,this.data[x+2]=s,this.data[x+3]=255}this.pos+=e}},MA.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*r;this.data[c]=a,this.data[c+1]=n,this.data[c+2]=i,this.data[c+3]=255}this.pos+=this.width%4}},MA.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=a,this.data[s+1]=n,this.data[s+2]=i,this.data[s+3]=c}},MA.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,i,n){var a=new MA(t,!1),c=a.width,s=a.height,d={data:a.getData(),width:c,height:s},g=new rw(100).encode(d,100);return e.processJPEG.call(this,g,r,i,n)}}(Fi.API),dE.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,i,n){var a=new dE(t),c=a.width,s=a.height,d={data:a.getData(),width:c,height:s},g=new rw(100).encode(d,100);return e.processJPEG.call(this,g,r,i,n)}}(Fi.API),Fi.API.processRGBA=function(e,t,r){for(var i=e.data,n=i.length,a=new Uint8Array(n/4*3),c=new Uint8Array(n/4),s=0,d=0,g=0;g<n;g+=4){var x=i[g],C=i[g+1],N=i[g+2],B=i[g+3];a[s++]=x,a[s++]=C,a[s++]=N,c[d++]=B}var M=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:M,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Fi.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bm=Fi.API,py=Bm.getCharWidthsArray=function(e,t){var r,i,n=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),c=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:n.metadata.Unicode.widths,d=s.fof?s.fof:1,g=t.kerning?t.kerning:n.metadata.Unicode.kerning,x=g.fof?g.fof:1,C=t.doKerning!==!1,N=0,B=e.length,M=0,I=s[0]||d,R=[];for(r=0;r<B;r++)i=e.charCodeAt(r),typeof n.metadata.widthOfString=="function"?R.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(i))+c*(1e3/a)||0)/1e3):(N=C&&Ns(g[i])==="object"&&!isNaN(parseInt(g[i][M],10))?g[i][M]/x:0,R.push((s[i]||I)/d+N)),M=i;return R},nE=Bm.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return Bm.processArabic&&(e=Bm.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,r,n)/r:py.apply(this,arguments).reduce(function(a,c){return a+c},0)},sE=function(e,t,r,i){for(var n=[],a=0,c=e.length,s=0;a!==c&&s+t[a]<r;)s+=t[a],a++;n.push(e.slice(0,a));var d=a;for(s=0;a!==c;)s+t[a]>i&&(n.push(e.slice(d,a)),s=0,d=a),s+=t[a],a++;return d!==a&&n.push(e.slice(d,a)),n},aE=function(e,t,r){r||(r={});var i,n,a,c,s,d,g,x=[],C=[x],N=r.textIndent||0,B=0,M=0,I=e.split(" "),R=py.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?I[0].length+2:r.lineIndent||0){var D=Array(d).join(" "),V=[];I.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?V=V.concat(Z.map(function(X,le){return(le&&X.length?`
`:"")+X})):V.push(Z[0])}),I=V,d=nE.apply(this,[D,r])}for(a=0,c=I.length;a<c;a++){var G=0;if(i=I[a],d&&i[0]==`
`&&(i=i.substr(1),G=1),N+B+(M=(n=py.apply(this,[i,r])).reduce(function(Z,X){return Z+X},0))>t||G){if(M>t){for(s=sE.apply(this,[i,n,t-(N+B),t]),x.push(s.shift()),x=[s.pop()];s.length;)C.push([s.shift()]);M=n.slice(i.length-(x[0]?x[0].length:0)).reduce(function(Z,X){return Z+X},0)}else x=[i];C.push(x),N=M+d,B=R}else x.push(i),N+=B+M,B=R}return g=d?function(Z,X){return(X?D:"")+Z.join(" ")}:function(Z){return Z.join(" ")},C.map(g)},Bm.splitTextToSize=function(e,t,r){var i,n=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var C=this.internal.getFont(x.fontName,x.fontStyle),N="Unicode";return C.metadata[N]?{widths:C.metadata[N].widths||{0:1},kerning:C.metadata[N].kerning||{}}:{font:C.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var c=1*this.internal.scaleFactor*t/n;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,a.lineIndent=r.lineIndent;var s,d,g=[];for(s=0,d=i.length;s<d;s++)g=g.concat(aE.apply(this,[i[s],c,a]));return g},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",i={},n={},a=0;a<16;a++)i[r[a]]=t[a],n[t[a]]=r[a];var c=function(N){return"0x"+parseInt(N,10).toString(16)},s=e.__fontmetrics__.compress=function(N){var B,M,I,R,D=["{"];for(var V in N){if(B=N[V],isNaN(parseInt(V,10))?M="'"+V+"'":(V=parseInt(V,10),M=(M=c(V).slice(2)).slice(0,-1)+n[M.slice(-1)]),typeof B=="number")B<0?(I=c(B).slice(3),R="-"):(I=c(B).slice(2),R=""),I=R+I.slice(0,-1)+n[I.slice(-1)];else{if(Ns(B)!=="object")throw new Error("Don't know what to do with value type "+Ns(B)+".");I=s(B)}D.push(M+I)}return D.push("}"),D.join("")},d=e.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var B,M,I,R,D={},V=1,G=D,Z=[],X="",le="",ae=N.length-1,ce=1;ce<ae;ce+=1)(R=N[ce])=="'"?B?(I=B.join(""),B=void 0):B=[]:B?B.push(R):R=="{"?(Z.push([G,I]),G={},I=void 0):R=="}"?((M=Z.pop())[0][M[1]]=G,I=void 0,G=M[0]):R=="-"?V=-1:I===void 0?i.hasOwnProperty(R)?(X+=i[R],I=parseInt(X,16)*V,V=1,X=""):X+=R:i.hasOwnProperty(R)?(le+=i[R],G[I]=parseInt(le,16)*V,V=1,I=void 0,le=""):le+=R;return D},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},x={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},C={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(N){var B=N.font,M=C.Unicode[B.postScriptName];M&&(B.metadata.Unicode={},B.metadata.Unicode.widths=M.widths,B.metadata.Unicode.kerning=M.kerning);var I=x.Unicode[B.postScriptName];I&&(B.metadata.Unicode.encoding=I,B.encoding=I.codePages[0])}])}(Fi.API),function(e){var t=function(r){for(var i=r.length,n=new Uint8Array(i),a=0;a<i;a++)n[a]=r.charCodeAt(a);return n};e.API.events.push(["addFont",function(r){var i=void 0,n=r.font,a=r.instance;if(!n.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(i=a.existsFileInVFS(n.postScriptName)===!1?a.loadFile(n.postScriptName):a.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(c,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(l_(s)),c.metadata=e.API.TTFFont.open(s),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(n,i)}}])}(Fi),Fi.API.addSvgAsImage=function(e,t,r,i,n,a,c,s){if(isNaN(t)||isNaN(r))throw Js.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(n))throw Js.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=i,d.height=n;var g=d.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,d.width,d.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},C=this;return(en.canvg?Promise.resolve(en.canvg):Pb(()=>import("./index.es-s4YXRSOr.js"),[])).catch(function(N){return Promise.reject(new Error("Could not load canvg: "+N))}).then(function(N){return N.default?N.default:N}).then(function(N){return N.fromString(g,e,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(x)}).then(function(){C.addImage(d.toDataURL("image/jpeg",1),t,r,i,n,c,s)})},Fi.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var n=0;n<this.internal.pages[i].length;n++)this.internal.pages[i][n]=this.internal.pages[i][n].replace(t,r);return this},Fi.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var i,n,a,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(c),d=[],g=0,x=0,C=0;function N(M,I){var R,D=!1;for(R=0;R<M.length;R+=1)M[R]===I&&(D=!0);return D}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var B=s.length;for(C=0;C<B;C+=1)r[s[C]].value=r[s[C]].defaultValue,r[s[C]].explicitSet=!1}if(Ns(e)==="object"){for(n in e)if(a=e[n],N(s,n)&&a!==void 0){if(r[n].type==="boolean"&&typeof a=="boolean")r[n].value=a;else if(r[n].type==="name"&&N(r[n].valueSet,a))r[n].value=a;else if(r[n].type==="integer"&&Number.isInteger(a))r[n].value=a;else if(r[n].type==="array"){for(g=0;g<a.length;g+=1)if(i=!0,a[g].length===1&&typeof a[g][0]=="number")d.push(String(a[g]-1));else if(a[g].length>1){for(x=0;x<a[g].length;x+=1)typeof a[g][x]!="number"&&(i=!1);i===!0&&d.push([a[g][0]-1,a[g][1]-1].join(" "))}r[n].value="["+d.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var M,I=[];for(M in r)r[M].explicitSet===!0&&(r[M].type==="name"?I.push("/"+M+" /"+r[M].value):I.push("/"+M+" "+r[M].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),g=a.length+c.length+s.length+n.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(n+a+c+s+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Fi.API),function(e){var t=e.API,r=t.pdfEscape16=function(a,c){for(var s,d=c.metadata.Unicode.widths,g=["","0","00","000","0000"],x=[""],C=0,N=a.length;C<N;++C){if(s=c.metadata.characterToGlyph(a.charCodeAt(C)),c.metadata.glyIdsUsed.push(s),c.metadata.toUnicode[s]=a.charCodeAt(C),d.indexOf(s)==-1&&(d.push(s),d.push([parseInt(c.metadata.widthOfGlyph(s),10)])),s=="0")return x.join("");s=s.toString(16),x.push(g[4-s.length],s)}return x.join("")},i=function(a){var c,s,d,g,x,C,N;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],C=0,N=(s=Object.keys(a).sort(function(B,M){return B-M})).length;C<N;C++)c=s[C],d.length>=100&&(x+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),a[c]!==void 0&&a[c]!==null&&typeof a[c].toString=="function"&&(g=("0000"+a[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),d.push("<"+c+"><"+g+">"));return d.length&&(x+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),x+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(c){var s=c.font,d=c.out,g=c.newObject,x=c.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="Identity-H"){for(var C=s.metadata.Unicode.widths,N=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),B="",M=0;M<N.length;M++)B+=String.fromCharCode(N[M]);var I=g();x({data:B,addLength1:!0,objectId:I}),d("endobj");var R=g();x({data:i(s.metadata.toUnicode),addLength1:!0,objectId:R}),d("endobj");var D=g();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Lm(s.fontName)),d("/FontFile2 "+I+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),d("/Flags "+s.metadata.flags),d("/StemV "+s.metadata.stemV),d("/ItalicAngle "+s.metadata.italicAngle),d("/Ascent "+s.metadata.ascender),d("/Descent "+s.metadata.decender),d("/CapHeight "+s.metadata.capHeight),d(">>"),d("endobj");var V=g();d("<<"),d("/Type /Font"),d("/BaseFont /"+Lm(s.fontName)),d("/FontDescriptor "+D+" 0 R"),d("/W "+e.API.PDFObject.convert(C)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+s.encoding+")"),d(">>"),d(">>"),d("endobj"),s.objectNumber=g(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+R+" 0 R"),d("/BaseFont /"+Lm(s.fontName)),d("/Encoding /"+s.encoding),d("/DescendantFonts ["+V+" 0 R]"),d(">>"),d("endobj"),s.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(c){var s=c.font,d=c.out,g=c.newObject,x=c.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var C=s.metadata.rawData,N="",B=0;B<C.length;B++)N+=String.fromCharCode(C[B]);var M=g();x({data:N,addLength1:!0,objectId:M}),d("endobj");var I=g();x({data:i(s.metadata.toUnicode),addLength1:!0,objectId:I}),d("endobj");var R=g();d("<<"),d("/Descent "+s.metadata.decender),d("/CapHeight "+s.metadata.capHeight),d("/StemV "+s.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+M+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),d("/FontName /"+Lm(s.fontName)),d("/ItalicAngle "+s.metadata.italicAngle),d("/Ascent "+s.metadata.ascender),d(">>"),d("endobj"),s.objectNumber=g();for(var D=0;D<s.metadata.hmtx.widths.length;D++)s.metadata.hmtx.widths[D]=parseInt(s.metadata.hmtx.widths[D]*(1e3/s.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+Lm(s.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),d("endobj"),s.isAlreadyPutted=!0}})(a)}]);var n=function(a){var c,s=a.text||"",d=a.x,g=a.y,x=a.options||{},C=a.mutex||{},N=C.pdfEscape,B=C.activeFontKey,M=C.fonts,I=B,R="",D=0,V="",G=M[I].encoding;if(M[I].encoding!=="Identity-H")return{text:s,x:d,y:g,options:x,mutex:C};for(V=s,I=B,Array.isArray(s)&&(V=s[0]),D=0;D<V.length;D+=1)M[I].metadata.hasOwnProperty("cmap")&&(c=M[I].metadata.cmap.unicode.codeMap[V[D].charCodeAt(0)]),c||V[D].charCodeAt(0)<256&&M[I].metadata.hasOwnProperty("Unicode")?R+=V[D]:R+="";var Z="";return parseInt(I.slice(1))<14||G==="WinAnsiEncoding"?Z=N(R,I).split("").map(function(X){return X.charCodeAt(0).toString(16)}).join(""):G==="Identity-H"&&(Z=r(R,M[I])),C.isHex=!0,{text:Z,x:d,y:g,options:x,mutex:C}};t.events.push(["postProcessText",function(a){var c=a.text||"",s=[],d={text:c,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(c)){var g=0;for(g=0;g<c.length;g+=1)Array.isArray(c[g])&&c[g].length===3?s.push([n(Object.assign({},d,{text:c[g][0]})).text,c[g][1],c[g][2]]):s.push(n(Object.assign({},d,{text:c[g]})).text);a.text=s}else a.text=n(Object.assign({},d,{text:c})).text}])}(Fi),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,i){return t.call(this),this.internal.vFS[r]=i,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Fi.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var n,a,c,s,d,g,x,C=t,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],B=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],M={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],D=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),V=!1,G=0;this.__bidiEngine__={};var Z=function(re){var W=re.charCodeAt(),de=W>>8,Ee=I[de];return Ee!==void 0?C[256*Ee+(255&W)]:de===252||de===253?"AL":D.test(de)?"L":de===8?"R":"N"},X=function(re){for(var W,de=0;de<re.length;de++){if((W=Z(re.charAt(de)))==="L")return!1;if(W==="R")return!0}return!1},le=function(re,W,de,Ee){var Ne,ge,Pe,Ye,Me=W[Ee];switch(Me){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":V=!1;break;case"N":case"AN":break;case"EN":V&&(Me="AN");break;case"AL":V=!0,Me="R";break;case"WS":case"BN":Me="N";break;case"CS":Ee<1||Ee+1>=W.length||(Ne=de[Ee-1])!=="EN"&&Ne!=="AN"||(ge=W[Ee+1])!=="EN"&&ge!=="AN"?Me="N":V&&(ge="AN"),Me=ge===Ne?ge:"N";break;case"ES":Me=(Ne=Ee>0?de[Ee-1]:"B")==="EN"&&Ee+1<W.length&&W[Ee+1]==="EN"?"EN":"N";break;case"ET":if(Ee>0&&de[Ee-1]==="EN"){Me="EN";break}if(V){Me="N";break}for(Pe=Ee+1,Ye=W.length;Pe<Ye&&W[Pe]==="ET";)Pe++;Me=Pe<Ye&&W[Pe]==="EN"?"EN":"N";break;case"NSM":if(c&&!s){for(Ye=W.length,Pe=Ee+1;Pe<Ye&&W[Pe]==="NSM";)Pe++;if(Pe<Ye){var De=re[Ee],tt=De>=1425&&De<=2303||De===64286;if(Ne=W[Pe],tt&&(Ne==="R"||Ne==="AL")){Me="R";break}}}Me=Ee<1||(Ne=W[Ee-1])==="B"?"N":de[Ee-1];break;case"B":V=!1,n=!0,Me=G;break;case"S":a=!0,Me="N"}return Me},ae=function(re,W,de){var Ee=re.split("");return de&&ce(Ee,de,{hiLevel:G}),Ee.reverse(),W&&W.reverse(),Ee.join("")},ce=function(re,W,de){var Ee,Ne,ge,Pe,Ye,Me=-1,De=re.length,tt=0,ee=[],fe=G?B:N,pe=[];for(V=!1,n=!1,a=!1,Ne=0;Ne<De;Ne++)pe[Ne]=Z(re[Ne]);for(ge=0;ge<De;ge++){if(Ye=tt,ee[ge]=le(re,pe,ee,ge),Ee=240&(tt=fe[Ye][M[ee[ge]]]),tt&=15,W[ge]=Pe=fe[tt][5],Ee>0)if(Ee===16){for(Ne=Me;Ne<ge;Ne++)W[Ne]=1;Me=-1}else Me=-1;if(fe[tt][6])Me===-1&&(Me=ge);else if(Me>-1){for(Ne=Me;Ne<ge;Ne++)W[Ne]=Pe;Me=-1}pe[ge]==="B"&&(W[ge]=0),de.hiLevel|=Pe}a&&function(we,Le,lt){for(var rt=0;rt<lt;rt++)if(we[rt]==="S"){Le[rt]=G;for(var gt=rt-1;gt>=0&&we[gt]==="WS";gt--)Le[gt]=G}}(pe,W,De)},se=function(re,W,de,Ee,Ne){if(!(Ne.hiLevel<re)){if(re===1&&G===1&&!n)return W.reverse(),void(de&&de.reverse());for(var ge,Pe,Ye,Me,De=W.length,tt=0;tt<De;){if(Ee[tt]>=re){for(Ye=tt+1;Ye<De&&Ee[Ye]>=re;)Ye++;for(Me=tt,Pe=Ye-1;Me<Pe;Me++,Pe--)ge=W[Me],W[Me]=W[Pe],W[Pe]=ge,de&&(ge=de[Me],de[Me]=de[Pe],de[Pe]=ge);tt=Ye}tt++}}},ue=function(re,W,de){var Ee=re.split(""),Ne={hiLevel:G};return de||(de=[]),ce(Ee,de,Ne),function(ge,Pe,Ye){if(Ye.hiLevel!==0&&x)for(var Me,De=0;De<ge.length;De++)Pe[De]===1&&(Me=R.indexOf(ge[De]))>=0&&(ge[De]=R[Me+1])}(Ee,de,Ne),se(2,Ee,W,de,Ne),se(1,Ee,W,de,Ne),Ee.join("")};return this.__bidiEngine__.doBidiReorder=function(re,W,de){if(function(Ne,ge){if(ge)for(var Pe=0;Pe<Ne.length;Pe++)ge[Pe]=Pe;s===void 0&&(s=X(Ne)),g===void 0&&(g=X(Ne))}(re,W),c||!d||g)if(c&&d&&s^g)G=s?1:0,re=ae(re,W,de);else if(!c&&d&&g)G=s?1:0,re=ue(re,W,de),re=ae(re,W);else if(!c||s||d||g){if(c&&!d&&s^g)re=ae(re,W),s?(G=0,re=ue(re,W,de)):(G=1,re=ue(re,W,de),re=ae(re,W));else if(c&&s&&!d&&g)G=1,re=ue(re,W,de),re=ae(re,W);else if(!c&&!d&&s^g){var Ee=x;s?(G=1,re=ue(re,W,de),G=0,x=!1,re=ue(re,W,de),x=Ee):(G=0,re=ue(re,W,de),re=ae(re,W),G=1,x=!1,re=ue(re,W,de),x=Ee,re=ae(re,W))}}else G=0,re=ue(re,W,de);else G=s?1:0,re=ue(re,W,de);return re},this.__bidiEngine__.setOptions=function(re){re&&(c=re.isInputVisual,d=re.isOutputVisual,s=re.isInputRtl,g=re.isOutputRtl,x=re.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var n=i.text;i.x,i.y;var a=i.options||{};i.mutex,a.lang;var c=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(n)==="[object Array]"){var s=0;for(c=[],s=0;s<n.length;s+=1)Object.prototype.toString.call(n[s])==="[object Array]"?c.push([r.doBidiReorder(n[s][0]),n[s][1],n[s][2]]):c.push([r.doBidiReorder(n[s])]);i.text=c}else i.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])}(Fi),Fi.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new yp(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new ZG(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new RG(this.contents),this.head=new jG(this),this.name=new VG(this),this.cmap=new kN(this),this.toUnicode={},this.hhea=new OG(this),this.maxp=new GG(this),this.hmtx=new qG(this),this.post=new zG(this),this.os2=new QG(this),this.loca=new XG(this),this.glyf=new KG(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,i,n,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,s,d,g;for(g=[],c=0,s=(d=this.bbox).length;c<s;c++)t=d[c],g.push(Math.round(t*this.scaleFactor));return g}).call(this),this.stemV=0,this.post.exists?(i=255&(n=this.post.italic_angle),32768&(r=n>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,i){var n,a,c,s;for(c=0,a=0,s=(t=""+t).length;0<=s?a<s:a>s;a=0<=s?++a:--a)n=t.charCodeAt(a),c+=this.widthOfGlyph(this.characterToGlyph(n))+i*(1e3/r)||0;return c*(r/1e3)},e.prototype.lineHeight=function(t,r){var i;return r==null&&(r=!1),i=r?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var WA,yp=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,i;for(i=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)i[r]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var r,i,n;for(n=[],r=0,i=t.length;0<=i?r<i:r>i;r=0<=i?++r:--r)n.push(this.writeByte(t.charCodeAt(r)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,i,n,a,c,s,d;return t=this.readByte(),r=this.readByte(),i=this.readByte(),n=this.readByte(),a=this.readByte(),c=this.readByte(),s=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^i)+4294967296*(255^n)+16777216*(255^a)+65536*(255^c)+256*(255^s)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*i+4294967296*n+16777216*a+65536*c+256*s+d},e.prototype.writeLongLong=function(t){var r,i;return r=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,i;for(r=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)r.push(this.readByte());return r},e.prototype.write=function(t){var r,i,n,a;for(a=[],i=0,n=t.length;i<n;i++)r=t[i],a.push(this.writeByte(r));return a},e}(),RG=function(){var e;function t(r){var i,n,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,a=this.tableCount;0<=a?n<a:n>a;n=0<=a?++n:--n)i={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(r){var i,n,a,c,s,d,g,x,C,N,B,M,I;for(I in B=Object.keys(r).length,d=Math.log(2),C=16*Math.floor(Math.log(B)/d),c=Math.floor(C/d),x=16*B-C,(n=new yp).writeInt(this.scalarType),n.writeShort(B),n.writeShort(C),n.writeShort(c),n.writeShort(x),a=16*B,g=n.pos+a,s=null,M=[],r)for(N=r[I],n.writeString(I),n.writeInt(e(N)),n.writeInt(g),n.writeInt(N.length),M=M.concat(N),I==="head"&&(s=g),g+=N.length;g%4;)M.push(0),g++;return n.write(M),i=2981146554-e(n.data),n.pos=s+8,n.writeUInt32(i),n.data},e=function(r){var i,n,a,c;for(r=NN.call(r);r.length%4;)r.push(0);for(a=new yp(r),n=0,i=0,c=r.length;i<c;i=i+=4)n+=a.readUInt32();return 4294967295&n},t}(),UG={}.hasOwnProperty,Tf=function(e,t){for(var r in t)UG.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};WA=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var jG=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Tf(e,WA),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new yp).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),pE=function(){function e(t,r){var i,n,a,c,s,d,g,x,C,N,B,M,I,R,D,V,G;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),C=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(B=t.readUInt16(),N=B/2,t.pos+=6,a=function(){var Z,X;for(X=[],d=Z=0;0<=N?Z<N:Z>N;d=0<=N?++Z:--Z)X.push(t.readUInt16());return X}(),t.pos+=2,I=function(){var Z,X;for(X=[],d=Z=0;0<=N?Z<N:Z>N;d=0<=N?++Z:--Z)X.push(t.readUInt16());return X}(),g=function(){var Z,X;for(X=[],d=Z=0;0<=N?Z<N:Z>N;d=0<=N?++Z:--Z)X.push(t.readUInt16());return X}(),x=function(){var Z,X;for(X=[],d=Z=0;0<=N?Z<N:Z>N;d=0<=N?++Z:--Z)X.push(t.readUInt16());return X}(),n=(this.length-t.pos+this.offset)/2,s=function(){var Z,X;for(X=[],d=Z=0;0<=n?Z<n:Z>n;d=0<=n?++Z:--Z)X.push(t.readUInt16());return X}(),d=D=0,G=a.length;D<G;d=++D)for(R=a[d],i=V=M=I[d];M<=R?V<=R:V>=R;i=M<=R?++V:--V)x[d]===0?c=i+g[d]:(c=s[x[d]/2+(i-M)-(N-d)]||0)!==0&&(c+=g[d]),this.codeMap[i]=65535&c}t.pos=C}return e.encode=function(t,r){var i,n,a,c,s,d,g,x,C,N,B,M,I,R,D,V,G,Z,X,le,ae,ce,se,ue,re,W,de,Ee,Ne,ge,Pe,Ye,Me,De,tt,ee,fe,pe,we,Le,lt,rt,gt,dt,qt,Te;switch(Ee=new yp,c=Object.keys(t).sort(function(at,kt){return at-kt}),r){case"macroman":for(I=0,R=function(){var at=[];for(M=0;M<256;++M)at.push(0);return at}(),V={0:0},a={},Ne=0,Me=c.length;Ne<Me;Ne++)V[gt=t[n=c[Ne]]]==null&&(V[gt]=++I),a[n]={old:t[n],new:V[t[n]]},R[n]=V[t[n]];return Ee.writeUInt16(1),Ee.writeUInt16(0),Ee.writeUInt32(12),Ee.writeUInt16(0),Ee.writeUInt16(262),Ee.writeUInt16(0),Ee.write(R),{charMap:a,subtable:Ee.data,maxGlyphID:I+1};case"unicode":for(W=[],C=[],G=0,V={},i={},D=g=null,ge=0,De=c.length;ge<De;ge++)V[X=t[n=c[ge]]]==null&&(V[X]=++G),i[n]={old:X,new:V[X]},s=V[X]-n,D!=null&&s===g||(D&&C.push(D),W.push(n),g=s),D=n;for(D&&C.push(D),C.push(65535),W.push(65535),ue=2*(se=W.length),ce=2*Math.pow(Math.log(se)/Math.LN2,2),N=Math.log(ce/2)/Math.LN2,ae=2*se-ce,d=[],le=[],B=[],M=Pe=0,tt=W.length;Pe<tt;M=++Pe){if(re=W[M],x=C[M],re===65535){d.push(0),le.push(0);break}if(re-(de=i[re].new)>=32768)for(d.push(0),le.push(2*(B.length+se-M)),n=Ye=re;re<=x?Ye<=x:Ye>=x;n=re<=x?++Ye:--Ye)B.push(i[n].new);else d.push(de-re),le.push(0)}for(Ee.writeUInt16(3),Ee.writeUInt16(1),Ee.writeUInt32(12),Ee.writeUInt16(4),Ee.writeUInt16(16+8*se+2*B.length),Ee.writeUInt16(0),Ee.writeUInt16(ue),Ee.writeUInt16(ce),Ee.writeUInt16(N),Ee.writeUInt16(ae),lt=0,ee=C.length;lt<ee;lt++)n=C[lt],Ee.writeUInt16(n);for(Ee.writeUInt16(0),rt=0,fe=W.length;rt<fe;rt++)n=W[rt],Ee.writeUInt16(n);for(dt=0,pe=d.length;dt<pe;dt++)s=d[dt],Ee.writeUInt16(s);for(qt=0,we=le.length;qt<we;qt++)Z=le[qt],Ee.writeUInt16(Z);for(Te=0,Le=B.length;Te<Le;Te++)I=B[Te],Ee.writeUInt16(I);return{charMap:i,subtable:Ee.data,maxGlyphID:G+1}}},e}(),kN=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Tf(e,WA),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,n;for(t.pos=this.offset,this.version=t.readUInt16(),n=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)r=new pE(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,n;return r==null&&(r="macroman"),i=pE.encode(t,r),(n=new yp).writeUInt16(0),n.writeUInt16(1),i.table=n.data.concat(i.subtable),i},e}(),OG=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Tf(e,WA),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),QG=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Tf(e,WA),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),zG=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Tf(e,WA),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,n;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],n=[];t.pos<this.offset+this.length;)r=t.readByte(),n.push(this.names.push(t.readString(r)));return n;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=(function(){var c,s,d;for(d=[],a=c=0,s=this.file.maxp.numGlyphs;0<=s?c<s:c>s;a=0<=s?++c:--c)d.push(t.readUInt32());return d}).call(this)}},e}(),HG=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},VG=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Tf(e,WA),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,n,a,c,s,d,g,x,C,N;for(t.pos=this.offset,t.readShort(),r=t.readShort(),s=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()});for(d={},a=x=0,C=i.length;x<C;a=++x)n=i[a],t.pos=n.offset,g=t.readString(n.length),c=new HG(g,n),d[N=n.nameID]==null&&(d[N]=[]),d[n.nameID].push(c);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),GG=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Tf(e,WA),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),qG=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Tf(e,WA),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,n,a,c,s,d;for(t.pos=this.offset,this.metrics=[],r=0,s=this.file.hhea.numberOfMetrics;0<=s?r<s:r>s;r=0<=s?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,x;for(x=[],r=g=0;0<=n?g<n:g>n;r=0<=n?++g:--g)x.push(t.readInt16());return x}(),this.widths=(function(){var g,x,C,N;for(N=[],g=0,x=(C=this.metrics).length;g<x;g++)a=C[g],N.push(a.advance);return N}).call(this),i=this.widths[this.widths.length-1],d=[],r=c=0;0<=n?c<n:c>n;r=0<=n?++c:--c)d.push(this.widths.push(i));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),NN=[].slice,KG=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Tf(e,WA),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,n,a,c,s,d,g,x,C;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(n=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,c=(s=new yp(r.read(n))).readShort(),g=s.readShort(),C=s.readShort(),d=s.readShort(),x=s.readShort(),this.cache[t]=c===-1?new $G(s,g,C,d,x):new WG(s,c,g,C,d,x),this.cache[t]))},e.prototype.encode=function(t,r,i){var n,a,c,s,d;for(c=[],a=[],s=0,d=r.length;s<d;s++)n=t[r[s]],a.push(c.length),n&&(c=c.concat(n.encode(i)));return a.push(c.length),{table:c,offsets:a}},e}(),WG=function(){function e(t,r,i,n,a,c){this.raw=t,this.numberOfContours=r,this.xMin=i,this.yMin=n,this.xMax=a,this.yMax=c,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),$G=function(){function e(t,r,i,n,a){var c,s;for(this.raw=t,this.xMin=r,this.yMin=i,this.xMax=n,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;s=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&s;)c.pos+=1&s?4:2,128&s?c.pos+=8:64&s?c.pos+=4:8&s&&(c.pos+=2)}return e.prototype.encode=function(){var t,r,i;for(r=new yp(NN.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),XG=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Tf(e,WA),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var n,a;for(a=[],i=0,n=this.length;i<n;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var n,a;for(a=[],i=0,n=this.length;i<n;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),n=0,a=0,c=0;c<i.length;++c)if(i[c]=n,a<r.length&&r[a]==c){++a,i[c]=n;var s=this.offsets[c],d=this.offsets[c+1]-s;d>0&&(n+=d)}for(var g=new Array(4*i.length),x=0;x<i.length;++x)g[4*x+3]=255&i[x],g[4*x+2]=(65280&i[x])>>8,g[4*x+1]=(16711680&i[x])>>16,g[4*x]=(4278190080&i[x])>>24;return g},e}(),ZG=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,i,n,a;for(r in n=this.font.cmap.tables[0].codeMap,t={},a=this.subset)i=a[r],t[r]=n[i];return t},e.prototype.glyphsFor=function(t){var r,i,n,a,c,s,d;for(n={},c=0,s=t.length;c<s;c++)n[a=t[c]]=this.font.glyf.glyphFor(a);for(a in r=[],n)(i=n[a])!=null&&i.compound&&r.push.apply(r,i.glyphIDs);if(r.length>0)for(a in d=this.glyphsFor(r))i=d[a],n[a]=i;return n},e.prototype.encode=function(t,r){var i,n,a,c,s,d,g,x,C,N,B,M,I,R,D;for(n in i=kN.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(t),B={0:0},D=i.charMap)B[(d=D[n]).old]=d.new;for(M in N=i.maxGlyphID,c)M in B||(B[M]=N++);return x=function(V){var G,Z;for(G in Z={},V)Z[V[G]]=G;return Z}(B),C=Object.keys(x).sort(function(V,G){return V-G}),I=function(){var V,G,Z;for(Z=[],V=0,G=C.length;V<G;V++)s=C[V],Z.push(x[s]);return Z}(),a=this.font.glyf.encode(c,I,B),g=this.font.loca.encode(a.offsets,I),R={cmap:this.font.cmap.raw(),glyf:a.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},e}();Fi.API.PDFObject=function(){var e;function t(){}return e=function(r,i){return(Array(i+1).join("0")+r).slice(-i)},t.convert=function(r){var i,n,a,c;if(Array.isArray(r))return"["+function(){var s,d,g;for(g=[],s=0,d=r.length;s<d;s++)i=r[s],g.push(t.convert(i));return g}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in a=["<<"],r)c=r[n],a.push("/"+n+" "+t.convert(c));return a.push(">>"),a.join(`
`)}return""+r},t}();function IN(e,t,r,i,n){i=i||{};var a=1.15,c=n.internal.scaleFactor,s=n.internal.getFontSize()/c,d=n.getLineHeightFactor?n.getLineHeightFactor():a,g=s*d,x=/\r\n|\r|\n/g,C="",N=1;if((i.valign==="middle"||i.valign==="bottom"||i.halign==="center"||i.halign==="right")&&(C=typeof e=="string"?e.split(x):e,N=C.length||1),r+=s*(2-a),i.valign==="middle"?r-=N/2*g:i.valign==="bottom"&&(r-=N*g),i.halign==="center"||i.halign==="right"){var B=s;if(i.halign==="center"&&(B*=.5),C&&N>=1){for(var M=0;M<C.length;M++)n.text(C[M],t-n.getStringUnitWidth(C[M])*B,r),r+=g;return n}t-=n.getStringUnitWidth(e)*B}return i.halign==="justify"?n.text(e,t,r,{maxWidth:i.maxWidth||100,align:"justify"}):n.text(e,t,r),n}var mE={},$m=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:mE=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var i,n,a;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var c=this.jsPDFDocument.internal.getFont(),s=c.fontStyle,d=c.fontName;if(t.font&&(d=t.font),t.fontStyle){s=t.fontStyle;var g=this.getFontList()[d];g&&g.indexOf(s)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(g[0]),s=g[0])}if(this.jsPDFDocument.setFont(d,s),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var x=e.unifyColor(t.fillColor);x&&(i=this.jsPDFDocument).setFillColor.apply(i,x),x=e.unifyColor(t.textColor),x&&(n=this.jsPDFDocument).setTextColor.apply(n,x),x=e.unifyColor(t.lineColor),x&&(a=this.jsPDFDocument).setDrawColor.apply(a,x),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,i){return this.jsPDFDocument.splitTextToSize(t,r,i)},e.prototype.rect=function(t,r,i,n,a){return this.jsPDFDocument.rect(t,r,i,n,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return mE||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),S5=function(e,t){return S5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},S5(e,t)};function LN(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");S5(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var MN=function(e){LN(t,e);function t(r){var i=e.call(this)||this;return i._element=r,i}return t}(Array);function YG(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function JG(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function L_(e,t,r){r.applyStyles(t,!0);var i=Array.isArray(e)?e:[e],n=i.map(function(a){return r.getTextWidth(a)}).reduce(function(a,c){return Math.max(a,c)},0);return n}function PN(e,t,r,i){var n=t.settings.tableLineWidth,a=t.settings.tableLineColor;e.applyStyles({lineWidth:n,lineColor:a});var c=DN(n,!1);c&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),i.y-r.y,c)}function DN(e,t){var r=e>0,i=t||t===0;return r&&i?"DF":r?"S":i?"F":null}function B2(e,t){var r,i,n,a;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(i=e.top)!==null&&i!==void 0?i:t,right:(n=e.right)!==null&&n!==void 0?n:t,bottom:(a=e.bottom)!==null&&a!==void 0?a:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function RN(e,t){var r=B2(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function eq(e,t,r,i,n){var a={},c=1.3333333333333333,s=iw(t,function(G){return n.getComputedStyle(G).backgroundColor});s!=null&&(a.fillColor=s);var d=iw(t,function(G){return n.getComputedStyle(G).color});d!=null&&(a.textColor=d);var g=rq(i,r);g&&(a.cellPadding=g);var x="borderTopColor",C=c*r,N=i.borderTopWidth;if(i.borderBottomWidth===N&&i.borderRightWidth===N&&i.borderLeftWidth===N){var B=(parseFloat(N)||0)/C;B&&(a.lineWidth=B)}else a.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/C,right:(parseFloat(i.borderRightWidth)||0)/C,bottom:(parseFloat(i.borderBottomWidth)||0)/C,left:(parseFloat(i.borderLeftWidth)||0)/C},a.lineWidth.top||(a.lineWidth.right?x="borderRightColor":a.lineWidth.bottom?x="borderBottomColor":a.lineWidth.left&&(x="borderLeftColor"));var M=iw(t,function(G){return n.getComputedStyle(G)[x]});M!=null&&(a.lineColor=M);var I=["left","right","center","justify"];I.indexOf(i.textAlign)!==-1&&(a.halign=i.textAlign),I=["middle","bottom","top"],I.indexOf(i.verticalAlign)!==-1&&(a.valign=i.verticalAlign);var R=parseInt(i.fontSize||"");isNaN(R)||(a.fontSize=R/c);var D=tq(i);D&&(a.fontStyle=D);var V=(i.fontFamily||"").toLowerCase();return e.indexOf(V)!==-1&&(a.font=V),a}function tq(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function iw(e,t){var r=UN(e,t);if(!r)return null;var i=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var n=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],a=parseInt(i[4]);return a===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function UN(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:UN(e.parentElement,t):r}function rq(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],i=96/(72/t),n=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,a=r.map(function(s){return parseInt(s||"0")/i}),c=B2(a,0);return n>c.top&&(c.top=n),n>c.bottom&&(c.bottom=n),c}function jN(e,t,r,i,n){var a,c;i===void 0&&(i=!1),n===void 0&&(n=!1);var s;typeof t=="string"?s=r.document.querySelector(t):s=t;var d=Object.keys(e.getFontList()),g=e.scaleFactor(),x=[],C=[],N=[];if(!s)return console.error("Html table could not be found with input: ",t),{head:x,body:C,foot:N};for(var B=0;B<s.rows.length;B++){var M=s.rows[B],I=(c=(a=M?.parentElement)===null||a===void 0?void 0:a.tagName)===null||c===void 0?void 0:c.toLowerCase(),R=iq(d,g,r,M,i,n);R&&(I==="thead"?x.push(R):I==="tfoot"?N.push(R):C.push(R))}return{head:x,body:C,foot:N}}function iq(e,t,r,i,n,a){for(var c=new MN(i),s=0;s<i.cells.length;s++){var d=i.cells[s],g=r.getComputedStyle(d);if(n||g.display!=="none"){var x=void 0;a&&(x=eq(e,d,t,g,r)),c.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:x,_element:d,content:nq(d)})}}var C=r.getComputedStyle(i);if(c.length>0&&(n||C.display!=="none"))return c}function nq(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function sq(e,t,r){for(var i=0,n=[e,t,r];i<n.length;i++){var a=n[i];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function ud(e,t,r,i,n){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),c=1;c<arguments.length;c++){var s=arguments[c];if(s!=null)for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(a[d]=s[d])}return a}function ON(e,t){var r=new $m(e),i=r.getDocumentOptions(),n=r.getGlobalOptions();sq(n,i,t);var a=ud({},n,i,t),c;typeof window<"u"&&(c=window);var s=aq(n,i,t),d=oq(n,i,t),g=lq(r,a),x=uq(r,a,c);return{id:t.tableId,content:x,hooks:d,styles:s,settings:g}}function aq(e,t,r){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(d){if(d==="columnStyles"){var g=e[d],x=t[d],C=r[d];i.columnStyles=ud({},g,x,C)}else{var N=[e,t,r],B=N.map(function(M){return M[d]||{}});i[d]=ud({},B[0],B[1],B[2])}},a=0,c=Object.keys(i);a<c.length;a++){var s=c[a];n(s)}return i}function oq(e,t,r){for(var i=[e,t,r],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,c=i;a<c.length;a++){var s=c[a];s.didParseCell&&n.didParseCell.push(s.didParseCell),s.willDrawCell&&n.willDrawCell.push(s.willDrawCell),s.didDrawCell&&n.didDrawCell.push(s.didDrawCell),s.willDrawPage&&n.willDrawPage.push(s.willDrawPage),s.didDrawPage&&n.didDrawPage.push(s.didDrawPage)}return n}function lq(e,t){var r,i,n,a,c,s,d,g,x,C,N,B,M=B2(t.margin,40/e.scaleFactor()),I=(r=cq(e,t.startY))!==null&&r!==void 0?r:M.top,R;t.showFoot===!0?R="everyPage":t.showFoot===!1?R="never":R=(i=t.showFoot)!==null&&i!==void 0?i:"everyPage";var D;t.showHead===!0?D="everyPage":t.showHead===!1?D="never":D=(n=t.showHead)!==null&&n!==void 0?n:"everyPage";var V=(a=t.useCss)!==null&&a!==void 0?a:!1,G=t.theme||(V?"plain":"striped"),Z=!!t.horizontalPageBreak,X=(c=t.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(s=t.includeHiddenHtml)!==null&&s!==void 0?s:!1,useCss:V,theme:G,startY:I,margin:M,pageBreak:(d=t.pageBreak)!==null&&d!==void 0?d:"auto",rowPageBreak:(g=t.rowPageBreak)!==null&&g!==void 0?g:"auto",tableWidth:(x=t.tableWidth)!==null&&x!==void 0?x:"auto",showHead:D,showFoot:R,tableLineWidth:(C=t.tableLineWidth)!==null&&C!==void 0?C:0,tableLineColor:(N=t.tableLineColor)!==null&&N!==void 0?N:200,horizontalPageBreak:Z,horizontalPageBreakRepeat:X,horizontalPageBreakBehaviour:(B=t.horizontalPageBreakBehaviour)!==null&&B!==void 0?B:"afterAllRows"}}function cq(e,t){var r=e.getLastAutoTable(),i=e.scaleFactor(),n=e.pageNumber(),a=!1;if(r&&r.startPageNumber){var c=r.startPageNumber+r.pageNumber-1;a=c===n}return typeof t=="number"?t:(t==null||t===!1)&&a&&r?.finalY!=null?r.finalY+20/i:null}function uq(e,t,r){var i=t.head||[],n=t.body||[],a=t.foot||[];if(t.html){var c=t.includeHiddenHtml;if(r){var s=jN(e,t.html,r,c,t.useCss)||{};i=s.head||i,n=s.body||i,a=s.foot||i}else console.error("Cannot parse html in non browser environment")}var d=t.columns||hq(i,n,a);return{columns:d,head:i,body:n,foot:a}}function hq(e,t,r){var i=e[0]||t[0]||r[0]||[],n=[];return Object.keys(i).filter(function(a){return a!=="_element"}).forEach(function(a){var c=1,s;Array.isArray(i)?s=i[parseInt(a)]:s=i[a],typeof s=="object"&&!Array.isArray(s)&&(c=s?.colSpan||1);for(var d=0;d<c;d++){var g=void 0;Array.isArray(i)?g=n.length:g=a+(d>0?"_".concat(d):"");var x={dataKey:g};n.push(x)}}),n}var E5=function(){function e(t,r,i){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=i,this.doc=t.getDocument()}return e}(),Aq=function(e){LN(t,e);function t(r,i,n,a,c,s){var d=e.call(this,r,i,s)||this;return d.cell=n,d.row=a,d.column=c,d.section=a.section,d}return t}(E5),fq=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,i){return r+i.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,i){return r+i.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,i,n,a,c){for(var s=0,d=r;s<d.length;s++){var g=d[s],x=new Aq(t,this,i,n,a,c),C=g(x)===!1;if(i.text=Array.isArray(i.text)?i.text:[i.text],C)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var i=0,n=this.hooks.didDrawPage;i<n.length;i++){var a=n[i];a(new E5(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var i=0,n=this.hooks.willDrawPage;i<n.length;i++){var a=n[i];a(new E5(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(n,a){return n+a.wrappedWidth},0);return r}else{var i=this.settings.margin;return t-i.left-i.right}},e}(),QN=function(){function e(t,r,i,n,a){a===void 0&&(a=!1),this.height=0,this.raw=t,t instanceof MN&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=i,this.cells=n,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(i,n){var a;return Math.max(i,((a=r.cells[n.index])===null||a===void 0?void 0:a.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(i){var n=r.cells[i.index];return n?n.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var i=this;return t.reduce(function(n,a){var c=i.cells[a.index];if(!c)return 0;var s=r.getLineHeight(c.styles.fontSize),d=c.padding("vertical"),g=d+s;return g>n?g:n},0)},e}(),zN=function(){function e(t,r,i){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=i,this.raw=t;var a=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,a=(n=t.content)!==null&&n!==void 0?n:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var c=a!=null?""+a:"",s=/\r\n|\r|\n/g;this.text=c.split(s)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var i;if(this.styles.halign==="right")i=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");i=this.x+n/2+this.padding("left")}else i=this.x+this.padding("left");return{x:i,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var i=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/t*r,a=i*n+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=B2(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),dq=function(){function e(t,r,i){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=i}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,i=0,n=t.allRows();i<n.length;i++){var a=n[i],c=a.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(r=Math.max(r,c.styles.cellWidth))}return r},e}();function pq(e,t){mq(e,t);var r=[],i=0;t.columns.forEach(function(a){var c=a.getMaxCustomCellWidth(t);c?a.width=c:(a.width=a.wrappedWidth,r.push(a)),i+=a.width});var n=t.getWidth(e.pageSize().width)-i;n&&(n=T5(r,n,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),n&&(n=T5(r,n,function(a){return a.minWidth})),n=Math.abs(n),!t.settings.horizontalPageBreak&&n>.1/e.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),vq(t),xq(t,e),gq(t)}function mq(e,t){var r=e.scaleFactor(),i=t.settings.horizontalPageBreak,n=RN(e,t);t.allRows().forEach(function(a){for(var c=0,s=t.columns;c<s.length;c++){var d=s[c],g=a.cells[d.index];if(g){var x=t.hooks.didParseCell;t.callCellHooks(e,x,g,a,d,null);var C=g.padding("horizontal");g.contentWidth=L_(g.text,g.styles,e)+C;var N=L_(g.text.join(" ").split(/[^\S\u00A0]+/),g.styles,e);if(g.minReadableWidth=N+g.padding("horizontal"),typeof g.styles.cellWidth=="number")g.minWidth=g.styles.cellWidth,g.wrappedWidth=g.styles.cellWidth;else if(g.styles.cellWidth==="wrap"||i===!0)g.contentWidth>n?(g.minWidth=n,g.wrappedWidth=n):(g.minWidth=g.contentWidth,g.wrappedWidth=g.contentWidth);else{var B=10/r;g.minWidth=g.styles.minCellWidth||B,g.wrappedWidth=g.contentWidth,g.minWidth>g.wrappedWidth&&(g.wrappedWidth=g.minWidth)}}}}),t.allRows().forEach(function(a){for(var c=0,s=t.columns;c<s.length;c++){var d=s[c],g=a.cells[d.index];if(g&&g.colSpan===1)d.wrappedWidth=Math.max(d.wrappedWidth,g.wrappedWidth),d.minWidth=Math.max(d.minWidth,g.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,g.minReadableWidth);else{var x=t.styles.columnStyles[d.dataKey]||t.styles.columnStyles[d.index]||{},C=x.cellWidth||x.minCellWidth;C&&typeof C=="number"&&(d.minWidth=C,d.wrappedWidth=C)}g&&(g.colSpan>1&&!d.minWidth&&(d.minWidth=g.minWidth),g.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=g.minWidth))}})}function T5(e,t,r){for(var i=t,n=e.reduce(function(B,M){return B+M.wrappedWidth},0),a=0;a<e.length;a++){var c=e[a],s=c.wrappedWidth/n,d=i*s,g=c.width+d,x=r(c),C=g<x?x:g;t-=C-c.width,c.width=C}if(t=Math.round(t*1e10)/1e10,t){var N=e.filter(function(B){return t<0?B.width>r(B):!0});N.length&&(t=T5(N,t,r))}return t}function gq(e){for(var t={},r=1,i=e.allRows(),n=0;n<i.length;n++)for(var a=i[n],c=0,s=e.columns;c<s.length;c++){var d=s[c],g=t[d.index];if(r>1)r--,delete a.cells[d.index];else if(g)g.cell.height+=a.height,r=g.cell.colSpan,delete a.cells[d.index],g.left--,g.left<=1&&delete t[d.index];else{var x=a.cells[d.index];if(!x)continue;if(x.height=a.height,x.rowSpan>1){var C=i.length-n,N=x.rowSpan>C?C:x.rowSpan;t[d.index]={cell:x,left:N,row:a}}}}}function vq(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var i=t[r],n=null,a=0,c=0,s=0;s<e.columns.length;s++){var d=e.columns[s];if(c-=1,c>1&&e.columns[s+1])a+=d.width,delete i.cells[d.index];else if(n){var g=n;delete i.cells[d.index],n=null,g.width=d.width+a}else{var g=i.cells[d.index];if(!g)continue;if(c=g.colSpan,a=0,g.colSpan>1){n=g,a+=d.width;continue}g.width=d.width+a}}}function xq(e,t){for(var r={count:0,height:0},i=0,n=e.allRows();i<n.length;i++){for(var a=n[i],c=0,s=e.columns;c<s.length;c++){var d=s[c],g=a.cells[d.index];if(g){t.applyStyles(g.styles,!0);var x=g.width-g.padding("horizontal");if(g.styles.overflow==="linebreak")g.text=t.splitTextToSize(g.text,x+1/t.scaleFactor(),{fontSize:g.styles.fontSize});else if(g.styles.overflow==="ellipsize")g.text=gE(g.text,x,g.styles,t,"...");else if(g.styles.overflow==="hidden")g.text=gE(g.text,x,g.styles,t,"");else if(typeof g.styles.overflow=="function"){var C=g.styles.overflow(g.text,x);typeof C=="string"?g.text=[C]:g.text=C}g.contentHeight=g.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var N=g.contentHeight/g.rowSpan;g.rowSpan>1&&r.count*r.height<N*g.rowSpan?r={height:N,count:g.rowSpan}:r&&r.count>0&&r.height>N&&(N=r.height),N>a.height&&(a.height=N)}}r.count--}}function gE(e,t,r,i,n){return e.map(function(a){return yq(a,t,r,i,n)})}function yq(e,t,r,i,n){var a=1e4*i.scaleFactor();if(t=Math.ceil(t*a)/a,t>=L_(e,r,i))return e;for(;t<L_(e+n,r,i)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+n}function HN(e,t){var r=new $m(e),i=_q(t,r.scaleFactor()),n=new fq(t,i);return pq(r,n),r.applyStyles(r.userStyles),n}function _q(e,t){var r=e.content,i=wq(r.columns);if(r.head.length===0){var n=vE(i,"head");n&&r.head.push(n)}if(r.foot.length===0){var n=vE(i,"foot");n&&r.foot.push(n)}var a=e.settings.theme,c=e.styles;return{columns:i,head:nw("head",r.head,i,c,a,t),body:nw("body",r.body,i,c,a,t),foot:nw("foot",r.foot,i,c,a,t)}}function nw(e,t,r,i,n,a){var c={},s=t.map(function(d,g){for(var x=0,C={},N=0,B=0,M=0,I=r;M<I.length;M++){var R=I[M];if(c[R.index]==null||c[R.index].left===0)if(B===0){var D=void 0;Array.isArray(d)?D=d[R.index-N-x]:D=d[R.dataKey];var V={};typeof D=="object"&&!Array.isArray(D)&&(V=D?.styles||{});var G=Bq(e,R,g,n,i,a,V),Z=new zN(D,G,e);C[R.dataKey]=Z,C[R.index]=Z,B=Z.colSpan-1,c[R.index]={left:Z.rowSpan-1,times:B}}else B--,N++;else c[R.index].left--,B=c[R.index].times,x++}return new QN(d,g,e,C)});return s}function vE(e,t){var r={};return e.forEach(function(i){if(i.raw!=null){var n=bq(t,i.raw);n!=null&&(r[i.dataKey]=n)}}),Object.keys(r).length>0?r:null}function bq(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function wq(e){return e.map(function(t,r){var i,n;return typeof t=="object"?n=(i=t.dataKey)!==null&&i!==void 0?i:r:n=r,new dq(n,t,r)})}function Bq(e,t,r,i,n,a,c){var s=JG(i),d;e==="head"?d=n.headStyles:e==="body"?d=n.bodyStyles:e==="foot"&&(d=n.footStyles);var g=ud({},s.table,s[e],n.styles,d),x=n.columnStyles[t.dataKey]||n.columnStyles[t.index]||{},C=e==="body"?x:{},N=e==="body"&&r%2===0?ud({},s.alternateRow,n.alternateRowStyles):{},B=YG(a),M=ud({},B,g,N,C);return ud(M,c)}function Cq(e,t,r){var i;r===void 0&&(r={});var n=RN(e,t),a=new Map,c=[],s=[],d=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?d=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(d=[t.settings.horizontalPageBreakRepeat]),d.forEach(function(N){var B=t.columns.find(function(M){return M.dataKey===N||M.index===N});B&&!a.has(B.index)&&(a.set(B.index,!0),c.push(B.index),s.push(t.columns[B.index]),n-=B.wrappedWidth)});for(var g=!0,x=(i=r?.start)!==null&&i!==void 0?i:0;x<t.columns.length;){if(a.has(x)){x++;continue}var C=t.columns[x].wrappedWidth;if(g||n>=C)g=!1,c.push(x),s.push(t.columns[x]),n-=C;else break;x++}return{colIndexes:c,columns:s,lastIndex:x-1}}function Sq(e,t){for(var r=[],i=0;i<t.columns.length;i++){var n=Cq(e,t,{start:i});n.columns.length&&(r.push(n),i=n.lastIndex)}return r}function VN(e,t){var r=t.settings,i=r.startY,n=r.margin,a={x:n.left,y:i},c=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),s=i+n.bottom+c;if(r.pageBreak==="avoid"){var d=t.body,g=d.reduce(function(N,B){return N+B.height},0);s+=g}var x=new $m(e);(r.pageBreak==="always"||r.startY!=null&&s>x.pageSize().height)&&(qN(x),a.y=n.top),t.callWillDrawPageHooks(x,a);var C=ud({},a);t.startPageNumber=x.pageNumber(),r.horizontalPageBreak?Eq(x,t,C,a):(x.applyStyles(x.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(N){return xd(x,t,N,a,t.columns)}),x.applyStyles(x.userStyles),t.body.forEach(function(N,B){var M=B===t.body.length-1;M_(x,t,N,M,C,a,t.columns)}),x.applyStyles(x.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(N){return xd(x,t,N,a,t.columns)})),PN(x,t,C,a),t.callEndPageHooks(x,a),t.finalY=a.y,e.lastAutoTable=t,x.applyStyles(x.userStyles)}function Eq(e,t,r,i){var n=Sq(e,t),a=t.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(g,x){e.applyStyles(e.userStyles),x>0?$1(e,t,r,i,g.columns,!0):xE(e,t,i,g.columns),Tq(e,t,r,i,g.columns),sw(e,t,i,g.columns)});else for(var c=-1,s=n[0],d=function(){var g=c;if(s){e.applyStyles(e.userStyles);var x=s.columns;c>=0?$1(e,t,r,i,x,!0):xE(e,t,i,x),g=yE(e,t,c+1,i,x),sw(e,t,i,x)}var C=g-c;n.slice(1).forEach(function(N){e.applyStyles(e.userStyles),$1(e,t,r,i,N.columns,!0),yE(e,t,c+1,i,N.columns,C),sw(e,t,i,N.columns)}),c=g};c<t.body.length-1;)d()}function xE(e,t,r,i){var n=t.settings;e.applyStyles(e.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(a){return xd(e,t,a,r,i)})}function Tq(e,t,r,i,n){e.applyStyles(e.userStyles),t.body.forEach(function(a,c){var s=c===t.body.length-1;M_(e,t,a,s,r,i,n)})}function yE(e,t,r,i,n,a){e.applyStyles(e.userStyles),a=a??t.body.length;var c=Math.min(r+a,t.body.length),s=-1;return t.body.slice(r,c).forEach(function(d,g){var x=r+g===t.body.length-1,C=GN(e,t,x,i);d.canEntireRowFit(C,n)&&(xd(e,t,d,i,n),s=r+g)}),s}function sw(e,t,r,i){var n=t.settings;e.applyStyles(e.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(a){return xd(e,t,a,r,i)})}function Fq(e,t,r){var i=r.getLineHeight(e.styles.fontSize),n=e.padding("vertical"),a=Math.floor((t-n)/i);return Math.max(0,a)}function kq(e,t,r,i){var n={};e.spansMultiplePages=!0,e.height=0;for(var a=0,c=0,s=r.columns;c<s.length;c++){var d=s[c],g=e.cells[d.index];if(g){Array.isArray(g.text)||(g.text=[g.text]);var x=new zN(g.raw,g.styles,g.section);x=ud(x,g),x.text=[];var C=Fq(g,t,i);g.text.length>C&&(x.text=g.text.splice(C,g.text.length));var N=i.scaleFactor(),B=i.getLineHeightFactor();g.contentHeight=g.getContentHeight(N,B),g.contentHeight>=t&&(g.contentHeight=t,x.styles.minCellHeight-=t),g.contentHeight>e.height&&(e.height=g.contentHeight),x.contentHeight=x.getContentHeight(N,B),x.contentHeight>a&&(a=x.contentHeight),n[d.index]=x}}var M=new QN(e.raw,-1,e.section,n,!0);M.height=a;for(var I=0,R=r.columns;I<R.length;I++){var d=R[I],x=M.cells[d.index];x&&(x.height=M.height);var g=e.cells[d.index];g&&(g.height=e.height)}return M}function Nq(e,t,r,i){var n=e.pageSize().height,a=i.settings.margin,c=a.top+a.bottom,s=n-c;t.section==="body"&&(s-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var d=t.getMinimumRowHeight(i.columns,e),g=d<r;if(d>s)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!g)return!1;var x=t.hasRowSpan(i.columns),C=t.getMaxCellHeight(i.columns)>s;return C?(x&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(x||i.settings.rowPageBreak==="avoid")}function M_(e,t,r,i,n,a,c){var s=GN(e,t,i,a);if(r.canEntireRowFit(s,c))xd(e,t,r,a,c);else if(Nq(e,r,s,t)){var d=kq(r,s,t,e);xd(e,t,r,a,c),$1(e,t,n,a,c),M_(e,t,d,i,n,a,c)}else $1(e,t,n,a,c),M_(e,t,r,i,n,a,c)}function xd(e,t,r,i,n){i.x=t.settings.margin.left;for(var a=0,c=n;a<c.length;a++){var s=c[a],d=r.cells[s.index];if(!d){i.x+=s.width;continue}e.applyStyles(d.styles),d.x=i.x,d.y=i.y;var g=t.callCellHooks(e,t.hooks.willDrawCell,d,r,s,i);if(g===!1){i.x+=s.width;continue}Iq(e,d,i);var x=d.getTextPos();IN(d.text,x.x,x.y,{halign:d.styles.halign,valign:d.styles.valign,maxWidth:Math.ceil(d.width-d.padding("left")-d.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,d,r,s,i),i.x+=s.width}i.y+=r.height}function Iq(e,t,r){var i=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof i.lineWidth=="number"){var n=DN(i.lineWidth,i.fillColor);n&&e.rect(t.x,r.y,t.width,t.height,n)}else typeof i.lineWidth=="object"&&(i.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),Lq(e,t,r,i.lineWidth))}function Lq(e,t,r,i){var n,a,c,s;i.top&&(n=r.x,a=r.y,c=r.x+t.width,s=r.y,i.right&&(c+=.5*i.right),i.left&&(n-=.5*i.left),d(i.top,n,a,c,s)),i.bottom&&(n=r.x,a=r.y+t.height,c=r.x+t.width,s=r.y+t.height,i.right&&(c+=.5*i.right),i.left&&(n-=.5*i.left),d(i.bottom,n,a,c,s)),i.left&&(n=r.x,a=r.y,c=r.x,s=r.y+t.height,i.top&&(a-=.5*i.top),i.bottom&&(s+=.5*i.bottom),d(i.left,n,a,c,s)),i.right&&(n=r.x+t.width,a=r.y,c=r.x+t.width,s=r.y+t.height,i.top&&(a-=.5*i.top),i.bottom&&(s+=.5*i.bottom),d(i.right,n,a,c,s));function d(g,x,C,N,B){e.getDocument().setLineWidth(g),e.getDocument().line(x,C,N,B,"S")}}function GN(e,t,r,i){var n=t.settings.margin.bottom,a=t.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(n+=t.getFootHeight(t.columns)),e.pageSize().height-i.y-n}function $1(e,t,r,i,n,a){n===void 0&&(n=[]),a===void 0&&(a=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!a&&t.foot.forEach(function(s){return xd(e,t,s,i,n)}),t.callEndPageHooks(e,i);var c=t.settings.margin;PN(e,t,r,i),qN(e),t.pageNumber++,i.x=c.left,i.y=c.top,r.y=c.top,t.callWillDrawPageHooks(e,i),t.settings.showHead==="everyPage"&&(t.head.forEach(function(s){return xd(e,t,s,i,n)}),e.applyStyles(e.userStyles))}function qN(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function Mq(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t[0],n=ON(this,i),a=HN(this,n);return VN(this,a),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,i,n){IN(t,r,i,n,this)},e.API.autoTableSetDefaults=function(t){return $m.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){$m.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var i;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new $m(this),a=jN(n,t,window,r,!1),c=a.head,s=a.body,d=((i=c[0])===null||i===void 0?void 0:i.map(function(g){return g.content}))||[];return{columns:d,rows:s,data:s}}}var aw;function _1(e,t){var r=ON(e,t),i=HN(e,r);VN(e,i)}try{if(typeof window<"u"&&window){var _E=window,bE=_E.jsPDF||((aw=_E.jspdf)===null||aw===void 0?void 0:aw.jsPDF);bE&&Mq(bE)}}catch(e){console.error("Could not apply autoTable plugin",e)}var F5=function(e,t){return F5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},F5(e,t)};function $A(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");F5(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var k5=function(){return k5=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},k5.apply(this,arguments)};function yu(e,t,r,i){function n(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function s(x){try{g(i.next(x))}catch(C){c(C)}}function d(x){try{g(i.throw(x))}catch(C){c(C)}}function g(x){x.done?a(x.value):n(x.value).then(s,d)}g((i=i.apply(e,[])).next())})}function Vc(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(g){return function(x){return d([g,x])}}function d(g){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(a=g[0]&2?n.return:g[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,g[1])).done)return a;switch(n=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,n=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){r.label=g[1];break}if(g[0]===6&&r.label<a[1]){r.label=a[1],a=g;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(g);break}a[2]&&r.ops.pop(),r.trys.pop();continue}g=t.call(e,r)}catch(x){g=[6,x],n=0}finally{i=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function my(e,t,r){if(arguments.length===2)for(var i=0,n=t.length,a;i<n;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||t)}var yd=function(){function e(t,r,i,n){this.left=t,this.top=r,this.width=i,this.height=n}return e.prototype.add=function(t,r,i,n){return new e(this.left+t,this.top+r,this.width+i,this.height+n)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var i=Array.from(r).find(function(n){return n.width!==0});return i?new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),C2=function(e,t){return yd.fromClientRect(e,t.getBoundingClientRect())},Pq=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var i=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),n=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new yd(0,0,i,n)},S2=function(e){for(var t=[],r=0,i=e.length;r<i;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){var a=e.charCodeAt(r++);(a&64512)===56320?t.push(((n&1023)<<10)+(a&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},Bo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var i=[],n=-1,a="";++n<r;){var c=e[n];c<=65535?i.push(c):(c-=65536,i.push((c>>10)+55296,c%1024+56320)),(n+1===r||i.length>16384)&&(a+=String.fromCharCode.apply(String,i),i.length=0)}return a},wE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dq=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gy=0;gy<wE.length;gy++)Dq[wE.charCodeAt(gy)]=gy;var BE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vy=0;vy<BE.length;vy++)I1[BE.charCodeAt(vy)]=vy;var Rq=function(e){var t=e.length*.75,r=e.length,i,n=0,a,c,s,d;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),x=Array.isArray(g)?g:new Uint8Array(g);for(i=0;i<r;i+=4)a=I1[e.charCodeAt(i)],c=I1[e.charCodeAt(i+1)],s=I1[e.charCodeAt(i+2)],d=I1[e.charCodeAt(i+3)],x[n++]=a<<2|c>>4,x[n++]=(c&15)<<4|s>>2,x[n++]=(s&3)<<6|d&63;return g},Uq=function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r.push(e[i+1]<<8|e[i]);return r},jq=function(e){for(var t=e.length,r=[],i=0;i<t;i+=4)r.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return r},f0=5,nB=11,ow=2,Oq=nB-f0,KN=65536>>f0,Qq=1<<f0,lw=Qq-1,zq=1024>>f0,Hq=KN+zq,Vq=Hq,Gq=32,qq=Vq+Gq,Kq=65536>>nB,Wq=1<<Oq,$q=Wq-1,CE=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Xq=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Zq=function(e,t){var r=Rq(e),i=Array.isArray(r)?jq(r):new Uint32Array(r),n=Array.isArray(r)?Uq(r):new Uint16Array(r),a=24,c=CE(n,a/2,i[4]/2),s=i[5]===2?CE(n,(a+i[4])/2):Xq(i,Math.ceil((a+i[4])/4));return new Yq(i[0],i[1],i[2],i[3],c,s)},Yq=function(){function e(t,r,i,n,a,c){this.initialValue=t,this.errorValue=r,this.highStart=i,this.highValueIndex=n,this.index=a,this.data=c}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>f0],r=(r<<ow)+(t&lw),this.data[r];if(t<=65535)return r=this.index[KN+(t-55296>>f0)],r=(r<<ow)+(t&lw),this.data[r];if(t<this.highStart)return r=qq-Kq+(t>>nB),r=this.index[r],r+=t>>f0&$q,r=this.index[r],r=(r<<ow)+(t&lw),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),SE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jq=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xy=0;xy<SE.length;xy++)Jq[SE.charCodeAt(xy)]=xy;var eK="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",EE=50,tK=1,WN=2,$N=3,rK=4,iK=5,TE=7,XN=8,FE=9,cp=10,N5=11,kE=12,I5=13,nK=14,L1=15,L5=16,yy=17,b1=18,sK=19,NE=20,M5=21,w1=22,cw=23,Cm=24,Ch=25,M1=26,P1=27,Sm=28,aK=29,i0=30,oK=31,_y=32,by=33,P5=34,D5=35,R5=36,wv=37,U5=38,f_=39,d_=40,uw=41,ZN=42,lK=43,cK=[9001,65288],YN="!",Un="",wy="",j5=Zq(eK),td=[i0,R5],O5=[tK,WN,$N,iK],JN=[cp,XN],IE=[P1,M1],uK=O5.concat(JN),LE=[U5,f_,d_,P5,D5],hK=[L1,I5],AK=function(e,t){t===void 0&&(t="strict");var r=[],i=[],n=[];return e.forEach(function(a,c){var s=j5.get(a);if(s>EE?(n.push(!0),s-=EE):n.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return i.push(c),r.push(L5);if(s===rK||s===N5){if(c===0)return i.push(c),r.push(i0);var d=r[c-1];return uK.indexOf(d)===-1?(i.push(i[c-1]),r.push(d)):(i.push(c),r.push(i0))}if(i.push(c),s===oK)return r.push(t==="strict"?M5:wv);if(s===ZN||s===aK)return r.push(i0);if(s===lK)return a>=131072&&a<=196605||a>=196608&&a<=262141?r.push(wv):r.push(i0);r.push(s)}),[i,r,n]},hw=function(e,t,r,i){var n=i[r];if(Array.isArray(e)?e.indexOf(n)!==-1:e===n)for(var a=r;a<=i.length;){a++;var c=i[a];if(c===t)return!0;if(c!==cp)break}if(n===cp)for(var a=r;a>0;){a--;var s=i[a];if(Array.isArray(e)?e.indexOf(s)!==-1:e===s)for(var d=r;d<=i.length;){d++;var c=i[d];if(c===t)return!0;if(c!==cp)break}if(s!==cp)break}return!1},ME=function(e,t){for(var r=e;r>=0;){var i=t[r];if(i===cp)r--;else return i}return 0},fK=function(e,t,r,i,n){if(r[i]===0)return Un;var a=i-1;if(Array.isArray(n)&&n[a]===!0)return Un;var c=a-1,s=a+1,d=t[a],g=c>=0?t[c]:0,x=t[s];if(d===WN&&x===$N)return Un;if(O5.indexOf(d)!==-1)return YN;if(O5.indexOf(x)!==-1||JN.indexOf(x)!==-1)return Un;if(ME(a,t)===XN)return wy;if(j5.get(e[a])===N5||(d===_y||d===by)&&j5.get(e[s])===N5||d===TE||x===TE||d===FE||[cp,I5,L1].indexOf(d)===-1&&x===FE||[yy,b1,sK,Cm,Sm].indexOf(x)!==-1||ME(a,t)===w1||hw(cw,w1,a,t)||hw([yy,b1],M5,a,t)||hw(kE,kE,a,t))return Un;if(d===cp)return wy;if(d===cw||x===cw)return Un;if(x===L5||d===L5)return wy;if([I5,L1,M5].indexOf(x)!==-1||d===nK||g===R5&&hK.indexOf(d)!==-1||d===Sm&&x===R5||x===NE||td.indexOf(x)!==-1&&d===Ch||td.indexOf(d)!==-1&&x===Ch||d===P1&&[wv,_y,by].indexOf(x)!==-1||[wv,_y,by].indexOf(d)!==-1&&x===M1||td.indexOf(d)!==-1&&IE.indexOf(x)!==-1||IE.indexOf(d)!==-1&&td.indexOf(x)!==-1||[P1,M1].indexOf(d)!==-1&&(x===Ch||[w1,L1].indexOf(x)!==-1&&t[s+1]===Ch)||[w1,L1].indexOf(d)!==-1&&x===Ch||d===Ch&&[Ch,Sm,Cm].indexOf(x)!==-1)return Un;if([Ch,Sm,Cm,yy,b1].indexOf(x)!==-1)for(var C=a;C>=0;){var N=t[C];if(N===Ch)return Un;if([Sm,Cm].indexOf(N)!==-1)C--;else break}if([P1,M1].indexOf(x)!==-1)for(var C=[yy,b1].indexOf(d)!==-1?c:a;C>=0;){var N=t[C];if(N===Ch)return Un;if([Sm,Cm].indexOf(N)!==-1)C--;else break}if(U5===d&&[U5,f_,P5,D5].indexOf(x)!==-1||[f_,P5].indexOf(d)!==-1&&[f_,d_].indexOf(x)!==-1||[d_,D5].indexOf(d)!==-1&&x===d_||LE.indexOf(d)!==-1&&[NE,M1].indexOf(x)!==-1||LE.indexOf(x)!==-1&&d===P1||td.indexOf(d)!==-1&&td.indexOf(x)!==-1||d===Cm&&td.indexOf(x)!==-1||td.concat(Ch).indexOf(d)!==-1&&x===w1&&cK.indexOf(e[s])===-1||td.concat(Ch).indexOf(x)!==-1&&d===b1)return Un;if(d===uw&&x===uw){for(var B=r[a],M=1;B>0&&(B--,t[B]===uw);)M++;if(M%2!==0)return Un}return d===_y&&x===by?Un:wy},dK=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=AK(e,t.lineBreak),i=r[0],n=r[1],a=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(n=n.map(function(s){return[Ch,i0,ZN].indexOf(s)!==-1?wv:s}));var c=t.wordBreak==="keep-all"?a.map(function(s,d){return s&&e[d]>=19968&&e[d]<=40959}):void 0;return[i,n,c]},pK=function(){function e(t,r,i,n){this.codePoints=t,this.required=r===YN,this.start=i,this.end=n}return e.prototype.slice=function(){return Bo.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),mK=function(e,t){var r=S2(e),i=dK(r,t),n=i[0],a=i[1],c=i[2],s=r.length,d=0,g=0;return{next:function(){if(g>=s)return{done:!0,value:null};for(var x=Un;g<s&&(x=fK(r,a,n,++g,c))===Un;);if(x!==Un||g===s){var C=new pK(r,x,d,g);return d=g,{value:C,done:!1}}return{done:!0,value:null}}}},gK=1,vK=2,Kv=4,PE=8,P_=10,DE=47,X1=92,xK=9,yK=32,By=34,B1=61,_K=35,bK=36,wK=37,Cy=39,Sy=40,C1=41,BK=95,th=45,CK=33,SK=60,EK=62,TK=64,FK=91,kK=93,NK=61,IK=123,Ey=63,LK=125,RE=124,MK=126,PK=128,UE=65533,Aw=42,o0=43,DK=44,RK=58,UK=59,Bv=46,jK=0,OK=8,QK=11,zK=14,HK=31,VK=127,mf=-1,e8=48,t8=97,r8=101,GK=102,qK=117,KK=122,i8=65,n8=69,s8=70,WK=85,$K=90,qc=function(e){return e>=e8&&e<=57},XK=function(e){return e>=55296&&e<=57343},Em=function(e){return qc(e)||e>=i8&&e<=s8||e>=t8&&e<=GK},ZK=function(e){return e>=t8&&e<=KK},YK=function(e){return e>=i8&&e<=$K},JK=function(e){return ZK(e)||YK(e)},eW=function(e){return e>=PK},Ty=function(e){return e===P_||e===xK||e===yK},D_=function(e){return JK(e)||eW(e)||e===BK},jE=function(e){return D_(e)||qc(e)||e===th},tW=function(e){return e>=jK&&e<=OK||e===QK||e>=zK&&e<=HK||e===VK},ip=function(e,t){return e!==X1?!1:t!==P_},Fy=function(e,t,r){return e===th?D_(t)||ip(t,r):D_(e)?!0:!!(e===X1&&ip(e,t))},fw=function(e,t,r){return e===o0||e===th?qc(t)?!0:t===Bv&&qc(r):qc(e===Bv?t:e)},rW=function(e){var t=0,r=1;(e[t]===o0||e[t]===th)&&(e[t]===th&&(r=-1),t++);for(var i=[];qc(e[t]);)i.push(e[t++]);var n=i.length?parseInt(Bo.apply(void 0,i),10):0;e[t]===Bv&&t++;for(var a=[];qc(e[t]);)a.push(e[t++]);var c=a.length,s=c?parseInt(Bo.apply(void 0,a),10):0;(e[t]===n8||e[t]===r8)&&t++;var d=1;(e[t]===o0||e[t]===th)&&(e[t]===th&&(d=-1),t++);for(var g=[];qc(e[t]);)g.push(e[t++]);var x=g.length?parseInt(Bo.apply(void 0,g),10):0;return r*(n+s*Math.pow(10,-c))*Math.pow(10,d*x)},iW={type:2},nW={type:3},sW={type:4},aW={type:13},oW={type:8},lW={type:21},cW={type:9},uW={type:10},hW={type:11},AW={type:12},fW={type:14},ky={type:23},dW={type:1},pW={type:25},mW={type:24},gW={type:26},vW={type:27},xW={type:28},yW={type:29},_W={type:31},Q5={type:32},a8=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(S2(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==Q5;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case By:return this.consumeStringToken(By);case _K:var r=this.peekCodePoint(0),i=this.peekCodePoint(1),n=this.peekCodePoint(2);if(jE(r)||ip(i,n)){var a=Fy(r,i,n)?vK:gK,c=this.consumeName();return{type:5,value:c,flags:a}}break;case bK:if(this.peekCodePoint(0)===B1)return this.consumeCodePoint(),aW;break;case Cy:return this.consumeStringToken(Cy);case Sy:return iW;case C1:return nW;case Aw:if(this.peekCodePoint(0)===B1)return this.consumeCodePoint(),fW;break;case o0:if(fw(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case DK:return sW;case th:var s=t,d=this.peekCodePoint(0),g=this.peekCodePoint(1);if(fw(s,d,g))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Fy(s,d,g))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(d===th&&g===EK)return this.consumeCodePoint(),this.consumeCodePoint(),mW;break;case Bv:if(fw(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case DE:if(this.peekCodePoint(0)===Aw)for(this.consumeCodePoint();;){var x=this.consumeCodePoint();if(x===Aw&&(x=this.consumeCodePoint(),x===DE))return this.consumeToken();if(x===mf)return this.consumeToken()}break;case RK:return gW;case UK:return vW;case SK:if(this.peekCodePoint(0)===CK&&this.peekCodePoint(1)===th&&this.peekCodePoint(2)===th)return this.consumeCodePoint(),this.consumeCodePoint(),pW;break;case TK:var C=this.peekCodePoint(0),N=this.peekCodePoint(1),B=this.peekCodePoint(2);if(Fy(C,N,B)){var c=this.consumeName();return{type:7,value:c}}break;case FK:return xW;case X1:if(ip(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case kK:return yW;case NK:if(this.peekCodePoint(0)===B1)return this.consumeCodePoint(),oW;break;case IK:return hW;case LK:return AW;case qK:case WK:var M=this.peekCodePoint(0),I=this.peekCodePoint(1);return M===o0&&(Em(I)||I===Ey)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case RE:if(this.peekCodePoint(0)===B1)return this.consumeCodePoint(),cW;if(this.peekCodePoint(0)===RE)return this.consumeCodePoint(),lW;break;case MK:if(this.peekCodePoint(0)===B1)return this.consumeCodePoint(),uW;break;case mf:return Q5}return Ty(t)?(this.consumeWhiteSpace(),_W):qc(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):D_(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Bo(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Em(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var i=!1;r===Ey&&t.length<6;)t.push(r),r=this.consumeCodePoint(),i=!0;if(i){var n=parseInt(Bo.apply(void 0,t.map(function(d){return d===Ey?e8:d})),16),a=parseInt(Bo.apply(void 0,t.map(function(d){return d===Ey?s8:d})),16);return{type:30,start:n,end:a}}var c=parseInt(Bo.apply(void 0,t),16);if(this.peekCodePoint(0)===th&&Em(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var s=[];Em(r)&&s.length<6;)s.push(r),r=this.consumeCodePoint();var a=parseInt(Bo.apply(void 0,s),16);return{type:30,start:c,end:a}}else return{type:30,start:c,end:c}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===Sy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Sy?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===mf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Cy||r===By){var i=this.consumeStringToken(this.consumeCodePoint());return i.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===mf||this.peekCodePoint(0)===C1)?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),ky)}for(;;){var n=this.consumeCodePoint();if(n===mf||n===C1)return{type:22,value:Bo.apply(void 0,t)};if(Ty(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===mf||this.peekCodePoint(0)===C1?(this.consumeCodePoint(),{type:22,value:Bo.apply(void 0,t)}):(this.consumeBadUrlRemnants(),ky);if(n===By||n===Cy||n===Sy||tW(n))return this.consumeBadUrlRemnants(),ky;if(n===X1)if(ip(n,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ky;else t.push(n)}},e.prototype.consumeWhiteSpace=function(){for(;Ty(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===C1||t===mf)return;ip(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,i="";t>0;){var n=Math.min(r,t);i+=Bo.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),i},e.prototype.consumeStringToken=function(t){var r="",i=0;do{var n=this._value[i];if(n===mf||n===void 0||n===t)return r+=this.consumeStringSlice(i),{type:0,value:r};if(n===P_)return this._value.splice(0,i),dW;if(n===X1){var a=this._value[i+1];a!==mf&&a!==void 0&&(a===P_?(r+=this.consumeStringSlice(i),i=-1,this._value.shift()):ip(n,a)&&(r+=this.consumeStringSlice(i),r+=Bo(this.consumeEscapedCodePoint()),i=-1))}i++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=Kv,i=this.peekCodePoint(0);for((i===o0||i===th)&&t.push(this.consumeCodePoint());qc(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(i===Bv&&qc(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=PE;qc(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0),n=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((i===n8||i===r8)&&((n===o0||n===th)&&qc(a)||qc(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=PE;qc(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[rW(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],i=t[1],n=this.peekCodePoint(0),a=this.peekCodePoint(1),c=this.peekCodePoint(2);if(Fy(n,a,c)){var s=this.consumeName();return{type:15,number:r,flags:i,unit:s}}return n===wK?(this.consumeCodePoint(),{type:16,number:r,flags:i}):{type:17,number:r,flags:i}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Em(t)){for(var r=Bo(t);Em(this.peekCodePoint(0))&&r.length<6;)r+=Bo(this.consumeCodePoint());Ty(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(r,16);return i===0||XK(i)||i>1114111?UE:i}return t===mf?UE:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(jE(r))t+=Bo(r);else if(ip(r,this.peekCodePoint(0)))t+=Bo(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),o8=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new a8;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},i=this.consumeToken();;){if(i.type===32||wW(i,t))return r;this.reconsumeToken(i),r.values.push(this.consumeComponentValue()),i=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var i=this.consumeToken();if(i.type===32||i.type===3)return r;this.reconsumeToken(i),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?Q5:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),Wv=function(e){return e.type===15},vg=function(e){return e.type===17},Qs=function(e){return e.type===20},bW=function(e){return e.type===0},z5=function(e,t){return Qs(e)&&e.value===t},l8=function(e){return e.type!==31},sg=function(e){return e.type!==31&&e.type!==4},Ff=function(e){var t=[],r=[];return e.forEach(function(i){if(i.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}i.type!==31&&r.push(i)}),r.length&&t.push(r),t},wW=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},_p=function(e){return e.type===17||e.type===15},Ko=function(e){return e.type===16||_p(e)},c8=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},pc={type:17,number:0,flags:Kv},sB={type:16,number:50,flags:Kv},up={type:16,number:100,flags:Kv},D1=function(e,t,r){var i=e[0],n=e[1];return[ua(i,t),ua(typeof n<"u"?n:i,r)]},ua=function(e,t){if(e.type===16)return e.number/100*t;if(Wv(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},u8="deg",h8="grad",A8="rad",f8="turn",E2={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case u8:return Math.PI*t.number/180;case h8:return Math.PI/200*t.number;case A8:return t.number;case f8:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},d8=function(e){return e.type===15&&(e.unit===u8||e.unit===h8||e.unit===A8||e.unit===f8)},p8=function(e){var t=e.filter(Qs).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[pc,pc];case"to top":case"bottom":return rA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[pc,up];case"to right":case"left":return rA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[up,up];case"to bottom":case"top":return rA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[up,pc];case"to left":case"right":return rA(270)}return 0},rA=function(e){return Math.PI*e/180},mp={name:"color",parse:function(e,t){if(t.type===18){var r=BW[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var i=t.value.substring(0,1),n=t.value.substring(1,2),a=t.value.substring(2,3);return hp(parseInt(i+i,16),parseInt(n+n,16),parseInt(a+a,16),1)}if(t.value.length===4){var i=t.value.substring(0,1),n=t.value.substring(1,2),a=t.value.substring(2,3),c=t.value.substring(3,4);return hp(parseInt(i+i,16),parseInt(n+n,16),parseInt(a+a,16),parseInt(c+c,16)/255)}if(t.value.length===6){var i=t.value.substring(0,2),n=t.value.substring(2,4),a=t.value.substring(4,6);return hp(parseInt(i,16),parseInt(n,16),parseInt(a,16),1)}if(t.value.length===8){var i=t.value.substring(0,2),n=t.value.substring(2,4),a=t.value.substring(4,6),c=t.value.substring(6,8);return hp(parseInt(i,16),parseInt(n,16),parseInt(a,16),parseInt(c,16)/255)}}if(t.type===20){var s=fd[t.value.toUpperCase()];if(typeof s<"u")return s}return fd.TRANSPARENT}},gp=function(e){return(255&e)===0},Vl=function(e){var t=255&e,r=255&e>>8,i=255&e>>16,n=255&e>>24;return t<255?"rgba("+n+","+i+","+r+","+t/255+")":"rgb("+n+","+i+","+r+")"},hp=function(e,t,r,i){return(e<<24|t<<16|r<<8|Math.round(i*255)<<0)>>>0},OE=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},QE=function(e,t){var r=t.filter(sg);if(r.length===3){var i=r.map(OE),n=i[0],a=i[1],c=i[2];return hp(n,a,c,1)}if(r.length===4){var s=r.map(OE),n=s[0],a=s[1],c=s[2],d=s[3];return hp(n,a,c,d)}return 0};function dw(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var zE=function(e,t){var r=t.filter(sg),i=r[0],n=r[1],a=r[2],c=r[3],s=(i.type===17?rA(i.number):E2.parse(e,i))/(Math.PI*2),d=Ko(n)?n.number/100:0,g=Ko(a)?a.number/100:0,x=typeof c<"u"&&Ko(c)?ua(c,1):1;if(d===0)return hp(g*255,g*255,g*255,1);var C=g<=.5?g*(d+1):g+d-g*d,N=g*2-C,B=dw(N,C,s+1/3),M=dw(N,C,s),I=dw(N,C,s-1/3);return hp(B*255,M*255,I*255,x)},BW={hsl:zE,hsla:zE,rgb:QE,rgba:QE},Z1=function(e,t){return mp.parse(e,o8.create(t).parseComponentValue())},fd={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},CW={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Qs(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},SW={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},T2=function(e,t){var r=mp.parse(e,t[0]),i=t[1];return i&&Ko(i)?{color:r,stop:i}:{color:r,stop:null}},HE=function(e,t){var r=e[0],i=e[e.length-1];r.stop===null&&(r.stop=pc),i.stop===null&&(i.stop=up);for(var n=[],a=0,c=0;c<e.length;c++){var s=e[c].stop;if(s!==null){var d=ua(s,t);d>a?n.push(d):n.push(a),a=d}else n.push(null)}for(var g=null,c=0;c<n.length;c++){var x=n[c];if(x===null)g===null&&(g=c);else if(g!==null){for(var C=c-g,N=n[g-1],B=(x-N)/(C+1),M=1;M<=C;M++)n[g+M-1]=B*M;g=null}}return e.map(function(I,R){var D=I.color;return{color:D,stop:Math.max(Math.min(1,n[R]/t),0)}})},EW=function(e,t,r){var i=t/2,n=r/2,a=ua(e[0],t)-i,c=n-ua(e[1],r);return(Math.atan2(c,a)+Math.PI*2)%(Math.PI*2)},TW=function(e,t,r){var i=typeof e=="number"?e:EW(e,t,r),n=Math.abs(t*Math.sin(i))+Math.abs(r*Math.cos(i)),a=t/2,c=r/2,s=n/2,d=Math.sin(i-Math.PI/2)*s,g=Math.cos(i-Math.PI/2)*s;return[n,a-g,a+g,c-d,c+d]},RA=function(e,t){return Math.sqrt(e*e+t*t)},VE=function(e,t,r,i,n){var a=[[0,0],[0,t],[e,0],[e,t]];return a.reduce(function(c,s){var d=s[0],g=s[1],x=RA(r-d,i-g);return(n?x<c.optimumDistance:x>c.optimumDistance)?{optimumCorner:s,optimumDistance:x}:c},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},FW=function(e,t,r,i,n){var a=0,c=0;switch(e.size){case 0:e.shape===0?a=c=Math.min(Math.abs(t),Math.abs(t-i),Math.abs(r),Math.abs(r-n)):e.shape===1&&(a=Math.min(Math.abs(t),Math.abs(t-i)),c=Math.min(Math.abs(r),Math.abs(r-n)));break;case 2:if(e.shape===0)a=c=Math.min(RA(t,r),RA(t,r-n),RA(t-i,r),RA(t-i,r-n));else if(e.shape===1){var s=Math.min(Math.abs(r),Math.abs(r-n))/Math.min(Math.abs(t),Math.abs(t-i)),d=VE(i,n,t,r,!0),g=d[0],x=d[1];a=RA(g-t,(x-r)/s),c=s*a}break;case 1:e.shape===0?a=c=Math.max(Math.abs(t),Math.abs(t-i),Math.abs(r),Math.abs(r-n)):e.shape===1&&(a=Math.max(Math.abs(t),Math.abs(t-i)),c=Math.max(Math.abs(r),Math.abs(r-n)));break;case 3:if(e.shape===0)a=c=Math.max(RA(t,r),RA(t,r-n),RA(t-i,r),RA(t-i,r-n));else if(e.shape===1){var s=Math.max(Math.abs(r),Math.abs(r-n))/Math.max(Math.abs(t),Math.abs(t-i)),C=VE(i,n,t,r,!1),g=C[0],x=C[1];a=RA(g-t,(x-r)/s),c=s*a}break}return Array.isArray(e.size)&&(a=ua(e.size[0],i),c=e.size.length===2?ua(e.size[1],n):a),[a,c]},kW=function(e,t){var r=rA(180),i=[];return Ff(t).forEach(function(n,a){if(a===0){var c=n[0];if(c.type===20&&c.value==="to"){r=p8(n);return}else if(d8(c)){r=E2.parse(e,c);return}}var s=T2(e,n);i.push(s)}),{angle:r,stops:i,type:1}},Ny=function(e,t){var r=rA(180),i=[];return Ff(t).forEach(function(n,a){if(a===0){var c=n[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){r=p8(n);return}else if(d8(c)){r=(E2.parse(e,c)+rA(270))%rA(360);return}}var s=T2(e,n);i.push(s)}),{angle:r,stops:i,type:1}},NW=function(e,t){var r=rA(180),i=[],n=1,a=0,c=3,s=[];return Ff(t).forEach(function(d,g){var x=d[0];if(g===0){if(Qs(x)&&x.value==="linear"){n=1;return}else if(Qs(x)&&x.value==="radial"){n=2;return}}if(x.type===18){if(x.name==="from"){var C=mp.parse(e,x.values[0]);i.push({stop:pc,color:C})}else if(x.name==="to"){var C=mp.parse(e,x.values[0]);i.push({stop:up,color:C})}else if(x.name==="color-stop"){var N=x.values.filter(sg);if(N.length===2){var C=mp.parse(e,N[1]),B=N[0];vg(B)&&i.push({stop:{type:16,number:B.number*100,flags:B.flags},color:C})}}}}),n===1?{angle:(r+rA(180))%rA(360),stops:i,type:n}:{size:c,shape:a,stops:i,position:s,type:n}},m8="closest-side",g8="farthest-side",v8="closest-corner",x8="farthest-corner",y8="circle",_8="ellipse",b8="cover",w8="contain",IW=function(e,t){var r=0,i=3,n=[],a=[];return Ff(t).forEach(function(c,s){var d=!0;if(s===0){var g=!1;d=c.reduce(function(C,N){if(g)if(Qs(N))switch(N.value){case"center":return a.push(sB),C;case"top":case"left":return a.push(pc),C;case"right":case"bottom":return a.push(up),C}else(Ko(N)||_p(N))&&a.push(N);else if(Qs(N))switch(N.value){case y8:return r=0,!1;case _8:return r=1,!1;case"at":return g=!0,!1;case m8:return i=0,!1;case b8:case g8:return i=1,!1;case w8:case v8:return i=2,!1;case x8:return i=3,!1}else if(_p(N)||Ko(N))return Array.isArray(i)||(i=[]),i.push(N),!1;return C},d)}if(d){var x=T2(e,c);n.push(x)}}),{size:i,shape:r,stops:n,position:a,type:2}},Iy=function(e,t){var r=0,i=3,n=[],a=[];return Ff(t).forEach(function(c,s){var d=!0;if(s===0?d=c.reduce(function(x,C){if(Qs(C))switch(C.value){case"center":return a.push(sB),!1;case"top":case"left":return a.push(pc),!1;case"right":case"bottom":return a.push(up),!1}else if(Ko(C)||_p(C))return a.push(C),!1;return x},d):s===1&&(d=c.reduce(function(x,C){if(Qs(C))switch(C.value){case y8:return r=0,!1;case _8:return r=1,!1;case w8:case m8:return i=0,!1;case g8:return i=1,!1;case v8:return i=2,!1;case b8:case x8:return i=3,!1}else if(_p(C)||Ko(C))return Array.isArray(i)||(i=[]),i.push(C),!1;return x},d)),d){var g=T2(e,c);n.push(g)}}),{size:i,shape:r,stops:n,position:a,type:2}},LW=function(e){return e.type===1},MW=function(e){return e.type===2},aB={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var i=B8[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return i(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function PW(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!B8[e.name])}var B8={"linear-gradient":kW,"-moz-linear-gradient":Ny,"-ms-linear-gradient":Ny,"-o-linear-gradient":Ny,"-webkit-linear-gradient":Ny,"radial-gradient":IW,"-moz-radial-gradient":Iy,"-ms-radial-gradient":Iy,"-o-radial-gradient":Iy,"-webkit-radial-gradient":Iy,"-webkit-gradient":NW},DW={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(i){return sg(i)&&PW(i)}).map(function(i){return aB.parse(e,i)})}},RW={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Qs(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},UW={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Ff(t).map(function(r){return r.filter(Ko)}).map(c8)}},jW={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Ff(t).map(function(r){return r.filter(Qs).map(function(i){return i.value}).join(" ")}).map(OW)}},OW=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Xm;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Xm||(Xm={}));var QW={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Ff(t).map(function(r){return r.filter(zW)})}},zW=function(e){return Qs(e)||Ko(e)},F2=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},HW=F2("top"),VW=F2("right"),GW=F2("bottom"),qW=F2("left"),k2=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return c8(r.filter(Ko))}}},KW=k2("top-left"),WW=k2("top-right"),$W=k2("bottom-right"),XW=k2("bottom-left"),N2=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ZW=N2("top"),YW=N2("right"),JW=N2("bottom"),e$=N2("left"),I2=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return Wv(r)?r.number:0}}},t$=I2("top"),r$=I2("right"),i$=I2("bottom"),n$=I2("left"),s$={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},a$={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},o$={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Qs).reduce(function(r,i){return r|l$(i.value)},0)}},l$=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},c$={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},u$={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},R_;(function(e){e.NORMAL="normal",e.STRICT="strict"})(R_||(R_={}));var h$={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return R_.STRICT;case"normal":default:return R_.NORMAL}}},A$={name:"line-height",initialValue:"normal",prefix:!1,type:4},GE=function(e,t){return Qs(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Ko(e)?ua(e,t):t},f$={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:aB.parse(e,t)}},d$={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},H5={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},L2=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},p$=L2("top"),m$=L2("right"),g$=L2("bottom"),v$=L2("left"),x$={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Qs).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},y$={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},M2=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},_$=M2("top"),b$=M2("right"),w$=M2("bottom"),B$=M2("left"),C$={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},S$={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},E$={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&z5(t[0],"none")?[]:Ff(t).map(function(r){for(var i={color:fd.TRANSPARENT,offsetX:pc,offsetY:pc,blur:pc},n=0,a=0;a<r.length;a++){var c=r[a];_p(c)?(n===0?i.offsetX=c:n===1?i.offsetY=c:i.blur=c,n++):i.color=mp.parse(e,c)}return i})}},T$={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},F$={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=I$[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},k$=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},N$=function(e){var t=e.filter(function(d){return d.type===17}).map(function(d){return d.number}),r=t[0],i=t[1];t[2],t[3];var n=t[4],a=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var c=t[12],s=t[13];return t[14],t[15],t.length===16?[r,i,n,a,c,s]:null},I$={matrix:k$,matrix3d:N$},qE={type:16,number:50,flags:Kv},L$=[qE,qE],M$={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Ko);return r.length!==2?L$:[r[0],r[1]]}},P$={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Y1;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Y1||(Y1={}));var D$={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Y1.BREAK_ALL;case"keep-all":return Y1.KEEP_ALL;case"normal":default:return Y1.NORMAL}}},R$={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(vg(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},C8={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},U$={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return vg(t)?t.number:1}},j$={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},O$={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Qs).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Q$={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],i=[];return t.forEach(function(n){switch(n.type){case 20:case 0:r.push(n.value);break;case 17:r.push(n.number.toString());break;case 4:i.push(r.join(" ")),r.length=0;break}}),r.length&&i.push(r.join(" ")),i.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},z$={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},H$={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(vg(t))return t.number;if(Qs(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},V$={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Qs).map(function(r){return r.value})}},G$={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ml=function(e,t){return(e&t)!==0},q$={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},K$={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var i=[],n=t.filter(l8),a=0;a<n.length;a++){var c=n[a],s=n[a+1];if(c.type===20){var d=s&&vg(s)?s.number:1;i.push({counter:c.value,increment:d})}}return i}},W$={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],i=t.filter(l8),n=0;n<i.length;n++){var a=i[n],c=i[n+1];if(Qs(a)&&a.value!=="none"){var s=c&&vg(c)?c.number:0;r.push({counter:a.value,reset:s})}}return r}},$$={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Wv).map(function(r){return C8.parse(e,r)})}},X$={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var i=[],n=t.filter(bW);if(n.length%2!==0)return null;for(var a=0;a<n.length;a+=2){var c=n[a].value,s=n[a+1].value;i.push({open:c,close:s})}return i}},KE=function(e,t,r){if(!e)return"";var i=e[Math.min(t,e.length-1)];return i?r?i.open:i.close:""},Z$={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&z5(t[0],"none")?[]:Ff(t).map(function(r){for(var i={color:255,offsetX:pc,offsetY:pc,blur:pc,spread:pc,inset:!1},n=0,a=0;a<r.length;a++){var c=r[a];z5(c,"inset")?i.inset=!0:_p(c)?(n===0?i.offsetX=c:n===1?i.offsetY=c:n===2?i.blur=c:i.spread=c,n++):i.color=mp.parse(e,c)}return i})}},Y$={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],i=[];return t.filter(Qs).forEach(function(n){switch(n.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2);break}}),r.forEach(function(n){i.indexOf(n)===-1&&i.push(n)}),i}},J$={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},eX={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Wv(t)?t.number:0}},tX=function(){function e(t,r){var i,n;this.animationDuration=ci(t,$$,r.animationDuration),this.backgroundClip=ci(t,CW,r.backgroundClip),this.backgroundColor=ci(t,SW,r.backgroundColor),this.backgroundImage=ci(t,DW,r.backgroundImage),this.backgroundOrigin=ci(t,RW,r.backgroundOrigin),this.backgroundPosition=ci(t,UW,r.backgroundPosition),this.backgroundRepeat=ci(t,jW,r.backgroundRepeat),this.backgroundSize=ci(t,QW,r.backgroundSize),this.borderTopColor=ci(t,HW,r.borderTopColor),this.borderRightColor=ci(t,VW,r.borderRightColor),this.borderBottomColor=ci(t,GW,r.borderBottomColor),this.borderLeftColor=ci(t,qW,r.borderLeftColor),this.borderTopLeftRadius=ci(t,KW,r.borderTopLeftRadius),this.borderTopRightRadius=ci(t,WW,r.borderTopRightRadius),this.borderBottomRightRadius=ci(t,$W,r.borderBottomRightRadius),this.borderBottomLeftRadius=ci(t,XW,r.borderBottomLeftRadius),this.borderTopStyle=ci(t,ZW,r.borderTopStyle),this.borderRightStyle=ci(t,YW,r.borderRightStyle),this.borderBottomStyle=ci(t,JW,r.borderBottomStyle),this.borderLeftStyle=ci(t,e$,r.borderLeftStyle),this.borderTopWidth=ci(t,t$,r.borderTopWidth),this.borderRightWidth=ci(t,r$,r.borderRightWidth),this.borderBottomWidth=ci(t,i$,r.borderBottomWidth),this.borderLeftWidth=ci(t,n$,r.borderLeftWidth),this.boxShadow=ci(t,Z$,r.boxShadow),this.color=ci(t,s$,r.color),this.direction=ci(t,a$,r.direction),this.display=ci(t,o$,r.display),this.float=ci(t,c$,r.cssFloat),this.fontFamily=ci(t,Q$,r.fontFamily),this.fontSize=ci(t,z$,r.fontSize),this.fontStyle=ci(t,G$,r.fontStyle),this.fontVariant=ci(t,V$,r.fontVariant),this.fontWeight=ci(t,H$,r.fontWeight),this.letterSpacing=ci(t,u$,r.letterSpacing),this.lineBreak=ci(t,h$,r.lineBreak),this.lineHeight=ci(t,A$,r.lineHeight),this.listStyleImage=ci(t,f$,r.listStyleImage),this.listStylePosition=ci(t,d$,r.listStylePosition),this.listStyleType=ci(t,H5,r.listStyleType),this.marginTop=ci(t,p$,r.marginTop),this.marginRight=ci(t,m$,r.marginRight),this.marginBottom=ci(t,g$,r.marginBottom),this.marginLeft=ci(t,v$,r.marginLeft),this.opacity=ci(t,U$,r.opacity);var a=ci(t,x$,r.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=ci(t,y$,r.overflowWrap),this.paddingTop=ci(t,_$,r.paddingTop),this.paddingRight=ci(t,b$,r.paddingRight),this.paddingBottom=ci(t,w$,r.paddingBottom),this.paddingLeft=ci(t,B$,r.paddingLeft),this.paintOrder=ci(t,Y$,r.paintOrder),this.position=ci(t,S$,r.position),this.textAlign=ci(t,C$,r.textAlign),this.textDecorationColor=ci(t,j$,(i=r.textDecorationColor)!==null&&i!==void 0?i:r.color),this.textDecorationLine=ci(t,O$,(n=r.textDecorationLine)!==null&&n!==void 0?n:r.textDecoration),this.textShadow=ci(t,E$,r.textShadow),this.textTransform=ci(t,T$,r.textTransform),this.transform=ci(t,F$,r.transform),this.transformOrigin=ci(t,M$,r.transformOrigin),this.visibility=ci(t,P$,r.visibility),this.webkitTextStrokeColor=ci(t,J$,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=ci(t,eX,r.webkitTextStrokeWidth),this.wordBreak=ci(t,D$,r.wordBreak),this.zIndex=ci(t,R$,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return gp(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return ml(this.display,4)||ml(this.display,33554432)||ml(this.display,268435456)||ml(this.display,536870912)||ml(this.display,67108864)||ml(this.display,134217728)},e}(),rX=function(){function e(t,r){this.content=ci(t,q$,r.content),this.quotes=ci(t,X$,r.quotes)}return e}(),WE=function(){function e(t,r){this.counterIncrement=ci(t,K$,r.counterIncrement),this.counterReset=ci(t,W$,r.counterReset)}return e}(),ci=function(e,t,r){var i=new a8,n=r!==null&&typeof r<"u"?r.toString():t.initialValue;i.write(n);var a=new o8(i.read());switch(t.type){case 2:var c=a.parseComponentValue();return t.parse(e,Qs(c)?c.value:t.initialValue);case 0:return t.parse(e,a.parseComponentValue());case 1:return t.parse(e,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(t.format){case"angle":return E2.parse(e,a.parseComponentValue());case"color":return mp.parse(e,a.parseComponentValue());case"image":return aB.parse(e,a.parseComponentValue());case"length":var s=a.parseComponentValue();return _p(s)?s:pc;case"length-percentage":var d=a.parseComponentValue();return Ko(d)?d:pc;case"time":return C8.parse(e,a.parseComponentValue())}break}},iX="data-html2canvas-debug",nX=function(e){var t=e.getAttribute(iX);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},V5=function(e,t){var r=nX(e);return r===1||t===r},kf=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,V5(r,3))debugger;this.styles=new tX(t,window.getComputedStyle(r,null)),K5(r)&&(this.styles.animationDuration.some(function(i){return i>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=C2(this.context,r),V5(r,4)&&(this.flags|=16)}return e}(),sX="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",$E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ly=0;Ly<$E.length;Ly++)R1[$E.charCodeAt(Ly)]=Ly;var aX=function(e){var t=e.length*.75,r=e.length,i,n=0,a,c,s,d;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),x=Array.isArray(g)?g:new Uint8Array(g);for(i=0;i<r;i+=4)a=R1[e.charCodeAt(i)],c=R1[e.charCodeAt(i+1)],s=R1[e.charCodeAt(i+2)],d=R1[e.charCodeAt(i+3)],x[n++]=a<<2|c>>4,x[n++]=(c&15)<<4|s>>2,x[n++]=(s&3)<<6|d&63;return g},oX=function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r.push(e[i+1]<<8|e[i]);return r},lX=function(e){for(var t=e.length,r=[],i=0;i<t;i+=4)r.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return r},d0=5,oB=11,pw=2,cX=oB-d0,S8=65536>>d0,uX=1<<d0,mw=uX-1,hX=1024>>d0,AX=S8+hX,fX=AX,dX=32,pX=fX+dX,mX=65536>>oB,gX=1<<cX,vX=gX-1,XE=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},xX=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},yX=function(e,t){var r=aX(e),i=Array.isArray(r)?lX(r):new Uint32Array(r),n=Array.isArray(r)?oX(r):new Uint16Array(r),a=24,c=XE(n,a/2,i[4]/2),s=i[5]===2?XE(n,(a+i[4])/2):xX(i,Math.ceil((a+i[4])/4));return new _X(i[0],i[1],i[2],i[3],c,s)},_X=function(){function e(t,r,i,n,a,c){this.initialValue=t,this.errorValue=r,this.highStart=i,this.highValueIndex=n,this.index=a,this.data=c}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>d0],r=(r<<pw)+(t&mw),this.data[r];if(t<=65535)return r=this.index[S8+(t-55296>>d0)],r=(r<<pw)+(t&mw),this.data[r];if(t<this.highStart)return r=pX-mX+(t>>oB),r=this.index[r],r+=t>>d0&vX,r=this.index[r],r=(r<<pw)+(t&mw),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),ZE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bX=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var My=0;My<ZE.length;My++)bX[ZE.charCodeAt(My)]=My;var wX=1,gw=2,vw=3,YE=4,JE=5,BX=7,eT=8,xw=9,yw=10,tT=11,rT=12,iT=13,nT=14,_w=15,CX=function(e){for(var t=[],r=0,i=e.length;r<i;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){var a=e.charCodeAt(r++);(a&64512)===56320?t.push(((n&1023)<<10)+(a&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},SX=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var i=[],n=-1,a="";++n<r;){var c=e[n];c<=65535?i.push(c):(c-=65536,i.push((c>>10)+55296,c%1024+56320)),(n+1===r||i.length>16384)&&(a+=String.fromCharCode.apply(String,i),i.length=0)}return a},EX=yX(sX),Zh="",bw="",TX=function(e){return EX.get(e)},FX=function(e,t,r){var i=r-2,n=t[i],a=t[r-1],c=t[r];if(a===gw&&c===vw)return Zh;if(a===gw||a===vw||a===YE||c===gw||c===vw||c===YE)return bw;if(a===eT&&[eT,xw,tT,rT].indexOf(c)!==-1||(a===tT||a===xw)&&(c===xw||c===yw)||(a===rT||a===yw)&&c===yw||c===iT||c===JE||c===BX||a===wX)return Zh;if(a===iT&&c===nT){for(;n===JE;)n=t[--i];if(n===nT)return Zh}if(a===_w&&c===_w){for(var s=0;n===_w;)s++,n=t[--i];if(s%2===0)return Zh}return bw},kX=function(e){var t=CX(e),r=t.length,i=0,n=0,a=t.map(TX);return{next:function(){if(i>=r)return{done:!0,value:null};for(var c=Zh;i<r&&(c=FX(t,a,++i))===Zh;);if(c!==Zh||i===r){var s=SX.apply(null,t.slice(n,i));return n=i,{value:s,done:!1}}return{done:!0,value:null}}}},NX=function(e){for(var t=kX(e),r=[],i;!(i=t.next()).done;)i.value&&r.push(i.value.slice());return r},IX=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var i=e.createElement("boundtest");i.style.height=t+"px",i.style.display="block",e.body.appendChild(i),r.selectNode(i);var n=r.getBoundingClientRect(),a=Math.round(n.height);if(e.body.removeChild(i),a===t)return!0}}return!1},LX=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var i=t.firstChild,n=S2(i.data).map(function(d){return Bo(d)}),a=0,c={},s=n.every(function(d,g){r.setStart(i,a),r.setEnd(i,a+d.length);var x=r.getBoundingClientRect();a+=d.length;var C=x.x>c.x||x.y>c.y;return c=x,g===0?!0:C});return e.body.removeChild(t),s},MX=function(){return typeof new Image().crossOrigin<"u"},PX=function(){return typeof new XMLHttpRequest().responseType=="string"},DX=function(e){var t=new Image,r=e.createElement("canvas"),i=r.getContext("2d");if(!i)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},sT=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},RX=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var i=t.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,r,r);var n=new Image,a=t.toDataURL();n.src=a;var c=G5(r,r,0,0,n);return i.fillStyle="red",i.fillRect(0,0,r,r),aT(c).then(function(s){i.drawImage(s,0,0);var d=i.getImageData(0,0,r,r).data;i.fillStyle="red",i.fillRect(0,0,r,r);var g=e.createElement("div");return g.style.backgroundImage="url("+a+")",g.style.height=r+"px",sT(d)?aT(G5(r,r,0,0,g)):Promise.reject(!1)}).then(function(s){return i.drawImage(s,0,0),sT(i.getImageData(0,0,r,r).data)}).catch(function(){return!1})},G5=function(e,t,r,i,n){var a="http://www.w3.org/2000/svg",c=document.createElementNS(a,"svg"),s=document.createElementNS(a,"foreignObject");return c.setAttributeNS(null,"width",e.toString()),c.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",r.toString()),s.setAttributeNS(null,"y",i.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(s),s.appendChild(n),c},aT=function(e){return new Promise(function(t,r){var i=new Image;i.onload=function(){return t(i)},i.onerror=r,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Ac={get SUPPORT_RANGE_BOUNDS(){var e=IX(document);return Object.defineProperty(Ac,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Ac.SUPPORT_RANGE_BOUNDS&&LX(document);return Object.defineProperty(Ac,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=DX(document);return Object.defineProperty(Ac,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?RX(document):Promise.resolve(!1);return Object.defineProperty(Ac,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=MX();return Object.defineProperty(Ac,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=PX();return Object.defineProperty(Ac,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ac,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ac,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},J1=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),UX=function(e,t,r,i){var n=QX(t,r),a=[],c=0;return n.forEach(function(s){if(r.textDecorationLine.length||s.trim().length>0)if(Ac.SUPPORT_RANGE_BOUNDS){var d=oT(i,c,s.length).getClientRects();if(d.length>1){var g=lB(s),x=0;g.forEach(function(N){a.push(new J1(N,yd.fromDOMRectList(e,oT(i,x+c,N.length).getClientRects()))),x+=N.length})}else a.push(new J1(s,yd.fromDOMRectList(e,d)))}else{var C=i.splitText(s.length);a.push(new J1(s,jX(e,i))),i=C}else Ac.SUPPORT_RANGE_BOUNDS||(i=i.splitText(s.length));c+=s.length}),a},jX=function(e,t){var r=t.ownerDocument;if(r){var i=r.createElement("html2canvaswrapper");i.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(i,t);var a=C2(e,i);return i.firstChild&&n.replaceChild(i.firstChild,i),a}}return yd.EMPTY},oT=function(e,t,r){var i=e.ownerDocument;if(!i)throw new Error("Node has no owner document");var n=i.createRange();return n.setStart(e,t),n.setEnd(e,t+r),n},lB=function(e){if(Ac.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return NX(e)},OX=function(e,t){if(Ac.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(i){return i.segment})}return HX(e,t)},QX=function(e,t){return t.letterSpacing!==0?lB(e):OX(e,t)},zX=[32,160,4961,65792,65793,4153,4241],HX=function(e,t){for(var r=mK(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),i=[],n,a=function(){if(n.value){var c=n.value.slice(),s=S2(c),d="";s.forEach(function(g){zX.indexOf(g)===-1?d+=Bo(g):(d.length&&i.push(d),i.push(Bo(g)),d="")}),d.length&&i.push(d)}};!(n=r.next()).done;)a();return i},VX=function(){function e(t,r,i){this.text=GX(r.data,i.textTransform),this.textBounds=UX(t,this.text,i,r)}return e}(),GX=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(qX,KX);case 2:return e.toUpperCase();default:return e}},qX=/(^|\s|:|-|\(|\))([a-z])/g,KX=function(e,t,r){return e.length>0?t+r.toUpperCase():e},E8=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.src=i.currentSrc||i.src,n.intrinsicWidth=i.naturalWidth,n.intrinsicHeight=i.naturalHeight,n.context.cache.addImage(n.src),n}return t}(kf),T8=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.canvas=i,n.intrinsicWidth=i.width,n.intrinsicHeight=i.height,n}return t}(kf),F8=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this,a=new XMLSerializer,c=C2(r,i);return i.setAttribute("width",c.width+"px"),i.setAttribute("height",c.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(i)),n.intrinsicWidth=i.width.baseVal.value,n.intrinsicHeight=i.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t}(kf),k8=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.value=i.value,n}return t}(kf),q5=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.start=i.start,n.reversed=typeof i.reversed=="boolean"&&i.reversed===!0,n}return t}(kf),WX=[{type:15,flags:0,unit:"px",number:3}],$X=[{type:16,flags:0,number:50}],XX=function(e){return e.width>e.height?new yd(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new yd(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},ZX=function(e){var t=e.type===YX?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},U_="checkbox",j_="radio",YX="password",lT=707406591,cB=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this;switch(n.type=i.type.toLowerCase(),n.checked=i.checked,n.value=ZX(i),(n.type===U_||n.type===j_)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=XX(n.bounds)),n.type){case U_:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=WX;break;case j_:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=$X;break}return n}return t}(kf),N8=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this,a=i.options[i.selectedIndex||0];return n.value=a&&a.text||"",n}return t}(kf),I8=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.value=i.value,n}return t}(kf),L8=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this;n.src=i.src,n.width=parseInt(i.width,10)||0,n.height=parseInt(i.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){n.tree=P8(r,i.contentWindow.document.documentElement);var a=i.contentWindow.document.documentElement?Z1(r,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):fd.TRANSPARENT,c=i.contentWindow.document.body?Z1(r,getComputedStyle(i.contentWindow.document.body).backgroundColor):fd.TRANSPARENT;n.backgroundColor=gp(a)?gp(c)?n.styles.backgroundColor:c:a}}catch{}return n}return t}(kf),JX=["OL","UL","MENU"],p_=function(e,t,r,i){for(var n=t.firstChild,a=void 0;n;n=a)if(a=n.nextSibling,D8(n)&&n.data.trim().length>0)r.textNodes.push(new VX(e,n,r.styles));else if(Um(n))if(O8(n)&&n.assignedNodes)n.assignedNodes().forEach(function(s){return p_(e,s,r,i)});else{var c=M8(e,n);c.styles.isVisible()&&(eZ(n,c,i)?c.flags|=4:tZ(c.styles)&&(c.flags|=2),JX.indexOf(n.tagName)!==-1&&(c.flags|=8),r.elements.push(c),n.slot,n.shadowRoot?p_(e,n.shadowRoot,c,i):!O_(n)&&!R8(n)&&!Q_(n)&&p_(e,n,c,i))}},M8=function(e,t){return W5(t)?new E8(e,t):U8(t)?new T8(e,t):R8(t)?new F8(e,t):rZ(t)?new k8(e,t):iZ(t)?new q5(e,t):nZ(t)?new cB(e,t):Q_(t)?new N8(e,t):O_(t)?new I8(e,t):j8(t)?new L8(e,t):new kf(e,t)},P8=function(e,t){var r=M8(e,t);return r.flags|=4,p_(e,t,r,r),r},eZ=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||uB(e)&&r.styles.isTransparent()},tZ=function(e){return e.isPositioned()||e.isFloating()},D8=function(e){return e.nodeType===Node.TEXT_NODE},Um=function(e){return e.nodeType===Node.ELEMENT_NODE},K5=function(e){return Um(e)&&typeof e.style<"u"&&!m_(e)},m_=function(e){return typeof e.className=="object"},rZ=function(e){return e.tagName==="LI"},iZ=function(e){return e.tagName==="OL"},nZ=function(e){return e.tagName==="INPUT"},sZ=function(e){return e.tagName==="HTML"},R8=function(e){return e.tagName==="svg"},uB=function(e){return e.tagName==="BODY"},U8=function(e){return e.tagName==="CANVAS"},cT=function(e){return e.tagName==="VIDEO"},W5=function(e){return e.tagName==="IMG"},j8=function(e){return e.tagName==="IFRAME"},uT=function(e){return e.tagName==="STYLE"},aZ=function(e){return e.tagName==="SCRIPT"},O_=function(e){return e.tagName==="TEXTAREA"},Q_=function(e){return e.tagName==="SELECT"},O8=function(e){return e.tagName==="SLOT"},hT=function(e){return e.tagName.indexOf("-")>0},oZ=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(i){return r.counters[i].pop()})},e.prototype.parse=function(t){var r=this,i=t.counterIncrement,n=t.counterReset,a=!0;i!==null&&i.forEach(function(s){var d=r.counters[s.counter];d&&s.increment!==0&&(a=!1,d.length||d.push(1),d[Math.max(0,d.length-1)]+=s.increment)});var c=[];return a&&n.forEach(function(s){var d=r.counters[s.counter];c.push(s.counter),d||(d=r.counters[s.counter]=[]),d.push(s.reset)}),c},e}(),AT={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},fT={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},lZ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},cZ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Tm=function(e,t,r,i,n,a){return e<t||e>r?Cv(e,n,a.length>0):i.integers.reduce(function(c,s,d){for(;e>=s;)e-=s,c+=i.values[d];return c},"")+a},Q8=function(e,t,r,i){var n="";do r||e--,n=i(e)+n,e/=t;while(e*t>=t);return n},bo=function(e,t,r,i,n){var a=r-t+1;return(e<0?"-":"")+(Q8(Math.abs(e),a,i,function(c){return Bo(Math.floor(c%a)+t)})+n)},Yp=function(e,t,r){r===void 0&&(r=". ");var i=t.length;return Q8(Math.abs(e),i,!1,function(n){return t[Math.floor(n%i)]})+r},Mm=1,tp=2,rp=4,U1=8,rd=function(e,t,r,i,n,a){if(e<-9999||e>9999)return Cv(e,4,n.length>0);var c=Math.abs(e),s=n;if(c===0)return t[0]+s;for(var d=0;c>0&&d<=4;d++){var g=c%10;g===0&&ml(a,Mm)&&s!==""?s=t[g]+s:g>1||g===1&&d===0||g===1&&d===1&&ml(a,tp)||g===1&&d===1&&ml(a,rp)&&e>100||g===1&&d>1&&ml(a,U1)?s=t[g]+(d>0?r[d-1]:"")+s:g===1&&d>0&&(s=r[d-1]+s),c=Math.floor(c/10)}return(e<0?i:"")+s},dT="",pT="",mT="",ww="",Cv=function(e,t,r){var i=r?". ":"",n=r?"":"",a=r?", ":"",c=r?" ":"";switch(t){case 0:return""+c;case 1:return""+c;case 2:return""+c;case 5:var s=bo(e,48,57,!0,i);return s.length<4?"0"+s:s;case 4:return Yp(e,"",n);case 6:return Tm(e,1,3999,AT,3,i).toLowerCase();case 7:return Tm(e,1,3999,AT,3,i);case 8:return bo(e,945,969,!1,i);case 9:return bo(e,97,122,!1,i);case 10:return bo(e,65,90,!1,i);case 11:return bo(e,1632,1641,!0,i);case 12:case 49:return Tm(e,1,9999,fT,3,i);case 35:return Tm(e,1,9999,fT,3,i).toLowerCase();case 13:return bo(e,2534,2543,!0,i);case 14:case 30:return bo(e,6112,6121,!0,i);case 15:return Yp(e,"",n);case 16:return Yp(e,"",n);case 17:case 48:return rd(e,"",dT,"",n,tp|rp|U1);case 47:return rd(e,"",pT,"",n,Mm|tp|rp|U1);case 42:return rd(e,"",dT,"",n,tp|rp|U1);case 41:return rd(e,"",pT,"",n,Mm|tp|rp|U1);case 26:return rd(e,"","",mT,n,0);case 25:return rd(e,"","",mT,n,Mm|tp|rp);case 31:return rd(e,"","",ww,a,Mm|tp|rp);case 33:return rd(e,"","",ww,a,0);case 32:return rd(e,"","",ww,a,Mm|tp|rp);case 18:return bo(e,2406,2415,!0,i);case 20:return Tm(e,1,19999,cZ,3,i);case 21:return bo(e,2790,2799,!0,i);case 22:return bo(e,2662,2671,!0,i);case 22:return Tm(e,1,10999,lZ,3,i);case 23:return Yp(e,"");case 24:return Yp(e,"");case 27:return bo(e,3302,3311,!0,i);case 28:return Yp(e,"",n);case 29:return Yp(e,"",n);case 34:return bo(e,3792,3801,!0,i);case 37:return bo(e,6160,6169,!0,i);case 38:return bo(e,4160,4169,!0,i);case 39:return bo(e,2918,2927,!0,i);case 40:return bo(e,1776,1785,!0,i);case 43:return bo(e,3046,3055,!0,i);case 44:return bo(e,3174,3183,!0,i);case 45:return bo(e,3664,3673,!0,i);case 46:return bo(e,3872,3881,!0,i);case 3:default:return bo(e,48,57,!0,i)}},z8="data-html2canvas-ignore",gT=function(){function e(t,r,i){if(this.context=t,this.options=i,this.scrolledElements=[],this.referenceElement=r,this.counters=new oZ,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var i=this,n=uZ(t,r);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var a=t.defaultView.pageXOffset,c=t.defaultView.pageYOffset,s=n.contentWindow,d=s.document,g=fZ(n).then(function(){return yu(i,void 0,void 0,function(){var x,C;return Vc(this,function(N){switch(N.label){case 0:return this.scrolledElements.forEach(gZ),s&&(s.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(s.scrollY!==r.top||s.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(s.scrollX-r.left,s.scrollY-r.top,0,0))),x=this.options.onclone,C=this.clonedReferenceElement,typeof C>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:d.fonts&&d.fonts.ready?[4,d.fonts.ready]:[3,2];case 1:N.sent(),N.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,AZ(d)]:[3,4];case 3:N.sent(),N.label=4;case 4:return typeof x=="function"?[2,Promise.resolve().then(function(){return x(d,C)}).then(function(){return n})]:[2,n]}})})});return d.open(),d.write(pZ(document.doctype)+"<html></html>"),mZ(this.referenceElement.ownerDocument,a,c),d.replaceChild(d.adoptNode(this.documentElement),d.documentElement),d.close(),g},e.prototype.createElementClone=function(t){if(V5(t,2))debugger;if(U8(t))return this.createCanvasClone(t);if(cT(t))return this.createVideoClone(t);if(uT(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return W5(r)&&(W5(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),hT(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return Bw(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var i=[].slice.call(r.cssRules,0).reduce(function(a,c){return c&&typeof c.cssText=="string"?a+c.cssText:a},""),n=t.cloneNode(!1);return n.textContent=i,n}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var i=t.ownerDocument.createElement("img");try{return i.src=t.toDataURL(),i}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var a=t.getContext("2d"),c=n.getContext("2d");if(c)if(!this.options.allowTaint&&a)c.putImageData(a.getImageData(0,0,t.width,t.height),0,0);else{var s=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(s){var d=s.getContextAttributes();d?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}c.drawImage(t,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var i=r.getContext("2d");try{return i&&(i.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||i.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},e.prototype.appendChildNode=function(t,r,i){(!Um(r)||!aZ(r)&&!r.hasAttribute(z8)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Um(r)||!uT(r))&&t.appendChild(this.cloneNode(r,i))},e.prototype.cloneChildNodes=function(t,r,i){for(var n=this,a=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;a;a=a.nextSibling)if(Um(a)&&O8(a)&&typeof a.assignedNodes=="function"){var c=a.assignedNodes();c.length&&c.forEach(function(s){return n.appendChildNode(r,s,i)})}else this.appendChildNode(r,a,i)},e.prototype.cloneNode=function(t,r){if(D8(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var i=t.ownerDocument.defaultView;if(i&&Um(t)&&(K5(t)||m_(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var a=i.getComputedStyle(t),c=i.getComputedStyle(t,":before"),s=i.getComputedStyle(t,":after");this.referenceElement===t&&K5(n)&&(this.clonedReferenceElement=n),uB(n)&&yZ(n);var d=this.counters.parse(new WE(this.context,a)),g=this.resolvePseudoContent(t,n,c,ev.BEFORE);hT(t)&&(r=!0),cT(t)||this.cloneChildNodes(t,n,r),g&&n.insertBefore(g,n.firstChild);var x=this.resolvePseudoContent(t,n,s,ev.AFTER);return x&&n.appendChild(x),this.counters.pop(d),(a&&(this.options.copyStyles||m_(t))&&!j8(t)||r)&&Bw(a,n),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(O_(t)||Q_(t))&&(O_(n)||Q_(n))&&(n.value=t.value),n}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,i,n){var a=this;if(i){var c=i.content,s=r.ownerDocument;if(!(!s||!c||c==="none"||c==="-moz-alt-content"||i.display==="none")){this.counters.parse(new WE(this.context,i));var d=new rX(this.context,i),g=s.createElement("html2canvaspseudoelement");Bw(i,g),d.content.forEach(function(C){if(C.type===0)g.appendChild(s.createTextNode(C.value));else if(C.type===22){var N=s.createElement("img");N.src=C.value,N.style.opacity="1",g.appendChild(N)}else if(C.type===18){if(C.name==="attr"){var B=C.values.filter(Qs);B.length&&g.appendChild(s.createTextNode(t.getAttribute(B[0].value)||""))}else if(C.name==="counter"){var M=C.values.filter(sg),I=M[0],R=M[1];if(I&&Qs(I)){var D=a.counters.getCounterValue(I.value),V=R&&Qs(R)?H5.parse(a.context,R.value):3;g.appendChild(s.createTextNode(Cv(D,V,!1)))}}else if(C.name==="counters"){var G=C.values.filter(sg),I=G[0],Z=G[1],R=G[2];if(I&&Qs(I)){var X=a.counters.getCounterValues(I.value),le=R&&Qs(R)?H5.parse(a.context,R.value):3,ae=Z&&Z.type===0?Z.value:"",ce=X.map(function(re){return Cv(re,le,!1)}).join(ae);g.appendChild(s.createTextNode(ce))}}}else if(C.type===20)switch(C.value){case"open-quote":g.appendChild(s.createTextNode(KE(d.quotes,a.quoteDepth++,!0)));break;case"close-quote":g.appendChild(s.createTextNode(KE(d.quotes,--a.quoteDepth,!1)));break;default:g.appendChild(s.createTextNode(C.value))}}),g.className=$5+" "+X5;var x=n===ev.BEFORE?" "+$5:" "+X5;return m_(r)?r.className.baseValue+=x:r.className+=x,g}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),ev;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(ev||(ev={}));var uZ=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(z8,"true"),e.body.appendChild(r),r},hZ=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},AZ=function(e){return Promise.all([].slice.call(e.images,0).map(hZ))},fZ=function(e){return new Promise(function(t,r){var i=e.contentWindow;if(!i)return r("No window assigned for iframe");var n=i.document;i.onload=e.onload=function(){i.onload=e.onload=null;var a=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(a),t(e))},50)}})},dZ=["all","d","content"],Bw=function(e,t){for(var r=e.length-1;r>=0;r--){var i=e.item(r);dZ.indexOf(i)===-1&&t.style.setProperty(i,e.getPropertyValue(i))}return t},pZ=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},mZ=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},gZ=function(e){var t=e[0],r=e[1],i=e[2];t.scrollLeft=r,t.scrollTop=i},vZ=":before",xZ=":after",$5="___html2canvas___pseudoelement_before",X5="___html2canvas___pseudoelement_after",vT=`{
    content: "" !important;
    display: none !important;
}`,yZ=function(e){_Z(e,"."+$5+vZ+vT+`
         .`+X5+xZ+vT)},_Z=function(e,t){var r=e.ownerDocument;if(r){var i=r.createElement("style");i.textContent=t,e.appendChild(i)}},H8=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),bZ=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(Sw(t)||SZ(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return yu(this,void 0,void 0,function(){var r,i,n,a,c=this;return Vc(this,function(s){switch(s.label){case 0:return r=H8.isSameOrigin(t),i=!Cw(t)&&this._options.useCORS===!0&&Ac.SUPPORT_CORS_IMAGES&&!r,n=!Cw(t)&&!r&&!Sw(t)&&typeof this._options.proxy=="string"&&Ac.SUPPORT_CORS_XHR&&!i,!r&&this._options.allowTaint===!1&&!Cw(t)&&!Sw(t)&&!n&&!i?[2]:(a=t,n?[4,this.proxy(a)]:[3,2]);case 1:a=s.sent(),s.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(d,g){var x=new Image;x.onload=function(){return d(x)},x.onerror=g,(EZ(a)||i)&&(x.crossOrigin="anonymous"),x.src=a,x.complete===!0&&setTimeout(function(){return d(x)},500),c._options.imageTimeout>0&&setTimeout(function(){return g("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,s.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise(function(a,c){var s=Ac.SUPPORT_RESPONSE_TYPE?"blob":"text",d=new XMLHttpRequest;d.onload=function(){if(d.status===200)if(s==="text")a(d.response);else{var C=new FileReader;C.addEventListener("load",function(){return a(C.result)},!1),C.addEventListener("error",function(N){return c(N)},!1),C.readAsDataURL(d.response)}else c("Failed to proxy resource "+n+" with status code "+d.status)},d.onerror=c;var g=i.indexOf("?")>-1?"&":"?";if(d.open("GET",""+i+g+"url="+encodeURIComponent(t)+"&responseType="+s),s!=="text"&&d instanceof XMLHttpRequest&&(d.responseType=s),r._options.imageTimeout){var x=r._options.imageTimeout;d.timeout=x,d.ontimeout=function(){return c("Timed out ("+x+"ms) proxying "+n)}}d.send()})},e}(),wZ=/^data:image\/svg\+xml/i,BZ=/^data:image\/.*;base64,/i,CZ=/^data:image\/.*/i,SZ=function(e){return Ac.SUPPORT_SVG_DRAWING||!TZ(e)},Cw=function(e){return CZ.test(e)},EZ=function(e){return BZ.test(e)},Sw=function(e){return e.substr(0,4)==="blob"},TZ=function(e){return e.substr(-3).toLowerCase()==="svg"||wZ.test(e)},ai=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Fm=function(e,t,r){return new ai(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},Py=function(){function e(t,r,i,n){this.type=1,this.start=t,this.startControl=r,this.endControl=i,this.end=n}return e.prototype.subdivide=function(t,r){var i=Fm(this.start,this.startControl,t),n=Fm(this.startControl,this.endControl,t),a=Fm(this.endControl,this.end,t),c=Fm(i,n,t),s=Fm(n,a,t),d=Fm(c,s,t);return r?new e(this.start,i,c,d):new e(d,s,a,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),eA=function(e){return e.type===1},FZ=function(){function e(t){var r=t.styles,i=t.bounds,n=D1(r.borderTopLeftRadius,i.width,i.height),a=n[0],c=n[1],s=D1(r.borderTopRightRadius,i.width,i.height),d=s[0],g=s[1],x=D1(r.borderBottomRightRadius,i.width,i.height),C=x[0],N=x[1],B=D1(r.borderBottomLeftRadius,i.width,i.height),M=B[0],I=B[1],R=[];R.push((a+d)/i.width),R.push((M+C)/i.width),R.push((c+I)/i.height),R.push((g+N)/i.height);var D=Math.max.apply(Math,R);D>1&&(a/=D,c/=D,d/=D,g/=D,C/=D,N/=D,M/=D,I/=D);var V=i.width-d,G=i.height-N,Z=i.width-C,X=i.height-I,le=r.borderTopWidth,ae=r.borderRightWidth,ce=r.borderBottomWidth,se=r.borderLeftWidth,ue=ua(r.paddingTop,t.bounds.width),re=ua(r.paddingRight,t.bounds.width),W=ua(r.paddingBottom,t.bounds.width),de=ua(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||c>0?ka(i.left+se/3,i.top+le/3,a-se/3,c-le/3,vs.TOP_LEFT):new ai(i.left+se/3,i.top+le/3),this.topRightBorderDoubleOuterBox=a>0||c>0?ka(i.left+V,i.top+le/3,d-ae/3,g-le/3,vs.TOP_RIGHT):new ai(i.left+i.width-ae/3,i.top+le/3),this.bottomRightBorderDoubleOuterBox=C>0||N>0?ka(i.left+Z,i.top+G,C-ae/3,N-ce/3,vs.BOTTOM_RIGHT):new ai(i.left+i.width-ae/3,i.top+i.height-ce/3),this.bottomLeftBorderDoubleOuterBox=M>0||I>0?ka(i.left+se/3,i.top+X,M-se/3,I-ce/3,vs.BOTTOM_LEFT):new ai(i.left+se/3,i.top+i.height-ce/3),this.topLeftBorderDoubleInnerBox=a>0||c>0?ka(i.left+se*2/3,i.top+le*2/3,a-se*2/3,c-le*2/3,vs.TOP_LEFT):new ai(i.left+se*2/3,i.top+le*2/3),this.topRightBorderDoubleInnerBox=a>0||c>0?ka(i.left+V,i.top+le*2/3,d-ae*2/3,g-le*2/3,vs.TOP_RIGHT):new ai(i.left+i.width-ae*2/3,i.top+le*2/3),this.bottomRightBorderDoubleInnerBox=C>0||N>0?ka(i.left+Z,i.top+G,C-ae*2/3,N-ce*2/3,vs.BOTTOM_RIGHT):new ai(i.left+i.width-ae*2/3,i.top+i.height-ce*2/3),this.bottomLeftBorderDoubleInnerBox=M>0||I>0?ka(i.left+se*2/3,i.top+X,M-se*2/3,I-ce*2/3,vs.BOTTOM_LEFT):new ai(i.left+se*2/3,i.top+i.height-ce*2/3),this.topLeftBorderStroke=a>0||c>0?ka(i.left+se/2,i.top+le/2,a-se/2,c-le/2,vs.TOP_LEFT):new ai(i.left+se/2,i.top+le/2),this.topRightBorderStroke=a>0||c>0?ka(i.left+V,i.top+le/2,d-ae/2,g-le/2,vs.TOP_RIGHT):new ai(i.left+i.width-ae/2,i.top+le/2),this.bottomRightBorderStroke=C>0||N>0?ka(i.left+Z,i.top+G,C-ae/2,N-ce/2,vs.BOTTOM_RIGHT):new ai(i.left+i.width-ae/2,i.top+i.height-ce/2),this.bottomLeftBorderStroke=M>0||I>0?ka(i.left+se/2,i.top+X,M-se/2,I-ce/2,vs.BOTTOM_LEFT):new ai(i.left+se/2,i.top+i.height-ce/2),this.topLeftBorderBox=a>0||c>0?ka(i.left,i.top,a,c,vs.TOP_LEFT):new ai(i.left,i.top),this.topRightBorderBox=d>0||g>0?ka(i.left+V,i.top,d,g,vs.TOP_RIGHT):new ai(i.left+i.width,i.top),this.bottomRightBorderBox=C>0||N>0?ka(i.left+Z,i.top+G,C,N,vs.BOTTOM_RIGHT):new ai(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=M>0||I>0?ka(i.left,i.top+X,M,I,vs.BOTTOM_LEFT):new ai(i.left,i.top+i.height),this.topLeftPaddingBox=a>0||c>0?ka(i.left+se,i.top+le,Math.max(0,a-se),Math.max(0,c-le),vs.TOP_LEFT):new ai(i.left+se,i.top+le),this.topRightPaddingBox=d>0||g>0?ka(i.left+Math.min(V,i.width-ae),i.top+le,V>i.width+ae?0:Math.max(0,d-ae),Math.max(0,g-le),vs.TOP_RIGHT):new ai(i.left+i.width-ae,i.top+le),this.bottomRightPaddingBox=C>0||N>0?ka(i.left+Math.min(Z,i.width-se),i.top+Math.min(G,i.height-ce),Math.max(0,C-ae),Math.max(0,N-ce),vs.BOTTOM_RIGHT):new ai(i.left+i.width-ae,i.top+i.height-ce),this.bottomLeftPaddingBox=M>0||I>0?ka(i.left+se,i.top+Math.min(X,i.height-ce),Math.max(0,M-se),Math.max(0,I-ce),vs.BOTTOM_LEFT):new ai(i.left+se,i.top+i.height-ce),this.topLeftContentBox=a>0||c>0?ka(i.left+se+de,i.top+le+ue,Math.max(0,a-(se+de)),Math.max(0,c-(le+ue)),vs.TOP_LEFT):new ai(i.left+se+de,i.top+le+ue),this.topRightContentBox=d>0||g>0?ka(i.left+Math.min(V,i.width+se+de),i.top+le+ue,V>i.width+se+de?0:d-se+de,g-(le+ue),vs.TOP_RIGHT):new ai(i.left+i.width-(ae+re),i.top+le+ue),this.bottomRightContentBox=C>0||N>0?ka(i.left+Math.min(Z,i.width-(se+de)),i.top+Math.min(G,i.height+le+ue),Math.max(0,C-(ae+re)),N-(ce+W),vs.BOTTOM_RIGHT):new ai(i.left+i.width-(ae+re),i.top+i.height-(ce+W)),this.bottomLeftContentBox=M>0||I>0?ka(i.left+se+de,i.top+X,Math.max(0,M-(se+de)),I-(ce+W),vs.BOTTOM_LEFT):new ai(i.left+se+de,i.top+i.height-(ce+W))}return e}(),vs;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(vs||(vs={}));var ka=function(e,t,r,i,n){var a=4*((Math.sqrt(2)-1)/3),c=r*a,s=i*a,d=e+r,g=t+i;switch(n){case vs.TOP_LEFT:return new Py(new ai(e,g),new ai(e,g-s),new ai(d-c,t),new ai(d,t));case vs.TOP_RIGHT:return new Py(new ai(e,t),new ai(e+c,t),new ai(d,g-s),new ai(d,g));case vs.BOTTOM_RIGHT:return new Py(new ai(d,t),new ai(d,t+s),new ai(e+c,g),new ai(e,g));case vs.BOTTOM_LEFT:default:return new Py(new ai(d,g),new ai(d-c,g),new ai(e,t+s),new ai(e,t))}},z_=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},kZ=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},H_=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},NZ=function(){function e(t,r,i){this.offsetX=t,this.offsetY=r,this.matrix=i,this.type=0,this.target=6}return e}(),Dy=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),IZ=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),LZ=function(e){return e.type===0},V8=function(e){return e.type===1},MZ=function(e){return e.type===2},xT=function(e,t){return e.length===t.length?e.some(function(r,i){return r===t[i]}):!1},PZ=function(e,t,r,i,n){return e.map(function(a,c){switch(c){case 0:return a.add(t,r);case 1:return a.add(t+i,r);case 2:return a.add(t+i,r+n);case 3:return a.add(t,r+n)}return a})},G8=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),q8=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new FZ(this.container),this.container.styles.opacity<1&&this.effects.push(new IZ(this.container.styles.opacity)),this.container.styles.transform!==null){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new NZ(i,n,a))}if(this.container.styles.overflowX!==0){var c=z_(this.curves),s=H_(this.curves);xT(c,s)?this.effects.push(new Dy(c,6)):(this.effects.push(new Dy(c,2)),this.effects.push(new Dy(s,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,i=this.parent,n=this.effects.slice(0);i;){var a=i.effects.filter(function(d){return!V8(d)});if(r||i.container.styles.position!==0||!i.parent){if(n.unshift.apply(n,a),r=[2,3].indexOf(i.container.styles.position)===-1,i.container.styles.overflowX!==0){var c=z_(i.curves),s=H_(i.curves);xT(c,s)||n.unshift(new Dy(s,6))}}else n.unshift.apply(n,a);i=i.parent}return n.filter(function(d){return ml(d.target,t)})},e}(),Z5=function(e,t,r,i){e.container.elements.forEach(function(n){var a=ml(n.flags,4),c=ml(n.flags,2),s=new q8(n,e);ml(n.styles.display,2048)&&i.push(s);var d=ml(n.flags,8)?[]:i;if(a||c){var g=a||n.styles.isPositioned()?r:t,x=new G8(s);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var C=n.styles.zIndex.order;if(C<0){var N=0;g.negativeZIndex.some(function(M,I){return C>M.element.container.styles.zIndex.order?(N=I,!1):N>0}),g.negativeZIndex.splice(N,0,x)}else if(C>0){var B=0;g.positiveZIndex.some(function(M,I){return C>=M.element.container.styles.zIndex.order?(B=I+1,!1):B>0}),g.positiveZIndex.splice(B,0,x)}else g.zeroOrAutoZIndexOrTransformedOrOpacity.push(x)}else n.styles.isFloating()?g.nonPositionedFloats.push(x):g.nonPositionedInlineLevel.push(x);Z5(s,x,a?x:r,d)}else n.styles.isInlineLevel()?t.inlineLevel.push(s):t.nonInlineLevel.push(s),Z5(s,t,r,d);ml(n.flags,8)&&K8(n,d)})},K8=function(e,t){for(var r=e instanceof q5?e.start:1,i=e instanceof q5?e.reversed:!1,n=0;n<t.length;n++){var a=t[n];a.container instanceof k8&&typeof a.container.value=="number"&&a.container.value!==0&&(r=a.container.value),a.listValue=Cv(r,a.container.styles.listStyleType,!0),r+=i?-1:1}},DZ=function(e){var t=new q8(e,null),r=new G8(t),i=[];return Z5(t,r,r,i),K8(t.container,i),r},yT=function(e,t){switch(t){case 0:return iA(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return iA(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return iA(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return iA(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},RZ=function(e,t){switch(t){case 0:return iA(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return iA(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return iA(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return iA(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},UZ=function(e,t){switch(t){case 0:return iA(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return iA(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return iA(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return iA(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},jZ=function(e,t){switch(t){case 0:return Ry(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Ry(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Ry(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Ry(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Ry=function(e,t){var r=[];return eA(e)?r.push(e.subdivide(.5,!1)):r.push(e),eA(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},iA=function(e,t,r,i){var n=[];return eA(e)?n.push(e.subdivide(.5,!1)):n.push(e),eA(r)?n.push(r.subdivide(.5,!0)):n.push(r),eA(i)?n.push(i.subdivide(.5,!0).reverse()):n.push(i),eA(t)?n.push(t.subdivide(.5,!1).reverse()):n.push(t),n},W8=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},V_=function(e){var t=e.styles,r=e.bounds,i=ua(t.paddingLeft,r.width),n=ua(t.paddingRight,r.width),a=ua(t.paddingTop,r.width),c=ua(t.paddingBottom,r.width);return r.add(i+t.borderLeftWidth,a+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+i+n),-(t.borderTopWidth+t.borderBottomWidth+a+c))},OZ=function(e,t){return e===0?t.bounds:e===2?V_(t):W8(t)},QZ=function(e,t){return e===0?t.bounds:e===2?V_(t):W8(t)},Ew=function(e,t,r){var i=OZ(Pm(e.styles.backgroundOrigin,t),e),n=QZ(Pm(e.styles.backgroundClip,t),e),a=zZ(Pm(e.styles.backgroundSize,t),r,i),c=a[0],s=a[1],d=D1(Pm(e.styles.backgroundPosition,t),i.width-c,i.height-s),g=HZ(Pm(e.styles.backgroundRepeat,t),d,a,i,n),x=Math.round(i.left+d[0]),C=Math.round(i.top+d[1]);return[g,x,C,c,s]},km=function(e){return Qs(e)&&e.value===Xm.AUTO},Uy=function(e){return typeof e=="number"},zZ=function(e,t,r){var i=t[0],n=t[1],a=t[2],c=e[0],s=e[1];if(!c)return[0,0];if(Ko(c)&&s&&Ko(s))return[ua(c,r.width),ua(s,r.height)];var d=Uy(a);if(Qs(c)&&(c.value===Xm.CONTAIN||c.value===Xm.COVER)){if(Uy(a)){var g=r.width/r.height;return g<a!=(c.value===Xm.COVER)?[r.width,r.width/a]:[r.height*a,r.height]}return[r.width,r.height]}var x=Uy(i),C=Uy(n),N=x||C;if(km(c)&&(!s||km(s))){if(x&&C)return[i,n];if(!d&&!N)return[r.width,r.height];if(N&&d){var B=x?i:n*a,M=C?n:i/a;return[B,M]}var I=x?i:r.width,R=C?n:r.height;return[I,R]}if(d){var D=0,V=0;return Ko(c)?D=ua(c,r.width):Ko(s)&&(V=ua(s,r.height)),km(c)?D=V*a:(!s||km(s))&&(V=D/a),[D,V]}var G=null,Z=null;if(Ko(c)?G=ua(c,r.width):s&&Ko(s)&&(Z=ua(s,r.height)),G!==null&&(!s||km(s))&&(Z=x&&C?G/i*n:r.height),Z!==null&&km(c)&&(G=x&&C?Z/n*i:r.width),G!==null&&Z!==null)return[G,Z];throw new Error("Unable to calculate background-size for element")},Pm=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},HZ=function(e,t,r,i,n){var a=t[0],c=t[1],s=r[0],d=r[1];switch(e){case 2:return[new ai(Math.round(i.left),Math.round(i.top+c)),new ai(Math.round(i.left+i.width),Math.round(i.top+c)),new ai(Math.round(i.left+i.width),Math.round(d+i.top+c)),new ai(Math.round(i.left),Math.round(d+i.top+c))];case 3:return[new ai(Math.round(i.left+a),Math.round(i.top)),new ai(Math.round(i.left+a+s),Math.round(i.top)),new ai(Math.round(i.left+a+s),Math.round(i.height+i.top)),new ai(Math.round(i.left+a),Math.round(i.height+i.top))];case 1:return[new ai(Math.round(i.left+a),Math.round(i.top+c)),new ai(Math.round(i.left+a+s),Math.round(i.top+c)),new ai(Math.round(i.left+a+s),Math.round(i.top+c+d)),new ai(Math.round(i.left+a),Math.round(i.top+c+d))];default:return[new ai(Math.round(n.left),Math.round(n.top)),new ai(Math.round(n.left+n.width),Math.round(n.top)),new ai(Math.round(n.left+n.width),Math.round(n.height+n.top)),new ai(Math.round(n.left),Math.round(n.height+n.top))]}},VZ="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",_T="Hidden Text",GZ=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var i=this._document.createElement("div"),n=this._document.createElement("img"),a=this._document.createElement("span"),c=this._document.body;i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",c.appendChild(i),n.src=VZ,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",a.style.fontFamily=t,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(_T)),i.appendChild(a),i.appendChild(n);var s=n.offsetTop-a.offsetTop+2;i.removeChild(a),i.appendChild(this._document.createTextNode(_T)),i.style.lineHeight="normal",n.style.verticalAlign="super";var d=n.offsetTop-i.offsetTop+2;return c.removeChild(i),{baseline:s,middle:d}},e.prototype.getMetrics=function(t,r){var i=t+" "+r;return typeof this._data[i]>"u"&&(this._data[i]=this.parseMetrics(t,r)),this._data[i]},e}(),$8=function(){function e(t,r){this.context=t,this.options=r}return e}(),qZ=1e4,KZ=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n._activeEffects=[],n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),i.canvas||(n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px"),n.fontMetrics=new GZ(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),n}return t.prototype.applyEffects=function(r){for(var i=this;this._activeEffects.length;)this.popEffect();r.forEach(function(n){return i.applyEffect(n)})},t.prototype.applyEffect=function(r){this.ctx.save(),MZ(r)&&(this.ctx.globalAlpha=r.opacity),LZ(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),V8(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return yu(this,void 0,void 0,function(){var i;return Vc(this,function(n){switch(n.label){case 0:return i=r.element.container.styles,i.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return yu(this,void 0,void 0,function(){return Vc(this,function(i){switch(i.label){case 0:if(ml(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return i.sent(),[4,this.renderNodeContent(r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,i,n){var a=this;if(i===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+n);else{var c=lB(r.text);c.reduce(function(s,d){return a.ctx.fillText(d,s,r.bounds.top+n),s+a.ctx.measureText(d).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var i=r.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),n=YZ(r.fontFamily).join(", "),a=Wv(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,i,r.fontWeight,a,n].join(" "),n,a]},t.prototype.renderTextNode=function(r,i){return yu(this,void 0,void 0,function(){var n,a,c,s,d,g,x,C,N=this;return Vc(this,function(B){return n=this.createFontStyle(i),a=n[0],c=n[1],s=n[2],this.ctx.font=a,this.ctx.direction=i.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",d=this.fontMetrics.getMetrics(c,s),g=d.baseline,x=d.middle,C=i.paintOrder,r.textBounds.forEach(function(M){C.forEach(function(I){switch(I){case 0:N.ctx.fillStyle=Vl(i.color),N.renderTextWithLetterSpacing(M,i.letterSpacing,g);var R=i.textShadow;R.length&&M.text.trim().length&&(R.slice(0).reverse().forEach(function(D){N.ctx.shadowColor=Vl(D.color),N.ctx.shadowOffsetX=D.offsetX.number*N.options.scale,N.ctx.shadowOffsetY=D.offsetY.number*N.options.scale,N.ctx.shadowBlur=D.blur.number,N.renderTextWithLetterSpacing(M,i.letterSpacing,g)}),N.ctx.shadowColor="",N.ctx.shadowOffsetX=0,N.ctx.shadowOffsetY=0,N.ctx.shadowBlur=0),i.textDecorationLine.length&&(N.ctx.fillStyle=Vl(i.textDecorationColor||i.color),i.textDecorationLine.forEach(function(D){switch(D){case 1:N.ctx.fillRect(M.bounds.left,Math.round(M.bounds.top+g),M.bounds.width,1);break;case 2:N.ctx.fillRect(M.bounds.left,Math.round(M.bounds.top),M.bounds.width,1);break;case 3:N.ctx.fillRect(M.bounds.left,Math.ceil(M.bounds.top+x),M.bounds.width,1);break}}));break;case 1:i.webkitTextStrokeWidth&&M.text.trim().length&&(N.ctx.strokeStyle=Vl(i.webkitTextStrokeColor),N.ctx.lineWidth=i.webkitTextStrokeWidth,N.ctx.lineJoin=window.chrome?"miter":"round",N.ctx.strokeText(M.text,M.bounds.left,M.bounds.top+g)),N.ctx.strokeStyle="",N.ctx.lineWidth=0,N.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,i,n){if(n&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var a=V_(r),c=H_(i);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,r.intrinsicWidth,r.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return yu(this,void 0,void 0,function(){var i,n,a,c,s,d,V,V,g,x,C,N,Z,B,M,X,I,R,D,V,G,Z,X;return Vc(this,function(le){switch(le.label){case 0:this.applyEffects(r.getEffects(4)),i=r.container,n=r.curves,a=i.styles,c=0,s=i.textNodes,le.label=1;case 1:return c<s.length?(d=s[c],[4,this.renderTextNode(d,a)]):[3,4];case 2:le.sent(),le.label=3;case 3:return c++,[3,1];case 4:if(!(i instanceof E8))return[3,8];le.label=5;case 5:return le.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return V=le.sent(),this.renderReplacedElement(i,n,V),[3,8];case 7:return le.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof T8&&this.renderReplacedElement(i,n,i.canvas),!(i instanceof F8))return[3,12];le.label=9;case 9:return le.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return V=le.sent(),this.renderReplacedElement(i,n,V),[3,12];case 11:return le.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof L8&&i.tree?(g=new t(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}),[4,g.render(i.tree)]):[3,14];case 13:x=le.sent(),i.width&&i.height&&this.ctx.drawImage(x,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),le.label=14;case 14:if(i instanceof cB&&(C=Math.min(i.bounds.width,i.bounds.height),i.type===U_?i.checked&&(this.ctx.save(),this.path([new ai(i.bounds.left+C*.39363,i.bounds.top+C*.79),new ai(i.bounds.left+C*.16,i.bounds.top+C*.5549),new ai(i.bounds.left+C*.27347,i.bounds.top+C*.44071),new ai(i.bounds.left+C*.39694,i.bounds.top+C*.5649),new ai(i.bounds.left+C*.72983,i.bounds.top+C*.23),new ai(i.bounds.left+C*.84,i.bounds.top+C*.34085),new ai(i.bounds.left+C*.39363,i.bounds.top+C*.79)]),this.ctx.fillStyle=Vl(lT),this.ctx.fill(),this.ctx.restore()):i.type===j_&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+C/2,i.bounds.top+C/2,C/4,0,Math.PI*2,!0),this.ctx.fillStyle=Vl(lT),this.ctx.fill(),this.ctx.restore())),WZ(i)&&i.value.length){switch(N=this.createFontStyle(a),Z=N[0],B=N[1],M=this.fontMetrics.getMetrics(Z,B).baseline,this.ctx.font=Z,this.ctx.fillStyle=Vl(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=XZ(i.styles.textAlign),X=V_(i),I=0,i.styles.textAlign){case 1:I+=X.width/2;break;case 2:I+=X.width;break}R=X.add(I,0,0,-X.height/2+1),this.ctx.save(),this.path([new ai(X.left,X.top),new ai(X.left+X.width,X.top),new ai(X.left+X.width,X.top+X.height),new ai(X.left,X.top+X.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new J1(i.value,R),a.letterSpacing,M),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ml(i.styles.display,2048))return[3,20];if(i.styles.listStyleImage===null)return[3,19];if(D=i.styles.listStyleImage,D.type!==0)return[3,18];V=void 0,G=D.url,le.label=15;case 15:return le.trys.push([15,17,,18]),[4,this.context.cache.match(G)];case 16:return V=le.sent(),this.ctx.drawImage(V,i.bounds.left-(V.width+10),i.bounds.top),[3,18];case 17:return le.sent(),this.context.logger.error("Error loading list-style-image "+G),[3,18];case 18:return[3,20];case 19:r.listValue&&i.styles.listStyleType!==-1&&(Z=this.createFontStyle(a)[0],this.ctx.font=Z,this.ctx.fillStyle=Vl(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",X=new yd(i.bounds.left,i.bounds.top+ua(i.styles.paddingTop,i.bounds.width),i.bounds.width,GE(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new J1(r.listValue,X),a.letterSpacing,GE(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),le.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return yu(this,void 0,void 0,function(){var i,n,D,a,c,D,s,d,D,g,x,D,C,N,D,B,M,D,I,R,D;return Vc(this,function(V){switch(V.label){case 0:if(ml(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:V.sent(),i=0,n=r.negativeZIndex,V.label=2;case 2:return i<n.length?(D=n[i],[4,this.renderStack(D)]):[3,5];case 3:V.sent(),V.label=4;case 4:return i++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:V.sent(),a=0,c=r.nonInlineLevel,V.label=7;case 7:return a<c.length?(D=c[a],[4,this.renderNode(D)]):[3,10];case 8:V.sent(),V.label=9;case 9:return a++,[3,7];case 10:s=0,d=r.nonPositionedFloats,V.label=11;case 11:return s<d.length?(D=d[s],[4,this.renderStack(D)]):[3,14];case 12:V.sent(),V.label=13;case 13:return s++,[3,11];case 14:g=0,x=r.nonPositionedInlineLevel,V.label=15;case 15:return g<x.length?(D=x[g],[4,this.renderStack(D)]):[3,18];case 16:V.sent(),V.label=17;case 17:return g++,[3,15];case 18:C=0,N=r.inlineLevel,V.label=19;case 19:return C<N.length?(D=N[C],[4,this.renderNode(D)]):[3,22];case 20:V.sent(),V.label=21;case 21:return C++,[3,19];case 22:B=0,M=r.zeroOrAutoZIndexOrTransformedOrOpacity,V.label=23;case 23:return B<M.length?(D=M[B],[4,this.renderStack(D)]):[3,26];case 24:V.sent(),V.label=25;case 25:return B++,[3,23];case 26:I=0,R=r.positiveZIndex,V.label=27;case 27:return I<R.length?(D=R[I],[4,this.renderStack(D)]):[3,30];case 28:V.sent(),V.label=29;case 29:return I++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var i=this;r.forEach(function(n,a){var c=eA(n)?n.start:n;a===0?i.ctx.moveTo(c.x,c.y):i.ctx.lineTo(c.x,c.y),eA(n)&&i.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},t.prototype.renderRepeat=function(r,i,n,a){this.path(r),this.ctx.fillStyle=i,this.ctx.translate(n,a),this.ctx.fill(),this.ctx.translate(-n,-a)},t.prototype.resizeImage=function(r,i,n){var a;if(r.width===i&&r.height===n)return r;var c=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,s=c.createElement("canvas");s.width=Math.max(1,i),s.height=Math.max(1,n);var d=s.getContext("2d");return d.drawImage(r,0,0,r.width,r.height,0,0,i,n),s},t.prototype.renderBackgroundImage=function(r){return yu(this,void 0,void 0,function(){var i,n,a,c,s,d;return Vc(this,function(g){switch(g.label){case 0:i=r.styles.backgroundImage.length-1,n=function(x){var C,N,B,ue,ge,Pe,de,Ee,ce,M,ue,ge,Pe,de,Ee,I,R,D,V,G,Z,X,le,ae,ce,se,ue,re,W,de,Ee,Ne,ge,Pe,Ye,Me,De,tt,ee,fe,pe,we;return Vc(this,function(Le){switch(Le.label){case 0:if(x.type!==0)return[3,5];C=void 0,N=x.url,Le.label=1;case 1:return Le.trys.push([1,3,,4]),[4,a.context.cache.match(N)];case 2:return C=Le.sent(),[3,4];case 3:return Le.sent(),a.context.logger.error("Error loading background-image "+N),[3,4];case 4:return C&&(B=Ew(r,i,[C.width,C.height,C.width/C.height]),ue=B[0],ge=B[1],Pe=B[2],de=B[3],Ee=B[4],ce=a.ctx.createPattern(a.resizeImage(C,de,Ee),"repeat"),a.renderRepeat(ue,ce,ge,Pe)),[3,6];case 5:LW(x)?(M=Ew(r,i,[null,null,null]),ue=M[0],ge=M[1],Pe=M[2],de=M[3],Ee=M[4],I=TW(x.angle,de,Ee),R=I[0],D=I[1],V=I[2],G=I[3],Z=I[4],X=document.createElement("canvas"),X.width=de,X.height=Ee,le=X.getContext("2d"),ae=le.createLinearGradient(D,G,V,Z),HE(x.stops,R).forEach(function(lt){return ae.addColorStop(lt.stop,Vl(lt.color))}),le.fillStyle=ae,le.fillRect(0,0,de,Ee),de>0&&Ee>0&&(ce=a.ctx.createPattern(X,"repeat"),a.renderRepeat(ue,ce,ge,Pe))):MW(x)&&(se=Ew(r,i,[null,null,null]),ue=se[0],re=se[1],W=se[2],de=se[3],Ee=se[4],Ne=x.position.length===0?[sB]:x.position,ge=ua(Ne[0],de),Pe=ua(Ne[Ne.length-1],Ee),Ye=FW(x,ge,Pe,de,Ee),Me=Ye[0],De=Ye[1],Me>0&&De>0&&(tt=a.ctx.createRadialGradient(re+ge,W+Pe,0,re+ge,W+Pe,Me),HE(x.stops,Me*2).forEach(function(lt){return tt.addColorStop(lt.stop,Vl(lt.color))}),a.path(ue),a.ctx.fillStyle=tt,Me!==De?(ee=r.bounds.left+.5*r.bounds.width,fe=r.bounds.top+.5*r.bounds.height,pe=De/Me,we=1/pe,a.ctx.save(),a.ctx.translate(ee,fe),a.ctx.transform(1,0,0,pe,0,0),a.ctx.translate(-ee,-fe),a.ctx.fillRect(re,we*(W-fe)+fe,de,Ee*we),a.ctx.restore()):a.ctx.fill())),Le.label=6;case 6:return i--,[2]}})},a=this,c=0,s=r.styles.backgroundImage.slice(0).reverse(),g.label=1;case 1:return c<s.length?(d=s[c],[5,n(d)]):[3,4];case 2:g.sent(),g.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,i,n){return yu(this,void 0,void 0,function(){return Vc(this,function(a){return this.path(yT(n,i)),this.ctx.fillStyle=Vl(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,i,n,a){return yu(this,void 0,void 0,function(){var c,s;return Vc(this,function(d){switch(d.label){case 0:return i<3?[4,this.renderSolidBorder(r,n,a)]:[3,2];case 1:return d.sent(),[2];case 2:return c=RZ(a,n),this.path(c),this.ctx.fillStyle=Vl(r),this.ctx.fill(),s=UZ(a,n),this.path(s),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return yu(this,void 0,void 0,function(){var i,n,a,c,s,d,g,x,C=this;return Vc(this,function(N){switch(N.label){case 0:return this.applyEffects(r.getEffects(2)),i=r.container.styles,n=!gp(i.backgroundColor)||i.backgroundImage.length,a=[{style:i.borderTopStyle,color:i.borderTopColor,width:i.borderTopWidth},{style:i.borderRightStyle,color:i.borderRightColor,width:i.borderRightWidth},{style:i.borderBottomStyle,color:i.borderBottomColor,width:i.borderBottomWidth},{style:i.borderLeftStyle,color:i.borderLeftColor,width:i.borderLeftWidth}],c=$Z(Pm(i.backgroundClip,0),r.curves),n||i.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),gp(i.backgroundColor)||(this.ctx.fillStyle=Vl(i.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:N.sent(),this.ctx.restore(),i.boxShadow.slice(0).reverse().forEach(function(B){C.ctx.save();var M=z_(r.curves),I=B.inset?0:qZ,R=PZ(M,-I+(B.inset?1:-1)*B.spread.number,(B.inset?1:-1)*B.spread.number,B.spread.number*(B.inset?-2:2),B.spread.number*(B.inset?-2:2));B.inset?(C.path(M),C.ctx.clip(),C.mask(R)):(C.mask(M),C.ctx.clip(),C.path(R)),C.ctx.shadowOffsetX=B.offsetX.number+I,C.ctx.shadowOffsetY=B.offsetY.number,C.ctx.shadowColor=Vl(B.color),C.ctx.shadowBlur=B.blur.number,C.ctx.fillStyle=B.inset?Vl(B.color):"rgba(0,0,0,1)",C.ctx.fill(),C.ctx.restore()}),N.label=2;case 2:s=0,d=0,g=a,N.label=3;case 3:return d<g.length?(x=g[d],x.style!==0&&!gp(x.color)&&x.width>0?x.style!==2?[3,5]:[4,this.renderDashedDottedBorder(x.color,x.width,s,r.curves,2)]:[3,11]):[3,13];case 4:return N.sent(),[3,11];case 5:return x.style!==3?[3,7]:[4,this.renderDashedDottedBorder(x.color,x.width,s,r.curves,3)];case 6:return N.sent(),[3,11];case 7:return x.style!==4?[3,9]:[4,this.renderDoubleBorder(x.color,x.width,s,r.curves)];case 8:return N.sent(),[3,11];case 9:return[4,this.renderSolidBorder(x.color,s,r.curves)];case 10:N.sent(),N.label=11;case 11:s++,N.label=12;case 12:return d++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,i,n,a,c){return yu(this,void 0,void 0,function(){var s,d,g,x,C,N,B,M,I,R,D,V,G,Z,X,le,X,le;return Vc(this,function(ae){return this.ctx.save(),s=jZ(a,n),d=yT(a,n),c===2&&(this.path(d),this.ctx.clip()),eA(d[0])?(g=d[0].start.x,x=d[0].start.y):(g=d[0].x,x=d[0].y),eA(d[1])?(C=d[1].end.x,N=d[1].end.y):(C=d[1].x,N=d[1].y),n===0||n===2?B=Math.abs(g-C):B=Math.abs(x-N),this.ctx.beginPath(),c===3?this.formatPath(s):this.formatPath(d.slice(0,2)),M=i<3?i*3:i*2,I=i<3?i*2:i,c===3&&(M=i,I=i),R=!0,B<=M*2?R=!1:B<=M*2+I?(D=B/(2*M+I),M*=D,I*=D):(V=Math.floor((B+I)/(M+I)),G=(B-V*M)/(V-1),Z=(B-(V+1)*M)/V,I=Z<=0||Math.abs(I-G)<Math.abs(I-Z)?G:Z),R&&(c===3?this.ctx.setLineDash([0,M+I]):this.ctx.setLineDash([M,I])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=i):this.ctx.lineWidth=i*2+1.1,this.ctx.strokeStyle=Vl(r),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&(eA(d[0])&&(X=d[3],le=d[0],this.ctx.beginPath(),this.formatPath([new ai(X.end.x,X.end.y),new ai(le.start.x,le.start.y)]),this.ctx.stroke()),eA(d[1])&&(X=d[1],le=d[2],this.ctx.beginPath(),this.formatPath([new ai(X.end.x,X.end.y),new ai(le.start.x,le.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return yu(this,void 0,void 0,function(){var i;return Vc(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Vl(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=DZ(r),[4,this.renderStack(i)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}($8),WZ=function(e){return e instanceof I8||e instanceof N8?!0:e instanceof cB&&e.type!==j_&&e.type!==U_},$Z=function(e,t){switch(e){case 0:return z_(t);case 2:return kZ(t);case 1:default:return H_(t)}},XZ=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ZZ=["-apple-system","system-ui"],YZ=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return ZZ.indexOf(t)===-1}):e},JZ=function(e){$A(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=i,n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),n}return t.prototype.render=function(r){return yu(this,void 0,void 0,function(){var i,n;return Vc(this,function(a){switch(a.label){case 0:return i=G5(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,eY(i)];case 1:return n=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Vl(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}($8),eY=function(e){return new Promise(function(t,r){var i=new Image;i.onload=function(){t(i)},i.onerror=r,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},tY=function(){function e(t){var r=t.id,i=t.enabled;this.id=r,this.enabled=i,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,my([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,my([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,my([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,my([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),rY=function(){function e(t,r){var i;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new tY({id:this.instanceName,enabled:t.logging}),this.cache=(i=t.cache)!==null&&i!==void 0?i:new bZ(this,t)}return e.instanceCount=1,e}(),X8=function(e,t){return t===void 0&&(t={}),iY(e,t)};typeof window<"u"&&H8.setContext(window);var iY=function(e,t){return yu(void 0,void 0,void 0,function(){var r,i,n,a,c,s,d,g,x,C,N,B,M,I,R,D,V,G,Z,X,ae,le,ae,ce,se,ue,re,W,de,Ee,Ne,ge,Pe,Ye,Me,De,tt,ee,fe,pe;return Vc(this,function(we){switch(we.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(i=r.defaultView,!i)throw new Error("Document is not attached to a Window");return n={allowTaint:(ce=t.allowTaint)!==null&&ce!==void 0?ce:!1,imageTimeout:(se=t.imageTimeout)!==null&&se!==void 0?se:15e3,proxy:t.proxy,useCORS:(ue=t.useCORS)!==null&&ue!==void 0?ue:!1},a=k5({logging:(re=t.logging)!==null&&re!==void 0?re:!0,cache:t.cache},n),c={windowWidth:(W=t.windowWidth)!==null&&W!==void 0?W:i.innerWidth,windowHeight:(de=t.windowHeight)!==null&&de!==void 0?de:i.innerHeight,scrollX:(Ee=t.scrollX)!==null&&Ee!==void 0?Ee:i.pageXOffset,scrollY:(Ne=t.scrollY)!==null&&Ne!==void 0?Ne:i.pageYOffset},s=new yd(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),d=new rY(a,s),g=(ge=t.foreignObjectRendering)!==null&&ge!==void 0?ge:!1,x={allowTaint:(Pe=t.allowTaint)!==null&&Pe!==void 0?Pe:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:g,copyStyles:g},d.logger.debug("Starting document clone with size "+s.width+"x"+s.height+" scrolled to "+-s.left+","+-s.top),C=new gT(d,e,x),N=C.clonedReferenceElement,N?[4,C.toIFrame(r,s)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return B=we.sent(),M=uB(N)||sZ(N)?Pq(N.ownerDocument):C2(d,N),I=M.width,R=M.height,D=M.left,V=M.top,G=nY(d,N,t.backgroundColor),Z={canvas:t.canvas,backgroundColor:G,scale:(Me=(Ye=t.scale)!==null&&Ye!==void 0?Ye:i.devicePixelRatio)!==null&&Me!==void 0?Me:1,x:((De=t.x)!==null&&De!==void 0?De:0)+D,y:((tt=t.y)!==null&&tt!==void 0?tt:0)+V,width:(ee=t.width)!==null&&ee!==void 0?ee:Math.ceil(I),height:(fe=t.height)!==null&&fe!==void 0?fe:Math.ceil(R)},g?(d.logger.debug("Document cloned, using foreign object rendering"),ae=new JZ(d,Z),[4,ae.render(N)]):[3,3];case 2:return X=we.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+D+","+V+" with size "+I+"x"+R+" using computed rendering"),d.logger.debug("Starting DOM parsing"),le=P8(d,N),G===le.styles.backgroundColor&&(le.styles.backgroundColor=fd.TRANSPARENT),d.logger.debug("Starting renderer for element at "+Z.x+","+Z.y+" with size "+Z.width+"x"+Z.height),ae=new KZ(d,Z),[4,ae.render(le)];case 4:X=we.sent(),we.label=5;case 5:return(!((pe=t.removeContainer)!==null&&pe!==void 0)||pe)&&(gT.destroy(B)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,X]}})})},nY=function(e,t,r){var i=t.ownerDocument,n=i.documentElement?Z1(e,getComputedStyle(i.documentElement).backgroundColor):fd.TRANSPARENT,a=i.body?Z1(e,getComputedStyle(i.body).backgroundColor):fd.TRANSPARENT,c=typeof r=="string"?Z1(e,r):r===null?fd.TRANSPARENT:4294967295;return t===i.documentElement?gp(n)?gp(a)?c:a:n:c};const sY=Object.freeze(Object.defineProperty({__proto__:null,default:X8},Symbol.toStringTag,{value:"Module"}));pg.register(X4,Z4,q4,mg,G4,V4,W4,$4,K4,M6);const aY=()=>{const[e,t]=_e.useState({totals:{totalUsers:0,serviceProviders:0,totalPopulation:0},demographics:{ageGroups:{},employment:{}},skills:{},skilledPerTrade:{byRole:{},bySkill:{}},mostBookedServices:{},totalsOverTime:{labels:[],values:[]},activeUsers:0,totalBookings:0,popularServices:[]}),[r,i]=_e.useState(!0),[n,a]=_e.useState(null),[c,s]=_e.useState("12"),d=_e.useRef(null),g=_e.useRef(null),x=_e.useRef(null),C=_e.useRef(null),N=_e.useRef(null),B=_e.useRef(null),M=(W,de)=>{const Ee=W.totalsOverTime.values;if(Ee.length<2)return"Insufficient data for trend analysis.";const Ne=Ee[Ee.length-1],ge=Ee[Ee.length-2],Pe=ge>0?((Ne-ge)/ge*100).toFixed(1):0,Ye=Ee.length>1?((Ne-Ee[0])/(Ee[0]||1)*100).toFixed(1):0,Me=Ee.reduce((De,tt)=>De+tt,0)/Ee.length;return`User registration shows ${Pe>=0?"positive":"negative"} momentum with ${Math.abs(Pe)}% ${Pe>=0?"growth":"decline"} from last month. Overall ${Ye}% increase over ${de} months. Average monthly registrations: ${Math.round(Me)}.`},I=W=>{const de=W.demographics.ageGroups||{};if(Object.keys(de).length===0)return"No age distribution data available.";const Ne=Object.entries(de).sort((Ye,Me)=>Me[1]-Ye[1])[0],ge=Object.values(de).reduce((Ye,Me)=>Ye+Me,0),Pe=(Ne[1]/ge*100).toFixed(1);return`The ${Ne[0]} age group dominates with ${Pe}% of users (${Ne[1]} users). This suggests the platform primarily serves ${Ne[0].includes("18-25")||Ne[0].includes("26-35")?"young adults":Ne[0].includes("36-45")?"middle-aged adults":"mature adults"}.`},R=W=>{const de=W.demographics.employment;if(!de)return"Employment data not available.";const Ee=(de.worker||0)+(de.nonWorker||0);if(Ee===0)return"No employment data available.";const Ne=(de.worker/Ee*100).toFixed(1),ge=(de.nonWorker/Ee*100).toFixed(1);return`Employment rate stands at ${Ne}% (${de.worker} employed users) vs ${ge}% unemployed (${de.nonWorker} users). ${Ne>50?"Majority of users are employed, indicating strong workforce participation.":"Significant portion of users are unemployed, suggesting potential for skill development programs."}`},D=W=>{const de=W.skills;if(Object.keys(de).length===0)return"No skills data available.";const Ee=Object.entries(de).sort((Me,De)=>De[1]-Me[1]),Ne=Ee[0],ge=Object.values(de).reduce((Me,De)=>Me+De,0),Pe=(Ne[1]/ge*100).toFixed(1),Ye=Ee.length;return`"${Ne[0]}" is the most common skill with ${Pe}% adoption (${Ne[1]} users). Platform offers ${Ye} different skills, indicating ${Ye>10?"good":"moderate"} skill diversity. ${Pe>30?"High concentration in top skill suggests specialization opportunity.":"Well-distributed skills show broad service coverage."}`},V=W=>{if(W.popularServices.length===0)return"No service booking data available.";const de=W.popularServices[0],Ee=W.totalBookings,Ne=(de.count/Ee*100).toFixed(1);return`"${de.service}" leads service bookings with ${Ne}% market share (${de.count} bookings). Total platform bookings: ${Ee}. ${Ne>40?"High demand concentration suggests specialization in popular services.":"Well-distributed demand indicates diverse service needs."}`},G=W=>{const de=W.skilledPerTrade.byRole||{};if(Object.keys(de).length===0)return"No provider role data available.";const Ee=Object.entries(de).sort((Ye,Me)=>Me[1]-Ye[1]),Ne=Ee[0],ge=Object.values(de).reduce((Ye,Me)=>Ye+Me,0),Pe=(Ne[1]/ge*100).toFixed(1);return`"${Ne[0]}" is the most represented role with ${Pe}% of providers (${Ne[1]} providers). Network includes ${Ee.length} different roles. ${Pe>30?"Specialized provider network with strong focus on key trades.":"Diverse provider network covering multiple service categories."}`},Z=(W,de)=>{const Ee=I(W),Ne=G(W),ge=W.totals.totalUsers||0,Pe=W.totals.serviceProviders||0,Ye=W.totalBookings,Me=W.activeUsers,De=W.totalsOverTime.values,tt=De.length>1?Math.round((De[De.length-1]-De[De.length-2])/(De[De.length-2]||1)*100):0,ee=W.demographics.employment,fe=ee?.worker&&ee?.nonWorker?Math.round(ee.worker/(ee.worker+ee.nonWorker)*100):0,pe=Object.entries(W.skills).sort((Le,lt)=>lt[1]-Le[1])[0],we=W.popularServices[0];return`SkillConnect platform demonstrates robust performance with ${ge.toLocaleString()} total users and ${Pe.toLocaleString()} service providers, achieving ${Ye.toLocaleString()} service bookings. The platform shows ${tt>=0?"positive":"challenging"} growth momentum with a ${Math.abs(tt)}% ${tt>=0?"increase":"decrease"} in user registrations, maintaining ${Me.toLocaleString()} active users. User demographics reveal a ${fe}% employment rate, with the platform primarily serving ${Ee.includes("young adults")?"young professionals":Ee.includes("middle-aged")?"established adults":"diverse age groups"}. The skills ecosystem features "${pe?.[0]||"various skills"}" as the most demanded skill, complemented by "${we?.service||"popular services"}" leading service bookings. The provider network shows ${Ne.includes("Specialized")?"strong specialization":"good diversity"} across ${Object.keys(W.skilledPerTrade.byRole||{}).length} different roles, indicating a ${Ye>ge*.5?"highly engaged":"moderately active"} marketplace. Overall, the platform exhibits healthy growth patterns with opportunities for ${fe<50?"employment-focused initiatives":"continued expansion"} and ${Object.keys(W.skills).length>15?"diverse skill development":"targeted skill enhancement"}.`};_e.useEffect(()=>{X()},[c]);const X=async()=>{i(!0),a(null);try{const[W,de,Ee,Ne,ge,Pe]=await Promise.all([Cr.get("/reports/totals"),Cr.get("/reports/demographics"),Cr.get("/reports/skills"),Cr.get("/reports/skilled-per-trade"),Cr.get("/reports/most-booked-services"),Cr.get(`/reports/totals-over-time?months=${c}`)]),Ye=W.data?.data||W.data||{},Me=de.data?.data||de.data||{},De=Ee.data?.data||Ee.data||{},tt=Ne.data?.data||Ne.data||{},ee=ge.data?.data||ge.data||{},fe=Pe.data?.data||Pe.data||{labels:[],values:[]},pe=typeof ee=="object"&&ee!==null?Object.values(ee).filter(Le=>typeof Le=="number").reduce((Le,lt)=>Le+lt,0):0,we=typeof ee=="object"&&ee!==null?Object.entries(ee).filter(([Le,lt])=>typeof lt=="number").map(([Le,lt])=>({service:Le,count:lt})).sort((Le,lt)=>lt.count-Le.count).slice(0,10):[];t({totals:Ye,demographics:Me,skills:De,skilledPerTrade:tt,mostBookedServices:ee,totalsOverTime:fe,activeUsers:(()=>{const Le=Ye?.totalUsers;return typeof Le=="number"&&!isNaN(Le)&&Le>0?Math.floor(Le*.7):0})(),totalBookings:typeof pe=="number"&&!isNaN(pe)?pe:0,popularServices:we}),Qr.success("Analytics data loaded successfully!")}catch(W){if(console.error("Failed to fetch analytics data:",W),W.code==="ERR_NETWORK"||W.message?.includes("Network Error")||W.message?.includes("ERR_CONNECTION_REFUSED")){const Ee="Cannot connect to the server. Please ensure the backend server is running and accessible.";a(Ee),Qr.error(Ee,{duration:5e3})}else if(W.response?.status===401){const Ee="Authentication required. Please log in again.";a(Ee),Qr.error(Ee)}else if(W.response?.status===403){const Ee="Access denied. You don't have permission to view analytics.";a(Ee),Qr.error(Ee)}else{const Ee=W.response?.data?.message||W.message||"Failed to load analytics data";a(Ee),Qr.error(Ee)}}finally{i(!1)}},le=async()=>{try{Qr.loading("Generating PDF report..."),pg.register(X4,Z4,q4,mg,G4,V4,W4,$4,K4);const W=new Fi("p","mm","a4"),de=W.internal.pageSize.getWidth(),Ee=W.internal.pageSize.getHeight(),Ne=20;let ge=Ne;const Pe=(dt,qt,Te,at,kt=11)=>{W.setFontSize(kt);const ze=W.splitTextToSize(dt,at);return W.text(ze,qt,Te),Te+ze.length*kt*.4},Ye=dt=>ge+dt>Ee-Ne?(W.addPage(),ge=Ne,!0):!1;W.setFontSize(24),W.setFont("helvetica","bold"),W.text("System Analytics Report",de/2,ge,{align:"center"}),ge+=15,W.setFontSize(14),W.setFont("helvetica","normal"),W.text(`Generated on ${new Date().toLocaleDateString()}`,de/2,ge,{align:"center"}),ge+=10,W.text(`Report Period: Last ${c} months`,de/2,ge,{align:"center"}),W.addPage(),ge=Ne,W.setFontSize(18),W.setFont("helvetica","bold"),W.text("Executive Summary",Ne,ge),ge+=15;const Me=`This comprehensive analytics report provides detailed insights into the SkillConnect platform's performance and user engagement metrics. The report covers key performance indicators, user demographics, skill distribution, and service utilization patterns over the past ${c} months.

Key highlights include:
 Total registered users: ${e.totals.totalUsers?.toLocaleString()||0}
 Active service providers: ${e.totals.serviceProviders?.toLocaleString()||0}
 Total service bookings: ${e.totalBookings.toLocaleString()}
 Platform growth rate: ${e.totalsOverTime.values.length>1?Math.round((e.totalsOverTime.values[e.totalsOverTime.values.length-1]-e.totalsOverTime.values[e.totalsOverTime.values.length-2])/(e.totalsOverTime.values[e.totalsOverTime.values.length-2]||1)*100):0}%

The following sections provide detailed analysis and visualizations of these metrics.`;ge=Pe(Me,Ne,ge,de-2*Ne),Ye(80),ge+=10,W.setFontSize(16),W.setFont("helvetica","bold"),W.text("Platform Overview",Ne,ge),ge+=10;const De=[["Metric","Value","Description"],["Total Users",e.totals.totalUsers?.toLocaleString()||"0","Registered platform users"],["Service Providers",e.totals.serviceProviders?.toLocaleString()||"0","Active service providers"],["Total Population",e.totals.totalPopulation?.toLocaleString()||"0","Total population in coverage area"],["Active Users",e.activeUsers.toLocaleString(),"Estimated active users (70%)"],["Total Requests",e.totalBookings.toLocaleString(),"Completed service requests"]];if(_1(W,{startY:ge,head:[De[0]],body:De.slice(1),theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[37,99,235]},margin:{left:Ne,right:Ne}}),ge=W.lastAutoTable.finalY+15,Ye(100),W.setFontSize(16),W.setFont("helvetica","bold"),W.text("User Demographics Analysis",Ne,ge),ge+=10,e.demographics.ageGroups&&Object.keys(e.demographics.ageGroups).length>0){W.setFontSize(14),W.setFont("helvetica","bold"),W.text("Age Distribution",Ne,ge),ge+=8;const dt=[["Age Group","Count","Percentage"]],qt=Object.values(e.demographics.ageGroups).reduce((Te,at)=>Te+at,0);Object.entries(e.demographics.ageGroups).forEach(([Te,at])=>{const kt=qt>0?(at/qt*100).toFixed(1):"0.0";dt.push([Te,at.toString(),`${kt}%`])}),_1(W,{startY:ge,head:[dt[0]],body:dt.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:Ne,right:Ne}}),ge=W.lastAutoTable.finalY+10}if(e.demographics.employment){Ye(40),W.setFontSize(14),W.setFont("helvetica","bold"),W.text("Employment Status",Ne,ge),ge+=8;const dt=[["Status","Count","Percentage"]],qt=(e.demographics.employment.worker||0)+(e.demographics.employment.nonWorker||0);if(e.demographics.employment.worker){const Te=qt>0?(e.demographics.employment.worker/qt*100).toFixed(1):"0.0";dt.push(["Employed",e.demographics.employment.worker.toString(),`${Te}%`])}if(e.demographics.employment.nonWorker){const Te=qt>0?(e.demographics.employment.nonWorker/qt*100).toFixed(1):"0.0";dt.push(["Unemployed",e.demographics.employment.nonWorker.toString(),`${Te}%`])}_1(W,{startY:ge,head:[dt[0]],body:dt.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:Ne,right:Ne}}),ge=W.lastAutoTable.finalY+10}Ye(80),W.setFontSize(16),W.setFont("helvetica","bold"),W.text("Skills & Services Analysis",Ne,ge),ge+=10,W.setFontSize(14),W.setFont("helvetica","bold"),W.text("Top Skills Distribution",Ne,ge),ge+=8;const tt=[["Skill","Users","Percentage"]],ee=Object.values(e.skills).reduce((dt,qt)=>dt+qt,0);Object.entries(e.skills).slice(0,10).forEach(([dt,qt])=>{const Te=ee>0?(qt/ee*100).toFixed(1):"0.0";tt.push([dt,qt.toString(),`${Te}%`])}),_1(W,{startY:ge,head:[tt[0]],body:tt.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:Ne,right:Ne}}),ge=W.lastAutoTable.finalY+10,Ye(60),W.setFontSize(14),W.setFont("helvetica","bold"),W.text("Popular Services",Ne,ge),ge+=8;const fe=[["Service","Bookings","Percentage"]],pe=e.popularServices.reduce((dt,qt)=>dt+qt.count,0);e.popularServices.slice(0,10).forEach(({service:dt,count:qt})=>{const Te=pe>0?(qt/pe*100).toFixed(1):"0.0";fe.push([dt,qt.toString(),`${Te}%`])}),_1(W,{startY:ge,head:[fe[0]],body:fe.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:Ne,right:Ne}}),ge=W.lastAutoTable.finalY+15,W.addPage(),ge=Ne,W.setFontSize(18),W.setFont("helvetica","bold"),W.text("Visual Analytics",Ne,ge),ge+=15;const we=[{ref:d,title:"User Registration Trends",height:80,getInsights:()=>M(e,c)},{ref:g,title:"Age Distribution",height:60,getInsights:()=>I(e)},{ref:x,title:"Employment Status",height:60,getInsights:()=>R(e)},{ref:C,title:"Skills Distribution",height:80,getInsights:()=>D(e)},{ref:N,title:"Popular Services",height:70,getInsights:()=>V(e)},{ref:B,title:"Service Provider Network",height:70,getInsights:()=>G(e)}];for(const dt of we)if(dt.ref?.current)try{Ye(dt.height+40),W.setFontSize(14),W.setFont("helvetica","bold"),W.text(dt.title||"Untitled Chart",Ne,ge),ge+=10;const qt=await X8(dt.ref.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",ignoreElements:Pt=>{const Sr=window.getComputedStyle(Pt);return Sr.display==="none"||Sr.visibility==="hidden"}}),Te=qt.toDataURL("image/png"),at=de-2*Ne,kt=qt.height*at/qt.width;W.addImage(Te,"PNG",Ne,ge,at,kt),ge+=kt+8,W.setFontSize(10),W.setFont("helvetica","italic"),W.setTextColor(100,100,100);const ze=dt.getInsights?dt.getInsights():"No insights available.",Et=W.splitTextToSize(`${ze}`,de-2*Ne);W.text(Et,Ne,ge),ge+=Et.length*10*.4+12,W.setTextColor(0,0,0)}catch(qt){console.error(`Chart capture failed (${dt.title}):`,qt),ge+=10}Ye(60),W.setFontSize(16),W.setFont("helvetica","bold"),W.text("Comprehensive Summary",Ne,ge),ge+=12,W.setFontSize(11),W.setFont("helvetica","normal");const Le=Z(e,c),lt=W.splitTextToSize(Le,de-2*Ne);W.text(lt,Ne,ge),ge+=lt.length*11*.4+15;const rt=W.internal.getNumberOfPages();for(let dt=1;dt<=rt;dt++)W.setPage(dt),W.setFontSize(8),W.setFont("helvetica","normal"),W.text(`Page ${dt} of ${rt}`,de/2,Ee-10,{align:"center"}),W.text(`SkillConnect Analytics Report - ${new Date().toLocaleDateString()}`,Ne,Ee-10);const gt=`skillconnect-analytics-report-${new Date().toISOString().split("T")[0]}.pdf`;W.save(gt),Qr.dismiss(),Qr.success("PDF report generated successfully!")}catch(W){console.error("PDF generation failed:",W),Qr.dismiss(),Qr.error("Failed to generate PDF report")}};if(r)return p.jsxs("div",{className:"analytics-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"System Analytics"}),p.jsx("p",{className:"header-description",children:"Loading analytics data..."})]})}),p.jsx("div",{className:"analytics-card loading-card",children:p.jsx("div",{className:"loading-wrapper",children:p.jsx("div",{className:"loader"})})})]});if(n)return p.jsxs("div",{className:"analytics-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"System Analytics"}),p.jsx("p",{className:"header-description",children:"Error loading analytics data"})]})}),p.jsx("div",{className:"analytics-card error-card",children:p.jsxs("div",{className:"error-message",children:[p.jsx("h3",{children:" Error Loading Data"}),p.jsx("p",{children:n}),n.includes("Cannot connect to the server")&&p.jsxs("div",{className:"connection-help",children:[p.jsx("p",{children:p.jsx("strong",{children:"Troubleshooting steps:"})}),p.jsxs("ul",{children:[p.jsx("li",{children:"Ensure the backend server is running on port 4000"}),p.jsx("li",{children:"Check if the server address (192.168.1.3:4000) is correct"}),p.jsx("li",{children:"Verify your network connection"}),p.jsx("li",{children:"Check if the API base URL in your environment variables is correct"})]})]}),p.jsxs("button",{onClick:X,className:"retry-btn",children:[p.jsx(Av,{})," Retry"]})]})})]});const ae={labels:e.totalsOverTime.labels,datasets:[{label:"New User Registrations",data:e.totalsOverTime.values,borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.1)",tension:.4,fill:!0}]},ce={labels:Object.keys(e.skills).slice(0,10),datasets:[{label:"Users with Skill",data:Object.values(e.skills).slice(0,10),backgroundColor:["#2563eb","#16a34a","#ca8a04","#dc2626","#7c3aed","#ea580c","#0891b2","#be185d","#4b5563","#0f766e"]}]},se={labels:Object.keys(e.demographics.ageGroups||{}),datasets:[{label:"Users by Age Group",data:Object.values(e.demographics.ageGroups||{}),backgroundColor:"#2563eb"}]},ue={labels:e.popularServices.slice(0,8).map(W=>W.service.length>15?W.service.substring(0,15)+"...":W.service),datasets:[{label:"Service Bookings",data:e.popularServices.slice(0,8).map(W=>W.count),backgroundColor:"#16a34a"}]},re={labels:["Employed","Unemployed"],datasets:[{label:"Employment Status",data:[e.demographics.employment?.worker||0,e.demographics.employment?.nonWorker||0],backgroundColor:["#16a34a","#dc2626"],borderWidth:2,borderColor:"#ffffff"}]};return p.jsxs("div",{className:"analytics-container",children:[p.jsxs("div",{className:"analytics-header",children:[p.jsxs("div",{children:[p.jsx("h1",{children:"System Analytics Dashboard"}),p.jsx("p",{className:"header-description",children:"Real-time insights from database analytics"})]}),p.jsxs("div",{className:"header-actions",children:[p.jsxs("select",{value:c,onChange:W=>s(W.target.value),className:"time-select",children:[p.jsx("option",{value:"6",children:" Last 6 months"}),p.jsx("option",{value:"12",children:" Last 12 months"}),p.jsx("option",{value:"24",children:" Last 24 months"})]}),p.jsxs("button",{onClick:X,className:"refresh-btn",title:"Refresh data",children:[p.jsx(Av,{})," Refresh"]})]})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" Platform Overview"}),p.jsx("div",{className:"card-subinfo",children:"Real-time metrics from database"})]}),p.jsxs("div",{className:"metrics-grid",children:[p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon users",children:p.jsx(od,{})}),p.jsx("h3",{className:"metric-title",children:"Total Users"}),p.jsx("p",{className:"metric-value",children:typeof e.totals?.totalUsers=="number"?e.totals.totalUsers.toLocaleString():0}),p.jsx("div",{className:"metric-description",children:"Registered platform users"})]}),p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon providers",children:p.jsx(wf,{})}),p.jsx("h3",{className:"metric-title",children:"Service Providers"}),p.jsx("p",{className:"metric-value",children:typeof e.totals?.serviceProviders=="number"?e.totals.serviceProviders.toLocaleString():0}),p.jsx("div",{className:"metric-description",children:"Active service providers"})]}),p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon bookings",children:p.jsx(Mj,{})}),p.jsx("h3",{className:"metric-title",children:"Total Requests"}),p.jsx("p",{className:"metric-value",children:typeof e.totalBookings=="number"?e.totalBookings.toLocaleString():0}),p.jsx("div",{className:"metric-description",children:"Completed service requests"})]}),p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon jobfairs",children:p.jsx(Ok,{})}),p.jsx("h3",{className:"metric-title",children:"Active Users"}),p.jsx("p",{className:"metric-value",children:typeof e.activeUsers=="number"?e.activeUsers.toLocaleString():0}),p.jsx("div",{className:"metric-description",children:"~70% of total users"})]})]})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" User Registration Trends"}),p.jsx("div",{className:"card-subinfo",children:"Monthly user growth over time"})]}),p.jsx("div",{className:"chart-container user-growth-chart",ref:d,children:p.jsx(oH,{data:ae,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2.5,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsx("div",{className:"card-header",children:p.jsx("h2",{children:" User Demographics"})}),p.jsxs("div",{className:"charts-grid",children:[p.jsxs("div",{className:"chart-item",children:[p.jsx("h4",{children:"Age Distribution"}),p.jsxs("div",{className:"chart-wrapper age-distribution-chart",ref:g,children:[p.jsx(Mb,{data:se,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(W){return`${W.label}: ${W.parsed.y} users`}}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}},x:{ticks:{maxRotation:0,minRotation:0}}}}}),p.jsx("div",{className:"card-subinfo",children:"Age distribution and employment status"})]})]}),p.jsxs("div",{className:"chart-item",children:[p.jsx("h4",{children:"Employment Status"}),p.jsx("div",{className:"chart-wrapper employment-chart",ref:x,children:p.jsx(e3,{data:re,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1.2,plugins:{legend:{position:"bottom",labels:{boxWidth:10,font:{size:10},padding:10}},tooltip:{callbacks:{label:function(W){const de=W.label||"",Ee=W.parsed||0,Ne=W.dataset.data.reduce((Pe,Ye)=>Pe+Ye,0),ge=Ne>0?Math.round(Ee/Ne*100):0;return`${de}: ${Ee} (${ge}%)`}}}},cutout:"65%"}})}),p.jsx("div",{className:"employment-summary",children:p.jsxs("div",{className:"employment-rate",children:[p.jsx("span",{className:"rate-label",children:"Employment Rate:"}),p.jsxs("span",{className:"rate-value",children:[(()=>{const W=e.demographics.employment?.worker||0,de=e.demographics.employment?.nonWorker||0,Ee=W+de;return Ee>0?Math.round(W/Ee*100):0})(),"%"]})]})})]})]})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsx("div",{className:"card-header",children:p.jsx("h2",{children:" Skills & Services Analysis"})}),p.jsxs("div",{className:"charts-grid",children:[p.jsxs("div",{className:"chart-item",children:[p.jsx("h4",{children:"Top Skills Distribution"}),p.jsxs("div",{className:"chart-wrapper skills-chart",ref:C,children:[p.jsx(e3,{data:ce,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1.5,plugins:{legend:{position:"right",labels:{boxWidth:15,font:{size:11}}}}}}),p.jsx("div",{className:"card-subinfo",children:"Most demanded skills and popular services"})]})]}),p.jsxs("div",{className:"chart-item",children:[p.jsx("h4",{children:"Popular Services"}),p.jsx("div",{className:"chart-wrapper services-chart",ref:N,children:p.jsx(Mb,{data:ue,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(W){return`${W.label}: ${W.parsed.y} bookings`}}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}},x:{ticks:{maxRotation:45,minRotation:45}}}}})})]})]})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" Service Provider Network"}),p.jsx("div",{className:"card-subinfo",children:"Provider distribution by role and skills"})]}),p.jsx("div",{className:"chart-container provider-chart",ref:B,children:p.jsx(Mb,{data:{labels:Object.keys(e.skilledPerTrade.byRole||{}),datasets:[{label:"Users by Role",data:Object.values(e.skilledPerTrade.byRole||{}),backgroundColor:["#2563eb","#16a34a","#ca8a04","#dc2626","#7c3aed","#ea580c","#0891b2","#be185d","#4b5563","#0f766e"],borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2.5,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(W){const de=W.parsed.y,Ee=W.dataset.data.reduce((ge,Pe)=>ge+Pe,0),Ne=Ee>0?Math.round(de/Ee*100):0;return`${W.label}: ${de} users (${Ne}%)`}}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}},x:{ticks:{maxRotation:45,minRotation:45}}}}})})]}),p.jsxs("button",{className:"fixed-export-btn",onClick:le,title:"Export Full Report",children:[p.jsx(E4,{})," Export Full Report"]})]})},oY=()=>{const[e,t]=_e.useState({totals:{totalUsers:0,serviceProviders:0,totalPopulation:0},demographics:{ageGroups:{},employment:{}},skills:{},skilledPerTrade:{byRole:{},bySkill:{}},mostBookedServices:{},totalsOverTime:{labels:[],values:[]},activeUsers:0,totalBookings:0,popularServices:[]}),[r,i]=_e.useState({barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]}),[n,a]=_e.useState(!0),[c,s]=_e.useState(null),[d,g]=_e.useState("12");_e.useEffect(()=>{x()},[d]),_e.useEffect(()=>{e.totals.totalUsers>0&&C()},[e]);const x=async()=>{a(!0),s(null);try{const[B,M,I,R,D,V]=await Promise.all([Cr.get("/reports/totals"),Cr.get("/reports/demographics"),Cr.get("/reports/skills"),Cr.get("/reports/skilled-per-trade"),Cr.get("/reports/most-booked-services"),Cr.get(`/reports/totals-over-time?months=${d}`)]),G=B.data?.data||B.data||{},Z=M.data?.data||M.data||{},X=I.data?.data||I.data||{},le=R.data?.data||R.data||{},ae=D.data?.data||D.data||{},ce=V.data?.data||V.data||{labels:[],values:[]},se=typeof ae=="object"&&ae!==null?Object.values(ae).filter(re=>typeof re=="number").reduce((re,W)=>re+W,0):0,ue=typeof ae=="object"&&ae!==null?Object.entries(ae).filter(([re,W])=>typeof W=="number").map(([re,W])=>({service:re,count:W})).sort((re,W)=>W.count-re.count).slice(0,10):[];t({totals:G,demographics:Z,skills:X,skilledPerTrade:le,mostBookedServices:ae,totalsOverTime:ce,activeUsers:Math.floor((G?.totalUsers||0)*.7),totalBookings:se,popularServices:ue}),Qr.success("Analytics data loaded successfully!")}catch(B){console.error("Failed to fetch analytics data:",B);const M=B.response?.data?.message||B.message||"Failed to load analytics data";s(M),Qr.error(M)}finally{a(!1)}},C=async()=>{try{a(!0),console.log(" Sending analytics data to AI:",e);const B=await Cr.post("/admin/ai/recommendations",e);if(console.log(" AI Response:",B),console.log(" Response Data:",B.data),console.log(" Response Data.data:",B.data.data),B.data.success){const M=B.data.data;console.log(" AI Recommendations received:",M);const I={barangayProjects:[wf,qx,Lj,jj],skillsTraining:[od,wf,qx,Qj],communityPrograms:[FC,od],priorityActions:[od,qx,wf]};Object.keys(M).forEach(R=>{M[R]&&Array.isArray(M[R])&&M[R].forEach((D,V)=>{const G=I[R]||[Hk];D.icon=G[V%G.length]})}),console.log(" After adding icons:",M),i(M),Qr.success("AI recommendations generated successfully!")}else throw console.error(" API response success is false:",B.data),new Error(B.data.message||"Failed to generate recommendations")}catch(B){console.error(" AI Recommendations Error:",B),console.error(" Error response:",B.response),Qr.error(B.response?.data?.message||"Failed to generate AI recommendations"),i({barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]})}finally{a(!1)}},N=()=>{try{const B=window.open("","_blank"),M=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>SkillConnect - System Recommendations Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .header { text-align: center; margin-bottom: 30px; }
            .section { margin-bottom: 30px; }
            .section h2 { color: #2563eb; border-bottom: 2px solid #2563eb; padding-bottom: 5px; }
            .recommendation { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
            .priority-critical { border-color: #dc2626; background: #fef2f2; }
            .priority-high { border-color: #ea580c; background: #fff7ed; }
            .priority-medium { border-color: #ca8a04; background: #fefce8; }
            .priority-low { border-color: #16a34a; background: #f0fdf4; }
            .metric { background: #f8fafc; padding: 10px; margin: 10px 0; border-radius: 5px; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>SkillConnect System Recommendations Report</h1>
            <p>Generated on ${new Date().toLocaleDateString()}</p>
            <p>Analysis Period: Last ${d} months</p>
          </div>

          <div class="metric">
            <h3>Key Metrics Summary</h3>
            <p>Total Users: ${e.totals.totalUsers?.toLocaleString()||0}</p>
            <p>Service Providers: ${e.totals.serviceProviders?.toLocaleString()||0}</p>
            <p>Employment Rate: ${(()=>{const I=e.demographics.employment?.worker||0,R=e.demographics.employment?.nonWorker||0,D=I+R;return D>0?(I/D*100).toFixed(1):0})()}%</p>
            <p>Total Service Bookings: ${e.totalBookings.toLocaleString()}</p>
          </div>

          <div class="section">
            <h2> Recommended Barangay Projects</h2>
            ${r.barangayProjects.map(I=>`
              <div class="recommendation priority-${I.priority.toLowerCase()}">
                <h3>${I.title}</h3>
                <p><strong>Description:</strong> ${I.description}</p>
                <p><strong>Priority:</strong> ${I.priority}</p>
                <p><strong>Impact:</strong> ${I.impact}</p>
                <p><strong>Rationale:</strong> ${I.rationale}</p>
                <p><strong>Estimated Cost:</strong> ${I.estimatedCost}</p>
                <p><strong>Timeline:</strong> ${I.timeline}</p>
              </div>
            `).join("")}
          </div>

          <div class="section">
            <h2> Skills Training Programs</h2>
            ${r.skillsTraining.map(I=>`
              <div class="recommendation priority-${I.priority.toLowerCase()}">
                <h3>${I.title}</h3>
                <p><strong>Description:</strong> ${I.description}</p>
                <p><strong>Target Audience:</strong> ${I.targetAudience}</p>
                <p><strong>Duration:</strong> ${I.duration}</p>
                <p><strong>Expected Participants:</strong> ${I.expectedParticipants}</p>
                <p><strong>Priority:</strong> ${I.priority}</p>
                <p><strong>Skills to Cover:</strong> ${I.skills.join(", ")}</p>
                <p><strong>Rationale:</strong> ${I.rationale}</p>
              </div>
            `).join("")}
          </div>

          <div class="section">
            <h2> Community Programs</h2>
            ${r.communityPrograms.map(I=>`
              <div class="recommendation">
                <h3>${I.title}</h3>
                <p><strong>Description:</strong> ${I.description}</p>
                <p><strong>Target Group:</strong> ${I.targetGroup}</p>
                <p><strong>Focus:</strong> ${I.focus}</p>
                <p><strong>Duration:</strong> ${I.duration}</p>
                <p><strong>Rationale:</strong> ${I.rationale}</p>
              </div>
            `).join("")}
          </div>

          <div class="section">
            <h2> Priority Actions</h2>
            ${r.priorityActions.map(I=>`
              <div class="recommendation priority-${I.priority.toLowerCase()}">
                <h3>${I.action}</h3>
                <p><strong>Description:</strong> ${I.description}</p>
                <p><strong>Timeline:</strong> ${I.timeline}</p>
                <p><strong>Responsible:</strong> ${I.responsible}</p>
                <p><strong>Priority:</strong> ${I.priority}</p>
              </div>
            `).join("")}
          </div>
        </body>
        </html>
      `;B.document.write(M),B.document.close(),B.print(),Qr.success("Recommendations report opened for printing!")}catch(B){console.error("Export failed:",B),Qr.error("Failed to export recommendations")}};return n?p.jsxs("div",{className:"analytics-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"System Recommendations"}),p.jsx("p",{className:"header-description",children:"AI-powered insights for barangay development..."})]})}),p.jsx("div",{className:"analytics-card loading-card",children:p.jsx("div",{className:"loading-wrapper",children:p.jsx("div",{className:"loader"})})})]}):c?p.jsxs("div",{className:"analytics-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"System Recommendations"}),p.jsx("p",{className:"header-description",children:"Error loading analytics data"})]})}),p.jsx("div",{className:"analytics-card error-card",children:p.jsxs("div",{className:"error-message",children:[p.jsx("h3",{children:" Error Loading Data"}),p.jsx("p",{children:c}),p.jsxs("button",{onClick:x,className:"retry-btn",children:[p.jsx(Av,{})," Retry"]})]})})]}):p.jsxs("div",{className:"analytics-container",children:[p.jsxs("div",{className:"analytics-header",children:[p.jsxs("div",{children:[p.jsx("h1",{children:" System Recommendations"}),p.jsx("p",{className:"header-description",children:"AI-powered insights for barangay projects and skills training based on system analytics"})]}),p.jsxs("div",{className:"header-actions",children:[p.jsxs("select",{value:d,onChange:B=>g(B.target.value),className:"time-select",children:[p.jsx("option",{value:"6",children:" Last 6 months"}),p.jsx("option",{value:"12",children:" Last 12 months"}),p.jsx("option",{value:"24",children:" Last 24 months"})]}),p.jsxs("button",{onClick:x,className:"refresh-btn",title:"Refresh data",children:[p.jsx(Av,{})," Refresh"]})]})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" Key Insights Driving Recommendations"}),p.jsx("div",{className:"card-subinfo",children:"Data-driven analysis summary"})]}),p.jsxs("div",{className:"metrics-grid",children:[p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon users",children:p.jsx(od,{})}),p.jsx("h3",{className:"metric-title",children:"Employment Rate"}),p.jsxs("p",{className:"metric-value",children:[(()=>{const B=e.demographics.employment?.worker||0,M=e.demographics.employment?.nonWorker||0,I=B+M;return I>0?Math.round(B/I*100):0})(),"%"]}),p.jsx("div",{className:"metric-description",children:(()=>{const B=(()=>{const M=e.demographics.employment?.worker||0,I=e.demographics.employment?.nonWorker||0,R=M+I;return R>0?M/R*100:0})();return B<50?"Critical - Immediate action needed":B<70?"Moderate - Improvement needed":"Good - Monitor and maintain"})()})]}),p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon bookings",children:p.jsx(wf,{})}),p.jsx("h3",{className:"metric-title",children:"Top Service Demand"}),p.jsx("p",{className:"metric-value",children:e.popularServices[0]?.service||"N/A"}),p.jsxs("div",{className:"metric-description",children:[e.popularServices[0]?.count||0," bookings"]})]}),p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon growth",children:p.jsx(qx,{})}),p.jsx("h3",{className:"metric-title",children:"User Growth"}),p.jsxs("p",{className:"metric-value",children:[e.totalsOverTime.values.length>1?Math.round((e.totalsOverTime.values[e.totalsOverTime.values.length-1]-e.totalsOverTime.values[e.totalsOverTime.values.length-2])/(e.totalsOverTime.values[e.totalsOverTime.values.length-2]||1)*100):0,"%"]}),p.jsx("div",{className:"metric-description",children:"Monthly growth rate"})]}),p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon skills",children:p.jsx(FC,{})}),p.jsx("h3",{className:"metric-title",children:"Skills Diversity"}),p.jsx("p",{className:"metric-value",children:Object.keys(e.skills).length}),p.jsx("div",{className:"metric-description",children:"Available skill categories"})]})]})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" Recommended Barangay Projects"}),p.jsx("div",{className:"card-subinfo",children:"Infrastructure and facility development based on community needs"})]}),p.jsx("div",{className:"recommendations-grid",children:r.barangayProjects&&r.barangayProjects.length>0?r.barangayProjects.map((B,M)=>p.jsxs("div",{className:`recommendation-card priority-${B.priority.toLowerCase()}`,children:[p.jsxs("div",{className:"recommendation-header",children:[p.jsx(B.icon,{className:"recommendation-icon"}),p.jsx("div",{className:"recommendation-priority",children:B.priority})]}),p.jsx("h3",{className:"recommendation-title",children:B.title}),p.jsx("p",{className:"recommendation-description",children:B.description}),p.jsxs("div",{className:"recommendation-details",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Impact:"})," ",B.impact]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Cost:"})," ",B.estimatedCost]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Timeline:"})," ",B.timeline]})]}),p.jsxs("div",{className:"recommendation-rationale",children:[p.jsx("strong",{children:"Why this project:"})," ",B.rationale]})]},M)):p.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999"},children:p.jsx("p",{children:"No barangay project recommendations available yet."})})})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" Skills Training Programs"}),p.jsx("div",{className:"card-subinfo",children:"Education and training initiatives to address skills gaps"})]}),p.jsx("div",{className:"recommendations-grid",children:r.skillsTraining&&r.skillsTraining.length>0?r.skillsTraining.map((B,M)=>p.jsxs("div",{className:`recommendation-card priority-${B.priority.toLowerCase()}`,children:[p.jsxs("div",{className:"recommendation-header",children:[p.jsx(B.icon,{className:"recommendation-icon"}),p.jsx("div",{className:"recommendation-priority",children:B.priority})]}),p.jsx("h3",{className:"recommendation-title",children:B.title}),p.jsx("p",{className:"recommendation-description",children:B.description}),p.jsxs("div",{className:"recommendation-details",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Target:"})," ",B.targetAudience]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Duration:"})," ",B.duration]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Participants:"})," ",B.expectedParticipants]})]}),p.jsxs("div",{className:"training-skills",children:[p.jsx("strong",{children:"Skills:"})," ",B.skills.join(", ")]}),p.jsxs("div",{className:"recommendation-rationale",children:[p.jsx("strong",{children:"Why this program:"})," ",B.rationale]})]},M)):p.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999"},children:p.jsx("p",{children:"No skills training recommendations available yet."})})})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" Community Programs"}),p.jsx("div",{className:"card-subinfo",children:"Inclusive programs for different community segments"})]}),p.jsx("div",{className:"recommendations-grid",children:r.communityPrograms&&r.communityPrograms.length>0?r.communityPrograms.map((B,M)=>p.jsxs("div",{className:"recommendation-card",children:[p.jsxs("div",{className:"recommendation-header",children:[p.jsx(B.icon,{className:"recommendation-icon"}),p.jsx("div",{className:"recommendation-priority",children:"Ongoing"})]}),p.jsx("h3",{className:"recommendation-title",children:B.title}),p.jsx("p",{className:"recommendation-description",children:B.description}),p.jsxs("div",{className:"recommendation-details",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Target Group:"})," ",B.targetGroup]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Focus:"})," ",B.focus]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Duration:"})," ",B.duration]})]}),p.jsxs("div",{className:"recommendation-rationale",children:[p.jsx("strong",{children:"Why this program:"})," ",B.rationale]})]},M)):p.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999"},children:p.jsx("p",{children:"No community programs recommendations available yet."})})})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" Priority Actions"}),p.jsx("div",{className:"card-subinfo",children:"Immediate steps to implement recommendations"})]}),p.jsx("div",{className:"priority-actions-list",children:r.priorityActions&&r.priorityActions.length>0?r.priorityActions.map((B,M)=>p.jsxs("div",{className:`priority-action priority-${B.priority.toLowerCase()}`,children:[p.jsxs("div",{className:"action-header",children:[p.jsx(B.icon,{className:"action-icon"}),p.jsx("div",{className:"action-priority",children:B.priority})]}),p.jsxs("div",{className:"action-content",children:[p.jsx("h3",{className:"action-title",children:B.action}),p.jsx("p",{className:"action-description",children:B.description}),p.jsxs("div",{className:"action-meta",children:[p.jsxs("span",{className:"action-timeline",children:[" ",B.timeline]}),p.jsxs("span",{className:"action-responsible",children:[" ",B.responsible]})]})]})]},M)):p.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999"},children:p.jsx("p",{children:"No priority actions available yet."})})})]}),p.jsxs("button",{className:"fixed-export-btn",onClick:N,title:"Export Recommendations Report",children:[p.jsx(E4,{})," Export Recommendations Report"]})]})},lY=()=>{const[e,t]=_e.useState([]),[r,i]=_e.useState([]),[n,a]=_e.useState(!0),[c,s]=_e.useState(""),[d,g]=_e.useState(null);_e.useEffect(()=>{setTimeout(()=>{const R=[{id:1,name:"Plumbing",userCount:156,previousUserCount:142,averageRating:4.7,color:"#FF6384",popularServices:["Pipe Repair","Installation","Maintenance"]},{id:2,name:"Electrical",userCount:132,previousUserCount:125,averageRating:4.8,color:"#36A2EB",popularServices:["Wiring","Appliance Repair","Installation"]},{id:3,name:"Carpentry",userCount:98,previousUserCount:105,averageRating:4.6,color:"#FFCE56",popularServices:["Furniture","Cabinets","Repairs"]},{id:4,name:"Painting",userCount:87,previousUserCount:78,averageRating:4.9,color:"#4BC0C0",popularServices:["Interior","Exterior","Decorative"]},{id:5,name:"Gardening",userCount:76,previousUserCount:82,averageRating:4.5,color:"#9966FF",popularServices:["Lawn Care","Landscaping","Tree Service"]},{id:6,name:"Cleaning",userCount:65,previousUserCount:58,averageRating:4.7,color:"#FF9F40",popularServices:["Deep Clean","Regular","Office"]},{id:7,name:"Appliance Repair",userCount:54,previousUserCount:50,averageRating:4.4,color:"#FF6384",popularServices:["Refrigerator","Washer","Dryer"]},{id:8,name:"Moving",userCount:43,previousUserCount:40,averageRating:4.6,color:"#C9CBCF",popularServices:["Local","Long Distance","Packing"]}],D=R.reduce((G,Z)=>G+Z.userCount,0),V=R.map((G,Z)=>({...G,percentage:(G.userCount/D*100).toFixed(1),rank:Z+1}));t(V),i(V),a(!1)},1e3)},[]),_e.useEffect(()=>{let R=e;c&&(R=R.filter(D=>D.name.toLowerCase().includes(c.toLowerCase())||D.popularServices.some(V=>V.toLowerCase().includes(c.toLowerCase())))),i(R)},[c,e]);const x=()=>{const R=e.reduce((V,G)=>V+G.userCount,0);let D=-90;return e.map(V=>{const G=V.userCount/R*100,Z=G/100*360,X=D,le=D+Z;return D+=Z,{...V,startAngle:X,endAngle:le,percentage:G}})},C=(R,D,V,G)=>{const Z=(G-90)*Math.PI/180;return{x:R+V*Math.cos(Z),y:D+V*Math.sin(Z)}},N=(R,D,V,G,Z)=>{const X=C(R,D,V,Z),le=C(R,D,V,G),ae=Z-G<=180?"0":"1";return["M",R,D,"L",X.x,X.y,"A",V,V,0,ae,0,le.x,le.y,"Z"].join(" ")},B=(R,D)=>R>D?"up":R<D?"down":"stable",M=R=>{const D=[],V=Math.floor(R),G=R%1!==0;for(let X=0;X<V;X++)D.push(p.jsx(FaStar,{className:"star filled"},X));G&&D.push(p.jsx(FaStar,{className:"star half"},"half"));const Z=5-Math.ceil(R);for(let X=0;X<Z;X++)D.push(p.jsx(FaStar,{className:"star empty"},`empty-${X}`));return D},I=x();return p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
        .skill-categories-container {
          background: #fff;
          border-radius: 10px;
          padding: 20px;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
          margin-bottom: 20px;
        }
       
        .page-header {
          display: flex;
          align-items: center;
          margin-bottom: 15px;
        }
       
        .page-title {
          font-size: 1.5rem;
          font-weight: 600;
          color: #333;
          margin: 0;
          display: flex;
          align-items: center;
        }
       
        .page-title .icon {
          margin-right: 10px;
          color: #0a84ff;
        }
       
        .intro-text {
          color: #666;
          font-size: 0.9rem;
          margin-bottom: 25px;
          line-height: 1.5;
        }
       
        .content-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        }
       
        .chart-container {
          background: #f9f9f9;
          border-radius: 8px;
          padding: 20px;
          display: flex;
          flex-direction: column;
          align-items: center;
        }
       
        .chart-title {
          font-size: 1.1rem;
          font-weight: 600;
          color: #333;
          margin: 0 0 20px 0;
          display: flex;
          align-items: center;
        }
       
        .chart-title .icon {
          margin-right: 8px;
          color: #0a84ff;
        }
       
        .pie-chart-container {
          position: relative;
          width: 250px;
          height: 250px;
        }
       
        .pie-chart-svg {
          width: 100%;
          height: 100%;
        }
       
        .pie-segment {
          cursor: pointer;
          transition: transform 0.2s;
        }
       
        .pie-segment:hover {
          transform: scale(1.05);
          filter: brightness(1.1);
        }
       
        .pie-legend {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 10px;
          margin-top: 20px;
        }
       
        .legend-item {
          display: flex;
          align-items: center;
          font-size: 0.8rem;
        }
       
        .legend-color {
          width: 12px;
          height: 12px;
          border-radius: 2px;
          margin-right: 5px;
        }
       
        .stats-container {
          background: #f9f9f9;
          border-radius: 8px;
          padding: 20px;
        }
       
        .stats-title {
          font-size: 1.1rem;
          font-weight: 600;
          color: #333;
          margin: 0 0 20px 0;
          display: flex;
          align-items: center;
        }
       
        .stats-title .icon {
          margin-right: 8px;
          color: #0a84ff;
        }
       
        .stat-item {
          display: flex;
          justify-content: space-between;
          padding: 10px 0;
          border-bottom: 1px solid #eee;
        }
       
        .stat-item:last-child {
          border-bottom: none;
        }
       
        .stat-label {
          font-weight: 500;
          color: #555;
        }
       
        .stat-value {
          font-weight: 600;
          color: #333;
        }
       
        .filters-container {
          display: flex;
          flex-wrap: wrap;
          gap: 15px;
          margin-bottom: 20px;
        }
       
        .search-container {
          flex: 1;
          min-width: 200px;
          position: relative;
        }
       
        .search-input {
          width: 100%;
          padding: 10px 15px 10px 40px;
          border: 1px solid #ddd;
          border-radius: 6px;
          font-size: 0.9rem;
        }
       
        .search-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          color: #999;
        }
       
        .data-table-container {
          overflow-x: auto;
        }
       
        .data-table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 10px;
        }
       
        .data-table th {
          background: #f1f3f7;
          padding: 12px 15px;
          text-align: left;
          font-weight: 600;
          color: #333;
          font-size: 0.85rem;
          border-bottom: 2px solid #e9ecef;
        }
       
        .data-table td {
          padding: 12px 15px;
          border-bottom: 1px solid #e9ecef;
          font-size: 0.85rem;
          color: #555;
        }
       
        .data-table tr:hover {
          background: #f9f9f9;
        }
       
        .rank-badge {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          width: 28px;
          height: 28px;
          border-radius: 50%;
          font-weight: 600;
          font-size: 0.8rem;
        }
       
        .rank-1 {
          background: #ffd700;
          color: #333;
        }
       
        .rank-2 {
          background: #c0c0c0;
          color: #333;
        }
       
        .rank-3 {
          background: #cd7f32;
          color: #fff;
        }
       
        .rank-default {
          background: #e9ecef;
          color: #555;
        }
       
        .category-info {
          display: flex;
          flex-direction: column;
        }
       
        .category-name {
          font-weight: 600;
          color: #333;
        }
       
        .popular-services {
          font-size: 0.75rem;
          color: #666;
          margin-top: 3px;
        }
       
        .user-count {
          display: flex;
          align-items: center;
        }
       
        .count-value {
          font-weight: 600;
          margin-right: 5px;
        }
       
        .trend {
          display: flex;
          align-items: center;
        }
       
        .trend.up {
          color: #28a745;
        }
       
        .trend.down {
          color: #dc3545;
        }
       
        .trend.stable {
          color: #6c757d;
        }
       
        .percentage-bar {
          display: inline-block;
          height: 6px;
          background: #e9ecef;
          border-radius: 3px;
          width: 50px;
          margin-right: 8px;
          position: relative;
        }
       
        .percentage-fill {
          height: 100%;
          background: #0a84ff;
          border-radius: 3px;
        }
       
        .rating-container {
          display: flex;
          align-items: center;
        }
       
        .star {
          color: #ddd;
          font-size: 0.8rem;
        }
       
        .star.filled {
          color: #ffc107;
        }
       
        .star.half {
          color: #ffc107;
          opacity: 0.7;
        }
       
        .action-buttons {
          display: flex;
          gap: 8px;
        }
       
        .action-btn {
          padding: 6px 10px;
          border: none;
          border-radius: 4px;
          font-size: 0.8rem;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 5px;
          transition: all 0.2s;
        }
       
        .view-btn {
          background: #0a84ff;
          color: white;
        }
       
        .view-btn:hover {
          background: #0077e6;
        }
       
        .loading-container {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 200px;
        }
       
        .spinner {
          width: 40px;
          height: 40px;
          border: 4px solid #f3f3f3;
          border-top: 4px solid #0a84ff;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        }
       
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
       
        .no-results {
          text-align: center;
          padding: 20px;
          color: #666;
        }
       
        .tooltip {
          position: absolute;
          background: rgba(0, 0, 0, 0.8);
          color: white;
          padding: 8px 12px;
          border-radius: 4px;
          font-size: 0.8rem;
          pointer-events: none;
          z-index: 1000;
        }
       
        @media (max-width: 1024px) {
          .content-grid {
            grid-template-columns: 1fr;
          }
        }
       
        @media (max-width: 768px) {
          .filters-container {
            flex-direction: column;
          }
         
          .search-container {
            min-width: 100%;
          }
         
          .data-table th, .data-table td {
            padding: 8px 10px;
            font-size: 0.75rem;
          }
         
          .pie-chart-container {
            width: 200px;
            height: 200px;
          }
        }
      `}),p.jsxs("div",{className:"skill-categories-container",children:[p.jsx("div",{className:"page-header",children:p.jsxs("h1",{className:"page-title",children:[p.jsx(kC,{className:"icon"}),"Skill Categories"]})}),p.jsxs("p",{className:"intro-text",children:[p.jsx(T4,{style:{marginRight:"5px",color:"#0a84ff"}}),"This page provides an overview of all skill categories available on the platform. Analyze the distribution of service providers across different categories to understand market trends and identify opportunities for growth."]}),n?p.jsx("div",{className:"loading-container",children:p.jsx("div",{className:"spinner"})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"content-grid",children:[p.jsxs("div",{className:"chart-container",children:[p.jsxs("h2",{className:"chart-title",children:[p.jsx(kC,{className:"icon"}),"Category Distribution"]}),p.jsxs("div",{className:"pie-chart-container",children:[p.jsx("svg",{className:"pie-chart-svg",viewBox:"0 0 250 250",children:I.map((R,D)=>p.jsx("path",{d:N(125,125,100,R.startAngle,R.endAngle),fill:R.color,className:"pie-segment",onMouseEnter:()=>g(R),onMouseLeave:()=>g(null)},R.id))}),d&&p.jsxs("div",{className:"tooltip",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[p.jsx("div",{children:d.name}),p.jsxs("div",{children:[d.userCount," users (",d.percentage,"%)"]})]})]}),p.jsx("div",{className:"pie-legend",children:e.map(R=>p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-color",style:{backgroundColor:R.color}}),p.jsx("span",{children:R.name})]},R.id))})]}),p.jsxs("div",{className:"stats-container",children:[p.jsxs("h2",{className:"stats-title",children:[p.jsx(FaUsers,{className:"icon"}),"Category Statistics"]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Total Categories"}),p.jsx("span",{className:"stat-value",children:e.length})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Total Service Providers"}),p.jsx("span",{className:"stat-value",children:e.reduce((R,D)=>R+D.userCount,0)})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Most Popular Category"}),p.jsx("span",{className:"stat-value",children:e.length>0?e[0].name:"N/A"})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Highest Rated Category"}),p.jsx("span",{className:"stat-value",children:e.length>0?e.reduce((R,D)=>D.averageRating>R.averageRating?D:R).name:"N/A"})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Growing Categories"}),p.jsx("span",{className:"stat-value",children:e.filter(R=>B(R.userCount,R.previousUserCount)==="up").length})]})]})]}),p.jsx("div",{className:"filters-container",children:p.jsxs("div",{className:"search-container",children:[p.jsx(Vk,{className:"search-icon"}),p.jsx("input",{type:"text",className:"search-input",placeholder:"Search by category or service...",value:c,onChange:R=>s(R.target.value)})]})}),r.length>0?p.jsx("div",{className:"data-table-container",children:p.jsxs("table",{className:"data-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Rank"}),p.jsx("th",{children:"Skill (Category)"}),p.jsx("th",{children:"User Count"}),p.jsx("th",{children:"Percentage"}),p.jsx("th",{children:"Avg. Rating"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:r.map((R,D)=>p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("span",{className:`rank-badge ${D+1===1?"rank-1":D+1===2?"rank-2":D+1===3?"rank-3":"rank-default"}`,children:D+1})}),p.jsx("td",{children:p.jsxs("div",{className:"category-info",children:[p.jsx("div",{className:"category-name",children:R.name}),p.jsxs("div",{className:"popular-services",children:["Popular: ",R.popularServices.join(", ")]})]})}),p.jsx("td",{children:p.jsxs("div",{className:"user-count",children:[p.jsx("span",{className:"count-value",children:R.userCount}),p.jsxs("div",{className:`trend ${B(R.userCount,R.previousUserCount)}`,children:[B(R.userCount,R.previousUserCount)==="up"&&p.jsx(FaTrendingUp,{}),B(R.userCount,R.previousUserCount)==="down"&&p.jsx(FaTrendingDown,{})]})]})}),p.jsx("td",{children:p.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[p.jsx("div",{className:"percentage-bar",children:p.jsx("div",{className:"percentage-fill",style:{width:`${R.percentage}%`}})}),R.percentage,"%"]})}),p.jsx("td",{children:p.jsxs("div",{className:"rating-container",children:[M(R.averageRating),p.jsx("span",{style:{marginLeft:"5px",fontSize:"0.8rem"},children:R.averageRating})]})}),p.jsx("td",{children:p.jsx("div",{className:"action-buttons",children:p.jsxs("button",{className:"action-btn view-btn",children:[p.jsx(FaEye,{}),"View"]})})})]},R.id))})]})}):p.jsx("div",{className:"no-results",children:"No categories found matching your criteria."})]})]})]})},cY=()=>{const e=Va(),[t,r]=_e.useState("general"),[i,n]=_e.useState(!0),[a,c]=_e.useState(!1),[s,d]=_e.useState({siteName:"SkillConnect4B410",siteDescription:"Connecting skilled workers with community needs",contactEmail:"",contactPhone:"",maintenanceMode:!1,allowRegistrations:!0,maxFileSize:5*1024*1024,allowedFileTypes:["image/jpeg","image/png","image/gif","application/pdf"],notificationSettings:{emailNotifications:!0,pushNotifications:!0,smsNotifications:!1},systemSettings:{timezone:"Asia/Manila",currency:"PHP",language:"en"}}),[g,x]=_e.useState({version:"1.0.0",uptime:"0 days, 0 hours, 0 minutes",lastBackup:"Never",dbSize:"0 MB",activeUsers:0,totalBookings:0,totalUsers:0,serviceProviders:0});_e.useEffect(()=>{C(),N()},[]);const C=async()=>{try{n(!0);const D=await Cr.get("/admin/settings");D.data.success&&D.data.settings&&d(V=>({...V,...D.data.settings}))}catch(D){console.error("Failed to fetch settings:",D),Qr.error("Failed to load settings")}finally{n(!1)}},N=async()=>{try{const[D,V]=await Promise.all([Cr.get("/reports/totals").catch(()=>null),Cr.get("/admin/dashboard-metrics").catch(()=>null)]),G=D?.data?.data||D?.data||{},Z=V?.data?.data||V?.data||{};x(X=>({...X,totalUsers:G.totalUsers||0,serviceProviders:G.serviceProviders||0,totalBookings:Z.totalBookings||G.totalBookings||0,activeUsers:G.totalUsers?Math.floor(G.totalUsers*.7):0}))}catch(D){console.error("Failed to fetch system info:",D)}},B=(D,V,G=null)=>{d(G?Z=>({...Z,[G]:{...Z[G],[D]:V}}):Z=>({...Z,[D]:V}))},M=async()=>{c(!0);try{(await Cr.put("/admin/settings",s)).data.success?(Qr.success("Settings saved successfully!"),await C()):Qr.error("Failed to save settings")}catch(D){console.error("Failed to save settings:",D),Qr.error(D.response?.data?.message||"Failed to save settings")}finally{c(!1)}},I=async()=>{try{Qr.loading("Creating backup..."),await new Promise(D=>setTimeout(D,2e3)),Qr.dismiss(),Qr.success("Backup created successfully!")}catch{Qr.dismiss(),Qr.error("Backup failed")}},R=()=>{if(i)return p.jsxs("div",{className:"settings-loading",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Loading settings..."})]});switch(t){case"general":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"General Settings"}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"siteName",children:"Site Name"}),p.jsx("input",{type:"text",id:"siteName",value:s.siteName,onChange:D=>B("siteName",D.target.value),placeholder:"Enter site name"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"siteDescription",children:"Site Description"}),p.jsx("textarea",{id:"siteDescription",rows:"3",value:s.siteDescription,onChange:D=>B("siteDescription",D.target.value),placeholder:"Enter site description"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"contactEmail",children:"Contact Email"}),p.jsx("input",{type:"email",id:"contactEmail",value:s.contactEmail,onChange:D=>B("contactEmail",D.target.value),placeholder:"admin@skillconnect.com"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"contactPhone",children:"Contact Phone"}),p.jsx("input",{type:"text",id:"contactPhone",value:s.contactPhone,onChange:D=>B("contactPhone",D.target.value),placeholder:"+63 XXX XXX XXXX"})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:s.maintenanceMode,onChange:D=>B("maintenanceMode",D.target.checked)}),p.jsx("span",{children:"Maintenance Mode"})]}),p.jsx("p",{className:"form-help",children:"When enabled, the site will display a maintenance message to all users except administrators."})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:s.allowRegistrations,onChange:D=>B("allowRegistrations",D.target.checked)}),p.jsx("span",{children:"Allow New Registrations"})]}),p.jsx("p",{className:"form-help",children:"When disabled, new user registrations will be blocked."})]})]})]});case"notifications":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"Notification Settings"}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:s.notificationSettings?.emailNotifications,onChange:D=>B("emailNotifications",D.target.checked,"notificationSettings")}),p.jsx("span",{children:"Email Notifications"})]}),p.jsx("p",{className:"form-help",children:"Receive important system notifications via email."})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:s.notificationSettings?.pushNotifications,onChange:D=>B("pushNotifications",D.target.checked,"notificationSettings")}),p.jsx("span",{children:"Push Notifications"})]}),p.jsx("p",{className:"form-help",children:"Receive browser push notifications when logged in."})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:s.notificationSettings?.smsNotifications,onChange:D=>B("smsNotifications",D.target.checked,"notificationSettings")}),p.jsx("span",{children:"SMS Notifications"})]}),p.jsx("p",{className:"form-help",children:"Receive critical alerts via SMS message."})]})]})]});case"system":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"System Settings"}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"timezone",children:"Timezone"}),p.jsxs("select",{id:"timezone",value:s.systemSettings?.timezone,onChange:D=>B("timezone",D.target.value,"systemSettings"),children:[p.jsx("option",{value:"Asia/Manila",children:"Asia/Manila (PHT)"}),p.jsx("option",{value:"UTC",children:"UTC"}),p.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),p.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"currency",children:"Currency"}),p.jsxs("select",{id:"currency",value:s.systemSettings?.currency,onChange:D=>B("currency",D.target.value,"systemSettings"),children:[p.jsx("option",{value:"PHP",children:"PHP (Philippine Peso)"}),p.jsx("option",{value:"USD",children:"USD (US Dollar)"}),p.jsx("option",{value:"EUR",children:"EUR (Euro)"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"language",children:"Language"}),p.jsxs("select",{id:"language",value:s.systemSettings?.language,onChange:D=>B("language",D.target.value,"systemSettings"),children:[p.jsx("option",{value:"en",children:"English"}),p.jsx("option",{value:"tl",children:"Tagalog"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"maxFileSize",children:"Max File Size (MB)"}),p.jsx("input",{type:"number",id:"maxFileSize",min:"1",max:"50",value:s.maxFileSize?s.maxFileSize/(1024*1024):5,onChange:D=>B("maxFileSize",parseInt(D.target.value)*1024*1024)}),p.jsx("p",{className:"form-help",children:"Maximum file upload size in megabytes."})]})]})]});case"maintenance":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"System Maintenance"}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"system-info-card",children:[p.jsx("h3",{children:"System Information"}),p.jsxs("div",{className:"info-grid",children:[p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Version:"}),p.jsx("span",{className:"info-value",children:g.version})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Total Users:"}),p.jsx("span",{className:"info-value",children:g.totalUsers.toLocaleString()})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Service Providers:"}),p.jsx("span",{className:"info-value",children:g.serviceProviders.toLocaleString()})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Active Users:"}),p.jsx("span",{className:"info-value",children:g.activeUsers.toLocaleString()})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Total Bookings:"}),p.jsx("span",{className:"info-value",children:g.totalBookings.toLocaleString()})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Last Backup:"}),p.jsx("span",{className:"info-value",children:g.lastBackup})]})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("button",{className:"btn btn-secondary",onClick:I,children:[p.jsx(E4,{})," Create Backup Now"]}),p.jsx("p",{className:"form-help",children:"Create a manual backup of the system database."})]})]})]});case"terms":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"Terms & Policies"}),p.jsxs("div",{className:"policy-container",children:[p.jsxs("div",{className:"policy-section",children:[p.jsx("h3",{children:"Terms of Service"}),p.jsx("p",{children:"By using SkillConnect, you agree to our Terms of Service. These terms govern your use of our platform and services. Please read them carefully before using our services."})]}),p.jsxs("div",{className:"policy-section",children:[p.jsx("h3",{children:"Privacy Policy"}),p.jsx("p",{children:"We are committed to protecting your privacy. Our Privacy Policy explains how we collect, use, and safeguard your personal information when you use our platform."})]}),p.jsxs("div",{className:"policy-section",children:[p.jsx("h3",{children:"Cookie Policy"}),p.jsx("p",{children:"We use cookies to enhance your experience on our platform. Our Cookie Policy explains what cookies are, how we use them, and how you can manage your cookie preferences."})]}),p.jsxs("div",{className:"policy-section",children:[p.jsx("h3",{children:"Refund Policy"}),p.jsx("p",{children:"Our Refund Policy outlines the conditions under which refunds may be issued for services booked through our platform. Please review this policy before making a booking."})]})]})]});case"about":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"About Us"}),p.jsxs("div",{className:"about-container",children:[p.jsxs("div",{className:"about-section",children:[p.jsx("h3",{children:"Our Mission"}),p.jsx("p",{children:"SkillConnect is dedicated to connecting skilled service providers with community members who need their expertise. Our platform makes it easy to find, book, and review services in your local area."})]}),p.jsxs("div",{className:"about-section",children:[p.jsx("h3",{children:"Our Team"}),p.jsx("p",{children:"Our team consists of passionate developers, designers, and community organizers who believe in the power of local connections and skill sharing."})]}),p.jsxs("div",{className:"about-section",children:[p.jsx("h3",{children:"Contact Information"}),p.jsxs("div",{className:"contact-info",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Email:"})," ",s.contactEmail||"admin@skillconnect.com"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Phone:"})," ",s.contactPhone||"(123) 456-7890"]})]})]}),p.jsxs("div",{className:"about-section",children:[p.jsx("h3",{children:"Version History"}),p.jsx("div",{className:"version-history",children:p.jsxs("div",{className:"version-item",children:[p.jsx("span",{className:"version-number",children:"v1.0.0"}),p.jsx("span",{className:"version-date",children:"Current Version"}),p.jsx("span",{className:"version-desc",children:"Initial release with core functionality"})]})})]})]})]});default:return p.jsx("div",{className:"settings-content",children:"Select a settings section"})}};return p.jsxs("div",{className:"admin-settings-container",children:[p.jsxs("aside",{className:"settings-sidebar",children:[p.jsx("div",{className:"settings-header",children:p.jsxs("h1",{className:"settings-title",children:[p.jsx(TC,{className:"icon"}),"Settings"]})}),p.jsxs("nav",{className:"settings-nav",children:[p.jsxs("div",{className:"nav-section",children:[p.jsx("div",{className:"nav-section-title",children:"Configuration"}),p.jsxs("button",{className:`nav-link ${t==="general"?"active":""}`,onClick:()=>r("general"),children:[p.jsx(TC,{className:"nav-icon"}),"General Settings"]}),p.jsxs("button",{className:`nav-link ${t==="notifications"?"active":""}`,onClick:()=>r("notifications"),children:[p.jsx(Ij,{className:"nav-icon"}),"Notifications"]}),p.jsxs("button",{className:`nav-link ${t==="system"?"active":""}`,onClick:()=>r("system"),children:[p.jsx(Vj,{className:"nav-icon"}),"System Settings"]}),p.jsxs("button",{className:`nav-link ${t==="maintenance"?"active":""}`,onClick:()=>r("maintenance"),children:[p.jsx(wf,{className:"nav-icon"}),"Maintenance"]})]}),p.jsxs("div",{className:"nav-section",children:[p.jsx("div",{className:"nav-section-title",children:"Information"}),p.jsxs("button",{className:`nav-link ${t==="terms"?"active":""}`,onClick:()=>r("terms"),children:[p.jsx(Uj,{className:"nav-icon"}),"Terms & Policies"]}),p.jsxs("button",{className:`nav-link ${t==="about"?"active":""}`,onClick:()=>r("about"),children:[p.jsx(T4,{className:"nav-icon"}),"About Us"]})]})]})]}),p.jsxs("div",{className:"settings-content-wrapper",children:[p.jsx("div",{className:"settings-header-actions",children:p.jsxs("button",{className:"btn btn-back",onClick:()=>e("/admin/analytics"),children:[p.jsx(Vv,{})," Back to Dashboard"]})}),R(),t!=="terms"&&t!=="about"&&p.jsx("div",{className:"settings-actions",children:p.jsx("button",{className:"btn btn-primary",onClick:M,disabled:a,children:a?p.jsxs(p.Fragment,{children:[p.jsx(Av,{className:"spin"})," Saving..."]}):p.jsxs(p.Fragment,{children:[p.jsx(Hj,{})," Save Settings"]})})})]})]})},uY=()=>{const e=Va(),[t,r]=_e.useState(""),[i,n]=_e.useState(""),[a,c]=_e.useState(""),[s,d]=_e.useState(null),[g,x]=_e.useState(!1),[C,N]=_e.useState(""),B=I=>{d(I.target.files[0])},M=async I=>{if(I.preventDefault(),N(""),!t||!i||!a){N("Name, email, and password are required.");return}const R=new FormData;R.append("name",t),R.append("email",i),R.append("password",a),s&&R.append("profilePic",s);try{x(!0);const D=await Cr.post("/admin/auth/register",R);console.log(D.data),x(!1),e("/admin/login")}catch(D){x(!1),N(D.response?.data?.message||"Registration failed")}};return p.jsxs("div",{className:"container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"Admin Registration"}),p.jsx("p",{className:"header-description",children:"Register a new admin account"})]})}),C&&p.jsx("div",{className:"card error-message",children:C}),p.jsx("div",{className:"form-container",children:p.jsxs("form",{onSubmit:M,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Name"}),p.jsx("input",{type:"text",value:t,onChange:I=>r(I.target.value),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Email"}),p.jsx("input",{type:"email",value:i,onChange:I=>n(I.target.value),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Password"}),p.jsx("input",{type:"password",value:a,onChange:I=>c(I.target.value),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Profile Picture (Optional)"}),p.jsx("input",{type:"file",accept:"image/*",onChange:B})]}),p.jsx("div",{className:"actions-section",children:p.jsx("button",{type:"submit",disabled:g,className:"export-btn",children:g?"Registering...":"Register"})})]})})]})};var Z8=1252,hY=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],hB={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},AB=function(e){hY.indexOf(e)!=-1&&(Z8=hB[0]=e)};function AY(){AB(1252)}var OA=function(e){AB(e)};function Y8(){OA(1200),AY()}function bT(e){for(var t=[],r=0,i=e.length;r<i;++r)t[r]=e.charCodeAt(r);return t}function fY(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function J8(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var j1=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?fY(e.slice(2)):t==254&&r==255?J8(e.slice(2)):t==65279?e.slice(1):e},jy=function(t){return String.fromCharCode(t)},wT=function(t){return String.fromCharCode(t)},Sv,Ap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function BT(e){for(var t="",r=0,i=0,n=0,a=0,c=0,s=0,d=0,g=0;g<e.length;)r=e.charCodeAt(g++),a=r>>2,i=e.charCodeAt(g++),c=(r&3)<<4|i>>4,n=e.charCodeAt(g++),s=(i&15)<<2|n>>6,d=n&63,isNaN(i)?s=d=64:isNaN(n)&&(d=64),t+=Ap.charAt(a)+Ap.charAt(c)+Ap.charAt(s)+Ap.charAt(d);return t}function kh(e){var t="",r=0,i=0,n=0,a=0,c=0,s=0,d=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var g=0;g<e.length;)a=Ap.indexOf(e.charAt(g++)),c=Ap.indexOf(e.charAt(g++)),r=a<<2|c>>4,t+=String.fromCharCode(r),s=Ap.indexOf(e.charAt(g++)),i=(c&15)<<4|s>>2,s!==64&&(t+=String.fromCharCode(i)),d=Ap.indexOf(e.charAt(g++)),n=(s&3)<<6|d,d!==64&&(t+=String.fromCharCode(n));return t}var qn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),F0=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function bp(e){return qn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function CT(e){return qn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var jA=function(t){return qn?F0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function k0(e){if(Array.isArray(e))return e.map(function(i){return String.fromCharCode(i)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function fB(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return fB(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var sp=qn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:F0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var i=new Uint8Array(r),n=0;for(t=0,r=0;t<e.length;r+=n,++t)if(n=e[t].length,e[t]instanceof Uint8Array)i.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";i.set(new Uint8Array(e[t]),r)}return i}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function dY(e){for(var t=[],r=0,i=e.length+250,n=bp(e.length+255),a=0;a<e.length;++a){var c=e.charCodeAt(a);if(c<128)n[r++]=c;else if(c<2048)n[r++]=192|c>>6&31,n[r++]=128|c&63;else if(c>=55296&&c<57344){c=(c&1023)+64;var s=e.charCodeAt(++a)&1023;n[r++]=240|c>>8&7,n[r++]=128|c>>2&63,n[r++]=128|s>>6&15|(c&3)<<4,n[r++]=128|s&63}else n[r++]=224|c>>12&15,n[r++]=128|c>>6&63,n[r++]=128|c&63;r>i&&(t.push(n.slice(0,r)),r=0,n=bp(65535),i=65530)}return t.push(n.slice(0,r)),sp(t)}var Cu=/\u0000/g,O1=/[\u0001-\u0006]/g;function Zm(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function QA(e,t){var r=""+e;return r.length>=t?r:no("0",t-r.length)+r}function dB(e,t){var r=""+e;return r.length>=t?r:no(" ",t-r.length)+r}function G_(e,t){var r=""+e;return r.length>=t?r:r+no(" ",t-r.length)}function pY(e,t){var r=""+Math.round(e);return r.length>=t?r:no("0",t-r.length)+r}function mY(e,t){var r=""+e;return r.length>=t?r:no("0",t-r.length)+r}var ST=Math.pow(2,32);function Nm(e,t){if(e>ST||e<-ST)return pY(e,t);var r=Math.round(e);return mY(r,t)}function q_(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var ET=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Tw=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function gY(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var fn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},TT={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},vY={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function K_(e,t,r){for(var i=e<0?-1:1,n=e*i,a=0,c=1,s=0,d=1,g=0,x=0,C=Math.floor(n);g<t&&(C=Math.floor(n),s=C*c+a,x=C*g+d,!(n-C<5e-8));)n=1/(n-C),a=c,c=s,d=g,g=x;if(x>t&&(g>t?(x=d,s=a):(x=g,s=c)),!r)return[0,i*s,x];var N=Math.floor(i*s/x);return[N,i*s-N*x,x]}function l0(e,t,r){if(e>2958465||e<0)return null;var i=e|0,n=Math.floor(86400*(e-i)),a=0,c=[],s={D:i,T:n,u:86400*(e-i)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(s.u)<1e-6&&(s.u=0),t&&t.date1904&&(i+=1462),s.u>.9999&&(s.u=0,++n==86400&&(s.T=n=0,++i,++s.D)),i===60)c=r?[1317,10,29]:[1900,2,29],a=3;else if(i===0)c=r?[1317,8,29]:[1900,1,0],a=6;else{i>60&&--i;var d=new Date(1900,0,1);d.setDate(d.getDate()+i-1),c=[d.getFullYear(),d.getMonth()+1,d.getDate()],a=d.getDay(),i<60&&(a=(a+6)%7),r&&(a=BY(d,c))}return s.y=c[0],s.m=c[1],s.d=c[2],s.S=n%60,n=Math.floor(n/60),s.M=n%60,n=Math.floor(n/60),s.H=n,s.q=a,s}var eI=new Date(1899,11,31,0,0,0),xY=eI.getTime(),yY=new Date(1900,2,1,0,0,0);function tI(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=yY&&(r+=1440*60*1e3),(r-(xY+(e.getTimezoneOffset()-eI.getTimezoneOffset())*6e4))/(1440*60*1e3)}function pB(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function _Y(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function bY(e){var t=e<0?12:11,r=pB(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function wY(e){var t=pB(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Ev(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=bY(e):t===10?r=e.toFixed(10).substr(0,12):r=wY(e),pB(_Y(r.toUpperCase()))}function w0(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Ev(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return oA(14,tI(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function BY(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function CY(e,t,r,i){var n="",a=0,c=0,s=r.y,d,g=0;switch(e){case 98:s=r.y+543;case 121:switch(t.length){case 1:case 2:d=s%100,g=2;break;default:d=s%1e4,g=4;break}break;case 109:switch(t.length){case 1:case 2:d=r.m,g=t.length;break;case 3:return Tw[r.m-1][1];case 5:return Tw[r.m-1][0];default:return Tw[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:d=r.d,g=t.length;break;case 3:return ET[r.q][0];default:return ET[r.q][1]}break;case 104:switch(t.length){case 1:case 2:d=1+(r.H+11)%12,g=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:d=r.H,g=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:d=r.M,g=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?QA(r.S,t.length):(i>=2?c=i===3?1e3:100:c=i===1?10:1,a=Math.round(c*(r.S+r.u)),a>=60*c&&(a=0),t==="s"?a===0?"0":""+a/c:(n=QA(a,2+i),t==="ss"?n.substr(0,2):"."+n.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":d=r.D*24+r.H;break;case"[m]":case"[mm]":d=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":d=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}g=t.length===3?1:2;break;case 101:d=s,g=1;break}var x=g>0?QA(d,g):"";return x}function fp(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,i=e.substr(0,r);r!=e.length;r+=t)i+=(i.length>0?",":"")+e.substr(r,t);return i}var rI=/%/g;function SY(e,t,r){var i=t.replace(rI,""),n=t.length-i.length;return dd(e,i,r*Math.pow(10,2*n))+no("%",n)}function EY(e,t,r){for(var i=t.length-1;t.charCodeAt(i-1)===44;)--i;return dd(e,t.substr(0,i),r/Math.pow(10,3*(t.length-i)))}function iI(e,t){var r,i=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+iI(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%n;if(a<0&&(a+=n),r=(t/Math.pow(10,a)).toPrecision(i+1+(n+a)%n),r.indexOf("e")===-1){var c=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+a):r+="E+"+(c-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(s,d,g,x){return d+g+x.substr(0,(n+a)%n)+"."+x.substr(a)+"E"})}else r=t.toExponential(i);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var nI=/# (\?+)( ?)\/( ?)(\d+)/;function TY(e,t,r){var i=parseInt(e[4],10),n=Math.round(t*i),a=Math.floor(n/i),c=n-a*i,s=i;return r+(a===0?"":""+a)+" "+(c===0?no(" ",e[1].length+1+e[4].length):dB(c,e[1].length)+e[2]+"/"+e[3]+QA(s,e[4].length))}function FY(e,t,r){return r+(t===0?"":""+t)+no(" ",e[1].length+2+e[4].length)}var sI=/^#*0*\.([0#]+)/,aI=/\).*[0#]/,oI=/\(###\) ###\\?-####/;function _u(e){for(var t="",r,i=0;i!=e.length;++i)switch(r=e.charCodeAt(i)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function FT(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function kT(e,t){var r=e-Math.floor(e),i=Math.pow(10,t);return t<(""+Math.round(r*i)).length?0:Math.round(r*i)}function kY(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function NY(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Xh(e,t,r){if(e.charCodeAt(0)===40&&!t.match(aI)){var i=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Xh("n",i,r):"("+Xh("n",i,-r)+")"}if(t.charCodeAt(t.length-1)===44)return EY(e,t,r);if(t.indexOf("%")!==-1)return SY(e,t,r);if(t.indexOf("E")!==-1)return iI(t,r);if(t.charCodeAt(0)===36)return"$"+Xh(e,t.substr(t.charAt(1)==" "?2:1),r);var n,a,c,s,d=Math.abs(r),g=r<0?"-":"";if(t.match(/^00+$/))return g+Nm(d,t.length);if(t.match(/^[#?]+$/))return n=Nm(r,0),n==="0"&&(n=""),n.length>t.length?n:_u(t.substr(0,t.length-n.length))+n;if(a=t.match(nI))return TY(a,d,g);if(t.match(/^#+0+$/))return g+Nm(d,t.length-t.indexOf("0"));if(a=t.match(sI))return n=FT(r,a[1].length).replace(/^([^\.]+)$/,"$1."+_u(a[1])).replace(/\.$/,"."+_u(a[1])).replace(/\.(\d*)$/,function(M,I){return"."+I+no("0",_u(a[1]).length-I.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return g+FT(d,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return g+fp(Nm(d,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Xh(e,t,-r):fp(""+(Math.floor(r)+kY(r,a[1].length)))+"."+QA(kT(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return Xh(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Zm(Xh(e,t.replace(/[\\-]/g,""),r)),c=0,Zm(Zm(t.replace(/\\/g,"")).replace(/[0#]/g,function(M){return c<n.length?n.charAt(c++):M==="0"?"0":""}));if(t.match(oI))return n=Xh(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var x="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(a[4].length,7),s=K_(d,Math.pow(10,c)-1,!1),n=""+g,x=dd("n",a[1],s[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),n+=x+a[2]+"/"+a[3],x=G_(s[2],c),x.length<a[4].length&&(x=_u(a[4].substr(a[4].length-x.length))+x),n+=x,n;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(a[1].length,a[4].length),7),s=K_(d,Math.pow(10,c)-1,!0),g+(s[0]||(s[1]?"":"0"))+" "+(s[1]?dB(s[1],c)+a[2]+"/"+a[3]+G_(s[2],c):no(" ",2*c+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return n=Nm(r,0),t.length<=n.length?n:_u(t.substr(0,t.length-n.length))+n;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),c=n.indexOf(".");var C=t.indexOf(".")-c,N=t.length-n.length-C;return _u(t.substr(0,C)+n+t.substr(t.length-N))}if(a=t.match(/^00,000\.([#0]*0)$/))return c=kT(r,a[1].length),r<0?"-"+Xh(e,t,-r):fp(NY(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(M){return"00,"+(M.length<3?QA(0,3-M.length):"")+M})+"."+QA(c,a[1].length);switch(t){case"###,##0.00":return Xh(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var B=fp(Nm(d,0));return B!=="0"?g+B:"";case"###,###.00":return Xh(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Xh(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function IY(e,t,r){for(var i=t.length-1;t.charCodeAt(i-1)===44;)--i;return dd(e,t.substr(0,i),r/Math.pow(10,3*(t.length-i)))}function LY(e,t,r){var i=t.replace(rI,""),n=t.length-i.length;return dd(e,i,r*Math.pow(10,2*n))+no("%",n)}function lI(e,t){var r,i=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+lI(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%n;if(a<0&&(a+=n),r=(t/Math.pow(10,a)).toPrecision(i+1+(n+a)%n),!r.match(/[Ee]/)){var c=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+a):r+="E+"+(c-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(s,d,g,x){return d+g+x.substr(0,(n+a)%n)+"."+x.substr(a)+"E"})}else r=t.toExponential(i);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function yf(e,t,r){if(e.charCodeAt(0)===40&&!t.match(aI)){var i=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?yf("n",i,r):"("+yf("n",i,-r)+")"}if(t.charCodeAt(t.length-1)===44)return IY(e,t,r);if(t.indexOf("%")!==-1)return LY(e,t,r);if(t.indexOf("E")!==-1)return lI(t,r);if(t.charCodeAt(0)===36)return"$"+yf(e,t.substr(t.charAt(1)==" "?2:1),r);var n,a,c,s,d=Math.abs(r),g=r<0?"-":"";if(t.match(/^00+$/))return g+QA(d,t.length);if(t.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>t.length?n:_u(t.substr(0,t.length-n.length))+n;if(a=t.match(nI))return FY(a,d,g);if(t.match(/^#+0+$/))return g+QA(d,t.length-t.indexOf("0"));if(a=t.match(sI))return n=(""+r).replace(/^([^\.]+)$/,"$1."+_u(a[1])).replace(/\.$/,"."+_u(a[1])),n=n.replace(/\.(\d*)$/,function(M,I){return"."+I+no("0",_u(a[1]).length-I.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return g+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return g+fp(""+d);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+yf(e,t,-r):fp(""+r)+"."+no("0",a[1].length);if(a=t.match(/^#,#*,#0/))return yf(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Zm(yf(e,t.replace(/[\\-]/g,""),r)),c=0,Zm(Zm(t.replace(/\\/g,"")).replace(/[0#]/g,function(M){return c<n.length?n.charAt(c++):M==="0"?"0":""}));if(t.match(oI))return n=yf(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var x="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(a[4].length,7),s=K_(d,Math.pow(10,c)-1,!1),n=""+g,x=dd("n",a[1],s[1]),x.charAt(x.length-1)==" "&&(x=x.substr(0,x.length-1)+"0"),n+=x+a[2]+"/"+a[3],x=G_(s[2],c),x.length<a[4].length&&(x=_u(a[4].substr(a[4].length-x.length))+x),n+=x,n;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(a[1].length,a[4].length),7),s=K_(d,Math.pow(10,c)-1,!0),g+(s[0]||(s[1]?"":"0"))+" "+(s[1]?dB(s[1],c)+a[2]+"/"+a[3]+G_(s[2],c):no(" ",2*c+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return n=""+r,t.length<=n.length?n:_u(t.substr(0,t.length-n.length))+n;if(a=t.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),c=n.indexOf(".");var C=t.indexOf(".")-c,N=t.length-n.length-C;return _u(t.substr(0,C)+n+t.substr(t.length-N))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+yf(e,t,-r):fp(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(M){return"00,"+(M.length<3?QA(0,3-M.length):"")+M})+"."+QA(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var B=fp(""+d);return B!=="0"?g+B:"";default:if(t.match(/\.[0#?]*$/))return yf(e,t.slice(0,t.lastIndexOf(".")),r)+_u(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function dd(e,t,r){return(r|0)===r?yf(e,t,r):Xh(e,t,r)}function MY(e){for(var t=[],r=!1,i=0,n=0;i<e.length;++i)switch(e.charCodeAt(i)){case 34:r=!r;break;case 95:case 42:case 92:++i;break;case 59:t[t.length]=e.substr(n,i-n),n=i+1}if(t[t.length]=e.substr(n),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var cI=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function xg(e){for(var t=0,r="",i="";t<e.length;)switch(r=e.charAt(t)){case"G":q_(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(i=r;e.charAt(t++)!=="]"&&t<e.length;)i+=e.charAt(t);if(i.match(cI))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function PY(e,t,r,i){for(var n=[],a="",c=0,s="",d="t",g,x,C,N="H";c<e.length;)switch(s=e.charAt(c)){case"G":if(!q_(e,c))throw new Error("unrecognized character "+s+" in "+e);n[n.length]={t:"G",v:"General"},c+=7;break;case'"':for(a="";(C=e.charCodeAt(++c))!==34&&c<e.length;)a+=String.fromCharCode(C);n[n.length]={t:"t",v:a},++c;break;case"\\":var B=e.charAt(++c),M=B==="("||B===")"?B:"t";n[n.length]={t:M,v:B},++c;break;case"_":n[n.length]={t:"t",v:" "},c+=2;break;case"@":n[n.length]={t:"T",v:t},++c;break;case"B":case"b":if(e.charAt(c+1)==="1"||e.charAt(c+1)==="2"){if(g==null&&(g=l0(t,r,e.charAt(c+1)==="2"),g==null))return"";n[n.length]={t:"X",v:e.substr(c,2)},d=s,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":s=s.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||g==null&&(g=l0(t,r),g==null))return"";for(a=s;++c<e.length&&e.charAt(c).toLowerCase()===s;)a+=s;s==="m"&&d.toLowerCase()==="h"&&(s="M"),s==="h"&&(s=N),n[n.length]={t:s,v:a},d=s;break;case"A":case"a":case"":var I={t:s,v:s};if(g==null&&(g=l0(t,r)),e.substr(c,3).toUpperCase()==="A/P"?(g!=null&&(I.v=g.H>=12?"P":"A"),I.t="T",N="h",c+=3):e.substr(c,5).toUpperCase()==="AM/PM"?(g!=null&&(I.v=g.H>=12?"PM":"AM"),I.t="T",c+=5,N="h"):e.substr(c,5).toUpperCase()==="/"?(g!=null&&(I.v=g.H>=12?"":""),I.t="T",c+=5,N="h"):(I.t="t",++c),g==null&&I.t==="T")return"";n[n.length]=I,d=s;break;case"[":for(a=s;e.charAt(c++)!=="]"&&c<e.length;)a+=e.charAt(c);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(cI)){if(g==null&&(g=l0(t,r),g==null))return"";n[n.length]={t:"Z",v:a.toLowerCase()},d=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",xg(e)||(n[n.length]={t:"t",v:a}));break;case".":if(g!=null){for(a=s;++c<e.length&&(s=e.charAt(c))==="0";)a+=s;n[n.length]={t:"s",v:a};break}case"0":case"#":for(a=s;++c<e.length&&"0#?.,E+-%".indexOf(s=e.charAt(c))>-1;)a+=s;n[n.length]={t:"n",v:a};break;case"?":for(a=s;e.charAt(++c)===s;)a+=s;n[n.length]={t:s,v:a},d=s;break;case"*":++c,(e.charAt(c)==" "||e.charAt(c)=="*")&&++c;break;case"(":case")":n[n.length]={t:i===1?"t":s,v:s},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=s;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)a+=e.charAt(c);n[n.length]={t:"D",v:a};break;case" ":n[n.length]={t:s,v:s},++c;break;case"$":n[n.length]={t:"t",v:"$"},++c;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(s)===-1)throw new Error("unrecognized character "+s+" in "+e);n[n.length]={t:"t",v:s},++c;break}var R=0,D=0,V;for(c=n.length-1,d="t";c>=0;--c)switch(n[c].t){case"h":case"H":n[c].t=N,d="h",R<1&&(R=1);break;case"s":(V=n[c].v.match(/\.0+$/))&&(D=Math.max(D,V[0].length-1)),R<3&&(R=3);case"d":case"y":case"M":case"e":d=n[c].t;break;case"m":d==="s"&&(n[c].t="M",R<2&&(R=2));break;case"X":break;case"Z":R<1&&n[c].v.match(/[Hh]/)&&(R=1),R<2&&n[c].v.match(/[Mm]/)&&(R=2),R<3&&n[c].v.match(/[Ss]/)&&(R=3)}switch(R){case 0:break;case 1:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M),g.M>=60&&(g.M=0,++g.H);break;case 2:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M);break}var G="",Z;for(c=0;c<n.length;++c)switch(n[c].t){case"t":case"T":case" ":case"D":break;case"X":n[c].v="",n[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[c].v=CY(n[c].t.charCodeAt(0),n[c].v,g,D),n[c].t="t";break;case"n":case"?":for(Z=c+1;n[Z]!=null&&((s=n[Z].t)==="?"||s==="D"||(s===" "||s==="t")&&n[Z+1]!=null&&(n[Z+1].t==="?"||n[Z+1].t==="t"&&n[Z+1].v==="/")||n[c].t==="("&&(s===" "||s==="n"||s===")")||s==="t"&&(n[Z].v==="/"||n[Z].v===" "&&n[Z+1]!=null&&n[Z+1].t=="?"));)n[c].v+=n[Z].v,n[Z]={v:"",t:";"},++Z;G+=n[c].v,c=Z-1;break;case"G":n[c].t="t",n[c].v=w0(t,r);break}var X="",le,ae;if(G.length>0){G.charCodeAt(0)==40?(le=t<0&&G.charCodeAt(0)===45?-t:t,ae=dd("n",G,le)):(le=t<0&&i>1?-t:t,ae=dd("n",G,le),le<0&&n[0]&&n[0].t=="t"&&(ae=ae.substr(1),n[0].v="-"+n[0].v)),Z=ae.length-1;var ce=n.length;for(c=0;c<n.length;++c)if(n[c]!=null&&n[c].t!="t"&&n[c].v.indexOf(".")>-1){ce=c;break}var se=n.length;if(ce===n.length&&ae.indexOf("E")===-1){for(c=n.length-1;c>=0;--c)n[c]==null||"n?".indexOf(n[c].t)===-1||(Z>=n[c].v.length-1?(Z-=n[c].v.length,n[c].v=ae.substr(Z+1,n[c].v.length)):Z<0?n[c].v="":(n[c].v=ae.substr(0,Z+1),Z=-1),n[c].t="t",se=c);Z>=0&&se<n.length&&(n[se].v=ae.substr(0,Z+1)+n[se].v)}else if(ce!==n.length&&ae.indexOf("E")===-1){for(Z=ae.indexOf(".")-1,c=ce;c>=0;--c)if(!(n[c]==null||"n?".indexOf(n[c].t)===-1)){for(x=n[c].v.indexOf(".")>-1&&c===ce?n[c].v.indexOf(".")-1:n[c].v.length-1,X=n[c].v.substr(x+1);x>=0;--x)Z>=0&&(n[c].v.charAt(x)==="0"||n[c].v.charAt(x)==="#")&&(X=ae.charAt(Z--)+X);n[c].v=X,n[c].t="t",se=c}for(Z>=0&&se<n.length&&(n[se].v=ae.substr(0,Z+1)+n[se].v),Z=ae.indexOf(".")+1,c=ce;c<n.length;++c)if(!(n[c]==null||"n?(".indexOf(n[c].t)===-1&&c!==ce)){for(x=n[c].v.indexOf(".")>-1&&c===ce?n[c].v.indexOf(".")+1:0,X=n[c].v.substr(0,x);x<n[c].v.length;++x)Z<ae.length&&(X+=ae.charAt(Z++));n[c].v=X,n[c].t="t",se=c}}}for(c=0;c<n.length;++c)n[c]!=null&&"n?".indexOf(n[c].t)>-1&&(le=i>1&&t<0&&c>0&&n[c-1].v==="-"?-t:t,n[c].v=dd(n[c].t,n[c].v,le),n[c].t="t");var ue="";for(c=0;c!==n.length;++c)n[c]!=null&&(ue+=n[c].v);return ue}var NT=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function IT(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function DY(e,t){var r=MY(e),i=r.length,n=r[i-1].indexOf("@");if(i<4&&n>-1&&--i,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[i,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var c=r[0].match(NT),s=r[1].match(NT);return IT(t,c)?[i,r[0]]:IT(t,s)?[i,r[1]]:[i,r[c!=null&&s!=null?2:1]]}return[i,a]}function oA(e,t,r){r==null&&(r={});var i="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?i=r.dateNF:i=e;break;case"number":e==14&&r.dateNF?i=r.dateNF:i=(r.table!=null?r.table:fn)[e],i==null&&(i=r.table&&r.table[TT[e]]||fn[TT[e]]),i==null&&(i=vY[e]||"General");break}if(q_(i,0))return w0(t,r);t instanceof Date&&(t=tI(t,r.date1904));var n=DY(i,t);if(q_(n[1]))return w0(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return PY(n[1],t,r,n[0])}function p0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(fn[r]==null){t<0&&(t=r);continue}if(fn[r]==e){t=r;break}}t<0&&(t=391)}return fn[t]=e,t}function uI(){fn=gY()}var RY={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},hI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function UY(e){var t=typeof e=="number"?fn[e]:e;return t=t.replace(hI,"(\\d+)"),new RegExp("^"+t+"$")}function jY(e,t,r){var i=-1,n=-1,a=-1,c=-1,s=-1,d=-1;(t.match(hI)||[]).forEach(function(C,N){var B=parseInt(r[N+1],10);switch(C.toLowerCase().charAt(0)){case"y":i=B;break;case"d":a=B;break;case"h":c=B;break;case"s":d=B;break;case"m":c>=0?s=B:n=B;break}}),d>=0&&s==-1&&n>=0&&(s=n,n=-1);var g=(""+(i>=0?i:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);g.length==7&&(g="0"+g),g.length==8&&(g="20"+g);var x=("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return c==-1&&s==-1&&d==-1?g:i==-1&&n==-1&&a==-1?x:g+"T"+x}var OY=function(){var e={};e.version="1.2.0";function t(){for(var ae=0,ce=new Array(256),se=0;se!=256;++se)ae=se,ae=ae&1?-306674912^ae>>>1:ae>>>1,ae=ae&1?-306674912^ae>>>1:ae>>>1,ae=ae&1?-306674912^ae>>>1:ae>>>1,ae=ae&1?-306674912^ae>>>1:ae>>>1,ae=ae&1?-306674912^ae>>>1:ae>>>1,ae=ae&1?-306674912^ae>>>1:ae>>>1,ae=ae&1?-306674912^ae>>>1:ae>>>1,ae=ae&1?-306674912^ae>>>1:ae>>>1,ce[se]=ae;return typeof Int32Array<"u"?new Int32Array(ce):ce}var r=t();function i(ae){var ce=0,se=0,ue=0,re=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ue=0;ue!=256;++ue)re[ue]=ae[ue];for(ue=0;ue!=256;++ue)for(se=ae[ue],ce=256+ue;ce<4096;ce+=256)se=re[ce]=se>>>8^ae[se&255];var W=[];for(ue=1;ue!=16;++ue)W[ue-1]=typeof Int32Array<"u"?re.subarray(ue*256,ue*256+256):re.slice(ue*256,ue*256+256);return W}var n=i(r),a=n[0],c=n[1],s=n[2],d=n[3],g=n[4],x=n[5],C=n[6],N=n[7],B=n[8],M=n[9],I=n[10],R=n[11],D=n[12],V=n[13],G=n[14];function Z(ae,ce){for(var se=ce^-1,ue=0,re=ae.length;ue<re;)se=se>>>8^r[(se^ae.charCodeAt(ue++))&255];return~se}function X(ae,ce){for(var se=ce^-1,ue=ae.length-15,re=0;re<ue;)se=G[ae[re++]^se&255]^V[ae[re++]^se>>8&255]^D[ae[re++]^se>>16&255]^R[ae[re++]^se>>>24]^I[ae[re++]]^M[ae[re++]]^B[ae[re++]]^N[ae[re++]]^C[ae[re++]]^x[ae[re++]]^g[ae[re++]]^d[ae[re++]]^s[ae[re++]]^c[ae[re++]]^a[ae[re++]]^r[ae[re++]];for(ue+=15;re<ue;)se=se>>>8^r[(se^ae[re++])&255];return~se}function le(ae,ce){for(var se=ce^-1,ue=0,re=ae.length,W=0,de=0;ue<re;)W=ae.charCodeAt(ue++),W<128?se=se>>>8^r[(se^W)&255]:W<2048?(se=se>>>8^r[(se^(192|W>>6&31))&255],se=se>>>8^r[(se^(128|W&63))&255]):W>=55296&&W<57344?(W=(W&1023)+64,de=ae.charCodeAt(ue++)&1023,se=se>>>8^r[(se^(240|W>>8&7))&255],se=se>>>8^r[(se^(128|W>>2&63))&255],se=se>>>8^r[(se^(128|de>>6&15|(W&3)<<4))&255],se=se>>>8^r[(se^(128|de&63))&255]):(se=se>>>8^r[(se^(224|W>>12&15))&255],se=se>>>8^r[(se^(128|W>>6&63))&255],se=se>>>8^r[(se^(128|W&63))&255]);return~se}return e.table=r,e.bstr=Z,e.buf=X,e.str=le,e}(),$n=function(){var t={};t.version="1.2.1";function r(Re,ct){for(var $e=Re.split("/"),it=ct.split("/"),He=0,nt=0,It=Math.min($e.length,it.length);He<It;++He){if(nt=$e[He].length-it[He].length)return nt;if($e[He]!=it[He])return $e[He]<it[He]?-1:1}return $e.length-it.length}function i(Re){if(Re.charAt(Re.length-1)=="/")return Re.slice(0,-1).indexOf("/")===-1?Re:i(Re.slice(0,-1));var ct=Re.lastIndexOf("/");return ct===-1?Re:Re.slice(0,ct+1)}function n(Re){if(Re.charAt(Re.length-1)=="/")return n(Re.slice(0,-1));var ct=Re.lastIndexOf("/");return ct===-1?Re:Re.slice(ct+1)}function a(Re,ct){typeof ct=="string"&&(ct=new Date(ct));var $e=ct.getHours();$e=$e<<6|ct.getMinutes(),$e=$e<<5|ct.getSeconds()>>>1,Re.write_shift(2,$e);var it=ct.getFullYear()-1980;it=it<<4|ct.getMonth()+1,it=it<<5|ct.getDate(),Re.write_shift(2,it)}function c(Re){var ct=Re.read_shift(2)&65535,$e=Re.read_shift(2)&65535,it=new Date,He=$e&31;$e>>>=5;var nt=$e&15;$e>>>=4,it.setMilliseconds(0),it.setFullYear($e+1980),it.setMonth(nt-1),it.setDate(He);var It=ct&31;ct>>>=5;var sr=ct&63;return ct>>>=6,it.setHours(ct),it.setMinutes(sr),it.setSeconds(It<<1),it}function s(Re){fc(Re,0);for(var ct={},$e=0;Re.l<=Re.length-4;){var it=Re.read_shift(2),He=Re.read_shift(2),nt=Re.l+He,It={};switch(it){case 21589:$e=Re.read_shift(1),$e&1&&(It.mtime=Re.read_shift(4)),He>5&&($e&2&&(It.atime=Re.read_shift(4)),$e&4&&(It.ctime=Re.read_shift(4))),It.mtime&&(It.mt=new Date(It.mtime*1e3));break}Re.l=nt,ct[it]=It}return ct}var d;function g(){return d||(d={})}function x(Re,ct){if(Re[0]==80&&Re[1]==75)return Gt(Re,ct);if((Re[0]|32)==109&&(Re[1]|32)==105)return Yr(Re,ct);if(Re.length<512)throw new Error("CFB file size "+Re.length+" < 512");var $e=3,it=512,He=0,nt=0,It=0,sr=0,Qt=0,Xt=[],jt=Re.slice(0,512);fc(jt,0);var _r=C(jt);switch($e=_r[0],$e){case 3:it=512;break;case 4:it=4096;break;case 0:if(_r[1]==0)return Gt(Re,ct);default:throw new Error("Major Version: Expected 3 or 4 saw "+$e)}it!==512&&(jt=Re.slice(0,it),fc(jt,28));var Mr=Re.slice(0,it);N(jt,$e);var Vr=jt.read_shift(4,"i");if($e===3&&Vr!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Vr);jt.l+=4,It=jt.read_shift(4,"i"),jt.l+=4,jt.chk("00100000","Mini Stream Cutoff Size: "),sr=jt.read_shift(4,"i"),He=jt.read_shift(4,"i"),Qt=jt.read_shift(4,"i"),nt=jt.read_shift(4,"i");for(var Ir=-1,zr=0;zr<109&&(Ir=jt.read_shift(4,"i"),!(Ir<0));++zr)Xt[zr]=Ir;var yi=B(Re,it);R(Qt,nt,yi,it,Xt);var ki=V(yi,It,Xt,it);ki[It].name="!Directory",He>0&&sr!==de&&(ki[sr].name="!MiniFAT"),ki[Xt[0]].name="!FAT",ki.fat_addrs=Xt,ki.ssz=it;var Ni={},_i=[],Ga=[],Pa=[];G(It,ki,yi,_i,He,Ni,Ga,sr),M(Ga,Pa,_i),_i.shift();var Da={FileIndex:Ga,FullPaths:Pa};return ct&&ct.raw&&(Da.raw={header:Mr,sectors:yi}),Da}function C(Re){if(Re[Re.l]==80&&Re[Re.l+1]==75)return[0,0];Re.chk(Ee,"Header Signature: "),Re.l+=16;var ct=Re.read_shift(2,"u");return[Re.read_shift(2,"u"),ct]}function N(Re,ct){var $e=9;switch(Re.l+=2,$e=Re.read_shift(2)){case 9:if(ct!=3)throw new Error("Sector Shift: Expected 9 saw "+$e);break;case 12:if(ct!=4)throw new Error("Sector Shift: Expected 12 saw "+$e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+$e)}Re.chk("0600","Mini Sector Shift: "),Re.chk("000000000000","Reserved: ")}function B(Re,ct){for(var $e=Math.ceil(Re.length/ct)-1,it=[],He=1;He<$e;++He)it[He-1]=Re.slice(He*ct,(He+1)*ct);return it[$e-1]=Re.slice($e*ct),it}function M(Re,ct,$e){for(var it=0,He=0,nt=0,It=0,sr=0,Qt=$e.length,Xt=[],jt=[];it<Qt;++it)Xt[it]=jt[it]=it,ct[it]=$e[it];for(;sr<jt.length;++sr)it=jt[sr],He=Re[it].L,nt=Re[it].R,It=Re[it].C,Xt[it]===it&&(He!==-1&&Xt[He]!==He&&(Xt[it]=Xt[He]),nt!==-1&&Xt[nt]!==nt&&(Xt[it]=Xt[nt])),It!==-1&&(Xt[It]=it),He!==-1&&it!=Xt[it]&&(Xt[He]=Xt[it],jt.lastIndexOf(He)<sr&&jt.push(He)),nt!==-1&&it!=Xt[it]&&(Xt[nt]=Xt[it],jt.lastIndexOf(nt)<sr&&jt.push(nt));for(it=1;it<Qt;++it)Xt[it]===it&&(nt!==-1&&Xt[nt]!==nt?Xt[it]=Xt[nt]:He!==-1&&Xt[He]!==He&&(Xt[it]=Xt[He]));for(it=1;it<Qt;++it)if(Re[it].type!==0){if(sr=it,sr!=Xt[sr])do sr=Xt[sr],ct[it]=ct[sr]+"/"+ct[it];while(sr!==0&&Xt[sr]!==-1&&sr!=Xt[sr]);Xt[it]=-1}for(ct[0]+="/",it=1;it<Qt;++it)Re[it].type!==2&&(ct[it]+="/")}function I(Re,ct,$e){for(var it=Re.start,He=Re.size,nt=[],It=it;$e&&He>0&&It>=0;)nt.push(ct.slice(It*W,It*W+W)),He-=W,It=n0($e,It*4);return nt.length===0?pl(0):sp(nt).slice(0,Re.size)}function R(Re,ct,$e,it,He){var nt=de;if(Re===de){if(ct!==0)throw new Error("DIFAT chain shorter than expected")}else if(Re!==-1){var It=$e[Re],sr=(it>>>2)-1;if(!It)return;for(var Qt=0;Qt<sr&&(nt=n0(It,Qt*4))!==de;++Qt)He.push(nt);R(n0(It,it-4),ct-1,$e,it,He)}}function D(Re,ct,$e,it,He){var nt=[],It=[];He||(He=[]);var sr=it-1,Qt=0,Xt=0;for(Qt=ct;Qt>=0;){He[Qt]=!0,nt[nt.length]=Qt,It.push(Re[Qt]);var jt=$e[Math.floor(Qt*4/it)];if(Xt=Qt*4&sr,it<4+Xt)throw new Error("FAT boundary crossed: "+Qt+" 4 "+it);if(!Re[jt])break;Qt=n0(Re[jt],Xt)}return{nodes:nt,data:zT([It])}}function V(Re,ct,$e,it){var He=Re.length,nt=[],It=[],sr=[],Qt=[],Xt=it-1,jt=0,_r=0,Mr=0,Vr=0;for(jt=0;jt<He;++jt)if(sr=[],Mr=jt+ct,Mr>=He&&(Mr-=He),!It[Mr]){Qt=[];var Ir=[];for(_r=Mr;_r>=0;){Ir[_r]=!0,It[_r]=!0,sr[sr.length]=_r,Qt.push(Re[_r]);var zr=$e[Math.floor(_r*4/it)];if(Vr=_r*4&Xt,it<4+Vr)throw new Error("FAT boundary crossed: "+_r+" 4 "+it);if(!Re[zr]||(_r=n0(Re[zr],Vr),Ir[_r]))break}nt[Mr]={nodes:sr,data:zT([Qt])}}return nt}function G(Re,ct,$e,it,He,nt,It,sr){for(var Qt=0,Xt=it.length?2:0,jt=ct[Re].data,_r=0,Mr=0,Vr;_r<jt.length;_r+=128){var Ir=jt.slice(_r,_r+128);fc(Ir,64),Mr=Ir.read_shift(2),Vr=yB(Ir,0,Mr-Xt),it.push(Vr);var zr={name:Vr,type:Ir.read_shift(1),color:Ir.read_shift(1),L:Ir.read_shift(4,"i"),R:Ir.read_shift(4,"i"),C:Ir.read_shift(4,"i"),clsid:Ir.read_shift(16),state:Ir.read_shift(4,"i"),start:0,size:0},yi=Ir.read_shift(2)+Ir.read_shift(2)+Ir.read_shift(2)+Ir.read_shift(2);yi!==0&&(zr.ct=Z(Ir,Ir.l-8));var ki=Ir.read_shift(2)+Ir.read_shift(2)+Ir.read_shift(2)+Ir.read_shift(2);ki!==0&&(zr.mt=Z(Ir,Ir.l-8)),zr.start=Ir.read_shift(4,"i"),zr.size=Ir.read_shift(4,"i"),zr.size<0&&zr.start<0&&(zr.size=zr.type=0,zr.start=de,zr.name=""),zr.type===5?(Qt=zr.start,He>0&&Qt!==de&&(ct[Qt].name="!StreamData")):zr.size>=4096?(zr.storage="fat",ct[zr.start]===void 0&&(ct[zr.start]=D($e,zr.start,ct.fat_addrs,ct.ssz)),ct[zr.start].name=zr.name,zr.content=ct[zr.start].data.slice(0,zr.size)):(zr.storage="minifat",zr.size<0?zr.size=0:Qt!==de&&zr.start!==de&&ct[Qt]&&(zr.content=I(zr,ct[Qt].data,(ct[sr]||{}).data))),zr.content&&fc(zr.content,0),nt[Vr]=zr,It.push(zr)}}function Z(Re,ct){return new Date((Eh(Re,ct+4)/1e7*Math.pow(2,32)+Eh(Re,ct)/1e7-11644473600)*1e3)}function X(Re,ct){return g(),x(d.readFileSync(Re),ct)}function le(Re,ct){var $e=ct&&ct.type;switch($e||qn&&Buffer.isBuffer(Re)&&($e="buffer"),$e||"base64"){case"file":return X(Re,ct);case"base64":return x(jA(kh(Re)),ct);case"binary":return x(jA(Re),ct)}return x(Re,ct)}function ae(Re,ct){var $e=ct||{},it=$e.root||"Root Entry";if(Re.FullPaths||(Re.FullPaths=[]),Re.FileIndex||(Re.FileIndex=[]),Re.FullPaths.length!==Re.FileIndex.length)throw new Error("inconsistent CFB structure");Re.FullPaths.length===0&&(Re.FullPaths[0]=it+"/",Re.FileIndex[0]={name:it,type:5}),$e.CLSID&&(Re.FileIndex[0].clsid=$e.CLSID),ce(Re)}function ce(Re){var ct="Sh33tJ5";if(!$n.find(Re,"/"+ct)){var $e=pl(4);$e[0]=55,$e[1]=$e[3]=50,$e[2]=54,Re.FileIndex.push({name:ct,type:2,content:$e,size:4,L:69,R:69,C:69}),Re.FullPaths.push(Re.FullPaths[0]+ct),se(Re)}}function se(Re,ct){ae(Re);for(var $e=!1,it=!1,He=Re.FullPaths.length-1;He>=0;--He){var nt=Re.FileIndex[He];switch(nt.type){case 0:it?$e=!0:(Re.FileIndex.pop(),Re.FullPaths.pop());break;case 1:case 2:case 5:it=!0,isNaN(nt.R*nt.L*nt.C)&&($e=!0),nt.R>-1&&nt.L>-1&&nt.R==nt.L&&($e=!0);break;default:$e=!0;break}}if(!(!$e&&!ct)){var It=new Date(1987,1,19),sr=0,Qt=Object.create?Object.create(null):{},Xt=[];for(He=0;He<Re.FullPaths.length;++He)Qt[Re.FullPaths[He]]=!0,Re.FileIndex[He].type!==0&&Xt.push([Re.FullPaths[He],Re.FileIndex[He]]);for(He=0;He<Xt.length;++He){var jt=i(Xt[He][0]);it=Qt[jt],it||(Xt.push([jt,{name:n(jt).replace("/",""),type:1,clsid:ge,ct:It,mt:It,content:null}]),Qt[jt]=!0)}for(Xt.sort(function(Vr,Ir){return r(Vr[0],Ir[0])}),Re.FullPaths=[],Re.FileIndex=[],He=0;He<Xt.length;++He)Re.FullPaths[He]=Xt[He][0],Re.FileIndex[He]=Xt[He][1];for(He=0;He<Xt.length;++He){var _r=Re.FileIndex[He],Mr=Re.FullPaths[He];if(_r.name=n(Mr).replace("/",""),_r.L=_r.R=_r.C=-(_r.color=1),_r.size=_r.content?_r.content.length:0,_r.start=0,_r.clsid=_r.clsid||ge,He===0)_r.C=Xt.length>1?1:-1,_r.size=0,_r.type=5;else if(Mr.slice(-1)=="/"){for(sr=He+1;sr<Xt.length&&i(Re.FullPaths[sr])!=Mr;++sr);for(_r.C=sr>=Xt.length?-1:sr,sr=He+1;sr<Xt.length&&i(Re.FullPaths[sr])!=i(Mr);++sr);_r.R=sr>=Xt.length?-1:sr,_r.type=1}else i(Re.FullPaths[He+1]||"")==i(Mr)&&(_r.R=He+1),_r.type=2}}}function ue(Re,ct){var $e=ct||{};if($e.fileType=="mad")return on(Re,$e);switch(se(Re),$e.fileType){case"zip":return kr(Re,$e)}var it=function(Vr){for(var Ir=0,zr=0,yi=0;yi<Vr.FileIndex.length;++yi){var ki=Vr.FileIndex[yi];if(ki.content){var Ni=ki.content.length;Ni>0&&(Ni<4096?Ir+=Ni+63>>6:zr+=Ni+511>>9)}}for(var _i=Vr.FullPaths.length+3>>2,Ga=Ir+7>>3,Pa=Ir+127>>7,Da=Ga+zr+_i+Pa,ea=Da+127>>7,xa=ea<=109?0:Math.ceil((ea-109)/127);Da+ea+xa+127>>7>ea;)xa=++ea<=109?0:Math.ceil((ea-109)/127);var zs=[1,xa,ea,Pa,_i,zr,Ir,0];return Vr.FileIndex[0].size=Ir<<6,zs[7]=(Vr.FileIndex[0].start=zs[0]+zs[1]+zs[2]+zs[3]+zs[4]+zs[5])+(zs[6]+7>>3),zs}(Re),He=pl(it[7]<<9),nt=0,It=0;{for(nt=0;nt<8;++nt)He.write_shift(1,Ne[nt]);for(nt=0;nt<8;++nt)He.write_shift(2,0);for(He.write_shift(2,62),He.write_shift(2,3),He.write_shift(2,65534),He.write_shift(2,9),He.write_shift(2,6),nt=0;nt<3;++nt)He.write_shift(2,0);for(He.write_shift(4,0),He.write_shift(4,it[2]),He.write_shift(4,it[0]+it[1]+it[2]+it[3]-1),He.write_shift(4,0),He.write_shift(4,4096),He.write_shift(4,it[3]?it[0]+it[1]+it[2]-1:de),He.write_shift(4,it[3]),He.write_shift(-4,it[1]?it[0]-1:de),He.write_shift(4,it[1]),nt=0;nt<109;++nt)He.write_shift(-4,nt<it[2]?it[1]+nt:-1)}if(it[1])for(It=0;It<it[1];++It){for(;nt<236+It*127;++nt)He.write_shift(-4,nt<it[2]?it[1]+nt:-1);He.write_shift(-4,It===it[1]-1?de:It+1)}var sr=function(Vr){for(It+=Vr;nt<It-1;++nt)He.write_shift(-4,nt+1);Vr&&(++nt,He.write_shift(-4,de))};for(It=nt=0,It+=it[1];nt<It;++nt)He.write_shift(-4,Pe.DIFSECT);for(It+=it[2];nt<It;++nt)He.write_shift(-4,Pe.FATSECT);sr(it[3]),sr(it[4]);for(var Qt=0,Xt=0,jt=Re.FileIndex[0];Qt<Re.FileIndex.length;++Qt)jt=Re.FileIndex[Qt],jt.content&&(Xt=jt.content.length,!(Xt<4096)&&(jt.start=It,sr(Xt+511>>9)));for(sr(it[6]+7>>3);He.l&511;)He.write_shift(-4,Pe.ENDOFCHAIN);for(It=nt=0,Qt=0;Qt<Re.FileIndex.length;++Qt)jt=Re.FileIndex[Qt],jt.content&&(Xt=jt.content.length,!(!Xt||Xt>=4096)&&(jt.start=It,sr(Xt+63>>6)));for(;He.l&511;)He.write_shift(-4,Pe.ENDOFCHAIN);for(nt=0;nt<it[4]<<2;++nt){var _r=Re.FullPaths[nt];if(!_r||_r.length===0){for(Qt=0;Qt<17;++Qt)He.write_shift(4,0);for(Qt=0;Qt<3;++Qt)He.write_shift(4,-1);for(Qt=0;Qt<12;++Qt)He.write_shift(4,0);continue}jt=Re.FileIndex[nt],nt===0&&(jt.start=jt.size?jt.start-1:de);var Mr=nt===0&&$e.root||jt.name;if(Xt=2*(Mr.length+1),He.write_shift(64,Mr,"utf16le"),He.write_shift(2,Xt),He.write_shift(1,jt.type),He.write_shift(1,jt.color),He.write_shift(-4,jt.L),He.write_shift(-4,jt.R),He.write_shift(-4,jt.C),jt.clsid)He.write_shift(16,jt.clsid,"hex");else for(Qt=0;Qt<4;++Qt)He.write_shift(4,0);He.write_shift(4,jt.state||0),He.write_shift(4,0),He.write_shift(4,0),He.write_shift(4,0),He.write_shift(4,0),He.write_shift(4,jt.start),He.write_shift(4,jt.size),He.write_shift(4,0)}for(nt=1;nt<Re.FileIndex.length;++nt)if(jt=Re.FileIndex[nt],jt.size>=4096)if(He.l=jt.start+1<<9,qn&&Buffer.isBuffer(jt.content))jt.content.copy(He,He.l,0,jt.size),He.l+=jt.size+511&-512;else{for(Qt=0;Qt<jt.size;++Qt)He.write_shift(1,jt.content[Qt]);for(;Qt&511;++Qt)He.write_shift(1,0)}for(nt=1;nt<Re.FileIndex.length;++nt)if(jt=Re.FileIndex[nt],jt.size>0&&jt.size<4096)if(qn&&Buffer.isBuffer(jt.content))jt.content.copy(He,He.l,0,jt.size),He.l+=jt.size+63&-64;else{for(Qt=0;Qt<jt.size;++Qt)He.write_shift(1,jt.content[Qt]);for(;Qt&63;++Qt)He.write_shift(1,0)}if(qn)He.l=He.length;else for(;He.l<He.length;)He.write_shift(1,0);return He}function re(Re,ct){var $e=Re.FullPaths.map(function(Qt){return Qt.toUpperCase()}),it=$e.map(function(Qt){var Xt=Qt.split("/");return Xt[Xt.length-(Qt.slice(-1)=="/"?2:1)]}),He=!1;ct.charCodeAt(0)===47?(He=!0,ct=$e[0].slice(0,-1)+ct):He=ct.indexOf("/")!==-1;var nt=ct.toUpperCase(),It=He===!0?$e.indexOf(nt):it.indexOf(nt);if(It!==-1)return Re.FileIndex[It];var sr=!nt.match(O1);for(nt=nt.replace(Cu,""),sr&&(nt=nt.replace(O1,"!")),It=0;It<$e.length;++It)if((sr?$e[It].replace(O1,"!"):$e[It]).replace(Cu,"")==nt||(sr?it[It].replace(O1,"!"):it[It]).replace(Cu,"")==nt)return Re.FileIndex[It];return null}var W=64,de=-2,Ee="d0cf11e0a1b11ae1",Ne=[208,207,17,224,161,177,26,225],ge="00000000000000000000000000000000",Pe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:de,FREESECT:-1,HEADER_SIGNATURE:Ee,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ge,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ye(Re,ct,$e){g();var it=ue(Re,$e);d.writeFileSync(ct,it)}function Me(Re){for(var ct=new Array(Re.length),$e=0;$e<Re.length;++$e)ct[$e]=String.fromCharCode(Re[$e]);return ct.join("")}function De(Re,ct){var $e=ue(Re,ct);switch(ct&&ct.type||"buffer"){case"file":return g(),d.writeFileSync(ct.filename,$e),$e;case"binary":return typeof $e=="string"?$e:Me($e);case"base64":return BT(typeof $e=="string"?$e:Me($e));case"buffer":if(qn)return Buffer.isBuffer($e)?$e:F0($e);case"array":return typeof $e=="string"?jA($e):$e}return $e}var tt;function ee(Re){try{var ct=Re.InflateRaw,$e=new ct;if($e._processChunk(new Uint8Array([3,0]),$e._finishFlushFlag),$e.bytesRead)tt=Re;else throw new Error("zlib does not expose bytesRead")}catch(it){console.error("cannot use native zlib: "+(it.message||it))}}function fe(Re,ct){if(!tt)return Nt(Re,ct);var $e=tt.InflateRaw,it=new $e,He=it._processChunk(Re.slice(Re.l),it._finishFlushFlag);return Re.l+=it.bytesRead,He}function pe(Re){return tt?tt.deflateRawSync(Re):xe(Re)}var we=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Le=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],lt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function rt(Re){var ct=(Re<<1|Re<<11)&139536|(Re<<5|Re<<15)&558144;return(ct>>16|ct>>8|ct)&255}for(var gt=typeof Uint8Array<"u",dt=gt?new Uint8Array(256):[],qt=0;qt<256;++qt)dt[qt]=rt(qt);function Te(Re,ct){var $e=dt[Re&255];return ct<=8?$e>>>8-ct:($e=$e<<8|dt[Re>>8&255],ct<=16?$e>>>16-ct:($e=$e<<8|dt[Re>>16&255],$e>>>24-ct))}function at(Re,ct){var $e=ct&7,it=ct>>>3;return(Re[it]|($e<=6?0:Re[it+1]<<8))>>>$e&3}function kt(Re,ct){var $e=ct&7,it=ct>>>3;return(Re[it]|($e<=5?0:Re[it+1]<<8))>>>$e&7}function ze(Re,ct){var $e=ct&7,it=ct>>>3;return(Re[it]|($e<=4?0:Re[it+1]<<8))>>>$e&15}function Et(Re,ct){var $e=ct&7,it=ct>>>3;return(Re[it]|($e<=3?0:Re[it+1]<<8))>>>$e&31}function Pt(Re,ct){var $e=ct&7,it=ct>>>3;return(Re[it]|($e<=1?0:Re[it+1]<<8))>>>$e&127}function Sr(Re,ct,$e){var it=ct&7,He=ct>>>3,nt=(1<<$e)-1,It=Re[He]>>>it;return $e<8-it||(It|=Re[He+1]<<8-it,$e<16-it)||(It|=Re[He+2]<<16-it,$e<24-it)||(It|=Re[He+3]<<24-it),It&nt}function or(Re,ct,$e){var it=ct&7,He=ct>>>3;return it<=5?Re[He]|=($e&7)<<it:(Re[He]|=$e<<it&255,Re[He+1]=($e&7)>>8-it),ct+3}function Wr(Re,ct,$e){var it=ct&7,He=ct>>>3;return $e=($e&1)<<it,Re[He]|=$e,ct+1}function Hr(Re,ct,$e){var it=ct&7,He=ct>>>3;return $e<<=it,Re[He]|=$e&255,$e>>>=8,Re[He+1]=$e,ct+8}function ti(Re,ct,$e){var it=ct&7,He=ct>>>3;return $e<<=it,Re[He]|=$e&255,$e>>>=8,Re[He+1]=$e&255,Re[He+2]=$e>>>8,ct+16}function Gr(Re,ct){var $e=Re.length,it=2*$e>ct?2*$e:ct+5,He=0;if($e>=ct)return Re;if(qn){var nt=CT(it);if(Re.copy)Re.copy(nt);else for(;He<Re.length;++He)nt[He]=Re[He];return nt}else if(gt){var It=new Uint8Array(it);if(It.set)It.set(Re);else for(;He<$e;++He)It[He]=Re[He];return It}return Re.length=it,Re}function wi(Re){for(var ct=new Array(Re),$e=0;$e<Re;++$e)ct[$e]=0;return ct}function Bi(Re,ct,$e){var it=1,He=0,nt=0,It=0,sr=0,Qt=Re.length,Xt=gt?new Uint16Array(32):wi(32);for(nt=0;nt<32;++nt)Xt[nt]=0;for(nt=Qt;nt<$e;++nt)Re[nt]=0;Qt=Re.length;var jt=gt?new Uint16Array(Qt):wi(Qt);for(nt=0;nt<Qt;++nt)Xt[He=Re[nt]]++,it<He&&(it=He),jt[nt]=0;for(Xt[0]=0,nt=1;nt<=it;++nt)Xt[nt+16]=sr=sr+Xt[nt-1]<<1;for(nt=0;nt<Qt;++nt)sr=Re[nt],sr!=0&&(jt[nt]=Xt[sr+16]++);var _r=0;for(nt=0;nt<Qt;++nt)if(_r=Re[nt],_r!=0)for(sr=Te(jt[nt],it)>>it-_r,It=(1<<it+4-_r)-1;It>=0;--It)ct[sr|It<<_r]=_r&15|nt<<4;return it}var Zr=gt?new Uint16Array(512):wi(512),Xr=gt?new Uint16Array(32):wi(32);if(!gt){for(var $r=0;$r<512;++$r)Zr[$r]=0;for($r=0;$r<32;++$r)Xr[$r]=0}(function(){for(var Re=[],ct=0;ct<32;ct++)Re.push(5);Bi(Re,Xr,32);var $e=[];for(ct=0;ct<=143;ct++)$e.push(8);for(;ct<=255;ct++)$e.push(9);for(;ct<=279;ct++)$e.push(7);for(;ct<=287;ct++)$e.push(8);Bi($e,Zr,288)})();var ot=function(){for(var ct=gt?new Uint8Array(32768):[],$e=0,it=0;$e<lt.length-1;++$e)for(;it<lt[$e+1];++it)ct[it]=$e;for(;it<32768;++it)ct[it]=29;var He=gt?new Uint8Array(259):[];for($e=0,it=0;$e<Le.length-1;++$e)for(;it<Le[$e+1];++it)He[it]=$e;function nt(sr,Qt){for(var Xt=0;Xt<sr.length;){var jt=Math.min(65535,sr.length-Xt),_r=Xt+jt==sr.length;for(Qt.write_shift(1,+_r),Qt.write_shift(2,jt),Qt.write_shift(2,~jt&65535);jt-- >0;)Qt[Qt.l++]=sr[Xt++]}return Qt.l}function It(sr,Qt){for(var Xt=0,jt=0,_r=gt?new Uint16Array(32768):[];jt<sr.length;){var Mr=Math.min(65535,sr.length-jt);if(Mr<10){for(Xt=or(Qt,Xt,+(jt+Mr==sr.length)),Xt&7&&(Xt+=8-(Xt&7)),Qt.l=Xt/8|0,Qt.write_shift(2,Mr),Qt.write_shift(2,~Mr&65535);Mr-- >0;)Qt[Qt.l++]=sr[jt++];Xt=Qt.l*8;continue}Xt=or(Qt,Xt,+(jt+Mr==sr.length)+2);for(var Vr=0;Mr-- >0;){var Ir=sr[jt];Vr=(Vr<<5^Ir)&32767;var zr=-1,yi=0;if((zr=_r[Vr])&&(zr|=jt&-32768,zr>jt&&(zr-=32768),zr<jt))for(;sr[zr+yi]==sr[jt+yi]&&yi<250;)++yi;if(yi>2){Ir=He[yi],Ir<=22?Xt=Hr(Qt,Xt,dt[Ir+1]>>1)-1:(Hr(Qt,Xt,3),Xt+=5,Hr(Qt,Xt,dt[Ir-23]>>5),Xt+=3);var ki=Ir<8?0:Ir-4>>2;ki>0&&(ti(Qt,Xt,yi-Le[Ir]),Xt+=ki),Ir=ct[jt-zr],Xt=Hr(Qt,Xt,dt[Ir]>>3),Xt-=3;var Ni=Ir<4?0:Ir-2>>1;Ni>0&&(ti(Qt,Xt,jt-zr-lt[Ir]),Xt+=Ni);for(var _i=0;_i<yi;++_i)_r[Vr]=jt&32767,Vr=(Vr<<5^sr[jt])&32767,++jt;Mr-=yi-1}else Ir<=143?Ir=Ir+48:Xt=Wr(Qt,Xt,1),Xt=Hr(Qt,Xt,dt[Ir]),_r[Vr]=jt&32767,++jt}Xt=Hr(Qt,Xt,0)-1}return Qt.l=(Xt+7)/8|0,Qt.l}return function(Qt,Xt){return Qt.length<8?nt(Qt,Xt):It(Qt,Xt)}}();function xe(Re){var ct=pl(50+Math.floor(Re.length*1.1)),$e=ot(Re,ct);return ct.slice(0,$e)}var ye=gt?new Uint16Array(32768):wi(32768),Ce=gt?new Uint16Array(32768):wi(32768),je=gt?new Uint16Array(128):wi(128),Ke=1,At=1;function Ft(Re,ct){var $e=Et(Re,ct)+257;ct+=5;var it=Et(Re,ct)+1;ct+=5;var He=ze(Re,ct)+4;ct+=4;for(var nt=0,It=gt?new Uint8Array(19):wi(19),sr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Qt=1,Xt=gt?new Uint8Array(8):wi(8),jt=gt?new Uint8Array(8):wi(8),_r=It.length,Mr=0;Mr<He;++Mr)It[we[Mr]]=nt=kt(Re,ct),Qt<nt&&(Qt=nt),Xt[nt]++,ct+=3;var Vr=0;for(Xt[0]=0,Mr=1;Mr<=Qt;++Mr)jt[Mr]=Vr=Vr+Xt[Mr-1]<<1;for(Mr=0;Mr<_r;++Mr)(Vr=It[Mr])!=0&&(sr[Mr]=jt[Vr]++);var Ir=0;for(Mr=0;Mr<_r;++Mr)if(Ir=It[Mr],Ir!=0){Vr=dt[sr[Mr]]>>8-Ir;for(var zr=(1<<7-Ir)-1;zr>=0;--zr)je[Vr|zr<<Ir]=Ir&7|Mr<<3}var yi=[];for(Qt=1;yi.length<$e+it;)switch(Vr=je[Pt(Re,ct)],ct+=Vr&7,Vr>>>=3){case 16:for(nt=3+at(Re,ct),ct+=2,Vr=yi[yi.length-1];nt-- >0;)yi.push(Vr);break;case 17:for(nt=3+kt(Re,ct),ct+=3;nt-- >0;)yi.push(0);break;case 18:for(nt=11+Pt(Re,ct),ct+=7;nt-- >0;)yi.push(0);break;default:yi.push(Vr),Qt<Vr&&(Qt=Vr);break}var ki=yi.slice(0,$e),Ni=yi.slice($e);for(Mr=$e;Mr<286;++Mr)ki[Mr]=0;for(Mr=it;Mr<30;++Mr)Ni[Mr]=0;return Ke=Bi(ki,ye,286),At=Bi(Ni,Ce,30),ct}function vt(Re,ct){if(Re[0]==3&&!(Re[1]&3))return[bp(ct),2];for(var $e=0,it=0,He=CT(ct||1<<18),nt=0,It=He.length>>>0,sr=0,Qt=0;(it&1)==0;){if(it=kt(Re,$e),$e+=3,it>>>1)it>>1==1?(sr=9,Qt=5):($e=Ft(Re,$e),sr=Ke,Qt=At);else{$e&7&&($e+=8-($e&7));var Xt=Re[$e>>>3]|Re[($e>>>3)+1]<<8;if($e+=32,Xt>0)for(!ct&&It<nt+Xt&&(He=Gr(He,nt+Xt),It=He.length);Xt-- >0;)He[nt++]=Re[$e>>>3],$e+=8;continue}for(;;){!ct&&It<nt+32767&&(He=Gr(He,nt+32767),It=He.length);var jt=Sr(Re,$e,sr),_r=it>>>1==1?Zr[jt]:ye[jt];if($e+=_r&15,_r>>>=4,(_r>>>8&255)===0)He[nt++]=_r;else{if(_r==256)break;_r-=257;var Mr=_r<8?0:_r-4>>2;Mr>5&&(Mr=0);var Vr=nt+Le[_r];Mr>0&&(Vr+=Sr(Re,$e,Mr),$e+=Mr),jt=Sr(Re,$e,Qt),_r=it>>>1==1?Xr[jt]:Ce[jt],$e+=_r&15,_r>>>=4;var Ir=_r<4?0:_r-2>>1,zr=lt[_r];for(Ir>0&&(zr+=Sr(Re,$e,Ir),$e+=Ir),!ct&&It<Vr&&(He=Gr(He,Vr+100),It=He.length);nt<Vr;)He[nt]=He[nt-zr],++nt}}}return ct?[He,$e+7>>>3]:[He.slice(0,nt),$e+7>>>3]}function Nt(Re,ct){var $e=Re.slice(Re.l||0),it=vt($e,ct);return Re.l+=it[1],it[0]}function Ht(Re,ct){if(Re)typeof console<"u"&&console.error(ct);else throw new Error(ct)}function Gt(Re,ct){var $e=Re;fc($e,0);var it=[],He=[],nt={FileIndex:it,FullPaths:He};ae(nt,{root:ct.root});for(var It=$e.length-4;($e[It]!=80||$e[It+1]!=75||$e[It+2]!=5||$e[It+3]!=6)&&It>=0;)--It;$e.l=It+4,$e.l+=4;var sr=$e.read_shift(2);$e.l+=6;var Qt=$e.read_shift(4);for($e.l=Qt,It=0;It<sr;++It){$e.l+=20;var Xt=$e.read_shift(4),jt=$e.read_shift(4),_r=$e.read_shift(2),Mr=$e.read_shift(2),Vr=$e.read_shift(2);$e.l+=8;var Ir=$e.read_shift(4),zr=s($e.slice($e.l+_r,$e.l+_r+Mr));$e.l+=_r+Mr+Vr;var yi=$e.l;$e.l=Ir+4,Fr($e,Xt,jt,nt,zr),$e.l=yi}return nt}function Fr(Re,ct,$e,it,He){Re.l+=2;var nt=Re.read_shift(2),It=Re.read_shift(2),sr=c(Re);if(nt&8257)throw new Error("Unsupported ZIP encryption");for(var Qt=Re.read_shift(4),Xt=Re.read_shift(4),jt=Re.read_shift(4),_r=Re.read_shift(2),Mr=Re.read_shift(2),Vr="",Ir=0;Ir<_r;++Ir)Vr+=String.fromCharCode(Re[Re.l++]);if(Mr){var zr=s(Re.slice(Re.l,Re.l+Mr));(zr[21589]||{}).mt&&(sr=zr[21589].mt),((He||{})[21589]||{}).mt&&(sr=He[21589].mt)}Re.l+=Mr;var yi=Re.slice(Re.l,Re.l+Xt);switch(It){case 8:yi=fe(Re,jt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+It)}var ki=!1;nt&8&&(Qt=Re.read_shift(4),Qt==134695760&&(Qt=Re.read_shift(4),ki=!0),Xt=Re.read_shift(4),jt=Re.read_shift(4)),Xt!=ct&&Ht(ki,"Bad compressed size: "+ct+" != "+Xt),jt!=$e&&Ht(ki,"Bad uncompressed size: "+$e+" != "+jt),mi(it,Vr,yi,{unsafe:!0,mt:sr})}function kr(Re,ct){var $e=ct||{},it=[],He=[],nt=pl(1),It=$e.compression?8:0,sr=0,Qt=0,Xt=0,jt=0,_r=0,Mr=Re.FullPaths[0],Vr=Mr,Ir=Re.FileIndex[0],zr=[],yi=0;for(Qt=1;Qt<Re.FullPaths.length;++Qt)if(Vr=Re.FullPaths[Qt].slice(Mr.length),Ir=Re.FileIndex[Qt],!(!Ir.size||!Ir.content||Vr=="Sh33tJ5")){var ki=jt,Ni=pl(Vr.length);for(Xt=0;Xt<Vr.length;++Xt)Ni.write_shift(1,Vr.charCodeAt(Xt)&127);Ni=Ni.slice(0,Ni.l),zr[_r]=OY.buf(Ir.content,0);var _i=Ir.content;It==8&&(_i=pe(_i)),nt=pl(30),nt.write_shift(4,67324752),nt.write_shift(2,20),nt.write_shift(2,sr),nt.write_shift(2,It),Ir.mt?a(nt,Ir.mt):nt.write_shift(4,0),nt.write_shift(-4,zr[_r]),nt.write_shift(4,_i.length),nt.write_shift(4,Ir.content.length),nt.write_shift(2,Ni.length),nt.write_shift(2,0),jt+=nt.length,it.push(nt),jt+=Ni.length,it.push(Ni),jt+=_i.length,it.push(_i),nt=pl(46),nt.write_shift(4,33639248),nt.write_shift(2,0),nt.write_shift(2,20),nt.write_shift(2,sr),nt.write_shift(2,It),nt.write_shift(4,0),nt.write_shift(-4,zr[_r]),nt.write_shift(4,_i.length),nt.write_shift(4,Ir.content.length),nt.write_shift(2,Ni.length),nt.write_shift(2,0),nt.write_shift(2,0),nt.write_shift(2,0),nt.write_shift(2,0),nt.write_shift(4,0),nt.write_shift(4,ki),yi+=nt.l,He.push(nt),yi+=Ni.length,He.push(Ni),++_r}return nt=pl(22),nt.write_shift(4,101010256),nt.write_shift(2,0),nt.write_shift(2,0),nt.write_shift(2,_r),nt.write_shift(2,_r),nt.write_shift(4,yi),nt.write_shift(4,jt),nt.write_shift(2,0),sp([sp(it),sp(He),nt])}var Bt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ei(Re,ct){if(Re.ctype)return Re.ctype;var $e=Re.name||"",it=$e.match(/\.([^\.]+)$/);return it&&Bt[it[1]]||ct&&(it=($e=ct).match(/[\.\\]([^\.\\])+$/),it&&Bt[it[1]])?Bt[it[1]]:"application/octet-stream"}function Yi(Re){for(var ct=BT(Re),$e=[],it=0;it<ct.length;it+=76)$e.push(ct.slice(it,it+76));return $e.join(`\r
`)+`\r
`}function jr(Re){var ct=Re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Xt){var jt=Xt.charCodeAt(0).toString(16).toUpperCase();return"="+(jt.length==1?"0"+jt:jt)});ct=ct.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ct.charAt(0)==`
`&&(ct="=0D"+ct.slice(1)),ct=ct.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var $e=[],it=ct.split(`\r
`),He=0;He<it.length;++He){var nt=it[He];if(nt.length==0){$e.push("");continue}for(var It=0;It<nt.length;){var sr=76,Qt=nt.slice(It,It+sr);Qt.charAt(sr-1)=="="?sr--:Qt.charAt(sr-2)=="="?sr-=2:Qt.charAt(sr-3)=="="&&(sr-=3),Qt=nt.slice(It,It+sr),It+=sr,It<nt.length&&(Qt+="="),$e.push(Qt)}}return $e.join(`\r
`)}function Di(Re){for(var ct=[],$e=0;$e<Re.length;++$e){for(var it=Re[$e];$e<=Re.length&&it.charAt(it.length-1)=="=";)it=it.slice(0,it.length-1)+Re[++$e];ct.push(it)}for(var He=0;He<ct.length;++He)ct[He]=ct[He].replace(/[=][0-9A-Fa-f]{2}/g,function(nt){return String.fromCharCode(parseInt(nt.slice(1),16))});return jA(ct.join(`\r
`))}function In(Re,ct,$e){for(var it="",He="",nt="",It,sr=0;sr<10;++sr){var Qt=ct[sr];if(!Qt||Qt.match(/^\s*$/))break;var Xt=Qt.match(/^(.*?):\s*([^\s].*)$/);if(Xt)switch(Xt[1].toLowerCase()){case"content-location":it=Xt[2].trim();break;case"content-type":nt=Xt[2].trim();break;case"content-transfer-encoding":He=Xt[2].trim();break}}switch(++sr,He.toLowerCase()){case"base64":It=jA(kh(ct.slice(sr).join("")));break;case"quoted-printable":It=Di(ct.slice(sr));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+He)}var jt=mi(Re,it.slice($e.length),It,{unsafe:!0});nt&&(jt.ctype=nt)}function Yr(Re,ct){if(Me(Re.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var $e=ct&&ct.root||"",it=(qn&&Buffer.isBuffer(Re)?Re.toString("binary"):Me(Re)).split(`\r
`),He=0,nt="";for(He=0;He<it.length;++He)if(nt=it[He],!!/^Content-Location:/i.test(nt)&&(nt=nt.slice(nt.indexOf("file")),$e||($e=nt.slice(0,nt.lastIndexOf("/")+1)),nt.slice(0,$e.length)!=$e))for(;$e.length>0&&($e=$e.slice(0,$e.length-1),$e=$e.slice(0,$e.lastIndexOf("/")+1),nt.slice(0,$e.length)!=$e););var It=(it[1]||"").match(/boundary="(.*?)"/);if(!It)throw new Error("MAD cannot find boundary");var sr="--"+(It[1]||""),Qt=[],Xt=[],jt={FileIndex:Qt,FullPaths:Xt};ae(jt);var _r,Mr=0;for(He=0;He<it.length;++He){var Vr=it[He];Vr!==sr&&Vr!==sr+"--"||(Mr++&&In(jt,it.slice(_r,He),$e),_r=He)}return jt}function on(Re,ct){var $e=ct||{},it=$e.boundary||"SheetJS";it="------="+it;for(var He=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+it.slice(2)+'"',"","",""],nt=Re.FullPaths[0],It=nt,sr=Re.FileIndex[0],Qt=1;Qt<Re.FullPaths.length;++Qt)if(It=Re.FullPaths[Qt].slice(nt.length),sr=Re.FileIndex[Qt],!(!sr.size||!sr.content||It=="Sh33tJ5")){It=It.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(yi){return"_x"+yi.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(yi){return"_u"+yi.charCodeAt(0).toString(16)+"_"});for(var Xt=sr.content,jt=qn&&Buffer.isBuffer(Xt)?Xt.toString("binary"):Me(Xt),_r=0,Mr=Math.min(1024,jt.length),Vr=0,Ir=0;Ir<=Mr;++Ir)(Vr=jt.charCodeAt(Ir))>=32&&Vr<128&&++_r;var zr=_r>=Mr*4/5;He.push(it),He.push("Content-Location: "+($e.root||"file:///C:/SheetJS/")+It),He.push("Content-Transfer-Encoding: "+(zr?"quoted-printable":"base64")),He.push("Content-Type: "+ei(sr,It)),He.push(""),He.push(zr?jr(jt):Yi(jt))}return He.push(it+`--\r
`),He.join(`\r
`)}function Wi(Re){var ct={};return ae(ct,Re),ct}function mi(Re,ct,$e,it){var He=it&&it.unsafe;He||ae(Re);var nt=!He&&$n.find(Re,ct);if(!nt){var It=Re.FullPaths[0];ct.slice(0,It.length)==It?It=ct:(It.slice(-1)!="/"&&(It+="/"),It=(It+ct).replace("//","/")),nt={name:n(ct),type:2},Re.FileIndex.push(nt),Re.FullPaths.push(It),He||$n.utils.cfb_gc(Re)}return nt.content=$e,nt.size=$e?$e.length:0,it&&(it.CLSID&&(nt.clsid=it.CLSID),it.mt&&(nt.mt=it.mt),it.ct&&(nt.ct=it.ct)),nt}function ln(Re,ct){ae(Re);var $e=$n.find(Re,ct);if($e){for(var it=0;it<Re.FileIndex.length;++it)if(Re.FileIndex[it]==$e)return Re.FileIndex.splice(it,1),Re.FullPaths.splice(it,1),!0}return!1}function gi(Re,ct,$e){ae(Re);var it=$n.find(Re,ct);if(it){for(var He=0;He<Re.FileIndex.length;++He)if(Re.FileIndex[He]==it)return Re.FileIndex[He].name=n($e),Re.FullPaths[He]=$e,!0}return!1}function hr(Re){se(Re,!0)}return t.find=re,t.read=le,t.parse=x,t.write=De,t.writeFile=Ye,t.utils={cfb_new:Wi,cfb_add:mi,cfb_del:ln,cfb_mov:gi,cfb_gc:hr,ReadShift:tv,CheckField:LI,prep_blob:fc,bconcat:sp,use_zlib:ee,_deflateRaw:xe,_inflateRaw:Nt,consts:Pe},t}();function QY(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(i){if(!i.message||!i.message.match(/onstruct/))throw i}throw new Error("Cannot access file "+e)}function Ef(e){for(var t=Object.keys(e),r=[],i=0;i<t.length;++i)Object.prototype.hasOwnProperty.call(e,t[i])&&r.push(t[i]);return r}function mB(e){for(var t=[],r=Ef(e),i=0;i!==r.length;++i)t[e[r[i]]]=r[i];return t}var W_=new Date(1899,11,30,0,0,0);function Su(e,t){var r=e.getTime(),i=W_.getTime()+(e.getTimezoneOffset()-W_.getTimezoneOffset())*6e4;return(r-i)/(1440*60*1e3)}var AI=new Date,zY=W_.getTime()+(AI.getTimezoneOffset()-W_.getTimezoneOffset())*6e4,LT=AI.getTimezoneOffset();function P2(e){var t=new Date;return t.setTime(e*24*60*60*1e3+zY),t.getTimezoneOffset()!==LT&&t.setTime(t.getTime()+(t.getTimezoneOffset()-LT)*6e4),t}function HY(e){var t=0,r=0,i=!1,n=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=n.length;++a)if(n[a]){switch(r=1,a>3&&(i=!0),n[a].slice(n[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[a].slice(n[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(i)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(n[a],10)}return t}var MT=new Date("2017-02-19T19:06:09.000Z"),fI=isNaN(MT.getFullYear())?new Date("2/19/17"):MT,VY=fI.getFullYear()==2017;function Kl(e,t){var r=new Date(e);if(VY)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(fI.getFullYear()==1917&&!isNaN(r.getFullYear())){var i=r.getFullYear();return e.indexOf(""+i)>-1||r.setFullYear(r.getFullYear()+100),r}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function B0(e,t){if(qn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return z1(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return z1(J8(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return z1(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return z1(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var i=[],n=0;n!=e.length;++n)i.push(String.fromCharCode(e[n]));return i.join("")}function mc(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=mc(e[r]));return t}function no(e,t){for(var r="";r.length<t;)r+=e;return r}function zA(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,i=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(i))||(i=i.replace(/[(](.*)[)]/,function(n,a){return r=-r,a}),!isNaN(t=Number(i)))?t/r:t}var GY=["january","february","march","april","may","june","july","august","september","october","november","december"];function ag(e){var t=new Date(e),r=new Date(NaN),i=t.getYear(),n=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var c=e.toLowerCase();if(c.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(c=c.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),c.length>3&&GY.indexOf(c)==-1)return r}else if(c.match(/[a-z]/))return r;return i<0||i>8099?r:(n>0||a>1)&&i!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var qY=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,i,n){if(e||typeof i=="string")return r.split(i);for(var a=r.split(i),c=[a[0]],s=1;s<a.length;++s)c.push(n),c.push(a[s]);return c}}();function dI(e){return e?e.content&&e.type?B0(e.content,!0):e.data?j1(e.data):e.asNodeBuffer&&qn?j1(e.asNodeBuffer().toString("binary")):e.asBinary?j1(e.asBinary()):e._data&&e._data.getContent?j1(B0(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function pI(e){if(!e)return null;if(e.data)return bT(e.data);if(e.asNodeBuffer&&qn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?bT(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function KY(e){return e&&e.name.slice(-4)===".bin"?pI(e):dI(e)}function Yh(e,t){for(var r=e.FullPaths||Ef(e.files),i=t.toLowerCase().replace(/[\/]/g,"\\"),n=i.replace(/\\/g,"/"),a=0;a<r.length;++a){var c=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(i==c||n==c)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function gB(e,t){var r=Yh(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Go(e,t,r){if(!r)return KY(gB(e,t));if(!t)return null;try{return Go(e,t)}catch{return null}}function Th(e,t,r){if(!r)return dI(gB(e,t));if(!t)return null;try{return Th(e,t)}catch{return null}}function WY(e,t,r){return pI(gB(e,t))}function PT(e){for(var t=e.FullPaths||Ef(e.files),r=[],i=0;i<t.length;++i)t[i].slice(-1)!="/"&&r.push(t[i].replace(/^Root Entry[\/]/,""));return r.sort()}function $Y(e,t,r){if(e.FullPaths){if(typeof r=="string"){var i;return qn?i=F0(r):i=dY(r),$n.utils.cfb_add(e,t,i)}$n.utils.cfb_add(e,t,r)}else e.file(t,r)}function mI(e,t){switch(t.type){case"base64":return $n.read(e,{type:"base64"});case"binary":return $n.read(e,{type:"binary"});case"buffer":case"array":return $n.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Q1(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var i=e.split("/");i.length!==0;){var n=i.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var gI=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,XY=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,DT=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,ZY=/<[^>]*>/g,ru=gI.match(DT)?DT:ZY,YY=/<\w*:/,JY=/<(\/?)\w+:/;function Zi(e,t,r){for(var i={},n=0,a=0;n!==e.length&&!((a=e.charCodeAt(n))===32||a===10||a===13);++n);if(t||(i[0]=e.slice(0,n)),n===e.length)return i;var c=e.match(XY),s=0,d="",g=0,x="",C="",N=1;if(c)for(g=0;g!=c.length;++g){for(C=c[g],a=0;a!=C.length&&C.charCodeAt(a)!==61;++a);for(x=C.slice(0,a).trim();C.charCodeAt(a+1)==32;)++a;for(N=(n=C.charCodeAt(a+1))==34||n==39?1:0,d=C.slice(a+1+N,C.length-N),s=0;s!=x.length&&x.charCodeAt(s)!==58;++s);if(s===x.length)x.indexOf("_")>0&&(x=x.slice(0,x.indexOf("_"))),i[x]=d,i[x.toLowerCase()]=d;else{var B=(s===5&&x.slice(0,5)==="xmlns"?"xmlns":"")+x.slice(s+1);if(i[B]&&x.slice(s-3,s)=="ext")continue;i[B]=d,i[B.toLowerCase()]=d}}return i}function Nf(e){return e.replace(JY,"<$1")}var vI={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},eJ=mB(vI),ts=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(i){var n=i+"",a=n.indexOf("<![CDATA[");if(a==-1)return n.replace(e,function(s,d){return vI[s]||String.fromCharCode(parseInt(d,s.indexOf("x")>-1?16:10))||s}).replace(t,function(s,d){return String.fromCharCode(parseInt(d,16))});var c=n.indexOf("]]>");return r(n.slice(0,a))+n.slice(a+9,c)+r(n.slice(c+3))}}(),tJ=/[&<>'"]/g,rJ=/[\u0000-\u001f]/g;function vB(e){var t=e+"";return t.replace(tJ,function(r){return eJ[r]}).replace(/\n/g,"<br/>").replace(rJ,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var RT=function(){var e=/&#(\d+);/g;function t(r,i){return String.fromCharCode(parseInt(i,10))}return function(i){return i.replace(e,t)}}();function Ia(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Fw(e){for(var t="",r=0,i=0,n=0,a=0,c=0,s=0;r<e.length;){if(i=e.charCodeAt(r++),i<128){t+=String.fromCharCode(i);continue}if(n=e.charCodeAt(r++),i>191&&i<224){c=(i&31)<<6,c|=n&63,t+=String.fromCharCode(c);continue}if(a=e.charCodeAt(r++),i<240){t+=String.fromCharCode((i&15)<<12|(n&63)<<6|a&63);continue}c=e.charCodeAt(r++),s=((i&7)<<18|(n&63)<<12|(a&63)<<6|c&63)-65536,t+=String.fromCharCode(55296+(s>>>10&1023)),t+=String.fromCharCode(56320+(s&1023))}return t}function UT(e){var t=bp(2*e.length),r,i,n=1,a=0,c=0,s;for(i=0;i<e.length;i+=n)n=1,(s=e.charCodeAt(i))<128?r=s:s<224?(r=(s&31)*64+(e.charCodeAt(i+1)&63),n=2):s<240?(r=(s&15)*4096+(e.charCodeAt(i+1)&63)*64+(e.charCodeAt(i+2)&63),n=3):(n=4,r=(s&7)*262144+(e.charCodeAt(i+1)&63)*4096+(e.charCodeAt(i+2)&63)*64+(e.charCodeAt(i+3)&63),r-=65536,c=55296+(r>>>10&1023),r=56320+(r&1023)),c!==0&&(t[a++]=c&255,t[a++]=c>>>8,c=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function jT(e){return F0(e,"binary").toString("utf8")}var Oy="foo bar baz",ha=qn&&(jT(Oy)==Fw(Oy)&&jT||UT(Oy)==Fw(Oy)&&UT)||Fw,z1=qn?function(e){return F0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,i=0,n=0;r<e.length;)switch(i=e.charCodeAt(r++),!0){case i<128:t.push(String.fromCharCode(i));break;case i<2048:t.push(String.fromCharCode(192+(i>>6))),t.push(String.fromCharCode(128+(i&63)));break;case(i>=55296&&i<57344):i-=55296,n=e.charCodeAt(r++)-56320+(i<<10),t.push(String.fromCharCode(240+(n>>18&7))),t.push(String.fromCharCode(144+(n>>12&63))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)));break;default:t.push(String.fromCharCode(224+(i>>12))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)))}return t.join("")},Tv=function(){var e={};return function(r,i){var n=r+"|"+(i||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",i||"")}}(),xI=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var i=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<e.length;++n)i=i.replace(e[n][0],e[n][1]);return i}}(),iJ=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),nJ=/<\/?(?:vt:)?variant>/g,sJ=/<(?:vt:)([^>]*)>([\s\S]*)</;function OT(e,t){var r=Zi(e),i=e.match(iJ(r.baseType))||[],n=[];if(i.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+i.length+" != "+r.size);return n}return i.forEach(function(a){var c=a.replace(nJ,"").match(sJ);c&&n.push({v:ha(c[2]),t:c[1]})}),n}var aJ=/(^\s|\s$|\n)/;function oJ(e){return Ef(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function lJ(e,t,r){return"<"+e+(r!=null?oJ(r):"")+(t!=null?(t.match(aJ)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function xB(e){if(qn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ha(k0(fB(e)));throw new Error("Bad input format: expected Buffer or string")}var Fv=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,cJ={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},uJ=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function hJ(e,t){for(var r=1-2*(e[t+7]>>>7),i=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),n=e[t+6]&15,a=5;a>=0;--a)n=n*256+e[t+a];return i==2047?n==0?r*(1/0):NaN:(i==0?i=-1022:(i-=1023,n+=Math.pow(2,52)),r*Math.pow(2,i-52)*n)}function AJ(e,t,r){var i=(t<0||1/t==-1/0?1:0)<<7,n=0,a=0,c=i?-t:t;isFinite(c)?c==0?n=a=0:(n=Math.floor(Math.log(c)/Math.LN2),a=c*Math.pow(2,52-n),n<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?n=-1022:(a-=Math.pow(2,52),n+=1023)):(n=2047,a=isNaN(t)?26985:0);for(var s=0;s<=5;++s,a/=256)e[r+s]=a&255;e[r+6]=(n&15)<<4|a&15,e[r+7]=n>>4|i}var QT=function(e){for(var t=[],r=10240,i=0;i<e[0].length;++i)if(e[0][i])for(var n=0,a=e[0][i].length;n<a;n+=r)t.push.apply(t,e[0][i].slice(n,n+r));return t},zT=qn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:F0(t)})):QT(e)}:QT,HT=function(e,t,r){for(var i=[],n=t;n<r;n+=2)i.push(String.fromCharCode(hd(e,n)));return i.join("").replace(Cu,"")},yB=qn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Cu,""):HT(e,t,r)}:HT,VT=function(e,t,r){for(var i=[],n=t;n<t+r;++n)i.push(("0"+e[n].toString(16)).slice(-2));return i.join("")},yI=qn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):VT(e,t,r)}:VT,GT=function(e,t,r){for(var i=[],n=t;n<r;n++)i.push(String.fromCharCode(Dm(e,n)));return i.join("")},$v=qn?function(t,r,i){return Buffer.isBuffer(t)?t.toString("utf8",r,i):GT(t,r,i)}:GT,_I=function(e,t){var r=Eh(e,t);return r>0?$v(e,t+4,t+4+r-1):""},bI=_I,wI=function(e,t){var r=Eh(e,t);return r>0?$v(e,t+4,t+4+r-1):""},BI=wI,CI=function(e,t){var r=2*Eh(e,t);return r>0?$v(e,t+4,t+4+r-1):""},SI=CI,EI=function(t,r){var i=Eh(t,r);return i>0?yB(t,r+4,r+4+i):""},TI=EI,FI=function(e,t){var r=Eh(e,t);return r>0?$v(e,t+4,t+4+r):""},kI=FI,NI=function(e,t){return hJ(e,t)},$_=NI,II=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};qn&&(bI=function(t,r){if(!Buffer.isBuffer(t))return _I(t,r);var i=t.readUInt32LE(r);return i>0?t.toString("utf8",r+4,r+4+i-1):""},BI=function(t,r){if(!Buffer.isBuffer(t))return wI(t,r);var i=t.readUInt32LE(r);return i>0?t.toString("utf8",r+4,r+4+i-1):""},SI=function(t,r){if(!Buffer.isBuffer(t))return CI(t,r);var i=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+i-1)},TI=function(t,r){if(!Buffer.isBuffer(t))return EI(t,r);var i=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+i)},kI=function(t,r){if(!Buffer.isBuffer(t))return FI(t,r);var i=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+i)},$_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):NI(t,r)},II=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Dm=function(e,t){return e[t]},hd=function(e,t){return e[t+1]*256+e[t]},fJ=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Eh=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},n0=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},dJ=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function tv(e,t){var r="",i,n,a=[],c,s,d,g;switch(t){case"dbcs":if(g=this.l,qn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(d=0;d<e;++d)r+=String.fromCharCode(hd(this,g)),g+=2;e*=2;break;case"utf8":r=$v(this,this.l,this.l+e);break;case"utf16le":e*=2,r=yB(this,this.l,this.l+e);break;case"wstr":return tv.call(this,e,"dbcs");case"lpstr-ansi":r=bI(this,this.l),e=4+Eh(this,this.l);break;case"lpstr-cp":r=BI(this,this.l),e=4+Eh(this,this.l);break;case"lpwstr":r=SI(this,this.l),e=4+2*Eh(this,this.l);break;case"lpp4":e=4+Eh(this,this.l),r=TI(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Eh(this,this.l),r=kI(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(c=Dm(this,this.l+e++))!==0;)a.push(jy(c));r=a.join("");break;case"_wstr":for(e=0,r="";(c=hd(this,this.l+e))!==0;)a.push(jy(c)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",g=this.l,d=0;d<e;++d){if(this.lens&&this.lens.indexOf(g)!==-1)return c=Dm(this,g),this.l=g+1,s=tv.call(this,e-d,c?"dbcs-cont":"sbcs-cont"),a.join("")+s;a.push(jy(hd(this,g))),g+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",g=this.l,d=0;d!=e;++d){if(this.lens&&this.lens.indexOf(g)!==-1)return c=Dm(this,g),this.l=g+1,s=tv.call(this,e-d,c?"dbcs-cont":"sbcs-cont"),a.join("")+s;a.push(jy(Dm(this,g))),g+=1}r=a.join("");break;default:switch(e){case 1:return i=Dm(this,this.l),this.l++,i;case 2:return i=(t==="i"?fJ:hd)(this,this.l),this.l+=2,i;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(i=(e>0?n0:dJ)(this,this.l),this.l+=4,i):(n=Eh(this,this.l),this.l+=4,n);case 8:case-8:if(t==="f")return e==8?n=$_(this,this.l):n=$_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:r=yI(this,this.l,e);break}}return this.l+=e,r}var pJ=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},mJ=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},gJ=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function vJ(e,t,r){var i=0,n=0;if(r==="dbcs"){for(n=0;n!=t.length;++n)gJ(this,t.charCodeAt(n),this.l+2*n);i=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=t.length;++n)this[this.l+n]=t.charCodeAt(n)&255;i=t.length}else if(r==="hex"){for(;n<e;++n)this[this.l++]=parseInt(t.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(n=0;n<Math.min(t.length,e);++n){var c=t.charCodeAt(n);this[this.l++]=c&255,this[this.l++]=c>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:i=1,this[this.l]=t&255;break;case 2:i=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:i=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:i=4,pJ(this,t,this.l);break;case 8:if(i=8,r==="f"){AJ(this,t,this.l);break}case 16:break;case-4:i=4,mJ(this,t,this.l);break}return this.l+=i,this}function LI(e,t){var r=yI(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function fc(e,t){e.l=t,e.read_shift=tv,e.chk=LI,e.write_shift=vJ}function tu(e,t){e.l+=t}function pl(e){var t=bp(e);return fc(t,0),t}function wd(e,t,r){if(e){var i,n,a;fc(e,e.l||0);for(var c=e.length,s=0,d=0;e.l<c;){s=e.read_shift(1),s&128&&(s=(s&127)+((e.read_shift(1)&127)<<7));var g=t2[s]||t2[65535];for(i=e.read_shift(1),a=i&127,n=1;n<4&&i&128;++n)a+=((i=e.read_shift(1))&127)<<7*n;d=e.l+a;var x=g.f&&g.f(e,a,r);if(e.l=d,t(x,g,s))return}}}function Y5(){var e=[],t=qn?256:2048,r=function(g){var x=pl(g);return fc(x,0),x},i=r(t),n=function(){i&&(i.length>i.l&&(i=i.slice(0,i.l),i.l=i.length),i.length>0&&e.push(i),i=null)},a=function(g){return i&&g<i.length-i.l?i:(n(),i=r(Math.max(g+1,t)))},c=function(){return n(),sp(e)},s=function(g){n(),i=g,i.l==null&&(i.l=i.length),a(t)};return{next:a,push:s,end:c,_bufs:e}}function rv(e,t,r){var i=mc(e);if(t.s?(i.cRel&&(i.c+=t.s.c),i.rRel&&(i.r+=t.s.r)):(i.cRel&&(i.c+=t.c),i.rRel&&(i.r+=t.r)),!r||r.biff<12){for(;i.c>=256;)i.c-=256;for(;i.r>=65536;)i.r-=65536}return i}function qT(e,t,r){var i=mc(e);return i.s=rv(i.s,t.s,r),i.e=rv(i.e,t.s,r),i}function iv(e,t){if(e.cRel&&e.c<0)for(e=mc(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=mc(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=an(e);return!e.cRel&&e.cRel!=null&&(r=_J(r)),!e.rRel&&e.rRel!=null&&(r=xJ(r)),r}function kw(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+vl(e.s.c)+":"+(e.e.cRel?"":"$")+vl(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+gc(e.s.r)+":"+(e.e.rRel?"":"$")+gc(e.e.r):iv(e.s,t.biff)+":"+iv(e.e,t.biff)}function _B(e){return parseInt(yJ(e),10)-1}function gc(e){return""+(e+1)}function xJ(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function yJ(e){return e.replace(/\$(\d+)$/,"$1")}function bB(e){for(var t=bJ(e),r=0,i=0;i!==t.length;++i)r=26*r+t.charCodeAt(i)-64;return r-1}function vl(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function _J(e){return e.replace(/^([A-Z])/,"$$$1")}function bJ(e){return e.replace(/^\$([A-Z])/,"$1")}function wJ(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Bu(e){for(var t=0,r=0,i=0;i<e.length;++i){var n=e.charCodeAt(i);n>=48&&n<=57?t=10*t+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:t-1}}function an(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function yg(e){var t=e.indexOf(":");return t==-1?{s:Bu(e),e:Bu(e)}:{s:Bu(e.slice(0,t)),e:Bu(e.slice(t+1))}}function Xn(e,t){return typeof t>"u"||typeof t=="number"?Xn(e.s,e.e):(typeof e!="string"&&(e=an(e)),typeof t!="string"&&(t=an(t)),e==t?e:e+":"+t)}function so(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,i=0,n=0,a=e.length;for(r=0;i<a&&!((n=e.charCodeAt(i)-64)<1||n>26);++i)r=26*r+n;for(t.s.c=--r,r=0;i<a&&!((n=e.charCodeAt(i)-48)<0||n>9);++i)r=10*r+n;if(t.s.r=--r,i===a||n!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++i,r=0;i!=a&&!((n=e.charCodeAt(i)-64)<1||n>26);++i)r=26*r+n;for(t.e.c=--r,r=0;i!=a&&!((n=e.charCodeAt(i)-48)<0||n>9);++i)r=10*r+n;return t.e.r=--r,t}function KT(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=oA(e.z,r?Su(t):t)}catch{}try{return e.w=oA((e.XF||{}).numFmtId||(r?14:0),r?Su(t):t)}catch{return""+t}}function _d(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?L0[e.v]||e.v:t==null?KT(e,e.v):KT(e,t))}function Cp(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",i={};return i[r]=e,{SheetNames:[r],Sheets:i}}function MI(e,t,r){var i=r||{},n=e?Array.isArray(e):i.dense,a=e||(n?[]:{}),c=0,s=0;if(a&&i.origin!=null){if(typeof i.origin=="number")c=i.origin;else{var d=typeof i.origin=="string"?Bu(i.origin):i.origin;c=d.r,s=d.c}a["!ref"]||(a["!ref"]="A1:A1")}var g={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var x=so(a["!ref"]);g.s.c=x.s.c,g.s.r=x.s.r,g.e.c=Math.max(g.e.c,x.e.c),g.e.r=Math.max(g.e.r,x.e.r),c==-1&&(g.e.r=c=x.e.r+1)}for(var C=0;C!=t.length;++C)if(t[C]){if(!Array.isArray(t[C]))throw new Error("aoa_to_sheet expects an array of arrays");for(var N=0;N!=t[C].length;++N)if(!(typeof t[C][N]>"u")){var B={v:t[C][N]},M=c+C,I=s+N;if(g.s.r>M&&(g.s.r=M),g.s.c>I&&(g.s.c=I),g.e.r<M&&(g.e.r=M),g.e.c<I&&(g.e.c=I),t[C][N]&&typeof t[C][N]=="object"&&!Array.isArray(t[C][N])&&!(t[C][N]instanceof Date))B=t[C][N];else if(Array.isArray(B.v)&&(B.f=t[C][N][1],B.v=B.v[0]),B.v===null)if(B.f)B.t="n";else if(i.nullError)B.t="e",B.v=0;else if(i.sheetStubs)B.t="z";else continue;else typeof B.v=="number"?B.t="n":typeof B.v=="boolean"?B.t="b":B.v instanceof Date?(B.z=i.dateNF||fn[14],i.cellDates?(B.t="d",B.w=oA(B.z,Su(B.v))):(B.t="n",B.v=Su(B.v),B.w=oA(B.z,B.v))):B.t="s";if(n)a[M]||(a[M]=[]),a[M][I]&&a[M][I].z&&(B.z=a[M][I].z),a[M][I]=B;else{var R=an({c:I,r:M});a[R]&&a[R].z&&(B.z=a[R].z),a[R]=B}}}return g.s.c<1e7&&(a["!ref"]=Xn(g)),a}function _g(e,t){return MI(null,e,t)}function BJ(e){return e.read_shift(4,"i")}function Jc(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function CJ(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function wB(e,t){var r=e.l,i=e.read_shift(1),n=Jc(e),a=[],c={t:n,h:n};if((i&1)!==0){for(var s=e.read_shift(4),d=0;d!=s;++d)a.push(CJ(e));c.r=a}else c.r=[{ich:0,ifnt:0}];return e.l=r+t,c}var SJ=wB;function lA(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function N0(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var EJ=Jc;function BB(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var TJ=Jc,J5=BB;function CB(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,i=t[0]&2;e.l+=4;var n=i===0?$_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):n0(t,0)>>2;return r?n/100:n}function PI(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var I0=PI;function $c(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function FJ(e){var t={},r=e.read_shift(1),i=r>>>1,n=e.read_shift(1),a=e.read_shift(2,"i"),c=e.read_shift(1),s=e.read_shift(1),d=e.read_shift(1);switch(e.l++,i){case 0:t.auto=1;break;case 1:t.index=n;var g=m0[n];g&&(t.rgb=Nv(g));break;case 2:t.rgb=Nv([c,s,d]);break;case 3:t.theme=n;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function kJ(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function DI(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},i=e.read_shift(4);switch(i){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(i>400)throw new Error("Unsupported Clipboard: "+i.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function NJ(e){return DI(e,1)}function IJ(e){return DI(e,2)}var SB=2,eh=3,Qy=11,WT=12,X_=19,zy=64,LJ=65,MJ=71,PJ=4108,DJ=4126,Gl=80,RI=81,RJ=[Gl,RI],UJ={1:{n:"CodePage",t:SB},2:{n:"Category",t:Gl},3:{n:"PresentationFormat",t:Gl},4:{n:"ByteCount",t:eh},5:{n:"LineCount",t:eh},6:{n:"ParagraphCount",t:eh},7:{n:"SlideCount",t:eh},8:{n:"NoteCount",t:eh},9:{n:"HiddenCount",t:eh},10:{n:"MultimediaClipCount",t:eh},11:{n:"ScaleCrop",t:Qy},12:{n:"HeadingPairs",t:PJ},13:{n:"TitlesOfParts",t:DJ},14:{n:"Manager",t:Gl},15:{n:"Company",t:Gl},16:{n:"LinksUpToDate",t:Qy},17:{n:"CharacterCount",t:eh},19:{n:"SharedDoc",t:Qy},22:{n:"HyperlinksChanged",t:Qy},23:{n:"AppVersion",t:eh,p:"version"},24:{n:"DigSig",t:LJ},26:{n:"ContentType",t:Gl},27:{n:"ContentStatus",t:Gl},28:{n:"Language",t:Gl},29:{n:"Version",t:Gl},255:{},2147483648:{n:"Locale",t:X_},2147483651:{n:"Behavior",t:X_},1919054434:{}},jJ={1:{n:"CodePage",t:SB},2:{n:"Title",t:Gl},3:{n:"Subject",t:Gl},4:{n:"Author",t:Gl},5:{n:"Keywords",t:Gl},6:{n:"Comments",t:Gl},7:{n:"Template",t:Gl},8:{n:"LastAuthor",t:Gl},9:{n:"RevNumber",t:Gl},10:{n:"EditTime",t:zy},11:{n:"LastPrinted",t:zy},12:{n:"CreatedDate",t:zy},13:{n:"ModifiedDate",t:zy},14:{n:"PageCount",t:eh},15:{n:"WordCount",t:eh},16:{n:"CharCount",t:eh},17:{n:"Thumbnail",t:MJ},18:{n:"Application",t:Gl},19:{n:"DocSecurity",t:eh},255:{},2147483648:{n:"Locale",t:X_},2147483651:{n:"Behavior",t:X_},1919054434:{}},$T={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},OJ=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function QJ(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var zJ=QJ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),m0=mc(zJ),L0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},UI={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},XT={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function HJ(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function VJ(e){var t=HJ();if(!e||!e.match)return t;var r={};if((e.match(ru)||[]).forEach(function(i){var n=Zi(i);switch(n[0].replace(YY,"<")){case"<?xml":break;case"<Types":t.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":t[XT[n.ContentType]]!==void 0&&t[XT[n.ContentType]].push(n.PartName);break}}),t.xmlns!==cJ.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var jm={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function e4(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function nv(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var i={};return(e.match(ru)||[]).forEach(function(n){var a=Zi(n);if(a[0]==="<Relationship"){var c={};c.Type=a.Type,c.Target=a.Target,c.Id=a.Id,a.TargetMode&&(c.TargetMode=a.TargetMode);var s=a.TargetMode==="External"?a.Target:Q1(a.Target,t);r[s]=c,i[a.Id]=c}}),r["!id"]=i,r}var GJ="application/vnd.oasis.opendocument.spreadsheet";function qJ(e,t){for(var r=xB(e),i,n;i=Fv.exec(r);)switch(i[3]){case"manifest":break;case"file-entry":if(n=Zi(i[0],!1),n.path=="/"&&n.type!==GJ)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw i}}var sv=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],KJ=function(){for(var e=new Array(sv.length),t=0;t<sv.length;++t){var r=sv[t],i="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+i+"[^>]*>([\\s\\S]*?)</"+i+">")}return e}();function jI(e){var t={};e=ha(e);for(var r=0;r<sv.length;++r){var i=sv[r],n=e.match(KJ[r]);n!=null&&n.length>0&&(t[i[1]]=ts(n[1])),i[2]==="date"&&t[i[1]]&&(t[i[1]]=Kl(t[i[1]]))}return t}var WJ=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function OI(e,t,r,i){var n=[];if(typeof e=="string")n=OT(e,i);else for(var a=0;a<e.length;++a)n=n.concat(e[a].map(function(x){return{v:x}}));var c=typeof t=="string"?OT(t,i).map(function(x){return x.v}):t,s=0,d=0;if(c.length>0)for(var g=0;g!==n.length;g+=2){switch(d=+n[g+1].v,n[g].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=d,r.SheetNames=c.slice(s,s+d);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=d,r.DefinedNames=c.slice(s,s+d);break;case"Charts":case"Diagramme":r.Chartsheets=d,r.ChartNames=c.slice(s,s+d);break}s+=d}}function $J(e,t,r){var i={};return t||(t={}),e=ha(e),WJ.forEach(function(n){var a=(e.match(Tv(n[0]))||[])[1];switch(n[2]){case"string":a&&(t[n[1]]=ts(a));break;case"bool":t[n[1]]=a==="true";break;case"raw":var c=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));c&&c.length>0&&(i[n[1]]=c[1]);break}}),i.HeadingPairs&&i.TitlesOfParts&&OI(i.HeadingPairs,i.TitlesOfParts,t,r),t}var XJ=/<[^>]+>[^<]*/g;function ZJ(e,t){var r={},i="",n=e.match(XJ);if(n)for(var a=0;a!=n.length;++a){var c=n[a],s=Zi(c);switch(s[0]){case"<?xml":break;case"<Properties":break;case"<property":i=ts(s.name);break;case"</property>":i=null;break;default:if(c.indexOf("<vt:")===0){var d=c.split(">"),g=d[0].slice(4),x=d[1];switch(g){case"lpstr":case"bstr":case"lpwstr":r[i]=ts(x);break;case"bool":r[i]=Ia(x);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[i]=parseInt(x,10);break;case"r4":case"r8":case"decimal":r[i]=parseFloat(x);break;case"filetime":case"date":r[i]=Kl(x);break;case"cy":case"error":r[i]=ts(x);break;default:if(g.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",c,g,d)}}else if(c.slice(0,2)!=="</"){if(t.WTF)throw new Error(c)}}}return r}var YJ={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Nw;function JJ(e,t,r){Nw||(Nw=mB(YJ)),t=Nw[t]||t,e[t]=r}function EB(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function QI(e,t,r){var i=e.l,n=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-i&3;)++e.l;return n}function zI(e,t,r){var i=e.read_shift(0,"lpwstr");return i}function HI(e,t,r){return t===31?zI(e):QI(e,t,r)}function t4(e,t,r){return HI(e,t,r===!1?0:4)}function eee(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return HI(e,t,0)}function tee(e){for(var t=e.read_shift(4),r=[],i=0;i!=t;++i){var n=e.l;r[i]=e.read_shift(0,"lpwstr").replace(Cu,""),e.l-n&2&&(e.l+=2)}return r}function ree(e){for(var t=e.read_shift(4),r=[],i=0;i!=t;++i)r[i]=e.read_shift(0,"lpstr-cp").replace(Cu,"");return r}function iee(e){var t=e.l,r=Z_(e,RI);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var i=Z_(e,eh);return[r,i]}function nee(e){for(var t=e.read_shift(4),r=[],i=0;i<t/2;++i)r.push(iee(e));return r}function ZT(e,t){for(var r=e.read_shift(4),i={},n=0;n!=r;++n){var a=e.read_shift(4),c=e.read_shift(4);i[a]=e.read_shift(c,t===1200?"utf16le":"utf8").replace(Cu,"").replace(O1,"!"),t===1200&&c%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),i}function VI(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function see(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Z_(e,t,r){var i=e.read_shift(2),n,a=r||{};if(e.l+=2,t!==WT&&i!==t&&RJ.indexOf(t)===-1&&!((t&65534)==4126&&(i&65534)==4126))throw new Error("Expected type "+t+" saw "+i);switch(t===WT?i:t){case 2:return n=e.read_shift(2,"i"),a.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i"),n;case 11:return e.read_shift(4)!==0;case 19:return n=e.read_shift(4),n;case 30:return QI(e,i,4).replace(Cu,"");case 31:return zI(e);case 64:return EB(e);case 65:return VI(e);case 71:return see(e);case 80:return t4(e,i,!a.raw).replace(Cu,"");case 81:return eee(e,i).replace(Cu,"");case 4108:return nee(e);case 4126:case 4127:return i==4127?tee(e):ree(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+i)}}function YT(e,t){var r=e.l,i=e.read_shift(4),n=e.read_shift(4),a=[],c=0,s=0,d=-1,g={};for(c=0;c!=n;++c){var x=e.read_shift(4),C=e.read_shift(4);a[c]=[x,C+r]}a.sort(function(V,G){return V[1]-G[1]});var N={};for(c=0;c!=n;++c){if(e.l!==a[c][1]){var B=!0;if(c>0&&t)switch(t[a[c-1][0]].t){case 2:e.l+2===a[c][1]&&(e.l+=2,B=!1);break;case 80:e.l<=a[c][1]&&(e.l=a[c][1],B=!1);break;case 4108:e.l<=a[c][1]&&(e.l=a[c][1],B=!1);break}if((!t||c==0)&&e.l<=a[c][1]&&(B=!1,e.l=a[c][1]),B)throw new Error("Read Error: Expected address "+a[c][1]+" at "+e.l+" :"+c)}if(t){var M=t[a[c][0]];if(N[M.n]=Z_(e,M.t,{raw:!0}),M.p==="version"&&(N[M.n]=String(N[M.n]>>16)+"."+("0000"+String(N[M.n]&65535)).slice(-4)),M.n=="CodePage")switch(N[M.n]){case 0:N[M.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:OA(s=N[M.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+N[M.n])}}else if(a[c][0]===1){if(s=N.CodePage=Z_(e,SB),OA(s),d!==-1){var I=e.l;e.l=a[d][1],g=ZT(e,s),e.l=I}}else if(a[c][0]===0){if(s===0){d=c,e.l=a[c+1][1];continue}g=ZT(e,s)}else{var R=g[a[c][0]],D;switch(e[e.l]){case 65:e.l+=4,D=VI(e);break;case 30:e.l+=4,D=t4(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,D=t4(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,D=e.read_shift(4,"i");break;case 19:e.l+=4,D=e.read_shift(4);break;case 5:e.l+=4,D=e.read_shift(8,"f");break;case 11:e.l+=4,D=wo(e,4);break;case 64:e.l+=4,D=Kl(EB(e));break;default:throw new Error("unparsed value: "+e[e.l])}N[R]=D}}return e.l=r+i,N}function JT(e,t,r){var i=e.content;if(!i)return{};fc(i,0);var n,a,c,s,d=0;i.chk("feff","Byte Order: "),i.read_shift(2);var g=i.read_shift(4),x=i.read_shift(16);if(x!==$n.utils.consts.HEADER_CLSID&&x!==r)throw new Error("Bad PropertySet CLSID "+x);if(n=i.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(a=i.read_shift(16),s=i.read_shift(4),n===1&&s!==i.l)throw new Error("Length mismatch: "+s+" !== "+i.l);n===2&&(c=i.read_shift(16),d=i.read_shift(4));var C=YT(i,t),N={SystemIdentifier:g};for(var B in C)N[B]=C[B];if(N.FMTID=a,n===1)return N;if(d-i.l==2&&(i.l+=2),i.l!==d)throw new Error("Length mismatch 2: "+i.l+" !== "+d);var M;try{M=YT(i,null)}catch{}for(B in M)N[B]=M[B];return N.FMTID=[a,c],N}function Jd(e,t){return e.read_shift(t),null}function aee(e,t,r){for(var i=[],n=e.l+t;e.l<n;)i.push(r(e,n-e.l));if(n!==e.l)throw new Error("Slurp error");return i}function wo(e,t){return e.read_shift(t)===1}function qo(e){return e.read_shift(2,"u")}function GI(e,t){return aee(e,t,qo)}function oee(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Xv(e,t,r){var i=e.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var c=i?e.read_shift(i,n):"";return c}function lee(e){var t=e.read_shift(2),r=e.read_shift(1),i=r&4,n=r&8,a=1+(r&1),c=0,s,d={};n&&(c=e.read_shift(2)),i&&(s=e.read_shift(4));var g=a==2?"dbcs-cont":"sbcs-cont",x=t===0?"":e.read_shift(t,g);return n&&(e.l+=4*c),i&&(e.l+=s),d.t=x,n||(d.raw="<t>"+d.t+"</t>",d.r=d.t),d}function C0(e,t,r){var i;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var n=e.read_shift(1);return n===0?i=e.read_shift(t,"sbcs-cont"):i=e.read_shift(t,"dbcs-cont"),i}function Zv(e,t,r){var i=e.read_shift(r&&r.biff==2?1:2);return i===0?(e.l++,""):C0(e,i,r)}function M0(e,t,r){if(r.biff>5)return Zv(e,t,r);var i=e.read_shift(1);return i===0?(e.l++,""):e.read_shift(i,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function cee(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function uee(e){var t=e.read_shift(4),r=e.l,i=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(i=!0),e.l=r);var n=e.read_shift((i?t-24:t)>>1,"utf16le").replace(Cu,"");return i&&(e.l+=24),n}function hee(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var i=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=e.read_shift(4);if(n===0)return r+i.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var c=e.read_shift(a>>1,"utf16le").replace(Cu,"");return r+c}function Aee(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return uee(e);case"0303000000000000c000000000000046":return hee(e);default:throw new Error("Unsupported Moniker "+r)}}function Hy(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Cu,""):"";return r}function fee(e,t){var r=e.l+t,i=e.read_shift(4);if(i!==2)throw new Error("Unrecognized streamVersion: "+i);var n=e.read_shift(2);e.l+=2;var a,c,s,d,g="",x,C;n&16&&(a=Hy(e,r-e.l)),n&128&&(c=Hy(e,r-e.l)),(n&257)===257&&(s=Hy(e,r-e.l)),(n&257)===1&&(d=Aee(e,r-e.l)),n&8&&(g=Hy(e,r-e.l)),n&32&&(x=e.read_shift(16)),n&64&&(C=EB(e)),e.l=r;var N=c||s||d||"";N&&g&&(N+="#"+g),N||(N="#"+g),n&2&&N.charAt(0)=="/"&&N.charAt(1)!="/"&&(N="file://"+N);var B={Target:N};return x&&(B.guid=x),C&&(B.time=C),a&&(B.Tooltip=a),B}function qI(e){var t=e.read_shift(1),r=e.read_shift(1),i=e.read_shift(1),n=e.read_shift(1);return[t,r,i,n]}function KI(e,t){var r=qI(e);return r[3]=0,r}function If(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2);return{r:t,c:r,ixfe:i}}function dee(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function pee(e,t,r){return t===0?"":M0(e,t,r)}function mee(e,t,r){var i=r.biff>8?4:2,n=e.read_shift(i),a=e.read_shift(i,"i"),c=e.read_shift(i,"i");return[n,a,c]}function WI(e){var t=e.read_shift(2),r=CB(e);return[t,r]}function gee(e,t,r){e.l+=4,t-=4;var i=e.l+t,n=Xv(e,t,r),a=e.read_shift(2);if(i-=e.l,a!==i)throw new Error("Malformed AddinUdf: padding = "+i+" != "+a);return e.l+=a,n}function D2(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2),n=e.read_shift(2);return{s:{c:i,r:t},e:{c:n,r}}}function $I(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(1),n=e.read_shift(1);return{s:{c:i,r:t},e:{c:n,r}}}var vee=$I;function XI(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2);return e.l+=12,[r,t,i]}function xee(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function yee(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Hc(e){e.l+=2,e.l+=e.read_shift(2)}var _ee={0:Hc,4:Hc,5:Hc,6:Hc,7:yee,8:Hc,9:Hc,10:Hc,11:Hc,12:Hc,13:xee,14:Hc,15:Hc,16:Hc,17:Hc,18:Hc,19:Hc,20:Hc,21:XI};function bee(e,t){for(var r=e.l+t,i=[];e.l<r;){var n=e.read_shift(2);e.l-=2;try{i.push(_ee[n](e,r-e.l))}catch{return e.l=r,i}}return e.l!=r&&(e.l=r),i}function Vy(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function wee(e,t){return t===0||e.read_shift(2),1200}function Bee(e,t,r){if(r.enc)return e.l+=t,"";var i=e.l,n=M0(e,0,r);return e.read_shift(t+i-e.l),n}function Cee(e,t,r){var i=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:i&16,fBelow:i&64,fRight:i&128}}function See(e,t,r){var i=e.read_shift(4),n=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var c=Xv(e,0,r);return c.length===0&&(c="Sheet1"),{pos:i,hs:n,dt:a,name:c}}function Eee(e,t){for(var r=e.l+t,i=e.read_shift(4),n=e.read_shift(4),a=[],c=0;c!=n&&e.l<r;++c)a.push(lee(e));return a.Count=i,a.Unique=n,a}function Tee(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Fee(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var i=e.read_shift(1);return e.l+=3,i&7&&(t.level=i&7),i&32&&(t.hidden=!0),i&64&&(t.hpt=r/20),t}function kee(e){var t=dee(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Nee(e){return e.read_shift(2),e.read_shift(4)}function eF(e,t,r){var i=0;r&&r.biff==2||(i=e.read_shift(2));var n=e.read_shift(2);r&&r.biff==2&&(i=1-(n>>15),n&=32767);var a={Unsynced:i&1,DyZero:(i&2)>>1,ExAsc:(i&4)>>2,ExDsc:(i&8)>>3};return[a,n]}function Iee(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),c=e.read_shift(2),s=e.read_shift(2),d=e.read_shift(2),g=e.read_shift(2);return{Pos:[t,r],Dim:[i,n],Flags:a,CurTab:c,FirstTab:s,Selected:d,TabRatio:g}}function Lee(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var i=e.read_shift(2);return{RTL:i&64}}function Mee(){}function Pee(e,t,r){var i={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return i.name=Xv(e,0,r),i}function Dee(e){var t=If(e);return t.isst=e.read_shift(4),t}function Ree(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=e.l+t,n=If(e);r.biff==2&&e.l++;var a=Zv(e,i-e.l,r);return n.val=a,n}function Uee(e,t,r){var i=e.read_shift(2),n=M0(e,0,r);return[i,n]}var jee=M0;function tF(e,t,r){var i=e.l+t,n=r.biff==8||!r.biff?4:2,a=e.read_shift(n),c=e.read_shift(n),s=e.read_shift(2),d=e.read_shift(2);return e.l=i,{s:{r:a,c:s},e:{r:c,c:d}}}function Oee(e){var t=e.read_shift(2),r=e.read_shift(2),i=WI(e);return{r:t,c:r,ixfe:i[0],rknum:i[1]}}function Qee(e,t){for(var r=e.l+t-2,i=e.read_shift(2),n=e.read_shift(2),a=[];e.l<r;)a.push(WI(e));if(e.l!==r)throw new Error("MulRK read error");var c=e.read_shift(2);if(a.length!=c-n+1)throw new Error("MulRK length mismatch");return{r:i,c:n,C:c,rkrec:a}}function zee(e,t){for(var r=e.l+t-2,i=e.read_shift(2),n=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var c=e.read_shift(2);if(a.length!=c-n+1)throw new Error("MulBlank length mismatch");return{r:i,c:n,C:c,ixfe:a}}function Hee(e,t,r,i){var n={},a=e.read_shift(4),c=e.read_shift(4),s=e.read_shift(4),d=e.read_shift(2);return n.patternType=OJ[s>>26],i.cellStyles&&(n.alc=a&7,n.fWrap=a>>3&1,n.alcV=a>>4&7,n.fJustLast=a>>7&1,n.trot=a>>8&255,n.cIndent=a>>16&15,n.fShrinkToFit=a>>20&1,n.iReadOrder=a>>22&2,n.fAtrNum=a>>26&1,n.fAtrFnt=a>>27&1,n.fAtrAlc=a>>28&1,n.fAtrBdr=a>>29&1,n.fAtrPat=a>>30&1,n.fAtrProt=a>>31&1,n.dgLeft=c&15,n.dgRight=c>>4&15,n.dgTop=c>>8&15,n.dgBottom=c>>12&15,n.icvLeft=c>>16&127,n.icvRight=c>>23&127,n.grbitDiag=c>>30&3,n.icvTop=s&127,n.icvBottom=s>>7&127,n.icvDiag=s>>14&127,n.dgDiag=s>>21&15,n.icvFore=d&127,n.icvBack=d>>7&127,n.fsxButton=d>>14&1),n}function Vee(e,t,r){var i={};return i.ifnt=e.read_shift(2),i.numFmtId=e.read_shift(2),i.flags=e.read_shift(2),i.fStyle=i.flags>>2&1,t-=6,i.data=Hee(e,t,i.fStyle,r),i}function Gee(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function rF(e,t,r){var i=If(e);(r.biff==2||t==9)&&++e.l;var n=oee(e);return i.val=n,i.t=n===!0||n===!1?"b":"e",i}function qee(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=If(e),n=$c(e);return i.val=n,i}var iF=pee;function Kee(e,t,r){var i=e.l+t,n=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,n];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var c=C0(e,a),s=[];i>e.l;)s.push(Zv(e));return[a,n,c,s]}function nF(e,t,r){var i=e.read_shift(2),n,a={fBuiltIn:i&1,fWantAdvise:i>>>1&1,fWantPict:i>>>2&1,fOle:i>>>3&1,fOleLink:i>>>4&1,cf:i>>>5&1023,fIcon:i>>>15&1};return r.sbcch===14849&&(n=gee(e,t-2,r)),a.body=n||e.read_shift(t-2),typeof n=="string"&&(a.Name=n),a}var Wee=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function sF(e,t,r){var i=e.l+t,n=e.read_shift(2),a=e.read_shift(1),c=e.read_shift(1),s=e.read_shift(r&&r.biff==2?1:2),d=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),d=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var g=C0(e,c,r);n&32&&(g=Wee[g.charCodeAt(0)]);var x=i-e.l;r&&r.biff==2&&--x;var C=i==e.l||s===0||!(x>0)?[]:Fne(e,x,r,s);return{chKey:a,Name:g,itab:d,rgce:C}}function ZI(e,t,r){if(r.biff<8)return $ee(e,t,r);for(var i=[],n=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)i.push(mee(e,r.biff>8?12:6,r));if(e.l!=n)throw new Error("Bad ExternSheet: "+e.l+" != "+n);return i}function $ee(e,t,r){e[e.l+1]==3&&e[e.l]++;var i=Xv(e,t,r);return i.charCodeAt(0)==3?i.slice(1):i}function Xee(e,t,r){if(r.biff<8){e.l+=t;return}var i=e.read_shift(2),n=e.read_shift(2),a=C0(e,i,r),c=C0(e,n,r);return[a,c]}function Zee(e,t,r){var i=$I(e);e.l++;var n=e.read_shift(1);return t-=8,[kne(e,t,r),n,i]}function aF(e,t,r){var i=vee(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[i,Ene(e,t,r)]}function Yee(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,i=e.read_shift(4);return[t,r,i]}function Jee(e,t,r){if(!(r.biff<8)){var i=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),c=e.read_shift(2),s=M0(e,0,r);return r.biff<8&&e.read_shift(1),[{r:i,c:n},s,c,a]}}function ete(e,t,r){return Jee(e,t,r)}function tte(e,t){for(var r=[],i=e.read_shift(2);i--;)r.push(D2(e));return r}function rte(e,t,r){if(r&&r.biff<8)return nte(e,t,r);var i=XI(e),n=bee(e,t-22,i[1]);return{cmo:i,ft:n}}var ite={8:function(e,t){var r=e.l+t;e.l+=10;var i=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var n=e.read_shift(1);return e.l+=n,e.l=r,{fmt:i}}};function nte(e,t,r){e.l+=4;var i=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var c=[];return c.push((ite[i]||tu)(e,t,r)),{cmo:[n,i,a],ft:c}}function ste(e,t,r){var i=e.l,n="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],c;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:c=cee(e,6,r);var s=e.read_shift(2);e.read_shift(2),qo(e,2);var d=e.read_shift(2);e.l+=d;for(var g=1;g<e.lens.length-1;++g){if(e.l-i!=e.lens[g])throw new Error("TxO: bad continue record");var x=e[e.l],C=C0(e,e.lens[g+1]-e.lens[g]-1);if(n+=C,n.length>=(x?s:2*s))break}if(n.length!==s&&n.length!==s*2)throw new Error("cchText: "+s+" != "+n.length);return e.l=i+t,{t:n}}catch{return e.l=i+t,{t:n}}}function ate(e,t){var r=D2(e);e.l+=16;var i=fee(e,t-24);return[r,i]}function ote(e,t){e.read_shift(2);var r=D2(e),i=e.read_shift((t-10)/2,"dbcs-cont");return i=i.replace(Cu,""),[r,i]}function lte(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=$T[r]||r,r=e.read_shift(2),t[1]=$T[r]||r,t}function cte(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(KI(e));return r}function ute(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(KI(e));return r}function hte(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function YI(e,t,r){if(!r.cellStyles)return tu(e,t);var i=r&&r.biff>=12?4:2,n=e.read_shift(i),a=e.read_shift(i),c=e.read_shift(i),s=e.read_shift(i),d=e.read_shift(2);i==2&&(e.l+=2);var g={s:n,e:a,w:c,ixfe:s,flags:d};return(r.biff>=5||!r.biff)&&(g.level=d>>8&7),g}function Ate(e,t){var r={};return t<32||(e.l+=16,r.header=$c(e),r.footer=$c(e),e.l+=2),r}function fte(e,t,r){var i={area:!1};if(r.biff!=5)return e.l+=t,i;var n=e.read_shift(1);return e.l+=3,n&16&&(i.area=!0),i}var dte=If,pte=GI,mte=Zv;function gte(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(4),n={fmt:t,env:r,len:i,data:e.slice(e.l,e.l+i)};return e.l+=i,n}function vte(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var i=If(e);++e.l;var n=M0(e,t-7,r);return i.t="str",i.val=n,i}function xte(e){var t=If(e);++e.l;var r=$c(e);return t.t="n",t.val=r,t}function yte(e){var t=If(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function _te(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function bte(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function wte(e,t,r){var i=e.l+t,n=If(e),a=e.read_shift(2),c=C0(e,a,r);return e.l=i,n.t="str",n.val=c,n}var Bte=[2,3,48,49,131,139,140,245],oF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=mB({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(s,d){var g=[],x=bp(1);switch(d.type){case"base64":x=jA(kh(s));break;case"binary":x=jA(s);break;case"buffer":case"array":x=s;break}fc(x,0);var C=x.read_shift(1),N=!!(C&136),B=!1,M=!1;switch(C){case 2:break;case 3:break;case 48:B=!0,N=!0;break;case 49:B=!0,N=!0;break;case 131:break;case 139:break;case 140:M=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+C.toString(16))}var I=0,R=521;C==2&&(I=x.read_shift(2)),x.l+=3,C!=2&&(I=x.read_shift(4)),I>1048576&&(I=1e6),C!=2&&(R=x.read_shift(2));var D=x.read_shift(2),V=d.codepage||1252;C!=2&&(x.l+=16,x.read_shift(1),x[x.l]!==0&&(V=e[x[x.l]]),x.l+=1,x.l+=2),M&&(x.l+=36);for(var G=[],Z={},X=Math.min(x.length,C==2?521:R-10-(B?264:0)),le=M?32:11;x.l<X&&x[x.l]!=13;)switch(Z={},Z.name=Sv.utils.decode(V,x.slice(x.l,x.l+le)).replace(/[\u0000\r\n].*$/g,""),x.l+=le,Z.type=String.fromCharCode(x.read_shift(1)),C!=2&&!M&&(Z.offset=x.read_shift(4)),Z.len=x.read_shift(1),C==2&&(Z.offset=x.read_shift(2)),Z.dec=x.read_shift(1),Z.name.length&&G.push(Z),C!=2&&(x.l+=M?13:14),Z.type){case"B":(!B||Z.len!=8)&&d.WTF&&console.log("Skipping "+Z.name+":"+Z.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+Z.name+":"+Z.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+Z.type)}if(x[x.l]!==13&&(x.l=R-1),x.read_shift(1)!==13)throw new Error("DBF Terminator not found "+x.l+" "+x[x.l]);x.l=R;var ae=0,ce=0;for(g[0]=[],ce=0;ce!=G.length;++ce)g[0][ce]=G[ce].name;for(;I-- >0;){if(x[x.l]===42){x.l+=D;continue}for(++x.l,g[++ae]=[],ce=0,ce=0;ce!=G.length;++ce){var se=x.slice(x.l,x.l+G[ce].len);x.l+=G[ce].len,fc(se,0);var ue=Sv.utils.decode(V,se);switch(G[ce].type){case"C":ue.trim().length&&(g[ae][ce]=ue.replace(/\s+$/,""));break;case"D":ue.length===8?g[ae][ce]=new Date(+ue.slice(0,4),+ue.slice(4,6)-1,+ue.slice(6,8)):g[ae][ce]=ue;break;case"F":g[ae][ce]=parseFloat(ue.trim());break;case"+":case"I":g[ae][ce]=M?se.read_shift(-4,"i")^2147483648:se.read_shift(4,"i");break;case"L":switch(ue.trim().toUpperCase()){case"Y":case"T":g[ae][ce]=!0;break;case"N":case"F":g[ae][ce]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ue+"|")}break;case"M":if(!N)throw new Error("DBF Unexpected MEMO for type "+C.toString(16));g[ae][ce]="##MEMO##"+(M?parseInt(ue.trim(),10):se.read_shift(4));break;case"N":ue=ue.replace(/\u0000/g,"").trim(),ue&&ue!="."&&(g[ae][ce]=+ue||0);break;case"@":g[ae][ce]=new Date(se.read_shift(-8,"f")-621356832e5);break;case"T":g[ae][ce]=new Date((se.read_shift(4)-2440588)*864e5+se.read_shift(4));break;case"Y":g[ae][ce]=se.read_shift(4,"i")/1e4+se.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":g[ae][ce]=-se.read_shift(-8,"f");break;case"B":if(B&&G[ce].len==8){g[ae][ce]=se.read_shift(8,"f");break}case"G":case"P":se.l+=G[ce].len;break;case"0":if(G[ce].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+G[ce].type)}}}if(C!=2&&x.l<x.length&&x[x.l++]!=26)throw new Error("DBF EOF Marker missing "+(x.l-1)+" of "+x.length+" "+x[x.l-1].toString(16));return d&&d.sheetRows&&(g=g.slice(0,d.sheetRows)),d.DBF=G,g}function i(s,d){var g=d||{};g.dateNF||(g.dateNF="yyyymmdd");var x=_g(r(s,g),g);return x["!cols"]=g.DBF.map(function(C){return{wch:C.len,DBF:C}}),delete g.DBF,x}function n(s,d){try{return Cp(i(s,d),d)}catch(g){if(d&&d.WTF)throw g}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function c(s,d){var g=d||{};if(+g.codepage>=0&&OA(+g.codepage),g.type=="string")throw new Error("Cannot write DBF to JS string");var x=Y5(),C=l4(s,{header:1,raw:!0,cellDates:!0}),N=C[0],B=C.slice(1),M=s["!cols"]||[],I=0,R=0,D=0,V=1;for(I=0;I<N.length;++I){if(((M[I]||{}).DBF||{}).name){N[I]=M[I].DBF.name,++D;continue}if(N[I]!=null){if(++D,typeof N[I]=="number"&&(N[I]=N[I].toString(10)),typeof N[I]!="string")throw new Error("DBF Invalid column name "+N[I]+" |"+typeof N[I]+"|");if(N.indexOf(N[I])!==I){for(R=0;R<1024;++R)if(N.indexOf(N[I]+"_"+R)==-1){N[I]+="_"+R;break}}}}var G=so(s["!ref"]),Z=[],X=[],le=[];for(I=0;I<=G.e.c-G.s.c;++I){var ae="",ce="",se=0,ue=[];for(R=0;R<B.length;++R)B[R][I]!=null&&ue.push(B[R][I]);if(ue.length==0||N[I]==null){Z[I]="?";continue}for(R=0;R<ue.length;++R){switch(typeof ue[R]){case"number":ce="B";break;case"string":ce="C";break;case"boolean":ce="L";break;case"object":ce=ue[R]instanceof Date?"D":"C";break;default:ce="C"}se=Math.max(se,String(ue[R]).length),ae=ae&&ae!=ce?"C":ce}se>250&&(se=250),ce=((M[I]||{}).DBF||{}).type,ce=="C"&&M[I].DBF.len>se&&(se=M[I].DBF.len),ae=="B"&&ce=="N"&&(ae="N",le[I]=M[I].DBF.dec,se=M[I].DBF.len),X[I]=ae=="C"||ce=="N"?se:a[ae]||0,V+=X[I],Z[I]=ae}var re=x.next(32);for(re.write_shift(4,318902576),re.write_shift(4,B.length),re.write_shift(2,296+32*D),re.write_shift(2,V),I=0;I<4;++I)re.write_shift(4,0);for(re.write_shift(4,0|(+t[Z8]||3)<<8),I=0,R=0;I<N.length;++I)if(N[I]!=null){var W=x.next(32),de=(N[I].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);W.write_shift(1,de,"sbcs"),W.write_shift(1,Z[I]=="?"?"C":Z[I],"sbcs"),W.write_shift(4,R),W.write_shift(1,X[I]||a[Z[I]]||0),W.write_shift(1,le[I]||0),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(1,0),W.write_shift(4,0),W.write_shift(4,0),R+=X[I]||a[Z[I]]||0}var Ee=x.next(264);for(Ee.write_shift(4,13),I=0;I<65;++I)Ee.write_shift(4,0);for(I=0;I<B.length;++I){var Ne=x.next(V);for(Ne.write_shift(1,0),R=0;R<N.length;++R)if(N[R]!=null)switch(Z[R]){case"L":Ne.write_shift(1,B[I][R]==null?63:B[I][R]?84:70);break;case"B":Ne.write_shift(8,B[I][R]||0,"f");break;case"N":var ge="0";for(typeof B[I][R]=="number"&&(ge=B[I][R].toFixed(le[R]||0)),D=0;D<X[R]-ge.length;++D)Ne.write_shift(1,32);Ne.write_shift(1,ge,"sbcs");break;case"D":B[I][R]?(Ne.write_shift(4,("0000"+B[I][R].getFullYear()).slice(-4),"sbcs"),Ne.write_shift(2,("00"+(B[I][R].getMonth()+1)).slice(-2),"sbcs"),Ne.write_shift(2,("00"+B[I][R].getDate()).slice(-2),"sbcs")):Ne.write_shift(8,"00000000","sbcs");break;case"C":var Pe=String(B[I][R]!=null?B[I][R]:"").slice(0,X[R]);for(Ne.write_shift(1,Pe,"sbcs"),D=0;D<X[R]-Pe.length;++D)Ne.write_shift(1,32);break}}return x.next(1).write_shift(1,26),x.end()}return{to_workbook:n,to_sheet:i,from_sheet:c}}(),Cte=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ef(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(N,B){var M=e[B];return typeof M=="number"?wT(M):M},i=function(N,B,M){var I=B.charCodeAt(0)-32<<4|M.charCodeAt(0)-48;return I==59?N:wT(I)};e["|"]=254;function n(N,B){switch(B.type){case"base64":return a(kh(N),B);case"binary":return a(N,B);case"buffer":return a(qn&&Buffer.isBuffer(N)?N.toString("binary"):k0(N),B);case"array":return a(B0(N),B)}throw new Error("Unrecognized type "+B.type)}function a(N,B){var M=N.split(/[\n\r]+/),I=-1,R=-1,D=0,V=0,G=[],Z=[],X=null,le={},ae=[],ce=[],se=[],ue=0,re;for(+B.codepage>=0&&OA(+B.codepage);D!==M.length;++D){ue=0;var W=M[D].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,i).replace(t,r),de=W.replace(/;;/g,"\0").split(";").map(function(we){return we.replace(/\u0000/g,";")}),Ee=de[0],Ne;if(W.length>0)switch(Ee){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":de[1].charAt(0)=="P"&&Z.push(W.slice(3).replace(/;;/g,";"));break;case"C":var ge=!1,Pe=!1,Ye=!1,Me=!1,De=-1,tt=-1;for(V=1;V<de.length;++V)switch(de[V].charAt(0)){case"A":break;case"X":R=parseInt(de[V].slice(1))-1,Pe=!0;break;case"Y":for(I=parseInt(de[V].slice(1))-1,Pe||(R=0),re=G.length;re<=I;++re)G[re]=[];break;case"K":Ne=de[V].slice(1),Ne.charAt(0)==='"'?Ne=Ne.slice(1,Ne.length-1):Ne==="TRUE"?Ne=!0:Ne==="FALSE"?Ne=!1:isNaN(zA(Ne))?isNaN(ag(Ne).getDate())||(Ne=Kl(Ne)):(Ne=zA(Ne),X!==null&&xg(X)&&(Ne=P2(Ne))),ge=!0;break;case"E":Me=!0;var ee=Ym(de[V].slice(1),{r:I,c:R});G[I][R]=[G[I][R],ee];break;case"S":Ye=!0,G[I][R]=[G[I][R],"S5S"];break;case"G":break;case"R":De=parseInt(de[V].slice(1))-1;break;case"C":tt=parseInt(de[V].slice(1))-1;break;default:if(B&&B.WTF)throw new Error("SYLK bad record "+W)}if(ge&&(G[I][R]&&G[I][R].length==2?G[I][R][0]=Ne:G[I][R]=Ne,X=null),Ye){if(Me)throw new Error("SYLK shared formula cannot have own formula");var fe=De>-1&&G[De][tt];if(!fe||!fe[1])throw new Error("SYLK shared formula cannot find base");G[I][R][1]=lL(fe[1],{r:I-De,c:R-tt})}break;case"F":var pe=0;for(V=1;V<de.length;++V)switch(de[V].charAt(0)){case"X":R=parseInt(de[V].slice(1))-1,++pe;break;case"Y":for(I=parseInt(de[V].slice(1))-1,re=G.length;re<=I;++re)G[re]=[];break;case"M":ue=parseInt(de[V].slice(1))/20;break;case"F":break;case"G":break;case"P":X=Z[parseInt(de[V].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(se=de[V].slice(1).split(" "),re=parseInt(se[0],10);re<=parseInt(se[1],10);++re)ue=parseInt(se[2],10),ce[re-1]=ue===0?{hidden:!0}:{wch:ue},og(ce[re-1]);break;case"C":R=parseInt(de[V].slice(1))-1,ce[R]||(ce[R]={});break;case"R":I=parseInt(de[V].slice(1))-1,ae[I]||(ae[I]={}),ue>0?(ae[I].hpt=ue,ae[I].hpx=Iv(ue)):ue===0&&(ae[I].hidden=!0);break;default:if(B&&B.WTF)throw new Error("SYLK bad record "+W)}pe<1&&(X=null);break;default:if(B&&B.WTF)throw new Error("SYLK bad record "+W)}}return ae.length>0&&(le["!rows"]=ae),ce.length>0&&(le["!cols"]=ce),B&&B.sheetRows&&(G=G.slice(0,B.sheetRows)),[G,le]}function c(N,B){var M=n(N,B),I=M[0],R=M[1],D=_g(I,B);return Ef(R).forEach(function(V){D[V]=R[V]}),D}function s(N,B){return Cp(c(N,B),B)}function d(N,B,M,I){var R="C;Y"+(M+1)+";X"+(I+1)+";K";switch(N.t){case"n":R+=N.v||0,N.f&&!N.F&&(R+=";E"+hie(N.f,{r:M,c:I}));break;case"b":R+=N.v?"TRUE":"FALSE";break;case"e":R+=N.w||N.v;break;case"d":R+='"'+(N.w||N.v)+'"';break;case"s":R+='"'+N.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return R}function g(N,B){B.forEach(function(M,I){var R="F;W"+(I+1)+" "+(I+1)+" ";M.hidden?R+="0":(typeof M.width=="number"&&!M.wpx&&(M.wpx=J_(M.width)),typeof M.wpx=="number"&&!M.wch&&(M.wch=e2(M.wpx)),typeof M.wch=="number"&&(R+=Math.round(M.wch))),R.charAt(R.length-1)!=" "&&N.push(R)})}function x(N,B){B.forEach(function(M,I){var R="F;";M.hidden?R+="M0;":M.hpt?R+="M"+20*M.hpt+";":M.hpx&&(R+="M"+20*sL(M.hpx)+";"),R.length>2&&N.push(R+"R"+(I+1))})}function C(N,B){var M=["ID;PWXL;N;E"],I=[],R=so(N["!ref"]),D,V=Array.isArray(N),G=`\r
`;M.push("P;PGeneral"),M.push("F;P0;DG0G8;M255"),N["!cols"]&&g(M,N["!cols"]),N["!rows"]&&x(M,N["!rows"]),M.push("B;Y"+(R.e.r-R.s.r+1)+";X"+(R.e.c-R.s.c+1)+";D"+[R.s.c,R.s.r,R.e.c,R.e.r].join(" "));for(var Z=R.s.r;Z<=R.e.r;++Z)for(var X=R.s.c;X<=R.e.c;++X){var le=an({r:Z,c:X});D=V?(N[Z]||[])[X]:N[le],!(!D||D.v==null&&(!D.f||D.F))&&I.push(d(D,N,Z,X))}return M.join(G)+G+I.join(G)+G+"E"+G}return{to_workbook:s,to_sheet:c,from_sheet:C}}(),Ste=function(){function e(a,c){switch(c.type){case"base64":return t(kh(a),c);case"binary":return t(a,c);case"buffer":return t(qn&&Buffer.isBuffer(a)?a.toString("binary"):k0(a),c);case"array":return t(B0(a),c)}throw new Error("Unrecognized type "+c.type)}function t(a,c){for(var s=a.split(`
`),d=-1,g=-1,x=0,C=[];x!==s.length;++x){if(s[x].trim()==="BOT"){C[++d]=[],g=0;continue}if(!(d<0)){var N=s[x].trim().split(","),B=N[0],M=N[1];++x;for(var I=s[x]||"";(I.match(/["]/g)||[]).length&1&&x<s.length-1;)I+=`
`+s[++x];switch(I=I.trim(),+B){case-1:if(I==="BOT"){C[++d]=[],g=0;continue}else if(I!=="EOD")throw new Error("Unrecognized DIF special command "+I);break;case 0:I==="TRUE"?C[d][g]=!0:I==="FALSE"?C[d][g]=!1:isNaN(zA(M))?isNaN(ag(M).getDate())?C[d][g]=M:C[d][g]=Kl(M):C[d][g]=zA(M),++g;break;case 1:I=I.slice(1,I.length-1),I=I.replace(/""/g,'"'),I&&I.match(/^=".*"$/)&&(I=I.slice(2,-1)),C[d][g++]=I!==""?I:null;break}if(I==="EOD")break}}return c&&c.sheetRows&&(C=C.slice(0,c.sheetRows)),C}function r(a,c){return _g(e(a,c),c)}function i(a,c){return Cp(r(a,c),c)}var n=function(){var a=function(d,g,x,C,N){d.push(g),d.push(x+","+C),d.push('"'+N.replace(/"/g,'""')+'"')},c=function(d,g,x,C){d.push(g+","+x),d.push(g==1?'"'+C.replace(/"/g,'""')+'"':C)};return function(d){var g=[],x=so(d["!ref"]),C,N=Array.isArray(d);a(g,"TABLE",0,1,"sheetjs"),a(g,"VECTORS",0,x.e.r-x.s.r+1,""),a(g,"TUPLES",0,x.e.c-x.s.c+1,""),a(g,"DATA",0,0,"");for(var B=x.s.r;B<=x.e.r;++B){c(g,-1,0,"BOT");for(var M=x.s.c;M<=x.e.c;++M){var I=an({r:B,c:M});if(C=N?(d[B]||[])[M]:d[I],!C){c(g,1,0,"");continue}switch(C.t){case"n":var R=C.w;!R&&C.v!=null&&(R=C.v),R==null?C.f&&!C.F?c(g,1,0,"="+C.f):c(g,1,0,""):c(g,0,R,"V");break;case"b":c(g,0,C.v?1:0,C.v?"TRUE":"FALSE");break;case"s":c(g,1,0,isNaN(C.v)?C.v:'="'+C.v+'"');break;case"d":C.w||(C.w=oA(C.z||fn[14],Su(Kl(C.v)))),c(g,0,C.w,"V");break;default:c(g,1,0,"")}}}c(g,-1,0,"EOD");var D=`\r
`,V=g.join(D);return V}}();return{to_workbook:i,to_sheet:r,from_sheet:n}}(),Ete=function(){function e(C){return C.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(C){return C.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(C,N){for(var B=C.split(`
`),M=-1,I=-1,R=0,D=[];R!==B.length;++R){var V=B[R].trim().split(":");if(V[0]==="cell"){var G=Bu(V[1]);if(D.length<=G.r)for(M=D.length;M<=G.r;++M)D[M]||(D[M]=[]);switch(M=G.r,I=G.c,V[2]){case"t":D[M][I]=e(V[3]);break;case"v":D[M][I]=+V[3];break;case"vtf":var Z=V[V.length-1];case"vtc":switch(V[3]){case"nl":D[M][I]=!!+V[4];break;default:D[M][I]=+V[4];break}V[2]=="vtf"&&(D[M][I]=[D[M][I],Z])}}}return N&&N.sheetRows&&(D=D.slice(0,N.sheetRows)),D}function i(C,N){return _g(r(C,N),N)}function n(C,N){return Cp(i(C,N),N)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),c=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function g(C){if(!C||!C["!ref"])return"";for(var N=[],B=[],M,I="",R=yg(C["!ref"]),D=Array.isArray(C),V=R.s.r;V<=R.e.r;++V)for(var G=R.s.c;G<=R.e.c;++G)if(I=an({r:V,c:G}),M=D?(C[V]||[])[G]:C[I],!(!M||M.v==null||M.t==="z")){switch(B=["cell",I,"t"],M.t){case"s":case"str":B.push(t(M.v));break;case"n":M.f?(B[2]="vtf",B[3]="n",B[4]=M.v,B[5]=t(M.f)):(B[2]="v",B[3]=M.v);break;case"b":B[2]="vt"+(M.f?"f":"c"),B[3]="nl",B[4]=M.v?"1":"0",B[5]=t(M.f||(M.v?"TRUE":"FALSE"));break;case"d":var Z=Su(Kl(M.v));B[2]="vtc",B[3]="nd",B[4]=""+Z,B[5]=M.w||oA(M.z||fn[14],Z);break;case"e":continue}N.push(B.join(":"))}return N.push("sheet:c:"+(R.e.c-R.s.c+1)+":r:"+(R.e.r-R.s.r+1)+":tvf:1"),N.push("valueformat:1:text-wiki"),N.join(`
`)}function x(C){return[a,c,s,c,g(C),d].join(`
`)}return{to_workbook:n,to_sheet:i,from_sheet:x}}(),kv=function(){function e(x,C,N,B,M){M.raw?C[N][B]=x:x===""||(x==="TRUE"?C[N][B]=!0:x==="FALSE"?C[N][B]=!1:isNaN(zA(x))?isNaN(ag(x).getDate())?C[N][B]=x:C[N][B]=Kl(x):C[N][B]=zA(x))}function t(x,C){var N=C||{},B=[];if(!x||x.length===0)return B;for(var M=x.split(/[\r\n]/),I=M.length-1;I>=0&&M[I].length===0;)--I;for(var R=10,D=0,V=0;V<=I;++V)D=M[V].indexOf(" "),D==-1?D=M[V].length:D++,R=Math.max(R,D);for(V=0;V<=I;++V){B[V]=[];var G=0;for(e(M[V].slice(0,R).trim(),B,V,G,N),G=1;G<=(M[V].length-R)/10+1;++G)e(M[V].slice(R+(G-1)*10,R+G*10).trim(),B,V,G,N)}return N.sheetRows&&(B=B.slice(0,N.sheetRows)),B}var r={44:",",9:"	",59:";",124:"|"},i={44:3,9:2,59:1,124:0};function n(x){for(var C={},N=!1,B=0,M=0;B<x.length;++B)(M=x.charCodeAt(B))==34?N=!N:!N&&M in r&&(C[M]=(C[M]||0)+1);M=[];for(B in C)Object.prototype.hasOwnProperty.call(C,B)&&M.push([C[B],B]);if(!M.length){C=i;for(B in C)Object.prototype.hasOwnProperty.call(C,B)&&M.push([C[B],B])}return M.sort(function(I,R){return I[0]-R[0]||i[I[1]]-i[R[1]]}),r[M.pop()[1]]||44}function a(x,C){var N=C||{},B="",M=N.dense?[]:{},I={s:{c:0,r:0},e:{c:0,r:0}};x.slice(0,4)=="sep="?x.charCodeAt(5)==13&&x.charCodeAt(6)==10?(B=x.charAt(4),x=x.slice(7)):x.charCodeAt(5)==13||x.charCodeAt(5)==10?(B=x.charAt(4),x=x.slice(6)):B=n(x.slice(0,1024)):N&&N.FS?B=N.FS:B=n(x.slice(0,1024));var R=0,D=0,V=0,G=0,Z=0,X=B.charCodeAt(0),le=!1,ae=0,ce=x.charCodeAt(0);x=x.replace(/\r\n/mg,`
`);var se=N.dateNF!=null?UY(N.dateNF):null;function ue(){var re=x.slice(G,Z),W={};if(re.charAt(0)=='"'&&re.charAt(re.length-1)=='"'&&(re=re.slice(1,-1).replace(/""/g,'"')),re.length===0)W.t="z";else if(N.raw)W.t="s",W.v=re;else if(re.trim().length===0)W.t="s",W.v=re;else if(re.charCodeAt(0)==61)re.charCodeAt(1)==34&&re.charCodeAt(re.length-1)==34?(W.t="s",W.v=re.slice(2,-1).replace(/""/g,'"')):fie(re)?(W.t="n",W.f=re.slice(1)):(W.t="s",W.v=re);else if(re=="TRUE")W.t="b",W.v=!0;else if(re=="FALSE")W.t="b",W.v=!1;else if(!isNaN(V=zA(re)))W.t="n",N.cellText!==!1&&(W.w=re),W.v=V;else if(!isNaN(ag(re).getDate())||se&&re.match(se)){W.z=N.dateNF||fn[14];var de=0;se&&re.match(se)&&(re=jY(re,N.dateNF,re.match(se)||[]),de=1),N.cellDates?(W.t="d",W.v=Kl(re,de)):(W.t="n",W.v=Su(Kl(re,de))),N.cellText!==!1&&(W.w=oA(W.z,W.v instanceof Date?Su(W.v):W.v)),N.cellNF||delete W.z}else W.t="s",W.v=re;if(W.t=="z"||(N.dense?(M[R]||(M[R]=[]),M[R][D]=W):M[an({c:D,r:R})]=W),G=Z+1,ce=x.charCodeAt(G),I.e.c<D&&(I.e.c=D),I.e.r<R&&(I.e.r=R),ae==X)++D;else if(D=0,++R,N.sheetRows&&N.sheetRows<=R)return!0}e:for(;Z<x.length;++Z)switch(ae=x.charCodeAt(Z)){case 34:ce===34&&(le=!le);break;case X:case 10:case 13:if(!le&&ue())break e;break}return Z-G>0&&ue(),M["!ref"]=Xn(I),M}function c(x,C){return!(C&&C.PRN)||C.FS||x.slice(0,4)=="sep="||x.indexOf("	")>=0||x.indexOf(",")>=0||x.indexOf(";")>=0?a(x,C):_g(t(x,C),C)}function s(x,C){var N="",B=C.type=="string"?[0,0,0,0]:PB(x,C);switch(C.type){case"base64":N=kh(x);break;case"binary":N=x;break;case"buffer":C.codepage==65001?N=x.toString("utf8"):C.codepage&&typeof Sv<"u"||(N=qn&&Buffer.isBuffer(x)?x.toString("binary"):k0(x));break;case"array":N=B0(x);break;case"string":N=x;break;default:throw new Error("Unrecognized type "+C.type)}return B[0]==239&&B[1]==187&&B[2]==191?N=ha(N.slice(3)):C.type!="string"&&C.type!="buffer"&&C.codepage==65001?N=ha(N):C.type=="binary"&&typeof Sv<"u",N.slice(0,19)=="socialcalc:version:"?Ete.to_sheet(C.type=="string"?N:ha(N),C):c(N,C)}function d(x,C){return Cp(s(x,C),C)}function g(x){for(var C=[],N=so(x["!ref"]),B,M=Array.isArray(x),I=N.s.r;I<=N.e.r;++I){for(var R=[],D=N.s.c;D<=N.e.c;++D){var V=an({r:I,c:D});if(B=M?(x[I]||[])[D]:x[V],!B||B.v==null){R.push("          ");continue}for(var G=(B.w||(_d(B),B.w)||"").slice(0,10);G.length<10;)G+=" ";R.push(G+(D===0?" ":""))}C.push(R.join(""))}return C.join(`
`)}return{to_workbook:d,to_sheet:s,from_sheet:g}}();function Tte(e,t){var r=t||{},i=!!r.WTF;r.WTF=!0;try{var n=Cte.to_workbook(e,r);return r.WTF=i,n}catch(a){if(r.WTF=i,!a.message.match(/SYLK bad record ID/)&&i)throw a;return kv.to_workbook(e,t)}}var av=function(){function e(ee,fe,pe){if(ee){fc(ee,ee.l||0);for(var we=pe.Enum||De;ee.l<ee.length;){var Le=ee.read_shift(2),lt=we[Le]||we[65535],rt=ee.read_shift(2),gt=ee.l+rt,dt=lt.f&&lt.f(ee,rt,pe);if(ee.l=gt,fe(dt,lt,Le))return}}}function t(ee,fe){switch(fe.type){case"base64":return r(jA(kh(ee)),fe);case"binary":return r(jA(ee),fe);case"buffer":case"array":return r(ee,fe)}throw"Unsupported type "+fe.type}function r(ee,fe){if(!ee)return ee;var pe=fe||{},we=pe.dense?[]:{},Le="Sheet1",lt="",rt=0,gt={},dt=[],qt=[],Te={s:{r:0,c:0},e:{r:0,c:0}},at=pe.sheetRows||0;if(ee[2]==0&&(ee[3]==8||ee[3]==9)&&ee.length>=16&&ee[14]==5&&ee[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(ee[2]==2)pe.Enum=De,e(ee,function(Pt,Sr,or){switch(or){case 0:pe.vers=Pt,Pt>=4096&&(pe.qpro=!0);break;case 6:Te=Pt;break;case 204:Pt&&(lt=Pt);break;case 222:lt=Pt;break;case 15:case 51:pe.qpro||(Pt[1].v=Pt[1].v.slice(1));case 13:case 14:case 16:or==14&&(Pt[2]&112)==112&&(Pt[2]&15)>1&&(Pt[2]&15)<15&&(Pt[1].z=pe.dateNF||fn[14],pe.cellDates&&(Pt[1].t="d",Pt[1].v=P2(Pt[1].v))),pe.qpro&&Pt[3]>rt&&(we["!ref"]=Xn(Te),gt[Le]=we,dt.push(Le),we=pe.dense?[]:{},Te={s:{r:0,c:0},e:{r:0,c:0}},rt=Pt[3],Le=lt||"Sheet"+(rt+1),lt="");var Wr=pe.dense?(we[Pt[0].r]||[])[Pt[0].c]:we[an(Pt[0])];if(Wr){Wr.t=Pt[1].t,Wr.v=Pt[1].v,Pt[1].z!=null&&(Wr.z=Pt[1].z),Pt[1].f!=null&&(Wr.f=Pt[1].f);break}pe.dense?(we[Pt[0].r]||(we[Pt[0].r]=[]),we[Pt[0].r][Pt[0].c]=Pt[1]):we[an(Pt[0])]=Pt[1];break}},pe);else if(ee[2]==26||ee[2]==14)pe.Enum=tt,ee[2]==14&&(pe.qpro=!0,ee.l=0),e(ee,function(Pt,Sr,or){switch(or){case 204:Le=Pt;break;case 22:Pt[1].v=Pt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Pt[3]>rt&&(we["!ref"]=Xn(Te),gt[Le]=we,dt.push(Le),we=pe.dense?[]:{},Te={s:{r:0,c:0},e:{r:0,c:0}},rt=Pt[3],Le="Sheet"+(rt+1)),at>0&&Pt[0].r>=at)break;pe.dense?(we[Pt[0].r]||(we[Pt[0].r]=[]),we[Pt[0].r][Pt[0].c]=Pt[1]):we[an(Pt[0])]=Pt[1],Te.e.c<Pt[0].c&&(Te.e.c=Pt[0].c),Te.e.r<Pt[0].r&&(Te.e.r=Pt[0].r);break;case 27:Pt[14e3]&&(qt[Pt[14e3][0]]=Pt[14e3][1]);break;case 1537:qt[Pt[0]]=Pt[1],Pt[0]==rt&&(Le=Pt[1]);break}},pe);else throw new Error("Unrecognized LOTUS BOF "+ee[2]);if(we["!ref"]=Xn(Te),gt[lt||Le]=we,dt.push(lt||Le),!qt.length)return{SheetNames:dt,Sheets:gt};for(var kt={},ze=[],Et=0;Et<qt.length;++Et)gt[dt[Et]]?(ze.push(qt[Et]||dt[Et]),kt[qt[Et]]=gt[qt[Et]]||gt[dt[Et]]):(ze.push(qt[Et]),kt[qt[Et]]={"!ref":"A1"});return{SheetNames:ze,Sheets:kt}}function i(ee,fe){var pe=fe||{};if(+pe.codepage>=0&&OA(+pe.codepage),pe.type=="string")throw new Error("Cannot write WK1 to JS string");var we=Y5(),Le=so(ee["!ref"]),lt=Array.isArray(ee),rt=[];DA(we,0,a(1030)),DA(we,6,d(Le));for(var gt=Math.min(Le.e.r,8191),dt=Le.s.r;dt<=gt;++dt)for(var qt=gc(dt),Te=Le.s.c;Te<=Le.e.c;++Te){dt===Le.s.r&&(rt[Te]=vl(Te));var at=rt[Te]+qt,kt=lt?(ee[dt]||[])[Te]:ee[at];if(!(!kt||kt.t=="z"))if(kt.t=="n")(kt.v|0)==kt.v&&kt.v>=-32768&&kt.v<=32767?DA(we,13,B(dt,Te,kt.v)):DA(we,14,I(dt,Te,kt.v));else{var ze=_d(kt);DA(we,15,C(dt,Te,ze.slice(0,239)))}}return DA(we,1),we.end()}function n(ee,fe){var pe=fe||{};if(+pe.codepage>=0&&OA(+pe.codepage),pe.type=="string")throw new Error("Cannot write WK3 to JS string");var we=Y5();DA(we,0,c(ee));for(var Le=0,lt=0;Le<ee.SheetNames.length;++Le)(ee.Sheets[ee.SheetNames[Le]]||{})["!ref"]&&DA(we,27,Me(ee.SheetNames[Le],lt++));var rt=0;for(Le=0;Le<ee.SheetNames.length;++Le){var gt=ee.Sheets[ee.SheetNames[Le]];if(!(!gt||!gt["!ref"])){for(var dt=so(gt["!ref"]),qt=Array.isArray(gt),Te=[],at=Math.min(dt.e.r,8191),kt=dt.s.r;kt<=at;++kt)for(var ze=gc(kt),Et=dt.s.c;Et<=dt.e.c;++Et){kt===dt.s.r&&(Te[Et]=vl(Et));var Pt=Te[Et]+ze,Sr=qt?(gt[kt]||[])[Et]:gt[Pt];if(!(!Sr||Sr.t=="z"))if(Sr.t=="n")DA(we,23,ue(kt,Et,rt,Sr.v));else{var or=_d(Sr);DA(we,22,ae(kt,Et,rt,or.slice(0,239)))}}++rt}}return DA(we,1),we.end()}function a(ee){var fe=pl(2);return fe.write_shift(2,ee),fe}function c(ee){var fe=pl(26);fe.write_shift(2,4096),fe.write_shift(2,4),fe.write_shift(4,0);for(var pe=0,we=0,Le=0,lt=0;lt<ee.SheetNames.length;++lt){var rt=ee.SheetNames[lt],gt=ee.Sheets[rt];if(!(!gt||!gt["!ref"])){++Le;var dt=yg(gt["!ref"]);pe<dt.e.r&&(pe=dt.e.r),we<dt.e.c&&(we=dt.e.c)}}return pe>8191&&(pe=8191),fe.write_shift(2,pe),fe.write_shift(1,Le),fe.write_shift(1,we),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(1,1),fe.write_shift(1,2),fe.write_shift(4,0),fe.write_shift(4,0),fe}function s(ee,fe,pe){var we={s:{c:0,r:0},e:{c:0,r:0}};return fe==8&&pe.qpro?(we.s.c=ee.read_shift(1),ee.l++,we.s.r=ee.read_shift(2),we.e.c=ee.read_shift(1),ee.l++,we.e.r=ee.read_shift(2),we):(we.s.c=ee.read_shift(2),we.s.r=ee.read_shift(2),fe==12&&pe.qpro&&(ee.l+=2),we.e.c=ee.read_shift(2),we.e.r=ee.read_shift(2),fe==12&&pe.qpro&&(ee.l+=2),we.s.c==65535&&(we.s.c=we.e.c=we.s.r=we.e.r=0),we)}function d(ee){var fe=pl(8);return fe.write_shift(2,ee.s.c),fe.write_shift(2,ee.s.r),fe.write_shift(2,ee.e.c),fe.write_shift(2,ee.e.r),fe}function g(ee,fe,pe){var we=[{c:0,r:0},{t:"n",v:0},0,0];return pe.qpro&&pe.vers!=20768?(we[0].c=ee.read_shift(1),we[3]=ee.read_shift(1),we[0].r=ee.read_shift(2),ee.l+=2):(we[2]=ee.read_shift(1),we[0].c=ee.read_shift(2),we[0].r=ee.read_shift(2)),we}function x(ee,fe,pe){var we=ee.l+fe,Le=g(ee,fe,pe);if(Le[1].t="s",pe.vers==20768){ee.l++;var lt=ee.read_shift(1);return Le[1].v=ee.read_shift(lt,"utf8"),Le}return pe.qpro&&ee.l++,Le[1].v=ee.read_shift(we-ee.l,"cstr"),Le}function C(ee,fe,pe){var we=pl(7+pe.length);we.write_shift(1,255),we.write_shift(2,fe),we.write_shift(2,ee),we.write_shift(1,39);for(var Le=0;Le<we.length;++Le){var lt=pe.charCodeAt(Le);we.write_shift(1,lt>=128?95:lt)}return we.write_shift(1,0),we}function N(ee,fe,pe){var we=g(ee,fe,pe);return we[1].v=ee.read_shift(2,"i"),we}function B(ee,fe,pe){var we=pl(7);return we.write_shift(1,255),we.write_shift(2,fe),we.write_shift(2,ee),we.write_shift(2,pe,"i"),we}function M(ee,fe,pe){var we=g(ee,fe,pe);return we[1].v=ee.read_shift(8,"f"),we}function I(ee,fe,pe){var we=pl(13);return we.write_shift(1,255),we.write_shift(2,fe),we.write_shift(2,ee),we.write_shift(8,pe,"f"),we}function R(ee,fe,pe){var we=ee.l+fe,Le=g(ee,fe,pe);if(Le[1].v=ee.read_shift(8,"f"),pe.qpro)ee.l=we;else{var lt=ee.read_shift(2);Z(ee.slice(ee.l,ee.l+lt),Le),ee.l+=lt}return Le}function D(ee,fe,pe){var we=fe&32768;return fe&=-32769,fe=(we?ee:0)+(fe>=8192?fe-16384:fe),(we?"":"$")+(pe?vl(fe):gc(fe))}var V={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},G=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function Z(ee,fe){fc(ee,0);for(var pe=[],we=0,Le="",lt="",rt="",gt="";ee.l<ee.length;){var dt=ee[ee.l++];switch(dt){case 0:pe.push(ee.read_shift(8,"f"));break;case 1:lt=D(fe[0].c,ee.read_shift(2),!0),Le=D(fe[0].r,ee.read_shift(2),!1),pe.push(lt+Le);break;case 2:{var qt=D(fe[0].c,ee.read_shift(2),!0),Te=D(fe[0].r,ee.read_shift(2),!1);lt=D(fe[0].c,ee.read_shift(2),!0),Le=D(fe[0].r,ee.read_shift(2),!1),pe.push(qt+Te+":"+lt+Le)}break;case 3:if(ee.l<ee.length){console.error("WK1 premature formula end");return}break;case 4:pe.push("("+pe.pop()+")");break;case 5:pe.push(ee.read_shift(2));break;case 6:{for(var at="";dt=ee[ee.l++];)at+=String.fromCharCode(dt);pe.push('"'+at.replace(/"/g,'""')+'"')}break;case 8:pe.push("-"+pe.pop());break;case 23:pe.push("+"+pe.pop());break;case 22:pe.push("NOT("+pe.pop()+")");break;case 20:case 21:gt=pe.pop(),rt=pe.pop(),pe.push(["AND","OR"][dt-20]+"("+rt+","+gt+")");break;default:if(dt<32&&G[dt])gt=pe.pop(),rt=pe.pop(),pe.push(rt+G[dt]+gt);else if(V[dt]){if(we=V[dt][1],we==69&&(we=ee[ee.l++]),we>pe.length){console.error("WK1 bad formula parse 0x"+dt.toString(16)+":|"+pe.join("|")+"|");return}var kt=pe.slice(-we);pe.length-=we,pe.push(V[dt][0]+"("+kt.join(",")+")")}else return dt<=7?console.error("WK1 invalid opcode "+dt.toString(16)):dt<=24?console.error("WK1 unsupported op "+dt.toString(16)):dt<=30?console.error("WK1 invalid opcode "+dt.toString(16)):dt<=115?console.error("WK1 unsupported function opcode "+dt.toString(16)):console.error("WK1 unrecognized opcode "+dt.toString(16))}}pe.length==1?fe[1].f=""+pe[0]:console.error("WK1 bad formula parse |"+pe.join("|")+"|")}function X(ee){var fe=[{c:0,r:0},{t:"n",v:0},0];return fe[0].r=ee.read_shift(2),fe[3]=ee[ee.l++],fe[0].c=ee[ee.l++],fe}function le(ee,fe){var pe=X(ee);return pe[1].t="s",pe[1].v=ee.read_shift(fe-4,"cstr"),pe}function ae(ee,fe,pe,we){var Le=pl(6+we.length);Le.write_shift(2,ee),Le.write_shift(1,pe),Le.write_shift(1,fe),Le.write_shift(1,39);for(var lt=0;lt<we.length;++lt){var rt=we.charCodeAt(lt);Le.write_shift(1,rt>=128?95:rt)}return Le.write_shift(1,0),Le}function ce(ee,fe){var pe=X(ee);pe[1].v=ee.read_shift(2);var we=pe[1].v>>1;if(pe[1].v&1)switch(we&7){case 0:we=(we>>3)*5e3;break;case 1:we=(we>>3)*500;break;case 2:we=(we>>3)/20;break;case 3:we=(we>>3)/200;break;case 4:we=(we>>3)/2e3;break;case 5:we=(we>>3)/2e4;break;case 6:we=(we>>3)/16;break;case 7:we=(we>>3)/64;break}return pe[1].v=we,pe}function se(ee,fe){var pe=X(ee),we=ee.read_shift(4),Le=ee.read_shift(4),lt=ee.read_shift(2);if(lt==65535)return we===0&&Le===3221225472?(pe[1].t="e",pe[1].v=15):we===0&&Le===3489660928?(pe[1].t="e",pe[1].v=42):pe[1].v=0,pe;var rt=lt&32768;return lt=(lt&32767)-16446,pe[1].v=(1-rt*2)*(Le*Math.pow(2,lt+32)+we*Math.pow(2,lt)),pe}function ue(ee,fe,pe,we){var Le=pl(14);if(Le.write_shift(2,ee),Le.write_shift(1,pe),Le.write_shift(1,fe),we==0)return Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(2,65535),Le;var lt=0,rt=0,gt=0,dt=0;return we<0&&(lt=1,we=-we),rt=Math.log2(we)|0,we/=Math.pow(2,rt-31),dt=we>>>0,(dt&2147483648)==0&&(we/=2,++rt,dt=we>>>0),we-=dt,dt|=2147483648,dt>>>=0,we*=Math.pow(2,32),gt=we>>>0,Le.write_shift(4,gt),Le.write_shift(4,dt),rt+=16383+(lt?32768:0),Le.write_shift(2,rt),Le}function re(ee,fe){var pe=se(ee);return ee.l+=fe-14,pe}function W(ee,fe){var pe=X(ee),we=ee.read_shift(4);return pe[1].v=we>>6,pe}function de(ee,fe){var pe=X(ee),we=ee.read_shift(8,"f");return pe[1].v=we,pe}function Ee(ee,fe){var pe=de(ee);return ee.l+=fe-10,pe}function Ne(ee,fe){return ee[ee.l+fe-1]==0?ee.read_shift(fe,"cstr"):""}function ge(ee,fe){var pe=ee[ee.l++];pe>fe-1&&(pe=fe-1);for(var we="";we.length<pe;)we+=String.fromCharCode(ee[ee.l++]);return we}function Pe(ee,fe,pe){if(!(!pe.qpro||fe<21)){var we=ee.read_shift(1);ee.l+=17,ee.l+=1,ee.l+=2;var Le=ee.read_shift(fe-21,"cstr");return[we,Le]}}function Ye(ee,fe){for(var pe={},we=ee.l+fe;ee.l<we;){var Le=ee.read_shift(2);if(Le==14e3){for(pe[Le]=[0,""],pe[Le][0]=ee.read_shift(2);ee[ee.l];)pe[Le][1]+=String.fromCharCode(ee[ee.l]),ee.l++;ee.l++}}return pe}function Me(ee,fe){var pe=pl(5+ee.length);pe.write_shift(2,14e3),pe.write_shift(2,fe);for(var we=0;we<ee.length;++we){var Le=ee.charCodeAt(we);pe[pe.l++]=Le>127?95:Le}return pe[pe.l++]=0,pe}var De={0:{n:"BOF",f:qo},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:s},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:N},14:{n:"NUMBER",f:M},15:{n:"LABEL",f:x},16:{n:"FORMULA",f:R},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:x},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ne},222:{n:"SHEETNAMELP",f:ge},65535:{n:""}},tt={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:le},23:{n:"NUMBER17",f:se},24:{n:"NUMBER18",f:ce},25:{n:"FORMULA19",f:re},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ye},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:W},38:{n:"??"},39:{n:"NUMBER27",f:de},40:{n:"FORMULA28",f:Ee},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ne},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Pe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:i,book_to_wk3:n,to_workbook:t}}();function Fte(e){var t={},r=e.match(ru),i=0,n=!1;if(r)for(;i!=r.length;++i){var a=Zi(r[i]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=hB[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(a[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+a[0])}}return t}var kte=function(){var e=Tv("t"),t=Tv("rPr");function r(a){var c=a.match(e);if(!c)return{t:"s",v:""};var s={t:"s",v:ts(c[1])},d=a.match(t);return d&&(s.s=Fte(d[1])),s}var i=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(c){return c.replace(i,"").split(n).map(r).filter(function(s){return s.v})}}(),Nte=function(){var t=/(\r\n|\n)/g;function r(n,a,c){var s=[];n.u&&s.push("text-decoration: underline;"),n.uval&&s.push("text-underline-style:"+n.uval+";"),n.sz&&s.push("font-size:"+n.sz+"pt;"),n.outline&&s.push("text-effect: outline;"),n.shadow&&s.push("text-shadow: auto;"),a.push('<span style="'+s.join("")+'">'),n.b&&(a.push("<b>"),c.push("</b>")),n.i&&(a.push("<i>"),c.push("</i>")),n.strike&&(a.push("<s>"),c.push("</s>"));var d=n.valign||"";return d=="superscript"||d=="super"?d="sup":d=="subscript"&&(d="sub"),d!=""&&(a.push("<"+d+">"),c.push("</"+d+">")),c.push("</span>"),n}function i(n){var a=[[],n.v,[]];return n.v?(n.s&&r(n.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(i).join("")}}(),Ite=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Lte=/<(?:\w+:)?r>/,Mte=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function TB(e,t){var r=t?t.cellHTML:!0,i={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(i.t=ts(ha(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),i.r=ha(e),r&&(i.h=vB(i.t))):e.match(Lte)&&(i.r=ha(e),i.t=ts(ha((e.replace(Mte,"").match(Ite)||[]).join("").replace(ru,""))),r&&(i.h=Nte(kte(i.r)))),i):{t:""}}var Pte=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Dte=/<(?:\w+:)?(?:si|sstItem)>/g,Rte=/<\/(?:\w+:)?(?:si|sstItem)>/;function Ute(e,t){var r=[],i="";if(!e)return r;var n=e.match(Pte);if(n){i=n[2].replace(Dte,"").split(Rte);for(var a=0;a!=i.length;++a){var c=TB(i[a].trim(),t);c!=null&&(r[r.length]=c)}n=Zi(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}function jte(e){return[e.read_shift(4),e.read_shift(4)]}function Ote(e,t){var r=[],i=!1;return wd(e,function(a,c,s){switch(s){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:i=!0;break;case 36:i=!1;break;default:if(c.T,!i||t.WTF)throw new Error("Unexpected record 0x"+s.toString(16))}}),r}function JI(e){for(var t=[],r=e.split(""),i=0;i<r.length;++i)t[i]=r[i].charCodeAt(0);return t}function pd(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Qte(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=pd(e,4),t.U=pd(e,4),t.W=pd(e,4),t}function zte(e){for(var t=e.read_shift(4),r=e.l+t-4,i={},n=e.read_shift(4),a=[];n-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(i.name=e.read_shift(0,"lpp4"),i.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return i}function Hte(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(zte(e));return t}function Vte(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Gte(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=pd(e,4),t.U=pd(e,4),t.W=pd(e,4),t}function qte(e){var t=Gte(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function eL(e,t){var r=e.l+t,i={};i.Flags=e.read_shift(4)&63,e.l+=4,i.AlgID=e.read_shift(4);var n=!1;switch(i.AlgID){case 26126:case 26127:case 26128:n=i.Flags==36;break;case 26625:n=i.Flags==4;break;case 0:n=i.Flags==16||i.Flags==4||i.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+i.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return i.AlgIDHash=e.read_shift(4),i.KeySize=e.read_shift(4),i.ProviderType=e.read_shift(4),e.l+=8,i.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,i}function tL(e,t){var r={},i=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,i),e.l=i,r}function Kte(e){var t=pd(e);switch(t.Minor){case 2:return[t.Minor,Wte(e)];case 3:return[t.Minor,$te()];case 4:return[t.Minor,Xte(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Wte(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),i=eL(e,r),n=tL(e,e.length-e.l);return{t:"Std",h:i,v:n}}function $te(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Xte(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),i={};return r.replace(ru,function(a){var c=Zi(a);switch(Nf(c[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(s){i[s]=c[s]});break;case"<dataIntegrity":i.encryptedHmacKey=c.encryptedHmacKey,i.encryptedHmacValue=c.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":i.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":i.uri=c.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":i.encs.push(c);break;default:throw c[0]}}),i}function Zte(e,t){var r={},i=r.EncryptionVersionInfo=pd(e,4);if(t-=4,i.Minor!=2)throw new Error("unrecognized minor version code: "+i.Minor);if(i.Major>4||i.Major<2)throw new Error("unrecognized major version code: "+i.Major);r.Flags=e.read_shift(4),t-=4;var n=e.read_shift(4);return t-=4,r.EncryptionHeader=eL(e,n),t-=n,r.EncryptionVerifier=tL(e,t),r}function Yte(e){var t={},r=t.EncryptionVersionInfo=pd(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function Jte(e){var t=0,r,i=JI(e),n=i.length+1,a,c,s,d,g;for(r=bp(n),r[0]=i.length,a=1;a!=n;++a)r[a]=i[a-1];for(a=n-1;a>=0;--a)c=r[a],s=(t&16384)===0?0:1,d=t<<1&32767,g=s|d,t=g^c;return t^52811}var rL=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],i=function(c){return(c/2|c*128)&255},n=function(c,s){return i(c^s)},a=function(c){for(var s=t[c.length-1],d=104,g=c.length-1;g>=0;--g)for(var x=c[g],C=0;C!=7;++C)x&64&&(s^=r[d]),x*=2,--d;return s};return function(c){for(var s=JI(c),d=a(s),g=s.length,x=bp(16),C=0;C!=16;++C)x[C]=0;var N,B,M;for((g&1)===1&&(N=d>>8,x[g]=n(e[0],N),--g,N=d&255,B=s[s.length-1],x[g]=n(B,N));g>0;)--g,N=d>>8,x[g]=n(s[g],N),--g,N=d&255,x[g]=n(s[g],N);for(g=15,M=15-s.length;M>0;)N=d>>8,x[g]=n(e[M],N),--g,--M,N=d&255,x[g]=n(s[g],N),--g,--M;return x}}(),ere=function(e,t,r,i,n){n||(n=t),i||(i=rL(e));var a,c;for(a=0;a!=t.length;++a)c=t[a],c^=i[r],c=(c>>5|c<<3)&255,n[a]=c,++r;return[n,r,i]},tre=function(e){var t=0,r=rL(e);return function(i){var n=ere("",i,t,r);return t=n[1],n[0]}};function rre(e,t,r,i){var n={key:qo(e),verificationBytes:qo(e)};return r.password&&(n.verifier=Jte(r.password)),i.valid=n.verificationBytes===n.verifier,i.valid&&(i.insitu=tre(r.password)),n}function ire(e,t,r){var i=r||{};return i.Info=e.read_shift(2),e.l-=2,i.Info===1?i.Data=Yte(e):i.Data=Zte(e,t),i}function nre(e,t,r){var i={Type:r.biff>=8?e.read_shift(2):0};return i.Type?ire(e,t-2,i):rre(e,r.biff>=8?t:t-2,r,i),i}var sre=function(){function e(n,a){switch(a.type){case"base64":return t(kh(n),a);case"binary":return t(n,a);case"buffer":return t(qn&&Buffer.isBuffer(n)?n.toString("binary"):k0(n),a);case"array":return t(B0(n),a)}throw new Error("Unrecognized type "+a.type)}function t(n,a){var c=a||{},s=c.dense?[]:{},d=n.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var g={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(x,C){Array.isArray(s)&&(s[C]=[]);for(var N=/\\\w+\b/g,B=0,M,I=-1;M=N.exec(x);){switch(M[0]){case"\\cell":var R=x.slice(B,N.lastIndex-M[0].length);if(R[0]==" "&&(R=R.slice(1)),++I,R.length){var D={v:R,t:"s"};Array.isArray(s)?s[C][I]=D:s[an({r:C,c:I})]=D}break}B=N.lastIndex}I>g.e.c&&(g.e.c=I)}),s["!ref"]=Xn(g),s}function r(n,a){return Cp(e(n,a),a)}function i(n){for(var a=["{\\rtf1\\ansi"],c=so(n["!ref"]),s,d=Array.isArray(n),g=c.s.r;g<=c.e.r;++g){a.push("\\trowd\\trautofit1");for(var x=c.s.c;x<=c.e.c;++x)a.push("\\cellx"+(x+1));for(a.push("\\pard\\intbl"),x=c.s.c;x<=c.e.c;++x){var C=an({r:g,c:x});s=d?(n[g]||[])[x]:n[C],!(!s||s.v==null&&(!s.f||s.F))&&(a.push(" "+(s.w||(_d(s),s.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:i}}();function are(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Nv(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function ore(e){var t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.max(t,r,i),a=Math.min(t,r,i),c=n-a;if(c===0)return[0,0,t];var s=0,d=0,g=n+a;switch(d=c/(g>1?2-g:g),n){case t:s=((r-i)/c+6)%6;break;case r:s=(i-t)/c+2;break;case i:s=(t-r)/c+4;break}return[s/6,d,g/2]}function lre(e){var t=e[0],r=e[1],i=e[2],n=r*2*(i<.5?i:1-i),a=i-n/2,c=[a,a,a],s=6*t,d;if(r!==0)switch(s|0){case 0:case 6:d=n*s,c[0]+=n,c[1]+=d;break;case 1:d=n*(2-s),c[0]+=d,c[1]+=n;break;case 2:d=n*(s-2),c[1]+=n,c[2]+=d;break;case 3:d=n*(4-s),c[1]+=d,c[2]+=n;break;case 4:d=n*(s-4),c[2]+=n,c[0]+=d;break;case 5:d=n*(6-s),c[2]+=d,c[0]+=n;break}for(var g=0;g!=3;++g)c[g]=Math.round(c[g]*255);return c}function Y_(e,t){if(t===0)return e;var r=ore(are(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Nv(lre(r))}var iL=6,cre=15,ure=1,bu=iL;function J_(e){return Math.floor((e+Math.round(128/bu)/256)*bu)}function e2(e){return Math.floor((e-5)/bu*100+.5)/100}function r4(e){return Math.round((e*bu+5)/bu*256)/256}function Iw(e){return r4(e2(J_(e)))}function FB(e){var t=Math.abs(e-Iw(e)),r=bu;if(t>.005)for(bu=ure;bu<cre;++bu)Math.abs(e-Iw(e))<=t&&(t=Math.abs(e-Iw(e)),r=bu);bu=r}function og(e){e.width?(e.wpx=J_(e.width),e.wch=e2(e.wpx),e.MDW=bu):e.wpx?(e.wch=e2(e.wpx),e.width=r4(e.wch),e.MDW=bu):typeof e.wch=="number"&&(e.width=r4(e.wch),e.wpx=J_(e.width),e.MDW=bu),e.customWidth&&delete e.customWidth}var hre=96,nL=hre;function sL(e){return e*96/nL}function Iv(e){return e*nL/96}var Are={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function fre(e,t,r,i){t.Borders=[];var n={},a=!1;(e[0].match(ru)||[]).forEach(function(c){var s=Zi(c);switch(Nf(s[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},s.diagonalUp&&(n.diagonalUp=Ia(s.diagonalUp)),s.diagonalDown&&(n.diagonalDown=Ia(s.diagonalDown)),t.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i&&i.WTF&&!a)throw new Error("unrecognized "+s[0]+" in borders")}})}function dre(e,t,r,i){t.Fills=[];var n={},a=!1;(e[0].match(ru)||[]).forEach(function(c){var s=Zi(c);switch(Nf(s[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},t.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":s.patternType&&(n.patternType=s.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),s.indexed&&(n.bgColor.indexed=parseInt(s.indexed,10)),s.theme&&(n.bgColor.theme=parseInt(s.theme,10)),s.tint&&(n.bgColor.tint=parseFloat(s.tint)),s.rgb&&(n.bgColor.rgb=s.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),s.theme&&(n.fgColor.theme=parseInt(s.theme,10)),s.tint&&(n.fgColor.tint=parseFloat(s.tint)),s.rgb!=null&&(n.fgColor.rgb=s.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i&&i.WTF&&!a)throw new Error("unrecognized "+s[0]+" in fills")}})}function pre(e,t,r,i){t.Fonts=[];var n={},a=!1;(e[0].match(ru)||[]).forEach(function(c){var s=Zi(c);switch(Nf(s[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(n),n={};break;case"<name":s.val&&(n.name=ha(s.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=s.val?Ia(s.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=s.val?Ia(s.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(s.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=s.val?Ia(s.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=s.val?Ia(s.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=s.val?Ia(s.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=s.val?Ia(s.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=s.val?Ia(s.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":s.val&&(n.sz=+s.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":s.val&&(n.vertAlign=s.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":s.val&&(n.family=parseInt(s.val,10));break;case"<family/>":case"</family>":break;case"<scheme":s.val&&(n.scheme=s.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(s.val=="1")break;s.codepage=hB[parseInt(s.val,10)];break;case"<color":if(n.color||(n.color={}),s.auto&&(n.color.auto=Ia(s.auto)),s.rgb)n.color.rgb=s.rgb.slice(-6);else if(s.indexed){n.color.index=parseInt(s.indexed,10);var d=m0[n.color.index];n.color.index==81&&(d=m0[1]),d||(d=m0[1]),n.color.rgb=d[0].toString(16)+d[1].toString(16)+d[2].toString(16)}else s.theme&&(n.color.theme=parseInt(s.theme,10),s.tint&&(n.color.tint=parseFloat(s.tint)),s.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=Y_(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i&&i.WTF&&!a)throw new Error("unrecognized "+s[0]+" in fonts")}})}function mre(e,t,r){t.NumberFmt=[];for(var i=Ef(fn),n=0;n<i.length;++n)t.NumberFmt[i[n]]=fn[i[n]];var a=e[0].match(ru);if(a)for(n=0;n<a.length;++n){var c=Zi(a[n]);switch(Nf(c[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var s=ts(ha(c.formatCode)),d=parseInt(c.numFmtId,10);if(t.NumberFmt[d]=s,d>0){if(d>392){for(d=392;d>60&&t.NumberFmt[d]!=null;--d);t.NumberFmt[d]=s}p0(s,d)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+c[0]+" in numFmts")}}}var Gy=["numFmtId","fillId","fontId","borderId","xfId"],qy=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function gre(e,t,r){t.CellXf=[];var i,n=!1;(e[0].match(ru)||[]).forEach(function(a){var c=Zi(a),s=0;switch(Nf(c[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(i=c,delete i[0],s=0;s<Gy.length;++s)i[Gy[s]]&&(i[Gy[s]]=parseInt(i[Gy[s]],10));for(s=0;s<qy.length;++s)i[qy[s]]&&(i[qy[s]]=Ia(i[qy[s]]));if(t.NumberFmt&&i.numFmtId>392){for(s=392;s>60;--s)if(t.NumberFmt[i.numFmtId]==t.NumberFmt[s]){i.numFmtId=s;break}}t.CellXf.push(i);break;case"</xf>":break;case"<alignment":case"<alignment/>":var d={};c.vertical&&(d.vertical=c.vertical),c.horizontal&&(d.horizontal=c.horizontal),c.textRotation!=null&&(d.textRotation=c.textRotation),c.indent&&(d.indent=c.indent),c.wrapText&&(d.wrapText=Ia(c.wrapText)),i.alignment=d;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+c[0]+" in cellXfs")}})}var vre=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,i=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(s,d,g){var x={};if(!s)return x;s=s.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var C;return(C=s.match(t))&&mre(C,x,g),(C=s.match(n))&&pre(C,x,d,g),(C=s.match(i))&&dre(C,x,d,g),(C=s.match(a))&&fre(C,x,d,g),(C=s.match(r))&&gre(C,x,g),x}}();function xre(e,t){var r=e.read_shift(2),i=Jc(e);return[r,i]}function yre(e,t,r){var i={};i.sz=e.read_shift(2)/20;var n=kJ(e);n.fItalic&&(i.italic=1),n.fCondense&&(i.condense=1),n.fExtend&&(i.extend=1),n.fShadow&&(i.shadow=1),n.fOutline&&(i.outline=1),n.fStrikeout&&(i.strike=1);var a=e.read_shift(2);switch(a===700&&(i.bold=1),e.read_shift(2)){case 1:i.vertAlign="superscript";break;case 2:i.vertAlign="subscript";break}var c=e.read_shift(1);c!=0&&(i.underline=c);var s=e.read_shift(1);s>0&&(i.family=s);var d=e.read_shift(1);switch(d>0&&(i.charset=d),e.l++,i.color=FJ(e),e.read_shift(1)){case 1:i.scheme="major";break;case 2:i.scheme="minor";break}return i.name=Jc(e),i}var _re=tu;function bre(e,t){var r=e.l+t,i=e.read_shift(2),n=e.read_shift(2);return e.l=r,{ixfe:i,numFmtId:n}}var wre=tu;function Bre(e,t,r){var i={};i.NumberFmt=[];for(var n in fn)i.NumberFmt[n]=fn[n];i.CellXf=[],i.Fonts=[];var a=[],c=!1;return wd(e,function(d,g,x){switch(x){case 44:i.NumberFmt[d[0]]=d[1],p0(d[1],d[0]);break;case 43:i.Fonts.push(d),d.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(d.color.rgb=Y_(t.themeElements.clrScheme[d.color.theme].rgb,d.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&i.CellXf.push(d);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:c=!0;break;case 36:c=!1;break;case 37:a.push(x),c=!0;break;case 38:a.pop(),c=!1;break;default:if(g.T>0)a.push(x);else if(g.T<0)a.pop();else if(!c||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+x.toString(16))}}),i}var Cre=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Sre(e,t,r){t.themeElements.clrScheme=[];var i={};(e[0].match(ru)||[]).forEach(function(n){var a=Zi(n);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":i.rgb=a.val;break;case"<a:sysClr":i.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[Cre.indexOf(a[0])]=i,i={}):i.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function Ere(){}function Tre(){}var Fre=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,kre=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Nre=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Ire(e,t,r){t.themeElements={};var i;[["clrScheme",Fre,Sre],["fontScheme",kre,Ere],["fmtScheme",Nre,Tre]].forEach(function(n){if(!(i=e.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](i,t,r)})}var Lre=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function aL(e,t){(!e||e.length===0)&&(e=Mre());var r,i={};if(!(r=e.match(Lre)))throw new Error("themeElements not found in theme");return Ire(r[0],i,t),i.raw=e,i}function Mre(e,t){var r=[gI];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Pre(e,t,r){var i=e.l+t,n=e.read_shift(4);if(n!==124226){if(!r.cellStyles){e.l=i;return}var a=e.slice(e.l);e.l=i;var c;try{c=mI(a,{type:"array"})}catch{return}var s=Th(c,"theme/theme/theme1.xml",!0);if(s)return aL(s,r)}}function Dre(e){return e.read_shift(4)}function Rre(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Ure(e,4);break;case 2:t.xclrValue=qI(e);break;case 3:t.xclrValue=Dre(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Ure(e,t){return tu(e,t)}function jre(e,t){return tu(e,t)}function Ore(e){var t=e.read_shift(2),r=e.read_shift(2)-4,i=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:i[1]=Rre(e);break;case 6:i[1]=jre(e,r);break;case 14:case 15:i[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return i}function Qre(e,t){var r=e.l+t;e.l+=2;var i=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),a=[];n-- >0;)a.push(Ore(e,r-e.l));return{ixfe:i,ext:a}}function zre(e,t){t.forEach(function(r){r[0]})}function Hre(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Jc(e)}}function Vre(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Gre(e){return e.l+=4,e.read_shift(4)!=0}function qre(e,t,r){var i={Types:[],Cell:[],Value:[]},n=r||{},a=[],c=!1,s=2;return wd(e,function(d,g,x){switch(x){case 335:i.Types.push({name:d.name});break;case 51:d.forEach(function(C){s==1?i.Cell.push({type:i.Types[C[0]-1].name,index:C[1]}):s==0&&i.Value.push({type:i.Types[C[0]-1].name,index:C[1]})});break;case 337:s=d?1:0;break;case 338:s=2;break;case 35:a.push(x),c=!0;break;case 36:a.pop(),c=!1;break;default:if(!g.T){if(!c||n.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+x.toString(16))}}}),i}function Kre(e,t,r){var i={Types:[],Cell:[],Value:[]};if(!e)return i;var n=!1,a=2,c;return e.replace(ru,function(s){var d=Zi(s);switch(Nf(d[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":i.Types.push({name:d.name});break;case"</metadataType>":break;case"<futureMetadata":for(var g=0;g<i.Types.length;++g)i.Types[g].name==d.name&&(c=i.Types[g]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?i.Cell.push({type:i.Types[d.t-1].name,index:+d.v}):a==0&&i.Value.push({type:i.Types[d.t-1].name,index:+d.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!c)break;c.offsets||(c.offsets=[]),c.offsets.push(+d.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+d[0]+" in metadata")}return s}),i}function Wre(e){var t=[];if(!e)return t;var r=1;return(e.match(ru)||[]).forEach(function(i){var n=Zi(i);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,t.push(n);break}}),t}function $re(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=an(r);var i=e.read_shift(1);return i&2&&(t.l="1"),i&8&&(t.a="1"),t}function Xre(e,t,r){var i=[];return wd(e,function(a,c,s){switch(s){case 63:i.push(a);break;default:if(!c.T)throw new Error("Unexpected record 0x"+s.toString(16))}}),i}function Zre(e,t,r,i){if(!e)return e;var n=i||{},a=!1;wd(e,function(s,d,g){switch(g){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!d.T){if(!a||n.WTF)throw new Error("Unexpected record 0x"+g.toString(16))}}},n)}function Yre(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function lF(e,t,r,i){var n=Array.isArray(e),a;t.forEach(function(c){var s=Bu(c.ref);if(n?(e[s.r]||(e[s.r]=[]),a=e[s.r][s.c]):a=e[c.ref],!a){a={t:"z"},n?e[s.r][s.c]=a:e[c.ref]=a;var d=so(e["!ref"]||"BDWGO1000001:A1");d.s.r>s.r&&(d.s.r=s.r),d.e.r<s.r&&(d.e.r=s.r),d.s.c>s.c&&(d.s.c=s.c),d.e.c<s.c&&(d.e.c=s.c);var g=Xn(d);g!==e["!ref"]&&(e["!ref"]=g)}a.c||(a.c=[]);var x={a:c.author,t:c.t,r:c.r,T:r};c.h&&(x.h=c.h);for(var C=a.c.length-1;C>=0;--C){if(!r&&a.c[C].T)return;r&&!a.c[C].T&&a.c.splice(C,1)}if(r&&i){for(C=0;C<i.length;++C)if(x.a==i[C].id){x.a=i[C].name||x.a;break}}a.c.push(x)})}function Jre(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],i=[],n=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(c){if(!(c===""||c.trim()==="")){var s=c.match(/<(?:\w+:)?author[^>]*>(.*)/);s&&r.push(s[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(c){if(!(c===""||c.trim()==="")){var s=c.match(/<(?:\w+:)?comment[^>]*>/);if(s){var d=Zi(s[0]),g={author:d.authorId&&r[d.authorId]||"sheetjsghost",ref:d.ref,guid:d.guid},x=Bu(d.ref);if(!(t.sheetRows&&t.sheetRows<=x.r)){var C=c.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),N=!!C&&!!C[1]&&TB(C[1])||{r:"",t:"",h:""};g.r=N.r,N.r=="<t></t>"&&(N.t=N.h=""),g.t=(N.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(g.h=N.h),i.push(g)}}}}),i}function eie(e,t){var r=[],i=!1,n={},a=0;return e.replace(ru,function(s,d){var g=Zi(s);switch(Nf(g[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:g.personId,guid:g.id,ref:g.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":a=d+s.length;break;case"</text>":n.t=e.slice(a,d).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":i=!0;break;case"</mentions>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&t.WTF)throw new Error("unrecognized "+g[0]+" in threaded comments")}return s}),r}function tie(e,t){var r=[],i=!1;return e.replace(ru,function(a){var c=Zi(a);switch(Nf(c[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:c.displayname,id:c.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return a}),r}function rie(e){var t={};t.iauthor=e.read_shift(4);var r=I0(e);return t.rfx=r.s,t.ref=an(r.s),e.l+=16,t}var iie=Jc;function nie(e,t){var r=[],i=[],n={},a=!1;return wd(e,function(s,d,g){switch(g){case 632:i.push(s);break;case 635:n=s;break;case 637:n.t=s.t,n.h=s.h,n.r=s.r;break;case 636:if(n.author=i[n.iauthor],delete n.iauthor,t.sheetRows&&n.rfx&&t.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!d.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+g.toString(16))}}}),r}var sie="application/vnd.ms-office.vbaProject";function aie(e){var t=$n.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,i){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");$n.utils.cfb_add(t,n,e.FileIndex[i].content)}}),$n.write(t)}function oie(){return{"!type":"dialog"}}function lie(){return{"!type":"dialog"}}function cie(){return{"!type":"macro"}}function uie(){return{"!type":"macro"}}var Ym=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(i,n,a,c){var s=!1,d=!1;a.length==0?d=!0:a.charAt(0)=="["&&(d=!0,a=a.slice(1,-1)),c.length==0?s=!0:c.charAt(0)=="["&&(s=!0,c=c.slice(1,-1));var g=a.length>0?parseInt(a,10)|0:0,x=c.length>0?parseInt(c,10)|0:0;return s?x+=t.c:--x,d?g+=t.r:--g,n+(s?"":"$")+vl(x)+(d?"":"$")+gc(g)}return function(n,a){return t=a,n.replace(e,r)}}(),oL=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,hie=function(){return function(t,r){return t.replace(oL,function(i,n,a,c,s,d){var g=bB(c)-(a?0:r.c),x=_B(d)-(s?0:r.r),C=x==0?"":s?x+1:"["+x+"]",N=g==0?"":a?g+1:"["+g+"]";return n+"R"+C+"C"+N})}}();function lL(e,t){return e.replace(oL,function(r,i,n,a,c,s){return i+(n=="$"?n+a:vl(bB(a)+t.c))+(c=="$"?c+s:gc(_B(s)+t.r))})}function Aie(e,t,r){var i=yg(t),n=i.s,a=Bu(r),c={r:a.r-n.r,c:a.c-n.c};return lL(e,c)}function fie(e){return e.length!=1}function cF(e){return e.replace(/_xlfn\./g,"")}function Vo(e){e.l+=1}function wp(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function cL(e,t,r){var i=2;if(r){if(r.biff>=2&&r.biff<=5)return uL(e);r.biff==12&&(i=4)}var n=e.read_shift(i),a=e.read_shift(i),c=wp(e),s=wp(e);return{s:{r:n,c:c[0],cRel:c[1],rRel:c[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function uL(e){var t=wp(e),r=wp(e),i=e.read_shift(1),n=e.read_shift(1);return{s:{r:t[0],c:i,cRel:t[1],rRel:t[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function die(e,t,r){if(r.biff<8)return uL(e);var i=e.read_shift(r.biff==12?4:2),n=e.read_shift(r.biff==12?4:2),a=wp(e),c=wp(e);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:n,c:c[0],cRel:c[1],rRel:c[2]}}}function hL(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return pie(e);var i=e.read_shift(r&&r.biff==12?4:2),n=wp(e);return{r:i,c:n[0],cRel:n[1],rRel:n[2]}}function pie(e){var t=wp(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function mie(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function gie(e,t,r){var i=r&&r.biff?r.biff:8;if(i>=2&&i<=5)return vie(e);var n=e.read_shift(i>=12?4:2),a=e.read_shift(2),c=(a&16384)>>14,s=(a&32768)>>15;if(a&=16383,s==1)for(;n>524287;)n-=1048576;if(c==1)for(;a>8191;)a=a-16384;return{r:n,c:a,cRel:c,rRel:s}}function vie(e){var t=e.read_shift(2),r=e.read_shift(1),i=(t&32768)>>15,n=(t&16384)>>14;return t&=16383,i==1&&t>=8192&&(t=t-16384),n==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:n,rRel:i}}function xie(e,t,r){var i=(e[e.l++]&96)>>5,n=cL(e,r.biff>=2&&r.biff<=5?6:8,r);return[i,n]}function yie(e,t,r){var i=(e[e.l++]&96)>>5,n=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var c=cL(e,a,r);return[i,n,c]}function _ie(e,t,r){var i=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[i]}function bie(e,t,r){var i=(e[e.l++]&96)>>5,n=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[i,n]}function wie(e,t,r){var i=(e[e.l++]&96)>>5,n=die(e,t-1,r);return[i,n]}function Bie(e,t,r){var i=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[i]}function uF(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Cie(e,t,r){e.l+=2;for(var i=e.read_shift(r&&r.biff==2?1:2),n=[],a=0;a<=i;++a)n.push(e.read_shift(r&&r.biff==2?1:2));return n}function Sie(e,t,r){var i=e[e.l+1]&255?1:0;return e.l+=2,[i,e.read_shift(r&&r.biff==2?1:2)]}function Eie(e,t,r){var i=e[e.l+1]&255?1:0;return e.l+=2,[i,e.read_shift(r&&r.biff==2?1:2)]}function Tie(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Fie(e,t,r){var i=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[i]}function AL(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function kie(e){return e.read_shift(2),AL(e)}function Nie(e){return e.read_shift(2),AL(e)}function Iie(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=hL(e,0,r);return[i,n]}function Lie(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=gie(e,0,r);return[i,n]}function Mie(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=hL(e,0,r);return[i,n,a]}function Pie(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(r&&r.biff<=3?1:2);return[Dne[n],pL[n],i]}function Die(e,t,r){var i=e[e.l++],n=e.read_shift(1),a=r&&r.biff<=3?[i==88?-1:0,e.read_shift(1)]:Rie(e);return[n,(a[0]===0?pL:Pne)[a[1]]]}function Rie(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Uie(e,t,r){e.l+=r&&r.biff==2?3:4}function jie(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var i=e.read_shift(2),n=e.read_shift(r&&r.biff==2?1:2);return[i,n]}function Oie(e){return e.l++,L0[e.read_shift(1)]}function Qie(e){return e.l++,e.read_shift(2)}function zie(e){return e.l++,e.read_shift(1)!==0}function Hie(e){return e.l++,$c(e)}function Vie(e,t,r){return e.l++,Xv(e,t-1,r)}function Gie(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=wo(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=L0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=$c(e);break;case 2:r[1]=M0(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function qie(e,t,r){for(var i=e.read_shift(r.biff==12?4:2),n=[],a=0;a!=i;++a)n.push((r.biff==12?I0:D2)(e));return n}function Kie(e,t,r){var i=0,n=0;r.biff==12?(i=e.read_shift(4),n=e.read_shift(4)):(n=1+e.read_shift(1),i=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--i,--n==0&&(n=256));for(var a=0,c=[];a!=i&&(c[a]=[]);++a)for(var s=0;s!=n;++s)c[a][s]=Gie(e,r.biff);return c}function Wie(e,t,r){var i=e.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,a=e.read_shift(n);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[i,0,a]}function $ie(e,t,r){if(r.biff==5)return Xie(e);var i=e.read_shift(1)>>>5&3,n=e.read_shift(2),a=e.read_shift(4);return[i,n,a]}function Xie(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var i=e.read_shift(2);return e.l+=12,[t,r,i]}function Zie(e,t,r){var i=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var n=e.read_shift(r&&r.biff==2?1:2);return[i,n]}function Yie(e,t,r){var i=e.read_shift(1)>>>5&3,n=e.read_shift(r&&r.biff==2?1:2);return[i,n]}function Jie(e,t,r){var i=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[i]}function ene(e,t,r){var i=(e[e.l++]&96)>>5,n=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[i,n]}var tne=tu,rne=tu,ine=tu;function Yv(e,t,r){return e.l+=2,[mie(e)]}function kB(e){return e.l+=6,[]}var nne=Yv,sne=kB,ane=kB,one=Yv;function fL(e){return e.l+=2,[qo(e),e.read_shift(2)&1]}var lne=Yv,cne=fL,une=kB,hne=Yv,Ane=Yv,fne=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function dne(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(4),n=e.read_shift(2),a=e.read_shift(2),c=fne[r>>2&31];return{ixti:t,coltype:r&3,rt:c,idx:i,c:n,C:a}}function pne(e){return e.l+=2,[e.read_shift(4)]}function mne(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function gne(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function vne(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function xne(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function yne(e){return e.l+=4,[0,0]}var hF={1:{n:"PtgExp",f:jie},2:{n:"PtgTbl",f:ine},3:{n:"PtgAdd",f:Vo},4:{n:"PtgSub",f:Vo},5:{n:"PtgMul",f:Vo},6:{n:"PtgDiv",f:Vo},7:{n:"PtgPower",f:Vo},8:{n:"PtgConcat",f:Vo},9:{n:"PtgLt",f:Vo},10:{n:"PtgLe",f:Vo},11:{n:"PtgEq",f:Vo},12:{n:"PtgGe",f:Vo},13:{n:"PtgGt",f:Vo},14:{n:"PtgNe",f:Vo},15:{n:"PtgIsect",f:Vo},16:{n:"PtgUnion",f:Vo},17:{n:"PtgRange",f:Vo},18:{n:"PtgUplus",f:Vo},19:{n:"PtgUminus",f:Vo},20:{n:"PtgPercent",f:Vo},21:{n:"PtgParen",f:Vo},22:{n:"PtgMissArg",f:Vo},23:{n:"PtgStr",f:Vie},26:{n:"PtgSheet",f:mne},27:{n:"PtgEndSheet",f:gne},28:{n:"PtgErr",f:Oie},29:{n:"PtgBool",f:zie},30:{n:"PtgInt",f:Qie},31:{n:"PtgNum",f:Hie},32:{n:"PtgArray",f:Bie},33:{n:"PtgFunc",f:Pie},34:{n:"PtgFuncVar",f:Die},35:{n:"PtgName",f:Wie},36:{n:"PtgRef",f:Iie},37:{n:"PtgArea",f:xie},38:{n:"PtgMemArea",f:Zie},39:{n:"PtgMemErr",f:tne},40:{n:"PtgMemNoMem",f:rne},41:{n:"PtgMemFunc",f:Yie},42:{n:"PtgRefErr",f:Jie},43:{n:"PtgAreaErr",f:_ie},44:{n:"PtgRefN",f:Lie},45:{n:"PtgAreaN",f:wie},46:{n:"PtgMemAreaN",f:vne},47:{n:"PtgMemNoMemN",f:xne},57:{n:"PtgNameX",f:$ie},58:{n:"PtgRef3d",f:Mie},59:{n:"PtgArea3d",f:yie},60:{n:"PtgRefErr3d",f:ene},61:{n:"PtgAreaErr3d",f:bie},255:{}},_ne={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},bne={1:{n:"PtgElfLel",f:fL},2:{n:"PtgElfRw",f:hne},3:{n:"PtgElfCol",f:nne},6:{n:"PtgElfRwV",f:Ane},7:{n:"PtgElfColV",f:one},10:{n:"PtgElfRadical",f:lne},11:{n:"PtgElfRadicalS",f:une},13:{n:"PtgElfColS",f:sne},15:{n:"PtgElfColSV",f:ane},16:{n:"PtgElfRadicalLel",f:cne},25:{n:"PtgList",f:dne},29:{n:"PtgSxName",f:pne},255:{}},wne={0:{n:"PtgAttrNoop",f:yne},1:{n:"PtgAttrSemi",f:Fie},2:{n:"PtgAttrIf",f:Eie},4:{n:"PtgAttrChoose",f:Cie},8:{n:"PtgAttrGoto",f:Sie},16:{n:"PtgAttrSum",f:Uie},32:{n:"PtgAttrBaxcel",f:uF},33:{n:"PtgAttrBaxcel",f:uF},64:{n:"PtgAttrSpace",f:kie},65:{n:"PtgAttrSpaceSemi",f:Nie},128:{n:"PtgAttrIfError",f:Tie},255:{}};function Jv(e,t,r,i){if(i.biff<8)return tu(e,t);for(var n=e.l+t,a=[],c=0;c!==r.length;++c)switch(r[c][0]){case"PtgArray":r[c][1]=Kie(e,0,i),a.push(r[c][1]);break;case"PtgMemArea":r[c][2]=qie(e,r[c][1],i),a.push(r[c][2]);break;case"PtgExp":i&&i.biff==12&&(r[c][1][1]=e.read_shift(4),a.push(r[c][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[c][0]}return t=n-e.l,t!==0&&a.push(tu(e,t)),a}function ex(e,t,r){for(var i=e.l+t,n,a,c=[];i!=e.l;)t=i-e.l,a=e[e.l],n=hF[a]||hF[_ne[a]],(a===24||a===25)&&(n=(a===24?bne:wne)[e[e.l+1]]),!n||!n.f?tu(e,t):c.push([n.n,n.f(e,t,r)]);return c}function Bne(e){for(var t=[],r=0;r<e.length;++r){for(var i=e[r],n=[],a=0;a<i.length;++a){var c=i[a];if(c)switch(c[0]){case 2:n.push('"'+c[1].replace(/"/g,'""')+'"');break;default:n.push(c[1])}else n.push("")}t.push(n.join(","))}return t.join(";")}var Cne={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Sne(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function dL(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var i=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!i)return"SH33TJSERR1";var n="";if(r.biff>8)switch(e[i[0]][0]){case 357:return n=i[1]==-1?"#REF":e.SheetNames[i[1]],i[1]==i[2]?n:n+":"+e.SheetNames[i[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[i[0]][0];case 355:default:return"SH33TJSSRC"+e[i[0]][0]}switch(e[i[0]][0][0]){case 1025:return n=i[1]==-1?"#REF":e.SheetNames[i[1]]||"SH33TJSERR3",i[1]==i[2]?n:n+":"+e.SheetNames[i[2]];case 14849:return e[i[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[i[0]][0][3]?(n=i[1]==-1?"#REF":e[i[0]][0][3][i[1]]||"SH33TJSERR4",i[1]==i[2]?n:n+":"+e[i[0]][0][3][i[2]]):"SH33TJSERR2"}}function AF(e,t,r){var i=dL(e,t,r);return i=="#REF"?i:Sne(i,r)}function Kc(e,t,r,i,n){var a=n&&n.biff||8,c={s:{c:0,r:0}},s=[],d,g,x,C=0,N=0,B,M="";if(!e[0]||!e[0][0])return"";for(var I=-1,R="",D=0,V=e[0].length;D<V;++D){var G=e[0][D];switch(G[0]){case"PtgUminus":s.push("-"+s.pop());break;case"PtgUplus":s.push("+"+s.pop());break;case"PtgPercent":s.push(s.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=s.pop(),g=s.pop(),I>=0){switch(e[0][I][1][0]){case 0:R=no(" ",e[0][I][1][1]);break;case 1:R=no("\r",e[0][I][1][1]);break;default:if(R="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][I][1][0])}g=g+R,I=-1}s.push(g+Cne[G[0]]+d);break;case"PtgIsect":d=s.pop(),g=s.pop(),s.push(g+" "+d);break;case"PtgUnion":d=s.pop(),g=s.pop(),s.push(g+","+d);break;case"PtgRange":d=s.pop(),g=s.pop(),s.push(g+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":x=rv(G[1][1],c,n),s.push(iv(x,a));break;case"PtgRefN":x=r?rv(G[1][1],r,n):G[1][1],s.push(iv(x,a));break;case"PtgRef3d":C=G[1][1],x=rv(G[1][2],c,n),M=AF(i,C,n),s.push(M+"!"+iv(x,a));break;case"PtgFunc":case"PtgFuncVar":var Z=G[1][0],X=G[1][1];Z||(Z=0),Z&=127;var le=Z==0?[]:s.slice(-Z);s.length-=Z,X==="User"&&(X=le.shift()),s.push(X+"("+le.join(",")+")");break;case"PtgBool":s.push(G[1]?"TRUE":"FALSE");break;case"PtgInt":s.push(G[1]);break;case"PtgNum":s.push(String(G[1]));break;case"PtgStr":s.push('"'+G[1].replace(/"/g,'""')+'"');break;case"PtgErr":s.push(G[1]);break;case"PtgAreaN":B=qT(G[1][1],r?{s:r}:c,n),s.push(kw(B,n));break;case"PtgArea":B=qT(G[1][1],c,n),s.push(kw(B,n));break;case"PtgArea3d":C=G[1][1],B=G[1][2],M=AF(i,C,n),s.push(M+"!"+kw(B,n));break;case"PtgAttrSum":s.push("SUM("+s.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":N=G[1][2];var ae=(i.names||[])[N-1]||(i[0]||[])[N],ce=ae?ae.Name:"SH33TJSNAME"+String(N);ce&&ce.slice(0,6)=="_xlfn."&&!n.xlfn&&(ce=ce.slice(6)),s.push(ce);break;case"PtgNameX":var se=G[1][1];N=G[1][2];var ue;if(n.biff<=5)se<0&&(se=-se),i[se]&&(ue=i[se][N]);else{var re="";if(((i[se]||[])[0]||[])[0]==14849||(((i[se]||[])[0]||[])[0]==1025?i[se][N]&&i[se][N].itab>0&&(re=i.SheetNames[i[se][N].itab-1]+"!"):re=i.SheetNames[N-1]+"!"),i[se]&&i[se][N])re+=i[se][N].Name;else if(i[0]&&i[0][N])re+=i[0][N].Name;else{var W=(dL(i,se,n)||"").split(";;");W[N-1]?re=W[N-1]:re+="SH33TJSERRX"}s.push(re);break}ue||(ue={Name:"SH33TJSERRY"}),s.push(ue.Name);break;case"PtgParen":var de="(",Ee=")";if(I>=0){switch(R="",e[0][I][1][0]){case 2:de=no(" ",e[0][I][1][1])+de;break;case 3:de=no("\r",e[0][I][1][1])+de;break;case 4:Ee=no(" ",e[0][I][1][1])+Ee;break;case 5:Ee=no("\r",e[0][I][1][1])+Ee;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][I][1][0])}I=-1}s.push(de+s.pop()+Ee);break;case"PtgRefErr":s.push("#REF!");break;case"PtgRefErr3d":s.push("#REF!");break;case"PtgExp":x={c:G[1][1],r:G[1][0]};var Ne={c:r.c,r:r.r};if(i.sharedf[an(x)]){var ge=i.sharedf[an(x)];s.push(Kc(ge,c,Ne,i,n))}else{var Pe=!1;for(d=0;d!=i.arrayf.length;++d)if(g=i.arrayf[d],!(x.c<g[0].s.c||x.c>g[0].e.c)&&!(x.r<g[0].s.r||x.r>g[0].e.r)){s.push(Kc(g[1],c,Ne,i,n)),Pe=!0;break}Pe||s.push(G[1])}break;case"PtgArray":s.push("{"+Bne(G[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":I=D;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":s.push("");break;case"PtgAreaErr":s.push("#REF!");break;case"PtgAreaErr3d":s.push("#REF!");break;case"PtgList":s.push("Table"+G[1].idx+"[#"+G[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(G));default:throw new Error("Unrecognized Formula Token: "+String(G))}var Ye=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&I>=0&&Ye.indexOf(e[0][D][0])==-1){G=e[0][I];var Me=!0;switch(G[1][0]){case 4:Me=!1;case 0:R=no(" ",G[1][1]);break;case 5:Me=!1;case 1:R=no("\r",G[1][1]);break;default:if(R="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+G[1][0])}s.push((Me?R:"")+s.pop()+(Me?"":R)),I=-1}}if(s.length>1&&n.WTF)throw new Error("bad formula stack");return s[0]}function Ene(e,t,r){var i=e.l+t,n=r.biff==2?1:2,a,c=e.read_shift(n);if(c==65535)return[[],tu(e,t-2)];var s=ex(e,c,r);return t!==c+n&&(a=Jv(e,t-c-n,s,r)),e.l=i,[s,a]}function Tne(e,t,r){var i=e.l+t,n=r.biff==2?1:2,a,c=e.read_shift(n);if(c==65535)return[[],tu(e,t-2)];var s=ex(e,c,r);return t!==c+n&&(a=Jv(e,t-c-n,s,r)),e.l=i,[s,a]}function Fne(e,t,r,i){var n=e.l+t,a=ex(e,i,r),c;return n!==e.l&&(c=Jv(e,n-e.l,a,r)),[a,c]}function kne(e,t,r){var i=e.l+t,n,a=e.read_shift(2),c=ex(e,a,r);return a==65535?[[],tu(e,t-2)]:(t!==a+2&&(n=Jv(e,i-a-2,c,r)),[c,n])}function Nne(e){var t;if(hd(e,e.l+6)!==65535)return[$c(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Lw(e,t,r){var i=e.l+t,n=If(e);r.biff==2&&++e.l;var a=Nne(e),c=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var s=Tne(e,i-e.l,r);return{cell:n,val:a[0],formula:s,shared:c>>3&1,tt:a[1]}}function R2(e,t,r){var i=e.read_shift(4),n=ex(e,i,r),a=e.read_shift(4),c=a>0?Jv(e,a,n,r):null;return[n,c]}var Ine=R2,U2=R2,Lne=R2,Mne=R2,Pne={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},pL={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Dne={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function fF(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Mw(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var ov={},Jm={};function lv(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function mL(e,t,r,i,n,a){try{i.cellNF&&(e.z=fn[t])}catch(s){if(i.WTF)throw s}if(!(e.t==="z"&&!i.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Kl(e.v)),(!i||i.cellText!==!1)&&e.t!=="z")try{if(fn[t]==null&&p0(RY[t]||"General",t),e.t==="e")e.w=e.w||L0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ev(e.v);else if(e.t==="d"){var c=Su(e.v);(c|0)===c?e.w=c.toString(10):e.w=Ev(c)}else{if(e.v===void 0)return"";e.w=w0(e.v,Jm)}else e.t==="d"?e.w=oA(t,Su(e.v),Jm):e.w=oA(t,e.v,Jm)}catch(s){if(i.WTF)throw s}if(i.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Y_(n.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),i.WTF&&(e.s.fgColor.raw_rgb=n.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Y_(n.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),i.WTF&&(e.s.bgColor.raw_rgb=n.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(s){if(i.WTF&&a.Fills)throw s}}}function Rne(e,t){var r=so(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Xn(r))}var Une=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,jne=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,One=/<(?:\w:)?hyperlink [^>]*>/mg,Qne=/"(\w*:\w*)"/,zne=/<(?:\w:)?col\b[^>]*[\/]?>/g,Hne=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Vne=/<(?:\w:)?pageMargins[^>]*\/>/g,gL=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Gne=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,qne=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Kne(e,t,r,i,n,a,c){if(!e)return e;i||(i={"!id":{}});var s=t.dense?[]:{},d={s:{r:2e6,c:2e6},e:{r:0,c:0}},g="",x="",C=e.match(jne);C?(g=e.slice(0,C.index),x=e.slice(C.index+C[0].length)):g=x=e;var N=g.match(gL);N?NB(N[0],s,n,r):(N=g.match(Gne))&&Wne(N[0],N[1]||"",s,n,r);var B=(g.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(B>0){var M=g.slice(B,B+50).match(Qne);M&&Rne(s,M[1])}var I=g.match(qne);I&&I[1]&&ese(I[1],n);var R=[];if(t.cellStyles){var D=g.match(zne);D&&Zne(R,D)}C&&tse(C[1],s,t,d,a,c);var V=x.match(Hne);V&&(s["!autofilter"]=Yne(V[0]));var G=[],Z=x.match(Une);if(Z)for(B=0;B!=Z.length;++B)G[B]=so(Z[B].slice(Z[B].indexOf('"')+1));var X=x.match(One);X&&$ne(s,X,i);var le=x.match(Vne);if(le&&(s["!margins"]=Xne(Zi(le[0]))),!s["!ref"]&&d.e.c>=d.s.c&&d.e.r>=d.s.r&&(s["!ref"]=Xn(d)),t.sheetRows>0&&s["!ref"]){var ae=so(s["!ref"]);t.sheetRows<=+ae.e.r&&(ae.e.r=t.sheetRows-1,ae.e.r>d.e.r&&(ae.e.r=d.e.r),ae.e.r<ae.s.r&&(ae.s.r=ae.e.r),ae.e.c>d.e.c&&(ae.e.c=d.e.c),ae.e.c<ae.s.c&&(ae.s.c=ae.e.c),s["!fullref"]=s["!ref"],s["!ref"]=Xn(ae))}return R.length>0&&(s["!cols"]=R),G.length>0&&(s["!merges"]=G),s}function NB(e,t,r,i){var n=Zi(e);r.Sheets[i]||(r.Sheets[i]={}),n.codeName&&(r.Sheets[i].CodeName=ts(ha(n.codeName)))}function Wne(e,t,r,i,n){NB(e.slice(0,e.indexOf(">")),r,i,n)}function $ne(e,t,r){for(var i=Array.isArray(e),n=0;n!=t.length;++n){var a=Zi(ha(t[n]),!0);if(!a.ref)return;var c=((r||{})["!id"]||[])[a.id];c?(a.Target=c.Target,a.location&&(a.Target+="#"+ts(a.location))):(a.Target="#"+ts(a.location),c={Target:a.Target,TargetMode:"Internal"}),a.Rel=c,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var s=so(a.ref),d=s.s.r;d<=s.e.r;++d)for(var g=s.s.c;g<=s.e.c;++g){var x=an({c:g,r:d});i?(e[d]||(e[d]=[]),e[d][g]||(e[d][g]={t:"z",v:void 0}),e[d][g].l=a):(e[x]||(e[x]={t:"z",v:void 0}),e[x].l=a)}}}function Xne(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Zne(e,t){for(var r=!1,i=0;i!=t.length;++i){var n=Zi(t[i],!0);n.hidden&&(n.hidden=Ia(n.hidden));var a=parseInt(n.min,10)-1,c=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,FB(n.width)),og(n);a<=c;)e[a++]=mc(n)}}function Yne(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var Jne=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function ese(e,t){t.Views||(t.Views=[{}]),(e.match(Jne)||[]).forEach(function(r,i){var n=Zi(r);t.Views[i]||(t.Views[i]={}),+n.zoomScale&&(t.Views[i].zoom=+n.zoomScale),Ia(n.rightToLeft)&&(t.Views[i].RTL=!0)})}var tse=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,i=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,a=Tv("v"),c=Tv("f");return function(d,g,x,C,N,B){for(var M=0,I="",R=[],D=[],V=0,G=0,Z=0,X="",le,ae,ce=0,se=0,ue,re,W=0,de=0,Ee=Array.isArray(B.CellXf),Ne,ge=[],Pe=[],Ye=Array.isArray(g),Me=[],De={},tt=!1,ee=!!x.sheetStubs,fe=d.split(t),pe=0,we=fe.length;pe!=we;++pe){I=fe[pe].trim();var Le=I.length;if(Le!==0){var lt=0;e:for(M=0;M<Le;++M)switch(I[M]){case">":if(I[M-1]!="/"){++M;break e}if(x&&x.cellStyles){if(ae=Zi(I.slice(lt,M),!0),ce=ae.r!=null?parseInt(ae.r,10):ce+1,se=-1,x.sheetRows&&x.sheetRows<ce)continue;De={},tt=!1,ae.ht&&(tt=!0,De.hpt=parseFloat(ae.ht),De.hpx=Iv(De.hpt)),ae.hidden=="1"&&(tt=!0,De.hidden=!0),ae.outlineLevel!=null&&(tt=!0,De.level=+ae.outlineLevel),tt&&(Me[ce-1]=De)}break;case"<":lt=M;break}if(lt>=M)break;if(ae=Zi(I.slice(lt,M),!0),ce=ae.r!=null?parseInt(ae.r,10):ce+1,se=-1,!(x.sheetRows&&x.sheetRows<ce)){C.s.r>ce-1&&(C.s.r=ce-1),C.e.r<ce-1&&(C.e.r=ce-1),x&&x.cellStyles&&(De={},tt=!1,ae.ht&&(tt=!0,De.hpt=parseFloat(ae.ht),De.hpx=Iv(De.hpt)),ae.hidden=="1"&&(tt=!0,De.hidden=!0),ae.outlineLevel!=null&&(tt=!0,De.level=+ae.outlineLevel),tt&&(Me[ce-1]=De)),R=I.slice(M).split(e);for(var rt=0;rt!=R.length&&R[rt].trim().charAt(0)=="<";++rt);for(R=R.slice(rt),M=0;M!=R.length;++M)if(I=R[M].trim(),I.length!==0){if(D=I.match(r),V=M,G=0,Z=0,I="<c "+(I.slice(0,1)=="<"?">":"")+I,D!=null&&D.length===2){for(V=0,X=D[1],G=0;G!=X.length&&!((Z=X.charCodeAt(G)-64)<1||Z>26);++G)V=26*V+Z;--V,se=V}else++se;for(G=0;G!=I.length&&I.charCodeAt(G)!==62;++G);if(++G,ae=Zi(I.slice(0,G),!0),ae.r||(ae.r=an({r:ce-1,c:se})),X=I.slice(G),le={t:""},(D=X.match(a))!=null&&D[1]!==""&&(le.v=ts(D[1])),x.cellFormula){if((D=X.match(c))!=null&&D[1]!==""){if(le.f=ts(ha(D[1])).replace(/\r\n/g,`
`),x.xlfn||(le.f=cF(le.f)),D[0].indexOf('t="array"')>-1)le.F=(X.match(n)||[])[1],le.F.indexOf(":")>-1&&ge.push([so(le.F),le.F]);else if(D[0].indexOf('t="shared"')>-1){re=Zi(D[0]);var gt=ts(ha(D[1]));x.xlfn||(gt=cF(gt)),Pe[parseInt(re.si,10)]=[re,gt,ae.r]}}else(D=X.match(/<f[^>]*\/>/))&&(re=Zi(D[0]),Pe[re.si]&&(le.f=Aie(Pe[re.si][1],Pe[re.si][2],ae.r)));var dt=Bu(ae.r);for(G=0;G<ge.length;++G)dt.r>=ge[G][0].s.r&&dt.r<=ge[G][0].e.r&&dt.c>=ge[G][0].s.c&&dt.c<=ge[G][0].e.c&&(le.F=ge[G][1])}if(ae.t==null&&le.v===void 0)if(le.f||le.F)le.v=0,le.t="n";else if(ee)le.t="z";else continue;else le.t=ae.t||"n";switch(C.s.c>se&&(C.s.c=se),C.e.c<se&&(C.e.c=se),le.t){case"n":if(le.v==""||le.v==null){if(!ee)continue;le.t="z"}else le.v=parseFloat(le.v);break;case"s":if(typeof le.v>"u"){if(!ee)continue;le.t="z"}else ue=ov[parseInt(le.v,10)],le.v=ue.t,le.r=ue.r,x.cellHTML&&(le.h=ue.h);break;case"str":le.t="s",le.v=le.v!=null?ha(le.v):"",x.cellHTML&&(le.h=vB(le.v));break;case"inlineStr":D=X.match(i),le.t="s",D!=null&&(ue=TB(D[1]))?(le.v=ue.t,x.cellHTML&&(le.h=ue.h)):le.v="";break;case"b":le.v=Ia(le.v);break;case"d":x.cellDates?le.v=Kl(le.v,1):(le.v=Su(Kl(le.v,1)),le.t="n");break;case"e":(!x||x.cellText!==!1)&&(le.w=le.v),le.v=UI[le.v];break}if(W=de=0,Ne=null,Ee&&ae.s!==void 0&&(Ne=B.CellXf[ae.s],Ne!=null&&(Ne.numFmtId!=null&&(W=Ne.numFmtId),x.cellStyles&&Ne.fillId!=null&&(de=Ne.fillId))),mL(le,W,de,x,N,B),x.cellDates&&Ee&&le.t=="n"&&xg(fn[W])&&(le.t="d",le.v=P2(le.v)),ae.cm&&x.xlmeta){var qt=(x.xlmeta.Cell||[])[+ae.cm-1];qt&&qt.type=="XLDAPR"&&(le.D=!0)}if(Ye){var Te=Bu(ae.r);g[Te.r]||(g[Te.r]=[]),g[Te.r][Te.c]=le}else g[ae.r]=le}}}}Me.length>0&&(g["!rows"]=Me)}}();function rse(e,t){var r={},i=e.l+t;r.r=e.read_shift(4),e.l+=4;var n=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=i,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=n/20),r}var ise=I0;function nse(){}function sse(e,t){var r={},i=e[e.l];return++e.l,r.above=!(i&64),r.left=!(i&128),e.l+=18,r.name=EJ(e),r}function ase(e){var t=lA(e);return[t]}function ose(e){var t=N0(e);return[t]}function lse(e){var t=lA(e),r=e.read_shift(1);return[t,r,"b"]}function cse(e){var t=N0(e),r=e.read_shift(1);return[t,r,"b"]}function use(e){var t=lA(e),r=e.read_shift(1);return[t,r,"e"]}function hse(e){var t=N0(e),r=e.read_shift(1);return[t,r,"e"]}function Ase(e){var t=lA(e),r=e.read_shift(4);return[t,r,"s"]}function fse(e){var t=N0(e),r=e.read_shift(4);return[t,r,"s"]}function dse(e){var t=lA(e),r=$c(e);return[t,r,"n"]}function vL(e){var t=N0(e),r=$c(e);return[t,r,"n"]}function pse(e){var t=lA(e),r=CB(e);return[t,r,"n"]}function mse(e){var t=N0(e),r=CB(e);return[t,r,"n"]}function gse(e){var t=lA(e),r=wB(e);return[t,r,"is"]}function vse(e){var t=lA(e),r=Jc(e);return[t,r,"str"]}function xse(e){var t=N0(e),r=Jc(e);return[t,r,"str"]}function yse(e,t,r){var i=e.l+t,n=lA(e);n.r=r["!row"];var a=e.read_shift(1),c=[n,a,"b"];if(r.cellFormula){e.l+=2;var s=U2(e,i-e.l,r);c[3]=Kc(s,null,n,r.supbooks,r)}else e.l=i;return c}function _se(e,t,r){var i=e.l+t,n=lA(e);n.r=r["!row"];var a=e.read_shift(1),c=[n,a,"e"];if(r.cellFormula){e.l+=2;var s=U2(e,i-e.l,r);c[3]=Kc(s,null,n,r.supbooks,r)}else e.l=i;return c}function bse(e,t,r){var i=e.l+t,n=lA(e);n.r=r["!row"];var a=$c(e),c=[n,a,"n"];if(r.cellFormula){e.l+=2;var s=U2(e,i-e.l,r);c[3]=Kc(s,null,n,r.supbooks,r)}else e.l=i;return c}function wse(e,t,r){var i=e.l+t,n=lA(e);n.r=r["!row"];var a=Jc(e),c=[n,a,"str"];if(r.cellFormula){e.l+=2;var s=U2(e,i-e.l,r);c[3]=Kc(s,null,n,r.supbooks,r)}else e.l=i;return c}var Bse=I0;function Cse(e,t){var r=e.l+t,i=I0(e),n=BB(e),a=Jc(e),c=Jc(e),s=Jc(e);e.l=r;var d={rfx:i,relId:n,loc:a,display:s};return c&&(d.Tooltip=c),d}function Sse(){}function Ese(e,t,r){var i=e.l+t,n=PI(e),a=e.read_shift(1),c=[n];if(c[2]=a,r.cellFormula){var s=Ine(e,i-e.l,r);c[1]=s}else e.l=i;return c}function Tse(e,t,r){var i=e.l+t,n=I0(e),a=[n];if(r.cellFormula){var c=Mne(e,i-e.l,r);a[1]=c,e.l=i}else e.l=i;return a}var Fse=["left","right","top","bottom","header","footer"];function kse(e){var t={};return Fse.forEach(function(r){t[r]=$c(e)}),t}function Nse(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Ise(){}function Lse(){}function Mse(e,t,r,i,n,a,c){if(!e)return e;var s=t||{};i||(i={"!id":{}});var d=s.dense?[]:{},g,x={s:{r:2e6,c:2e6},e:{r:0,c:0}},C=!1,N=!1,B,M,I,R,D,V,G,Z,X,le=[];s.biff=12,s["!row"]=0;var ae=0,ce=!1,se=[],ue={},re=s.supbooks||n.supbooks||[[]];if(re.sharedf=ue,re.arrayf=se,re.SheetNames=n.SheetNames||n.Sheets.map(function(Ye){return Ye.name}),!s.supbooks&&(s.supbooks=re,n.Names))for(var W=0;W<n.Names.length;++W)re[0][W+1]=n.Names[W];var de=[],Ee=[],Ne=!1;t2[16]={n:"BrtShortReal",f:vL};var ge;if(wd(e,function(Me,De,tt){if(!N)switch(tt){case 148:g=Me;break;case 0:B=Me,s.sheetRows&&s.sheetRows<=B.r&&(N=!0),Z=gc(R=B.r),s["!row"]=B.r,(Me.hidden||Me.hpt||Me.level!=null)&&(Me.hpt&&(Me.hpx=Iv(Me.hpt)),Ee[Me.r]=Me);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(M={t:Me[2]},Me[2]){case"n":M.v=Me[1];break;case"s":G=ov[Me[1]],M.v=G.t,M.r=G.r;break;case"b":M.v=!!Me[1];break;case"e":M.v=Me[1],s.cellText!==!1&&(M.w=L0[M.v]);break;case"str":M.t="s",M.v=Me[1];break;case"is":M.t="s",M.v=Me[1].t;break}if((I=c.CellXf[Me[0].iStyleRef])&&mL(M,I.numFmtId,null,s,a,c),D=Me[0].c==-1?D+1:Me[0].c,s.dense?(d[R]||(d[R]=[]),d[R][D]=M):d[vl(D)+Z]=M,s.cellFormula){for(ce=!1,ae=0;ae<se.length;++ae){var ee=se[ae];B.r>=ee[0].s.r&&B.r<=ee[0].e.r&&D>=ee[0].s.c&&D<=ee[0].e.c&&(M.F=Xn(ee[0]),ce=!0)}!ce&&Me.length>3&&(M.f=Me[3])}if(x.s.r>B.r&&(x.s.r=B.r),x.s.c>D&&(x.s.c=D),x.e.r<B.r&&(x.e.r=B.r),x.e.c<D&&(x.e.c=D),s.cellDates&&I&&M.t=="n"&&xg(fn[I.numFmtId])){var fe=l0(M.v);fe&&(M.t="d",M.v=new Date(fe.y,fe.m-1,fe.d,fe.H,fe.M,fe.S,fe.u))}ge&&(ge.type=="XLDAPR"&&(M.D=!0),ge=void 0);break;case 1:case 12:if(!s.sheetStubs||C)break;M={t:"z",v:void 0},D=Me[0].c==-1?D+1:Me[0].c,s.dense?(d[R]||(d[R]=[]),d[R][D]=M):d[vl(D)+Z]=M,x.s.r>B.r&&(x.s.r=B.r),x.s.c>D&&(x.s.c=D),x.e.r<B.r&&(x.e.r=B.r),x.e.c<D&&(x.e.c=D),ge&&(ge.type=="XLDAPR"&&(M.D=!0),ge=void 0);break;case 176:le.push(Me);break;case 49:ge=((s.xlmeta||{}).Cell||[])[Me-1];break;case 494:var pe=i["!id"][Me.relId];for(pe?(Me.Target=pe.Target,Me.loc&&(Me.Target+="#"+Me.loc),Me.Rel=pe):Me.relId==""&&(Me.Target="#"+Me.loc),R=Me.rfx.s.r;R<=Me.rfx.e.r;++R)for(D=Me.rfx.s.c;D<=Me.rfx.e.c;++D)s.dense?(d[R]||(d[R]=[]),d[R][D]||(d[R][D]={t:"z",v:void 0}),d[R][D].l=Me):(V=an({c:D,r:R}),d[V]||(d[V]={t:"z",v:void 0}),d[V].l=Me);break;case 426:if(!s.cellFormula)break;se.push(Me),X=s.dense?d[R][D]:d[vl(D)+Z],X.f=Kc(Me[1],x,{r:B.r,c:D},re,s),X.F=Xn(Me[0]);break;case 427:if(!s.cellFormula)break;ue[an(Me[0].s)]=Me[1],X=s.dense?d[R][D]:d[vl(D)+Z],X.f=Kc(Me[1],x,{r:B.r,c:D},re,s);break;case 60:if(!s.cellStyles)break;for(;Me.e>=Me.s;)de[Me.e--]={width:Me.w/256,hidden:!!(Me.flags&1),level:Me.level},Ne||(Ne=!0,FB(Me.w/256)),og(de[Me.e+1]);break;case 161:d["!autofilter"]={ref:Xn(Me)};break;case 476:d["!margins"]=Me;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),Me.name&&(n.Sheets[r].CodeName=Me.name),(Me.above||Me.left)&&(d["!outline"]={above:Me.above,left:Me.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),Me.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:C=!0;break;case 36:C=!1;break;case 37:C=!0;break;case 38:C=!1;break;default:if(!De.T){if(!C||s.WTF)throw new Error("Unexpected record 0x"+tt.toString(16))}}},s),delete s.supbooks,delete s["!row"],!d["!ref"]&&(x.s.r<2e6||g&&(g.e.r>0||g.e.c>0||g.s.r>0||g.s.c>0))&&(d["!ref"]=Xn(g||x)),s.sheetRows&&d["!ref"]){var Pe=so(d["!ref"]);s.sheetRows<=+Pe.e.r&&(Pe.e.r=s.sheetRows-1,Pe.e.r>x.e.r&&(Pe.e.r=x.e.r),Pe.e.r<Pe.s.r&&(Pe.s.r=Pe.e.r),Pe.e.c>x.e.c&&(Pe.e.c=x.e.c),Pe.e.c<Pe.s.c&&(Pe.s.c=Pe.e.c),d["!fullref"]=d["!ref"],d["!ref"]=Xn(Pe))}return le.length>0&&(d["!merges"]=le),de.length>0&&(d["!cols"]=de),Ee.length>0&&(d["!rows"]=Ee),d}function Pse(e){var t=[],r=e.match(/^<c:numCache>/),i;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var c=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);c&&(t[+c[1]]=r?+c[2]:c[2])});var n=ts((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){i=a.replace(/<.*?>/g,"")}),[t,n,i]}function Dse(e,t,r,i,n,a){var c=a||{"!type":"chart"};if(!e)return a;var s=0,d=0,g="A",x={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(C){var N=Pse(C);x.s.r=x.s.c=0,x.e.c=s,g=vl(s),N[0].forEach(function(B,M){c[g+gc(M)]={t:"n",v:B,z:N[1]},d=M}),x.e.r<d&&(x.e.r=d),++s}),s>0&&(c["!ref"]=Xn(x)),c}function Rse(e,t,r,i,n){if(!e)return e;i||(i={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},c,s=e.match(gL);return s&&NB(s[0],a,n,r),(c=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=c[1]),i["!id"][a["!rel"]]&&(a["!drawel"]=i["!id"][a["!rel"]]),a}function Use(e,t){e.l+=10;var r=Jc(e);return{name:r}}function jse(e,t,r,i,n){if(!e)return e;i||(i={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},c=!1;return wd(e,function(d,g,x){switch(x){case 550:a["!rel"]=d;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),d.name&&(n.Sheets[r].CodeName=d.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:c=!0;break;case 36:c=!1;break;case 37:break;case 38:break;default:if(!(g.T>0)){if(!(g.T<0)){if(!c||t.WTF)throw new Error("Unexpected record 0x"+x.toString(16))}}}},t),i["!id"][a["!rel"]]&&(a["!drawel"]=i["!id"][a["!rel"]]),a}var xL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Ose=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Qse=[],zse=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function dF(e,t){for(var r=0;r!=e.length;++r)for(var i=e[r],n=0;n!=t.length;++n){var a=t[n];if(i[a[0]]==null)i[a[0]]=a[1];else switch(a[2]){case"bool":typeof i[a[0]]=="string"&&(i[a[0]]=Ia(i[a[0]]));break;case"int":typeof i[a[0]]=="string"&&(i[a[0]]=parseInt(i[a[0]],10));break}}}function pF(e,t){for(var r=0;r!=t.length;++r){var i=t[r];if(e[i[0]]==null)e[i[0]]=i[1];else switch(i[2]){case"bool":typeof e[i[0]]=="string"&&(e[i[0]]=Ia(e[i[0]]));break;case"int":typeof e[i[0]]=="string"&&(e[i[0]]=parseInt(e[i[0]],10));break}}}function yL(e){pF(e.WBProps,xL),pF(e.CalcPr,zse),dF(e.WBView,Ose),dF(e.Sheets,Qse),Jm.date1904=Ia(e.WBProps.date1904)}var Hse="][*?/\\".split("");function Vse(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Hse.forEach(function(i){if(e.indexOf(i)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var Gse=/<\w+:workbook/;function qse(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},i=!1,n="xmlns",a={},c=0;if(e.replace(ru,function(d,g){var x=Zi(d);switch(Nf(x[0])){case"<?xml":break;case"<workbook":d.match(Gse)&&(n="xmlns"+d.match(/<(\w+):/)[1]),r.xmlns=x[n];break;case"</workbook>":break;case"<fileVersion":delete x[0],r.AppVersion=x;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":xL.forEach(function(C){if(x[C[0]]!=null)switch(C[2]){case"bool":r.WBProps[C[0]]=Ia(x[C[0]]);break;case"int":r.WBProps[C[0]]=parseInt(x[C[0]],10);break;default:r.WBProps[C[0]]=x[C[0]]}}),x.codeName&&(r.WBProps.CodeName=ha(x.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete x[0],r.WBView.push(x);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(x.state){case"hidden":x.Hidden=1;break;case"veryHidden":x.Hidden=2;break;default:x.Hidden=0}delete x.state,x.name=ts(ha(x.name)),delete x[0],r.Sheets.push(x);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":i=!0;break;case"</definedNames>":i=!1;break;case"<definedName":a={},a.Name=ha(x.name),x.comment&&(a.Comment=x.comment),x.localSheetId&&(a.Sheet=+x.localSheetId),Ia(x.hidden||"0")&&(a.Hidden=!0),c=g+d.length;break;case"</definedName>":a.Ref=ts(ha(e.slice(c,g))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete x[0],r.CalcPr=x;break;case"<calcPr/>":delete x[0],r.CalcPr=x;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":i=!0;break;case"</AlternateContent>":i=!1;break;case"<revisionPtr":break;default:if(!i&&t.WTF)throw new Error("unrecognized "+x[0]+" in workbook")}return d}),uJ.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return yL(r),r}function Kse(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=J5(e),r.name=Jc(e),r}function Wse(e,t){var r={},i=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var n=t>8?Jc(e):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(i&65536),r.backupFile=!!(i&64),r.checkCompatibility=!!(i&4096),r.date1904=!!(i&1),r.filterPrivacy=!!(i&8),r.hidePivotFieldList=!!(i&1024),r.promptedSolutions=!!(i&16),r.publishItems=!!(i&2048),r.refreshAllConnections=!!(i&262144),r.saveExternalLinkValues=!!(i&128),r.showBorderUnselectedTables=!!(i&4),r.showInkAnnotation=!!(i&32),r.showObjects=["all","placeholders","none"][i>>13&3],r.showPivotChartFilter=!!(i&32768),r.updateLinks=["userSet","never","always"][i>>8&3],r}function $se(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function Xse(e,t,r){var i=e.l+t;e.l+=4,e.l+=1;var n=e.read_shift(4),a=TJ(e),c=Lne(e,0,r),s=BB(e);e.l=i;var d={Name:a,Ptg:c};return n<268435455&&(d.Sheet=n),s&&(d.Comment=s),d}function Zse(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},i=[],n=!1;t||(t={}),t.biff=12;var a=[],c=[[]];return c.SheetNames=[],c.XTI=[],t2[16]={n:"BrtFRTArchID$",f:$se},wd(e,function(d,g,x){switch(x){case 156:c.SheetNames.push(d.name),r.Sheets.push(d);break;case 153:r.WBProps=d;break;case 39:d.Sheet!=null&&(t.SID=d.Sheet),d.Ref=Kc(d.Ptg,null,null,c,t),delete t.SID,delete d.Ptg,a.push(d);break;case 1036:break;case 357:case 358:case 355:case 667:c[0].length?c.push([x,d]):c[0]=[x,d],c[c.length-1].XTI=[];break;case 362:c.length===0&&(c[0]=[],c[0].XTI=[]),c[c.length-1].XTI=c[c.length-1].XTI.concat(d),c.XTI=c.XTI.concat(d);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:i.push(x),n=!0;break;case 36:i.pop(),n=!1;break;case 37:i.push(x),n=!0;break;case 38:i.pop(),n=!1;break;case 16:break;default:if(!g.T){if(!n||t.WTF&&i[i.length-1]!=37&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+x.toString(16))}}},t),yL(r),r.Names=a,r.supbooks=c,r}function Yse(e,t,r){return t.slice(-4)===".bin"?Zse(e,r):qse(e,r)}function Jse(e,t,r,i,n,a,c,s){return t.slice(-4)===".bin"?Mse(e,i,r,n,a,c,s):Kne(e,i,r,n,a,c,s)}function eae(e,t,r,i,n,a,c,s){return t.slice(-4)===".bin"?jse(e,i,r,n,a):Rse(e,i,r,n,a)}function tae(e,t,r,i,n,a,c,s){return t.slice(-4)===".bin"?cie():uie()}function rae(e,t,r,i,n,a,c,s){return t.slice(-4)===".bin"?oie():lie()}function iae(e,t,r,i){return t.slice(-4)===".bin"?Bre(e,r,i):vre(e,r,i)}function nae(e,t,r){return aL(e,r)}function sae(e,t,r){return t.slice(-4)===".bin"?Ote(e,r):Ute(e,r)}function aae(e,t,r){return t.slice(-4)===".bin"?nie(e,r):Jre(e,r)}function oae(e,t,r){return t.slice(-4)===".bin"?Xre(e):Wre(e)}function lae(e,t,r,i){return r.slice(-4)===".bin"?Zre(e,t,r,i):void 0}function cae(e,t,r){return t.slice(-4)===".bin"?qre(e,t,r):Kre(e,t,r)}var _L=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,bL=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function PA(e,t){var r=e.split(/\s+/),i=[];if(i[0]=r[0],r.length===1)return i;var n=e.match(_L),a,c,s,d;if(n)for(d=0;d!=n.length;++d)a=n[d].match(bL),(c=a[1].indexOf(":"))===-1?i[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?s="xmlns"+a[1].slice(6):s=a[1].slice(c+1),i[s]=a[2].slice(1,a[2].length-1));return i}function uae(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var i=e.match(_L),n,a,c,s;if(i)for(s=0;s!=i.length;++s)n=i[s].match(bL),(a=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?c="xmlns"+n[1].slice(6):c=n[1].slice(a+1),r[c]=n[2].slice(1,n[2].length-1));return r}var cv;function hae(e,t){var r=cv[e]||ts(e);return r==="General"?w0(t):oA(r,t)}function Aae(e,t,r,i){var n=i;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=Ia(i);break;case"i2":case"int":n=parseInt(i,10);break;case"r4":case"float":n=parseFloat(i);break;case"date":case"dateTime.tz":n=Kl(i);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[ts(t)]=n}function fae(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||L0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ev(e.v):e.w=w0(e.v):e.w=hae(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var i=cv[t]||t||"General";if(r.cellNF&&(e.z=i),r.cellDates&&e.t=="n"&&xg(i)){var n=l0(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(a){if(r.WTF)throw a}}}function dae(e,t,r){if(r.cellStyles&&t.Interior){var i=t.Interior;i.Pattern&&(i.patternType=Are[i.Pattern]||i.Pattern)}e[t.ID]=t}function pae(e,t,r,i,n,a,c,s,d,g){var x="General",C=i.StyleID,N={};g=g||{};var B=[],M=0;for(C===void 0&&s&&(C=s.StyleID),C===void 0&&c&&(C=c.StyleID);a[C]!==void 0&&(a[C].nf&&(x=a[C].nf),a[C].Interior&&B.push(a[C].Interior),!!a[C].Parent);)C=a[C].Parent;switch(r.Type){case"Boolean":i.t="b",i.v=Ia(e);break;case"String":i.t="s",i.r=RT(ts(e)),i.v=e.indexOf("<")>-1?ts(t||e).replace(/<.*?>/g,""):i.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),i.v=(Kl(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),i.v!==i.v?i.v=ts(e):i.v<60&&(i.v=i.v-1),(!x||x=="General")&&(x="yyyy-mm-dd");case"Number":i.v===void 0&&(i.v=+e),i.t||(i.t="n");break;case"Error":i.t="e",i.v=UI[e],g.cellText!==!1&&(i.w=e);break;default:e==""&&t==""?i.t="z":(i.t="s",i.v=RT(t||e));break}if(fae(i,x,g),g.cellFormula!==!1)if(i.Formula){var I=ts(i.Formula);I.charCodeAt(0)==61&&(I=I.slice(1)),i.f=Ym(I,n),delete i.Formula,i.ArrayRange=="RC"?i.F=Ym("RC:RC",n):i.ArrayRange&&(i.F=Ym(i.ArrayRange,n),d.push([so(i.F),i.F]))}else for(M=0;M<d.length;++M)n.r>=d[M][0].s.r&&n.r<=d[M][0].e.r&&n.c>=d[M][0].s.c&&n.c<=d[M][0].e.c&&(i.F=d[M][1]);g.cellStyles&&(B.forEach(function(R){!N.patternType&&R.patternType&&(N.patternType=R.patternType)}),i.s=N),i.StyleID!==void 0&&(i.ixfe=i.StyleID)}function mae(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function Pw(e,t){var r=t||{};uI();var i=j1(xB(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(i=ha(i));var n=i.slice(0,1024).toLowerCase(),a=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var c=mc(r);return c.type="string",kv.to_workbook(i,c)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Sr){n.indexOf("<"+Sr)>=0&&(a=!0)}),a)return Cae(i,r);cv={"General Number":"General","General Date":fn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":fn[15],"Short Date":fn[14],"Long Time":fn[19],"Medium Time":fn[18],"Short Time":fn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:fn[2],Standard:fn[4],Percent:fn[10],Scientific:fn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var s,d=[],g,x={},C=[],N=r.dense?[]:{},B="",M={},I={},R=PA('<Data ss:Type="String">'),D=0,V=0,G=0,Z={s:{r:2e6,c:2e6},e:{r:0,c:0}},X={},le={},ae="",ce=0,se=[],ue={},re={},W=0,de=[],Ee=[],Ne={},ge=[],Pe,Ye=!1,Me=[],De=[],tt={},ee=0,fe=0,pe={Sheets:[],WBProps:{date1904:!1}},we={};Fv.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"");for(var Le="";s=Fv.exec(i);)switch(s[3]=(Le=s[3]).toLowerCase()){case"data":if(Le=="data"){if(s[1]==="/"){if((g=d.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else s[0].charAt(s[0].length-2)!=="/"&&d.push([s[3],!0]);break}if(d[d.length-1][1])break;s[1]==="/"?pae(i.slice(D,s.index),ae,R,d[d.length-1][0]=="comment"?Ne:M,{c:V,r:G},X,ge[V],I,Me,r):(ae="",R=PA(s[0]),D=s.index+s[0].length);break;case"cell":if(s[1]==="/")if(Ee.length>0&&(M.c=Ee),(!r.sheetRows||r.sheetRows>G)&&M.v!==void 0&&(r.dense?(N[G]||(N[G]=[]),N[G][V]=M):N[vl(V)+gc(G)]=M),M.HRef&&(M.l={Target:ts(M.HRef)},M.HRefScreenTip&&(M.l.Tooltip=M.HRefScreenTip),delete M.HRef,delete M.HRefScreenTip),(M.MergeAcross||M.MergeDown)&&(ee=V+(parseInt(M.MergeAcross,10)|0),fe=G+(parseInt(M.MergeDown,10)|0),se.push({s:{c:V,r:G},e:{c:ee,r:fe}})),!r.sheetStubs)M.MergeAcross?V=ee+1:++V;else if(M.MergeAcross||M.MergeDown){for(var lt=V;lt<=ee;++lt)for(var rt=G;rt<=fe;++rt)(lt>V||rt>G)&&(r.dense?(N[rt]||(N[rt]=[]),N[rt][lt]={t:"z"}):N[vl(lt)+gc(rt)]={t:"z"});V=ee+1}else++V;else M=uae(s[0]),M.Index&&(V=+M.Index-1),V<Z.s.c&&(Z.s.c=V),V>Z.e.c&&(Z.e.c=V),s[0].slice(-2)==="/>"&&++V,Ee=[];break;case"row":s[1]==="/"||s[0].slice(-2)==="/>"?(G<Z.s.r&&(Z.s.r=G),G>Z.e.r&&(Z.e.r=G),s[0].slice(-2)==="/>"&&(I=PA(s[0]),I.Index&&(G=+I.Index-1)),V=0,++G):(I=PA(s[0]),I.Index&&(G=+I.Index-1),tt={},(I.AutoFitHeight=="0"||I.Height)&&(tt.hpx=parseInt(I.Height,10),tt.hpt=sL(tt.hpx),De[G]=tt),I.Hidden=="1"&&(tt.hidden=!0,De[G]=tt));break;case"worksheet":if(s[1]==="/"){if((g=d.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"));C.push(B),Z.s.r<=Z.e.r&&Z.s.c<=Z.e.c&&(N["!ref"]=Xn(Z),r.sheetRows&&r.sheetRows<=Z.e.r&&(N["!fullref"]=N["!ref"],Z.e.r=r.sheetRows-1,N["!ref"]=Xn(Z))),se.length&&(N["!merges"]=se),ge.length>0&&(N["!cols"]=ge),De.length>0&&(N["!rows"]=De),x[B]=N}else Z={s:{r:2e6,c:2e6},e:{r:0,c:0}},G=V=0,d.push([s[3],!1]),g=PA(s[0]),B=ts(g.Name),N=r.dense?[]:{},se=[],Me=[],De=[],we={name:B,Hidden:0},pe.Sheets.push(we);break;case"table":if(s[1]==="/"){if((g=d.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else{if(s[0].slice(-2)=="/>")break;d.push([s[3],!1]),ge=[],Ye=!1}break;case"style":s[1]==="/"?dae(X,le,r):le=PA(s[0]);break;case"numberformat":le.nf=ts(PA(s[0]).Format||"General"),cv[le.nf]&&(le.nf=cv[le.nf]);for(var gt=0;gt!=392&&fn[gt]!=le.nf;++gt);if(gt==392){for(gt=57;gt!=392;++gt)if(fn[gt]==null){p0(le.nf,gt);break}}break;case"column":if(d[d.length-1][0]!=="table")break;if(Pe=PA(s[0]),Pe.Hidden&&(Pe.hidden=!0,delete Pe.Hidden),Pe.Width&&(Pe.wpx=parseInt(Pe.Width,10)),!Ye&&Pe.wpx>10){Ye=!0,bu=iL;for(var dt=0;dt<ge.length;++dt)ge[dt]&&og(ge[dt])}Ye&&og(Pe),ge[Pe.Index-1||ge.length]=Pe;for(var qt=0;qt<+Pe.Span;++qt)ge[ge.length]=mc(Pe);break;case"namedrange":if(s[1]==="/")break;pe.Names||(pe.Names=[]);var Te=Zi(s[0]),at={Name:Te.Name,Ref:Ym(Te.RefersTo.slice(1),{r:0,c:0})};pe.Sheets.length>0&&(at.Sheet=pe.Sheets.length-1),pe.Names.push(at);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(s[0].slice(-2)==="/>")break;s[1]==="/"?ae+=i.slice(ce,s.index):ce=s.index+s[0].length;break;case"interior":if(!r.cellStyles)break;le.Interior=PA(s[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(s[0].slice(-2)==="/>")break;s[1]==="/"?JJ(ue,Le,i.slice(W,s.index)):W=s.index+s[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(s[1]==="/"){if((g=d.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else d.push([s[3],!1]);break;case"comment":if(s[1]==="/"){if((g=d.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"));mae(Ne),Ee.push(Ne)}else d.push([s[3],!1]),g=PA(s[0]),Ne={a:g.Author};break;case"autofilter":if(s[1]==="/"){if((g=d.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else if(s[0].charAt(s[0].length-2)!=="/"){var kt=PA(s[0]);N["!autofilter"]={ref:Ym(kt.Range).replace(/\$/g,"")},d.push([s[3],!0])}break;case"name":break;case"datavalidation":if(s[1]==="/"){if((g=d.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else s[0].charAt(s[0].length-2)!=="/"&&d.push([s[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(s[1]==="/"){if((g=d.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else s[0].charAt(s[0].length-2)!=="/"&&d.push([s[3],!0]);break;case"null":break;default:if(d.length==0&&s[3]=="document"||d.length==0&&s[3]=="uof")return _F(i,r);var ze=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(s[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ze=!1}break;case"componentoptions":switch(s[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ze=!1}break;case"excelworkbook":switch(s[3]){case"date1904":pe.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ze=!1}break;case"workbookoptions":switch(s[3]){case"owcversion":break;case"height":break;case"width":break;default:ze=!1}break;case"worksheetoptions":switch(s[3]){case"visible":if(s[0].slice(-2)!=="/>")if(s[1]==="/")switch(i.slice(W,s.index)){case"SheetHidden":we.Hidden=1;break;case"SheetVeryHidden":we.Hidden=2;break}else W=s.index+s[0].length;break;case"header":N["!margins"]||lv(N["!margins"]={},"xlml"),isNaN(+Zi(s[0]).Margin)||(N["!margins"].header=+Zi(s[0]).Margin);break;case"footer":N["!margins"]||lv(N["!margins"]={},"xlml"),isNaN(+Zi(s[0]).Margin)||(N["!margins"].footer=+Zi(s[0]).Margin);break;case"pagemargins":var Et=Zi(s[0]);N["!margins"]||lv(N["!margins"]={},"xlml"),isNaN(+Et.Top)||(N["!margins"].top=+Et.Top),isNaN(+Et.Left)||(N["!margins"].left=+Et.Left),isNaN(+Et.Right)||(N["!margins"].right=+Et.Right),isNaN(+Et.Bottom)||(N["!margins"].bottom=+Et.Bottom);break;case"displayrighttoleft":pe.Views||(pe.Views=[]),pe.Views[0]||(pe.Views[0]={}),pe.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":N["!outline"]||(N["!outline"]={}),N["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":N["!outline"]||(N["!outline"]={}),N["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ze=!1}break;case"pivottable":case"pivotcache":switch(s[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ze=!1}break;case"pagebreaks":switch(s[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ze=!1}break;case"autofilter":switch(s[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ze=!1}break;case"querytable":switch(s[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ze=!1}break;case"datavalidation":switch(s[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ze=!1}break;case"sorting":case"conditionalformatting":switch(s[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ze=!1}break;case"mapinfo":case"schema":case"data":switch(s[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ze=!1}break;case"smarttags":break;default:ze=!1;break}if(ze||s[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+s[3]+"|"+d.join("|");if(d[d.length-1][0]==="customdocumentproperties"){if(s[0].slice(-2)==="/>")break;s[1]==="/"?Aae(re,Le,de,i.slice(W,s.index)):(de=s,W=s.index+s[0].length);break}if(r.WTF)throw"Unrecognized tag: "+s[3]+"|"+d.join("|")}var Pt={};return!r.bookSheets&&!r.bookProps&&(Pt.Sheets=x),Pt.SheetNames=C,Pt.Workbook=pe,Pt.SSF=mc(fn),Pt.Props=ue,Pt.Custprops=re,Pt}function i4(e,t){switch(MB(t=t||{}),t.type||"base64"){case"base64":return Pw(kh(e),t);case"binary":case"buffer":case"file":return Pw(e,t);case"array":return Pw(k0(e),t)}}function gae(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=NJ(r),r.length-r.l<=4)return t;var i=r.read_shift(4);if(i==0||i>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(i=r.read_shift(4),i!==1907505652)||(t.UnicodeClipboardFormat=IJ(r),i=r.read_shift(4),i==0||i>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var vae=[60,1084,2066,2165,2175];function xae(e,t,r,i,n){var a=i,c=[],s=r.slice(r.l,r.l+a);if(n&&n.enc&&n.enc.insitu&&s.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(s)}c.push(s),r.l+=a;for(var d=hd(r,r.l),g=n4[d],x=0;g!=null&&vae.indexOf(d)>-1;)a=hd(r,r.l+2),x=r.l+4,d==2066?x+=4:(d==2165||d==2175)&&(x+=12),s=r.slice(x,r.l+4+a),c.push(s),r.l+=4+a,g=n4[d=hd(r,r.l)];var C=sp(c);fc(C,0);var N=0;C.lens=[];for(var B=0;B<c.length;++B)C.lens.push(N),N+=c[B].length;if(C.length<i)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+C.length+" < "+i;return t.f(C,C.length,n)}function gf(e,t,r){if(e.t!=="z"&&e.XF){var i=0;try{i=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=fn[i])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||L0[e.v]:i===0||i=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ev(e.v):e.w=w0(e.v):e.w=oA(i,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&i&&e.t=="n"&&xg(fn[i]||String(i))){var n=l0(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function Ky(e,t,r){return{v:e,ixfe:t,t:r}}function yae(e,t){var r={opts:{}},i={},n=t.dense?[]:{},a={},c={},s=null,d=[],g="",x={},C,N="",B,M,I,R,D={},V=[],G,Z,X=[],le=[],ae={Sheets:[],WBProps:{date1904:!1},Views:[{}]},ce={},se=function(xe){return xe<8?m0[xe]:xe<64&&le[xe-8]||m0[xe]},ue=function(xe,ye,Ce){var je=ye.XF.data;if(!(!je||!je.patternType||!Ce||!Ce.cellStyles)){ye.s={},ye.s.patternType=je.patternType;var Ke;(Ke=Nv(se(je.icvFore)))&&(ye.s.fgColor={rgb:Ke}),(Ke=Nv(se(je.icvBack)))&&(ye.s.bgColor={rgb:Ke})}},re=function(xe,ye,Ce){if(!(tt>1)&&!(Ce.sheetRows&&xe.r>=Ce.sheetRows)){if(Ce.cellStyles&&ye.XF&&ye.XF.data&&ue(xe,ye,Ce),delete ye.ixfe,delete ye.XF,C=xe,N=an(xe),(!c||!c.s||!c.e)&&(c={s:{r:0,c:0},e:{r:0,c:0}}),xe.r<c.s.r&&(c.s.r=xe.r),xe.c<c.s.c&&(c.s.c=xe.c),xe.r+1>c.e.r&&(c.e.r=xe.r+1),xe.c+1>c.e.c&&(c.e.c=xe.c+1),Ce.cellFormula&&ye.f){for(var je=0;je<V.length;++je)if(!(V[je][0].s.c>xe.c||V[je][0].s.r>xe.r)&&!(V[je][0].e.c<xe.c||V[je][0].e.r<xe.r)){ye.F=Xn(V[je][0]),(V[je][0].s.c!=xe.c||V[je][0].s.r!=xe.r)&&delete ye.f,ye.f&&(ye.f=""+Kc(V[je][1],c,xe,Me,W));break}}Ce.dense?(n[xe.r]||(n[xe.r]=[]),n[xe.r][xe.c]=ye):n[N]=ye}},W={enc:!1,sbcch:0,snames:[],sharedf:D,arrayf:V,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(W.password=t.password);var de,Ee=[],Ne=[],ge=[],Pe=[],Ye=!1,Me=[];Me.SheetNames=W.snames,Me.sharedf=W.sharedf,Me.arrayf=W.arrayf,Me.names=[],Me.XTI=[];var De=0,tt=0,ee=0,fe=[],pe=[],we;W.codepage=1200,OA(1200);for(var Le=!1;e.l<e.length-1;){var lt=e.l,rt=e.read_shift(2);if(rt===0&&De===10)break;var gt=e.l===e.length?0:e.read_shift(2),dt=n4[rt];if(dt&&dt.f){if(t.bookSheets&&De===133&&rt!==133)break;if(De=rt,dt.r===2||dt.r==12){var qt=e.read_shift(2);if(gt-=2,!W.enc&&qt!==rt&&((qt&255)<<8|qt>>8)!==rt)throw new Error("rt mismatch: "+qt+"!="+rt);dt.r==12&&(e.l+=10,gt-=10)}var Te={};if(rt===10?Te=dt.f(e,gt,W):Te=xae(rt,dt,e,gt,W),tt==0&&[9,521,1033,2057].indexOf(De)===-1)continue;switch(rt){case 34:r.opts.Date1904=ae.WBProps.date1904=Te;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(W.enc||(e.l=0),W.enc=Te,!t.password)throw new Error("File is password-protected");if(Te.valid==null)throw new Error("Encryption scheme unsupported");if(!Te.valid)throw new Error("Password is incorrect");break;case 92:W.lastuser=Te;break;case 66:var at=Number(Te);switch(at){case 21010:at=1200;break;case 32768:at=1e4;break;case 32769:at=1252;break}OA(W.codepage=at),Le=!0;break;case 317:W.rrtabid=Te;break;case 25:W.winlocked=Te;break;case 439:r.opts.RefreshAll=Te;break;case 12:r.opts.CalcCount=Te;break;case 16:r.opts.CalcDelta=Te;break;case 17:r.opts.CalcIter=Te;break;case 13:r.opts.CalcMode=Te;break;case 14:r.opts.CalcPrecision=Te;break;case 95:r.opts.CalcSaveRecalc=Te;break;case 15:W.CalcRefMode=Te;break;case 2211:r.opts.FullCalc=Te;break;case 129:Te.fDialog&&(n["!type"]="dialog"),Te.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),Te.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:X.push(Te);break;case 430:Me.push([Te]),Me[Me.length-1].XTI=[];break;case 35:case 547:Me[Me.length-1].push(Te);break;case 24:case 536:we={Name:Te.Name,Ref:Kc(Te.rgce,c,null,Me,W)},Te.itab>0&&(we.Sheet=Te.itab-1),Me.names.push(we),Me[0]||(Me[0]=[],Me[0].XTI=[]),Me[Me.length-1].push(Te),Te.Name=="_xlnm._FilterDatabase"&&Te.itab>0&&Te.rgce&&Te.rgce[0]&&Te.rgce[0][0]&&Te.rgce[0][0][0]=="PtgArea3d"&&(pe[Te.itab-1]={ref:Xn(Te.rgce[0][0][1][2])});break;case 22:W.ExternCount=Te;break;case 23:Me.length==0&&(Me[0]=[],Me[0].XTI=[]),Me[Me.length-1].XTI=Me[Me.length-1].XTI.concat(Te),Me.XTI=Me.XTI.concat(Te);break;case 2196:if(W.biff<8)break;we!=null&&(we.Comment=Te[1]);break;case 18:n["!protect"]=Te;break;case 19:Te!==0&&W.WTF&&console.error("Password verifier: "+Te);break;case 133:a[Te.pos]=Te,W.snames.push(Te.name);break;case 10:{if(--tt)break;if(c.e){if(c.e.r>0&&c.e.c>0){if(c.e.r--,c.e.c--,n["!ref"]=Xn(c),t.sheetRows&&t.sheetRows<=c.e.r){var kt=c.e.r;c.e.r=t.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=Xn(c),c.e.r=kt}c.e.r++,c.e.c++}Ee.length>0&&(n["!merges"]=Ee),Ne.length>0&&(n["!objects"]=Ne),ge.length>0&&(n["!cols"]=ge),Pe.length>0&&(n["!rows"]=Pe),ae.Sheets.push(ce)}g===""?x=n:i[g]=n,n=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(W.biff===8&&(W.biff={9:2,521:3,1033:4}[rt]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Te.BIFFVer]||8),W.biffguess=Te.BIFFVer==0,Te.BIFFVer==0&&Te.dt==4096&&(W.biff=5,Le=!0,OA(W.codepage=28591)),W.biff==8&&Te.BIFFVer==0&&Te.dt==16&&(W.biff=2),tt++)break;if(n=t.dense?[]:{},W.biff<8&&!Le&&(Le=!0,OA(W.codepage=t.codepage||1252)),W.biff<5||Te.BIFFVer==0&&Te.dt==4096){g===""&&(g="Sheet1"),c={s:{r:0,c:0},e:{r:0,c:0}};var ze={pos:e.l-gt,name:g};a[ze.pos]=ze,W.snames.push(g)}else g=(a[lt]||{name:""}).name;Te.dt==32&&(n["!type"]="chart"),Te.dt==64&&(n["!type"]="macro"),Ee=[],Ne=[],W.arrayf=V=[],ge=[],Pe=[],Ye=!1,ce={Hidden:(a[lt]||{hs:0}).hs,name:g}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(t.dense?(n[Te.r]||[])[Te.c]:n[an({c:Te.c,r:Te.r})])&&++Te.c,G={ixfe:Te.ixfe,XF:X[Te.ixfe]||{},v:Te.val,t:"n"},ee>0&&(G.z=fe[G.ixfe>>8&63]),gf(G,t,r.opts.Date1904),re({c:Te.c,r:Te.r},G,t);break;case 5:case 517:G={ixfe:Te.ixfe,XF:X[Te.ixfe],v:Te.val,t:Te.t},ee>0&&(G.z=fe[G.ixfe>>8&63]),gf(G,t,r.opts.Date1904),re({c:Te.c,r:Te.r},G,t);break;case 638:G={ixfe:Te.ixfe,XF:X[Te.ixfe],v:Te.rknum,t:"n"},ee>0&&(G.z=fe[G.ixfe>>8&63]),gf(G,t,r.opts.Date1904),re({c:Te.c,r:Te.r},G,t);break;case 189:for(var Et=Te.c;Et<=Te.C;++Et){var Pt=Te.rkrec[Et-Te.c][0];G={ixfe:Pt,XF:X[Pt],v:Te.rkrec[Et-Te.c][1],t:"n"},ee>0&&(G.z=fe[G.ixfe>>8&63]),gf(G,t,r.opts.Date1904),re({c:Et,r:Te.r},G,t)}break;case 6:case 518:case 1030:{if(Te.val=="String"){s=Te;break}if(G=Ky(Te.val,Te.cell.ixfe,Te.tt),G.XF=X[G.ixfe],t.cellFormula){var Sr=Te.formula;if(Sr&&Sr[0]&&Sr[0][0]&&Sr[0][0][0]=="PtgExp"){var or=Sr[0][0][1][0],Wr=Sr[0][0][1][1],Hr=an({r:or,c:Wr});D[Hr]?G.f=""+Kc(Te.formula,c,Te.cell,Me,W):G.F=((t.dense?(n[or]||[])[Wr]:n[Hr])||{}).F}else G.f=""+Kc(Te.formula,c,Te.cell,Me,W)}ee>0&&(G.z=fe[G.ixfe>>8&63]),gf(G,t,r.opts.Date1904),re(Te.cell,G,t),s=Te}break;case 7:case 519:if(s)s.val=Te,G=Ky(Te,s.cell.ixfe,"s"),G.XF=X[G.ixfe],t.cellFormula&&(G.f=""+Kc(s.formula,c,s.cell,Me,W)),ee>0&&(G.z=fe[G.ixfe>>8&63]),gf(G,t,r.opts.Date1904),re(s.cell,G,t),s=null;else throw new Error("String record expects Formula");break;case 33:case 545:{V.push(Te);var ti=an(Te[0].s);if(B=t.dense?(n[Te[0].s.r]||[])[Te[0].s.c]:n[ti],t.cellFormula&&B){if(!s||!ti||!B)break;B.f=""+Kc(Te[1],c,Te[0],Me,W),B.F=Xn(Te[0])}}break;case 1212:{if(!t.cellFormula)break;if(N){if(!s)break;D[an(s.cell)]=Te[0],B=t.dense?(n[s.cell.r]||[])[s.cell.c]:n[an(s.cell)],(B||{}).f=""+Kc(Te[0],c,C,Me,W)}}break;case 253:G=Ky(d[Te.isst].t,Te.ixfe,"s"),d[Te.isst].h&&(G.h=d[Te.isst].h),G.XF=X[G.ixfe],ee>0&&(G.z=fe[G.ixfe>>8&63]),gf(G,t,r.opts.Date1904),re({c:Te.c,r:Te.r},G,t);break;case 513:t.sheetStubs&&(G={ixfe:Te.ixfe,XF:X[Te.ixfe],t:"z"},ee>0&&(G.z=fe[G.ixfe>>8&63]),gf(G,t,r.opts.Date1904),re({c:Te.c,r:Te.r},G,t));break;case 190:if(t.sheetStubs)for(var Gr=Te.c;Gr<=Te.C;++Gr){var wi=Te.ixfe[Gr-Te.c];G={ixfe:wi,XF:X[wi],t:"z"},ee>0&&(G.z=fe[G.ixfe>>8&63]),gf(G,t,r.opts.Date1904),re({c:Gr,r:Te.r},G,t)}break;case 214:case 516:case 4:G=Ky(Te.val,Te.ixfe,"s"),G.XF=X[G.ixfe],ee>0&&(G.z=fe[G.ixfe>>8&63]),gf(G,t,r.opts.Date1904),re({c:Te.c,r:Te.r},G,t);break;case 0:case 512:tt===1&&(c=Te);break;case 252:d=Te;break;case 1054:if(W.biff==4){fe[ee++]=Te[1];for(var Bi=0;Bi<ee+163&&fn[Bi]!=Te[1];++Bi);Bi>=163&&p0(Te[1],ee+163)}else p0(Te[1],Te[0]);break;case 30:{fe[ee++]=Te;for(var Zr=0;Zr<ee+163&&fn[Zr]!=Te;++Zr);Zr>=163&&p0(Te,ee+163)}break;case 229:Ee=Ee.concat(Te);break;case 93:Ne[Te.cmo[0]]=W.lastobj=Te;break;case 438:W.lastobj.TxO=Te;break;case 127:W.lastobj.ImData=Te;break;case 440:for(R=Te[0].s.r;R<=Te[0].e.r;++R)for(I=Te[0].s.c;I<=Te[0].e.c;++I)B=t.dense?(n[R]||[])[I]:n[an({c:I,r:R})],B&&(B.l=Te[1]);break;case 2048:for(R=Te[0].s.r;R<=Te[0].e.r;++R)for(I=Te[0].s.c;I<=Te[0].e.c;++I)B=t.dense?(n[R]||[])[I]:n[an({c:I,r:R})],B&&B.l&&(B.l.Tooltip=Te[1]);break;case 28:{if(W.biff<=5&&W.biff>=2)break;B=t.dense?(n[Te[0].r]||[])[Te[0].c]:n[an(Te[0])];var Xr=Ne[Te[2]];B||(t.dense?(n[Te[0].r]||(n[Te[0].r]=[]),B=n[Te[0].r][Te[0].c]={t:"z"}):B=n[an(Te[0])]={t:"z"},c.e.r=Math.max(c.e.r,Te[0].r),c.s.r=Math.min(c.s.r,Te[0].r),c.e.c=Math.max(c.e.c,Te[0].c),c.s.c=Math.min(c.s.c,Te[0].c)),B.c||(B.c=[]),M={a:Te[1],t:Xr.TxO.t},B.c.push(M)}break;case 2173:zre(X[Te.ixfe],Te.ext);break;case 125:{if(!W.cellStyles)break;for(;Te.e>=Te.s;)ge[Te.e--]={width:Te.w/256,level:Te.level||0,hidden:!!(Te.flags&1)},Ye||(Ye=!0,FB(Te.w/256)),og(ge[Te.e+1])}break;case 520:{var $r={};Te.level!=null&&(Pe[Te.r]=$r,$r.level=Te.level),Te.hidden&&(Pe[Te.r]=$r,$r.hidden=!0),Te.hpt&&(Pe[Te.r]=$r,$r.hpt=Te.hpt,$r.hpx=Iv(Te.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||lv(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[rt]]=Te;break;case 161:n["!margins"]||lv(n["!margins"]={}),n["!margins"].header=Te.header,n["!margins"].footer=Te.footer;break;case 574:Te.RTL&&(ae.Views[0].RTL=!0);break;case 146:le=Te;break;case 2198:de=Te;break;case 140:Z=Te;break;case 442:g?ce.CodeName=Te||ce.name:ae.WBProps.CodeName=Te||"ThisWorkbook";break}}else dt||console.error("Missing Info for XLS Record 0x"+rt.toString(16)),e.l+=gt}return r.SheetNames=Ef(a).sort(function(ot,xe){return Number(ot)-Number(xe)}).map(function(ot){return a[ot].name}),t.bookSheets||(r.Sheets=i),!r.SheetNames.length&&x["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=x)):r.Preamble=x,r.Sheets&&pe.forEach(function(ot,xe){r.Sheets[r.SheetNames[xe]]["!autofilter"]=ot}),r.Strings=d,r.SSF=mc(fn),W.enc&&(r.Encryption=W.enc),de&&(r.Themes=de),r.Metadata={},Z!==void 0&&(r.Metadata.Country=Z),Me.names.length>0&&(ae.Names=Me.names),r.Workbook=ae,r}var mF={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function _ae(e,t,r){var i=$n.find(e,"/!DocumentSummaryInformation");if(i&&i.size>0)try{var n=JT(i,UJ,mF.DSI);for(var a in n)t[a]=n[a]}catch(g){if(r.WTF)throw g}var c=$n.find(e,"/!SummaryInformation");if(c&&c.size>0)try{var s=JT(c,jJ,mF.SI);for(var d in s)t[d]==null&&(t[d]=s[d])}catch(g){if(r.WTF)throw g}t.HeadingPairs&&t.TitlesOfParts&&(OI(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function wL(e,t){t||(t={}),MB(t),Y8(),t.codepage&&AB(t.codepage);var r,i;if(e.FullPaths){if($n.find(e,"/encryption"))throw new Error("File is password-protected");r=$n.find(e,"!CompObj"),i=$n.find(e,"/Workbook")||$n.find(e,"/Book")}else{switch(t.type){case"base64":e=jA(kh(e));break;case"binary":e=jA(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}fc(e,0),i={content:e}}var n,a;if(r&&gae(r),t.bookProps&&!t.bookSheets)n={};else{var c=qn?"buffer":"array";if(i&&i.content)n=yae(i.content,t);else if((a=$n.find(e,"PerfectOffice_MAIN"))&&a.content)n=av.to_workbook(a.content,(t.type=c,t));else if((a=$n.find(e,"NativeContent_MAIN"))&&a.content)n=av.to_workbook(a.content,(t.type=c,t));else throw(a=$n.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&$n.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=aie(e))}var s={};return e.FullPaths&&_ae(e,s,t),n.Props=n.Custprops=s,t.bookFiles&&(n.cfb=e),n}var t2={0:{f:rse},1:{f:ase},2:{f:pse},3:{f:use},4:{f:lse},5:{f:dse},6:{f:vse},7:{f:Ase},8:{f:wse},9:{f:bse},10:{f:yse},11:{f:_se},12:{f:ose},13:{f:mse},14:{f:hse},15:{f:cse},16:{f:vL},17:{f:xse},18:{f:fse},19:{f:wB},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Xse},40:{},42:{},43:{f:yre},44:{f:xre},45:{f:_re},46:{f:wre},47:{f:bre},48:{},49:{f:BJ},50:{},51:{f:Vre},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:YI},62:{f:gse},63:{f:$re},64:{f:Ise},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:tu,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Nse},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:sse},148:{f:ise,p:16},151:{f:Sse},152:{},153:{f:Wse},154:{},155:{},156:{f:Kse},157:{},158:{},159:{T:1,f:jte},160:{T:-1},161:{T:1,f:I0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Bse},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Hre},336:{T:-1},337:{f:Gre,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:J5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:ZI},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Ese},427:{f:Tse},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:kse},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:nse},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Cse},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:J5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:iie},633:{T:1},634:{T:-1},635:{T:1,f:rie},636:{T:-1},637:{f:SJ},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Use},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Lse},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},n4={6:{f:Lw},10:{f:Jd},12:{f:qo},13:{f:qo},14:{f:wo},15:{f:wo},16:{f:$c},17:{f:wo},18:{f:wo},19:{f:qo},20:{f:iF},21:{f:iF},23:{f:ZI},24:{f:sF},25:{f:wo},26:{},27:{},28:{f:ete},29:{},34:{f:wo},35:{f:nF},38:{f:$c},39:{f:$c},40:{f:$c},41:{f:$c},42:{f:wo},43:{f:wo},47:{f:nre},49:{f:Pee},51:{f:qo},60:{},61:{f:Iee},64:{f:wo},65:{f:Mee},66:{f:qo},77:{},80:{},81:{},82:{},85:{f:qo},89:{},90:{},91:{},92:{f:Bee},93:{f:rte},94:{},95:{f:wo},96:{},97:{},99:{f:wo},125:{f:YI},128:{f:Gee},129:{f:Cee},130:{f:qo},131:{f:wo},132:{f:wo},133:{f:See},134:{},140:{f:lte},141:{f:qo},144:{},146:{f:ute},151:{},152:{},153:{},154:{},155:{},156:{f:qo},157:{},158:{},160:{f:pte},161:{f:Ate},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Qee},190:{f:zee},193:{f:Jd},197:{},198:{},199:{},200:{},201:{},202:{f:wo},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:qo},220:{},221:{f:wo},222:{},224:{f:Vee},225:{f:wee},226:{f:Jd},227:{},229:{f:tte},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Eee},253:{f:Dee},255:{f:Tee},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:GI},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:wo},353:{f:Jd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Kee},431:{f:wo},432:{},433:{},434:{},437:{},438:{f:ste},439:{f:wo},440:{f:ate},441:{},442:{f:Zv},443:{},444:{f:qo},445:{},446:{},448:{f:Jd},449:{f:Nee,r:2},450:{f:Jd},512:{f:tF},513:{f:dte},515:{f:qee},516:{f:Ree},517:{f:rF},519:{f:mte},520:{f:Fee},523:{},545:{f:aF},549:{f:eF},566:{},574:{f:Lee},638:{f:Oee},659:{},1048:{},1054:{f:Uee},1084:{},1212:{f:Zee},2048:{f:ote},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Vy},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Jd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:hte,r:12},2173:{f:Qre,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:wo,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Xee,r:12},2197:{},2198:{f:Pre,r:12},2199:{},2200:{},2201:{},2202:{f:Yee,r:12},2203:{f:Jd},2204:{},2205:{},2206:{},2207:{},2211:{f:kee},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:qo},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:fte},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:cte},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:tF},1:{},2:{f:yte},3:{f:xte},4:{f:vte},5:{f:rF},7:{f:_te},8:{},9:{f:Vy},11:{},22:{f:qo},30:{f:jee},31:{},32:{},33:{f:aF},36:{},37:{f:eF},50:{f:bte},62:{},52:{},67:{},68:{f:qo},69:{},86:{},126:{},127:{f:gte},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:wte},223:{},234:{},354:{},421:{},518:{f:Lw},521:{f:Vy},536:{f:sF},547:{f:nF},561:{},579:{},1030:{f:Lw},1033:{f:Vy},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function DA(e,t,r,i){var n=t;if(!isNaN(n)){var a=(r||[]).length||0,c=e.next(4);c.write_shift(2,n),c.write_shift(2,a),a>0&&II(r)&&e.push(r)}}function gF(e,t){var r=t||{},i=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var n=e.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),c=n.index,s=a&&a.index||e.length,d=qY(e.slice(c,s),/(:?<tr[^>]*>)/i,"<tr>"),g=-1,x=0,C=0,N=0,B={s:{r:1e7,c:1e7},e:{r:0,c:0}},M=[];for(c=0;c<d.length;++c){var I=d[c].trim(),R=I.slice(0,3).toLowerCase();if(R=="<tr"){if(++g,r.sheetRows&&r.sheetRows<=g){--g;break}x=0;continue}if(!(R!="<td"&&R!="<th")){var D=I.split(/<\/t[dh]>/i);for(s=0;s<D.length;++s){var V=D[s].trim();if(V.match(/<t[dh]/i)){for(var G=V,Z=0;G.charAt(0)=="<"&&(Z=G.indexOf(">"))>-1;)G=G.slice(Z+1);for(var X=0;X<M.length;++X){var le=M[X];le.s.c==x&&le.s.r<g&&g<=le.e.r&&(x=le.e.c+1,X=-1)}var ae=Zi(V.slice(0,V.indexOf(">")));N=ae.colspan?+ae.colspan:1,((C=+ae.rowspan)>1||N>1)&&M.push({s:{r:g,c:x},e:{r:g+(C||1)-1,c:x+N-1}});var ce=ae.t||ae["data-t"]||"";if(!G.length){x+=N;continue}if(G=xI(G),B.s.r>g&&(B.s.r=g),B.e.r<g&&(B.e.r=g),B.s.c>x&&(B.s.c=x),B.e.c<x&&(B.e.c=x),!G.length){x+=N;continue}var se={t:"s",v:G};r.raw||!G.trim().length||ce=="s"||(G==="TRUE"?se={t:"b",v:!0}:G==="FALSE"?se={t:"b",v:!1}:isNaN(zA(G))?isNaN(ag(G).getDate())||(se={t:"d",v:Kl(G)},r.cellDates||(se={t:"n",v:Su(se.v)}),se.z=r.dateNF||fn[14]):se={t:"n",v:zA(G)}),r.dense?(i[g]||(i[g]=[]),i[g][x]=se):i[an({r:g,c:x})]=se,x+=N}}}}return i["!ref"]=Xn(B),M.length&&(i["!merges"]=M),i}function bae(e,t,r,i){for(var n=e["!merges"]||[],a=[],c=t.s.c;c<=t.e.c;++c){for(var s=0,d=0,g=0;g<n.length;++g)if(!(n[g].s.r>r||n[g].s.c>c)&&!(n[g].e.r<r||n[g].e.c<c)){if(n[g].s.r<r||n[g].s.c<c){s=-1;break}s=n[g].e.r-n[g].s.r+1,d=n[g].e.c-n[g].s.c+1;break}if(!(s<0)){var x=an({r,c}),C=i.dense?(e[r]||[])[c]:e[x],N=C&&C.v!=null&&(C.h||vB(C.w||(_d(C),C.w)||""))||"",B={};s>1&&(B.rowspan=s),d>1&&(B.colspan=d),i.editable?N='<span contenteditable="true">'+N+"</span>":C&&(B["data-t"]=C&&C.t||"z",C.v!=null&&(B["data-v"]=C.v),C.z!=null&&(B["data-z"]=C.z),C.l&&(C.l.Target||"#").charAt(0)!="#"&&(N='<a href="'+C.l.Target+'">'+N+"</a>")),B.id=(i.id||"sjs")+"-"+x,a.push(lJ("td",N,B))}}var M="<tr>";return M+a.join("")+"</tr>"}var wae='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Bae="</body></html>";function Cae(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Cp(gF(r[0],t),t);var i=DB();return r.forEach(function(n,a){RB(i,gF(n,t),"Sheet"+(a+1))}),i}function Sae(e,t,r){var i=[];return i.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Eae(e,t){var r=t||{},i=r.header!=null?r.header:wae,n=r.footer!=null?r.footer:Bae,a=[i],c=yg(e["!ref"]);r.dense=Array.isArray(e),a.push(Sae(e,c,r));for(var s=c.s.r;s<=c.e.r;++s)a.push(bae(e,c,s,r));return a.push("</table>"+n),a.join("")}function BL(e,t,r){var i=r||{},n=0,a=0;if(i.origin!=null)if(typeof i.origin=="number")n=i.origin;else{var c=typeof i.origin=="string"?Bu(i.origin):i.origin;n=c.r,a=c.c}var s=t.getElementsByTagName("tr"),d=Math.min(i.sheetRows||1e7,s.length),g={s:{r:0,c:0},e:{r:n,c:a}};if(e["!ref"]){var x=yg(e["!ref"]);g.s.r=Math.min(g.s.r,x.s.r),g.s.c=Math.min(g.s.c,x.s.c),g.e.r=Math.max(g.e.r,x.e.r),g.e.c=Math.max(g.e.c,x.e.c),n==-1&&(g.e.r=n=x.e.r+1)}var C=[],N=0,B=e["!rows"]||(e["!rows"]=[]),M=0,I=0,R=0,D=0,V=0,G=0;for(e["!cols"]||(e["!cols"]=[]);M<s.length&&I<d;++M){var Z=s[M];if(vF(Z)){if(i.display)continue;B[I]={hidden:!0}}var X=Z.children;for(R=D=0;R<X.length;++R){var le=X[R];if(!(i.display&&vF(le))){var ae=le.hasAttribute("data-v")?le.getAttribute("data-v"):le.hasAttribute("v")?le.getAttribute("v"):xI(le.innerHTML),ce=le.getAttribute("data-z")||le.getAttribute("z");for(N=0;N<C.length;++N){var se=C[N];se.s.c==D+a&&se.s.r<I+n&&I+n<=se.e.r&&(D=se.e.c+1-a,N=-1)}G=+le.getAttribute("colspan")||1,((V=+le.getAttribute("rowspan")||1)>1||G>1)&&C.push({s:{r:I+n,c:D+a},e:{r:I+n+(V||1)-1,c:D+a+(G||1)-1}});var ue={t:"s",v:ae},re=le.getAttribute("data-t")||le.getAttribute("t")||"";ae!=null&&(ae.length==0?ue.t=re||"z":i.raw||ae.trim().length==0||re=="s"||(ae==="TRUE"?ue={t:"b",v:!0}:ae==="FALSE"?ue={t:"b",v:!1}:isNaN(zA(ae))?isNaN(ag(ae).getDate())||(ue={t:"d",v:Kl(ae)},i.cellDates||(ue={t:"n",v:Su(ue.v)}),ue.z=i.dateNF||fn[14]):ue={t:"n",v:zA(ae)})),ue.z===void 0&&ce!=null&&(ue.z=ce);var W="",de=le.getElementsByTagName("A");if(de&&de.length)for(var Ee=0;Ee<de.length&&!(de[Ee].hasAttribute("href")&&(W=de[Ee].getAttribute("href"),W.charAt(0)!="#"));++Ee);W&&W.charAt(0)!="#"&&(ue.l={Target:W}),i.dense?(e[I+n]||(e[I+n]=[]),e[I+n][D+a]=ue):e[an({c:D+a,r:I+n})]=ue,g.e.c<D+a&&(g.e.c=D+a),D+=G}}++I}return C.length&&(e["!merges"]=(e["!merges"]||[]).concat(C)),g.e.r=Math.max(g.e.r,I-1+n),e["!ref"]=Xn(g),I>=d&&(e["!fullref"]=Xn((g.e.r=s.length-M+I-1+n,g))),e}function CL(e,t){var r=t||{},i=r.dense?[]:{};return BL(i,e,t)}function Tae(e,t){return Cp(CL(e,t),t)}function vF(e){var t="",r=Fae(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Fae(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function kae(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(i,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=ts(t.replace(/<[^>]*>/g,""));return[r]}var xF={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function SL(e,t){var r=t||{},i=xB(e),n=[],a,c,s={name:""},d="",g=0,x,C,N={},B=[],M=r.dense?[]:{},I,R,D={value:""},V="",G=0,Z=[],X=-1,le=-1,ae={s:{r:1e6,c:1e7},e:{r:0,c:0}},ce=0,se={},ue=[],re={},W=0,de=0,Ee=[],Ne=1,ge=1,Pe=[],Ye={Names:[]},Me={},De=["",""],tt=[],ee={},fe="",pe=0,we=!1,Le=!1,lt=0;for(Fv.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");I=Fv.exec(i);)switch(I[3]=I[3].replace(/_.*$/,"")){case"table":case"":I[1]==="/"?(ae.e.c>=ae.s.c&&ae.e.r>=ae.s.r?M["!ref"]=Xn(ae):M["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=ae.e.r&&(M["!fullref"]=M["!ref"],ae.e.r=r.sheetRows-1,M["!ref"]=Xn(ae)),ue.length&&(M["!merges"]=ue),Ee.length&&(M["!rows"]=Ee),x.name=x.||x.name,typeof JSON<"u"&&JSON.stringify(x),B.push(x.name),N[x.name]=M,Le=!1):I[0].charAt(I[0].length-2)!=="/"&&(x=Zi(I[0],!1),X=le=-1,ae.s.r=ae.s.c=1e7,ae.e.r=ae.e.c=0,M=r.dense?[]:{},ue=[],Ee=[],Le=!0);break;case"table-row-group":I[1]==="/"?--ce:++ce;break;case"table-row":case"":if(I[1]==="/"){X+=Ne,Ne=1;break}if(C=Zi(I[0],!1),C.?X=C.-1:X==-1&&(X=0),Ne=+C["number-rows-repeated"]||1,Ne<10)for(lt=0;lt<Ne;++lt)ce>0&&(Ee[X+lt]={level:ce});le=-1;break;case"covered-table-cell":I[1]!=="/"&&++le,r.sheetStubs&&(r.dense?(M[X]||(M[X]=[]),M[X][le]={t:"z"}):M[an({r:X,c:le})]={t:"z"}),V="",Z=[];break;case"table-cell":case"":if(I[0].charAt(I[0].length-2)==="/")++le,D=Zi(I[0],!1),ge=parseInt(D["number-columns-repeated"]||"1",10),R={t:"z",v:null},D.formula&&r.cellFormula!=!1&&(R.f=fF(ts(D.formula))),(D.||D["value-type"])=="string"&&(R.t="s",R.v=ts(D["string-value"]||""),r.dense?(M[X]||(M[X]=[]),M[X][le]=R):M[an({r:X,c:le})]=R),le+=ge-1;else if(I[1]!=="/"){++le,V="",G=0,Z=[],ge=1;var rt=Ne?X+Ne-1:X;if(le>ae.e.c&&(ae.e.c=le),le<ae.s.c&&(ae.s.c=le),X<ae.s.r&&(ae.s.r=X),rt>ae.e.r&&(ae.e.r=rt),D=Zi(I[0],!1),tt=[],ee={},R={t:D.||D["value-type"],v:null},r.cellFormula)if(D.formula&&(D.formula=ts(D.formula)),D["number-matrix-columns-spanned"]&&D["number-matrix-rows-spanned"]&&(W=parseInt(D["number-matrix-rows-spanned"],10)||0,de=parseInt(D["number-matrix-columns-spanned"],10)||0,re={s:{r:X,c:le},e:{r:X+W-1,c:le+de-1}},R.F=Xn(re),Pe.push([re,R.F])),D.formula)R.f=fF(D.formula);else for(lt=0;lt<Pe.length;++lt)X>=Pe[lt][0].s.r&&X<=Pe[lt][0].e.r&&le>=Pe[lt][0].s.c&&le<=Pe[lt][0].e.c&&(R.F=Pe[lt][1]);switch((D["number-columns-spanned"]||D["number-rows-spanned"])&&(W=parseInt(D["number-rows-spanned"],10)||0,de=parseInt(D["number-columns-spanned"],10)||0,re={s:{r:X,c:le},e:{r:X+W-1,c:le+de-1}},ue.push(re)),D["number-columns-repeated"]&&(ge=parseInt(D["number-columns-repeated"],10)),R.t){case"boolean":R.t="b",R.v=Ia(D["boolean-value"]);break;case"float":R.t="n",R.v=parseFloat(D.value);break;case"percentage":R.t="n",R.v=parseFloat(D.value);break;case"currency":R.t="n",R.v=parseFloat(D.value);break;case"date":R.t="d",R.v=Kl(D["date-value"]),r.cellDates||(R.t="n",R.v=Su(R.v)),R.z="m/d/yy";break;case"time":R.t="n",R.v=HY(D["time-value"])/86400,r.cellDates&&(R.t="d",R.v=P2(R.v)),R.z="HH:MM:SS";break;case"number":R.t="n",R.v=parseFloat(D.);break;default:if(R.t==="string"||R.t==="text"||!R.t)R.t="s",D["string-value"]!=null&&(V=ts(D["string-value"]),Z=[]);else throw new Error("Unsupported value type "+R.t)}}else{if(we=!1,R.t==="s"&&(R.v=V||"",Z.length&&(R.R=Z),we=G==0),Me.Target&&(R.l=Me),tt.length>0&&(R.c=tt,tt=[]),V&&r.cellText!==!1&&(R.w=V),we&&(R.t="z",delete R.v),(!we||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=X))for(var gt=0;gt<Ne;++gt){if(ge=parseInt(D["number-columns-repeated"]||"1",10),r.dense)for(M[X+gt]||(M[X+gt]=[]),M[X+gt][le]=gt==0?R:mc(R);--ge>0;)M[X+gt][le+ge]=mc(R);else for(M[an({r:X+gt,c:le})]=R;--ge>0;)M[an({r:X+gt,c:le+ge})]=mc(R);ae.e.c<=le&&(ae.e.c=le)}ge=parseInt(D["number-columns-repeated"]||"1",10),le+=ge-1,ge=0,R={},V="",Z=[]}Me={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(I[1]==="/"){if((a=n.pop())[0]!==I[3])throw"Bad state: "+a}else I[0].charAt(I[0].length-2)!=="/"&&n.push([I[3],!0]);break;case"annotation":if(I[1]==="/"){if((a=n.pop())[0]!==I[3])throw"Bad state: "+a;ee.t=V,Z.length&&(ee.R=Z),ee.a=fe,tt.push(ee)}else I[0].charAt(I[0].length-2)!=="/"&&n.push([I[3],!1]);fe="",pe=0,V="",G=0,Z=[];break;case"creator":I[1]==="/"?fe=i.slice(pe,I.index):pe=I.index+I[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(I[1]==="/"){if((a=n.pop())[0]!==I[3])throw"Bad state: "+a}else I[0].charAt(I[0].length-2)!=="/"&&n.push([I[3],!1]);V="",G=0,Z=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(I[1]==="/"){if(se[s.name]=d,(a=n.pop())[0]!==I[3])throw"Bad state: "+a}else I[0].charAt(I[0].length-2)!=="/"&&(d="",s=Zi(I[0],!1),n.push([I[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":c=Zi(I[0],!1),d+=xF[I[3]][c.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":c=Zi(I[0],!1),d+=xF[I[3]][c.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(I[0].slice(-2)==="/>")break;if(I[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":d+=i.slice(g,I.index);break}else g=I.index+I[0].length;break;case"named-range":c=Zi(I[0],!1),De=Mw(c["cell-range-address"]);var dt={Name:c.name,Ref:De[0]+"!"+De[1]};Le&&(dt.Sheet=B.length),Ye.Names.push(dt);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(I[1]==="/"&&(!D||!D["string-value"])){var qt=kae(i.slice(G,I.index));V=(V.length>0?V+`
`:"")+qt[0]}else Zi(I[0],!1),G=I.index+I[0].length;break;case"s":break;case"database-range":if(I[1]==="/")break;try{De=Mw(Zi(I[0])["target-range-address"]),N[De[0]]["!autofilter"]={ref:De[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(I[1]!=="/"){if(Me=Zi(I[0],!1),!Me.href)break;Me.Target=ts(Me.href),delete Me.href,Me.Target.charAt(0)=="#"&&Me.Target.indexOf(".")>-1?(De=Mw(Me.Target.slice(1)),Me.Target="#"+De[0]+"!"+De[1]):Me.Target.match(/^\.\.[\\\/]/)&&(Me.Target=Me.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(I[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(I)}}var Te={Sheets:N,SheetNames:B,Workbook:Ye};return r.bookSheets&&delete Te.Sheets,Te}function yF(e,t){t=t||{},Yh(e,"META-INF/manifest.xml")&&qJ(Go(e,"META-INF/manifest.xml"),t);var r=Th(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var i=SL(ha(r),t);return Yh(e,"meta.xml")&&(i.Props=jI(Go(e,"meta.xml"))),i}function _F(e,t){return SL(e,t)}function IB(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function s4(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ha(k0(e))}function a4(e){var t=e.reduce(function(n,a){return n+a.length},0),r=new Uint8Array(t),i=0;return e.forEach(function(n){r.set(n,i),i+=n.length}),r}function bF(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Nae(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,i=e[t+14]&1,n=t+13;n>=t;--n)i=i*256+e[n];return(e[t+15]&128?-i:i)*Math.pow(10,r-6176)}function Lv(e,t){var r=t?t[0]:0,i=e[r]&127;e:if(e[r++]>=128&&(i|=(e[r]&127)<<7,e[r++]<128||(i|=(e[r]&127)<<14,e[r++]<128)||(i|=(e[r]&127)<<21,e[r++]<128)||(i+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(i+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(i+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),i}function xl(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Yc(e){for(var t=[],r=[0];r[0]<e.length;){var i=r[0],n=Lv(e,r),a=n&7;n=Math.floor(n/8);var c=0,s;if(n==0)break;switch(a){case 0:{for(var d=r[0];e[r[0]++]>=128;);s=e.slice(d,r[0])}break;case 5:c=4,s=e.slice(r[0],r[0]+c),r[0]+=c;break;case 1:c=8,s=e.slice(r[0],r[0]+c),r[0]+=c;break;case 2:c=Lv(e,r),s=e.slice(r[0],r[0]+c),r[0]+=c;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(n," at offset ").concat(i))}var g={data:s,type:a};t[n]==null?t[n]=[g]:t[n].push(g)}return t}function LB(e,t){return e?.map(function(r){return t(r.data)})||[]}function Iae(e){for(var t,r=[],i=[0];i[0]<e.length;){var n=Lv(e,i),a=Yc(e.slice(i[0],i[0]+n));i[0]+=n;var c={id:xl(a[1][0].data),messages:[]};a[2].forEach(function(s){var d=Yc(s.data),g=xl(d[3][0].data);c.messages.push({meta:d,data:e.slice(i[0],i[0]+g)}),i[0]+=g}),(t=a[3])!=null&&t[0]&&(c.merge=xl(a[3][0].data)>>>0>0),r.push(c)}return r}function Lae(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],i=Lv(t,r),n=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var c=t[r[0]++]>>2;if(c<60)++c;else{var s=c-59;c=t[r[0]],s>1&&(c|=t[r[0]+1]<<8),s>2&&(c|=t[r[0]+2]<<16),s>3&&(c|=t[r[0]+3]<<24),c>>>=0,c++,r[0]+=s}n.push(t.slice(r[0],r[0]+c)),r[0]+=c;continue}else{var d=0,g=0;if(a==1?(g=(t[r[0]]>>2&7)+4,d=(t[r[0]++]&224)<<3,d|=t[r[0]++]):(g=(t[r[0]++]>>2)+1,a==2?(d=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(d=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),n=[a4(n)],d==0)throw new Error("Invalid offset 0");if(d>n[0].length)throw new Error("Invalid offset beyond length");if(g>=d)for(n.push(n[0].slice(-d)),g-=d;g>=n[n.length-1].length;)n.push(n[n.length-1]),g-=n[n.length-1].length;n.push(n[0].slice(-d,-d+g))}}var x=a4(n);if(x.length!=i)throw new Error("Unexpected length: ".concat(x.length," != ").concat(i));return x}function Mae(e){for(var t=[],r=0;r<e.length;){var i=e[r++],n=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Lae(i,e.slice(r,r+n))),r+=n}if(r!==e.length)throw new Error("data is not a valid framed stream!");return a4(t)}function Pae(e,t,r,i){var n=IB(e),a=n.getUint32(4,!0),c=(i>1?12:8)+bF(a&(i>1?3470:398))*4,s=-1,d=-1,g=NaN,x=new Date(2001,0,1);a&512&&(s=n.getUint32(c,!0),c+=4),c+=bF(a&(i>1?12288:4096))*4,a&16&&(d=n.getUint32(c,!0),c+=4),a&32&&(g=n.getFloat64(c,!0),c+=8),a&64&&(x.setTime(x.getTime()+n.getFloat64(c,!0)*1e3),c+=8);var C;switch(e[2]){case 0:break;case 2:C={t:"n",v:g};break;case 3:C={t:"s",v:t[d]};break;case 5:C={t:"d",v:x};break;case 6:C={t:"b",v:g>0};break;case 7:C={t:"n",v:g/86400};break;case 8:C={t:"e",v:0};break;case 9:if(s>-1)C={t:"s",v:r[s]};else if(d>-1)C={t:"s",v:t[d]};else if(!isNaN(g))C={t:"n",v:g};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return C}function Dae(e,t,r){var i=IB(e),n=i.getUint32(8,!0),a=12,c=-1,s=-1,d=NaN,g=NaN,x=new Date(2001,0,1);n&1&&(d=Nae(e,a),a+=16),n&2&&(g=i.getFloat64(a,!0),a+=8),n&4&&(x.setTime(x.getTime()+i.getFloat64(a,!0)*1e3),a+=8),n&8&&(s=i.getUint32(a,!0),a+=4),n&16&&(c=i.getUint32(a,!0),a+=4);var C;switch(e[1]){case 0:break;case 2:C={t:"n",v:d};break;case 3:C={t:"s",v:t[s]};break;case 5:C={t:"d",v:x};break;case 6:C={t:"b",v:g>0};break;case 7:C={t:"n",v:g/86400};break;case 8:C={t:"e",v:0};break;case 9:if(c>-1)C={t:"s",v:r[c]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)));break;case 10:C={t:"n",v:d};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)))}return C}function Rae(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Pae(e,t,r,e[0]);case 5:return Dae(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function vp(e){var t=Yc(e);return Lv(t[1][0].data)}function wF(e,t){var r=Yc(t.data),i=xl(r[1][0].data),n=r[3],a=[];return(n||[]).forEach(function(c){var s=Yc(c.data),d=xl(s[1][0].data)>>>0;switch(i){case 1:a[d]=s4(s[3][0].data);break;case 8:{var g=e[vp(s[9][0].data)][0],x=Yc(g.data),C=e[vp(x[1][0].data)][0],N=xl(C.meta[1][0].data);if(N!=2001)throw new Error("2000 unexpected reference to ".concat(N));var B=Yc(C.data);a[d]=B[3].map(function(M){return s4(M.data)}).join("")}break}}),a}function Uae(e,t){var r,i,n,a,c,s,d,g,x,C,N,B,M,I,R=Yc(e),D=xl(R[1][0].data)>>>0,V=xl(R[2][0].data)>>>0,G=((i=(r=R[8])==null?void 0:r[0])==null?void 0:i.data)&&xl(R[8][0].data)>0||!1,Z,X;if((a=(n=R[7])==null?void 0:n[0])!=null&&a.data&&t!=0)Z=(s=(c=R[7])==null?void 0:c[0])==null?void 0:s.data,X=(g=(d=R[6])==null?void 0:d[0])==null?void 0:g.data;else if((C=(x=R[4])==null?void 0:x[0])!=null&&C.data&&t!=1)Z=(B=(N=R[4])==null?void 0:N[0])==null?void 0:B.data,X=(I=(M=R[3])==null?void 0:M[0])==null?void 0:I.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var le=G?4:1,ae=IB(Z),ce=[],se=0;se<Z.length/2;++se){var ue=ae.getUint16(se*2,!0);ue<65535&&ce.push([se,ue])}if(ce.length!=V)throw"Expected ".concat(V," cells, found ").concat(ce.length);var re=[];for(se=0;se<ce.length-1;++se)re[ce[se][0]]=X.subarray(ce[se][1]*le,ce[se+1][1]*le);return ce.length>=1&&(re[ce[ce.length-1][0]]=X.subarray(ce[ce.length-1][1]*le)),{R:D,cells:re}}function jae(e,t){var r,i=Yc(t.data),n=(r=i?.[7])!=null&&r[0]?xl(i[7][0].data)>>>0>0?1:0:-1,a=LB(i[5],function(c){return Uae(c,n)});return{nrows:xl(i[4][0].data)>>>0,data:a.reduce(function(c,s){return c[s.R]||(c[s.R]=[]),s.cells.forEach(function(d,g){if(c[s.R][g])throw new Error("Duplicate cell r=".concat(s.R," c=").concat(g));c[s.R][g]=d}),c},[])}}function Oae(e,t,r){var i,n=Yc(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(xl(n[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(a.e.c=(xl(n[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=Xn(a);var c=Yc(n[4][0].data),s=wF(e,e[vp(c[4][0].data)][0]),d=(i=c[17])!=null&&i[0]?wF(e,e[vp(c[17][0].data)][0]):[],g=Yc(c[3][0].data),x=0;g[1].forEach(function(C){var N=Yc(C.data),B=e[vp(N[2][0].data)][0],M=xl(B.meta[1][0].data);if(M!=6002)throw new Error("6001 unexpected reference to ".concat(M));var I=jae(e,B);I.data.forEach(function(R,D){R.forEach(function(V,G){var Z=an({r:x+D,c:G}),X=Rae(V,s,d);X&&(r[Z]=X)})}),x+=I.nrows})}function Qae(e,t){var r=Yc(t.data),i={"!ref":"A1"},n=e[vp(r[2][0].data)],a=xl(n[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return Oae(e,n[0],i),i}function zae(e,t){var r,i=Yc(t.data),n={name:(r=i[1])!=null&&r[0]?s4(i[1][0].data):"",sheets:[]},a=LB(i[2],vp);return a.forEach(function(c){e[c].forEach(function(s){var d=xl(s.meta[1][0].data);d==6e3&&n.sheets.push(Qae(e,s))})}),n}function Hae(e,t){var r=DB(),i=Yc(t.data),n=LB(i[1],vp);if(n.forEach(function(a){e[a].forEach(function(c){var s=xl(c.meta[1][0].data);if(s==2){var d=zae(e,c);d.sheets.forEach(function(g,x){RB(r,g,x==0?d.name:d.name+"_"+x,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Dw(e){var t,r,i,n,a={},c=[];if(e.FullPaths.forEach(function(d){if(d.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(d){if(d.name.match(/\.iwa$/)){var g;try{g=Mae(d.content)}catch(C){return console.log("?? "+d.content.length+" "+(C.message||C))}var x;try{x=Iae(g)}catch(C){return console.log("## "+(C.message||C))}x.forEach(function(C){a[C.id]=C.messages,c.push(C.id)})}}),!c.length)throw new Error("File has no messages");var s=((n=(i=(r=(t=a?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:i[1])==null?void 0:n[0].data)&&xl(a[1][0].meta[1][0].data)==1&&a[1][0];if(s||c.forEach(function(d){a[d].forEach(function(g){var x=xl(g.meta[1][0].data)>>>0;if(x==1)if(!s)s=g;else throw new Error("Document has multiple roots")})}),!s)throw new Error("Cannot find Document root");return Hae(a,s)}function Vae(e){return function(r){for(var i=0;i!=e.length;++i){var n=e[i];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function MB(e){Vae([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function Gae(e){return jm.WS.indexOf(e)>-1?"sheet":e==jm.CS?"chart":e==jm.DS?"dialog":e==jm.MS?"macro":e&&e.length?e:"sheet"}function qae(e,t){if(!e)return 0;try{e=t.map(function(i){return i.id||(i.id=i.strRelID),[i.name,e["!id"][i.id].Target,Gae(e["!id"][i.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Kae(e,t,r,i,n,a,c,s,d,g,x,C){try{a[i]=nv(Th(e,r,!0),t);var N=Go(e,t),B;switch(s){case"sheet":B=Jse(N,t,n,d,a[i],g,x,C);break;case"chart":if(B=eae(N,t,n,d,a[i],g,x,C),!B||!B["!drawel"])break;var M=Q1(B["!drawel"].Target,t),I=e4(M),R=Yre(Th(e,M,!0),nv(Th(e,I,!0),M)),D=Q1(R,M),V=e4(D);B=Dse(Th(e,D,!0),D,d,nv(Th(e,V,!0),D),g,B);break;case"macro":B=tae(N,t,n,d,a[i],g,x,C);break;case"dialog":B=rae(N,t,n,d,a[i],g,x,C);break;default:throw new Error("Unrecognized sheet type "+s)}c[i]=B;var G=[];a&&a[i]&&Ef(a[i]).forEach(function(Z){var X="";if(a[i][Z].Type==jm.CMNT){X=Q1(a[i][Z].Target,t);var le=aae(Go(e,X,!0),X,d);if(!le||!le.length)return;lF(B,le,!1)}a[i][Z].Type==jm.TCMNT&&(X=Q1(a[i][Z].Target,t),G=G.concat(eie(Go(e,X,!0),d)))}),G&&G.length&&lF(B,G,!0,d.people||[])}catch(Z){if(d.WTF)throw Z}}function $h(e){return e.charAt(0)=="/"?e.slice(1):e}function Wae(e,t){if(uI(),t=t||{},MB(t),Yh(e,"META-INF/manifest.xml")||Yh(e,"objectdata.xml"))return yF(e,t);if(Yh(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Dw<"u"){if(e.FileIndex)return Dw(e);var r=$n.utils.cfb_new();return PT(e).forEach(function(Ee){$Y(r,Ee,WY(e,Ee))}),Dw(r)}throw new Error("Unsupported NUMBERS file")}if(!Yh(e,"[Content_Types].xml"))throw Yh(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Yh(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var i=PT(e),n=VJ(Th(e,"[Content_Types].xml")),a=!1,c,s;if(n.workbooks.length===0&&(s="xl/workbook.xml",Go(e,s,!0)&&n.workbooks.push(s)),n.workbooks.length===0){if(s="xl/workbook.bin",!Go(e,s,!0))throw new Error("Could not find workbook");n.workbooks.push(s),a=!0}n.workbooks[0].slice(-3)=="bin"&&(a=!0);var d={},g={};if(!t.bookSheets&&!t.bookProps){if(ov=[],n.sst)try{ov=sae(Go(e,$h(n.sst)),n.sst,t)}catch(Ee){if(t.WTF)throw Ee}t.cellStyles&&n.themes.length&&(d=nae(Th(e,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],t)),n.style&&(g=iae(Go(e,$h(n.style)),n.style,d,t))}n.links.map(function(Ee){try{var Ne=nv(Th(e,e4($h(Ee))),Ee);return lae(Go(e,$h(Ee)),Ne,Ee,t)}catch{}});var x=Yse(Go(e,$h(n.workbooks[0])),n.workbooks[0],t),C={},N="";n.coreprops.length&&(N=Go(e,$h(n.coreprops[0]),!0),N&&(C=jI(N)),n.extprops.length!==0&&(N=Go(e,$h(n.extprops[0]),!0),N&&$J(N,C,t)));var B={};(!t.bookSheets||t.bookProps)&&n.custprops.length!==0&&(N=Th(e,$h(n.custprops[0]),!0),N&&(B=ZJ(N,t)));var M={};if((t.bookSheets||t.bookProps)&&(x.Sheets?c=x.Sheets.map(function(Ne){return Ne.name}):C.Worksheets&&C.SheetNames.length>0&&(c=C.SheetNames),t.bookProps&&(M.Props=C,M.Custprops=B),t.bookSheets&&typeof c<"u"&&(M.SheetNames=c),t.bookSheets?M.SheetNames:t.bookProps))return M;c={};var I={};t.bookDeps&&n.calcchain&&(I=oae(Go(e,$h(n.calcchain)),n.calcchain));var R=0,D={},V,G;{var Z=x.Sheets;C.Worksheets=Z.length,C.SheetNames=[];for(var X=0;X!=Z.length;++X)C.SheetNames[X]=Z[X].name}var le=a?"bin":"xml",ae=n.workbooks[0].lastIndexOf("/"),ce=(n.workbooks[0].slice(0,ae+1)+"_rels/"+n.workbooks[0].slice(ae+1)+".rels").replace(/^\//,"");Yh(e,ce)||(ce="xl/_rels/workbook."+le+".rels");var se=nv(Th(e,ce,!0),ce.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(t.xlmeta=cae(Go(e,$h(n.metadata[0])),n.metadata[0],t)),(n.people||[]).length>=1&&(t.people=tie(Go(e,$h(n.people[0])),t)),se&&(se=qae(se,x.Sheets));var ue=Go(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(R=0;R!=C.Worksheets;++R){var re="sheet";if(se&&se[R]?(V="xl/"+se[R][1].replace(/[\/]?xl\//,""),Yh(e,V)||(V=se[R][1]),Yh(e,V)||(V=ce.replace(/_rels\/.*$/,"")+se[R][1]),re=se[R][2]):(V="xl/worksheets/sheet"+(R+1-ue)+"."+le,V=V.replace(/sheet0\./,"sheet.")),G=V.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(R!=t.sheets)continue e;break;case"string":if(C.SheetNames[R].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var W=!1,de=0;de!=t.sheets.length;++de)typeof t.sheets[de]=="number"&&t.sheets[de]==R&&(W=1),typeof t.sheets[de]=="string"&&t.sheets[de].toLowerCase()==C.SheetNames[R].toLowerCase()&&(W=1);if(!W)continue e}}Kae(e,V,G,C.SheetNames[R],R,D,c,re,t,x,d,g)}return M={Directory:n,Workbook:x,Props:C,Custprops:B,Deps:I,Sheets:c,SheetNames:C.SheetNames,Strings:ov,Styles:g,Themes:d,SSF:mc(fn)},t&&t.bookFiles&&(e.files?(M.keys=i,M.files=e.files):(M.keys=[],M.files={},e.FullPaths.forEach(function(Ee,Ne){Ee=Ee.replace(/^Root Entry[\/]/,""),M.keys.push(Ee),M.files[Ee]=e.FileIndex[Ne]}))),t&&t.bookVBA&&(n.vba.length>0?M.vbaraw=Go(e,$h(n.vba[0]),!0):n.defaults&&n.defaults.bin===sie&&(M.vbaraw=Go(e,"xl/vbaProject.bin",!0))),M}function $ae(e,t){var r=t||{},i="Workbook",n=$n.find(e,i);try{if(i="/!DataSpaces/Version",n=$n.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(Qte(n.content),i="/!DataSpaces/DataSpaceMap",n=$n.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);var a=Hte(n.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=$n.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);var c=Vte(n.content);if(c.length!=1||c[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=$n.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);qte(n.content)}catch{}if(i="/EncryptionInfo",n=$n.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);var s=Kte(n.content);if(i="/EncryptedPackage",n=$n.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(s[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(s[1],n.content,r.password||"",r);if(s[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(s[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function PB(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=kh(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Xae(e,t){return $n.find(e,"EncryptedPackage")?$ae(e,t):wL(e,t)}function Zae(e,t){var r,i=e,n=t||{};return n.type||(n.type=qn&&Buffer.isBuffer(e)?"buffer":"base64"),r=mI(i,n),Wae(r,n)}function EL(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return i4(e.slice(r),t);default:break e}return kv.to_workbook(e,t)}function Yae(e,t){var r="",i=PB(e,t);switch(t.type){case"base64":r=kh(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=B0(e);break;default:throw new Error("Unrecognized type "+t.type)}return i[0]==239&&i[1]==187&&i[2]==191&&(r=ha(r)),t.type="binary",EL(r,t)}function Jae(e,t){var r=e;return t.type=="base64"&&(r=kh(r)),r=Sv.utils.decode(1200,r.slice(2),"str"),t.type="binary",EL(r,t)}function eoe(e){return e.match(/[^\x00-\x7F]/)?z1(e):e}function Rw(e,t,r,i){return i?(r.type="string",kv.to_workbook(e,r)):kv.to_workbook(t,r)}function o4(e,t){Y8();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return o4(new Uint8Array(e),(r=mc(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var i=e,n=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Jm={},r.dateNF&&(Jm.dateNF=r.dateNF),r.type||(r.type=qn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=qn?"buffer":"binary",i=QY(e),typeof Uint8Array<"u"&&!qn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,i=eoe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var c=new ArrayBuffer(3),s=new Uint8Array(c);if(s.foo="bar",!s.foo)return r=mc(r),r.type="array",o4(fB(i),r)}switch((n=PB(i,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return Xae($n.read(i,r),r);break;case 9:if(n[1]<=8)return wL(i,r);break;case 60:return i4(i,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return Tte(i,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return Ste.to_workbook(i,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?Zae(i,r):Rw(e,i,r,a);case 239:return n[3]===60?i4(i,r):Rw(e,i,r,a);case 255:if(n[1]===254)return Jae(i,r);if(n[1]===0&&n[2]===2&&n[3]===0)return av.to_workbook(i,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return av.to_workbook(i,r);break;case 3:case 131:case 139:case 140:return oF.to_workbook(i,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return sre.to_workbook(i,r);break;case 10:case 13:case 32:return Yae(i,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Bte.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?oF.to_workbook(i,r):Rw(e,i,r,a)}function toe(e,t,r,i,n,a,c,s){var d=gc(r),g=s.defval,x=s.raw||!Object.prototype.hasOwnProperty.call(s,"raw"),C=!0,N=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(N,"__rowNum__",{value:r,enumerable:!1})}catch{N.__rowNum__=r}else N.__rowNum__=r;if(!c||e[r])for(var B=t.s.c;B<=t.e.c;++B){var M=c?e[r][B]:e[i[B]+d];if(M===void 0||M.t===void 0){if(g===void 0)continue;a[B]!=null&&(N[a[B]]=g);continue}var I=M.v;switch(M.t){case"z":if(I==null)break;continue;case"e":I=I==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+M.t)}if(a[B]!=null){if(I==null)if(M.t=="e"&&I===null)N[a[B]]=null;else if(g!==void 0)N[a[B]]=g;else if(x&&I===null)N[a[B]]=null;else continue;else N[a[B]]=x&&(M.t!=="n"||M.t==="n"&&s.rawNumbers!==!1)?I:_d(M,I,s);I!=null&&(C=!1)}}return{row:N,isempty:C}}function l4(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},i=0,n=1,a=[],c=0,s="",d={s:{r:0,c:0},e:{r:0,c:0}},g=t||{},x=g.range!=null?g.range:e["!ref"];switch(g.header===1?i=1:g.header==="A"?i=2:Array.isArray(g.header)?i=3:g.header==null&&(i=0),typeof x){case"string":d=so(x);break;case"number":d=so(e["!ref"]),d.s.r=x;break;default:d=x}i>0&&(n=0);var C=gc(d.s.r),N=[],B=[],M=0,I=0,R=Array.isArray(e),D=d.s.r,V=0,G={};R&&!e[D]&&(e[D]=[]);var Z=g.skipHidden&&e["!cols"]||[],X=g.skipHidden&&e["!rows"]||[];for(V=d.s.c;V<=d.e.c;++V)if(!(Z[V]||{}).hidden)switch(N[V]=vl(V),r=R?e[D][V]:e[N[V]+C],i){case 1:a[V]=V-d.s.c;break;case 2:a[V]=N[V];break;case 3:a[V]=g.header[V-d.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),s=c=_d(r,null,g),I=G[c]||0,!I)G[c]=1;else{do s=c+"_"+I++;while(G[s]);G[c]=I,G[s]=1}a[V]=s}for(D=d.s.r+n;D<=d.e.r;++D)if(!(X[D]||{}).hidden){var le=toe(e,d,D,N,i,a,R,g);(le.isempty===!1||(i===1?g.blankrows!==!1:g.blankrows))&&(B[M++]=le.row)}return B.length=M,B}var BF=/"/g;function roe(e,t,r,i,n,a,c,s){for(var d=!0,g=[],x="",C=gc(r),N=t.s.c;N<=t.e.c;++N)if(i[N]){var B=s.dense?(e[r]||[])[N]:e[i[N]+C];if(B==null)x="";else if(B.v!=null){d=!1,x=""+(s.rawNumbers&&B.t=="n"?B.v:_d(B,null,s));for(var M=0,I=0;M!==x.length;++M)if((I=x.charCodeAt(M))===n||I===a||I===34||s.forceQuotes){x='"'+x.replace(BF,'""')+'"';break}x=="ID"&&(x='"ID"')}else B.f!=null&&!B.F?(d=!1,x="="+B.f,x.indexOf(",")>=0&&(x='"'+x.replace(BF,'""')+'"')):x="";g.push(x)}return s.blankrows===!1&&d?null:g.join(c)}function TL(e,t){var r=[],i=t??{};if(e==null||e["!ref"]==null)return"";var n=so(e["!ref"]),a=i.FS!==void 0?i.FS:",",c=a.charCodeAt(0),s=i.RS!==void 0?i.RS:`
`,d=s.charCodeAt(0),g=new RegExp((a=="|"?"\\|":a)+"+$"),x="",C=[];i.dense=Array.isArray(e);for(var N=i.skipHidden&&e["!cols"]||[],B=i.skipHidden&&e["!rows"]||[],M=n.s.c;M<=n.e.c;++M)(N[M]||{}).hidden||(C[M]=vl(M));for(var I=0,R=n.s.r;R<=n.e.r;++R)(B[R]||{}).hidden||(x=roe(e,n,R,C,c,d,a,i),x!=null&&(i.strip&&(x=x.replace(g,"")),(x||i.blankrows!==!1)&&r.push((I++?s:"")+x)));return delete i.dense,r.join("")}function ioe(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=TL(e,t);return r}function noe(e){var t="",r,i="";if(e==null||e["!ref"]==null)return[];var n=so(e["!ref"]),a="",c=[],s,d=[],g=Array.isArray(e);for(s=n.s.c;s<=n.e.c;++s)c[s]=vl(s);for(var x=n.s.r;x<=n.e.r;++x)for(a=gc(x),s=n.s.c;s<=n.e.c;++s)if(t=c[s]+a,r=g?(e[x]||[])[s]:e[t],i="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;i=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)i=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)i=""+r.v;else if(r.t=="b")i=r.v?"TRUE":"FALSE";else if(r.w!==void 0)i="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?i="'"+r.v:i=""+r.v}}d[d.length]=t+"="+i}return d}function FL(e,t,r){var i=r||{},n=+!i.skipHeader,a=e||{},c=0,s=0;if(a&&i.origin!=null)if(typeof i.origin=="number")c=i.origin;else{var d=typeof i.origin=="string"?Bu(i.origin):i.origin;c=d.r,s=d.c}var g,x={s:{c:0,r:0},e:{c:s,r:c+t.length-1+n}};if(a["!ref"]){var C=so(a["!ref"]);x.e.c=Math.max(x.e.c,C.e.c),x.e.r=Math.max(x.e.r,C.e.r),c==-1&&(c=C.e.r+1,x.e.r=c+t.length-1+n)}else c==-1&&(c=0,x.e.r=t.length-1+n);var N=i.header||[],B=0;t.forEach(function(I,R){Ef(I).forEach(function(D){(B=N.indexOf(D))==-1&&(N[B=N.length]=D);var V=I[D],G="z",Z="",X=an({c:s+B,r:c+R+n});g=Mv(a,X),V&&typeof V=="object"&&!(V instanceof Date)?a[X]=V:(typeof V=="number"?G="n":typeof V=="boolean"?G="b":typeof V=="string"?G="s":V instanceof Date?(G="d",i.cellDates||(G="n",V=Su(V)),Z=i.dateNF||fn[14]):V===null&&i.nullError&&(G="e",V=0),g?(g.t=G,g.v=V,delete g.w,delete g.R,Z&&(g.z=Z)):a[X]=g={t:G,v:V},Z&&(g.z=Z))})}),x.e.c=Math.max(x.e.c,s+N.length-1);var M=gc(c);if(n)for(B=0;B<N.length;++B)a[vl(B+s)+M]={t:"s",v:N[B]};return a["!ref"]=Xn(x),a}function soe(e,t){return FL(null,e,t)}function Mv(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var i=Bu(t);return e[i.r]||(e[i.r]=[]),e[i.r][i.c]||(e[i.r][i.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Mv(e,an(t)):Mv(e,an({r:t,c:r||0}))}function aoe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function DB(){return{SheetNames:[],Sheets:{}}}function RB(e,t,r,i){var n=1;if(!r)for(;n<=65535&&e.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(i&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);n=a&&+a[2]||0;var c=a&&a[1]||r;for(++n;n<=65535&&e.SheetNames.indexOf(r=c+n)!=-1;++n);}if(Vse(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function ooe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var i=aoe(e,t);switch(e.Workbook.Sheets[i]||(e.Workbook.Sheets[i]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[i].Hidden=r}function loe(e,t){return e.z=t,e}function kL(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function coe(e,t,r){return kL(e,"#"+t,r)}function uoe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function hoe(e,t,r,i){for(var n=typeof t!="string"?t:so(t),a=typeof t=="string"?t:Xn(t),c=n.s.r;c<=n.e.r;++c)for(var s=n.s.c;s<=n.e.c;++s){var d=Mv(e,c,s);d.t="n",d.F=a,delete d.v,c==n.s.r&&s==n.s.c&&(d.f=r,i&&(d.D=!0))}return e}var Aoe={encode_col:vl,encode_row:gc,encode_cell:an,encode_range:Xn,decode_col:bB,decode_row:_B,split_cell:wJ,decode_cell:Bu,decode_range:yg,format_cell:_d,sheet_add_aoa:MI,sheet_add_json:FL,sheet_add_dom:BL,aoa_to_sheet:_g,json_to_sheet:soe,table_to_sheet:CL,table_to_book:Tae,sheet_to_csv:TL,sheet_to_txt:ioe,sheet_to_json:l4,sheet_to_html:Eae,sheet_to_formulae:noe,sheet_to_row_object_array:l4,sheet_get_cell:Mv,book_new:DB,book_append_sheet:RB,book_set_sheet_visibility:ooe,cell_set_number_format:loe,cell_set_hyperlink:kL,cell_set_internal_link:coe,cell_add_comment:uoe,sheet_set_array_formula:hoe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const foe=()=>{const{admin:e,isAuthorized:t,tokenType:r}=Ma(),[i,n]=_e.useState([]),[a,c]=_e.useState(!0),[s,d]=_e.useState(""),[g,x]=_e.useState(""),[C,N]=_e.useState([]),[B,M]=_e.useState(!1);_e.useEffect(()=>{t!=null&&(t===!1?(c(!1),d("Please login to access this page.")):t&&r==="admin"&&e?I():t&&r!=="admin"?(c(!1),d("Access denied. Admin authentication required.")):(c(!1),d("Loading admin data...")))},[t,r,e]),_e.useEffect(()=>{const D=i.filter(V=>V.name.toLowerCase().includes(g.toLowerCase())||V.address.toLowerCase().includes(g.toLowerCase())||V.phoneNumber.includes(g)||V.email&&V.email.toLowerCase().includes(g.toLowerCase()));N(D)},[i,g]);const I=async()=>{try{c(!0),d("");const D=await Cr.get("/admin/residents");n(D.data.residents)}catch(D){console.error("Failed to fetch residents:",D),d(`Failed to fetch residents: ${D.response?.data?.message||D.message}`)}finally{c(!1)}},R=async D=>{const V=D.target.files[0];if(!V)return;if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(V.type)){Qr.error("Please select a valid Excel file (.xls or .xlsx)");return}M(!0);try{const Z=new FileReader;Z.onload=async X=>{try{const le=new Uint8Array(X.target.result),ae=o4(le,{type:"array"}),ce=ae.SheetNames[0],se=ae.Sheets[ce],re=Aoe.sheet_to_json(se,{header:1}).slice(1).map(de=>({name:de[0]||"",address:de[1]||"",phoneNumber:de[2]||"",email:de[3]||""})).filter(de=>de.name&&de.address&&de.phoneNumber);if(re.length===0){Qr.error("No valid resident data found in the Excel file");return}const W=await Cr.post("/admin/residents/import",{residents:re});Qr.success(W.data.message),I()}catch(le){console.error("Error processing Excel file:",le),Qr.error("Error processing Excel file")}finally{M(!1)}},Z.readAsArrayBuffer(V)}catch(Z){console.error("Error reading file:",Z),Qr.error("Error reading file"),M(!1)}};return a?p.jsx("div",{className:"user-management-container",children:p.jsx("div",{className:"loading-spinner"})}):s?p.jsxs("div",{className:"user-management-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsx("div",{children:p.jsx("h1",{children:"Error"})})}),p.jsx("div",{className:"content-card",children:p.jsx("p",{className:"empty-state",children:s})})]}):p.jsxs("div",{className:"user-management-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"Residents List"}),p.jsx("p",{className:"header-description",children:"View Records of the Barangay Residents"})]})}),p.jsxs("div",{className:"content-card",children:[p.jsx("div",{className:"card-header",children:p.jsxs("div",{className:"header-actions",children:[p.jsxs("div",{className:"search-container",children:[p.jsx("input",{type:"text",placeholder:"Search residents by name, address, phone, or email...",value:g,onChange:D=>x(D.target.value),className:"search-input"}),p.jsx("i",{className:"fas fa-search search-icon"})]}),p.jsx("div",{className:"action-buttons",children:p.jsxs("label",{className:"admin-btn secondary import-btn",children:[p.jsx("i",{className:"fas fa-file-excel"}),B?"Importing...":"Import Residents Data from Excel",p.jsx("input",{type:"file",accept:".xls,.xlsx",onChange:R,style:{display:"none"},disabled:B})]})})]})}),p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"data-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Name"}),p.jsx("th",{children:"Address"}),p.jsx("th",{children:"Phone Number"}),p.jsx("th",{children:"Email"}),p.jsx("th",{children:"Created"})]})}),p.jsx("tbody",{children:C.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:"5",className:"no-data",children:g?"No residents found matching your search":"No residents found"})}):C.map(D=>p.jsxs("tr",{children:[p.jsx("td",{children:D.name}),p.jsx("td",{children:D.address}),p.jsx("td",{children:D.phoneNumber}),p.jsx("td",{children:D.email||"N/A"}),p.jsx("td",{children:new Date(D.createdAt).toLocaleDateString()})]},D._id))})]})}),p.jsx("div",{className:"table-footer",children:p.jsxs("div",{className:"results-info",children:["Showing ",C.length," of ",i.length," residents"]})})]})]})};var g_={exports:{}};var doe=g_.exports,CF;function poe(){return CF||(CF=1,function(e,t){(function(r,i){e.exports=i()})(doe,function(){var r={},i={};function n(c,s,d){if(i[c]=d,c==="index"){var g="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",x={};return i.shared(x),i.index(r,x),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),r}}n("shared",["exports"],function(c){function s(A,l,u,v){return new(u||(u=Promise))(function(b,E){function k(q){try{Q(v.next(q))}catch(J){E(J)}}function P(q){try{Q(v.throw(q))}catch(J){E(J)}}function Q(q){var J;q.done?b(q.value):(J=q.value,J instanceof u?J:new u(function(oe){oe(J)})).then(k,P)}Q((v=v.apply(A,l||[])).next())})}function d(A,l){this.x=A,this.y=l}function g(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var x,C;typeof SuppressedError=="function"&&SuppressedError,d.prototype={clone(){return new d(this.x,this.y)},add(A){return this.clone()._add(A)},sub(A){return this.clone()._sub(A)},multByPoint(A){return this.clone()._multByPoint(A)},divByPoint(A){return this.clone()._divByPoint(A)},mult(A){return this.clone()._mult(A)},div(A){return this.clone()._div(A)},rotate(A){return this.clone()._rotate(A)},rotateAround(A,l){return this.clone()._rotateAround(A,l)},matMult(A){return this.clone()._matMult(A)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(A){return this.x===A.x&&this.y===A.y},dist(A){return Math.sqrt(this.distSqr(A))},distSqr(A){const l=A.x-this.x,u=A.y-this.y;return l*l+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith(A){return this.angleWithSep(A.x,A.y)},angleWithSep(A,l){return Math.atan2(this.x*l-this.y*A,this.x*A+this.y*l)},_matMult(A){const l=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=l,this},_add(A){return this.x+=A.x,this.y+=A.y,this},_sub(A){return this.x-=A.x,this.y-=A.y,this},_mult(A){return this.x*=A,this.y*=A,this},_div(A){return this.x/=A,this.y/=A,this},_multByPoint(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint(A){return this.x/=A.x,this.y/=A.y,this},_unit(){return this._div(this.mag()),this},_perp(){const A=this.y;return this.y=this.x,this.x=-A,this},_rotate(A){const l=Math.cos(A),u=Math.sin(A),v=u*this.x+l*this.y;return this.x=l*this.x-u*this.y,this.y=v,this},_rotateAround(A,l){const u=Math.cos(A),v=Math.sin(A),b=l.y+v*(this.x-l.x)+u*(this.y-l.y);return this.x=l.x+u*(this.x-l.x)-v*(this.y-l.y),this.y=b,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:d},d.convert=function(A){if(A instanceof d)return A;if(Array.isArray(A))return new d(+A[0],+A[1]);if(A.x!==void 0&&A.y!==void 0)return new d(+A.x,+A.y);throw new Error("Expected [x, y] or {x, y} point format")};var N=function(){if(C)return x;function A(l,u,v,b){this.cx=3*l,this.bx=3*(v-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=u,this.p2x=v,this.p2y=b}return C=1,x=A,A.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,u){if(u===void 0&&(u=1e-6),l<0)return 0;if(l>1)return 1;for(var v=l,b=0;b<8;b++){var E=this.sampleCurveX(v)-l;if(Math.abs(E)<u)return v;var k=this.sampleCurveDerivativeX(v);if(Math.abs(k)<1e-6)break;v-=E/k}var P=0,Q=1;for(v=l,b=0;b<20&&(E=this.sampleCurveX(v),!(Math.abs(E-l)<u));b++)l>E?P=v:Q=v,v=.5*(Q-P)+P;return v},solve:function(l,u){return this.sampleCurveY(this.solveCurveX(l,u))}},x}(),B=g(N);let M,I;function R(){return M==null&&(M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),M}function D(){if(I==null&&(I=!1,R())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let v=0;v<25;v++){const b=4*v;l.fillStyle=`rgb(${b},${b+1},${b+2})`,l.fillRect(v%5,Math.floor(v/5),1,1)}const u=l.getImageData(0,0,5,5).data;for(let v=0;v<100;v++)if(v%4!=3&&u[v]!==v){I=!0;break}}}return I||!1}var V=1e-6,G=typeof Float32Array<"u"?Float32Array:Array;function Z(){var A=new G(9);return G!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A}function X(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function le(){var A=new G(3);return G!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A}function ae(A){var l=A[0],u=A[1],v=A[2];return Math.sqrt(l*l+u*u+v*v)}function ce(A,l,u){var v=new G(3);return v[0]=A,v[1]=l,v[2]=u,v}function se(A,l,u){return A[0]=l[0]+u[0],A[1]=l[1]+u[1],A[2]=l[2]+u[2],A}function ue(A,l,u){return A[0]=l[0]*u,A[1]=l[1]*u,A[2]=l[2]*u,A}function re(A,l,u){var v=l[0],b=l[1],E=l[2],k=u[0],P=u[1],Q=u[2];return A[0]=b*Q-E*P,A[1]=E*k-v*Q,A[2]=v*P-b*k,A}var W,de=ae;function Ee(A,l,u){var v=l[0],b=l[1],E=l[2],k=l[3];return A[0]=u[0]*v+u[4]*b+u[8]*E+u[12]*k,A[1]=u[1]*v+u[5]*b+u[9]*E+u[13]*k,A[2]=u[2]*v+u[6]*b+u[10]*E+u[14]*k,A[3]=u[3]*v+u[7]*b+u[11]*E+u[15]*k,A}function Ne(){var A=new G(4);return G!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A[3]=1,A}function ge(A,l,u,v){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",E=Math.PI/360;l*=E,v*=E,u*=E;var k=Math.sin(l),P=Math.cos(l),Q=Math.sin(u),q=Math.cos(u),J=Math.sin(v),oe=Math.cos(v);switch(b){case"xyz":A[0]=k*q*oe+P*Q*J,A[1]=P*Q*oe-k*q*J,A[2]=P*q*J+k*Q*oe,A[3]=P*q*oe-k*Q*J;break;case"xzy":A[0]=k*q*oe-P*Q*J,A[1]=P*Q*oe-k*q*J,A[2]=P*q*J+k*Q*oe,A[3]=P*q*oe+k*Q*J;break;case"yxz":A[0]=k*q*oe+P*Q*J,A[1]=P*Q*oe-k*q*J,A[2]=P*q*J-k*Q*oe,A[3]=P*q*oe+k*Q*J;break;case"yzx":A[0]=k*q*oe+P*Q*J,A[1]=P*Q*oe+k*q*J,A[2]=P*q*J-k*Q*oe,A[3]=P*q*oe-k*Q*J;break;case"zxy":A[0]=k*q*oe-P*Q*J,A[1]=P*Q*oe+k*q*J,A[2]=P*q*J+k*Q*oe,A[3]=P*q*oe-k*Q*J;break;case"zyx":A[0]=k*q*oe-P*Q*J,A[1]=P*Q*oe+k*q*J,A[2]=P*q*J-k*Q*oe,A[3]=P*q*oe+k*Q*J;break;default:throw new Error("Unknown angle order "+b)}return A}function Pe(){var A=new G(2);return G!=Float32Array&&(A[0]=0,A[1]=0),A}function Ye(A,l){var u=new G(2);return u[0]=A,u[1]=l,u}le(),W=new G(4),G!=Float32Array&&(W[0]=0,W[1]=0,W[2]=0,W[3]=0),le(),ce(1,0,0),ce(0,1,0),Ne(),Ne(),Z(),Pe();const Me=8192;function De(A,l,u){return l*(Me/(A.tileSize*Math.pow(2,u-A.tileID.overscaledZ)))}function tt(A,l){return(A%l+l)%l}function ee(A,l,u){return A*(1-u)+l*u}function fe(A){if(A<=0)return 0;if(A>=1)return 1;const l=A*A,u=l*A;return 4*(A<.5?u:3*(A-l)+u-.75)}function pe(A,l,u,v){const b=new B(A,l,u,v);return E=>b.solve(E)}const we=pe(.25,.1,.25,1);function Le(A,l,u){return Math.min(u,Math.max(l,A))}function lt(A,l,u){const v=u-l,b=((A-l)%v+v)%v+l;return b===l?u:b}function rt(A,...l){for(const u of l)for(const v in u)A[v]=u[v];return A}let gt=1;function dt(A,l,u){const v={};for(const b in A)v[b]=l.call(this,A[b],b,A);return v}function qt(A,l,u){const v={};for(const b in A)l.call(this,A[b],b,A)&&(v[b]=A[b]);return v}function Te(A){return Array.isArray(A)?A.map(Te):typeof A=="object"&&A?dt(A,Te):A}const at={};function kt(A){at[A]||(typeof console<"u"&&console.warn(A),at[A]=!0)}function ze(A,l,u){return(u.y-A.y)*(l.x-A.x)>(l.y-A.y)*(u.x-A.x)}function Et(A){return typeof WorkerGlobalScope<"u"&&A!==void 0&&A instanceof WorkerGlobalScope}let Pt=null;function Sr(A){if(Pt==null){const l=A.navigator?A.navigator.userAgent:null;Pt=!!A.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Pt}function or(A){return typeof ImageBitmap<"u"&&A instanceof ImageBitmap}const Wr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Hr(A,l,u,v,b){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const E=new VideoFrame(A,{timestamp:0});try{const k=E?.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);const P=k.startsWith("BGR"),Q=new Uint8ClampedArray(v*b*4);if(yield E.copyTo(Q,function(q,J,oe,ve,Be){const Fe=4*Math.max(-J,0),Oe=(Math.max(0,oe)-oe)*ve*4+Fe,Ze=4*ve,ht=Math.max(0,J),Ut=Math.max(0,oe);return{rect:{x:ht,y:Ut,width:Math.min(q.width,J+ve)-ht,height:Math.min(q.height,oe+Be)-Ut},layout:[{offset:Oe,stride:Ze}]}}(A,l,u,v,b)),P)for(let q=0;q<Q.length;q+=4){const J=Q[q];Q[q]=Q[q+2],Q[q+2]=J}return Q}finally{E.close()}})}let ti,Gr;function wi(A,l,u,v){return A.addEventListener(l,u,v),{unsubscribe:()=>{A.removeEventListener(l,u,v)}}}function Bi(A){return A*Math.PI/180}function Zr(A){return A/Math.PI*180}const Xr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},$r={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ot="AbortError";function xe(){return new Error(ot)}const ye={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ce(A){return ye.REGISTERED_PROTOCOLS[A.substring(0,A.indexOf("://"))]}const je="global-dispatcher";class Ke extends Error{constructor(l,u,v,b){super(`AJAXError: ${u} (${l}): ${v}`),this.status=l,this.statusText=u,this.url=v,this.body=b}}const At=()=>Et(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ft=function(A,l){if(/:\/\//.test(A.url)&&!/^https?:|^file:/.test(A.url)){const v=Ce(A.url);if(v)return v(A,l);if(Et(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:A,targetMapId:je},l)}if(!(/^file:/.test(u=A.url)||/^file:/.test(At())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(v,b){return s(this,void 0,void 0,function*(){const E=new Request(v.url,{method:v.method||"GET",body:v.body,credentials:v.credentials,headers:v.headers,cache:v.cache,referrer:At(),signal:b.signal});let k,P;v.type!=="json"||E.headers.has("Accept")||E.headers.set("Accept","application/json");try{k=yield fetch(E)}catch(q){throw new Ke(0,q.message,v.url,new Blob)}if(!k.ok){const q=yield k.blob();throw new Ke(k.status,k.statusText,v.url,q)}P=v.type==="arrayBuffer"||v.type==="image"?k.arrayBuffer():v.type==="json"?k.json():k.text();const Q=yield P;if(b.signal.aborted)throw xe();return{data:Q,cacheControl:k.headers.get("Cache-Control"),expires:k.headers.get("Expires")}})}(A,l);if(Et(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:A,mustQueue:!0,targetMapId:je},l)}var u;return function(v,b){return new Promise((E,k)=>{var P;const Q=new XMLHttpRequest;Q.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(Q.responseType="arraybuffer");for(const q in v.headers)Q.setRequestHeader(q,v.headers[q]);v.type==="json"&&(Q.responseType="text",!((P=v.headers)===null||P===void 0)&&P.Accept||Q.setRequestHeader("Accept","application/json")),Q.withCredentials=v.credentials==="include",Q.onerror=()=>{k(new Error(Q.statusText))},Q.onload=()=>{if(!b.signal.aborted)if((Q.status>=200&&Q.status<300||Q.status===0)&&Q.response!==null){let q=Q.response;if(v.type==="json")try{q=JSON.parse(Q.response)}catch(J){return void k(J)}E({data:q,cacheControl:Q.getResponseHeader("Cache-Control"),expires:Q.getResponseHeader("Expires")})}else{const q=new Blob([Q.response],{type:Q.getResponseHeader("Content-Type")});k(new Ke(Q.status,Q.statusText,v.url,q))}},b.signal.addEventListener("abort",()=>{Q.abort(),k(xe())}),Q.send(v.body)})}(A,l)};function vt(A){if(!A||A.indexOf("://")<=0||A.indexOf("data:image/")===0||A.indexOf("blob:")===0)return!0;const l=new URL(A),u=window.location;return l.protocol===u.protocol&&l.host===u.host}function Nt(A,l,u){u[A]&&u[A].indexOf(l)!==-1||(u[A]=u[A]||[],u[A].push(l))}function Ht(A,l,u){if(u&&u[A]){const v=u[A].indexOf(l);v!==-1&&u[A].splice(v,1)}}class Gt{constructor(l,u={}){rt(this,u),this.type=l}}class Fr extends Gt{constructor(l,u={}){super("error",rt({error:l},u))}}class kr{on(l,u){return this._listeners=this._listeners||{},Nt(l,u,this._listeners),{unsubscribe:()=>{this.off(l,u)}}}off(l,u){return Ht(l,u,this._listeners),Ht(l,u,this._oneTimeListeners),this}once(l,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Nt(l,u,this._oneTimeListeners),this):new Promise(v=>this.once(l,v))}fire(l,u){typeof l=="string"&&(l=new Gt(l,u||{}));const v=l.type;if(this.listens(v)){l.target=this;const b=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const P of b)P.call(this,l);const E=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const P of E)Ht(v,P,this._oneTimeListeners),P.call(this,l);const k=this._eventedParent;k&&(rt(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(l))}else l instanceof Fr&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,u){return this._eventedParent=l,this._eventedParentData=u,this}}var Bt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ei=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Yi(A,l){const u={};for(const v in A)v!=="ref"&&(u[v]=A[v]);return ei.forEach(v=>{v in l&&(u[v]=l[v])}),u}function jr(A,l){if(Array.isArray(A)){if(!Array.isArray(l)||A.length!==l.length)return!1;for(let u=0;u<A.length;u++)if(!jr(A[u],l[u]))return!1;return!0}if(typeof A=="object"&&A!==null&&l!==null){if(typeof l!="object"||Object.keys(A).length!==Object.keys(l).length)return!1;for(const u in A)if(!jr(A[u],l[u]))return!1;return!0}return A===l}function Di(A,l){A.push(l)}function In(A,l,u){Di(u,{command:"addSource",args:[A,l[A]]})}function Yr(A,l,u){Di(l,{command:"removeSource",args:[A]}),u[A]=!0}function on(A,l,u,v){Yr(A,u,v),In(A,l,u)}function Wi(A,l,u){let v;for(v in A[u])if(Object.prototype.hasOwnProperty.call(A[u],v)&&v!=="data"&&!jr(A[u][v],l[u][v]))return!1;for(v in l[u])if(Object.prototype.hasOwnProperty.call(l[u],v)&&v!=="data"&&!jr(A[u][v],l[u][v]))return!1;return!0}function mi(A,l,u,v,b,E){A=A||{},l=l||{};for(const k in A)Object.prototype.hasOwnProperty.call(A,k)&&(jr(A[k],l[k])||u.push({command:E,args:[v,k,l[k],b]}));for(const k in l)Object.prototype.hasOwnProperty.call(l,k)&&!Object.prototype.hasOwnProperty.call(A,k)&&(jr(A[k],l[k])||u.push({command:E,args:[v,k,l[k],b]}))}function ln(A){return A.id}function gi(A,l){return A[l.id]=l,A}class hr{constructor(l,u,v,b){this.message=(l?`${l}: `:"")+v,b&&(this.identifier=b),u!=null&&u.__line__&&(this.line=u.__line__)}}function Re(A,...l){for(const u of l)for(const v in u)A[v]=u[v];return A}class ct extends Error{constructor(l,u){super(u),this.message=u,this.key=l}}class $e{constructor(l,u=[]){this.parent=l,this.bindings={};for(const[v,b]of u)this.bindings[v]=b}concat(l){return new $e(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const it={kind:"null"},He={kind:"number"},nt={kind:"string"},It={kind:"boolean"},sr={kind:"color"},Qt={kind:"projectionDefinition"},Xt={kind:"object"},jt={kind:"value"},_r={kind:"collator"},Mr={kind:"formatted"},Vr={kind:"padding"},Ir={kind:"colorArray"},zr={kind:"numberArray"},yi={kind:"resolvedImage"},ki={kind:"variableAnchorOffsetCollection"};function Ni(A,l){return{kind:"array",itemType:A,N:l}}function _i(A){if(A.kind==="array"){const l=_i(A.itemType);return typeof A.N=="number"?`array<${l}, ${A.N}>`:A.itemType.kind==="value"?"array":`array<${l}>`}return A.kind}const Ga=[it,He,nt,It,sr,Qt,Mr,Xt,Ni(jt),Vr,zr,Ir,yi,ki];function Pa(A,l){if(l.kind==="error")return null;if(A.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Pa(A.itemType,l.itemType))&&(typeof A.N!="number"||A.N===l.N))return null}else{if(A.kind===l.kind)return null;if(A.kind==="value"){for(const u of Ga)if(!Pa(u,l))return null}}return`Expected ${_i(A)} but found ${_i(l)} instead.`}function Da(A,l){return l.some(u=>u.kind===A.kind)}function ea(A,l){return l.some(u=>u==="null"?A===null:u==="array"?Array.isArray(A):u==="object"?A&&!Array.isArray(A)&&typeof A=="object":u===typeof A)}function xa(A,l){return A.kind==="array"&&l.kind==="array"?A.itemType.kind===l.itemType.kind&&typeof A.N=="number":A.kind===l.kind}const zs=.96422,iu=.82521,ao=4/29,rs=6/29,cA=3*rs*rs,Xo=rs*rs*rs,oh=Math.PI/180,lh=180/Math.PI;function Zo(A){return(A%=360)<0&&(A+=360),A}function Fn([A,l,u,v]){let b,E;const k=ch((.2225045*(A=Ra(A))+.7168786*(l=Ra(l))+.0606169*(u=Ra(u)))/1);A===l&&l===u?b=E=k:(b=ch((.4360747*A+.3850649*l+.1430804*u)/zs),E=ch((.0139322*A+.0971045*l+.7141733*u)/iu));const P=116*k-16;return[P<0?0:P,500*(b-k),200*(k-E),v]}function Ra(A){return A<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function ch(A){return A>Xo?Math.pow(A,1/3):A/cA+ao}function Nh([A,l,u,v]){let b=(A+16)/116,E=isNaN(l)?b:b+l/500,k=isNaN(u)?b:b-u/200;return b=1*Yo(b),E=zs*Yo(E),k=iu*Yo(k),[ko(3.1338561*E-1.6168667*b-.4906146*k),ko(-.9787684*E+1.9161415*b+.033454*k),ko(.0719453*E-.2289914*b+1.4052427*k),v]}function ko(A){return(A=A<=.00304?12.92*A:1.055*Math.pow(A,1/2.4)-.055)<0?0:A>1?1:A}function Yo(A){return A>rs?A*A*A:cA*(A-ao)}const uA=Object.hasOwn||function(A,l){return Object.prototype.hasOwnProperty.call(A,l)};function Jo(A,l){return uA(A,l)?A[l]:void 0}function vc(A){return parseInt(A.padEnd(2,A),16)/255}function xc(A,l){return ya(l?A/100:A,0,1)}function ya(A,l,u){return Math.min(Math.max(l,A),u)}function $i(A){return!A.some(Number.isNaN)}const Eu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Aa(A,l,u){return A+u*(l-A)}function el(A,l,u){return A.map((v,b)=>Aa(v,l[b],u))}class Ti{constructor(l,u,v,b=1,E=!0){this.r=l,this.g=u,this.b=v,this.a=b,E||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter("rgb",[l,u,v,b]))}static parse(l){if(l instanceof Ti)return l;if(typeof l!="string")return;const u=function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const b=Jo(Eu,v);if(b){const[k,P,Q]=b;return[k/255,P/255,Q/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const k=v.length<6?1:2;let P=1;return[vc(v.slice(P,P+=k)),vc(v.slice(P,P+=k)),vc(v.slice(P,P+=k)),vc(v.slice(P,P+k)||"ff")]}if(v.startsWith("rgb")){const k=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[P,Q,q,J,oe,ve,Be,Fe,Oe,Ze,ht,Ut]=k,_t=[J||" ",Be||" ",Ze].join("");if(_t==="  "||_t==="  /"||_t===",,"||_t===",,,"){const Ct=[q,ve,Oe].join(""),Jt=Ct==="%%%"?100:Ct===""?255:0;if(Jt){const nr=[ya(+Q/Jt,0,1),ya(+oe/Jt,0,1),ya(+Fe/Jt,0,1),ht?xc(+ht,Ut):1];if($i(nr))return nr}}return}}const E=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[k,P,Q,q,J,oe,ve,Be,Fe]=E,Oe=[Q||" ",J||" ",ve].join("");if(Oe==="  "||Oe==="  /"||Oe===",,"||Oe===",,,"){const Ze=[+P,ya(+q,0,100),ya(+oe,0,100),Be?xc(+Be,Fe):1];if($i(Ze))return function([ht,Ut,_t,Ct]){function Jt(nr){const gr=(nr+ht/30)%12,Lr=Ut*Math.min(_t,1-_t);return _t-Lr*Math.max(-1,Math.min(gr-3,9-gr,1))}return ht=Zo(ht),Ut/=100,_t/=100,[Jt(0),Jt(8),Jt(4),Ct]}(Ze)}}}(l);return u?new Ti(...u,!1):void 0}get rgb(){const{r:l,g:u,b:v,a:b}=this,E=b||1/0;return this.overwriteGetter("rgb",[l/E,u/E,v/E,b])}get hcl(){return this.overwriteGetter("hcl",function(l){const[u,v,b,E]=Fn(l),k=Math.sqrt(v*v+b*b);return[Math.round(1e4*k)?Zo(Math.atan2(b,v)*lh):NaN,k,u,E]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Fn(this.rgb))}overwriteGetter(l,u){return Object.defineProperty(this,l,{value:u}),u}toString(){const[l,u,v,b]=this.rgb;return`rgba(${[l,u,v].map(E=>Math.round(255*E)).join(",")},${b})`}static interpolate(l,u,v,b="rgb"){switch(b){case"rgb":{const[E,k,P,Q]=el(l.rgb,u.rgb,v);return new Ti(E,k,P,Q,!1)}case"hcl":{const[E,k,P,Q]=l.hcl,[q,J,oe,ve]=u.hcl;let Be,Fe;if(isNaN(E)||isNaN(q))isNaN(E)?isNaN(q)?Be=NaN:(Be=q,P!==1&&P!==0||(Fe=J)):(Be=E,oe!==1&&oe!==0||(Fe=k));else{let _t=q-E;q>E&&_t>180?_t-=360:q<E&&E-q>180&&(_t+=360),Be=E+v*_t}const[Oe,Ze,ht,Ut]=function([_t,Ct,Jt,nr]){return _t=isNaN(_t)?0:_t*oh,Nh([Jt,Math.cos(_t)*Ct,Math.sin(_t)*Ct,nr])}([Be,Fe??Aa(k,J,v),Aa(P,oe,v),Aa(Q,ve,v)]);return new Ti(Oe,Ze,ht,Ut,!1)}case"lab":{const[E,k,P,Q]=Nh(el(l.lab,u.lab,v));return new Ti(E,k,P,Q,!1)}}}}Ti.black=new Ti(0,0,0,1),Ti.white=new Ti(1,1,1,1),Ti.transparent=new Ti(0,0,0,0),Ti.red=new Ti(1,0,0,1);class nu{constructor(l,u,v){this.sensitivity=l?u?"variant":"case":u?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,u){return this.collator.compare(l,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const qa=["bottom","center","top"];class oo{constructor(l,u,v,b,E,k){this.text=l,this.image=u,this.scale=v,this.fontStack=b,this.textColor=E,this.verticalAlign=k}}class Ua{constructor(l){this.sections=l}static fromString(l){return new Ua([new oo(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof Ua?l:Ua.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class li{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof li)return l;if(typeof l=="number")return new li([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const u of l)if(typeof u!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new li(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,v){return new li(el(l.values,u.values,v))}}class Hs{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Hs)return l;if(typeof l=="number")return new Hs([l]);if(Array.isArray(l)){for(const u of l)if(typeof u!="number")return;return new Hs(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,v){return new Hs(el(l.values,u.values,v))}}class ys{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ys)return l;if(typeof l=="string"){const v=Ti.parse(l);return v?new ys([v]):void 0}if(!Array.isArray(l))return;const u=[];for(const v of l){if(typeof v!="string")return;const b=Ti.parse(v);if(!b)return;u.push(b)}return new ys(u)}toString(){return JSON.stringify(this.values)}static interpolate(l,u,v,b="rgb"){const E=[];if(l.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let k=0;k<l.values.length;k++)E.push(Ti.interpolate(l.values[k],u.values[k],v,b));return new ys(E)}}class An extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const Ka=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Zn{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Zn)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let u=0;u<l.length;u+=2){const v=l[u],b=l[u+1];if(typeof v!="string"||!Ka.has(v)||!Array.isArray(b)||b.length!==2||typeof b[0]!="number"||typeof b[1]!="number")return}return new Zn(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,v){const b=l.values,E=u.values;if(b.length!==E.length)throw new An(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${u.toString()}`);const k=[];for(let P=0;P<b.length;P+=2){if(b[P]!==E[P])throw new An(`Cannot interpolate values containing mismatched anchors. from[${P}]: ${b[P]}, to[${P}]: ${E[P]}`);k.push(b[P]);const[Q,q]=b[P+1],[J,oe]=E[P+1];k.push([Aa(Q,J,v),Aa(q,oe,v)])}return new Zn(k)}}class Ls{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Ls({name:l,available:!1}):null}}class _a{constructor(l,u,v){this.from=l,this.to=u,this.transition=v}static interpolate(l,u,v){return new _a(l,u,v)}static parse(l){return l instanceof _a?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new _a(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new _a(l.from,l.to,l.transition):typeof l=="string"?new _a(l,l,1):void 0}}function tl(A,l,u,v){return typeof A=="number"&&A>=0&&A<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof u=="number"&&u>=0&&u<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[A,l,u,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[A,l,u,v]:[A,l,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _n(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof _a||A instanceof Ti||A instanceof nu||A instanceof Ua||A instanceof li||A instanceof Hs||A instanceof ys||A instanceof Zn||A instanceof Ls)return!0;if(Array.isArray(A)){for(const l of A)if(!_n(l))return!1;return!0}if(typeof A=="object"){for(const l in A)if(!_n(A[l]))return!1;return!0}return!1}function kn(A){if(A===null)return it;if(typeof A=="string")return nt;if(typeof A=="boolean")return It;if(typeof A=="number")return He;if(A instanceof Ti)return sr;if(A instanceof _a)return Qt;if(A instanceof nu)return _r;if(A instanceof Ua)return Mr;if(A instanceof li)return Vr;if(A instanceof Hs)return zr;if(A instanceof ys)return Ir;if(A instanceof Zn)return ki;if(A instanceof Ls)return yi;if(Array.isArray(A)){const l=A.length;let u;for(const v of A){const b=kn(v);if(u){if(u===b)continue;u=jt;break}u=b}return Ni(u||jt,l)}return Xt}function Ki(A){const l=typeof A;return A===null?"":l==="string"||l==="number"||l==="boolean"?String(A):A instanceof Ti||A instanceof _a||A instanceof Ua||A instanceof li||A instanceof Hs||A instanceof ys||A instanceof Zn||A instanceof Ls?A.toString():JSON.stringify(A)}class di{constructor(l,u){this.type=l,this.value=u}static parse(l,u){if(l.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!_n(l[1]))return u.error("invalid value");const v=l[1];let b=kn(v);const E=u.expectedType;return b.kind!=="array"||b.N!==0||!E||E.kind!=="array"||typeof E.N=="number"&&E.N!==0||(b=E),new di(b,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Vs={string:nt,number:He,boolean:It,object:Xt};class bi{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");let v,b=1;const E=l[0];if(E==="array"){let P,Q;if(l.length>2){const q=l[1];if(typeof q!="string"||!(q in Vs)||q==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);P=Vs[q],b++}else P=jt;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return u.error('The length argument to "array" must be a positive integer literal',2);Q=l[2],b++}v=Ni(P,Q)}else{if(!Vs[E])throw new Error(`Types doesn't contain name = ${E}`);v=Vs[E]}const k=[];for(;b<l.length;b++){const P=u.parse(l[b],b,jt);if(!P)return null;k.push(P)}return new bi(v,k)}evaluate(l){for(let u=0;u<this.args.length;u++){const v=this.args[u].evaluate(l);if(!Pa(this.type,kn(v)))return v;if(u===this.args.length-1)throw new An(`Expected value to be of type ${_i(this.type)}, but found ${_i(kn(v))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Wl={"to-boolean":It,"to-color":sr,"to-number":He,"to-string":nt};class _s{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");const v=l[0];if(!Wl[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&l.length!==2)return u.error("Expected one argument.");const b=Wl[v],E=[];for(let k=1;k<l.length;k++){const P=u.parse(l[k],k,jt);if(!P)return null;E.push(P)}return new _s(b,E)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let u,v;for(const b of this.args){if(u=b.evaluate(l),v=null,u instanceof Ti)return u;if(typeof u=="string"){const E=l.parseColor(u);if(E)return E}else if(Array.isArray(u)&&(v=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:tl(u[0],u[1],u[2],u[3]),!v))return new Ti(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new An(v||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const v of this.args){u=v.evaluate(l);const b=li.parse(u);if(b)return b}throw new An(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"numberArray":{let u;for(const v of this.args){u=v.evaluate(l);const b=Hs.parse(u);if(b)return b}throw new An(`Could not parse numberArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"colorArray":{let u;for(const v of this.args){u=v.evaluate(l);const b=ys.parse(u);if(b)return b}throw new An(`Could not parse colorArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const v of this.args){u=v.evaluate(l);const b=Zn.parse(u);if(b)return b}throw new An(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const v of this.args){if(u=v.evaluate(l),u===null)return 0;const b=Number(u);if(!isNaN(b))return b}throw new An(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Ua.fromString(Ki(this.args[0].evaluate(l)));case"resolvedImage":return Ls.fromString(Ki(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return Ki(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const $l=["Unknown","Point","LineString","Polygon"];class Xl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?$l[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let u=this._parseColorCache.get(l);return u||(u=Ti.parse(l),this._parseColorCache.set(l,u)),u}}class yl{constructor(l,u,v=[],b,E=new $e,k=[]){this.registry=l,this.path=v,this.key=v.map(P=>`[${P}]`).join(""),this.scope=E,this.errors=k,this.expectedType=b,this._isConstant=u}parse(l,u,v,b,E={}){return u?this.concat(u,v,b)._parse(l,E):this._parse(l,E)}_parse(l,u){function v(b,E,k){return k==="assert"?new bi(E,[b]):k==="coerce"?new _s(E,[b]):b}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=l[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[b];if(E){let k=E.parse(l,this);if(!k)return null;if(this.expectedType){const P=this.expectedType,Q=k.type;if(P.kind!=="string"&&P.kind!=="number"&&P.kind!=="boolean"&&P.kind!=="object"&&P.kind!=="array"||Q.kind!=="value"){if(P.kind==="projectionDefinition"&&["string","array"].includes(Q.kind)||["color","formatted","resolvedImage"].includes(P.kind)&&["value","string"].includes(Q.kind)||["padding","numberArray"].includes(P.kind)&&["value","number","array"].includes(Q.kind)||P.kind==="colorArray"&&["value","string","array"].includes(Q.kind)||P.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(Q.kind))k=v(k,P,u.typeAnnotation||"coerce");else if(this.checkSubtype(P,Q))return null}else k=v(k,P,u.typeAnnotation||"assert")}if(!(k instanceof di)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){const P=new Xl;try{k=new di(k.type,k.evaluate(P))}catch(Q){return this.error(Q.message),null}}return k}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,u,v){const b=typeof l=="number"?this.path.concat(l):this.path,E=v?this.scope.concat(v):this.scope;return new yl(this.registry,this._isConstant,b,u||null,E,this.errors)}error(l,...u){const v=`${this.key}${u.map(b=>`[${b}]`).join("")}`;this.errors.push(new ct(v,l))}checkSubtype(l,u){const v=Pa(l,u);return v&&this.error(v),v}}class No{constructor(l,u){this.type=u.type,this.bindings=[].concat(l),this.result=u}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const u of this.bindings)l(u[1]);l(this.result)}static parse(l,u){if(l.length<4)return u.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const v=[];for(let E=1;E<l.length-1;E+=2){const k=l[E];if(typeof k!="string")return u.error(`Expected string, but found ${typeof k} instead.`,E);if(/[^a-zA-Z0-9_]/.test(k))return u.error("Variable names must contain only alphanumeric characters or '_'.",E);const P=u.parse(l[E+1],E+1);if(!P)return null;v.push([k,P])}const b=u.parse(l[l.length-1],l.length-1,u.expectedType,v);return b?new No(v,b):null}outputDefined(){return this.result.outputDefined()}}class Io{constructor(l,u){this.type=u.type,this.name=l,this.boundExpression=u}static parse(l,u){if(l.length!==2||typeof l[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const v=l[1];return u.scope.has(v)?new Io(v,u.scope.get(v)):u.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class Tu{constructor(l,u,v){this.type=l,this.index=u,this.input=v}static parse(l,u){if(l.length!==3)return u.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const v=u.parse(l[1],1,He),b=u.parse(l[2],2,Ni(u.expectedType||jt));return v&&b?new Tu(b.type.itemType,v,b):null}evaluate(l){const u=this.index.evaluate(l),v=this.input.evaluate(l);if(u<0)throw new An(`Array index out of bounds: ${u} < 0.`);if(u>=v.length)throw new An(`Array index out of bounds: ${u} > ${v.length-1}.`);if(u!==Math.floor(u))throw new An(`Array index must be an integer, but found ${u} instead.`);return v[u]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class uh{constructor(l,u){this.type=It,this.needle=l,this.haystack=u}static parse(l,u){if(l.length!==3)return u.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const v=u.parse(l[1],1,jt),b=u.parse(l[2],2,jt);return v&&b?Da(v.type,[It,nt,He,it,jt])?new uh(v,b):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${_i(v.type)} instead`):null}evaluate(l){const u=this.needle.evaluate(l),v=this.haystack.evaluate(l);if(!v)return!1;if(!ea(u,["boolean","string","number","null"]))throw new An(`Expected first argument to be of type boolean, string, number or null, but found ${_i(kn(u))} instead.`);if(!ea(v,["string","array"]))throw new An(`Expected second argument to be of type array or string, but found ${_i(kn(v))} instead.`);return v.indexOf(u)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Fu{constructor(l,u,v){this.type=He,this.needle=l,this.haystack=u,this.fromIndex=v}static parse(l,u){if(l.length<=2||l.length>=5)return u.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const v=u.parse(l[1],1,jt),b=u.parse(l[2],2,jt);if(!v||!b)return null;if(!Da(v.type,[It,nt,He,it,jt]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${_i(v.type)} instead`);if(l.length===4){const E=u.parse(l[3],3,He);return E?new Fu(v,b,E):null}return new Fu(v,b)}evaluate(l){const u=this.needle.evaluate(l),v=this.haystack.evaluate(l);if(!ea(u,["boolean","string","number","null"]))throw new An(`Expected first argument to be of type boolean, string, number or null, but found ${_i(kn(u))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(l)),ea(v,["string"])){const E=v.indexOf(u,b);return E===-1?-1:[...v.slice(0,E)].length}if(ea(v,["array"]))return v.indexOf(u,b);throw new An(`Expected second argument to be of type array or string, but found ${_i(kn(v))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class ba{constructor(l,u,v,b,E,k){this.inputType=l,this.type=u,this.input=v,this.cases=b,this.outputs=E,this.otherwise=k}static parse(l,u){if(l.length<5)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return u.error("Expected an even number of arguments.");let v,b;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);const E={},k=[];for(let q=2;q<l.length-1;q+=2){let J=l[q];const oe=l[q+1];Array.isArray(J)||(J=[J]);const ve=u.concat(q);if(J.length===0)return ve.error("Expected at least one branch label.");for(const Fe of J){if(typeof Fe!="number"&&typeof Fe!="string")return ve.error("Branch labels must be numbers or strings.");if(typeof Fe=="number"&&Math.abs(Fe)>Number.MAX_SAFE_INTEGER)return ve.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Fe=="number"&&Math.floor(Fe)!==Fe)return ve.error("Numeric branch labels must be integer values.");if(v){if(ve.checkSubtype(v,kn(Fe)))return null}else v=kn(Fe);if(E[String(Fe)]!==void 0)return ve.error("Branch labels must be unique.");E[String(Fe)]=k.length}const Be=u.parse(oe,q,b);if(!Be)return null;b=b||Be.type,k.push(Be)}const P=u.parse(l[1],1,jt);if(!P)return null;const Q=u.parse(l[l.length-1],l.length-1,b);return Q?P.type.kind!=="value"&&u.concat(1).checkSubtype(v,P.type)?null:new ba(v,b,P,E,k,Q):null}evaluate(l){const u=this.input.evaluate(l);return(kn(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class Kn{constructor(l,u,v){this.type=l,this.branches=u,this.otherwise=v}static parse(l,u){if(l.length<4)return u.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return u.error("Expected an odd number of arguments.");let v;u.expectedType&&u.expectedType.kind!=="value"&&(v=u.expectedType);const b=[];for(let k=1;k<l.length-1;k+=2){const P=u.parse(l[k],k,It);if(!P)return null;const Q=u.parse(l[k+1],k+1,v);if(!Q)return null;b.push([P,Q]),v=v||Q.type}const E=u.parse(l[l.length-1],l.length-1,v);if(!E)return null;if(!v)throw new Error("Can't infer output type");return new Kn(v,b,E)}evaluate(l){for(const[u,v]of this.branches)if(u.evaluate(l))return v.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[u,v]of this.branches)l(u),l(v);l(this.otherwise)}outputDefined(){return this.branches.every(([l,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class yc{constructor(l,u,v,b){this.type=l,this.input=u,this.beginIndex=v,this.endIndex=b}static parse(l,u){if(l.length<=2||l.length>=5)return u.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const v=u.parse(l[1],1,jt),b=u.parse(l[2],2,He);if(!v||!b)return null;if(!Da(v.type,[Ni(jt),nt,jt]))return u.error(`Expected first argument to be of type array or string, but found ${_i(v.type)} instead`);if(l.length===4){const E=u.parse(l[3],3,He);return E?new yc(v.type,v,b,E):null}return new yc(v.type,v,b)}evaluate(l){const u=this.input.evaluate(l),v=this.beginIndex.evaluate(l);let b;if(this.endIndex&&(b=this.endIndex.evaluate(l)),ea(u,["string"]))return[...u].slice(v,b).join("");if(ea(u,["array"]))return u.slice(v,b);throw new An(`Expected first argument to be of type array or string, but found ${_i(kn(u))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Zl(A,l){const u=A.length-1;let v,b,E=0,k=u,P=0;for(;E<=k;)if(P=Math.floor((E+k)/2),v=A[P],b=A[P+1],v<=l){if(P===u||l<b)return P;E=P+1}else{if(!(v>l))throw new An("Input is not a number.");k=P-1}return 0}class Yl{constructor(l,u,v){this.type=l,this.input=u,this.labels=[],this.outputs=[];for(const[b,E]of v)this.labels.push(b),this.outputs.push(E)}static parse(l,u){if(l.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return u.error("Expected an even number of arguments.");const v=u.parse(l[1],1,He);if(!v)return null;const b=[];let E=null;u.expectedType&&u.expectedType.kind!=="value"&&(E=u.expectedType);for(let k=1;k<l.length;k+=2){const P=k===1?-1/0:l[k],Q=l[k+1],q=k,J=k+1;if(typeof P!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(b.length&&b[b.length-1][0]>=P)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',q);const oe=u.parse(Q,J,E);if(!oe)return null;E=E||oe.type,b.push([P,oe])}return new Yl(E,v,b)}evaluate(l){const u=this.labels,v=this.outputs;if(u.length===1)return v[0].evaluate(l);const b=this.input.evaluate(l);if(b<=u[0])return v[0].evaluate(l);const E=u.length;return b>=u[E-1]?v[E-1].evaluate(l):v[Zl(u,b)].evaluate(l)}eachChild(l){l(this.input);for(const u of this.outputs)l(u)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function Y(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var ke,ft,Tt=function(){if(ft)return ke;function A(l,u,v,b){this.cx=3*l,this.bx=3*(v-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=u,this.p2x=v,this.p2y=b}return ft=1,ke=A,A.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,u){if(u===void 0&&(u=1e-6),l<0)return 0;if(l>1)return 1;for(var v=l,b=0;b<8;b++){var E=this.sampleCurveX(v)-l;if(Math.abs(E)<u)return v;var k=this.sampleCurveDerivativeX(v);if(Math.abs(k)<1e-6)break;v-=E/k}var P=0,Q=1;for(v=l,b=0;b<20&&(E=this.sampleCurveX(v),!(Math.abs(E-l)<u));b++)l>E?P=v:Q=v,v=.5*(Q-P)+P;return v},solve:function(l,u){return this.sampleCurveY(this.solveCurveX(l,u))}},ke}(),Wt=Y(Tt);class lr{constructor(l,u,v,b,E){this.type=l,this.operator=u,this.interpolation=v,this.input=b,this.labels=[],this.outputs=[];for(const[k,P]of E)this.labels.push(k),this.outputs.push(P)}static interpolationFactor(l,u,v,b){let E=0;if(l.name==="exponential")E=br(u,l.base,v,b);else if(l.name==="linear")E=br(u,1,v,b);else if(l.name==="cubic-bezier"){const k=l.controlPoints;E=new Wt(k[0],k[1],k[2],k[3]).solve(br(u,1,v,b))}return E}static parse(l,u){let[v,b,E,...k]=l;if(!Array.isArray(b)||b.length===0)return u.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const q=b[1];if(typeof q!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:q}}else{if(b[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const q=b.slice(1);if(q.length!==4||q.some(J=>typeof J!="number"||J<0||J>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:q}}}if(l.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(E=u.parse(E,2,He),!E)return null;const P=[];let Q=null;v!=="interpolate-hcl"&&v!=="interpolate-lab"||u.expectedType==Ir?u.expectedType&&u.expectedType.kind!=="value"&&(Q=u.expectedType):Q=sr;for(let q=0;q<k.length;q+=2){const J=k[q],oe=k[q+1],ve=q+3,Be=q+4;if(typeof J!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ve);if(P.length&&P[P.length-1][0]>=J)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ve);const Fe=u.parse(oe,Be,Q);if(!Fe)return null;Q=Q||Fe.type,P.push([J,Fe])}return xa(Q,He)||xa(Q,Qt)||xa(Q,sr)||xa(Q,Vr)||xa(Q,zr)||xa(Q,Ir)||xa(Q,ki)||xa(Q,Ni(He))?new lr(Q,v,b,E,P):u.error(`Type ${_i(Q)} is not interpolatable.`)}evaluate(l){const u=this.labels,v=this.outputs;if(u.length===1)return v[0].evaluate(l);const b=this.input.evaluate(l);if(b<=u[0])return v[0].evaluate(l);const E=u.length;if(b>=u[E-1])return v[E-1].evaluate(l);const k=Zl(u,b),P=lr.interpolationFactor(this.interpolation,b,u[k],u[k+1]),Q=v[k].evaluate(l),q=v[k+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Aa(Q,q,P);case"color":return Ti.interpolate(Q,q,P);case"padding":return li.interpolate(Q,q,P);case"colorArray":return ys.interpolate(Q,q,P);case"numberArray":return Hs.interpolate(Q,q,P);case"variableAnchorOffsetCollection":return Zn.interpolate(Q,q,P);case"array":return el(Q,q,P);case"projectionDefinition":return _a.interpolate(Q,q,P)}case"interpolate-hcl":switch(this.type.kind){case"color":return Ti.interpolate(Q,q,P,"hcl");case"colorArray":return ys.interpolate(Q,q,P,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Ti.interpolate(Q,q,P,"lab");case"colorArray":return ys.interpolate(Q,q,P,"lab")}}}eachChild(l){l(this.input);for(const u of this.outputs)l(u)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function br(A,l,u,v){const b=v-u,E=A-u;return b===0?0:l===1?E/b:(Math.pow(l,E)-1)/(Math.pow(l,b)-1)}const qr={color:Ti.interpolate,number:Aa,padding:li.interpolate,numberArray:Hs.interpolate,colorArray:ys.interpolate,variableAnchorOffsetCollection:Zn.interpolate,array:el};class ui{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");let v=null;const b=u.expectedType;b&&b.kind!=="value"&&(v=b);const E=[];for(const P of l.slice(1)){const Q=u.parse(P,1+E.length,v,void 0,{typeAnnotation:"omit"});if(!Q)return null;v=v||Q.type,E.push(Q)}if(!v)throw new Error("No output type");const k=b&&E.some(P=>Pa(b,P.type));return new ui(k?jt:v,E)}evaluate(l){let u,v=null,b=0;for(const E of this.args)if(b++,v=E.evaluate(l),v&&v instanceof Ls&&!v.available&&(u||(u=v.name),v=null,b===this.args.length&&(v=u)),v!==null)break;return v}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}function Ui(A,l){return A==="=="||A==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function Hi(A,l,u,v){return v.compare(l,u)===0}function Xi(A,l,u){const v=A!=="=="&&A!=="!=";return class NL{constructor(E,k,P){this.type=It,this.lhs=E,this.rhs=k,this.collator=P,this.hasUntypedArgument=E.type.kind==="value"||k.type.kind==="value"}static parse(E,k){if(E.length!==3&&E.length!==4)return k.error("Expected two or three arguments.");const P=E[0];let Q=k.parse(E[1],1,jt);if(!Q)return null;if(!Ui(P,Q.type))return k.concat(1).error(`"${P}" comparisons are not supported for type '${_i(Q.type)}'.`);let q=k.parse(E[2],2,jt);if(!q)return null;if(!Ui(P,q.type))return k.concat(2).error(`"${P}" comparisons are not supported for type '${_i(q.type)}'.`);if(Q.type.kind!==q.type.kind&&Q.type.kind!=="value"&&q.type.kind!=="value")return k.error(`Cannot compare types '${_i(Q.type)}' and '${_i(q.type)}'.`);v&&(Q.type.kind==="value"&&q.type.kind!=="value"?Q=new bi(q.type,[Q]):Q.type.kind!=="value"&&q.type.kind==="value"&&(q=new bi(Q.type,[q])));let J=null;if(E.length===4){if(Q.type.kind!=="string"&&q.type.kind!=="string"&&Q.type.kind!=="value"&&q.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(J=k.parse(E[3],3,_r),!J)return null}return new NL(Q,q,J)}evaluate(E){const k=this.lhs.evaluate(E),P=this.rhs.evaluate(E);if(v&&this.hasUntypedArgument){const Q=kn(k),q=kn(P);if(Q.kind!==q.kind||Q.kind!=="string"&&Q.kind!=="number")throw new An(`Expected arguments for "${A}" to be (string, string) or (number, number), but found (${Q.kind}, ${q.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const Q=kn(k),q=kn(P);if(Q.kind!=="string"||q.kind!=="string")return l(E,k,P)}return this.collator?u(E,k,P,this.collator.evaluate(E)):l(E,k,P)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}}}const Cn=Xi("==",function(A,l,u){return l===u},Hi),Gs=Xi("!=",function(A,l,u){return l!==u},function(A,l,u,v){return!Hi(0,l,u,v)}),Qn=Xi("<",function(A,l,u){return l<u},function(A,l,u,v){return v.compare(l,u)<0}),fa=Xi(">",function(A,l,u){return l>u},function(A,l,u,v){return v.compare(l,u)>0}),Ms=Xi("<=",function(A,l,u){return l<=u},function(A,l,u,v){return v.compare(l,u)<=0}),ja=Xi(">=",function(A,l,u){return l>=u},function(A,l,u,v){return v.compare(l,u)>=0});class _l{constructor(l,u,v){this.type=_r,this.locale=v,this.caseSensitive=l,this.diacriticSensitive=u}static parse(l,u){if(l.length!==2)return u.error("Expected one argument.");const v=l[1];if(typeof v!="object"||Array.isArray(v))return u.error("Collator options argument must be an object.");const b=u.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,It);if(!b)return null;const E=u.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,It);if(!E)return null;let k=null;return v.locale&&(k=u.parse(v.locale,1,nt),!k)?null:new _l(b,E,k)}evaluate(l){return new nu(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class rl{constructor(l,u,v,b,E){this.type=nt,this.number=l,this.locale=u,this.currency=v,this.minFractionDigits=b,this.maxFractionDigits=E}static parse(l,u){if(l.length!==3)return u.error("Expected two arguments.");const v=u.parse(l[1],1,He);if(!v)return null;const b=l[2];if(typeof b!="object"||Array.isArray(b))return u.error("NumberFormat options argument must be an object.");let E=null;if(b.locale&&(E=u.parse(b.locale,1,nt),!E))return null;let k=null;if(b.currency&&(k=u.parse(b.currency,1,nt),!k))return null;let P=null;if(b["min-fraction-digits"]&&(P=u.parse(b["min-fraction-digits"],1,He),!P))return null;let Q=null;return b["max-fraction-digits"]&&(Q=u.parse(b["max-fraction-digits"],1,He),!Q)?null:new rl(v,E,k,P,Q)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class bl{constructor(l){this.type=Mr,this.sections=l}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");const v=l[1];if(!Array.isArray(v)&&typeof v=="object")return u.error("First argument must be an image or text section.");const b=[];let E=!1;for(let k=1;k<=l.length-1;++k){const P=l[k];if(E&&typeof P=="object"&&!Array.isArray(P)){E=!1;let Q=null;if(P["font-scale"]&&(Q=u.parse(P["font-scale"],1,He),!Q))return null;let q=null;if(P["text-font"]&&(q=u.parse(P["text-font"],1,Ni(nt)),!q))return null;let J=null;if(P["text-color"]&&(J=u.parse(P["text-color"],1,sr),!J))return null;let oe=null;if(P["vertical-align"]){if(typeof P["vertical-align"]=="string"&&!qa.includes(P["vertical-align"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${P["vertical-align"]}' instead.`);if(oe=u.parse(P["vertical-align"],1,nt),!oe)return null}const ve=b[b.length-1];ve.scale=Q,ve.font=q,ve.textColor=J,ve.verticalAlign=oe}else{const Q=u.parse(l[k],1,jt);if(!Q)return null;const q=Q.type.kind;if(q!=="string"&&q!=="value"&&q!=="null"&&q!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,b.push({content:Q,scale:null,font:null,textColor:null,verticalAlign:null})}}return new bl(b)}evaluate(l){return new Ua(this.sections.map(u=>{const v=u.content.evaluate(l);return kn(v)===yi?new oo("",v,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(l):null):new oo(Ki(v),null,u.scale?u.scale.evaluate(l):null,u.font?u.font.evaluate(l).join(","):null,u.textColor?u.textColor.evaluate(l):null,u.verticalAlign?u.verticalAlign.evaluate(l):null)}))}eachChild(l){for(const u of this.sections)l(u.content),u.scale&&l(u.scale),u.font&&l(u.font),u.textColor&&l(u.textColor),u.verticalAlign&&l(u.verticalAlign)}outputDefined(){return!1}}class wl{constructor(l){this.type=yi,this.input=l}static parse(l,u){if(l.length!==2)return u.error("Expected two arguments.");const v=u.parse(l[1],1,nt);return v?new wl(v):u.error("No image name provided.")}evaluate(l){const u=this.input.evaluate(l),v=Ls.fromString(u);return v&&l.availableImages&&(v.available=l.availableImages.indexOf(u)>-1),v}eachChild(l){l(this.input)}outputDefined(){return!1}}class Bl{constructor(l){this.type=He,this.input=l}static parse(l,u){if(l.length!==2)return u.error(`Expected 1 argument, but found ${l.length-1} instead.`);const v=u.parse(l[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${_i(v.type)} instead.`):new Bl(v):null}evaluate(l){const u=this.input.evaluate(l);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new An(`Expected value to be of type string or array, but found ${_i(kn(u))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const wa=8192;function su(A,l){const u=(180+A[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,b=Math.pow(2,l.z);return[Math.round(u*b*wa),Math.round(v*b*wa)]}function _c(A,l){const u=Math.pow(2,l.z);return[(b=(A[0]/wa+l.x)/u,360*b-180),(v=(A[1]/wa+l.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*v)*Math.PI/180))-90)];var v,b}function Lo(A,l){A[0]=Math.min(A[0],l[0]),A[1]=Math.min(A[1],l[1]),A[2]=Math.max(A[2],l[0]),A[3]=Math.max(A[3],l[1])}function Ps(A,l){return!(A[0]<=l[0]||A[2]>=l[2]||A[1]<=l[1]||A[3]>=l[3])}function ku(A,l,u){const v=A[0]-l[0],b=A[1]-l[1],E=A[0]-u[0],k=A[1]-u[1];return v*k-E*b==0&&v*E<=0&&b*k<=0}function lo(A,l,u,v){return(b=[v[0]-u[0],v[1]-u[1]])[0]*(E=[l[0]-A[0],l[1]-A[1]])[1]-b[1]*E[0]!=0&&!(!au(A,l,u,v)||!au(u,v,A,l));var b,E}function hA(A,l,u){for(const v of u)for(let b=0;b<v.length-1;++b)if(lo(A,l,v[b],v[b+1]))return!0;return!1}function bc(A,l,u=!1){let v=!1;for(const P of l)for(let Q=0;Q<P.length-1;Q++){if(ku(A,P[Q],P[Q+1]))return u;(E=P[Q])[1]>(b=A)[1]!=(k=P[Q+1])[1]>b[1]&&b[0]<(k[0]-E[0])*(b[1]-E[1])/(k[1]-E[1])+E[0]&&(v=!v)}var b,E,k;return v}function Wa(A,l){for(const u of l)if(bc(A,u))return!0;return!1}function Cl(A,l){for(const u of A)if(!bc(u,l))return!1;for(let u=0;u<A.length-1;++u)if(hA(A[u],A[u+1],l))return!1;return!0}function Nu(A,l){for(const u of l)if(Cl(A,u))return!0;return!1}function au(A,l,u,v){const b=v[0]-u[0],E=v[1]-u[1],k=(A[0]-u[0])*E-b*(A[1]-u[1]),P=(l[0]-u[0])*E-b*(l[1]-u[1]);return k>0&&P<0||k<0&&P>0}function Ba(A,l,u){const v=[];for(let b=0;b<A.length;b++){const E=[];for(let k=0;k<A[b].length;k++){const P=su(A[b][k],u);Lo(l,P),E.push(P)}v.push(E)}return v}function Iu(A,l,u){const v=[];for(let b=0;b<A.length;b++){const E=Ba(A[b],l,u);v.push(E)}return v}function ou(A,l,u,v){if(A[0]<u[0]||A[0]>u[2]){const b=.5*v;let E=A[0]-u[0]>b?-v:u[0]-A[0]>b?v:0;E===0&&(E=A[0]-u[2]>b?-v:u[2]-A[0]>b?v:0),A[0]+=E}Lo(l,A)}function wc(A,l,u,v){const b=Math.pow(2,v.z)*wa,E=[v.x*wa,v.y*wa],k=[];for(const P of A)for(const Q of P){const q=[Q.x+E[0],Q.y+E[1]];ou(q,l,u,b),k.push(q)}return k}function Bc(A,l,u,v){const b=Math.pow(2,v.z)*wa,E=[v.x*wa,v.y*wa],k=[];for(const Q of A){const q=[];for(const J of Q){const oe=[J.x+E[0],J.y+E[1]];Lo(l,oe),q.push(oe)}k.push(q)}if(l[2]-l[0]<=b/2){(P=l)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(const Q of k)for(const q of Q)ou(q,l,u,b)}var P;return k}class co{constructor(l,u){this.type=It,this.geojson=l,this.geometries=u}static parse(l,u){if(l.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(_n(l[1])){const v=l[1];if(v.type==="FeatureCollection"){const b=[];for(const E of v.features){const{type:k,coordinates:P}=E.geometry;k==="Polygon"&&b.push(P),k==="MultiPolygon"&&b.push(...P)}if(b.length)return new co(v,{type:"MultiPolygon",coordinates:b})}else if(v.type==="Feature"){const b=v.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new co(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new co(v,v)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(u,v){const b=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],k=u.canonicalID();if(v.type==="Polygon"){const P=Ba(v.coordinates,E,k),Q=wc(u.geometry(),b,E,k);if(!Ps(b,E))return!1;for(const q of Q)if(!bc(q,P))return!1}if(v.type==="MultiPolygon"){const P=Iu(v.coordinates,E,k),Q=wc(u.geometry(),b,E,k);if(!Ps(b,E))return!1;for(const q of Q)if(!Wa(q,P))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(u,v){const b=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],k=u.canonicalID();if(v.type==="Polygon"){const P=Ba(v.coordinates,E,k),Q=Bc(u.geometry(),b,E,k);if(!Ps(b,E))return!1;for(const q of Q)if(!Cl(q,P))return!1}if(v.type==="MultiPolygon"){const P=Iu(v.coordinates,E,k),Q=Bc(u.geometry(),b,E,k);if(!Ps(b,E))return!1;for(const q of Q)if(!Nu(q,P))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let $a=class{constructor(A=[],l=(u,v)=>u<v?-1:u>v?1:0){if(this.data=A,this.length=this.data.length,this.compare=l,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(A){this.data.push(A),this._up(this.length++)}pop(){if(this.length===0)return;const A=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),A}peek(){return this.data[0]}_up(A){const{data:l,compare:u}=this,v=l[A];for(;A>0;){const b=A-1>>1,E=l[b];if(u(v,E)>=0)break;l[A]=E,A=b}l[A]=v}_down(A){const{data:l,compare:u}=this,v=this.length>>1,b=l[A];for(;A<v;){let E=1+(A<<1);const k=E+1;if(k<this.length&&u(l[k],l[E])<0&&(E=k),u(l[E],b)>=0)break;l[A]=l[E],A=E}l[A]=b}};function uo(A,l,u=0,v=A.length-1,b=Jl){for(;v>u;){if(v-u>600){const Q=v-u+1,q=l-u+1,J=Math.log(Q),oe=.5*Math.exp(2*J/3),ve=.5*Math.sqrt(J*oe*(Q-oe)/Q)*(q-Q/2<0?-1:1);uo(A,l,Math.max(u,Math.floor(l-q*oe/Q+ve)),Math.min(v,Math.floor(l+(Q-q)*oe/Q+ve)),b)}const E=A[l];let k=u,P=v;for(ho(A,u,l),b(A[v],E)>0&&ho(A,u,v);k<P;){for(ho(A,k,P),k++,P--;b(A[k],E)<0;)k++;for(;b(A[P],E)>0;)P--}b(A[u],E)===0?ho(A,u,P):(P++,ho(A,P,v)),P<=l&&(u=P+1),l<=P&&(v=P-1)}}function ho(A,l,u){const v=A[l];A[l]=A[u],A[u]=v}function Jl(A,l){return A<l?-1:A>l?1:0}function ec(A,l){if(A.length<=1)return[A];const u=[];let v,b;for(const E of A){const k=hh(E);k!==0&&(E.area=Math.abs(k),b===void 0&&(b=k<0),b===k<0?(v&&u.push(v),v=[E]):v.push(E))}if(v&&u.push(v),l>1)for(let E=0;E<u.length;E++)u[E].length<=l||(uo(u[E],l,1,u[E].length-1,AA),u[E]=u[E].slice(0,l));return u}function AA(A,l){return l.area-A.area}function hh(A){let l=0;for(let u,v,b=0,E=A.length,k=E-1;b<E;k=b++)u=A[b],v=A[k],l+=(v.x-u.x)*(u.y+v.y);return l}const bs=1/298.257223563,fA=bs*(2-bs),ws=Math.PI/180;class Xa{constructor(l){const u=6378.137*ws*1e3,v=Math.cos(l*ws),b=1/(1-fA*(1-v*v)),E=Math.sqrt(b);this.kx=u*E*v,this.ky=u*E*b*(1-fA)}distance(l,u){const v=this.wrap(l[0]-u[0])*this.kx,b=(l[1]-u[1])*this.ky;return Math.sqrt(v*v+b*b)}pointOnLine(l,u){let v,b,E,k,P=1/0;for(let Q=0;Q<l.length-1;Q++){let q=l[Q][0],J=l[Q][1],oe=this.wrap(l[Q+1][0]-q)*this.kx,ve=(l[Q+1][1]-J)*this.ky,Be=0;oe===0&&ve===0||(Be=(this.wrap(u[0]-q)*this.kx*oe+(u[1]-J)*this.ky*ve)/(oe*oe+ve*ve),Be>1?(q=l[Q+1][0],J=l[Q+1][1]):Be>0&&(q+=oe/this.kx*Be,J+=ve/this.ky*Be)),oe=this.wrap(u[0]-q)*this.kx,ve=(u[1]-J)*this.ky;const Fe=oe*oe+ve*ve;Fe<P&&(P=Fe,v=q,b=J,E=Q,k=Be)}return{point:[v,b],index:E,t:Math.max(0,Math.min(1,k))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function Lu(A,l){return l[0]-A[0]}function lu(A){return A[1]-A[0]+1}function Mo(A,l){return A[1]>=A[0]&&A[1]<l}function Mu(A,l){if(A[0]>A[1])return[null,null];const u=lu(A);if(l){if(u===2)return[A,null];const b=Math.floor(u/2);return[[A[0],A[0]+b],[A[0]+b,A[1]]]}if(u===1)return[A,null];const v=Math.floor(u/2)-1;return[[A[0],A[0]+v],[A[0]+v+1,A[1]]]}function Sl(A,l){if(!Mo(l,A.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let v=l[0];v<=l[1];++v)Lo(u,A[v]);return u}function Ji(A){const l=[1/0,1/0,-1/0,-1/0];for(const u of A)for(const v of u)Lo(l,v);return l}function Po(A){return A[0]!==-1/0&&A[1]!==-1/0&&A[2]!==1/0&&A[3]!==1/0}function tc(A,l,u){if(!Po(A)||!Po(l))return NaN;let v=0,b=0;return A[2]<l[0]&&(v=l[0]-A[2]),A[0]>l[2]&&(v=A[0]-l[2]),A[1]>l[3]&&(b=A[1]-l[3]),A[3]<l[1]&&(b=l[1]-A[3]),u.distance([0,0],[v,b])}function Ca(A,l,u){const v=u.pointOnLine(l,A);return u.distance(A,v.point)}function rc(A,l,u,v,b){const E=Math.min(Ca(A,[u,v],b),Ca(l,[u,v],b)),k=Math.min(Ca(u,[A,l],b),Ca(v,[A,l],b));return Math.min(E,k)}function il(A,l,u,v,b){if(!Mo(l,A.length)||!Mo(v,u.length))return 1/0;let E=1/0;for(let k=l[0];k<l[1];++k){const P=A[k],Q=A[k+1];for(let q=v[0];q<v[1];++q){const J=u[q],oe=u[q+1];if(lo(P,Q,J,oe))return 0;E=Math.min(E,rc(P,Q,J,oe,b))}}return E}function Za(A,l,u,v,b){if(!Mo(l,A.length)||!Mo(v,u.length))return NaN;let E=1/0;for(let k=l[0];k<=l[1];++k)for(let P=v[0];P<=v[1];++P)if(E=Math.min(E,b.distance(A[k],u[P])),E===0)return E;return E}function pn(A,l,u){if(bc(A,l,!0))return 0;let v=1/0;for(const b of l){const E=b[0],k=b[b.length-1];if(E!==k&&(v=Math.min(v,Ca(A,[k,E],u)),v===0))return v;const P=u.pointOnLine(b,A);if(v=Math.min(v,u.distance(A,P.point)),v===0)return v}return v}function zn(A,l,u,v){if(!Mo(l,A.length))return NaN;for(let E=l[0];E<=l[1];++E)if(bc(A[E],u,!0))return 0;let b=1/0;for(let E=l[0];E<l[1];++E){const k=A[E],P=A[E+1];for(const Q of u)for(let q=0,J=Q.length,oe=J-1;q<J;oe=q++){const ve=Q[oe],Be=Q[q];if(lo(k,P,ve,Be))return 0;b=Math.min(b,rc(k,P,ve,Be,v))}}return b}function Bs(A,l){for(const u of A)for(const v of u)if(bc(v,l,!0))return!0;return!1}function os(A,l,u,v=1/0){const b=Ji(A),E=Ji(l);if(v!==1/0&&tc(b,E,u)>=v)return v;if(Ps(b,E)){if(Bs(A,l))return 0}else if(Bs(l,A))return 0;let k=1/0;for(const P of A)for(let Q=0,q=P.length,J=q-1;Q<q;J=Q++){const oe=P[J],ve=P[Q];for(const Be of l)for(let Fe=0,Oe=Be.length,Ze=Oe-1;Fe<Oe;Ze=Fe++){const ht=Be[Ze],Ut=Be[Fe];if(lo(oe,ve,ht,Ut))return 0;k=Math.min(k,rc(oe,ve,ht,Ut,u))}}return k}function ic(A,l,u,v,b,E){if(!E)return;const k=tc(Sl(v,E),b,u);k<l&&A.push([k,E,[0,0]])}function cu(A,l,u,v,b,E,k){if(!E||!k)return;const P=tc(Sl(v,E),Sl(b,k),u);P<l&&A.push([P,E,k])}function Cc(A,l,u,v,b=1/0){let E=Math.min(v.distance(A[0],u[0][0]),b);if(E===0)return E;const k=new $a([[0,[0,A.length-1],[0,0]]],Lu),P=Ji(u);for(;k.length>0;){const Q=k.pop();if(Q[0]>=E)continue;const q=Q[1],J=l?50:100;if(lu(q)<=J){if(!Mo(q,A.length))return NaN;if(l){const oe=zn(A,q,u,v);if(isNaN(oe)||oe===0)return oe;E=Math.min(E,oe)}else for(let oe=q[0];oe<=q[1];++oe){const ve=pn(A[oe],u,v);if(E=Math.min(E,ve),E===0)return 0}}else{const oe=Mu(q,l);ic(k,E,v,A,P,oe[0]),ic(k,E,v,A,P,oe[1])}}return E}function Ah(A,l,u,v,b,E=1/0){let k=Math.min(E,b.distance(A[0],u[0]));if(k===0)return k;const P=new $a([[0,[0,A.length-1],[0,u.length-1]]],Lu);for(;P.length>0;){const Q=P.pop();if(Q[0]>=k)continue;const q=Q[1],J=Q[2],oe=l?50:100,ve=v?50:100;if(lu(q)<=oe&&lu(J)<=ve){if(!Mo(q,A.length)&&Mo(J,u.length))return NaN;let Be;if(l&&v)Be=il(A,q,u,J,b),k=Math.min(k,Be);else if(l&&!v){const Fe=A.slice(q[0],q[1]+1);for(let Oe=J[0];Oe<=J[1];++Oe)if(Be=Ca(u[Oe],Fe,b),k=Math.min(k,Be),k===0)return k}else if(!l&&v){const Fe=u.slice(J[0],J[1]+1);for(let Oe=q[0];Oe<=q[1];++Oe)if(Be=Ca(A[Oe],Fe,b),k=Math.min(k,Be),k===0)return k}else Be=Za(A,q,u,J,b),k=Math.min(k,Be)}else{const Be=Mu(q,l),Fe=Mu(J,v);cu(P,k,b,A,u,Be[0],Fe[0]),cu(P,k,b,A,u,Be[0],Fe[1]),cu(P,k,b,A,u,Be[1],Fe[0]),cu(P,k,b,A,u,Be[1],Fe[1])}}return k}function XA(A){return A.type==="MultiPolygon"?A.coordinates.map(l=>({type:"Polygon",coordinates:l})):A.type==="MultiLineString"?A.coordinates.map(l=>({type:"LineString",coordinates:l})):A.type==="MultiPoint"?A.coordinates.map(l=>({type:"Point",coordinates:l})):[A]}class Pu{constructor(l,u){this.type=He,this.geojson=l,this.geometries=u}static parse(l,u){if(l.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(_n(l[1])){const v=l[1];if(v.type==="FeatureCollection")return new Pu(v,v.features.map(b=>XA(b.geometry)).flat());if(v.type==="Feature")return new Pu(v,XA(v.geometry));if("type"in v&&"coordinates"in v)return new Pu(v,XA(v))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(u,v){const b=u.geometry(),E=b.flat().map(Q=>_c([Q.x,Q.y],u.canonical));if(b.length===0)return NaN;const k=new Xa(E[0][1]);let P=1/0;for(const Q of v){switch(Q.type){case"Point":P=Math.min(P,Ah(E,!1,[Q.coordinates],!1,k,P));break;case"LineString":P=Math.min(P,Ah(E,!1,Q.coordinates,!0,k,P));break;case"Polygon":P=Math.min(P,Cc(E,!1,Q.coordinates,k,P))}if(P===0)return P}return P}(l,this.geometries);if(l.geometryType()==="LineString")return function(u,v){const b=u.geometry(),E=b.flat().map(Q=>_c([Q.x,Q.y],u.canonical));if(b.length===0)return NaN;const k=new Xa(E[0][1]);let P=1/0;for(const Q of v){switch(Q.type){case"Point":P=Math.min(P,Ah(E,!0,[Q.coordinates],!1,k,P));break;case"LineString":P=Math.min(P,Ah(E,!0,Q.coordinates,!0,k,P));break;case"Polygon":P=Math.min(P,Cc(E,!0,Q.coordinates,k,P))}if(P===0)return P}return P}(l,this.geometries);if(l.geometryType()==="Polygon")return function(u,v){const b=u.geometry();if(b.length===0||b[0].length===0)return NaN;const E=ec(b,0).map(Q=>Q.map(q=>q.map(J=>_c([J.x,J.y],u.canonical)))),k=new Xa(E[0][0][0][1]);let P=1/0;for(const Q of v)for(const q of E){switch(Q.type){case"Point":P=Math.min(P,Cc([Q.coordinates],!1,q,k,P));break;case"LineString":P=Math.min(P,Cc(Q.coordinates,!0,q,k,P));break;case"Polygon":P=Math.min(P,os(q,Q.coordinates,k,P))}if(P===0)return P}return P}(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class fh{constructor(l){this.type=jt,this.key=l}static parse(l,u){if(l.length!==2)return u.error(`Expected 1 argument, but found ${l.length-1} instead.`);const v=l[1];return v==null?u.error("Global state property must be defined."):typeof v!="string"?u.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new fh(v)}evaluate(l){var u;const v=(u=l.globals)===null||u===void 0?void 0:u.globalState;return v&&Object.keys(v).length!==0?Jo(v,this.key):null}eachChild(){}outputDefined(){return!1}}const Du={"==":Cn,"!=":Gs,">":fa,"<":Qn,">=":ja,"<=":Ms,array:bi,at:Tu,boolean:bi,case:Kn,coalesce:ui,collator:_l,format:bl,image:wl,in:uh,"index-of":Fu,interpolate:lr,"interpolate-hcl":lr,"interpolate-lab":lr,length:Bl,let:No,literal:di,match:ba,number:bi,"number-format":rl,object:bi,slice:yc,step:Yl,string:bi,"to-boolean":_s,"to-color":_s,"to-number":_s,"to-string":_s,var:Io,within:co,distance:Pu,"global-state":fh};class Ao{constructor(l,u,v,b){this.name=l,this.type=u,this._evaluate=v,this.args=b}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,u){const v=l[0],b=Ao.definitions[v];if(!b)return u.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(b)?b[0]:b.type,k=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,P=k.filter(([q])=>!Array.isArray(q)||q.length===l.length-1);let Q=null;for(const[q,J]of P){Q=new yl(u.registry,Sc,u.path,null,u.scope);const oe=[];let ve=!1;for(let Be=1;Be<l.length;Be++){const Fe=l[Be],Oe=Array.isArray(q)?q[Be-1]:q.type,Ze=Q.parse(Fe,1+oe.length,Oe);if(!Ze){ve=!0;break}oe.push(Ze)}if(!ve)if(Array.isArray(q)&&q.length!==oe.length)Q.error(`Expected ${q.length} arguments, but found ${oe.length} instead.`);else{for(let Be=0;Be<oe.length;Be++){const Fe=Array.isArray(q)?q[Be]:q.type,Oe=oe[Be];Q.concat(Be+1).checkSubtype(Fe,Oe.type)}if(Q.errors.length===0)return new Ao(v,E,J,oe)}}if(P.length===1)u.errors.push(...Q.errors);else{const q=(P.length?P:k).map(([oe])=>{return ve=oe,Array.isArray(ve)?`(${ve.map(_i).join(", ")})`:`(${_i(ve.type)}...)`;var ve}).join(" | "),J=[];for(let oe=1;oe<l.length;oe++){const ve=u.parse(l[oe],1+J.length);if(!ve)return null;J.push(_i(ve.type))}u.error(`Expected arguments of type ${q}, but found (${J.join(", ")}) instead.`)}return null}static register(l,u){Ao.definitions=u;for(const v in u)l[v]=Ao}}function nl(A,[l,u,v,b]){l=l.evaluate(A),u=u.evaluate(A),v=v.evaluate(A);const E=b?b.evaluate(A):1,k=tl(l,u,v,E);if(k)throw new An(k);return new Ti(l/255,u/255,v/255,E,!1)}function dh(A,l){return A in l}function fo(A,l){const u=l[A];return u===void 0?null:u}function da(A){return{type:A}}function Sc(A){if(A instanceof Io)return Sc(A.boundExpression);if(A instanceof Ao&&A.name==="error"||A instanceof _l||A instanceof co||A instanceof Pu||A instanceof fh)return!1;const l=A instanceof _s||A instanceof bi;let u=!0;return A.eachChild(v=>{u=l?u&&Sc(v):u&&v instanceof di}),!!u&&ph(A)&&Ru(A,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ph(A){if(A instanceof Ao&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof co||A instanceof Pu)return!1;let l=!0;return A.eachChild(u=>{l&&!ph(u)&&(l=!1)}),l}function uu(A){if(A instanceof Ao&&A.name==="feature-state")return!1;let l=!0;return A.eachChild(u=>{l&&!uu(u)&&(l=!1)}),l}function Ru(A,l){if(A instanceof Ao&&l.indexOf(A.name)>=0)return!1;let u=!0;return A.eachChild(v=>{u&&!Ru(v,l)&&(u=!1)}),u}function dA(A){return{result:"success",value:A}}function El(A){return{result:"error",value:A}}function hu(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function Uu(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Ds(A){return!!A.expression&&A.expression.interpolated}function Ii(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function pa(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)&&kn(A)===Xt}function Ih(A){return A}function Tl(A,l){const u=A.stops&&typeof A.stops[0][0]=="object",v=u||!(u||A.property!==void 0),b=A.type||(Ds(l)?"exponential":"interval"),E=function(J){switch(J.type){case"color":return Ti.parse;case"padding":return li.parse;case"numberArray":return Hs.parse;case"colorArray":return ys.parse;default:return null}}(l);if(E&&((A=Re({},A)).stops&&(A.stops=A.stops.map(J=>[J[0],E(J[1])])),A.default=E(A.default?A.default:l.default)),A.colorSpace&&(k=A.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${A.colorSpace}"`);var k;const P=function(J){switch(J){case"exponential":return Lh;case"interval":return Fl;case"categorical":return mh;case"identity":return pA;default:throw new Error(`Unknown function type "${J}"`)}}(b);let Q,q;if(b==="categorical"){Q=Object.create(null);for(const J of A.stops)Q[J[0]]=J[1];q=typeof A.stops[0][0]}if(u){const J={},oe=[];for(let Fe=0;Fe<A.stops.length;Fe++){const Oe=A.stops[Fe],Ze=Oe[0].zoom;J[Ze]===void 0&&(J[Ze]={zoom:Ze,type:A.type,property:A.property,default:A.default,stops:[]},oe.push(Ze)),J[Ze].stops.push([Oe[0].value,Oe[1]])}const ve=[];for(const Fe of oe)ve.push([J[Fe].zoom,Tl(J[Fe],l)]);const Be={name:"linear"};return{kind:"composite",interpolationType:Be,interpolationFactor:lr.interpolationFactor.bind(void 0,Be),zoomStops:ve.map(Fe=>Fe[0]),evaluate:({zoom:Fe},Oe)=>Lh({stops:ve,base:A.base},l,Fe).evaluate(Fe,Oe)}}if(v){const J=b==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:J,interpolationFactor:lr.interpolationFactor.bind(void 0,J),zoomStops:A.stops.map(oe=>oe[0]),evaluate:({zoom:oe})=>P(A,l,oe,Q,q)}}return{kind:"source",evaluate(J,oe){const ve=oe&&oe.properties?oe.properties[A.property]:void 0;return ve===void 0?Au(A.default,l.default):P(A,l,ve,Q,q)}}}function Au(A,l,u){return A!==void 0?A:l!==void 0?l:u!==void 0?u:void 0}function mh(A,l,u,v,b){return Au(typeof u===b?v[u]:void 0,A.default,l.default)}function Fl(A,l,u){if(Ii(u)!=="number")return Au(A.default,l.default);const v=A.stops.length;if(v===1||u<=A.stops[0][0])return A.stops[0][1];if(u>=A.stops[v-1][0])return A.stops[v-1][1];const b=Zl(A.stops.map(E=>E[0]),u);return A.stops[b][1]}function Lh(A,l,u){const v=A.base!==void 0?A.base:1;if(Ii(u)!=="number")return Au(A.default,l.default);const b=A.stops.length;if(b===1||u<=A.stops[0][0])return A.stops[0][1];if(u>=A.stops[b-1][0])return A.stops[b-1][1];const E=Zl(A.stops.map(J=>J[0]),u),k=function(J,oe,ve,Be){const Fe=Be-ve,Oe=J-ve;return Fe===0?0:oe===1?Oe/Fe:(Math.pow(oe,Oe)-1)/(Math.pow(oe,Fe)-1)}(u,v,A.stops[E][0],A.stops[E+1][0]),P=A.stops[E][1],Q=A.stops[E+1][1],q=qr[l.type]||Ih;return typeof P.evaluate=="function"?{evaluate(...J){const oe=P.evaluate.apply(void 0,J),ve=Q.evaluate.apply(void 0,J);if(oe!==void 0&&ve!==void 0)return q(oe,ve,k,A.colorSpace)}}:q(P,Q,k,A.colorSpace)}function pA(A,l,u){switch(l.type){case"color":u=Ti.parse(u);break;case"formatted":u=Ua.fromString(u.toString());break;case"resolvedImage":u=Ls.fromString(u.toString());break;case"padding":u=li.parse(u);break;case"colorArray":u=ys.parse(u);break;case"numberArray":u=Hs.parse(u);break;default:Ii(u)===l.type||l.type==="enum"&&l.values[u]||(u=void 0)}return Au(u,A.default,l.default)}Ao.register(Du,{error:[{kind:"error"},[nt],(A,[l])=>{throw new An(l.evaluate(A))}],typeof:[nt,[jt],(A,[l])=>_i(kn(l.evaluate(A)))],"to-rgba":[Ni(He,4),[sr],(A,[l])=>{const[u,v,b,E]=l.evaluate(A).rgb;return[255*u,255*v,255*b,E]}],rgb:[sr,[He,He,He],nl],rgba:[sr,[He,He,He,He],nl],has:{type:It,overloads:[[[nt],(A,[l])=>dh(l.evaluate(A),A.properties())],[[nt,Xt],(A,[l,u])=>dh(l.evaluate(A),u.evaluate(A))]]},get:{type:jt,overloads:[[[nt],(A,[l])=>fo(l.evaluate(A),A.properties())],[[nt,Xt],(A,[l,u])=>fo(l.evaluate(A),u.evaluate(A))]]},"feature-state":[jt,[nt],(A,[l])=>fo(l.evaluate(A),A.featureState||{})],properties:[Xt,[],A=>A.properties()],"geometry-type":[nt,[],A=>A.geometryType()],id:[jt,[],A=>A.id()],zoom:[He,[],A=>A.globals.zoom],"heatmap-density":[He,[],A=>A.globals.heatmapDensity||0],elevation:[He,[],A=>A.globals.elevation||0],"line-progress":[He,[],A=>A.globals.lineProgress||0],accumulated:[jt,[],A=>A.globals.accumulated===void 0?null:A.globals.accumulated],"+":[He,da(He),(A,l)=>{let u=0;for(const v of l)u+=v.evaluate(A);return u}],"*":[He,da(He),(A,l)=>{let u=1;for(const v of l)u*=v.evaluate(A);return u}],"-":{type:He,overloads:[[[He,He],(A,[l,u])=>l.evaluate(A)-u.evaluate(A)],[[He],(A,[l])=>-l.evaluate(A)]]},"/":[He,[He,He],(A,[l,u])=>l.evaluate(A)/u.evaluate(A)],"%":[He,[He,He],(A,[l,u])=>l.evaluate(A)%u.evaluate(A)],ln2:[He,[],()=>Math.LN2],pi:[He,[],()=>Math.PI],e:[He,[],()=>Math.E],"^":[He,[He,He],(A,[l,u])=>Math.pow(l.evaluate(A),u.evaluate(A))],sqrt:[He,[He],(A,[l])=>Math.sqrt(l.evaluate(A))],log10:[He,[He],(A,[l])=>Math.log(l.evaluate(A))/Math.LN10],ln:[He,[He],(A,[l])=>Math.log(l.evaluate(A))],log2:[He,[He],(A,[l])=>Math.log(l.evaluate(A))/Math.LN2],sin:[He,[He],(A,[l])=>Math.sin(l.evaluate(A))],cos:[He,[He],(A,[l])=>Math.cos(l.evaluate(A))],tan:[He,[He],(A,[l])=>Math.tan(l.evaluate(A))],asin:[He,[He],(A,[l])=>Math.asin(l.evaluate(A))],acos:[He,[He],(A,[l])=>Math.acos(l.evaluate(A))],atan:[He,[He],(A,[l])=>Math.atan(l.evaluate(A))],min:[He,da(He),(A,l)=>Math.min(...l.map(u=>u.evaluate(A)))],max:[He,da(He),(A,l)=>Math.max(...l.map(u=>u.evaluate(A)))],abs:[He,[He],(A,[l])=>Math.abs(l.evaluate(A))],round:[He,[He],(A,[l])=>{const u=l.evaluate(A);return u<0?-Math.round(-u):Math.round(u)}],floor:[He,[He],(A,[l])=>Math.floor(l.evaluate(A))],ceil:[He,[He],(A,[l])=>Math.ceil(l.evaluate(A))],"filter-==":[It,[nt,jt],(A,[l,u])=>A.properties()[l.value]===u.value],"filter-id-==":[It,[jt],(A,[l])=>A.id()===l.value],"filter-type-==":[It,[nt],(A,[l])=>A.geometryType()===l.value],"filter-<":[It,[nt,jt],(A,[l,u])=>{const v=A.properties()[l.value],b=u.value;return typeof v==typeof b&&v<b}],"filter-id-<":[It,[jt],(A,[l])=>{const u=A.id(),v=l.value;return typeof u==typeof v&&u<v}],"filter->":[It,[nt,jt],(A,[l,u])=>{const v=A.properties()[l.value],b=u.value;return typeof v==typeof b&&v>b}],"filter-id->":[It,[jt],(A,[l])=>{const u=A.id(),v=l.value;return typeof u==typeof v&&u>v}],"filter-<=":[It,[nt,jt],(A,[l,u])=>{const v=A.properties()[l.value],b=u.value;return typeof v==typeof b&&v<=b}],"filter-id-<=":[It,[jt],(A,[l])=>{const u=A.id(),v=l.value;return typeof u==typeof v&&u<=v}],"filter->=":[It,[nt,jt],(A,[l,u])=>{const v=A.properties()[l.value],b=u.value;return typeof v==typeof b&&v>=b}],"filter-id->=":[It,[jt],(A,[l])=>{const u=A.id(),v=l.value;return typeof u==typeof v&&u>=v}],"filter-has":[It,[jt],(A,[l])=>l.value in A.properties()],"filter-has-id":[It,[],A=>A.id()!==null&&A.id()!==void 0],"filter-type-in":[It,[Ni(nt)],(A,[l])=>l.value.indexOf(A.geometryType())>=0],"filter-id-in":[It,[Ni(jt)],(A,[l])=>l.value.indexOf(A.id())>=0],"filter-in-small":[It,[nt,Ni(jt)],(A,[l,u])=>u.value.indexOf(A.properties()[l.value])>=0],"filter-in-large":[It,[nt,Ni(jt)],(A,[l,u])=>function(v,b,E,k){for(;E<=k;){const P=E+k>>1;if(b[P]===v)return!0;b[P]>v?k=P-1:E=P+1}return!1}(A.properties()[l.value],u.value,0,u.value.length-1)],all:{type:It,overloads:[[[It,It],(A,[l,u])=>l.evaluate(A)&&u.evaluate(A)],[da(It),(A,l)=>{for(const u of l)if(!u.evaluate(A))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(A,[l,u])=>l.evaluate(A)||u.evaluate(A)],[da(It),(A,l)=>{for(const u of l)if(u.evaluate(A))return!0;return!1}]]},"!":[It,[It],(A,[l])=>!l.evaluate(A)],"is-supported-script":[It,[nt],(A,[l])=>{const u=A.globals&&A.globals.isSupportedScript;return!u||u(l.evaluate(A))}],upcase:[nt,[nt],(A,[l])=>l.evaluate(A).toUpperCase()],downcase:[nt,[nt],(A,[l])=>l.evaluate(A).toLowerCase()],concat:[nt,da(jt),(A,l)=>l.map(u=>Ki(u.evaluate(A))).join("")],"resolved-locale":[nt,[_r],(A,[l])=>l.evaluate(A).resolvedLocale()]});class Ec{constructor(l,u,v){this.expression=l,this._warningHistory={},this._evaluator=new Xl,this._defaultValue=u?function(b){if(b.type==="color"&&pa(b.default))return new Ti(0,0,0,0);switch(b.type){case"color":return Ti.parse(b.default)||null;case"padding":return li.parse(b.default)||null;case"numberArray":return Hs.parse(b.default)||null;case"colorArray":return ys.parse(b.default)||null;case"variableAnchorOffsetCollection":return Zn.parse(b.default)||null;case"projectionDefinition":return _a.parse(b.default)||null;default:return b.default===void 0?null:b.default}}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this._globalState=v}evaluateWithoutErrorHandling(l,u,v,b,E,k){return this._globalState&&(l=al(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=u,this._evaluator.featureState=v,this._evaluator.canonical=b,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(l,u,v,b,E,k){this._globalState&&(l=al(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=u||null,this._evaluator.featureState=v||null,this._evaluator.canonical=b,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=k||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new An(`Expected value to be one of ${Object.keys(this._enumValues).map(Q=>JSON.stringify(Q)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function kl(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in Du}function fu(A,l,u){const v=new yl(Du,Sc,[],l?function(E){const k={color:sr,string:nt,number:He,enum:nt,boolean:It,formatted:Mr,padding:Vr,numberArray:zr,colorArray:Ir,projectionDefinition:Qt,resolvedImage:yi,variableAnchorOffsetCollection:ki};return E.type==="array"?Ni(k[E.value]||jt,E.length):k[E.type]}(l):void 0),b=v.parse(A,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return b?dA(new Ec(b,l,u)):El(v.errors)}class gh{constructor(l,u,v){this.kind=l,this._styleExpression=u,this.isStateDependent=l!=="constant"&&!uu(u.expression),this.globalStateRefs=sl(u.expression),this._globalState=v}evaluateWithoutErrorHandling(l,u,v,b,E,k){return this._globalState&&(l=al(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,u,v,b,E,k)}evaluate(l,u,v,b,E,k){return this._globalState&&(l=al(l,this._globalState)),this._styleExpression.evaluate(l,u,v,b,E,k)}}class po{constructor(l,u,v,b,E){this.kind=l,this.zoomStops=v,this._styleExpression=u,this.isStateDependent=l!=="camera"&&!uu(u.expression),this.globalStateRefs=sl(u.expression),this.interpolationType=b,this._globalState=E}evaluateWithoutErrorHandling(l,u,v,b,E,k){return this._globalState&&(l=al(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,u,v,b,E,k)}evaluate(l,u,v,b,E,k){return this._globalState&&(l=al(l,this._globalState)),this._styleExpression.evaluate(l,u,v,b,E,k)}interpolationFactor(l,u,v){return this.interpolationType?lr.interpolationFactor(this.interpolationType,l,u,v):0}}function mo(A,l,u){const v=fu(A,l,u);if(v.result==="error")return v;const b=v.value.expression,E=ph(b);if(!E&&!hu(l))return El([new ct("","data expressions not supported")]);const k=Ru(b,["zoom"]);if(!k&&!Uu(l))return El([new ct("","zoom expressions not supported")]);const P=Nl(b);return P||k?P instanceof ct?El([P]):P instanceof lr&&!Ds(l)?El([new ct("",'"interpolate" expressions cannot be used with this property')]):dA(P?new po(E?"camera":"composite",v.value,P.labels,P instanceof lr?P.interpolation:void 0,u):new gh(E?"constant":"source",v.value,u)):El([new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Tc{constructor(l,u){this._parameters=l,this._specification=u,Re(this,Tl(this._parameters,this._specification))}static deserialize(l){return new Tc(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Nl(A){let l=null;if(A instanceof No)l=Nl(A.result);else if(A instanceof ui){for(const u of A.args)if(l=Nl(u),l)break}else(A instanceof Yl||A instanceof lr)&&A.input instanceof Ao&&A.input.name==="zoom"&&(l=A);return l instanceof ct||A.eachChild(u=>{const v=Nl(u);v instanceof ct?l=v:!l&&v?l=new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&v&&l!==v&&(l=new ct("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function sl(A,l=new Set){return A instanceof fh&&l.add(A.key),A.eachChild(u=>{sl(u,l)}),l}function al(A,l){const{zoom:u,heatmapDensity:v,elevation:b,lineProgress:E,isSupportedScript:k,accumulated:P}=A??{};return{zoom:u,heatmapDensity:v,elevation:b,lineProgress:E,isSupportedScript:k,accumulated:P,globalState:l}}function mA(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(const l of A.slice(1))if(!mA(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const gA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function du(A,l){if(A==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};mA(A)||(A=mn(A));const u=fu(A,gA,l);if(u.result==="error")throw new Error(u.value.map(v=>`${v.key}: ${v.message}`).join(", "));return{filter:(v,b,E)=>u.value.evaluate(v,b,{},E),needGeometry:Cs(A),getGlobalStateRefs:()=>sl(u.value.expression)}}function ma(A,l){return A<l?-1:A>l?1:0}function Cs(A){if(!Array.isArray(A))return!1;if(A[0]==="within"||A[0]==="distance")return!0;for(let l=1;l<A.length;l++)if(Cs(A[l]))return!0;return!1}function mn(A){if(!A)return!0;const l=A[0];return A.length<=1?l!=="any":l==="=="?nc(A[1],A[2],"=="):l==="!="?Il(nc(A[1],A[2],"==")):l==="<"||l===">"||l==="<="||l===">="?nc(A[1],A[2],l):l==="any"?(u=A.slice(1),["any"].concat(u.map(mn))):l==="all"?["all"].concat(A.slice(1).map(mn)):l==="none"?["all"].concat(A.slice(1).map(mn).map(Il)):l==="in"?ol(A[1],A.slice(2)):l==="!in"?Il(ol(A[1],A.slice(2))):l==="has"?Mh(A[1]):l!=="!has"||Il(Mh(A[1]));var u}function nc(A,l,u){switch(A){case"$type":return[`filter-type-${u}`,l];case"$id":return[`filter-id-${u}`,l];default:return[`filter-${u}`,A,l]}}function ol(A,l){if(l.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(u=>typeof u!=typeof l[0])?["filter-in-large",A,["literal",l.sort(ma)]]:["filter-in-small",A,["literal",l]]}}function Mh(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Il(A){return["!",A]}function Ph(A){const l=typeof A;if(l==="number"||l==="boolean"||l==="string"||A==null)return JSON.stringify(A);if(Array.isArray(A)){let b="[";for(const E of A)b+=`${Ph(E)},`;return`${b}]`}const u=Object.keys(A).sort();let v="{";for(let b=0;b<u.length;b++)v+=`${JSON.stringify(u[b])}:${Ph(A[u[b]])},`;return`${v}}`}function Ll(A){let l="";for(const u of ei)l+=`/${Ph(A[u])}`;return l}function Ya(A){const l=A.value;return l?[new hr(A.key,l,"constants have been deprecated as of v8")]:[]}function bn(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function ju(A){if(Array.isArray(A))return A.map(ju);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){const l={};for(const u in A)l[u]=ju(A[u]);return l}return bn(A)}function Oa(A){const l=A.key,u=A.value,v=A.valueSpec||{},b=A.objectElementValidators||{},E=A.style,k=A.styleSpec,P=A.validateSpec;let Q=[];const q=Ii(u);if(q!=="object")return[new hr(l,u,`object expected, ${q} found`)];for(const J in u){const oe=J.split(".")[0],ve=Jo(v,oe)||v["*"];let Be;if(Jo(b,oe))Be=b[oe];else if(Jo(v,oe))Be=P;else if(b["*"])Be=b["*"];else{if(!v["*"]){Q.push(new hr(l,u[J],`unknown property "${J}"`));continue}Be=P}Q=Q.concat(Be({key:(l&&`${l}.`)+J,value:u[J],valueSpec:ve,style:E,styleSpec:k,object:u,objectKey:J,validateSpec:P},u))}for(const J in v)b[J]||v[J].required&&v[J].default===void 0&&u[J]===void 0&&Q.push(new hr(l,u,`missing required property "${J}"`));return Q}function Ml(A){const l=A.value,u=A.valueSpec,v=A.style,b=A.styleSpec,E=A.key,k=A.arrayElementValidator||A.validateSpec;if(Ii(l)!=="array")return[new hr(E,l,`array expected, ${Ii(l)} found`)];if(u.length&&l.length!==u.length)return[new hr(E,l,`array length ${u.length} expected, length ${l.length} found`)];if(u["min-length"]&&l.length<u["min-length"])return[new hr(E,l,`array length at least ${u["min-length"]} expected, length ${l.length} found`)];let P={type:u.value,values:u.values};b.$version<7&&(P.function=u.function),Ii(u.value)==="object"&&(P=u.value);let Q=[];for(let q=0;q<l.length;q++)Q=Q.concat(k({array:l,arrayIndex:q,value:l[q],valueSpec:P,validateSpec:A.validateSpec,style:v,styleSpec:b,key:`${E}[${q}]`}));return Q}function qs(A){const l=A.key,u=A.value,v=A.valueSpec;let b=Ii(u);return b==="number"&&u!=u&&(b="NaN"),b!=="number"?[new hr(l,u,`number expected, ${b} found`)]:"minimum"in v&&u<v.minimum?[new hr(l,u,`${u} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&u>v.maximum?[new hr(l,u,`${u} is greater than the maximum value ${v.maximum}`)]:[]}function sc(A){const l=A.valueSpec,u=bn(A.value.type);let v,b,E,k={};const P=u!=="categorical"&&A.value.property===void 0,Q=!P,q=Ii(A.value.stops)==="array"&&Ii(A.value.stops[0])==="array"&&Ii(A.value.stops[0][0])==="object",J=Oa({key:A.key,value:A.value,valueSpec:A.styleSpec.function,validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Be){if(u==="identity")return[new hr(Be.key,Be.value,'identity function may not have a "stops" property')];let Fe=[];const Oe=Be.value;return Fe=Fe.concat(Ml({key:Be.key,value:Oe,valueSpec:Be.valueSpec,validateSpec:Be.validateSpec,style:Be.style,styleSpec:Be.styleSpec,arrayElementValidator:oe})),Ii(Oe)==="array"&&Oe.length===0&&Fe.push(new hr(Be.key,Oe,"array must have at least one stop")),Fe},default:function(Be){return Be.validateSpec({key:Be.key,value:Be.value,valueSpec:l,validateSpec:Be.validateSpec,style:Be.style,styleSpec:Be.styleSpec})}}});return u==="identity"&&P&&J.push(new hr(A.key,A.value,'missing required property "property"')),u==="identity"||A.value.stops||J.push(new hr(A.key,A.value,'missing required property "stops"')),u==="exponential"&&A.valueSpec.expression&&!Ds(A.valueSpec)&&J.push(new hr(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(Q&&!hu(A.valueSpec)?J.push(new hr(A.key,A.value,"property functions not supported")):P&&!Uu(A.valueSpec)&&J.push(new hr(A.key,A.value,"zoom functions not supported"))),u!=="categorical"&&!q||A.value.property!==void 0||J.push(new hr(A.key,A.value,'"property" property is required')),J;function oe(Be){let Fe=[];const Oe=Be.value,Ze=Be.key;if(Ii(Oe)!=="array")return[new hr(Ze,Oe,`array expected, ${Ii(Oe)} found`)];if(Oe.length!==2)return[new hr(Ze,Oe,`array length 2 expected, length ${Oe.length} found`)];if(q){if(Ii(Oe[0])!=="object")return[new hr(Ze,Oe,`object expected, ${Ii(Oe[0])} found`)];if(Oe[0].zoom===void 0)return[new hr(Ze,Oe,"object stop key must have zoom")];if(Oe[0].value===void 0)return[new hr(Ze,Oe,"object stop key must have value")];if(E&&E>bn(Oe[0].zoom))return[new hr(Ze,Oe[0].zoom,"stop zoom values must appear in ascending order")];bn(Oe[0].zoom)!==E&&(E=bn(Oe[0].zoom),b=void 0,k={}),Fe=Fe.concat(Oa({key:`${Ze}[0]`,value:Oe[0],valueSpec:{zoom:{}},validateSpec:Be.validateSpec,style:Be.style,styleSpec:Be.styleSpec,objectElementValidators:{zoom:qs,value:ve}}))}else Fe=Fe.concat(ve({key:`${Ze}[0]`,value:Oe[0],validateSpec:Be.validateSpec,style:Be.style,styleSpec:Be.styleSpec},Oe));return kl(ju(Oe[1]))?Fe.concat([new hr(`${Ze}[1]`,Oe[1],"expressions are not allowed in function stops.")]):Fe.concat(Be.validateSpec({key:`${Ze}[1]`,value:Oe[1],valueSpec:l,validateSpec:Be.validateSpec,style:Be.style,styleSpec:Be.styleSpec}))}function ve(Be,Fe){const Oe=Ii(Be.value),Ze=bn(Be.value),ht=Be.value!==null?Be.value:Fe;if(v){if(Oe!==v)return[new hr(Be.key,ht,`${Oe} stop domain type must match previous stop domain type ${v}`)]}else v=Oe;if(Oe!=="number"&&Oe!=="string"&&Oe!=="boolean")return[new hr(Be.key,ht,"stop domain value must be a number, string, or boolean")];if(Oe!=="number"&&u!=="categorical"){let Ut=`number expected, ${Oe} found`;return hu(l)&&u===void 0&&(Ut+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new hr(Be.key,ht,Ut)]}return u!=="categorical"||Oe!=="number"||isFinite(Ze)&&Math.floor(Ze)===Ze?u!=="categorical"&&Oe==="number"&&b!==void 0&&Ze<b?[new hr(Be.key,ht,"stop domain values must appear in ascending order")]:(b=Ze,u==="categorical"&&Ze in k?[new hr(Be.key,ht,"stop domain values must be unique")]:(k[Ze]=!0,[])):[new hr(Be.key,ht,`integer expected, found ${Ze}`)]}}function Do(A){const l=(A.expressionContext==="property"?mo:fu)(ju(A.value),A.valueSpec);if(l.result==="error")return l.value.map(v=>new hr(`${A.key}${v.key}`,A.value,v.message));const u=l.value.expression||l.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!u.outputDefined())return[new hr(A.key,A.value,`Invalid data expression for "${A.propertyKey}". Output values must be contained as literals within the expression.`)];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!uu(u))return[new hr(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!uu(u))return[new hr(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!Ru(u,["zoom","feature-state"]))return[new hr(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!ph(u))return[new hr(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function go(A){const l=A.key,u=A.value,v=Ii(u);return v!=="string"?[new hr(l,u,`color expected, ${v} found`)]:Ti.parse(String(u))?[]:[new hr(l,u,`color expected, "${u}" found`)]}function Ou(A){const l=A.key,u=A.value,v=A.valueSpec,b=[];return Array.isArray(v.values)?v.values.indexOf(bn(u))===-1&&b.push(new hr(l,u,`expected one of [${v.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(v.values).indexOf(bn(u))===-1&&b.push(new hr(l,u,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(u)} found`)),b}function vh(A){return mA(ju(A.value))?Do(Re({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Qu(A)}function Qu(A){const l=A.value,u=A.key;if(Ii(l)!=="array")return[new hr(u,l,`array expected, ${Ii(l)} found`)];const v=A.styleSpec;let b,E=[];if(l.length<1)return[new hr(u,l,"filter array must have at least 1 element")];switch(E=E.concat(Ou({key:`${u}[0]`,value:l[0],valueSpec:v.filter_operator,style:A.style,styleSpec:A.styleSpec})),bn(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&bn(l[1])==="$type"&&E.push(new hr(u,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&E.push(new hr(u,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(b=Ii(l[1]),b!=="string"&&E.push(new hr(`${u}[1]`,l[1],`string expected, ${b} found`)));for(let k=2;k<l.length;k++)b=Ii(l[k]),bn(l[1])==="$type"?E=E.concat(Ou({key:`${u}[${k}]`,value:l[k],valueSpec:v.geometry_type,style:A.style,styleSpec:A.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&E.push(new hr(`${u}[${k}]`,l[k],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let k=1;k<l.length;k++)E=E.concat(Qu({key:`${u}[${k}]`,value:l[k],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":b=Ii(l[1]),l.length!==2?E.push(new hr(u,l,`filter array for "${l[0]}" operator must have 2 elements`)):b!=="string"&&E.push(new hr(`${u}[1]`,l[1],`string expected, ${b} found`))}return E}function vA(A,l){const u=A.key,v=A.validateSpec,b=A.style,E=A.styleSpec,k=A.value,P=A.objectKey,Q=E[`${l}_${A.layerType}`];if(!Q)return[];const q=P.match(/^(.*)-transition$/);if(l==="paint"&&q&&Q[q[1]]&&Q[q[1]].transition)return v({key:u,value:k,valueSpec:E.transition,style:b,styleSpec:E});const J=A.valueSpec||Q[P];if(!J)return[new hr(u,k,`unknown property "${P}"`)];let oe;if(Ii(k)==="string"&&hu(J)&&!J.tokens&&(oe=/^{([^}]+)}$/.exec(k)))return[new hr(u,k,`"${P}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(oe[1])} }\`.`)];const ve=[];return A.layerType==="symbol"&&(P==="text-field"&&b&&!b.glyphs&&ve.push(new hr(u,k,'use of "text-field" requires a style "glyphs" property')),P==="text-font"&&pa(ju(k))&&bn(k.type)==="identity"&&ve.push(new hr(u,k,'"text-font" does not support identity functions'))),ve.concat(v({key:A.key,value:k,valueSpec:J,style:b,styleSpec:E,expressionContext:"property",propertyType:l,propertyKey:P}))}function Pl(A){return vA(A,"paint")}function Ks(A){return vA(A,"layout")}function ll(A){let l=[];const u=A.value,v=A.key,b=A.style,E=A.styleSpec;if(Ii(u)!=="object")return[new hr(v,u,`object expected, ${Ii(u)} found`)];u.type||u.ref||l.push(new hr(v,u,'either "type" or "ref" is required'));let k=bn(u.type);const P=bn(u.ref);if(u.id){const Q=bn(u.id);for(let q=0;q<A.arrayIndex;q++){const J=b.layers[q];bn(J.id)===Q&&l.push(new hr(v,u.id,`duplicate layer id "${u.id}", previously used at line ${J.id.__line__}`))}}if("ref"in u){let Q;["type","source","source-layer","filter","layout"].forEach(q=>{q in u&&l.push(new hr(v,u[q],`"${q}" is prohibited for ref layers`))}),b.layers.forEach(q=>{bn(q.id)===P&&(Q=q)}),Q?Q.ref?l.push(new hr(v,u.ref,"ref cannot reference another ref layer")):k=bn(Q.type):l.push(new hr(v,u.ref,`ref layer "${P}" not found`))}else if(k!=="background")if(u.source){const Q=b.sources&&b.sources[u.source],q=Q&&bn(Q.type);Q?q==="vector"&&k==="raster"?l.push(new hr(v,u.source,`layer "${u.id}" requires a raster source`)):q!=="raster-dem"&&k==="hillshade"||q!=="raster-dem"&&k==="color-relief"?l.push(new hr(v,u.source,`layer "${u.id}" requires a raster-dem source`)):q==="raster"&&k!=="raster"?l.push(new hr(v,u.source,`layer "${u.id}" requires a vector source`)):q!=="vector"||u["source-layer"]?q==="raster-dem"&&k!=="hillshade"&&k!=="color-relief"?l.push(new hr(v,u.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):k!=="line"||!u.paint||!u.paint["line-gradient"]||q==="geojson"&&Q.lineMetrics||l.push(new hr(v,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new hr(v,u,`layer "${u.id}" must specify a "source-layer"`)):l.push(new hr(v,u.source,`source "${u.source}" not found`))}else l.push(new hr(v,u,'missing required property "source"'));return l=l.concat(Oa({key:v,value:u,valueSpec:E.layer,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":()=>[],type:()=>A.validateSpec({key:`${v}.type`,value:u.type,valueSpec:E.layer.type,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,object:u,objectKey:"type"}),filter:vh,layout:Q=>Oa({layer:u,key:Q.key,value:Q.value,style:Q.style,styleSpec:Q.styleSpec,validateSpec:Q.validateSpec,objectElementValidators:{"*":q=>Ks(Re({layerType:k},q))}}),paint:Q=>Oa({layer:u,key:Q.key,value:Q.value,style:Q.style,styleSpec:Q.styleSpec,validateSpec:Q.validateSpec,objectElementValidators:{"*":q=>Pl(Re({layerType:k},q))}})}})),l}function Fc(A){const l=A.value,u=A.key,v=Ii(l);return v!=="string"?[new hr(u,l,`string expected, ${v} found`)]:[]}const Bd={promoteId:function({key:A,value:l}){if(Ii(l)==="string")return Fc({key:A,value:l});{const u=[];for(const v in l)u.push(...Fc({key:`${A}.${v}`,value:l[v]}));return u}}};function Lf(A){const l=A.value,u=A.key,v=A.styleSpec,b=A.style,E=A.validateSpec;if(!l.type)return[new hr(u,l,'"type" is required')];const k=bn(l.type);let P;switch(k){case"vector":case"raster":return P=Oa({key:u,value:l,valueSpec:v[`source_${k.replace("-","_")}`],style:A.style,styleSpec:v,objectElementValidators:Bd,validateSpec:E}),P;case"raster-dem":return P=function(Q){var q;const J=(q=Q.sourceName)!==null&&q!==void 0?q:"",oe=Q.value,ve=Q.styleSpec,Be=ve.source_raster_dem,Fe=Q.style;let Oe=[];const Ze=Ii(oe);if(oe===void 0)return Oe;if(Ze!=="object")return Oe.push(new hr("source_raster_dem",oe,`object expected, ${Ze} found`)),Oe;const ht=bn(oe.encoding)==="custom",Ut=["redFactor","greenFactor","blueFactor","baseShift"],_t=Q.value.encoding?`"${Q.value.encoding}"`:"Default";for(const Ct in oe)!ht&&Ut.includes(Ct)?Oe.push(new hr(Ct,oe[Ct],`In "${J}": "${Ct}" is only valid when "encoding" is set to "custom". ${_t} encoding found`)):Be[Ct]?Oe=Oe.concat(Q.validateSpec({key:Ct,value:oe[Ct],valueSpec:Be[Ct],validateSpec:Q.validateSpec,style:Fe,styleSpec:ve})):Oe.push(new hr(Ct,oe[Ct],`unknown property "${Ct}"`));return Oe}({sourceName:u,value:l,style:A.style,styleSpec:v,validateSpec:E}),P;case"geojson":if(P=Oa({key:u,value:l,valueSpec:v.source_geojson,style:b,styleSpec:v,validateSpec:E,objectElementValidators:Bd}),l.cluster)for(const Q in l.clusterProperties){const[q,J]=l.clusterProperties[Q],oe=typeof q=="string"?[q,["accumulated"],["get",Q]]:q;P.push(...Do({key:`${u}.${Q}.map`,value:J,expressionContext:"cluster-map"})),P.push(...Do({key:`${u}.${Q}.reduce`,value:oe,expressionContext:"cluster-reduce"}))}return P;case"video":return Oa({key:u,value:l,valueSpec:v.source_video,style:b,validateSpec:E,styleSpec:v});case"image":return Oa({key:u,value:l,valueSpec:v.source_image,style:b,validateSpec:E,styleSpec:v});case"canvas":return[new hr(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ou({key:`${u}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Cd(A){const l=A.value,u=A.styleSpec,v=u.light,b=A.style;let E=[];const k=Ii(l);if(l===void 0)return E;if(k!=="object")return E=E.concat([new hr("light",l,`object expected, ${k} found`)]),E;for(const P in l){const Q=P.match(/^(.*)-transition$/);E=E.concat(Q&&v[Q[1]]&&v[Q[1]].transition?A.validateSpec({key:P,value:l[P],valueSpec:u.transition,validateSpec:A.validateSpec,style:b,styleSpec:u}):v[P]?A.validateSpec({key:P,value:l[P],valueSpec:v[P],validateSpec:A.validateSpec,style:b,styleSpec:u}):[new hr(P,l[P],`unknown property "${P}"`)])}return E}function ta(A){const l=A.value,u=A.styleSpec,v=u.sky,b=A.style,E=Ii(l);if(l===void 0)return[];if(E!=="object")return[new hr("sky",l,`object expected, ${E} found`)];let k=[];for(const P in l)k=k.concat(v[P]?A.validateSpec({key:P,value:l[P],valueSpec:v[P],style:b,styleSpec:u}):[new hr(P,l[P],`unknown property "${P}"`)]);return k}function ZA(A){const l=A.value,u=A.styleSpec,v=u.terrain,b=A.style;let E=[];const k=Ii(l);if(l===void 0)return E;if(k!=="object")return E=E.concat([new hr("terrain",l,`object expected, ${k} found`)]),E;for(const P in l)E=E.concat(v[P]?A.validateSpec({key:P,value:l[P],valueSpec:v[P],validateSpec:A.validateSpec,style:b,styleSpec:u}):[new hr(P,l[P],`unknown property "${P}"`)]);return E}function kc(A){let l=[];const u=A.value,v=A.key;if(Array.isArray(u)){const b=[],E=[];for(const k in u)u[k].id&&b.includes(u[k].id)&&l.push(new hr(v,u,`all the sprites' ids must be unique, but ${u[k].id} is duplicated`)),b.push(u[k].id),u[k].url&&E.includes(u[k].url)&&l.push(new hr(v,u,`all the sprites' URLs must be unique, but ${u[k].url} is duplicated`)),E.push(u[k].url),l=l.concat(Oa({key:`${v}[${k}]`,value:u[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:A.validateSpec}));return l}return Fc({key:v,value:u})}function Nc(A){return l=A.value,l&&l.constructor===Object?[]:[new hr(A.key,A.value,`object expected, ${Ii(A.value)} found`)];var l}const Ja={"*":()=>[],array:Ml,boolean:function(A){const l=A.value,u=A.key,v=Ii(l);return v!=="boolean"?[new hr(u,l,`boolean expected, ${v} found`)]:[]},number:qs,color:go,constants:Ya,enum:Ou,filter:vh,function:sc,layer:ll,object:Oa,source:Lf,light:Cd,sky:ta,terrain:ZA,projection:function(A){const l=A.value,u=A.styleSpec,v=u.projection,b=A.style,E=Ii(l);if(l===void 0)return[];if(E!=="object")return[new hr("projection",l,`object expected, ${E} found`)];let k=[];for(const P in l)k=k.concat(v[P]?A.validateSpec({key:P,value:l[P],valueSpec:v[P],style:b,styleSpec:u}):[new hr(P,l[P],`unknown property "${P}"`)]);return k},projectionDefinition:function(A){const l=A.key;let u=A.value;u=u instanceof String?u.valueOf():u;const v=Ii(u);return v!=="array"||function(b){return Array.isArray(b)&&b.length===3&&typeof b[0]=="string"&&typeof b[1]=="string"&&typeof b[2]=="number"}(u)||function(b){return!!["interpolate","step","literal"].includes(b[0])}(u)?["array","string"].includes(v)?[]:[new hr(l,u,`projection expected, invalid type "${v}" found`)]:[new hr(l,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:Fc,formatted:function(A){return Fc(A).length===0?[]:Do(A)},resolvedImage:function(A){return Fc(A).length===0?[]:Do(A)},padding:function(A){const l=A.key,u=A.value;if(Ii(u)==="array"){if(u.length<1||u.length>4)return[new hr(l,u,`padding requires 1 to 4 values; ${u.length} values found`)];const v={type:"number"};let b=[];for(let E=0;E<u.length;E++)b=b.concat(A.validateSpec({key:`${l}[${E}]`,value:u[E],validateSpec:A.validateSpec,valueSpec:v}));return b}return qs({key:l,value:u,valueSpec:{}})},numberArray:function(A){const l=A.key,u=A.value;if(Ii(u)==="array"){const v={type:"number"};if(u.length<1)return[new hr(l,u,"array length at least 1 expected, length 0 found")];let b=[];for(let E=0;E<u.length;E++)b=b.concat(A.validateSpec({key:`${l}[${E}]`,value:u[E],validateSpec:A.validateSpec,valueSpec:v}));return b}return qs({key:l,value:u,valueSpec:{}})},colorArray:function(A){const l=A.key,u=A.value;if(Ii(u)==="array"){if(u.length<1)return[new hr(l,u,"array length at least 1 expected, length 0 found")];let v=[];for(let b=0;b<u.length;b++)v=v.concat(go({key:`${l}[${b}]`,value:u[b]}));return v}return go({key:l,value:u})},variableAnchorOffsetCollection:function(A){const l=A.key,u=A.value,v=Ii(u),b=A.styleSpec;if(v!=="array"||u.length<1||u.length%2!=0)return[new hr(l,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let E=[];for(let k=0;k<u.length;k+=2)E=E.concat(Ou({key:`${l}[${k}]`,value:u[k],valueSpec:b.layout_symbol["text-anchor"]})),E=E.concat(Ml({key:`${l}[${k+1}]`,value:u[k+1],valueSpec:{length:2,value:"number"},validateSpec:A.validateSpec,style:A.style,styleSpec:b}));return E},sprite:kc,state:Nc};function Ro(A){const l=A.value,u=A.valueSpec,v=A.styleSpec;return A.validateSpec=Ro,u.expression&&pa(bn(l))?sc(A):u.expression&&kl(ju(l))?Do(A):u.type&&Ja[u.type]?Ja[u.type](A):Oa(Re({},A,{valueSpec:u.type?v[u.type]:u}))}function ac(A){const l=A.value,u=A.key,v=Fc(A);return v.length||(l.indexOf("{fontstack}")===-1&&v.push(new hr(u,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&v.push(new hr(u,l,'"glyphs" url must include a "{range}" token'))),v}function Dl(A,l=Bt){let u=[];return u=u.concat(Ro({key:"",value:A,valueSpec:l.$root,styleSpec:l,style:A,validateSpec:Ro,objectElementValidators:{glyphs:ac,"*":()=>[]}})),A.constants&&(u=u.concat(Ya({key:"constants",value:A.constants}))),xh(u)}function Rl(A){return function(l){return A(Object.assign({},l,{validateSpec:Ro}))}}function xh(A){return[].concat(A).sort((l,u)=>l.line-u.line)}function U(A){return function(...l){return xh(A.apply(this,l))}}Dl.source=U(Rl(Lf)),Dl.sprite=U(Rl(kc)),Dl.glyphs=U(Rl(ac)),Dl.light=U(Rl(Cd)),Dl.sky=U(Rl(ta)),Dl.terrain=U(Rl(ZA)),Dl.state=U(Rl(Nc)),Dl.layer=U(Rl(ll)),Dl.filter=U(Rl(vh)),Dl.paintProperty=U(Rl(Pl)),Dl.layoutProperty=U(Rl(Ks));const z=Dl,ie=z.light,Ae=z.sky,Ie=z.paintProperty,Qe=z.layoutProperty;function qe(A,l){let u=!1;if(l&&l.length)for(const v of l)A.fire(new Fr(new Error(v.message))),u=!0;return u}class We{constructor(l,u,v){const b=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const k=new Int32Array(this.arrayBuffer);l=k[0],this.d=(u=k[1])+2*(v=k[2]);for(let Q=0;Q<this.d*this.d;Q++){const q=k[3+Q],J=k[3+Q+1];b.push(q===J?null:k.subarray(q,J))}const P=k[3+b.length+1];this.keys=k.subarray(k[3+b.length],P),this.bboxes=k.subarray(P),this.insert=this._insertReadonly}else{this.d=u+2*v;for(let k=0;k<this.d*this.d;k++)b.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=l,this.padding=v,this.scale=u/l,this.uid=0;const E=v/u*l;this.min=-E,this.max=l+E}insert(l,u,v,b,E){this._forEachCell(u,v,b,E,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(u),this.bboxes.push(v),this.bboxes.push(b),this.bboxes.push(E)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,u,v,b,E,k){this.cells[E].push(k)}query(l,u,v,b,E){const k=this.min,P=this.max;if(l<=k&&u<=k&&P<=v&&P<=b&&!E)return Array.prototype.slice.call(this.keys);{const Q=[];return this._forEachCell(l,u,v,b,this._queryCell,Q,{},E),Q}}_queryCell(l,u,v,b,E,k,P,Q){const q=this.cells[E];if(q!==null){const J=this.keys,oe=this.bboxes;for(let ve=0;ve<q.length;ve++){const Be=q[ve];if(P[Be]===void 0){const Fe=4*Be;(Q?Q(oe[Fe+0],oe[Fe+1],oe[Fe+2],oe[Fe+3]):l<=oe[Fe+2]&&u<=oe[Fe+3]&&v>=oe[Fe+0]&&b>=oe[Fe+1])?(P[Be]=!0,k.push(J[Be])):P[Be]=!1}}}}_forEachCell(l,u,v,b,E,k,P,Q){const q=this._convertToCellCoord(l),J=this._convertToCellCoord(u),oe=this._convertToCellCoord(v),ve=this._convertToCellCoord(b);for(let Be=q;Be<=oe;Be++)for(let Fe=J;Fe<=ve;Fe++){const Oe=this.d*Fe+Be;if((!Q||Q(this._convertFromCellCoord(Be),this._convertFromCellCoord(Fe),this._convertFromCellCoord(Be+1),this._convertFromCellCoord(Fe+1)))&&E.call(this,l,u,v,b,Oe,k,P,Q))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,u=3+this.cells.length+1+1;let v=0;for(let k=0;k<this.cells.length;k++)v+=this.cells[k].length;const b=new Int32Array(u+v+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let E=u;for(let k=0;k<l.length;k++){const P=l[k];b[3+k]=E,b.set(P,E),E+=P.length}return b[3+l.length]=E,b.set(this.keys,E),E+=this.keys.length,b[3+l.length+1]=E,b.set(this.bboxes,E),E+=this.bboxes.length,b.buffer}static serialize(l,u){const v=l.toArrayBuffer();return u&&u.push(v),{buffer:v}}static deserialize(l){return new We(l.buffer)}}const et={};function Ge(A,l,u={}){if(et[A])throw new Error(`${A} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:A,writeable:!1}),et[A]={klass:l,omit:u.omit||[],shallow:u.shallow||[]}}Ge("Object",Object),Ge("Set",Set),Ge("TransferableGridIndex",We),Ge("Color",Ti),Ge("Error",Error),Ge("AJAXError",Ke),Ge("ResolvedImage",Ls),Ge("StylePropertyFunction",Tc),Ge("StyleExpression",Ec,{omit:["_evaluator"]}),Ge("ZoomDependentExpression",po),Ge("ZoomConstantExpression",gh),Ge("CompoundExpression",Ao,{omit:["_evaluate"]});for(const A in Du)Du[A]._classRegistryKey||Ge(`Expression_${A}`,Du[A]);function Mt(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function tr(A){return A.$name||A.constructor._classRegistryKey}function ut(A){return!function(l){if(l===null||typeof l!="object")return!1;const u=tr(l);return!(!u||u==="Object")}(A)&&(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob||A instanceof Error||Mt(A)||or(A)||ArrayBuffer.isView(A)||A instanceof ImageData)}function Ot(A,l){if(ut(A))return(Mt(A)||or(A))&&l&&l.push(A),ArrayBuffer.isView(A)&&l&&l.push(A.buffer),A instanceof ImageData&&l&&l.push(A.data.buffer),A;if(Array.isArray(A)){const E=[];for(const k of A)E.push(Ot(k,l));return E}if(typeof A!="object")throw new Error("can't serialize object of type "+typeof A);const u=tr(A);if(!u)throw new Error(`can't serialize object of unregistered class ${A.constructor.name}`);if(!et[u])throw new Error(`${u} is not registered.`);const{klass:v}=et[u],b=v.serialize?v.serialize(A,l):{};if(v.serialize){if(l&&b===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const E in A){if(!A.hasOwnProperty(E)||et[u].omit.indexOf(E)>=0)continue;const k=A[E];b[E]=et[u].shallow.indexOf(E)>=0?k:Ot(k,l)}A instanceof Error&&(b.message=A.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(b.$name=u),b}function Kt(A){if(ut(A))return A;if(Array.isArray(A))return A.map(Kt);if(typeof A!="object")throw new Error("can't deserialize object of type "+typeof A);const l=tr(A)||"Object";if(!et[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:u}=et[l];if(!u)throw new Error(`can't deserialize unregistered class ${l}`);if(u.deserialize)return u.deserialize(A);const v=Object.create(u.prototype);for(const b of Object.keys(A)){if(b==="$name")continue;const E=A[b];v[b]=et[l].shallow.indexOf(b)>=0?E:Kt(E)}return v}class cr{constructor(){this.first=!0}update(l,u){const v=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=u),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=v,!0))}}const Rt={"Latin-1 Supplement":A=>A>=128&&A<=255,"Hangul Jamo":A=>A>=4352&&A<=4607,Khmer:A=>A>=6016&&A<=6143,"General Punctuation":A=>A>=8192&&A<=8303,"Letterlike Symbols":A=>A>=8448&&A<=8527,"Number Forms":A=>A>=8528&&A<=8591,"Miscellaneous Technical":A=>A>=8960&&A<=9215,"Control Pictures":A=>A>=9216&&A<=9279,"Optical Character Recognition":A=>A>=9280&&A<=9311,"Enclosed Alphanumerics":A=>A>=9312&&A<=9471,"Geometric Shapes":A=>A>=9632&&A<=9727,"Miscellaneous Symbols":A=>A>=9728&&A<=9983,"Miscellaneous Symbols and Arrows":A=>A>=11008&&A<=11263,"Ideographic Description Characters":A=>A>=12272&&A<=12287,"CJK Symbols and Punctuation":A=>A>=12288&&A<=12351,Hiragana:A=>A>=12352&&A<=12447,Katakana:A=>A>=12448&&A<=12543,Kanbun:A=>A>=12688&&A<=12703,"CJK Strokes":A=>A>=12736&&A<=12783,"Enclosed CJK Letters and Months":A=>A>=12800&&A<=13055,"CJK Compatibility":A=>A>=13056&&A<=13311,"Yijing Hexagram Symbols":A=>A>=19904&&A<=19967,"CJK Unified Ideographs":A=>A>=19968&&A<=40959,"Hangul Syllables":A=>A>=44032&&A<=55215,"Private Use Area":A=>A>=57344&&A<=63743,"Vertical Forms":A=>A>=65040&&A<=65055,"CJK Compatibility Forms":A=>A>=65072&&A<=65103,"Small Form Variants":A=>A>=65104&&A<=65135,"Halfwidth and Fullwidth Forms":A=>A>=65280&&A<=65519};function Ar(A){for(const l of A)if(ji(l.charCodeAt(0)))return!0;return!1}function dr(A){for(const l of A)if(!Ai(l.charCodeAt(0)))return!1;return!0}function Er(A){const l=A.map(u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch{return null}}).filter(u=>u);return new RegExp(l.join("|"),"u")}const yr=Er(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ai(A){return!yr.test(String.fromCodePoint(A))}const ri=Er(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ji(A){return!(A!==746&&A!==747&&(A<4352||!(Rt["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||Rt["CJK Compatibility"](A)||Rt["CJK Strokes"](A)||!(!Rt["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||Rt["Enclosed CJK Letters and Months"](A)||Rt["Ideographic Description Characters"](A)||Rt.Kanbun(A)||Rt.Katakana(A)&&A!==12540||!(!Rt["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!Rt["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||Rt["Vertical Forms"](A)||Rt["Yijing Hexagram Symbols"](A)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(A))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(A))||ri.test(String.fromCodePoint(A)))))}function ni(A){return!(ji(A)||function(l){return!!(Rt["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||Rt["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||Rt["Letterlike Symbols"](l)||Rt["Number Forms"](l)||Rt["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||Rt["Control Pictures"](l)&&l!==9251||Rt["Optical Character Recognition"](l)||Rt["Enclosed Alphanumerics"](l)||Rt["Geometric Shapes"](l)||Rt["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||Rt["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||Rt["CJK Symbols and Punctuation"](l)||Rt.Katakana(l)||Rt["Private Use Area"](l)||Rt["CJK Compatibility Forms"](l)||Rt["Small Form Variants"](l)||Rt["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(A))}const cn=Er(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ws(A){return cn.test(String.fromCodePoint(A))}function zi(A,l){return!(!l&&Ws(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||Rt.Khmer(A))}function oi(A){for(const l of A)if(Ws(l.charCodeAt(0)))return!0;return!1}const Or=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(A){this.pluginStatus=A.pluginStatus,this.pluginURL=A.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(A){if(Or.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=A.applyArabicShaping,this.processBidirectionalText=A.processBidirectionalText,this.processStyledBidirectionalText=A.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(A,l){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(A.pluginStatus!=="loading")return this.setState(A),A;const u=A.pluginURL,v=new Promise(E=>{this.loadScriptResolve=E});l(u);const b=new Promise(E=>setTimeout(()=>E(),this.TIMEOUT));if(yield Promise.race([v,b]),this.isParsed()){const E={pluginStatus:"loaded",pluginURL:u};return this.setState(E),E}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)})}};class Li{constructor(l,u){this.isSupportedScript=Vi,this.zoom=l,u?(this.now=u.now||0,this.fadeDuration=u.fadeDuration||0,this.zoomHistory=u.zoomHistory||new cr,this.transition=u.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new cr,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,u=l-Math.floor(l),v=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*u}}}function Vi(A){return function(l,u){for(const v of l)if(!zi(v.charCodeAt(0),u))return!1;return!0}(A,Or.getRTLTextPluginStatus()==="loaded")}class qi{constructor(l,u,v){this.property=l,this.value=u,this.expression=function(b,E,k){if(pa(b))return new Tc(b,E);if(kl(b)){const P=mo(b,E,k);if(P.result==="error")throw new Error(P.value.map(Q=>`${Q.key}: ${Q.message}`).join(", "));return P.value}{let P=b;return E.type==="color"&&typeof b=="string"?P=Ti.parse(b):E.type!=="padding"||typeof b!="number"&&!Array.isArray(b)?E.type!=="numberArray"||typeof b!="number"&&!Array.isArray(b)?E.type!=="colorArray"||typeof b!="string"&&!Array.isArray(b)?E.type==="variableAnchorOffsetCollection"&&Array.isArray(b)?P=Zn.parse(b):E.type==="projectionDefinition"&&typeof b=="string"&&(P=_a.parse(b)):P=ys.parse(b):P=Hs.parse(b):P=li.parse(b),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>P}}}(u===void 0?l.specification.default:u,l.specification,v)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,u,v){return this.property.possiblyEvaluate(this,l,u,v)}}class si{constructor(l,u){this.property=l,this.value=new qi(l,void 0,u)}transitioned(l,u){return new nn(this.property,this.value,u,rt({},l.transition,this.transition),l.now)}untransitioned(){return new nn(this.property,this.value,null,{},0)}}class Gi{constructor(l,u){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues),this._globalState=u}getValue(l){return Te(this._values[l].value.value)}setValue(l,u){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new si(this._values[l].property,this._globalState)),this._values[l].value=new qi(this._values[l].property,u===null?void 0:Te(u),this._globalState)}getTransition(l){return Te(this._values[l].transition)}setTransition(l,u){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new si(this._values[l].property,this._globalState)),this._values[l].transition=Te(u)||void 0}serialize(){const l={};for(const u of Object.keys(this._values)){const v=this.getValue(u);v!==void 0&&(l[u]=v);const b=this.getTransition(u);b!==void 0&&(l[`${u}-transition`]=b)}return l}transitioned(l,u){const v=new is(this._properties);for(const b of Object.keys(this._values))v._values[b]=this._values[b].transitioned(l,u._values[b]);return v}untransitioned(){const l=new is(this._properties);for(const u of Object.keys(this._values))l._values[u]=this._values[u].untransitioned();return l}}class nn{constructor(l,u,v,b,E){this.property=l,this.value=u,this.begin=E+b.delay||0,this.end=this.begin+b.duration||0,l.specification.transition&&(b.delay||b.duration)&&(this.prior=v)}possiblyEvaluate(l,u,v){const b=l.now||0,E=this.value.possiblyEvaluate(l,u,v),k=this.prior;if(k){if(b>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(b<this.begin)return k.possiblyEvaluate(l,u,v);{const P=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(l,u,v),E,fe(P))}}return E}}class is{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,u,v){const b=new ls(this._properties);for(const E of Object.keys(this._values))b._values[E]=this._values[E].possiblyEvaluate(l,u,v);return b}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class Ss{constructor(l,u){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState=u}hasValue(l){return this._values[l].value!==void 0}getValue(l){return Te(this._values[l].value)}setValue(l,u){this._values[l]=new qi(this._values[l].property,u===null?void 0:Te(u),this._globalState)}serialize(){const l={};for(const u of Object.keys(this._values)){const v=this.getValue(u);v!==void 0&&(l[u]=v)}return l}possiblyEvaluate(l,u,v){const b=new ls(this._properties);for(const E of Object.keys(this._values))b._values[E]=this._values[E].possiblyEvaluate(l,u,v);return b}}class Rn{constructor(l,u,v){this.property=l,this.value=u,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,u,v,b){return this.property.evaluate(this.value,this.parameters,l,u,v,b)}}class ls{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Tr{constructor(l){this.specification=l}possiblyEvaluate(l,u){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(u)}interpolate(l,u,v){const b=qr[this.specification.type];return b?b(l,u,v):l}}class Dr{constructor(l,u){this.specification=l,this.overrides=u}possiblyEvaluate(l,u,v,b){return new Rn(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(u,null,{},v,b)}:l.expression,u)}interpolate(l,u,v){if(l.value.kind!=="constant"||u.value.kind!=="constant")return l;if(l.value.value===void 0||u.value.value===void 0)return new Rn(this,{kind:"constant",value:void 0},l.parameters);const b=qr[this.specification.type];if(b){const E=b(l.value.value,u.value.value,v);return new Rn(this,{kind:"constant",value:E},l.parameters)}return l}evaluate(l,u,v,b,E,k){return l.kind==="constant"?l.value:l.evaluate(u,v,b,E,k)}}class Yn extends Dr{possiblyEvaluate(l,u,v,b){if(l.value===void 0)return new Rn(this,{kind:"constant",value:void 0},u);if(l.expression.kind==="constant"){const E=l.expression.evaluate(u,null,{},v,b),k=l.property.specification.type==="resolvedImage"&&typeof E!="string"?E.name:E,P=this._calculate(k,k,k,u);return new Rn(this,{kind:"constant",value:P},u)}if(l.expression.kind==="camera"){const E=this._calculate(l.expression.evaluate({zoom:u.zoom-1}),l.expression.evaluate({zoom:u.zoom}),l.expression.evaluate({zoom:u.zoom+1}),u);return new Rn(this,{kind:"constant",value:E},u)}return new Rn(this,l.expression,u)}evaluate(l,u,v,b,E,k){if(l.kind==="source"){const P=l.evaluate(u,v,b,E,k);return this._calculate(P,P,P,u)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(u.zoom)-1},v,b),l.evaluate({zoom:Math.floor(u.zoom)},v,b),l.evaluate({zoom:Math.floor(u.zoom)+1},v,b),u):l.value}_calculate(l,u,v,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:u}:{from:v,to:u}}interpolate(l){return l}}class Mi{constructor(l){this.specification=l}possiblyEvaluate(l,u,v,b){if(l.value!==void 0){if(l.expression.kind==="constant"){const E=l.expression.evaluate(u,null,{},v,b);return this._calculate(E,E,E,u)}return this._calculate(l.expression.evaluate(new Li(Math.floor(u.zoom-1),u)),l.expression.evaluate(new Li(Math.floor(u.zoom),u)),l.expression.evaluate(new Li(Math.floor(u.zoom+1),u)),u)}}_calculate(l,u,v,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:u}:{from:v,to:u}}interpolate(l){return l}}class Rs{constructor(l){this.specification=l}possiblyEvaluate(l,u,v,b){return!!l.expression.evaluate(u,null,{},v,b)}interpolate(){return!1}}class Jn{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in l){const v=l[u];v.specification.overridable&&this.overridableProperties.push(u);const b=this.defaultPropertyValues[u]=new qi(v,void 0,void 0),E=this.defaultTransitionablePropertyValues[u]=new si(v,void 0);this.defaultTransitioningPropertyValues[u]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=b.possiblyEvaluate({})}}}Ge("DataDrivenProperty",Dr),Ge("DataConstantProperty",Tr),Ge("CrossFadedDataDrivenProperty",Yn),Ge("CrossFadedProperty",Mi),Ge("ColorRampProperty",Rs);const Es="-transition";class cs extends kr{constructor(l,u,v){if(super(),this.id=l.id,this.type=l.type,this._globalState=v,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=du(l.filter,v)),u.layout&&(this._unevaluatedLayout=new Ss(u.layout,v)),u.paint)){this._transitionablePaint=new Gi(u.paint,v);for(const b in l.paint)this.setPaintProperty(b,l.paint[b],{validate:!1});for(const b in l.layout)this.setLayoutProperty(b,l.layout[b],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ls(u.paint)}}setFilter(l){this.filter=l,this._featureFilter=du(l,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;if(this._unevaluatedLayout)for(const u in this._unevaluatedLayout._values){const v=this._unevaluatedLayout._values[u];for(const b of v.getGlobalStateRefs())l.add(b)}for(const u of this._featureFilter.getGlobalStateRefs())l.add(u);return l}getPaintAffectingGlobalStateRefs(){var l;const u=new globalThis.Map;if(this._transitionablePaint)for(const v in this._transitionablePaint._values){const b=this._transitionablePaint._values[v].value;for(const E of b.getGlobalStateRefs()){const k=(l=u.get(E))!==null&&l!==void 0?l:[];k.push({name:v,value:b.value}),u.set(E,k)}}return u}setLayoutProperty(l,u,v={}){u!=null&&this._validate(Qe,`layers.${this.id}.layout.${l}`,l,u,v)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,u):this.visibility=u)}getPaintProperty(l){return l.endsWith(Es)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,u,v={}){if(u!=null&&this._validate(Ie,`layers.${this.id}.paint.${l}`,l,u,v))return!1;if(l.endsWith(Es))return this._transitionablePaint.setTransition(l.slice(0,-11),u||void 0),!1;{const b=this._transitionablePaint._values[l],E=b.property.specification["property-type"]==="cross-faded-data-driven",k=b.value.isDataDriven(),P=b.value;this._transitionablePaint.setValue(l,u),this._handleSpecialPaintPropertyUpdate(l);const Q=this._transitionablePaint._values[l].value;return Q.isDataDriven()||k||E||this._handleOverridablePaintPropertyUpdate(l,P,Q)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,u,v){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,u){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,u)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),qt(l,(u,v)=>!(u===void 0||v==="layout"&&!Object.keys(u).length||v==="paint"&&!Object.keys(u).length))}_validate(l,u,v,b,E={}){return(!E||E.validate!==!1)&&qe(this,l.call(z,{key:u,layerType:this.type,objectKey:v,value:b,styleSpec:Bt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const u=this.paint.get(l);if(u instanceof Rn&&hu(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}let Sn;var $s={get paint(){return Sn=Sn||new Jn({"raster-opacity":new Tr(Bt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Tr(Bt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Tr(Bt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Tr(Bt.paint_raster["raster-brightness-max"]),"raster-saturation":new Tr(Bt.paint_raster["raster-saturation"]),"raster-contrast":new Tr(Bt.paint_raster["raster-contrast"]),"raster-resampling":new Tr(Bt.paint_raster["raster-resampling"]),"raster-fade-duration":new Tr(Bt.paint_raster["raster-fade-duration"])})}};class vo extends cs{constructor(l,u){super(l,$s,u)}}const Qa={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ln{constructor(l,u){this._structArray=l,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,u){return l._trim(),u&&(l.isTransferred=!0,u.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const u=Object.create(this.prototype);return u.arrayBuffer=l.arrayBuffer,u.length=l.length,u.capacity=l.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function un(A,l=1){let u=0,v=0;return{members:A.map(b=>{const E=Qa[b.type].BYTES_PER_ELEMENT,k=u=ps(u,Math.max(l,E)),P=b.components||1;return v=Math.max(v,E),u+=E*P,{name:b.name,type:b.type,components:P,offset:k}}),size:ps(u,Math.max(v,l)),alignment:l}}function ps(A,l){return Math.ceil(A/l)*l}class wn extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u){const v=this.length;return this.resize(v+1),this.emplace(v,l,u)}emplace(l,u,v){const b=2*l;return this.int16[b+0]=u,this.int16[b+1]=v,l}}wn.prototype.bytesPerElement=4,Ge("StructArrayLayout2i4",wn);class ra extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,v){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,v)}emplace(l,u,v,b){const E=3*l;return this.int16[E+0]=u,this.int16[E+1]=v,this.int16[E+2]=b,l}}ra.prototype.bytesPerElement=6,Ge("StructArrayLayout3i6",ra);class Us extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,v,b){const E=this.length;return this.resize(E+1),this.emplace(E,l,u,v,b)}emplace(l,u,v,b,E){const k=4*l;return this.int16[k+0]=u,this.int16[k+1]=v,this.int16[k+2]=b,this.int16[k+3]=E,l}}Us.prototype.bytesPerElement=8,Ge("StructArrayLayout4i8",Us);class Uo extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E,k){const P=this.length;return this.resize(P+1),this.emplace(P,l,u,v,b,E,k)}emplace(l,u,v,b,E,k,P){const Q=6*l;return this.int16[Q+0]=u,this.int16[Q+1]=v,this.int16[Q+2]=b,this.int16[Q+3]=E,this.int16[Q+4]=k,this.int16[Q+5]=P,l}}Uo.prototype.bytesPerElement=12,Ge("StructArrayLayout2i4i12",Uo);class cl extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E,k){const P=this.length;return this.resize(P+1),this.emplace(P,l,u,v,b,E,k)}emplace(l,u,v,b,E,k,P){const Q=4*l,q=8*l;return this.int16[Q+0]=u,this.int16[Q+1]=v,this.uint8[q+4]=b,this.uint8[q+5]=E,this.uint8[q+6]=k,this.uint8[q+7]=P,l}}cl.prototype.bytesPerElement=8,Ge("StructArrayLayout2i4ub8",cl);class ns extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u){const v=this.length;return this.resize(v+1),this.emplace(v,l,u)}emplace(l,u,v){const b=2*l;return this.float32[b+0]=u,this.float32[b+1]=v,l}}ns.prototype.bytesPerElement=8,Ge("StructArrayLayout2f8",ns);class oc extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E,k,P,Q,q,J){const oe=this.length;return this.resize(oe+1),this.emplace(oe,l,u,v,b,E,k,P,Q,q,J)}emplace(l,u,v,b,E,k,P,Q,q,J,oe){const ve=10*l;return this.uint16[ve+0]=u,this.uint16[ve+1]=v,this.uint16[ve+2]=b,this.uint16[ve+3]=E,this.uint16[ve+4]=k,this.uint16[ve+5]=P,this.uint16[ve+6]=Q,this.uint16[ve+7]=q,this.uint16[ve+8]=J,this.uint16[ve+9]=oe,l}}oc.prototype.bytesPerElement=20,Ge("StructArrayLayout10ui20",oc);class Dh extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E,k,P,Q){const q=this.length;return this.resize(q+1),this.emplace(q,l,u,v,b,E,k,P,Q)}emplace(l,u,v,b,E,k,P,Q,q){const J=8*l;return this.uint16[J+0]=u,this.uint16[J+1]=v,this.uint16[J+2]=b,this.uint16[J+3]=E,this.uint16[J+4]=k,this.uint16[J+5]=P,this.uint16[J+6]=Q,this.uint16[J+7]=q,l}}Dh.prototype.bytesPerElement=16,Ge("StructArrayLayout8ui16",Dh);class zu extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E,k,P,Q,q,J,oe,ve){const Be=this.length;return this.resize(Be+1),this.emplace(Be,l,u,v,b,E,k,P,Q,q,J,oe,ve)}emplace(l,u,v,b,E,k,P,Q,q,J,oe,ve,Be){const Fe=12*l;return this.int16[Fe+0]=u,this.int16[Fe+1]=v,this.int16[Fe+2]=b,this.int16[Fe+3]=E,this.uint16[Fe+4]=k,this.uint16[Fe+5]=P,this.uint16[Fe+6]=Q,this.uint16[Fe+7]=q,this.int16[Fe+8]=J,this.int16[Fe+9]=oe,this.int16[Fe+10]=ve,this.int16[Fe+11]=Be,l}}zu.prototype.bytesPerElement=24,Ge("StructArrayLayout4i4ui4i24",zu);class Ul extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,v){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,v)}emplace(l,u,v,b){const E=3*l;return this.float32[E+0]=u,this.float32[E+1]=v,this.float32[E+2]=b,l}}Ul.prototype.bytesPerElement=12,Ge("StructArrayLayout3f12",Ul);class YA extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.uint32[1*l+0]=u,l}}YA.prototype.bytesPerElement=4,Ge("StructArrayLayout1ul4",YA);class JA extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E,k,P,Q,q){const J=this.length;return this.resize(J+1),this.emplace(J,l,u,v,b,E,k,P,Q,q)}emplace(l,u,v,b,E,k,P,Q,q,J){const oe=10*l,ve=5*l;return this.int16[oe+0]=u,this.int16[oe+1]=v,this.int16[oe+2]=b,this.int16[oe+3]=E,this.int16[oe+4]=k,this.int16[oe+5]=P,this.uint32[ve+3]=Q,this.uint16[oe+8]=q,this.uint16[oe+9]=J,l}}JA.prototype.bytesPerElement=20,Ge("StructArrayLayout6i1ul2ui20",JA);class Hu extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E,k){const P=this.length;return this.resize(P+1),this.emplace(P,l,u,v,b,E,k)}emplace(l,u,v,b,E,k,P){const Q=6*l;return this.int16[Q+0]=u,this.int16[Q+1]=v,this.int16[Q+2]=b,this.int16[Q+3]=E,this.int16[Q+4]=k,this.int16[Q+5]=P,l}}Hu.prototype.bytesPerElement=12,Ge("StructArrayLayout2i2i2i12",Hu);class lc extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E){const k=this.length;return this.resize(k+1),this.emplace(k,l,u,v,b,E)}emplace(l,u,v,b,E,k){const P=4*l,Q=8*l;return this.float32[P+0]=u,this.float32[P+1]=v,this.float32[P+2]=b,this.int16[Q+6]=E,this.int16[Q+7]=k,l}}lc.prototype.bytesPerElement=16,Ge("StructArrayLayout2f1f2i16",lc);class S extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E,k){const P=this.length;return this.resize(P+1),this.emplace(P,l,u,v,b,E,k)}emplace(l,u,v,b,E,k,P){const Q=16*l,q=4*l,J=8*l;return this.uint8[Q+0]=u,this.uint8[Q+1]=v,this.float32[q+1]=b,this.float32[q+2]=E,this.int16[J+6]=k,this.int16[J+7]=P,l}}S.prototype.bytesPerElement=16,Ge("StructArrayLayout2ub2f2i16",S);class o extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,v){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,v)}emplace(l,u,v,b){const E=3*l;return this.uint16[E+0]=u,this.uint16[E+1]=v,this.uint16[E+2]=b,l}}o.prototype.bytesPerElement=6,Ge("StructArrayLayout3ui6",o);class f extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E,k,P,Q,q,J,oe,ve,Be,Fe,Oe,Ze,ht){const Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,l,u,v,b,E,k,P,Q,q,J,oe,ve,Be,Fe,Oe,Ze,ht)}emplace(l,u,v,b,E,k,P,Q,q,J,oe,ve,Be,Fe,Oe,Ze,ht,Ut){const _t=24*l,Ct=12*l,Jt=48*l;return this.int16[_t+0]=u,this.int16[_t+1]=v,this.uint16[_t+2]=b,this.uint16[_t+3]=E,this.uint32[Ct+2]=k,this.uint32[Ct+3]=P,this.uint32[Ct+4]=Q,this.uint16[_t+10]=q,this.uint16[_t+11]=J,this.uint16[_t+12]=oe,this.float32[Ct+7]=ve,this.float32[Ct+8]=Be,this.uint8[Jt+36]=Fe,this.uint8[Jt+37]=Oe,this.uint8[Jt+38]=Ze,this.uint32[Ct+10]=ht,this.int16[_t+22]=Ut,l}}f.prototype.bytesPerElement=48,Ge("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",f);class y extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,v,b,E,k,P,Q,q,J,oe,ve,Be,Fe,Oe,Ze,ht,Ut,_t,Ct,Jt,nr,gr,Lr,Nr,Pr,Jr,Rr){const Ur=this.length;return this.resize(Ur+1),this.emplace(Ur,l,u,v,b,E,k,P,Q,q,J,oe,ve,Be,Fe,Oe,Ze,ht,Ut,_t,Ct,Jt,nr,gr,Lr,Nr,Pr,Jr,Rr)}emplace(l,u,v,b,E,k,P,Q,q,J,oe,ve,Be,Fe,Oe,Ze,ht,Ut,_t,Ct,Jt,nr,gr,Lr,Nr,Pr,Jr,Rr,Ur){const fr=32*l,Si=16*l;return this.int16[fr+0]=u,this.int16[fr+1]=v,this.int16[fr+2]=b,this.int16[fr+3]=E,this.int16[fr+4]=k,this.int16[fr+5]=P,this.int16[fr+6]=Q,this.int16[fr+7]=q,this.uint16[fr+8]=J,this.uint16[fr+9]=oe,this.uint16[fr+10]=ve,this.uint16[fr+11]=Be,this.uint16[fr+12]=Fe,this.uint16[fr+13]=Oe,this.uint16[fr+14]=Ze,this.uint16[fr+15]=ht,this.uint16[fr+16]=Ut,this.uint16[fr+17]=_t,this.uint16[fr+18]=Ct,this.uint16[fr+19]=Jt,this.uint16[fr+20]=nr,this.uint16[fr+21]=gr,this.uint16[fr+22]=Lr,this.uint32[Si+12]=Nr,this.float32[Si+13]=Pr,this.float32[Si+14]=Jr,this.uint16[fr+30]=Rr,this.uint16[fr+31]=Ur,l}}y.prototype.bytesPerElement=64,Ge("StructArrayLayout8i15ui1ul2f2ui64",y);class w extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.float32[1*l+0]=u,l}}w.prototype.bytesPerElement=4,Ge("StructArrayLayout1f4",w);class T extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,v){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,v)}emplace(l,u,v,b){const E=3*l;return this.uint16[6*l+0]=u,this.float32[E+1]=v,this.float32[E+2]=b,l}}T.prototype.bytesPerElement=12,Ge("StructArrayLayout1ui2f12",T);class L extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,v){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,v)}emplace(l,u,v,b){const E=4*l;return this.uint32[2*l+0]=u,this.uint16[E+2]=v,this.uint16[E+3]=b,l}}L.prototype.bytesPerElement=8,Ge("StructArrayLayout1ul2ui8",L);class O extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u){const v=this.length;return this.resize(v+1),this.emplace(v,l,u)}emplace(l,u,v){const b=2*l;return this.uint16[b+0]=u,this.uint16[b+1]=v,l}}O.prototype.bytesPerElement=4,Ge("StructArrayLayout2ui4",O);class H extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.uint16[1*l+0]=u,l}}H.prototype.bytesPerElement=2,Ge("StructArrayLayout1ui2",H);class te extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,v,b){const E=this.length;return this.resize(E+1),this.emplace(E,l,u,v,b)}emplace(l,u,v,b,E){const k=4*l;return this.float32[k+0]=u,this.float32[k+1]=v,this.float32[k+2]=b,this.float32[k+3]=E,l}}te.prototype.bytesPerElement=16,Ge("StructArrayLayout4f16",te);class ne extends Ln{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new d(this.anchorPointX,this.anchorPointY)}}ne.prototype.size=20;class me extends JA{get(l){return new ne(this,l)}}Ge("CollisionBoxArray",me);class he extends Ln{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}he.prototype.size=48;class Se extends f{get(l){return new he(this,l)}}Ge("PlacedSymbolArray",Se);class Ue extends Ln{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ue.prototype.size=64;class Xe extends y{get(l){return new Ue(this,l)}}Ge("SymbolInstanceArray",Xe);class Je extends w{getoffsetX(l){return this.float32[1*l+0]}}Ge("GlyphOffsetArray",Je);class st extends ra{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}Ge("SymbolLineVertexArray",st);class pt extends Ln{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}pt.prototype.size=12;class xt extends T{get(l){return new pt(this,l)}}Ge("TextAnchorOffsetArray",xt);class mt extends Ln{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}mt.prototype.size=8;class wt extends L{get(l){return new mt(this,l)}}Ge("FeatureIndexArray",wt);class St extends wn{}class yt extends wn{}class Lt extends wn{}class rr extends Uo{}class $t extends cl{}class Zt extends ns{}class Yt extends oc{}class wr extends Dh{}class Br extends zu{}class pr extends Ul{}class Kr extends YA{}class Ci extends Hu{}class En extends S{}class Nn extends o{}class Mn extends O{}const ss=un([{name:"a_pos",components:2,type:"Int16"}],4),{members:as}=ss;class tn{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,u,v,b){const E=this.segments[this.segments.length-1];return l>tn.MAX_VERTEX_ARRAY_LENGTH&&kt(`Max vertices per segment is ${tn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${tn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!E||E.vertexLength+l>tn.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==b?this.createNewSegment(u,v,b):E}createNewSegment(l,u,v){const b={vertexOffset:l.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return v!==void 0&&(b.sortKey=v),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(b),b}getOrCreateLatestSegment(l,u,v){return this.prepareSegment(0,l,u,v)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const u in l.vaos)l.vaos[u].destroy()}static simpleSegment(l,u,v,b){return new tn([{vertexOffset:l,primitiveOffset:u,vertexLength:v,primitiveLength:b,vaos:{},sortKey:0}])}}function us(A,l){return 256*(A=Le(Math.floor(A),0,255))+Le(Math.floor(l),0,255)}tn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ge("SegmentVector",tn);const Sa=un([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ia=un([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var na,eo,yh,Ic={exports:{}},Rh={exports:{}},Lc={exports:{}},Uh=function(){if(yh)return Ic.exports;yh=1;var A=(na||(na=1,Rh.exports=function(u,v){var b,E,k,P,Q,q,J,oe;for(E=u.length-(b=3&u.length),k=v,Q=3432918353,q=461845907,oe=0;oe<E;)J=255&u.charCodeAt(oe)|(255&u.charCodeAt(++oe))<<8|(255&u.charCodeAt(++oe))<<16|(255&u.charCodeAt(++oe))<<24,++oe,k=27492+(65535&(P=5*(65535&(k=(k^=J=(65535&(J=(J=(65535&J)*Q+(((J>>>16)*Q&65535)<<16)&4294967295)<<15|J>>>17))*q+(((J>>>16)*q&65535)<<16)&4294967295)<<13|k>>>19))+((5*(k>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(J=0,b){case 3:J^=(255&u.charCodeAt(oe+2))<<16;case 2:J^=(255&u.charCodeAt(oe+1))<<8;case 1:k^=J=(65535&(J=(J=(65535&(J^=255&u.charCodeAt(oe)))*Q+(((J>>>16)*Q&65535)<<16)&4294967295)<<15|J>>>17))*q+(((J>>>16)*q&65535)<<16)&4294967295}return k^=u.length,k=2246822507*(65535&(k^=k>>>16))+((2246822507*(k>>>16)&65535)<<16)&4294967295,k=3266489909*(65535&(k^=k>>>13))+((3266489909*(k>>>16)&65535)<<16)&4294967295,(k^=k>>>16)>>>0}),Rh.exports),l=(eo||(eo=1,Lc.exports=function(u,v){for(var b,E=u.length,k=v^E,P=0;E>=4;)b=1540483477*(65535&(b=255&u.charCodeAt(P)|(255&u.charCodeAt(++P))<<8|(255&u.charCodeAt(++P))<<16|(255&u.charCodeAt(++P))<<24))+((1540483477*(b>>>16)&65535)<<16),k=1540483477*(65535&k)+((1540483477*(k>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),E-=4,++P;switch(E){case 3:k^=(255&u.charCodeAt(P+2))<<16;case 2:k^=(255&u.charCodeAt(P+1))<<8;case 1:k=1540483477*(65535&(k^=255&u.charCodeAt(P)))+((1540483477*(k>>>16)&65535)<<16)}return k=1540483477*(65535&(k^=k>>>13))+((1540483477*(k>>>16)&65535)<<16),(k^=k>>>15)>>>0}),Lc.exports);return Ic.exports=A,Ic.exports.murmur3=A,Ic.exports.murmur2=l,Ic.exports}(),_h=g(Uh);class cc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,u,v,b){this.ids.push(jo(l)),this.positions.push(u,v,b)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=jo(l);let v=0,b=this.ids.length-1;for(;v<b;){const k=v+b>>1;this.ids[k]>=u?b=k:v=k+1}const E=[];for(;this.ids[v]===u;)E.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return E}static serialize(l,u){const v=new Float64Array(l.ids),b=new Uint32Array(l.positions);return pu(v,b,0,v.length-1),u&&u.push(v.buffer,b.buffer),{ids:v,positions:b}}static deserialize(l){const u=new cc;return u.ids=l.ids,u.positions=l.positions,u.indexed=!0,u}}function jo(A){const l=+A;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:_h(String(A))}function pu(A,l,u,v){for(;u<v;){const b=A[u+v>>1];let E=u-1,k=v+1;for(;;){do E++;while(A[E]<b);do k--;while(A[k]>b);if(E>=k)break;mu(A,E,k),mu(l,3*E,3*k),mu(l,3*E+1,3*k+1),mu(l,3*E+2,3*k+2)}k-u<v-k?(pu(A,l,u,k),u=k+1):(pu(A,l,k+1,v),v=k)}}function mu(A,l,u){const v=A[l];A[l]=A[u],A[u]=v}Ge("FeaturePositionMap",cc);class to{constructor(l,u){this.gl=l.gl,this.location=u}}class Xs extends to{constructor(l,u){super(l,u),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Wn extends to{constructor(l,u){super(l,u),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class sa extends to{constructor(l,u){super(l,u),this.current=Ti.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const Ts=new Float32Array(16);function Sd(A){return[us(255*A.r,255*A.g),us(255*A.b,255*A.a)]}class Mc{constructor(l,u,v){this.value=l,this.uniformNames=u.map(b=>`u_${b}`),this.type=v}setUniform(l,u,v){l.set(v.constantOr(this.value))}getBinding(l,u,v){return this.type==="color"?new sa(l,u):new Xs(l,u)}}class ul{constructor(l,u){this.uniformNames=u.map(v=>`u_${v}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=l.tlbr}setConstantDashPositions(l,u){this.dashTo=[0,l.y,l.height,l.width],this.dashFrom=[0,u.y,u.height,u.width]}setUniform(l,u,v,b){let E=null;b==="u_pattern_to"?E=this.patternTo:b==="u_pattern_from"?E=this.patternFrom:b==="u_dasharray_to"?E=this.dashTo:b==="u_dasharray_from"?E=this.dashFrom:b==="u_pixel_ratio_to"?E=this.pixelRatioTo:b==="u_pixel_ratio_from"&&(E=this.pixelRatioFrom),E!==null&&l.set(E)}getBinding(l,u,v){return v.substr(0,9)==="u_pattern"||v.substr(0,12)==="u_dasharray_"?new Wn(l,u):new Xs(l,u)}}class hs{constructor(l,u,v,b){this.expression=l,this.type=v,this.maxValue=0,this.paintVertexAttributes=u.map(E=>({name:`a_${E}`,type:"Float32",components:v==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(l,u,v){const b=this.paintVertexArray.length,E=this.expression.evaluate(new Li(0,v),u,{},v.canonical,[],v.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(b,l,E)}updatePaintArray(l,u,v,b,E){const k=this.expression.evaluate(new Li(0,E),v,b);this._setPaintValue(l,u,k)}_setPaintValue(l,u,v){if(this.type==="color"){const b=Sd(v);for(let E=l;E<u;E++)this.paintVertexArray.emplace(E,b[0],b[1])}else{for(let b=l;b<u;b++)this.paintVertexArray.emplace(b,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class jl{constructor(l,u,v,b,E,k){this.expression=l,this.uniformNames=u.map(P=>`u_${P}_t`),this.type=v,this.useIntegerZoom=b,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=u.map(P=>({name:`a_${P}`,type:"Float32",components:v==="color"?4:2,offset:0})),this.paintVertexArray=new k}populatePaintArray(l,u,v){const b=this.expression.evaluate(new Li(this.zoom,v),u,{},v.canonical,[],v.formattedSection),E=this.expression.evaluate(new Li(this.zoom+1,v),u,{},v.canonical,[],v.formattedSection),k=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(k,l,b,E)}updatePaintArray(l,u,v,b,E){const k=this.expression.evaluate(new Li(this.zoom,E),v,b),P=this.expression.evaluate(new Li(this.zoom+1,E),v,b);this._setPaintValue(l,u,k,P)}_setPaintValue(l,u,v,b){if(this.type==="color"){const E=Sd(v),k=Sd(b);for(let P=l;P<u;P++)this.paintVertexArray.emplace(P,E[0],E[1],k[0],k[1])}else{for(let E=l;E<u;E++)this.paintVertexArray.emplace(E,v,b);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(b))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,u){const v=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=Le(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);l.set(b)}getBinding(l,u,v){return new Xs(l,u)}}class Vu{constructor(l,u,v,b,E,k){this.expression=l,this.type=u,this.useIntegerZoom=v,this.zoom=b,this.layerId=k,this.zoomInPaintVertexArray=new E,this.zoomOutPaintVertexArray=new E}populatePaintArray(l,u,v){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(b,l,this.getPositionIds(u),v)}updatePaintArray(l,u,v,b,E){this._setPaintValues(l,u,this.getPositionIds(v),E)}_setPaintValues(l,u,v,b){const E=this.getPositions(b);if(!E||!v)return;const k=E[v.min],P=E[v.mid],Q=E[v.max];if(k&&P&&Q)for(let q=l;q<u;q++)this.emplace(this.zoomInPaintVertexArray,q,P,k),this.emplace(this.zoomOutPaintVertexArray,q,P,Q)}upload(l){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const u=this.getVertexAttributes();this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,u,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,u,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Gu extends Vu{getPositions(l){return l.imagePositions}getPositionIds(l){return l.patterns&&l.patterns[this.layerId]}getVertexAttributes(){return Sa.members}emplace(l,u,v,b){l.emplace(u,v.tlbr[0],v.tlbr[1],v.tlbr[2],v.tlbr[3],b.tlbr[0],b.tlbr[1],b.tlbr[2],b.tlbr[3],v.pixelRatio,b.pixelRatio)}}class Ed extends Vu{getPositions(l){return l.dashPositions}getPositionIds(l){return l.dashes&&l.dashes[this.layerId]}getVertexAttributes(){return ia.members}emplace(l,u,v,b){l.emplace(u,0,v.y,v.height,v.width,0,b.y,b.height,b.width)}}class Td{constructor(l,u,v){this.binders={},this._buffers=[];const b=[];for(const E in l.paint._values){if(!v(E))continue;const k=l.paint.get(E);if(!(k instanceof Rn&&hu(k.property.specification)))continue;const P=ef(E,l.type),Q=k.value,q=k.property.specification.type,J=k.property.useIntegerZoom,oe=k.property.specification["property-type"],ve=oe==="cross-faded"||oe==="cross-faded-data-driven";if(Q.kind==="constant")this.binders[E]=ve?new ul(Q.value,P):new Mc(Q.value,P,q),b.push(`/u_${E}`);else if(Q.kind==="source"||ve){const Be=Fd(E,q,"source");this.binders[E]=ve?E==="line-dasharray"?new Ed(Q,q,J,u,Be,l.id):new Gu(Q,q,J,u,Be,l.id):new hs(Q,P,q,Be),b.push(`/a_${E}`)}else{const Be=Fd(E,q,"composite");this.binders[E]=new jl(Q,P,q,J,u,Be),b.push(`/z_${E}`)}}this.cacheKey=b.sort().join("")}getMaxValue(l){const u=this.binders[l];return u instanceof hs||u instanceof jl?u.maxValue:0}populatePaintArrays(l,u,v){for(const b in this.binders){const E=this.binders[b];(E instanceof hs||E instanceof jl||E instanceof Vu)&&E.populatePaintArray(l,u,v)}}setConstantPatternPositions(l,u){for(const v in this.binders){const b=this.binders[v];b instanceof ul&&b.setConstantPatternPositions(l,u)}}setConstantDashPositions(l,u){for(const v in this.binders){const b=this.binders[v];b instanceof ul&&b.setConstantDashPositions(l,u)}}updatePaintArrays(l,u,v,b,E){let k=!1;for(const P in l){const Q=u.getPositions(P);for(const q of Q){const J=v.feature(q.index);for(const oe in this.binders){const ve=this.binders[oe];if((ve instanceof hs||ve instanceof jl||ve instanceof Vu)&&ve.expression.isStateDependent===!0){const Be=b.paint.get(oe);ve.expression=Be.value,ve.updatePaintArray(q.start,q.end,J,l[P],E),k=!0}}}}return k}defines(){const l=[];for(const u in this.binders){const v=this.binders[u];(v instanceof Mc||v instanceof ul)&&l.push(...v.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return l}getBinderAttributes(){const l=[];for(const u in this.binders){const v=this.binders[u];if(v instanceof hs||v instanceof jl)for(let b=0;b<v.paintVertexAttributes.length;b++)l.push(v.paintVertexAttributes[b].name);else if(v instanceof Vu){const b=v.getVertexAttributes();for(const E of b)l.push(E.name)}}return l}getBinderUniforms(){const l=[];for(const u in this.binders){const v=this.binders[u];if(v instanceof Mc||v instanceof ul||v instanceof jl)for(const b of v.uniformNames)l.push(b)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,u){const v=[];for(const b in this.binders){const E=this.binders[b];if(E instanceof Mc||E instanceof ul||E instanceof jl){for(const k of E.uniformNames)if(u[k]){const P=E.getBinding(l,u[k],k);v.push({name:k,property:b,binding:P})}}}return v}setUniforms(l,u,v,b){for(const{name:E,property:k,binding:P}of u)this.binders[k].setUniform(P,b,v.get(k),E)}updatePaintBuffers(l){this._buffers=[];for(const u in this.binders){const v=this.binders[u];if(l&&v instanceof Vu){const b=l.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(v instanceof hs||v instanceof jl)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(l){for(const u in this.binders){const v=this.binders[u];(v instanceof hs||v instanceof jl||v instanceof Vu)&&v.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const u=this.binders[l];(u instanceof hs||u instanceof jl||u instanceof Vu)&&u.destroy()}}}class Ol{constructor(l,u,v=()=>!0){this.programConfigurations={};for(const b of l)this.programConfigurations[b.id]=new Td(b,u,v);this.needsUpload=!1,this._featureMap=new cc,this._bufferOffset=0}populatePaintArrays(l,u,v,b){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(l,u,b);u.id!==void 0&&this._featureMap.add(u.id,v,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,u,v,b){for(const E of v)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(l,this._featureMap,u,E,b)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function ef(A,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(`${l}-`,"").replace(/-/g,"_")]}function Fd(A,l,u){const v={color:{source:ns,composite:te},number:{source:w,composite:ns}},b=function(E){return{"line-pattern":{source:Yt,composite:Yt},"fill-pattern":{source:Yt,composite:Yt},"fill-extrusion-pattern":{source:Yt,composite:Yt},"line-dasharray":{source:wr,composite:wr}}[E]}(A);return b&&b[u]||v[l][u]}Ge("ConstantBinder",Mc),Ge("CrossFadedConstantBinder",ul),Ge("SourceExpressionBinder",hs),Ge("CrossFadedPatternBinder",Gu),Ge("CrossFadedDasharrayBinder",Ed),Ge("CompositeExpressionBinder",jl),Ge("ProgramConfiguration",Td,{omit:["_buffers"]}),Ge("ProgramConfigurationSet",Ol);const tf=Math.pow(2,14)-1,bg=-tf-1;function jh(A){const l=Me/A.extent,u=A.loadGeometry();for(let v=0;v<u.length;v++){const b=u[v];for(let E=0;E<b.length;E++){const k=b[E],P=Math.round(k.x*l),Q=Math.round(k.y*l);k.x=Le(P,bg,tf),k.y=Le(Q,bg,tf),(P<k.x||P>k.x+1||Q<k.y||Q>k.y+1)&&kt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function rf(A,l){return{type:A.type,id:A.id,properties:A.properties,geometry:l?jh(A):[]}}const P0=-32768;function tx(A,l,u,v,b){A.emplaceBack(P0+8*l+v,P0+8*u+b)}class D0{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(u=>u.id),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new yt,this.indexArray=new Nn,this.segments=new tn,this.programConfigurations=new Ol(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(l,u,v){const b=this.layers[0],E=[];let k=null,P=!1,Q=b.type==="heatmap";if(b.type==="circle"){const J=b;k=J.layout.get("circle-sort-key"),P=!k.isConstant(),Q=Q||J.paint.get("circle-pitch-alignment")==="map"}const q=Q?u.subdivisionGranularity.circle:1;for(const{feature:J,id:oe,index:ve,sourceLayerIndex:Be}of l){const Fe=this.layers[0]._featureFilter.needGeometry,Oe=rf(J,Fe);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),Oe,v))continue;const Ze=P?k.evaluate(Oe,{},v):void 0,ht={id:oe,properties:J.properties,type:J.type,sourceLayerIndex:Be,index:ve,geometry:Fe?Oe.geometry:jh(J),patterns:{},sortKey:Ze};E.push(ht)}P&&E.sort((J,oe)=>J.sortKey-oe.sortKey);for(const J of E){const{geometry:oe,index:ve,sourceLayerIndex:Be}=J,Fe=l[ve].feature;this.addFeature(J,oe,ve,v,q),u.featureIndex.insert(Fe,oe,ve,Be,this.index)}}update(l,u,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:v})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,as),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,u,v,b,E=1){let k;switch(E){case 1:k=[0,7];break;case 3:k=[0,2,5,7];break;case 5:k=[0,1,3,4,6,7];break;case 7:k=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${E}; valid values are 1, 3, 5, 7.`)}const P=k.length;for(const Q of u)for(const q of Q){const J=q.x,oe=q.y;if(J<0||J>=Me||oe<0||oe>=Me)continue;const ve=this.segments.prepareSegment(P*P,this.layoutVertexArray,this.indexArray,l.sortKey),Be=ve.vertexLength;for(let Fe=0;Fe<P;Fe++)for(let Oe=0;Oe<P;Oe++)tx(this.layoutVertexArray,J,oe,k[Oe],k[Fe]);for(let Fe=0;Fe<P-1;Fe++)for(let Oe=0;Oe<P-1;Oe++){const Ze=Be+Fe*P+Oe,ht=Be+(Fe+1)*P+Oe;this.indexArray.emplaceBack(Ze,ht+1,Ze+1),this.indexArray.emplaceBack(Ze,ht,ht+1)}ve.vertexLength+=P*P,ve.primitiveLength+=(P-1)*(P-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,{imagePositions:{},canonical:b})}}function rx(A,l){for(let u=0;u<A.length;u++)if(xA(l,A[u]))return!0;for(let u=0;u<l.length;u++)if(xA(A,l[u]))return!0;return!!R0(A,l)}function Sp(A,l,u){return!!xA(A,l)||!!U0(l,A,u)}function xo(A,l){if(A.length===1)return Bg(l,A[0]);for(let u=0;u<l.length;u++){const v=l[u];for(let b=0;b<v.length;b++)if(xA(A,v[b]))return!0}for(let u=0;u<A.length;u++)if(Bg(l,A[u]))return!0;for(let u=0;u<l.length;u++)if(R0(A,l[u]))return!0;return!1}function hl(A,l,u){if(A.length>1){if(R0(A,l))return!0;for(let v=0;v<l.length;v++)if(U0(l[v],A,u))return!0}for(let v=0;v<A.length;v++)if(U0(A[v],l,u))return!0;return!1}function R0(A,l){if(A.length===0||l.length===0)return!1;for(let u=0;u<A.length-1;u++){const v=A[u],b=A[u+1];for(let E=0;E<l.length-1;E++)if(ix(v,b,l[E],l[E+1]))return!0}return!1}function ix(A,l,u,v){return ze(A,u,v)!==ze(l,u,v)&&ze(A,l,u)!==ze(A,l,v)}function U0(A,l,u){const v=u*u;if(l.length===1)return A.distSqr(l[0])<v;for(let b=1;b<l.length;b++)if(wg(A,l[b-1],l[b])<v)return!0;return!1}function wg(A,l,u){const v=l.distSqr(u);if(v===0)return A.distSqr(l);const b=((A.x-l.x)*(u.x-l.x)+(A.y-l.y)*(u.y-l.y))/v;return A.distSqr(b<0?l:b>1?u:u.sub(l)._mult(b)._add(l))}function Bg(A,l){let u,v,b,E=!1;for(let k=0;k<A.length;k++){u=A[k];for(let P=0,Q=u.length-1;P<u.length;Q=P++)v=u[P],b=u[Q],v.y>l.y!=b.y>l.y&&l.x<(b.x-v.x)*(l.y-v.y)/(b.y-v.y)+v.x&&(E=!E)}return E}function xA(A,l){let u=!1;for(let v=0,b=A.length-1;v<A.length;b=v++){const E=A[v],k=A[b];E.y>l.y!=k.y>l.y&&l.x<(k.x-E.x)*(l.y-E.y)/(k.y-E.y)+E.x&&(u=!u)}return u}function Cg(A,l,u){const v=u[0],b=u[2];if(A.x<v.x&&l.x<v.x||A.x>b.x&&l.x>b.x||A.y<v.y&&l.y<v.y||A.y>b.y&&l.y>b.y)return!1;const E=ze(A,l,u[0]);return E!==ze(A,l,u[1])||E!==ze(A,l,u[2])||E!==ze(A,l,u[3])}function Mf(A,l,u){const v=l.paint.get(A).value;return v.kind==="constant"?v.value:u.programConfigurations.get(l.id).getMaxValue(A)}function Ep(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Tp(A,l,u,v,b){if(!l[0]&&!l[1])return A;const E=d.convert(l)._mult(b);u==="viewport"&&E._rotate(-v);const k=[];for(let P=0;P<A.length;P++)k.push(A[P].sub(E));return k}function Sg({queryGeometry:A,size:l},u){return Sp(A,u,l)}function Eg({queryGeometry:A,size:l,transform:u,unwrappedTileID:v,getElevation:b},E){return Sp(A,E,l*(u.projectTileCoordinates(E.x,E.y,v,b).signedDistanceFromCamera/u.cameraToCenterDistance))}function Tg({queryGeometry:A,size:l,transform:u,unwrappedTileID:v,getElevation:b},E){const k=u.projectTileCoordinates(E.x,E.y,v,b).signedDistanceFromCamera,P=l*(u.cameraToCenterDistance/k);return Sp(A,kd(E,u,v,b),P)}function nx({queryGeometry:A,size:l,transform:u,unwrappedTileID:v,getElevation:b},E){return Sp(A,kd(E,u,v,b),l)}function j0({queryGeometry:A,size:l,transform:u,unwrappedTileID:v,getElevation:b,pitchAlignment:E="map",pitchScale:k="map"},P){const Q=E==="map"?k==="map"?Sg:Eg:k==="map"?Tg:nx,q={queryGeometry:A,size:l,transform:u,unwrappedTileID:v,getElevation:b};for(const J of P)for(const oe of J)if(Q(q,oe))return!0;return!1}function kd(A,l,u,v){const b=l.projectTileCoordinates(A.x,A.y,u,v).point;return new d((.5*b.x+.5)*l.width,(.5*-b.y+.5)*l.height)}let O0,Fg;Ge("CircleBucket",D0,{omit:["layers"]});var kg={get paint(){return Fg=Fg||new Jn({"circle-radius":new Dr(Bt.paint_circle["circle-radius"]),"circle-color":new Dr(Bt.paint_circle["circle-color"]),"circle-blur":new Dr(Bt.paint_circle["circle-blur"]),"circle-opacity":new Dr(Bt.paint_circle["circle-opacity"]),"circle-translate":new Tr(Bt.paint_circle["circle-translate"]),"circle-translate-anchor":new Tr(Bt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Tr(Bt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Tr(Bt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Dr(Bt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Dr(Bt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Dr(Bt.paint_circle["circle-stroke-opacity"])})},get layout(){return O0=O0||new Jn({"circle-sort-key":new Dr(Bt.layout_circle["circle-sort-key"])})}};class sx extends cs{constructor(l,u){super(l,kg,u)}createBucket(l){return new D0(l)}queryRadius(l){const u=l;return Mf("circle-radius",this,u)+Mf("circle-stroke-width",this,u)+Ep(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:v,geometry:b,transform:E,pixelsToTileUnits:k,unwrappedTileID:P,getElevation:Q}){const q=Tp(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-E.bearingInRadians,k),J=this.paint.get("circle-radius").evaluate(u,v)+this.paint.get("circle-stroke-width").evaluate(u,v),oe=this.paint.get("circle-pitch-scale"),ve=this.paint.get("circle-pitch-alignment");let Be,Fe;return ve==="map"?(Be=q,Fe=J*k):(Be=function(Oe,Ze,ht,Ut){return Oe.map(_t=>kd(_t,Ze,ht,Ut))}(q,E,P,Q),Fe=J),j0({queryGeometry:Be,size:Fe,transform:E,unwrappedTileID:P,getElevation:Q,pitchAlignment:ve,pitchScale:oe},b)}}class Oh extends D0{}let Q0;Ge("HeatmapBucket",Oh,{omit:["layers"]});var j2={get paint(){return Q0=Q0||new Jn({"heatmap-radius":new Dr(Bt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Dr(Bt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Tr(Bt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Rs(Bt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Tr(Bt.paint_heatmap["heatmap-opacity"])})}};function z0(A,{width:l,height:u},v,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==l*u*v)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${l*u*v}`)}else b=new Uint8Array(l*u*v);return A.width=l,A.height=u,A.data=b,A}function Qh(A,{width:l,height:u},v){if(l===A.width&&u===A.height)return;const b=z0({},{width:l,height:u},v);H0(A,b,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,l),height:Math.min(A.height,u)},v),A.width=l,A.height=u,A.data=b.data}function H0(A,l,u,v,b,E){if(b.width===0||b.height===0)return l;if(b.width>A.width||b.height>A.height||u.x>A.width-b.width||u.y>A.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>l.width||b.height>l.height||v.x>l.width-b.width||v.y>l.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const k=A.data,P=l.data;if(k===P)throw new Error("srcData equals dstData, so image is already copied");for(let Q=0;Q<b.height;Q++){const q=((u.y+Q)*A.width+u.x)*E,J=((v.y+Q)*l.width+v.x)*E;for(let oe=0;oe<b.width*E;oe++)P[J+oe]=k[q+oe]}return l}class nf{constructor(l,u){z0(this,l,1,u)}resize(l){Qh(this,l,1)}clone(){return new nf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,u,v,b,E){H0(l,u,v,b,E,1)}}class yo{constructor(l,u){z0(this,l,4,u)}resize(l){Qh(this,l,4)}replace(l,u){u?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new yo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,u,v,b,E){H0(l,u,v,b,E,4)}setPixel(l,u,v){const b=4*(l*this.width+u);this.data[b+0]=Math.round(255*v.r/v.a),this.data[b+1]=Math.round(255*v.g/v.a),this.data[b+2]=Math.round(255*v.b/v.a),this.data[b+3]=Math.round(255*v.a)}}function aa(A){const l={},u=A.resolution||256,v=A.clips?A.clips.length:1,b=A.image||new yo({width:u,height:v});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const E=(k,P,Q)=>{l[A.evaluationKey]=Q;const q=A.expression.evaluate(l);b.setPixel(k/4/u,P/4,q)};if(A.clips)for(let k=0,P=0;k<v;++k,P+=4*u)for(let Q=0,q=0;Q<u;Q++,q+=4){const J=Q/(u-1),{start:oe,end:ve}=A.clips[k];E(P,q,oe*(1-J)+ve*J)}else for(let k=0,P=0;k<u;k++,P+=4)E(0,P,k/(u-1));return b}Ge("AlphaImage",nf),Ge("RGBAImage",yo);const Ng="big-fb";class O2 extends cs{createBucket(l){return new Oh(l)}constructor(l,u){super(l,j2,u),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=aa({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Ng)&&this.heatmapFbos.delete(Ng)}queryRadius(l){return Mf("heatmap-radius",this,l)}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:v,geometry:b,transform:E,pixelsToTileUnits:k,unwrappedTileID:P,getElevation:Q}){return j0({queryGeometry:l,size:this.paint.get("heatmap-radius").evaluate(u,v)*k,transform:E,unwrappedTileID:P,getElevation:Q},b)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Ig;var Fp={get paint(){return Ig=Ig||new Jn({"hillshade-illumination-direction":new Tr(Bt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Tr(Bt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Tr(Bt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Tr(Bt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Tr(Bt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Tr(Bt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Tr(Bt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Tr(Bt.paint_hillshade["hillshade-method"])})}};class sf extends cs{constructor(l,u){super(l,Fp,u),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,u=this.paint.get("hillshade-illumination-altitude").values,v=this.paint.get("hillshade-highlight-color").values,b=this.paint.get("hillshade-shadow-color").values;const E=Math.max(l.length,u.length,v.length,b.length);l=l.concat(Array(E-l.length).fill(l.at(-1))),u=u.concat(Array(E-u.length).fill(u.at(-1))),v=v.concat(Array(E-v.length).fill(v.at(-1))),b=b.concat(Array(E-b.length).fill(b.at(-1)));const k=u.map(Bi);return{directionRadians:l.map(Bi),altitudeRadians:k,shadowColor:b,highlightColor:v}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Lg;var ax={get paint(){return Lg=Lg||new Jn({"color-relief-opacity":new Tr(Bt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Rs(Bt["paint_color-relief"]["color-relief-color"])})}};class Pf{constructor(l,u,v,b){this.context=l,this.format=v,this.texture=l.gl.createTexture(),this.update(u,b)}update(l,u,v){const{width:b,height:E}=l,k=!(this.size&&this.size[0]===b&&this.size[1]===E||v),{context:P}=this,{gl:Q}=P;if(this.useMipmap=!!(u&&u.useMipmap),Q.bindTexture(Q.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===Q.RGBA&&(!u||u.premultiply!==!1)),k)this.size=[b,E],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||or(l)?Q.texImage2D(Q.TEXTURE_2D,0,this.format,this.format,Q.UNSIGNED_BYTE,l):Q.texImage2D(Q.TEXTURE_2D,0,this.format,b,E,0,this.format,Q.UNSIGNED_BYTE,l.data);else{const{x:q,y:J}=v||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||or(l)?Q.texSubImage2D(Q.TEXTURE_2D,0,q,J,Q.RGBA,Q.UNSIGNED_BYTE,l):Q.texSubImage2D(Q.TEXTURE_2D,0,q,J,b,E,Q.RGBA,Q.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Q.generateMipmap(Q.TEXTURE_2D),P.pixelStoreUnpackFlipY.setDefault(),P.pixelStoreUnpack.setDefault(),P.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,u,v){const{context:b}=this,{gl:E}=b;E.bindTexture(E.TEXTURE_2D,this.texture),v!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=E.LINEAR),l!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,l),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,v||l),this.filter=l),u!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,u),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class bh{constructor(l,u,v,b=1,E=1,k=1,P=0){if(this.uid=l,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void kt(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const Q=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=b,this.greenFactor=E,this.blueFactor=k,this.baseShift=P;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let q=0;q<Q;q++)this.data[this._idx(-1,q)]=this.data[this._idx(0,q)],this.data[this._idx(Q,q)]=this.data[this._idx(Q-1,q)],this.data[this._idx(q,-1)]=this.data[this._idx(q,0)],this.data[this._idx(q,Q)]=this.data[this._idx(q,Q-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Q,-1)]=this.data[this._idx(Q-1,0)],this.data[this._idx(-1,Q)]=this.data[this._idx(0,Q-1)],this.data[this._idx(Q,Q)]=this.data[this._idx(Q-1,Q-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let q=0;q<Q;q++)for(let J=0;J<Q;J++){const oe=this.get(q,J);oe>this.max&&(this.max=oe),oe<this.min&&(this.min=oe)}}get(l,u){const v=new Uint8Array(this.data.buffer),b=4*this._idx(l,u);return this.unpack(v[b],v[b+1],v[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,u){if(l<-1||l>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(l+1)}unpack(l,u,v){return l*this.redFactor+u*this.greenFactor+v*this.blueFactor-this.baseShift}pack(l){return Mg(l,this.getUnpackVector())}getPixels(){return new yo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,u,v){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let b=u*this.dim,E=u*this.dim+this.dim,k=v*this.dim,P=v*this.dim+this.dim;switch(u){case-1:b=E-1;break;case 1:E=b+1}switch(v){case-1:k=P-1;break;case 1:P=k+1}const Q=-u*this.dim,q=-v*this.dim;for(let J=k;J<P;J++)for(let oe=b;oe<E;oe++)this.data[this._idx(oe,J)]=l.data[this._idx(oe+Q,J+q)]}}function Mg(A,l){const u=l[0],v=l[1],b=l[2],E=l[3],k=Math.min(u,v,b),P=Math.round((A+E)/k);return{r:Math.floor(P*k/u)%256,g:Math.floor(P*k/v)%256,b:Math.floor(P*k/b)%256}}Ge("DEMData",bh);class Pg extends cs{constructor(l,u){super(l,ax,u)}_createColorRamp(l){const u={elevationStops:[],colorStops:[]},v=this._transitionablePaint._values["color-relief-color"].value.expression;if(v instanceof gh&&v._styleExpression.expression instanceof lr){this.colorRampExpression=v;const k=v._styleExpression.expression;u.elevationStops=k.labels,u.colorStops=[];for(const P of u.elevationStops)u.colorStops.push(k.evaluate({globals:{elevation:P}}))}if(u.elevationStops.length<1&&(u.elevationStops=[0],u.colorStops=[Ti.transparent]),u.elevationStops.length<2&&(u.elevationStops.push(u.elevationStops[0]+1),u.colorStops.push(u.colorStops[0])),u.elevationStops.length<=l)return u;const b={elevationStops:[],colorStops:[]},E=(u.elevationStops.length-1)/(l-1);for(let k=0;k<u.elevationStops.length-.5;k+=E)b.elevationStops.push(u.elevationStops[Math.round(k)]),b.colorStops.push(u.colorStops[Math.round(k)]);return kt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),b}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,u,v){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const b=this._createColorRamp(u),E=new yo({width:b.colorStops.length,height:1}),k=new yo({width:b.colorStops.length,height:1});for(let P=0;P<b.elevationStops.length;P++){const Q=Mg(b.elevationStops[P],v);k.setPixel(0,P,new Ti(Q.r/255,Q.g/255,Q.b/255,1)),E.setPixel(0,P,b.colorStops[P])}return this.colorRampTextures={elevationTexture:new Pf(l,k,l.gl.RGBA),colorTexture:new Pf(l,E,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const ox=un([{name:"a_pos",components:2,type:"Int16"}],4),{members:Dg}=ox;function Nd(A,l,u){const v=u.patternDependencies;let b=!1;for(const E of l){const k=E.paint.get(`${A}-pattern`);k.isConstant()||(b=!0);const P=k.constantOr(null);P&&(b=!0,v[P.to]=!0,v[P.from]=!0)}return b}function Id(A,l,u,v,b){const{zoom:E}=v,k=b.patternDependencies;for(const P of l){const Q=P.paint.get(`${A}-pattern`).value;if(Q.kind!=="constant"){let q=Q.evaluate({zoom:E-1},u,{},b.availableImages),J=Q.evaluate({zoom:E},u,{},b.availableImages),oe=Q.evaluate({zoom:E+1},u,{},b.availableImages);q=q&&q.name?q.name:q,J=J&&J.name?J.name:J,oe=oe&&oe.name?oe.name:oe,k[q]=!0,k[J]=!0,k[oe]=!0,u.patterns[P.id]={min:q,mid:J,max:oe}}}return u}function Rg(A,l,u,v,b){let E;if(b===function(k,P,Q,q){let J=0;for(let oe=P,ve=Q-q;oe<Q;oe+=q)J+=(k[ve]-k[oe])*(k[oe+1]+k[ve+1]),ve=oe;return J}(A,l,u,v)>0)for(let k=l;k<u;k+=v)E=af(k/v|0,A[k],A[k+1],E);else for(let k=u-v;k>=l;k-=v)E=af(k/v|0,A[k],A[k+1],E);return E&&Qo(E,E.next)&&(Ku(E),E=E.next),E}function uc(A,l){if(!A)return A;l||(l=A);let u,v=A;do if(u=!1,v.steiner||!Qo(v,v.next)&&Ys(v.prev,v,v.next)!==0)v=v.next;else{if(Ku(v),v=l=v.prev,v===v.next)break;u=!0}while(u||v!==l);return l}function Zs(A,l,u,v,b,E,k){if(!A)return;!k&&E&&function(Q,q,J,oe){let ve=Q;do ve.z===0&&(ve.z=Ql(ve.x,ve.y,q,J,oe)),ve.prevZ=ve.prev,ve.nextZ=ve.next,ve=ve.next;while(ve!==Q);ve.prevZ.nextZ=null,ve.prevZ=null,function(Be){let Fe,Oe=1;do{let Ze,ht=Be;Be=null;let Ut=null;for(Fe=0;ht;){Fe++;let _t=ht,Ct=0;for(let nr=0;nr<Oe&&(Ct++,_t=_t.nextZ,_t);nr++);let Jt=Oe;for(;Ct>0||Jt>0&&_t;)Ct!==0&&(Jt===0||!_t||ht.z<=_t.z)?(Ze=ht,ht=ht.nextZ,Ct--):(Ze=_t,_t=_t.nextZ,Jt--),Ut?Ut.nextZ=Ze:Be=Ze,Ze.prevZ=Ut,Ut=Ze;ht=_t}Ut.nextZ=null,Oe*=2}while(Fe>1)}(ve)}(A,v,b,E);let P=A;for(;A.prev!==A.next;){const Q=A.prev,q=A.next;if(E?lx(A,v,b,E):Ug(A))l.push(Q.i,A.i,q.i),Ku(A),A=q.next,P=q.next;else if((A=q)===P){k?k===1?Zs(A=Oo(uc(A),l),l,u,v,b,E,2):k===2&&Q2(A,l,u,v,b,E):Zs(uc(A),l,u,v,b,E,1);break}}}function Ug(A){const l=A.prev,u=A,v=A.next;if(Ys(l,u,v)>=0)return!1;const b=l.x,E=u.x,k=v.x,P=l.y,Q=u.y,q=v.y,J=Math.min(b,E,k),oe=Math.min(P,Q,q),ve=Math.max(b,E,k),Be=Math.max(P,Q,q);let Fe=v.next;for(;Fe!==l;){if(Fe.x>=J&&Fe.x<=ve&&Fe.y>=oe&&Fe.y<=Be&&Ld(b,P,E,Q,k,q,Fe.x,Fe.y)&&Ys(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.next}return!0}function lx(A,l,u,v){const b=A.prev,E=A,k=A.next;if(Ys(b,E,k)>=0)return!1;const P=b.x,Q=E.x,q=k.x,J=b.y,oe=E.y,ve=k.y,Be=Math.min(P,Q,q),Fe=Math.min(J,oe,ve),Oe=Math.max(P,Q,q),Ze=Math.max(J,oe,ve),ht=Ql(Be,Fe,l,u,v),Ut=Ql(Oe,Ze,l,u,v);let _t=A.prevZ,Ct=A.nextZ;for(;_t&&_t.z>=ht&&Ct&&Ct.z<=Ut;){if(_t.x>=Be&&_t.x<=Oe&&_t.y>=Fe&&_t.y<=Ze&&_t!==b&&_t!==k&&Ld(P,J,Q,oe,q,ve,_t.x,_t.y)&&Ys(_t.prev,_t,_t.next)>=0||(_t=_t.prevZ,Ct.x>=Be&&Ct.x<=Oe&&Ct.y>=Fe&&Ct.y<=Ze&&Ct!==b&&Ct!==k&&Ld(P,J,Q,oe,q,ve,Ct.x,Ct.y)&&Ys(Ct.prev,Ct,Ct.next)>=0))return!1;Ct=Ct.nextZ}for(;_t&&_t.z>=ht;){if(_t.x>=Be&&_t.x<=Oe&&_t.y>=Fe&&_t.y<=Ze&&_t!==b&&_t!==k&&Ld(P,J,Q,oe,q,ve,_t.x,_t.y)&&Ys(_t.prev,_t,_t.next)>=0)return!1;_t=_t.prevZ}for(;Ct&&Ct.z<=Ut;){if(Ct.x>=Be&&Ct.x<=Oe&&Ct.y>=Fe&&Ct.y<=Ze&&Ct!==b&&Ct!==k&&Ld(P,J,Q,oe,q,ve,Ct.x,Ct.y)&&Ys(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.nextZ}return!0}function Oo(A,l){let u=A;do{const v=u.prev,b=u.next.next;!Qo(v,b)&&qu(v,u,u.next,b)&&Md(v,b)&&Md(b,v)&&(l.push(v.i,u.i,b.i),Ku(u),Ku(u.next),u=A=b),u=u.next}while(u!==A);return uc(u)}function Q2(A,l,u,v,b,E){let k=A;do{let P=k.next.next;for(;P!==k.prev;){if(k.i!==P.i&&z2(k,P)){let Q=_A(k,P);return k=uc(k,k.next),Q=uc(Q,Q.next),Zs(k,l,u,v,b,E,0),void Zs(Q,l,u,v,b,E,0)}P=P.next}k=k.next}while(k!==A)}function cx(A,l){let u=A.x-l.x;return u===0&&(u=A.y-l.y,u===0)&&(u=(A.next.y-A.y)/(A.next.x-A.x)-(l.next.y-l.y)/(l.next.x-l.x)),u}function ux(A,l){const u=function(b,E){let k=E;const P=b.x,Q=b.y;let q,J=-1/0;if(Qo(b,k))return k;do{if(Qo(b,k.next))return k.next;if(Q<=k.y&&Q>=k.next.y&&k.next.y!==k.y){const Oe=k.x+(Q-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(Oe<=P&&Oe>J&&(J=Oe,q=k.x<k.next.x?k:k.next,Oe===P))return q}k=k.next}while(k!==E);if(!q)return null;const oe=q,ve=q.x,Be=q.y;let Fe=1/0;k=q;do{if(P>=k.x&&k.x>=ve&&P!==k.x&&jg(Q<Be?P:J,Q,ve,Be,Q<Be?J:P,Q,k.x,k.y)){const Oe=Math.abs(Q-k.y)/(P-k.x);Md(k,b)&&(Oe<Fe||Oe===Fe&&(k.x>q.x||k.x===q.x&&oa(q,k)))&&(q=k,Fe=Oe)}k=k.next}while(k!==oe);return q}(A,l);if(!u)return l;const v=_A(u,A);return uc(v,v.next),uc(u,u.next)}function oa(A,l){return Ys(A.prev,A,l.prev)<0&&Ys(l.next,A,A.next)<0}function Ql(A,l,u,v,b){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-u)*b|0)|A<<8))|A<<4))|A<<2))|A<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-v)*b|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function yA(A){let l=A,u=A;do(l.x<u.x||l.x===u.x&&l.y<u.y)&&(u=l),l=l.next;while(l!==A);return u}function jg(A,l,u,v,b,E,k,P){return(b-k)*(l-P)>=(A-k)*(E-P)&&(A-k)*(v-P)>=(u-k)*(l-P)&&(u-k)*(E-P)>=(b-k)*(v-P)}function Ld(A,l,u,v,b,E,k,P){return!(A===k&&l===P)&&jg(A,l,u,v,b,E,k,P)}function z2(A,l){return A.next.i!==l.i&&A.prev.i!==l.i&&!function(u,v){let b=u;do{if(b.i!==u.i&&b.next.i!==u.i&&b.i!==v.i&&b.next.i!==v.i&&qu(b,b.next,u,v))return!0;b=b.next}while(b!==u);return!1}(A,l)&&(Md(A,l)&&Md(l,A)&&function(u,v){let b=u,E=!1;const k=(u.x+v.x)/2,P=(u.y+v.y)/2;do b.y>P!=b.next.y>P&&b.next.y!==b.y&&k<(b.next.x-b.x)*(P-b.y)/(b.next.y-b.y)+b.x&&(E=!E),b=b.next;while(b!==u);return E}(A,l)&&(Ys(A.prev,A,l.prev)||Ys(A,l.prev,l))||Qo(A,l)&&Ys(A.prev,A,A.next)>0&&Ys(l.prev,l,l.next)>0)}function Ys(A,l,u){return(l.y-A.y)*(u.x-l.x)-(l.x-A.x)*(u.y-l.y)}function Qo(A,l){return A.x===l.x&&A.y===l.y}function qu(A,l,u,v){const b=zl(Ys(A,l,u)),E=zl(Ys(A,l,v)),k=zl(Ys(u,v,A)),P=zl(Ys(u,v,l));return b!==E&&k!==P||!(b!==0||!kp(A,u,l))||!(E!==0||!kp(A,v,l))||!(k!==0||!kp(u,A,v))||!(P!==0||!kp(u,l,v))}function kp(A,l,u){return l.x<=Math.max(A.x,u.x)&&l.x>=Math.min(A.x,u.x)&&l.y<=Math.max(A.y,u.y)&&l.y>=Math.min(A.y,u.y)}function zl(A){return A>0?1:A<0?-1:0}function Md(A,l){return Ys(A.prev,A,A.next)<0?Ys(A,l,A.next)>=0&&Ys(A,A.prev,l)>=0:Ys(A,l,A.prev)<0||Ys(A,A.next,l)<0}function _A(A,l){const u=Np(A.i,A.x,A.y),v=Np(l.i,l.x,l.y),b=A.next,E=l.prev;return A.next=l,l.prev=A,u.next=b,b.prev=u,v.next=u,u.prev=v,E.next=v,v.prev=E,v}function af(A,l,u,v){const b=Np(A,l,u);return v?(b.next=v.next,b.prev=v,v.next.prev=b,v.next=b):(b.prev=b,b.next=b),b}function Ku(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Np(A,l,u){return{i:A,x:l,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class of{constructor(l,u){if(u>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=u}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class gu{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}gu.noSubdivision=new gu({fill:new of(0,0),line:new of(0,0),tile:new of(0,0),stencil:new of(0,0),circle:1}),Ge("SubdivisionGranularityExpression",of),Ge("SubdivisionGranularitySetting",gu);const Df=-32768,zh=32767;class Ip{constructor(l,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=Me/l,this._canonical=u}_getKey(l,u){return(l+=32768)<<16|u+32768}_vertexToIndex(l,u){if(l<-32768||u<-32768||l>32767||u>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const v=0|Math.round(l),b=0|Math.round(u),E=this._getKey(v,b);if(this._vertexDictionary.has(E))return this._vertexDictionary.get(E);const k=this._vertexBuffer.length/2;return this._vertexDictionary.set(E,k),this._vertexBuffer.push(v,b),k}_subdivideTrianglesScanline(l){if(this._granularity<2)return function(b,E){const k=[];for(let P=0;P<E.length;P+=3){const Q=E[P],q=E[P+1],J=E[P+2],oe=b[2*Q],ve=b[2*Q+1];(b[2*q]-oe)*(b[2*J+1]-ve)-(b[2*q+1]-ve)*(b[2*J]-oe)>0?(k.push(Q),k.push(J),k.push(q)):(k.push(Q),k.push(q),k.push(J))}return k}(this._vertexBuffer,l);const u=[],v=l.length;for(let b=0;b<v;b+=3){const E=[l[b+0],l[b+1],l[b+2]],k=[this._vertexBuffer[2*l[b+0]+0],this._vertexBuffer[2*l[b+0]+1],this._vertexBuffer[2*l[b+1]+0],this._vertexBuffer[2*l[b+1]+1],this._vertexBuffer[2*l[b+2]+0],this._vertexBuffer[2*l[b+2]+1]];let P=1/0,Q=1/0,q=-1/0,J=-1/0;for(let Oe=0;Oe<3;Oe++){const Ze=k[2*Oe],ht=k[2*Oe+1];P=Math.min(P,Ze),q=Math.max(q,Ze),Q=Math.min(Q,ht),J=Math.max(J,ht)}if(P===q||Q===J)continue;const oe=Math.floor(P/this._granularityCellSize),ve=Math.ceil(q/this._granularityCellSize),Be=Math.floor(Q/this._granularityCellSize),Fe=Math.ceil(J/this._granularityCellSize);if(oe!==ve||Be!==Fe)for(let Oe=Be;Oe<Fe;Oe++){const Ze=this._scanlineGenerateVertexRingForCellRow(Oe,k,E);hx(this._vertexBuffer,Ze,u)}else u.push(...E)}return u}_scanlineGenerateVertexRingForCellRow(l,u,v){const b=l*this._granularityCellSize,E=b+this._granularityCellSize,k=[];for(let P=0;P<3;P++){const Q=u[2*P],q=u[2*P+1],J=u[2*(P+1)%6],oe=u[(2*(P+1)+1)%6],ve=u[2*(P+2)%6],Be=u[(2*(P+2)+1)%6],Fe=J-Q,Oe=oe-q,Ze=Fe===0,ht=Oe===0,Ut=(b-q)/Oe,_t=(E-q)/Oe,Ct=Math.min(Ut,_t),Jt=Math.max(Ut,_t);if(!ht&&(Ct>=1||Jt<=0)||ht&&(q<b||q>E)){oe>=b&&oe<=E&&k.push(v[(P+1)%3]);continue}!ht&&Ct>0&&k.push(this._vertexToIndex(Q+Fe*Ct,q+Oe*Ct));const nr=Q+Fe*Math.max(Ct,0),gr=Q+Fe*Math.min(Jt,1);Ze||this._generateIntraEdgeVertices(k,Q,q,J,oe,nr,gr),!ht&&Jt<1&&k.push(this._vertexToIndex(Q+Fe*Jt,q+Oe*Jt)),(ht||oe>=b&&oe<=E)&&k.push(v[(P+1)%3]),!ht&&(oe<=b||oe>=E)&&this._generateInterEdgeVertices(k,Q,q,J,oe,ve,Be,gr,b,E)}return k}_generateIntraEdgeVertices(l,u,v,b,E,k,P){const Q=b-u,q=E-v,J=q===0,oe=J?Math.min(u,b):Math.min(k,P),ve=J?Math.max(u,b):Math.max(k,P),Be=Math.floor(oe/this._granularityCellSize)+1,Fe=Math.ceil(ve/this._granularityCellSize)-1;if(J?u<b:k<P)for(let Oe=Be;Oe<=Fe;Oe++){const Ze=Oe*this._granularityCellSize;l.push(this._vertexToIndex(Ze,v+q*(Ze-u)/Q))}else for(let Oe=Fe;Oe>=Be;Oe--){const Ze=Oe*this._granularityCellSize;l.push(this._vertexToIndex(Ze,v+q*(Ze-u)/Q))}}_generateInterEdgeVertices(l,u,v,b,E,k,P,Q,q,J){const oe=E-v,ve=k-b,Be=P-E,Fe=(q-E)/Be,Oe=(J-E)/Be,Ze=Math.min(Fe,Oe),ht=Math.max(Fe,Oe),Ut=b+ve*Ze;let _t=Math.floor(Math.min(Ut,Q)/this._granularityCellSize)+1,Ct=Math.ceil(Math.max(Ut,Q)/this._granularityCellSize)-1,Jt=Q<Ut;const nr=Be===0;if(nr&&(P===q||P===J))return;if(nr||Ze>=1||ht<=0){const Lr=v-P,Nr=k+(u-k)*Math.min((q-P)/Lr,(J-P)/Lr);_t=Math.floor(Math.min(Nr,Q)/this._granularityCellSize)+1,Ct=Math.ceil(Math.max(Nr,Q)/this._granularityCellSize)-1,Jt=Q<Nr}const gr=oe>0?J:q;if(Jt)for(let Lr=_t;Lr<=Ct;Lr++)l.push(this._vertexToIndex(Lr*this._granularityCellSize,gr));else for(let Lr=Ct;Lr>=_t;Lr--)l.push(this._vertexToIndex(Lr*this._granularityCellSize,gr))}_generateOutline(l){const u=[];for(const v of l){const b=Wu(v,this._granularity,!0),E=this._pointArrayToIndices(b),k=[];for(let P=1;P<E.length;P++)k.push(E[P-1]),k.push(E[P]);u.push(k)}return u}_handlePoles(l){let u=!1,v=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(v=!0)),(u||v)&&this._fillPoles(l,u,v)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let u=0;u<l.length;u+=2){const v=l[u+1];v===Df&&(l[u+1]=-32767),v===zh&&(l[u+1]=32766)}}_generatePoleQuad(l,u,v,b,E,k){b>E!=(k===Df)?(l.push(u),l.push(v),l.push(this._vertexToIndex(b,k)),l.push(v),l.push(this._vertexToIndex(E,k)),l.push(this._vertexToIndex(b,k))):(l.push(v),l.push(u),l.push(this._vertexToIndex(b,k)),l.push(this._vertexToIndex(E,k)),l.push(v),l.push(this._vertexToIndex(b,k)))}_fillPoles(l,u,v){const b=this._vertexBuffer,E=Me,k=l.length;for(let P=2;P<k;P+=3){const Q=l[P-2],q=l[P-1],J=l[P],oe=b[2*Q],ve=b[2*Q+1],Be=b[2*q],Fe=b[2*q+1],Oe=b[2*J],Ze=b[2*J+1];u&&(ve===0&&Fe===0&&this._generatePoleQuad(l,Q,q,oe,Be,Df),Fe===0&&Ze===0&&this._generatePoleQuad(l,q,J,Be,Oe,Df),Ze===0&&ve===0&&this._generatePoleQuad(l,J,Q,Oe,oe,Df)),v&&(ve===E&&Fe===E&&this._generatePoleQuad(l,Q,q,oe,Be,zh),Fe===E&&Ze===E&&this._generatePoleQuad(l,q,J,Be,Oe,zh),Ze===E&&ve===E&&this._generatePoleQuad(l,J,Q,Oe,oe,zh))}}_initializeVertices(l){for(let u=0;u<l.length;u+=2)this._vertexToIndex(l[u],l[u+1])}subdividePolygonInternal(l,u){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:v,holeIndices:b}=function(P){const Q=[],q=[];for(const J of P)if(J.length!==0){J!==P[0]&&Q.push(q.length/2);for(let oe=0;oe<J.length;oe++)q.push(J[oe].x),q.push(J[oe].y)}return{flattened:q,holeIndices:Q}}(l);let E;this._initializeVertices(v);try{const P=function(q,J,oe=2){const ve=J&&J.length,Be=ve?J[0]*oe:q.length;let Fe=Rg(q,0,Be,oe,!0);const Oe=[];if(!Fe||Fe.next===Fe.prev)return Oe;let Ze,ht,Ut;if(ve&&(Fe=function(_t,Ct,Jt,nr){const gr=[];for(let Lr=0,Nr=Ct.length;Lr<Nr;Lr++){const Pr=Rg(_t,Ct[Lr]*nr,Lr<Nr-1?Ct[Lr+1]*nr:_t.length,nr,!1);Pr===Pr.next&&(Pr.steiner=!0),gr.push(yA(Pr))}gr.sort(cx);for(let Lr=0;Lr<gr.length;Lr++)Jt=ux(gr[Lr],Jt);return Jt}(q,J,Fe,oe)),q.length>80*oe){Ze=q[0],ht=q[1];let _t=Ze,Ct=ht;for(let Jt=oe;Jt<Be;Jt+=oe){const nr=q[Jt],gr=q[Jt+1];nr<Ze&&(Ze=nr),gr<ht&&(ht=gr),nr>_t&&(_t=nr),gr>Ct&&(Ct=gr)}Ut=Math.max(_t-Ze,Ct-ht),Ut=Ut!==0?32767/Ut:0}return Zs(Fe,Oe,oe,Ze,ht,Ut,0),Oe}(v,b),Q=this._convertIndices(v,P);E=this._subdivideTrianglesScanline(Q)}catch(P){console.error(P)}let k=[];return u&&(k=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(E),{verticesFlattened:this._vertexBuffer,indicesTriangles:E,indicesLineList:k}}_convertIndices(l,u){const v=[];for(let b=0;b<u.length;b++)v.push(this._vertexToIndex(l[2*u[b]],l[2*u[b]+1]));return v}_pointArrayToIndices(l){const u=[];for(let v=0;v<l.length;v++){const b=l[v];u.push(this._vertexToIndex(b.x,b.y))}return u}}function Pd(A,l,u,v=!0){return new Ip(u,l).subdividePolygonInternal(A,v)}function Wu(A,l,u=!1){if(!A||A.length<1)return[];if(A.length<2)return[];const v=A[0],b=A[A.length-1],E=u&&(v.x!==b.x||v.y!==b.y);if(l<2)return E?[...A,A[0]]:[...A];const k=Math.floor(Me/l),P=[];P.push(new d(A[0].x,A[0].y));const Q=A.length,q=E?Q:Q-1;for(let J=0;J<q;J++){const oe=A[J],ve=J<Q-1?A[J+1]:A[0],Be=oe.x,Fe=oe.y,Oe=ve.x,Ze=ve.y,ht=Be!==Oe,Ut=Fe!==Ze;if(!ht&&!Ut)continue;const _t=Oe-Be,Ct=Ze-Fe,Jt=Math.abs(_t),nr=Math.abs(Ct);let gr=Be,Lr=Fe;for(;;){const Pr=_t>0?(Math.floor(gr/k)+1)*k:(Math.ceil(gr/k)-1)*k,Jr=Ct>0?(Math.floor(Lr/k)+1)*k:(Math.ceil(Lr/k)-1)*k,Rr=Math.abs(gr-Pr),Ur=Math.abs(Lr-Jr),fr=Math.abs(gr-Oe),Si=Math.abs(Lr-Ze),Pi=ht?Rr/Jt:Number.POSITIVE_INFINITY,hi=Ut?Ur/nr:Number.POSITIVE_INFINITY;if((fr<=Rr||!ht)&&(Si<=Ur||!Ut))break;if(Pi<hi&&ht||!Ut){gr=Pr,Lr+=Ct*Pi;const ii=new d(gr,Math.round(Lr));P[P.length-1].x===ii.x&&P[P.length-1].y===ii.y||P.push(ii)}else{gr+=_t*hi,Lr=Jr;const ii=new d(Math.round(gr),Lr);P[P.length-1].x===ii.x&&P[P.length-1].y===ii.y||P.push(ii)}}const Nr=new d(Oe,Ze);P[P.length-1].x===Nr.x&&P[P.length-1].y===Nr.y||P.push(Nr)}return P}function hx(A,l,u){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let v=0,b=A[2*l[0]];for(let Q=1;Q<l.length;Q++){const q=A[2*l[Q]];q<b&&(b=q,v=Q)}const E=l.length;let k=v,P=(k+1)%E;for(;;){const Q=k-1>=0?k-1:E-1,q=(P+1)%E,J=A[2*l[Q]],oe=A[2*l[q]],ve=A[2*l[k]],Be=A[2*l[k]+1],Fe=A[2*l[P]+1];let Oe=!1;if(J<oe)Oe=!0;else if(J>oe)Oe=!1;else{const Ze=Fe-Be,ht=-(A[2*l[P]]-ve),Ut=Be<Fe?1:-1;((J-ve)*Ze+(A[2*l[Q]+1]-Be)*ht)*Ut>((oe-ve)*Ze+(A[2*l[q]+1]-Be)*ht)*Ut&&(Oe=!0)}if(Oe){const Ze=l[Q],ht=l[k],Ut=l[P];Ze!==ht&&Ze!==Ut&&ht!==Ut&&u.push(Ut,ht,Ze),k--,k<0&&(k=E-1)}else{const Ze=l[q],ht=l[k],Ut=l[P];Ze!==ht&&Ze!==Ut&&ht!==Ut&&u.push(Ut,ht,Ze),P++,P>=E&&(P=0)}if(Q===q)break}}function Og(A,l,u,v,b,E,k,P,Q){const q=b.length/2,J=k&&P&&Q;if(q<tn.MAX_VERTEX_ARRAY_LENGTH){const oe=l.prepareSegment(q,u,v),ve=oe.vertexLength;for(let Oe=0;Oe<E.length;Oe+=3)v.emplaceBack(ve+E[Oe],ve+E[Oe+1],ve+E[Oe+2]);let Be,Fe;oe.vertexLength+=q,oe.primitiveLength+=E.length/3,J&&(Fe=k.prepareSegment(q,u,P),Be=Fe.vertexLength,Fe.vertexLength+=q);for(let Oe=0;Oe<b.length;Oe+=2)A(b[Oe],b[Oe+1]);if(J)for(let Oe=0;Oe<Q.length;Oe++){const Ze=Q[Oe];for(let ht=1;ht<Ze.length;ht+=2)P.emplaceBack(Be+Ze[ht-1],Be+Ze[ht]);Fe.primitiveLength+=Ze.length/2}}else(function(oe,ve,Be,Fe,Oe,Ze){const ht=[];for(let nr=0;nr<Fe.length/2;nr++)ht.push(-1);const Ut={count:0};let _t=0,Ct=oe.getOrCreateLatestSegment(ve,Be),Jt=Ct.vertexLength;for(let nr=2;nr<Oe.length;nr+=3){const gr=Oe[nr-2],Lr=Oe[nr-1],Nr=Oe[nr];let Pr=ht[gr]<_t,Jr=ht[Lr]<_t,Rr=ht[Nr]<_t;Ct.vertexLength+((Pr?1:0)+(Jr?1:0)+(Rr?1:0))>tn.MAX_VERTEX_ARRAY_LENGTH&&(Ct=oe.createNewSegment(ve,Be),_t=Ut.count,Pr=!0,Jr=!0,Rr=!0,Jt=0);const Ur=bA(ht,Fe,Ze,Ut,gr,Pr,Ct),fr=bA(ht,Fe,Ze,Ut,Lr,Jr,Ct),Si=bA(ht,Fe,Ze,Ut,Nr,Rr,Ct);Be.emplaceBack(Jt+Ur-_t,Jt+fr-_t,Jt+Si-_t),Ct.primitiveLength++}})(l,u,v,b,E,A),J&&function(oe,ve,Be,Fe,Oe,Ze){const ht=[];for(let nr=0;nr<Fe.length/2;nr++)ht.push(-1);const Ut={count:0};let _t=0,Ct=oe.getOrCreateLatestSegment(ve,Be),Jt=Ct.vertexLength;for(let nr=0;nr<Oe.length;nr++){const gr=Oe[nr];for(let Lr=1;Lr<Oe[nr].length;Lr+=2){const Nr=gr[Lr-1],Pr=gr[Lr];let Jr=ht[Nr]<_t,Rr=ht[Pr]<_t;Ct.vertexLength+((Jr?1:0)+(Rr?1:0))>tn.MAX_VERTEX_ARRAY_LENGTH&&(Ct=oe.createNewSegment(ve,Be),_t=Ut.count,Jr=!0,Rr=!0,Jt=0);const Ur=bA(ht,Fe,Ze,Ut,Nr,Jr,Ct),fr=bA(ht,Fe,Ze,Ut,Pr,Rr,Ct);Be.emplaceBack(Jt+Ur-_t,Jt+fr-_t),Ct.primitiveLength++}}}(k,u,P,b,Q,A),l.forceNewSegmentOnNextPrepare(),k?.forceNewSegmentOnNextPrepare()}function bA(A,l,u,v,b,E,k){if(E){const P=v.count;return u(l[2*b],l[2*b+1]),A[b]=v.count,v.count++,k.vertexLength++,P}return A[b]}class V0{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(u=>u.id),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Lt,this.indexArray=new Nn,this.indexArray2=new Mn,this.programConfigurations=new Ol(l.layers,l.zoom),this.segments=new tn,this.segments2=new tn,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(l,u,v){this.hasDependencies=Nd("fill",this.layers,u);const b=this.layers[0].layout.get("fill-sort-key"),E=!b.isConstant(),k=[];for(const{feature:P,id:Q,index:q,sourceLayerIndex:J}of l){const oe=this.layers[0]._featureFilter.needGeometry,ve=rf(P,oe);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),ve,v))continue;const Be=E?b.evaluate(ve,{},v,u.availableImages):void 0,Fe={id:Q,properties:P.properties,type:P.type,sourceLayerIndex:J,index:q,geometry:oe?ve.geometry:jh(P),patterns:{},sortKey:Be};k.push(Fe)}E&&k.sort((P,Q)=>P.sortKey-Q.sortKey);for(const P of k){const{geometry:Q,index:q,sourceLayerIndex:J}=P;if(this.hasDependencies){const oe=Id("fill",this.layers,P,{zoom:this.zoom},u);this.patternFeatures.push(oe)}else this.addFeature(P,Q,q,v,{},u.subdivisionGranularity);u.featureIndex.insert(l[q].feature,Q,q,J,this.index)}}update(l,u,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:v})}addFeatures(l,u,v){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,v,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Dg),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,u,v,b,E,k){for(const P of ec(u,500)){const Q=Pd(P,b,k.fill.getGranularityForZoomLevel(b.z)),q=this.layoutVertexArray;Og((J,oe)=>{q.emplaceBack(J,oe)},this.segments,this.layoutVertexArray,this.indexArray,Q.verticesFlattened,Q.indicesTriangles,this.segments2,this.indexArray2,Q.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,{imagePositions:E,canonical:b})}}let Lp,Qg;Ge("FillBucket",V0,{omit:["layers","patternFeatures"]});var H2={get paint(){return Qg=Qg||new Jn({"fill-antialias":new Tr(Bt.paint_fill["fill-antialias"]),"fill-opacity":new Dr(Bt.paint_fill["fill-opacity"]),"fill-color":new Dr(Bt.paint_fill["fill-color"]),"fill-outline-color":new Dr(Bt.paint_fill["fill-outline-color"]),"fill-translate":new Tr(Bt.paint_fill["fill-translate"]),"fill-translate-anchor":new Tr(Bt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Yn(Bt.paint_fill["fill-pattern"])})},get layout(){return Lp=Lp||new Jn({"fill-sort-key":new Dr(Bt.layout_fill["fill-sort-key"])})}};class V2 extends cs{constructor(l,u){super(l,H2,u)}recalculate(l,u){super.recalculate(l,u);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new V0(l)}queryRadius(){return Ep(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:u,transform:v,pixelsToTileUnits:b}){return xo(Tp(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-v.bearingInRadians,b),u)}isTileClipped(){return!0}}const As=un([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),js=un([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Tn}=As;class gn{constructor(l,u,v,b,E){this.properties={},this.extent=v,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=b,this._values=E,l.readFields(fs,this,u)}loadGeometry(){const l=this._pbf;l.pos=this._geometry;const u=l.readVarint()+l.pos,v=[];let b,E=1,k=0,P=0,Q=0;for(;l.pos<u;){if(k<=0){const q=l.readVarint();E=7&q,k=q>>3}if(k--,E===1||E===2)P+=l.readSVarint(),Q+=l.readSVarint(),E===1&&(b&&v.push(b),b=[]),b&&b.push(new d(P,Q));else{if(E!==7)throw new Error(`unknown command ${E}`);b&&b.push(b[0].clone())}}return b&&v.push(b),v}bbox(){const l=this._pbf;l.pos=this._geometry;const u=l.readVarint()+l.pos;let v=1,b=0,E=0,k=0,P=1/0,Q=-1/0,q=1/0,J=-1/0;for(;l.pos<u;){if(b<=0){const oe=l.readVarint();v=7&oe,b=oe>>3}if(b--,v===1||v===2)E+=l.readSVarint(),k+=l.readSVarint(),E<P&&(P=E),E>Q&&(Q=E),k<q&&(q=k),k>J&&(J=k);else if(v!==7)throw new Error(`unknown command ${v}`)}return[P,q,Q,J]}toGeoJSON(l,u,v){const b=this.extent*Math.pow(2,v),E=this.extent*l,k=this.extent*u,P=this.loadGeometry();function Q(ve){return[360*(ve.x+E)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(ve.y+k)/b)*Math.PI))-90]}function q(ve){return ve.map(Q)}let J;if(this.type===1){const ve=[];for(const Fe of P)ve.push(Fe[0]);const Be=q(ve);J=ve.length===1?{type:"Point",coordinates:Be[0]}:{type:"MultiPoint",coordinates:Be}}else if(this.type===2){const ve=P.map(q);J=ve.length===1?{type:"LineString",coordinates:ve[0]}:{type:"MultiLineString",coordinates:ve}}else{if(this.type!==3)throw new Error("unknown feature type");{const ve=function(Fe){const Oe=Fe.length;if(Oe<=1)return[Fe];const Ze=[];let ht,Ut;for(let _t=0;_t<Oe;_t++){const Ct=vu(Fe[_t]);Ct!==0&&(Ut===void 0&&(Ut=Ct<0),Ut===Ct<0?(ht&&Ze.push(ht),ht=[Fe[_t]]):ht&&ht.push(Fe[_t]))}return ht&&Ze.push(ht),Ze}(P),Be=[];for(const Fe of ve)Be.push(Fe.map(q));J=Be.length===1?{type:"Polygon",coordinates:Be[0]}:{type:"MultiPolygon",coordinates:Be}}}const oe={type:"Feature",geometry:J,properties:this.properties};return this.id!=null&&(oe.id=this.id),oe}}function fs(A,l,u){A===1?l.id=u.readVarint():A===2?function(v,b){const E=v.readVarint()+v.pos;for(;v.pos<E;){const k=b._keys[v.readVarint()],P=b._values[v.readVarint()];b.properties[k]=P}}(u,l):A===3?l.type=u.readVarint():A===4&&(l._geometry=u.pos)}function vu(A){let l=0;for(let u,v,b=0,E=A.length,k=E-1;b<E;k=b++)u=A[b],v=A[k],l+=(v.x-u.x)*(u.y+v.y);return l}gn.types=["Unknown","Point","LineString","Polygon"];class wA{constructor(l,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(Dd,this,u),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];const u=this._pbf.readVarint()+this._pbf.pos;return new gn(this._pbf,u,this.extent,this._keys,this._values)}}function Dd(A,l,u){A===15?l.version=u.readVarint():A===1?l.name=u.readString():A===5?l.extent=u.readVarint():A===2?l._features.push(u.pos):A===3?l._keys.push(u.readString()):A===4&&l._values.push(function(v){let b=null;const E=v.readVarint()+v.pos;for(;v.pos<E;){const k=v.readVarint()>>3;b=k===1?v.readString():k===2?v.readFloat():k===3?v.readDouble():k===4?v.readVarint64():k===5?v.readVarint():k===6?v.readSVarint():k===7?v.readBoolean():null}if(b==null)throw new Error("unknown feature value");return b}(u))}class G0{constructor(l,u){this.layers=l.readFields(BA,{},u)}}function BA(A,l,u){if(A===3){const v=new wA(u,u.readVarint()+u.pos);v.length&&(l[v.name]=v)}}const la=Math.pow(2,13);function $u(A,l,u,v,b,E,k,P){A.emplaceBack(l,u,2*Math.floor(v*la)+k,b*la*2,E*la*2,Math.round(P))}class CA{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(u=>u.id),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new rr,this.centroidVertexArray=new St,this.indexArray=new Nn,this.programConfigurations=new Ol(l.layers,l.zoom),this.segments=new tn,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(l,u,v){this.features=[],this.hasDependencies=Nd("fill-extrusion",this.layers,u);for(const{feature:b,id:E,index:k,sourceLayerIndex:P}of l){const Q=this.layers[0]._featureFilter.needGeometry,q=rf(b,Q);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),q,v))continue;const J={id:E,sourceLayerIndex:P,index:k,geometry:Q?q.geometry:jh(b),properties:b.properties,type:b.type,patterns:{}};this.hasDependencies?this.features.push(Id("fill-extrusion",this.layers,J,{zoom:this.zoom},u)):this.addFeature(J,J.geometry,k,v,{},u.subdivisionGranularity),u.featureIndex.insert(b,J.geometry,k,P,this.index,!0)}}addFeatures(l,u,v){for(const b of this.features){const{geometry:E}=b;this.addFeature(b,E,b.index,u,v,l.subdivisionGranularity)}}update(l,u,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:v})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Tn),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,js.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,u,v,b,E,k){for(const P of ec(u,500)){const Q={x:0,y:0,sampleCount:0},q=this.layoutVertexArray.length;this.processPolygon(Q,b,l,P,k);const J=this.layoutVertexArray.length-q,oe=Math.floor(Q.x/Q.sampleCount),ve=Math.floor(Q.y/Q.sampleCount);for(let Be=0;Be<J;Be++)this.centroidVertexArray.emplaceBack(oe,ve)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,{imagePositions:E,canonical:b})}processPolygon(l,u,v,b,E){if(b.length<1||Rf(b[0]))return;for(const oe of b)oe.length!==0&&zg(l,oe);const k={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},P=E.fill.getGranularityForZoomLevel(u.z),Q=gn.types[v.type]==="Polygon";for(const oe of b){if(oe.length===0||Rf(oe))continue;const ve=Wu(oe,P,Q);this._generateSideFaces(ve,k)}if(!Q)return;const q=Pd(b,u,P,!1),J=this.layoutVertexArray;Og((oe,ve)=>{$u(J,oe,ve,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,q.verticesFlattened,q.indicesTriangles)}_generateSideFaces(l,u){let v=0;for(let b=1;b<l.length;b++){const E=l[b],k=l[b-1];if(Xu(E,k))continue;u.segment.vertexLength+4>tn.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const P=E.sub(k)._perp()._unit(),Q=k.dist(E);v+Q>32768&&(v=0),$u(this.layoutVertexArray,E.x,E.y,P.x,P.y,0,0,v),$u(this.layoutVertexArray,E.x,E.y,P.x,P.y,0,1,v),v+=Q,$u(this.layoutVertexArray,k.x,k.y,P.x,P.y,0,0,v),$u(this.layoutVertexArray,k.x,k.y,P.x,P.y,0,1,v);const q=u.segment.vertexLength;this.indexArray.emplaceBack(q,q+2,q+1),this.indexArray.emplaceBack(q+1,q+2,q+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function zg(A,l){for(let u=0;u<l.length;u++){const v=l[u];u===l.length-1&&l[0].x===v.x&&l[0].y===v.y||(A.x+=v.x,A.y+=v.y,A.sampleCount++)}}function Xu(A,l){return A.x===l.x&&(A.x<0||A.x>Me)||A.y===l.y&&(A.y<0||A.y>Me)}function Rf(A){return A.every(l=>l.x<0)||A.every(l=>l.x>Me)||A.every(l=>l.y<0)||A.every(l=>l.y>Me)}let Rd;Ge("FillExtrusionBucket",CA,{omit:["layers","features"]});var Pc={get paint(){return Rd=Rd||new Jn({"fill-extrusion-opacity":new Tr(Bt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Dr(Bt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Tr(Bt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Tr(Bt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Yn(Bt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Dr(Bt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Dr(Bt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Tr(Bt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Hg extends cs{constructor(l,u){super(l,Pc,u)}createBucket(l){return new CA(l)}queryRadius(){return Ep(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:v,geometry:b,transform:E,pixelsToTileUnits:k,pixelPosMatrix:P}){const Q=Tp(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-E.bearingInRadians,k),q=this.paint.get("fill-extrusion-height").evaluate(u,v),J=this.paint.get("fill-extrusion-base").evaluate(u,v),oe=function(Be,Fe){const Oe=[];for(const Ze of Be){const ht=[Ze.x,Ze.y,0,1];Ee(ht,ht,Fe),Oe.push(new d(ht[0]/ht[3],ht[1]/ht[3]))}return Oe}(Q,P),ve=function(Be,Fe,Oe,Ze){const ht=[],Ut=[],_t=Ze[8]*Fe,Ct=Ze[9]*Fe,Jt=Ze[10]*Fe,nr=Ze[11]*Fe,gr=Ze[8]*Oe,Lr=Ze[9]*Oe,Nr=Ze[10]*Oe,Pr=Ze[11]*Oe;for(const Jr of Be){const Rr=[],Ur=[];for(const fr of Jr){const Si=fr.x,Pi=fr.y,hi=Ze[0]*Si+Ze[4]*Pi+Ze[12],ii=Ze[1]*Si+Ze[5]*Pi+Ze[13],hn=Ze[2]*Si+Ze[6]*Pi+Ze[14],gs=Ze[3]*Si+Ze[7]*Pi+Ze[15],ca=hn+Jt,_o=gs+nr,fl=hi+gr,dl=ii+Lr,Ea=hn+Nr,Fs=gs+Pr,ro=new d((hi+_t)/_o,(ii+Ct)/_o);ro.z=ca/_o,Rr.push(ro);const Ta=new d(fl/Fs,dl/Fs);Ta.z=Ea/Fs,Ur.push(Ta)}ht.push(Rr),Ut.push(Ur)}return[ht,Ut]}(b,J,q,P);return function(Be,Fe,Oe){let Ze=1/0;xo(Oe,Fe)&&(Ze=Mp(Oe,Fe[0]));for(let ht=0;ht<Fe.length;ht++){const Ut=Fe[ht],_t=Be[ht];for(let Ct=0;Ct<Ut.length-1;Ct++){const Jt=Ut[Ct],nr=[Jt,Ut[Ct+1],_t[Ct+1],_t[Ct],Jt];rx(Oe,nr)&&(Ze=Math.min(Ze,Mp(Oe,nr)))}}return Ze!==1/0&&Ze}(ve[0],ve[1],oe)}}function Uf(A,l){return A.x*l.x+A.y*l.y}function Mp(A,l){if(A.length===1){let u=0;const v=l[u++];let b;for(;!b||v.equals(b);)if(b=l[u++],!b)return 1/0;for(;u<l.length;u++){const E=l[u],k=A[0],P=b.sub(v),Q=E.sub(v),q=k.sub(v),J=Uf(P,P),oe=Uf(P,Q),ve=Uf(Q,Q),Be=Uf(q,P),Fe=Uf(q,Q),Oe=J*ve-oe*oe,Ze=(ve*Be-oe*Fe)/Oe,ht=(J*Fe-oe*Be)/Oe,Ut=v.z*(1-Ze-ht)+b.z*Ze+E.z*ht;if(isFinite(Ut))return Ut}return 1/0}{let u=1/0;for(const v of l)u=Math.min(u,v.z);return u}}const q0=un([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:lf}=q0,Al=un([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:cf}=Al,Ud=Math.cos(Math.PI/180*37.5),jf=Math.pow(2,14)/.5;class Pp{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(u=>u.id),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new $t,this.layoutVertexArray2=new Zt,this.indexArray=new Nn,this.programConfigurations=new Ol(l.layers,l.zoom),this.segments=new tn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(l,u,v){this.hasDependencies=Nd("line",this.layers,u)||this.hasLineDasharray(this.layers);const b=this.layers[0].layout.get("line-sort-key"),E=!b.isConstant(),k=[];for(const{feature:P,id:Q,index:q,sourceLayerIndex:J}of l){const oe=this.layers[0]._featureFilter.needGeometry,ve=rf(P,oe);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),ve,v))continue;const Be=E?b.evaluate(ve,{},v):void 0,Fe={id:Q,properties:P.properties,type:P.type,sourceLayerIndex:J,index:q,geometry:oe?ve.geometry:jh(P),patterns:{},dashes:{},sortKey:Be};k.push(Fe)}E&&k.sort((P,Q)=>P.sortKey-Q.sortKey);for(const P of k){const{geometry:Q,index:q,sourceLayerIndex:J}=P;this.hasDependencies?(Nd("line",this.layers,u)?Id("line",this.layers,P,{zoom:this.zoom},u):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,P,this.zoom,u),this.patternFeatures.push(P)):this.addFeature(P,Q,q,v,{},{},u.subdivisionGranularity),u.featureIndex.insert(l[q].feature,Q,q,J,this.index)}}update(l,u,v,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:v,dashPositions:b})}addFeatures(l,u,v,b){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,u,v,b,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,cf)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,lf),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,u,v,b,E,k,P){const Q=this.layers[0].layout,q=Q.get("line-join").evaluate(l,{}),J=Q.get("line-cap"),oe=Q.get("line-miter-limit"),ve=Q.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const Be of u)this.addLine(Be,l,q,J,oe,ve,b,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,{imagePositions:E,dashPositions:k,canonical:b})}addLine(l,u,v,b,E,k,P,Q){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=Wu(l,P?Q.line.getGranularityForZoomLevel(P.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let _t=0;_t<l.length-1;_t++)this.totalDistance+=l[_t].dist(l[_t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const q=gn.types[u.type]==="Polygon";let J=l.length;for(;J>=2&&l[J-1].equals(l[J-2]);)J--;let oe=0;for(;oe<J-1&&l[oe].equals(l[oe+1]);)oe++;if(J<(q?3:2))return;v==="bevel"&&(E=1.05);const ve=this.overscaling<=16?122880/(512*this.overscaling):0,Be=this.segments.prepareSegment(10*J,this.layoutVertexArray,this.indexArray);let Fe,Oe,Ze,ht,Ut;this.e1=this.e2=-1,q&&(Fe=l[J-2],Ut=l[oe].sub(Fe)._unit()._perp());for(let _t=oe;_t<J;_t++){if(Ze=_t===J-1?q?l[oe+1]:void 0:l[_t+1],Ze&&l[_t].equals(Ze))continue;Ut&&(ht=Ut),Fe&&(Oe=Fe),Fe=l[_t],Ut=Ze?Ze.sub(Fe)._unit()._perp():ht,ht=ht||Ut;let Ct=ht.add(Ut);Ct.x===0&&Ct.y===0||Ct._unit();const Jt=ht.x*Ut.x+ht.y*Ut.y,nr=Ct.x*Ut.x+Ct.y*Ut.y,gr=nr!==0?1/nr:1/0,Lr=2*Math.sqrt(2-2*nr),Nr=nr<Ud&&Oe&&Ze,Pr=ht.x*Ut.y-ht.y*Ut.x>0;if(Nr&&_t>oe){const Ur=Fe.dist(Oe);if(Ur>2*ve){const fr=Fe.sub(Fe.sub(Oe)._mult(ve/Ur)._round());this.updateDistance(Oe,fr),this.addCurrentVertex(fr,ht,0,0,Be),Oe=fr}}const Jr=Oe&&Ze;let Rr=Jr?v:q?"butt":b;if(Jr&&Rr==="round"&&(gr<k?Rr="miter":gr<=2&&(Rr="fakeround")),Rr==="miter"&&gr>E&&(Rr="bevel"),Rr==="bevel"&&(gr>2&&(Rr="flipbevel"),gr<E&&(Rr="miter")),Oe&&this.updateDistance(Oe,Fe),Rr==="miter")Ct._mult(gr),this.addCurrentVertex(Fe,Ct,0,0,Be);else if(Rr==="flipbevel"){if(gr>100)Ct=Ut.mult(-1);else{const Ur=gr*ht.add(Ut).mag()/ht.sub(Ut).mag();Ct._perp()._mult(Ur*(Pr?-1:1))}this.addCurrentVertex(Fe,Ct,0,0,Be),this.addCurrentVertex(Fe,Ct.mult(-1),0,0,Be)}else if(Rr==="bevel"||Rr==="fakeround"){const Ur=-Math.sqrt(gr*gr-1),fr=Pr?Ur:0,Si=Pr?0:Ur;if(Oe&&this.addCurrentVertex(Fe,ht,fr,Si,Be),Rr==="fakeround"){const Pi=Math.round(180*Lr/Math.PI/20);for(let hi=1;hi<Pi;hi++){let ii=hi/Pi;if(ii!==.5){const gs=ii-.5;ii+=ii*gs*(ii-1)*((1.0904+Jt*(Jt*(3.55645-1.43519*Jt)-3.2452))*gs*gs+(.848013+Jt*(.215638*Jt-1.06021)))}const hn=Ut.sub(ht)._mult(ii)._add(ht)._unit()._mult(Pr?-1:1);this.addHalfVertex(Fe,hn.x,hn.y,!1,Pr,0,Be)}}Ze&&this.addCurrentVertex(Fe,Ut,-fr,-Si,Be)}else if(Rr==="butt")this.addCurrentVertex(Fe,Ct,0,0,Be);else if(Rr==="square"){const Ur=Oe?1:-1;this.addCurrentVertex(Fe,Ct,Ur,Ur,Be)}else Rr==="round"&&(Oe&&(this.addCurrentVertex(Fe,ht,0,0,Be),this.addCurrentVertex(Fe,ht,1,1,Be,!0)),Ze&&(this.addCurrentVertex(Fe,Ut,-1,-1,Be,!0),this.addCurrentVertex(Fe,Ut,0,0,Be)));if(Nr&&_t<J-1){const Ur=Fe.dist(Ze);if(Ur>2*ve){const fr=Fe.add(Ze.sub(Fe)._mult(ve/Ur)._round());this.updateDistance(Fe,fr),this.addCurrentVertex(fr,Ut,0,0,Be),Fe=fr}}}}addCurrentVertex(l,u,v,b,E,k=!1){const P=u.y*b-u.x,Q=-u.y-u.x*b;this.addHalfVertex(l,u.x+u.y*v,u.y-u.x*v,k,!1,v,E),this.addHalfVertex(l,P,Q,k,!0,-b,E),this.distance>jf/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,u,v,b,E,k))}addHalfVertex({x:l,y:u},v,b,E,k,P,Q){const q=.5*(this.lineClips?this.scaledDistance*(jf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(E?1:0),(u<<1)+(k?1:0),Math.round(63*v)+128,Math.round(63*b)+128,1+(P===0?0:P<0?-1:1)|(63&q)<<2,q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const J=Q.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,J,this.e2),Q.primitiveLength++),k?this.e2=J:this.e1=J}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,u){this.distance+=l.dist(u),this.updateScaledDistance()}hasLineDasharray(l){for(const u of l){const v=u.paint.get("line-dasharray");if(v&&!v.isConstant())return!0}return!1}addLineDashDependencies(l,u,v,b){for(const E of l){const k=E.paint.get("line-dasharray");if(!k||k.value.kind==="constant")continue;const P=E.layout.get("line-cap")==="round",Q={dasharray:k.value.evaluate({zoom:v-1},u,{}),round:P},q={dasharray:k.value.evaluate({zoom:v},u,{}),round:P},J={dasharray:k.value.evaluate({zoom:v+1},u,{}),round:P},oe=`${Q.dasharray.join(",")},${Q.round}`,ve=`${q.dasharray.join(",")},${q.round}`,Be=`${J.dasharray.join(",")},${J.round}`;b.dashDependencies[oe]=Q,b.dashDependencies[ve]=q,b.dashDependencies[Be]=J,u.dashes[E.id]={min:oe,mid:ve,max:Be}}}}let K0,Vg;Ge("LineBucket",Pp,{omit:["layers","patternFeatures"]});var jd={get paint(){return Vg=Vg||new Jn({"line-opacity":new Dr(Bt.paint_line["line-opacity"]),"line-color":new Dr(Bt.paint_line["line-color"]),"line-translate":new Tr(Bt.paint_line["line-translate"]),"line-translate-anchor":new Tr(Bt.paint_line["line-translate-anchor"]),"line-width":new Dr(Bt.paint_line["line-width"]),"line-gap-width":new Dr(Bt.paint_line["line-gap-width"]),"line-offset":new Dr(Bt.paint_line["line-offset"]),"line-blur":new Dr(Bt.paint_line["line-blur"]),"line-dasharray":new Yn(Bt.paint_line["line-dasharray"]),"line-pattern":new Yn(Bt.paint_line["line-pattern"]),"line-gradient":new Rs(Bt.paint_line["line-gradient"])})},get layout(){return K0=K0||new Jn({"line-cap":new Tr(Bt.layout_line["line-cap"]),"line-join":new Dr(Bt.layout_line["line-join"]),"line-miter-limit":new Tr(Bt.layout_line["line-miter-limit"]),"line-round-limit":new Tr(Bt.layout_line["line-round-limit"]),"line-sort-key":new Dr(Bt.layout_line["line-sort-key"])})}};class Gg extends Dr{possiblyEvaluate(l,u){return u=new Li(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(l,u)}evaluate(l,u,v,b){return u=rt({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(l,u,v,b)}}let Hl;class Ax extends cs{constructor(l,u){super(l,jd,u),this.gradientVersion=0,Hl||(Hl=new Gg(jd.paint.properties["line-width"].specification),Hl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(v){return v._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Yl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,u){super.recalculate(l,u),this.paint._values["line-floorwidth"]=Hl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new Pp(l)}queryRadius(l){const u=l,v=Dc(Mf("line-width",this,u),Mf("line-gap-width",this,u)),b=Mf("line-offset",this,u);return v/2+Math.abs(b)+Ep(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:v,geometry:b,transform:E,pixelsToTileUnits:k}){const P=Tp(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-E.bearingInRadians,k),Q=k/2*Dc(this.paint.get("line-width").evaluate(u,v),this.paint.get("line-gap-width").evaluate(u,v)),q=this.paint.get("line-offset").evaluate(u,v);return q&&(b=function(J,oe){const ve=[];for(let Be=0;Be<J.length;Be++){const Fe=J[Be],Oe=[];for(let Ze=0;Ze<Fe.length;Ze++){const ht=Fe[Ze-1],Ut=Fe[Ze],_t=Fe[Ze+1],Ct=Ze===0?new d(0,0):Ut.sub(ht)._unit()._perp(),Jt=Ze===Fe.length-1?new d(0,0):_t.sub(Ut)._unit()._perp(),nr=Ct._add(Jt)._unit(),gr=nr.x*Jt.x+nr.y*Jt.y;gr!==0&&nr._mult(1/gr),Oe.push(nr._mult(oe)._add(Ut))}ve.push(Oe)}return ve}(b,q*k)),function(J,oe,ve){for(let Be=0;Be<oe.length;Be++){const Fe=oe[Be];if(J.length>=3){for(let Oe=0;Oe<Fe.length;Oe++)if(xA(J,Fe[Oe]))return!0}if(hl(J,Fe,ve))return!0}return!1}(P,b,Q)}isTileClipped(){return!0}}function Dc(A,l){return l>0?l+2*A:A}const fx=un([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),dx=un([{name:"a_projected_pos",components:3,type:"Float32"}],4);un([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const G2=un([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);un([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const SA=un([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),W0=un([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qg(A,l,u){return A.sections.forEach(v=>{v.text=function(b,E,k){const P=E.layout.get("text-transform").evaluate(k,{});return P==="uppercase"?b=b.toLocaleUpperCase():P==="lowercase"&&(b=b.toLocaleLowerCase()),Or.applyArabicShaping&&(b=Or.applyArabicShaping(b)),b}(v.text,l,u)}),A}un([{name:"triangle",components:3,type:"Uint16"}]),un([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),un([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),un([{type:"Float32",name:"offsetX"}]),un([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),un([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Hh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var za=24;const $0=4294967296,Kg=1/$0,X0=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Dp{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,u,v=this.length){for(;this.pos<v;){const b=this.readVarint(),E=b>>3,k=this.pos;this.type=7&b,l(E,u,this),this.pos===k&&this.skip(b)}return u}readMessage(l,u){return this.readFields(l,u,this.readVarint()+this.pos)}readFixed32(){const l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){const l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*$0;return this.pos+=8,l}readSFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*$0;return this.pos+=8,l}readFloat(){const l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){const l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){const u=this.buf;let v,b;return b=u[this.pos++],v=127&b,b<128?v:(b=u[this.pos++],v|=(127&b)<<7,b<128?v:(b=u[this.pos++],v|=(127&b)<<14,b<128?v:(b=u[this.pos++],v|=(127&b)<<21,b<128?v:(b=u[this.pos],v|=(15&b)<<28,function(E,k,P){const Q=P.buf;let q,J;if(J=Q[P.pos++],q=(112&J)>>4,J<128||(J=Q[P.pos++],q|=(127&J)<<3,J<128)||(J=Q[P.pos++],q|=(127&J)<<10,J<128)||(J=Q[P.pos++],q|=(127&J)<<17,J<128)||(J=Q[P.pos++],q|=(127&J)<<24,J<128)||(J=Q[P.pos++],q|=(1&J)<<31,J<128))return Od(E,q,k);throw new Error("Expected varint not more than 10 bytes")}(v,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){const l=this.readVarint()+this.pos,u=this.pos;return this.pos=l,l-u>=12&&X0?X0.decode(this.buf.subarray(u,l)):function(v,b,E){let k="",P=b;for(;P<E;){const Q=v[P];let q,J,oe,ve=null,Be=Q>239?4:Q>223?3:Q>191?2:1;if(P+Be>E)break;Be===1?Q<128&&(ve=Q):Be===2?(q=v[P+1],(192&q)==128&&(ve=(31&Q)<<6|63&q,ve<=127&&(ve=null))):Be===3?(q=v[P+1],J=v[P+2],(192&q)==128&&(192&J)==128&&(ve=(15&Q)<<12|(63&q)<<6|63&J,(ve<=2047||ve>=55296&&ve<=57343)&&(ve=null))):Be===4&&(q=v[P+1],J=v[P+2],oe=v[P+3],(192&q)==128&&(192&J)==128&&(192&oe)==128&&(ve=(15&Q)<<18|(63&q)<<12|(63&J)<<6|63&oe,(ve<=65535||ve>=1114112)&&(ve=null))),ve===null?(ve=65533,Be=1):ve>65535&&(ve-=65536,k+=String.fromCharCode(ve>>>10&1023|55296),ve=56320|1023&ve),k+=String.fromCharCode(ve),P+=Be}return k}(this.buf,u,l)}readBytes(){const l=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,l);return this.pos=l,u}readPackedVarint(l=[],u){const v=this.readPackedEnd();for(;this.pos<v;)l.push(this.readVarint(u));return l}readPackedSVarint(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFloat());return l}readPackedDouble(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){const u=7&l;if(u===0)for(;this.buf[this.pos++]>127;);else if(u===2)this.pos=this.readVarint()+this.pos;else if(u===5)this.pos+=4;else{if(u!==1)throw new Error(`Unimplemented type: ${u}`);this.pos+=8}}writeTag(l,u){this.writeVarint(l<<3|u)}realloc(l){let u=this.length||16;for(;u<this.pos+l;)u*=2;if(u!==this.length){const v=new Uint8Array(u);v.set(this.buf),this.buf=v,this.dataView=new DataView(v.buffer),this.length=u}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*Kg),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*Kg),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?function(u,v){let b,E;if(u>=0?(b=u%4294967296|0,E=u/4294967296|0):(b=~(-u%4294967296),E=~(-u/4294967296),4294967295^b?b=b+1|0:(b=0,E=E+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");v.realloc(10),function(k,P,Q){Q.buf[Q.pos++]=127&k|128,k>>>=7,Q.buf[Q.pos++]=127&k|128,k>>>=7,Q.buf[Q.pos++]=127&k|128,k>>>=7,Q.buf[Q.pos++]=127&k|128,Q.buf[Q.pos]=127&(k>>>=7)}(b,0,v),function(k,P){const Q=(7&k)<<4;P.buf[P.pos++]|=Q|((k>>>=3)?128:0),k&&(P.buf[P.pos++]=127&k|((k>>>=7)?128:0),k&&(P.buf[P.pos++]=127&k|((k>>>=7)?128:0),k&&(P.buf[P.pos++]=127&k|((k>>>=7)?128:0),k&&(P.buf[P.pos++]=127&k|((k>>>=7)?128:0),k&&(P.buf[P.pos++]=127&k)))))}(E,v)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;const u=this.pos;this.pos=function(b,E,k){for(let P,Q,q=0;q<E.length;q++){if(P=E.charCodeAt(q),P>55295&&P<57344){if(!Q){P>56319||q+1===E.length?(b[k++]=239,b[k++]=191,b[k++]=189):Q=P;continue}if(P<56320){b[k++]=239,b[k++]=191,b[k++]=189,Q=P;continue}P=Q-55296<<10|P-56320|65536,Q=null}else Q&&(b[k++]=239,b[k++]=191,b[k++]=189,Q=null);P<128?b[k++]=P:(P<2048?b[k++]=P>>6|192:(P<65536?b[k++]=P>>12|224:(b[k++]=P>>18|240,b[k++]=P>>12&63|128),b[k++]=P>>6&63|128),b[k++]=63&P|128)}return k}(this.buf,l,this.pos);const v=this.pos-u;v>=128&&px(u,v,this),this.pos=u-1,this.writeVarint(v),this.pos+=v}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){const u=l.length;this.writeVarint(u),this.realloc(u);for(let v=0;v<u;v++)this.buf[this.pos++]=l[v]}writeRawMessage(l,u){this.pos++;const v=this.pos;l(u,this);const b=this.pos-v;b>=128&&px(v,b,this),this.pos=v-1,this.writeVarint(b),this.pos+=b}writeMessage(l,u,v){this.writeTag(l,2),this.writeRawMessage(u,v)}writePackedVarint(l,u){u.length&&this.writeMessage(l,q2,u)}writePackedSVarint(l,u){u.length&&this.writeMessage(l,mx,u)}writePackedBoolean(l,u){u.length&&this.writeMessage(l,Z0,u)}writePackedFloat(l,u){u.length&&this.writeMessage(l,gx,u)}writePackedDouble(l,u){u.length&&this.writeMessage(l,Qd,u)}writePackedFixed32(l,u){u.length&&this.writeMessage(l,vx,u)}writePackedSFixed32(l,u){u.length&&this.writeMessage(l,xx,u)}writePackedFixed64(l,u){u.length&&this.writeMessage(l,yx,u)}writePackedSFixed64(l,u){u.length&&this.writeMessage(l,_x,u)}writeBytesField(l,u){this.writeTag(l,2),this.writeBytes(u)}writeFixed32Field(l,u){this.writeTag(l,5),this.writeFixed32(u)}writeSFixed32Field(l,u){this.writeTag(l,5),this.writeSFixed32(u)}writeFixed64Field(l,u){this.writeTag(l,1),this.writeFixed64(u)}writeSFixed64Field(l,u){this.writeTag(l,1),this.writeSFixed64(u)}writeVarintField(l,u){this.writeTag(l,0),this.writeVarint(u)}writeSVarintField(l,u){this.writeTag(l,0),this.writeSVarint(u)}writeStringField(l,u){this.writeTag(l,2),this.writeString(u)}writeFloatField(l,u){this.writeTag(l,5),this.writeFloat(u)}writeDoubleField(l,u){this.writeTag(l,1),this.writeDouble(u)}writeBooleanField(l,u){this.writeVarintField(l,+u)}}function Od(A,l,u){return u?4294967296*l+(A>>>0):4294967296*(l>>>0)+(A>>>0)}function px(A,l,u){const v=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));u.realloc(v);for(let b=u.pos-1;b>=A;b--)u.buf[b+v]=u.buf[b]}function q2(A,l){for(let u=0;u<A.length;u++)l.writeVarint(A[u])}function mx(A,l){for(let u=0;u<A.length;u++)l.writeSVarint(A[u])}function gx(A,l){for(let u=0;u<A.length;u++)l.writeFloat(A[u])}function Qd(A,l){for(let u=0;u<A.length;u++)l.writeDouble(A[u])}function Z0(A,l){for(let u=0;u<A.length;u++)l.writeBoolean(A[u])}function vx(A,l){for(let u=0;u<A.length;u++)l.writeFixed32(A[u])}function xx(A,l){for(let u=0;u<A.length;u++)l.writeSFixed32(A[u])}function yx(A,l){for(let u=0;u<A.length;u++)l.writeFixed64(A[u])}function _x(A,l){for(let u=0;u<A.length;u++)l.writeSFixed64(A[u])}function bx(A,l,u){A===1&&u.readMessage(wx,l)}function wx(A,l,u){if(A===3){const{id:v,bitmap:b,width:E,height:k,left:P,top:Q,advance:q}=u.readMessage(Y0,{});l.push({id:v,bitmap:new nf({width:E+6,height:k+6},b),metrics:{width:E,height:k,left:P,top:Q,advance:q}})}}function Y0(A,l,u){A===1?l.id=u.readVarint():A===2?l.bitmap=u.readBytes():A===3?l.width=u.readVarint():A===4?l.height=u.readVarint():A===5?l.left=u.readSVarint():A===6?l.top=u.readSVarint():A===7&&(l.advance=u.readVarint())}function Wg(A){let l=0,u=0;for(const k of A)l+=k.w*k.h,u=Math.max(u,k.w);A.sort((k,P)=>P.h-k.h);const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),u),h:1/0}];let b=0,E=0;for(const k of A)for(let P=v.length-1;P>=0;P--){const Q=v[P];if(!(k.w>Q.w||k.h>Q.h)){if(k.x=Q.x,k.y=Q.y,E=Math.max(E,k.y+k.h),b=Math.max(b,k.x+k.w),k.w===Q.w&&k.h===Q.h){const q=v.pop();q&&P<v.length&&(v[P]=q)}else k.h===Q.h?(Q.x+=k.w,Q.w-=k.w):k.w===Q.w?(Q.y+=k.h,Q.h-=k.h):(v.push({x:Q.x+k.w,y:Q.y,w:Q.w-k.w,h:k.h}),Q.y+=k.h,Q.h-=k.h);break}}return{w:b,h:E,fill:l/(b*E)||0}}class J0{constructor(l,{pixelRatio:u,version:v,stretchX:b,stretchY:E,content:k,textFitWidth:P,textFitHeight:Q}){this.paddedRect=l,this.pixelRatio=u,this.stretchX=b,this.stretchY=E,this.content=k,this.version=v,this.textFitWidth=P,this.textFitHeight=Q}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class ms{constructor(l,u){const v={},b={};this.haveRenderCallbacks=[];const E=[];this.addImages(l,v,E),this.addImages(u,b,E);const{w:k,h:P}=Wg(E),Q=new yo({width:k||1,height:P||1});for(const q in l){const J=l[q],oe=v[q].paddedRect;yo.copy(J.data,Q,{x:0,y:0},{x:oe.x+1,y:oe.y+1},J.data)}for(const q in u){const J=u[q],oe=b[q].paddedRect,ve=oe.x+1,Be=oe.y+1,Fe=J.data.width,Oe=J.data.height;yo.copy(J.data,Q,{x:0,y:0},{x:ve,y:Be},J.data),yo.copy(J.data,Q,{x:0,y:Oe-1},{x:ve,y:Be-1},{width:Fe,height:1}),yo.copy(J.data,Q,{x:0,y:0},{x:ve,y:Be+Oe},{width:Fe,height:1}),yo.copy(J.data,Q,{x:Fe-1,y:0},{x:ve-1,y:Be},{width:1,height:Oe}),yo.copy(J.data,Q,{x:0,y:0},{x:ve+Fe,y:Be},{width:1,height:Oe})}this.image=Q,this.iconPositions=v,this.patternPositions=b}addImages(l,u,v){for(const b in l){const E=l[b],k={x:0,y:0,w:E.data.width+2,h:E.data.height+2};v.push(k),u[b]=new J0(k,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(l,u){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in l.updatedImages)this.patchUpdatedImage(this.iconPositions[v],l.getImage(v),u),this.patchUpdatedImage(this.patternPositions[v],l.getImage(v),u)}patchUpdatedImage(l,u,v){if(!l||!u||l.version===u.version)return;l.version=u.version;const[b,E]=l.tl;v.update(u.data,void 0,{x:b,y:E})}}var Vh;Ge("ImagePosition",J0),Ge("ImageAtlas",ms),c.ao=void 0,(Vh=c.ao||(c.ao={}))[Vh.none=0]="none",Vh[Vh.horizontal=1]="horizontal",Vh[Vh.vertical=2]="vertical",Vh[Vh.horizontalOnly=3]="horizontalOnly";class Rp{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(l,u,v){const b=new Rp;return b.scale=l||1,b.fontStack=u,b.verticalAlign=v||"bottom",b}static forImage(l,u){const v=new Rp;return v.imageName=l,v.verticalAlign=u||"bottom",v}}class Of{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,u){const v=new Of;for(let b=0;b<l.sections.length;b++){const E=l.sections[b];E.image?v.addImageSection(E):v.addTextSection(E,u)}return v}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let u="";for(let v=0;v<l.length;v++){const b=l.charCodeAt(v+1)||null,E=l.charCodeAt(v-1)||null;u+=b&&ni(b)&&!Hh[l[v+1]]||E&&ni(E)&&!Hh[l[v-1]]||!Hh[l[v]]?l[v]:Hh[l[v]]}return u}(this.text)}trim(){let l=0;for(let v=0;v<this.text.length&&tm[this.text.charCodeAt(v)];v++)l++;let u=this.text.length;for(let v=this.text.length-1;v>=0&&v>=l&&tm[this.text.charCodeAt(v)];v--)u--;this.text=this.text.substring(l,u),this.sectionIndex=this.sectionIndex.slice(l,u)}substring(l,u){const v=new Of;return v.text=this.text.substring(l,u),v.sectionIndex=this.sectionIndex.slice(l,u),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,u)=>Math.max(l,this.sections[u].scale),0)}getMaxImageSize(l){let u=0,v=0;for(let b=0;b<this.length();b++){const E=this.getSection(b);if(E.imageName){const k=l[E.imageName];if(!k)continue;const P=k.displaySize;u=Math.max(u,P[0]),v=Math.max(v,P[1])}}return{maxImageWidth:u,maxImageHeight:v}}addTextSection(l,u){this.text+=l.text,this.sections.push(Rp.forText(l.scale,l.fontStack||u,l.verticalAlign));const v=this.sections.length-1;for(let b=0;b<l.text.length;++b)this.sectionIndex.push(v)}addImageSection(l){const u=l.image?l.image.name:"";if(u.length===0)return void kt("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(Rp.forImage(u,l.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):kt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function em(A,l,u,v,b,E,k,P,Q,q,J,oe,ve,Be,Fe){const Oe=Of.fromFeature(A,b);let Ze;oe===c.ao.vertical&&Oe.verticalizePunctuation();const{processBidirectionalText:ht,processStyledBidirectionalText:Ut}=Or;if(ht&&Oe.sections.length===1){Ze=[];const Jt=ht(Oe.toString(),Zu(Oe,q,E,l,v,Be));for(const nr of Jt){const gr=new Of;gr.text=nr,gr.sections=Oe.sections;for(let Lr=0;Lr<nr.length;Lr++)gr.sectionIndex.push(0);Ze.push(gr)}}else if(Ut){Ze=[];const Jt=Ut(Oe.text,Oe.sectionIndex,Zu(Oe,q,E,l,v,Be));for(const nr of Jt){const gr=new Of;gr.text=nr[0],gr.sectionIndex=nr[1],gr.sections=Oe.sections,Ze.push(gr)}}else Ze=function(Jt,nr){const gr=[],Lr=Jt.text;let Nr=0;for(const Pr of nr)gr.push(Jt.substring(Nr,Pr)),Nr=Pr;return Nr<Lr.length&&gr.push(Jt.substring(Nr,Lr.length)),gr}(Oe,Zu(Oe,q,E,l,v,Be));const _t=[],Ct={positionedLines:_t,text:Oe.toString(),top:J[1],bottom:J[1],left:J[0],right:J[0],writingMode:oe,iconsInText:!1,verticalizable:!1};return function(Jt,nr,gr,Lr,Nr,Pr,Jr,Rr,Ur,fr,Si,Pi){let hi=0,ii=0,hn=0,gs=0;const ca=Rr==="right"?1:Rr==="left"?0:.5,_o=za/Pi;let fl=0;for(const Fs of Nr){Fs.trim();const ro=Fs.getMaxScale(),Ta={positionedGlyphs:[],lineOffset:0};Jt.positionedLines[fl]=Ta;const h=Ta.positionedGlyphs;let m=0;if(!Fs.length()){ii+=Pr,++fl;continue}const _=W2(Lr,Fs,_o);for(let j=0;j<Fs.length();j++){const K=Fs.getSection(j),be=Fs.getSectionIndex(j),Ve=Fs.getCharCode(j),bt=Bx(Ur,Si,Ve);let zt;if(K.imageName){if(Jt.iconsInText=!0,K.scale=K.scale*_o,zt=Sx(K,bt,ro,_,Lr),!zt)continue;m=Math.max(m,zt.imageOffset)}else if(zt=Cx(K,Ve,bt,_,nr,gr),!zt)continue;const{rect:mr,metrics:xr,baselineOffset:ir}=zt;h.push({glyph:Ve,imageName:K.imageName,x:hi,y:ii+ir+-17,vertical:bt,scale:K.scale,fontStack:K.fontStack,sectionIndex:be,metrics:xr,rect:mr}),bt?(Jt.verticalizable=!0,hi+=(K.imageName?xr.advance:za)*K.scale+fr):hi+=xr.advance*K.scale+fr}h.length!==0&&(hn=Math.max(hi-fr,hn),$2(h,0,h.length-1,ca)),hi=0,Ta.lineOffset=Math.max(m,(ro-1)*za);const F=Pr*ro+m;ii+=F,gs=Math.max(F,gs),++fl}const{horizontalAlign:dl,verticalAlign:Ea}=zf(Jr);(function(Fs,ro,Ta,h,m,_,F,j,K){const be=(ro-Ta)*m;let Ve=0;Ve=_!==F?-j*h- -17:-h*K*F+.5*F;for(const bt of Fs)for(const zt of bt.positionedGlyphs)zt.x+=be,zt.y+=Ve})(Jt.positionedLines,ca,dl,Ea,hn,gs,Pr,ii,Nr.length),Jt.top+=-Ea*ii,Jt.bottom=Jt.top+ii,Jt.left+=-dl*hn,Jt.right=Jt.left+hn}(Ct,l,u,v,Ze,k,P,Q,oe,q,ve,Fe),!function(Jt){for(const nr of Jt)if(nr.positionedGlyphs.length!==0)return!1;return!0}(_t)&&Ct}const tm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},K2={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},rm={40:!0};function Qf(A,l,u,v,b,E){if(l.imageName){const k=v[l.imageName];return k?k.displaySize[0]*l.scale*za/E+b:0}{const k=u[l.fontStack],P=k&&k[A];return P?P.metrics.advance*l.scale+b:0}}function im(A,l,u,v){const b=Math.pow(A-l,2);return v?A<l?b/2:2*b:b+Math.abs(u)*u}function nm(A,l,u){let v=0;return A===10&&(v-=1e4),u&&(v+=150),A!==40&&A!==65288||(v+=50),l!==41&&l!==65289||(v+=50),v}function sm(A,l,u,v,b,E){let k=null,P=im(l,u,b,E);for(const Q of v){const q=im(l-Q.x,u,b,E)+Q.badness;q<=P&&(k=Q,P=q)}return{index:A,x:l,priorBreak:k,badness:P}}function uf(A){return A?uf(A.priorBreak).concat(A.index):[]}function Zu(A,l,u,v,b,E){if(!A)return[];const k=[],P=function(oe,ve,Be,Fe,Oe,Ze){let ht=0;for(let Ut=0;Ut<oe.length();Ut++){const _t=oe.getSection(Ut);ht+=Qf(oe.getCharCode(Ut),_t,Fe,Oe,ve,Ze)}return ht/Math.max(1,Math.ceil(ht/Be))}(A,l,u,v,b,E),Q=A.text.indexOf("")>=0;let q=0;for(let oe=0;oe<A.length();oe++){const ve=A.getSection(oe),Be=A.getCharCode(oe);if(tm[Be]||(q+=Qf(Be,ve,v,b,l,E)),oe<A.length()-1){const Fe=!((J=Be)<11904)&&(!!Rt["CJK Compatibility Forms"](J)||!!Rt["CJK Compatibility"](J)||!!Rt["CJK Strokes"](J)||!!Rt["CJK Symbols and Punctuation"](J)||!!Rt["Enclosed CJK Letters and Months"](J)||!!Rt["Halfwidth and Fullwidth Forms"](J)||!!Rt["Ideographic Description Characters"](J)||!!Rt["Vertical Forms"](J)||ri.test(String.fromCodePoint(J)));(K2[Be]||Fe||ve.imageName||oe!==A.length()-2&&rm[A.getCharCode(oe+1)])&&k.push(sm(oe+1,q,P,k,nm(Be,A.getCharCode(oe+1),Fe&&Q),!1))}}var J;return uf(sm(A.length(),q,P,k,0,!0))}function zf(A){let l=.5,u=.5;switch(A){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:l,verticalAlign:u}}function W2(A,l,u){const v=l.getMaxScale()*za,{maxImageWidth:b,maxImageHeight:E}=l.getMaxImageSize(A),k=Math.max(v,E*u);return{verticalLineContentWidth:Math.max(v,b*u),horizontalLineContentHeight:k}}function $g(A){switch(A){case"top":return 0;case"center":return .5;default:return 1}}function Bx(A,l,u){return!(A===c.ao.horizontal||!l&&!ji(u)||l&&(tm[u]||(v=u,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(v)))));var v}function Cx(A,l,u,v,b,E){const k=E[A.fontStack],P=function(q,J,oe,ve){if(q&&q.rect)return q;const Be=J[oe.fontStack],Fe=Be&&Be[ve];return Fe?{rect:null,metrics:Fe.metrics}:null}(k&&k[l],b,A,l);if(P===null)return null;let Q;if(u)Q=v.verticalLineContentWidth-A.scale*za;else{const q=$g(A.verticalAlign);Q=(v.horizontalLineContentHeight-A.scale*za)*q}return{rect:P.rect,metrics:P.metrics,baselineOffset:Q}}function Sx(A,l,u,v,b){const E=b[A.imageName];if(!E)return null;const k=E.paddedRect,P=E.displaySize,Q={width:P[0],height:P[1],left:1,top:-3,advance:l?P[1]:P[0]};let q;if(l)q=v.verticalLineContentWidth-P[1]*A.scale;else{const J=$g(A.verticalAlign);q=(v.horizontalLineContentHeight-P[1]*A.scale)*J}return{rect:k,metrics:Q,baselineOffset:q,imageOffset:(l?P[0]:P[1])*A.scale-za*u}}function $2(A,l,u,v){if(v===0)return;const b=A[u],E=(A[u].x+b.metrics.advance*b.scale)*v;for(let k=l;k<=u;k++)A[k].x-=E}function Xg(A,l,u){const{horizontalAlign:v,verticalAlign:b}=zf(u),E=l[0]-A.displaySize[0]*v,k=l[1]-A.displaySize[1]*b;return{image:A,top:k,bottom:k+A.displaySize[1],left:E,right:E+A.displaySize[0]}}function Zg(A){var l,u;let v=A.left,b=A.top,E=A.right-v,k=A.bottom-b;const P=(l=A.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",Q=(u=A.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",q=(A.image.content[2]-A.image.content[0])/(A.image.content[3]-A.image.content[1]);if(Q==="proportional"){if(P==="stretchOnly"&&E/k<q||P==="proportional"){const J=Math.ceil(k*q);v*=J/E,E=J}}else if(P==="proportional"&&Q==="stretchOnly"&&q!==0&&E/k>q){const J=Math.ceil(E/q);b*=J/k,k=J}return{x1:v,y1:b,x2:v+E,y2:b+k}}function Yg(A,l,u,v,b,E){const k=A.image;let P;if(k.content){const Ze=k.content,ht=k.pixelRatio||1;P=[Ze[0]/ht,Ze[1]/ht,k.displaySize[0]-Ze[2]/ht,k.displaySize[1]-Ze[3]/ht]}const Q=l.left*E,q=l.right*E;let J,oe,ve,Be;u==="width"||u==="both"?(Be=b[0]+Q-v[3],oe=b[0]+q+v[1]):(Be=b[0]+(Q+q-k.displaySize[0])/2,oe=Be+k.displaySize[0]);const Fe=l.top*E,Oe=l.bottom*E;return u==="height"||u==="both"?(J=b[1]+Fe-v[0],ve=b[1]+Oe+v[2]):(J=b[1]+(Fe+Oe-k.displaySize[1])/2,ve=J+k.displaySize[1]),{image:k,top:J,right:oe,bottom:ve,left:Be,collisionPadding:P}}const EA=128,Gh=32640;function am(A,l){const{expression:u}=l;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Li(A+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:b}=u;let E=0;for(;E<v.length&&v[E]<=A;)E++;E=Math.max(0,E-1);let k=E;for(;k<v.length&&v[k]<A+1;)k++;k=Math.min(v.length-1,k);const P=v[E],Q=v[k];return u.kind==="composite"?{kind:"composite",minZoom:P,maxZoom:Q,interpolationType:b}:{kind:"camera",minZoom:P,maxZoom:Q,minSize:u.evaluate(new Li(P)),maxSize:u.evaluate(new Li(Q)),interpolationType:b}}}function Jg(A,l,u){let v="never";const b=A.get(l);return b?v=b:A.get(u)&&(v="always"),v}const X2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hf(A,l,u,v,b,E,k,P,Q,q,J,oe,ve){const Be=P?Math.min(Gh,Math.round(P[0])):0,Fe=P?Math.min(Gh,Math.round(P[1])):0;A.emplaceBack(l,u,Math.round(32*v),Math.round(32*b),E,k,(Be<<1)+(Q?1:0),Fe,16*q,16*J,256*oe,256*ve)}function e1(A,l,u){A.emplaceBack(l.x,l.y,u),A.emplaceBack(l.x,l.y,u),A.emplaceBack(l.x,l.y,u),A.emplaceBack(l.x,l.y,u)}function Ex(A){for(const l of A.sections)if(oi(l.text))return!0;return!1}class vn{constructor(l){this.layoutVertexArray=new Br,this.indexArray=new Nn,this.programConfigurations=l,this.segments=new tn,this.dynamicLayoutVertexArray=new pr,this.opacityVertexArray=new Kr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Se}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,u,v,b){this.isEmpty()||(v&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,fx.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,dx.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,X2,!0),this.opacityVertexBuffer.itemSize=1),(v||b)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ge("SymbolBuffers",vn);class Up{constructor(l,u,v){this.layoutVertexArray=new l,this.layoutAttributes=u,this.indexArray=new v,this.segments=new tn,this.collisionVertexArray=new En}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,G2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ge("CollisionBuffers",Up);class TA{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=Sr(globalThis)?Math.min(l.overscaling,128):l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(k=>k.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=am(this.zoom,u["text-size"]),this.iconSizeData=am(this.zoom,u["icon-size"]);const v=this.layers[0].layout,b=v.get("symbol-sort-key"),E=v.get("symbol-z-order");this.canOverlap=Jg(v,"text-overlap","text-allow-overlap")!=="never"||Jg(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=E!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(E==="viewport-y"||E==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map(k=>c.ao[k])),this.stateDependentLayerIds=this.layers.filter(k=>k.isStateDependent()).map(k=>k.id),this.sourceID=l.sourceID}createArrays(){this.text=new vn(new Ol(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new vn(new Ol(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new Je,this.lineVertexArray=new st,this.symbolInstances=new Xe,this.textAnchorOffsets=new xt}calculateGlyphDependencies(l,u,v,b,E){for(let k=0;k<l.length;k++)if(u[l.charCodeAt(k)]=!0,(v||b)&&E){const P=Hh[l.charAt(k)];P&&(u[P.charCodeAt(0)]=!0)}}populate(l,u,v){const b=this.layers[0],E=b.layout,k=E.get("text-font"),P=E.get("text-field"),Q=E.get("icon-image"),q=(P.value.kind!=="constant"||P.value.value instanceof Ua&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),J=Q.value.kind!=="constant"||!!Q.value.value||Object.keys(Q.parameters).length>0,oe=E.get("symbol-sort-key");if(this.features=[],!q&&!J)return;const ve=u.iconDependencies,Be=u.glyphDependencies,Fe=u.availableImages,Oe=new Li(this.zoom);for(const{feature:Ze,id:ht,index:Ut,sourceLayerIndex:_t}of l){const Ct=b._featureFilter.needGeometry,Jt=rf(Ze,Ct);if(!b._featureFilter.filter(Oe,Jt,v))continue;let nr,gr;if(Ct||(Jt.geometry=jh(Ze)),q){const Nr=b.getValueAndResolveTokens("text-field",Jt,v,Fe),Pr=Ua.factory(Nr),Jr=this.hasRTLText=this.hasRTLText||Ex(Pr);(!Jr||Or.getRTLTextPluginStatus()==="unavailable"||Jr&&Or.isParsed())&&(nr=qg(Pr,b,Jt))}if(J){const Nr=b.getValueAndResolveTokens("icon-image",Jt,v,Fe);gr=Nr instanceof Ls?Nr:Ls.fromString(Nr)}if(!nr&&!gr)continue;const Lr=this.sortFeaturesByKey?oe.evaluate(Jt,{},v):void 0;if(this.features.push({id:ht,text:nr,icon:gr,index:Ut,sourceLayerIndex:_t,geometry:Jt.geometry,properties:Ze.properties,type:gn.types[Ze.type],sortKey:Lr}),gr&&(ve[gr.name]=!0),nr){const Nr=k.evaluate(Jt,{},v).join(","),Pr=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ao.vertical)>=0;for(const Jr of nr.sections)if(Jr.image)ve[Jr.image.name]=!0;else{const Rr=Ar(nr.toString()),Ur=Jr.fontStack||Nr,fr=Be[Ur]=Be[Ur]||{};this.calculateGlyphDependencies(Jr.text,fr,Pr,this.allowVerticalPlacement,Rr)}}}E.get("symbol-placement")==="line"&&(this.features=function(Ze){const ht={},Ut={},_t=[];let Ct=0;function Jt(Nr){_t.push(Ze[Nr]),Ct++}function nr(Nr,Pr,Jr){const Rr=Ut[Nr];return delete Ut[Nr],Ut[Pr]=Rr,_t[Rr].geometry[0].pop(),_t[Rr].geometry[0]=_t[Rr].geometry[0].concat(Jr[0]),Rr}function gr(Nr,Pr,Jr){const Rr=ht[Pr];return delete ht[Pr],ht[Nr]=Rr,_t[Rr].geometry[0].shift(),_t[Rr].geometry[0]=Jr[0].concat(_t[Rr].geometry[0]),Rr}function Lr(Nr,Pr,Jr){const Rr=Jr?Pr[0][Pr[0].length-1]:Pr[0][0];return`${Nr}:${Rr.x}:${Rr.y}`}for(let Nr=0;Nr<Ze.length;Nr++){const Pr=Ze[Nr],Jr=Pr.geometry,Rr=Pr.text?Pr.text.toString():null;if(!Rr){Jt(Nr);continue}const Ur=Lr(Rr,Jr),fr=Lr(Rr,Jr,!0);if(Ur in Ut&&fr in ht&&Ut[Ur]!==ht[fr]){const Si=gr(Ur,fr,Jr),Pi=nr(Ur,fr,_t[Si].geometry);delete ht[Ur],delete Ut[fr],Ut[Lr(Rr,_t[Pi].geometry,!0)]=Pi,_t[Si].geometry=null}else Ur in Ut?nr(Ur,fr,Jr):fr in ht?gr(Ur,fr,Jr):(Jt(Nr),ht[Ur]=Ct-1,Ut[fr]=Ct-1)}return _t.filter(Nr=>Nr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ze,ht)=>Ze.sortKey-ht.sortKey)}update(l,u,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,u,this.layers,{imagePositions:v}),this.icon.programConfigurations.updatePaintArrays(l,u,this.layers,{imagePositions:v}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,u){const v=this.lineVertexArray.length;if(l.segment!==void 0){let b=l.dist(u[l.segment+1]),E=l.dist(u[l.segment]);const k={};for(let P=l.segment+1;P<u.length;P++)k[P]={x:u[P].x,y:u[P].y,tileUnitDistanceFromAnchor:b},P<u.length-1&&(b+=u[P+1].dist(u[P]));for(let P=l.segment||0;P>=0;P--)k[P]={x:u[P].x,y:u[P].y,tileUnitDistanceFromAnchor:E},P>0&&(E+=u[P-1].dist(u[P]));for(let P=0;P<u.length;P++){const Q=k[P];this.lineVertexArray.emplaceBack(Q.x,Q.y,Q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(l,u,v,b,E,k,P,Q,q,J,oe,ve){const Be=l.indexArray,Fe=l.layoutVertexArray,Oe=l.segments.prepareSegment(4*u.length,Fe,Be,this.canOverlap?k.sortKey:void 0),Ze=this.glyphOffsetArray.length,ht=Oe.vertexLength,Ut=this.allowVerticalPlacement&&P===c.ao.vertical?Math.PI/2:0,_t=k.text&&k.text.sections;for(let Ct=0;Ct<u.length;Ct++){const{tl:Jt,tr:nr,bl:gr,br:Lr,tex:Nr,pixelOffsetTL:Pr,pixelOffsetBR:Jr,minFontScaleX:Rr,minFontScaleY:Ur,glyphOffset:fr,isSDF:Si,sectionIndex:Pi}=u[Ct],hi=Oe.vertexLength,ii=fr[1];hf(Fe,Q.x,Q.y,Jt.x,ii+Jt.y,Nr.x,Nr.y,v,Si,Pr.x,Pr.y,Rr,Ur),hf(Fe,Q.x,Q.y,nr.x,ii+nr.y,Nr.x+Nr.w,Nr.y,v,Si,Jr.x,Pr.y,Rr,Ur),hf(Fe,Q.x,Q.y,gr.x,ii+gr.y,Nr.x,Nr.y+Nr.h,v,Si,Pr.x,Jr.y,Rr,Ur),hf(Fe,Q.x,Q.y,Lr.x,ii+Lr.y,Nr.x+Nr.w,Nr.y+Nr.h,v,Si,Jr.x,Jr.y,Rr,Ur),e1(l.dynamicLayoutVertexArray,Q,Ut),Be.emplaceBack(hi,hi+2,hi+1),Be.emplaceBack(hi+1,hi+2,hi+3),Oe.vertexLength+=4,Oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(fr[0]),Ct!==u.length-1&&Pi===u[Ct+1].sectionIndex||l.programConfigurations.populatePaintArrays(Fe.length,k,k.index,{imagePositions:{},canonical:ve,formattedSection:_t&&_t[Pi]})}l.placedSymbolArray.emplaceBack(Q.x,Q.y,Ze,this.glyphOffsetArray.length-Ze,ht,q,J,Q.segment,v?v[0]:0,v?v[1]:0,b[0],b[1],P,0,!1,0,oe)}_addCollisionDebugVertex(l,u,v,b,E,k){return u.emplaceBack(0,0),l.emplaceBack(v.x,v.y,b,E,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(l,u,v,b,E,k,P){const Q=E.segments.prepareSegment(4,E.layoutVertexArray,E.indexArray),q=Q.vertexLength,J=E.layoutVertexArray,oe=E.collisionVertexArray,ve=P.anchorX,Be=P.anchorY;this._addCollisionDebugVertex(J,oe,k,ve,Be,new d(l,u)),this._addCollisionDebugVertex(J,oe,k,ve,Be,new d(v,u)),this._addCollisionDebugVertex(J,oe,k,ve,Be,new d(v,b)),this._addCollisionDebugVertex(J,oe,k,ve,Be,new d(l,b)),Q.vertexLength+=4;const Fe=E.indexArray;Fe.emplaceBack(q,q+1),Fe.emplaceBack(q+1,q+2),Fe.emplaceBack(q+2,q+3),Fe.emplaceBack(q+3,q),Q.primitiveLength+=4}addDebugCollisionBoxes(l,u,v,b){for(let E=l;E<u;E++){const k=this.collisionBoxArray.get(E);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,b?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Up(Ci,SA.members,Mn),this.iconCollisionBox=new Up(Ci,SA.members,Mn);for(let l=0;l<this.symbolInstances.length;l++){const u=this.symbolInstances.get(l);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(l,u,v,b,E,k,P,Q,q){const J={};for(let oe=u;oe<v;oe++){const ve=l.get(oe);J.textBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},J.textFeatureIndex=ve.featureIndex;break}for(let oe=b;oe<E;oe++){const ve=l.get(oe);J.verticalTextBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},J.verticalTextFeatureIndex=ve.featureIndex;break}for(let oe=k;oe<P;oe++){const ve=l.get(oe);J.iconBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},J.iconFeatureIndex=ve.featureIndex;break}for(let oe=Q;oe<q;oe++){const ve=l.get(oe);J.verticalIconBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},J.verticalIconFeatureIndex=ve.featureIndex;break}return J}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const v=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,u){const v=l.placedSymbolArray.get(u),b=v.vertexStartIndex+4*v.numGlyphs;for(let E=v.vertexStartIndex;E<b;E+=4)l.indexArray.emplaceBack(E,E+2,E+1),l.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(l),v=Math.cos(l),b=[],E=[],k=[];for(let P=0;P<this.symbolInstances.length;++P){k.push(P);const Q=this.symbolInstances.get(P);b.push(0|Math.round(u*Q.anchorX+v*Q.anchorY)),E.push(Q.featureIndex)}return k.sort((P,Q)=>b[P]-b[Q]||E[Q]-E[P]),k}addToSortKeyRanges(l,u){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===u?v.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const v=this.symbolInstances.get(u);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach((b,E,k)=>{b>=0&&k.indexOf(b)===E&&this.addIndicesForPlacedSymbol(this.text,b)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let om,t1;Ge("SymbolBucket",TA,{omit:["layers","collisionBoxArray","features","compareText"]}),TA.MAX_GLYPHS=65535,TA.addDynamicAttributes=e1;var jp={get paint(){return t1=t1||new Jn({"icon-opacity":new Dr(Bt.paint_symbol["icon-opacity"]),"icon-color":new Dr(Bt.paint_symbol["icon-color"]),"icon-halo-color":new Dr(Bt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Dr(Bt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Dr(Bt.paint_symbol["icon-halo-blur"]),"icon-translate":new Tr(Bt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Tr(Bt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Dr(Bt.paint_symbol["text-opacity"]),"text-color":new Dr(Bt.paint_symbol["text-color"],{runtimeType:sr,getOverride:A=>A.textColor,hasOverride:A=>!!A.textColor}),"text-halo-color":new Dr(Bt.paint_symbol["text-halo-color"]),"text-halo-width":new Dr(Bt.paint_symbol["text-halo-width"]),"text-halo-blur":new Dr(Bt.paint_symbol["text-halo-blur"]),"text-translate":new Tr(Bt.paint_symbol["text-translate"]),"text-translate-anchor":new Tr(Bt.paint_symbol["text-translate-anchor"])})},get layout(){return om=om||new Jn({"symbol-placement":new Tr(Bt.layout_symbol["symbol-placement"]),"symbol-spacing":new Tr(Bt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Tr(Bt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Dr(Bt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Tr(Bt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Tr(Bt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Tr(Bt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Tr(Bt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Tr(Bt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Tr(Bt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Dr(Bt.layout_symbol["icon-size"]),"icon-text-fit":new Tr(Bt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Tr(Bt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Dr(Bt.layout_symbol["icon-image"]),"icon-rotate":new Dr(Bt.layout_symbol["icon-rotate"]),"icon-padding":new Dr(Bt.layout_symbol["icon-padding"]),"icon-keep-upright":new Tr(Bt.layout_symbol["icon-keep-upright"]),"icon-offset":new Dr(Bt.layout_symbol["icon-offset"]),"icon-anchor":new Dr(Bt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Tr(Bt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Tr(Bt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Tr(Bt.layout_symbol["text-rotation-alignment"]),"text-field":new Dr(Bt.layout_symbol["text-field"]),"text-font":new Dr(Bt.layout_symbol["text-font"]),"text-size":new Dr(Bt.layout_symbol["text-size"]),"text-max-width":new Dr(Bt.layout_symbol["text-max-width"]),"text-line-height":new Tr(Bt.layout_symbol["text-line-height"]),"text-letter-spacing":new Dr(Bt.layout_symbol["text-letter-spacing"]),"text-justify":new Dr(Bt.layout_symbol["text-justify"]),"text-radial-offset":new Dr(Bt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Tr(Bt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Dr(Bt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Dr(Bt.layout_symbol["text-anchor"]),"text-max-angle":new Tr(Bt.layout_symbol["text-max-angle"]),"text-writing-mode":new Tr(Bt.layout_symbol["text-writing-mode"]),"text-rotate":new Dr(Bt.layout_symbol["text-rotate"]),"text-padding":new Tr(Bt.layout_symbol["text-padding"]),"text-keep-upright":new Tr(Bt.layout_symbol["text-keep-upright"]),"text-transform":new Dr(Bt.layout_symbol["text-transform"]),"text-offset":new Dr(Bt.layout_symbol["text-offset"]),"text-allow-overlap":new Tr(Bt.layout_symbol["text-allow-overlap"]),"text-overlap":new Tr(Bt.layout_symbol["text-overlap"]),"text-ignore-placement":new Tr(Bt.layout_symbol["text-ignore-placement"]),"text-optional":new Tr(Bt.layout_symbol["text-optional"])})}};class zd{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:it,this.defaultValue=l}evaluate(l){if(l.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(l.formattedSection))return u.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ge("FormatSectionOverride",zd,{omit:["defaultValue"]});class Hf extends cs{constructor(l,u){super(l,jp,u)}recalculate(l,u){if(super.recalculate(l,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const b=[];for(const E of v)b.indexOf(E)<0&&b.push(E);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,u,v,b){const E=this.layout.get(l).evaluate(u,{},v,b),k=this._unevaluatedLayout._values[l];return k.isDataDriven()||kl(k.value)||!E?E:function(P,Q){return Q.replace(/{([^{}]+)}/g,(q,J)=>P&&J in P?String(P[J]):"")}(u.properties,E)}createBucket(l){return new TA(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of jp.paint.overridableProperties){if(!Hf.hasPaintOverride(this.layout,l))continue;const u=this.paint.get(l),v=new zd(u),b=new Ec(v,u.property.specification);let E=null;E=u.value.kind==="constant"||u.value.kind==="source"?new gh("source",b):new po("composite",b,u.value.zoomStops),this.paint._values[l]=new Rn(u.property,E,u.parameters)}}_handleOverridablePaintPropertyUpdate(l,u,v){return!(!this.layout||u.isDataDriven()||v.isDataDriven())&&Hf.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,u){const v=l.get("text-field"),b=jp.paint.properties[u];let E=!1;const k=P=>{for(const Q of P)if(b.overrides&&b.overrides.hasOverride(Q))return void(E=!0)};if(v.value.kind==="constant"&&v.value.value instanceof Ua)k(v.value.value.sections);else if(v.value.kind==="source"||v.value.kind==="composite"){const P=q=>{E||(q instanceof di&&kn(q.value)===Mr?k(q.value.sections):q instanceof bl?k(q.sections):q.eachChild(P))},Q=v.value;Q._styleExpression&&P(Q._styleExpression.expression)}return E}}let Vf;var Tx={get paint(){return Vf=Vf||new Jn({"background-color":new Tr(Bt.paint_background["background-color"]),"background-pattern":new Mi(Bt.paint_background["background-pattern"]),"background-opacity":new Tr(Bt.paint_background["background-opacity"])})}};class Z2 extends cs{constructor(l,u){super(l,Tx,u)}}class Y2 extends cs{constructor(l,u){super(l,{},u),this.onAdd=v=>{this.implementation.onAdd&&this.implementation.onAdd(v,v.painter.context.gl)},this.onRemove=v=>{this.implementation.onRemove&&this.implementation.onRemove(v,v.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Fx{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const kx={once:!0},Hd=63710088e-1;class Pn{constructor(l,u){if(isNaN(l)||isNaN(u))throw new Error(`Invalid LngLat object: (${l}, ${u})`);if(this.lng=+l,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pn(lt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const u=Math.PI/180,v=this.lat*u,b=l.lat*u,E=Math.sin(v)*Math.sin(b)+Math.cos(v)*Math.cos(b)*Math.cos((l.lng-this.lng)*u);return Hd*Math.acos(Math.min(E,1))}static convert(l){if(l instanceof Pn)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Pn(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Pn(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const lm=2*Math.PI*Hd;function zo(A){return lm*Math.cos(A*Math.PI/180)}function Nx(A){return(180+A)/360}function cm(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function um(A,l){return A/zo(l)}function Vd(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}function r1(A,l){return A*zo(Vd(l))}class Gd{constructor(l,u,v=0){this.x=+l,this.y=+u,this.z=+v}static fromLngLat(l,u=0){const v=Pn.convert(l);return new Gd(Nx(v.lng),cm(v.lat),um(u,v.lat))}toLngLat(){return new Pn(360*this.x-180,Vd(this.y))}toAltitude(){return r1(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/lm*(l=Vd(this.y),1/Math.cos(l*Math.PI/180));var l}}function hm(A,l,u){var v=2*Math.PI*6378137/256/Math.pow(2,u);return[A*v-2*Math.PI*6378137/2,l*v-2*Math.PI*6378137/2]}class Op{constructor(l,u,v){if(!function(b,E,k){return!(b<0||b>25||k<0||k>=Math.pow(2,b)||E<0||E>=Math.pow(2,b))}(l,u,v))throw new Error(`x=${u}, y=${v}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=u,this.y=v,this.key=qd(0,l,l,u,v)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,u,v){const b=(k=this.y,P=this.z,Q=hm(256*(E=this.x),256*(k=Math.pow(2,P)-k-1),P),q=hm(256*(E+1),256*(k+1),P),Q[0]+","+Q[1]+","+q[0]+","+q[1]);var E,k,P,Q,q;const J=function(oe,ve,Be){let Fe,Oe="";for(let Ze=oe;Ze>0;Ze--)Fe=1<<Ze-1,Oe+=(ve&Fe?1:0)+(Be&Fe?2:0);return Oe}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,J).replace(/{bbox-epsg-3857}/g,b)}isChildOf(l){const u=this.z-l.z;return u>0&&l.x===this.x>>u&&l.y===this.y>>u}getTilePoint(l){const u=Math.pow(2,this.z);return new d((l.x*u-this.x)*Me,(l.y*u-this.y)*Me)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ix{constructor(l,u){this.wrap=l,this.canonical=u,this.key=qd(l,u.z,u.z,u.x,u.y)}}class Rc{constructor(l,u,v,b,E){if(this.terrainRttPosMatrix32f=null,l<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${v}`);this.overscaledZ=l,this.wrap=u,this.canonical=new Op(v,+b,+E),this.key=qd(u,l,v,b,E)}clone(){return new Rc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-l;return l>this.canonical.z?new Rc(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Rc(l,this.wrap,l,this.canonical.x>>u,this.canonical.y>>u)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(l,u){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-l;return l>this.canonical.z?qd(this.wrap*+u,l,this.canonical.z,this.canonical.x,this.canonical.y):qd(this.wrap*+u,l,l,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(l){if(l.wrap!==this.wrap||this.overscaledZ-l.overscaledZ<=0)return!1;if(l.overscaledZ===0)return this.overscaledZ>0;const u=this.canonical.z-l.canonical.z;return!(u<0)&&l.canonical.x===this.canonical.x>>u&&l.canonical.y===this.canonical.y>>u}children(l){if(this.overscaledZ>=l)return[new Rc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,v=2*this.canonical.x,b=2*this.canonical.y;return[new Rc(u,this.wrap,u,v,b),new Rc(u,this.wrap,u,v+1,b),new Rc(u,this.wrap,u,v,b+1),new Rc(u,this.wrap,u,v+1,b+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Rc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Rc(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ix(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new Gd(l.x-this.wrap,l.y))}}function qd(A,l,u,v,b){(A*=2)<0&&(A=-1*A-1);const E=1<<u;return(E*E*A+E*b+v).toString(36)+u.toString(36)+l.toString(36)}function Kd(A,l){return l?A.properties[l]:A.id}Ge("CanonicalTileID",Op),Ge("OverscaledTileID",Rc,{omit:["terrainRttPosMatrix32f"]});class Gf{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const u=new Gf;return u.extend(l(new d(this.minX,this.minY))),u.extend(l(new d(this.maxX,this.minY))),u.extend(l(new d(this.minX,this.maxY))),u.extend(l(new d(this.maxX,this.maxY))),u}static fromPoints(l){const u=new Gf;for(const v of l)u.extend(v);return u}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class Lx{constructor(l){this._stringToNumber={},this._numberToString=[];for(let u=0;u<l.length;u++){const v=l[u];this._stringToNumber[v]=u,this._numberToString[u]=v}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class FA{constructor(l,u,v,b,E){this.type="Feature",this._vectorTileFeature=l,l._z=u,l._x=v,l._y=b,this.properties=l.properties,this.id=E}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(l[u]=this[u]);return l}}class i1{constructor(l,u){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new We(Me,16,0),this.grid3D=new We(Me,16,0),this.featureIndexArray=new wt,this.promoteId=u}insert(l,u,v,b,E,k){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,b,E);const Q=k?this.grid3D:this.grid;for(let q=0;q<u.length;q++){const J=u[q],oe=[1/0,1/0,-1/0,-1/0];for(let ve=0;ve<J.length;ve++){const Be=J[ve];oe[0]=Math.min(oe[0],Be.x),oe[1]=Math.min(oe[1],Be.y),oe[2]=Math.max(oe[2],Be.x),oe[3]=Math.max(oe[3],Be.y)}oe[0]<Me&&oe[1]<Me&&oe[2]>=0&&oe[3]>=0&&Q.insert(P,oe[0],oe[1],oe[2],oe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new G0(new Dp(this.rawTileData)).layers,this.sourceLayerCoder=new Lx(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,u,v,b){this.loadVTLayers();const E=l.params,k=Me/l.tileSize/l.scale,P=du(E.filter,E.globalState),Q=l.queryGeometry,q=l.queryPadding*k,J=Gf.fromPoints(Q),oe=this.grid.query(J.minX-q,J.minY-q,J.maxX+q,J.maxY+q),ve=Gf.fromPoints(l.cameraQueryGeometry).expandBy(q),Be=this.grid3D.query(ve.minX,ve.minY,ve.maxX,ve.maxY,(Ze,ht,Ut,_t)=>function(Ct,Jt,nr,gr,Lr){for(const Pr of Ct)if(Jt<=Pr.x&&nr<=Pr.y&&gr>=Pr.x&&Lr>=Pr.y)return!0;const Nr=[new d(Jt,nr),new d(Jt,Lr),new d(gr,Lr),new d(gr,nr)];if(Ct.length>2){for(const Pr of Nr)if(xA(Ct,Pr))return!0}for(let Pr=0;Pr<Ct.length-1;Pr++)if(Cg(Ct[Pr],Ct[Pr+1],Nr))return!0;return!1}(l.cameraQueryGeometry,Ze-q,ht-q,Ut+q,_t+q));for(const Ze of Be)oe.push(Ze);oe.sort(J2);const Fe={};let Oe;for(let Ze=0;Ze<oe.length;Ze++){const ht=oe[Ze];if(ht===Oe)continue;Oe=ht;const Ut=this.featureIndexArray.get(ht);let _t=null;this.loadMatchingFeature(Fe,Ut.bucketIndex,Ut.sourceLayerIndex,Ut.featureIndex,P,E.layers,E.availableImages,u,v,b,(Ct,Jt,nr)=>(_t||(_t=jh(Ct)),Jt.queryIntersectsFeature({queryGeometry:Q,feature:Ct,featureState:nr,geometry:_t,zoom:this.z,transform:l.transform,pixelsToTileUnits:k,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation})))}return Fe}loadMatchingFeature(l,u,v,b,E,k,P,Q,q,J,oe){const ve=this.bucketLayerIDs[u];if(k&&!ve.some(Ze=>k.has(Ze)))return;const Be=this.sourceLayerCoder.decode(v),Fe=this.vtLayers[Be].feature(b);if(E.needGeometry){const Ze=rf(Fe,!0);if(!E.filter(new Li(this.tileID.overscaledZ),Ze,this.tileID.canonical))return}else if(!E.filter(new Li(this.tileID.overscaledZ),Fe))return;const Oe=this.getId(Fe,Be);for(let Ze=0;Ze<ve.length;Ze++){const ht=ve[Ze];if(k&&!k.has(ht))continue;const Ut=Q[ht];if(!Ut)continue;let _t={};Oe&&J&&(_t=J.getState(Ut.sourceLayer||"_geojsonTileLayer",Oe));const Ct=rt({},q[ht]);Ct.paint=Am(Ct.paint,Ut.paint,Fe,_t,P),Ct.layout=Am(Ct.layout,Ut.layout,Fe,_t,P);const Jt=!oe||oe(Fe,Ut,_t);if(!Jt)continue;const nr=new FA(Fe,this.z,this.x,this.y,Oe);nr.layer=Ct;let gr=l[ht];gr===void 0&&(gr=l[ht]=[]),gr.push({featureIndex:b,feature:nr,intersectionZ:Jt})}}lookupSymbolFeatures(l,u,v,b,E,k,P,Q){const q={};this.loadVTLayers();const J=du(E.filterSpec,E.globalState);for(const oe of l)this.loadMatchingFeature(q,v,b,oe,J,k,P,Q,u);return q}hasLayer(l){for(const u of this.bucketLayerIDs)for(const v of u)if(l===v)return!0;return!1}getId(l,u){var v;let b=l.id;return this.promoteId&&(b=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof b=="boolean"&&(b=Number(b)),b===void 0&&(!((v=l.properties)===null||v===void 0)&&v.cluster)&&this.promoteId&&(b=Number(l.properties.cluster_id))),b}}function Am(A,l,u,v,b){return dt(A,(E,k)=>{const P=l instanceof ls?l.get(k):null;return P&&P.evaluate?P.evaluate(u,v,b):P})}function J2(A,l){return l-A}function Mx(A,l,u,v,b){const E=[];for(let k=0;k<A.length;k++){const P=A[k];let Q;for(let q=0;q<P.length-1;q++){let J=P[q],oe=P[q+1];J.x<l&&oe.x<l||(J.x<l?J=new d(l,J.y+(l-J.x)/(oe.x-J.x)*(oe.y-J.y))._round():oe.x<l&&(oe=new d(l,J.y+(l-J.x)/(oe.x-J.x)*(oe.y-J.y))._round()),J.y<u&&oe.y<u||(J.y<u?J=new d(J.x+(u-J.y)/(oe.y-J.y)*(oe.x-J.x),u)._round():oe.y<u&&(oe=new d(J.x+(u-J.y)/(oe.y-J.y)*(oe.x-J.x),u)._round()),J.x>=v&&oe.x>=v||(J.x>=v?J=new d(v,J.y+(v-J.x)/(oe.x-J.x)*(oe.y-J.y))._round():oe.x>=v&&(oe=new d(v,J.y+(v-J.x)/(oe.x-J.x)*(oe.y-J.y))._round()),J.y>=b&&oe.y>=b||(J.y>=b?J=new d(J.x+(b-J.y)/(oe.y-J.y)*(oe.x-J.x),b)._round():oe.y>=b&&(oe=new d(J.x+(b-J.y)/(oe.y-J.y)*(oe.x-J.x),b)._round()),Q&&J.equals(Q[Q.length-1])||(Q=[J],E.push(Q)),Q.push(oe)))))}}return E}Ge("FeatureIndex",i1,{omit:["rawTileData","sourceLayerCoder"]});class qh extends d{constructor(l,u,v,b){super(l,u),this.angle=v,b!==void 0&&(this.segment=b)}clone(){return new qh(this.x,this.y,this.angle,this.segment)}}function Px(A,l,u,v,b){if(l.segment===void 0||u===0)return!0;let E=l,k=l.segment+1,P=0;for(;P>-u/2;){if(k--,k<0)return!1;P-=A[k].dist(E),E=A[k]}P+=A[k].dist(A[k+1]),k++;const Q=[];let q=0;for(;P<u/2;){const J=A[k],oe=A[k+1];if(!oe)return!1;let ve=A[k-1].angleTo(J)-J.angleTo(oe);for(ve=Math.abs((ve+3*Math.PI)%(2*Math.PI)-Math.PI),Q.push({distance:P,angleDelta:ve}),q+=ve;P-Q[0].distance>v;)q-=Q.shift().angleDelta;if(q>b)return!1;k++,P+=J.dist(oe)}return!0}function Yu(A){let l=0;for(let u=0;u<A.length-1;u++)l+=A[u].dist(A[u+1]);return l}function fm(A,l,u){return A?.6*l*u:0}function n1(A,l){return Math.max(A?A.right-A.left:0,l?l.right-l.left:0)}function Dx(A,l,u,v,b,E){const k=fm(u,b,E),P=n1(u,v)*E;let Q=0;const q=Yu(A)/2;for(let J=0;J<A.length-1;J++){const oe=A[J],ve=A[J+1],Be=oe.dist(ve);if(Q+Be>q){const Fe=(q-Q)/Be,Oe=qr.number(oe.x,ve.x,Fe),Ze=qr.number(oe.y,ve.y,Fe),ht=new qh(Oe,Ze,ve.angleTo(oe),J);return ht._round(),!k||Px(A,ht,P,k,l)?ht:void 0}Q+=Be}}function Qp(A,l,u,v,b,E,k,P,Q){const q=fm(v,E,k),J=n1(v,b),oe=J*k,ve=A[0].x===0||A[0].x===Q||A[0].y===0||A[0].y===Q;return l-oe<l/4&&(l=oe+l/4),xu(A,ve?l/2*P%l:(J/2+2*E)*k*P%l,l,q,u,oe,ve,!1,Q)}function xu(A,l,u,v,b,E,k,P,Q){const q=E/2,J=Yu(A);let oe=0,ve=l-u,Be=[];for(let Fe=0;Fe<A.length-1;Fe++){const Oe=A[Fe],Ze=A[Fe+1],ht=Oe.dist(Ze),Ut=Ze.angleTo(Oe);for(;ve+u<oe+ht;){ve+=u;const _t=(ve-oe)/ht,Ct=qr.number(Oe.x,Ze.x,_t),Jt=qr.number(Oe.y,Ze.y,_t);if(Ct>=0&&Ct<Q&&Jt>=0&&Jt<Q&&ve-q>=0&&ve+q<=J){const nr=new qh(Ct,Jt,Ut,Fe);nr._round(),v&&!Px(A,nr,E,v,b)||Be.push(nr)}}oe+=ht}return P||Be.length||k||(Be=xu(A,oe/2,u,v,b,E,k,!0,Q)),Be}function s1(A,l,u,v){const b=[],E=A.image,k=E.pixelRatio,P=E.paddedRect.w-2,Q=E.paddedRect.h-2;let q={x1:A.left,y1:A.top,x2:A.right,y2:A.bottom};const J=E.stretchX||[[0,P]],oe=E.stretchY||[[0,Q]],ve=(fr,Si)=>fr+Si[1]-Si[0],Be=J.reduce(ve,0),Fe=oe.reduce(ve,0),Oe=P-Be,Ze=Q-Fe;let ht=0,Ut=Be,_t=0,Ct=Fe,Jt=0,nr=Oe,gr=0,Lr=Ze;if(E.content&&v){const fr=E.content,Si=fr[2]-fr[0],Pi=fr[3]-fr[1];(E.textFitWidth||E.textFitHeight)&&(q=Zg(A)),ht=qf(J,0,fr[0]),_t=qf(oe,0,fr[1]),Ut=qf(J,fr[0],fr[2]),Ct=qf(oe,fr[1],fr[3]),Jt=fr[0]-ht,gr=fr[1]-_t,nr=Si-Ut,Lr=Pi-Ct}const Nr=q.x1,Pr=q.y1,Jr=q.x2-Nr,Rr=q.y2-Pr,Ur=(fr,Si,Pi,hi)=>{const ii=dm(fr.stretch-ht,Ut,Jr,Nr),hn=pm(fr.fixed-Jt,nr,fr.stretch,Be),gs=dm(Si.stretch-_t,Ct,Rr,Pr),ca=pm(Si.fixed-gr,Lr,Si.stretch,Fe),_o=dm(Pi.stretch-ht,Ut,Jr,Nr),fl=pm(Pi.fixed-Jt,nr,Pi.stretch,Be),dl=dm(hi.stretch-_t,Ct,Rr,Pr),Ea=pm(hi.fixed-gr,Lr,hi.stretch,Fe),Fs=new d(ii,gs),ro=new d(_o,gs),Ta=new d(_o,dl),h=new d(ii,dl),m=new d(hn/k,ca/k),_=new d(fl/k,Ea/k),F=l*Math.PI/180;if(F){const be=Math.sin(F),Ve=Math.cos(F),bt=[Ve,-be,be,Ve];Fs._matMult(bt),ro._matMult(bt),h._matMult(bt),Ta._matMult(bt)}const j=fr.stretch+fr.fixed,K=Si.stretch+Si.fixed;return{tl:Fs,tr:ro,bl:h,br:Ta,tex:{x:E.paddedRect.x+1+j,y:E.paddedRect.y+1+K,w:Pi.stretch+Pi.fixed-j,h:hi.stretch+hi.fixed-K},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:m,pixelOffsetBR:_,minFontScaleX:nr/k/Jr,minFontScaleY:Lr/k/Rr,isSDF:u}};if(v&&(E.stretchX||E.stretchY)){const fr=Kh(J,Oe,Be),Si=Kh(oe,Ze,Fe);for(let Pi=0;Pi<fr.length-1;Pi++){const hi=fr[Pi],ii=fr[Pi+1];for(let hn=0;hn<Si.length-1;hn++)b.push(Ur(hi,Si[hn],ii,Si[hn+1]))}}else b.push(Ur({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:Q+1}));return b}function qf(A,l,u){let v=0;for(const b of A)v+=Math.max(l,Math.min(u,b[1]))-Math.max(l,Math.min(u,b[0]));return v}function Kh(A,l,u){const v=[{fixed:-1,stretch:0}];for(const[b,E]of A){const k=v[v.length-1];v.push({fixed:b-k.stretch,stretch:k.stretch}),v.push({fixed:b-k.stretch,stretch:k.stretch+(E-b)})}return v.push({fixed:l+1,stretch:u}),v}function dm(A,l,u,v){return A/l*u+v}function pm(A,l,u,v){return A-l*u/v}Ge("Anchor",qh);class kA{constructor(l,u,v,b,E,k,P,Q,q,J){var oe;if(this.boxStartIndex=l.length,q){let ve=k.top,Be=k.bottom;const Fe=k.collisionPadding;Fe&&(ve-=Fe[1],Be+=Fe[3]);let Oe=Be-ve;Oe>0&&(Oe=Math.max(10,Oe),this.circleDiameter=Oe)}else{const ve=!((oe=k.image)===null||oe===void 0)&&oe.content&&(k.image.textFitWidth||k.image.textFitHeight)?Zg(k):{x1:k.left,y1:k.top,x2:k.right,y2:k.bottom};ve.y1=ve.y1*P-Q[0],ve.y2=ve.y2*P+Q[2],ve.x1=ve.x1*P-Q[3],ve.x2=ve.x2*P+Q[1];const Be=k.collisionPadding;if(Be&&(ve.x1-=Be[0]*P,ve.y1-=Be[1]*P,ve.x2+=Be[2]*P,ve.y2+=Be[3]*P),J){const Fe=new d(ve.x1,ve.y1),Oe=new d(ve.x2,ve.y1),Ze=new d(ve.x1,ve.y2),ht=new d(ve.x2,ve.y2),Ut=J*Math.PI/180;Fe._rotate(Ut),Oe._rotate(Ut),Ze._rotate(Ut),ht._rotate(Ut),ve.x1=Math.min(Fe.x,Oe.x,Ze.x,ht.x),ve.x2=Math.max(Fe.x,Oe.x,Ze.x,ht.x),ve.y1=Math.min(Fe.y,Oe.y,Ze.y,ht.y),ve.y2=Math.max(Fe.y,Oe.y,Ze.y,ht.y)}l.emplaceBack(u.x,u.y,ve.x1,ve.y1,ve.x2,ve.y2,v,b,E)}this.boxEndIndex=l.length}}class Rx{constructor(l=[],u=(v,b)=>v<b?-1:v>b?1:0){if(this.data=l,this.length=this.data.length,this.compare=u,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:u,compare:v}=this,b=u[l];for(;l>0;){const E=l-1>>1,k=u[E];if(v(b,k)>=0)break;u[l]=k,l=E}u[l]=b}_down(l){const{data:u,compare:v}=this,b=this.length>>1,E=u[l];for(;l<b;){let k=1+(l<<1);const P=k+1;if(P<this.length&&v(u[P],u[k])<0&&(k=P),v(u[k],E)>=0)break;u[l]=u[k],l=k}u[l]=E}}function eb(A,l=1,u=!1){const v=Gf.fromPoints(A[0]),b=Math.min(v.width(),v.height());let E=b/2;const k=new Rx([],tb),{minX:P,minY:Q,maxX:q,maxY:J}=v;if(b===0)return new d(P,Q);for(let Be=P;Be<q;Be+=b)for(let Fe=Q;Fe<J;Fe+=b)k.push(new Wd(Be+E,Fe+E,E,A));let oe=function(Be){let Fe=0,Oe=0,Ze=0;const ht=Be[0];for(let Ut=0,_t=ht.length,Ct=_t-1;Ut<_t;Ct=Ut++){const Jt=ht[Ut],nr=ht[Ct],gr=Jt.x*nr.y-nr.x*Jt.y;Oe+=(Jt.x+nr.x)*gr,Ze+=(Jt.y+nr.y)*gr,Fe+=3*gr}return new Wd(Oe/Fe,Ze/Fe,0,Be)}(A),ve=k.length;for(;k.length;){const Be=k.pop();(Be.d>oe.d||!oe.d)&&(oe=Be,u&&console.log("found best %d after %d probes",Math.round(1e4*Be.d)/1e4,ve)),Be.max-oe.d<=l||(E=Be.h/2,k.push(new Wd(Be.p.x-E,Be.p.y-E,E,A)),k.push(new Wd(Be.p.x+E,Be.p.y-E,E,A)),k.push(new Wd(Be.p.x-E,Be.p.y+E,E,A)),k.push(new Wd(Be.p.x+E,Be.p.y+E,E,A)),ve+=4)}return u&&(console.log(`num probes: ${ve}`),console.log(`best distance: ${oe.d}`)),oe.p}function tb(A,l){return l.max-A.max}function Wd(A,l,u,v){this.p=new d(A,l),this.h=u,this.d=function(b,E){let k=!1,P=1/0;for(let Q=0;Q<E.length;Q++){const q=E[Q];for(let J=0,oe=q.length,ve=oe-1;J<oe;ve=J++){const Be=q[J],Fe=q[ve];Be.y>b.y!=Fe.y>b.y&&b.x<(Fe.x-Be.x)*(b.y-Be.y)/(Fe.y-Be.y)+Be.x&&(k=!k),P=Math.min(P,wg(b,Be,Fe))}}return(k?1:-1)*Math.sqrt(P)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}var Ho;c.aE=void 0,(Ho=c.aE||(c.aE={}))[Ho.center=1]="center",Ho[Ho.left=2]="left",Ho[Ho.right=3]="right",Ho[Ho.top=4]="top",Ho[Ho.bottom=5]="bottom",Ho[Ho["top-left"]=6]="top-left",Ho[Ho["top-right"]=7]="top-right",Ho[Ho["bottom-left"]=8]="bottom-left",Ho[Ho["bottom-right"]=9]="bottom-right";const a1=Number.POSITIVE_INFINITY;function Ux(A,l){return l[1]!==a1?function(u,v,b){let E=0,k=0;switch(v=Math.abs(v),b=Math.abs(b),u){case"top-right":case"top-left":case"top":k=b-7;break;case"bottom-right":case"bottom-left":case"bottom":k=7-b}switch(u){case"top-right":case"bottom-right":case"right":E=-v;break;case"top-left":case"bottom-left":case"left":E=v}return[E,k]}(A,l[0],l[1]):function(u,v){let b=0,E=0;v<0&&(v=0);const k=v/Math.SQRT2;switch(u){case"top-right":case"top-left":E=k-7;break;case"bottom-right":case"bottom-left":E=7-k;break;case"bottom":E=7-v;break;case"top":E=v-7}switch(u){case"top-right":case"bottom-right":b=-k;break;case"top-left":case"bottom-left":b=k;break;case"left":b=v;break;case"right":b=-v}return[b,E]}(A,l[0])}function jx(A,l,u){var v;const b=A.layout,E=(v=b.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(l,{},u);if(E){const P=E.values,Q=[];for(let q=0;q<P.length;q+=2){const J=Q[q]=P[q],oe=P[q+1].map(ve=>ve*za);J.startsWith("top")?oe[1]-=7:J.startsWith("bottom")&&(oe[1]+=7),Q[q+1]=oe}return new Zn(Q)}const k=b.get("text-variable-anchor");if(k){let P;P=A._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[b.get("text-radial-offset").evaluate(l,{},u)*za,a1]:b.get("text-offset").evaluate(l,{},u).map(q=>q*za);const Q=[];for(const q of k)Q.push(q,Ux(q,P));return new Zn(Q)}return null}function mm(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function $d(A,l,u,v,b,E,k,P,Q,q,J,oe){let ve=E.textMaxSize.evaluate(l,{});ve===void 0&&(ve=k);const Be=A.layers[0].layout,Fe=Be.get("icon-offset").evaluate(l,{},J),Oe=o1(u.horizontal),Ze=k/24,ht=A.tilePixelRatio*Ze,Ut=A.tilePixelRatio*ve/24,_t=A.tilePixelRatio*P,Ct=A.tilePixelRatio*Be.get("symbol-spacing"),Jt=Be.get("text-padding")*A.tilePixelRatio,nr=function(Pi,hi,ii,hn=1){const gs=Pi.get("icon-padding").evaluate(hi,{},ii),ca=gs&&gs.values;return[ca[0]*hn,ca[1]*hn,ca[2]*hn,ca[3]*hn]}(Be,l,J,A.tilePixelRatio),gr=Be.get("text-max-angle")/180*Math.PI,Lr=Be.get("text-rotation-alignment")!=="viewport"&&Be.get("symbol-placement")!=="point",Nr=Be.get("icon-rotation-alignment")==="map"&&Be.get("symbol-placement")!=="point",Pr=Be.get("symbol-placement"),Jr=Ct/2,Rr=Be.get("icon-text-fit");let Ur;v&&Rr!=="none"&&(A.allowVerticalPlacement&&u.vertical&&(Ur=Yg(v,u.vertical,Rr,Be.get("icon-text-fit-padding"),Fe,Ze)),Oe&&(v=Yg(v,Oe,Rr,Be.get("icon-text-fit-padding"),Fe,Ze)));const fr=J?oe.line.getGranularityForZoomLevel(J.z):1,Si=(Pi,hi)=>{hi.x<0||hi.x>=Me||hi.y<0||hi.y>=Me||function(ii,hn,gs,ca,_o,fl,dl,Ea,Fs,ro,Ta,h,m,_,F,j,K,be,Ve,bt,zt,mr,xr,ir,ar){const Ri=ii.addToLineVertexArray(hn,gs);let Ei,Hn,Vt,Dt,er=0,vr=0,fi=0,xn=0,xi=-1,Oi=-1;const Os={};let Vn=_h("");if(ii.allowVerticalPlacement&&ca.vertical){const hc=Ea.layout.get("text-rotate").evaluate(zt,{},ir)+90;Vt=new kA(Fs,hn,ro,Ta,h,ca.vertical,m,_,F,hc),dl&&(Dt=new kA(Fs,hn,ro,Ta,h,dl,K,be,F,hc))}if(_o){const hc=Ea.layout.get("icon-rotate").evaluate(zt,{}),wh=Ea.layout.get("icon-text-fit")!=="none",Kp=s1(_o,hc,xr,wh),LA=dl?s1(dl,hc,xr,wh):void 0;Hn=new kA(Fs,hn,ro,Ta,h,_o,K,be,!1,hc),er=4*Kp.length;const Wp=ii.iconSizeData;let Af=null;Wp.kind==="source"?(Af=[EA*Ea.layout.get("icon-size").evaluate(zt,{})],Af[0]>Gh&&kt(`${ii.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Wp.kind==="composite"&&(Af=[EA*mr.compositeIconSizes[0].evaluate(zt,{},ir),EA*mr.compositeIconSizes[1].evaluate(zt,{},ir)],(Af[0]>Gh||Af[1]>Gh)&&kt(`${ii.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ii.addSymbols(ii.icon,Kp,Af,bt,Ve,zt,c.ao.none,hn,Ri.lineStartIndex,Ri.lineLength,-1,ir),xi=ii.icon.placedSymbolArray.length-1,LA&&(vr=4*LA.length,ii.addSymbols(ii.icon,LA,Af,bt,Ve,zt,c.ao.vertical,hn,Ri.lineStartIndex,Ri.lineLength,-1,ir),Oi=ii.icon.placedSymbolArray.length-1)}const NA=Object.keys(ca.horizontal);for(const hc of NA){const wh=ca.horizontal[hc];if(!Ei){Vn=_h(wh.text);const LA=Ea.layout.get("text-rotate").evaluate(zt,{},ir);Ei=new kA(Fs,hn,ro,Ta,h,wh,m,_,F,LA)}const Kp=wh.positionedLines.length===1;if(fi+=Xd(ii,hn,wh,fl,Ea,F,zt,j,Ri,ca.vertical?c.ao.horizontal:c.ao.horizontalOnly,Kp?NA:[hc],Os,xi,mr,ir),Kp)break}ca.vertical&&(xn+=Xd(ii,hn,ca.vertical,fl,Ea,F,zt,j,Ri,c.ao.vertical,["vertical"],Os,Oi,mr,ir));const nb=Ei?Ei.boxStartIndex:ii.collisionBoxArray.length,LL=Ei?Ei.boxEndIndex:ii.collisionBoxArray.length,ML=Vt?Vt.boxStartIndex:ii.collisionBoxArray.length,PL=Vt?Vt.boxEndIndex:ii.collisionBoxArray.length,DL=Hn?Hn.boxStartIndex:ii.collisionBoxArray.length,RL=Hn?Hn.boxEndIndex:ii.collisionBoxArray.length,UL=Dt?Dt.boxStartIndex:ii.collisionBoxArray.length,jL=Dt?Dt.boxEndIndex:ii.collisionBoxArray.length;let IA=-1;const Ox=(hc,wh)=>hc&&hc.circleDiameter?Math.max(hc.circleDiameter,wh):wh;IA=Ox(Ei,IA),IA=Ox(Vt,IA),IA=Ox(Hn,IA),IA=Ox(Dt,IA);const jB=IA>-1?1:0;jB&&(IA*=ar/za),ii.glyphOffsetArray.length>=TA.MAX_GLYPHS&&kt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zt.sortKey!==void 0&&ii.addToSortKeyRanges(ii.symbolInstances.length,zt.sortKey);const OL=jx(Ea,zt,ir),[QL,zL]=function(hc,wh){const Kp=hc.length,LA=wh?.values;if(LA?.length>0)for(let Wp=0;Wp<LA.length;Wp+=2){const Af=LA[Wp+1];hc.emplaceBack(c.aE[LA[Wp]],Af[0],Af[1])}return[Kp,hc.length]}(ii.textAnchorOffsets,OL);ii.symbolInstances.emplaceBack(hn.x,hn.y,Os.right>=0?Os.right:-1,Os.center>=0?Os.center:-1,Os.left>=0?Os.left:-1,Os.vertical||-1,xi,Oi,Vn,nb,LL,ML,PL,DL,RL,UL,jL,ro,fi,xn,er,vr,jB,0,m,IA,QL,zL)}(A,hi,Pi,u,v,b,Ur,A.layers[0],A.collisionBoxArray,l.index,l.sourceLayerIndex,A.index,ht,[Jt,Jt,Jt,Jt],Lr,Q,_t,nr,Nr,Fe,l,E,q,J,k)};if(Pr==="line")for(const Pi of Mx(l.geometry,0,0,Me,Me)){const hi=Wu(Pi,fr),ii=Qp(hi,Ct,gr,u.vertical||Oe,v,24,Ut,A.overscaling,Me);for(const hn of ii)Oe&&rb(A,Oe.text,Jr,hn)||Si(hi,hn)}else if(Pr==="line-center"){for(const Pi of l.geometry)if(Pi.length>1){const hi=Wu(Pi,fr),ii=Dx(hi,gr,u.vertical||Oe,v,24,Ut);ii&&Si(hi,ii)}}else if(l.type==="Polygon")for(const Pi of ec(l.geometry,0)){const hi=eb(Pi,16);Si(Wu(Pi[0],fr,!0),new qh(hi.x,hi.y,0))}else if(l.type==="LineString")for(const Pi of l.geometry){const hi=Wu(Pi,fr);Si(hi,new qh(hi[0].x,hi[0].y,0))}else if(l.type==="Point")for(const Pi of l.geometry)for(const hi of Pi)Si([hi],new qh(hi.x,hi.y,0))}function Xd(A,l,u,v,b,E,k,P,Q,q,J,oe,ve,Be,Fe){const Oe=function(Ut,_t,Ct,Jt,nr,gr,Lr,Nr){const Pr=Jt.layout.get("text-rotate").evaluate(gr,{})*Math.PI/180,Jr=[];for(const Rr of _t.positionedLines)for(const Ur of Rr.positionedGlyphs){if(!Ur.rect)continue;const fr=Ur.rect||{};let Si=4,Pi=!0,hi=1,ii=0;const hn=(nr||Nr)&&Ur.vertical,gs=Ur.metrics.advance*Ur.scale/2;if(Nr&&_t.verticalizable&&(ii=Rr.lineOffset/2-(Ur.imageName?-(za-Ur.metrics.width*Ur.scale)/2:(Ur.scale-1)*za)),Ur.imageName){const be=Lr[Ur.imageName];Pi=be.sdf,hi=be.pixelRatio,Si=1/hi}const ca=nr?[Ur.x+gs,Ur.y]:[0,0];let _o=nr?[0,0]:[Ur.x+gs+Ct[0],Ur.y+Ct[1]-ii],fl=[0,0];hn&&(fl=_o,_o=[0,0]);const dl=Ur.metrics.isDoubleResolution?2:1,Ea=(Ur.metrics.left-Si)*Ur.scale-gs+_o[0],Fs=(-Ur.metrics.top-Si)*Ur.scale+_o[1],ro=Ea+fr.w/dl*Ur.scale/hi,Ta=Fs+fr.h/dl*Ur.scale/hi,h=new d(Ea,Fs),m=new d(ro,Fs),_=new d(Ea,Ta),F=new d(ro,Ta);if(hn){const be=new d(-gs,gs- -17),Ve=-Math.PI/2,bt=12-gs,zt=new d(22-bt,-(Ur.imageName?bt:0)),mr=new d(...fl);h._rotateAround(Ve,be)._add(zt)._add(mr),m._rotateAround(Ve,be)._add(zt)._add(mr),_._rotateAround(Ve,be)._add(zt)._add(mr),F._rotateAround(Ve,be)._add(zt)._add(mr)}if(Pr){const be=Math.sin(Pr),Ve=Math.cos(Pr),bt=[Ve,-be,be,Ve];h._matMult(bt),m._matMult(bt),_._matMult(bt),F._matMult(bt)}const j=new d(0,0),K=new d(0,0);Jr.push({tl:h,tr:m,bl:_,br:F,tex:fr,writingMode:_t.writingMode,glyphOffset:ca,sectionIndex:Ur.sectionIndex,isSDF:Pi,pixelOffsetTL:j,pixelOffsetBR:K,minFontScaleX:0,minFontScaleY:0})}return Jr}(0,u,P,b,E,k,v,A.allowVerticalPlacement),Ze=A.textSizeData;let ht=null;Ze.kind==="source"?(ht=[EA*b.layout.get("text-size").evaluate(k,{})],ht[0]>Gh&&kt(`${A.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ze.kind==="composite"&&(ht=[EA*Be.compositeTextSizes[0].evaluate(k,{},Fe),EA*Be.compositeTextSizes[1].evaluate(k,{},Fe)],(ht[0]>Gh||ht[1]>Gh)&&kt(`${A.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),A.addSymbols(A.text,Oe,ht,P,E,k,q,l,Q.lineStartIndex,Q.lineLength,ve,Fe);for(const Ut of J)oe[Ut]=A.text.placedSymbolArray.length-1;return 4*Oe.length}function o1(A){for(const l in A)return A[l];return null}function rb(A,l,u,v){const b=A.compareText;if(l in b){const E=b[l];for(let k=E.length-1;k>=0;k--)if(v.dist(E[k])<u)return!0}else b[l]=[];return b[l].push(v),!1}const Kf=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Wf{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,v]=new Uint8Array(l,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const b=v>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);const E=Kf[15&v];if(!E)throw new Error("Unrecognized array type.");const[k]=new Uint16Array(l,2,1),[P]=new Uint32Array(l,4,1);return new Wf(P,k,E,l)}constructor(l,u=64,v=Float64Array,b){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=v,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const E=Kf.indexOf(this.ArrayType),k=2*l*this.ArrayType.BYTES_PER_ELEMENT,P=l*this.IndexArrayType.BYTES_PER_ELEMENT,Q=(8-P%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${v}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+P+Q,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+k+P+Q),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+P+Q,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=l)}add(l,u){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=l,this.coords[this._pos++]=u,v}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return gm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,u,v,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:k,nodeSize:P}=this,Q=[0,E.length-1,0],q=[];for(;Q.length;){const J=Q.pop()||0,oe=Q.pop()||0,ve=Q.pop()||0;if(oe-ve<=P){for(let Ze=ve;Ze<=oe;Ze++){const ht=k[2*Ze],Ut=k[2*Ze+1];ht>=l&&ht<=v&&Ut>=u&&Ut<=b&&q.push(E[Ze])}continue}const Be=ve+oe>>1,Fe=k[2*Be],Oe=k[2*Be+1];Fe>=l&&Fe<=v&&Oe>=u&&Oe<=b&&q.push(E[Be]),(J===0?l<=Fe:u<=Oe)&&(Q.push(ve),Q.push(Be-1),Q.push(1-J)),(J===0?v>=Fe:b>=Oe)&&(Q.push(Be+1),Q.push(oe),Q.push(1-J))}return q}within(l,u,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:E,nodeSize:k}=this,P=[0,b.length-1,0],Q=[],q=v*v;for(;P.length;){const J=P.pop()||0,oe=P.pop()||0,ve=P.pop()||0;if(oe-ve<=k){for(let Ze=ve;Ze<=oe;Ze++)Vp(E[2*Ze],E[2*Ze+1],l,u)<=q&&Q.push(b[Ze]);continue}const Be=ve+oe>>1,Fe=E[2*Be],Oe=E[2*Be+1];Vp(Fe,Oe,l,u)<=q&&Q.push(b[Be]),(J===0?l-v<=Fe:u-v<=Oe)&&(P.push(ve),P.push(Be-1),P.push(1-J)),(J===0?l+v>=Fe:u+v>=Oe)&&(P.push(Be+1),P.push(oe),P.push(1-J))}return Q}}function gm(A,l,u,v,b,E){if(b-v<=u)return;const k=v+b>>1;zp(A,l,k,v,b,E),gm(A,l,u,v,k-1,1-E),gm(A,l,u,k+1,b,1-E)}function zp(A,l,u,v,b,E){for(;b>v;){if(b-v>600){const q=b-v+1,J=u-v+1,oe=Math.log(q),ve=.5*Math.exp(2*oe/3),Be=.5*Math.sqrt(oe*ve*(q-ve)/q)*(J-q/2<0?-1:1);zp(A,l,u,Math.max(v,Math.floor(u-J*ve/q+Be)),Math.min(b,Math.floor(u+(q-J)*ve/q+Be)),E)}const k=l[2*u+E];let P=v,Q=b;for($f(A,l,v,u),l[2*b+E]>k&&$f(A,l,v,b);P<Q;){for($f(A,l,P,Q),P++,Q--;l[2*P+E]<k;)P++;for(;l[2*Q+E]>k;)Q--}l[2*v+E]===k?$f(A,l,v,Q):(Q++,$f(A,l,Q,b)),Q<=u&&(v=Q+1),u<=Q&&(b=Q-1)}}function $f(A,l,u,v){Hp(A,u,v),Hp(l,2*u,2*v),Hp(l,2*u+1,2*v+1)}function Hp(A,l,u){const v=A[l];A[l]=A[u],A[u]=v}function Vp(A,l,u,v){const b=A-u,E=l-v;return b*b+E*E}var vm;c.cx=void 0,(vm=c.cx||(c.cx={})).create="create",vm.load="load",vm.fullLoad="fullLoad";let Gp=null,qp=[];const xm=1e3/60,Xf="loadTime",l1="fullLoadTime",ib={mark(A){performance.mark(A)},frame(A){const l=A;Gp!=null&&qp.push(l-Gp),Gp=l},clearMetrics(){Gp=null,qp=[],performance.clearMeasures(Xf),performance.clearMeasures(l1);for(const A in c.cx)performance.clearMarks(c.cx[A])},getPerformanceMetrics(){performance.measure(Xf,c.cx.create,c.cx.load),performance.measure(l1,c.cx.create,c.cx.fullLoad);const A=performance.getEntriesByName(Xf)[0].duration,l=performance.getEntriesByName(l1)[0].duration,u=qp.length,v=1/(qp.reduce((E,k)=>E+k,0)/u/1e3),b=qp.filter(E=>E>xm).reduce((E,k)=>E+(k-xm)/xm,0);return{loadTime:A,fullLoadTime:l,fps:v,percentDroppedFrames:b/(u+b)*100,totalFrames:u}}};c.$=Me,c.A=G,c.B=function([A,l,u]){return l+=90,l*=Math.PI/180,u*=Math.PI/180,{x:A*Math.cos(l)*Math.sin(u),y:A*Math.sin(l)*Math.sin(u),z:A*Math.cos(u)}},c.C=qr,c.D=Tr,c.E=kr,c.F=Li,c.G=Ae,c.H=Sr,c.I=J0,c.J=class{constructor(A,l){this.target=A,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Fx(()=>this.process()),this.subscription=wi(this.target,"message",u=>this.receive(u),!1),this.globalScope=Et(self)?A:window}registerMessageHandler(A,l){this.messageHandlers[A]=l}sendAsync(A,l){return new Promise((u,v)=>{const b=Math.round(1e18*Math.random()).toString(36).substring(0,10),E=l?wi(l.signal,"abort",()=>{E?.unsubscribe(),delete this.resolveRejects[b];const Q={id:b,type:"<cancel>",origin:location.origin,targetMapId:A.targetMapId,sourceMapId:this.mapId};this.target.postMessage(Q)},kx):null;this.resolveRejects[b]={resolve:Q=>{E?.unsubscribe(),u(Q)},reject:Q=>{E?.unsubscribe(),v(Q)}};const k=[],P=Object.assign(Object.assign({},A),{id:b,sourceMapId:this.mapId,origin:location.origin,data:Ot(A.data,k)});this.target.postMessage(P,{transfer:k})})}receive(A){const l=A.data,u=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[u];const v=this.abortControllers[u];return delete this.abortControllers[u],void(v&&v.abort())}if(Et(self)||l.mustQueue)return this.tasks[u]=l,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,l)}}process(){if(this.taskQueue.length===0)return;const A=this.taskQueue.shift(),l=this.tasks[A];delete this.tasks[A],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(A,l)}processTask(A,l){return s(this,void 0,void 0,function*(){if(l.type==="<response>"){const b=this.resolveRejects[A];return delete this.resolveRejects[A],b?void(l.error?b.reject(Kt(l.error)):b.resolve(Kt(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(A,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=Kt(l.data),v=new AbortController;this.abortControllers[A]=v;try{const b=yield this.messageHandlers[l.type](l.sourceMapId,u,v);this.completeTask(A,null,b)}catch(b){this.completeTask(A,b)}})}completeTask(A,l,u){const v=[];delete this.abortControllers[A];const b={id:A,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?Ot(l):null,data:Ot(u,v)};this.target.postMessage(b,{transfer:v})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.K=je,c.L=function(){var A=new G(16);return G!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},c.M=function(A,l,u){var v,b,E,k,P,Q,q,J,oe,ve,Be,Fe,Oe=u[0],Ze=u[1],ht=u[2];return l===A?(A[12]=l[0]*Oe+l[4]*Ze+l[8]*ht+l[12],A[13]=l[1]*Oe+l[5]*Ze+l[9]*ht+l[13],A[14]=l[2]*Oe+l[6]*Ze+l[10]*ht+l[14],A[15]=l[3]*Oe+l[7]*Ze+l[11]*ht+l[15]):(b=l[1],E=l[2],k=l[3],P=l[4],Q=l[5],q=l[6],J=l[7],oe=l[8],ve=l[9],Be=l[10],Fe=l[11],A[0]=v=l[0],A[1]=b,A[2]=E,A[3]=k,A[4]=P,A[5]=Q,A[6]=q,A[7]=J,A[8]=oe,A[9]=ve,A[10]=Be,A[11]=Fe,A[12]=v*Oe+P*Ze+oe*ht+l[12],A[13]=b*Oe+Q*Ze+ve*ht+l[13],A[14]=E*Oe+q*Ze+Be*ht+l[14],A[15]=k*Oe+J*Ze+Fe*ht+l[15]),A},c.N=function(A,l,u){var v=u[0],b=u[1],E=u[2];return A[0]=l[0]*v,A[1]=l[1]*v,A[2]=l[2]*v,A[3]=l[3]*v,A[4]=l[4]*b,A[5]=l[5]*b,A[6]=l[6]*b,A[7]=l[7]*b,A[8]=l[8]*E,A[9]=l[9]*E,A[10]=l[10]*E,A[11]=l[11]*E,A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15],A},c.O=function(A,l,u){var v=l[0],b=l[1],E=l[2],k=l[3],P=l[4],Q=l[5],q=l[6],J=l[7],oe=l[8],ve=l[9],Be=l[10],Fe=l[11],Oe=l[12],Ze=l[13],ht=l[14],Ut=l[15],_t=u[0],Ct=u[1],Jt=u[2],nr=u[3];return A[0]=_t*v+Ct*P+Jt*oe+nr*Oe,A[1]=_t*b+Ct*Q+Jt*ve+nr*Ze,A[2]=_t*E+Ct*q+Jt*Be+nr*ht,A[3]=_t*k+Ct*J+Jt*Fe+nr*Ut,A[4]=(_t=u[4])*v+(Ct=u[5])*P+(Jt=u[6])*oe+(nr=u[7])*Oe,A[5]=_t*b+Ct*Q+Jt*ve+nr*Ze,A[6]=_t*E+Ct*q+Jt*Be+nr*ht,A[7]=_t*k+Ct*J+Jt*Fe+nr*Ut,A[8]=(_t=u[8])*v+(Ct=u[9])*P+(Jt=u[10])*oe+(nr=u[11])*Oe,A[9]=_t*b+Ct*Q+Jt*ve+nr*Ze,A[10]=_t*E+Ct*q+Jt*Be+nr*ht,A[11]=_t*k+Ct*J+Jt*Fe+nr*Ut,A[12]=(_t=u[12])*v+(Ct=u[13])*P+(Jt=u[14])*oe+(nr=u[15])*Oe,A[13]=_t*b+Ct*Q+Jt*ve+nr*Ze,A[14]=_t*E+Ct*q+Jt*Be+nr*ht,A[15]=_t*k+Ct*J+Jt*Fe+nr*Ut,A},c.P=d,c.Q=function(A,l){const u={};for(let v=0;v<l.length;v++){const b=l[v];b in A&&(u[b]=A[b])}return u},c.R=yo,c.S=Pn,c.T=Pf,c.U=cm,c.V=Nx,c.W=R,c.X=D,c.Y=Hr,c.Z=Rc,c._=s,c.a=ye,c.a$=de,c.a0=function(A,l){var u,v,b,E,k;if(!A)return l??{};if(!l)return A;let P=Object.assign({},A);if(l.removeAll&&(P={removeAll:!0}),l.remove){const Q=new Set(l.remove);P.add&&(P.add=P.add.filter(J=>!Q.has(J.id))),P.update&&(P.update=P.update.filter(J=>!Q.has(J.id)));const q=new Set(((u=A.add)!==null&&u!==void 0?u:[]).map(J=>J.id));l.remove=l.remove.filter(J=>!q.has(J))}if(l.remove){const Q=new Set(P.remove?P.remove.concat(l.remove):l.remove);P.remove=Array.from(Q.values())}if(l.add){const Q=P.add?P.add.concat(l.add):l.add,q=new Map(Q.map(J=>[J.id,J]));P.add=Array.from(q.values())}if(l.update){const Q=new Map((v=P.update)===null||v===void 0?void 0:v.map(q=>[q.id,q]));for(const q of l.update){const J=(b=Q.get(q.id))!==null&&b!==void 0?b:{id:q.id};q.newGeometry&&(J.newGeometry=q.newGeometry),q.addOrUpdateProperties&&(J.addOrUpdateProperties=((E=J.addOrUpdateProperties)!==null&&E!==void 0?E:[]).concat(q.addOrUpdateProperties)),q.removeProperties&&(J.removeProperties=((k=J.removeProperties)!==null&&k!==void 0?k:[]).concat(q.removeProperties)),q.removeAllProperties&&(J.removeAllProperties=!0),Q.set(q.id,J)}P.update=Array.from(Q.values())}return P.remove&&P.add&&(P.remove=P.remove.filter(Q=>P.add.findIndex(q=>q.id===Q)===-1)),P},c.a1=Gd,c.a2=Gf,c.a3=25,c.a4=Op,c.a5=A=>{const l=window.document.createElement("video");return l.muted=!0,new Promise(u=>{l.onloadstart=()=>{u(l)};for(const v of A){const b=window.document.createElement("source");vt(v)||(l.crossOrigin="Anonymous"),b.src=v,l.appendChild(b)}})},c.a6=hr,c.a7=function(){return gt++},c.a8=me,c.a9=TA,c.aA=function(A){let l=1/0,u=1/0,v=-1/0,b=-1/0;for(const E of A)l=Math.min(l,E.x),u=Math.min(u,E.y),v=Math.max(v,E.x),b=Math.max(b,E.y);return[l,u,v,b]},c.aB=za,c.aC=De,c.aD=function(A,l,u,v,b=!1){if(!u[0]&&!u[1])return[0,0];const E=b?v==="map"?-A.bearingInRadians:0:v==="viewport"?A.bearingInRadians:0;if(E){const k=Math.sin(E),P=Math.cos(E);u=[u[0]*P-u[1]*k,u[0]*k+u[1]*P]}return[b?u[0]:De(l,u[0],A.zoom),b?u[1]:De(l,u[1],A.zoom)]},c.aF=Jg,c.aG=mm,c.aH=zf,c.aI=Wf,c.aJ=un,c.aK=gu,c.aL=St,c.aM=tn,c.aN=Nn,c.aO=lt,c.aP=Zr,c.aQ=r1,c.aR=ue,c.aS=se,c.aT=function(A){var l=new G(3);return l[0]=A[0],l[1]=A[1],l[2]=A[2],l},c.aU=function(A,l,u){return A[0]=l[0]-u[0],A[1]=l[1]-u[1],A[2]=l[2]-u[2],A},c.aV=function(A,l){var u=l[0],v=l[1],b=l[2],E=u*u+v*v+b*b;return E>0&&(E=1/Math.sqrt(E)),A[0]=l[0]*E,A[1]=l[1]*E,A[2]=l[2]*E,A},c.aW=re,c.aX=function(A,l){return A[0]*l[0]+A[1]*l[1]+A[2]*l[2]},c.aY=function(A,l,u){return A[0]=l[0]*u[0],A[1]=l[1]*u[1],A[2]=l[2]*u[2],A[3]=l[3]*u[3],A},c.aZ=ae,c.a_=function(A,l,u){const v=l[0]*u[0]+l[1]*u[1]+l[2]*u[2];return v===0?null:(-(A[0]*u[0]+A[1]*u[1]+A[2]*u[2])-u[3])/v},c.aa=du,c.ab=rf,c.ac=FA,c.ad=function(A){const l={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,v,b,E)=>{const k=b||E;return l[v]=!k||k.toLowerCase(),""}),l["max-age"]){const u=parseInt(l["max-age"],10);isNaN(u)?delete l["max-age"]:l["max-age"]=u}return l},c.ae=Bi,c.af=function(A){return Math.pow(2,A)},c.ag=X,c.ah=Le,c.ai=85.051129,c.aj=um,c.ak=function(A){return Math.log(A)/Math.LN2},c.al=function(A){var l=A[0],u=A[1];return l*l+u*u},c.am=function(A){if(!A.length)return new Set;const l=Math.max(...A.map(Q=>Q.canonical.z));let u=1/0,v=-1/0,b=1/0,E=-1/0;const k=[];for(const Q of A){const{x:q,y:J,z:oe}=Q.canonical,ve=Math.pow(2,l-oe),Be=q*ve,Fe=J*ve;k.push({id:Q,x:Be,y:Fe}),Be<u&&(u=Be),Be>v&&(v=Be),Fe<b&&(b=Fe),Fe>E&&(E=Fe)}const P=new Set;for(const Q of k)Q.x!==u&&Q.x!==v&&Q.y!==b&&Q.y!==E||P.add(Q.id);return P},c.an=function(A,l){let u=0,v=0;if(A.kind==="constant")v=A.layoutSize;else if(A.kind!=="source"){const{interpolationType:b,minZoom:E,maxZoom:k}=A,P=b?Le(lr.interpolationFactor(b,l,E,k),0,1):0;A.kind==="camera"?v=qr.number(A.minSize,A.maxSize,P):u=P}return{uSizeT:u,uSize:v}},c.ap=function(A,{uSize:l,uSizeT:u},{lowerSize:v,upperSize:b}){return A.kind==="source"?v/EA:A.kind==="composite"?qr.number(v/EA,b/EA,u):l},c.aq=function(A,l){var u=l[0],v=l[1],b=l[2],E=l[3],k=l[4],P=l[5],Q=l[6],q=l[7],J=l[8],oe=l[9],ve=l[10],Be=l[11],Fe=l[12],Oe=l[13],Ze=l[14],ht=l[15],Ut=u*P-v*k,_t=u*Q-b*k,Ct=u*q-E*k,Jt=v*Q-b*P,nr=v*q-E*P,gr=b*q-E*Q,Lr=J*Oe-oe*Fe,Nr=J*Ze-ve*Fe,Pr=J*ht-Be*Fe,Jr=oe*Ze-ve*Oe,Rr=oe*ht-Be*Oe,Ur=ve*ht-Be*Ze,fr=Ut*Ur-_t*Rr+Ct*Jr+Jt*Pr-nr*Nr+gr*Lr;return fr?(A[0]=(P*Ur-Q*Rr+q*Jr)*(fr=1/fr),A[1]=(b*Rr-v*Ur-E*Jr)*fr,A[2]=(Oe*gr-Ze*nr+ht*Jt)*fr,A[3]=(ve*nr-oe*gr-Be*Jt)*fr,A[4]=(Q*Pr-k*Ur-q*Nr)*fr,A[5]=(u*Ur-b*Pr+E*Nr)*fr,A[6]=(Ze*Ct-Fe*gr-ht*_t)*fr,A[7]=(J*gr-ve*Ct+Be*_t)*fr,A[8]=(k*Rr-P*Pr+q*Lr)*fr,A[9]=(v*Pr-u*Rr-E*Lr)*fr,A[10]=(Fe*nr-Oe*Ct+ht*Ut)*fr,A[11]=(oe*Ct-J*nr-Be*Ut)*fr,A[12]=(P*Nr-k*Jr-Q*Lr)*fr,A[13]=(u*Jr-v*Nr+b*Lr)*fr,A[14]=(Oe*_t-Fe*Jt-Ze*Ut)*fr,A[15]=(J*Jt-oe*_t+ve*Ut)*fr,A):null},c.ar=Pe,c.as=function(A){var l=A[0],u=A[1];return Math.sqrt(l*l+u*u)},c.at=function(A){return A[0]=0,A[1]=0,A},c.au=function(A,l,u){return A[0]=l[0]*u,A[1]=l[1]*u,A},c.av=e1,c.aw=Ee,c.ax=function(A,l,u,v){const b=l.y-A.y,E=l.x-A.x,k=v.y-u.y,P=v.x-u.x,Q=k*E-P*b;if(Q===0)return null;const q=(P*(A.y-u.y)-k*(A.x-u.x))/Q;return new d(A.x+q*E,A.y+q*b)},c.ay=Mx,c.az=rx,c.b=or,c.b$=class extends to{constructor(A,l){super(A,l),this.current=new Array}set(A){if(A!=this.current){this.current=A;const l=new Float32Array(A);this.gl.uniform1fv(this.location,l)}}},c.b0=function(A,l,u){return A[0]=l[0]*u,A[1]=l[1]*u,A[2]=l[2]*u,A[3]=l[3]*u,A},c.b1=function(A,l){return A[0]*l[0]+A[1]*l[1]+A[2]*l[2]+A[3]},c.b2=Ix,c.b3=qd,c.b4=function(A,l,u,v,b){var E=1/Math.tan(l/2);if(A[0]=E/u,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=E,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,b!=null&&b!==1/0){var k=1/(v-b);A[10]=(b+v)*k,A[14]=2*b*v*k}else A[10]=-1,A[14]=-2*v;return A},c.b5=function(A){var l=new G(16);return l[0]=A[0],l[1]=A[1],l[2]=A[2],l[3]=A[3],l[4]=A[4],l[5]=A[5],l[6]=A[6],l[7]=A[7],l[8]=A[8],l[9]=A[9],l[10]=A[10],l[11]=A[11],l[12]=A[12],l[13]=A[13],l[14]=A[14],l[15]=A[15],l},c.b6=function(A,l,u){var v=Math.sin(u),b=Math.cos(u),E=l[0],k=l[1],P=l[2],Q=l[3],q=l[4],J=l[5],oe=l[6],ve=l[7];return l!==A&&(A[8]=l[8],A[9]=l[9],A[10]=l[10],A[11]=l[11],A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15]),A[0]=E*b+q*v,A[1]=k*b+J*v,A[2]=P*b+oe*v,A[3]=Q*b+ve*v,A[4]=q*b-E*v,A[5]=J*b-k*v,A[6]=oe*b-P*v,A[7]=ve*b-Q*v,A},c.b7=function(A,l,u){var v=Math.sin(u),b=Math.cos(u),E=l[4],k=l[5],P=l[6],Q=l[7],q=l[8],J=l[9],oe=l[10],ve=l[11];return l!==A&&(A[0]=l[0],A[1]=l[1],A[2]=l[2],A[3]=l[3],A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15]),A[4]=E*b+q*v,A[5]=k*b+J*v,A[6]=P*b+oe*v,A[7]=Q*b+ve*v,A[8]=q*b-E*v,A[9]=J*b-k*v,A[10]=oe*b-P*v,A[11]=ve*b-Q*v,A},c.b8=function(){const A=new Float32Array(16);return X(A),A},c.b9=function(){const A=new Float64Array(16);return X(A),A},c.bA=function(A,l){const u=tt(A,360),v=tt(l,360),b=v-u,E=v>u?b-360:b+360;return Math.abs(b)<Math.abs(E)?b:E},c.bB=function(A){return A[0]=0,A[1]=0,A[2]=0,A},c.bC=function(A,l,u,v){const b=Math.sqrt(A*A+l*l),E=Math.sqrt(u*u+v*v);A/=b,l/=b,u/=E,v/=E;const k=Math.acos(A*u+l*v);return-l*u+A*v>0?k:-k},c.bD=function(A,l){const u=tt(A,2*Math.PI),v=tt(l,2*Math.PI);return Math.min(Math.abs(u-v),Math.abs(u-v+2*Math.PI),Math.abs(u-v-2*Math.PI))},c.bE=function(){const A={},l=Bt.$version;for(const u in Bt.$root){const v=Bt.$root[u];if(v.required){let b=null;b=u==="version"?l:v.type==="array"?[]:{},b!=null&&(A[u]=b)}}return A},c.bF=cr,c.bG=At,c.bH=function A(l,u){if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(let v=0;v<l.length;v++)if(!A(l[v],u[v]))return!1;return!0}if(typeof l=="object"&&l!==null&&u!==null){if(typeof u!="object"||Object.keys(l).length!==Object.keys(u).length)return!1;for(const v in l)if(!A(l[v],u[v]))return!1;return!0}return l===u},c.bI=function(A){A=A.slice();const l=Object.create(null);for(let u=0;u<A.length;u++)l[A[u].id]=A[u];for(let u=0;u<A.length;u++)"ref"in A[u]&&(A[u]=Yi(A[u],l[A[u].ref]));return A},c.bJ=function(A,l){if(A.type==="custom")return new Y2(A,l);switch(A.type){case"background":return new Z2(A,l);case"circle":return new sx(A,l);case"color-relief":return new Pg(A,l);case"fill":return new V2(A,l);case"fill-extrusion":return new Hg(A,l);case"heatmap":return new O2(A,l);case"hillshade":return new sf(A,l);case"line":return new Ax(A,l);case"raster":return new vo(A,l);case"symbol":return new Hf(A,l)}},c.bK=A=>A.type==="raster",c.bL=Te,c.bM=function(A,l){if(!A)return[{command:"setStyle",args:[l]}];let u=[];try{if(!jr(A.version,l.version))return[{command:"setStyle",args:[l]}];jr(A.center,l.center)||u.push({command:"setCenter",args:[l.center]}),jr(A.state,l.state)||u.push({command:"setGlobalState",args:[l.state]}),jr(A.centerAltitude,l.centerAltitude)||u.push({command:"setCenterAltitude",args:[l.centerAltitude]}),jr(A.zoom,l.zoom)||u.push({command:"setZoom",args:[l.zoom]}),jr(A.bearing,l.bearing)||u.push({command:"setBearing",args:[l.bearing]}),jr(A.pitch,l.pitch)||u.push({command:"setPitch",args:[l.pitch]}),jr(A.roll,l.roll)||u.push({command:"setRoll",args:[l.roll]}),jr(A.sprite,l.sprite)||u.push({command:"setSprite",args:[l.sprite]}),jr(A.glyphs,l.glyphs)||u.push({command:"setGlyphs",args:[l.glyphs]}),jr(A.transition,l.transition)||u.push({command:"setTransition",args:[l.transition]}),jr(A.light,l.light)||u.push({command:"setLight",args:[l.light]}),jr(A.terrain,l.terrain)||u.push({command:"setTerrain",args:[l.terrain]}),jr(A.sky,l.sky)||u.push({command:"setSky",args:[l.sky]}),jr(A.projection,l.projection)||u.push({command:"setProjection",args:[l.projection]});const v={},b=[];(function(k,P,Q,q){let J;for(J in P=P||{},k=k||{})Object.prototype.hasOwnProperty.call(k,J)&&(Object.prototype.hasOwnProperty.call(P,J)||Yr(J,Q,q));for(J in P)Object.prototype.hasOwnProperty.call(P,J)&&(Object.prototype.hasOwnProperty.call(k,J)?jr(k[J],P[J])||(k[J].type==="geojson"&&P[J].type==="geojson"&&Wi(k,P,J)?Di(Q,{command:"setGeoJSONSourceData",args:[J,P[J].data]}):on(J,P,Q,q)):In(J,P,Q))})(A.sources,l.sources,b,v);const E=[];A.layers&&A.layers.forEach(k=>{"source"in k&&v[k.source]?u.push({command:"removeLayer",args:[k.id]}):E.push(k)}),u=u.concat(b),function(k,P,Q){P=P||[];const q=(k=k||[]).map(ln),J=P.map(ln),oe=k.reduce(gi,{}),ve=P.reduce(gi,{}),Be=q.slice(),Fe=Object.create(null);let Oe,Ze,ht,Ut,_t;for(let Ct=0,Jt=0;Ct<q.length;Ct++)Oe=q[Ct],Object.prototype.hasOwnProperty.call(ve,Oe)?Jt++:(Di(Q,{command:"removeLayer",args:[Oe]}),Be.splice(Be.indexOf(Oe,Jt),1));for(let Ct=0,Jt=0;Ct<J.length;Ct++)Oe=J[J.length-1-Ct],Be[Be.length-1-Ct]!==Oe&&(Object.prototype.hasOwnProperty.call(oe,Oe)?(Di(Q,{command:"removeLayer",args:[Oe]}),Be.splice(Be.lastIndexOf(Oe,Be.length-Jt),1)):Jt++,Ut=Be[Be.length-Ct],Di(Q,{command:"addLayer",args:[ve[Oe],Ut]}),Be.splice(Be.length-Ct,0,Oe),Fe[Oe]=!0);for(let Ct=0;Ct<J.length;Ct++)if(Oe=J[Ct],Ze=oe[Oe],ht=ve[Oe],!Fe[Oe]&&!jr(Ze,ht))if(jr(Ze.source,ht.source)&&jr(Ze["source-layer"],ht["source-layer"])&&jr(Ze.type,ht.type)){for(_t in mi(Ze.layout,ht.layout,Q,Oe,null,"setLayoutProperty"),mi(Ze.paint,ht.paint,Q,Oe,null,"setPaintProperty"),jr(Ze.filter,ht.filter)||Di(Q,{command:"setFilter",args:[Oe,ht.filter]}),jr(Ze.minzoom,ht.minzoom)&&jr(Ze.maxzoom,ht.maxzoom)||Di(Q,{command:"setLayerZoomRange",args:[Oe,ht.minzoom,ht.maxzoom]}),Ze)Object.prototype.hasOwnProperty.call(Ze,_t)&&_t!=="layout"&&_t!=="paint"&&_t!=="filter"&&_t!=="metadata"&&_t!=="minzoom"&&_t!=="maxzoom"&&(_t.indexOf("paint.")===0?mi(Ze[_t],ht[_t],Q,Oe,_t.slice(6),"setPaintProperty"):jr(Ze[_t],ht[_t])||Di(Q,{command:"setLayerProperty",args:[Oe,_t,ht[_t]]}));for(_t in ht)Object.prototype.hasOwnProperty.call(ht,_t)&&!Object.prototype.hasOwnProperty.call(Ze,_t)&&_t!=="layout"&&_t!=="paint"&&_t!=="filter"&&_t!=="metadata"&&_t!=="minzoom"&&_t!=="maxzoom"&&(_t.indexOf("paint.")===0?mi(Ze[_t],ht[_t],Q,Oe,_t.slice(6),"setPaintProperty"):jr(Ze[_t],ht[_t])||Di(Q,{command:"setLayerProperty",args:[Oe,_t,ht[_t]]}))}else Di(Q,{command:"removeLayer",args:[Oe]}),Ut=Be[Be.lastIndexOf(Oe)+1],Di(Q,{command:"addLayer",args:[ht,Ut]})}(E,l.layers,u)}catch(v){console.warn("Unable to compute style diff:",v),u=[{command:"setStyle",args:[l]}]}return u},c.bN=function(A){const l=[],u=A.id;return u===void 0&&l.push({message:`layers.${u}: missing required property "id"`}),A.render===void 0&&l.push({message:`layers.${u}: missing required method "render"`}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&l.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),l},c.bO=dt,c.bP=qt,c.bQ=class extends to{constructor(A,l){super(A,l),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1i(this.location,A))}},c.bR=sa,c.bS=class extends to{constructor(A,l){super(A,l),this.current=Ts}set(A){if(A[12]!==this.current[12]||A[0]!==this.current[0])return this.current=A,void this.gl.uniformMatrix4fv(this.location,!1,A);for(let l=1;l<16;l++)if(A[l]!==this.current[l]){this.current=A,this.gl.uniformMatrix4fv(this.location,!1,A);break}}},c.bT=Wn,c.bU=class extends to{constructor(A,l){super(A,l),this.current=[0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]||(this.current=A,this.gl.uniform3f(this.location,A[0],A[1],A[2]))}},c.bV=class extends to{constructor(A,l){super(A,l),this.current=[0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]||(this.current=A,this.gl.uniform2f(this.location,A[0],A[1]))}},c.bW=Z,c.bX=function(A,l){var u=Math.sin(l),v=Math.cos(l);return A[0]=v,A[1]=u,A[2]=0,A[3]=-u,A[4]=v,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},c.bY=function(A,l,u){var v=l[0],b=l[1],E=l[2];return A[0]=v*u[0]+b*u[3]+E*u[6],A[1]=v*u[1]+b*u[4]+E*u[7],A[2]=v*u[2]+b*u[5]+E*u[8],A},c.bZ=function(A,l,u,v,b,E,k){var P=1/(l-u),Q=1/(v-b),q=1/(E-k);return A[0]=-2*P,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*Q,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*q,A[11]=0,A[12]=(l+u)*P,A[13]=(b+v)*Q,A[14]=(k+E)*q,A[15]=1,A},c.b_=class extends to{constructor(A,l){super(A,l),this.current=new Array}set(A){if(A!=this.current){this.current=A;const l=new Float32Array(4*A.length);for(let u=0;u<A.length;u++)l[4*u]=A[u].r,l[4*u+1]=A[u].g,l[4*u+2]=A[u].b,l[4*u+3]=A[u].a;this.gl.uniform4fv(this.location,l)}}},c.ba=function(){return new Float64Array(16)},c.bb=function(A,l,u){const v=new Float64Array(4);return ge(v,A,l-90,u),v},c.bc=function(A,l,u,v){var b,E,k,P,Q,q=l[0],J=l[1],oe=l[2],ve=l[3],Be=u[0],Fe=u[1],Oe=u[2],Ze=u[3];return(E=q*Be+J*Fe+oe*Oe+ve*Ze)<0&&(E=-E,Be=-Be,Fe=-Fe,Oe=-Oe,Ze=-Ze),1-E>V?(b=Math.acos(E),k=Math.sin(b),P=Math.sin((1-v)*b)/k,Q=Math.sin(v*b)/k):(P=1-v,Q=v),A[0]=P*q+Q*Be,A[1]=P*J+Q*Fe,A[2]=P*oe+Q*Oe,A[3]=P*ve+Q*Ze,A},c.bd=function(A){const l=new Float64Array(9);var u,v,b,E,k,P,Q,q,J,oe,ve,Be,Fe,Oe,Ze,ht,Ut,_t;oe=(b=(v=A)[0])*(Q=b+b),ve=(E=v[1])*Q,Fe=(k=v[2])*Q,Oe=k*(q=E+E),ht=(P=v[3])*Q,Ut=P*q,_t=P*(J=k+k),(u=l)[0]=1-(Be=E*q)-(Ze=k*J),u[3]=ve-_t,u[6]=Fe+Ut,u[1]=ve+_t,u[4]=1-oe-Ze,u[7]=Oe-ht,u[2]=Fe-Ut,u[5]=Oe+ht,u[8]=1-oe-Be;const Ct=Zr(-Math.asin(Le(l[2],-1,1)));let Jt,nr;return Math.hypot(l[5],l[8])<.001?(Jt=0,nr=-Zr(Math.atan2(l[3],l[4]))):(Jt=Zr(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),nr=Zr(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:Jt,pitch:Ct+90,bearing:nr}},c.be=function(A,l){return A.roll==l.roll&&A.pitch==l.pitch&&A.bearing==l.bearing},c.bf=Ti,c.bg=Xs,c.bh=Df,c.bi=zh,c.bj=of,c.bk=ee,c.bl=fe,c.bm=_a,c.bn=function(A,l,u,v,b){return ee(v,b,Le((A-l)/(u-l),0,1))},c.bo=tt,c.bp=function(){return new Float64Array(3)},c.bq=function(A,l,u,v){return A[0]=l[0]+u[0]*v,A[1]=l[1]+u[1]*v,A[2]=l[2]+u[2]*v,A},c.br=ge,c.bs=function(A,l,u){var v=u[0],b=u[1],E=u[2],k=u[3],P=l[0],Q=l[1],q=l[2],J=b*q-E*Q,oe=E*P-v*q,ve=v*Q-b*P;return A[0]=P+k*(J+=J)+b*(ve+=ve)-E*(oe+=oe),A[1]=Q+k*oe+E*J-v*ve,A[2]=q+k*ve+v*oe-b*J,A},c.bt=function(A,l,u){const v=(b=[A[0],A[1],A[2],l[0],l[1],l[2],u[0],u[1],u[2]])[0]*((J=b[8])*(k=b[4])-(P=b[5])*(q=b[7]))+b[1]*(-J*(E=b[3])+P*(Q=b[6]))+b[2]*(q*E-k*Q);var b,E,k,P,Q,q,J;if(v===0)return null;const oe=re([],[l[0],l[1],l[2]],[u[0],u[1],u[2]]),ve=re([],[u[0],u[1],u[2]],[A[0],A[1],A[2]]),Be=re([],[A[0],A[1],A[2]],[l[0],l[1],l[2]]),Fe=ue([],oe,-A[3]);return se(Fe,Fe,ue([],ve,-l[3])),se(Fe,Fe,ue([],Be,-u[3])),ue(Fe,Fe,1/v),Fe},c.bu=Hd,c.bv=function(){return new Float64Array(4)},c.bw=function(A,l,u,v){var b=[],E=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],E[0]=b[0]*Math.cos(v)-b[1]*Math.sin(v),E[1]=b[0]*Math.sin(v)+b[1]*Math.cos(v),E[2]=b[2],A[0]=E[0]+u[0],A[1]=E[1]+u[1],A[2]=E[2]+u[2],A},c.bx=function(A,l,u,v){var b=[],E=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],E[0]=b[0],E[1]=b[1]*Math.cos(v)-b[2]*Math.sin(v),E[2]=b[1]*Math.sin(v)+b[2]*Math.cos(v),A[0]=E[0]+u[0],A[1]=E[1]+u[1],A[2]=E[2]+u[2],A},c.by=function(A,l,u,v){var b=[],E=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],E[0]=b[2]*Math.sin(v)+b[0]*Math.cos(v),E[1]=b[1],E[2]=b[2]*Math.cos(v)-b[0]*Math.sin(v),A[0]=E[0]+u[0],A[1]=E[1]+u[1],A[2]=E[2]+u[2],A},c.bz=function(A,l,u){var v=Math.sin(u),b=Math.cos(u),E=l[0],k=l[1],P=l[2],Q=l[3],q=l[8],J=l[9],oe=l[10],ve=l[11];return l!==A&&(A[4]=l[4],A[5]=l[5],A[6]=l[6],A[7]=l[7],A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15]),A[0]=E*b-q*v,A[1]=k*b-J*v,A[2]=P*b-oe*v,A[3]=Q*b-ve*v,A[8]=E*v+q*b,A[9]=k*v+J*b,A[10]=P*v+oe*b,A[11]=Q*v+ve*b,A},c.c=xe,c.c0=class extends lc{},c.c1=W0,c.c2=class extends o{},c.c3=Ng,c.c4=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},c.c5=aa,c.c6=function(A,l,u){var v=l[0],b=l[1],E=l[2],k=u[3]*v+u[7]*b+u[11]*E+u[15];return A[0]=(u[0]*v+u[4]*b+u[8]*E+u[12])/(k=k||1),A[1]=(u[1]*v+u[5]*b+u[9]*E+u[13])/k,A[2]=(u[2]*v+u[6]*b+u[10]*E+u[14])/k,A},c.c7=class extends Us{},c.c8=class extends H{},c.c9=function(A,l){return A[0]===l[0]&&A[1]===l[1]&&A[2]===l[2]&&A[3]===l[3]&&A[4]===l[4]&&A[5]===l[5]&&A[6]===l[6]&&A[7]===l[7]&&A[8]===l[8]&&A[9]===l[9]&&A[10]===l[10]&&A[11]===l[11]&&A[12]===l[12]&&A[13]===l[13]&&A[14]===l[14]&&A[15]===l[15]},c.cA=function(A,l){ye.REGISTERED_PROTOCOLS[A]=l},c.cB=function(A){delete ye.REGISTERED_PROTOCOLS[A]},c.cC=function(A,l){const u={};for(let b=0;b<A.length;b++){const E=l&&l[A[b].id]||Ll(A[b]);l&&(l[A[b].id]=E);let k=u[E];k||(k=u[E]=[]),k.push(A[b])}const v=[];for(const b in u)v.push(u[b]);return v},c.cD=Ge,c.cE=Lx,c.cF=i1,c.cG=ms,c.cH=function(A){A.bucket.createArrays(),A.bucket.tilePixelRatio=Me/(512*A.bucket.overscaling),A.bucket.compareText={},A.bucket.iconsNeedLinear=!1;const l=A.bucket.layers[0],u=l.layout,v=l._unevaluatedLayout._values,b={layoutIconSize:v["icon-size"].possiblyEvaluate(new Li(A.bucket.zoom+1),A.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Li(A.bucket.zoom+1),A.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Li(18))};if(A.bucket.textSizeData.kind==="composite"){const{minZoom:q,maxZoom:J}=A.bucket.textSizeData;b.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Li(q),A.canonical),v["text-size"].possiblyEvaluate(new Li(J),A.canonical)]}if(A.bucket.iconSizeData.kind==="composite"){const{minZoom:q,maxZoom:J}=A.bucket.iconSizeData;b.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Li(q),A.canonical),v["icon-size"].possiblyEvaluate(new Li(J),A.canonical)]}const E=u.get("text-line-height")*za,k=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",P=u.get("text-keep-upright"),Q=u.get("text-size");for(const q of A.bucket.features){const J=u.get("text-font").evaluate(q,{},A.canonical).join(","),oe=Q.evaluate(q,{},A.canonical),ve=b.layoutTextSize.evaluate(q,{},A.canonical),Be=b.layoutIconSize.evaluate(q,{},A.canonical),Fe={horizontal:{},vertical:void 0},Oe=q.text;let Ze,ht=[0,0];if(Oe){const Ct=Oe.toString(),Jt=u.get("text-letter-spacing").evaluate(q,{},A.canonical)*za,nr=dr(Ct)?Jt:0,gr=u.get("text-anchor").evaluate(q,{},A.canonical),Lr=jx(l,q,A.canonical);if(!Lr){const Rr=u.get("text-radial-offset").evaluate(q,{},A.canonical);ht=Rr?Ux(gr,[Rr*za,a1]):u.get("text-offset").evaluate(q,{},A.canonical).map(Ur=>Ur*za)}let Nr=k?"center":u.get("text-justify").evaluate(q,{},A.canonical);const Pr=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(q,{},A.canonical)*za:1/0,Jr=()=>{A.bucket.allowVerticalPlacement&&Ar(Ct)&&(Fe.vertical=em(Oe,A.glyphMap,A.glyphPositions,A.imagePositions,J,Pr,E,gr,"left",nr,ht,c.ao.vertical,!0,ve,oe))};if(!k&&Lr){const Rr=new Set;if(Nr==="auto")for(let fr=0;fr<Lr.values.length;fr+=2)Rr.add(mm(Lr.values[fr]));else Rr.add(Nr);let Ur=!1;for(const fr of Rr)if(!Fe.horizontal[fr])if(Ur)Fe.horizontal[fr]=Fe.horizontal[0];else{const Si=em(Oe,A.glyphMap,A.glyphPositions,A.imagePositions,J,Pr,E,"center",fr,nr,ht,c.ao.horizontal,!1,ve,oe);Si&&(Fe.horizontal[fr]=Si,Ur=Si.positionedLines.length===1)}Jr()}else{Nr==="auto"&&(Nr=mm(gr));const Rr=em(Oe,A.glyphMap,A.glyphPositions,A.imagePositions,J,Pr,E,gr,Nr,nr,ht,c.ao.horizontal,!1,ve,oe);Rr&&(Fe.horizontal[Nr]=Rr),Jr(),Ar(Ct)&&k&&P&&(Fe.vertical=em(Oe,A.glyphMap,A.glyphPositions,A.imagePositions,J,Pr,E,gr,Nr,nr,ht,c.ao.vertical,!1,ve,oe))}}let Ut=!1;if(q.icon&&q.icon.name){const Ct=A.imageMap[q.icon.name];Ct&&(Ze=Xg(A.imagePositions[q.icon.name],u.get("icon-offset").evaluate(q,{},A.canonical),u.get("icon-anchor").evaluate(q,{},A.canonical)),Ut=!!Ct.sdf,A.bucket.sdfIcons===void 0?A.bucket.sdfIcons=Ut:A.bucket.sdfIcons!==Ut&&kt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ct.pixelRatio!==A.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(A.bucket.iconsNeedLinear=!0))}const _t=o1(Fe.horizontal)||Fe.vertical;A.bucket.iconsInText=!!_t&&_t.iconsInText,(_t||Ze)&&$d(A.bucket,q,Fe,Ze,A.imageMap,b,ve,Be,ht,Ut,A.canonical,A.subdivisionGranularity)}A.showCollisionBoxes&&A.bucket.generateCollisionDebugBuffers()},c.cI=V0,c.cJ=CA,c.cK=Pp,c.cL=G0,c.cM=Dp,c.cN=class{constructor(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let A=performance.getEntriesByName(this._marks.measure);return A.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),A=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),A}},c.cO=function(A,l,u,v,b){return s(this,void 0,void 0,function*(){if(D())try{return yield Hr(A,l,u,v,b)}catch{}return function(E,k,P,Q,q){const J=E.width,oe=E.height;ti&&Gr||(ti=new OffscreenCanvas(J,oe),Gr=ti.getContext("2d",{willReadFrequently:!0})),ti.width=J,ti.height=oe,Gr.drawImage(E,0,0,J,oe);const ve=Gr.getImageData(k,P,Q,q);return Gr.clearRect(0,0,J,oe),ve.data}(A,l,u,v,b)})},c.cP=bh,c.cQ=g,c.cR=wA,c.cS=gn,c.cT=fu,c.cU=function(A,l){const u=new Map;if(A!=null)if(A.type==="Feature")u.set(Kd(A,l),A);else for(const v of A.features)u.set(Kd(v,l),v);return u},c.cV=function(A,l){if(A==null)return!0;if(A.type==="Feature")return Kd(A,l)!=null;if(A.type==="FeatureCollection"){const u=new Set;for(const v of A.features){const b=Kd(v,l);if(b==null||u.has(b))return!1;u.add(b)}return!0}return!1},c.cW=function(A,l,u){var v,b,E,k;if(l.removeAll&&A.clear(),l.remove)for(const P of l.remove)A.delete(P);if(l.add)for(const P of l.add){const Q=Kd(P,u);Q!=null&&A.set(Q,P)}if(l.update)for(const P of l.update){let Q=A.get(P.id);if(Q==null)continue;const q=!P.removeAllProperties&&(((v=P.removeProperties)===null||v===void 0?void 0:v.length)>0||((b=P.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0);if((P.newGeometry||P.removeAllProperties||q)&&(Q=Object.assign({},Q),A.set(P.id,Q),q&&(Q.properties=Object.assign({},Q.properties))),P.newGeometry&&(Q.geometry=P.newGeometry),P.removeAllProperties)Q.properties={};else if(((E=P.removeProperties)===null||E===void 0?void 0:E.length)>0)for(const J of P.removeProperties)Object.prototype.hasOwnProperty.call(Q.properties,J)&&delete Q.properties[J];if(((k=P.addOrUpdateProperties)===null||k===void 0?void 0:k.length)>0)for(const{key:J,value:oe}of P.addOrUpdateProperties)Q.properties[J]=oe}},c.cX=Or,c.ca=function(A,l){var u=A[0],v=A[1],b=A[2],E=A[3],k=A[4],P=A[5],Q=A[6],q=A[7],J=A[8],oe=A[9],ve=A[10],Be=A[11],Fe=A[12],Oe=A[13],Ze=A[14],ht=A[15],Ut=l[0],_t=l[1],Ct=l[2],Jt=l[3],nr=l[4],gr=l[5],Lr=l[6],Nr=l[7],Pr=l[8],Jr=l[9],Rr=l[10],Ur=l[11],fr=l[12],Si=l[13],Pi=l[14],hi=l[15];return Math.abs(u-Ut)<=V*Math.max(1,Math.abs(u),Math.abs(Ut))&&Math.abs(v-_t)<=V*Math.max(1,Math.abs(v),Math.abs(_t))&&Math.abs(b-Ct)<=V*Math.max(1,Math.abs(b),Math.abs(Ct))&&Math.abs(E-Jt)<=V*Math.max(1,Math.abs(E),Math.abs(Jt))&&Math.abs(k-nr)<=V*Math.max(1,Math.abs(k),Math.abs(nr))&&Math.abs(P-gr)<=V*Math.max(1,Math.abs(P),Math.abs(gr))&&Math.abs(Q-Lr)<=V*Math.max(1,Math.abs(Q),Math.abs(Lr))&&Math.abs(q-Nr)<=V*Math.max(1,Math.abs(q),Math.abs(Nr))&&Math.abs(J-Pr)<=V*Math.max(1,Math.abs(J),Math.abs(Pr))&&Math.abs(oe-Jr)<=V*Math.max(1,Math.abs(oe),Math.abs(Jr))&&Math.abs(ve-Rr)<=V*Math.max(1,Math.abs(ve),Math.abs(Rr))&&Math.abs(Be-Ur)<=V*Math.max(1,Math.abs(Be),Math.abs(Ur))&&Math.abs(Fe-fr)<=V*Math.max(1,Math.abs(Fe),Math.abs(fr))&&Math.abs(Oe-Si)<=V*Math.max(1,Math.abs(Oe),Math.abs(Si))&&Math.abs(Ze-Pi)<=V*Math.max(1,Math.abs(Ze),Math.abs(Pi))&&Math.abs(ht-hi)<=V*Math.max(1,Math.abs(ht),Math.abs(hi))},c.cb=function(A,l){return A[0]=l[0],A[1]=l[1],A[2]=l[2],A[3]=l[3],A[4]=l[4],A[5]=l[5],A[6]=l[6],A[7]=l[7],A[8]=l[8],A[9]=l[9],A[10]=l[10],A[11]=l[11],A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15],A},c.cc=A=>A.type==="symbol",c.cd=A=>A.type==="circle",c.ce=A=>A.type==="heatmap",c.cf=A=>A.type==="line",c.cg=A=>A.type==="fill",c.ch=A=>A.type==="fill-extrusion",c.ci=A=>A.type==="hillshade",c.cj=A=>A.type==="color-relief",c.ck=A=>A.type==="background",c.cl=A=>A.type==="custom",c.cm=pe,c.cn=function(A,l,u){const v=Ye(l.x-u.x,l.y-u.y),b=Ye(A.x-u.x,A.y-u.y);var E,k;return Zr(Math.atan2(v[0]*b[1]-v[1]*b[0],(E=v)[0]*(k=b)[0]+E[1]*k[1]))},c.co=we,c.cp=function(A,l){return $r[l]&&(A instanceof MouseEvent||A instanceof WheelEvent)},c.cq=function(A,l){return Xr[l]&&"touches"in A},c.cr=function(A){return Xr[A]||$r[A]},c.cs=function(A,l,u){var v=l[0],b=l[1];return A[0]=u[0]*v+u[4]*b+u[12],A[1]=u[1]*v+u[5]*b+u[13],A},c.ct=function(A,l){const{x:u,y:v}=Gd.fromLngLat(l);return!(A<0||A>25||v<0||v>=1||u<0||u>=1)},c.cu=function(A,l){return A[0]=l[0],A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=l[1],A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=l[2],A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A},c.cv=class extends ra{},c.cw=ib,c.cy=function(A){return A.message===ot},c.cz=Ke,c.d=vt,c.e=rt,c.f=A=>s(void 0,void 0,void 0,function*(){if(A.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(A)],{type:"image/png"});try{return createImageBitmap(l)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=Ce,c.h=A=>new Promise((l,u)=>{const v=new Image;v.onload=()=>{l(v),URL.revokeObjectURL(v.src),v.onload=null,window.requestAnimationFrame(()=>{v.src=Wr})},v.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const b=new Blob([new Uint8Array(A)],{type:"image/png"});v.src=A.byteLength?URL.createObjectURL(b):Wr}),c.i=Et,c.j=(A,l)=>Ft(rt(A,{type:"json"}),l),c.k=Fr,c.l=Gt,c.m=Ft,c.n=(A,l)=>Ft(rt(A,{type:"arrayBuffer"}),l),c.o=function(A){return new Dp(A).readFields(bx,[])},c.p=Wg,c.q=nf,c.r=Jn,c.s=wi,c.t=Gi,c.u=Rt,c.v=Bt,c.w=kt,c.x=ie,c.y=qe,c.z=z}),n("worker",["./shared"],function(c){class s{constructor(xe,ye){this.keyCache={},xe&&this.replace(xe,ye)}replace(xe,ye){this._layerConfigs={},this._layers={},this.update(xe,[],ye)}update(xe,ye,Ce){for(const Ke of xe){this._layerConfigs[Ke.id]=Ke;const At=this._layers[Ke.id]=c.bJ(Ke,Ce);At._featureFilter=c.aa(At.filter,Ce),this.keyCache[Ke.id]&&delete this.keyCache[Ke.id]}for(const Ke of ye)delete this.keyCache[Ke],delete this._layerConfigs[Ke],delete this._layers[Ke];this.familiesBySource={};const je=c.cC(Object.values(this._layerConfigs),this.keyCache);for(const Ke of je){const At=Ke.map(Fr=>this._layers[Fr.id]),Ft=At[0];if(Ft.visibility==="none")continue;const vt=Ft.source||"";let Nt=this.familiesBySource[vt];Nt||(Nt=this.familiesBySource[vt]={});const Ht=Ft.sourceLayer||"_geojsonTileLayer";let Gt=Nt[Ht];Gt||(Gt=Nt[Ht]=[]),Gt.push(At)}}}class d{constructor(xe){const ye={},Ce=[];for(const Ft in xe){const vt=xe[Ft],Nt=ye[Ft]={};for(const Ht in vt){const Gt=vt[+Ht];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const Fr={x:0,y:0,w:Gt.bitmap.width+2,h:Gt.bitmap.height+2};Ce.push(Fr),Nt[Ht]={rect:Fr,metrics:Gt.metrics}}}const{w:je,h:Ke}=c.p(Ce),At=new c.q({width:je||1,height:Ke||1});for(const Ft in xe){const vt=xe[Ft];for(const Nt in vt){const Ht=vt[+Nt];if(!Ht||Ht.bitmap.width===0||Ht.bitmap.height===0)continue;const Gt=ye[Ft][Nt].rect;c.q.copy(Ht.bitmap,At,{x:0,y:0},{x:Gt.x+1,y:Gt.y+1},Ht.bitmap)}}this.image=At,this.positions=ye}}c.cD("GlyphAtlas",d);class g{constructor(xe){this.tileID=new c.Z(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),this.uid=xe.uid,this.zoom=xe.zoom,this.pixelRatio=xe.pixelRatio,this.tileSize=xe.tileSize,this.source=xe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=xe.showCollisionBoxes,this.collectResourceTiming=!!xe.collectResourceTiming,this.returnDependencies=!!xe.returnDependencies,this.promoteId=xe.promoteId,this.inFlightDependencies=[]}parse(xe,ye,Ce,je,Ke){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=xe,this.collisionBoxArray=new c.a8;const At=new c.cE(Object.keys(xe.layers).sort()),Ft=new c.cF(this.tileID,this.promoteId);Ft.bucketLayerIDs=[];const vt={},Nt={featureIndex:Ft,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:Ce,subdivisionGranularity:Ke},Ht=ye.familiesBySource[this.source];for(const gi in Ht){const hr=xe.layers[gi];if(!hr)continue;hr.version===1&&c.w(`Vector tile source "${this.source}" layer "${gi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Re=At.encode(gi),ct=[];for(let $e=0;$e<hr.length;$e++){const it=hr.feature($e),He=Ft.getId(it,gi);ct.push({feature:it,id:He,index:$e,sourceLayerIndex:Re})}for(const $e of Ht[gi]){const it=$e[0];it.source!==this.source&&c.w(`layer.source = ${it.source} does not equal this.source = ${this.source}`),it.minzoom&&this.zoom<Math.floor(it.minzoom)||it.maxzoom&&this.zoom>=it.maxzoom||it.visibility!=="none"&&(x($e,this.zoom,Ce),(vt[it.id]=it.createBucket({index:Ft.bucketLayerIDs.length,layers:$e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Re,sourceID:this.source})).populate(ct,Nt,this.tileID.canonical),Ft.bucketLayerIDs.push($e.map(He=>He.id)))}}const Gt=c.bO(Nt.glyphDependencies,gi=>Object.keys(gi).map(Number));this.inFlightDependencies.forEach(gi=>gi?.abort()),this.inFlightDependencies=[];let Fr=Promise.resolve({});if(Object.keys(Gt).length){const gi=new AbortController;this.inFlightDependencies.push(gi),Fr=je.sendAsync({type:"GG",data:{stacks:Gt,source:this.source,tileID:this.tileID,type:"glyphs"}},gi)}const kr=Object.keys(Nt.iconDependencies);let Bt=Promise.resolve({});if(kr.length){const gi=new AbortController;this.inFlightDependencies.push(gi),Bt=je.sendAsync({type:"GI",data:{icons:kr,source:this.source,tileID:this.tileID,type:"icons"}},gi)}const ei=Object.keys(Nt.patternDependencies);let Yi=Promise.resolve({});if(ei.length){const gi=new AbortController;this.inFlightDependencies.push(gi),Yi=je.sendAsync({type:"GI",data:{icons:ei,source:this.source,tileID:this.tileID,type:"patterns"}},gi)}const jr=Nt.dashDependencies;let Di=Promise.resolve({});if(Object.keys(jr).length){const gi=new AbortController;this.inFlightDependencies.push(gi),Di=je.sendAsync({type:"GDA",data:{dashes:jr}},gi)}const[In,Yr,on,Wi]=yield Promise.all([Fr,Bt,Yi,Di]),mi=new d(In),ln=new c.cG(Yr,on);for(const gi in vt){const hr=vt[gi];hr instanceof c.a9?(x(hr.layers,this.zoom,Ce),c.cH({bucket:hr,glyphMap:In,glyphPositions:mi.positions,imageMap:Yr,imagePositions:ln.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Nt.subdivisionGranularity})):hr.hasDependencies&&(hr instanceof c.cI||hr instanceof c.cJ||hr instanceof c.cK)&&(x(hr.layers,this.zoom,Ce),hr.addFeatures(Nt,this.tileID.canonical,ln.patternPositions,Wi))}return this.status="done",{buckets:Object.values(vt).filter(gi=>!gi.isEmpty()),featureIndex:Ft,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mi.image,imageAtlas:ln,dashPositions:Wi,glyphMap:this.returnDependencies?In:null,iconMap:this.returnDependencies?Yr:null,glyphPositions:this.returnDependencies?mi.positions:null}})}}function x(ot,xe,ye){const Ce=new c.F(xe);for(const je of ot)je.recalculate(Ce,ye)}class C{constructor(xe,ye,Ce){this.actor=xe,this.layerIndex=ye,this.availableImages=Ce,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(xe,ye){return c._(this,void 0,void 0,function*(){const Ce=yield c.n(xe.request,ye);try{return{vectorTile:new c.cL(new c.cM(Ce.data)),rawData:Ce.data,cacheControl:Ce.cacheControl,expires:Ce.expires}}catch(je){const Ke=new Uint8Array(Ce.data);let At=`Unable to parse the tile at ${xe.request.url}, `;throw At+=Ke[0]===31&&Ke[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${je.message}`,new Error(At)}})}loadTile(xe){return c._(this,void 0,void 0,function*(){const ye=xe.uid,Ce=!!(xe&&xe.request&&xe.request.collectResourceTiming)&&new c.cN(xe.request),je=new g(xe);this.loading[ye]=je;const Ke=new AbortController;je.abort=Ke;try{const At=yield this.loadVectorTile(xe,Ke);if(delete this.loading[ye],!At)return null;const Ft=At.rawData,vt={};At.expires&&(vt.expires=At.expires),At.cacheControl&&(vt.cacheControl=At.cacheControl);const Nt={};if(Ce){const Gt=Ce.finish();Gt&&(Nt.resourceTiming=JSON.parse(JSON.stringify(Gt)))}je.vectorTile=At.vectorTile;const Ht=je.parse(At.vectorTile,this.layerIndex,this.availableImages,this.actor,xe.subdivisionGranularity);this.loaded[ye]=je,this.fetching[ye]={rawTileData:Ft,cacheControl:vt,resourceTiming:Nt};try{const Gt=yield Ht;return c.e({rawTileData:Ft.slice(0)},Gt,vt,Nt)}finally{delete this.fetching[ye]}}catch(At){throw delete this.loading[ye],je.status="done",this.loaded[ye]=je,At}})}reloadTile(xe){return c._(this,void 0,void 0,function*(){const ye=xe.uid;if(!this.loaded||!this.loaded[ye])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Ce=this.loaded[ye];if(Ce.showCollisionBoxes=xe.showCollisionBoxes,Ce.status==="parsing"){const je=yield Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,xe.subdivisionGranularity);let Ke;if(this.fetching[ye]){const{rawTileData:At,cacheControl:Ft,resourceTiming:vt}=this.fetching[ye];delete this.fetching[ye],Ke=c.e({rawTileData:At.slice(0)},je,Ft,vt)}else Ke=je;return Ke}if(Ce.status==="done"&&Ce.vectorTile)return Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,xe.subdivisionGranularity)})}abortTile(xe){return c._(this,void 0,void 0,function*(){const ye=this.loading,Ce=xe.uid;ye&&ye[Ce]&&ye[Ce].abort&&(ye[Ce].abort.abort(),delete ye[Ce])})}removeTile(xe){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[xe.uid]&&delete this.loaded[xe.uid]})}}class N{constructor(){this.loaded={}}loadTile(xe){return c._(this,void 0,void 0,function*(){const{uid:ye,encoding:Ce,rawImageData:je,redFactor:Ke,greenFactor:At,blueFactor:Ft,baseShift:vt}=xe,Nt=je.width+2,Ht=je.height+2,Gt=c.b(je)?new c.R({width:Nt,height:Ht},yield c.cO(je,-1,-1,Nt,Ht)):je,Fr=new c.cP(ye,Gt,Ce,Ke,At,Ft,vt);return this.loaded=this.loaded||{},this.loaded[ye]=Fr,Fr})}removeTile(xe){const ye=this.loaded,Ce=xe.uid;ye&&ye[Ce]&&delete ye[Ce]}}var B,M,I=function(){if(M)return B;function ot(ye,Ce){if(ye.length!==0){xe(ye[0],Ce);for(var je=1;je<ye.length;je++)xe(ye[je],!Ce)}}function xe(ye,Ce){for(var je=0,Ke=0,At=0,Ft=ye.length,vt=Ft-1;At<Ft;vt=At++){var Nt=(ye[At][0]-ye[vt][0])*(ye[vt][1]+ye[At][1]),Ht=je+Nt;Ke+=Math.abs(je)>=Math.abs(Nt)?je-Ht+Nt:Nt-Ht+je,je=Ht}je+Ke>=0!=!!Ce&&ye.reverse()}return M=1,B=function ye(Ce,je){var Ke,At=Ce&&Ce.type;if(At==="FeatureCollection")for(Ke=0;Ke<Ce.features.length;Ke++)ye(Ce.features[Ke],je);else if(At==="GeometryCollection")for(Ke=0;Ke<Ce.geometries.length;Ke++)ye(Ce.geometries[Ke],je);else if(At==="Feature")ye(Ce.geometry,je);else if(At==="Polygon")ot(Ce.coordinates,je);else if(At==="MultiPolygon")for(Ke=0;Ke<Ce.coordinates.length;Ke++)ot(Ce.coordinates[Ke],je);return Ce}}(),R=c.cQ(I);class D extends c.cS{constructor(xe,ye){super(new c.cM,0,ye,[],[]),this.feature=xe,this.type=xe.type,this.properties=xe.tags?xe.tags:{},"id"in xe&&(typeof xe.id=="string"?this.id=parseInt(xe.id,10):typeof xe.id!="number"||isNaN(xe.id)||(this.id=xe.id))}loadGeometry(){const xe=[],ye=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const Ce of ye){const je=[];for(const Ke of Ce)je.push(new c.P(Ke[0],Ke[1]));xe.push(je)}return xe}}class V extends c.cR{constructor(xe,ye){super(new c.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ye?ye.version:1,this.extent=ye?ye.extent:4096,this.length=xe.length,this.features=xe}feature(xe){return new D(this.features[xe],this.extent)}}function G(ot,xe){xe.writeVarintField(15,ot.version||1),xe.writeStringField(1,ot.name||""),xe.writeVarintField(5,ot.extent||4096);const ye={keys:[],values:[],keycache:{},valuecache:{}};for(let Ke=0;Ke<ot.length;Ke++)ye.feature=ot.feature(Ke),xe.writeMessage(2,Z,ye);const Ce=ye.keys;for(const Ke of Ce)xe.writeStringField(3,Ke);const je=ye.values;for(const Ke of je)xe.writeMessage(4,se,Ke)}function Z(ot,xe){if(!ot.feature)return;const ye=ot.feature;ye.id!==void 0&&xe.writeVarintField(1,ye.id),xe.writeMessage(2,X,ot),xe.writeVarintField(3,ye.type),xe.writeMessage(4,ce,ye)}function X(ot,xe){for(const ye in ot.feature?.properties){let Ce=ot.feature.properties[ye],je=ot.keycache[ye];if(Ce===null)continue;je===void 0&&(ot.keys.push(ye),je=ot.keys.length-1,ot.keycache[ye]=je),xe.writeVarint(je),typeof Ce!="string"&&typeof Ce!="boolean"&&typeof Ce!="number"&&(Ce=JSON.stringify(Ce));const Ke=typeof Ce+":"+Ce;let At=ot.valuecache[Ke];At===void 0&&(ot.values.push(Ce),At=ot.values.length-1,ot.valuecache[Ke]=At),xe.writeVarint(At)}}function le(ot,xe){return(xe<<3)+(7&ot)}function ae(ot){return ot<<1^ot>>31}function ce(ot,xe){const ye=ot.loadGeometry(),Ce=ot.type;let je=0,Ke=0;for(const At of ye){let Ft=1;Ce===1&&(Ft=At.length),xe.writeVarint(le(1,Ft));const vt=Ce===3?At.length-1:At.length;for(let Nt=0;Nt<vt;Nt++){Nt===1&&Ce!==1&&xe.writeVarint(le(2,vt-1));const Ht=At[Nt].x-je,Gt=At[Nt].y-Ke;xe.writeVarint(ae(Ht)),xe.writeVarint(ae(Gt)),je+=Ht,Ke+=Gt}ot.type===3&&xe.writeVarint(le(7,1))}}function se(ot,xe){const ye=typeof ot;ye==="string"?xe.writeStringField(1,ot):ye==="boolean"?xe.writeBooleanField(7,ot):ye==="number"&&(ot%1!=0?xe.writeDoubleField(3,ot):ot<0?xe.writeSVarintField(6,ot):xe.writeVarintField(5,ot))}const ue={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ot=>ot},re=Math.fround||(W=new Float32Array(1),ot=>(W[0]=+ot,W[0]));var W;class de{constructor(xe){this.options=Object.assign(Object.create(ue),xe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(xe){const{log:ye,minZoom:Ce,maxZoom:je}=this.options;ye&&console.time("total time");const Ke=`prepare ${xe.length} points`;ye&&console.time(Ke),this.points=xe;const At=[];for(let vt=0;vt<xe.length;vt++){const Nt=xe[vt];if(!Nt.geometry)continue;const[Ht,Gt]=Nt.geometry.coordinates,Fr=re(ge(Ht)),kr=re(Pe(Gt));At.push(Fr,kr,1/0,vt,-1,1),this.options.reduce&&At.push(0)}let Ft=this.trees[je+1]=this._createTree(At);ye&&console.timeEnd(Ke);for(let vt=je;vt>=Ce;vt--){const Nt=+Date.now();Ft=this.trees[vt]=this._createTree(this._cluster(Ft,vt)),ye&&console.log("z%d: %d clusters in %dms",vt,Ft.numItems,+Date.now()-Nt)}return ye&&console.timeEnd("total time"),this}getClusters(xe,ye){let Ce=((xe[0]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,xe[1]));let Ke=xe[2]===180?180:((xe[2]+180)%360+360)%360-180;const At=Math.max(-90,Math.min(90,xe[3]));if(xe[2]-xe[0]>=360)Ce=-180,Ke=180;else if(Ce>Ke){const Gt=this.getClusters([Ce,je,180,At],ye),Fr=this.getClusters([-180,je,Ke,At],ye);return Gt.concat(Fr)}const Ft=this.trees[this._limitZoom(ye)],vt=Ft.range(ge(Ce),Pe(At),ge(Ke),Pe(je)),Nt=Ft.data,Ht=[];for(const Gt of vt){const Fr=this.stride*Gt;Ht.push(Nt[Fr+5]>1?Ee(Nt,Fr,this.clusterProps):this.points[Nt[Fr+3]])}return Ht}getChildren(xe){const ye=this._getOriginId(xe),Ce=this._getOriginZoom(xe),je="No cluster with the specified id.",Ke=this.trees[Ce];if(!Ke)throw new Error(je);const At=Ke.data;if(ye*this.stride>=At.length)throw new Error(je);const Ft=this.options.radius/(this.options.extent*Math.pow(2,Ce-1)),vt=Ke.within(At[ye*this.stride],At[ye*this.stride+1],Ft),Nt=[];for(const Ht of vt){const Gt=Ht*this.stride;At[Gt+4]===xe&&Nt.push(At[Gt+5]>1?Ee(At,Gt,this.clusterProps):this.points[At[Gt+3]])}if(Nt.length===0)throw new Error(je);return Nt}getLeaves(xe,ye,Ce){const je=[];return this._appendLeaves(je,xe,ye=ye||10,Ce=Ce||0,0),je}getTile(xe,ye,Ce){const je=this.trees[this._limitZoom(xe)],Ke=Math.pow(2,xe),{extent:At,radius:Ft}=this.options,vt=Ft/At,Nt=(Ce-vt)/Ke,Ht=(Ce+1+vt)/Ke,Gt={features:[]};return this._addTileFeatures(je.range((ye-vt)/Ke,Nt,(ye+1+vt)/Ke,Ht),je.data,ye,Ce,Ke,Gt),ye===0&&this._addTileFeatures(je.range(1-vt/Ke,Nt,1,Ht),je.data,Ke,Ce,Ke,Gt),ye===Ke-1&&this._addTileFeatures(je.range(0,Nt,vt/Ke,Ht),je.data,-1,Ce,Ke,Gt),Gt.features.length?Gt:null}getClusterExpansionZoom(xe){let ye=this._getOriginZoom(xe)-1;for(;ye<=this.options.maxZoom;){const Ce=this.getChildren(xe);if(ye++,Ce.length!==1)break;xe=Ce[0].properties.cluster_id}return ye}_appendLeaves(xe,ye,Ce,je,Ke){const At=this.getChildren(ye);for(const Ft of At){const vt=Ft.properties;if(vt&&vt.cluster?Ke+vt.point_count<=je?Ke+=vt.point_count:Ke=this._appendLeaves(xe,vt.cluster_id,Ce,je,Ke):Ke<je?Ke++:xe.push(Ft),xe.length===Ce)break}return Ke}_createTree(xe){const ye=new c.aI(xe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ce=0;Ce<xe.length;Ce+=this.stride)ye.add(xe[Ce],xe[Ce+1]);return ye.finish(),ye.data=xe,ye}_addTileFeatures(xe,ye,Ce,je,Ke,At){for(const Ft of xe){const vt=Ft*this.stride,Nt=ye[vt+5]>1;let Ht,Gt,Fr;if(Nt)Ht=Ne(ye,vt,this.clusterProps),Gt=ye[vt],Fr=ye[vt+1];else{const ei=this.points[ye[vt+3]];Ht=ei.properties;const[Yi,jr]=ei.geometry.coordinates;Gt=ge(Yi),Fr=Pe(jr)}const kr={type:1,geometry:[[Math.round(this.options.extent*(Gt*Ke-Ce)),Math.round(this.options.extent*(Fr*Ke-je))]],tags:Ht};let Bt;Bt=Nt||this.options.generateId?ye[vt+3]:this.points[ye[vt+3]].id,Bt!==void 0&&(kr.id=Bt),At.features.push(kr)}}_limitZoom(xe){return Math.max(this.options.minZoom,Math.min(Math.floor(+xe),this.options.maxZoom+1))}_cluster(xe,ye){const{radius:Ce,extent:je,reduce:Ke,minPoints:At}=this.options,Ft=Ce/(je*Math.pow(2,ye)),vt=xe.data,Nt=[],Ht=this.stride;for(let Gt=0;Gt<vt.length;Gt+=Ht){if(vt[Gt+2]<=ye)continue;vt[Gt+2]=ye;const Fr=vt[Gt],kr=vt[Gt+1],Bt=xe.within(vt[Gt],vt[Gt+1],Ft),ei=vt[Gt+5];let Yi=ei;for(const jr of Bt){const Di=jr*Ht;vt[Di+2]>ye&&(Yi+=vt[Di+5])}if(Yi>ei&&Yi>=At){let jr,Di=Fr*ei,In=kr*ei,Yr=-1;const on=(Gt/Ht<<5)+(ye+1)+this.points.length;for(const Wi of Bt){const mi=Wi*Ht;if(vt[mi+2]<=ye)continue;vt[mi+2]=ye;const ln=vt[mi+5];Di+=vt[mi]*ln,In+=vt[mi+1]*ln,vt[mi+4]=on,Ke&&(jr||(jr=this._map(vt,Gt,!0),Yr=this.clusterProps.length,this.clusterProps.push(jr)),Ke(jr,this._map(vt,mi)))}vt[Gt+4]=on,Nt.push(Di/Yi,In/Yi,1/0,on,-1,Yi),Ke&&Nt.push(Yr)}else{for(let jr=0;jr<Ht;jr++)Nt.push(vt[Gt+jr]);if(Yi>1)for(const jr of Bt){const Di=jr*Ht;if(!(vt[Di+2]<=ye)){vt[Di+2]=ye;for(let In=0;In<Ht;In++)Nt.push(vt[Di+In])}}}}return Nt}_getOriginId(xe){return xe-this.points.length>>5}_getOriginZoom(xe){return(xe-this.points.length)%32}_map(xe,ye,Ce){if(xe[ye+5]>1){const At=this.clusterProps[xe[ye+6]];return Ce?Object.assign({},At):At}const je=this.points[xe[ye+3]].properties,Ke=this.options.map(je);return Ce&&Ke===je?Object.assign({},Ke):Ke}}function Ee(ot,xe,ye){return{type:"Feature",id:ot[xe+3],properties:Ne(ot,xe,ye),geometry:{type:"Point",coordinates:[(Ce=ot[xe],360*(Ce-.5)),Ye(ot[xe+1])]}};var Ce}function Ne(ot,xe,ye){const Ce=ot[xe+5],je=Ce>=1e4?`${Math.round(Ce/1e3)}k`:Ce>=1e3?Math.round(Ce/100)/10+"k":Ce,Ke=ot[xe+6],At=Ke===-1?{}:Object.assign({},ye[Ke]);return Object.assign(At,{cluster:!0,cluster_id:ot[xe+3],point_count:Ce,point_count_abbreviated:je})}function ge(ot){return ot/360+.5}function Pe(ot){const xe=Math.sin(ot*Math.PI/180),ye=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return ye<0?0:ye>1?1:ye}function Ye(ot){const xe=(180-360*ot)*Math.PI/180;return 360*Math.atan(Math.exp(xe))/Math.PI-90}function Me(ot,xe,ye,Ce){let je=Ce;const Ke=xe+(ye-xe>>1);let At,Ft=ye-xe;const vt=ot[xe],Nt=ot[xe+1],Ht=ot[ye],Gt=ot[ye+1];for(let Fr=xe+3;Fr<ye;Fr+=3){const kr=De(ot[Fr],ot[Fr+1],vt,Nt,Ht,Gt);if(kr>je)At=Fr,je=kr;else if(kr===je){const Bt=Math.abs(Fr-Ke);Bt<Ft&&(At=Fr,Ft=Bt)}}je>Ce&&(At-xe>3&&Me(ot,xe,At,Ce),ot[At+2]=je,ye-At>3&&Me(ot,At,ye,Ce))}function De(ot,xe,ye,Ce,je,Ke){let At=je-ye,Ft=Ke-Ce;if(At!==0||Ft!==0){const vt=((ot-ye)*At+(xe-Ce)*Ft)/(At*At+Ft*Ft);vt>1?(ye=je,Ce=Ke):vt>0&&(ye+=At*vt,Ce+=Ft*vt)}return At=ot-ye,Ft=xe-Ce,At*At+Ft*Ft}function tt(ot,xe,ye,Ce){const je={id:ot??null,type:xe,geometry:ye,tags:Ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")ee(je,ye);else if(xe==="Polygon")ee(je,ye[0]);else if(xe==="MultiLineString")for(const Ke of ye)ee(je,Ke);else if(xe==="MultiPolygon")for(const Ke of ye)ee(je,Ke[0]);return je}function ee(ot,xe){for(let ye=0;ye<xe.length;ye+=3)ot.minX=Math.min(ot.minX,xe[ye]),ot.minY=Math.min(ot.minY,xe[ye+1]),ot.maxX=Math.max(ot.maxX,xe[ye]),ot.maxY=Math.max(ot.maxY,xe[ye+1])}function fe(ot,xe,ye,Ce){if(!xe.geometry)return;const je=xe.geometry.coordinates;if(je&&je.length===0)return;const Ke=xe.geometry.type,At=Math.pow(ye.tolerance/((1<<ye.maxZoom)*ye.extent),2);let Ft=[],vt=xe.id;if(ye.promoteId?vt=xe.properties[ye.promoteId]:ye.generateId&&(vt=Ce||0),Ke==="Point")pe(je,Ft);else if(Ke==="MultiPoint")for(const Nt of je)pe(Nt,Ft);else if(Ke==="LineString")we(je,Ft,At,!1);else if(Ke==="MultiLineString"){if(ye.lineMetrics){for(const Nt of je)Ft=[],we(Nt,Ft,At,!1),ot.push(tt(vt,"LineString",Ft,xe.properties));return}Le(je,Ft,At,!1)}else if(Ke==="Polygon")Le(je,Ft,At,!0);else{if(Ke!=="MultiPolygon"){if(Ke==="GeometryCollection"){for(const Nt of xe.geometry.geometries)fe(ot,{id:vt,geometry:Nt,properties:xe.properties},ye,Ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Nt of je){const Ht=[];Le(Nt,Ht,At,!0),Ft.push(Ht)}}ot.push(tt(vt,Ke,Ft,xe.properties))}function pe(ot,xe){xe.push(lt(ot[0]),rt(ot[1]),0)}function we(ot,xe,ye,Ce){let je,Ke,At=0;for(let vt=0;vt<ot.length;vt++){const Nt=lt(ot[vt][0]),Ht=rt(ot[vt][1]);xe.push(Nt,Ht,0),vt>0&&(At+=Ce?(je*Ht-Nt*Ke)/2:Math.sqrt(Math.pow(Nt-je,2)+Math.pow(Ht-Ke,2))),je=Nt,Ke=Ht}const Ft=xe.length-3;xe[2]=1,Me(xe,0,Ft,ye),xe[Ft+2]=1,xe.size=Math.abs(At),xe.start=0,xe.end=xe.size}function Le(ot,xe,ye,Ce){for(let je=0;je<ot.length;je++){const Ke=[];we(ot[je],Ke,ye,Ce),xe.push(Ke)}}function lt(ot){return ot/360+.5}function rt(ot){const xe=Math.sin(ot*Math.PI/180),ye=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return ye<0?0:ye>1?1:ye}function gt(ot,xe,ye,Ce,je,Ke,At,Ft){if(Ce/=xe,Ke>=(ye/=xe)&&At<Ce)return ot;if(At<ye||Ke>=Ce)return null;const vt=[];for(const Nt of ot){const Ht=Nt.geometry;let Gt=Nt.type;const Fr=je===0?Nt.minX:Nt.minY,kr=je===0?Nt.maxX:Nt.maxY;if(Fr>=ye&&kr<Ce){vt.push(Nt);continue}if(kr<ye||Fr>=Ce)continue;let Bt=[];if(Gt==="Point"||Gt==="MultiPoint")dt(Ht,Bt,ye,Ce,je);else if(Gt==="LineString")qt(Ht,Bt,ye,Ce,je,!1,Ft.lineMetrics);else if(Gt==="MultiLineString")at(Ht,Bt,ye,Ce,je,!1);else if(Gt==="Polygon")at(Ht,Bt,ye,Ce,je,!0);else if(Gt==="MultiPolygon")for(const ei of Ht){const Yi=[];at(ei,Yi,ye,Ce,je,!0),Yi.length&&Bt.push(Yi)}if(Bt.length){if(Ft.lineMetrics&&Gt==="LineString"){for(const ei of Bt)vt.push(tt(Nt.id,Gt,ei,Nt.tags));continue}Gt!=="LineString"&&Gt!=="MultiLineString"||(Bt.length===1?(Gt="LineString",Bt=Bt[0]):Gt="MultiLineString"),Gt!=="Point"&&Gt!=="MultiPoint"||(Gt=Bt.length===3?"Point":"MultiPoint"),vt.push(tt(Nt.id,Gt,Bt,Nt.tags))}}return vt.length?vt:null}function dt(ot,xe,ye,Ce,je){for(let Ke=0;Ke<ot.length;Ke+=3){const At=ot[Ke+je];At>=ye&&At<=Ce&&kt(xe,ot[Ke],ot[Ke+1],ot[Ke+2])}}function qt(ot,xe,ye,Ce,je,Ke,At){let Ft=Te(ot);const vt=je===0?ze:Et;let Nt,Ht,Gt=ot.start;for(let Yi=0;Yi<ot.length-3;Yi+=3){const jr=ot[Yi],Di=ot[Yi+1],In=ot[Yi+2],Yr=ot[Yi+3],on=ot[Yi+4],Wi=je===0?jr:Di,mi=je===0?Yr:on;let ln=!1;At&&(Nt=Math.sqrt(Math.pow(jr-Yr,2)+Math.pow(Di-on,2))),Wi<ye?mi>ye&&(Ht=vt(Ft,jr,Di,Yr,on,ye),At&&(Ft.start=Gt+Nt*Ht)):Wi>Ce?mi<Ce&&(Ht=vt(Ft,jr,Di,Yr,on,Ce),At&&(Ft.start=Gt+Nt*Ht)):kt(Ft,jr,Di,In),mi<ye&&Wi>=ye&&(Ht=vt(Ft,jr,Di,Yr,on,ye),ln=!0),mi>Ce&&Wi<=Ce&&(Ht=vt(Ft,jr,Di,Yr,on,Ce),ln=!0),!Ke&&ln&&(At&&(Ft.end=Gt+Nt*Ht),xe.push(Ft),Ft=Te(ot)),At&&(Gt+=Nt)}let Fr=ot.length-3;const kr=ot[Fr],Bt=ot[Fr+1],ei=je===0?kr:Bt;ei>=ye&&ei<=Ce&&kt(Ft,kr,Bt,ot[Fr+2]),Fr=Ft.length-3,Ke&&Fr>=3&&(Ft[Fr]!==Ft[0]||Ft[Fr+1]!==Ft[1])&&kt(Ft,Ft[0],Ft[1],Ft[2]),Ft.length&&xe.push(Ft)}function Te(ot){const xe=[];return xe.size=ot.size,xe.start=ot.start,xe.end=ot.end,xe}function at(ot,xe,ye,Ce,je,Ke){for(const At of ot)qt(At,xe,ye,Ce,je,Ke,!1)}function kt(ot,xe,ye,Ce){ot.push(xe,ye,Ce)}function ze(ot,xe,ye,Ce,je,Ke){const At=(Ke-xe)/(Ce-xe);return kt(ot,Ke,ye+(je-ye)*At,1),At}function Et(ot,xe,ye,Ce,je,Ke){const At=(Ke-ye)/(je-ye);return kt(ot,xe+(Ce-xe)*At,Ke,1),At}function Pt(ot,xe){const ye=[];for(let Ce=0;Ce<ot.length;Ce++){const je=ot[Ce],Ke=je.type;let At;if(Ke==="Point"||Ke==="MultiPoint"||Ke==="LineString")At=Sr(je.geometry,xe);else if(Ke==="MultiLineString"||Ke==="Polygon"){At=[];for(const Ft of je.geometry)At.push(Sr(Ft,xe))}else if(Ke==="MultiPolygon"){At=[];for(const Ft of je.geometry){const vt=[];for(const Nt of Ft)vt.push(Sr(Nt,xe));At.push(vt)}}ye.push(tt(je.id,Ke,At,je.tags))}return ye}function Sr(ot,xe){const ye=[];ye.size=ot.size,ot.start!==void 0&&(ye.start=ot.start,ye.end=ot.end);for(let Ce=0;Ce<ot.length;Ce+=3)ye.push(ot[Ce]+xe,ot[Ce+1],ot[Ce+2]);return ye}function or(ot,xe){if(ot.transformed)return ot;const ye=1<<ot.z,Ce=ot.x,je=ot.y;for(const Ke of ot.features){const At=Ke.geometry,Ft=Ke.type;if(Ke.geometry=[],Ft===1)for(let vt=0;vt<At.length;vt+=2)Ke.geometry.push(Wr(At[vt],At[vt+1],xe,ye,Ce,je));else for(let vt=0;vt<At.length;vt++){const Nt=[];for(let Ht=0;Ht<At[vt].length;Ht+=2)Nt.push(Wr(At[vt][Ht],At[vt][Ht+1],xe,ye,Ce,je));Ke.geometry.push(Nt)}}return ot.transformed=!0,ot}function Wr(ot,xe,ye,Ce,je,Ke){return[Math.round(ye*(ot*Ce-je)),Math.round(ye*(xe*Ce-Ke))]}function Hr(ot,xe,ye,Ce,je){const Ke=xe===je.maxZoom?0:je.tolerance/((1<<xe)*je.extent),At={features:[],numPoints:0,numSimplified:0,numFeatures:ot.length,source:null,x:ye,y:Ce,z:xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ft of ot)ti(At,Ft,Ke,je);return At}function ti(ot,xe,ye,Ce){const je=xe.geometry,Ke=xe.type,At=[];if(ot.minX=Math.min(ot.minX,xe.minX),ot.minY=Math.min(ot.minY,xe.minY),ot.maxX=Math.max(ot.maxX,xe.maxX),ot.maxY=Math.max(ot.maxY,xe.maxY),Ke==="Point"||Ke==="MultiPoint")for(let Ft=0;Ft<je.length;Ft+=3)At.push(je[Ft],je[Ft+1]),ot.numPoints++,ot.numSimplified++;else if(Ke==="LineString")Gr(At,je,ot,ye,!1,!1);else if(Ke==="MultiLineString"||Ke==="Polygon")for(let Ft=0;Ft<je.length;Ft++)Gr(At,je[Ft],ot,ye,Ke==="Polygon",Ft===0);else if(Ke==="MultiPolygon")for(let Ft=0;Ft<je.length;Ft++){const vt=je[Ft];for(let Nt=0;Nt<vt.length;Nt++)Gr(At,vt[Nt],ot,ye,!0,Nt===0)}if(At.length){let Ft=xe.tags||null;if(Ke==="LineString"&&Ce.lineMetrics){Ft={};for(const Nt in xe.tags)Ft[Nt]=xe.tags[Nt];Ft.mapbox_clip_start=je.start/je.size,Ft.mapbox_clip_end=je.end/je.size}const vt={geometry:At,type:Ke==="Polygon"||Ke==="MultiPolygon"?3:Ke==="LineString"||Ke==="MultiLineString"?2:1,tags:Ft};xe.id!==null&&(vt.id=xe.id),ot.features.push(vt)}}function Gr(ot,xe,ye,Ce,je,Ke){const At=Ce*Ce;if(Ce>0&&xe.size<(je?At:Ce))return void(ye.numPoints+=xe.length/3);const Ft=[];for(let vt=0;vt<xe.length;vt+=3)(Ce===0||xe[vt+2]>At)&&(ye.numSimplified++,Ft.push(xe[vt],xe[vt+1])),ye.numPoints++;je&&function(vt,Nt){let Ht=0;for(let Gt=0,Fr=vt.length,kr=Fr-2;Gt<Fr;kr=Gt,Gt+=2)Ht+=(vt[Gt]-vt[kr])*(vt[Gt+1]+vt[kr+1]);if(Ht>0===Nt)for(let Gt=0,Fr=vt.length;Gt<Fr/2;Gt+=2){const kr=vt[Gt],Bt=vt[Gt+1];vt[Gt]=vt[Fr-2-Gt],vt[Gt+1]=vt[Fr-1-Gt],vt[Fr-2-Gt]=kr,vt[Fr-1-Gt]=Bt}}(Ft,Ke),ot.push(Ft)}const wi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Bi{constructor(xe,ye){const Ce=(ye=this.options=function(Ke,At){for(const Ft in At)Ke[Ft]=At[Ft];return Ke}(Object.create(wi),ye)).debug;if(Ce&&console.time("preprocess data"),ye.maxZoom<0||ye.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ye.promoteId&&ye.generateId)throw new Error("promoteId and generateId cannot be used together.");let je=function(Ke,At){const Ft=[];if(Ke.type==="FeatureCollection")for(let vt=0;vt<Ke.features.length;vt++)fe(Ft,Ke.features[vt],At,vt);else fe(Ft,Ke.type==="Feature"?Ke:{geometry:Ke},At);return Ft}(xe,ye);this.tiles={},this.tileCoords=[],Ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ye.indexMaxZoom,ye.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),je=function(Ke,At){const Ft=At.buffer/At.extent;let vt=Ke;const Nt=gt(Ke,1,-1-Ft,Ft,0,-1,2,At),Ht=gt(Ke,1,1-Ft,2+Ft,0,-1,2,At);return(Nt||Ht)&&(vt=gt(Ke,1,-Ft,1+Ft,0,-1,2,At)||[],Nt&&(vt=Pt(Nt,1).concat(vt)),Ht&&(vt=vt.concat(Pt(Ht,-1)))),vt}(je,ye),je.length&&this.splitTile(je,0,0,0),Ce&&(je.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(xe,ye,Ce,je,Ke,At,Ft){const vt=[xe,ye,Ce,je],Nt=this.options,Ht=Nt.debug;for(;vt.length;){je=vt.pop(),Ce=vt.pop(),ye=vt.pop(),xe=vt.pop();const Gt=1<<ye,Fr=Zr(ye,Ce,je);let kr=this.tiles[Fr];if(!kr&&(Ht>1&&console.time("creation"),kr=this.tiles[Fr]=Hr(xe,ye,Ce,je,Nt),this.tileCoords.push({z:ye,x:Ce,y:je}),Ht)){Ht>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ye,Ce,je,kr.numFeatures,kr.numPoints,kr.numSimplified),console.timeEnd("creation"));const ln=`z${ye}`;this.stats[ln]=(this.stats[ln]||0)+1,this.total++}if(kr.source=xe,Ke==null){if(ye===Nt.indexMaxZoom||kr.numPoints<=Nt.indexMaxPoints)continue}else{if(ye===Nt.maxZoom||ye===Ke)continue;if(Ke!=null){const ln=Ke-ye;if(Ce!==At>>ln||je!==Ft>>ln)continue}}if(kr.source=null,xe.length===0)continue;Ht>1&&console.time("clipping");const Bt=.5*Nt.buffer/Nt.extent,ei=.5-Bt,Yi=.5+Bt,jr=1+Bt;let Di=null,In=null,Yr=null,on=null,Wi=gt(xe,Gt,Ce-Bt,Ce+Yi,0,kr.minX,kr.maxX,Nt),mi=gt(xe,Gt,Ce+ei,Ce+jr,0,kr.minX,kr.maxX,Nt);xe=null,Wi&&(Di=gt(Wi,Gt,je-Bt,je+Yi,1,kr.minY,kr.maxY,Nt),In=gt(Wi,Gt,je+ei,je+jr,1,kr.minY,kr.maxY,Nt),Wi=null),mi&&(Yr=gt(mi,Gt,je-Bt,je+Yi,1,kr.minY,kr.maxY,Nt),on=gt(mi,Gt,je+ei,je+jr,1,kr.minY,kr.maxY,Nt),mi=null),Ht>1&&console.timeEnd("clipping"),vt.push(Di||[],ye+1,2*Ce,2*je),vt.push(In||[],ye+1,2*Ce,2*je+1),vt.push(Yr||[],ye+1,2*Ce+1,2*je),vt.push(on||[],ye+1,2*Ce+1,2*je+1)}}getTile(xe,ye,Ce){xe=+xe,ye=+ye,Ce=+Ce;const je=this.options,{extent:Ke,debug:At}=je;if(xe<0||xe>24)return null;const Ft=1<<xe,vt=Zr(xe,ye=ye+Ft&Ft-1,Ce);if(this.tiles[vt])return or(this.tiles[vt],Ke);At>1&&console.log("drilling down to z%d-%d-%d",xe,ye,Ce);let Nt,Ht=xe,Gt=ye,Fr=Ce;for(;!Nt&&Ht>0;)Ht--,Gt>>=1,Fr>>=1,Nt=this.tiles[Zr(Ht,Gt,Fr)];return Nt&&Nt.source?(At>1&&(console.log("found parent tile z%d-%d-%d",Ht,Gt,Fr),console.time("drilling down")),this.splitTile(Nt.source,Ht,Gt,Fr,xe,ye,Ce),At>1&&console.timeEnd("drilling down"),this.tiles[vt]?or(this.tiles[vt],Ke):null):null}}function Zr(ot,xe,ye){return 32*((1<<ot)*ye+xe)+ot}class Xr extends C{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(xe,ye){return c._(this,void 0,void 0,function*(){const Ce=xe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const je=this._geoJSONIndex.getTile(Ce.z,Ce.x,Ce.y);if(!je)return null;const Ke=new V(je.features,{version:2,extent:c.$});let At=function(Ft){const vt=new c.cM;return function(Nt,Ht){for(const Gt in Nt.layers)Ht.writeMessage(3,G,Nt.layers[Gt])}(Ft,vt),vt.finish()}(Ke);return At.byteOffset===0&&At.byteLength===At.buffer.byteLength||(At=new Uint8Array(At)),{vectorTile:Ke,rawData:At.buffer}})}loadData(xe){return c._(this,void 0,void 0,function*(){var ye;(ye=this._pendingRequest)===null||ye===void 0||ye.abort();const Ce=!!(xe&&xe.request&&xe.request.collectResourceTiming)&&new c.cN(xe.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(xe,this._pendingRequest);const je=yield this._pendingData;this._geoJSONIndex=xe.cluster?new de(function({superclusterOptions:At,clusterProperties:Ft}){if(!Ft||!At)return At;const vt={},Nt={},Ht={accumulated:null,zoom:0},Gt={properties:null},Fr=Object.keys(Ft);for(const kr of Fr){const[Bt,ei]=Ft[kr],Yi=c.cT(ei),jr=c.cT(typeof Bt=="string"?[Bt,["accumulated"],["get",kr]]:Bt);vt[kr]=Yi.value,Nt[kr]=jr.value}return At.map=kr=>{Gt.properties=kr;const Bt={};for(const ei of Fr)Bt[ei]=vt[ei].evaluate(Ht,Gt);return Bt},At.reduce=(kr,Bt)=>{Gt.properties=Bt;for(const ei of Fr)Ht.accumulated=kr[ei],kr[ei]=Nt[ei].evaluate(Ht,Gt)},At}(xe)).load(je.features):function(At,Ft){return new Bi(At,Ft)}(je,xe.geojsonVtOptions),this.loaded={};const Ke={data:je};if(Ce){const At=Ce.finish();At&&(Ke.resourceTiming={},Ke.resourceTiming[xe.source]=JSON.parse(JSON.stringify(At)))}return Ke}catch(je){if(delete this._pendingRequest,c.cy(je))return{abandoned:!0};throw je}})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(xe){const ye=this.loaded;return ye&&ye[xe.uid]?super.reloadTile(xe):this.loadTile(xe)}loadAndProcessGeoJSON(xe,ye){return c._(this,void 0,void 0,function*(){let Ce=yield this.loadGeoJSON(xe,ye);if(delete this._pendingRequest,typeof Ce!="object")throw new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`);if(R(Ce,!0),xe.filter){const je=c.cT(xe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map(At=>`${At.key}: ${At.message}`).join(", "));Ce={type:"FeatureCollection",features:Ce.features.filter(At=>je.value.evaluate({zoom:0},At))}}return Ce})}loadGeoJSON(xe,ye){return c._(this,void 0,void 0,function*(){const{promoteId:Ce}=xe;if(xe.request){const je=yield c.j(xe.request,ye);return this._dataUpdateable=c.cV(je.data,Ce)?c.cU(je.data,Ce):void 0,je.data}if(typeof xe.data=="string")try{const je=JSON.parse(xe.data);return this._dataUpdateable=c.cV(je,Ce)?c.cU(je,Ce):void 0,je}catch{throw new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`)}if(!xe.dataDiff)throw new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${xe.source}`);return c.cW(this._dataUpdateable,xe.dataDiff,Ce),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(xe){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(xe){return this._geoJSONIndex.getClusterExpansionZoom(xe.clusterId)}getClusterChildren(xe){return this._geoJSONIndex.getChildren(xe.clusterId)}getClusterLeaves(xe){return this._geoJSONIndex.getLeaves(xe.clusterId,xe.limit,xe.offset)}}class $r{constructor(xe){this.self=xe,this.actor=new c.J(xe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ye,Ce)=>{if(this.externalWorkerSourceTypes[ye])throw new Error(`Worker source with name "${ye}" already registered.`);this.externalWorkerSourceTypes[ye]=Ce},this.self.addProtocol=c.cA,this.self.removeProtocol=c.cB,this.self.registerRTLTextPlugin=ye=>{c.cX.setMethods(ye)},this.actor.registerMessageHandler("LDT",(ye,Ce)=>this._getDEMWorkerSource(ye,Ce.source).loadTile(Ce)),this.actor.registerMessageHandler("RDT",(ye,Ce)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ye,Ce.source).removeTile(Ce)})),this.actor.registerMessageHandler("GCEZ",(ye,Ce)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ye,Ce.type,Ce.source).getClusterExpansionZoom(Ce)})),this.actor.registerMessageHandler("GCC",(ye,Ce)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ye,Ce.type,Ce.source).getClusterChildren(Ce)})),this.actor.registerMessageHandler("GCL",(ye,Ce)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(ye,Ce.type,Ce.source).getClusterLeaves(Ce)})),this.actor.registerMessageHandler("LD",(ye,Ce)=>this._getWorkerSource(ye,Ce.type,Ce.source).loadData(Ce)),this.actor.registerMessageHandler("GD",(ye,Ce)=>this._getWorkerSource(ye,Ce.type,Ce.source).getData()),this.actor.registerMessageHandler("LT",(ye,Ce)=>this._getWorkerSource(ye,Ce.type,Ce.source).loadTile(Ce)),this.actor.registerMessageHandler("RT",(ye,Ce)=>this._getWorkerSource(ye,Ce.type,Ce.source).reloadTile(Ce)),this.actor.registerMessageHandler("AT",(ye,Ce)=>this._getWorkerSource(ye,Ce.type,Ce.source).abortTile(Ce)),this.actor.registerMessageHandler("RMT",(ye,Ce)=>this._getWorkerSource(ye,Ce.type,Ce.source).removeTile(Ce)),this.actor.registerMessageHandler("RS",(ye,Ce)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[ye]||!this.workerSources[ye][Ce.type]||!this.workerSources[ye][Ce.type][Ce.source])return;const je=this.workerSources[ye][Ce.type][Ce.source];delete this.workerSources[ye][Ce.type][Ce.source],je.removeSource!==void 0&&je.removeSource(Ce)})),this.actor.registerMessageHandler("RM",ye=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[ye],delete this.availableImages[ye],delete this.workerSources[ye],delete this.demWorkerSources[ye],this.globalStates.delete(ye)})),this.actor.registerMessageHandler("SR",(ye,Ce)=>c._(this,void 0,void 0,function*(){this.referrer=Ce})),this.actor.registerMessageHandler("SRPS",(ye,Ce)=>this._syncRTLPluginState(ye,Ce)),this.actor.registerMessageHandler("IS",(ye,Ce)=>c._(this,void 0,void 0,function*(){this.self.importScripts(Ce)})),this.actor.registerMessageHandler("SI",(ye,Ce)=>this._setImages(ye,Ce)),this.actor.registerMessageHandler("UL",(ye,Ce)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(ye).update(Ce.layers,Ce.removedIds,this._getGlobalState(ye))})),this.actor.registerMessageHandler("UGS",(ye,Ce)=>c._(this,void 0,void 0,function*(){const je=this._getGlobalState(ye);for(const Ke in Ce)je[Ke]=Ce[Ke]})),this.actor.registerMessageHandler("SL",(ye,Ce)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(ye).replace(Ce,this._getGlobalState(ye))}))}_getGlobalState(xe){let ye=this.globalStates.get(xe);return ye||(ye={},this.globalStates.set(xe,ye)),ye}_setImages(xe,ye){return c._(this,void 0,void 0,function*(){this.availableImages[xe]=ye;for(const Ce in this.workerSources[xe]){const je=this.workerSources[xe][Ce];for(const Ke in je)je[Ke].availableImages=ye}})}_syncRTLPluginState(xe,ye){return c._(this,void 0,void 0,function*(){return yield c.cX.syncState(ye,this.self.importScripts)})}_getAvailableImages(xe){let ye=this.availableImages[xe];return ye||(ye=[]),ye}_getLayerIndex(xe){let ye=this.layerIndexes[xe];return ye||(ye=this.layerIndexes[xe]=new s),ye}_getWorkerSource(xe,ye,Ce){if(this.workerSources[xe]||(this.workerSources[xe]={}),this.workerSources[xe][ye]||(this.workerSources[xe][ye]={}),!this.workerSources[xe][ye][Ce]){const je={sendAsync:(Ke,At)=>(Ke.targetMapId=xe,this.actor.sendAsync(Ke,At))};switch(ye){case"vector":this.workerSources[xe][ye][Ce]=new C(je,this._getLayerIndex(xe),this._getAvailableImages(xe));break;case"geojson":this.workerSources[xe][ye][Ce]=new Xr(je,this._getLayerIndex(xe),this._getAvailableImages(xe));break;default:this.workerSources[xe][ye][Ce]=new this.externalWorkerSourceTypes[ye](je,this._getLayerIndex(xe),this._getAvailableImages(xe))}}return this.workerSources[xe][ye][Ce]}_getDEMWorkerSource(xe,ye){return this.demWorkerSources[xe]||(this.demWorkerSources[xe]={}),this.demWorkerSources[xe][ye]||(this.demWorkerSources[xe][ye]=new N),this.demWorkerSources[xe][ye]}}return c.i(self)&&(self.worker=new $r(self)),$r}),n("index",["exports","./shared"],function(c,s){var d="5.9.0";function g(){var S=new s.A(4);return s.A!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S}let x,C;const N={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(S,o,f){const y=requestAnimationFrame(T=>{w(),o(T)}),{unsubscribe:w}=s.s(S.signal,"abort",()=>{w(),cancelAnimationFrame(y),f(s.c())},!1)},frameAsync(S){return new Promise((o,f)=>{this.frame(S,o,f)})},getImageData(S,o=0){return this.getImageCanvasContext(S).getImageData(-o,-o,S.width+2*o,S.height+2*o)},getImageCanvasContext(S){const o=window.document.createElement("canvas"),f=o.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return o.width=S.width,o.height=S.height,f.drawImage(S,0,0,S.width,S.height),f},resolveURL:S=>(x||(x=document.createElement("a")),x.href=S,x.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(C==null&&(C=matchMedia("(prefers-reduced-motion: reduce)")),C.matches)}};class B{static testProp(o){if(!B.docStyle)return o[0];for(let f=0;f<o.length;f++)if(o[f]in B.docStyle)return o[f];return o[0]}static create(o,f,y){const w=window.document.createElement(o);return f!==void 0&&(w.className=f),y&&y.appendChild(w),w}static createNS(o,f){return window.document.createElementNS(o,f)}static disableDrag(){B.docStyle&&B.selectProp&&(B.userSelect=B.docStyle[B.selectProp],B.docStyle[B.selectProp]="none")}static enableDrag(){B.docStyle&&B.selectProp&&(B.docStyle[B.selectProp]=B.userSelect)}static setTransform(o,f){o.style[B.transformProp]=f}static addEventListener(o,f,y,w={}){o.addEventListener(f,y,"passive"in w?w:w.capture)}static removeEventListener(o,f,y,w={}){o.removeEventListener(f,y,"passive"in w?w:w.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",B.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",B.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",B.suppressClickInternal,!0)},0)}static getScale(o){const f=o.getBoundingClientRect();return{x:f.width/o.offsetWidth||1,y:f.height/o.offsetHeight||1,boundingClientRect:f}}static getPoint(o,f,y){const w=f.boundingClientRect;return new s.P((y.clientX-w.left)/f.x-o.clientLeft,(y.clientY-w.top)/f.y-o.clientTop)}static mousePos(o,f){const y=B.getScale(o);return B.getPoint(o,y,f)}static touchPos(o,f){const y=[],w=B.getScale(o);for(let T=0;T<f.length;T++)y.push(B.getPoint(o,w,f[T]));return y}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}static sanitize(o){const f=new DOMParser().parseFromString(o,"text/html").body||document.createElement("body"),y=f.querySelectorAll("script");for(const w of y)w.remove();return B.clean(f),f.innerHTML}static isPossiblyDangerous(o,f){const y=f.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(o)||!y.includes("javascript:")&&!y.includes("data:"))||!!o.startsWith("on")||void 0}static clean(o){const f=o.children;for(const y of f)B.removeAttributes(y),B.clean(y)}static removeAttributes(o){for(const{name:f,value:y}of o.attributes)B.isPossiblyDangerous(f,y)&&o.removeAttribute(f)}}B.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,B.selectProp=B.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),B.transformProp=B.testProp(["transform","WebkitTransform"]);const M={supported:!1,testSupport:function(S){!D&&R&&(V?G(S):I=S)}};let I,R,D=!1,V=!1;function G(S){const o=S.createTexture();S.bindTexture(S.TEXTURE_2D,o);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,R),S.isContextLost())return;M.supported=!0}catch{}S.deleteTexture(o),D=!0}var Z;typeof document<"u"&&(R=document.createElement("img"),R.onload=()=>{I&&G(I),I=null,V=!0},R.onerror=()=>{D=!0,I=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(S){let o,f,y,w;S.resetRequestQueue=()=>{o=[],f=0,y=0,w={}},S.addThrottleControl=H=>{const te=y++;return w[te]=H,te},S.removeThrottleControl=H=>{delete w[H],L()},S.getImage=(H,te,ne=!0)=>new Promise((me,he)=>{M.supported&&(H.headers||(H.headers={}),H.headers.accept="image/webp,*/*"),s.e(H,{type:"image"}),o.push({abortController:te,requestParameters:H,supportImageRefresh:ne,state:"queued",onError:Se=>{he(Se)},onSuccess:Se=>{me(Se)}}),L()});const T=H=>s._(this,void 0,void 0,function*(){H.state="running";const{requestParameters:te,supportImageRefresh:ne,onError:me,onSuccess:he,abortController:Se}=H,Ue=ne===!1&&!s.i(self)&&!s.g(te.url)&&(!te.headers||Object.keys(te.headers).reduce((st,pt)=>st&&pt==="accept",!0));f++;const Xe=Ue?O(te,Se):s.m(te,Se);try{const st=yield Xe;delete H.abortController,H.state="completed",st.data instanceof HTMLImageElement||s.b(st.data)?he(st):st.data&&he({data:yield(Je=st.data,typeof createImageBitmap=="function"?s.f(Je):s.h(Je)),cacheControl:st.cacheControl,expires:st.expires})}catch(st){delete H.abortController,me(st)}finally{f--,L()}var Je}),L=()=>{const H=(()=>{for(const te of Object.keys(w))if(w[te]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let te=f;te<H&&o.length>0;te++){const ne=o.shift();ne.abortController.signal.aborted?te--:T(ne)}},O=(H,te)=>new Promise((ne,me)=>{const he=new Image,Se=H.url,Ue=H.credentials;Ue&&Ue==="include"?he.crossOrigin="use-credentials":(Ue&&Ue==="same-origin"||!s.d(Se))&&(he.crossOrigin="anonymous"),te.signal.addEventListener("abort",()=>{he.src="",me(s.c())}),he.fetchPriority="high",he.onload=()=>{he.onerror=he.onload=null,ne({data:he})},he.onerror=()=>{he.onerror=he.onload=null,te.signal.aborted||me(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},he.src=Se})}(Z||(Z={})),Z.resetRequestQueue();class X{constructor(o){this._transformRequestFn=o??null}transformRequest(o,f){return this._transformRequestFn&&this._transformRequestFn(o,f)||{url:o}}setTransformRequest(o){this._transformRequestFn=o}}function le(S){const o=[];if(typeof S=="string")o.push({id:"default",url:S});else if(S&&S.length>0){const f=[];for(const{id:y,url:w}of S){const T=`${y}${w}`;f.indexOf(T)===-1&&(f.push(T),o.push({id:y,url:w}))}}return o}function ae(S,o,f){try{const y=new URL(S);return y.pathname+=`${o}${f}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${S}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ce(S){const{userImage:o}=S;return!!(o&&o.render&&o.render())&&(S.data.replace(new Uint8Array(o.data.buffer)),!0)}class se extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:f,promiseResolve:y}of this.requestors)y(this._getImagesForIds(f));this.requestors=[]}}getImage(o){const f=this.images[o];if(f&&!f.data&&f.spriteData){const y=f.spriteData;f.data=new s.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),f.spriteData=null}return f}addImage(o,f){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,f)&&(this.images[o]=f)}_validate(o,f){let y=!0;const w=f.data||f.spriteData;return this._validateStretch(f.stretchX,w&&w.width)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "stretchX" value`))),y=!1),this._validateStretch(f.stretchY,w&&w.height)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "stretchY" value`))),y=!1),this._validateContent(f.content,f)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "content" value`))),y=!1),y}_validateStretch(o,f){if(!o)return!0;let y=0;for(const w of o){if(w[0]<y||w[1]<w[0]||f<w[1])return!1;y=w[1]}return!0}_validateContent(o,f){if(!o)return!0;if(o.length!==4)return!1;const y=f.spriteData,w=y&&y.width||f.data.width,T=y&&y.height||f.data.height;return!(o[0]<0||w<o[0]||o[1]<0||T<o[1]||o[2]<0||w<o[2]||o[3]<0||T<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,f,y=!0){const w=this.getImage(o);if(y&&(w.data.width!==f.data.width||w.data.height!==f.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=w.version+1,this.images[o]=f,this.updatedImages[o]=!0}removeImage(o){const f=this.images[o];delete this.images[o],delete this.patterns[o],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o){return new Promise((f,y)=>{let w=!0;if(!this.isLoaded())for(const T of o)this.images[T]||(w=!1);this.isLoaded()||w?f(this._getImagesForIds(o)):this.requestors.push({ids:o,promiseResolve:f})})}_getImagesForIds(o){const f={};for(const y of o){let w=this.getImage(y);w||(this.fire(new s.l("styleimagemissing",{id:y})),w=this.getImage(y)),w?f[y]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,textFitWidth:w.textFitWidth,textFitHeight:w.textFitHeight,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:s.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return f}getPixelSize(){const{width:o,height:f}=this.atlasImage;return{width:o,height:f}}getPattern(o){const f=this.patterns[o],y=this.getImage(o);if(!y)return null;if(f&&f.position.version===y.version)return f.position;if(f)f.position.version=y.version;else{const w={w:y.data.width+2,h:y.data.height+2,x:0,y:0},T=new s.I(w,y);this.patterns[o]={bin:w,position:T}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const f=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(o,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const T in this.patterns)o.push(this.patterns[T].bin);const{w:f,h:y}=s.p(o),w=this.atlasImage;w.resize({width:f||1,height:y||1});for(const T in this.patterns){const{bin:L}=this.patterns[T],O=L.x+1,H=L.y+1,te=this.getImage(T).data,ne=te.width,me=te.height;s.R.copy(te,w,{x:0,y:0},{x:O,y:H},{width:ne,height:me}),s.R.copy(te,w,{x:0,y:me-1},{x:O,y:H-1},{width:ne,height:1}),s.R.copy(te,w,{x:0,y:0},{x:O,y:H+me},{width:ne,height:1}),s.R.copy(te,w,{x:ne-1,y:0},{x:O-1,y:H},{width:1,height:me}),s.R.copy(te,w,{x:0,y:0},{x:O+ne,y:H},{width:1,height:me})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const f of o){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const y=this.getImage(f);y||s.w(`Image with ID: "${f}" was not found`),ce(y)&&this.updateImage(f,y)}}}const ue=1e20;function re(S,o,f,y,w,T,L,O,H){for(let te=o;te<o+y;te++)W(S,f*T+te,T,w,L,O,H);for(let te=f;te<f+w;te++)W(S,te*T+o,1,y,L,O,H)}function W(S,o,f,y,w,T,L){T[0]=0,L[0]=-ue,L[1]=ue,w[0]=S[o];for(let O=1,H=0,te=0;O<y;O++){w[O]=S[o+O*f];const ne=O*O;do{const me=T[H];te=(w[O]-w[me]+ne-me*me)/(O-me)/2}while(te<=L[H]&&--H>-1);H++,T[H]=O,L[H]=te,L[H+1]=ue}for(let O=0,H=0;O<y;O++){for(;L[H+1]<O;)H++;const te=T[H],ne=O-te;S[o+O*f]=w[te]+ne*ne}}class de{constructor(o,f,y){this.requestManager=o,this.localIdeographFontFamily=f,this.entries={},this.lang=y}setURL(o){this.url=o}getGlyphs(o){return s._(this,void 0,void 0,function*(){const f=[];for(const T in o)for(const L of o[T])f.push(this._getAndCacheGlyphsPromise(T,L));const y=yield Promise.all(f),w={};for(const{stack:T,id:L,glyph:O}of y)w[T]||(w[T]={}),w[T][L]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return w})}_getAndCacheGlyphsPromise(o,f){return s._(this,void 0,void 0,function*(){let y=this.entries[o];y||(y=this.entries[o]={glyphs:{},requests:{},ranges:{}});let w=y.glyphs[f];if(w!==void 0)return{stack:o,id:f,glyph:w};if(w=this._tinySDF(y,o,f),w)return y.glyphs[f]=w,{stack:o,id:f,glyph:w};const T=Math.floor(f/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(y.ranges[T])return{stack:o,id:f,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!y.requests[T]){const O=de.loadGlyphRange(o,T,this.url,this.requestManager);y.requests[T]=O}const L=yield y.requests[T];for(const O in L)this._doesCharSupportLocalGlyph(+O)||(y.glyphs[+O]=L[+O]);return y.ranges[T]=!0,{stack:o,id:f,glyph:L[f]||null}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(o))||s.u["CJK Unified Ideographs"](o)||s.u["Hangul Syllables"](o)||s.u.Hiragana(o)||s.u.Katakana(o)||s.u["CJK Symbols and Punctuation"](o)||s.u["Halfwidth and Fullwidth Forms"](o))}_tinySDF(o,f,y){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(y))return;let T=o.tinySDF;if(!T){let O="400";/bold/i.test(f)?O="900":/medium/i.test(f)?O="500":/light/i.test(f)&&(O="200"),T=o.tinySDF=new de.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:w,fontWeight:O})}const L=T.draw(String.fromCharCode(y));return{id:y,bitmap:new s.q({width:L.width||60,height:L.height||60},L.data),metrics:{width:L.glyphWidth/2||24,height:L.glyphHeight/2||24,left:L.glyphLeft/2+.5||0,top:L.glyphTop/2-27.5||-8,advance:L.glyphAdvance/2||24,isDoubleResolution:!0}}}}de.loadGlyphRange=function(S,o,f,y){return s._(this,void 0,void 0,function*(){const w=256*o,T=w+255,L=y.transformRequest(f.replace("{fontstack}",S).replace("{range}",`${w}-${T}`),"Glyphs"),O=yield s.n(L,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${o}, ${w}-${T}`);const H={};for(const te of s.o(O.data))H[te.id]=te;return H})},de.TinySDF=class{constructor({fontSize:S=24,buffer:o=3,radius:f=8,cutoff:y=.25,fontFamily:w="sans-serif",fontWeight:T="normal",fontStyle:L="normal",lang:O=null}={}){this.buffer=o,this.cutoff=y,this.radius=f,this.lang=O;const H=this.size=S+4*o,te=this._createCanvas(H),ne=this.ctx=te.getContext("2d",{willReadFrequently:!0});ne.font=`${L} ${T} ${S}px ${w}`,ne.textBaseline="alphabetic",ne.textAlign="left",ne.fillStyle="black",this.gridOuter=new Float64Array(H*H),this.gridInner=new Float64Array(H*H),this.f=new Float64Array(H),this.z=new Float64Array(H+1),this.v=new Uint16Array(H)}_createCanvas(S){const o=document.createElement("canvas");return o.width=o.height=S,o}draw(S){const{width:o,actualBoundingBoxAscent:f,actualBoundingBoxDescent:y,actualBoundingBoxLeft:w,actualBoundingBoxRight:T}=this.ctx.measureText(S),L=Math.ceil(f),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-w))),H=Math.min(this.size-this.buffer,L+Math.ceil(y)),te=O+2*this.buffer,ne=H+2*this.buffer,me=Math.max(te*ne,0),he=new Uint8ClampedArray(me),Se={data:he,width:te,height:ne,glyphWidth:O,glyphHeight:H,glyphTop:L,glyphLeft:0,glyphAdvance:o};if(O===0||H===0)return Se;const{ctx:Ue,buffer:Xe,gridInner:Je,gridOuter:st}=this;this.lang&&(Ue.lang=this.lang),Ue.clearRect(Xe,Xe,O,H),Ue.fillText(S,Xe,Xe+L);const pt=Ue.getImageData(Xe,Xe,O,H);st.fill(ue,0,me),Je.fill(0,0,me);for(let xt=0;xt<H;xt++)for(let mt=0;mt<O;mt++){const wt=pt.data[4*(xt*O+mt)+3]/255;if(wt===0)continue;const St=(xt+Xe)*te+mt+Xe;if(wt===1)st[St]=0,Je[St]=ue;else{const yt=.5-wt;st[St]=yt>0?yt*yt:0,Je[St]=yt<0?yt*yt:0}}re(st,0,0,te,ne,te,this.f,this.v,this.z),re(Je,Xe,Xe,O,H,te,this.f,this.v,this.z);for(let xt=0;xt<me;xt++){const mt=Math.sqrt(st[xt])-Math.sqrt(Je[xt]);he[xt]=Math.round(255-255*(mt/this.radius+this.cutoff))}return Se}};class Ee{constructor(){this.specification=s.v.light.position}possiblyEvaluate(o,f){return s.B(o.expression.evaluate(f))}interpolate(o,f,y){return{x:s.C.number(o.x,f.x,y),y:s.C.number(o.y,f.y,y),z:s.C.number(o.z,f.z,y)}}}let Ne;class ge extends s.E{constructor(o){super(),Ne=Ne||new s.r({anchor:new s.D(s.v.light.anchor),position:new Ee,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.t(Ne,void 0),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,f={}){if(!this._validate(s.x,o,f))for(const y in o){const w=o[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),w):this._transitionable.setValue(y,w)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,y){return(!y||y.validate!==!1)&&s.y(this,o.call(s.z,{value:f,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const Pe=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Ye extends s.E{constructor(o){super(),this._transitionable=new s.t(Pe,void 0),this.setSky(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0))}setSky(o,f={}){if(!this._validate(s.G,o,f)){o||(o={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in o){const w=o[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),w):this._transitionable.setValue(y,w)}}}getSky(){return this._transitionable.serialize()}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,y={}){return y?.validate!==!1&&s.y(this,o.call(s.z,s.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(o){return o<60?0:o<70?(o-60)/10:1}}class Me{constructor(o,f){this.width=o,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,f){const y=o.join(",")+String(f);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(o,f)),this.dashEntry[y]}getDashRanges(o,f,y){const w=[];let T=o.length%2==1?-o[o.length-1]*y:0,L=o[0]*y,O=!0;w.push({left:T,right:L,isDash:O,zeroLength:o[0]===0});let H=o[0];for(let te=1;te<o.length;te++){O=!O;const ne=o[te];T=H*y,H+=ne,L=H*y,w.push({left:T,right:L,isDash:O,zeroLength:ne===0})}return w}addRoundDash(o,f,y){const w=f/2;for(let T=-y;T<=y;T++){const L=this.width*(this.nextRow+y+T);let O=0,H=o[O];for(let te=0;te<this.width;te++){te/H.right>1&&(H=o[++O]);const ne=Math.abs(te-H.left),me=Math.abs(te-H.right),he=Math.min(ne,me);let Se;const Ue=T/y*(w+1);if(H.isDash){const Xe=w-Math.abs(Ue);Se=Math.sqrt(he*he+Xe*Xe)}else Se=w-Math.sqrt(he*he+Ue*Ue);this.data[L+te]=Math.max(0,Math.min(255,Se+128))}}}addRegularDash(o){for(let O=o.length-1;O>=0;--O){const H=o[O],te=o[O+1];H.zeroLength?o.splice(O,1):te&&te.isDash===H.isDash&&(te.left=H.left,o.splice(O,1))}const f=o[0],y=o[o.length-1];f.isDash===y.isDash&&(f.left=y.left-this.width,y.right=f.right+this.width);const w=this.width*this.nextRow;let T=0,L=o[T];for(let O=0;O<this.width;O++){O/L.right>1&&(L=o[++T]);const H=Math.abs(O-L.left),te=Math.abs(O-L.right),ne=Math.min(H,te);this.data[w+O]=Math.max(0,Math.min(255,(L.isDash?ne:-ne)+128))}}addDash(o,f){const y=f?7:0,w=2*y+1;if(this.nextRow+w>this.height)return s.w("LineAtlas out of space"),null;let T=0;for(let O=0;O<o.length;O++)T+=o[O];if(T!==0){const O=this.width/T,H=this.getDashRanges(o,this.width,O);f?this.addRoundDash(H,O,y):this.addRegularDash(H)}const L={y:this.nextRow+y,height:2*y,width:T};return this.nextRow+=w,this.dirty=!0,L}bind(o){const f=o.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}const De="maplibre_preloaded_worker_pool";class tt{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<tt.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[De]}numActive(){return Object.keys(this.active).length}}const ee=Math.floor(N.hardwareConcurrency/2);let fe,pe;function we(){return fe||(fe=new tt),fe}tt.workerCount=s.H(globalThis)?Math.max(Math.min(ee,3),1):1;class Le{constructor(o,f){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=f;const y=this.workerPool.acquire(f);for(let w=0;w<y.length;w++){const T=new s.J(y[w],f);T.name=`Worker ${w}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,f){const y=[];for(const w of this.actors)y.push(w.sendAsync({type:o,data:f}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(f=>{f.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}registerMessageHandler(o,f){for(const y of this.actors)y.registerMessageHandler(o,f)}}function lt(){return pe||(pe=new Le(we(),s.K),pe.registerMessageHandler("GR",(S,o,f)=>s.m(o,f))),pe}function rt(S,o){const f=s.L();return s.M(f,f,[1,1,0]),s.N(f,f,[.5*S.width,.5*S.height,1]),S.calculatePosMatrix?s.O(f,f,S.calculatePosMatrix(o.toUnwrapped())):f}function gt(S,o,f,y,w,T,L){var O;const H=function(he,Se,Ue){if(he)for(const Xe of he){const Je=Se[Xe];if(Je&&Je.source===Ue&&Je.type==="fill-extrusion")return!0}else for(const Xe in Se){const Je=Se[Xe];if(Je.source===Ue&&Je.type==="fill-extrusion")return!0}return!1}((O=w?.layers)!==null&&O!==void 0?O:null,o,S.id),te=T.maxPitchScaleFactor(),ne=S.tilesIn(y,te,H);ne.sort(dt);const me=[];for(const he of ne)me.push({wrappedTileID:he.tileID.wrapped().key,queryResults:he.tile.queryRenderedFeatures(o,f,S._state,he.queryGeometry,he.cameraQueryGeometry,he.scale,w,T,te,rt(S.transform,he.tileID),L?(Se,Ue)=>L(he.tileID,Se,Ue):void 0)});return function(he,Se){for(const Ue in he)for(const Xe of he[Ue])qt(Xe,Se);return he}(function(he){const Se={},Ue={};for(const Xe of he){const Je=Xe.queryResults,st=Xe.wrappedTileID,pt=Ue[st]=Ue[st]||{};for(const xt in Je){const mt=Je[xt],wt=pt[xt]=pt[xt]||{},St=Se[xt]=Se[xt]||[];for(const yt of mt)wt[yt.featureIndex]||(wt[yt.featureIndex]=!0,St.push(yt))}}return Se}(me),S)}function dt(S,o){const f=S.tileID,y=o.tileID;return f.overscaledZ-y.overscaledZ||f.canonical.y-y.canonical.y||f.wrap-y.wrap||f.canonical.x-y.canonical.x}function qt(S,o){const f=S.feature,y=o.getFeatureState(f.layer["source-layer"],f.id);f.source=f.layer.source,f.layer["source-layer"]&&(f.sourceLayer=f.layer["source-layer"]),f.state=y}function Te(S,o,f){return s._(this,void 0,void 0,function*(){let y=S;if(S.url?y=(yield s.j(o.transformRequest(S.url,"Source"),f)).data:yield N.frameAsync(f),!y)return null;const w=s.Q(s.e(y,S),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(w.vectorLayerIds=y.vector_layers.map(T=>T.id)),w})}class at{constructor(o,f){o&&(f?this.setSouthWest(o).setNorthEast(f):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof s.S?new s.S(o.lng,o.lat):s.S.convert(o),this}setSouthWest(o){return this._sw=o instanceof s.S?new s.S(o.lng,o.lat):s.S.convert(o),this}extend(o){const f=this._sw,y=this._ne;let w,T;if(o instanceof s.S)w=o,T=o;else{if(!(o instanceof at))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(at.convert(o)):this.extend(s.S.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(s.S.convert(o)):this;if(w=o._sw,T=o._ne,!w||!T)return this}return f||y?(f.lng=Math.min(w.lng,f.lng),f.lat=Math.min(w.lat,f.lat),y.lng=Math.max(T.lng,y.lng),y.lat=Math.max(T.lat,y.lat)):(this._sw=new s.S(w.lng,w.lat),this._ne=new s.S(T.lng,T.lat)),this}getCenter(){return new s.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.S(this.getWest(),this.getNorth())}getSouthEast(){return new s.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:f,lat:y}=s.S.convert(o);let w=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&w}static convert(o){return o instanceof at?o:o&&new at(o)}static fromLngLat(o,f=0){const y=360*f/40075017,w=y/Math.cos(Math.PI/180*o.lat);return new at(new s.S(o.lng-w,o.lat-y),new s.S(o.lng+w,o.lat+y))}adjustAntiMeridian(){const o=new s.S(this._sw.lng,this._sw.lat),f=new s.S(this._ne.lng,this._ne.lat);return new at(o,o.lng>f.lng?new s.S(f.lng+360,f.lat):f)}}class kt{constructor(o,f,y){this.bounds=at.convert(this.validateBounds(o)),this.minzoom=f||0,this.maxzoom=y||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const f=Math.pow(2,o.z),y=Math.floor(s.V(this.bounds.getWest())*f),w=Math.floor(s.U(this.bounds.getNorth())*f),T=Math.ceil(s.V(this.bounds.getEast())*f),L=Math.ceil(s.U(this.bounds.getSouth())*f);return o.x>=y&&o.x<T&&o.y>=w&&o.y<L}}class ze extends s.E{constructor(o,f,y,w){if(super(),this.id=o,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.Q(f,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield Te(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o&&(s.e(this,o),o.bounds&&(this.tileBounds=new kt(o.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this._loaded=!0,this.fire(new s.k(o))}})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.abort(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(o){return s._(this,void 0,void 0,function*(){const f=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(f,"Tile"),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};y.request.collectResourceTiming=this._collectResourceTiming;let w="RT";if(o.actor&&o.state!=="expired"){if(o.state==="loading")return new Promise((T,L)=>{o.reloadPromise={resolve:T,reject:L}})}else o.actor=this.dispatcher.getActor(),w="LT";o.abortController=new AbortController;try{const T=yield o.actor.sendAsync({type:w,data:y},o.abortController);if(delete o.abortController,o.aborted)return;this._afterTileLoadWorkerResponse(o,T)}catch(T){if(delete o.abortController,o.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(o,null)}})}_afterTileLoadWorkerResponse(o,f){if(f&&f.resourceTiming&&(o.resourceTiming=f.resourceTiming),f&&this.map._refreshExpiredTiles&&o.setExpiryData(f),o.loadVectorData(f,this.map.painter),o.reloadPromise){const y=o.reloadPromise;o.reloadPromise=null,this.loadTile(o).then(y.resolve).catch(y.reject)}}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.actor&&(yield o.actor.sendAsync({type:"AT",data:{uid:o.uid,type:this.type,source:this.id}}))})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.unloadVectorData(),o.actor&&(yield o.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Et extends s.E{constructor(o,f,y,w){super(),this.id=o,this.dispatcher=y,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},f),s.e(this,s.Q(f,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(o=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const f=yield Te(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,f&&(s.e(this,f),f.bounds&&(this.tileBounds=new kt(f.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:o})))}catch(f){this._tileJSONRequest=null,this._loaded=!0,this.fire(new s.k(f))}})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(o){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),o(),this.load(!0)}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}serialize(){return s.e({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o){return s._(this,void 0,void 0,function*(){const f=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.abortController=new AbortController;try{const y=yield Z.getImage(this.map._requestManager.transformRequest(f,"Tile"),o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&o.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const w=this.map.painter.context,T=w.gl,L=y.data;o.texture=this.map.painter.getTileTexture(L.width),o.texture?o.texture.update(L,{useMipmap:!0}):(o.texture=new s.T(w,L,T.RGBA,{useMipmap:!0}),o.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),o.state="loaded"}}catch(y){if(delete o.abortController,o.aborted)o.state="unloaded";else if(y)throw o.state="errored",y}})}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController)})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.texture&&this.map.painter.saveTileTexture(o.texture)})}hasTransition(){return!1}}class Pt extends Et{constructor(o,f,y,w){super(o,f,y,w),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(o){return s._(this,void 0,void 0,function*(){const f=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(f,"Tile");o.neighboringTiles=this._getNeighboringTiles(o.tileID),o.abortController=new AbortController;try{const w=yield Z.getImage(y,o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(w&&w.data){const T=w.data;this.map._refreshExpiredTiles&&(w.cacheControl||w.expires)&&o.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const L=s.b(T)&&s.W()?T:yield this.readImageNow(T),O={type:this.type,uid:o.uid,source:this.id,rawImageData:L,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!o.actor||o.state==="expired"){o.actor=this.dispatcher.getActor();const H=yield o.actor.sendAsync({type:"LDT",data:O});o.dem=H,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded"}}}catch(w){if(delete o.abortController,o.aborted)o.state="unloaded";else if(w)throw o.state="errored",w}})}readImageNow(o){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.X()){const f=o.width+2,y=o.height+2;try{return new s.R({width:f,height:y},yield s.Y(o,-1,-1,f,y))}catch{}}return N.getImageData(o,1)})}_getNeighboringTiles(o){const f=o.canonical,y=Math.pow(2,f.z),w=(f.x-1+y)%y,T=f.x===0?o.wrap-1:o.wrap,L=(f.x+1+y)%y,O=f.x+1===y?o.wrap+1:o.wrap,H={};return H[new s.Z(o.overscaledZ,T,f.z,w,f.y).key]={backfilled:!1},H[new s.Z(o.overscaledZ,O,f.z,L,f.y).key]={backfilled:!1},f.y>0&&(H[new s.Z(o.overscaledZ,T,f.z,w,f.y-1).key]={backfilled:!1},H[new s.Z(o.overscaledZ,o.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},H[new s.Z(o.overscaledZ,O,f.z,L,f.y-1).key]={backfilled:!1}),f.y+1<y&&(H[new s.Z(o.overscaledZ,T,f.z,w,f.y+1).key]={backfilled:!1},H[new s.Z(o.overscaledZ,o.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},H[new s.Z(o.overscaledZ,O,f.z,L,f.y+1).key]={backfilled:!1}),H}unloadTile(o){return s._(this,void 0,void 0,function*(){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&(yield o.actor.sendAsync({type:"RDT",data:{type:this.type,uid:o.uid,source:this.id}}))})}}class Sr extends s.E{constructor(o,f,y,w){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:f.data},this.actor=y.getActor(),this.setEventedParent(w),this._data=f.data,this._options=s.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId,f.clusterMaxZoom!==void 0&&this.maxzoom<=f.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${f.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(f.buffer!==void 0?f.buffer:128),tolerance:this._pixelsToTileUnits(f.tolerance!==void 0?f.tolerance:.375),extent:s.$,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(f.clusterMaxZoom),minPoints:Math.max(2,f.clusterMinPoints||2),extent:s.$,radius:this._pixelsToTileUnits(f.clusterRadius||50),log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(o){return o*(s.$/this.tileSize)}_getClusterMaxZoom(o){const f=o?Math.round(o):this.maxzoom-1;return Number.isInteger(o)||o===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${o}" rounded to "${f}"`),f}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._pendingWorkerUpdate={data:o},this._updateWorkerData(),this}updateData(o){return this._pendingWorkerUpdate.diff=s.a0(this._pendingWorkerUpdate.diff,o),this._updateWorkerData(),this}getData(){return s._(this,void 0,void 0,function*(){const o=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:o})})}getCoordinatesFromGeometry(o){return o.type==="GeometryCollection"?o.geometries.map(f=>f.coordinates).flat(1/0):o.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){const o=new at,f=yield this.getData();let y;switch(f.type){case"FeatureCollection":y=f.features.map(w=>this.getCoordinatesFromGeometry(w.geometry)).flat(1/0);break;case"Feature":y=this.getCoordinatesFromGeometry(f.geometry);break;default:y=this.getCoordinatesFromGeometry(f)}if(y.length==0)return o;for(let w=0;w<y.length-1;w+=2)o.extend([y[w],y[w+1]]);return o})}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(o.clusterRadius)),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(o.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(o){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:o,source:this.id}})}getClusterChildren(o){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:o,source:this.id}})}getClusterLeaves(o,f,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:o,limit:f,offset:y}})}_updateWorkerData(){return s._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:o,diff:f}=this._pendingWorkerUpdate;if(!o&&!f)return void s.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const y=s.e({type:this.type},this.workerOptions);o?(typeof o=="string"?(y.request=this.map._requestManager.transformRequest(N.resolveURL(o),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(o),this._pendingWorkerUpdate.data=void 0):f&&(y.dataDiff=f,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const w=yield this.actor.sendAsync({type:"LD",data:y});if(this._isUpdatingWorker=!1,this._removed||w.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));this._data=w.data;let T=null;w.resourceTiming&&w.resourceTiming[this.id]&&(T=w.resourceTiming[this.id].slice(0));const L={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&s.e(L,{resourceTiming:T}),this.fire(new s.l("data",Object.assign(Object.assign({},L),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},L),{sourceDataType:"content"})))}catch(w){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(w))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(o){return s._(this,void 0,void 0,function*(){const f=o.actor?"RT":"LT";o.actor=this.actor;const y={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};o.abortController=new AbortController;const w=yield this.actor.sendAsync({type:f,data:y},o.abortController);delete o.abortController,o.unloadVectorData(),o.aborted||o.loadVectorData(w,this.map.painter,f==="RT")})}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.aborted=!0})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class or extends s.E{constructor(o,f,y,w){super(),this.flippedWindingOrder=!1,this.id=o,this.dispatcher=y,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=f}load(o){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const f=yield Z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,f&&f.data&&(this.image=f.data,o&&(this.coordinates=o),this._finishLoading())}catch(f){this._request=null,this._loaded=!0,this.fire(new s.k(f))}})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=o.url,this.load(o.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(o){this.coordinates=o;const f=o.map(s.a1.fromLngLat);var y;return this.tileID=function(w){const T=s.a2.fromPoints(w),L=T.width(),O=T.height(),H=Math.max(L,O),te=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),ne=Math.pow(2,te);return new s.a4(te,Math.floor((T.minX+T.maxX)/2*ne),Math.floor((T.minY+T.maxY)/2*ne))}(f),this.terrainTileRanges=this._getOverlappingTileRanges(f),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=f.map(w=>this.tileID.getTilePoint(w)._round()),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,f=o.gl;this.texture||(this.texture=new s.T(o,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let y=!1;for(const w in this.tiles){const T=this.tiles[w];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={}):o.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(o){const{minX:f,minY:y,maxX:w,maxY:T}=s.a2.fromPoints(o),L={};for(let O=0;O<=s.a3;O++){const H=Math.pow(2,O),te=Math.floor(f*H),ne=Math.floor(y*H),me=Math.floor(w*H),he=Math.floor(T*H);L[O]={minTileX:te,minTileY:ne,maxTileX:me,maxTileY:he}}return L}}class Wr extends or{constructor(o,f,y,w){super(o,f,y,w),this.roundZoom=!0,this.type="video",this.options=f}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const o=this.options;this.urls=[];for(const f of o.urls)this.urls.push(this.map._requestManager.transformRequest(f,"Source").url);try{const f=yield s.a5(this.urls);if(this._loaded=!0,!f)return;this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(f){this.fire(new s.k(f))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const f=this.video.seekable;o<f.start(0)||o>f.end(0)?this.fire(new s.k(new s.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,f=o.gl;this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(o,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let y=!1;for(const w in this.tiles){const T=this.tiles[w];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Hr extends or{constructor(o,f,y,w){super(o,f,y,w),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(L=>typeof L!="number"))||this.fire(new s.k(new s.a6(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a6(`sources.${o}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new s.k(new s.a6(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a6(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a6(`sources.${o}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,y=f.gl;this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.T(f,this.canvas,y.RGBA,{premultiply:!0});let w=!1;for(const T in this.tiles){const L=this.tiles[T];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,w=!0)}w&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const ti={},Gr=S=>{switch(S){case"geojson":return Sr;case"image":return or;case"raster":return Et;case"raster-dem":return Pt;case"vector":return ze;case"video":return Wr;case"canvas":return Hr}return ti[S]},wi="RTLPluginLoaded";class Bi extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=lt()}_syncState(o){return this.status=o,this.dispatcher.broadcast("SRPS",{pluginStatus:o,pluginURL:this.url}).catch(f=>{throw this.status="error",f})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(o){return s._(this,arguments,void 0,function*(f,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=N.resolveURL(f),!this.url)throw new Error(`requested url ${f} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(wi))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Zr=null;function Xr(){return Zr||(Zr=new Bi),Zr}var $r,ot;(function(S){S[S.Base=0]="Base",S[S.Parent=1]="Parent"})($r||($r={})),function(S){S[S.Departing=0]="Departing",S[S.Incoming=1]="Incoming"}(ot||(ot={}));class xe{constructor(o,f){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=o,this.uid=s.a7(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(o){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(o||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:o,fadingDirection:f,fadingParentID:y,fadeEndTime:w}){this.resetFadeLogic(),this.fadingRole=o,this.fadingDirection=f,this.fadingParentID=y,this.fadeEndTime=w}setSelfFadeLogic(o){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=o}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=N.now(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,f,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(w,T){const L={};if(!T)return L;for(const O of w){const H=O.layerIds.map(te=>T.getLayer(te)).filter(Boolean);if(H.length!==0){O.layers=H,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(te=>H.filter(ne=>ne.id===te)[0]));for(const te of H)L[te.id]=O}}return L}(o.buckets,f?.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const T=this.buckets[w];if(T instanceof s.a9){if(this.hasSymbolBuckets=!0,!y)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const T=this.buckets[w];if(T instanceof s.a9&&T.hasRTLText){this.hasRTLText=!0,Xr().lazyLoad();break}}this.queryPadding=0;for(const w in this.buckets){const T=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(w).queryRadius(T))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),this.dashPositions=o.dashPositions}else this.collisionBoxArray=new s.a8}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const y in this.buckets){const w=this.buckets[y];w.uploadPending()&&w.upload(o)}const f=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(o,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(o,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,f,y,w,T,L,O,H,te,ne,me){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:T,scale:L,tileSize:this.tileSize,pixelPosMatrix:ne,transform:H,params:O,queryPadding:this.queryPadding*te,getElevation:me},o,f,y):{}}querySourceFeatures(o,f){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const w=y.loadVTLayers(),T=f&&f.sourceLayer?f.sourceLayer:"",L=w._geojsonTileLayer||w[T];if(!L)return;const O=s.aa(f?.filter,f?.globalState),{z:H,x:te,y:ne}=this.tileID.canonical,me={z:H,x:te,y:ne};for(let he=0;he<L.length;he++){const Se=L.feature(he);if(O.needGeometry){const Je=s.ab(Se,!0);if(!O.filter(new s.F(this.tileID.overscaledZ),Je,this.tileID.canonical))continue}else if(!O.filter(new s.F(this.tileID.overscaledZ),Se))continue;const Ue=y.getId(Se,T),Xe=new s.ac(Se,H,te,ne,Ue);Xe.tile=me,o.push(Xe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const f=this.expirationTime;if(o.cacheControl){const y=s.ad(o.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const y=Date.now();let w=!1;if(this.expirationTime>y)w=!1;else if(f)if(this.expirationTime<f)w=!0;else{const T=this.expirationTime-f;T?this.expirationTime=y+Math.max(T,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!f.style.hasLayer(w))continue;const T=this.buckets[w],L=T.layers[0].sourceLayer||"_geojsonTileLayer",O=y[L],H=o[L];if(!O||!H||Object.keys(H).length===0)continue;T.update(H,O,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const te=f&&f.style&&f.style.getLayer(w);te&&(this.queryPadding=Math.max(this.queryPadding,te.queryRadius(T)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<N.now()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(o){this.symbolFadeHoldUntil=N.now()+o}setDependencies(o,f){const y={};for(const w of f)y[w]=!0;this.dependencies[o]=y}hasDependency(o,f){for(const y of o){const w=this.dependencies[y];if(w){for(const T of f)if(w[T])return!0}}return!1}}class ye{constructor(o,f){this.max=o,this.onRemove=f,this.reset()}reset(){for(const o in this.data)for(const f of this.data[o])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(o,f,y){const w=o.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const T={value:f,timeout:void 0};if(y!==void 0&&(T.timeout=setTimeout(()=>{this.remove(o,T)},y)),this.data[w].push(T),this.order.push(w),this.order.length>this.max){const L=this._getAndRemoveByKey(this.order[0]);L&&this.onRemove(L)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const f=this.data[o].shift();return f.timeout&&clearTimeout(f.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),f.value}getByKey(o){const f=this.data[o];return f?f[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,f){if(!this.has(o))return this;const y=o.wrapped().key,w=f===void 0?0:this.data[y].indexOf(f),T=this.data[y][w];return this.data[y].splice(w,1),T.timeout&&clearTimeout(T.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(T.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(o){const f=[];for(const y in this.data)for(const w of this.data[y])o(w.value)||f.push(w);for(const y of f)this.remove(y.value.tileID,y)}}class Ce{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,f,y){const w=String(f);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][w]=this.stateChanges[o][w]||{},s.e(this.stateChanges[o][w],y),this.deletedStates[o]===null){this.deletedStates[o]={};for(const T in this.state[o])T!==w&&(this.deletedStates[o][T]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][w]===null){this.deletedStates[o][w]={};for(const T in this.state[o][w])y[T]||(this.deletedStates[o][w][T]=null)}else for(const T in y)this.deletedStates[o]&&this.deletedStates[o][w]&&this.deletedStates[o][w][T]===null&&delete this.deletedStates[o][w][T]}removeFeatureState(o,f,y){if(this.deletedStates[o]===null)return;const w=String(f);if(this.deletedStates[o]=this.deletedStates[o]||{},y&&f!==void 0)this.deletedStates[o][w]!==null&&(this.deletedStates[o][w]=this.deletedStates[o][w]||{},this.deletedStates[o][w][y]=null);else if(f!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][w])for(y in this.deletedStates[o][w]={},this.stateChanges[o][w])this.deletedStates[o][w][y]=null;else this.deletedStates[o][w]=null;else this.deletedStates[o]=null}getState(o,f){const y=String(f),w=s.e({},(this.state[o]||{})[y],(this.stateChanges[o]||{})[y]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const T=this.deletedStates[o][f];if(T===null)return{};for(const L in T)delete w[L]}return w}initializeTileState(o,f){o.setFeatureState(this.state,f)}coalesceChanges(o,f){const y={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const T={};for(const L in this.stateChanges[w])this.state[w][L]||(this.state[w][L]={}),s.e(this.state[w][L],this.stateChanges[w][L]),T[L]=this.state[w][L];y[w]=T}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const T={};if(this.deletedStates[w]===null)for(const L in this.state[w])T[L]={},this.state[w][L]={};else for(const L in this.deletedStates[w]){if(this.deletedStates[w][L]===null)this.state[w][L]={};else for(const O of Object.keys(this.deletedStates[w][L]))delete this.state[w][L][O];T[L]=this.state[w][L]}y[w]=y[w]||{},s.e(y[w],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const w in o)o[w].setFeatureState(y,f)}}const je=89.25;function Ke(S,o){const f=s.ah(o.lat,-s.ai,s.ai);return new s.P(s.V(o.lng)*S,s.U(f)*S)}function At(S,o){return new s.a1(o.x/S,o.y/S).toLngLat()}function Ft(S){return S.cameraToCenterDistance*Math.min(.85*Math.tan(s.ae(90-S.pitch)),Math.tan(s.ae(je-S.pitch)))}function vt(S,o){const f=S.canonical,y=o/s.af(f.z),w=f.x+Math.pow(2,f.z)*S.wrap,T=s.ag(new Float64Array(16));return s.M(T,T,[w*y,f.y*y,0]),s.N(T,T,[y/s.$,y/s.$,1]),T}function Nt(S,o,f,y,w){const T=s.a1.fromLngLat(S,o),L=w*s.aj(1,S.lat),O=L*Math.cos(s.ae(f)),H=Math.sqrt(L*L-O*O),te=H*Math.sin(s.ae(-y)),ne=H*Math.cos(s.ae(-y));return new s.a1(T.x+te,T.y+ne,T.z+O)}function Ht(S,o,f){const y=o.intersectsFrustum(S);if(!f||y===0)return y;const w=o.intersectsPlane(f);return w===0?0:y===2&&w===2?2:1}function Gt(S,o,f){let y=0;const w=(f-o)/10;for(let T=0;T<10;T++)y+=w*Math.pow(Math.cos(o+(T+.5)/10*(f-o)),S);return y}function Fr(S,o){return function(f,y,w,T,L){const O=2*((S-1)/s.ak(Math.cos(s.ae(je-L))/Math.cos(s.ae(je)))-1),H=Math.acos(w/T),te=2*Gt(O-1,0,s.ae(L/2)),ne=Math.min(s.ae(je),H+s.ae(L/2)),me=Gt(O-1,Math.min(ne,H-s.ae(L/2)),ne),he=Math.atan(y/w),Se=Math.hypot(y,w);let Ue=f;return Ue+=s.ak(T/Se/Math.max(.5,Math.cos(s.ae(L/2)))),Ue+=O*s.ak(Math.cos(he))/2,Ue-=s.ak(Math.max(1,me/te/o))/2,Ue}}const kr=Fr(9.314,3);function Bt(S,o){const f=(o.roundZoom?Math.round:Math.floor)(S.zoom+s.ak(S.tileSize/o.tileSize));return Math.max(0,f)}function ei(S,o){const f=S.getCameraFrustum(),y=S.getClippingPlane(),w=S.screenPointToMercatorCoordinate(S.getCameraPoint()),T=s.a1.fromLngLat(S.center,S.elevation);w.z=T.z+Math.cos(S.pitchInRadians)*S.cameraToCenterDistance/S.worldSize;const L=S.getCoveringTilesDetailsProvider(),O=L.allowVariableZoom(S,o),H=Bt(S,o),te=o.minzoom||0,ne=o.maxzoom!==void 0?o.maxzoom:S.maxZoom,me=Math.min(Math.max(0,H),ne),he=Math.pow(2,me),Se=[he*w.x,he*w.y,0],Ue=[he*T.x,he*T.y,0],Xe=Math.hypot(T.x-w.x,T.y-w.y),Je=Math.abs(T.z-w.z),st=Math.hypot(Xe,Je),pt=wt=>({zoom:0,x:0,y:0,wrap:wt,fullyVisible:!1}),xt=[],mt=[];if(S.renderWorldCopies&&L.allowWorldCopies())for(let wt=1;wt<=3;wt++)xt.push(pt(-wt)),xt.push(pt(wt));for(xt.push(pt(0));xt.length>0;){const wt=xt.pop(),St=wt.x,yt=wt.y;let Lt=wt.fullyVisible;const rr={x:St,y:yt,z:wt.zoom},$t=L.getTileBoundingVolume(rr,wt.wrap,S.elevation,o);if(!Lt){const Br=Ht(f,$t,y);if(Br===0)continue;Lt=Br===2}const Zt=L.distanceToTile2d(w.x,w.y,rr,$t);let Yt=H;O&&(Yt=(o.calculateTileZoom||kr)(S.zoom+s.ak(S.tileSize/o.tileSize),Zt,Je,st,S.fov)),Yt=(o.roundZoom?Math.round:Math.floor)(Yt),Yt=Math.max(0,Yt);const wr=Math.min(Yt,ne);if(wt.wrap=L.getWrap(T,rr,wt.wrap),wt.zoom>=wr){if(wt.zoom<te)continue;const Br=me-wt.zoom,pr=Se[0]-.5-(St<<Br),Kr=Se[1]-.5-(yt<<Br),Ci=o.reparseOverscaled?Math.max(wt.zoom,Yt):wt.zoom;mt.push({tileID:new s.Z(wt.zoom===ne?Ci:wt.zoom,wt.wrap,wt.zoom,St,yt),distanceSq:s.al([Ue[0]-.5-St,Ue[1]-.5-yt]),tileDistanceToCamera:Math.sqrt(pr*pr+Kr*Kr)})}else for(let Br=0;Br<4;Br++)xt.push({zoom:wt.zoom+1,x:(St<<1)+Br%2,y:(yt<<1)+(Br>>1),wrap:wt.wrap,fullyVisible:Lt})}return mt.sort((wt,St)=>wt.distanceSq-St.distanceSq).map(wt=>wt.tileID)}const Yi=s.a2.fromPoints([new s.P(0,0),new s.P(s.$,s.$)]);class jr extends s.E{constructor(o,f,y){super(),this.id=o,this.dispatcher=y,this.on("data",w=>this._dataHandler(w)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,T,L,O)=>{const H=new(Gr(T.type))(w,T,L,O);if(H.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${H.id}`);return H})(o,f,y,this),this._tiles={},this._cache=new ye(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Ce,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const f=this._tiles[o];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,f,y){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(o),this._tileLoaded(o,f,y)}catch(w){o.state="errored",w.status!==404?this._source.fire(new s.k(w,{tile:o})):this.update(this.transform,this.terrain)}})}_unloadTile(o){this._source.unloadTile&&this._source.unloadTile(o)}_abortTile(o){this._source.abortTile&&this._source.abortTile(o),this._source.fire(new s.l("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const y=this._tiles[f];y.upload(o),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(Di).map(o=>o.key)}getRenderableIds(o){const f=[];for(const y in this._tiles)this._isIdRenderable(y,o)&&f.push(this._tiles[y]);return o?f.sort((y,w)=>{const T=y.tileID,L=w.tileID,O=new s.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),H=new s.P(L.canonical.x,L.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-L.overscaledZ||H.y-O.y||H.x-O.x}).map(y=>y.tileID.key):f.map(y=>y.tileID).sort(Di).map(y=>y.key)}hasRenderableParent(o){const f=o.overscaledZ-1;if(f>=this._source.minzoom){const y=this._getLoadedTile(o.scaledTo(f));if(y)return this._isIdRenderable(y.tileID.key)}return!1}_isIdRenderable(o,f=!1){var y;return(y=this._tiles[o])===null||y===void 0?void 0:y.isRenderable(f)}reload(o){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const f in this._tiles)o?this._reloadTile(f,"expired"):this._tiles[f].state!=="errored"&&this._reloadTile(f,"reloading")}}_reloadTile(o,f){return s._(this,void 0,void 0,function*(){const y=this._tiles[o];y&&(y.state!=="loading"&&(y.state=f),yield this._loadTile(y,o,f))})}_tileLoaded(o,f,y){o.timeAdded=N.now(),y==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(f,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const f=this.getRenderableIds();for(let w=0;w<f.length;w++){const T=f[w];if(o.neighboringTiles&&o.neighboringTiles[T]){const L=this.getTileByID(T);y(o,L),y(L,o)}}function y(w,T){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let L=T.tileID.canonical.x-w.tileID.canonical.x;const O=T.tileID.canonical.y-w.tileID.canonical.y,H=Math.pow(2,w.tileID.canonical.z),te=T.tileID.key;L===0&&O===0||Math.abs(O)>1||(Math.abs(L)>1&&(Math.abs(L+H)===1?L+=H:Math.abs(L-H)===1&&(L-=H)),T.dem&&w.dem&&(w.dem.backfillBorder(T.dem,L,O),w.neighboringTiles&&w.neighboringTiles[te]&&(w.neighboringTiles[te].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,f){const y=Object.values(o),w=this._getLoadedDescendents(y),T={};for(const L of y){const O=w[L.key];if(!O?.length){T[L.key]=L;continue}const H=L.overscaledZ+jr.maxUnderzooming,te=O.filter(he=>he.tileID.overscaledZ<=H);if(!te.length){T[L.key]=L;continue}const ne=Math.min(...te.map(he=>he.tileID.overscaledZ)),me=te.filter(he=>he.tileID.overscaledZ===ne).map(he=>he.tileID);for(const he of me)f[he.key]=he;this._areDescendentsComplete(me,ne,L.overscaledZ)||(T[L.key]=L)}return T}_getLoadedDescendents(o){var f;const y={};for(const w in this._tiles){const T=this._tiles[w];if(T.hasData())for(const L of o)T.tileID.isChildOf(L)&&(y[f=L.key]||(y[f]=[])).push(T)}return y}_areDescendentsComplete(o,f,y){return o.length===1&&o[0].isOverscaled()?o[0].overscaledZ===f:Math.pow(4,f-y)===o.length}_getLoadedTile(o){const f=this._tiles[o.key];return f?.hasData()?f:null}updateCacheSize(o){const f=Math.ceil(o.width/this._source.tileSize)+1,y=Math.ceil(o.height/this._source.tileSize)+1,w=Math.floor(f*y*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(T)}handleWrapJump(o){const f=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,f){const y={};for(const w in this._tiles){const T=this._tiles[w];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+f),y[T.tileID.key]=T}this._tiles=y;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(o,f){if(!this._sourceLoaded||this._paused)return;let y;this.transform=o,this.terrain=f,this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?y=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(H=>new s.Z(H.canonical.z,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y)):(y=ei(o,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter(H=>this._source.hasTile(H)))):y=[],this.usedForTerrain&&(y=this._addTerrainIdealTiles(y));const w=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,w&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=Bt(o,this._source),L=this._updateRetainedTiles(y,T),O=In(this._source.type);O&&this._rasterFadeDuration>0&&!f&&this._updateFadingTiles(y,L),O?this._cleanUpRasterTiles(L):this._cleanUpVectorTiles(L)}_cleanUpRasterTiles(o){for(const f in this._tiles)o[f]||this._removeTile(f)}_cleanUpVectorTiles(o){for(const f in this._tiles){const y=this._tiles[f];o[f]?y.clearSymbolFadeHold():y.hasSymbolBuckets?y.holdingForSymbolFade()?y.symbolFadeFinished()&&this._removeTile(f):y.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(f)}}_addTerrainIdealTiles(o){const f=[];for(const y of o)if(y.canonical.z>this._source.minzoom){const w=y.scaledTo(y.canonical.z-1);f.push(w);const T=y.scaledTo(Math.max(this._source.minzoom,Math.min(y.canonical.z,5)));f.push(T)}return o.concat(f)}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForSymbolFade()&&this._removeTile(o)}_updateRetainedTiles(o,f){var y;const w={},T={},L=Math.max(f-jr.maxOverzooming,this._source.minzoom);let O={};for(const H of o){const te=this._addTile(H);w[H.key]=H,te.hasData()||(O[H.key]=H)}O=this._retainLoadedChildren(O,w);for(const H in O){const te=O[H];let ne=this._tiles[H],me=ne?.wasRequested();for(let he=te.overscaledZ-1;he>=L;--he){const Se=te.scaledTo(he);if(T[Se.key])break;if(T[Se.key]=!0,ne=this.getTile(Se),!ne&&me&&(ne=this._addTile(Se)),ne){const Ue=ne.hasData();if((Ue||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||me)&&(w[Se.key]=Se),me=ne.wasRequested(),Ue)break}}}return w}_updateFadingTiles(o,f){const y=N.now(),w=s.am(o);for(const T of o){const L=this._tiles[T.key];L.fadingDirection!==ot.Departing&&L.fadeOpacity!==0||L.resetFadeLogic(),this._updateFadingAncestor(L,f,y)||this._updateFadingDescendents(L,f,y)||this._updateFadingEdge(L,w,y)||L.resetFadeLogic()}}_updateFadingAncestor(o,f,y){if(!o.hasData())return!1;const{tileID:w,fadingRole:T,fadingDirection:L,fadingParentID:O}=o;if(T===$r.Base&&L===ot.Incoming&&O)return f[O.key]=O,!0;const H=Math.max(w.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let te=w.overscaledZ-1;te>=H;te--){const ne=w.scaledTo(te),me=this._getLoadedTile(ne);if(me)return o.setCrossFadeLogic({fadingRole:$r.Base,fadingDirection:ot.Incoming,fadingParentID:me.tileID,fadeEndTime:y+this._rasterFadeDuration}),me.setCrossFadeLogic({fadingRole:$r.Parent,fadingDirection:ot.Departing,fadeEndTime:y+this._rasterFadeDuration}),f[ne.key]=ne,!0}return!1}_updateFadingDescendents(o,f,y){if(!o.hasData())return!1;const w=o.tileID.children(this._source.maxzoom);let T=this._updateFadingChildren(o,w,f,y);if(T)return!0;for(const L of w){const O=L.children(this._source.maxzoom);this._updateFadingChildren(o,O,f,y)&&(T=!0)}return T}_updateFadingChildren(o,f,y,w){if(f[0].overscaledZ>=this._source.maxzoom)return!1;let T=!1;for(const L of f){const O=this._getLoadedTile(L);if(!O)continue;const{fadingRole:H,fadingDirection:te,fadingParentID:ne}=O;H===$r.Base&&te===ot.Departing&&ne||(O.setCrossFadeLogic({fadingRole:$r.Base,fadingDirection:ot.Departing,fadingParentID:o.tileID,fadeEndTime:w+this._rasterFadeDuration}),o.setCrossFadeLogic({fadingRole:$r.Parent,fadingDirection:ot.Incoming,fadeEndTime:w+this._rasterFadeDuration})),y[L.key]=L,T=!0}return T}_updateFadingEdge(o,f,y){const w=o.tileID;return!!o.selfFading||!o.hasData()&&!!f.has(w)&&(o.setSelfFadeLogic(y+this._rasterFadeDuration),!0)}_addTile(o){let f=this._tiles[o.key];if(f)return f;f=this._cache.getAndRemove(o),f&&(f.resetFadeLogic(),this._setTileReloadTimer(o.key,f),f.tileID=o,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,f)));const y=f;return f||(f=new xe(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(f,o.key,f.state)),f.uses++,this._tiles[o.key]=f,y||this._source.fire(new s.l("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(o,f){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const y=f.getExpiryTimeout();y&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},y))}refreshTiles(o){for(const f in this._tiles)(this._isIdRenderable(f)||this._tiles[f].state=="errored")&&o.some(y=>y.equals(this._tiles[f].tileID.canonical))&&this._reloadTile(f,"expired")}_removeTile(o){const f=this._tiles[o];f&&(f.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}_dataHandler(o){o.dataType==="source"&&(o.sourceDataType!=="metadata"?o.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(o.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,f,y){const w=[],T=this.transform;if(!T)return w;const L=T.getCoveringTilesDetailsProvider().allowWorldCopies(),O=y?T.getCameraQueryGeometry(o):o,H=Se=>T.screenPointToMercatorCoordinate(Se,this.terrain),te=this.transformBbox(o,H,!L),ne=this.transformBbox(O,H,!L),me=this.getIds(),he=s.a2.fromPoints(ne);for(let Se=0;Se<me.length;Se++){const Ue=this._tiles[me[Se]];if(Ue.holdingForSymbolFade())continue;const Xe=L?[Ue.tileID]:[Ue.tileID.unwrapTo(-1),Ue.tileID.unwrapTo(0)],Je=Math.pow(2,T.zoom-Ue.tileID.overscaledZ),st=f*Ue.queryPadding*s.$/Ue.tileSize/Je;for(const pt of Xe){const xt=he.map(mt=>pt.getTilePoint(new s.a1(mt.x,mt.y)));if(xt.expandBy(st),xt.intersects(Yi)){const mt=te.map(St=>pt.getTilePoint(St)),wt=ne.map(St=>pt.getTilePoint(St));w.push({tile:Ue,tileID:L?pt:pt.unwrapTo(0),queryGeometry:mt,cameraQueryGeometry:wt,scale:Je})}}}return w}transformBbox(o,f,y){let w=o.map(f);if(y){const T=s.a2.fromPoints(o);T.shrinkBy(.001*Math.min(T.width(),T.height()));const L=T.map(f);s.a2.fromPoints(w).covers(L)||(w=w.map(O=>O.x>.5?new s.a1(O.x-1,O.y,O.z):O))}return w}getVisibleCoordinates(o){const f=this.getRenderableIds(o).map(y=>this._tiles[y].tileID);return this.transform&&this.transform.populateCache(f),f}hasTransition(){if(this._source.hasTransition())return!0;if(In(this._source.type)&&this._rasterFadeDuration>0){const o=N.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=o)return!0}return!1}setRasterFadeDuration(o){this._rasterFadeDuration=o}setFeatureState(o,f,y){this._state.updateState(o=o||"_geojsonTileLayer",f,y)}removeFeatureState(o,f,y){this._state.removeFeatureState(o=o||"_geojsonTileLayer",f,y)}getFeatureState(o,f){return this._state.getState(o=o||"_geojsonTileLayer",f)}setDependencies(o,f,y){const w=this._tiles[o];w&&w.setDependencies(f,y)}reloadTilesForDependencies(o,f){for(const y in this._tiles)this._tiles[y].hasDependency(o,f)&&this._reloadTile(y,"reloading");this._cache.filter(y=>!y.hasDependency(o,f))}}function Di(S,o){const f=Math.abs(2*S.wrap)-+(S.wrap<0),y=Math.abs(2*o.wrap)-+(o.wrap<0);return S.overscaledZ-o.overscaledZ||y-f||o.canonical.y-S.canonical.y||o.canonical.x-S.canonical.x}function In(S){return S==="raster"||S==="image"||S==="video"}jr.maxOverzooming=10,jr.maxUnderzooming=3;class Yr{constructor(o,f){this.reset(o,f)}reset(o,f){this.points=o||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=s.ah(o,0,1);let f=1,y=this._distances[f];const w=o*this.paddedLength+this.padding;for(;y<w&&f<this._distances.length;)y=this._distances[++f];const T=f-1,L=this._distances[T],O=y-L,H=O>0?(w-L)/O:0;return this.points[T].mult(1-H).add(this.points[f].mult(H))}}function on(S,o){let f=!0;return S==="always"||S!=="never"&&o!=="never"||(f=!1),f}class Wi{constructor(o,f,y){const w=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(o/y),this.yCellCount=Math.ceil(f/y);for(let L=0;L<this.xCellCount*this.yCellCount;L++)w.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,f,y,w,T){this._forEachCell(f,y,w,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(T)}insertCircle(o,f,y,w){this._forEachCell(f-w,y-w,f+w,y+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(f),this.circles.push(y),this.circles.push(w)}_insertBoxCell(o,f,y,w,T,L){this.boxCells[T].push(L)}_insertCircleCell(o,f,y,w,T,L){this.circleCells[T].push(L)}_query(o,f,y,w,T,L,O){if(y<0||o>this.width||w<0||f>this.height)return[];const H=[];if(o<=0&&f<=0&&this.width<=y&&this.height<=w){if(T)return[{key:null,x1:o,y1:f,x2:y,y2:w}];for(let te=0;te<this.boxKeys.length;te++)H.push({key:this.boxKeys[te],x1:this.bboxes[4*te],y1:this.bboxes[4*te+1],x2:this.bboxes[4*te+2],y2:this.bboxes[4*te+3]});for(let te=0;te<this.circleKeys.length;te++){const ne=this.circles[3*te],me=this.circles[3*te+1],he=this.circles[3*te+2];H.push({key:this.circleKeys[te],x1:ne-he,y1:me-he,x2:ne+he,y2:me+he})}}else this._forEachCell(o,f,y,w,this._queryCell,H,{hitTest:T,overlapMode:L,seenUids:{box:{},circle:{}}},O);return H}query(o,f,y,w){return this._query(o,f,y,w,!1,null)}hitTest(o,f,y,w,T,L){return this._query(o,f,y,w,!0,T,L).length>0}hitTestCircle(o,f,y,w,T){const L=o-y,O=o+y,H=f-y,te=f+y;if(O<0||L>this.width||te<0||H>this.height)return!1;const ne=[];return this._forEachCell(L,H,O,te,this._queryCellCircle,ne,{hitTest:!0,overlapMode:w,circle:{x:o,y:f,radius:y},seenUids:{box:{},circle:{}}},T),ne.length>0}_queryCell(o,f,y,w,T,L,O,H){const{seenUids:te,hitTest:ne,overlapMode:me}=O,he=this.boxCells[T];if(he!==null){const Ue=this.bboxes;for(const Xe of he)if(!te.box[Xe]){te.box[Xe]=!0;const Je=4*Xe,st=this.boxKeys[Xe];if(o<=Ue[Je+2]&&f<=Ue[Je+3]&&y>=Ue[Je+0]&&w>=Ue[Je+1]&&(!H||H(st))&&(!ne||!on(me,st.overlapMode))&&(L.push({key:st,x1:Ue[Je],y1:Ue[Je+1],x2:Ue[Je+2],y2:Ue[Je+3]}),ne))return!0}}const Se=this.circleCells[T];if(Se!==null){const Ue=this.circles;for(const Xe of Se)if(!te.circle[Xe]){te.circle[Xe]=!0;const Je=3*Xe,st=this.circleKeys[Xe];if(this._circleAndRectCollide(Ue[Je],Ue[Je+1],Ue[Je+2],o,f,y,w)&&(!H||H(st))&&(!ne||!on(me,st.overlapMode))){const pt=Ue[Je],xt=Ue[Je+1],mt=Ue[Je+2];if(L.push({key:st,x1:pt-mt,y1:xt-mt,x2:pt+mt,y2:xt+mt}),ne)return!0}}}return!1}_queryCellCircle(o,f,y,w,T,L,O,H){const{circle:te,seenUids:ne,overlapMode:me}=O,he=this.boxCells[T];if(he!==null){const Ue=this.bboxes;for(const Xe of he)if(!ne.box[Xe]){ne.box[Xe]=!0;const Je=4*Xe,st=this.boxKeys[Xe];if(this._circleAndRectCollide(te.x,te.y,te.radius,Ue[Je+0],Ue[Je+1],Ue[Je+2],Ue[Je+3])&&(!H||H(st))&&!on(me,st.overlapMode))return L.push(!0),!0}}const Se=this.circleCells[T];if(Se!==null){const Ue=this.circles;for(const Xe of Se)if(!ne.circle[Xe]){ne.circle[Xe]=!0;const Je=3*Xe,st=this.circleKeys[Xe];if(this._circlesCollide(Ue[Je],Ue[Je+1],Ue[Je+2],te.x,te.y,te.radius)&&(!H||H(st))&&!on(me,st.overlapMode))return L.push(!0),!0}}}_forEachCell(o,f,y,w,T,L,O,H){const te=this._convertToXCellCoord(o),ne=this._convertToYCellCoord(f),me=this._convertToXCellCoord(y),he=this._convertToYCellCoord(w);for(let Se=te;Se<=me;Se++)for(let Ue=ne;Ue<=he;Ue++)if(T.call(this,o,f,y,w,this.xCellCount*Ue+Se,L,O,H))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,f,y,w,T,L){const O=w-o,H=T-f,te=y+L;return te*te>O*O+H*H}_circleAndRectCollide(o,f,y,w,T,L,O){const H=(L-w)/2,te=Math.abs(o-(w+H));if(te>H+y)return!1;const ne=(O-T)/2,me=Math.abs(f-(T+ne));if(me>ne+y)return!1;if(te<=H||me<=ne)return!0;const he=te-H,Se=me-ne;return he*he+Se*Se<=y*y}}function mi(S,o,f){const y=s.L();if(!S){const{vecSouth:me,vecEast:he}=gi(o),Se=g();Se[0]=he[0],Se[1]=he[1],Se[2]=me[0],Se[3]=me[1],w=Se,(ne=(L=(T=Se)[0])*(te=T[3])-(H=T[2])*(O=T[1]))&&(w[0]=te*(ne=1/ne),w[1]=-O*ne,w[2]=-H*ne,w[3]=L*ne),y[0]=Se[0],y[1]=Se[1],y[4]=Se[2],y[5]=Se[3]}var w,T,L,O,H,te,ne;return s.N(y,y,[1/f,1/f,1]),y}function ln(S,o,f,y){if(S){const w=s.L();if(!o){const{vecSouth:T,vecEast:L}=gi(f);w[0]=L[0],w[1]=L[1],w[4]=T[0],w[5]=T[1]}return s.N(w,w,[y,y,1]),w}return f.pixelsToClipSpaceMatrix}function gi(S){const o=Math.cos(S.rollInRadians),f=Math.sin(S.rollInRadians),y=Math.cos(S.pitchInRadians),w=Math.cos(S.bearingInRadians),T=Math.sin(S.bearingInRadians),L=s.ar();L[0]=-w*y*f-T*o,L[1]=-T*y*f+w*o;const O=s.as(L);O<1e-9?s.at(L):s.au(L,L,1/O);const H=s.ar();H[0]=w*y*o-T*f,H[1]=T*y*o+w*f;const te=s.as(H);return te<1e-9?s.at(H):s.au(H,H,1/te),{vecEast:H,vecSouth:L}}function hr(S,o,f,y){let w;y?(w=[S,o,y(S,o),1],s.aw(w,w,f)):(w=[S,o,0,1],yi(w,w,f));const T=w[3];return{point:new s.P(w[0]/T,w[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function Re(S,o){return .5+S/o*.5}function ct(S,o){return S.x>=-o[0]&&S.x<=o[0]&&S.y>=-o[1]&&S.y<=o[1]}function $e(S,o,f,y,w,T,L,O,H,te,ne,me,he){const Se=f?S.textSizeData:S.iconSizeData,Ue=s.an(Se,o.transform.zoom),Xe=[256/o.width*2+1,256/o.height*2+1],Je=f?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;Je.clear();const st=S.lineVertexArray,pt=f?S.text.placedSymbolArray:S.icon.placedSymbolArray,xt=o.transform.width/o.transform.height;let mt=!1;for(let wt=0;wt<pt.length;wt++){const St=pt.get(wt);if(St.hidden||St.writingMode===s.ao.vertical&&!mt){zr(St.numGlyphs,Je);continue}mt=!1;const yt=new s.P(St.anchorX,St.anchorY),Lt={getElevation:he,pitchedLabelPlaneMatrix:y,lineVertexArray:st,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:o.transform,tileAnchorPoint:yt,unwrappedTileID:H,width:te,height:ne,translation:me},rr=jt(St.anchorX,St.anchorY,Lt);if(!ct(rr.point,Xe)){zr(St.numGlyphs,Je);continue}const $t=Re(o.transform.cameraToCenterDistance,rr.signedDistanceFromCamera),Zt=s.ap(Se,Ue,St),Yt=T?Zt*o.transform.getPitchedTextCorrection(St.anchorX,St.anchorY,H)/$t:Zt*$t,wr=nt({projectionContext:Lt,pitchedLabelPlaneMatrixInverse:w,symbol:St,fontSize:Yt,flip:!1,keepUpright:L,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:Je,aspectRatio:xt,rotateToLine:O});mt=wr.useVertical,(wr.notEnoughRoom||mt||wr.needsFlipping&&nt({projectionContext:Lt,pitchedLabelPlaneMatrixInverse:w,symbol:St,fontSize:Yt,flip:!0,keepUpright:L,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:Je,aspectRatio:xt,rotateToLine:O}).notEnoughRoom)&&zr(St.numGlyphs,Je)}f?S.text.dynamicLayoutVertexBuffer.updateData(Je):S.icon.dynamicLayoutVertexBuffer.updateData(Je)}function it(S,o,f,y,w,T,L,O){const H=T.glyphStartIndex+T.numGlyphs,te=T.lineStartIndex,ne=T.lineStartIndex+T.lineLength,me=o.getoffsetX(T.glyphStartIndex),he=o.getoffsetX(H-1),Se=Vr(S*me,f,y,w,T.segment,te,ne,O,L);if(!Se)return null;const Ue=Vr(S*he,f,y,w,T.segment,te,ne,O,L);return Ue?O.projectionCache.anyProjectionOccluded?null:{first:Se,last:Ue}:null}function He(S,o,f,y){return S===s.ao.horizontal&&Math.abs(f.y-o.y)>Math.abs(f.x-o.x)*y?{useVertical:!0}:(S===s.ao.vertical?o.y<f.y:o.x>f.x)?{needsFlipping:!0}:null}function nt(S){const{projectionContext:o,pitchedLabelPlaneMatrixInverse:f,symbol:y,fontSize:w,flip:T,keepUpright:L,glyphOffsetArray:O,dynamicLayoutVertexArray:H,aspectRatio:te,rotateToLine:ne}=S,me=w/24,he=y.lineOffsetX*me,Se=y.lineOffsetY*me;let Ue;if(y.numGlyphs>1){const Xe=y.glyphStartIndex+y.numGlyphs,Je=y.lineStartIndex,st=y.lineStartIndex+y.lineLength,pt=it(me,O,he,Se,T,y,ne,o);if(!pt)return{notEnoughRoom:!0};const xt=Xt(pt.first.point.x,pt.first.point.y,o,f),mt=Xt(pt.last.point.x,pt.last.point.y,o,f);if(L&&!T){const wt=He(y.writingMode,xt,mt,te);if(wt)return wt}Ue=[pt.first];for(let wt=y.glyphStartIndex+1;wt<Xe-1;wt++){const St=Vr(me*O.getoffsetX(wt),he,Se,T,y.segment,Je,st,o,ne);if(!St)return{notEnoughRoom:!0};Ue.push(St)}Ue.push(pt.last)}else{if(L&&!T){const Je=Qt(o.tileAnchorPoint.x,o.tileAnchorPoint.y,o).point,st=y.lineStartIndex+y.segment+1,pt=new s.P(o.lineVertexArray.getx(st),o.lineVertexArray.gety(st)),xt=Qt(pt.x,pt.y,o),mt=xt.signedDistanceFromCamera>0?xt.point:It(o.tileAnchorPoint,pt,Je,1,o),wt=Xt(Je.x,Je.y,o,f),St=Xt(mt.x,mt.y,o,f),yt=He(y.writingMode,wt,St,te);if(yt)return yt}const Xe=Vr(me*O.getoffsetX(y.glyphStartIndex),he,Se,T,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,o,ne);if(!Xe||o.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ue=[Xe]}for(const Xe of Ue)s.av(H,Xe.point,Xe.angle);return{}}function It(S,o,f,y,w){const T=S.add(S.sub(o)._unit()),L=Qt(T.x,T.y,w).point,O=f.sub(L);return f.add(O._mult(y/O.mag()))}function sr(S,o,f){const y=o.projectionCache;if(y.projections[S])return y.projections[S];const w=new s.P(o.lineVertexArray.getx(S),o.lineVertexArray.gety(S)),T=Qt(w.x,w.y,o);if(T.signedDistanceFromCamera>0)return y.projections[S]=T.point,y.anyProjectionOccluded=y.anyProjectionOccluded||T.isOccluded,T.point;const L=S-f.direction;return It(f.distanceFromAnchor===0?o.tileAnchorPoint:new s.P(o.lineVertexArray.getx(L),o.lineVertexArray.gety(L)),w,f.previousVertex,f.absOffsetX-f.distanceFromAnchor+1,o)}function Qt(S,o,f){const y=S+f.translation[0],w=o+f.translation[1];let T;return f.pitchWithMap?(T=hr(y,w,f.pitchedLabelPlaneMatrix,f.getElevation),T.isOccluded=!1):(T=f.transform.projectTileCoordinates(y,w,f.unwrappedTileID,f.getElevation),T.point.x=(.5*T.point.x+.5)*f.width,T.point.y=(.5*-T.point.y+.5)*f.height),T}function Xt(S,o,f,y){if(f.pitchWithMap){const w=[S,o,0,1];return s.aw(w,w,y),f.transform.projectTileCoordinates(w[0]/w[3],w[1]/w[3],f.unwrappedTileID,f.getElevation).point}return{x:S/f.width*2-1,y:1-o/f.height*2}}function jt(S,o,f){return f.transform.projectTileCoordinates(S,o,f.unwrappedTileID,f.getElevation)}function _r(S,o,f){return S._unit()._perp()._mult(o*f)}function Mr(S,o,f,y,w,T,L,O,H){if(O.projectionCache.offsets[S])return O.projectionCache.offsets[S];const te=f.add(o);if(S+H.direction<y||S+H.direction>=w)return O.projectionCache.offsets[S]=te,te;const ne=sr(S+H.direction,O,H),me=_r(ne.sub(f),L,H.direction),he=f.add(me),Se=ne.add(me);return O.projectionCache.offsets[S]=s.ax(T,te,he,Se)||te,O.projectionCache.offsets[S]}function Vr(S,o,f,y,w,T,L,O,H){const te=y?S-o:S+o;let ne=te>0?1:-1,me=0;y&&(ne*=-1,me=Math.PI),ne<0&&(me+=Math.PI);let he,Se=ne>0?T+w:T+w+1;O.projectionCache.cachedAnchorPoint?he=O.projectionCache.cachedAnchorPoint:(he=Qt(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=he);let Ue,Xe,Je=he,st=he,pt=0,xt=0;const mt=Math.abs(te),wt=[];let St;for(;pt+xt<=mt;){if(Se+=ne,Se<T||Se>=L)return null;pt+=xt,st=Je,Xe=Ue;const rr={absOffsetX:mt,direction:ne,distanceFromAnchor:pt,previousVertex:st};if(Je=sr(Se,O,rr),f===0)wt.push(st),St=Je.sub(st);else{let $t;const Zt=Je.sub(st);$t=Zt.mag()===0?_r(sr(Se+ne,O,rr).sub(Je),f,ne):_r(Zt,f,ne),Xe||(Xe=st.add($t)),Ue=Mr(Se,$t,Je,T,L,Xe,f,O,rr),wt.push(Xe),St=Ue.sub(Xe)}xt=St.mag()}const yt=St._mult((mt-pt)/xt)._add(Xe||st),Lt=me+Math.atan2(Je.y-st.y,Je.x-st.x);return wt.push(yt),{point:yt,angle:H?Lt:0,path:wt}}const Ir=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zr(S,o){for(let f=0;f<S;f++){const y=o.length;o.resize(y+4),o.float32.set(Ir,3*y)}}function yi(S,o,f){const y=o[0],w=o[1];return S[0]=f[0]*y+f[4]*w+f[12],S[1]=f[1]*y+f[5]*w+f[13],S[3]=f[3]*y+f[7]*w+f[15],S}const ki=100;class Ni{constructor(o,f=new Wi(o.width+200,o.height+200,25),y=new Wi(o.width+200,o.height+200,25)){this.transform=o,this.grid=f,this.ignoredGrid=y,this.pitchFactor=Math.cos(o.pitch*Math.PI/180)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+ki,this.screenBottomBoundary=o.height+ki,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,f,y,w,T,L,O,H,te,ne,me,he){const Se=this.projectAndGetPerspectiveRatio(o.anchorPointX+H[0],o.anchorPointY+H[1],T,ne,he),Ue=y*Se.perspectiveRatio;let Xe;if(L||O)Xe=this._projectCollisionBox(o,Ue,w,T,L,O,H,Se,ne,me,he);else{const St=Se.x+(me?me.x*Ue:0),yt=Se.y+(me?me.y*Ue:0);Xe={allPointsOccluded:!1,box:[St+o.x1*Ue,yt+o.y1*Ue,St+o.x2*Ue,yt+o.y2*Ue]}}const[Je,st,pt,xt]=Xe.box,mt=L?Xe.allPointsOccluded:Se.isOccluded;let wt=mt;return wt||(wt=Se.perspectiveRatio<this.perspectiveRatioCutoff),wt||(wt=!this.isInsideGrid(Je,st,pt,xt)),wt||f!=="always"&&this.grid.hitTest(Je,st,pt,xt,f,te)?{box:[Je,st,pt,xt],placeable:!1,offscreen:!1,occluded:mt}:{box:[Je,st,pt,xt],placeable:!0,offscreen:this.isOffscreen(Je,st,pt,xt),occluded:mt}}placeCollisionCircles(o,f,y,w,T,L,O,H,te,ne,me,he,Se,Ue){const Xe=[],Je=new s.P(f.anchorX,f.anchorY),st=this.getPerspectiveRatio(Je.x,Je.y,L,Ue),pt=(te?T*this.transform.getPitchedTextCorrection(f.anchorX,f.anchorY,L)/st:T*st)/s.aB,xt={getElevation:Ue,pitchedLabelPlaneMatrix:O,lineVertexArray:y,pitchWithMap:te,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Je,unwrappedTileID:L,width:this.transform.width,height:this.transform.height,translation:Se},mt=it(pt,w,f.lineOffsetX*pt,f.lineOffsetY*pt,!1,f,!1,xt);let wt=!1,St=!1,yt=!0;if(mt){const Lt=.5*me*st+he,rr=new s.P(-100,-100),$t=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Zt=new Yr,Yt=mt.first,wr=mt.last;let Br=[];for(let Ci=Yt.path.length-1;Ci>=1;Ci--)Br.push(Yt.path[Ci]);for(let Ci=1;Ci<wr.path.length;Ci++)Br.push(wr.path[Ci]);const pr=2.5*Lt;if(te){const Ci=this.projectPathToScreenSpace(Br,xt);Br=Ci.some(En=>En.signedDistanceFromCamera<=0)?[]:Ci.map(En=>En.point)}let Kr=[];if(Br.length>0){const Ci=Br[0].clone(),En=Br[0].clone();for(let Nn=1;Nn<Br.length;Nn++)Ci.x=Math.min(Ci.x,Br[Nn].x),Ci.y=Math.min(Ci.y,Br[Nn].y),En.x=Math.max(En.x,Br[Nn].x),En.y=Math.max(En.y,Br[Nn].y);Kr=Ci.x>=rr.x&&En.x<=$t.x&&Ci.y>=rr.y&&En.y<=$t.y?[Br]:En.x<rr.x||Ci.x>$t.x||En.y<rr.y||Ci.y>$t.y?[]:s.ay([Br],rr.x,rr.y,$t.x,$t.y)}for(const Ci of Kr){Zt.reset(Ci,.25*Lt);let En=0;En=Zt.length<=.5*Lt?1:Math.ceil(Zt.paddedLength/pr)+1;for(let Nn=0;Nn<En;Nn++){const Mn=Nn/Math.max(En-1,1),ss=Zt.lerp(Mn),as=ss.x+ki,tn=ss.y+ki;Xe.push(as,tn,Lt,0);const us=as-Lt,Sa=tn-Lt,ia=as+Lt,na=tn+Lt;if(yt=yt&&this.isOffscreen(us,Sa,ia,na),St=St||this.isInsideGrid(us,Sa,ia,na),o!=="always"&&this.grid.hitTestCircle(as,tn,Lt,o,ne)&&(wt=!0,!H))return{circles:[],offscreen:!1,collisionDetected:wt}}}}return{circles:!H&&wt||!St||st<this.perspectiveRatioCutoff?[]:Xe,offscreen:yt,collisionDetected:wt}}projectPathToScreenSpace(o,f){const y=function(w,T){const L=s.L();return s.aq(L,T.pitchedLabelPlaneMatrix),w.map(O=>{const H=hr(O.x,O.y,L,T.getElevation),te=T.transform.projectTileCoordinates(H.point.x,H.point.y,T.unwrappedTileID,T.getElevation);return te.point.x=(.5*te.point.x+.5)*T.width,te.point.y=(.5*-te.point.y+.5)*T.height,te})}(o,f);return function(w){let T=0,L=0,O=0,H=0;for(let te=0;te<w.length;te++)w[te].isOccluded?(O=te+1,H=0):(H++,H>L&&(L=H,T=O));return w.slice(T,T+L)}(y)}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[],y=new s.a2;for(const me of o){const he=new s.P(me.x+ki,me.y+ki);y.extend(he),f.push(he)}const{minX:w,minY:T,maxX:L,maxY:O}=y,H=this.grid.query(w,T,L,O).concat(this.ignoredGrid.query(w,T,L,O)),te={},ne={};for(const me of H){const he=me.key;if(te[he.bucketInstanceId]===void 0&&(te[he.bucketInstanceId]={}),te[he.bucketInstanceId][he.featureIndex])continue;const Se=[new s.P(me.x1,me.y1),new s.P(me.x2,me.y1),new s.P(me.x2,me.y2),new s.P(me.x1,me.y2)];s.az(f,Se)&&(te[he.bucketInstanceId][he.featureIndex]=!0,ne[he.bucketInstanceId]===void 0&&(ne[he.bucketInstanceId]=[]),ne[he.bucketInstanceId].push(he.featureIndex))}return ne}insertCollisionBox(o,f,y,w,T,L){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:T,collisionGroupID:L,overlapMode:f},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,f,y,w,T,L){const O=y?this.ignoredGrid:this.grid,H={bucketInstanceId:w,featureIndex:T,collisionGroupID:L,overlapMode:f};for(let te=0;te<o.length;te+=4)O.insertCircle(H,o[te],o[te+1],o[te+2])}projectAndGetPerspectiveRatio(o,f,y,w,T){if(T){let L;w?(L=[o,f,w(o,f),1],s.aw(L,L,T)):(L=[o,f,0,1],yi(L,L,T));const O=L[3];return{x:(L[0]/O+1)/2*this.transform.width+ki,y:(-L[1]/O+1)/2*this.transform.height+ki,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}{const L=this.transform.projectTileCoordinates(o,f,y,w);return{x:(L.point.x+1)/2*this.transform.width+ki,y:(1-L.point.y)/2*this.transform.height+ki,perspectiveRatio:.5+this.transform.cameraToCenterDistance/L.signedDistanceFromCamera*.5,isOccluded:L.isOccluded,signedDistanceFromCamera:L.signedDistanceFromCamera}}}getPerspectiveRatio(o,f,y,w){const T=this.transform.projectTileCoordinates(o,f,y,w);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(o,f,y,w){return y<ki||o>=this.screenRightBoundary||w<ki||f>this.screenBottomBoundary}isInsideGrid(o,f,y,w){return y>=0&&o<this.gridRightBoundary&&w>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const o=s.ag([]);return s.M(o,o,[-100,-100,0]),o}_projectCollisionBox(o,f,y,w,T,L,O,H,te,ne,me){let he=1,Se=0,Ue=0,Xe=1;const Je=o.anchorPointX+O[0],st=o.anchorPointY+O[1];if(L&&!T){const Br=this.projectAndGetPerspectiveRatio(Je+1,st,w,te,me),pr=Br.x-H.x,Kr=Math.atan((Br.y-H.y)/pr)+(pr<0?Math.PI:0),Ci=Math.sin(Kr),En=Math.cos(Kr);he=En,Se=Ci,Ue=-Ci,Xe=En}else if(!L&&T){const Br=gi(this.transform);he=Br.vecEast[0],Se=Br.vecEast[1],Ue=Br.vecSouth[0],Xe=Br.vecSouth[1]}let pt=H.x,xt=H.y,mt=f;T&&(pt=Je,xt=st,mt=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),mt*=this.transform.getPitchedTextCorrection(Je,st,w),ne||(mt*=s.ah(.5+H.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ne&&(pt+=he*ne.x*mt+Ue*ne.y*mt,xt+=Se*ne.x*mt+Xe*ne.y*mt);const wt=o.x1*mt,St=o.x2*mt,yt=(wt+St)/2,Lt=o.y1*mt,rr=o.y2*mt,$t=(Lt+rr)/2,Zt=[{offsetX:wt,offsetY:Lt},{offsetX:yt,offsetY:Lt},{offsetX:St,offsetY:Lt},{offsetX:St,offsetY:$t},{offsetX:St,offsetY:rr},{offsetX:yt,offsetY:rr},{offsetX:wt,offsetY:rr},{offsetX:wt,offsetY:$t}];let Yt=[];for(const{offsetX:Br,offsetY:pr}of Zt)Yt.push(new s.P(pt+he*Br+Ue*pr,xt+Se*Br+Xe*pr));let wr=!1;if(T){const Br=Yt.map(pr=>this.projectAndGetPerspectiveRatio(pr.x,pr.y,w,te,me));wr=Br.some(pr=>!pr.isOccluded),Yt=Br.map(pr=>new s.P(pr.x,pr.y))}else wr=!0;return{box:s.aA(Yt),allPointsOccluded:!wr}}}class _i{constructor(o,f,y,w){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?f:-f))):w&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Ga{constructor(o,f,y,w,T){this.text=new _i(o?o.text:null,f,y,T),this.icon=new _i(o?o.icon:null,f,w,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pa{constructor(o,f,y){this.text=o,this.icon=f,this.skipFade=y}}class Da{constructor(o,f,y,w,T){this.bucketInstanceId=o,this.featureIndex=f,this.sourceLayerIndex=y,this.bucketIndex=w,this.tileID=T}}class ea{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const f=++this.maxGroupID;this.collisionGroups[o]={ID:f,predicate:y=>y.collisionGroupID===f}}return this.collisionGroups[o]}}function xa(S,o,f,y,w){const{horizontalAlign:T,verticalAlign:L}=s.aH(S);return new s.P(-(T-.5)*o+y[0]*w,-(L-.5)*f+y[1]*w)}class zs{constructor(o,f,y,w,T){this.transform=o.clone(),this.terrain=f,this.collisionIndex=new Ni(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new ea(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(o){const f=this.terrain;return f?(y,w)=>f.getElevation(o,y,w):null}getBucketParts(o,f,y,w){const T=y.getBucket(f),L=y.latestFeatureIndex;if(!T||!L||f.id!==T.layerIds[0])return;const O=y.collisionBoxArray,H=T.layers[0].layout,te=T.layers[0].paint,ne=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),me=y.tileSize/s.$,he=y.tileID.toUnwrapped(),Se=H.get("text-rotation-alignment")==="map",Ue=s.aC(y,1,this.transform.zoom),Xe=s.aD(this.collisionIndex.transform,y,te.get("text-translate"),te.get("text-translate-anchor")),Je=s.aD(this.collisionIndex.transform,y,te.get("icon-translate"),te.get("icon-translate-anchor")),st=mi(Se,this.transform,Ue);this.retainedQueryData[T.bucketInstanceId]=new Da(T.bucketInstanceId,L,T.sourceLayerIndex,T.index,y.tileID);const pt={bucket:T,layout:H,translationText:Xe,translationIcon:Je,unwrappedTileID:he,pitchedLabelPlaneMatrix:st,scale:ne,textPixelRatio:me,holdingForFade:y.holdingForSymbolFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:s.an(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(w)for(const xt of T.sortKeyRanges){const{sortKey:mt,symbolInstanceStart:wt,symbolInstanceEnd:St}=xt;o.push({sortKey:mt,symbolInstanceStart:wt,symbolInstanceEnd:St,parameters:pt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:pt})}attemptAnchorPlacement(o,f,y,w,T,L,O,H,te,ne,me,he,Se,Ue,Xe,Je,st,pt,xt,mt){const wt=s.aE[o.textAnchor],St=[o.textOffset0,o.textOffset1],yt=xa(wt,y,w,St,T),Lt=this.collisionIndex.placeCollisionBox(f,he,H,te,ne,O,L,Je,me.predicate,xt,yt,mt);if((!pt||this.collisionIndex.placeCollisionBox(pt,he,H,te,ne,O,L,st,me.predicate,xt,yt,mt).placeable)&&Lt.placeable){let rr;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID].text&&(rr=this.prevPlacement.variableOffsets[Se.crossTileID].anchor),Se.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Se.crossTileID]={textOffset:St,width:y,height:w,anchor:wt,textBoxScale:T,prevAnchor:rr},this.markUsedJustification(Ue,wt,Se,Xe),Ue.allowVerticalPlacement&&(this.markUsedOrientation(Ue,Xe,Se),this.placedOrientations[Se.crossTileID]=Xe),{shift:yt,placedGlyphBoxes:Lt}}}placeLayerBucketPart(o,f,y){const{bucket:w,layout:T,translationText:L,translationIcon:O,unwrappedTileID:H,pitchedLabelPlaneMatrix:te,textPixelRatio:ne,holdingForFade:me,collisionBoxArray:he,partiallyEvaluatedTextSize:Se,collisionGroup:Ue}=o.parameters,Xe=T.get("text-optional"),Je=T.get("icon-optional"),st=s.aF(T,"text-overlap","text-allow-overlap"),pt=st==="always",xt=s.aF(T,"icon-overlap","icon-allow-overlap"),mt=xt==="always",wt=T.get("text-rotation-alignment")==="map",St=T.get("text-pitch-alignment")==="map",yt=T.get("icon-text-fit")!=="none",Lt=T.get("symbol-z-order")==="viewport-y",rr=pt&&(mt||!w.hasIconData()||Je),$t=mt&&(pt||!w.hasTextData()||Xe);!w.collisionArrays&&he&&w.deserializeCollisionBoxes(he);const Zt=this.retainedQueryData[w.bucketInstanceId].tileID,Yt=this._getTerrainElevationFunc(Zt),wr=this.transform.getFastPathSimpleProjectionMatrix(Zt),Br=(pr,Kr,Ci)=>{var En,Nn;if(f[pr.crossTileID])return;if(me)return void(this.placements[pr.crossTileID]=new Pa(!1,!1,!1));let Mn=!1,ss=!1,as=!0,tn=null,us={box:null,placeable:!1,offscreen:null,occluded:!1},Sa={placeable:!1},ia=null,na=null,eo=null,yh=0,Ic=0,Rh=0;Kr.textFeatureIndex?yh=Kr.textFeatureIndex:pr.useRuntimeCollisionCircles&&(yh=pr.featureIndex),Kr.verticalTextFeatureIndex&&(Ic=Kr.verticalTextFeatureIndex);const Lc=Kr.textBox;if(Lc){const jo=Xs=>{let Wn=s.ao.horizontal;if(w.allowVerticalPlacement&&!Xs&&this.prevPlacement){const sa=this.prevPlacement.placedOrientations[pr.crossTileID];sa&&(this.placedOrientations[pr.crossTileID]=sa,Wn=sa,this.markUsedOrientation(w,Wn,pr))}return Wn},pu=(Xs,Wn)=>{if(w.allowVerticalPlacement&&pr.numVerticalGlyphVertices>0&&Kr.verticalTextBox){for(const sa of w.writingModes)if(sa===s.ao.vertical?(us=Wn(),Sa=us):us=Xs(),us&&us.placeable)break}else us=Xs()},mu=pr.textAnchorOffsetStartIndex,to=pr.textAnchorOffsetEndIndex;if(to===mu){const Xs=(Wn,sa)=>{const Ts=this.collisionIndex.placeCollisionBox(Wn,st,ne,Zt,H,St,wt,L,Ue.predicate,Yt,void 0,wr);return Ts&&Ts.placeable&&(this.markUsedOrientation(w,sa,pr),this.placedOrientations[pr.crossTileID]=sa),Ts};pu(()=>Xs(Lc,s.ao.horizontal),()=>{const Wn=Kr.verticalTextBox;return w.allowVerticalPlacement&&pr.numVerticalGlyphVertices>0&&Wn?Xs(Wn,s.ao.vertical):{box:null,offscreen:null}}),jo(us&&us.placeable)}else{let Xs=s.aE[(Nn=(En=this.prevPlacement)===null||En===void 0?void 0:En.variableOffsets[pr.crossTileID])===null||Nn===void 0?void 0:Nn.anchor];const Wn=(Ts,Sd,Mc)=>{const ul=Ts.x2-Ts.x1,hs=Ts.y2-Ts.y1,jl=pr.textBoxScale,Vu=yt&&xt==="never"?Sd:null;let Gu=null,Ed=st==="never"?1:2,Td="never";Xs&&Ed++;for(let Ol=0;Ol<Ed;Ol++){for(let ef=mu;ef<to;ef++){const Fd=w.textAnchorOffsets.get(ef);if(Xs&&Fd.textAnchor!==Xs)continue;const tf=this.attemptAnchorPlacement(Fd,Ts,ul,hs,jl,wt,St,ne,Zt,H,Ue,Td,pr,w,Mc,L,O,Vu,Yt);if(tf&&(Gu=tf.placedGlyphBoxes,Gu&&Gu.placeable))return Mn=!0,tn=tf.shift,Gu}Xs?Xs=null:Td=st}return y&&!Gu&&(Gu={box:this.collisionIndex.placeCollisionBox(Lc,"always",ne,Zt,H,St,wt,L,Ue.predicate,Yt,void 0,wr).box,offscreen:!1,placeable:!1,occluded:!1}),Gu};pu(()=>Wn(Lc,Kr.iconBox,s.ao.horizontal),()=>{const Ts=Kr.verticalTextBox;return w.allowVerticalPlacement&&(!us||!us.placeable)&&pr.numVerticalGlyphVertices>0&&Ts?Wn(Ts,Kr.verticalIconBox,s.ao.vertical):{box:null,occluded:!0,offscreen:null}}),us&&(Mn=us.placeable,as=us.offscreen);const sa=jo(us&&us.placeable);if(!Mn&&this.prevPlacement){const Ts=this.prevPlacement.variableOffsets[pr.crossTileID];Ts&&(this.variableOffsets[pr.crossTileID]=Ts,this.markUsedJustification(w,Ts.anchor,pr,sa))}}}if(ia=us,Mn=ia&&ia.placeable,as=ia&&ia.offscreen,pr.useRuntimeCollisionCircles&&pr.centerJustifiedTextSymbolIndex>=0){const jo=w.text.placedSymbolArray.get(pr.centerJustifiedTextSymbolIndex),pu=s.ap(w.textSizeData,Se,jo),mu=T.get("text-padding");na=this.collisionIndex.placeCollisionCircles(st,jo,w.lineVertexArray,w.glyphOffsetArray,pu,H,te,y,St,Ue.predicate,pr.collisionCircleDiameter,mu,L,Yt),na.circles.length&&na.collisionDetected&&!y&&s.w("Collisions detected, but collision boxes are not shown"),Mn=pt||na.circles.length>0&&!na.collisionDetected,as=as&&na.offscreen}if(Kr.iconFeatureIndex&&(Rh=Kr.iconFeatureIndex),Kr.iconBox){const jo=pu=>this.collisionIndex.placeCollisionBox(pu,xt,ne,Zt,H,St,wt,O,Ue.predicate,Yt,yt&&tn?tn:void 0,wr);Sa&&Sa.placeable&&Kr.verticalIconBox?(eo=jo(Kr.verticalIconBox),ss=eo.placeable):(eo=jo(Kr.iconBox),ss=eo.placeable),as=as&&eo.offscreen}const Uh=Xe||pr.numHorizontalGlyphVertices===0&&pr.numVerticalGlyphVertices===0,_h=Je||pr.numIconVertices===0;Uh||_h?_h?Uh||(ss=ss&&Mn):Mn=ss&&Mn:ss=Mn=ss&&Mn;const cc=ss&&eo.placeable;if(Mn&&ia.placeable&&this.collisionIndex.insertCollisionBox(ia.box,st,T.get("text-ignore-placement"),w.bucketInstanceId,Sa&&Sa.placeable&&Ic?Ic:yh,Ue.ID),cc&&this.collisionIndex.insertCollisionBox(eo.box,xt,T.get("icon-ignore-placement"),w.bucketInstanceId,Rh,Ue.ID),na&&Mn&&this.collisionIndex.insertCollisionCircles(na.circles,st,T.get("text-ignore-placement"),w.bucketInstanceId,yh,Ue.ID),y&&this.storeCollisionData(w.bucketInstanceId,Ci,Kr,ia,eo,na),pr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[pr.crossTileID]=new Pa((Mn||rr)&&!ia?.occluded,(ss||$t)&&!eo?.occluded,as||w.justReloaded),f[pr.crossTileID]=!0};if(Lt){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const pr=w.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Kr=pr.length-1;Kr>=0;--Kr){const Ci=pr[Kr];Br(w.symbolInstances.get(Ci),w.collisionArrays[Ci],Ci)}}else for(let pr=o.symbolInstanceStart;pr<o.symbolInstanceEnd;pr++)Br(w.symbolInstances.get(pr),w.collisionArrays[pr],pr);w.justReloaded=!1}storeCollisionData(o,f,y,w,T,L){if(y.textBox||y.iconBox){let O,H;this.collisionBoxArrays.has(o)?O=this.collisionBoxArrays.get(o):(O=new Map,this.collisionBoxArrays.set(o,O)),O.has(f)?H=O.get(f):(H={text:null,icon:null},O.set(f,H)),y.textBox&&(H.text=w.box),y.iconBox&&(H.icon=T.box)}if(L){let O=this.collisionCircleArrays[o];O===void 0&&(O=this.collisionCircleArrays[o]=[]);for(let H=0;H<L.circles.length;H+=4)O.push(L.circles[H+0]-ki),O.push(L.circles[H+1]-ki),O.push(L.circles[H+2]),O.push(L.collisionDetected?1:0)}}markUsedJustification(o,f,y,w){let T;T=w===s.ao.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[s.aG(f)];const L=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const O of L)O>=0&&(o.text.placedSymbolArray.get(O).crossTileID=T>=0&&O!==T?0:y.crossTileID)}markUsedOrientation(o,f,y){const w=f===s.ao.horizontal||f===s.ao.horizontalOnly?f:0,T=f===s.ao.vertical?f:0,L=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const O of L)o.text.placedSymbolArray.get(O).placedOrientation=w;y.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let y=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const w=f?f.symbolFadeChange(o):1,T=f?f.opacities:{},L=f?f.variableOffsets:{},O=f?f.placedOrientations:{};for(const H in this.placements){const te=this.placements[H],ne=T[H];ne?(this.opacities[H]=new Ga(ne,w,te.text,te.icon),y=y||te.text!==ne.text.placed||te.icon!==ne.icon.placed):(this.opacities[H]=new Ga(null,w,te.text,te.icon,te.skipFade),y=y||te.text||te.icon)}for(const H in T){const te=T[H];if(!this.opacities[H]){const ne=new Ga(te,w,!1,!1);ne.isHidden()||(this.opacities[H]=ne,y=y||te.text.placed||te.icon.placed)}}for(const H in L)this.variableOffsets[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.variableOffsets[H]=L[H]);for(const H in O)this.placedOrientations[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.placedOrientations[H]=O[H]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:o)}updateLayerOpacities(o,f){const y={};for(const w of f){const T=w.getBucket(o);T&&w.latestFeatureIndex&&o.id===T.layerIds[0]&&this.updateBucketOpacities(T,w.tileID,y,w.collisionBoxArray)}}updateBucketOpacities(o,f,y,w){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const T=o.layers[0],L=T.layout,O=new Ga(null,0,!1,!1,!0),H=L.get("text-allow-overlap"),te=L.get("icon-allow-overlap"),ne=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),me=L.get("text-rotation-alignment")==="map",he=L.get("text-pitch-alignment")==="map",Se=L.get("icon-text-fit")!=="none",Ue=new Ga(null,0,H&&(te||!o.hasIconData()||L.get("icon-optional")),te&&(H||!o.hasTextData()||L.get("text-optional")),!0);!o.collisionArrays&&w&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(w);const Xe=(st,pt,xt)=>{for(let mt=0;mt<pt/4;mt++)st.opacityVertexArray.emplaceBack(xt);st.hasVisibleVertices=st.hasVisibleVertices||xt!==Ra},Je=this.collisionBoxArrays.get(o.bucketInstanceId);for(let st=0;st<o.symbolInstances.length;st++){const pt=o.symbolInstances.get(st),{numHorizontalGlyphVertices:xt,numVerticalGlyphVertices:mt,crossTileID:wt}=pt;let St=this.opacities[wt];y[wt]?St=O:St||(St=Ue,this.opacities[wt]=St),y[wt]=!0;const yt=pt.numIconVertices>0,Lt=this.placedOrientations[pt.crossTileID],rr=Lt===s.ao.vertical,$t=Lt===s.ao.horizontal||Lt===s.ao.horizontalOnly;if(xt>0||mt>0){const Yt=Fn(St.text);Xe(o.text,xt,rr?Ra:Yt),Xe(o.text,mt,$t?Ra:Yt);const wr=St.text.isHidden();[pt.rightJustifiedTextSymbolIndex,pt.centerJustifiedTextSymbolIndex,pt.leftJustifiedTextSymbolIndex].forEach(Kr=>{Kr>=0&&(o.text.placedSymbolArray.get(Kr).hidden=wr||rr?1:0)}),pt.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(pt.verticalPlacedTextSymbolIndex).hidden=wr||$t?1:0);const Br=this.variableOffsets[pt.crossTileID];Br&&this.markUsedJustification(o,Br.anchor,pt,Lt);const pr=this.placedOrientations[pt.crossTileID];pr&&(this.markUsedJustification(o,"left",pt,pr),this.markUsedOrientation(o,pr,pt))}if(yt){const Yt=Fn(St.icon),wr=!(Se&&pt.verticalPlacedIconSymbolIndex&&rr);pt.placedIconSymbolIndex>=0&&(Xe(o.icon,pt.numIconVertices,wr?Yt:Ra),o.icon.placedSymbolArray.get(pt.placedIconSymbolIndex).hidden=St.icon.isHidden()),pt.verticalPlacedIconSymbolIndex>=0&&(Xe(o.icon,pt.numVerticalIconVertices,wr?Ra:Yt),o.icon.placedSymbolArray.get(pt.verticalPlacedIconSymbolIndex).hidden=St.icon.isHidden())}const Zt=Je&&Je.has(st)?Je.get(st):{text:null,icon:null};if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Yt=o.collisionArrays[st];if(Yt){let wr=new s.P(0,0);if(Yt.textBox||Yt.verticalTextBox){let Br=!0;if(ne){const pr=this.variableOffsets[wt];pr?(wr=xa(pr.anchor,pr.width,pr.height,pr.textOffset,pr.textBoxScale),me&&wr._rotate(he?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Br=!1}if(Yt.textBox||Yt.verticalTextBox){let pr;Yt.textBox&&(pr=rr),Yt.verticalTextBox&&(pr=$t),iu(o.textCollisionBox.collisionVertexArray,St.text.placed,!Br||pr,Zt.text,wr.x,wr.y)}}if(Yt.iconBox||Yt.verticalIconBox){const Br=!!(!$t&&Yt.verticalIconBox);let pr;Yt.iconBox&&(pr=Br),Yt.verticalIconBox&&(pr=!Br),iu(o.iconCollisionBox.collisionVertexArray,St.icon.placed,pr,Zt.icon,Se?wr.x:0,Se?wr.y:0)}}}}if(o.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);o.bucketInstanceId in this.collisionCircleArrays&&(o.collisionCircleArray=this.collisionCircleArrays[o.bucketInstanceId],delete this.collisionCircleArrays[o.bucketInstanceId])}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,f){const y=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*y>o}setStale(){this.stale=!0}}function iu(S,o,f,y,w,T){y&&y.length!==0||(y=[0,0,0,0]);const L=y[0]-ki,O=y[1]-ki,H=y[2]-ki,te=y[3]-ki;S.emplaceBack(o?1:0,f?1:0,w||0,T||0,L,O),S.emplaceBack(o?1:0,f?1:0,w||0,T||0,H,O),S.emplaceBack(o?1:0,f?1:0,w||0,T||0,H,te),S.emplaceBack(o?1:0,f?1:0,w||0,T||0,L,te)}const ao=Math.pow(2,25),rs=Math.pow(2,24),cA=Math.pow(2,17),Xo=Math.pow(2,16),oh=Math.pow(2,9),lh=Math.pow(2,8),Zo=Math.pow(2,1);function Fn(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;const o=S.placed?1:0,f=Math.floor(127*S.opacity);return f*ao+o*rs+f*cA+o*Xo+f*oh+o*lh+f*Zo+o}const Ra=0;class ch{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,f,y,w,T){const L=this._bucketParts;for(;this._currentTileIndex<o.length;)if(f.getBucketParts(L,w,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort((O,H)=>O.sortKey-H.sortKey));this._currentPartIndex<L.length;)if(f.placeLayerBucketPart(L[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,T())return!0;return!1}}class Nh{constructor(o,f,y,w,T,L,O,H){this.placement=new zs(o,f,L,O,H),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(o,f,y){const w=N.now(),T=()=>!this._forceFullPlacement&&N.now()-w>2;for(;this._currentPlacementIndex>=0;){const L=f[o[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(L.type==="symbol"&&(!L.minzoom||L.minzoom<=O)&&(!L.maxzoom||L.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new ch(L)),this._inProgressLayer.continuePlacement(y[L.source],this.placement,this._showCollisionBoxes,L,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const ko=512/s.$/2;class Yo{constructor(o,f,y){this.tileID=o,this.bucketInstanceId=y,this._symbolsByKey={};const w=new Map;for(let T=0;T<f.length;T++){const L=f.get(T),O=L.key,H=w.get(O);H?H.push(L):w.set(O,[L])}for(const[T,L]of w){const O={positions:L.map(H=>({x:Math.floor(H.anchorX*ko),y:Math.floor(H.anchorY*ko)})),crossTileIDs:L.map(H=>H.crossTileID)};if(O.positions.length>128){const H=new s.aI(O.positions.length,16,Uint16Array);for(const{x:te,y:ne}of O.positions)H.add(te,ne);H.finish(),delete O.positions,O.index=H}this._symbolsByKey[T]=O}}getScaledCoordinates(o,f){const{x:y,y:w,z:T}=this.tileID.canonical,{x:L,y:O,z:H}=f.canonical,te=ko/Math.pow(2,H-T),ne=(O*s.$+o.anchorY)*te,me=w*s.$*ko;return{x:Math.floor((L*s.$+o.anchorX)*te-y*s.$*ko),y:Math.floor(ne-me)}}findMatches(o,f,y){const w=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let T=0;T<o.length;T++){const L=o.get(T);if(L.crossTileID)continue;const O=this._symbolsByKey[L.key];if(!O)continue;const H=this.getScaledCoordinates(L,f);if(O.index){const te=O.index.range(H.x-w,H.y-w,H.x+w,H.y+w).sort();for(const ne of te){const me=O.crossTileIDs[ne];if(!y[me]){y[me]=!0,L.crossTileID=me;break}}}else if(O.positions)for(let te=0;te<O.positions.length;te++){const ne=O.positions[te],me=O.crossTileIDs[te];if(Math.abs(ne.x-H.x)<=w&&Math.abs(ne.y-H.y)<=w&&!y[me]){y[me]=!0,L.crossTileID=me;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class uA{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Jo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const f=Math.round((o-this.lng)/360);if(f!==0)for(const y in this.indexes){const w=this.indexes[y],T={};for(const L in w){const O=w[L];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+f),T[O.tileID.key]=O}this.indexes[y]=T}this.lng=o}addBucket(o,f,y){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let T=0;T<f.symbolInstances.length;T++)f.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const w=this.usedCrossTileIDs[o.overscaledZ];for(const T in this.indexes){const L=this.indexes[T];if(Number(T)>o.overscaledZ)for(const O in L){const H=L[O];H.tileID.isChildOf(o)&&H.findMatches(f.symbolInstances,o,w)}else{const O=L[o.scaledTo(Number(T)).key];O&&O.findMatches(f.symbolInstances,o,w)}}for(let T=0;T<f.symbolInstances.length;T++){const L=f.symbolInstances.get(T);L.crossTileID||(L.crossTileID=y.generate(),w[L.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Yo(o,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(o,f){for(const y of f.getCrossTileIDsLists())for(const w of y)delete this.usedCrossTileIDs[o][w]}removeStaleBuckets(o){let f=!1;for(const y in this.indexes){const w=this.indexes[y];for(const T in w)o[w[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,w[T]),delete w[T],f=!0)}return f}}class vc{constructor(){this.layerIndexes={},this.crossTileIDs=new uA,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,f,y){let w=this.layerIndexes[o.id];w===void 0&&(w=this.layerIndexes[o.id]=new Jo);let T=!1;const L={};w.handleWrapJump(y);for(const O of f){const H=O.getBucket(o);H&&o.id===H.layerIds[0]&&(H.bucketInstanceId||(H.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(O.tileID,H,this.crossTileIDs)&&(T=!0),L[H.bucketInstanceId]=!0)}return w.removeStaleBuckets(L)&&(T=!0),T}pruneUnusedLayers(o){const f={};o.forEach(y=>{f[y]=!0});for(const y in this.layerIndexes)f[y]||delete this.layerIndexes[y]}}var xc="void main() {fragColor=vec4(1.0);}";const ya={prelude:$i(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:$i("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:$i("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:$i(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:$i(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:$i(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:$i(xc,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:$i(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:$i(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:$i("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$i("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:$i(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:$i("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:$i(xc,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:$i(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:$i(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:$i(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:$i(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:$i(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:$i(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:$i(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$i(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:$i(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:$i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:$i(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:$i(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:$i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:$i(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:$i(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:$i(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:$i(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:$i("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:$i("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:$i("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:$i("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:$i(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:$i("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function $i(S,o){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=o.match(/in ([\w]+) ([\w]+)/g),w=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),L=T?T.concat(w):w,O={};return{fragmentSource:S=S.replace(f,(H,te,ne,me,he)=>(O[he]=!0,te==="define"?`
#ifndef HAS_UNIFORM_u_${he}
in ${ne} ${me} ${he};
#else
uniform ${ne} ${me} u_${he};
#endif
`:`
#ifdef HAS_UNIFORM_u_${he}
    ${ne} ${me} ${he} = u_${he};
#endif
`)),vertexSource:o=o.replace(f,(H,te,ne,me,he)=>{const Se=me==="float"?"vec2":"vec4",Ue=he.match(/color/)?"color":Se;return O[he]?te==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
in ${ne} ${Se} a_${he};
out ${ne} ${me} ${he};
#else
uniform ${ne} ${me} u_${he};
#endif
`:Ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = a_${he};
#else
    ${ne} ${me} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = unpack_mix_${Ue}(a_${he}, u_${he}_t);
#else
    ${ne} ${me} ${he} = u_${he};
#endif
`:te==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
in ${ne} ${Se} a_${he};
#else
uniform ${ne} ${me} u_${he};
#endif
`:Ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${ne} ${me} ${he} = a_${he};
#else
    ${ne} ${me} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${ne} ${me} ${he} = unpack_mix_${Ue}(a_${he}, u_${he}_t);
#else
    ${ne} ${me} ${he} = u_${he};
#endif
`}),staticAttributes:y,staticUniforms:L}}class Eu{constructor(o,f,y){this.vertexBuffer=o,this.indexBuffer=f,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Aa=s.aJ([{name:"a_pos",type:"Int16",components:2}]);const el="#define PROJECTION_MERCATOR",Ti="mercator";class nu{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ti}get shaderDefine(){return el}get shaderPreludeCode(){return ya.projectionMercator}get vertexShaderPreludeCode(){return ya.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(o){}getMeshFromTileID(o,f,y,w,T){if(this._cachedMesh)return this._cachedMesh;const L=new s.aL;L.emplaceBack(0,0),L.emplaceBack(s.$,0),L.emplaceBack(0,s.$),L.emplaceBack(s.$,s.$);const O=o.createVertexBuffer(L,Aa.members),H=s.aM.simpleSegment(0,0,4,2),te=new s.aN;te.emplaceBack(1,0,2),te.emplaceBack(1,2,3);const ne=o.createIndexBuffer(te);return this._cachedMesh=new Eu(O,ne,H),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(o){}}class qa{constructor(o=0,f=0,y=0,w=0){if(isNaN(o)||o<0||isNaN(f)||f<0||isNaN(y)||y<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=f,this.left=y,this.right=w}interpolate(o,f,y){return f.top!=null&&o.top!=null&&(this.top=s.C.number(o.top,f.top,y)),f.bottom!=null&&o.bottom!=null&&(this.bottom=s.C.number(o.bottom,f.bottom,y)),f.left!=null&&o.left!=null&&(this.left=s.C.number(o.left,f.left,y)),f.right!=null&&o.right!=null&&(this.right=s.C.number(o.right,f.right,y)),this}getCenter(o,f){const y=s.ah((this.left+o-this.right)/2,0,o),w=s.ah((this.top+f-this.bottom)/2,0,f);return new s.P(y,w)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new qa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function oo(S,o){if(!S.renderWorldCopies||S.lngRange)return;const f=o.lng-S.center.lng;o.lng+=f>180?-360:f<-180?360:0}function Ua(S){return Math.max(0,Math.floor(S))}class li{constructor(o,f,y,w,T,L){this._callbacks=o,this._tileSize=512,this._renderWorldCopies=L===void 0||!!L,this._minZoom=f||0,this._maxZoom=y||22,this._minPitch=w??0,this._maxPitch=T??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ua(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new qa,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(o,f,y){this._latRange=o.latRange,this._lngRange=o.lngRange,this._width=o.width,this._height=o.height,this._center=o.center,this._elevation=o.elevation,this._minElevationForCurrentTile=o.minElevationForCurrentTile,this._zoom=o.zoom,this._tileZoom=Ua(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=o.bearingInRadians,this._fovInRadians=o.fovInRadians,this._pitchInRadians=o.pitchInRadians,this._rollInRadians=o.rollInRadians,this._unmodified=o.unmodified,this._edgeInsets=new qa(o.padding.top,o.padding.bottom,o.padding.left,o.padding.right),this._minZoom=o.minZoom,this._maxZoom=o.maxZoom,this._minPitch=o.minPitch,this._maxPitch=o.maxPitch,this._renderWorldCopies=o.renderWorldCopies,this._cameraToCenterDistance=o.cameraToCenterDistance,this._nearZ=o.nearZ,this._farZ=o.farZ,this._autoCalculateNearFarZ=!y&&o.autoCalculateNearFarZ,f&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(o){this._minElevationForCurrentTile=o}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(o){this._minZoom!==o&&(this._minZoom=o,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(o){this._minPitch!==o&&(this._minPitch=o,this.setPitch(Math.max(this.pitch,o)))}get maxPitch(){return this._maxPitch}setMaxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.setPitch(Math.min(this.pitch,o)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(o){const f=s.aO(o,-180,180)*Math.PI/180;var y,w,T,L,O,H,te,ne,me;this._bearingInRadians!==f&&(this._unmodified=!1,this._bearingInRadians=f,this._calcMatrices(),this._rotationMatrix=g(),y=this._rotationMatrix,T=-this._bearingInRadians,L=(w=this._rotationMatrix)[0],O=w[1],H=w[2],te=w[3],ne=Math.sin(T),me=Math.cos(T),y[0]=L*me+H*ne,y[1]=O*me+te*ne,y[2]=L*-ne+H*me,y[3]=O*-ne+te*me)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(o){const f=s.ah(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==f&&(this._unmodified=!1,this._pitchInRadians=f,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(o){const f=o/180*Math.PI;this._rollInRadians!==f&&(this._unmodified=!1,this._rollInRadians=f,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aP(this._fovInRadians)}setFov(o){o=s.ah(o,.1,150),this.fov!==o&&(this._unmodified=!1,this._fovInRadians=s.ae(o),this._calcMatrices())}get zoom(){return this._zoom}setZoom(o){const f=this.getConstrained(this._center,o).zoom;this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this._tileZoom=Math.max(0,Math.floor(f)),this._scale=s.af(f),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(o,f){this._autoCalculateNearFarZ=!1,this._nearZ=o,this._farZ=f,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,f,y){this._unmodified=!1,this._edgeInsets.interpolate(o,f,y),this._constrain(),this._calcMatrices()}resize(o,f,y=!0){this._width=o,this._height=f,y&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new at([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(o){o?(this._lngRange=[o.getWest(),o.getEast()],this._latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-s.ai,s.ai])}getConstrained(o,f){return this._callbacks.getConstrained(o,f)}getCameraQueryGeometry(o,f){if(f.length===1)return[f[0],o];{const{minX:y,minY:w,maxX:T,maxY:L}=s.a2.fromPoints(f).extend(o);return[new s.P(y,w),new s.P(T,w),new s.P(T,L),new s.P(y,L),new s.P(y,w)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const o=this._unmodified,{center:f,zoom:y}=this.getConstrained(this.center,this.zoom);this.setCenter(f),this.setZoom(y),this._unmodified=o,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let o=s.ag(new Float64Array(16));s.N(o,o,[this._width/2,-this._height/2,1]),s.M(o,o,[1,-1,0]),this._clipSpaceToPixelsMatrix=o,o=s.ag(new Float64Array(16)),s.N(o,o,[1,-1,1]),s.M(o,o,[-1,-1,0]),s.N(o,o,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=o,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(o,f,y,w){const T=y!==void 0?y:this.bearing,L=w=w!==void 0?w:this.pitch,O=s.a1.fromLngLat(o,f),H=-Math.cos(s.ae(L)),te=Math.sin(s.ae(L)),ne=te*Math.sin(s.ae(T)),me=-te*Math.cos(s.ae(T));let he=this.elevation;const Se=f-he;let Ue;H*Se>=0||Math.abs(H)<.1?(Ue=1e4,he=f+Ue*H):Ue=-Se/H;let Xe,Je,st=s.aQ(1,O.y),pt=0;do{if(pt+=1,pt>10)break;Je=Ue/st,Xe=new s.a1(O.x+ne*Je,O.y+me*Je),st=1/Xe.meterInMercatorCoordinateUnits()}while(Math.abs(Ue-Je*st)>1e-12);return{center:Xe.toLngLat(),elevation:he,zoom:s.ak(this.height/2/Math.tan(this.fovInRadians/2)/Je/this.tileSize)}}recalculateZoomAndCenter(o){if(this.elevation-o==0)return;const f=s.aj(1,this.center.lat)*this.worldSize,y=this.cameraToCenterDistance/f,w=s.a1.fromLngLat(this.center,this.elevation),T=Nt(this.center,this.elevation,this.pitch,this.bearing,y);this._elevation=o;const L=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),s.aQ(T.z,w.y),this.bearing,this.pitch);this._elevation=L.elevation,this._center=L.center,this.setZoom(L.zoom)}getCameraPoint(){const o=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(o*Math.sin(this.rollInRadians),o*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const o=s.aj(1,this.center.lat)*this.worldSize;return Nt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/o).toLngLat()}getMercatorTileCoordinates(o){if(!o)return[0,0,1,1];const f=o.canonical.z>=0?1<<o.canonical.z:Math.pow(2,o.canonical.z);return[o.canonical.x/f,o.canonical.y/f,1/f/s.$,1/f/s.$]}}class Hs{constructor(o,f){this.min=o,this.max=f,this.center=s.aR([],s.aS([],this.min,this.max),.5)}quadrant(o){const f=[o%2==0,o<2],y=s.aT(this.min),w=s.aT(this.max);for(let T=0;T<f.length;T++)y[T]=f[T]?this.min[T]:this.center[T],w[T]=f[T]?this.center[T]:this.max[T];return w[2]=this.max[2],new Hs(y,w)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersectsFrustum(o){let f=!0;for(let y=0;y<o.planes.length;y++){const w=this.intersectsPlane(o.planes[y]);if(w===0)return 0;w===1&&(f=!1)}return f?2:o.aabb.min[0]>this.max[0]||o.aabb.min[1]>this.max[1]||o.aabb.min[2]>this.max[2]||o.aabb.max[0]<this.min[0]||o.aabb.max[1]<this.min[1]||o.aabb.max[2]<this.min[2]?0:1}intersectsPlane(o){let f=o[3],y=o[3];for(let w=0;w<3;w++)o[w]>0?(f+=o[w]*this.min[w],y+=o[w]*this.max[w]):(y+=o[w]*this.min[w],f+=o[w]*this.max[w]);return f>=0?2:y<0?0:1}}class ys{distanceToTile2d(o,f,y,w){const T=w.distanceX([o,f]),L=w.distanceY([o,f]);return Math.hypot(T,L)}getWrap(o,f,y){return y}getTileBoundingVolume(o,f,y,w){var T,L;let O=0,H=0;if(w?.terrain){const ne=new s.Z(o.z,f,o.z,o.x,o.y),me=w.terrain.getMinMaxElevation(ne);O=(T=me.minElevation)!==null&&T!==void 0?T:Math.min(0,y),H=(L=me.maxElevation)!==null&&L!==void 0?L:Math.max(0,y)}const te=1<<o.z;return new Hs([f+o.x/te,o.y/te,O],[f+(o.x+1)/te,(o.y+1)/te,H])}allowVariableZoom(o,f){const y=o.fov*(Math.abs(Math.cos(o.rollInRadians))*o.height+Math.abs(Math.sin(o.rollInRadians))*o.width)/o.height,w=s.ah(78.5-y/2,0,60);return!!f.terrain||o.pitch>w}allowWorldCopies(){return!0}prepareNextFrame(){}}class An{constructor(o,f,y){this.points=o,this.planes=f,this.aabb=y}static fromInvProjectionMatrix(o,f=1,y=0,w,T){const L=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],O=Math.pow(2,y),H=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(he=>function(Se,Ue,Xe,Je){const st=s.aw([],Se,Ue),pt=1/st[3]/Xe*Je;return s.aY(st,st,[pt,pt,1/st[3],pt])}(he,o,f,O));w&&function(he,Se,Ue,Xe){const Je=Xe?4:0,st=Xe?0:4;let pt=0;const xt=[],mt=[];for(let yt=0;yt<4;yt++){const Lt=s.aU([],he[yt+st],he[yt+Je]),rr=s.aZ(Lt);s.aR(Lt,Lt,1/rr),xt.push(rr),mt.push(Lt)}for(let yt=0;yt<4;yt++){const Lt=s.a_(he[yt+Je],mt[yt],Ue);pt=Lt!==null&&Lt>=0?Math.max(pt,Lt):Math.max(pt,xt[yt])}const wt=function(yt,Lt){const rr=s.aU([],yt[Lt[0]],yt[Lt[1]]),$t=s.aU([],yt[Lt[2]],yt[Lt[1]]),Zt=[0,0,0,0];return s.aV(Zt,s.aW([],rr,$t)),Zt[3]=-s.aX(Zt,yt[Lt[0]]),Zt}(he,Se),St=function(yt,Lt){const rr=s.a$(yt),$t=s.b0([],yt,1/rr),Zt=s.aU([],Lt,s.aR([],$t,s.aX(Lt,$t))),Yt=s.a$(Zt);if(Yt>0){const wr=Math.sqrt(1-$t[3]*$t[3]),Br=s.aR([],$t,-$t[3]),pr=s.aS([],Br,s.aR([],Zt,wr/Yt));return s.b1(Lt,pr)}return null}(Ue,wt);if(St!==null){const yt=St/s.aX(mt[0],wt);pt=Math.min(pt,yt)}for(let yt=0;yt<4;yt++){const Lt=Math.min(pt,xt[yt]);he[yt+st]=[he[yt+Je][0]+mt[yt][0]*Lt,he[yt+Je][1]+mt[yt][1]*Lt,he[yt+Je][2]+mt[yt][2]*Lt,1]}}(H,L[0],w,T);const te=L.map(he=>{const Se=s.aU([],H[he[0]],H[he[1]]),Ue=s.aU([],H[he[2]],H[he[1]]),Xe=s.aV([],s.aW([],Se,Ue)),Je=-s.aX(Xe,H[he[1]]);return Xe.concat(Je)}),ne=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],me=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const he of H)for(let Se=0;Se<3;Se++)ne[Se]=Math.min(ne[Se],he[Se]),me[Se]=Math.max(me[Se],he[Se]);return new An(H,te,new Hs(ne,me))}}class Ka{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,f,y){return this._helper.interpolatePadding(o,f,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,f,y=!0){this._helper.resize(o,f,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,f){this._helper.overrideNearFarZ(o,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(o,f){}constructor(o,f,y,w,T){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new li({calcMatrices:()=>{this._calcMatrices()},getConstrained:(L,O)=>this.getConstrained(L,O)},o,f,y,w,T),this._coveringTilesDetailsProvider=new ys}clone(){const o=new Ka;return o.apply(this),o}apply(o,f,y){this._helper.apply(o,f,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(o){const f=[new s.b2(0,o)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new s.P(0,0)),w=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),L=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),O=Math.floor(Math.min(y.x,w.x,T.x,L.x)),H=Math.floor(Math.max(y.x,w.x,T.x,L.x)),te=1;for(let ne=O-te;ne<=H+te;ne++)ne!==0&&f.push(new s.b2(ne,o))}return f}getCameraFrustum(){return An.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(o){const f=this.screenPointToLocation(this.centerPoint,o),y=o?o.getElevationForLngLatZoom(f,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(o,f){const y=s.aj(this.elevation,this.center.lat),w=this.screenPointToMercatorCoordinateAtZ(f,y),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),L=s.a1.fromLngLat(o),O=new s.a1(L.x-(w.x-T.x),L.y-(w.y-T.y));this.setCenter(O?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(o,f){return f?this.coordinatePoint(s.a1.fromLngLat(o),f.getElevationForLngLatZoom(o,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.a1.fromLngLat(o))}screenPointToLocation(o,f){var y;return(y=this.screenPointToMercatorCoordinate(o,f))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(o,f){if(f){const y=f.pointCoordinate(o);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(o)}screenPointToMercatorCoordinateAtZ(o,f){const y=f||0,w=[o.x,o.y,0,1],T=[o.x,o.y,1,1];s.aw(w,w,this._pixelMatrixInverse),s.aw(T,T,this._pixelMatrixInverse);const L=w[3],O=T[3],H=w[1]/L,te=T[1]/O,ne=w[2]/L,me=T[2]/O,he=ne===me?0:(y-ne)/(me-ne);return new s.a1(s.C.number(w[0]/L,T[0]/O,he)/this.worldSize,s.C.number(H,te,he)/this.worldSize,y)}coordinatePoint(o,f=0,y=this._pixelMatrix){const w=[o.x*this.worldSize,o.y*this.worldSize,f,1];return s.aw(w,w,y),new s.P(w[0]/w[3],w[1]/w[3])}getBounds(){const o=Math.max(0,this._helper._height/2-Ft(this));return new at().extend(this.screenPointToLocation(new s.P(0,o))).extend(this.screenPointToLocation(new s.P(this._helper._width,o))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(o,f){return f?f.pointCoordinate(o)!=null:o.y>this.height/2-Ft(this)}calculatePosMatrix(o,f=!1,y){var w;const T=(w=o.key)!==null&&w!==void 0?w:s.b3(o.wrap,o.canonical.z,o.canonical.z,o.canonical.x,o.canonical.y),L=f?this._alignedPosMatrixCache:this._posMatrixCache;if(L.has(T)){const te=L.get(T);return y?te.f32:te.f64}const O=vt(o,this.worldSize);s.O(O,f?this._alignedProjMatrix:this._viewProjMatrix,O);const H={f64:O,f32:new Float32Array(O)};return L.set(T,H),y?H.f32:H.f64}calculateFogMatrix(o){const f=o.key,y=this._fogMatrixCacheF32;if(y.has(f))return y.get(f);const w=vt(o,this.worldSize);return s.O(w,this._fogMatrix,w),y.set(f,new Float32Array(w)),y.get(f)}getConstrained(o,f){f=s.ah(+f,this.minZoom,this.maxZoom);const y={center:new s.S(o.lng,o.lat),zoom:f};let w=this._helper._lngRange;if(!this._helper._renderWorldCopies&&w===null){const xt=179.9999999999;w=[-xt,xt]}const T=this.tileSize*s.af(y.zoom);let L=0,O=T,H=0,te=T,ne=0,me=0;const{x:he,y:Se}=this.size;if(this._helper._latRange){const xt=this._helper._latRange;L=s.U(xt[1])*T,O=s.U(xt[0])*T,O-L<Se&&(ne=Se/(O-L))}w&&(H=s.aO(s.V(w[0])*T,0,T),te=s.aO(s.V(w[1])*T,0,T),te<H&&(te+=T),te-H<he&&(me=he/(te-H)));const{x:Ue,y:Xe}=Ke(T,o);let Je,st;const pt=Math.max(me||0,ne||0);if(pt){const xt=new s.P(me?(te+H)/2:Ue,ne?(O+L)/2:Xe);return y.center=At(T,xt).wrap(),y.zoom+=s.ak(pt),y}if(this._helper._latRange){const xt=Se/2;Xe-xt<L&&(st=L+xt),Xe+xt>O&&(st=O-xt)}if(w){const xt=(H+te)/2;let mt=Ue;this._helper._renderWorldCopies&&(mt=s.aO(Ue,xt-T/2,xt+T/2));const wt=he/2;mt-wt<H&&(Je=H+wt),mt+wt>te&&(Je=te-wt)}if(Je!==void 0||st!==void 0){const xt=new s.P(Je??Ue,st??Xe);y.center=At(T,xt).wrap()}return y}calculateCenterFromCameraLngLatAlt(o,f,y,w){return this._helper.calculateCenterFromCameraLngLatAlt(o,f,y,w)}_calculateNearFarZIfNeeded(o,f,y){if(!this._helper.autoCalculateNearFarZ)return;const w=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=o-w*this._helper._pixelPerMeter/Math.cos(f),L=w<0?T:o,O=Math.PI/2+this.pitchInRadians,H=s.ae(this.fov)*(Math.abs(Math.cos(s.ae(this.roll)))*this.height+Math.abs(Math.sin(s.ae(this.roll)))*this.width)/this.height*(.5+y.y/this.height),te=Math.sin(H)*L/Math.sin(s.ah(Math.PI-O-H,.01,Math.PI-.01)),ne=Ft(this),me=Math.atan(ne/this._helper.cameraToCenterDistance),he=s.ae(.75),Se=me>he?2*me*(.5+y.y/(2*ne)):he,Ue=Math.sin(Se)*L/Math.sin(s.ah(Math.PI-O-Se,.01,Math.PI-.01)),Xe=Math.min(te,Ue);this._helper._farZ=1.01*(Math.cos(Math.PI/2-f)*Xe+L),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const o=this.centerOffset,f=Ke(this.worldSize,this.center),y=f.x,w=f.y;this._helper._pixelPerMeter=s.aj(1,this.center.lat)*this.worldSize;const T=s.ae(Math.min(this.pitch,je)),L=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let O;this._calculateNearFarZIfNeeded(L,T,o),O=new Float64Array(16),s.b4(O,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aq(this._invProjMatrix,O),O[8]=2*-o.x/this._helper._width,O[9]=2*o.y/this._helper._height,this._projectionMatrix=s.b5(O),s.N(O,O,[1,-1,1]),s.M(O,O,[0,0,-this._helper.cameraToCenterDistance]),s.b6(O,O,-this.rollInRadians),s.b7(O,O,this.pitchInRadians),s.b6(O,O,-this.bearingInRadians),s.M(O,O,[-y,-w,0]),this._mercatorMatrix=s.N([],O,[this.worldSize,this.worldSize,this.worldSize]),s.N(O,O,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O),s.M(O,O,[0,0,-this.elevation]),this._viewProjMatrix=O,this._invViewProjMatrix=s.aq([],O);const H=[0,0,-1,1];s.aw(H,H,this._invViewProjMatrix),this._cameraPosition=[H[0]/H[3],H[1]/H[3],H[2]/H[3]],this._fogMatrix=new Float64Array(16),s.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,L,this._helper._farZ),this._fogMatrix[8]=2*-o.x/this.width,this._fogMatrix[9]=2*o.y/this.height,s.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.M(this._fogMatrix,this._fogMatrix,[-y,-w,0]),s.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O);const te=this._helper._width%2/2,ne=this._helper._height%2/2,me=Math.cos(this.bearingInRadians),he=Math.sin(-this.bearingInRadians),Se=y-Math.round(y)+me*te+he*ne,Ue=w-Math.round(w)+me*ne+he*te,Xe=new Float64Array(O);if(s.M(Xe,Xe,[Se>.5?Se-1:Se,Ue>.5?Ue-1:Ue,0]),this._alignedProjMatrix=Xe,O=s.aq(new Float64Array(16),this._pixelMatrix),!O)throw new Error("failed to invert matrix");this._pixelMatrixInverse=O,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const o=this.screenPointToMercatorCoordinate(new s.P(0,0)),f=[o.x*this.worldSize,o.y*this.worldSize,0,1];return s.aw(f,f,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const o=s.aj(1,this.center.lat)*this.worldSize;return Nt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/o).toLngLat()}lngLatToCameraDepth(o,f){const y=s.a1.fromLngLat(o),w=[y.x*this.worldSize,y.y*this.worldSize,f,1];return s.aw(w,w,this._viewProjMatrix),w[2]/w[3]}getProjectionData(o){const{overscaledTileID:f,aligned:y,applyTerrainMatrix:w}=o,T=this._helper.getMercatorTileCoordinates(f),L=f?this.calculatePosMatrix(f,y,!0):null;let O;return O=f&&f.terrainRttPosMatrix32f&&w?f.terrainRttPosMatrix32f:L||s.b8(),{mainMatrix:O,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:O}}isLocationOccluded(o){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(o,f,y){return 1}transformLightDirection(o){return s.aT(o)}getRayDirectionFromPixel(o){throw new Error("Not implemented.")}projectTileCoordinates(o,f,y,w){const T=this.calculatePosMatrix(y);let L;w?(L=[o,f,w(o,f),1],s.aw(L,L,T)):(L=[o,f,0,1],yi(L,L,T));const O=L[3];return{point:new s.P(L[0]/O,L[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}populateCache(o){for(const f of o)this.calculatePosMatrix(f)}getMatrixForModel(o,f){const y=s.a1.fromLngLat(o,f),w=y.meterInMercatorCoordinateUnits(),T=s.b9();return s.M(T,T,[y.x,y.y,y.z]),s.b6(T,T,Math.PI),s.b7(T,T,Math.PI/2),s.N(T,T,[-w,w,w]),T}getProjectionDataForCustomLayer(o=!0){const f=new s.Z(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:f,applyGlobeMatrix:o}),w=vt(f,this.worldSize);s.O(w,this._viewProjMatrix,w),y.tileMercatorCoords=[0,0,1,1];const T=[s.$,s.$,this.worldSize/this._helper.pixelsPerMeter],L=s.ba();return s.N(L,w,T),y.fallbackMatrix=L,y.mainMatrix=L,y}getFastPathSimpleProjectionMatrix(o){return this.calculatePosMatrix(o)}}function Zn(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ls(S){if(S.useSlerp)if(S.k<1){const o=s.bb(S.startEulerAngles.roll,S.startEulerAngles.pitch,S.startEulerAngles.bearing),f=s.bb(S.endEulerAngles.roll,S.endEulerAngles.pitch,S.endEulerAngles.bearing),y=new Float64Array(4);s.bc(y,o,f,S.k);const w=s.bd(y);S.tr.setRoll(w.roll),S.tr.setPitch(w.pitch),S.tr.setBearing(w.bearing)}else S.tr.setRoll(S.endEulerAngles.roll),S.tr.setPitch(S.endEulerAngles.pitch),S.tr.setBearing(S.endEulerAngles.bearing);else S.tr.setRoll(s.C.number(S.startEulerAngles.roll,S.endEulerAngles.roll,S.k)),S.tr.setPitch(s.C.number(S.startEulerAngles.pitch,S.endEulerAngles.pitch,S.k)),S.tr.setBearing(s.C.number(S.startEulerAngles.bearing,S.endEulerAngles.bearing,S.k))}function _a(S,o,f,y,w){const T=w.padding,L=Ke(w.worldSize,f.getNorthWest()),O=Ke(w.worldSize,f.getNorthEast()),H=Ke(w.worldSize,f.getSouthEast()),te=Ke(w.worldSize,f.getSouthWest()),ne=s.ae(-y),me=L.rotate(ne),he=O.rotate(ne),Se=H.rotate(ne),Ue=te.rotate(ne),Xe=new s.P(Math.max(me.x,he.x,Ue.x,Se.x),Math.max(me.y,he.y,Ue.y,Se.y)),Je=new s.P(Math.min(me.x,he.x,Ue.x,Se.x),Math.min(me.y,he.y,Ue.y,Se.y)),st=Xe.sub(Je),pt=(w.width-(T.left+T.right+o.left+o.right))/st.x,xt=(w.height-(T.top+T.bottom+o.top+o.bottom))/st.y;if(xt<0||pt<0)return void Zn();const mt=Math.min(s.ak(w.scale*Math.min(pt,xt)),S.maxZoom),wt=s.P.convert(S.offset),St=new s.P((o.left-o.right)/2,(o.top-o.bottom)/2).rotate(s.ae(y)),yt=wt.add(St).mult(w.scale/s.af(mt));return{center:At(w.worldSize,L.add(H).div(2).sub(yt)),zoom:mt,bearing:y}}class tl{get useGlobeControls(){return!1}handlePanInertia(o,f){const y=o.mag(),w=Math.abs(Ft(f));return{easingOffset:o.mult(Math.min(.75*w/y,1)),easingCenter:f.center}}handleMapControlsRollPitchBearingZoom(o,f){o.bearingDelta&&f.setBearing(f.bearing+o.bearingDelta),o.pitchDelta&&f.setPitch(f.pitch+o.pitchDelta),o.rollDelta&&f.setRoll(f.roll+o.rollDelta),o.zoomDelta&&f.setZoom(f.zoom+o.zoomDelta)}handleMapControlsPan(o,f,y){o.around.distSqr(f.centerPoint)<.01||f.setLocationAtPoint(y,o.around)}cameraForBoxAndBearing(o,f,y,w,T){return _a(o,f,y,w,T)}handleJumpToCenterZoom(o,f){o.zoom!==(f.zoom!==void 0?+f.zoom:o.zoom)&&o.setZoom(+f.zoom),f.center!==void 0&&o.setCenter(s.S.convert(f.center))}handleEaseTo(o,f){const y=o.zoom,w=o.padding,T={roll:o.roll,pitch:o.pitch,bearing:o.bearing},L={roll:f.roll===void 0?o.roll:f.roll,pitch:f.pitch===void 0?o.pitch:f.pitch,bearing:f.bearing===void 0?o.bearing:f.bearing},O=f.zoom!==void 0,H=!o.isPaddingEqual(f.padding);let te=!1;const ne=O?+f.zoom:o.zoom;let me=o.centerPoint.add(f.offsetAsPoint);const he=o.screenPointToLocation(me),{center:Se,zoom:Ue}=o.getConstrained(s.S.convert(f.center||he),ne??y);oo(o,Se);const Xe=Ke(o.worldSize,he),Je=Ke(o.worldSize,Se).sub(Xe),st=s.af(Ue-y);return te=Ue!==y,{easeFunc:pt=>{if(te&&o.setZoom(s.C.number(y,Ue,pt)),s.be(T,L)||Ls({startEulerAngles:T,endEulerAngles:L,tr:o,k:pt,useSlerp:T.roll!=L.roll}),H&&(o.interpolatePadding(w,f.padding,pt),me=o.centerPoint.add(f.offsetAsPoint)),f.around)o.setLocationAtPoint(f.around,f.aroundPoint);else{const xt=s.af(o.zoom-y),mt=Ue>y?Math.min(2,st):Math.max(.5,st),wt=Math.pow(mt,1-pt),St=At(o.worldSize,Xe.add(Je.mult(pt*wt)).mult(xt));o.setLocationAtPoint(o.renderWorldCopies?St.wrap():St,me)}},isZooming:te,elevationCenter:Se}}handleFlyTo(o,f){const y=f.zoom!==void 0,w=o.zoom,T=o.getConstrained(s.S.convert(f.center||f.locationAtOffset),y?+f.zoom:w),L=T.center,O=T.zoom;oo(o,L);const H=Ke(o.worldSize,f.locationAtOffset),te=Ke(o.worldSize,L).sub(H),ne=te.mag(),me=s.af(O-w);let he;if(f.minZoom!==void 0){const Se=Math.min(+f.minZoom,w,O),Ue=o.getConstrained(L,Se).zoom;he=s.af(Ue-w)}return{easeFunc:(Se,Ue,Xe,Je)=>{o.setZoom(Se===1?O:w+s.ak(Ue));const st=Se===1?L:At(o.worldSize,H.add(te.mult(Xe)).mult(Ue));o.setLocationAtPoint(o.renderWorldCopies?st.wrap():st,Je)},scaleOfZoom:me,targetCenter:L,scaleOfMinZoom:he,pixelPathLength:ne}}}class _n{constructor(o,f,y){this.blendFunction=o,this.blendColor=f,this.mask=y}}_n.Replace=[1,0],_n.disabled=new _n(_n.Replace,s.bf.transparent,[!1,!1,!1,!1]),_n.unblended=new _n(_n.Replace,s.bf.transparent,[!0,!0,!0,!0]),_n.alphaBlended=new _n([1,771],s.bf.transparent,[!0,!0,!0,!0]);const kn=2305;class Ki{constructor(o,f,y){this.enable=o,this.mode=f,this.frontFace=y}}Ki.disabled=new Ki(!1,1029,kn),Ki.backCCW=new Ki(!0,1029,kn),Ki.frontCCW=new Ki(!0,1028,kn);class di{constructor(o,f,y){this.func=o,this.mask=f,this.range=y}}di.ReadOnly=!1,di.ReadWrite=!0,di.disabled=new di(519,di.ReadOnly,[0,1]);const Vs=7680;class bi{constructor(o,f,y,w,T,L){this.test=o,this.ref=f,this.mask=y,this.fail=w,this.depthFail=T,this.pass=L}}bi.disabled=new bi({func:519,mask:0},0,0,Vs,Vs,Vs);const Wl=new WeakMap;function _s(S){var o;if(Wl.has(S))return Wl.get(S);{const f=(o=S.getParameter(S.VERSION))===null||o===void 0?void 0:o.startsWith("WebGL 2.0");return Wl.set(S,f),f}}class $l{get awaitingQuery(){return!!this._readbackQueue}constructor(o){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=o;const f=o.context,y=f.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const w=new s.aL;w.emplaceBack(-1,-1),w.emplaceBack(2,-1),w.emplaceBack(-1,2);const T=new s.aN;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Eu(f.createVertexBuffer(w,Aa.members),f.createIndexBuffer(T),s.aM.simpleSegment(0,0,w.length,T.length)),this._resultBuffer=new Uint8Array(4),f.activeTexture.set(y.TEXTURE1);const L=y.createTexture();y.bindTexture(y.TEXTURE_2D,L),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=f.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(L),_s(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const o=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),o.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(o,f){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(o,f),this._updateCount++,this._measuredError}_bindFramebuffer(){const o=this._cachedRenderContext.context,f=o.gl;o.activeTexture.set(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,this._fbo.colorAttachment.get()),o.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(o,f){const y=this._cachedRenderContext.context,w=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:s.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,w.TRIANGLES,di.disabled,bi.disabled,_n.unblended,Ki.disabled,((T,L)=>({u_input:T,u_output_expected:L}))(o,f),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&_s(w)){w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.readBuffer(w.COLOR_ATTACHMENT0),w.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),w.bindBuffer(w.PIXEL_PACK_BUFFER,null);const T=w.fenceSync(w.SYNC_GPU_COMMANDS_COMPLETE,0);w.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const o=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&_s(o)){const f=o.clientWaitSync(this._readbackQueue.sync,0,0);if(f===o.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(f===o.TIMEOUT_EXPIRED)return;o.bindBuffer(o.PIXEL_PACK_BUFFER,this._pbo),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),o.bindBuffer(o.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),o.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=$l._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(o){let f=0;return f+=o[0]/256,f+=o[1]/65536,f+=o[2]/16777216,o[3]<127&&(f=-f),f/128}}const Xl=s.$/128;function yl(S,o){const f=S.granularity!==void 0?Math.max(S.granularity,1):1,y=f+(S.generateBorders?2:0),w=f+(S.extendToNorthPole||S.generateBorders?1:0)+(S.extendToSouthPole||S.generateBorders?1:0),T=y+1,L=w+1,O=S.generateBorders?-1:0,H=S.generateBorders||S.extendToNorthPole?-1:0,te=f+(S.generateBorders?1:0),ne=f+(S.generateBorders||S.extendToSouthPole?1:0),me=T*L,he=y*w*6,Se=T*L>65536;if(Se&&o==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ue=Se||o==="32bit",Xe=new Int16Array(2*me);let Je=0;for(let xt=H;xt<=ne;xt++)for(let mt=O;mt<=te;mt++){let wt=mt/f*s.$;mt===-1&&(wt=-Xl),mt===f+1&&(wt=s.$+Xl);let St=xt/f*s.$;xt===-1&&(St=S.extendToNorthPole?s.bh:-Xl),xt===f+1&&(St=S.extendToSouthPole?s.bi:s.$+Xl),Xe[Je++]=wt,Xe[Je++]=St}const st=Ue?new Uint32Array(he):new Uint16Array(he);let pt=0;for(let xt=0;xt<w;xt++)for(let mt=0;mt<y;mt++){const wt=mt+1+xt*T,St=mt+(xt+1)*T,yt=mt+1+(xt+1)*T;st[pt++]=mt+xt*T,st[pt++]=St,st[pt++]=wt,st[pt++]=wt,st[pt++]=St,st[pt++]=yt}return{vertices:Xe.buffer.slice(0),indices:st.buffer.slice(0),uses32bitIndices:Ue}}const No=new s.aK({fill:new s.bj(128,2),line:new s.bj(512,0),tile:new s.bj(128,32),stencil:new s.bj(128,1),circle:3});class Io{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ya.projectionGlobe}get vertexShaderPreludeCode(){return ya.projectionMercator.vertexSource}get subdivisionGranularity(){return No}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(o){this._errorMeasurement||(this._errorMeasurement=new $l(o));const f=s.U(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-f*Math.PI*2))-.5*Math.PI,w=this._errorMeasurement.updateErrorLoop(f,y),T=N.now();w!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=w,this._errorMeasurementLastChangeTime=T);const L=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bl(L))}_getMeshKey(o){return`${o.granularity.toString(36)}_${o.generateBorders?"b":""}${o.extendToNorthPole?"n":""}${o.extendToSouthPole?"s":""}`}getMeshFromTileID(o,f,y,w,T){const L=(T==="stencil"?No.stencil:No.tile).getGranularityForZoomLevel(f.z);return this._getMesh(o,{granularity:L,generateBorders:y,extendToNorthPole:f.y===0&&w,extendToSouthPole:f.y===(1<<f.z)-1&&w})}_getMesh(o,f){const y=this._getMeshKey(f);if(y in this._tileMeshCache)return this._tileMeshCache[y];const w=function(T,L){const O=yl(L,"16bit"),H=s.aL.deserialize({arrayBuffer:O.vertices,length:O.vertices.byteLength/2/2}),te=s.aN.deserialize({arrayBuffer:O.indices,length:O.indices.byteLength/2/3});return new Eu(T.createVertexBuffer(H,Aa.members),T.createIndexBuffer(te),s.aM.simpleSegment(0,0,H.length,te.length))}(o,f);return this._tileMeshCache[y]=w,w}recalculate(o){}hasTransition(){const o=N.now();let f=!1;return f=f||(o-this._errorMeasurementLastChangeTime)/1e3<.7,f=f||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,f}setErrorQueryLatitudeDegrees(o){this._errorQueryLatitudeDegrees=o}}const Tu=new s.r({type:new s.D(s.v.projection.type)});class uh extends s.E{constructor(o){super(),this._transitionable=new s.t(Tu,void 0),this.setProjection(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0)),this._mercatorProjection=new nu,this._verticalPerspectiveProjection=new Io}get transitionState(){const o=this.properties.get("type");if(typeof o=="string"&&o==="mercator")return 0;if(typeof o=="string"&&o==="vertical-perspective")return 1;if(o instanceof s.bm){if(o.from==="vertical-perspective"&&o.to==="mercator")return 1-o.transition;if(o.from==="mercator"&&o.to==="vertical-perspective")return o.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(o){this._mercatorProjection.updateGPUdependent(o),this._verticalPerspectiveProjection.updateGPUdependent(o)}getMeshFromTileID(o,f,y,w,T){return this.currentProjection.getMeshFromTileID(o,f,y,w,T)}setProjection(o){this._transitionable.setValue("type",o?.type||"mercator")}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}setErrorQueryLatitudeDegrees(o){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(o),this._mercatorProjection.setErrorQueryLatitudeDegrees(o)}}function Fu(S){const o=yc(S.worldSize,S.center.lat);return 2*Math.PI*o}function ba(S,o,f,y,w){const T=1/(1<<w),L=o/s.$*T+y*T,O=s.bo((S/s.$*T+f*T)*Math.PI*2+Math.PI,2*Math.PI),H=2*Math.atan(Math.exp(Math.PI-L*Math.PI*2))-.5*Math.PI,te=Math.cos(H),ne=new Float64Array(3);return ne[0]=Math.sin(O)*te,ne[1]=Math.sin(H),ne[2]=Math.cos(O)*te,ne}function Kn(S){return function(o,f){const y=Math.cos(f),w=new Float64Array(3);return w[0]=Math.sin(o)*y,w[1]=Math.sin(f),w[2]=Math.cos(o)*y,w}(S.lng*Math.PI/180,S.lat*Math.PI/180)}function yc(S,o){return S/(2*Math.PI)/Math.cos(o*Math.PI/180)}function Zl(S){const o=Math.asin(S[1])/Math.PI*180,f=Math.sqrt(S[0]*S[0]+S[2]*S[2]);if(f>1e-6){const y=S[0]/f,w=Math.acos(S[2]/f),T=(y>0?w:-w)/Math.PI*180;return new s.S(s.aO(T,-180,180),o)}return new s.S(0,o)}function Yl(S){return Math.cos(S*Math.PI/180)}function Y(S,o){const f=Yl(S),y=Yl(o);return s.ak(y/f)}function ke(S,o){const f=S.rotate(o.bearingInRadians),y=o.zoom+Y(o.center.lat,0),w=s.bk(1/Yl(o.center.lat),1/Yl(Math.min(Math.abs(o.center.lat),60)),s.bn(y,7,3,0,1)),T=360/Fu({worldSize:o.worldSize,center:{lat:o.center.lat}});return new s.S(o.center.lng-f.x*T*w,s.ah(o.center.lat+f.y*T,-s.ai,s.ai))}function ft(S){const o=.5*S,f=Math.sin(o),y=Math.cos(o);return Math.log(f+y)-Math.log(y-f)}function Tt(S,o,f,y){const w=S.lat+f*y;if(Math.abs(f)>1){const T=(Math.sign(S.lat+f)!==Math.sign(S.lat)?-Math.abs(S.lat):Math.abs(S.lat))*Math.PI/180,L=Math.abs(S.lat+f)*Math.PI/180,O=ft(T+y*(L-T)),H=ft(T),te=ft(L);return new s.S(S.lng+o*((O-H)/(te-H)),w)}return new s.S(S.lng+o*y,w)}class Wt{constructor(o){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=o}swapBuffers(){if(!this._hadAnyChanges)return;const o=this._cachePrevious;this._cachePrevious=this._cache,this._cache=o,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(o,f,y,w){const T=`${o.z}_${o.x}_${o.y}_${w?.terrain?"t":""}`,L=this._cache.get(T);if(L)return L;const O=this._cachePrevious.get(T);if(O)return this._cache.set(T,O),O;const H=this._boundingVolumeFactory(o,f,y,w);return this._cache.set(T,H),this._hadAnyChanges=!0,H}}class lr{constructor(o,f,y,w){this.min=y,this.max=w,this.points=o,this.planes=f}static fromAabb(o,f){const y=[];for(let w=0;w<8;w++)y.push([1&~w?o[0]:f[0],(w>>1&1)==1?f[1]:o[1],(w>>2&1)==1?f[2]:o[2]]);return new lr(y,[[-1,0,0,f[0]],[1,0,0,-o[0]],[0,-1,0,f[1]],[0,1,0,-o[1]],[0,0,-1,f[2]],[0,0,1,-o[2]]],o,f)}static fromCenterSizeAngles(o,f,y){const w=s.br([],y[0],y[1],y[2]),T=s.bs([],[f[0],0,0],w),L=s.bs([],[0,f[1],0],w),O=s.bs([],[0,0,f[2]],w),H=[...o],te=[...o];for(let me=0;me<8;me++)for(let he=0;he<3;he++){const Se=o[he]+T[he]*(1&~me?-1:1)+L[he]*((me>>1&1)==1?1:-1)+O[he]*((me>>2&1)==1?1:-1);H[he]=Math.min(H[he],Se),te[he]=Math.max(te[he],Se)}const ne=[];for(let me=0;me<8;me++){const he=[...o];s.aS(he,he,s.aR([],T,1&~me?-1:1)),s.aS(he,he,s.aR([],L,(me>>1&1)==1?1:-1)),s.aS(he,he,s.aR([],O,(me>>2&1)==1?1:-1)),ne.push(he)}return new lr(ne,[[...T,-s.aX(T,ne[0])],[...L,-s.aX(L,ne[0])],[...O,-s.aX(O,ne[0])],[-T[0],-T[1],-T[2],-s.aX(T,ne[7])],[-L[0],-L[1],-L[2],-s.aX(L,ne[7])],[-O[0],-O[1],-O[2],-s.aX(O,ne[7])]],H,te)}intersectsFrustum(o){let f=!0;const y=this.points.length,w=this.planes.length,T=o.planes.length,L=o.points.length;for(let O=0;O<T;O++){const H=o.planes[O];let te=0;for(let ne=0;ne<y;ne++){const me=this.points[ne];H[0]*me[0]+H[1]*me[1]+H[2]*me[2]+H[3]>=0&&te++}if(te===0)return 0;te<y&&(f=!1)}if(f)return 2;for(let O=0;O<w;O++){const H=this.planes[O];let te=0;for(let ne=0;ne<L;ne++){const me=o.points[ne];H[0]*me[0]+H[1]*me[1]+H[2]*me[2]+H[3]>=0&&te++}if(te===0)return 0}return 1}intersectsPlane(o){const f=this.points.length;let y=0;for(let w=0;w<f;w++){const T=this.points[w];o[0]*T[0]+o[1]*T[1]+o[2]*T[2]+o[3]>=0&&y++}return y===f?2:y===0?0:1}}function br(S,o,f){const y=S-o;return y<0?-y:Math.max(0,y-f)}function qr(S,o,f,y,w){const T=S-f;let L;return L=T<0?Math.min(-T,1+T-w):T>1?Math.min(Math.max(T-w,0),1-T):0,Math.max(L,br(o,y,w))}class ui{constructor(){this._boundingVolumeCache=new Wt(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(o,f,y,w){const T=1<<y.z,L=1/T,O=y.x/T,H=y.y/T;let te=2;return te=Math.min(te,qr(o,f,O,H,L)),te=Math.min(te,qr(o,f,O+.5,-H-L,L)),te=Math.min(te,qr(o,f,O+.5,2-H-L,L)),te}getWrap(o,f,y){const w=1<<f.z,T=1/w,L=f.x/w,O=br(o.x,L,T),H=br(o.x,L-1,T),te=br(o.x,L+1,T),ne=Math.min(O,H,te);return ne===te?1:ne===H?-1:0}allowVariableZoom(o,f){return Bt(o,f)>4}allowWorldCopies(){return!1}getTileBoundingVolume(o,f,y,w){return this._boundingVolumeCache.getTileBoundingVolume(o,f,y,w)}_computeTileBoundingVolume(o,f,y,w){var T,L;let O=0,H=0;if(w?.terrain){const te=new s.Z(o.z,f,o.z,o.x,o.y),ne=w.terrain.getMinMaxElevation(te);O=(T=ne.minElevation)!==null&&T!==void 0?T:Math.min(0,y),H=(L=ne.maxElevation)!==null&&L!==void 0?L:Math.max(0,y)}if(O/=s.bu,H/=s.bu,O+=1,H+=1,o.z<=0)return lr.fromAabb([-H,-H,-H],[H,H,H]);if(o.z===1)return lr.fromAabb([o.x===0?-H:0,o.y===0?0:-H,-H],[o.x===0?0:H,o.y===0?H:0,H]);{const te=[ba(0,0,o.x,o.y,o.z),ba(s.$,0,o.x,o.y,o.z),ba(s.$,s.$,o.x,o.y,o.z),ba(0,s.$,o.x,o.y,o.z)],ne=[];for(const Zt of te)ne.push(s.aR([],Zt,H));if(H!==O)for(const Zt of te)ne.push(s.aR([],Zt,O));o.y===0&&ne.push([0,1,0]),o.y===(1<<o.z)-1&&ne.push([0,-1,0]);const me=[1,1,1],he=[-1,-1,-1];for(const Zt of ne)for(let Yt=0;Yt<3;Yt++)me[Yt]=Math.min(me[Yt],Zt[Yt]),he[Yt]=Math.max(he[Yt],Zt[Yt]);const Se=ba(s.$/2,s.$/2,o.x,o.y,o.z),Ue=s.aW([],[0,1,0],Se);s.aV(Ue,Ue);const Xe=s.aW([],Se,Ue);s.aV(Xe,Xe);const Je=s.aW([],te[2],te[1]);s.aV(Je,Je);const st=s.aW([],te[0],te[3]);s.aV(st,st),ne.push(s.aR([],Se,H)),o.y>=(1<<o.z)/2&&ne.push(s.aR([],ba(s.$/2,0,o.x,o.y,o.z),H)),o.y<(1<<o.z)/2&&ne.push(s.aR([],ba(s.$/2,s.$,o.x,o.y,o.z),H));const pt=Ui(Se,ne),xt=Ui(Xe,ne),mt=[-Se[0],-Se[1],-Se[2],pt.max],wt=[Se[0],Se[1],Se[2],-pt.min],St=[-Xe[0],-Xe[1],-Xe[2],xt.max],yt=[Xe[0],Xe[1],Xe[2],-xt.min],Lt=[...Je,0],rr=[...st,0],$t=[];return o.y===0?$t.push(s.bt(rr,Lt,mt),s.bt(rr,Lt,wt)):$t.push(s.bt(St,Lt,mt),s.bt(St,Lt,wt),s.bt(St,rr,mt),s.bt(St,rr,wt)),o.y===(1<<o.z)-1?$t.push(s.bt(rr,Lt,mt),s.bt(rr,Lt,wt)):$t.push(s.bt(yt,Lt,mt),s.bt(yt,Lt,wt),s.bt(yt,rr,mt),s.bt(yt,rr,wt)),new lr($t,[mt,wt,St,yt,Lt,rr],me,he)}}}function Ui(S,o){let f=1/0,y=-1/0;for(const w of o){const T=s.aX(S,w);f=Math.min(f,T),y=Math.max(y,T)}return{min:f,max:y}}class Hi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,f,y){return this._helper.interpolatePadding(o,f,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,f){this._helper.resize(o,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,f){this._helper.overrideNearFarZ(o,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(o){}constructor(){this._cachedClippingPlane=s.bv(),this._projectionMatrix=s.b9(),this._globeViewProjMatrix32f=s.b8(),this._globeViewProjMatrixNoCorrection=s.b9(),this._globeViewProjMatrixNoCorrectionInverted=s.b9(),this._globeProjMatrixInverted=s.b9(),this._cameraPosition=s.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new li({calcMatrices:()=>{this._calcMatrices()},getConstrained:(o,f)=>this.getConstrained(o,f)}),this._coveringTilesDetailsProvider=new ui}clone(){const o=new Hi;return o.apply(this),o}apply(o,f){this._globeLatitudeErrorCorrectionRadians=f||0,this._helper.apply(o)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const o=s.bp();return o[0]=this._cameraPosition[0],o[1]=this._cameraPosition[1],o[2]=this._cameraPosition[2],o}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(o){const{overscaledTileID:f,applyGlobeMatrix:y}=o,w=this._helper.getMercatorTileCoordinates(f);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:w,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(o){const f=this.pitchInRadians,y=this.cameraToCenterDistance/o,w=Math.sin(f)*y,T=Math.cos(f)*y+1,L=1/Math.sqrt(w*w+T*T)*1;let O=-w,H=T;const te=Math.sqrt(O*O+H*H);O/=te,H/=te;const ne=[0,O,H];s.bw(ne,ne,[0,0,0],-this.bearingInRadians),s.bx(ne,ne,[0,0,0],-1*this.center.lat*Math.PI/180),s.by(ne,ne,[0,0,0],this.center.lng*Math.PI/180);const me=1/s.aZ(ne);return s.aR(ne,ne,me),[...ne,-L*me]}isLocationOccluded(o){return!this.isSurfacePointVisible(Kn(o))}transformLightDirection(o){const f=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,w=Math.cos(y),T=[Math.sin(f)*w,Math.sin(y),Math.cos(f)*w],L=[T[2],0,-T[0]],O=[0,0,0];s.aW(O,L,T),s.aV(L,L),s.aV(O,O);const H=[0,0,0];return s.aV(H,[L[0]*o[0]+O[0]*o[1]+T[0]*o[2],L[1]*o[0]+O[1]*o[1]+T[1]*o[2],L[2]*o[0]+O[2]*o[1]+T[2]*o[2]]),H}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(o,f,y){const w=function(O,H,te){const ne=1/(1<<te.z);return new s.a1(O/s.$*ne+te.x*ne,H/s.$*ne+te.y*ne)}(o,f,y.canonical),T=(L=w.y,[s.bo(w.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-L*Math.PI*2))-.5*Math.PI]);var L;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(o,f,y,w){const T=y.canonical,L=ba(o,f,T.x,T.y,T.z),O=1+(w?w(o,f):0)/s.bu,H=[L[0]*O,L[1]*O,L[2]*O,1];s.aw(H,H,this._globeViewProjMatrixNoCorrection);const te=this._cachedClippingPlane,ne=te[0]*L[0]+te[1]*L[1]+te[2]*L[2]+te[3]<0;return{point:new s.P(H[0]/H[3],H[1]/H[3]),signedDistanceFromCamera:H[3],isOccluded:ne}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const o=yc(this.worldSize,this.center.lat),f=s.ba(),y=s.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*o),s.b4(f,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const w=this.centerOffset;f[8]=2*-w.x/this._helper._width,f[9]=2*w.y/this._helper._height,this._projectionMatrix=s.b5(f),this._globeProjMatrixInverted=s.ba(),s.aq(this._globeProjMatrixInverted,f),s.M(f,f,[0,0,-this.cameraToCenterDistance]),s.b6(f,f,this.rollInRadians),s.b7(f,f,-this.pitchInRadians),s.b6(f,f,this.bearingInRadians),s.M(f,f,[0,0,-o]);const T=s.bp();T[0]=o,T[1]=o,T[2]=o,s.b7(y,f,this.center.lat*Math.PI/180),s.bz(y,y,-this.center.lng*Math.PI/180),s.N(y,y,T),this._globeViewProjMatrixNoCorrection=y,s.b7(f,f,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bz(f,f,-this.center.lng*Math.PI/180),s.N(f,f,T),this._globeViewProjMatrix32f=new Float32Array(f),this._globeViewProjMatrixNoCorrectionInverted=s.ba(),s.aq(this._globeViewProjMatrixNoCorrectionInverted,y);const L=s.bp();this._cameraPosition=s.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/o,s.bw(this._cameraPosition,this._cameraPosition,L,-this.rollInRadians),s.bx(this._cameraPosition,this._cameraPosition,L,this.pitchInRadians),s.bw(this._cameraPosition,this._cameraPosition,L,-this.bearingInRadians),s.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bx(this._cameraPosition,this._cameraPosition,L,-this.center.lat*Math.PI/180),s.by(this._cameraPosition,this._cameraPosition,L,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(o);const O=s.b5(this._globeViewProjMatrixNoCorrectionInverted);s.N(O,O,[1,1,-1]),this._cachedFrustum=An.fromInvProjectionMatrix(O,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(o){s.w("calculateFogMatrix is not supported on globe projection.");const f=s.ba();return s.ag(f),f}getVisibleUnwrappedCoordinates(o){return[new s.b2(0,o)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(o){o&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(o,f){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=Kn(o);s.aR(y,y,1+f/s.bu);const w=s.bv();return s.aw(w,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),w[2]/w[3]}populateCache(o){}getBounds(){const o=.5*this.width,f=.5*this.height,y=[new s.P(0,0),new s.P(o,0),new s.P(this.width,0),new s.P(this.width,f),new s.P(this.width,this.height),new s.P(o,this.height),new s.P(0,this.height),new s.P(0,f)],w=[];for(const me of y)w.push(this.unprojectScreenPoint(me));let T=0,L=0,O=0,H=0;const te=this.center;for(const me of w){const he=s.bA(te.lng,me.lng),Se=s.bA(te.lat,me.lat);he<L&&(L=he),he>T&&(T=he),Se<H&&(H=Se),Se>O&&(O=Se)}const ne=[te.lng+L,te.lat+H,te.lng+T,te.lat+O];return this.isSurfacePointOnScreen([0,1,0])&&(ne[3]=90,ne[0]=-180,ne[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ne[1]=-90,ne[0]=-180,ne[2]=180),new at(ne)}getConstrained(o,f){const y=s.ah(o.lat,-s.ai,s.ai),w=s.ah(+f,this.minZoom+Y(0,y),this.maxZoom);return{center:new s.S(o.lng,y),zoom:w}}calculateCenterFromCameraLngLatAlt(o,f,y,w){return this._helper.calculateCenterFromCameraLngLatAlt(o,f,y,w)}setLocationAtPoint(o,f){const y=Kn(this.unprojectScreenPoint(f)),w=Kn(o),T=s.bp();s.bB(T);const L=s.bp();s.by(L,y,T,-this.center.lng*Math.PI/180),s.bx(L,L,T,this.center.lat*Math.PI/180);const O=w[0]*w[0]+w[2]*w[2],H=L[0]*L[0];if(O<H)return;const te=Math.sqrt(O-H),ne=-te,me=s.bC(w[0],w[2],L[0],te),he=s.bC(w[0],w[2],L[0],ne),Se=s.bp();s.by(Se,w,T,-me);const Ue=s.bC(Se[1],Se[2],L[1],L[2]),Xe=s.bp();s.by(Xe,w,T,-he);const Je=s.bC(Xe[1],Xe[2],L[1],L[2]),st=.5*Math.PI,pt=Ue>=-st&&Ue<=st,xt=Je>=-st&&Je<=st;let mt,wt;if(pt&&xt){const rr=this.center.lng*Math.PI/180,$t=this.center.lat*Math.PI/180;s.bD(me,rr)+s.bD(Ue,$t)<s.bD(he,rr)+s.bD(Je,$t)?(mt=me,wt=Ue):(mt=he,wt=Je)}else if(pt)mt=me,wt=Ue;else{if(!xt)return;mt=he,wt=Je}const St=mt/Math.PI*180,yt=wt/Math.PI*180,Lt=this.center.lat;this.setCenter(new s.S(St,s.ah(yt,-90,90))),this.setZoom(this.zoom+Y(Lt,this.center.lat))}locationToScreenPoint(o,f){const y=Kn(o);if(f){const w=f.getElevationForLngLatZoom(o,this._helper._tileZoom);s.aR(y,y,1+w/s.bu)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(o){const f=s.bv();return s.aw(f,[...o,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],new s.P((.5*f[0]+.5)*this.width,(.5*-f[1]+.5)*this.height)}screenPointToMercatorCoordinate(o,f){if(f){const y=f.pointCoordinate(o);if(y)return y}return s.a1.fromLngLat(this.unprojectScreenPoint(o))}screenPointToLocation(o,f){var y;return(y=this.screenPointToMercatorCoordinate(o,f))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(o,f){const y=this._cameraPosition,w=this.getRayDirectionFromPixel(o);return!!this.rayPlanetIntersection(y,w)}getRayDirectionFromPixel(o){const f=s.bv();f[0]=o.x/this.width*2-1,f[1]=-1*(o.y/this.height*2-1),f[2]=1,f[3]=1,s.aw(f,f,this._globeViewProjMatrixNoCorrectionInverted),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3];const y=s.bp();y[0]=f[0]-this._cameraPosition[0],y[1]=f[1]-this._cameraPosition[1],y[2]=f[2]-this._cameraPosition[2];const w=s.bp();return s.aV(w,y),w}isSurfacePointVisible(o){const f=this._cachedClippingPlane;return f[0]*o[0]+f[1]*o[1]+f[2]*o[2]+f[3]>=0}isSurfacePointOnScreen(o){if(!this.isSurfacePointVisible(o))return!1;const f=s.bv();return s.aw(f,[...o,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[0]>-1&&f[0]<1&&f[1]>-1&&f[1]<1&&f[2]>-1&&f[2]<1}rayPlanetIntersection(o,f){const y=s.aX(o,f),w=s.bp(),T=s.bp();s.aR(T,f,y),s.aU(w,o,T);const L=1-s.aX(w,w);if(L<0)return null;const O=s.aX(o,o)-1,H=-y+(y<0?1:-1)*Math.sqrt(L),te=O/H,ne=H;return{tMin:Math.min(te,ne),tMax:Math.max(te,ne)}}unprojectScreenPoint(o){const f=this._cameraPosition,y=this.getRayDirectionFromPixel(o),w=this.rayPlanetIntersection(f,y);if(w){const ne=s.bp();s.aS(ne,f,[y[0]*w.tMin,y[1]*w.tMin,y[2]*w.tMin]);const me=s.bp();return s.aV(me,ne),Zl(me)}const T=this._cachedClippingPlane,L=T[0]*y[0]+T[1]*y[1]+T[2]*y[2],O=-s.b1(T,f)/L,H=s.bp();if(O>0)s.aS(H,f,[y[0]*O,y[1]*O,y[2]*O]);else{const ne=s.bp();s.aS(ne,f,[2*y[0],2*y[1],2*y[2]]);const me=s.b1(this._cachedClippingPlane,ne);s.aU(H,ne,[this._cachedClippingPlane[0]*me,this._cachedClippingPlane[1]*me,this._cachedClippingPlane[2]*me])}const te=function(ne){const me=s.bp();return me[0]=ne[0]*-ne[3],me[1]=ne[1]*-ne[3],me[2]=ne[2]*-ne[3],{center:me,radius:Math.sqrt(1-ne[3]*ne[3])}}(T);return Zl(function(ne,me,he){const Se=s.bp();s.aU(Se,he,ne);const Ue=s.bp();return s.bq(Ue,ne,Se,me/s.a$(Se)),Ue}(te.center,te.radius,H))}getMatrixForModel(o,f){const y=s.S.convert(o),w=1/s.bu,T=s.b9();return s.bz(T,T,y.lng/180*Math.PI),s.b7(T,T,-y.lat/180*Math.PI),s.M(T,T,[0,0,1+f/s.bu]),s.b7(T,T,.5*Math.PI),s.N(T,T,[w,w,w]),T}getProjectionDataForCustomLayer(o=!0){const f=this.getProjectionData({overscaledTileID:new s.Z(0,0,0,0,0),applyGlobeMatrix:o});return f.tileMercatorCoords=[0,0,1,1],f}getFastPathSimpleProjectionMatrix(o){}}class Xi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,f,y){return this._helper.interpolatePadding(o,f,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,f,y=!0){this._helper.resize(o,f,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,f){this._helper.overrideNearFarZ(o,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(o,f){this._globeness=o,this._globeLatitudeErrorCorrectionRadians=f,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new li({calcMatrices:()=>{this._calcMatrices()},getConstrained:(o,f)=>this.getConstrained(o,f)}),this._globeness=1,this._mercatorTransform=new Ka,this._verticalPerspectiveTransform=new Hi}clone(){const o=new Xi;return o._globeness=this._globeness,o._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,o.apply(this),o}apply(o){this._helper.apply(o),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(o){const f=this._mercatorTransform.getProjectionData(o),y=this._verticalPerspectiveTransform.getProjectionData(o);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:f.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:o.applyGlobeMatrix?this._globeness:0,fallbackMatrix:f.fallbackMatrix}}isLocationOccluded(o){return this.currentTransform.isLocationOccluded(o)}transformLightDirection(o){return this.currentTransform.transformLightDirection(o)}getPixelScale(){return s.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(o,f,y){const w=this._mercatorTransform.getPitchedTextCorrection(o,f,y),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(o,f,y);return s.bk(w,T,this._globeness)}projectTileCoordinates(o,f,y,w){return this.currentTransform.projectTileCoordinates(o,f,y,w)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(o){return this.currentTransform.calculateFogMatrix(o)}getVisibleUnwrappedCoordinates(o){return this.currentTransform.getVisibleUnwrappedCoordinates(o)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(o){this._mercatorTransform.recalculateZoomAndCenter(o),this._verticalPerspectiveTransform.recalculateZoomAndCenter(o)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(o,f){return this.currentTransform.lngLatToCameraDepth(o,f)}populateCache(o){this._mercatorTransform.populateCache(o),this._verticalPerspectiveTransform.populateCache(o)}getBounds(){return this.currentTransform.getBounds()}getConstrained(o,f){return this.currentTransform.getConstrained(o,f)}calculateCenterFromCameraLngLatAlt(o,f,y,w){return this._helper.calculateCenterFromCameraLngLatAlt(o,f,y,w)}setLocationAtPoint(o,f){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(o,f),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(o,f),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(o,f){return this.currentTransform.locationToScreenPoint(o,f)}screenPointToMercatorCoordinate(o,f){return this.currentTransform.screenPointToMercatorCoordinate(o,f)}screenPointToLocation(o,f){return this.currentTransform.screenPointToLocation(o,f)}isPointOnMapSurface(o,f){return this.currentTransform.isPointOnMapSurface(o,f)}getRayDirectionFromPixel(o){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(o)}getMatrixForModel(o,f){return this.currentTransform.getMatrixForModel(o,f)}getProjectionDataForCustomLayer(o=!0){const f=this._mercatorTransform.getProjectionDataForCustomLayer(o);if(!this.isGlobeRendering)return f;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(o);return y.fallbackMatrix=f.mainMatrix,y}getFastPathSimpleProjectionMatrix(o){return this.currentTransform.getFastPathSimpleProjectionMatrix(o)}}class Cn{get useGlobeControls(){return!0}handlePanInertia(o,f){const y=ke(o,f);return Math.abs(y.lng-f.center.lng)>180&&(y.lng=f.center.lng+179.5*Math.sign(y.lng-f.center.lng)),{easingCenter:y,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(o,f){const y=o.around,w=f.screenPointToLocation(y);o.bearingDelta&&f.setBearing(f.bearing+o.bearingDelta),o.pitchDelta&&f.setPitch(f.pitch+o.pitchDelta),o.rollDelta&&f.setRoll(f.roll+o.rollDelta);const T=f.zoom;o.zoomDelta&&f.setZoom(f.zoom+o.zoomDelta);const L=f.zoom-T;if(L===0)return;const O=s.bA(f.center.lng,w.lng),H=O/(Math.abs(O/180)+1),te=s.bA(f.center.lat,w.lat),ne=f.getRayDirectionFromPixel(y),me=f.cameraPosition,he=-1*s.aX(me,ne),Se=s.bp();s.aS(Se,me,[ne[0]*he,ne[1]*he,ne[2]*he]);const Ue=s.aZ(Se)-1,Xe=Math.exp(.5*-Math.max(Ue-.3,0)),Je=yc(f.worldSize,f.center.lat)/Math.min(f.width,f.height),st=s.bn(Je,.9,.5,1,.25),pt=(1-s.af(-L))*Math.min(Xe,st),xt=f.center.lat,mt=f.zoom,wt=new s.S(f.center.lng+H*pt,s.ah(f.center.lat+te*pt,-s.ai,s.ai));f.setLocationAtPoint(w,y);const St=f.center,yt=s.bn(Math.abs(O),45,85,0,1),Lt=s.bn(Je,.75,.35,0,1),rr=Math.pow(Math.max(yt,Lt),.25),$t=s.bA(St.lng,wt.lng),Zt=s.bA(St.lat,wt.lat);f.setCenter(new s.S(St.lng+$t*rr,St.lat+Zt*rr).wrap()),f.setZoom(mt+Y(xt,f.center.lat))}handleMapControlsPan(o,f,y){if(!o.panDelta)return;const w=f.center.lat,T=f.zoom;f.setCenter(ke(o.panDelta,f).wrap()),f.setZoom(T+Y(w,f.center.lat))}cameraForBoxAndBearing(o,f,y,w,T){const L=_a(o,f,y,w,T),O=f.left/T.width*2-1,H=(T.width-f.right)/T.width*2-1,te=f.top/T.height*-2+1,ne=(T.height-f.bottom)/T.height*-2+1,me=s.bA(y.getWest(),y.getEast())<0,he=me?y.getEast():y.getWest(),Se=me?y.getWest():y.getEast(),Ue=Math.max(y.getNorth(),y.getSouth()),Xe=Math.min(y.getNorth(),y.getSouth()),Je=he+.5*s.bA(he,Se),st=Ue+.5*s.bA(Ue,Xe),pt=T.clone();pt.setCenter(L.center),pt.setBearing(L.bearing),pt.setPitch(0),pt.setRoll(0),pt.setZoom(L.zoom);const xt=pt.modelViewProjectionMatrix,mt=[Kn(y.getNorthWest()),Kn(y.getNorthEast()),Kn(y.getSouthWest()),Kn(y.getSouthEast()),Kn(new s.S(Se,st)),Kn(new s.S(he,st)),Kn(new s.S(Je,Ue)),Kn(new s.S(Je,Xe))],wt=Kn(L.center);let St=Number.POSITIVE_INFINITY;for(const yt of mt)O<0&&(St=Cn.getLesserNonNegativeNonNull(St,Cn.solveVectorScale(yt,wt,xt,"x",O))),H>0&&(St=Cn.getLesserNonNegativeNonNull(St,Cn.solveVectorScale(yt,wt,xt,"x",H))),te>0&&(St=Cn.getLesserNonNegativeNonNull(St,Cn.solveVectorScale(yt,wt,xt,"y",te))),ne<0&&(St=Cn.getLesserNonNegativeNonNull(St,Cn.solveVectorScale(yt,wt,xt,"y",ne)));if(Number.isFinite(St)&&St!==0)return L.zoom=pt.zoom+s.ak(St),L;Zn()}handleJumpToCenterZoom(o,f){const y=o.center.lat,w=o.getConstrained(f.center?s.S.convert(f.center):o.center,o.zoom).center;o.setCenter(w.wrap());const T=f.zoom!==void 0?+f.zoom:o.zoom+Y(y,w.lat);o.zoom!==T&&o.setZoom(T)}handleEaseTo(o,f){const y=o.zoom,w=o.center,T=o.padding,L={roll:o.roll,pitch:o.pitch,bearing:o.bearing},O={roll:f.roll===void 0?o.roll:f.roll,pitch:f.pitch===void 0?o.pitch:f.pitch,bearing:f.bearing===void 0?o.bearing:f.bearing},H=f.zoom!==void 0,te=!o.isPaddingEqual(f.padding);let ne=!1;const me=f.center?s.S.convert(f.center):w,he=o.getConstrained(me,y).center;oo(o,he);const Se=o.clone();Se.setCenter(he),Se.setZoom(H?+f.zoom:y+Y(w.lat,me.lat)),Se.setBearing(f.bearing);const Ue=new s.P(s.ah(o.centerPoint.x+f.offsetAsPoint.x,0,o.width),s.ah(o.centerPoint.y+f.offsetAsPoint.y,0,o.height));Se.setLocationAtPoint(he,Ue);const Xe=(f.offset&&f.offsetAsPoint.mag())>0?Se.center:he,Je=H?+f.zoom:y+Y(w.lat,Xe.lat),st=y+Y(w.lat,0),pt=Je+Y(Xe.lat,0),xt=s.bA(w.lng,Xe.lng),mt=s.bA(w.lat,Xe.lat),wt=s.af(pt-st);return ne=Je!==y,{easeFunc:St=>{if(s.be(L,O)||Ls({startEulerAngles:L,endEulerAngles:O,tr:o,k:St,useSlerp:L.roll!=O.roll}),te&&o.interpolatePadding(T,f.padding,St),f.around)s.w("Easing around a point is not supported under globe projection."),o.setLocationAtPoint(f.around,f.aroundPoint);else{const yt=pt>st?Math.min(2,wt):Math.max(.5,wt),Lt=Math.pow(yt,1-St),rr=Tt(w,xt,mt,St*Lt);o.setCenter(rr.wrap())}if(ne){const yt=s.C.number(st,pt,St)+Y(0,o.center.lat);o.setZoom(yt)}},isZooming:ne,elevationCenter:Xe}}handleFlyTo(o,f){const y=f.zoom!==void 0,w=o.center,T=o.zoom,L=o.padding,O=!o.isPaddingEqual(f.padding),H=o.getConstrained(s.S.convert(f.center||f.locationAtOffset),T).center,te=y?+f.zoom:o.zoom+Y(o.center.lat,H.lat),ne=o.clone();ne.setCenter(H),ne.setZoom(te),ne.setBearing(f.bearing);const me=new s.P(s.ah(o.centerPoint.x+f.offsetAsPoint.x,0,o.width),s.ah(o.centerPoint.y+f.offsetAsPoint.y,0,o.height));ne.setLocationAtPoint(H,me);const he=ne.center;oo(o,he);const Se=function(mt,wt,St){const yt=Kn(wt),Lt=Kn(St),rr=s.aX(yt,Lt),$t=Math.acos(rr),Zt=Fu(mt);return $t/(2*Math.PI)*Zt}(o,w,he),Ue=T+Y(w.lat,0),Xe=te+Y(he.lat,0),Je=s.af(Xe-Ue);let st;if(typeof f.minZoom=="number"){const mt=+f.minZoom+Y(he.lat,0),wt=Math.min(mt,Ue,Xe)+Y(0,he.lat),St=o.getConstrained(he,wt).zoom+Y(he.lat,0);st=s.af(St-Ue)}const pt=s.bA(w.lng,he.lng),xt=s.bA(w.lat,he.lat);return{easeFunc:(mt,wt,St,yt)=>{const Lt=Tt(w,pt,xt,St);O&&o.interpolatePadding(L,f.padding,mt);const rr=mt===1?he:Lt;o.setCenter(rr.wrap());const $t=Ue+s.ak(wt);o.setZoom(mt===1?te:$t+Y(0,rr.lat))},scaleOfZoom:Je,targetCenter:he,scaleOfMinZoom:st,pixelPathLength:Se}}static solveVectorScale(o,f,y,w,T){const L=w==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],O=[y[3],y[7],y[11],y[15]],H=o[0]*L[0]+o[1]*L[1]+o[2]*L[2],te=o[0]*O[0]+o[1]*O[1]+o[2]*O[2],ne=f[0]*L[0]+f[1]*L[1]+f[2]*L[2],me=f[0]*O[0]+f[1]*O[1]+f[2]*O[2];return ne+T*te===H+T*me||O[3]*(H-ne)+L[3]*(me-te)+H*me==ne*te?null:(ne+L[3]-T*me-T*O[3])/(ne-H-T*me+T*te)}static getLesserNonNegativeNonNull(o,f){return f!==null&&f>=0&&f<o?f:o}}class Gs{constructor(o){this._globe=o,this._mercatorCameraHelper=new tl,this._verticalPerspectiveCameraHelper=new Cn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(o,f){return this.currentHelper.handlePanInertia(o,f)}handleMapControlsRollPitchBearingZoom(o,f){return this.currentHelper.handleMapControlsRollPitchBearingZoom(o,f)}handleMapControlsPan(o,f,y){this.currentHelper.handleMapControlsPan(o,f,y)}cameraForBoxAndBearing(o,f,y,w,T){return this.currentHelper.cameraForBoxAndBearing(o,f,y,w,T)}handleJumpToCenterZoom(o,f){this.currentHelper.handleJumpToCenterZoom(o,f)}handleEaseTo(o,f){return this.currentHelper.handleEaseTo(o,f)}handleFlyTo(o,f){return this.currentHelper.handleFlyTo(o,f)}}const Qn=(S,o)=>s.y(S,o&&o.filter(f=>f.identifier!=="source.canvas")),fa=s.bE();class Ms extends s.E{constructor(o,f={}){var y,w;super(),this._rtlPluginLoaded=()=>{for(const L in this.sourceCaches){const O=this.sourceCaches[L].getSource().type;O!=="vector"&&O!=="geojson"||this.sourceCaches[L].reload()}},this.map=o,this.dispatcher=new Le(we(),o._getMapId()),this.dispatcher.registerMessageHandler("GG",(L,O)=>this.getGlyphs(L,O)),this.dispatcher.registerMessageHandler("GI",(L,O)=>this.getImages(L,O)),this.dispatcher.registerMessageHandler("GDA",(L,O)=>this.getDashes(L,O)),this.imageManager=new se,this.imageManager.setEventedParent(this);const T=((y=o._container)===null||y===void 0?void 0:y.lang)||typeof document<"u"&&((w=document.documentElement)===null||w===void 0?void 0:w.lang)||void 0;this.glyphManager=new de(o._requestManager,f.localIdeographFontFamily,T),this.lineAtlas=new Me(256,512),this.crossTileSymbolIndex=new vc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",s.bG()),Xr().on(wi,this._rtlPluginLoaded),this.on("data",L=>{if(L.dataType!=="source"||L.sourceDataType!=="metadata")return;const O=this.sourceCaches[L.sourceId];if(!O)return;const H=O.getSource();if(H&&H.vectorLayerIds)for(const te in this._layers){const ne=this._layers[te];ne.source===H.id&&this._validateLayer(ne)}})}setGlobalStateProperty(o,f){var y,w,T;this._checkLoaded();const L=f===null?(T=(w=(y=this.stylesheet.state)===null||y===void 0?void 0:y[o])===null||w===void 0?void 0:w.default)!==null&&T!==void 0?T:null:f;if(s.bH(L,this._globalState[o]))return this;this._globalState[o]=L,this._applyGlobalStateChanges([o])}getGlobalState(){return this._globalState}setGlobalState(o){this._checkLoaded();const f=[];for(const y in o)!s.bH(this._globalState[y],o[y].default)&&(f.push(y),this._globalState[y]=o[y].default);this._applyGlobalStateChanges(f)}_applyGlobalStateChanges(o){if(o.length===0)return;const f=new Set,y={};for(const w of o){y[w]=this._globalState[w];for(const T in this._layers){const L=this._layers[T],O=L.getLayoutAffectingGlobalStateRefs(),H=L.getPaintAffectingGlobalStateRefs();if(O.has(w)&&f.add(L.source),H.has(w))for(const{name:te,value:ne}of H.get(w))this._updatePaintProperty(L,te,ne)}}this.dispatcher.broadcast("UGS",y);for(const w in this.sourceCaches)f.has(w)&&(this._reloadSource(w),this._changed=!0)}loadURL(o,f={},y){this.fire(new s.l("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const w=this.map._requestManager.transformRequest(o,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;s.j(w,this._loadStyleRequest).then(L=>{this._loadStyleRequest=null,this._load(L.data,f,y)}).catch(L=>{this._loadStyleRequest=null,L&&!T.signal.aborted&&this.fire(new s.k(L))})}loadJSON(o,f={},y){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,N.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,f.validate=f.validate!==!1,this._load(o,f,y)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(fa,{validate:!1})}_load(o,f,y){var w,T;let L=f.transformStyle?f.transformStyle(y,o):o;if(!f.validate||!Qn(this,s.z(L))){L=Object.assign({},L),this._loaded=!0,this.stylesheet=L;for(const O in L.sources)this.addSource(O,L.sources[O],{validate:!1});L.sprite?this._loadSprite(L.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(L.glyphs),this._createLayers(),this.light=new ge(this.stylesheet.light),this._setProjectionInternal(((w=this.stylesheet.projection)===null||w===void 0?void 0:w.type)||"mercator"),this.sky=new Ye(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){var o,f,y;const w=s.bI(this.stylesheet.layers);this.setGlobalState((o=this.stylesheet.state)!==null&&o!==void 0?o:null),this.dispatcher.broadcast("SL",w),this._order=w.map(T=>T.id),this._layers={},this._serializedLayers=null;for(const T of w){const L=s.bJ(T,this._globalState);if(L.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=L,s.bK(L)&&this.sourceCaches[L.source]){const O=(y=(f=T.paint)===null||f===void 0?void 0:f["raster-fade-duration"])!==null&&y!==void 0?y:L.paint.get("raster-fade-duration");this.sourceCaches[L.source].setRasterFadeDuration(O)}}}_loadSprite(o,f=!1,y=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(T,L,O,H){return s._(this,void 0,void 0,function*(){const te=le(T),ne=O>1?"@2x":"",me={},he={};for(const{id:Se,url:Ue}of te){const Xe=L.transformRequest(ae(Ue,ne,".json"),"SpriteJSON");me[Se]=s.j(Xe,H);const Je=L.transformRequest(ae(Ue,ne,".png"),"SpriteImage");he[Se]=Z.getImage(Je,H)}return yield Promise.all([...Object.values(me),...Object.values(he)]),function(Se,Ue){return s._(this,void 0,void 0,function*(){const Xe={};for(const Je in Se){Xe[Je]={};const st=N.getImageCanvasContext((yield Ue[Je]).data),pt=(yield Se[Je]).data;for(const xt in pt){const{width:mt,height:wt,x:St,y:yt,sdf:Lt,pixelRatio:rr,stretchX:$t,stretchY:Zt,content:Yt,textFitWidth:wr,textFitHeight:Br}=pt[xt];Xe[Je][xt]={data:null,pixelRatio:rr,sdf:Lt,stretchX:$t,stretchY:Zt,content:Yt,textFitWidth:wr,textFitHeight:Br,spriteData:{width:mt,height:wt,x:St,y:yt,context:st}}}}return Xe})}(me,he)})}(o,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(T=>{if(this._spriteRequest=null,T)for(const L in T){this._spritesImagesIds[L]=[];const O=this._spritesImagesIds[L]?this._spritesImagesIds[L].filter(H=>!(H in T)):[];for(const H of O)this.imageManager.removeImage(H),this._changedImages[H]=!0;for(const H in T[L]){const te=L==="default"?H:`${L}:${H}`;this._spritesImagesIds[L].push(te),te in this.imageManager.images?this.imageManager.updateImage(te,T[L][H],!1):this.imageManager.addImage(te,T[L][H]),f&&(this._changedImages[te]=!0)}}}).catch(T=>{this._spriteRequest=null,w=T,this.fire(new s.k(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),y&&y(w)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(o){const f=this.sourceCaches[o.source];if(!f)return;const y=o.sourceLayer;if(!y)return;const w=f.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(y)===-1)&&this.fire(new s.k(new Error(`Source layer "${y}" does not exist on source "${w.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o,f=!1){const y=this._serializedAllLayers();if(!o||o.length===0)return Object.values(f?s.bL(y):y);const w=[];for(const T of o)if(y[T]){const L=f?s.bL(y[T]):y[T];w.push(L)}return w}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const f=Object.keys(this._layers);for(const y of f){const w=this._layers[y];w.type!=="custom"&&(o[y]=w.serialize())}return o}hasTransitions(){var o,f,y;if(!((o=this.light)===null||o===void 0)&&o.hasTransition()||!((f=this.sky)===null||f===void 0)&&f.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(const w in this._layers)if(this._layers[w].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const f=this._changed;if(f){const w=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(w.length||T.length)&&this._updateWorkerLayers(w,T);for(const L in this._updatedSources){const O=this._updatedSources[L];if(O==="reload")this._reloadSource(L);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(L)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const L in this._updatedPaintProps)this._layers[L].updateTransitions(o);this.light.updateTransitions(o),this.sky.updateTransitions(o),this._resetUpdates()}const y={};for(const w in this.sourceCaches){const T=this.sourceCaches[w];y[w]=T.used,T.used=!1}for(const w of this._order){const T=this._layers[w];T.recalculate(o,this._availableImages),!T.isHidden(o.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const w in y){const T=this.sourceCaches[w];!!y[w]!=!!T.used&&T.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(o),this.sky.recalculate(o),this.projection.recalculate(o),this.z=o.zoom,f&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,f){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(o,!1),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,f={}){var y;this._checkLoaded();const w=this.serialize();if(o=f.transformStyle?f.transformStyle(w,o):o,((y=f.validate)===null||y===void 0||y)&&Qn(this,s.z(o)))return!1;(o=s.bL(o)).layers=s.bI(o.layers);const T=s.bM(w,o),L=this._getOperationsToPerform(T);if(L.unimplemented.length>0)throw new Error(`Unimplemented: ${L.unimplemented.join(", ")}.`);if(L.operations.length===0)return!1;for(const O of L.operations)O();return this.stylesheet=o,this._serializedLayers=null,!0}_getOperationsToPerform(o){const f=[],y=[];for(const w of o)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":f.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":f.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":f.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":f.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":f.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":f.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":f.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":f.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":f.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":f.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":f.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":f.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":f.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setSky":f.push(()=>this.setSky.apply(this,w.args));break;case"setProjection":this.setProjection.apply(this,w.args);break;case"setGlobalState":f.push(()=>this.setGlobalState.apply(this,w.args));break;case"setTransition":f.push(()=>{});break;default:y.push(w.command)}return{operations:f,unimplemented:y}}addImage(o,f){if(this.getImage(o))return this.fire(new s.k(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,f),this._afterImageUpdated(o)}updateImage(o,f){this.imageManager.updateImage(o,f)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new s.k(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,f,y={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(s.z.source,`sources.${o}`,f,null,y))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const w=this.sourceCaches[o]=new jr(o,f,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:o})),w.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===o)return this.fire(new s.k(new Error(`Source "${o}" cannot be removed while layer "${y}" is using it.`)));const f=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],f.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,f){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const y=this.sourceCaches[o].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(f),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,f,y={}){this._checkLoaded();const w=o.id;if(this.getLayer(w))return void this.fire(new s.k(new Error(`Layer "${w}" already exists on this map.`)));let T;if(o.type==="custom"){if(Qn(this,s.bN(o)))return;T=s.bJ(o,this._globalState)}else{if("source"in o&&typeof o.source=="object"&&(this.addSource(w,o.source),o=s.bL(o),o=s.e(o,{source:w})),this._validate(s.z.layer,`layers.${w}`,o,{arrayIndex:-1},y))return;T=s.bJ(o,this._globalState),this._validateLayer(T),T.setEventedParent(this,{layer:{id:w}})}const L=f?this._order.indexOf(f):this._order.length;if(f&&L===-1)this.fire(new s.k(new Error(`Cannot add layer "${w}" before non-existing layer "${f}".`)));else{if(this._order.splice(L,0,w),this._layerOrderChanged=!0,this._layers[w]=T,this._removedLayers[w]&&T.source&&T.type!=="custom"){const O=this._removedLayers[w];delete this._removedLayers[w],O.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(o,f){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new s.k(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===f)return;const y=this._order.indexOf(o);this._order.splice(y,1);const w=f?this._order.indexOf(f):this._order.length;f&&w===-1?this.fire(new s.k(new Error(`Cannot move layer "${o}" before non-existing layer "${f}".`))):(this._order.splice(w,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const f=this._layers[o];if(!f)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${o}".`)));f.setEventedParent(null);const y=this._order.indexOf(o);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=f,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],f.onRemove&&f.onRemove(this.map)}getLayer(o){return this._layers[o]}getLayersOrder(){return[...this._order]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,f,y){this._checkLoaded();const w=this.getLayer(o);w?w.minzoom===f&&w.maxzoom===y||(f!=null&&(w.minzoom=f),y!=null&&(w.maxzoom=y),this._updateLayer(w)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,f,y={}){this._checkLoaded();const w=this.getLayer(o);if(w){if(!s.bH(w.filter,f))return f==null?(w.setFilter(void 0),void this._updateLayer(w)):void(this._validate(s.z.filter,`layers.${w.id}.filter`,f,null,y)||(w.setFilter(s.bL(f)),this._updateLayer(w)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return s.bL(this.getLayer(o).filter)}setLayoutProperty(o,f,y,w={}){this._checkLoaded();const T=this.getLayer(o);T?s.bH(T.getLayoutProperty(f),y)||(T.setLayoutProperty(f,y,w),this._updateLayer(T)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,f){const y=this.getLayer(o);if(y)return y.getLayoutProperty(f);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,f,y,w={}){this._checkLoaded();const T=this.getLayer(o);T?s.bH(T.getPaintProperty(f),y)||this._updatePaintProperty(T,f,y,w):this.fire(new s.k(new Error(`Cannot style non-existing layer "${o}".`)))}_updatePaintProperty(o,f,y,w={}){o.setPaintProperty(f,y,w)&&this._updateLayer(o),s.bK(o)&&f==="raster-fade-duration"&&this.sourceCaches[o.source].setRasterFadeDuration(y),this._changed=!0,this._updatedPaintProps[o.id]=!0,this._serializedLayers=null}getPaintProperty(o,f){return this.getLayer(o).getPaintProperty(f)}setFeatureState(o,f){this._checkLoaded();const y=o.source,w=o.sourceLayer,T=this.sourceCaches[y];if(T===void 0)return void this.fire(new s.k(new Error(`The source '${y}' does not exist in the map's style.`)));const L=T.getSource().type;L==="geojson"&&w?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):L!=="vector"||w?(o.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(w,o.id,f)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,f){this._checkLoaded();const y=o.source,w=this.sourceCaches[y];if(w===void 0)return void this.fire(new s.k(new Error(`The source '${y}' does not exist in the map's style.`)));const T=w.getSource().type,L=T==="vector"?o.sourceLayer:void 0;T!=="vector"||L?f&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(L,o.id,f):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const f=o.source,y=o.sourceLayer,w=this.sourceCaches[f];if(w!==void 0)return w.getSource().type!=="vector"||y?(o.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),w.getFeatureState(y,o.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const o=s.bO(this.sourceCaches,T=>T.serialize()),f=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,w=this.stylesheet;return s.bP({version:w.version,name:w.name,metadata:w.metadata,light:w.light,sky:w.sky,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,projection:w.projection,sources:o,layers:f,terrain:y},T=>T!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const f=L=>this._layers[L].type==="fill-extrusion",y={},w=[];for(let L=this._order.length-1;L>=0;L--){const O=this._order[L];if(f(O)){y[O]=L;for(const H of o){const te=H[O];if(te)for(const ne of te)w.push(ne)}}}w.sort((L,O)=>O.intersectionZ-L.intersectionZ);const T=[];for(let L=this._order.length-1;L>=0;L--){const O=this._order[L];if(f(O))for(let H=w.length-1;H>=0;H--){const te=w[H].feature;if(y[te.layer.id]<L)break;T.push(te),w.pop()}else for(const H of o){const te=H[O];if(te)for(const ne of te)T.push(ne.feature)}}return T}queryRenderedFeatures(o,f,y){f&&f.filter&&this._validate(s.z.filter,"queryRenderedFeatures.filter",f.filter,null,f);const w={};if(f&&f.layers){if(!(Array.isArray(f.layers)||f.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const te of f.layers){const ne=this._layers[te];if(!ne)return this.fire(new s.k(new Error(`The layer '${te}' does not exist in the map's style and cannot be queried for features.`))),[];w[ne.source]=!0}}const T=[];f.availableImages=this._availableImages;const L=this._serializedAllLayers(),O=f.layers instanceof Set?f.layers:Array.isArray(f.layers)?new Set(f.layers):null,H=Object.assign(Object.assign({},f),{layers:O,globalState:this._globalState});for(const te in this.sourceCaches)f.layers&&!w[te]||T.push(gt(this.sourceCaches[te],this._layers,L,o,H,y,this.map.terrain?(ne,me,he)=>this.map.terrain.getElevation(ne,me,he):void 0));return this.placement&&T.push(function(te,ne,me,he,Se,Ue,Xe){const Je={},st=Ue.queryRenderedSymbols(he),pt=[];for(const xt of Object.keys(st).map(Number))pt.push(Xe[xt]);pt.sort(dt);for(const xt of pt){const mt=xt.featureIndex.lookupSymbolFeatures(st[xt.bucketInstanceId],ne,xt.bucketIndex,xt.sourceLayerIndex,{filterSpec:Se.filter,globalState:Se.globalState},Se.layers,Se.availableImages,te);for(const wt in mt){const St=Je[wt]=Je[wt]||[],yt=mt[wt];yt.sort((Lt,rr)=>{const $t=xt.featureSortOrder;if($t){const Zt=$t.indexOf(Lt.featureIndex);return $t.indexOf(rr.featureIndex)-Zt}return rr.featureIndex-Lt.featureIndex});for(const Lt of yt)St.push(Lt)}}return function(xt,mt,wt){for(const St in xt)for(const yt of xt[St])qt(yt,wt[mt[St].source]);return xt}(Je,te,me)}(this._layers,L,this.sourceCaches,o,H,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(o,f){f?.filter&&this._validate(s.z.filter,"querySourceFeatures.filter",f.filter,null,f);const y=this.sourceCaches[o];return y?function(w,T){const L=w.getRenderableIds().map(te=>w.getTileByID(te)),O=[],H={};for(let te=0;te<L.length;te++){const ne=L[te],me=ne.tileID.canonical.key;H[me]||(H[me]=!0,ne.querySourceFeatures(O,T))}return O}(y,f?Object.assign(Object.assign({},f),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(o,f={}){this._checkLoaded();const y=this.light.getLight();let w=!1;for(const L in o)if(!s.bH(o[L],y[L])){w=!0;break}if(!w)return;const T={now:N.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,f),this.light.updateTransitions(T)}getProjection(){var o;return(o=this.stylesheet)===null||o===void 0?void 0:o.projection}setProjection(o){if(this._checkLoaded(),this.projection){if(this.projection.name===o.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=o,this._setProjectionInternal(o.type)}getSky(){var o;return(o=this.stylesheet)===null||o===void 0?void 0:o.sky}setSky(o,f={}){this._checkLoaded();const y=this.getSky();let w=!1;if(!o&&!y)return;if(o&&!y)w=!0;else if(!o&&y)w=!0;else for(const L in o)if(!s.bH(o[L],y[L])){w=!0;break}if(!w)return;const T={now:N.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=o,this.sky.setSky(o,f),this.sky.updateTransitions(T)}_setProjectionInternal(o){const f=function(y){if(Array.isArray(y)){const w=new uh({type:y});return{projection:w,transform:new Xi,cameraHelper:new Gs(w)}}switch(y){case"mercator":return{projection:new nu,transform:new Ka,cameraHelper:new tl};case"globe":{const w=new uh({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new Xi,cameraHelper:new Gs(w)}}case"vertical-perspective":return{projection:new Io,transform:new Hi,cameraHelper:new Cn};default:return s.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new nu,transform:new Ka,cameraHelper:new tl}}}(o);this.projection=f.projection,this.map.migrateProjection(f.transform,f.cameraHelper);for(const y in this.sourceCaches)this.sourceCaches[y].reload()}_validate(o,f,y,w,T={}){return(!T||T.validate!==!1)&&Qn(this,o.call(s.z,s.e({key:f,style:this.serialize(),value:y,styleSpec:s.v},w)))}_remove(o=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Xr().off(wi,this._rtlPluginLoaded);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const y=this.sourceCaches[f];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),o&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const f in this.sourceCaches)this.sourceCaches[f].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,f,y,w,T=!1){let L=!1,O=!1;const H={};for(const te of this._order){const ne=this._layers[te];if(ne.type!=="symbol")continue;if(!H[ne.source]){const he=this.sourceCaches[ne.source];H[ne.source]=he.getRenderableIds(!0).map(Se=>he.getTileByID(Se)).sort((Se,Ue)=>Ue.tileID.overscaledZ-Se.tileID.overscaledZ||(Se.tileID.isLessThan(Ue.tileID)?-1:1))}const me=this.crossTileSymbolIndex.addLayer(ne,H[ne.source],o.center.lng);L=L||me}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(N.now(),o.zoom))&&(this.pauseablePlacement=new Nh(o,this.map.terrain,this._order,T,f,y,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,H),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(N.now()),O=!0),L&&this.pauseablePlacement.placement.setStale()),O||L)for(const te of this._order){const ne=this._layers[te];ne.type==="symbol"&&this.placement.updateLayerOpacities(ne,H[ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(N.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,f){return s._(this,void 0,void 0,function*(){const y=yield this.imageManager.getImages(f.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[f.source];return w&&w.setDependencies(f.tileID.key,f.type,f.icons),y})}getGlyphs(o,f){return s._(this,void 0,void 0,function*(){const y=yield this.glyphManager.getGlyphs(f.stacks),w=this.sourceCaches[f.source];return w&&w.setDependencies(f.tileID.key,f.type,[""]),y})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,f={}){this._checkLoaded(),o&&this._validate(s.z.glyphs,"glyphs",o,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}getDashes(o,f){return s._(this,void 0,void 0,function*(){const y={};for(const[w,T]of Object.entries(f.dashes))y[w]=this.lineAtlas.getDash(T.dasharray,T.round);return y})}addSprite(o,f,y={},w){this._checkLoaded();const T=[{id:o,url:f}],L=[...le(this.stylesheet.sprite),...T];this._validate(s.z.sprite,"sprite",L,null,y)||(this.stylesheet.sprite=L,this._loadSprite(T,!0,w))}removeSprite(o){this._checkLoaded();const f=le(this.stylesheet.sprite);if(f.find(y=>y.id===o)){if(this._spritesImagesIds[o])for(const y of this._spritesImagesIds[o])this.imageManager.removeImage(y),this._changedImages[y]=!0;f.splice(f.findIndex(y=>y.id===o),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return le(this.stylesheet.sprite)}setSprite(o,f={},y){this._checkLoaded(),o&&this._validate(s.z.sprite,"sprite",o,null,f)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,y):(this._unloadSprite(),y&&y(null)))}}var ja=s.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _l{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,f,y,w,T,L,O,H,te){this.context=o;let ne=this.boundPaintVertexBuffers.length!==w.length;for(let me=0;!ne&&me<w.length;me++)this.boundPaintVertexBuffers[me]!==w[me]&&(ne=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==y||ne||this.boundIndexBuffer!==T||this.boundVertexOffset!==L||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==H||this.boundDynamicVertexBuffer3!==te?this.freshBind(f,y,w,T,L,O,H,te):(o.bindVertexArray.set(this.vao),O&&O.bind(),T&&T.dynamicDraw&&T.bind(),H&&H.bind(),te&&te.bind())}freshBind(o,f,y,w,T,L,O,H){const te=o.numAttributes,ne=this.context,me=ne.gl;this.vao&&this.destroy(),this.vao=ne.createVertexArray(),ne.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=w,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=L,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=H,f.enableAttributes(me,o);for(const he of y)he.enableAttributes(me,o);L&&L.enableAttributes(me,o),O&&O.enableAttributes(me,o),H&&H.enableAttributes(me,o),f.bind(),f.setVertexAttribPointers(me,o,T);for(const he of y)he.bind(),he.setVertexAttribPointers(me,o,T);L&&(L.bind(),L.setVertexAttribPointers(me,o,T)),w&&w.bind(),O&&(O.bind(),O.setVertexAttribPointers(me,o,T)),H&&(H.bind(),H.setVertexAttribPointers(me,o,T)),ne.currentNumAttributes=te}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const rl=(S,o,f,y,w)=>({u_texture:0,u_ele_delta:S,u_fog_matrix:o,u_fog_color:f?f.properties.get("fog-color"):s.bf.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:w?0:f?f.calculateFogBlendOpacity(y):0,u_horizon_color:f?f.properties.get("horizon-color"):s.bf.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1,u_is_globe_mode:w?1:0}),bl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function wl(S){const o=[];for(let f=0;f<S.length;f++){if(S[f]===null)continue;const y=S[f].split(" ");o.push(y.pop())}return o}class Bl{constructor(o,f,y,w,T,L,O,H,te=[]){const ne=o.gl;this.program=ne.createProgram();const me=wl(f.staticAttributes),he=y?y.getBinderAttributes():[],Se=me.concat(he),Ue=ya.prelude.staticUniforms?wl(ya.prelude.staticUniforms):[],Xe=O.staticUniforms?wl(O.staticUniforms):[],Je=f.staticUniforms?wl(f.staticUniforms):[],st=y?y.getBinderUniforms():[],pt=Ue.concat(Xe).concat(Je).concat(st),xt=[];for(const $t of pt)xt.indexOf($t)<0&&xt.push($t);const mt=y?y.defines():[];_s(ne)&&mt.unshift("#version 300 es"),T&&mt.push("#define OVERDRAW_INSPECTOR;"),L&&mt.push("#define TERRAIN3D;"),H&&mt.push(H),te&&mt.push(...te);let wt=mt.concat(ya.prelude.fragmentSource,O.fragmentSource,f.fragmentSource).join(`
`),St=mt.concat(ya.prelude.vertexSource,O.vertexSource,f.vertexSource).join(`
`);_s(ne)||(wt=function($t){return $t.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(wt),St=function($t){return $t.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(St));const yt=ne.createShader(ne.FRAGMENT_SHADER);if(ne.isContextLost())return void(this.failedToCreate=!0);if(ne.shaderSource(yt,wt),ne.compileShader(yt),!ne.getShaderParameter(yt,ne.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ne.getShaderInfoLog(yt)}`);ne.attachShader(this.program,yt);const Lt=ne.createShader(ne.VERTEX_SHADER);if(ne.isContextLost())return void(this.failedToCreate=!0);if(ne.shaderSource(Lt,St),ne.compileShader(Lt),!ne.getShaderParameter(Lt,ne.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ne.getShaderInfoLog(Lt)}`);ne.attachShader(this.program,Lt),this.attributes={};const rr={};this.numAttributes=Se.length;for(let $t=0;$t<this.numAttributes;$t++)Se[$t]&&(ne.bindAttribLocation(this.program,$t,Se[$t]),this.attributes[Se[$t]]=$t);if(ne.linkProgram(this.program),!ne.getProgramParameter(this.program,ne.LINK_STATUS))throw new Error(`Program failed to link: ${ne.getProgramInfoLog(this.program)}`);ne.deleteShader(Lt),ne.deleteShader(yt);for(let $t=0;$t<xt.length;$t++){const Zt=xt[$t];if(Zt&&!rr[Zt]){const Yt=ne.getUniformLocation(this.program,Zt);Yt&&(rr[Zt]=Yt)}}this.fixedUniforms=w(o,rr),this.terrainUniforms=(($t,Zt)=>({u_depth:new s.bQ($t,Zt.u_depth),u_terrain:new s.bQ($t,Zt.u_terrain),u_terrain_dim:new s.bg($t,Zt.u_terrain_dim),u_terrain_matrix:new s.bS($t,Zt.u_terrain_matrix),u_terrain_unpack:new s.bT($t,Zt.u_terrain_unpack),u_terrain_exaggeration:new s.bg($t,Zt.u_terrain_exaggeration)}))(o,rr),this.projectionUniforms=(($t,Zt)=>({u_projection_matrix:new s.bS($t,Zt.u_projection_matrix),u_projection_tile_mercator_coords:new s.bT($t,Zt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bT($t,Zt.u_projection_clipping_plane),u_projection_transition:new s.bg($t,Zt.u_projection_transition),u_projection_fallback_matrix:new s.bS($t,Zt.u_projection_fallback_matrix)}))(o,rr),this.binderUniforms=y?y.getUniforms(o,rr):[]}draw(o,f,y,w,T,L,O,H,te,ne,me,he,Se,Ue,Xe,Je,st,pt,xt){const mt=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(y),o.setStencilMode(w),o.setColorMode(T),o.setCullFace(L),H){o.activeTexture.set(mt.TEXTURE2),mt.bindTexture(mt.TEXTURE_2D,H.depthTexture),o.activeTexture.set(mt.TEXTURE3),mt.bindTexture(mt.TEXTURE_2D,H.texture);for(const St in this.terrainUniforms)this.terrainUniforms[St].set(H[St])}if(te)for(const St in te)this.projectionUniforms[bl[St]].set(te[St]);if(O)for(const St in this.fixedUniforms)this.fixedUniforms[St].set(O[St]);Je&&Je.setUniforms(o,this.binderUniforms,Ue,{zoom:Xe});let wt=0;switch(f){case mt.LINES:wt=2;break;case mt.TRIANGLES:wt=3;break;case mt.LINE_STRIP:wt=1}for(const St of Se.get()){const yt=St.vaos||(St.vaos={});(yt[ne]||(yt[ne]=new _l)).bind(o,this,me,Je?Je.getPaintVertexBuffers():[],he,St.vertexOffset,st,pt,xt),mt.drawElements(f,St.primitiveLength*wt,mt.UNSIGNED_SHORT,St.primitiveOffset*wt*2)}}}function wa(S,o,f){const y=1/s.aC(f,1,o.transform.tileZoom),w=Math.pow(2,f.tileID.overscaledZ),T=f.tileSize*Math.pow(2,o.transform.tileZoom)/w,L=T*(f.tileID.canonical.x+f.tileID.wrap*w),O=T*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[y,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[L>>16,O>>16],u_pixel_coord_lower:[65535&L,65535&O]}}const su=(S,o,f,y)=>{const w=S.style.light,T=w.properties.get("position"),L=[T.x,T.y,T.z],O=s.bW();w.properties.get("anchor")==="viewport"&&s.bX(O,S.transform.bearingInRadians),s.bY(L,L,O);const H=S.transform.transformLightDirection(L),te=w.properties.get("color");return{u_lightpos:L,u_lightpos_globe:H,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[te.r,te.g,te.b],u_vertical_gradient:+o,u_opacity:f,u_fill_translate:y}},_c=(S,o,f,y,w,T,L)=>s.e(su(S,o,f,y),wa(T,S,L),{u_height_factor:-Math.pow(2,w.overscaledZ)/L.tileSize/8}),Lo=(S,o,f,y)=>s.e(wa(o,S,f),{u_fill_translate:y}),Ps=(S,o)=>({u_world:S,u_fill_translate:o}),ku=(S,o,f,y,w)=>s.e(Lo(S,o,f,w),{u_world:y}),lo=(S,o,f,y,w)=>{const T=S.transform;let L,O,H=0;if(f.paint.get("circle-pitch-alignment")==="map"){const te=s.aC(o,1,T.zoom);L=!0,O=[te,te],H=te/(s.$*Math.pow(2,o.tileID.overscaledZ))*2*Math.PI*w}else L=!1,O=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+L,u_device_pixel_ratio:S.pixelRatio,u_extrude_scale:O,u_globe_extrude_scale:H,u_translate:y}},hA=S=>({u_pixel_extrude_scale:[1/S.width,1/S.height]}),bc=S=>({u_viewport_size:[S.width,S.height]}),Wa=(S,o=1)=>({u_color:S,u_overlay:0,u_overlay_scale:o}),Cl=(S,o,f,y)=>{const w=s.aC(S,1,o)/(s.$*Math.pow(2,S.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:s.aC(S,1,o),u_intensity:f,u_globe_extrude_scale:w}},Nu=(S,o,f,y)=>{const w=s.L();s.bZ(w,0,S.width,S.height,0,0,1);const T=S.context.gl;return{u_matrix:w,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:f,u_color_ramp:y,u_opacity:o.paint.get("heatmap-opacity")}},au=(S,o,f)=>{const y=f.paint.get("hillshade-accent-color");let w;switch(f.paint.get("hillshade-method")){case"basic":w=4;break;case"combined":w=1;break;case"igor":w=2;break;case"multidirectional":w=3;break;default:w=0}const T=f.getIlluminationProperties();for(let L=0;L<T.directionRadians.length;L++)f.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[L]+=S.transform.bearingInRadians);return{u_image:0,u_latrange:Iu(0,o.tileID),u_exaggeration:f.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:y,u_method:w,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},Ba=(S,o)=>{const f=o.stride,y=s.L();return s.bZ(y,0,s.$,-s.$,0,0,1),s.M(y,y,[0,-s.$,0]),{u_matrix:y,u_image:1,u_dimension:[f,f],u_zoom:S.overscaledZ,u_unpack:o.getUnpackVector()}};function Iu(S,o){const f=Math.pow(2,o.canonical.z),y=o.canonical.y;return[new s.a1(0,y/f).toLngLat().lat,new s.a1(0,(y+1)/f).toLngLat().lat]}const ou=(S,o,f=0)=>({u_image:0,u_unpack:o.getUnpackVector(),u_dimension:[o.stride,o.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:f,u_opacity:S.paint.get("color-relief-opacity")}),wc=(S,o,f,y)=>{const w=S.transform;return{u_translation:Jl(S,o,f),u_ratio:y/s.aC(o,1,w.zoom),u_device_pixel_ratio:S.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Bc=(S,o,f,y,w)=>s.e(wc(S,o,f,y),{u_image:0,u_image_height:w}),co=(S,o,f,y,w)=>{const T=S.transform,L=ho(o,T);return{u_translation:Jl(S,o,f),u_texsize:o.imageAtlasTexture.size,u_ratio:y/s.aC(o,1,T.zoom),u_device_pixel_ratio:S.pixelRatio,u_image:0,u_scale:[L,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},$a=(S,o,f,y,w)=>{const T=ho(o,S.transform);return s.e(wc(S,o,f,y),{u_tileratio:T,u_crossfade_from:w.fromScale,u_crossfade_to:w.toScale,u_image:0,u_mix:w.t,u_lineatlas_width:S.lineAtlas.width,u_lineatlas_height:S.lineAtlas.height})},uo=(S,o,f,y,w,T)=>{const L=ho(o,S.transform);return s.e(wc(S,o,f,y),{u_image:0,u_image_height:T,u_tileratio:L,u_crossfade_from:w.fromScale,u_crossfade_to:w.toScale,u_image_dash:1,u_mix:w.t,u_lineatlas_width:S.lineAtlas.width,u_lineatlas_height:S.lineAtlas.height})};function ho(S,o){return 1/s.aC(S,1,o.tileZoom)}function Jl(S,o,f){return s.aD(S.transform,o,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const ec=(S,o,f,y,w)=>{return{u_tl_parent:S,u_scale_parent:o,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(L=y.paint.get("raster-saturation"),L>0?1-1/(1.001-L):-L),u_contrast_factor:(T=y.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:AA(y.paint.get("raster-hue-rotate")),u_coords_top:[w[0].x,w[0].y,w[1].x,w[1].y],u_coords_bottom:[w[3].x,w[3].y,w[2].x,w[2].y]};var T,L};function AA(S){S*=Math.PI/180;const o=Math.sin(S),f=Math.cos(S);return[(2*f+1)/3,(-Math.sqrt(3)*o-f+1)/3,(Math.sqrt(3)*o-f+1)/3]}const hh=(S,o,f,y,w,T,L,O,H,te,ne,me,he)=>{const Se=L.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:Se.cameraToCenterDistance,u_pitch:Se.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:Se.width/Se.height,u_fade_change:L.options.fadeDuration?L.symbolFadeChange:1,u_label_plane_matrix:O,u_coord_matrix:H,u_is_text:+ne,u_pitch_with_map:+y,u_is_along_line:w,u_is_variable_anchor:T,u_texsize:me,u_texture:0,u_translation:te,u_pitched_scale:he}},bs=(S,o,f,y,w,T,L,O,H,te,ne,me,he,Se)=>{const Ue=L.transform;return s.e(hh(S,o,f,y,w,T,L,O,H,te,ne,me,Se),{u_gamma_scale:y?Math.cos(Ue.pitch*Math.PI/180)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:L.pixelRatio,u_is_halo:1})},fA=(S,o,f,y,w,T,L,O,H,te,ne,me,he)=>s.e(bs(S,o,f,y,w,T,L,O,H,te,!0,ne,0,he),{u_texsize_icon:me,u_texture_icon:1}),ws=(S,o)=>({u_opacity:S,u_color:o}),Xa=(S,o,f,y,w)=>s.e(function(T,L,O,H){const te=O.imageManager.getPattern(T.from.toString()),ne=O.imageManager.getPattern(T.to.toString()),{width:me,height:he}=O.imageManager.getPixelSize(),Se=Math.pow(2,H.tileID.overscaledZ),Ue=H.tileSize*Math.pow(2,O.transform.tileZoom)/Se,Xe=Ue*(H.tileID.canonical.x+H.tileID.wrap*Se),Je=Ue*H.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:te.tl,u_pattern_br_a:te.br,u_pattern_tl_b:ne.tl,u_pattern_br_b:ne.br,u_texsize:[me,he],u_mix:L.t,u_pattern_size_a:te.displaySize,u_pattern_size_b:ne.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/s.aC(H,1,O.transform.tileZoom),u_pixel_coord_upper:[Xe>>16,Je>>16],u_pixel_coord_lower:[65535&Xe,65535&Je]}}(f,w,o,y),{u_opacity:S}),Lu=(S,o)=>{},lu={fillExtrusion:(S,o)=>({u_lightpos:new s.bU(S,o.u_lightpos),u_lightpos_globe:new s.bU(S,o.u_lightpos_globe),u_lightintensity:new s.bg(S,o.u_lightintensity),u_lightcolor:new s.bU(S,o.u_lightcolor),u_vertical_gradient:new s.bg(S,o.u_vertical_gradient),u_opacity:new s.bg(S,o.u_opacity),u_fill_translate:new s.bV(S,o.u_fill_translate)}),fillExtrusionPattern:(S,o)=>({u_lightpos:new s.bU(S,o.u_lightpos),u_lightpos_globe:new s.bU(S,o.u_lightpos_globe),u_lightintensity:new s.bg(S,o.u_lightintensity),u_lightcolor:new s.bU(S,o.u_lightcolor),u_vertical_gradient:new s.bg(S,o.u_vertical_gradient),u_height_factor:new s.bg(S,o.u_height_factor),u_opacity:new s.bg(S,o.u_opacity),u_fill_translate:new s.bV(S,o.u_fill_translate),u_image:new s.bQ(S,o.u_image),u_texsize:new s.bV(S,o.u_texsize),u_pixel_coord_upper:new s.bV(S,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(S,o.u_pixel_coord_lower),u_scale:new s.bU(S,o.u_scale),u_fade:new s.bg(S,o.u_fade)}),fill:(S,o)=>({u_fill_translate:new s.bV(S,o.u_fill_translate)}),fillPattern:(S,o)=>({u_image:new s.bQ(S,o.u_image),u_texsize:new s.bV(S,o.u_texsize),u_pixel_coord_upper:new s.bV(S,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(S,o.u_pixel_coord_lower),u_scale:new s.bU(S,o.u_scale),u_fade:new s.bg(S,o.u_fade),u_fill_translate:new s.bV(S,o.u_fill_translate)}),fillOutline:(S,o)=>({u_world:new s.bV(S,o.u_world),u_fill_translate:new s.bV(S,o.u_fill_translate)}),fillOutlinePattern:(S,o)=>({u_world:new s.bV(S,o.u_world),u_image:new s.bQ(S,o.u_image),u_texsize:new s.bV(S,o.u_texsize),u_pixel_coord_upper:new s.bV(S,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(S,o.u_pixel_coord_lower),u_scale:new s.bU(S,o.u_scale),u_fade:new s.bg(S,o.u_fade),u_fill_translate:new s.bV(S,o.u_fill_translate)}),circle:(S,o)=>({u_camera_to_center_distance:new s.bg(S,o.u_camera_to_center_distance),u_scale_with_map:new s.bQ(S,o.u_scale_with_map),u_pitch_with_map:new s.bQ(S,o.u_pitch_with_map),u_extrude_scale:new s.bV(S,o.u_extrude_scale),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_globe_extrude_scale:new s.bg(S,o.u_globe_extrude_scale),u_translate:new s.bV(S,o.u_translate)}),collisionBox:(S,o)=>({u_pixel_extrude_scale:new s.bV(S,o.u_pixel_extrude_scale)}),collisionCircle:(S,o)=>({u_viewport_size:new s.bV(S,o.u_viewport_size)}),debug:(S,o)=>({u_color:new s.bR(S,o.u_color),u_overlay:new s.bQ(S,o.u_overlay),u_overlay_scale:new s.bg(S,o.u_overlay_scale)}),depth:Lu,clippingMask:Lu,heatmap:(S,o)=>({u_extrude_scale:new s.bg(S,o.u_extrude_scale),u_intensity:new s.bg(S,o.u_intensity),u_globe_extrude_scale:new s.bg(S,o.u_globe_extrude_scale)}),heatmapTexture:(S,o)=>({u_matrix:new s.bS(S,o.u_matrix),u_world:new s.bV(S,o.u_world),u_image:new s.bQ(S,o.u_image),u_color_ramp:new s.bQ(S,o.u_color_ramp),u_opacity:new s.bg(S,o.u_opacity)}),hillshade:(S,o)=>({u_image:new s.bQ(S,o.u_image),u_latrange:new s.bV(S,o.u_latrange),u_exaggeration:new s.bg(S,o.u_exaggeration),u_altitudes:new s.b$(S,o.u_altitudes),u_azimuths:new s.b$(S,o.u_azimuths),u_accent:new s.bR(S,o.u_accent),u_method:new s.bQ(S,o.u_method),u_shadows:new s.b_(S,o.u_shadows),u_highlights:new s.b_(S,o.u_highlights)}),hillshadePrepare:(S,o)=>({u_matrix:new s.bS(S,o.u_matrix),u_image:new s.bQ(S,o.u_image),u_dimension:new s.bV(S,o.u_dimension),u_zoom:new s.bg(S,o.u_zoom),u_unpack:new s.bT(S,o.u_unpack)}),colorRelief:(S,o)=>({u_image:new s.bQ(S,o.u_image),u_unpack:new s.bT(S,o.u_unpack),u_dimension:new s.bV(S,o.u_dimension),u_elevation_stops:new s.bQ(S,o.u_elevation_stops),u_color_stops:new s.bQ(S,o.u_color_stops),u_color_ramp_size:new s.bQ(S,o.u_color_ramp_size),u_opacity:new s.bg(S,o.u_opacity)}),line:(S,o)=>({u_translation:new s.bV(S,o.u_translation),u_ratio:new s.bg(S,o.u_ratio),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_units_to_pixels:new s.bV(S,o.u_units_to_pixels)}),lineGradient:(S,o)=>({u_translation:new s.bV(S,o.u_translation),u_ratio:new s.bg(S,o.u_ratio),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_units_to_pixels:new s.bV(S,o.u_units_to_pixels),u_image:new s.bQ(S,o.u_image),u_image_height:new s.bg(S,o.u_image_height)}),linePattern:(S,o)=>({u_translation:new s.bV(S,o.u_translation),u_texsize:new s.bV(S,o.u_texsize),u_ratio:new s.bg(S,o.u_ratio),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_image:new s.bQ(S,o.u_image),u_units_to_pixels:new s.bV(S,o.u_units_to_pixels),u_scale:new s.bU(S,o.u_scale),u_fade:new s.bg(S,o.u_fade)}),lineSDF:(S,o)=>({u_translation:new s.bV(S,o.u_translation),u_ratio:new s.bg(S,o.u_ratio),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_units_to_pixels:new s.bV(S,o.u_units_to_pixels),u_image:new s.bQ(S,o.u_image),u_mix:new s.bg(S,o.u_mix),u_tileratio:new s.bg(S,o.u_tileratio),u_crossfade_from:new s.bg(S,o.u_crossfade_from),u_crossfade_to:new s.bg(S,o.u_crossfade_to),u_lineatlas_width:new s.bg(S,o.u_lineatlas_width),u_lineatlas_height:new s.bg(S,o.u_lineatlas_height)}),lineGradientSDF:(S,o)=>({u_translation:new s.bV(S,o.u_translation),u_ratio:new s.bg(S,o.u_ratio),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_units_to_pixels:new s.bV(S,o.u_units_to_pixels),u_image:new s.bQ(S,o.u_image),u_image_height:new s.bg(S,o.u_image_height),u_tileratio:new s.bg(S,o.u_tileratio),u_crossfade_from:new s.bg(S,o.u_crossfade_from),u_crossfade_to:new s.bg(S,o.u_crossfade_to),u_image_dash:new s.bQ(S,o.u_image_dash),u_mix:new s.bg(S,o.u_mix),u_lineatlas_width:new s.bg(S,o.u_lineatlas_width),u_lineatlas_height:new s.bg(S,o.u_lineatlas_height)}),raster:(S,o)=>({u_tl_parent:new s.bV(S,o.u_tl_parent),u_scale_parent:new s.bg(S,o.u_scale_parent),u_buffer_scale:new s.bg(S,o.u_buffer_scale),u_fade_t:new s.bg(S,o.u_fade_t),u_opacity:new s.bg(S,o.u_opacity),u_image0:new s.bQ(S,o.u_image0),u_image1:new s.bQ(S,o.u_image1),u_brightness_low:new s.bg(S,o.u_brightness_low),u_brightness_high:new s.bg(S,o.u_brightness_high),u_saturation_factor:new s.bg(S,o.u_saturation_factor),u_contrast_factor:new s.bg(S,o.u_contrast_factor),u_spin_weights:new s.bU(S,o.u_spin_weights),u_coords_top:new s.bT(S,o.u_coords_top),u_coords_bottom:new s.bT(S,o.u_coords_bottom)}),symbolIcon:(S,o)=>({u_is_size_zoom_constant:new s.bQ(S,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bQ(S,o.u_is_size_feature_constant),u_size_t:new s.bg(S,o.u_size_t),u_size:new s.bg(S,o.u_size),u_camera_to_center_distance:new s.bg(S,o.u_camera_to_center_distance),u_pitch:new s.bg(S,o.u_pitch),u_rotate_symbol:new s.bQ(S,o.u_rotate_symbol),u_aspect_ratio:new s.bg(S,o.u_aspect_ratio),u_fade_change:new s.bg(S,o.u_fade_change),u_label_plane_matrix:new s.bS(S,o.u_label_plane_matrix),u_coord_matrix:new s.bS(S,o.u_coord_matrix),u_is_text:new s.bQ(S,o.u_is_text),u_pitch_with_map:new s.bQ(S,o.u_pitch_with_map),u_is_along_line:new s.bQ(S,o.u_is_along_line),u_is_variable_anchor:new s.bQ(S,o.u_is_variable_anchor),u_texsize:new s.bV(S,o.u_texsize),u_texture:new s.bQ(S,o.u_texture),u_translation:new s.bV(S,o.u_translation),u_pitched_scale:new s.bg(S,o.u_pitched_scale)}),symbolSDF:(S,o)=>({u_is_size_zoom_constant:new s.bQ(S,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bQ(S,o.u_is_size_feature_constant),u_size_t:new s.bg(S,o.u_size_t),u_size:new s.bg(S,o.u_size),u_camera_to_center_distance:new s.bg(S,o.u_camera_to_center_distance),u_pitch:new s.bg(S,o.u_pitch),u_rotate_symbol:new s.bQ(S,o.u_rotate_symbol),u_aspect_ratio:new s.bg(S,o.u_aspect_ratio),u_fade_change:new s.bg(S,o.u_fade_change),u_label_plane_matrix:new s.bS(S,o.u_label_plane_matrix),u_coord_matrix:new s.bS(S,o.u_coord_matrix),u_is_text:new s.bQ(S,o.u_is_text),u_pitch_with_map:new s.bQ(S,o.u_pitch_with_map),u_is_along_line:new s.bQ(S,o.u_is_along_line),u_is_variable_anchor:new s.bQ(S,o.u_is_variable_anchor),u_texsize:new s.bV(S,o.u_texsize),u_texture:new s.bQ(S,o.u_texture),u_gamma_scale:new s.bg(S,o.u_gamma_scale),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_is_halo:new s.bQ(S,o.u_is_halo),u_translation:new s.bV(S,o.u_translation),u_pitched_scale:new s.bg(S,o.u_pitched_scale)}),symbolTextAndIcon:(S,o)=>({u_is_size_zoom_constant:new s.bQ(S,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bQ(S,o.u_is_size_feature_constant),u_size_t:new s.bg(S,o.u_size_t),u_size:new s.bg(S,o.u_size),u_camera_to_center_distance:new s.bg(S,o.u_camera_to_center_distance),u_pitch:new s.bg(S,o.u_pitch),u_rotate_symbol:new s.bQ(S,o.u_rotate_symbol),u_aspect_ratio:new s.bg(S,o.u_aspect_ratio),u_fade_change:new s.bg(S,o.u_fade_change),u_label_plane_matrix:new s.bS(S,o.u_label_plane_matrix),u_coord_matrix:new s.bS(S,o.u_coord_matrix),u_is_text:new s.bQ(S,o.u_is_text),u_pitch_with_map:new s.bQ(S,o.u_pitch_with_map),u_is_along_line:new s.bQ(S,o.u_is_along_line),u_is_variable_anchor:new s.bQ(S,o.u_is_variable_anchor),u_texsize:new s.bV(S,o.u_texsize),u_texsize_icon:new s.bV(S,o.u_texsize_icon),u_texture:new s.bQ(S,o.u_texture),u_texture_icon:new s.bQ(S,o.u_texture_icon),u_gamma_scale:new s.bg(S,o.u_gamma_scale),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_is_halo:new s.bQ(S,o.u_is_halo),u_translation:new s.bV(S,o.u_translation),u_pitched_scale:new s.bg(S,o.u_pitched_scale)}),background:(S,o)=>({u_opacity:new s.bg(S,o.u_opacity),u_color:new s.bR(S,o.u_color)}),backgroundPattern:(S,o)=>({u_opacity:new s.bg(S,o.u_opacity),u_image:new s.bQ(S,o.u_image),u_pattern_tl_a:new s.bV(S,o.u_pattern_tl_a),u_pattern_br_a:new s.bV(S,o.u_pattern_br_a),u_pattern_tl_b:new s.bV(S,o.u_pattern_tl_b),u_pattern_br_b:new s.bV(S,o.u_pattern_br_b),u_texsize:new s.bV(S,o.u_texsize),u_mix:new s.bg(S,o.u_mix),u_pattern_size_a:new s.bV(S,o.u_pattern_size_a),u_pattern_size_b:new s.bV(S,o.u_pattern_size_b),u_scale_a:new s.bg(S,o.u_scale_a),u_scale_b:new s.bg(S,o.u_scale_b),u_pixel_coord_upper:new s.bV(S,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(S,o.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bg(S,o.u_tile_units_to_pixels)}),terrain:(S,o)=>({u_texture:new s.bQ(S,o.u_texture),u_ele_delta:new s.bg(S,o.u_ele_delta),u_fog_matrix:new s.bS(S,o.u_fog_matrix),u_fog_color:new s.bR(S,o.u_fog_color),u_fog_ground_blend:new s.bg(S,o.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bg(S,o.u_fog_ground_blend_opacity),u_horizon_color:new s.bR(S,o.u_horizon_color),u_horizon_fog_blend:new s.bg(S,o.u_horizon_fog_blend),u_is_globe_mode:new s.bg(S,o.u_is_globe_mode)}),terrainDepth:(S,o)=>({u_ele_delta:new s.bg(S,o.u_ele_delta)}),terrainCoords:(S,o)=>({u_texture:new s.bQ(S,o.u_texture),u_terrain_coords_id:new s.bg(S,o.u_terrain_coords_id),u_ele_delta:new s.bg(S,o.u_ele_delta)}),projectionErrorMeasurement:(S,o)=>({u_input:new s.bg(S,o.u_input),u_output_expected:new s.bg(S,o.u_output_expected)}),atmosphere:(S,o)=>({u_sun_pos:new s.bU(S,o.u_sun_pos),u_atmosphere_blend:new s.bg(S,o.u_atmosphere_blend),u_globe_position:new s.bU(S,o.u_globe_position),u_globe_radius:new s.bg(S,o.u_globe_radius),u_inv_proj_matrix:new s.bS(S,o.u_inv_proj_matrix)}),sky:(S,o)=>({u_sky_color:new s.bR(S,o.u_sky_color),u_horizon_color:new s.bR(S,o.u_horizon_color),u_horizon:new s.bV(S,o.u_horizon),u_horizon_normal:new s.bV(S,o.u_horizon_normal),u_sky_horizon_blend:new s.bg(S,o.u_sky_horizon_blend),u_sky_blend:new s.bg(S,o.u_sky_blend)})};class Mo{constructor(o,f,y){this.context=o;const w=o.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Mu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Sl{constructor(o,f,y,w){this.length=f.length,this.attributes=y,this.itemSize=f.bytesPerElement,this.dynamicDraw=w,this.context=o;const T=o.gl;this.buffer=T.createBuffer(),o.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,f){for(let y=0;y<this.attributes.length;y++){const w=f.attributes[this.attributes[y].name];w!==void 0&&o.enableVertexAttribArray(w)}}setVertexAttribPointers(o,f,y){for(let w=0;w<this.attributes.length;w++){const T=this.attributes[w],L=f.attributes[T.name];L!==void 0&&o.vertexAttribPointer(L,T.components,o[Mu[T.type]],!1,this.itemSize,T.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ji{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Po extends Ji{getDefault(){return s.bf.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class tc extends Ji{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class Ca extends Ji{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class rc extends Ji{getDefault(){return[!0,!0,!0,!0]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class il extends Ji{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Za extends Ji{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class pn extends Ji{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const f=this.current;(o.func!==f.func||o.ref!==f.ref||o.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class zn extends Ji{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Bs extends Ji{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=o,this.dirty=!1}}class os extends Ji{getDefault(){return[0,1]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class ic extends Ji{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=o,this.dirty=!1}}class cu extends Ji{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Cc extends Ji{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.BLEND):f.disable(f.BLEND),this.current=o,this.dirty=!1}}class Ah extends Ji{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class XA extends Ji{getDefault(){return s.bf.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Pu extends Ji{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class fh extends Ji{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=o,this.dirty=!1}}class Du extends Ji{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Ao extends Ji{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class nl extends Ji{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class dh extends Ji{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class fo extends Ji{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class da extends Ji{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Sc extends Ji{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class ph extends Ji{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class uu extends Ji{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Ru extends Ji{getDefault(){return null}set(o){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class dA extends Ji{getDefault(){return null}set(o){var f;if(o===this.current&&!this.dirty)return;const y=this.gl;_s(y)?y.bindVertexArray(o):(f=y.getExtension("OES_vertex_array_object"))===null||f===void 0||f.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class El extends Ji{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class hu extends Ji{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Uu extends Ji{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Ds extends Ji{constructor(o,f){super(o),this.context=o,this.parent=f}getDefault(){return null}}class Ii extends Ds{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class pa extends Ds{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Ih extends Ds{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}const Tl="Framebuffer is not complete";class Au{constructor(o,f,y,w,T){this.context=o,this.width=f,this.height=y;const L=o.gl,O=this.framebuffer=L.createFramebuffer();if(this.colorAttachment=new Ii(o,O),w)this.depthAttachment=T?new Ih(o,O):new pa(o,O);else if(T)throw new Error("Stencil cannot be set without depth");if(L.checkFramebufferStatus(L.FRAMEBUFFER)!==L.FRAMEBUFFER_COMPLETE)throw new Error(Tl)}destroy(){const o=this.context.gl,f=this.colorAttachment.get();if(f&&o.deleteTexture(f),this.depthAttachment){const y=this.depthAttachment.get();y&&o.deleteRenderbuffer(y)}o.deleteFramebuffer(this.framebuffer)}}class mh{constructor(o){var f,y;if(this.gl=o,this.clearColor=new Po(this),this.clearDepth=new tc(this),this.clearStencil=new Ca(this),this.colorMask=new rc(this),this.depthMask=new il(this),this.stencilMask=new Za(this),this.stencilFunc=new pn(this),this.stencilOp=new zn(this),this.stencilTest=new Bs(this),this.depthRange=new os(this),this.depthTest=new ic(this),this.depthFunc=new cu(this),this.blend=new Cc(this),this.blendFunc=new Ah(this),this.blendColor=new XA(this),this.blendEquation=new Pu(this),this.cullFace=new fh(this),this.cullFaceSide=new Du(this),this.frontFace=new Ao(this),this.program=new nl(this),this.activeTexture=new dh(this),this.viewport=new fo(this),this.bindFramebuffer=new da(this),this.bindRenderbuffer=new Sc(this),this.bindTexture=new ph(this),this.bindVertexBuffer=new uu(this),this.bindElementBuffer=new Ru(this),this.bindVertexArray=new dA(this),this.pixelStoreUnpack=new El(this),this.pixelStoreUnpackPremultiplyAlpha=new hu(this),this.pixelStoreUnpackFlipY=new Uu(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),_s(o)){this.HALF_FLOAT=o.HALF_FLOAT;const w=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(f=o.RGBA16F)!==null&&f!==void 0?f:w?.RGBA16F_EXT,this.RGB16F=(y=o.RGB16F)!==null&&y!==void 0?y:w?.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");const w=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=w?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,f){return new Mo(this,o,f)}createVertexBuffer(o,f,y){return new Sl(this,o,f,y)}createRenderbuffer(o,f,y){const w=this.gl,T=w.createRenderbuffer();return this.bindRenderbuffer.set(T),w.renderbufferStorage(w.RENDERBUFFER,o,f,y),this.bindRenderbuffer.set(null),T}createFramebuffer(o,f,y,w){return new Au(this,o,f,y,w)}clear({color:o,depth:f,stencil:y}){const w=this.gl;let T=0;o&&(T|=w.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(T|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),y!==void 0&&(T|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),w.clear(T)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){s.bH(o.blendFunction,_n.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return _s(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var f;return _s(this.gl)?this.gl.deleteVertexArray(o):(f=this.gl.getExtension("OES_vertex_array_object"))===null||f===void 0?void 0:f.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}let Fl;function Lh(S,o,f,y,w){const T=S.context,L=S.transform,O=T.gl,H=S.useProgram("collisionBox"),te=[];let ne=0,me=0;for(let st=0;st<y.length;st++){const pt=y[st],xt=o.getTile(pt).getBucket(f);if(!xt)continue;const mt=w?xt.textCollisionBox:xt.iconCollisionBox,wt=xt.collisionCircleArray;wt.length>0&&(te.push({circleArray:wt,circleOffset:me,coord:pt}),ne+=wt.length/4,me=ne),mt&&H.draw(T,O.LINES,di.disabled,bi.disabled,S.colorModeForRenderPass(),Ki.disabled,hA(S.transform),S.style.map.terrain&&S.style.map.terrain.getTerrainData(pt),L.getProjectionData({overscaledTileID:pt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),f.id,mt.layoutVertexBuffer,mt.indexBuffer,mt.segments,null,S.transform.zoom,null,null,mt.collisionVertexBuffer)}if(!w||!te.length)return;const he=S.useProgram("collisionCircle"),Se=new s.c0;Se.resize(4*ne),Se._trim();let Ue=0;for(const st of te)for(let pt=0;pt<st.circleArray.length/4;pt++){const xt=4*pt,mt=st.circleArray[xt+0],wt=st.circleArray[xt+1],St=st.circleArray[xt+2],yt=st.circleArray[xt+3];Se.emplace(Ue++,mt,wt,St,yt,0),Se.emplace(Ue++,mt,wt,St,yt,1),Se.emplace(Ue++,mt,wt,St,yt,2),Se.emplace(Ue++,mt,wt,St,yt,3)}(!Fl||Fl.length<2*ne)&&(Fl=function(st){const pt=2*st,xt=new s.c2;xt.resize(pt),xt._trim();for(let mt=0;mt<pt;mt++){const wt=6*mt;xt.uint16[wt+0]=4*mt+0,xt.uint16[wt+1]=4*mt+1,xt.uint16[wt+2]=4*mt+2,xt.uint16[wt+3]=4*mt+2,xt.uint16[wt+4]=4*mt+3,xt.uint16[wt+5]=4*mt+0}return xt}(ne));const Xe=T.createIndexBuffer(Fl,!0),Je=T.createVertexBuffer(Se,s.c1.members,!0);for(const st of te){const pt=bc(S.transform);he.draw(T,O.TRIANGLES,di.disabled,bi.disabled,S.colorModeForRenderPass(),Ki.disabled,pt,S.style.map.terrain&&S.style.map.terrain.getTerrainData(st.coord),null,f.id,Je,Xe,s.aM.simpleSegment(0,2*st.circleOffset,st.circleArray.length,st.circleArray.length/2),null,S.transform.zoom,null,null,null)}Je.destroy(),Xe.destroy()}const pA=s.ag(new Float32Array(16));function Ec(S,o,f,y,w,T){const{horizontalAlign:L,verticalAlign:O}=s.aH(S);return new s.P((-(L-.5)*o/w+y[0])*T,(-(O-.5)*f/w+y[1])*T)}function kl(S,o,f,y,w,T){const L=o.tileAnchorPoint.add(new s.P(o.translation[0],o.translation[1]));if(o.pitchWithMap){let O=y.mult(T);f||(O=O.rotate(-w));const H=L.add(O);return hr(H.x,H.y,o.pitchedLabelPlaneMatrix,o.getElevation).point}if(f){const O=Qt(o.tileAnchorPoint.x+1,o.tileAnchorPoint.y,o).point.sub(S),H=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return S.add(y.rotate(H))}return S.add(y)}function fu(S,o,f,y,w,T,L,O,H,te,ne,me){const he=S.text.placedSymbolArray,Se=S.text.dynamicLayoutVertexArray,Ue=S.icon.dynamicLayoutVertexArray,Xe={};Se.clear();for(let Je=0;Je<he.length;Je++){const st=he.get(Je),pt=st.hidden||!st.crossTileID||S.allowVerticalPlacement&&!st.placedOrientation?null:y[st.crossTileID];if(pt){const xt=new s.P(st.anchorX,st.anchorY),mt={getElevation:me,width:w.width,height:w.height,pitchedLabelPlaneMatrix:T,pitchWithMap:f,transform:w,tileAnchorPoint:xt,translation:te,unwrappedTileID:ne},wt=f?jt(xt.x,xt.y,mt):Qt(xt.x,xt.y,mt),St=Re(w.cameraToCenterDistance,wt.signedDistanceFromCamera);let yt=s.ap(S.textSizeData,O,st)*St/s.aB;f&&(yt*=S.tilePixelRatio/L);const{width:Lt,height:rr,anchor:$t,textOffset:Zt,textBoxScale:Yt}=pt,wr=Ec($t,Lt,rr,Zt,Yt,yt),Br=w.getPitchedTextCorrection(xt.x+te[0],xt.y+te[1],ne),pr=kl(wt.point,mt,o,wr,-w.bearingInRadians,Br),Kr=S.allowVerticalPlacement&&st.placedOrientation===s.ao.vertical?Math.PI/2:0;for(let Ci=0;Ci<st.numGlyphs;Ci++)s.av(Se,pr,Kr);H&&st.associatedIconIndex>=0&&(Xe[st.associatedIconIndex]={shiftedAnchor:pr,angle:Kr})}else zr(st.numGlyphs,Se)}if(H){Ue.clear();const Je=S.icon.placedSymbolArray;for(let st=0;st<Je.length;st++){const pt=Je.get(st);if(pt.hidden)zr(pt.numGlyphs,Ue);else{const xt=Xe[st];if(xt)for(let mt=0;mt<pt.numGlyphs;mt++)s.av(Ue,xt.shiftedAnchor,xt.angle);else zr(pt.numGlyphs,Ue)}}S.icon.dynamicLayoutVertexBuffer.updateData(Ue)}S.text.dynamicLayoutVertexBuffer.updateData(Se)}function gh(S,o,f){return f.iconsInText&&o?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function po(S,o,f,y,w,T,L,O,H,te,ne,me,he){const Se=S.context,Ue=Se.gl,Xe=S.transform,Je=O==="map",st=H==="map",pt=O!=="viewport"&&f.layout.get("symbol-placement")!=="point",xt=Je&&!st&&!pt,mt=!f.layout.get("symbol-sort-key").isConstant();let wt=!1;const St=S.getDepthModeForSublayer(0,di.ReadOnly),yt=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Lt=[],rr=Xe.getCircleRadiusCorrection();for(const $t of y){const Zt=o.getTile($t),Yt=Zt.getBucket(f);if(!Yt)continue;const wr=w?Yt.text:Yt.icon;if(!wr||!wr.segments.get().length||!wr.hasVisibleVertices)continue;const Br=wr.programConfigurations.get(f.id),pr=w||Yt.sdfIcons,Kr=w?Yt.textSizeData:Yt.iconSizeData,Ci=st||Xe.pitch!==0,En=S.useProgram(gh(pr,w,Yt),Br),Nn=s.an(Kr,Xe.zoom),Mn=S.style.map.terrain&&S.style.map.terrain.getTerrainData($t);let ss,as,tn,us,Sa=[0,0],ia=null;if(w)as=Zt.glyphAtlasTexture,tn=Ue.LINEAR,ss=Zt.glyphAtlasTexture.size,Yt.iconsInText&&(Sa=Zt.imageAtlasTexture.size,ia=Zt.imageAtlasTexture,us=Ci||S.options.rotating||S.options.zooming||Kr.kind==="composite"||Kr.kind==="camera"?Ue.LINEAR:Ue.NEAREST);else{const Xs=f.layout.get("icon-size").constantOr(0)!==1||Yt.iconsNeedLinear;as=Zt.imageAtlasTexture,tn=pr||S.options.rotating||S.options.zooming||Xs||Ci?Ue.LINEAR:Ue.NEAREST,ss=Zt.imageAtlasTexture.size}const na=s.aC(Zt,1,S.transform.zoom),eo=mi(Je,S.transform,na),yh=s.L();s.aq(yh,eo);const Ic=ln(st,Je,S.transform,na),Rh=s.aD(Xe,Zt,T,L),Lc=Xe.getProjectionData({overscaledTileID:$t,applyGlobeMatrix:!he,applyTerrainMatrix:!0}),Uh=yt&&Yt.hasTextData(),_h=f.layout.get("icon-text-fit")!=="none"&&Uh&&Yt.hasIconData();if(pt){const Xs=S.style.map.terrain?(sa,Ts)=>S.style.map.terrain.getElevation($t,sa,Ts):null,Wn=f.layout.get("text-rotation-alignment")==="map";$e(Yt,S,w,eo,yh,st,te,Wn,$t.toUnwrapped(),Xe.width,Xe.height,Rh,Xs)}const cc=w&&yt||_h,jo=pt||cc?pA:st?eo:S.transform.clipSpaceToPixelsMatrix,pu=pr&&f.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let mu;mu=pr?Yt.iconsInText?fA(Kr.kind,Nn,xt,st,pt,cc,S,jo,Ic,Rh,ss,Sa,rr):bs(Kr.kind,Nn,xt,st,pt,cc,S,jo,Ic,Rh,w,ss,0,rr):hh(Kr.kind,Nn,xt,st,pt,cc,S,jo,Ic,Rh,w,ss,rr);const to={program:En,buffers:wr,uniformValues:mu,projectionData:Lc,atlasTexture:as,atlasTextureIcon:ia,atlasInterpolation:tn,atlasInterpolationIcon:us,isSDF:pr,hasHalo:pu};if(mt&&Yt.canOverlap){wt=!0;const Xs=wr.segments.get();for(const Wn of Xs)Lt.push({segments:new s.aM([Wn]),sortKey:Wn.sortKey,state:to,terrainData:Mn})}else Lt.push({segments:wr.segments,sortKey:0,state:to,terrainData:Mn})}wt&&Lt.sort(($t,Zt)=>$t.sortKey-Zt.sortKey);for(const $t of Lt){const Zt=$t.state;if(Se.activeTexture.set(Ue.TEXTURE0),Zt.atlasTexture.bind(Zt.atlasInterpolation,Ue.CLAMP_TO_EDGE),Zt.atlasTextureIcon&&(Se.activeTexture.set(Ue.TEXTURE1),Zt.atlasTextureIcon&&Zt.atlasTextureIcon.bind(Zt.atlasInterpolationIcon,Ue.CLAMP_TO_EDGE)),Zt.isSDF){const Yt=Zt.uniformValues;Zt.hasHalo&&(Yt.u_is_halo=1,mo(Zt.buffers,$t.segments,f,S,Zt.program,St,ne,me,Yt,Zt.projectionData,$t.terrainData)),Yt.u_is_halo=0}mo(Zt.buffers,$t.segments,f,S,Zt.program,St,ne,me,Zt.uniformValues,Zt.projectionData,$t.terrainData)}}function mo(S,o,f,y,w,T,L,O,H,te,ne){const me=y.context;w.draw(me,me.gl.TRIANGLES,T,L,O,Ki.backCCW,H,ne,te,f.id,S.layoutVertexBuffer,S.indexBuffer,o,f.paint,y.transform.zoom,S.programConfigurations.get(f.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function Tc(S,o,f,y,w){const T=S.context,L=T.gl,O=bi.disabled,H=new _n([L.ONE,L.ONE],s.bf.transparent,[!0,!0,!0,!0]),te=o.getBucket(f);if(!te)return;const ne=y.key;let me=f.heatmapFbos.get(ne);me||(me=sl(T,o.tileSize,o.tileSize),f.heatmapFbos.set(ne,me)),T.bindFramebuffer.set(me.framebuffer),T.viewport.set([0,0,o.tileSize,o.tileSize]),T.clear({color:s.bf.transparent});const he=te.programConfigurations.get(f.id),Se=S.useProgram("heatmap",he,!w),Ue=S.transform.getProjectionData({overscaledTileID:o.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Xe=S.style.map.terrain.getTerrainData(y);Se.draw(T,L.TRIANGLES,di.disabled,O,H,Ki.disabled,Cl(o,S.transform.zoom,f.paint.get("heatmap-intensity"),1),Xe,Ue,f.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,f.paint,S.transform.zoom,he)}function Nl(S,o,f,y,w){const T=S.context,L=T.gl,O=S.transform;T.setColorMode(S.colorModeForRenderPass());const H=al(T,o),te=f.key,ne=o.heatmapFbos.get(te);if(!ne)return;T.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,ne.colorAttachment.get()),T.activeTexture.set(L.TEXTURE1),H.bind(L.LINEAR,L.CLAMP_TO_EDGE);const me=O.getProjectionData({overscaledTileID:f,applyTerrainMatrix:w,applyGlobeMatrix:!y});S.useProgram("heatmapTexture").draw(T,L.TRIANGLES,di.disabled,bi.disabled,S.colorModeForRenderPass(),Ki.disabled,Nu(S,o,0,1),null,me,o.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments,o.paint,O.zoom),ne.destroy(),o.heatmapFbos.delete(te)}function sl(S,o,f){var y,w;const T=S.gl,L=T.createTexture();T.bindTexture(T.TEXTURE_2D,L),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const O=(y=S.HALF_FLOAT)!==null&&y!==void 0?y:T.UNSIGNED_BYTE,H=(w=S.RGBA16F)!==null&&w!==void 0?w:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,H,o,f,0,T.RGBA,O,null);const te=S.createFramebuffer(o,f,!1,!1);return te.colorAttachment.set(L),te}function al(S,o){return o.colorRampTexture||(o.colorRampTexture=new s.T(S,o.colorRamp,S.gl.RGBA)),o.colorRampTexture}function mA(S,o,f,y,w,T,L,O){let H=256;if(w.stepInterpolant){const te=o.getSource().maxzoom,ne=L.canonical.z===te?Math.ceil(1<<S.transform.maxZoom-L.canonical.z):1;H=s.ah(s.c4(T.maxLineLength/s.$*1024*ne),256,f.maxTextureSize)}return O.gradient=s.c5({expression:w.gradientExpression(),evaluationKey:"lineProgress",resolution:H,image:O.gradient||void 0,clips:T.lineClipsArray}),O.texture?O.texture.update(O.gradient):O.texture=new s.T(f,O.gradient,y.RGBA),O.version=w.gradientVersion,O.texture}function gA(S,o,f,y,w){S.activeTexture.set(o.TEXTURE0),f.imageAtlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),y.updatePaintBuffers(w)}function du(S,o,f,y,w,T){(w||S.lineAtlas.dirty)&&(o.activeTexture.set(f.TEXTURE0),S.lineAtlas.bind(o)),y.updatePaintBuffers(T)}function ma(S,o,f,y,w,T,L){const O=T.gradients[w.id];let H=O.texture;w.gradientVersion!==O.version&&(H=mA(S,o,f,y,w,T,L,O)),f.activeTexture.set(y.TEXTURE0),H.bind(w.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}function Cs(S,o,f,y,w,T,L,O,H){const te=T.gradients[w.id];let ne=te.texture;w.gradientVersion!==te.version&&(ne=mA(S,o,f,y,w,T,L,te)),f.activeTexture.set(y.TEXTURE0),ne.bind(w.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE),f.activeTexture.set(y.TEXTURE1),S.lineAtlas.bind(f),O.updatePaintBuffers(H)}function mn(S,o,f,y,w){if(!f||!y||!y.imageAtlas)return;const T=y.imageAtlas.patternPositions;let L=T[f.to.toString()],O=T[f.from.toString()];if(!L&&O&&(L=O),!O&&L&&(O=L),!L||!O){const H=w.getPaintProperty(o);L=T[H],O=T[H]}L&&O&&S.setConstantPatternPositions(L,O)}function nc(S,o,f,y,w,T,L,O){const H=S.context.gl,te="fill-pattern",ne=f.paint.get(te),me=ne&&ne.constantOr(1),he=f.getCrossfadeParameters();let Se,Ue,Xe,Je,st;const pt=S.transform,xt=f.paint.get("fill-translate"),mt=f.paint.get("fill-translate-anchor");L?(Ue=me&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Se=H.LINES):(Ue=me?"fillPattern":"fill",Se=H.TRIANGLES);const wt=ne.constantOr(null);for(const St of y){const yt=o.getTile(St);if(me&&!yt.patternsLoaded())continue;const Lt=yt.getBucket(f);if(!Lt)continue;const rr=Lt.programConfigurations.get(f.id),$t=S.useProgram(Ue,rr),Zt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(St);me&&(S.context.activeTexture.set(H.TEXTURE0),yt.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),rr.updatePaintBuffers(he)),mn(rr,te,wt,yt,f);const Yt=pt.getProjectionData({overscaledTileID:St,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),wr=s.aD(pt,yt,xt,mt);if(L){Je=Lt.indexBuffer2,st=Lt.segments2;const pr=[H.drawingBufferWidth,H.drawingBufferHeight];Xe=Ue==="fillOutlinePattern"&&me?ku(S,he,yt,pr,wr):Ps(pr,wr)}else Je=Lt.indexBuffer,st=Lt.segments,Xe=me?Lo(S,he,yt,wr):{u_fill_translate:wr};const Br=S.stencilModeForClipping(St);$t.draw(S.context,Se,w,Br,T,Ki.backCCW,Xe,Zt,Yt,f.id,Lt.layoutVertexBuffer,Je,st,f.paint,S.transform.zoom,rr)}}function ol(S,o,f,y,w,T,L,O){const H=S.context,te=H.gl,ne="fill-extrusion-pattern",me=f.paint.get(ne),he=me.constantOr(1),Se=f.getCrossfadeParameters(),Ue=f.paint.get("fill-extrusion-opacity"),Xe=me.constantOr(null),Je=S.transform;for(const st of y){const pt=o.getTile(st),xt=pt.getBucket(f);if(!xt)continue;const mt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(st),wt=xt.programConfigurations.get(f.id),St=S.useProgram(he?"fillExtrusionPattern":"fillExtrusion",wt);he&&(S.context.activeTexture.set(te.TEXTURE0),pt.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),wt.updatePaintBuffers(Se));const yt=Je.getProjectionData({overscaledTileID:st,applyGlobeMatrix:!O,applyTerrainMatrix:!0});mn(wt,ne,Xe,pt,f);const Lt=s.aD(Je,pt,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),rr=f.paint.get("fill-extrusion-vertical-gradient"),$t=he?_c(S,rr,Ue,Lt,st,Se,pt):su(S,rr,Ue,Lt);St.draw(H,H.gl.TRIANGLES,w,T,L,Ki.backCCW,$t,mt,yt,f.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,f.paint,S.transform.zoom,wt,S.style.map.terrain&&xt.centroidVertexBuffer)}}function Mh(S,o,f,y,w,T,L,O,H){var te;const ne=S.style.projection,me=S.context,he=S.transform,Se=me.gl,Ue=[`#define NUM_ILLUMINATION_SOURCES ${f.paint.get("hillshade-highlight-color").values.length}`],Xe=S.useProgram("hillshade",null,!1,Ue),Je=!S.options.moving;for(const st of y){const pt=o.getTile(st),xt=pt.fbo;if(!xt)continue;const mt=ne.getMeshFromTileID(me,st.canonical,O,!0,"raster"),wt=(te=S.style.map.terrain)===null||te===void 0?void 0:te.getTerrainData(st);me.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,xt.colorAttachment.get());const St=he.getProjectionData({overscaledTileID:st,aligned:Je,applyGlobeMatrix:!H,applyTerrainMatrix:!0});Xe.draw(me,Se.TRIANGLES,T,w[st.overscaledZ],L,Ki.backCCW,au(S,pt,f),wt,St,f.id,mt.vertexBuffer,mt.indexBuffer,mt.segments)}}function Il(S,o,f,y,w,T,L,O,H){var te;const ne=S.style.projection,me=S.context,he=S.transform,Se=me.gl,Ue=S.useProgram("colorRelief"),Xe=!S.options.moving;let Je=!0,st=0;for(const pt of y){const xt=o.getTile(pt),mt=xt.dem;if(Je){const $t=Se.getParameter(Se.MAX_TEXTURE_SIZE),{elevationTexture:Zt,colorTexture:Yt}=f.getColorRampTextures(me,$t,mt.getUnpackVector());me.activeTexture.set(Se.TEXTURE1),Zt.bind(Se.NEAREST,Se.CLAMP_TO_EDGE),me.activeTexture.set(Se.TEXTURE4),Yt.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Je=!1,st=Zt.size[0]}if(!mt||!mt.data)continue;const wt=mt.stride,St=mt.getPixels();if(me.activeTexture.set(Se.TEXTURE0),me.pixelStoreUnpackPremultiplyAlpha.set(!1),xt.demTexture=xt.demTexture||S.getTileTexture(wt),xt.demTexture){const $t=xt.demTexture;$t.update(St,{premultiply:!1}),$t.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}else xt.demTexture=new s.T(me,St,Se.RGBA,{premultiply:!1}),xt.demTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE);const yt=ne.getMeshFromTileID(me,pt.canonical,O,!0,"raster"),Lt=(te=S.style.map.terrain)===null||te===void 0?void 0:te.getTerrainData(pt),rr=he.getProjectionData({overscaledTileID:pt,aligned:Xe,applyGlobeMatrix:!H,applyTerrainMatrix:!0});Ue.draw(me,Se.TRIANGLES,T,w[pt.overscaledZ],L,Ki.backCCW,ou(f,xt.dem,st),Lt,rr,f.id,yt.vertexBuffer,yt.indexBuffer,yt.segments)}}const Ph=[new s.P(0,0),new s.P(s.$,0),new s.P(s.$,s.$),new s.P(0,s.$)];function Ll(S,o,f,y,w,T,L,O,H=!1,te=!1){const ne=y[y.length-1].overscaledZ,me=S.context,he=me.gl,Se=S.useProgram("raster"),Ue=S.transform,Xe=S.style.projection,Je=S.colorModeForRenderPass(),st=!S.options.moving,pt=f.paint.get("raster-opacity"),xt=f.paint.get("raster-resampling"),mt=f.paint.get("raster-fade-duration"),wt=!!S.style.map.terrain;for(const St of y){const yt=S.getDepthModeForSublayer(St.overscaledZ-ne,pt===1?di.ReadWrite:di.ReadOnly,he.LESS),Lt=o.getTile(St),rr=xt==="nearest"?he.NEAREST:he.LINEAR;me.activeTexture.set(he.TEXTURE0),Lt.texture.bind(rr,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST),me.activeTexture.set(he.TEXTURE1);const{parentTile:$t,parentScaleBy:Zt,parentTopLeft:Yt,fadeValues:wr}=Ya(Lt,o,mt,wt);Lt.fadeOpacity=wr.tileOpacity,$t?($t.fadeOpacity=wr.parentTileOpacity,$t.texture.bind(rr,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST)):Lt.texture.bind(rr,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST),Lt.texture.useMipmap&&me.extTextureFilterAnisotropic&&S.transform.pitch>20&&he.texParameterf(he.TEXTURE_2D,me.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,me.extTextureFilterAnisotropicMax);const Br=S.style.map.terrain&&S.style.map.terrain.getTerrainData(St),pr=Ue.getProjectionData({overscaledTileID:St,aligned:st,applyGlobeMatrix:!te,applyTerrainMatrix:!0}),Kr=ec(Yt,Zt,wr.fadeMix,f,O),Ci=Xe.getMeshFromTileID(me,St.canonical,T,L,"raster");Se.draw(me,he.TRIANGLES,yt,w?w[St.overscaledZ]:bi.disabled,Je,H?Ki.frontCCW:Ki.backCCW,Kr,Br,pr,f.id,Ci.vertexBuffer,Ci.indexBuffer,Ci.segments)}}function Ya(S,o,f,y){const w={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(f===0||y)return w;if(S.fadingParentID){const T=o._getLoadedTile(S.fadingParentID);if(!T)return w;const L=Math.pow(2,T.tileID.overscaledZ-S.tileID.overscaledZ),O=[S.tileID.canonical.x*L%1,S.tileID.canonical.y*L%1],H=function(te,ne,me){const he=N.now(),Se=(he-ne.timeAdded)/me,Ue=te.fadingDirection===ot.Incoming,Xe=s.ah((he-te.timeAdded)/me,0,1),Je=s.ah(1-Se,0,1),st=Ue?Xe:Je;return{tileOpacity:st,parentTileOpacity:Ue?Je:Xe,fadeMix:{opacity:1,mix:1-st}}}(S,T,f);return{parentTile:T,parentScaleBy:L,parentTopLeft:O,fadeValues:H}}if(S.selfFading){const T=function(L,O){const H=N.now(),te=s.ah((H-L.timeAdded)/O,0,1);return{tileOpacity:te,fadeMix:{opacity:te,mix:0}}}(S,f);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:T}}return w}const bn=new s.bf(1,0,0,1),ju=new s.bf(0,1,0,1),Oa=new s.bf(0,0,1,1),Ml=new s.bf(1,0,1,1),qs=new s.bf(0,1,1,1);function sc(S,o,f,y){go(S,0,o+f/2,S.transform.width,f,y)}function Do(S,o,f,y){go(S,o-f/2,0,f,S.transform.height,y)}function go(S,o,f,y,w,T){const L=S.context,O=L.gl;O.enable(O.SCISSOR_TEST),O.scissor(o*S.pixelRatio,f*S.pixelRatio,y*S.pixelRatio,w*S.pixelRatio),L.clear({color:T}),O.disable(O.SCISSOR_TEST)}function Ou(S,o,f){const y=S.context,w=y.gl,T=S.useProgram("debug"),L=di.disabled,O=bi.disabled,H=S.colorModeForRenderPass(),te="$debug",ne=S.style.map.terrain&&S.style.map.terrain.getTerrainData(f);y.activeTexture.set(w.TEXTURE0);const me=o.getTileByID(f.key).latestRawTileData,he=Math.floor((me&&me.byteLength||0)/1024),Se=o.getTile(f).tileSize,Ue=512/Math.min(Se,512)*(f.overscaledZ/S.transform.zoom)*.5;let Xe=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(Xe+=` => ${f.overscaledZ}`),function(st,pt){st.initDebugOverlayCanvas();const xt=st.debugOverlayCanvas,mt=st.context.gl,wt=st.debugOverlayCanvas.getContext("2d");wt.clearRect(0,0,xt.width,xt.height),wt.shadowColor="white",wt.shadowBlur=2,wt.lineWidth=1.5,wt.strokeStyle="white",wt.textBaseline="top",wt.font="bold 36px Open Sans, sans-serif",wt.fillText(pt,5,5),wt.strokeText(pt,5,5),st.debugOverlayTexture.update(xt),st.debugOverlayTexture.bind(mt.LINEAR,mt.CLAMP_TO_EDGE)}(S,`${Xe} ${he}kB`);const Je=S.transform.getProjectionData({overscaledTileID:f,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(y,w.TRIANGLES,L,O,_n.alphaBlended,Ki.disabled,Wa(s.bf.transparent,Ue),null,Je,te,S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments),T.draw(y,w.LINE_STRIP,L,O,H,Ki.disabled,Wa(s.bf.red),ne,Je,te,S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments)}function vh(S,o,f,y){const{isRenderingGlobe:w}=y,T=S.context,L=T.gl,O=S.transform,H=S.colorModeForRenderPass(),te=S.getDepthModeFor3D(),ne=S.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,S.width,S.height]);for(const me of f){const he=o.getTerrainMesh(me.tileID),Se=S.renderToTexture.getTexture(me),Ue=o.getTerrainData(me.tileID);T.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,Se.texture);const Xe=o.getMeshFrameDelta(O.zoom),Je=O.calculateFogMatrix(me.tileID.toUnwrapped()),st=rl(Xe,Je,S.style.sky,O.pitch,w),pt=O.getProjectionData({overscaledTileID:me.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ne.draw(T,L.TRIANGLES,te,bi.disabled,H,Ki.backCCW,st,Ue,pt,"terrain",he.vertexBuffer,he.indexBuffer,he.segments)}}function Qu(S,o){if(!o.mesh){const f=new s.aL;f.emplaceBack(-1,-1),f.emplaceBack(1,-1),f.emplaceBack(1,1),f.emplaceBack(-1,1);const y=new s.aN;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),o.mesh=new Eu(S.createVertexBuffer(f,Aa.members),S.createIndexBuffer(y),s.aM.simpleSegment(0,0,f.length,y.length))}return o.mesh}class vA{constructor(o,f){this.context=new mh(o),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=jr.maxUnderzooming+jr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vc}resize(o,f,y){if(this.width=Math.floor(o*y),this.height=Math.floor(f*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const o=this.context,f=new s.aL;f.emplaceBack(0,0),f.emplaceBack(s.$,0),f.emplaceBack(0,s.$),f.emplaceBack(s.$,s.$),this.tileExtentBuffer=o.createVertexBuffer(f,Aa.members),this.tileExtentSegments=s.aM.simpleSegment(0,0,4,2);const y=new s.aL;y.emplaceBack(0,0),y.emplaceBack(s.$,0),y.emplaceBack(0,s.$),y.emplaceBack(s.$,s.$),this.debugBuffer=o.createVertexBuffer(y,Aa.members),this.debugSegments=s.aM.simpleSegment(0,0,4,5);const w=new s.c7;w.emplaceBack(0,0,0,0),w.emplaceBack(s.$,0,s.$,0),w.emplaceBack(0,s.$,0,s.$),w.emplaceBack(s.$,s.$,s.$,s.$),this.rasterBoundsBuffer=o.createVertexBuffer(w,ja.members),this.rasterBoundsSegments=s.aM.simpleSegment(0,0,4,2);const T=new s.aL;T.emplaceBack(0,0),T.emplaceBack(s.$,0),T.emplaceBack(0,s.$),T.emplaceBack(s.$,s.$),this.rasterBoundsBufferPosOnly=o.createVertexBuffer(T,Aa.members),this.rasterBoundsSegmentsPosOnly=s.aM.simpleSegment(0,0,4,5);const L=new s.aL;L.emplaceBack(0,0),L.emplaceBack(1,0),L.emplaceBack(0,1),L.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(L,Aa.members),this.viewportSegments=s.aM.simpleSegment(0,0,4,2);const O=new s.c8;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(O);const H=new s.aN;H.emplaceBack(1,0,2),H.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(H);const te=this.context.gl;this.stencilClearMode=new bi({func:te.ALWAYS,mask:0},0,255,te.ZERO,te.ZERO,te.ZERO),this.tileExtentMesh=new Eu(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const o=this.context,f=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=s.L();s.bZ(y,0,this.width,this.height,0,0,1),s.N(y,y,[f.drawingBufferWidth,f.drawingBufferHeight,0]);const w={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(o,f.TRIANGLES,di.disabled,this.stencilClearMode,_n.disabled,Ki.disabled,null,null,w,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,f,y){if(this.currentStencilSource===o.source||!o.isTileClipped()||!f||!f.length)return;this.currentStencilSource=o.source,this.nextStencilID+f.length>256&&this.clearStencil();const w=this.context;w.setColorMode(_n.disabled),w.setDepthMode(di.disabled);const T={};for(const L of f)T[L.key]=this.nextStencilID++;this._renderTileMasks(T,f,y,!0),this._renderTileMasks(T,f,y,!1),this._tileClippingMaskIDs=T}_renderTileMasks(o,f,y,w){const T=this.context,L=T.gl,O=this.style.projection,H=this.transform,te=this.useProgram("clippingMask");for(const ne of f){const me=o[ne.key],he=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ne),Se=O.getMeshFromTileID(this.context,ne.canonical,w,!0,"stencil"),Ue=H.getProjectionData({overscaledTileID:ne,applyGlobeMatrix:!y,applyTerrainMatrix:!0});te.draw(T,L.TRIANGLES,di.disabled,new bi({func:L.ALWAYS,mask:0},me,255,L.KEEP,L.KEEP,L.REPLACE),_n.disabled,y?Ki.disabled:Ki.backCCW,null,he,Ue,"$clipping",Se.vertexBuffer,Se.indexBuffer,Se.segments)}}_renderTilesDepthBuffer(){const o=this.context,f=o.gl,y=this.style.projection,w=this.transform,T=this.useProgram("depth"),L=this.getDepthModeFor3D(),O=ei(w,{tileSize:w.tileSize});for(const H of O){const te=this.style.map.terrain&&this.style.map.terrain.getTerrainData(H),ne=y.getMeshFromTileID(this.context,H.canonical,!0,!0,"raster"),me=w.getProjectionData({overscaledTileID:H,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(o,f.TRIANGLES,L,bi.disabled,_n.disabled,Ki.backCCW,null,te,me,"$clipping",ne.vertexBuffer,ne.indexBuffer,ne.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,f=this.context.gl;return new bi({func:f.NOTEQUAL,mask:255},o,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(o){const f=this.context.gl;return new bi({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,f.KEEP,f.KEEP,f.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(o){const f=this.context.gl,y=o.sort((L,O)=>O.overscaledZ-L.overscaledZ),w=y[y.length-1].overscaledZ,T=y[0].overscaledZ-w+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const L={};for(let O=0;O<T;O++)L[O+w]=new bi({func:f.GEQUAL,mask:255},O+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=T,[L,y]}return[{[w]:bi.disabled},y]}stencilConfigForOverlapTwoPass(o){const f=this.context.gl,y=o.sort((L,O)=>O.overscaledZ-L.overscaledZ),w=y[y.length-1].overscaledZ,T=y[0].overscaledZ-w+1;if(this.clearStencil(),T>1){const L={},O={};for(let H=0;H<T;H++)L[H+w]=new bi({func:f.GREATER,mask:255},T+1+H,255,f.KEEP,f.KEEP,f.REPLACE),O[H+w]=new bi({func:f.GREATER,mask:255},1+H,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID=2*T+1,[L,O,y]}return this.nextStencilID=3,[{[w]:new bi({func:f.GREATER,mask:255},2,255,f.KEEP,f.KEEP,f.REPLACE)},{[w]:new bi({func:f.GREATER,mask:255},1,255,f.KEEP,f.KEEP,f.REPLACE)},y]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new _n([o.CONSTANT_COLOR,o.ONE],new s.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?_n.unblended:_n.alphaBlended}getDepthModeForSublayer(o,f,y){if(!this.opaquePassEnabledForLayer())return di.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new di(y||this.context.gl.LEQUAL,f,[w,w])}getDepthModeFor3D(){return new di(this.context.gl.LEQUAL,di.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,f){var y,w;this.style=o,this.options=f,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(N.now()),this.imageManager.beginFrame();const T=this.style._order,L=this.style.sourceCaches,O={},H={},te={},ne={isRenderingToTexture:!1,isRenderingGlobe:((y=o.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const he in L){const Se=L[he];Se.used&&Se.prepare(this.context),O[he]=Se.getVisibleCoordinates(!1),H[he]=O[he].slice().reverse(),te[he]=Se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let he=0;he<T.length;he++)if(this.style._layers[T[he]].is3D()){this.opaquePassCutoff=he;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const he of T){const Se=this.style._layers[he];if(!Se.hasOffscreenPass()||Se.isHidden(this.transform.zoom))continue;const Ue=H[Se.source];(Se.type==="custom"||Ue.length)&&this.renderLayer(this,L[Se.source],Se,Ue,ne)}if((w=this.style.projection)===null||w===void 0||w.updateGPUdependent({context:this.context,useProgram:he=>this.useProgram(he)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?s.bf.black:s.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(he,Se){const Ue=he.context,Xe=Ue.gl,Je=((St,yt,Lt)=>{const rr=Math.cos(yt.rollInRadians),$t=Math.sin(yt.rollInRadians),Zt=Ft(yt),Yt=yt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:St.properties.get("sky-color"),u_horizon_color:St.properties.get("horizon-color"),u_horizon:[(yt.width/2-Zt*$t)*Lt,(yt.height/2+Zt*rr)*Lt],u_horizon_normal:[-$t,rr],u_sky_horizon_blend:St.properties.get("sky-horizon-blend")*yt.height/2*Lt,u_sky_blend:Yt}})(Se,he.style.map.transform,he.pixelRatio),st=new di(Xe.LEQUAL,di.ReadWrite,[0,1]),pt=bi.disabled,xt=he.colorModeForRenderPass(),mt=he.useProgram("sky"),wt=Qu(Ue,Se);mt.draw(Ue,Xe.TRIANGLES,st,pt,xt,Ki.disabled,Je,null,void 0,"sky",wt.vertexBuffer,wt.indexBuffer,wt.segments)}(this,this.style.sky),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const he=this.style._layers[T[this.currentLayer]],Se=L[he.source],Ue=O[he.source];this._renderTileClippingMasks(he,Ue,!1),this.renderLayer(this,Se,he,Ue,ne)}this.renderPass="translucent";let me=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const he=this.style._layers[T[this.currentLayer]],Se=L[he.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(he,ne))continue;this.opaquePassEnabledForLayer()||me||(me=!0,ne.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ue=(he.type==="symbol"?te:H)[he.source];this._renderTileClippingMasks(he,O[he.source],!!this.renderToTexture),this.renderLayer(this,Se,he,Ue,ne)}if(ne.isRenderingGlobe&&function(he,Se,Ue){const Xe=he.context,Je=Xe.gl,st=he.useProgram("atmosphere"),pt=new di(Je.LEQUAL,di.ReadOnly,[0,1]),xt=he.transform,mt=function(Yt,wr){const Br=Yt.properties.get("position"),pr=[-Br.x,-Br.y,-Br.z],Kr=s.ag(new Float64Array(16));return Yt.properties.get("anchor")==="map"&&(s.b6(Kr,Kr,wr.rollInRadians),s.b7(Kr,Kr,-wr.pitchInRadians),s.b6(Kr,Kr,wr.bearingInRadians),s.b7(Kr,Kr,wr.center.lat*Math.PI/180),s.bz(Kr,Kr,-wr.center.lng*Math.PI/180)),s.c6(pr,pr,Kr),pr}(Ue,he.transform),wt=xt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),St=Se.properties.get("atmosphere-blend")*wt.projectionTransition;if(St===0)return;const yt=yc(xt.worldSize,xt.center.lat),Lt=xt.inverseProjectionMatrix,rr=new Float64Array(4);rr[3]=1,s.aw(rr,rr,xt.modelViewProjectionMatrix),rr[0]/=rr[3],rr[1]/=rr[3],rr[2]/=rr[3],rr[3]=1,s.aw(rr,rr,Lt),rr[0]/=rr[3],rr[1]/=rr[3],rr[2]/=rr[3],rr[3]=1;const $t=((Yt,wr,Br,pr,Kr)=>({u_sun_pos:Yt,u_atmosphere_blend:wr,u_globe_position:Br,u_globe_radius:pr,u_inv_proj_matrix:Kr}))(mt,St,[rr[0],rr[1],rr[2]],yt,Lt),Zt=Qu(Xe,Se);st.draw(Xe,Je.TRIANGLES,pt,bi.disabled,_n.alphaBlended,Ki.disabled,$t,null,null,"atmosphere",Zt.vertexBuffer,Zt.indexBuffer,Zt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const he=function(Se,Ue){let Xe=null;const Je=Object.values(Se._layers).flatMap(mt=>mt.source&&!mt.isHidden(Ue)?[Se.sourceCaches[mt.source]]:[]),st=Je.filter(mt=>mt.getSource().type==="vector"),pt=Je.filter(mt=>mt.getSource().type!=="vector"),xt=mt=>{(!Xe||Xe.getSource().maxzoom<mt.getSource().maxzoom)&&(Xe=mt)};return st.forEach(mt=>xt(mt)),Xe||pt.forEach(mt=>xt(mt)),Xe}(this.style,this.transform.zoom);he&&function(Se,Ue,Xe){for(let Je=0;Je<Xe.length;Je++)Ou(Se,Ue,Xe[Je])}(this,he,he.getVisibleCoordinates())}this.options.showPadding&&function(he){const Se=he.transform.padding;sc(he,he.transform.height-(Se.top||0),3,bn),sc(he,Se.bottom||0,3,ju),Do(he,Se.left||0,3,Oa),Do(he,he.transform.width-(Se.right||0),3,Ml);const Ue=he.transform.centerPoint;(function(Xe,Je,st,pt){go(Xe,Je-1,st-10,2,20,pt),go(Xe,Je-10,st-1,20,2,pt)})(he,Ue.x,he.transform.height-Ue.y,qs)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(o){if(!this.style||!this.style.map||!this.style.map.terrain)return;const f=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let w=this.terrainFacilitator.dirty;w||(w=o?!s.c9(f,y):!s.ca(f,y)),w||(w=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),w&&(s.cb(f,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(T,L){const O=T.context,H=O.gl,te=T.transform,ne=_n.unblended,me=new di(H.LEQUAL,di.ReadWrite,[0,1]),he=L.sourceCache.getRenderableTiles(),Se=T.useProgram("terrainDepth");O.bindFramebuffer.set(L.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:s.bf.transparent,depth:1});for(const Ue of he){const Xe=L.getTerrainMesh(Ue.tileID),Je=L.getTerrainData(Ue.tileID),st=te.getProjectionData({overscaledTileID:Ue.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),pt={u_ele_delta:L.getMeshFrameDelta(te.zoom)};Se.draw(O,H.TRIANGLES,me,bi.disabled,ne,Ki.backCCW,pt,Je,st,"terrain",Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain),function(T,L){const O=T.context,H=O.gl,te=T.transform,ne=_n.unblended,me=new di(H.LEQUAL,di.ReadWrite,[0,1]),he=L.getCoordsTexture(),Se=L.sourceCache.getRenderableTiles(),Ue=T.useProgram("terrainCoords");O.bindFramebuffer.set(L.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:s.bf.transparent,depth:1}),L.coordsIndex=[];for(const Xe of Se){const Je=L.getTerrainMesh(Xe.tileID),st=L.getTerrainData(Xe.tileID);O.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,he.texture);const pt={u_terrain_coords_id:(255-L.coordsIndex.length)/255,u_texture:0,u_ele_delta:L.getMeshFrameDelta(te.zoom)},xt=te.getProjectionData({overscaledTileID:Xe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ue.draw(O,H.TRIANGLES,me,bi.disabled,ne,Ki.backCCW,pt,st,xt,"terrain",Je.vertexBuffer,Je.indexBuffer,Je.segments),L.coordsIndex.push(Xe.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain))}renderLayer(o,f,y,w,T){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(w||[]).length)&&(this.id=y.id,s.cc(y)?function(L,O,H,te,ne,me){if(L.renderPass!=="translucent")return;const{isRenderingToTexture:he}=me,Se=bi.disabled,Ue=L.colorModeForRenderPass();(H._unevaluatedLayout.hasValue("text-variable-anchor")||H._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Xe,Je,st,pt,xt,mt,wt,St,yt){const Lt=Je.transform,rr=Je.style.map.terrain,$t=xt==="map",Zt=mt==="map";for(const Yt of Xe){const wr=pt.getTile(Yt),Br=wr.getBucket(st);if(!Br||!Br.text||!Br.text.segments.get().length)continue;const pr=s.an(Br.textSizeData,Lt.zoom),Kr=s.aC(wr,1,Je.transform.zoom),Ci=mi($t,Je.transform,Kr),En=st.layout.get("icon-text-fit")!=="none"&&Br.hasIconData();if(pr){const Nn=Math.pow(2,Lt.zoom-wr.tileID.overscaledZ),Mn=rr?(ss,as)=>rr.getElevation(Yt,ss,as):null;fu(Br,$t,Zt,yt,Lt,Ci,Nn,pr,En,s.aD(Lt,wr,wt,St),Yt.toUnwrapped(),Mn)}}}(te,L,H,O,H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),ne),H.paint.get("icon-opacity").constantOr(1)!==0&&po(L,O,H,te,!1,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),H.layout.get("icon-rotation-alignment"),H.layout.get("icon-pitch-alignment"),H.layout.get("icon-keep-upright"),Se,Ue,he),H.paint.get("text-opacity").constantOr(1)!==0&&po(L,O,H,te,!0,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.layout.get("text-keep-upright"),Se,Ue,he),O.map.showCollisionBoxes&&(Lh(L,O,H,te,!0),Lh(L,O,H,te,!1))}(o,f,y,w,this.style.placement.variableOffsets,T):s.cd(y)?function(L,O,H,te,ne){if(L.renderPass!=="translucent")return;const{isRenderingToTexture:me}=ne,he=H.paint.get("circle-opacity"),Se=H.paint.get("circle-stroke-width"),Ue=H.paint.get("circle-stroke-opacity"),Xe=!H.layout.get("circle-sort-key").isConstant();if(he.constantOr(1)===0&&(Se.constantOr(1)===0||Ue.constantOr(1)===0))return;const Je=L.context,st=Je.gl,pt=L.transform,xt=L.getDepthModeForSublayer(0,di.ReadOnly),mt=bi.disabled,wt=L.colorModeForRenderPass(),St=[],yt=pt.getCircleRadiusCorrection();for(let Lt=0;Lt<te.length;Lt++){const rr=te[Lt],$t=O.getTile(rr),Zt=$t.getBucket(H);if(!Zt)continue;const Yt=H.paint.get("circle-translate"),wr=H.paint.get("circle-translate-anchor"),Br=s.aD(pt,$t,Yt,wr),pr=Zt.programConfigurations.get(H.id),Kr=L.useProgram("circle",pr),Ci=Zt.layoutVertexBuffer,En=Zt.indexBuffer,Nn=L.style.map.terrain&&L.style.map.terrain.getTerrainData(rr),Mn={programConfiguration:pr,program:Kr,layoutVertexBuffer:Ci,indexBuffer:En,uniformValues:lo(L,$t,H,Br,yt),terrainData:Nn,projectionData:pt.getProjectionData({overscaledTileID:rr,applyGlobeMatrix:!me,applyTerrainMatrix:!0})};if(Xe){const ss=Zt.segments.get();for(const as of ss)St.push({segments:new s.aM([as]),sortKey:as.sortKey,state:Mn})}else St.push({segments:Zt.segments,sortKey:0,state:Mn})}Xe&&St.sort((Lt,rr)=>Lt.sortKey-rr.sortKey);for(const Lt of St){const{programConfiguration:rr,program:$t,layoutVertexBuffer:Zt,indexBuffer:Yt,uniformValues:wr,terrainData:Br,projectionData:pr}=Lt.state;$t.draw(Je,st.TRIANGLES,xt,mt,wt,Ki.backCCW,wr,Br,pr,H.id,Zt,Yt,Lt.segments,H.paint,L.transform.zoom,rr)}}(o,f,y,w,T):s.ce(y)?function(L,O,H,te,ne){if(H.paint.get("heatmap-opacity")===0)return;const me=L.context,{isRenderingToTexture:he,isRenderingGlobe:Se}=ne;if(L.style.map.terrain){for(const Ue of te){const Xe=O.getTile(Ue);O.hasRenderableParent(Ue)||(L.renderPass==="offscreen"?Tc(L,Xe,H,Ue,Se):L.renderPass==="translucent"&&Nl(L,H,Ue,he,Se))}me.viewport.set([0,0,L.width,L.height])}else L.renderPass==="offscreen"?function(Ue,Xe,Je,st){const pt=Ue.context,xt=pt.gl,mt=Ue.transform,wt=bi.disabled,St=new _n([xt.ONE,xt.ONE],s.bf.transparent,[!0,!0,!0,!0]);(function(yt,Lt,rr){const $t=yt.gl;yt.activeTexture.set($t.TEXTURE1),yt.viewport.set([0,0,Lt.width/4,Lt.height/4]);let Zt=rr.heatmapFbos.get(s.c3);Zt?($t.bindTexture($t.TEXTURE_2D,Zt.colorAttachment.get()),yt.bindFramebuffer.set(Zt.framebuffer)):(Zt=sl(yt,Lt.width/4,Lt.height/4),rr.heatmapFbos.set(s.c3,Zt))})(pt,Ue,Je),pt.clear({color:s.bf.transparent});for(let yt=0;yt<st.length;yt++){const Lt=st[yt];if(Xe.hasRenderableParent(Lt))continue;const rr=Xe.getTile(Lt),$t=rr.getBucket(Je);if(!$t)continue;const Zt=$t.programConfigurations.get(Je.id),Yt=Ue.useProgram("heatmap",Zt),wr=mt.getProjectionData({overscaledTileID:Lt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Br=mt.getCircleRadiusCorrection();Yt.draw(pt,xt.TRIANGLES,di.disabled,wt,St,Ki.backCCW,Cl(rr,mt.zoom,Je.paint.get("heatmap-intensity"),Br),null,wr,Je.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,Je.paint,mt.zoom,Zt)}pt.viewport.set([0,0,Ue.width,Ue.height])}(L,O,H,te):L.renderPass==="translucent"&&function(Ue,Xe){const Je=Ue.context,st=Je.gl;Je.setColorMode(Ue.colorModeForRenderPass());const pt=Xe.heatmapFbos.get(s.c3);pt&&(Je.activeTexture.set(st.TEXTURE0),st.bindTexture(st.TEXTURE_2D,pt.colorAttachment.get()),Je.activeTexture.set(st.TEXTURE1),al(Je,Xe).bind(st.LINEAR,st.CLAMP_TO_EDGE),Ue.useProgram("heatmapTexture").draw(Je,st.TRIANGLES,di.disabled,bi.disabled,Ue.colorModeForRenderPass(),Ki.disabled,Nu(Ue,Xe,0,1),null,null,Xe.id,Ue.viewportBuffer,Ue.quadTriangleIndexBuffer,Ue.viewportSegments,Xe.paint,Ue.transform.zoom))}(L,H)}(o,f,y,w,T):s.cf(y)?function(L,O,H,te,ne){if(L.renderPass!=="translucent")return;const{isRenderingToTexture:me}=ne,he=H.paint.get("line-opacity"),Se=H.paint.get("line-width");if(he.constantOr(1)===0||Se.constantOr(1)===0)return;const Ue=L.getDepthModeForSublayer(0,di.ReadOnly),Xe=L.colorModeForRenderPass(),Je=H.paint.get("line-dasharray"),st=Je.constantOr(1),pt=H.paint.get("line-pattern"),xt=pt.constantOr(1),mt=H.paint.get("line-gradient"),wt=H.getCrossfadeParameters();let St;St=xt?"linePattern":st&&mt?"lineGradientSDF":st?"lineSDF":mt?"lineGradient":"line";const yt=L.context,Lt=yt.gl,rr=L.transform;let $t=!0;for(const Zt of te){const Yt=O.getTile(Zt);if(xt&&!Yt.patternsLoaded())continue;const wr=Yt.getBucket(H);if(!wr)continue;const Br=wr.programConfigurations.get(H.id),pr=L.context.program.get(),Kr=L.useProgram(St,Br),Ci=$t||Kr.program!==pr,En=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Zt),Nn=pt.constantOr(null),Mn=Je&&Je.constantOr(null);if(Nn&&Yt.imageAtlas){const Sa=Yt.imageAtlas,ia=Sa.patternPositions[Nn.to.toString()],na=Sa.patternPositions[Nn.from.toString()];ia&&na&&Br.setConstantPatternPositions(ia,na)}else if(Mn){const Sa=H.layout.get("line-cap")==="round",ia=L.lineAtlas.getDash(Mn.to,Sa),na=L.lineAtlas.getDash(Mn.from,Sa);Br.setConstantDashPositions(ia,na)}const ss=rr.getProjectionData({overscaledTileID:Zt,applyGlobeMatrix:!me,applyTerrainMatrix:!0}),as=rr.getPixelScale();let tn;xt?(tn=co(L,Yt,H,as,wt),gA(yt,Lt,Yt,Br,wt)):st&&mt?(tn=uo(L,Yt,H,as,wt,wr.lineClipsArray.length),Cs(L,O,yt,Lt,H,wr,Zt,Br,wt)):st?(tn=$a(L,Yt,H,as,wt),du(L,yt,Lt,Br,Ci,wt)):mt?(tn=Bc(L,Yt,H,as,wr.lineClipsArray.length),ma(L,O,yt,Lt,H,wr,Zt)):tn=wc(L,Yt,H,as);const us=L.stencilModeForClipping(Zt);Kr.draw(yt,Lt.TRIANGLES,Ue,us,Xe,Ki.disabled,tn,En,ss,H.id,wr.layoutVertexBuffer,wr.indexBuffer,wr.segments,H.paint,L.transform.zoom,Br,wr.layoutVertexBuffer2),$t=!1}}(o,f,y,w,T):s.cg(y)?function(L,O,H,te,ne){const me=H.paint.get("fill-color"),he=H.paint.get("fill-opacity");if(he.constantOr(1)===0)return;const{isRenderingToTexture:Se}=ne,Ue=L.colorModeForRenderPass(),Xe=H.paint.get("fill-pattern"),Je=L.opaquePassEnabledForLayer()&&!Xe.constantOr(1)&&me.constantOr(s.bf.transparent).a===1&&he.constantOr(0)===1?"opaque":"translucent";if(L.renderPass===Je){const st=L.getDepthModeForSublayer(1,L.renderPass==="opaque"?di.ReadWrite:di.ReadOnly);nc(L,O,H,te,st,Ue,!1,Se)}if(L.renderPass==="translucent"&&H.paint.get("fill-antialias")){const st=L.getDepthModeForSublayer(H.getPaintProperty("fill-outline-color")?2:0,di.ReadOnly);nc(L,O,H,te,st,Ue,!0,Se)}}(o,f,y,w,T):s.ch(y)?function(L,O,H,te,ne){const me=H.paint.get("fill-extrusion-opacity");if(me===0)return;const{isRenderingToTexture:he}=ne;if(L.renderPass==="translucent"){const Se=new di(L.context.gl.LEQUAL,di.ReadWrite,L.depthRangeFor3D);if(me!==1||H.paint.get("fill-extrusion-pattern").constantOr(1))ol(L,O,H,te,Se,bi.disabled,_n.disabled,he),ol(L,O,H,te,Se,L.stencilModeFor3D(),L.colorModeForRenderPass(),he);else{const Ue=L.colorModeForRenderPass();ol(L,O,H,te,Se,bi.disabled,Ue,he)}}}(o,f,y,w,T):s.ci(y)?function(L,O,H,te,ne){if(L.renderPass!=="offscreen"&&L.renderPass!=="translucent")return;const{isRenderingToTexture:me}=ne,he=L.context,Se=L.style.projection.useSubdivision,Ue=L.getDepthModeForSublayer(0,di.ReadOnly),Xe=L.colorModeForRenderPass();if(L.renderPass==="offscreen")(function(Je,st,pt,xt,mt,wt,St){const yt=Je.context,Lt=yt.gl;for(const rr of pt){const $t=st.getTile(rr),Zt=$t.dem;if(!Zt||!Zt.data||!$t.needsHillshadePrepare)continue;const Yt=Zt.dim,wr=Zt.stride,Br=Zt.getPixels();if(yt.activeTexture.set(Lt.TEXTURE1),yt.pixelStoreUnpackPremultiplyAlpha.set(!1),$t.demTexture=$t.demTexture||Je.getTileTexture(wr),$t.demTexture){const Kr=$t.demTexture;Kr.update(Br,{premultiply:!1}),Kr.bind(Lt.NEAREST,Lt.CLAMP_TO_EDGE)}else $t.demTexture=new s.T(yt,Br,Lt.RGBA,{premultiply:!1}),$t.demTexture.bind(Lt.NEAREST,Lt.CLAMP_TO_EDGE);yt.activeTexture.set(Lt.TEXTURE0);let pr=$t.fbo;if(!pr){const Kr=new s.T(yt,{width:Yt,height:Yt,data:null},Lt.RGBA);Kr.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE),pr=$t.fbo=yt.createFramebuffer(Yt,Yt,!0,!1),pr.colorAttachment.set(Kr.texture)}yt.bindFramebuffer.set(pr.framebuffer),yt.viewport.set([0,0,Yt,Yt]),Je.useProgram("hillshadePrepare").draw(yt,Lt.TRIANGLES,mt,wt,St,Ki.disabled,Ba($t.tileID,Zt),null,null,xt.id,Je.rasterBoundsBuffer,Je.quadTriangleIndexBuffer,Je.rasterBoundsSegments),$t.needsHillshadePrepare=!1}})(L,O,te,H,Ue,bi.disabled,Xe),he.viewport.set([0,0,L.width,L.height]);else if(L.renderPass==="translucent")if(Se){const[Je,st,pt]=L.stencilConfigForOverlapTwoPass(te);Mh(L,O,H,pt,Je,Ue,Xe,!1,me),Mh(L,O,H,pt,st,Ue,Xe,!0,me)}else{const[Je,st]=L.getStencilConfigForOverlapAndUpdateStencilID(te);Mh(L,O,H,st,Je,Ue,Xe,!1,me)}}(o,f,y,w,T):s.cj(y)?function(L,O,H,te,ne){if(L.renderPass!=="translucent"||!te.length)return;const{isRenderingToTexture:me}=ne,he=L.style.projection.useSubdivision,Se=L.getDepthModeForSublayer(0,di.ReadOnly),Ue=L.colorModeForRenderPass();if(he){const[Xe,Je,st]=L.stencilConfigForOverlapTwoPass(te);Il(L,O,H,st,Xe,Se,Ue,!1,me),Il(L,O,H,st,Je,Se,Ue,!0,me)}else{const[Xe,Je]=L.getStencilConfigForOverlapAndUpdateStencilID(te);Il(L,O,H,Je,Xe,Se,Ue,!1,me)}}(o,f,y,w,T):s.bK(y)?function(L,O,H,te,ne){if(L.renderPass!=="translucent"||H.paint.get("raster-opacity")===0||!te.length)return;const{isRenderingToTexture:me}=ne,he=O.getSource(),Se=L.style.projection.useSubdivision;if(he instanceof or)Ll(L,O,H,te,null,!1,!1,he.tileCoords,he.flippedWindingOrder,me);else if(Se){const[Ue,Xe,Je]=L.stencilConfigForOverlapTwoPass(te);Ll(L,O,H,Je,Ue,!1,!0,Ph,!1,me),Ll(L,O,H,Je,Xe,!0,!0,Ph,!1,me)}else{const[Ue,Xe]=L.getStencilConfigForOverlapAndUpdateStencilID(te);Ll(L,O,H,Xe,Ue,!1,!0,Ph,!1,me)}}(o,f,y,w,T):s.ck(y)?function(L,O,H,te,ne){const me=H.paint.get("background-color"),he=H.paint.get("background-opacity");if(he===0)return;const{isRenderingToTexture:Se}=ne,Ue=L.context,Xe=Ue.gl,Je=L.style.projection,st=L.transform,pt=st.tileSize,xt=H.paint.get("background-pattern");if(L.isPatternMissing(xt))return;const mt=!xt&&me.a===1&&he===1&&L.opaquePassEnabledForLayer()?"opaque":"translucent";if(L.renderPass!==mt)return;const wt=bi.disabled,St=L.getDepthModeForSublayer(0,mt==="opaque"?di.ReadWrite:di.ReadOnly),yt=L.colorModeForRenderPass(),Lt=L.useProgram(xt?"backgroundPattern":"background"),rr=te||ei(st,{tileSize:pt,terrain:L.style.map.terrain});xt&&(Ue.activeTexture.set(Xe.TEXTURE0),L.imageManager.bind(L.context));const $t=H.getCrossfadeParameters();for(const Zt of rr){const Yt=st.getProjectionData({overscaledTileID:Zt,applyGlobeMatrix:!Se,applyTerrainMatrix:!0}),wr=xt?Xa(he,L,xt,{tileID:Zt,tileSize:pt},$t):ws(he,me),Br=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Zt),pr=Je.getMeshFromTileID(Ue,Zt.canonical,!1,!0,"raster");Lt.draw(Ue,Xe.TRIANGLES,St,wt,yt,Ki.backCCW,wr,Br,Yt,H.id,pr.vertexBuffer,pr.indexBuffer,pr.segments)}}(o,0,y,w,T):s.cl(y)&&function(L,O,H,te){const{isRenderingGlobe:ne}=te,me=L.context,he=H.implementation,Se=L.style.projection,Ue=L.transform,Xe=Ue.getProjectionDataForCustomLayer(ne),Je={farZ:Ue.farZ,nearZ:Ue.nearZ,fov:Ue.fov*Math.PI/180,modelViewProjectionMatrix:Ue.modelViewProjectionMatrix,projectionMatrix:Ue.projectionMatrix,shaderData:{variantName:Se.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Se.shaderPreludeCode.vertexSource}`,define:Se.shaderDefine},defaultProjectionData:Xe},st=he.renderingMode?he.renderingMode:"2d";if(L.renderPass==="offscreen"){const pt=he.prerender;pt&&(L.setCustomLayerDefaults(),me.setColorMode(L.colorModeForRenderPass()),pt.call(he,me.gl,Je),me.setDirty(),L.setBaseState())}else if(L.renderPass==="translucent"){L.setCustomLayerDefaults(),me.setColorMode(L.colorModeForRenderPass()),me.setStencilMode(bi.disabled);const pt=st==="3d"?L.getDepthModeFor3D():L.getDepthModeForSublayer(0,di.ReadOnly);me.setDepthMode(pt),he.render(me.gl,Je),me.setDirty(),L.setBaseState(),me.bindFramebuffer.set(null)}}(o,0,y,T))}saveTileTexture(o){const f=this._tileTextures[o.size[0]];f?f.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const f=this._tileTextures[o];return f&&f.length>0?f.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const f=this.imageManager.getPattern(o.from.toString()),y=this.imageManager.getPattern(o.to.toString());return!f||!y}useProgram(o,f,y=!1,w=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,L=this.style.projection,O=y?ya.projectionMercator:L.shaderPreludeCode,H=y?el:L.shaderDefine,te=o+(f?f.cacheKey:"")+`/${y?Ti:L.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(w?`/${w.join("/")}`:"");return this.cache[te]||(this.cache[te]=new Bl(this.context,ya[o],f,lu[o],this._showOverdrawInspector,T,O,H,w)),this.cache[te]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:o,drawingBufferHeight:f}=this.context.gl;return this.width!==o||this.height!==f}}function Pl(S,o){let f,y=!1,w=null,T=null;const L=()=>{w=null,y&&(S.apply(T,f),w=setTimeout(L,o),y=!1)};return(...O)=>(y=!0,T=this,f=O,w||L(),w)}class Ks{constructor(o){this._getCurrentHash=()=>{const f=window.location.hash.replace("#","");if(this._hashName){let y;return f.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(y=w)}),(y&&y[1]||"").split("/")}return f.split("/")},this._onHashChange=()=>{const f=this._getCurrentHash();if(!this._isValidHash(f))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:y,pitch:+(f[4]||0)}),!0},this._updateHashUnthrottled=()=>{const f=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,f)},this._removeHash=()=>{const f=this._getCurrentHash();if(f.length===0)return;const y=f.join("/");let w=y;w.split("&").length>0&&(w=w.split("&")[0]),this._hashName&&(w=`${this._hashName}=${y}`);let T=window.location.hash.replace(w,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let L=window.location.href.replace(/(#.+)?$/,T);L=L.replace("&&","&"),window.history.replaceState(window.history.state,null,L)},this._updateHash=Pl(this._updateHashUnthrottled,300),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(o){const f=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,w=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,w),L=Math.round(f.lng*T)/T,O=Math.round(f.lat*T)/T,H=this._map.getBearing(),te=this._map.getPitch();let ne="";if(ne+=o?`/${L}/${O}/${y}`:`${y}/${O}/${L}`,(H||te)&&(ne+="/"+Math.round(10*H)/10),te&&(ne+=`/${Math.round(te)}`),this._hashName){const me=this._hashName;let he=!1;const Se=window.location.hash.slice(1).split("&").map(Ue=>{const Xe=Ue.split("=")[0];return Xe===me?(he=!0,`${Xe}=${ne}`):Ue}).filter(Ue=>Ue);return he||Se.push(`${me}=${ne}`),`#${Se.join("&")}`}return`#${ne}`}_isValidHash(o){if(o.length<3||o.some(isNaN))return!1;try{new s.S(+o[2],+o[1])}catch{return!1}const f=+o[0],y=+(o[3]||0),w=+(o[4]||0);return f>=this._map.getMinZoom()&&f<=this._map.getMaxZoom()&&y>=-180&&y<=180&&w>=this._map.getMinPitch()&&w<=this._map.getMaxPitch()}}const ll={linearity:.3,easing:s.cm(0,0,.3,1)},Fc=s.e({deceleration:2500,maxSpeed:1400},ll),Bd=s.e({deceleration:20,maxSpeed:1400},ll),Lf=s.e({deceleration:1e3,maxSpeed:360},ll),Cd=s.e({deceleration:1e3,maxSpeed:90},ll),ta=s.e({deceleration:1e3,maxSpeed:360},ll);class ZA{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:N.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,f=N.now();for(;o.length>0&&f-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)f.zoom+=T.zoomDelta||0,f.bearing+=T.bearingDelta||0,f.pitch+=T.pitchDelta||0,f.roll+=T.rollDelta||0,T.panDelta&&f.pan._add(T.panDelta),T.around&&(f.around=T.around),T.pinchAround&&(f.pinchAround=T.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(f.pan.mag()){const T=Nc(f.pan.mag(),y,s.e({},Fc,o||{})),L=f.pan.mult(T.amount/f.pan.mag()),O=this._map.cameraHelper.handlePanInertia(L,this._map.transform);w.center=O.easingCenter,w.offset=O.easingOffset,kc(w,T)}if(f.zoom){const T=Nc(f.zoom,y,Bd);w.zoom=this._map.transform.zoom+T.amount,kc(w,T)}if(f.bearing){const T=Nc(f.bearing,y,Lf);w.bearing=this._map.transform.bearing+s.ah(T.amount,-179,179),kc(w,T)}if(f.pitch){const T=Nc(f.pitch,y,Cd);w.pitch=this._map.transform.pitch+T.amount,kc(w,T)}if(f.roll){const T=Nc(f.roll,y,ta);w.roll=this._map.transform.roll+s.ah(T.amount,-179,179),kc(w,T)}if(w.zoom||w.bearing){const T=f.pinchAround===void 0?f.around:f.pinchAround;w.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),s.e(w,{noMoveStart:!0})}}function kc(S,o){(!S.duration||S.duration<o.duration)&&(S.duration=o.duration,S.easing=o.easing)}function Nc(S,o,f){const{maxSpeed:y,linearity:w,deceleration:T}=f,L=s.ah(S*w/(o/1e3),-y,y),O=Math.abs(L)/(T*w);return{easing:f.easing,duration:1e3*O,amount:L*(O/2)}}class Ja extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,y,w={}){y=y instanceof MouseEvent?y:new MouseEvent(o,y);const T=B.mousePos(f.getCanvas(),y),L=f.unproject(T);super(o,s.e({point:T,lngLat:L,originalEvent:y},w)),this._defaultPrevented=!1,this.target=f}}class Ro extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,y){const w=o==="touchend"?y.changedTouches:y.touches,T=B.touchPos(f.getCanvasContainer(),w),L=T.map(H=>f.unproject(H)),O=T.reduce((H,te,ne,me)=>H.add(te.div(me.length)),new s.P(0,0));super(o,{points:T,point:O,lngLats:L,lngLat:f.unproject(O),originalEvent:y}),this._defaultPrevented=!1}}class ac extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,y){super(o,{originalEvent:y}),this._defaultPrevented=!1}}class Dl{constructor(o,f){this._map=o,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new ac(o.type,this._map,o))}mousedown(o,f){return this._mousedownPos=f,this._firePreventable(new Ja(o.type,this._map,o))}mouseup(o){this._map.fire(new Ja(o.type,this._map,o))}click(o,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new Ja(o.type,this._map,o))}dblclick(o){return this._firePreventable(new Ja(o.type,this._map,o))}mouseover(o){this._map.fire(new Ja(o.type,this._map,o))}mouseout(o){this._map.fire(new Ja(o.type,this._map,o))}touchstart(o){return this._firePreventable(new Ro(o.type,this._map,o))}touchmove(o){this._map.fire(new Ro(o.type,this._map,o))}touchend(o){this._map.fire(new Ro(o.type,this._map,o))}touchcancel(o){this._map.fire(new Ro(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rl{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new Ja(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ja("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new Ja(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xh{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.screenPointToLocation(s.P.convert(o),this._map.terrain)}}class U{constructor(o,f){this._map=o,this._tr=new xh(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,f){this.isEnabled()&&o.shiftKey&&o.button===0&&(B.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(o,f){if(!this._active)return;const y=f;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=y,this._box||(this._box=B.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const T=Math.min(w.x,y.x),L=Math.max(w.x,y.x),O=Math.min(w.y,y.y),H=Math.max(w.y,y.y);B.setTransform(this._box,`translate(${T}px,${O}px)`),this._box.style.width=L-T+"px",this._box.style.height=H-O+"px"}mouseupWindow(o,f){if(!this._active||o.button!==0)return;const y=this._startPos,w=f;if(this.reset(),B.suppressClick(),y.x!==w.x||y.y!==w.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:o})),{cameraAnimation:T=>T.fitScreenCoordinates(y,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(B.remove(this._box),this._box=null),B.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,f){return this._map.fire(new s.l(o,{originalEvent:f}))}}function z(S,o){if(S.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${S.length}, points ${o.length}`);const f={};for(let y=0;y<S.length;y++)f[S[y].identifier]=o[y];return f}class ie{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,f,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),y.length===this.numTouches&&(this.centroid=function(w){const T=new s.P(0,0);for(const L of w)T._add(L);return T.div(w.length)}(f),this.touches=z(y,f)))}touchmove(o,f,y){if(this.aborted||!this.centroid)return;const w=z(y,f);for(const T in this.touches){const L=w[T];(!L||L.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(o,f,y){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class Ae{constructor(o){this.singleTap=new ie(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,f,y){this.singleTap.touchstart(o,f,y)}touchmove(o,f,y){this.singleTap.touchmove(o,f,y)}touchend(o,f,y){const w=this.singleTap.touchend(o,f,y);if(w){const T=o.timeStamp-this.lastTime<500,L=!this.lastTap||this.lastTap.dist(w)<30;if(T&&L||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class Ie{constructor(o){this._tr=new xh(o),this._zoomIn=new Ae({numTouches:1,numTaps:2}),this._zoomOut=new Ae({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,f,y){this._zoomIn.touchstart(o,f,y),this._zoomOut.touchstart(o,f,y)}touchmove(o,f,y){this._zoomIn.touchmove(o,f,y),this._zoomOut.touchmove(o,f,y)}touchend(o,f,y){const w=this._zoomIn.touchend(o,f,y),T=this._zoomOut.touchend(o,f,y),L=this._tr;return w?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:L.zoom+1,around:L.unproject(w)},{originalEvent:o})}):T?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:L.zoom-1,around:L.unproject(T)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qe{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const f=this._moveFunction(...o);if(f.bearingDelta||f.pitchDelta||f.rollDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(o,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=Array.isArray(f)?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,f){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const w=Array.isArray(f)?f[0]:f;return!this._moved&&w.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(y,w))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&B.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const qe=0,We=2,et={[qe]:1,[We]:2};class Ge{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const f=B.mouseButton(o);this._eventButton=f}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(f,y){const w=et[y];return f.buttons===void 0||(f.buttons&w)!==w}(o,this._eventButton)}isValidEndEvent(o){return B.mouseButton(o)===this._eventButton}}class Mt{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}class tr{constructor(o=new Ge({checkCorrectEvent:()=>!0}),f=new Mt){this.mouseMoveStateManager=o,this.oneFingerTouchMoveStateManager=f}_executeRelevantHandler(o,f,y){return o instanceof MouseEvent?f(o):typeof TouchEvent<"u"&&o instanceof TouchEvent?y(o):void 0}startMove(o){this._executeRelevantHandler(o,f=>this.mouseMoveStateManager.startMove(f),f=>this.oneFingerTouchMoveStateManager.startMove(f))}endMove(o){this._executeRelevantHandler(o,f=>this.mouseMoveStateManager.endMove(f),f=>this.oneFingerTouchMoveStateManager.endMove(f))}isValidStartEvent(o){return this._executeRelevantHandler(o,f=>this.mouseMoveStateManager.isValidStartEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidStartEvent(f))}isValidMoveEvent(o){return this._executeRelevantHandler(o,f=>this.mouseMoveStateManager.isValidMoveEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(f))}isValidEndEvent(o){return this._executeRelevantHandler(o,f=>this.mouseMoveStateManager.isValidEndEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidEndEvent(f))}}const ut=S=>{S.mousedown=S.dragStart,S.mousemoveWindow=S.dragMove,S.mouseup=S.dragEnd,S.contextmenu=o=>{o.preventDefault()}};class Ot{constructor(o,f){this._clickTolerance=o.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(o){return o<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(o,f,y){return this._calculateTransform(o,f,y)}touchmove(o,f,y){if(this._active){if(!this._shouldBePrevented(y.length))return o.preventDefault(),this._calculateTransform(o,f,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",o)}}touchend(o,f,y){this._calculateTransform(o,f,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,f,y){y.length>0&&(this._active=!0);const w=z(y,f),T=new s.P(0,0),L=new s.P(0,0);let O=0;for(const te in w){const ne=w[te],me=this._touches[te];me&&(T._add(ne),L._add(ne.sub(me)),O++,w[te]=ne)}if(this._touches=w,this._shouldBePrevented(O)||!L.mag())return;const H=L.div(O);return this._sum._add(H),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(O),panDelta:H}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,f,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([f[0],f[1]]))}touchmove(o,f,y){if(!this._firstTwoTouches)return;o.preventDefault();const[w,T]=this._firstTwoTouches,L=cr(y,f,w),O=cr(y,f,T);if(!L||!O)return;const H=this._aroundCenter?null:L.add(O).div(2);return this._move([L,O],H,o)}touchend(o,f,y){if(!this._firstTwoTouches)return;const[w,T]=this._firstTwoTouches,L=cr(y,f,w),O=cr(y,f,T);L&&O||(this._active&&B.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function cr(S,o,f){for(let y=0;y<S.length;y++)if(S[y].identifier===f)return o[y]}function Rt(S,o){return Math.log(S/o)/Math.LN2}class Ar extends Kt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,f){const y=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Rt(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Rt(this._distance,y),pinchAround:f}}}function dr(S,o){return 180*S.angleWith(o)/Math.PI}class Er extends Kt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,f,y){const w=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:dr(this._vector,w),pinchAround:f}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const f=25/(Math.PI*this._minDiameter)*360,y=dr(o,this._startVector);return Math.abs(y)<f}}function yr(S){return Math.abs(S.y)>Math.abs(S.x)}class Ai extends Kt{constructor(o){super(),this._currentTouchCount=0,this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,f,y){super.touchstart(o,f,y),this._currentTouchCount=y.length}_start(o){this._lastPoints=o,yr(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,f,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=o[0].sub(this._lastPoints[0]),T=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,T,y.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(w.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(o,f,y){if(this._valid!==void 0)return this._valid;const w=o.mag()>=2,T=f.mag()>=2;if(!w&&!T)return;if(!w||!T)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const L=o.y>0==f.y>0;return yr(o)&&yr(f)&&L}}const ri={panStep:100,bearingStep:15,pitchStep:10};class ji{constructor(o){this._tr=new xh(o);const f=ri;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let f=0,y=0,w=0,T=0,L=0;switch(o.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:o.shiftKey?y=-1:(o.preventDefault(),T=-1);break;case 39:o.shiftKey?y=1:(o.preventDefault(),T=1);break;case 38:o.shiftKey?w=1:(o.preventDefault(),L=-1);break;case 40:o.shiftKey?w=-1:(o.preventDefault(),L=1);break;default:return}return this._rotationDisabled&&(y=0,w=0),{cameraAnimation:O=>{const H=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:ni,zoom:f?Math.round(H.zoom)+f*(o.shiftKey?2:1):H.zoom,bearing:H.bearing+y*this._bearingStep,pitch:H.pitch+w*this._pitchStep,offset:[-T*this._panStep,-L*this._panStep],center:H.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ni(S){return S*(2-S)}const cn=4.000244140625,Ws=1/450;class zi{constructor(o,f){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=o,this._tr=new xh(o),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ws}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(o){return!!this._map.cooperativeGestures.isEnabled()&&!(o.ctrlKey||this._map.cooperativeGestures.isBypassed(o))}wheel(o){if(!this.isEnabled())return;if(this._shouldBePrevented(o))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",o);let f=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const y=N.now(),w=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,f!==0&&f%cn==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(w*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),o.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=o,this._delta-=f,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=B.mousePos(this._map.getCanvas(),o),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(s.S.convert(y.center)):f,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const O=o.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=O),typeof this._targetZoom=="number"&&(this._targetZoom+=O)}if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>cn?this._wheelZoomRate:this._defaultZoomRate;let H=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&H!==0&&(H=1/H);const te=typeof this._targetZoom!="number"?o.scale:s.af(this._targetZoom);this._targetZoom=o.getConstrained(o.getCameraLngLat(),s.ak(te*H)).zoom,this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom!="number"?o.zoom:this._targetZoom,y=this._startZoom,w=this._easing;let T,L=!1;if(this._type==="wheel"&&y&&w){const O=N.now()-this._lastWheelEventTime,H=Math.min((O+5)/200,1),te=w(H);T=s.C.number(y,f,te),H<1?this._frameId||(this._frameId=!0):L=!0}else T=f,L=!0;return this._active=!0,L&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!L,zoomDelta:T-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let f=s.co;if(this._prevEase){const y=this._prevEase,w=(N.now()-y.start)/y.duration,T=y.easing(w+.01)-y.easing(w),L=.27/Math.sqrt(T*T+1e-4)*.01,O=Math.sqrt(.0729-L*L);f=s.cm(L,O,.25,1)}return this._prevEase={start:N.now(),duration:o,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class oi{constructor(o,f){this._clickZoom=o,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Or{constructor(o){this._tr=new xh(o),this.reset()}reset(){this._active=!1}dblclick(o,f){return o.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Li{constructor(){this._tap=new Ae({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,f,y){if(!this._swipePoint)if(this._tapTime){const w=f[0],T=o.timeStamp-this._tapTime<500,L=this._tapPoint.dist(w)<30;T&&L?y.length>0&&(this._swipePoint=w,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(o,f,y)}touchmove(o,f,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const w=f[0],T=w.y-this._swipePoint.y;return this._swipePoint=w,o.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(o,f,y)}touchend(o,f,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const w=this._tap.touchend(o,f,y);w&&(this._tapTime=o.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vi{constructor(o,f,y){this._el=o,this._mousePan=f,this._touchPan=y}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class qi{constructor(o,f,y,w){this._pitchWithRotate=o.pitchWithRotate,this._rollEnabled=o.rollEnabled,this._mouseRotate=f,this._mousePitch=y,this._mouseRoll=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class si{constructor(o,f,y,w){this._el=o,this._touchZoom=f,this._touchRotate=y,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Gi{constructor(o,f){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=o,this._options=f,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const o=this._map.getCanvasContainer();o.classList.add("maplibregl-cooperative-gestures"),this._container=B.create("div","maplibregl-cooperative-gesture-screen",o);let f=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(f=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=f,this._container.appendChild(w);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=y,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(B.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(o){return o[this._bypassKey]}notifyGestureBlocked(o,f){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:o,originalEvent:f})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const nn=S=>S.zoom||S.drag||S.roll||S.pitch||S.rotate;class is extends s.l{}function Ss(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta||S.rollDelta}class Rn{constructor(o,f){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,T)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const L=w.type==="renderFrame"?void 0:w,O={needsRenderFrame:!1},H={},te={};for(const{handlerName:he,handler:Se,allowed:Ue}of this._handlers){if(!Se.isEnabled())continue;let Xe;if(this._blockedByActive(te,Ue,he))Se.reset();else if(Se[T||w.type]){if(s.cp(w,T||w.type)){const Je=B.mousePos(this._map.getCanvas(),w);Xe=Se[T||w.type](w,Je)}else if(s.cq(w,T||w.type)){const Je=this._getMapTouches(w.touches),st=B.touchPos(this._map.getCanvas(),Je);Xe=Se[T||w.type](w,st,Je)}else s.cr(T||w.type)||(Xe=Se[T||w.type](w));this.mergeHandlerResult(O,H,Xe,he,L),Xe&&Xe.needsRenderFrame&&this._triggerRenderFrame()}(Xe||Se.isActive())&&(te[he]=Se)}const ne={};for(const he in this._previousActiveHandlers)te[he]||(ne[he]=L);this._previousActiveHandlers=te,(Object.keys(ne).length||Ss(O))&&(this._changes.push([O,H,ne]),this._triggerRenderFrame()),(Object.keys(te).length||Ss(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:me}=O;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ZA(o),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,T,L]of this._listeners)B.addEventListener(w,T,w===document?this.handleWindowEvent:this.handleEvent,L)}destroy(){for(const[o,f,y]of this._listeners)B.removeEventListener(o,f,o===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(o){const f=this._map,y=f.getCanvasContainer();this._add("mapEvent",new Dl(f,o));const w=f.boxZoom=new U(f,o);this._add("boxZoom",w),o.interactive&&o.boxZoom&&w.enable();const T=f.cooperativeGestures=new Gi(f,o.cooperativeGestures);this._add("cooperativeGestures",T),o.cooperativeGestures&&T.enable();const L=new Ie(f),O=new Or(f);f.doubleClickZoom=new oi(O,L),this._add("tapZoom",L),this._add("clickZoom",O),o.interactive&&o.doubleClickZoom&&f.doubleClickZoom.enable();const H=new Li;this._add("tapDragZoom",H);const te=f.touchPitch=new Ai(f);this._add("touchPitch",te),o.interactive&&o.touchPitch&&f.touchPitch.enable(o.touchPitch);const ne=()=>f.project(f.getCenter()),me=function({enable:mt,clickTolerance:wt,aroundCenter:St=!0,minPixelCenterThreshold:yt=100,rotateDegreesPerPixelMoved:Lt=.8},rr){const $t=new Ge({checkCorrectEvent:Zt=>B.mouseButton(Zt)===0&&Zt.ctrlKey||B.mouseButton(Zt)===2&&!Zt.ctrlKey});return new Qe({clickTolerance:wt,move:(Zt,Yt)=>{const wr=rr();if(St&&Math.abs(wr.y-Zt.y)>yt)return{bearingDelta:s.cn(new s.P(Zt.x,Yt.y),Yt,wr)};let Br=(Yt.x-Zt.x)*Lt;return St&&Yt.y<wr.y&&(Br=-Br),{bearingDelta:Br}},moveStateManager:$t,enable:mt,assignEvents:ut})}(o,ne),he=function({enable:mt,clickTolerance:wt,pitchDegreesPerPixelMoved:St=-.5}){const yt=new Ge({checkCorrectEvent:Lt=>B.mouseButton(Lt)===0&&Lt.ctrlKey||B.mouseButton(Lt)===2});return new Qe({clickTolerance:wt,move:(Lt,rr)=>({pitchDelta:(rr.y-Lt.y)*St}),moveStateManager:yt,enable:mt,assignEvents:ut})}(o),Se=function({enable:mt,clickTolerance:wt,rollDegreesPerPixelMoved:St=.3},yt){const Lt=new Ge({checkCorrectEvent:rr=>B.mouseButton(rr)===2&&rr.ctrlKey});return new Qe({clickTolerance:wt,move:(rr,$t)=>{const Zt=yt();let Yt=($t.x-rr.x)*St;return $t.y<Zt.y&&(Yt=-Yt),{rollDelta:Yt}},moveStateManager:Lt,enable:mt,assignEvents:ut})}(o,ne);f.dragRotate=new qi(o,me,he,Se),this._add("mouseRotate",me,["mousePitch"]),this._add("mousePitch",he,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Se,["mousePitch"]),o.interactive&&o.dragRotate&&f.dragRotate.enable();const Ue=function({enable:mt,clickTolerance:wt}){const St=new Ge({checkCorrectEvent:yt=>B.mouseButton(yt)===0&&!yt.ctrlKey});return new Qe({clickTolerance:wt,move:(yt,Lt)=>({around:Lt,panDelta:Lt.sub(yt)}),activateOnStart:!0,moveStateManager:St,enable:mt,assignEvents:ut})}(o),Xe=new Ot(o,f);f.dragPan=new Vi(y,Ue,Xe),this._add("mousePan",Ue),this._add("touchPan",Xe,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&f.dragPan.enable(o.dragPan);const Je=new Er,st=new Ar;f.touchZoomRotate=new si(y,st,Je,H),this._add("touchRotate",Je,["touchPan","touchZoom"]),this._add("touchZoom",st,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&f.touchZoomRotate.enable(o.touchZoomRotate);const pt=f.scrollZoom=new zi(f,()=>this._triggerRenderFrame());this._add("scrollZoom",pt,["mousePan"]),o.interactive&&o.scrollZoom&&f.scrollZoom.enable(o.scrollZoom);const xt=f.keyboard=new ji(f);this._add("keyboard",xt),o.interactive&&o.keyboard&&f.keyboard.enable(),this._add("blockableMapEvent",new Rl(f))}_add(o,f,y){this._handlers.push({handlerName:o,handler:f,allowed:y}),this._handlersById[o]=f}stop(o){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!nn(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,f,y){for(const w in o)if(w!==y&&(!f||f.indexOf(w)<0))return!0;return!1}_getMapTouches(o){const f=[];for(const y of o)this._el.contains(y.target)&&f.push(y);return f}mergeHandlerResult(o,f,y,w,T){if(!y)return;s.e(o,y);const L={handlerName:w,originalEvent:y.originalEvent||T};y.zoomDelta!==void 0&&(f.zoom=L),y.panDelta!==void 0&&(f.drag=L),y.rollDelta!==void 0&&(f.roll=L),y.pitchDelta!==void 0&&(f.pitch=L),y.bearingDelta!==void 0&&(f.rotate=L)}_applyChanges(){const o={},f={},y={};for(const[w,T,L]of this._changes)w.panDelta&&(o.panDelta=(o.panDelta||new s.P(0,0))._add(w.panDelta)),w.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+w.pitchDelta),w.rollDelta&&(o.rollDelta=(o.rollDelta||0)+w.rollDelta),w.around!==void 0&&(o.around=w.around),w.pinchAround!==void 0&&(o.pinchAround=w.pinchAround),w.noInertia&&(o.noInertia=w.noInertia),s.e(f,T),s.e(y,L);this._updateMapTransform(o,f,y),this._changes=[]}_updateMapTransform(o,f,y){const w=this._map,T=w._getTransformForUpdate(),L=w.terrain;if(!(Ss(o)||L&&this._terrainMovement))return this._fireEvents(f,y,!0);w._stop(!0);let{panDelta:O,zoomDelta:H,bearingDelta:te,pitchDelta:ne,rollDelta:me,around:he,pinchAround:Se}=o;Se!==void 0&&(he=Se),he=he||w.transform.centerPoint,L&&!T.isPointOnMapSurface(he)&&(he=T.centerPoint);const Ue={panDelta:O,zoomDelta:H,rollDelta:me,pitchDelta:ne,bearingDelta:te,around:he};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(he)&&(he=T.centerPoint);const Xe=he.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(O?he.sub(O):he);this._handleMapControls({terrain:L,tr:T,deltasForHelper:Ue,preZoomAroundLoc:Xe,combinedEventsInProgress:f,panDelta:O}),w._applyUpdatedTransform(T),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(f,y,!0)}_handleMapControls({terrain:o,tr:f,deltasForHelper:y,preZoomAroundLoc:w,combinedEventsInProgress:T,panDelta:L}){const O=this._map.cameraHelper;if(O.handleMapControlsRollPitchBearingZoom(y,f),o)return O.useGlobeControls?(this._terrainMovement||!T.drag&&!T.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void O.handleMapControlsPan(y,f,w)):this._terrainMovement||!T.drag&&!T.zoom?void(T.drag&&this._terrainMovement&&L?f.setCenter(f.screenPointToLocation(f.centerPoint.sub(L))):O.handleMapControlsPan(y,f,w)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void O.handleMapControlsPan(y,f,w));O.handleMapControlsPan(y,f,w)}_fireEvents(o,f,y){const w=nn(this._eventsInProgress),T=nn(o),L={};for(const me in o){const{originalEvent:he}=o[me];this._eventsInProgress[me]||(L[`${me}start`]=he),this._eventsInProgress[me]=o[me]}!w&&T&&this._fireEvent("movestart",T.originalEvent);for(const me in L)this._fireEvent(me,L[me]);T&&this._fireEvent("move",T.originalEvent);for(const me in o){const{originalEvent:he}=o[me];this._fireEvent(me,he)}const O={};let H;for(const me in this._eventsInProgress){const{handlerName:he,originalEvent:Se}=this._eventsInProgress[me];this._handlersById[he].isActive()||(delete this._eventsInProgress[me],H=f[he]||Se,O[`${me}end`]=H)}for(const me in O)this._fireEvent(me,O[me]);const te=nn(this._eventsInProgress),ne=(w||T)&&!te;if(ne&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const me=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&me.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(me)}if(y&&ne){this._updatingCamera=!0;const me=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),he=Se=>Se!==0&&-this._bearingSnap<Se&&Se<this._bearingSnap;!me||!me.essential&&N.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:H})),he(this._map.getBearing())&&this._map.resetNorth()):(he(me.bearing||this._map.getBearing())&&(me.bearing=0),me.freezeElevation=!0,this._map.easeTo(me,{originalEvent:H})),this._updatingCamera=!1}}_fireEvent(o,f){this._map.fire(new s.l(o,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new is("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ls extends s.E{constructor(o,f,y){super(),this._renderFrameCallback=()=>{const w=Math.min((N.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=y.bearingSnap,this.cameraHelper=f,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(o,f){o.apply(this.transform),this.transform=o,this.cameraHelper=f}getCenter(){return new s.S(this.transform.center.lng,this.transform.center.lat)}setCenter(o,f){return this.jumpTo({center:o},f)}getCenterElevation(){return this.transform.elevation}setCenterElevation(o,f){return this.jumpTo({elevation:o},f),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(o){this._centerClampedToGround=o}panBy(o,f,y){return o=s.P.convert(o).mult(-1),this.panTo(this.transform.center,s.e({offset:o},f),y)}panTo(o,f,y){return this.easeTo(s.e({center:o},f),y)}getZoom(){return this.transform.zoom}setZoom(o,f){return this.jumpTo({zoom:o},f),this}zoomTo(o,f,y){return this.easeTo(s.e({zoom:o},f),y)}zoomIn(o,f){return this.zoomTo(this.getZoom()+1,o,f),this}zoomOut(o,f){return this.zoomTo(this.getZoom()-1,o,f),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(o,f){return o!=this.transform.fov&&(this.transform.setFov(o),this.fire(new s.l("movestart",f)).fire(new s.l("move",f)).fire(new s.l("moveend",f))),this}getBearing(){return this.transform.bearing}setBearing(o,f){return this.jumpTo({bearing:o},f),this}getPadding(){return this.transform.padding}setPadding(o,f){return this.jumpTo({padding:o},f),this}rotateTo(o,f,y){return this.easeTo(s.e({bearing:o},f),y)}resetNorth(o,f){return this.rotateTo(0,s.e({duration:1e3},o),f),this}resetNorthPitch(o,f){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},o),f),this}snapToNorth(o,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,f):this}getPitch(){return this.transform.pitch}setPitch(o,f){return this.jumpTo({pitch:o},f),this}getRoll(){return this.transform.roll}setRoll(o,f){return this.jumpTo({roll:o},f),this}cameraForBounds(o,f){o=at.convert(o).adjustAntiMeridian();const y=f&&f.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),y,f)}_cameraForBoxAndBearing(o,f,y,w){const T={top:0,bottom:0,right:0,left:0};if(typeof(w=s.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const te=w.padding;w.padding={top:te,bottom:te,right:te,left:te}}const L=s.e(T,w.padding);w.padding=L;const O=this.transform,H=new at(o,f);return this.cameraHelper.cameraForBoxAndBearing(w,L,H,y,O)}fitBounds(o,f,y){return this._fitInternal(this.cameraForBounds(o,f),f,y)}fitScreenCoordinates(o,f,y,w,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(o)),this.transform.screenPointToLocation(s.P.convert(f)),y,w),w,T)}_fitInternal(o,f,y){return o?(delete(f=s.e(o,f)).padding,f.linear?this.easeTo(f,y):this.flyTo(f,y)):this}jumpTo(o,f){this.stop();const y=this._getTransformForUpdate();let w=!1,T=!1,L=!1;const O=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,o);const H=y.zoom!==O;return"elevation"in o&&y.elevation!==+o.elevation&&y.setElevation(+o.elevation),"bearing"in o&&y.bearing!==+o.bearing&&(w=!0,y.setBearing(+o.bearing)),"pitch"in o&&y.pitch!==+o.pitch&&(T=!0,y.setPitch(+o.pitch)),"roll"in o&&y.roll!==+o.roll&&(L=!0,y.setRoll(+o.roll)),o.padding==null||y.isPaddingEqual(o.padding)||y.setPadding(o.padding),this._applyUpdatedTransform(y),this.fire(new s.l("movestart",f)).fire(new s.l("move",f)),H&&this.fire(new s.l("zoomstart",f)).fire(new s.l("zoom",f)).fire(new s.l("zoomend",f)),w&&this.fire(new s.l("rotatestart",f)).fire(new s.l("rotate",f)).fire(new s.l("rotateend",f)),T&&this.fire(new s.l("pitchstart",f)).fire(new s.l("pitch",f)).fire(new s.l("pitchend",f)),L&&this.fire(new s.l("rollstart",f)).fire(new s.l("roll",f)).fire(new s.l("rollend",f)),this.fire(new s.l("moveend",f))}calculateCameraOptionsFromTo(o,f,y,w=0){const T=s.a1.fromLngLat(o,f),L=s.a1.fromLngLat(y,w),O=L.x-T.x,H=L.y-T.y,te=L.z-T.z,ne=Math.hypot(O,H,te);if(ne===0)throw new Error("Can't calculate camera options with same From and To");const me=Math.hypot(O,H),he=s.ak(this.transform.cameraToCenterDistance/ne/this.transform.tileSize),Se=180*Math.atan2(O,-H)/Math.PI;let Ue=180*Math.acos(me/ne)/Math.PI;return Ue=te<0?90-Ue:90+Ue,{center:L.toLngLat(),elevation:w,zoom:he,pitch:Ue,bearing:Se}}calculateCameraOptionsFromCameraLngLatAltRotation(o,f,y,w,T){const L=this.transform.calculateCenterFromCameraLngLatAlt(o,f,y,w);return{center:L.center,elevation:L.elevation,zoom:L.zoom,bearing:y,pitch:w,roll:T}}easeTo(o,f){this._stop(!1,o.easeId),((o=s.e({offset:[0,0],duration:500,easing:s.co},o)).animate===!1||!o.essential&&N.prefersReducedMotion)&&(o.duration=0);const y=this._getTransformForUpdate(),w=this.getBearing(),T=y.pitch,L=y.roll,O="bearing"in o?this._normalizeBearing(o.bearing,w):w,H="pitch"in o?+o.pitch:T,te="roll"in o?this._normalizeBearing(o.roll,L):L,ne="padding"in o?o.padding:y.padding,me=s.P.convert(o.offset);let he,Se;o.around&&(he=s.S.convert(o.around),Se=y.locationToScreenPoint(he));const Ue={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Xe=this.cameraHelper.handleEaseTo(y,{bearing:O,pitch:H,roll:te,padding:ne,around:he,aroundPoint:Se,offsetAsPoint:me,offset:o.offset,zoom:o.zoom,center:o.center});return this._rotating=this._rotating||w!==O,this._pitching=this._pitching||H!==T,this._rolling=this._rolling||te!==L,this._padding=!y.isPaddingEqual(ne),this._zooming=this._zooming||Xe.isZooming,this._easeId=o.easeId,this._prepareEase(f,o.noMoveStart,Ue),this.terrain&&this._prepareElevation(Xe.elevationCenter),this._ease(Je=>{Xe.easeFunc(Je),this.terrain&&!o.freezeElevation&&this._updateElevation(Je),this._applyUpdatedTransform(y),this._fireMoveEvents(f)},Je=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(f,Je)},o),this}_prepareEase(o,f,y={}){this._moving=!0,f||y.moving||this.fire(new s.l("movestart",o)),this._zooming&&!y.zooming&&this.fire(new s.l("zoomstart",o)),this._rotating&&!y.rotating&&this.fire(new s.l("rotatestart",o)),this._pitching&&!y.pitching&&this.fire(new s.l("pitchstart",o)),this._rolling&&!y.rolling&&this.fire(new s.l("rollstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&f!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(y-(f-(y*o+this._elevationStart))/(1-o)),this._elevationTarget=f}this.transform.setElevation(s.C.number(this._elevationStart,this._elevationTarget,o))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(o){if(!this.terrain&&o.elevation>=0&&o.pitch<=90)return{};const f=o.getCameraLngLat(),y=o.getCameraAltitude(),w=this.terrain?this.terrain.getElevationForLngLatZoom(f,o.zoom):0;if(y<w){const T=this.calculateCameraOptionsFromTo(f,w,o.center,o.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(o){const f=[];if(f.push(w=>this._elevateCameraIfInsideTerrain(w)),this.transformCameraUpdate&&f.push(w=>this.transformCameraUpdate(w)),!f.length)return;const y=o.clone();for(const w of f){const T=y.clone(),{center:L,zoom:O,roll:H,pitch:te,bearing:ne,elevation:me}=w(T);L&&T.setCenter(L),me!==void 0&&T.setElevation(me),O!==void 0&&T.setZoom(O),H!==void 0&&T.setRoll(H),te!==void 0&&T.setPitch(te),ne!==void 0&&T.setBearing(ne),y.apply(T)}this.transform.apply(y)}_fireMoveEvents(o){this.fire(new s.l("move",o)),this._zooming&&this.fire(new s.l("zoom",o)),this._rotating&&this.fire(new s.l("rotate",o)),this._pitching&&this.fire(new s.l("pitch",o)),this._rolling&&this.fire(new s.l("roll",o))}_afterEase(o,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const y=this._zooming,w=this._rotating,T=this._pitching,L=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new s.l("zoomend",o)),w&&this.fire(new s.l("rotateend",o)),T&&this.fire(new s.l("pitchend",o)),L&&this.fire(new s.l("rollend",o)),this.fire(new s.l("moveend",o))}flyTo(o,f){if(!o.essential&&N.prefersReducedMotion){const Yt=s.Q(o,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Yt,f)}this.stop(),o=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.co},o);const y=this._getTransformForUpdate(),w=y.bearing,T=y.pitch,L=y.roll,O=y.padding,H="bearing"in o?this._normalizeBearing(o.bearing,w):w,te="pitch"in o?+o.pitch:T,ne="roll"in o?this._normalizeBearing(o.roll,L):L,me="padding"in o?o.padding:y.padding,he=s.P.convert(o.offset);let Se=y.centerPoint.add(he);const Ue=y.screenPointToLocation(Se),Xe=this.cameraHelper.handleFlyTo(y,{bearing:H,pitch:te,roll:ne,padding:me,locationAtOffset:Ue,offsetAsPoint:he,center:o.center,minZoom:o.minZoom,zoom:o.zoom});let Je=o.curve;const st=Math.max(y.width,y.height),pt=st/Xe.scaleOfZoom,xt=Xe.pixelPathLength;typeof Xe.scaleOfMinZoom=="number"&&(Je=Math.sqrt(st/Xe.scaleOfMinZoom/xt*2));const mt=Je*Je;function wt(Yt){const wr=(pt*pt-st*st+(Yt?-1:1)*mt*mt*xt*xt)/(2*(Yt?pt:st)*mt*xt);return Math.log(Math.sqrt(wr*wr+1)-wr)}function St(Yt){return(Math.exp(Yt)-Math.exp(-Yt))/2}function yt(Yt){return(Math.exp(Yt)+Math.exp(-Yt))/2}const Lt=wt(!1);let rr=function(Yt){return yt(Lt)/yt(Lt+Je*Yt)},$t=function(Yt){return st*((yt(Lt)*(St(wr=Lt+Je*Yt)/yt(wr))-St(Lt))/mt)/xt;var wr},Zt=(wt(!0)-Lt)/Je;if(Math.abs(xt)<2e-6||!isFinite(Zt)){if(Math.abs(st-pt)<1e-6)return this.easeTo(o,f);const Yt=pt<st?-1:1;Zt=Math.abs(Math.log(pt/st))/Je,$t=()=>0,rr=wr=>Math.exp(Yt*Je*wr)}return o.duration="duration"in o?+o.duration:1e3*Zt/("screenSpeed"in o?+o.screenSpeed/Je:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=w!==H,this._pitching=te!==T,this._rolling=ne!==L,this._padding=!y.isPaddingEqual(me),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(Xe.targetCenter),this._ease(Yt=>{const wr=Yt*Zt,Br=1/rr(wr),pr=$t(wr);this._rotating&&y.setBearing(s.C.number(w,H,Yt)),this._pitching&&y.setPitch(s.C.number(T,te,Yt)),this._rolling&&y.setRoll(s.C.number(L,ne,Yt)),this._padding&&(y.interpolatePadding(O,me,Yt),Se=y.centerPoint.add(he)),Xe.easeFunc(Yt,Br,pr,Se),this.terrain&&!o.freezeElevation&&this._updateElevation(Yt),this._applyUpdatedTransform(y),this._fireMoveEvents(f)},()=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(f)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,f){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,f)}return o||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(o,f,y){y.animate===!1||y.duration===0?(o(1),f()):(this._easeStart=N.now(),this._easeOptions=y,this._onEaseFrame=o,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,f){o=s.aO(o,-180,180);const y=Math.abs(o-f);return Math.abs(o-360-f)<y&&(o-=360),Math.abs(o+360-f)<y&&(o+=360),o}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(s.S.convert(o),this.transform.tileZoom):null}}const Tr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Dr{constructor(o=Tr){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=f=>{!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"&&f.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options.compact,this._container=B.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=B.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=B.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){B.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,f){const y=this._map._getUIString(`AttributionControl.${f}`);o.title=y,o.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const f=this._map.style.sourceCaches;for(const w in f){const T=f[w];if(T.used||T.usedForTerrain){const L=T.getSource();L.attribution&&o.indexOf(L.attribution)<0&&o.push(L.attribution)}}o=o.filter(w=>String(w).trim()),o.sort((w,T)=>w.length-T.length),o=o.filter((w,T)=>{for(let L=T+1;L<o.length;L++)if(o[L].indexOf(w)>=0)return!1;return!0});const y=o.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,o.length?(this._innerContainer.innerHTML=B.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Yn{constructor(o={}){this._updateCompact=()=>{const f=this._container.children;if(f.length){const y=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=B.create("div","maplibregl-ctrl");const f=B.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){B.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Mi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const f=++this._id;return this._queue.push({callback:o,id:f,cancelled:!1}),f}remove(o){const f=this._currentlyRunning,y=f?this._queue.concat(f):this._queue;for(const w of y)if(w.id===o)return void(w.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const y of f)if(!y.cancelled&&(y.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Rs=s.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Jn extends s.E{constructor(o){super(),this._lastTilesetChange=N.now(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=o._source.tileSize*2**this.deltaZoom,o.usedForTerrain=!0,o.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,f){this.sourceCache.update(o,f),this._renderableTilesKeys=[];const y={};for(const w of ei(o,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))y[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.terrainRttPosMatrix32f=new Float64Array(16),s.bZ(w.terrainRttPosMatrix32f,0,s.$,s.$,0,0,1),this._tiles[w.key]=new xe(w,this.tileSize),this._lastTilesetChange=N.now());for(const w in this._tiles)y[w]||delete this._tiles[w]}freeRtt(o){for(const f in this._tiles){const y=this._tiles[f];(!o||y.tileID.equals(o)||y.tileID.isChildOf(o)||o.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o,f){return f?this._getTerrainCoordsForTileRanges(o,f):this._getTerrainCoordsForRegularTile(o)}_getTerrainCoordsForRegularTile(o){const f={};for(const y of this._renderableTilesKeys){const w=this._tiles[y].tileID,T=o.clone(),L=s.ba();if(w.canonical.equals(o.canonical))s.bZ(L,0,s.$,s.$,0,0,1);else if(w.canonical.isChildOf(o.canonical)){const O=w.canonical.z-o.canonical.z,H=w.canonical.x-(w.canonical.x>>O<<O),te=w.canonical.y-(w.canonical.y>>O<<O),ne=s.$>>O;s.bZ(L,0,ne,ne,0,0,1),s.M(L,L,[-H*ne,-te*ne,0])}else{if(!o.canonical.isChildOf(w.canonical))continue;{const O=o.canonical.z-w.canonical.z,H=o.canonical.x-(o.canonical.x>>O<<O),te=o.canonical.y-(o.canonical.y>>O<<O),ne=s.$>>O;s.bZ(L,0,s.$,s.$,0,0,1),s.M(L,L,[H*ne,te*ne,0]),s.N(L,L,[1/2**O,1/2**O,0])}}T.terrainRttPosMatrix32f=new Float32Array(L),f[y]=T}return f}_getTerrainCoordsForTileRanges(o,f){const y={};for(const w of this._renderableTilesKeys){const T=this._tiles[w].tileID;if(!this._isWithinTileRanges(T,f))continue;const L=o.clone(),O=s.ba();if(T.canonical.z===o.canonical.z){const H=o.canonical.x-T.canonical.x,te=o.canonical.y-T.canonical.y;s.bZ(O,0,s.$,s.$,0,0,1),s.M(O,O,[H*s.$,te*s.$,0])}else if(T.canonical.z>o.canonical.z){const H=T.canonical.z-o.canonical.z,te=T.canonical.x-(T.canonical.x>>H<<H),ne=T.canonical.y-(T.canonical.y>>H<<H),me=o.canonical.x-(T.canonical.x>>H),he=o.canonical.y-(T.canonical.y>>H),Se=s.$>>H;s.bZ(O,0,Se,Se,0,0,1),s.M(O,O,[-te*Se+me*s.$,-ne*Se+he*s.$,0])}else{const H=o.canonical.z-T.canonical.z,te=o.canonical.x-(o.canonical.x>>H<<H),ne=o.canonical.y-(o.canonical.y>>H<<H),me=(o.canonical.x>>H)-T.canonical.x,he=(o.canonical.y>>H)-T.canonical.y,Se=s.$<<H;s.bZ(O,0,Se,Se,0,0,1),s.M(O,O,[te*s.$+me*Se,ne*s.$+he*Se,0])}L.terrainRttPosMatrix32f=new Float32Array(O),y[w]=L}return y}getSourceTile(o,f){const y=this.sourceCache._source;let w=o.overscaledZ-this.deltaZoom;if(w>y.maxzoom&&(w=y.maxzoom),w<y.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(w).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!T||!T.dem)&&f)for(;w>=y.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(o.scaledTo(w--).key);return T}anyTilesAfterTime(o=Date.now()){return this._lastTilesetChange>=o}_isWithinTileRanges(o,f){return f[o.canonical.z]&&o.canonical.x>=f[o.canonical.z].minTileX&&o.canonical.x<=f[o.canonical.z].maxTileX&&o.canonical.y>=f[o.canonical.z].minTileY&&o.canonical.y<=f[o.canonical.z].maxTileY}}class Es{constructor(o,f,y){this._meshCache={},this.painter=o,this.sourceCache=new Jn(f),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,f,y,w=s.$){var T;if(!(f>=0&&f<w&&y>=0&&y<w))return 0;const L=this.getTerrainData(o),O=(T=L.tile)===null||T===void 0?void 0:T.dem;if(!O)return 0;const H=s.cs([],[f/w*s.$,y/w*s.$],L.u_terrain_matrix),te=[H[0]*O.dim,H[1]*O.dim],ne=Math.floor(te[0]),me=Math.floor(te[1]),he=te[0]-ne,Se=te[1]-me;return O.get(ne,me)*(1-he)*(1-Se)+O.get(ne+1,me)*he*(1-Se)+O.get(ne,me+1)*(1-he)*Se+O.get(ne+1,me+1)*he*Se}getElevationForLngLatZoom(o,f){if(!s.ct(f,o.wrap()))return 0;const{tileID:y,mercatorX:w,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(o,f);return this.getElevation(y,w%s.$,T%s.$,s.$)}getElevation(o,f,y,w=s.$){return this.getDEMElevation(o,f,y,w)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const w=this.painter.context,T=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(w,T,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(w,new s.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ag([])}const f=this.sourceCache.getSourceTile(o,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const w=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new s.T(w,f.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),f.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const y=f&&f+f.tileID.key+o.key;if(y&&!this._demMatrixCache[y]){const w=this.sourceCache.sourceCache._source.maxzoom;let T=o.canonical.z-f.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=w?T=o.canonical.z-w:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const L=o.canonical.x-(o.canonical.x>>T<<T),O=o.canonical.y-(o.canonical.y>>T<<T),H=s.cu(new Float64Array(16),[1/(s.$<<T),1/(s.$<<T),0]);s.M(H,H,[L*s.$,O*s.$,0]),this._demMatrixCache[o.key]={matrix:H,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(o){const f=this.painter,y=f.width/devicePixelRatio,w=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(f.context,{width:y,height:w,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(f.context,{width:y,height:w,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(y,w,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,y,w))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,L=0;T<this._coordsTextureSize;T++)for(let O=0;O<this._coordsTextureSize;O++,L+=4)f[L+0]=255&O,f[L+1]=255&T,f[L+2]=O>>8<<4|T>>8,f[L+3]=0;const y=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),w=new s.T(o,y,o.gl.RGBA,{premultiply:!1});return w.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(o){this.painter.maybeDrawDepthAndCoords(!0);const f=new Uint8Array(4),y=this.painter.context,w=y.gl,T=Math.round(o.x*this.painter.pixelRatio/devicePixelRatio),L=Math.round(o.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(T,O-L-1,1,1,w.RGBA,w.UNSIGNED_BYTE,f),y.bindFramebuffer.set(null);const H=f[0]+(f[2]>>4<<8),te=f[1]+((15&f[2])<<8),ne=this.coordsIndex[255-f[3]],me=ne&&this.sourceCache.getTileByID(ne);if(!me)return null;const he=this._coordsTextureSize,Se=(1<<me.tileID.canonical.z)*he;return new s.a1((me.tileID.canonical.x*he+H)/Se+me.tileID.wrap,(me.tileID.canonical.y*he+te)/Se,this.getElevation(me.tileID,H,te,he))}depthAtPoint(o){const f=new Uint8Array(4),y=this.painter.context,w=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,f),y.bindFramebuffer.set(null),(f[0]/16777216+f[1]/65536+f[2]/256+f[3])/256}getTerrainMesh(o){var f;const y=((f=this.painter.style.projection)===null||f===void 0?void 0:f.transitionState)>0,w=y&&o.canonical.y===0,T=y&&o.canonical.y===(1<<o.canonical.z)-1,L=`m_${w?"n":""}_${T?"s":""}`;if(this._meshCache[L])return this._meshCache[L];const O=this.painter.context,H=new s.cv,te=new s.aN,ne=this.meshSize,me=s.$/ne,he=ne*ne;for(let yt=0;yt<=ne;yt++)for(let Lt=0;Lt<=ne;Lt++)H.emplaceBack(Lt*me,yt*me,0);for(let yt=0;yt<he;yt+=ne+1)for(let Lt=0;Lt<ne;Lt++)te.emplaceBack(Lt+yt,ne+Lt+yt+1,ne+Lt+yt+2),te.emplaceBack(Lt+yt,ne+Lt+yt+2,Lt+yt+1);const Se=H.length,Ue=Se+(ne+1),Xe=(ne+1)*ne,Je=w?s.bh:0,st=w?0:1,pt=T?s.bi:s.$,xt=T?0:1;for(let yt=0;yt<=ne;yt++)H.emplaceBack(yt*me,Je,st);for(let yt=0;yt<=ne;yt++)H.emplaceBack(yt*me,pt,xt);for(let yt=0;yt<ne;yt++)te.emplaceBack(Xe+yt,Ue+yt,Ue+yt+1),te.emplaceBack(Xe+yt,Ue+yt+1,Xe+yt+1),te.emplaceBack(0+yt,Se+yt+1,Se+yt),te.emplaceBack(0+yt,0+yt+1,Se+yt+1);const mt=H.length,wt=mt+2*(ne+1);for(const yt of[0,1])for(let Lt=0;Lt<=ne;Lt++)for(const rr of[0,1])H.emplaceBack(yt*s.$,Lt*me,rr);for(let yt=0;yt<2*ne;yt+=2)te.emplaceBack(mt+yt,mt+yt+1,mt+yt+3),te.emplaceBack(mt+yt,mt+yt+3,mt+yt+2),te.emplaceBack(wt+yt,wt+yt+3,wt+yt+1),te.emplaceBack(wt+yt,wt+yt+2,wt+yt+3);const St=new Eu(O.createVertexBuffer(H,Rs.members),O.createIndexBuffer(te),s.aM.simpleSegment(0,0,H.length,te.length));return this._meshCache[L]=St,St}getMeshFrameDelta(o){return 2*Math.PI*s.bu/Math.pow(2,Math.max(o,0))/5}getMinTileElevationForLngLatZoom(o,f){var y;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(o,f);return(y=this.getMinMaxElevation(w).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(o){const f=this.getTerrainData(o).tile,y={minElevation:null,maxElevation:null};return f&&f.dem&&(y.minElevation=f.dem.min*this.exaggeration,y.maxElevation=f.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(o,f){const y=s.a1.fromLngLat(o.wrap()),w=(1<<f)*s.$,T=y.x*w,L=y.y*w,O=Math.floor(T/s.$),H=Math.floor(L/s.$);return{tileID:new s.Z(f,0,f,O,H),mercatorX:T,mercatorY:L}}}class cs{constructor(o,f,y){this._context=o,this._size=f,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(y.texture),{id:o,fbo:f,texture:y,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(f=>o.id!==f),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}const Sn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class $s{constructor(o,f){this.painter=o,this.terrain=f,this.pool=new cs(o.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(y=>!o._layers[y].isHidden(f)),this._coordsAscending={};for(const y in o.sourceCaches){this._coordsAscending[y]={};const w=o.sourceCaches[y].getVisibleCoordinates(),T=o.sourceCaches[y].getSource(),L=T instanceof or?T.terrainTileRanges:null;for(const O of w){const H=this.terrain.sourceCache.getTerrainCoords(O,L);for(const te in H)this._coordsAscending[y][te]||(this._coordsAscending[y][te]=[]),this._coordsAscending[y][te].push(H[te])}}this._coordsAscendingStr={};for(const y of o._order){const w=o._layers[y],T=w.source;if(Sn[w.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(const L in this._coordsAscending[T])this._coordsAscendingStr[T][L]=this._coordsAscending[T][L].map(O=>O.key).sort().join()}}for(const y of this._renderableTiles)for(const w in this._coordsAscendingStr){const T=this._coordsAscendingStr[w][y.tileID.key];T&&T!==y.rttCoords[w]&&(y.rtt=[])}}renderLayer(o,f){if(o.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},f),{isRenderingToTexture:!0}),w=o.type,T=this.painter,L=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Sn[w]&&(this._prevType&&Sn[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(o.id),!L))return!0;if(Sn[this._prevType]||Sn[w]&&L){this._prevType=w;const O=this._stacks.length-1,H=this._stacks[O]||[];for(const te of this._renderableTiles){if(this.pool.isFull()&&(vh(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(te),te.rtt[O]){const me=this.pool.getObjectForId(te.rtt[O].id);if(me.stamp===te.rtt[O].stamp){this.pool.useObject(me);continue}}const ne=this.pool.getOrCreateFreeObject();this.pool.useObject(ne),this.pool.stampObject(ne),te.rtt[O]={id:ne.id,stamp:ne.stamp},T.context.bindFramebuffer.set(ne.fbo.framebuffer),T.context.clear({color:s.bf.transparent,stencil:0}),T.currentStencilSource=void 0;for(let me=0;me<H.length;me++){const he=T.style._layers[H[me]],Se=he.source?this._coordsAscending[he.source][te.tileID.key]:[te.tileID];T.context.viewport.set([0,0,ne.fbo.width,ne.fbo.height]),T._renderTileClippingMasks(he,Se,!0),T.renderLayer(T,T.style.sourceCaches[he.source],he,Se,y),he.source&&(te.rttCoords[he.source]=this._coordsAscendingStr[he.source][te.tileID.key])}}return vh(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),Sn[w]}return!1}}const vo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Qa=d,Ln={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Tr,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},vi={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class un{constructor(o,f,y=!1){this.mousedown=T=>{this.startMove(T,B.mousePos(this.element,T)),B.addEventListener(window,"mousemove",this.mousemove),B.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,B.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=B.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),B.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),B.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=B.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=f;const w=new tr;this._rotatePitchHandler=new Qe({clickTolerance:3,move:(T,L)=>{const O=f.getBoundingClientRect(),H=new s.P((O.bottom-O.top)/2,(O.right-O.left)/2);return{bearingDelta:s.cn(new s.P(T.x,L.y),L,H),pitchDelta:y?-.5*(L.y-T.y):void 0}},moveStateManager:w,enable:!0,assignEvents:()=>{}}),this.map=o,B.addEventListener(f,"mousedown",this.mousedown),B.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),B.addEventListener(f,"touchcancel",this.reset)}startMove(o,f){this._rotatePitchHandler.dragStart(o,f),B.disableDrag()}move(o,f){const y=this.map,{bearingDelta:w,pitchDelta:T}=this._rotatePitchHandler.dragMove(o,f)||{};w&&y.setBearing(y.getBearing()+w),T&&y.setPitch(y.getPitch()+T)}off(){const o=this.element;B.removeEventListener(o,"mousedown",this.mousedown),B.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),B.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),B.removeEventListener(window,"touchend",this.touchend),B.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){B.enableDrag(),B.removeEventListener(window,"mousemove",this.mousemove),B.removeEventListener(window,"mouseup",this.mouseup),B.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),B.removeEventListener(window,"touchend",this.touchend)}}let ps;function wn(S,o,f,y=!1){if(y||!f.getCoveringTilesDetailsProvider().allowWorldCopies())return S?.wrap();const w=new s.S(S.lng,S.lat);if(S=new s.S(S.lng,S.lat),o){const T=new s.S(S.lng-360,S.lat),L=new s.S(S.lng+360,S.lat),O=f.locationToScreenPoint(S).distSqr(o);f.locationToScreenPoint(T).distSqr(o)<O?S=T:f.locationToScreenPoint(L).distSqr(o)<O&&(S=L)}for(;Math.abs(S.lng-f.center.lng)>180;){const T=f.locationToScreenPoint(S);if(T.x>=0&&T.y>=0&&T.x<=f.width&&T.y<=f.height)break;S.lng>f.center.lng?S.lng-=360:S.lng+=360}return S.lng!==w.lng&&f.isPointOnMapSurface(f.locationToScreenPoint(S))?S:w}const ra={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Us(S,o,f){const y=S.classList;for(const w in ra)y.remove(`maplibregl-${f}-anchor-${w}`);y.add(`maplibregl-${f}-anchor-${o}`)}class Uo extends s.E{constructor(o){if(super(),this._onKeyPress=f=>{const y=f.code,w=f.charCode||f.keyCode;y!=="Space"&&y!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=f=>{const y=f.originalEvent.target,w=this._element;this._popup&&(y===w||w.contains(y))&&this.togglePopup()},this._update=f=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(f?.type==="terrain"||f?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=wn(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||f&&f.type!=="moveend"||(this._pos=this._pos.round()),B.setTransform(this._element,`${ra[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${w}`),N.frameAsync(new AbortController).then(()=>{this._updateOpacity(f&&f.type==="moveend")}).catch(()=>{})},this._onMove=f=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._subpixelPositioning=o&&o.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,this.setOpacity(o?.opacity,o?.opacityWhenCovered),o&&o.element)this._element=o.element,this._offset=s.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=B.create("div");const f=B.createNS("http://www.w3.org/2000/svg","svg"),y=41,w=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${y}px`),f.setAttributeNS(null,"width",`${w}px`),f.setAttributeNS(null,"viewBox",`0 0 ${w} ${y}`);const T=B.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const L=B.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill-rule","nonzero");const O=B.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const H=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const st of H){const pt=B.createNS("http://www.w3.org/2000/svg","ellipse");pt.setAttributeNS(null,"opacity","0.04"),pt.setAttributeNS(null,"cx","10.5"),pt.setAttributeNS(null,"cy","5.80029008"),pt.setAttributeNS(null,"rx",st.rx),pt.setAttributeNS(null,"ry",st.ry),O.appendChild(pt)}const te=B.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"fill",this._color);const ne=B.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),te.appendChild(ne);const me=B.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"fill","#000000");const he=B.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),me.appendChild(he);const Se=B.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Se.setAttributeNS(null,"fill","#FFFFFF");const Ue=B.createNS("http://www.w3.org/2000/svg","g");Ue.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Xe=B.createNS("http://www.w3.org/2000/svg","circle");Xe.setAttributeNS(null,"fill","#000000"),Xe.setAttributeNS(null,"opacity","0.25"),Xe.setAttributeNS(null,"cx","5.5"),Xe.setAttributeNS(null,"cy","5.5"),Xe.setAttributeNS(null,"r","5.4999962");const Je=B.createNS("http://www.w3.org/2000/svg","circle");Je.setAttributeNS(null,"fill","#FFFFFF"),Je.setAttributeNS(null,"cx","5.5"),Je.setAttributeNS(null,"cy","5.5"),Je.setAttributeNS(null,"r","5.4999962"),Ue.appendChild(Xe),Ue.appendChild(Je),L.appendChild(O),L.appendChild(te),L.appendChild(me),L.appendChild(Se),L.appendChild(Ue),f.appendChild(L),f.setAttributeNS(null,"height",y*this._scale+"px"),f.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(f),this._offset=s.P.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),Us(this._element,this._anchor,"marker"),o&&o.className)for(const f of o.className.split(" "))this._element.classList.add(f);this._popup=null}addTo(o){return this.remove(),this._map=o,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",o._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),o.on("terrain",this._update),o.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),B.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=s.S.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const w=Math.abs(13.5)/Math.SQRT2;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(o){return this._subpixelPositioning=o,this}getPopup(){return this._popup}togglePopup(){const o=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:o?(o.isOpen()?o.remove():(o.setLngLat(this._lngLat),o.addTo(this._map)),this):this}_updateOpacity(o=!1){var f,y;const w=(f=this._map)===null||f===void 0?void 0:f.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!w||T){const Se=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Se&&(this._element.style.opacity=Se))}if(o)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const L=this._map,O=L.terrain.depthAtPoint(this._pos),H=L.terrain.getElevationForLngLatZoom(this._lngLat,L.transform.tileZoom);if(L.transform.lngLatToCameraDepth(this._lngLat,H)-O<.006)return void(this._element.style.opacity=this._opacity);const te=-this._offset.y/L.transform.pixelsPerMeter,ne=Math.sin(L.getPitch()*Math.PI/180)*te,me=L.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),he=L.transform.lngLatToCameraDepth(this._lngLat,H+ne)-me>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&he&&this._popup.remove(),this._element.style.opacity=he?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(o){return this._offset=s.P.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(o,f){return(this._opacity===void 0||o===void 0&&f===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),o!==void 0&&(this._opacity=o),f!==void 0&&(this._opacityWhenCovered=f),this._map&&this._updateOpacity(!0),this}}const cl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ns=0,oc=!1;const Dh={maxWidth:100,unit:"metric"};function zu(S,o,f){const y=f&&f.maxWidth||100,w=S._container.clientHeight/2,T=S._container.clientWidth/2,L=S.unproject([T-y/2,w]),O=S.unproject([T+y/2,w]),H=Math.round(S.project(O).x-S.project(L).x),te=Math.min(y,H,S._container.clientWidth),ne=L.distanceTo(O);if(f&&f.unit==="imperial"){const me=3.2808*ne;me>5280?Ul(o,te,me/5280,S._getUIString("ScaleControl.Miles")):Ul(o,te,me,S._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?Ul(o,te,ne/1852,S._getUIString("ScaleControl.NauticalMiles")):ne>=1e3?Ul(o,te,ne/1e3,S._getUIString("ScaleControl.Kilometers")):Ul(o,te,ne,S._getUIString("ScaleControl.Meters"))}function Ul(S,o,f,y){const w=function(T){const L=Math.pow(10,`${Math.floor(T)}`.length-1);let O=T/L;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(H){const te=Math.pow(10,Math.ceil(-Math.log(H)/Math.LN10));return Math.round(H*te)/te}(O),L*O}(f);S.style.width=o*(w/f)+"px",S.innerHTML=`${w}&nbsp;${y}`}const YA={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},JA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hu(S){if(S){if(typeof S=="number"){const o=Math.round(Math.abs(S)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,S),"top-left":new s.P(o,o),"top-right":new s.P(-o,o),bottom:new s.P(0,-S),"bottom-left":new s.P(o,-o),"bottom-right":new s.P(-o,-o),left:new s.P(S,0),right:new s.P(-S,0)}}if(S instanceof s.P||Array.isArray(S)){const o=s.P.convert(S);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:s.P.convert(S.center||[0,0]),top:s.P.convert(S.top||[0,0]),"top-left":s.P.convert(S["top-left"]||[0,0]),"top-right":s.P.convert(S["top-right"]||[0,0]),bottom:s.P.convert(S.bottom||[0,0]),"bottom-left":s.P.convert(S["bottom-left"]||[0,0]),"bottom-right":s.P.convert(S["bottom-right"]||[0,0]),left:s.P.convert(S.left||[0,0]),right:s.P.convert(S.right||[0,0])}}return Hu(new s.P(0,0))}const lc=d;c.AJAXError=s.cz,c.Event=s.l,c.Evented=s.E,c.LngLat=s.S,c.MercatorCoordinate=s.a1,c.Point=s.P,c.addProtocol=s.cA,c.config=s.a,c.removeProtocol=s.cB,c.AttributionControl=Dr,c.BoxZoomHandler=U,c.CanvasSource=Hr,c.CooperativeGesturesHandler=Gi,c.DoubleClickZoomHandler=oi,c.DragPanHandler=Vi,c.DragRotateHandler=qi,c.EdgeInsets=qa,c.FullscreenControl=class extends s.E{constructor(S={}){super(),this._onFullscreenChange=()=>{var o;let f=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((o=f?.shadowRoot)===null||o===void 0)&&o.fullscreenElement;)f=f.shadowRoot.fullscreenElement;f===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){B.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const S=this._fullscreenButton=B.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);B.create("span","maplibregl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=Sr,c.GeolocateControl=class extends s.E{constructor(S){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",o)),this._finish()}},this._updateCamera=o=>{const f=new s.S(o.coords.longitude,o.coords.latitude),y=o.coords.accuracy,w=this._map.getBearing(),T=s.e({bearing:w},this.options.fitBoundsOptions),L=at.fromLngLat(f,y);this._map.fitBounds(L,T,{geolocateSource:!0})},this._updateMarker=o=>{if(o){const f=new s.S(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=o.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=o=>{if(this._map){if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&oc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=B.create("button","maplibregl-ctrl-geolocate",this._container),B.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=o=>{if(this._map){if(o===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=B.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Uo({element:this._dotElement}),this._circleElement=B.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Uo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{const y=f?.[0]instanceof ResizeObserverEntry;f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},cl,S)}onAdd(S){return this._map=S,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(o=!1){if(ps!==void 0&&!o)return ps;if(window.navigator.permissions===void 0)return ps=!!window.navigator.geolocation,ps;try{ps=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ps=!!window.navigator.geolocation}return ps})}().then(o=>this._finishSetupUI(o)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),B.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,ns=0,oc=!1}_isOutOfMapMaxBounds(S){const o=this._map.getMaxBounds(),f=S.coords;return o&&(f.longitude<o.getWest()||f.longitude>o.getEast()||f.latitude<o.getSouth()||f.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const S=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&S))return;const o=this._map.project(S),f=this._map.unproject([o.x+100,o.y]),y=S.distanceTo(f)/100,w=2*this._accuracy/y;this._circleElement.style.width=`${w.toFixed(2)}px`,this._circleElement.style.height=`${w.toFixed(2)}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ns--,oc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ns++,ns>1?(S={maximumAge:6e5,timeout:0},oc=!0):(S=this.options.positionOptions,oc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,S)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var S;const o=(S=this._map.getProjection())===null||S===void 0?void 0:S.type;this._map.setProjection(o!=="mercator"&&o?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var S;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((S=this._map.getProjection())===null||S===void 0?void 0:S.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(S){return this._map=S,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=B.create("button","maplibregl-ctrl-globe",this._container),B.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){B.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=Ks,c.ImageSource=or,c.KeyboardHandler=ji,c.LngLatBounds=at,c.LogoControl=Yn,c.Map=class extends ls{constructor(S){var o,f;s.cw.mark(s.cx.create);const y=Object.assign(Object.assign(Object.assign({},Ln),S),{canvasContextAttributes:Object.assign(Object.assign({},Ln.canvasContextAttributes),S.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const w=new Ka,T=new tl;if(y.minZoom!==void 0&&w.setMinZoom(y.minZoom),y.maxZoom!==void 0&&w.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&w.setMinPitch(y.minPitch),y.maxPitch!==void 0&&w.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&w.setRenderWorldCopies(y.renderWorldCopies),super(w,T,{bearingSnap:y.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Mi,this._controls=[],this._mapId=s.a7(),this._contextLost=O=>{O.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:O}))},this._contextRestored=O=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:O}))},this._onMapScroll=O=>{if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},vo),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Z.addThrottleControl(()=>this.isMoving()),this._requestManager=new X(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let O=!1;const H=Pl(te=>{this._trackResize&&!this._removed&&(this.resize(te),this.redraw())},50);this._resizeObserver=new ResizeObserver(te=>{O?H(te):O=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Rn(this,y),this._hash=y.hash&&new Ks(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,s.e({},y.fitBoundsOptions,{duration:0}))));const L=typeof y.style=="string"||((f=(o=y.style)===null||o===void 0?void 0:o.projection)===null||f===void 0?void 0:f.type)!=="globe";this.resize(null,L),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Dr(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new Yn,y.logoPosition),this.on("style.load",()=>{if(L||this._resizeTransform(),this.transform.unmodified){const O=s.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(O)}}),this.on("data",O=>{this._update(O.dataType==="style"),this.fire(new s.l(`${O.dataType}data`,O))}),this.on("dataloading",O=>{this.fire(new s.l(`${O.dataType}dataloading`,O))}),this.on("dataabort",O=>{this.fire(new s.l("sourcedataabort",O))})}_getMapId(){return this._mapId}setGlobalStateProperty(S,o){return this.style.setGlobalStateProperty(S,o),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(S,o){if(o===void 0&&(o=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=S.onAdd(this);this._controls.push(S);const y=this._controlPositions[o];return o.indexOf("bottom")!==-1?y.insertBefore(f,y.firstChild):y.appendChild(f),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(S);return o>-1&&this._controls.splice(o,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}coveringTiles(S){return ei(this.transform,S)}calculateCameraOptionsFromTo(S,o,f,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLatZoom(f,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(S,o,f,y)}resize(S,o=!0){const[f,y]=this._containerDimensions(),w=this._getClampedPixelRatio(f,y);if(this._resizeCanvas(f,y,w),this.painter.resize(f,y,w),this.painter.overLimit()){const L=this.painter.context.gl;this._maxCanvasSize=[L.drawingBufferWidth,L.drawingBufferHeight];const O=this._getClampedPixelRatio(f,y);this._resizeCanvas(f,y,O),this.painter.resize(f,y,O)}this._resizeTransform(o);const T=!this._moving;return T&&(this.stop(),this.fire(new s.l("movestart",S)).fire(new s.l("move",S))),this.fire(new s.l("resize",S)),T&&this.fire(new s.l("moveend",S)),this}_resizeTransform(S=!0){var o;const[f,y]=this._containerDimensions();this.transform.resize(f,y,S),(o=this._requestedCameraState)===null||o===void 0||o.resize(f,y,S)}_getClampedPixelRatio(S,o){const{0:f,1:y}=this._maxCanvasSize,w=this.getPixelRatio(),T=S*w,L=o*w;return Math.min(T>f?f/T:1,L>y?y/L:1)*w}getPixelRatio(){var S;return(S=this._overridePixelRatio)!==null&&S!==void 0?S:devicePixelRatio}setPixelRatio(S){this._overridePixelRatio=S,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(S){return this.transform.setMaxBounds(at.convert(S)),this._update()}setMinZoom(S){if((S=S??-2)>=-2&&S<=this.transform.maxZoom)return this.transform.setMinZoom(S),this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S??22)>=this.transform.minZoom)return this.transform.setMaxZoom(S),this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.setMinPitch(S),this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(S>=this.transform.minPitch)return this.transform.setMaxPitch(S),this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.setRenderWorldCopies(S),this._update()}project(S){return this.transform.locationToScreenPoint(s.S.convert(S),this.style&&this.terrain)}unproject(S){return this.transform.screenPointToLocation(s.P.convert(S),this.terrain)}isMoving(){var S;return this._moving||((S=this.handlers)===null||S===void 0?void 0:S.isMoving())}isZooming(){var S;return this._zooming||((S=this.handlers)===null||S===void 0?void 0:S.isZooming())}isRotating(){var S;return this._rotating||((S=this.handlers)===null||S===void 0?void 0:S.isRotating())}_createDelegatedListener(S,o,f){if(S==="mouseenter"||S==="mouseover"){let y=!1;return{layers:o,listener:f,delegates:{mousemove:T=>{const L=o.filter(H=>this.getLayer(H)),O=L.length!==0?this.queryRenderedFeatures(T.point,{layers:L}):[];O.length?y||(y=!0,f.call(this,new Ja(S,this,T.originalEvent,{features:O}))):y=!1},mouseout:()=>{y=!1}}}}if(S==="mouseleave"||S==="mouseout"){let y=!1;return{layers:o,listener:f,delegates:{mousemove:L=>{const O=o.filter(H=>this.getLayer(H));(O.length!==0?this.queryRenderedFeatures(L.point,{layers:O}):[]).length?y=!0:y&&(y=!1,f.call(this,new Ja(S,this,L.originalEvent)))},mouseout:L=>{y&&(y=!1,f.call(this,new Ja(S,this,L.originalEvent)))}}}}{const y=w=>{const T=o.filter(O=>this.getLayer(O)),L=T.length!==0?this.queryRenderedFeatures(w.point,{layers:T}):[];L.length&&(w.features=L,f.call(this,w),delete w.features)};return{layers:o,listener:f,delegates:{[S]:y}}}}_saveDelegatedListener(S,o){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(o)}_removeDelegatedListener(S,o,f){if(!this._delegatedListeners||!this._delegatedListeners[S])return;const y=this._delegatedListeners[S];for(let w=0;w<y.length;w++){const T=y[w];if(T.listener===f&&T.layers.length===o.length&&T.layers.every(L=>o.includes(L))){for(const L in T.delegates)this.off(L,T.delegates[L]);return void y.splice(w,1)}}}on(S,o,f){if(f===void 0)return super.on(S,o);const y=typeof o=="string"?[o]:o,w=this._createDelegatedListener(S,y,f);this._saveDelegatedListener(S,w);for(const T in w.delegates)this.on(T,w.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(S,y,f)}}}once(S,o,f){if(f===void 0)return super.once(S,o);const y=typeof o=="string"?[o]:o,w=this._createDelegatedListener(S,y,f);for(const T in w.delegates){const L=w.delegates[T];w.delegates[T]=(...O)=>{this._removeDelegatedListener(S,y,f),L(...O)}}this._saveDelegatedListener(S,w);for(const T in w.delegates)this.once(T,w.delegates[T]);return this}off(S,o,f){return f===void 0?super.off(S,o):(this._removeDelegatedListener(S,typeof o=="string"?[o]:o,f),this)}queryRenderedFeatures(S,o){if(!this.style)return[];let f;const y=S instanceof s.P||Array.isArray(S),w=y?S:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(y?{}:S)||{},w instanceof s.P||typeof w[0]=="number")f=[s.P.convert(w)];else{const T=s.P.convert(w[0]),L=s.P.convert(w[1]);f=[T,new s.P(L.x,T.y),L,new s.P(T.x,L.y),T]}return this.style.queryRenderedFeatures(f,o,this.transform)}querySourceFeatures(S,o){return this.style.querySourceFeatures(S,o)}setStyle(S,o){return(o=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(S,o))}setTransformRequest(S){return this._requestManager.setTransformRequest(S),this}_getUIString(S){const o=this._locale[S];if(o==null)throw new Error(`Missing UI string '${S}'`);return o}_updateStyle(S,o){var f,y;if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(S,o));const w=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!S)),S?(this.style=new Ms(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S,o,w):this.style.loadJSON(S,o,w),this):((y=(f=this.style)===null||f===void 0?void 0:f.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ms(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,o){if(typeof S=="string"){const f=this._requestManager.transformRequest(S,"Style");s.j(f,new AbortController).then(y=>{this._updateDiff(y.data,o)}).catch(y=>{y&&this.fire(new s.k(y))})}else typeof S=="object"&&this._updateDiff(S,o)}_updateDiff(S,o){try{this.style.setState(S,o)&&this._update(!0)}catch(f){s.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(S,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(S,o){return this._lazyInitEmptyStyle(),this.style.addSource(S,o),this._update(!0)}isSourceLoaded(S){const o=this.style&&this.style.sourceCaches[S];if(o!==void 0)return o.loaded();this.fire(new s.k(new Error(`There is no source with ID '${S}'`)))}setTerrain(S){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),S){const o=this.style.sourceCaches[S.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${S.source}`);this.terrain===null&&o.reload();for(const f in this.style._layers){const y=this.style._layers[f];y.type==="hillshade"&&y.source===S.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===S.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Es(this.painter,o,S),this.painter.renderToTexture=new $s(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=f=>{var y;f.dataType==="style"?this.terrain.sourceCache.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId!==S.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=f.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:S})),this}getTerrain(){var S,o;return(o=(S=this.terrain)===null||S===void 0?void 0:S.options)!==null&&o!==void 0?o:null}areTilesLoaded(){const S=this.style&&this.style.sourceCaches;for(const o in S){const f=S[o]._tiles;for(const y in f){const w=f[y];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(S){return this.style.removeSource(S),this._update(!0)}getSource(S){return this.style.getSource(S)}setSourceTileLodParams(S,o,f){if(f){const y=this.getSource(f);if(!y)throw new Error(`There is no source with ID "${f}", cannot set LOD parameters`);y.calculateTileZoom=Fr(Math.max(1,S),Math.max(1,o))}else for(const y in this.style.sourceCaches)this.style.sourceCaches[y].getSource().calculateTileZoom=Fr(Math.max(1,S),Math.max(1,o));return this._update(!0),this}refreshTiles(S,o){const f=this.style.sourceCaches[S];if(!f)throw new Error(`There is no source cache with ID "${S}", cannot refresh tile`);o===void 0?f.reload(!0):f.refreshTiles(o.map(y=>new s.a4(y.z,y.x,y.y)))}addImage(S,o,f={}){const{pixelRatio:y=1,sdf:w=!1,stretchX:T,stretchY:L,content:O,textFitWidth:H,textFitHeight:te}=f;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||s.b(o))){if(o.width===void 0||o.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ne,height:me,data:he}=o,Se=o;return this.style.addImage(S,{data:new s.R({width:ne,height:me},new Uint8Array(he)),pixelRatio:y,stretchX:T,stretchY:L,content:O,textFitWidth:H,textFitHeight:te,sdf:w,version:0,userImage:Se}),Se.onAdd&&Se.onAdd(this,S),this}}{const{width:ne,height:me,data:he}=N.getImageData(o);this.style.addImage(S,{data:new s.R({width:ne,height:me},he),pixelRatio:y,stretchX:T,stretchY:L,content:O,textFitWidth:H,textFitHeight:te,sdf:w,version:0})}}updateImage(S,o){const f=this.style.getImage(S);if(!f)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=o instanceof HTMLImageElement||s.b(o)?N.getImageData(o):o,{width:w,height:T,data:L}=y;if(w===void 0||T===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==f.data.width||T!==f.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(o instanceof HTMLImageElement||s.b(o));return f.data.replace(L,O),this.style.updateImage(S,f),this}getImage(S){return this.style.getImage(S)}hasImage(S){return S?!!this.style.getImage(S):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S){return Z.getImage(this._requestManager.transformRequest(S,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(S,o){return this._lazyInitEmptyStyle(),this.style.addLayer(S,o),this._update(!0)}moveLayer(S,o){return this.style.moveLayer(S,o),this._update(!0)}removeLayer(S){return this.style.removeLayer(S),this._update(!0)}getLayer(S){return this.style.getLayer(S)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(S,o,f){return this.style.setLayerZoomRange(S,o,f),this._update(!0)}setFilter(S,o,f={}){return this.style.setFilter(S,o,f),this._update(!0)}getFilter(S){return this.style.getFilter(S)}setPaintProperty(S,o,f,y={}){return this.style.setPaintProperty(S,o,f,y),this._update(!0)}getPaintProperty(S,o){return this.style.getPaintProperty(S,o)}setLayoutProperty(S,o,f,y={}){return this.style.setLayoutProperty(S,o,f,y),this._update(!0)}getLayoutProperty(S,o){return this.style.getLayoutProperty(S,o)}setGlyphs(S,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(S,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(S,o,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(S,o,f,y=>{y||this._update(!0)}),this}removeSprite(S){return this._lazyInitEmptyStyle(),this.style.removeSprite(S),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(S,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(S,o,f=>{f||this._update(!0)}),this}setLight(S,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(S,o),this._update(!0)}getLight(){return this.style.getLight()}setSky(S,o={}){return this._lazyInitEmptyStyle(),this.style.setSky(S,o),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(S,o){return this.style.setFeatureState(S,o),this._update()}removeFeatureState(S,o){return this.style.removeFeatureState(S,o),this._update()}getFeatureState(S){return this.style.getFeatureState(S)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let S=0,o=0;return this._container&&(S=this._container.clientWidth||400,o=this._container.clientHeight||300),[S,o]}_setupContainer(){const S=this._container;S.classList.add("maplibregl-map");const o=this._canvasContainer=B.create("div","maplibregl-canvas-container",S);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=B.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const f=this._containerDimensions(),y=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],y);const w=this._controlContainer=B.create("div","maplibregl-control-container",S),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(L=>{T[L]=B.create("div",`maplibregl-ctrl-${L} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,o,f){this._canvas.width=Math.floor(f*S),this._canvas.height=Math.floor(f*o),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const S=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let o=null;this._canvas.addEventListener("webglcontextcreationerror",y=>{o={requestedAttributes:S},y&&(o.statusMessage=y.statusMessage,o.type=y.type)},{once:!0});let f=null;if(f=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,S):this._canvas.getContext("webgl2",S)||this._canvas.getContext("webgl",S),!f){const y="Failed to initialize WebGL";throw o?(o.message=y,new Error(JSON.stringify(o))):new Error(y)}this.painter=new vA(f,this.transform),M.testSupport(f)}migrateProjection(S,o){super.migrateProjection(S,o),this.painter.transform=S,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_render(S){var o,f,y,w,T;const L=this._idleTriggered?this._fadeDuration:0,O=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),this._removed)return;let H=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const me=this.transform.zoom,he=N.now();this.style.zoomHistory.update(me,he);const Se=new s.F(me,{now:he,fadeDuration:L,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ue=Se.crossFadingFactor();Ue===1&&Ue===this._crossFadingFactor||(H=!0,this._crossFadingFactor=Ue),this.style.update(Se)}const te=((f=this.style.projection)===null||f===void 0?void 0:f.transitionState)>0!==O;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((w=this.style.projection)===null||w===void 0?void 0:w.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||te)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,L,this._crossSourceCollisions,te),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:L,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cw.mark(s.cx.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||H)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ne=this._sourcesDirty||this._styleDirty||this._placementDirty;return ne||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||ne||(this._fullyLoaded=!0,s.cw.mark(s.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var S;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Z.removeThrottleControl(this._imageQueueHandle),(S=this._resizeObserver)===null||S===void 0||S.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o?.loseContext&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),B.remove(this._canvasContainer),B.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cw.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,N.frame(this._frameRequest,S=>{s.cw.frame(S),this._frameRequest=null;try{this._render(S)}catch(o){if(!s.cy(o)&&!function(f){return f.message===Tl}(o))throw o}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get version(){return Qa}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(S){return this._lazyInitEmptyStyle(),this.style.setProjection(S),this._update(!0)}},c.MapMouseEvent=Ja,c.MapTouchEvent=Ro,c.MapWheelEvent=ac,c.Marker=Uo,c.NavigationControl=class{constructor(S){this._updateZoomButtons=()=>{const o=this._map.getZoom(),f=o===this._map.getMaxZoom(),y=o===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(o,f)=>{const y=this._map._getUIString(`NavigationControl.${f}`);o.title=y,o.setAttribute("aria-label",y)},this.options=s.e({},vi,S),this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),B.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),B.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=B.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new un(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){B.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(S,o){const f=B.create("button",S,this._container);return f.type="button",f.addEventListener("click",o),f}},c.Popup=class extends s.E{constructor(S){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&B.remove(this._content),this._container&&(B.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=B.create("div","maplibregl-popup",this._map.getContainer()),this._tip=B.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const L of this.options.className.split(" "))this._container.classList.add(L);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=wn(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!o)return;const f=this._flatPos=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&o?o:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const w=Hu(this.options.offset);if(!y){const L=this._container.offsetWidth,O=this._container.offsetHeight;let H;H=f.y+w.bottom.y<O?["top"]:f.y>this._map.transform.height-O?["bottom"]:[],f.x<L/2?H.push("left"):f.x>this._map.transform.width-L/2&&H.push("right"),y=H.length===0?"bottom":H.join("-")}let T=f.add(w[y]);this.options.subpixelPositioning||(T=T.round()),B.setTransform(this._container,`${ra[y]} translate(${T.x}px,${T.y}px)`),Us(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(YA),S)}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(S){return this._lngLat=s.S.convert(S),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){const o=document.createDocumentFragment(),f=document.createElement("body");let y;for(f.innerHTML=S;y=f.firstChild,y;)o.appendChild(y);return this.setDOMContent(o)}getMaxWidth(){var S;return(S=this._container)===null||S===void 0?void 0:S.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=B.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(S),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(S){return this._container&&this._container.classList.add(S),this}removeClassName(S){return this._container&&this._container.classList.remove(S),this}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){if(this._container)return this._container.classList.toggle(S)}setSubpixelPositioning(S){this.options.subpixelPositioning=S}_createCloseButton(){this.options.closeButton&&(this._closeButton=B.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const S=this._container.querySelector(JA);S&&S.focus()}},c.RasterDEMTileSource=Pt,c.RasterTileSource=Et,c.ScaleControl=class{constructor(S){this._onMove=()=>{zu(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,zu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Dh),S)}getDefaultPosition(){return"bottom-left"}onAdd(S){return this._map=S,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){B.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=zi,c.Style=Ms,c.TerrainControl=class{constructor(S){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=S}onAdd(S){return this._map=S,this._container=B.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=B.create("button","maplibregl-ctrl-terrain",this._container),B.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){B.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=Ai,c.TwoFingersTouchRotateHandler=Er,c.TwoFingersTouchZoomHandler=Ar,c.TwoFingersTouchZoomRotateHandler=si,c.VectorTileSource=ze,c.VideoSource=Wr,c.addSourceType=(S,o)=>s._(void 0,void 0,void 0,function*(){if(Gr(S))throw new Error(`A source type called "${S}" already exists.`);((f,y)=>{ti[f]=y})(S,o)}),c.clearPrewarmedResources=function(){const S=fe;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(De),fe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=yl,c.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return Xr().getRTLTextPluginStatus()},c.getVersion=function(){return lc},c.getWorkerCount=function(){return tt.workerCount},c.getWorkerUrl=function(){return s.a.WORKER_URL},c.importScriptInWorkers=function(S){return lt().broadcast("IS",S)},c.prewarm=function(){we().acquire(De)},c.setMaxParallelImageRequests=function(S){s.a.MAX_PARALLEL_IMAGE_REQUESTS=S},c.setRTLTextPlugin=function(S,o){return Xr().setRTLTextPlugin(S,o)},c.setWorkerCount=function(S){tt.workerCount=S},c.setWorkerUrl=function(S){s.a.WORKER_URL=S}});var a=r;return a})}(g_)),g_.exports}var moe=poe();const bf=c4(moe),Wy=()=>{const{user:e,isAuthorized:t}=Ma(),r=Va(),[i,n]=_e.useState(!0),[a,c]=_e.useState(!0),[s,d]=_e.useState(!1),[g,x]=_e.useState({service:"",rate:"",description:""}),[C,N]=_e.useState(!1),[B,M]=_e.useState({}),[I,R]=_e.useState([]),[D,V]=_e.useState(""),[G,Z]=_e.useState(!1),[X,le]=_e.useState({name:"",phone:"",service:"",cost:0,date:"",address:""}),[ae,ce]=_e.useState([]),[se,ue]=_e.useState(!1),[re,W]=_e.useState(""),[de,Ee]=_e.useState(null),[Ne,ge]=_e.useState(null),[Pe,Ye]=_e.useState(null),[Me,De]=_e.useState([]),[tt,ee]=_e.useState(!0),fe=_e.useRef(null),pe=_e.useRef(null),we=_e.useRef(null),Le=_e.useRef({});_e.useEffect(()=>{(async()=>{try{if(!t||!e){console.log("MyService - User not authenticated or no user data"),n(!1);return}const at=await Cr.get("/user/service-profile");if(at.data.success){const kt=at.data.data;x({service:kt.service||"",rate:kt.rate||"",description:kt.description||""}),kt.service?(V(kt.service),console.log("MyService: Current service profile loaded:",{service:kt.service,rate:kt.rate,description:kt.description})):console.log("MyService: No service name in profile"),c(kt.isOnline!==!1)}}catch{c(!0)}finally{n(!1)}})()},[e,t]),_e.useEffect(()=>{if(!t||!e)return;const Te=async()=>{ue(!0);try{const at=await Cr.get("/user/matching-requests");if(at.data.success&&at.data.requests.length>0){const kt=at.data.requests.filter(ze=>ze.requester?._id!==e._id);ce(kt),W("")}else ce([]),W("No matching requests found.")}catch(at){console.log("User ID:",e._id),at.response&&at.response.status===403?W("Access denied. You must be a Service Provider."):W("No matching requests found."),ce([])}finally{ue(!1)}};return Te(),rn.on("service-request-updated",at=>{console.log("Service request updated:",at),Te()}),()=>{rn.off("service-request-updated")}},[e,t]),_e.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(Te=>{const{latitude:at,longitude:kt}=Te.coords;Ye({lat:at,lng:kt}),ee(!1)},Te=>{Te.code!==2&&console.warn("Geolocation error:",Te.message||`Error code: ${Te.code}`),Te.code===1&&Qr.error("Location permission denied. Using default map view."),ee(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):ee(!1)},[]),_e.useEffect(()=>{if(ae.length>0){const Te=[];for(const at of ae)at.location&&at.location.lat&&at.location.lng&&Te.push({requestId:at._id,coords:{lat:at.location.lat,lng:at.location.lng}});De(Te)}else De([])},[ae]),_e.useEffect(()=>{if(fe.current&&!pe.current&&!tt)try{const Te=Pe?[Pe.lng,Pe.lat]:[121,14];pe.current=new bf.Map({container:fe.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:Te,zoom:Pe?15:12,attributionControl:!0,failIfMajorPerformanceCaveat:!1}),Pe&&(we.current=new bf.Marker({color:"#FF0000",title:"Your Location"}).setLngLat([Pe.lng,Pe.lat]).addTo(pe.current));const at=()=>{pe.current&&pe.current.resize()};return window.addEventListener("resize",at),pe.current.on("load",()=>{console.log("Map loaded successfully")}),pe.current.on("error",kt=>{console.error("Map error:",kt)}),()=>{window.removeEventListener("resize",at),pe.current&&(pe.current.remove(),pe.current=null),Object.values(Le.current).forEach(kt=>kt.remove()),Le.current={}}}catch(Te){console.error("Error initializing map:",Te),ee(!1)}},[Pe,tt]),_e.useEffect(()=>{pe.current&&Pe&&(we.current?we.current.setLngLat([Pe.lng,Pe.lat]):we.current=new bf.Marker({color:"#FF0000"}).setLngLat([Pe.lng,Pe.lat]).addTo(pe.current))},[Pe]),_e.useEffect(()=>{if(pe.current&&(Object.values(Le.current).forEach(Te=>Te.remove()),Le.current={},Me.length>0)){const Te=new bf.LngLatBounds;Pe&&Te.extend([Pe.lng,Pe.lat]),Me.forEach(at=>{const kt=ae.find(ze=>ze._id===at.requestId);if(kt){const ze=new bf.Marker({color:"#007bff",title:`${kt.requester?.firstName} ${kt.requester?.lastName} - ${kt.typeOfWork}`}).setLngLat([at.coords.lng,at.coords.lat]).addTo(pe.current);Le.current[at.requestId]=ze,Te.extend([at.coords.lng,at.coords.lat])}}),pe.current.fitBounds(Te,{padding:50,maxZoom:15})}},[Me,Pe,ae]),_e.useEffect(()=>{(async()=>{if(!t||!e){console.log("MyService: Not authorized or no user, skipping service fetch");return}console.log("MyService: Fetching user services...");try{const at=await Cr.get("/user/services");if(console.log("MyService: User services response:",at.data),at.data.success&&at.data.services&&Array.isArray(at.data.services)){const kt=at.data.services.filter(ze=>ze&&ze.name);if(console.log("MyService: Filtered services:",kt),console.log("MyService: Services count:",kt.length),kt.length>0)R(kt),console.log("MyService: Set predefinedServices to user services");else{console.log("MyService: User has no services in array, fetching predefined services...");try{const ze=await Cr.get("/user/predefined-services");if(ze.data.success){const Et=ze.data.services||[];R(Et),console.log("MyService: Set predefinedServices to fallback:",Et.length)}}catch(ze){console.error("MyService: Error fetching fallback services:",ze)}}}else{console.log("MyService: Invalid response structure, trying fallback...");try{const kt=await Cr.get("/user/predefined-services");kt.data.success&&(R(kt.data.services||[]),console.log("MyService: Set predefinedServices from fallback"))}catch(kt){console.error("MyService: Error fetching fallback services:",kt)}}}catch(at){console.error("MyService: Error fetching user services:",at),console.error("MyService: Error details:",at.response?.data||at.message);try{const kt=await Cr.get("/user/predefined-services");kt.data.success&&(R(kt.data.services||[]),console.log("MyService: Set predefinedServices from error fallback"))}catch(kt){console.error("MyService: Error fetching fallback services:",kt),Qr.error("Failed to load services")}}})()},[e,t]);const lt=async Te=>{if(!Te){V("");return}console.log("MyService: Service selected:",Te),console.log("MyService: Available services:",I);const at=I.find(kt=>kt.name===Te);if(console.log("MyService: Found service:",at),at){Z(!0);try{(await Cr.post("/user/service-profile",{service:Te,rate:at.rate||0,description:at.description||""})).data.success&&(x({service:Te,rate:at.rate||0,description:at.description||""}),V(Te),Qr.success("Service profile updated successfully"),console.log("MyService: Service profile updated successfully"))}catch(kt){console.error("MyService: Error updating service profile:",kt),Qr.error(kt.response?.data?.message||"Failed to update service profile")}finally{Z(!1)}}else console.warn("MyService: Selected service not found in predefined services:",Te),console.warn("MyService: Available service names:",I.map(kt=>kt.name)),Qr.error("Selected service not found in your services list")},rt=async()=>{if(s)return;const Te=!a;d(!0);try{(await Cr.put("/user/service-status",{isOnline:Te})).data.success&&(c(Te),Qr.success(`Status updated to ${Te?"Online":"Offline"}`),Te&&e?(async()=>{ue(!0);try{const ze=await Cr.get("/user/matching-requests");if(ze.data.success&&ze.data.requests.length>0){const Et=ze.data.requests.filter(Pt=>Pt.requester?._id!==e._id);ce(Et),W("")}else ce([]),W("No matching requests found.")}catch{W("No matching requests found."),ce([])}finally{ue(!1)}})():Te||ce([]))}catch(at){console.error("Failed to update status:",at),Qr.error(at.response?.data?.message||"Failed to update status")}finally{d(!1)}},gt=async Te=>{if(de!==Te){Ee(Te);try{const at=await Cr.post(`/user/service-request/${Te}/accept`);if(at.data.success){Qr.success("Request accepted successfully!");const kt=ae.find(ze=>ze._id===Te);ce(ze=>ze.filter(Et=>Et._id!==Te)),Le.current[Te]&&(Le.current[Te].remove(),delete Le.current[Te]),De(ze=>ze.filter(Et=>Et.requestId!==Te)),r("/user/client-accepted",{state:{request:kt||at.data.request,requestId:Te}})}}catch(at){console.error("Failed to accept request:",at),Qr.error(at.response?.data?.message||"Failed to accept request")}finally{Ee(null)}}},dt=async Te=>{if(Ne===Te)return;ge(Te);let at=!1;try{try{(await Cr.post(`/user/service-request/${Te}/decline`)).data.success&&(at=!0)}catch{console.log("Decline endpoint not available, removing locally"),at=!0}ce(kt=>kt.filter(ze=>ze._id!==Te)),Le.current[Te]&&(Le.current[Te].remove(),delete Le.current[Te]),De(kt=>kt.filter(ze=>ze.requestId!==Te)),at&&Qr.success("Request declined")}catch(kt){console.error("Failed to decline request:",kt),Qr.error("Failed to decline request")}finally{ge(null)}},qt=async()=>{if(!B.service||!B.service.trim()){Qr.error("Service name is required");return}try{(await Cr.post("/user/service-profile",{service:B.service.trim(),rate:B.rate||0,description:B.description||""})).data.success&&(x({...B}),V(B.service),N(!1),Qr.success("Service profile updated successfully"))}catch(Te){console.error("Failed to update service profile:",Te),Qr.error(Te.response?.data?.message||"Failed to update service profile")}};return!t||!e?p.jsx("div",{className:"my-service-container",children:p.jsxs("div",{className:"auth-required",children:[p.jsx("div",{className:"auth-icon",children:""}),p.jsx("h3",{children:"Authentication Required"}),p.jsx("p",{children:"Please log in to access your service statistics."}),p.jsx("button",{className:"btn-primary",onClick:()=>window.location.href="/login",children:"Go to Login"})]})}):p.jsxs("div",{className:"my-service-container",children:[p.jsxs("div",{className:"main-layout",children:[p.jsxs("div",{className:"left-column",children:[p.jsxs("div",{className:"services-section",children:[p.jsx("h3",{children:"Your Services:"}),p.jsxs("div",{className:"service-controls",children:[p.jsxs("select",{value:D,onChange:Te=>lt(Te.target.value),className:"form-input",disabled:G,children:[p.jsx("option",{value:"",children:"Select a service"}),I&&I.length>0?I.map(Te=>{const at=Te.name||"",kt=Te.rate||0;return p.jsxs("option",{value:at,children:[at," ",kt?`(${kt})`:""]},Te._id||at||Math.random())}):p.jsx("option",{value:"",disabled:!0,children:i?"Loading services...":"No services available"})]}),I&&I.length>0&&p.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:[I.length," service",I.length!==1?"s":""," available"]}),G&&p.jsx("span",{style:{fontSize:"12px",color:"#666"},children:"Updating..."}),p.jsxs("div",{className:"status-toggle",children:[p.jsx("span",{className:`status-text ${a?"online":"offline"}`,children:a?"Online":"Offline"}),p.jsxs("label",{className:"toggle-switch",children:[p.jsx("input",{type:"checkbox",checked:a,onChange:rt,disabled:s}),p.jsx("span",{className:"toggle-slider"})]}),s&&p.jsx("span",{style:{fontSize:"12px",color:"#666",marginLeft:"8px"},children:"Updating..."})]})]}),p.jsxs("div",{className:"service-info",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Service:"})," ",g.service]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Rate:"})," ",g.rate]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Description:"})," ",g.description]})]})]}),p.jsxs("div",{className:"client-request-section",children:[se?p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Loading matching requests..."})]}):a?ae.length>0?p.jsxs("div",{className:"requests-list",children:[p.jsxs("h4",{children:["Matching Requests (",ae.length,")"]}),ae.map(Te=>p.jsxs("div",{className:"request-card",children:[p.jsxs("div",{className:"request-header",children:[p.jsx("span",{children:"Client Request"}),p.jsx("span",{children:new Date(Te.time).toLocaleDateString()})]}),p.jsxs("div",{className:"request-details",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Name:"})," ",Te.requester?.firstName," ",Te.requester?.lastName]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Phone:"})," ",Te.requester?.phone]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Service Needed:"})," ",Te.typeOfWork]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Budget:"})," ",Te.budget]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Address:"})," ",Te.address]})]}),p.jsxs("div",{className:"request-actions",children:[p.jsx("button",{className:"btn-primary",onClick:()=>gt(Te._id),disabled:de===Te._id||Ne===Te._id,children:de===Te._id?"Accepting...":"Accept"}),p.jsx("button",{className:"btn-primary",onClick:()=>dt(Te._id),disabled:de===Te._id||Ne===Te._id,style:{background:"#dc3545"},children:Ne===Te._id?"Declining...":"Decline"})]})]},Te._id))]}):p.jsx("div",{className:"no-requests",children:p.jsx("p",{children:re||"No matching requests found. Requests will appear here when a client's budget matches your service rate."})}):p.jsx("div",{className:"offline-message",children:p.jsx("p",{children:"You are currently offline and cannot receive new requests. Please go online to start receiving requests."})}),p.jsx("div",{className:"orders-note",children:p.jsx("p",{children:"*Every order will show below the service provider info - Scrollable so you can see if there's a lot of booking*"})})]})]}),p.jsx("div",{className:"right-column",children:p.jsx("div",{className:"map-section",children:tt?p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Getting your current location..."})]}):p.jsx("div",{ref:fe,className:"map-container",children:!pe.current&&!tt&&p.jsx("div",{className:"map-loading-overlay",children:p.jsxs("div",{className:"map-loading-content",children:[p.jsx("div",{children:""}),p.jsx("p",{children:"Map loading..."}),p.jsx("p",{children:"If map doesn't load, please refresh the page."})]})})})})})]}),C&&p.jsx("div",{className:"modal-overlay",onClick:()=>N(!1),children:p.jsxs("div",{className:"modal-content",onClick:Te=>Te.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{children:"Edit Service Information"}),p.jsx("button",{className:"close-modal",onClick:()=>N(!1),children:""})]}),p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Service:"}),p.jsx("input",{type:"text",value:B.service,onChange:Te=>M({...B,service:Te.target.value}),className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Rate:"}),p.jsx("input",{type:"number",value:B.rate,onChange:Te=>M({...B,rate:parseFloat(Te.target.value)||""}),className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Description:"}),p.jsx("textarea",{value:B.description,onChange:Te=>M({...B,description:Te.target.value}),className:"form-input",rows:"4"})]})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"btn-secondary",onClick:()=>N(!1),children:"Cancel"}),p.jsx("button",{className:"btn-primary",onClick:qt,children:"Save"})]})]})})]})},goe=()=>{const{isAuthorized:e,user:t}=Ma(),r=Va(),[i,n]=_e.useState({name:t.firstName+" "+t.lastName,address:"",phone:t?.phone||"",typeOfWork:"",time:"",budget:"",notes:"",preferredDate:""}),[a,c]=_e.useState({lat:14.5995,lng:120.9842}),s=_e.useRef(null),[d,g]=_e.useState(null),x=_e.useRef(null),[C,N]=_e.useState(null),[B,M]=_e.useState(""),I=V=>n({...i,[V.target.name]:V.target.value}),R=async()=>{if(!navigator.geolocation){N("Geolocation is not supported by this browser.");return}N(null),navigator.geolocation.getCurrentPosition(async V=>{const{latitude:G,longitude:Z}=V.coords;c({lat:G,lng:Z}),d&&d.flyTo({center:[Z,G],zoom:15});try{const X=await Cr.get(`/user/reverse-geocode?lat=${G}&lon=${Z}`,{withCredentials:!0});if(X.data.success&&X.data.address)M(X.data.address),n(le=>({...le,address:X.data.address}));else throw new Error("No address found")}catch(X){console.error("Reverse geocoding failed:",X);const le=`${G.toFixed(6)}, ${Z.toFixed(6)}`;M(le),n(ae=>({...ae,address:le}))}},V=>{switch(V.code){case V.PERMISSION_DENIED:N("Location access denied by user.");break;case V.POSITION_UNAVAILABLE:N("Location information is unavailable.");break;case V.TIMEOUT:N("Location request timed out.");break;default:N("An unknown error occurred.");break}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})};_e.useEffect(()=>{if(s.current&&!d){const V=new bf.Map({container:s.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[a.lng,a.lat],zoom:15});V.on("load",()=>{g(V),x.current=new bf.Marker({color:"#ff0000"}).setLngLat([a.lng,a.lat]).addTo(V)}),V.on("click",async G=>{const{lng:Z,lat:X}=G.lngLat;c({lat:X,lng:Z}),x.current&&x.current.setLngLat([Z,X]);try{const le=await Cr.get(`/user/reverse-geocode?lat=${X}&lon=${Z}`,{withCredentials:!0});if(le.data.success&&le.data.address)M(le.data.address),n(ae=>({...ae,address:le.data.address}));else throw new Error("No address found")}catch(le){console.error("Reverse geocoding failed:",le);const ae=`${X.toFixed(6)}, ${Z.toFixed(6)}`;M(ae),n(ce=>({...ce,address:ae}))}})}return()=>{d&&(d.remove(),g(null)),x.current&&(x.current.remove(),x.current=null)}},[]),_e.useEffect(()=>{x.current&&x.current.setLngLat([a.lng,a.lat])},[a]);const D=async V=>{if(V.preventDefault(),!e)return Qr.error("You must log in to submit a service request");try{const G={name:i.name,address:i.address,phone:i.phone,typeOfWork:i.typeOfWork,preferredDate:i.preferredDate,time:i.time,budget:i.budget,notes:i.notes,location:a},X={_id:(await Cr.post("/user/post-service-request",G,{withCredentials:!0})).data.request._id,name:i.name,address:i.address,phone:i.phone,typeOfWork:i.typeOfWork,preferredDate:i.preferredDate,time:i.time,budget:i.budget,notes:i.notes,location:a,status:"Available"};r("/user/waiting-for-worker",{state:{requestData:X}}),n({name:t.firstName+" "+t.lastName,address:"",phone:t?.phone,typeOfWork:"",preferredDate:"",time:"",budget:"",notes:""}),c({lat:14.5995,lng:120.9842}),x.current&&x.current.setLngLat([120.9842,14.5995])}catch(G){Qr.error(G.response?.data?.message||"Failed to submit service request.")}};return p.jsxs("section",{className:"requestForm-container",children:[p.jsx("h2",{className:"requestForm-title",children:"Submit a Service Request"}),p.jsxs("div",{className:"request-form-layout",children:[p.jsx("div",{children:p.jsxs("form",{onSubmit:D,className:"requestForm-form",children:[p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Name"}),p.jsx("input",{type:"text",name:"name",value:i.name,disabled:!0,placeholder:"Your name",required:!0})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Type of work"}),p.jsxs("select",{name:"typeOfWork",value:i.typeOfWork,onChange:I,required:!0,children:[p.jsx("option",{value:"",children:"-- Select Type of Work --"}),p.jsx("option",{value:"Plumbing",children:"Plumbing"}),p.jsx("option",{value:"Electrical",children:"Electrical"}),p.jsx("option",{value:"Cleaning",children:"Cleaning"}),p.jsx("option",{value:"Carpentry",children:"Carpentry"}),p.jsx("option",{value:"Painting",children:"Painting"}),p.jsx("option",{value:"Appliance Repair",children:"Appliance Repair"}),p.jsx("option",{value:"Home Renovation",children:"Home Renovation"}),p.jsx("option",{value:"Pest Control",children:"Pest Control"}),p.jsx("option",{value:"Gardening & Landscaping",children:"Gardening & Landscaping"}),p.jsx("option",{value:"Air Conditioning & Ventilation",children:"Air Conditioning & Ventilation"}),p.jsx("option",{value:"Laundry / Labandera",children:"Laundry / Labandera"})]})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Notes to worker"}),p.jsx("textarea",{name:"notes",value:i.notes,onChange:I,rows:"3",placeholder:"Notes to worker...",required:!0})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Budget ()"}),p.jsx("input",{type:"number",name:"budget",value:i.budget,onChange:I,min:"0"})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Address"}),p.jsx("input",{type:"text",name:"address",value:i.address,onChange:I,placeholder:"Your address",required:!0})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Phone No."}),p.jsx("input",{type:"tel",name:"phone",value:i.phone,disabled:!0,placeholder:t?.phone?t.phone:"+63",required:!0})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Preferred Date"}),p.jsx("input",{type:"date",name:"preferredDate",value:i.preferredDate,onChange:I,required:!0})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Time"}),p.jsx("input",{type:"time",name:"time",value:i.time,onChange:I,required:!0})]}),p.jsx("button",{type:"submit",className:"requestForm-submitBtn",children:"Post Request"})]})}),p.jsxs("div",{className:"map-section",children:[p.jsxs("div",{className:"location-controls",children:[p.jsx("button",{type:"button",onClick:R,className:"location-button",children:" Use My Location"}),C&&p.jsx("div",{className:"location-error",children:C}),B&&p.jsxs("div",{className:"address-detected",children:[p.jsx("strong",{children:"Detected Address:"})," ",B,p.jsx("button",{type:"button",onClick:()=>{n(V=>({...V,address:B})),M("")},className:"use-address-button",children:"Use This Address"})]})]}),p.jsx("div",{ref:s,className:"map-container"})]})]})]})},IL=_e.createContext(),UB=()=>{const e=_e.useContext(IL);if(!e)throw new Error("usePopup must be used within a PopupProvider");return e},voe=({children:e})=>{const[t,r]=_e.useState([]),i=(c,s="info",d=3e3,g="")=>{const x=Date.now()+Math.random(),C={id:x,message:c,type:s,title:g,duration:d};return r(N=>[...N,C]),d>0&&setTimeout(()=>{r(N=>N.filter(B=>B.id!==x))},d),x},n=(c,s="",d,g)=>{const x=prompt(c+(s?`
${s}`:""));x!==null?d&&d(x):g&&g()},a=c=>{r(s=>s.filter(d=>d.id!==c))};return p.jsx(IL.Provider,{value:{showNotification:i,showInput:n,removeNotification:a,notifications:t},children:e})},xoe=({request:e,isOpen:t,onClose:r,onChat:i,onDelete:n,onAccept:a,onDecline:c})=>{if(!t||!e)return null;const s=x=>{switch(x){case"Available":case"Waiting":case"Open":return"status-open";case"Working":return"status-working";case"Complete":case"Completed":return"status-completed";case"Cancelled":return"status-cancelled";default:return"status-default"}},d=x=>x?new Date(x).toLocaleDateString():"Not specified",g=x=>x||"Not specified";return p.jsx("div",{className:"popup-overlay",onClick:r,children:p.jsxs("div",{className:"popup-content",onClick:x=>x.stopPropagation(),children:[p.jsxs("div",{className:"popup-header",children:[p.jsx("h2",{children:"Request Details"}),p.jsx("button",{className:"close-button",onClick:r,children:""})]}),p.jsxs("div",{className:"popup-body",children:[p.jsxs("div",{className:"request-info-section",children:[p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Status:"}),p.jsx("span",{className:`status-badge ${s(e.status)}`,children:e.status==="Waiting"?"Available":e.status==="Completed"?"Complete":e.status==="Open"?"Available":e.status})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Date:"}),p.jsx("span",{children:d(e.createdAt)})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Time:"}),p.jsx("span",{children:g(e.time)})]})]}),p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Service Needed:"}),p.jsx("span",{className:"service-title",children:e.typeOfWork})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Budget:"}),p.jsxs("span",{className:"budget",children:["",e.budget||"0"]})]})]}),p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Client:"}),p.jsx("span",{children:e.requester?`${e.requester.firstName||""} ${e.requester.lastName||""}`.trim()||e.requester.username||"Unknown Client":"N/A"})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Phone:"}),p.jsx("span",{children:e.phone||"Not provided"})]})]}),e.serviceProvider&&p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Service Provider:"}),p.jsx("span",{children:e.serviceProvider.firstName&&e.serviceProvider.lastName?`${e.serviceProvider.firstName} ${e.serviceProvider.lastName}`:e.serviceProvider.username||"Unknown Provider"})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Contact:"}),p.jsx("span",{children:e.serviceProvider.phone||"Not provided"})]})]}),p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Address:"}),p.jsx("span",{children:e.address||"Not specified"})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Preferred Time:"}),p.jsx("span",{children:e.time||"Not specified"})]})]}),e.notes&&p.jsx("div",{className:"info-row",children:p.jsxs("div",{className:"info-group full-width",children:[p.jsx("label",{children:"Notes:"}),p.jsx("span",{className:"notes",children:e.notes})]})}),p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Estimated Service Cost:"}),p.jsxs("span",{children:["",e.budget||"0"]})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Matched Rate:"}),p.jsxs("span",{className:"match-rate",children:["",e.serviceProvider?.serviceRate||"Not set"]})]})]})]}),p.jsxs("div",{className:"popup-actions",children:[e.serviceRequest?e.serviceProvider&&p.jsx("button",{className:"modal-button",onClick:()=>i&&i(e),children:"Chat"}):e.status==="Available"||e.status==="Waiting"||e.status==="Open"?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"modal-button accept",onClick:x=>a&&a(e,x),children:"Accept"}),p.jsx("button",{className:"modal-button decline",onClick:x=>c&&c(e,x),children:"Decline"})]}):e.status==="Working"||e.status==="Complete"?p.jsx("button",{className:"modal-button",onClick:()=>i&&i(e),children:"Chat"}):e.status==="Cancelled"?p.jsx("span",{className:"modal-button cancelled",style:{backgroundColor:"#f0f0f0",color:"#999",cursor:"default"},children:"Cancelled"}):p.jsx("button",{className:"modal-button",onClick:()=>{},children:"Edit"}),!e.serviceRequest&&e.status!=="Cancelled"&&e.status!=="Complete"&&e.status!=="Available"&&e.status!=="Waiting"&&e.status!=="Open"&&p.jsx("button",{className:"modal-button",onClick:()=>n&&n(e),children:"Cancel"}),p.jsx("button",{className:"modal-button",onClick:r,children:"Close"})]})]})]})})},yoe=({request:e,isOpen:t,onClose:r})=>{const{openChat:i,user:n}=Ma(),{showNotification:a}=UB(),[c,s]=_e.useState(null),[d,g]=_e.useState(!1);if(!t||!e)return null;const x=async()=>{if(e?._id&&window.confirm("Are you sure you want to cancel this order?"))try{(await Cr.delete(`/user/service-request/${e._id}/cancel`)).data.success?(a("Order cancelled successfully","success",3e3,"Success"),r()):a("Failed to cancel the order. Please try again.","error",4e3,"Error")}catch(D){console.error("Error cancelling order:",D),a("Failed to cancel the order. Please try again.","error",4e3,"Error")}},C=async()=>{if(e.serviceProvider)try{const G=((await Cr.get("/user/bookings")).data.bookings||[]).find(Z=>Z.serviceRequest&&Z.serviceRequest._id===e._id);G?(i(G._id),a(`Opening chat with ${e.serviceProvider.firstName}`,"success",2e3,"Success")):a("No active booking found for this request.","error",3e3,"Error")}catch(D){console.error("Error finding booking for chat:",D),a("Failed to open chat. Please try again.","error",4e3,"Error")}else a("No service provider assigned for chat.","info",3e3,"Info")},N=async()=>{if(c){g(!0);try{const G=((await Cr.get("/user/bookings")).data.bookings||[]).find(X=>X.serviceRequest&&X.serviceRequest._id===e._id);if(!G){a("No active booking found.","error",3e3,"Error");return}(await Cr.put(`/user/booking/${G._id}/status`,{status:"Complete"})).data.success?(a("Work completed successfully","success",3e3,"Success"),r()):a("Failed to complete work.","error",3e3,"Error")}catch(D){console.error("Error completing work:",D),a("Failed to complete work.","error",3e3,"Error")}finally{g(!1)}}},B=D=>D?new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",M=e?.serviceProvider,I=e?.status?.toLowerCase()||"accepted",R=n&&M&&String(n._id)===String(M._id);return p.jsx("div",{className:"popup-overlay",onClick:r,children:p.jsx("div",{className:"popup-content accepted-order-popup",onClick:D=>D.stopPropagation(),children:p.jsxs("div",{className:"popup-body",children:[p.jsxs("div",{className:"accepted-order-header",children:[p.jsx("h1",{className:"header-title",children:"Service Order"}),p.jsxs("p",{className:"header-subtitle",children:["Order #",e?._id?.slice(-8)||"N/A"]}),p.jsx("span",{className:`status-badge ${I}`,children:e?.status||"Accepted"})]}),p.jsxs("div",{className:"content-card",children:[p.jsx("h2",{className:"section-header",children:"Order Information"}),p.jsxs("div",{className:"info-grid",children:[p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-label",children:"Service Date"}),p.jsx("div",{className:"info-value",children:B(e?.createdAt)})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-label",children:"Preferred Time"}),p.jsx("div",{className:"info-value",children:e?.time||"N/A"})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-label",children:"Service Type"}),p.jsx("div",{className:"info-value",children:e?.typeOfWork||"N/A"})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-label",children:"Budget"}),p.jsxs("div",{className:"info-value budget",children:["",e?.budget||"N/A"]})]})]})]}),p.jsxs("div",{className:"content-card",children:[p.jsx("h2",{className:"section-header",children:"Customer Details"}),p.jsxs("div",{className:"info-grid",children:[p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-label",children:"Full Name"}),p.jsx("div",{className:"info-value",children:e?.name||"N/A"})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-label",children:"Phone Number"}),p.jsx("div",{className:"info-value",children:e?.phone||"N/A"})]})]}),p.jsxs("div",{className:"info-item",style:{marginTop:"15px"},children:[p.jsx("div",{className:"info-label",children:"Service Address"}),p.jsx("div",{className:"info-value",children:e?.address||"N/A"})]})]}),p.jsxs("div",{className:"content-card",children:[p.jsx("h2",{className:"section-header",children:"Provider Details"}),p.jsxs("div",{className:"info-grid",children:[p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-label",children:"Full Name"}),p.jsxs("div",{className:"info-value",children:[M?.firstName," ",M?.lastName]})]}),R&&p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-label",children:"Phone Number"}),p.jsx("div",{className:"info-value",children:M?.phone||"N/A"})]})]})]}),p.jsxs("div",{className:"content-card",children:[p.jsx("h2",{className:"section-header",children:"Additional Details"}),e?.notes&&p.jsxs("div",{className:"notes-section",children:[p.jsx("span",{className:"notes-label",children:"Special Instructions"}),p.jsx("div",{className:"notes-content",children:e.notes})]})]}),n?.role==="Service Provider"&&R&&e?.status==="Working"&&p.jsxs("div",{className:"work-confirmation-section",children:[p.jsx("h4",{children:"Complete Work"}),p.jsxs("div",{className:"work-confirmation-form",children:[p.jsx("input",{type:"file",accept:"image/*",onChange:D=>s(D.target.files[0]),style:{marginBottom:"10px"}}),p.jsx("button",{className:"confirm-work-btn",onClick:N,disabled:d||!c,children:d?"Completing...":"Confirm Work Done"})]})]}),p.jsxs("div",{className:"popup-actions",children:[p.jsx("button",{className:"action-button chat-button",onClick:C,children:" Chat with Worker"}),p.jsx("button",{className:"action-button cancel-button",onClick:x,children:" Cancel Order"}),p.jsx("button",{className:"modal-button",onClick:r,children:"Close"})]})]})})})},_oe=({searchTerm:e,filterStatus:t,filterServiceType:r,filterBudgetRange:i,handleRequestClick:n,handleChatRequest:a,handleEditRequest:c,handleCancelRequest:s,getStatusClass:d})=>{const g=Va(),[x,C]=_e.useState([]),[N,B]=_e.useState(!0),[M,I]=_e.useState(null),R=async()=>{try{const{data:X}=await Cr.get("/user/user-service-requests",{withCredentials:!0});C(X.requests||[])}catch(X){console.error("Error fetching my requests:",X),I(X.message)}finally{B(!1)}};_e.useEffect(()=>(R(),rn.on("service-request-updated",()=>{R()}),()=>{rn.off("service-request-updated")}),[]);const D=X=>X==="Waiting"?"Available":X==="Completed"?"Complete":X,V=X=>X?X.toString().toLowerCase():"",G=x.filter(X=>{const le=e?.toLowerCase()||"",ae=V(X.typeOfWork).includes(le)||V(X.name).includes(le)||V(X.budget).includes(le)||V(X.address).includes(le)||V(X.phone).includes(le)||V(X.notes).includes(le),ce=D(X.status),se=t==="All"||ce===t,ue=r==="All"||X.typeOfWork===r,re=(!i.min||X.budget>=parseFloat(i.min))&&(!i.max||X.budget<=parseFloat(i.max));return ae&&se&&ue&&re}),Z=X=>{D(X.status)==="Available"?g("/user/waiting-for-worker",{state:{requestData:X}}):n(X)};return N?p.jsx("div",{className:"records-loading",children:"Loading records..."}):M?p.jsx("div",{className:"records-error",children:M}):p.jsx(p.Fragment,{children:G.length===0?p.jsxs("div",{className:"no-results",children:[p.jsx("img",{src:"/records.png",alt:"No results",style:{width:100,height:100,opacity:.5,marginBottom:10}}),p.jsx("p",{children:"No My Requests Found"})]}):p.jsxs("table",{className:"records-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Status"}),p.jsx("th",{children:"Request Date"}),p.jsx("th",{children:"Service Needed"}),p.jsx("th",{children:"Budget"}),p.jsx("th",{children:"Preferred Time"}),p.jsx("th",{children:"Address"})]})}),p.jsx("tbody",{children:G.map(X=>(D(X.status),p.jsxs("tr",{className:"request-row",onClick:()=>Z(X),children:[p.jsx("td",{children:p.jsx("span",{className:`status-tag ${d(X.status)}`,children:X.status==="Waiting"?"Pending":X.status==="Completed"?"Complete":X.status==="Open"?"Pending":X.status})}),p.jsx("td",{children:p.jsx("div",{className:"date",children:X.createdAt?new Date(X.createdAt).toLocaleDateString():"-"})}),p.jsx("td",{children:X.typeOfWork}),p.jsxs("td",{children:["",X.budget||"0"]}),p.jsx("td",{children:X.time||"Not specified"}),p.jsx("td",{children:X.address||"Not specified"})]},X._id)))})]})})},boe=({searchTerm:e,filterStatus:t,filterServiceType:r,filterBudgetRange:i,handleRequestClick:n,handleAcceptRequest:a,handleDeclineRequest:c,getStatusClass:s})=>{const{user:d}=Ma(),[g,x]=_e.useState([]),[C,N]=_e.useState(!0),[B,M]=_e.useState(null),I=async()=>{try{const{data:D}=await Cr.get("/user/matching-requests",{withCredentials:!0});x(D.requests||[])}catch(D){console.error("Error fetching requests:",D),M(D.message)}finally{N(!1)}};_e.useEffect(()=>(I(),rn.on("service-request-updated",D=>{console.log("Service request updated:",D),I()}),()=>{rn.off("service-request-updated")}),[]);const R=g.filter(D=>{if(!D)return console.warn("Invalid request structure:",D),!1;const V=D.status==="Available"||D.status==="Waiting"||D.status==="Open";if(!V)return!1;const G=D.requester?._id!==d._id&&D.requesterId!==d._id;if(!G)return console.log("Excluding own request:",D._id,"Requester:",D.requester?._id,"Current user:",d._id),!1;const Z=e.toLowerCase(),X=D.typeOfWork?.toLowerCase().includes(Z)||D.requester?.firstName?.toLowerCase().includes(Z)||D.requester?.lastName?.toLowerCase().includes(Z)||D.name?.toLowerCase().includes(Z)||D.budget?.toString().includes(e)||D.address?.toLowerCase().includes(Z)||D.phone?.toLowerCase().includes(Z)||D.notes?.toLowerCase().includes(Z),le=D.status==="Waiting"?"Available":D.status==="Completed"?"Complete":D.status,ae=t==="All"||le===t,ce=r==="All"||D.typeOfWork===r,se=(!i.min||D.budget>=parseFloat(i.min))&&(!i.max||D.budget<=parseFloat(i.max)),ue=V&&G&&X&&ae&&ce&&se;return ue&&console.log("Request passed filter:",D._id,"Status:",D.status,"Not own request:",G),ue});return C?p.jsx("div",{className:"records-loading",children:"Loading records..."}):B?p.jsx("div",{className:"records-error",children:B}):p.jsx(p.Fragment,{children:R.length===0?p.jsxs("div",{className:"no-results",children:[p.jsx("img",{src:"/records.png",alt:"No results",style:{width:100,height:100,opacity:.5,marginBottom:10}}),p.jsx("p",{children:"No Available Requests Found"})]}):p.jsxs("table",{className:"records-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Status"}),p.jsx("th",{children:"Request Date"}),p.jsx("th",{children:"Client"}),p.jsx("th",{children:"Service Needed"}),p.jsx("th",{children:"Budget"}),p.jsx("th",{children:"Preferred Time"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:R.map(D=>p.jsxs("tr",{onClick:()=>n(D),style:{cursor:"pointer"},children:[p.jsx("td",{children:p.jsx("span",{className:`status-tag ${s(D.status)}`,children:D.status==="Waiting"?"Available":D.status==="Completed"?"Complete":D.status==="Open"?"Available":D.status})}),p.jsx("td",{children:p.jsx("div",{className:"date",children:D.createdAt?new Date(D.createdAt).toLocaleDateString():"-"})}),p.jsx("td",{children:D.requester?`${D.requester.firstName||""} ${D.requester.lastName||""}`.trim()||D.requester.username||"Unknown Client":"N/A"}),p.jsx("td",{children:D.typeOfWork}),p.jsxs("td",{children:["",D.budget||"0"]}),p.jsx("td",{children:D.time||"Not specified"}),p.jsx("td",{children:p.jsxs("div",{className:"request-actions",children:[p.jsx("button",{className:"action-btn accept",onClick:V=>{V.stopPropagation(),a(D,V)},children:"Accept"}),p.jsx("button",{className:"action-btn decline",onClick:V=>{V.stopPropagation(),c(D,V)},children:"Decline"})]})})]},D._id))})]})})},woe=({searchTerm:e,filterStatus:t,filterServiceType:r,filterBudgetRange:i,handleRequestClick:n,getStatusClass:a})=>{const{user:c}=Ma(),[s,d]=_e.useState([]),[g,x]=_e.useState(!0),[C,N]=_e.useState(null),B=async()=>{try{x(!0);const{data:I}=await Cr.get("/user/service-requests");d(I.serviceRequests||[])}catch(I){console.error("Error fetching records:",I),N(I.message)}finally{x(!1)}};_e.useEffect(()=>(B(),rn.on("service-request-updated",I=>{console.log("Service request updated:",I),B()}),()=>{rn.off("service-request-updated")}),[]);const M=s.filter(I=>{if(!I)return console.warn("Null record found"),!1;if(!I.serviceRequest)return console.log("Skipping record without serviceRequest:",I._id,"Status:",I.status),!1;if(!(I.provider?._id===c._id))return console.log("Skipping record where user is not service provider:",I._id,"Provider:",I.provider?._id,"Current user:",c._id),!1;const D=e.toLowerCase(),V=I.serviceRequest?.typeOfWork?.toLowerCase().includes(D)||I.requester?.firstName?.toLowerCase().includes(D)||I.requester?.lastName?.toLowerCase().includes(D)||I.serviceRequest?.budget?.toString().includes(e)||I.serviceRequest?.address?.toLowerCase().includes(D)||I.serviceRequest?.time?.toLowerCase().includes(D),G=I.status==="Waiting"?"Available":I.status==="Completed"?"Complete":I.status,Z=t==="All"||G===t,X=r==="All"||I.serviceRequest?.typeOfWork===r,le=(!i.min||I.serviceRequest?.budget>=parseFloat(i.min))&&(!i.max||I.serviceRequest?.budget<=parseFloat(i.max)),ae=V&&Z&&X&&le;return ae&&console.log("Work record passed all filters:",I._id,"Status:",I.status,"Service:",I.serviceRequest?.typeOfWork),ae});return g?p.jsx("div",{className:"records-loading",children:"Loading records..."}):C?p.jsx("div",{className:"records-error",children:C}):p.jsx(p.Fragment,{children:M.length===0?p.jsxs("div",{className:"no-results",children:[p.jsx("img",{src:"/records.png",alt:"No results",style:{width:100,height:100,opacity:.5,marginBottom:10}}),p.jsx("p",{children:"No Work Records Found"})]}):p.jsxs("table",{className:"records-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Status"}),p.jsx("th",{children:"Work Time"}),p.jsx("th",{children:"Order Address"}),p.jsx("th",{children:"Client"}),p.jsx("th",{children:"Service Needed"}),p.jsx("th",{children:"Amount"})]})}),p.jsx("tbody",{children:M.map(I=>p.jsxs("tr",{onClick:()=>n(I),style:{cursor:"pointer"},children:[p.jsx("td",{children:p.jsx("span",{className:`status-tag ${a(I.status)}`,children:I.status==="Waiting"?"Available":I.status==="Completed"?"Complete":I.status==="Open"?"Available":I.status})}),p.jsxs("td",{children:[p.jsx("div",{children:I.serviceRequest?.time||"-"}),p.jsx("div",{className:"date",children:I.createdAt?new Date(I.createdAt).toLocaleDateString():"-"})]}),p.jsx("td",{children:I.serviceRequest?.address||"N/A"}),p.jsx("td",{children:I.requester?`${I.requester.firstName} ${I.requester.lastName}`:"N/A"}),p.jsx("td",{children:I.serviceRequest?.typeOfWork||"N/A"}),p.jsxs("td",{children:["",(I.serviceRequest?.budget??0).toLocaleString()]})]},I._id))})]})})},Boe=()=>{const e=Va(),{user:t,openChat:r}=Ma(),{showNotification:i}=UB(),[n,a]=_e.useState(""),[c,s]=_e.useState("All"),[d,g]=_e.useState("All"),[x,C]=_e.useState({min:"",max:""}),[N,B]=_e.useState(!1),[M,I]=_e.useState("my-requests"),[R,D]=_e.useState(!1),[V,G]=_e.useState(null),[Z,X]=_e.useState(!1),[le,ae]=_e.useState(null),[ce,se]=_e.useState(!1),[ue,re]=_e.useState(null),[W,de]=_e.useState([]),[Ee,Ne]=_e.useState([]),[ge,Pe]=_e.useState([]),Ye=async()=>{try{const{data:at}=await Cr.get("/user/user-service-requests",{withCredentials:!0});de(at.requests||[])}catch(at){console.error("Error fetching my requests:",at)}},Me=async()=>{try{const{data:at}=await Cr.get("/user/service-requests");Ne(at.serviceRequests||[])}catch(at){console.error("Error fetching records:",at)}},De=async()=>{try{const{data:at}=await Cr.get("/user/service-requests",{withCredentials:!0});Pe(at.requests||[])}catch(at){console.error("Error fetching requests:",at)}};_e.useEffect(()=>{Ye(),Me(),De()},[]);const tt=at=>{switch(at){case"Available":case"Waiting":case"Open":return"status-open";case"Working":return"status-working";case"Complete":case"Completed":return"status-completed";case"Cancelled":return"status-cancelled";default:return"status-default"}},ee=at=>{if(at.serviceRequest)e("/user/client-accepted",{state:{requestId:at.serviceRequest._id}});else{const kt=W.find(ze=>ze._id===at._id);if(kt&&at.status==="Working")ae(at),X(!0);else if(kt&&at.status==="Completed"){const ze={worker:at.acceptedBy?`${at.acceptedBy.firstName} ${at.acceptedBy.lastName}`:"Not assigned",type:at.typeOfWork,status:at.status,date:at.createdAt?new Date(at.createdAt).toLocaleDateString():"",address:at.address,id:at._id,price:`${at.budget}`,isOwnOrder:!0};e("/order-details",{state:{order:ze}})}else kt&&at.status!=="Completed"&&at.status!=="Working"&&at.status!=="Cancelled"?e("/waiting-for-worker",{state:{orderData:at}}):(G(at),D(!0))}},fe=()=>{D(!1),G(null)},pe=at=>{at.acceptedBy?(r(at._id),i(`Opening chat with ${at.acceptedBy.firstName||at.acceptedBy.username}`,"success",2e3,"Success")):i("No service provider assigned for chat.","info",3e3,"Info"),fe()},we=async(at,kt)=>{if(kt.stopPropagation(),console.log("Chat button clicked for request:",at._id,"Provider:",at.serviceProvider),at.serviceProvider)try{const Pt=((await Cr.get("/user/service-requests")).data.serviceRequests||[]).find(Sr=>Sr.serviceRequest&&Sr.serviceRequest._id===at._id);Pt?(r(Pt._id),i(`Opening chat with ${at.serviceProvider.firstName||at.serviceProvider.username}`,"success",2e3,"Success")):i("No active service request found for this request.","error",3e3,"Error")}catch(ze){console.error("Error finding service request for chat:",ze),i("Failed to open chat. Please try again.","error",4e3,"Error")}else i("No service provider assigned for chat.","info",3e3,"Info")},Le=async(at,kt)=>{kt.stopPropagation(),re(at),se(!0)},lt=async(at,kt)=>{kt.stopPropagation();const ze=window.prompt("Please provide a reason for cancelling this request:");if(ze!==null){if(!ze.trim()){i("Cancellation reason is required.","error",3e3,"Error");return}try{console.log("Cancelling request:",at._id);const Et=await Cr.delete(`/user/service-request/${at._id}/cancel`,{data:{cancellationReason:ze.trim()}});console.log("Cancel request response:",Et.data),Et.data.success?(i("Request cancelled successfully!","success",3e3,"Success"),Ye()):i("Failed to cancel request. Please try again.","error",4e3,"Error")}catch(Et){console.error("Error cancelling request:",Et),i("Failed to cancel request. Please try again.","error",4e3,"Error")}}},rt=async(at,kt)=>{if(kt.stopPropagation(),t.role!=="Service Provider"){i("You must complete your service provider application and get approved by an admin before accepting service requests.","error",5e3,"Application Required");return}try{(await Cr.post(`/user/service-request/${at._id}/accept`)).data.success&&(i("Request accepted successfully!","success",3e3,"Success"),De(),fe())}catch(ze){console.error(ze),i("Failed to accept request. Please try again.","error",4e3,"Error")}},gt=async(at,kt)=>{kt.stopPropagation(),i("Request declined.","info",3e3,"Info"),fe()},dt=()=>{se(!1),re(null)},qt=async()=>{try{const at={name:ue.name?.trim(),address:ue.address?.trim(),phone:ue.phone?.trim(),typeOfWork:ue.typeOfWork?.trim(),time:ue.time?.trim(),budget:ue.budget?parseFloat(ue.budget):0,notes:ue.notes?.trim()||"",location:ue.location||null};if(!at.name||!at.address||!at.phone||!at.typeOfWork||!at.time){i("Please fill in all required fields.","error",4e3,"Validation Error");return}(await Cr.put(`/user/service-request/${ue._id}/update`,at)).data.success&&(i("Request updated successfully!","success",3e3,"Success"),Ye(),dt())}catch(at){console.error(at);let kt="Failed to update request. Please try again.";at.response?.status===400?at.response.data?.message?.includes("Cannot edit request that is in progress")?(kt="This request has been accepted by a service provider and can no longer be edited.",Ye(),dt()):kt=at.response.data?.message||kt:at.response?.status===403?kt="You don't have permission to edit this request.":at.response?.status===404?(kt="Request not found. It may have been deleted.",Ye(),dt()):kt=at.response?.data?.message||kt,i(kt,"error",4e3,"Error")}},Te=async at=>{i("Request declined.","info",3e3,"Info"),fe()};return p.jsxs("div",{className:"records-page",children:[p.jsxs("div",{className:"records-header",children:[p.jsx("h2",{children:"Records & Requests"}),p.jsxs("div",{className:"records-controls",children:[p.jsx("input",{type:"text",placeholder:"Search by service, client, budget, address, phone...",value:n,onChange:at=>a(at.target.value),className:"records-search"}),p.jsx("button",{className:`records-filter-btn ${N?"active":""}`,onClick:()=>B(!N),children:N?"Hide Filters":"Show Filters"})]}),N&&p.jsx("div",{className:"records-filters",children:p.jsxs("div",{className:"filter-row",children:[p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Status:"}),p.jsxs("select",{value:c,onChange:at=>s(at.target.value),className:"filter-select",children:[p.jsx("option",{value:"All",children:"All Status"}),p.jsx("option",{value:"Available",children:"Available"}),p.jsx("option",{value:"Working",children:"Working"}),p.jsx("option",{value:"Complete",children:"Complete"}),p.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Min Budget ():"}),p.jsx("input",{type:"number",placeholder:"0",value:x.min,onChange:at=>C(kt=>({...kt,min:at.target.value})),className:"filter-input",min:"0"})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Max Budget ():"}),p.jsx("input",{type:"number",placeholder:"No limit",value:x.max,onChange:at=>C(kt=>({...kt,max:at.target.value})),className:"filter-input",min:"0"})]}),p.jsx("div",{className:"filter-group",children:p.jsx("button",{className:"clear-filters-btn",onClick:()=>{s("All"),g("All"),C({min:"",max:""}),a("")},children:"Clear All"})})]})})]}),p.jsxs("div",{className:"records-tabs",children:[p.jsx("button",{className:`tab-button ${M==="my-requests"?"active":""}`,onClick:()=>I("my-requests"),children:"My Requests"}),p.jsx("button",{className:`tab-button ${M==="available-requests"?"active":""} ${t.role!=="Service Provider"?"disabled":""}`,onClick:t.role==="Service Provider"?()=>I("available-requests"):void 0,disabled:t.role!=="Service Provider",children:"Available Requests"}),p.jsx("button",{className:`tab-button ${M==="work-records"?"active":""} ${t.role!=="Service Provider"?"disabled":""}`,onClick:t.role==="Service Provider"?()=>I("work-records"):void 0,disabled:t.role!=="Service Provider",children:"Work Records"})]}),p.jsxs("div",{className:"records-content",children:[M==="my-requests"&&p.jsx(_oe,{searchTerm:n,filterStatus:c,filterServiceType:d,filterBudgetRange:x,handleRequestClick:ee,handleChatRequest:we,handleEditRequest:Le,handleCancelRequest:lt,getStatusClass:tt}),M==="available-requests"&&p.jsx(boe,{searchTerm:n,filterStatus:c,filterServiceType:d,filterBudgetRange:x,handleRequestClick:ee,handleAcceptRequest:rt,handleDeclineRequest:gt,getStatusClass:tt}),M==="work-records"&&p.jsx(woe,{searchTerm:n,filterStatus:c,filterServiceType:d,filterBudgetRange:x,handleRequestClick:ee,getStatusClass:tt})]}),p.jsx(xoe,{request:V,isOpen:R,onClose:fe,onChat:pe,onDelete:Te,onAccept:rt,onDecline:gt}),p.jsx(yoe,{request:le,isOpen:Z,onClose:()=>{X(!1),ae(null)}}),ce&&p.jsx("div",{className:"edit-modal",children:p.jsxs("div",{className:"edit-modal-content",children:[p.jsx("h3",{children:"Edit Request"}),p.jsxs("form",{onSubmit:at=>{at.preventDefault(),qt()},children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Name:"}),p.jsx("input",{type:"text",value:ue.name,onChange:at=>re({...ue,name:at.target.value}),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Address:"}),p.jsx("input",{type:"text",value:ue.address,onChange:at=>re({...ue,address:at.target.value}),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Phone:"}),p.jsx("input",{type:"text",value:ue.phone,onChange:at=>re({...ue,phone:at.target.value}),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Service Type:"}),p.jsx("input",{type:"text",value:ue.typeOfWork,onChange:at=>re({...ue,typeOfWork:at.target.value}),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Preferred Time:"}),p.jsx("input",{type:"text",value:ue.time,onChange:at=>re({...ue,time:at.target.value}),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Budget ():"}),p.jsx("input",{type:"number",value:ue.budget,onChange:at=>re({...ue,budget:at.target.value}),min:"0"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Notes:"}),p.jsx("textarea",{value:ue.notes,onChange:at=>re({...ue,notes:at.target.value})})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),p.jsx("button",{type:"button",className:"cancel-btn",onClick:dt,children:"Cancel"})]})]})]})})]})},Coe=({isOpen:e,onClose:t,title:r="Success!",message:i="Operation completed successfully.",confirmText:n="OK"})=>{if(!e)return null;const a=c=>{c.target===c.currentTarget&&t()};return p.jsx("div",{className:"popup-overlay",onClick:a,children:p.jsxs("div",{className:"popup-content success-popup",children:[p.jsxs("div",{className:"popup-header",children:[p.jsx("div",{className:"success-icon",children:""}),p.jsx("h3",{children:r})]}),p.jsx("div",{className:"popup-body",children:p.jsx("p",{children:i})}),p.jsx("div",{className:"popup-footer",children:p.jsx("button",{className:"popup-button confirm-button",onClick:t,children:n})})]})})},Soe=()=>{const{isAuthorized:e,user:t}=Ma(),r=Va(),{showNotification:i,showInput:n}=UB(),[a,c]=_e.useState([]),[s,d]=_e.useState(!1),g=_e.useRef(null),[x,C]=_e.useState(null),[N,B]=_e.useState(null),[M,I]=_e.useState(!1),[R,D]=_e.useState(null),[V,G]=_e.useState(null),[Z,X]=_e.useState(""),le=async()=>{if(e)try{console.log("Fetching service requests...");const ue=await Cr.get("/user/service-requests",{withCredentials:!0}),{data:re}=ue;console.log("API Response:",re),console.log("Requests received:",re.requests?.length||0),re.requests&&re.requests.length>0&&(console.log("Sample request:",re.requests[0]),console.log("Sample requester data:",re.requests[0].requester),console.log("Requester firstName:",re.requests[0].requester?.firstName),console.log("Requester lastName:",re.requests[0].requester?.lastName),console.log("Requester username:",re.requests[0].requester?.username)),re.debug&&console.log("Debug info:",re.debug),c(re.requests||[])}catch(ue){console.error("API Error:",ue),console.error("Error response:",ue.response?.data),setError(ue.response?.data?.message||ue.message)}};_e.useEffect(()=>{e&&t&&le()},[e,t]),_e.useEffect(()=>{if(g.current&&!x){const ue=new bf.Map({container:g.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[121,14],zoom:10});ue.on("load",()=>{C(ue)}),ue.on("click",async re=>{const{lng:W,lat:de}=re.lngLat;B({lat:de,lng:W}),new bf.Marker({color:"#ff0000",scale:.8}).setLngLat([W,de]).addTo(ue);try{const Ne=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${de}&lon=${W}&addressdetails=1`,{headers:{"User-Agent":"SkillConnect/1.0"}})).json();Ne&&Ne.display_name&&X(Ne.display_name)}catch(Ee){console.error("Reverse geocoding failed:",Ee)}})}return()=>{x&&(x.remove(),C(null))}},[x]);const ae=ue=>{c(re=>re.filter(W=>W._id!==ue))},ce=async()=>{if(!navigator.geolocation){G("Geolocation is not supported by this browser.");return}G(null),navigator.geolocation.getCurrentPosition(async ue=>{const{latitude:re,longitude:W}=ue.coords;B({lat:re,lng:W}),x&&(x.flyTo({center:[W,re],zoom:15}),new bf.Marker({color:"#ff0000",scale:.8}).setLngLat([W,re]).addTo(x));try{const Ee=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${re}&lon=${W}&addressdetails=1`,{headers:{"User-Agent":"SkillConnect/1.0"}})).json();Ee&&Ee.display_name&&X(Ee.display_name)}catch(de){console.error("Reverse geocoding failed:",de)}},ue=>{switch(ue.code){case ue.PERMISSION_DENIED:G("Location access denied by user.");break;case ue.POSITION_UNAVAILABLE:G("Location information is unavailable.");break;case ue.TIMEOUT:G("Location request timed out.");break;default:G("An unknown error occurred.");break}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},se=async()=>{if(!N||!R){i("Please select a location on the map.","error",4e3,"Error");return}try{const ue=await Cr.post("/user/post-service-request",{...R,address:Z||R.address,latitude:N.lat,longitude:N.lng});d(!0),I(!1),D(null),B(null),X("")}catch(ue){i(ue.response?.data?.message||"Failed to submit service request.","error",4e3,"Error")}};return p.jsxs("div",{className:"clients-container",children:[p.jsx("h2",{className:"clients-title",children:"Clients"}),a.length===0?p.jsxs("div",{className:"no-requests",children:[p.jsx("i",{className:"fas fa-users no-requests-icon"}),p.jsx("h3",{className:"no-requests-title",children:"No Client Requests"}),p.jsx("p",{className:"no-requests-text",children:"No client requests available at the moment."})]}):p.jsx("div",{children:a.map(ue=>p.jsxs("div",{className:"client-card",children:[p.jsxs("div",{className:"client-header",children:[p.jsx("div",{className:"client-avatar",children:p.jsx("i",{className:"fas fa-user"})}),p.jsxs("div",{className:"client-info",children:[p.jsx("h3",{children:ue.requester&&ue.requester.firstName&&ue.requester.lastName?`${ue.requester.firstName} ${ue.requester.lastName}`:ue.requester&&ue.requester.username?ue.requester.username:"Unknown Client"}),p.jsx("p",{className:"client-email",children:ue.requester?.email||"email@example.com"}),p.jsx("p",{className:"client-phone",children:ue.requester?.phone||"No phone"})]})]}),p.jsxs("div",{className:"service-needed",children:["Service Needed: ",ue.typeOfWork]}),p.jsxs("div",{className:"service-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("i",{className:"fas fa-wallet detail-icon"}),p.jsxs("div",{className:"detail-content",children:[p.jsx("span",{className:"detail-label",children:"Budget:"}),p.jsxs("span",{className:"detail-value",children:["",ue.budget||"0"]})]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("i",{className:"fas fa-calendar detail-icon"}),p.jsxs("div",{className:"detail-content",children:[p.jsx("span",{className:"detail-label",children:"Date Required:"}),p.jsx("span",{className:"detail-value",children:ue.preferredDate?new Date(ue.preferredDate).toLocaleDateString():"Not specified"})]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("i",{className:"fas fa-clock detail-icon"}),p.jsxs("div",{className:"detail-content",children:[p.jsx("span",{className:"detail-label",children:"Preferred Time:"}),p.jsx("span",{className:"detail-value",children:ue.time||"Not specified"})]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("i",{className:"fas fa-map-marker-alt detail-icon"}),p.jsxs("div",{className:"detail-content",children:[p.jsx("span",{className:"detail-label",children:"Location:"}),p.jsx("span",{className:"detail-value",children:ue.location?`${ue.location.lat}, ${ue.location.lng}`:"Not specified"})]})]})]}),ue.notes&&p.jsxs("div",{className:"service-note",children:[p.jsx("strong",{children:"Note:"})," ",ue.notes]}),p.jsxs("div",{className:"client-actions",children:[p.jsx("button",{className:"accept-button",onClick:()=>r("/user/accepted-request",{state:{requestId:ue._id}}),children:" Accept"}),p.jsx("button",{className:"decline-button",onClick:()=>ae(ue._id),children:" Decline"})]})]},ue._id))}),p.jsx(Coe,{isOpen:s,onClose:()=>d(!1),title:"Request Sent!",message:"Service request sent successfully! The provider will be notified.",confirmText:"Great!"}),M&&p.jsx("div",{className:"map-modal-overlay",children:p.jsxs("div",{className:"map-modal",children:[p.jsx("h3",{children:"Select Location on Map"}),p.jsxs("div",{className:"location-controls",children:[p.jsx("button",{type:"button",onClick:ce,className:"location-button",children:" Use My Location"}),V&&p.jsx("div",{className:"location-error",children:V}),Z&&p.jsxs("div",{className:"address-detected",children:[p.jsx("strong",{children:"Detected Address:"})," ",Z,p.jsx("button",{type:"button",onClick:()=>{D(ue=>({...ue,address:Z})),X("")},className:"use-address-button",children:"Use This Address"})]})]}),p.jsx("div",{ref:g,className:"map-container"}),p.jsxs("div",{className:"map-modal-actions",children:[p.jsx("button",{className:"cancel-modal-button",onClick:()=>{I(!1),D(null),B(null)},children:"Cancel"}),p.jsx("button",{className:"confirm-modal-button",onClick:()=>{N?se():i("Please select a location on the map.","error",4e3,"Error")},children:"Confirm Location"})]})]})})]})},Eoe=()=>{const{user:e}=Ma(),[t,r]=_e.useState(null),[i,n]=_e.useState(!0),[a,c]=_e.useState(""),[s,d]=_e.useState([]),[g,x]=_e.useState(!0),[C,N]=_e.useState({averageRating:0,totalReviews:0}),[B,M]=_e.useState([]),[I,R]=_e.useState(!1),D=Va();_e.useEffect(()=>{V()},[]),_e.useEffect(()=>{t?._id&&(G(t._id),t.role==="Service Provider"&&Z())},[t?._id,t?.role]);const V=async()=>{try{n(!0);const de=await Cr.get("/user/me");de.data.success&&r(de.data.user)}catch(de){c("Failed to fetch profile data"),console.error("Error fetching profile:",de)}finally{n(!1)}},G=async de=>{try{x(!0);const[Ee,Ne]=await Promise.all([Cr.get(`/review/user/${de}`),Cr.get(`/review/stats/${de}`)]);Ee.data.success&&d(Ee.data.reviews||[]),Ne.data.success&&N(Ne.data.stats||{averageRating:0,totalReviews:0})}catch(Ee){console.error("Error fetching review insights:",Ee)}finally{x(!1)}},Z=async()=>{try{R(!0);const de=await Cr.get("/settings/my-completed-jobs");de.data.success&&M(de.data.jobs||[])}catch(de){console.error("Error fetching completed jobs:",de)}finally{R(!1)}},X=de=>{if(!de)return"";const[Ee,Ne]=de.split("@");return Ne?`${Ee.slice(0,2)}${"*".repeat(Math.max(Ee.length-2,3))}@${Ne}`:de},le=de=>de?de.replace(/.(?=.{4})/g,"*"):"",ae=(de="")=>{const[Ee,Ne]=de.split(",");return Ne?`${Ee.trim()}, ${Ne.trim()}`:de},ce=de=>de?new Date(de).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",se=_e.useMemo(()=>!t?.skills||t.skills.length===0?"No skills added yet":t.skills.map(de=>de.charAt(0).toUpperCase()+de.slice(1)).join("  "),[t?.skills]),ue=(de=0)=>Array.from({length:5},(Ee,Ne)=>{const ge=Ne+1;return p.jsx("span",{className:"star-icon","aria-hidden":"true",children:de>=ge?p.jsx(a5,{}):p.jsx(Wj,{})},ge)}),re=["","",""];if(i)return p.jsx("div",{className:"flex items-center justify-center min-h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2"})});if(!t)return p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Profile Not Found"}),p.jsx("p",{className:"text-gray-600",children:"Unable to load your profile data."})]})});const W=t.serviceDescription||"Reliable and detail-oriented worker.";return p.jsx("div",{className:"main-content manage-profile-shell",children:p.jsx("div",{className:"profile-wrapper profile-overview",children:p.jsxs("div",{className:"profile-layout-grid",children:[p.jsxs("aside",{className:"profile-summary-card",children:[p.jsx("div",{className:"summary-avatar",children:t.profilePic?p.jsx("img",{src:t.profilePic,alt:"Profile"}):p.jsx("div",{className:"avatar-placeholder-large",children:t.firstName?.charAt(0)||t.lastName?.charAt(0)||"S"})}),p.jsxs("div",{className:"summary-details",children:[p.jsx("h2",{children:`${t.firstName||""} ${t.lastName||""}`.trim()}),p.jsx("p",{className:"summary-role",children:t.occupation||"Independent Specialist"}),p.jsx("p",{className:"summary-location",children:ae(t.address)})]}),p.jsxs("div",{className:"summary-rating-row",children:[p.jsxs("div",{children:[p.jsx("span",{className:"rating-value",children:C.averageRating?C.averageRating.toFixed(1):"0.0"}),p.jsx("span",{className:"rating-label",children:"/ 5 rating"})]}),p.jsxs("div",{className:"rating-meta",children:[p.jsxs("span",{children:[C.totalReviews||0," Reviews"]}),p.jsxs("span",{children:[t.bookings?.length||0," Jobs"]})]})]}),p.jsxs("div",{className:"summary-info-grid",children:[p.jsxs("div",{className:"info-line",children:[p.jsx("span",{children:"Email"}),p.jsx("strong",{children:X(t.email)})]}),p.jsxs("div",{className:"info-line",children:[p.jsx("span",{children:"Phone"}),p.jsx("strong",{children:le(t.phone)})]}),p.jsxs("div",{className:"info-line",children:[p.jsx("span",{children:"Skills"}),p.jsx("strong",{children:se})]}),p.jsxs("div",{className:"info-line",children:[p.jsx("span",{children:"Services"}),p.jsx("strong",{children:t.services?.length?`${t.services.length} Listed`:"Not set"})]})]}),p.jsx("blockquote",{className:"profile-quote",children:W}),p.jsxs("p",{className:"privacy-note",children:["*If the individual user views the skilled user their email and phone number will be hidden",p.jsx("br",{}),"ex: ju****@gmail.com, 09*****65"]}),p.jsx("button",{type:"button",className:"btn-outline profile-edit-btn",onClick:()=>D("/user/general-settings"),children:"Edit Profile"})]}),p.jsxs("section",{className:"profile-reviews-panel",children:[p.jsxs("div",{className:"reviews-header",children:[p.jsxs("div",{children:[p.jsx("p",{className:"eyebrow-text",children:"Performance Snapshot"}),p.jsx("h1",{className:"page-title",children:"All Reviews"})]}),p.jsxs("div",{className:"reviews-header-meta",children:[p.jsxs("span",{children:[C.averageRating?C.averageRating.toFixed(1):"0.0"," "]}),p.jsxs("span",{children:[C.totalReviews||0," total reviews"]})]})]}),a&&p.jsx("div",{className:"error-message",children:a}),g?p.jsx("div",{className:"reviews-loading",children:"Loading feedback"}):s.length===0?p.jsxs("div",{className:"reviews-empty",children:[p.jsx("p",{children:"No reviews yet"}),p.jsx("small",{children:"Completed jobs will automatically appear here when clients leave feedback."})]}):p.jsx("div",{className:"reviews-stack",children:s.map(de=>p.jsxs("article",{className:"review-card",children:[p.jsxs("header",{className:"review-card-header",children:[p.jsxs("div",{children:[p.jsx("p",{className:"review-type",children:"Client Review"}),p.jsx("h3",{children:de.clientName||"Anonymous Client"}),p.jsxs("p",{className:"review-service-label",children:["Service Needed:",p.jsx("span",{children:de.service||"Service Request"})]})]}),p.jsx("span",{className:"review-date",children:ce(de.createdAt)})]}),p.jsxs("div",{className:"review-comment",children:[p.jsx("span",{children:"Comment:"})," ",de.comment||"No comment was provided."]}),p.jsxs("div",{className:"review-proof",children:[p.jsx("span",{children:"Proof Work:"}),p.jsx("div",{className:"proof-grid",children:(de.images?.length?de.images:re).map((Ee,Ne)=>Ee?p.jsx("img",{src:Ee,alt:`Proof ${Ne+1}`},Ne):p.jsx("div",{className:"proof-placeholder","aria-hidden":"true"},Ne))})]}),p.jsxs("div",{className:"review-rating-row",children:[p.jsx("span",{children:"Rating:"}),p.jsxs("div",{className:"stars-row",children:[ue(de.rating),p.jsx("strong",{children:de.rating?.toFixed(1)||"0.0"})]})]})]},de.id))}),t.role==="Service Provider"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"reviews-header",style:{marginTop:"2rem"},children:[p.jsxs("div",{children:[p.jsx("p",{className:"eyebrow-text",children:"Work History"}),p.jsx("h1",{className:"page-title",children:"Completed Jobs"})]}),p.jsx("div",{className:"reviews-header-meta",children:p.jsxs("span",{children:[B.length," completed jobs"]})})]}),I?p.jsx("div",{className:"reviews-loading",children:"Loading completed jobs"}):B.length===0?p.jsxs("div",{className:"reviews-empty",children:[p.jsx("p",{children:"No completed jobs yet"}),p.jsx("small",{children:"Jobs you complete will appear here."})]}):p.jsx("div",{className:"reviews-stack",children:B.map(de=>p.jsxs("article",{className:"review-card",children:[p.jsxs("header",{className:"review-card-header",children:[p.jsxs("div",{children:[p.jsx("p",{className:"review-type",children:"Completed Job"}),p.jsxs("h3",{children:[de.requester?.firstName||"Unknown"," ",de.requester?.lastName||"Client"]}),p.jsxs("p",{className:"review-service-label",children:["Service:",p.jsx("span",{children:de.typeOfWork||"Service Request"})]})]}),p.jsx("span",{className:"review-date",children:ce(de.updatedAt)})]}),p.jsxs("div",{className:"review-comment",children:[p.jsx("span",{children:"Budget:"})," ",de.budget||0]}),de.completionNotes&&p.jsxs("div",{className:"review-comment",children:[p.jsx("span",{children:"Completion Notes:"})," ",de.completionNotes]}),de.proofOfWork&&de.proofOfWork.length>0&&p.jsxs("div",{className:"review-proof",children:[p.jsx("span",{children:"Proof of Work:"}),p.jsx("div",{className:"proof-grid",children:de.proofOfWork.map((Ee,Ne)=>p.jsx("img",{src:Ee,alt:`Proof ${Ne+1}`},Ne))})]}),p.jsxs("div",{className:"review-rating-row",children:[p.jsx("span",{children:"Status:"}),p.jsx("span",{className:"status-completed",children:"Completed"})]})]},de._id))})]})]})]})})})},Toe=({requestData:e})=>{const t=sh(),r=e||t.state?.requestData,[i,n]=_e.useState("Searching"),[a,c]=_e.useState(null),[s,d]=_e.useState(null),[g,x]=_e.useState([]),[C,N]=_e.useState({}),[B,M]=_e.useState({}),[I,R]=_e.useState(null),[D,V]=_e.useState(!0),[G,Z]=_e.useState(null),X=async ce=>{if(!ce||!ce.typeOfWork||!ce.budget){console.warn("Request data incomplete for provider matching");return}try{const ue=(await Cr.get("/user/service-providers")).data?.workers||[];if(!Array.isArray(ue)){console.error("Invalid providers data format");return}const re=ue.filter(W=>{if(!W||!W.skills||!Array.isArray(W.skills))return!1;const de=W.skills.some(Me=>Me&&typeof Me=="string"&&(Me.toLowerCase().includes(ce.typeOfWork.toLowerCase())||ce.typeOfWork.toLowerCase().includes(Me.toLowerCase()))),Ee=W.serviceRate||0,Ne=200,ge=Ee-Ne,Pe=Ee+Ne,Ye=ce.budget>=ge&&ce.budget<=Pe;return de&&Ye});x(re)}catch(se){console.error("Failed to fetch matched providers:",se),x([])}},le=async ce=>{if(!Array.isArray(ce)||ce.length===0){console.warn("No providers to fetch data for");return}const se={},ue={},re=5;for(let W=0;W<ce.length;W+=re){const de=ce.slice(W,W+re);await Promise.all(de.map(async Ee=>{if(!Ee||!Ee._id){console.warn("Invalid provider data:",Ee);return}try{const Ne=await Cr.get(`/reviews/stats/${Ee._id}`);ue[Ee._id]=Ne.data?.stats||{totalReviews:0,averageRating:0};const Pe=(await Cr.get(`/reviews/user/${Ee._id}`)).data?.reviews||[];se[Ee._id]=Array.isArray(Pe)?Pe.slice(0,3):[]}catch(Ne){console.error(`Failed to fetch data for provider ${Ee._id}:`,Ne),ue[Ee._id]={totalReviews:0,averageRating:0},se[Ee._id]=[]}}))}M(ue),N(se)},ae=async ce=>{if(!s||!s._id){console.error("No current request available"),alert("Unable to process request. Please try again.");return}if(!ce){console.error("No provider ID provided"),alert("Invalid provider selection. Please try again.");return}const se=g.find(ue=>ue._id===ce);if(!se){console.error("Provider not found in matched providers list"),alert("Provider not found. Please refresh and try again.");return}R(ce);try{const ue=await Cr.put(`/user/service-request/${s._id}/update`,{targetProvider:ce});if(!ue.data||!ue.data.success)throw new Error("Failed to update service request");const re=await Cr.post("/user/notify-provider",{providerId:ce,requestId:s._id,message:`You have received a targeted service request for "${s.typeOfWork||"service"}"`}),W=`${se.firstName||""} ${se.lastName||""}`.trim();alert(`Request successfully offered to ${W||"the selected provider"}!`);try{const de=await Cr.get(`/user/service-request/${s._id}`);de.data?.request&&d(de.data.request)}catch(de){console.warn("Failed to refresh request data:",de)}}catch(ue){console.error("Failed to offer request:",ue);const re=ue.response?.data?.message||ue.message||"Failed to offer request";alert(`${re}. Please try again.`)}finally{R(null)}};return _e.useEffect(()=>{if(!r){Z("No request data available"),V(!1);return}(async()=>{try{if(V(!0),Z(null),d(r),await X(r),r.status==="Working"&&(n("Found"),c({name:r.serviceProvider?`${r.serviceProvider.firstName} ${r.serviceProvider.lastName}`:"Worker",skill:r.typeOfWork||"Service",phone:r.serviceProvider?.phone||"09123456789",image:r.serviceProvider?.profilePic||"/default-profile.png",eta:r.eta||null})),rn&&r._id){rn.emit("join-service-request",r._id);const se=async ue=>{if(!(!ue||ue.requestId!==r._id)){console.log("Received socket update:",ue);try{const W=(await Cr.get(`/user/service-request/${r._id}`)).data?.request;W&&(d(W),W.status==="Working"||W.status==="Completed"?(n("Found"),W.serviceProvider&&c({name:`${W.serviceProvider.firstName||""} ${W.serviceProvider.lastName||""}`.trim()||"Worker",skill:W.typeOfWork||"Service",phone:W.serviceProvider.phone||"09123456789",image:W.serviceProvider.profilePic||"/default-profile.png",eta:W.eta||null})):W.status==="Pending"&&n("Searching"),(ue.action==="provider-unavailable"||ue.action==="new-provider")&&X(W))}catch(re){console.error("Failed to update request via socket:",re)}}};return rn.on("service-request-updated",se),()=>{rn&&(rn.off("service-request-updated",se),rn.emit("leave-service-request",r._id))}}}catch(se){console.error("Failed to initialize component:",se),Z("Failed to load request data. Please refresh the page.")}finally{V(!1)}})()},[r]),_e.useEffect(()=>{g.length>0&&le(g)},[g]),s?.name,s?.address,s?.phone,s?.typeOfWork,s?.targetProvider,`${s?.budget||"N/A"}`,s?.createdAt&&new Date(s.createdAt).toLocaleDateString(),s?.notes,D?p.jsx("div",{className:"tab-screen-container",children:p.jsx("div",{className:"tab-screen-content",children:p.jsx("div",{className:"popup-body",children:p.jsxs("div",{className:"waiting-section",children:[p.jsx("div",{className:"pulse-circle",children:p.jsx("span",{className:"location-icon",children:""})}),p.jsx("h3",{children:"Loading your request..."}),p.jsx("p",{children:"Please wait while we prepare your service request."})]})})})}):G?p.jsx("div",{className:"tab-screen-container",children:p.jsx("div",{className:"tab-screen-content",children:p.jsx("div",{className:"popup-body",children:p.jsxs("div",{className:"content-card",children:[p.jsx("h2",{className:"section-header",children:" Error"}),p.jsx("p",{style:{color:"#e53e3e",textAlign:"center",padding:"20px"},children:G}),p.jsx("div",{className:"popup-actions",children:p.jsx("button",{className:"action-button chat-button",onClick:()=>window.location.reload(),children:" Refresh Page"})})]})})})}):p.jsx("div",{className:"tab-screen-container",children:p.jsx("div",{className:"tab-screen-content",children:p.jsxs("div",{className:"popup-body",children:[p.jsxs("div",{className:"accepted-order-header",children:[p.jsx("h1",{className:"header-title",children:"Find Your Service Provider"}),p.jsxs("p",{className:"header-subtitle",children:["Request #",s?._id?.slice(-8)||"N/A"]}),p.jsx("span",{className:`status-badge ${i==="Found"?"available":s?.status==="No Longer Available"?"expired":"searching"}`,children:i==="Found"?"Provider Assigned":s?.status==="No Longer Available"?"No Longer Available":"Finding Matches"})]}),p.jsxs("div",{className:"content-card request-details-card",children:[p.jsx("h2",{className:"section-header",children:" My Request Details"}),p.jsxs("div",{className:"request-details-grid",children:[p.jsxs("div",{className:"request-detail-item",children:[p.jsx("span",{className:"detail-label",children:"Needed by:"}),p.jsx("span",{className:"detail-value",children:s?.expiresAt?new Date(s.expiresAt).toLocaleDateString():"N/A"})]}),p.jsxs("div",{className:"request-detail-item",children:[p.jsx("span",{className:"detail-label",children:"Location:"}),p.jsx("span",{className:"detail-value",children:s?.address||"N/A"})]}),p.jsxs("div",{className:"request-detail-item",children:[p.jsx("span",{className:"detail-label",children:"Notes:"}),p.jsx("span",{className:"detail-value",children:s?.notes||"No additional details"})]})]})]}),i==="Found"&&a&&p.jsxs("div",{className:"content-card worker-assigned-card",children:[p.jsx("h2",{className:"section-header",children:" Provider Assigned"}),p.jsxs("div",{className:"worker-content",children:[p.jsx("img",{src:a.image,alt:"Worker",className:"worker-avatar"}),p.jsxs("div",{className:"worker-info",children:[p.jsx("h3",{children:a.name}),p.jsx("p",{className:"worker-detail",children:a.skill}),p.jsx("p",{className:"worker-detail",children:a.phone}),a.eta&&p.jsxs("p",{className:"worker-detail",children:["ETA:"," ",new Date(a.eta).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),p.jsxs("div",{className:"content-card providers-list-section",children:[p.jsxs("div",{className:"providers-list-header",children:[p.jsx("h2",{className:"section-header",children:i==="Found"?" Other Available Providers":" Matched Providers"}),p.jsx("div",{className:"providers-count",children:g.length>0?p.jsxs("span",{className:"count-badge",children:[g.length," provider",g.length!==1?"s":""," found"]}):p.jsx("span",{className:"count-badge searching",children:"Searching..."})})]}),g.length>0?p.jsx("div",{className:"providers-column-list",children:g.map(ce=>{const se=B[ce._id]||{totalReviews:0,averageRating:0},ue=C[ce._id]||[],re=ce.createdAt?Math.floor((new Date-new Date(ce.createdAt))/(1e3*60*60*24*365)):0;return p.jsxs("div",{className:"provider-column-card",children:[p.jsxs("div",{className:"provider-column-header",children:[p.jsx("img",{src:ce.profilePic||"/default-profile.png",alt:`${ce.firstName} ${ce.lastName}`,className:"provider-column-avatar"}),p.jsxs("div",{className:"provider-column-info",children:[p.jsx("h4",{className:"provider-column-name",children:`${ce.firstName} ${ce.lastName}`}),p.jsxs("div",{className:"provider-column-rating",children:[p.jsxs("span",{className:"rating-stars",children:["".repeat(Math.round(se.averageRating)),"".repeat(5-Math.round(se.averageRating))]}),p.jsx("span",{className:"rating-score",children:se.averageRating.toFixed(1)}),p.jsxs("span",{className:"review-count",children:["(",se.totalReviews," reviews)"]})]}),p.jsxs("div",{className:"provider-column-meta",children:[p.jsxs("span",{className:"meta-item",children:[" ",ce.serviceRate||"N/A"]}),p.jsxs("span",{className:`meta-item status ${ce.isOnline?"online":"offline"}`,children:[" ",ce.isOnline?"Online":"Offline"]}),p.jsxs("span",{className:"meta-item",children:[" ",re," years"]})]})]}),p.jsx("div",{className:"provider-column-actions",children:p.jsx("button",{className:"offer-button",onClick:()=>ae(ce._id),disabled:I===ce._id||i==="Found",children:I===ce._id?"Offering...":i==="Found"?" Contact Provider":" Offer Request"})})]}),p.jsxs("div",{className:"provider-column-details",children:[p.jsxs("div",{className:"detail-column-group",children:[p.jsx("h5",{className:"detail-column-title",children:" Skills & Services"}),p.jsx("p",{className:"provider-skills",children:ce.skills?.join(", ")||"No skills listed"}),ce.services&&ce.services.length>0&&p.jsx("div",{className:"provider-services",children:p.jsx("ul",{children:ce.services.map((W,de)=>p.jsxs("li",{children:[W.name," - ",W.rate," (",W.description,")"]},de))})})]}),p.jsxs("div",{className:"detail-column-group",children:[p.jsx("h5",{className:"detail-column-title",children:" About Provider"}),p.jsx("p",{className:"provider-description",children:ce.serviceDescription||"No description available"}),ce.certificates&&ce.certificates.length>0&&p.jsxs("p",{className:"provider-certificates",children:[p.jsx("strong",{children:"Certificates:"})," ",ce.certificates.join(", ")]})]}),ue.length>0&&p.jsxs("div",{className:"detail-column-group",children:[p.jsx("h5",{className:"detail-column-title",children:" Recent Reviews"}),p.jsx("div",{className:"reviews-column-list",children:ue.map((W,de)=>p.jsxs("div",{className:"review-column-item",children:[p.jsxs("div",{className:"review-column-header",children:[p.jsx("span",{className:"review-rating",children:"".repeat(W.rating)}),p.jsx("span",{className:"review-client",children:W.clientName}),p.jsx("span",{className:"review-date",children:new Date(W.createdAt).toLocaleDateString()})]}),p.jsx("p",{className:"review-comment",children:W.comment})]},de))})]})]})]},ce._id)})}):p.jsxs("div",{className:"waiting-section",children:[p.jsx("div",{className:"pulse-circle",children:p.jsx("span",{className:"location-icon",children:""})}),p.jsx("h3",{children:"Finding the perfect providers for you..."}),p.jsx("p",{children:"We're matching your request with skilled professionals in your area."})]})]}),p.jsxs("div",{className:"popup-actions",children:[i==="Found"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"action-button chat-button",onClick:()=>window.open(`tel:${a.phone}`),children:" Call Provider"}),p.jsx("button",{className:"action-button chat-button",children:" Chat with Provider"})]}),p.jsx("button",{className:"action-button cancel-button",children:" Cancel Request"})]})]})})})},Foe=({requestData:e})=>{const[t,r]=_e.useState(null),[i,n]=_e.useState(null);_e.useEffect(()=>{if(!e)return;n(e),r({name:e.serviceProvider?`${e.serviceProvider.firstName} ${e.serviceProvider.lastName}`:"Worker",skill:e.typeOfWork||"Service",phone:e.serviceProvider?.phone||"09123456789",image:e.serviceProvider?.profilePic||"/default-profile.png",eta:e.eta||null}),rn.emit("join-service-request",e._id);const s=async d=>{if(d.requestId===e._id)try{const x=(await Cr.get(`/user/service-request/${e._id}`)).data.request;n(x),r({name:x.serviceProvider?`${x.serviceProvider.firstName} ${x.serviceProvider.lastName}`:"Worker",skill:x.typeOfWork||"Service",phone:x.serviceProvider?.phone||"09123456789",image:x.serviceProvider?.profilePic||"/default-profile.png",eta:x.eta||null})}catch(g){console.error("Failed to update request:",g)}};return rn.on("service-request-updated",s),()=>{rn.off("service-request-updated",s)}},[e]);const a=[{label:"Name",value:i?.name||"N/A"},{label:"Address",value:i?.address||"N/A"},{label:"Phone",value:i?.phone||"N/A"}],c=[{label:"Service Type",value:i?.typeOfWork||"N/A"},{label:"Priority",value:i?.targetProvider?"Favorite Worker":"Any Available"},{label:"Budget",value:`${i?.budget||"N/A"}`},{label:"Date",value:i?.createdAt?new Date(i.createdAt).toLocaleDateString():"N/A"},{label:"Note",value:i?.notes||"None"}];return p.jsx("div",{className:"tab-screen-container",children:p.jsx("div",{className:"tab-screen-content",children:p.jsxs("div",{className:"popup-body",children:[p.jsxs("div",{className:"accepted-order-header",children:[p.jsx("h1",{className:"header-title",children:"Order Accepted"}),p.jsxs("p",{className:"header-subtitle",children:["Request #",i?._id?.slice(-8)||"N/A"]}),p.jsx("span",{className:"status-badge available",children:"Worker Assigned"})]}),t&&p.jsxs("div",{className:"content-card worker-card",children:[p.jsx("h2",{className:"section-header",children:"Your Assigned Worker"}),p.jsxs("div",{className:"worker-content",children:[p.jsx("img",{src:t.image,alt:"Worker",className:"worker-avatar"}),p.jsxs("div",{className:"worker-info",children:[p.jsx("h3",{children:t.name}),p.jsx("p",{className:"worker-detail",children:t.skill}),p.jsx("p",{className:"worker-detail",children:t.phone}),t.eta&&p.jsxs("p",{className:"worker-detail",children:["ETA:"," ",new Date(t.eta).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),p.jsxs("div",{className:"content-card",children:[p.jsx("h2",{className:"section-header",children:"Service Location"}),p.jsx("div",{className:"info-grid",children:a.map((s,d)=>p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-label",children:s.label}),p.jsx("div",{className:"info-value",children:s.value})]},d))})]}),p.jsxs("div",{className:"content-card",children:[p.jsx("h2",{className:"section-header",children:"Service Details"}),p.jsx("div",{className:"order-details-grid",children:c.map((s,d)=>p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:s.label}),p.jsx("span",{className:"detail-value",children:s.value})]},d))})]}),p.jsxs("div",{className:"popup-actions",children:[t&&p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"action-button chat-button",onClick:()=>window.open(`tel:${t.phone}`),children:" Call Worker"}),p.jsx("button",{className:"action-button chat-button",children:" Chat with Worker"})]}),p.jsx("button",{className:"action-button cancel-button",children:" Cancel Request"})]})]})})})},koe=()=>{const e=Va(),r=sh().state?.requestId,{isAuthorized:i,user:n}=Ma(),[a,c]=_e.useState(null),[s,d]=_e.useState(!1),[g,x]=_e.useState(!1);_e.useEffect(()=>{if(i&&n){if(!r){Qr.error("No request ID found."),e("/user/users-request");return}(async()=>{try{const R=(await Cr.get("/user/service-requests",{withCredentials:!0})).data.requests.find(D=>D._id===r);R?c(R):(Qr.error("Request not found."),e("/user/users-request"))}catch(M){console.error("Error fetching request:",M),Qr.error("Failed to fetch request details."),e("/user/users-request")}})()}},[i,n,r,e]);const C=async()=>{if(a){x(!0);try{await Cr.post(`/user/service-request/${a._id}/accept`,{},{withCredentials:!0}),Qr.success("Request accepted successfully!"),e("/user/dashboard")}catch{Qr.error("Failed to accept request.")}finally{x(!1)}}},N=async()=>{if(a){d(!0);try{await Cr.put(`/user/service-request/${a._id}/cancel`,{},{withCredentials:!0}),Qr.success("Request cancelled successfully."),e("/user/service-requests")}catch{Qr.error("Failed to cancel request.")}finally{d(!1)}}};return a?p.jsxs("div",{className:"accepted-request-container",children:[p.jsxs("div",{className:"header",children:[p.jsx("button",{className:"back-button",onClick:()=>e(-1),children:""}),p.jsx("h1",{children:"Client"})]}),p.jsxs("div",{className:"profile-section",children:[p.jsx("div",{className:"profile-avatar",children:p.jsx("div",{className:"avatar-placeholder"})}),p.jsxs("div",{className:"profile-info",children:[p.jsx("h2",{children:a.name}),p.jsxs("p",{children:[" ",a.requester?.email||"N/A"]}),p.jsxs("p",{children:[" ",a.phone]})]})]}),p.jsxs("div",{className:"details-section",children:[p.jsx("h3",{children:"Client Details"}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"icon",children:""}),p.jsx("span",{className:"label",children:"Name:"}),p.jsx("span",{className:"value",children:a.name})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"icon",children:""}),p.jsx("span",{className:"label",children:"Email:"}),p.jsx("span",{className:"value",children:a.requester?.email||"N/A"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"icon",children:""}),p.jsx("span",{className:"label",children:"Phone:"}),p.jsx("span",{className:"value",children:a.phone})]})]}),p.jsxs("div",{className:"service-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Service Needed:"}),p.jsx("span",{className:"value",children:a.typeOfWork})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Budget:"}),p.jsxs("span",{className:"value",children:["P",a.budget]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Date Required:"}),p.jsx("span",{className:"value",children:"10-18-2025"})," "]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Preferred Time:"}),p.jsx("span",{className:"value",children:"9:00AM - 12:00PM"})," "]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Location:"}),p.jsx("span",{className:"value",children:a.address})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Estimated Service Cost:"}),p.jsxs("span",{className:"value",children:["P",a.budget]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Match Rate:"}),p.jsxs("span",{className:"value",children:["P",a.budget]})," "]})]}),p.jsxs("div",{className:"note-section",children:[p.jsx("h3",{children:"Note:"}),p.jsx("p",{children:a.notes})]}),p.jsxs("div",{className:"button-group",children:[p.jsx("button",{className:"accept-button",onClick:C,disabled:g,children:g?"Accepting...":"Accept"}),p.jsx("button",{className:"cancel-button",onClick:N,disabled:s,children:s?"Cancelling...":"Cancel"})]})]}):p.jsx("div",{children:"Loading..."})},Noe=({requestId:e})=>{const{user:t,openChat:r}=Ma(),i=sh(),[n,a]=_e.useState(null),[c,s]=_e.useState(!0),[d,g]=_e.useState(!1),[x,C]=_e.useState(""),[N,B]=_e.useState([]),[M,I]=_e.useState(null),R=e||i.state?.requestId,D=i.state?.request;_e.useEffect(()=>{D?(a(D),D.requester?._id&&Z(D.requester._id),s(!1)):R?V():G()},[R,D]);const V=async()=>{try{s(!0);const ue=await Cr.get("/settings/my-accepted-requests");if(ue.data.success){const re=ue.data.requests.find(W=>W._id===R);re?(a(re),re.requester?._id&&Z(re.requester._id)):(alert("Request not found"),window.history.back())}}catch(ue){console.error("Error fetching request:",ue),alert("Failed to load request data"),window.history.back()}finally{s(!1)}},G=async()=>{try{s(!0);const ue=await Cr.get("/settings/my-accepted-requests");if(ue.data.success&&ue.data.requests.length>0){const re=ue.data.requests[0];a(re),re.requester?._id&&Z(re.requester._id)}else alert("No active accepted requests found."),window.history.back()}catch(ue){console.error("Error fetching accepted requests:",ue),alert("Failed to load request data"),window.history.back()}finally{s(!1)}},Z=async ue=>{try{const re=await Cr.get(`/user/${ue}/stats`);re.data.success&&I(re.data.stats)}catch(re){console.error("Error fetching requester stats:",re)}},X=async()=>{if(window.confirm("Are you sure you want to cancel this service request?"))try{g(!0),(await Cr.delete(`/user-flow/service-request/${n._id}/cancel`)).data.success?(alert("Service request cancelled successfully!"),window.history.back()):alert("Failed to cancel the request. Please try again.")}catch(ue){console.error("Error cancelling request:",ue),alert("Failed to cancel the request. Please try again.")}finally{g(!1)}},le=()=>{const ue=n?.requester?.phone||t?.phone||"09123456789";window.open(`tel:${ue}`,"_self")},ae=()=>{r(n._id)},ce=()=>{const ue=document.createElement("input");ue.type="file",ue.multiple=!0,ue.accept="image/*,video/*",ue.onchange=re=>{const de=Array.from(re.target.files).map(Ee=>({uri:URL.createObjectURL(Ee),name:Ee.name,type:Ee.type,file:Ee}));B(Ee=>[...Ee,...de])},ue.click()},se=async()=>{if(N.length===0){alert("Please upload proof of work before completing the job.");return}try{g(!0);const ue=new FormData;N.forEach((W,de)=>{ue.append("proofImages",W.file)}),ue.append("completionNotes",x),(await Cr.put(`/settings/service-requests/${n._id}/complete`,ue,{headers:{"Content-Type":"multipart/form-data"}})).data.success?(alert("Proof of work submitted and job completed successfully!"),window.history.back()):alert("Failed to complete the job. Please try again.")}catch(ue){console.error("Error completing service request:",ue),alert("Failed to submit proof. Please try again.")}finally{g(!1)}};return c?p.jsxs("div",{className:"client-accepted-loading",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Loading request details..."})]}):n?(t?._id,n?.provider?._id,p.jsx("div",{className:"client-accepted-container",children:p.jsxs("div",{className:"layout-grid",children:[p.jsx("div",{className:"left-column",children:p.jsxs("div",{className:"job-summary-card",children:[p.jsx("h2",{className:"summary-title",children:"Job Summary"}),p.jsxs("div",{className:"job-details",children:[p.jsxs("div",{className:"detail-group",children:[p.jsx("label",{className:"detail-label",children:"Service"}),p.jsx("p",{className:"detail-value",children:n?.typeOfWork||"Not specified"})]}),p.jsxs("div",{className:"detail-group",children:[p.jsx("label",{className:"detail-label",children:"Budget"}),p.jsxs("p",{className:"detail-value",children:["",n?.budget||0]})]}),p.jsxs("div",{className:"detail-group",children:[p.jsx("label",{className:"detail-label",children:"Date created"}),p.jsx("p",{className:"detail-value",children:n?.createdAt?new Date(n.createdAt).toLocaleDateString():"Not specified"})]}),p.jsxs("div",{className:"detail-group",children:[p.jsx("label",{className:"detail-label",children:"Preferred time"}),p.jsx("p",{className:"detail-value",children:n?.time||"Not specified"})]})]}),p.jsxs("div",{className:"status-section",children:[p.jsx("label",{className:"status-label",children:"Status"}),p.jsx("p",{className:"status-value",children:n?.status||"Working"})]}),n?.notes&&p.jsxs("div",{className:"notes-section",children:[p.jsx("h4",{children:"Client Notes"}),p.jsx("p",{children:n.notes})]})]})}),p.jsx("div",{className:"middle-column",children:p.jsxs("div",{className:"proof-section-card",children:[p.jsx("h2",{className:"section-title",children:"Proof of Work"}),p.jsx("label",{className:"media-label",children:"Upload photos or videos of your completed work"}),p.jsx("div",{className:"media-section",children:p.jsxs("button",{className:`btn-upload ${d?"disabled":""}`,onClick:ce,disabled:d,children:[p.jsx("i",{className:"fas fa-cloud-upload-alt"}),p.jsx("span",{children:"Click to upload"})]})}),N.length>0&&p.jsxs("div",{className:"media-container",children:[p.jsxs("div",{className:"media-count",children:["Uploaded (",N.length,")"]}),p.jsx("div",{className:"media-preview",children:N.map((ue,re)=>p.jsxs("div",{className:"media-thumbnail",children:[p.jsx("img",{src:ue.uri,alt:`Proof ${re+1}`,className:"media-item"}),p.jsx("button",{className:"remove-media",onClick:()=>B(W=>W.filter((de,Ee)=>Ee!==re)),title:"Remove",children:p.jsx("i",{className:"fas fa-times"})})]},re))})]}),p.jsxs("div",{className:"notes-input-section",children:[p.jsx("label",{className:"notes-label",children:"Completion Notes (Optional)"}),p.jsx("textarea",{className:"comment-input",value:x,onChange:ue=>C(ue.target.value),placeholder:"Add any notes about the completed work...",disabled:d,maxLength:500}),p.jsxs("p",{className:"input-hint",children:[x.length,"/500 characters"]})]}),p.jsx("div",{className:"completion-buttons",children:p.jsxs("button",{className:`btn-complete ${d?"disabled":""}`,onClick:se,disabled:d,children:[p.jsx("i",{className:"fas fa-check"}),d?"Submitting...":"Complete Job"]})})]})}),p.jsxs("div",{className:"right-column",children:[p.jsxs("div",{className:"client-card",children:[p.jsx("h3",{className:"section-title",children:"Requestor"}),p.jsxs("div",{className:"client-profile",children:[p.jsx("img",{src:n?.requester?.profilePic||"/default-profile.png",alt:`${n?.requester?.firstName} ${n?.requester?.lastName}`,className:"profile-avatar-small"}),p.jsxs("div",{className:"client-info",children:[p.jsxs("h4",{className:"client-name",children:[n?.requester?.firstName||"Unknown"," ",n?.requester?.lastName||""]}),p.jsx("p",{className:"client-email",children:n?.requester?.email||"No email"}),n?.requester?.phone&&p.jsx("p",{className:"client-phone",children:n?.requester?.phone})]})]}),p.jsxs("div",{className:"client-actions",children:[p.jsxs("button",{className:"btn-call-sm",onClick:le,disabled:!n?.requester?.phone,children:[p.jsx("i",{className:"fas fa-phone"}),"Call"]}),p.jsxs("button",{className:"btn-chat-sm",onClick:ae,children:[p.jsx("i",{className:"fas fa-comments"}),"Chat"]})]}),p.jsxs("div",{className:"about-section",children:[p.jsx("h4",{children:"About Requestor"}),p.jsx("div",{className:"requester-stats",children:M?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Completed Jobs:"}),p.jsx("span",{className:"stat-value",children:M.completedRequests||0})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Rating:"}),p.jsx("span",{className:"stat-value",children:M.averageRating?`${M.averageRating.toFixed(1)} `:"Not rated"})]}),M.verified&&p.jsxs("div",{className:"stat-item verified",children:[p.jsx("i",{className:"fas fa-check-circle"}),p.jsx("span",{children:"Verified Account"})]})]}):p.jsx("p",{className:"about-text",children:n?.requester?.verified?" Verified client":"Client account"})}),n?.requester?.bio&&p.jsx("p",{className:"about-text",children:n?.requester?.bio})]})]}),p.jsxs("button",{className:`btn-cancel-full ${d?"disabled":""}`,onClick:X,disabled:d,children:[p.jsx("i",{className:"fas fa-times"}),"Cancel Request"]})]})]})})):p.jsx("div",{className:"client-accepted-error",children:p.jsx("p",{children:"No request data available"})})},Ioe=()=>{const{setUser:e,logout:t}=Ma(),[r,i]=_e.useState(!0),[n,a]=_e.useState(!1),[c,s]=_e.useState(""),[d,g]=_e.useState(""),[x,C]=_e.useState(0),[N,B]=_e.useState(!1),[M,I]=_e.useState(""),[R,D]=_e.useState(null),[V,G]=_e.useState(""),[Z,X]=_e.useState("profile"),[le,ae]=_e.useState({username:"",firstName:"",lastName:"",email:"",phone:""}),[ce,se]=_e.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0}),ue=_e.useRef(null),re=Va();_e.useEffect(()=>{W(),de(),Ee()},[]);const W=async()=>{try{i(!0);const rt=await Cr.get("/user/me");if(rt.data.success){const gt=rt.data.user;e(gt),ae({username:gt.username||"",firstName:gt.firstName||"",lastName:gt.lastName||"",email:gt.email||"",phone:gt.phone||""})}}catch(rt){s("Failed to fetch profile data"),console.error("Error fetching profile:",rt)}finally{i(!1)}},de=async()=>{try{const rt=await Cr.get("/user/me/password");rt.data.success&&C(rt.data.length)}catch(rt){console.error("Failed to fetch password length:",rt)}},Ee=async()=>{try{const rt=await Cr.get("/user/notification-preferences");if(rt.data.success){const gt=rt.data.preferences;se({emailNotifications:gt.emailNotifications,smsNotifications:gt.smsNotifications,pushNotifications:gt.pushNotifications})}}catch(rt){console.error("Failed to fetch notification preferences:",rt)}},Ne=(rt="")=>rt?rt.replace(/.(?=.{4})/g,"*"):"",ge=(rt="")=>{if(!rt.includes("@"))return rt;const[gt,dt]=rt.split("@");return gt?`${gt.slice(0,2)}${gt.length>2?"***":""}@${dt}`:rt},Pe=rt=>{D(rt),G(le[rt]||""),s(""),g("")},Ye=()=>{D(null),G("")},Me=async()=>{if(R){if(!V.trim()){s("Value cannot be empty.");return}try{a(!0),s(""),g("");const rt={[R]:V.trim()},gt=await Cr.put("/user/update-profile",rt);gt.data.success?(e(gt.data.user),ae(dt=>({...dt,[R]:V.trim()})),g(`${R==="phone"?"Phone number":"Email"} updated successfully.`),Ye()):s("Failed to update profile")}catch(rt){console.error("Error updating profile:",rt),s("Failed to update profile")}finally{a(!1)}}},De=async()=>{try{(await Cr.put("/user/password/update",{newPassword:M})).data.success?(g("Password updated successfully"),B(!1),C(M.length),I("")):s("Failed to update password")}catch(rt){console.error("Error updating password:",rt),s("Error updating password")}},tt=rt=>"*".repeat(rt||0),ee=()=>{ue.current?.click()},fe=async rt=>{const gt=rt.target.files?.[0];if(gt)try{a(!0),s(""),g("");const dt=new FormData;dt.append("profilePic",gt);const qt=await Cr.put("/user/update-profile",dt,{headers:{"Content-Type":"multipart/form-data"}});qt.data.success?(e(qt.data.user),g("Profile picture updated.")):s("Failed to update profile picture")}catch(dt){console.error("Profile picture update failed:",dt),s("Failed to update profile picture")}finally{a(!1)}},pe=async()=>{try{a(!0),s(""),g(""),(await Cr.put("/user/notification-preferences",ce)).data.success?g("Notification preferences updated successfully."):s("Failed to update notification preferences")}catch(rt){console.error("Error updating notification preferences:",rt),s("Failed to update notification preferences")}finally{a(!1)}},we=async()=>{try{await t(),re("/login")}catch(rt){console.error("Logout failed:",rt)}};if(r)return p.jsx("p",{children:"Loading..."});const Le=[{label:"Profile",icon:"",key:"profile"},{label:"Notification",icon:"",key:"notifications"}],lt=[{label:"Terms & Policies",icon:"",key:"terms"},{label:"About us",icon:"",key:"about"}];return p.jsxs("div",{className:"settings-shell",children:[p.jsxs("aside",{className:"settings-shell__sidebar",children:[p.jsxs("div",{className:"settings-shell__group",children:[p.jsx("p",{className:"settings-shell__title",children:"Account"}),Le.map(rt=>p.jsxs("button",{className:`settings-shell__link ${Z===rt.key?"is-active":""}`,onClick:()=>X(rt.key),type:"button",children:[p.jsx("span",{children:rt.icon}),rt.label]},rt.key))]}),p.jsxs("div",{className:"settings-shell__group",children:[p.jsx("p",{className:"settings-shell__title",children:"About"}),lt.map(rt=>p.jsxs("button",{className:`settings-shell__link ${Z===rt.key?"is-active":""}`,onClick:()=>X(rt.key),type:"button",children:[p.jsx("span",{children:rt.icon}),rt.label]},rt.key))]}),p.jsx("button",{className:"settings-shell__logout",type:"button",onClick:we,children:"Log Out "})]}),p.jsxs("main",{className:"settings-shell__content",children:[p.jsx("header",{className:"settings-profile-header",children:p.jsx("h1",{children:Z==="profile"?"Profile":Z==="notifications"?"Notifications":Z==="terms"?"Terms & Policies":"About SkillConnect"})}),c&&p.jsx("p",{className:"error-text",children:c}),d&&p.jsx("p",{className:"success-text",children:d}),Z==="profile"&&p.jsxs("section",{className:"settings-profile-card",children:[p.jsxs("div",{className:"profile-row",children:[p.jsx("div",{className:"profile-label",children:"First Name"}),p.jsx("div",{className:"profile-value",children:le.firstName})]}),p.jsxs("div",{className:"profile-row",children:[p.jsx("div",{className:"profile-label",children:"Last Name"}),p.jsx("div",{className:"profile-value",children:le.lastName})]}),p.jsxs("div",{className:"profile-row editable",children:[p.jsx("div",{className:"profile-label",children:"Phone"}),R==="phone"?p.jsxs("div",{className:"profile-inline-editor",children:[p.jsx("input",{type:"tel",value:V,onChange:rt=>G(rt.target.value),placeholder:"+63 900 000 0000"}),p.jsxs("div",{className:"profile-inline-actions",children:[p.jsx("button",{type:"button",onClick:Me,disabled:n,children:"Save"}),p.jsx("button",{type:"button",onClick:Ye,disabled:n,children:"Cancel"})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"profile-value",children:Ne(le.phone)}),p.jsx("button",{type:"button",className:"profile-action",onClick:()=>Pe("phone"),children:"Change"})]})]}),p.jsxs("div",{className:"profile-row editable",children:[p.jsx("div",{className:"profile-label",children:"Email"}),R==="email"?p.jsxs("div",{className:"profile-inline-editor",children:[p.jsx("input",{type:"email",value:V,onChange:rt=>G(rt.target.value),placeholder:"name@email.com"}),p.jsxs("div",{className:"profile-inline-actions",children:[p.jsx("button",{type:"button",onClick:Me,disabled:n,children:"Save"}),p.jsx("button",{type:"button",onClick:Ye,disabled:n,children:"Cancel"})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"profile-value",children:ge(le.email)}),p.jsx("button",{type:"button",className:"profile-action",onClick:()=>Pe("email"),children:"Change"})]})]}),p.jsxs("div",{className:"profile-row editable",children:[p.jsx("div",{className:"profile-label",children:"Password"}),p.jsx("div",{className:"profile-value",children:tt(x)}),p.jsx("button",{type:"button",className:"profile-action",onClick:()=>B(!0),children:"Change"})]}),p.jsxs("div",{className:"profile-row editable",children:[p.jsx("div",{className:"profile-label",children:"Profile picture"}),p.jsx("div",{className:"profile-value",children:"profilepicture.jpg"}),p.jsx("button",{type:"button",className:"profile-action",onClick:ee,children:"Update"}),p.jsx("input",{type:"file",ref:ue,accept:"image/*",style:{display:"none"},onChange:fe})]}),p.jsxs("div",{className:"profile-row accent",children:[p.jsx("div",{className:"profile-label",children:"Account"}),p.jsx("button",{type:"button",className:"profile-action delete",children:"Delete Account"})]})]}),Z==="notifications"&&p.jsxs("section",{className:"settings-card",children:[p.jsx("h2",{children:"Notification Preferences"}),p.jsx("p",{children:"Manage how we keep you updated about service requests and account activity."}),p.jsxs("div",{className:"toggle-row",children:[p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:ce.emailNotifications,onChange:rt=>se(gt=>({...gt,emailNotifications:rt.target.checked}))}),"Email reminders"]}),p.jsx("p",{className:"option-description",children:"Receive service request confirmations, updates, and important account notifications via email."})]}),p.jsxs("div",{className:"toggle-row",children:[p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:ce.smsNotifications,onChange:rt=>se(gt=>({...gt,smsNotifications:rt.target.checked}))}),"SMS alerts"]}),p.jsx("p",{className:"option-description",children:"Get urgent notifications about service request changes and service updates via text message."})]}),p.jsxs("div",{className:"toggle-row",children:[p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:ce.pushNotifications,onChange:rt=>se(gt=>({...gt,pushNotifications:rt.target.checked}))}),"Push notifications"]}),p.jsx("p",{className:"option-description",children:"Receive instant notifications on your device for new messages, service requests, and updates."})]}),p.jsx("button",{className:"primary-btn",type:"button",onClick:pe,disabled:n,children:n?"Saving...":"Save Preferences"})]}),Z==="terms"&&p.jsxs("section",{className:"settings-card",children:[p.jsx("h2",{children:"Terms & Policies"}),p.jsx("p",{children:"Please review our latest terms of service and privacy practices."}),p.jsx("button",{className:"primary-btn",type:"button",onClick:()=>re("/terms"),children:"View Terms & Policies"})]}),Z==="about"&&p.jsxs("section",{className:"settings-card",children:[p.jsx("h2",{children:"About SkillConnect"}),p.jsx("p",{children:"Learn how we connect trusted service providers with the community."}),p.jsx("button",{className:"primary-btn",type:"button",onClick:()=>re("/about"),children:"Visit About Page"})]}),N&&p.jsx("div",{className:"settings-password-modal",children:p.jsxs("div",{className:"password-modal__card",children:[p.jsx("h3",{children:"Update Password"}),p.jsx("input",{type:"password",placeholder:"Enter new password",value:M,onChange:rt=>I(rt.target.value)}),p.jsxs("div",{className:"password-modal__actions",children:[p.jsx("button",{type:"button",onClick:()=>{B(!1),I("")},children:"Cancel"}),p.jsx("button",{type:"button",disabled:!M,onClick:De,children:"Save"})]})]})})]})]})},Loe=()=>{const{user:e,logout:t}=Ma(),r=async()=>{await t()};return p.jsx("div",{className:"verification-pending-container",children:p.jsxs("div",{className:"verification-pending-card",children:[p.jsx("div",{className:"verification-icon",children:p.jsx("i",{className:"fas fa-clock"})}),p.jsx("h1",{children:"Account Verification Pending"}),p.jsxs("div",{className:"verification-message",children:[p.jsxs("p",{children:["Hello ",p.jsxs("strong",{children:[e?.firstName," ",e?.lastName]}),","]}),p.jsx("p",{children:"Your account is currently under review by our administrators."}),p.jsx("p",{children:"You will receive access to the platform once your account has been verified."})]}),p.jsxs("div",{className:"verification-details",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("i",{className:"fas fa-envelope"}),p.jsx("span",{children:"Check your email for verification updates"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("i",{className:"fas fa-user-shield"}),p.jsx("span",{children:"Verification typically takes 1-3 business days"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("i",{className:"fas fa-phone"}),p.jsx("span",{children:"Contact support if you have questions"})]})]}),p.jsx("div",{className:"verification-actions",children:p.jsxs("button",{className:"logout-btn",onClick:r,children:[p.jsx("i",{className:"fas fa-sign-out-alt"}),"Logout"]})}),p.jsx("div",{className:"verification-footer",children:p.jsx("p",{children:"Thank you for your patience!"})})]})})},Moe=()=>{const{user:e,logout:t}=Ma(),r=async()=>{await t()};return p.jsx("div",{className:"account-banned-container",children:p.jsxs("div",{className:"account-banned-card",children:[p.jsx("div",{className:"banned-icon",children:p.jsx("i",{className:"fas fa-ban"})}),p.jsx("h1",{children:"Account Suspended"}),p.jsxs("div",{className:"banned-message",children:[p.jsxs("p",{children:["Hello ",p.jsxs("strong",{children:[e?.firstName," ",e?.lastName]}),","]}),p.jsx("p",{children:"Your account has been suspended due to violation of our community guidelines."}),p.jsx("p",{children:"If you believe this suspension was made in error, please contact our support team for assistance."})]}),p.jsxs("div",{className:"banned-details",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("i",{className:"fas fa-envelope"}),p.jsx("span",{children:"Contact support for account reinstatement"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("i",{className:"fas fa-shield-alt"}),p.jsx("span",{children:"Review our community guidelines"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("i",{className:"fas fa-question-circle"}),p.jsx("span",{children:"Need help? Reach out to our support team"})]})]}),p.jsx("div",{className:"banned-actions",children:p.jsxs("button",{className:"logout-btn",onClick:r,children:[p.jsx("i",{className:"fas fa-sign-out-alt"}),"Logout"]})}),p.jsx("div",{className:"banned-footer",children:p.jsx("p",{children:"We appreciate your understanding."})})]})})};class Poe extends On.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),this.setState({error:t,errorInfo:r})}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleGoHome=()=>{window.location.href="/home"};render(){return this.state.hasError?p.jsxs("div",{className:"error-boundary",children:[p.jsx(Dj,{className:"error-boundary-icon"}),p.jsx("h2",{children:"Oops! Something went wrong"}),p.jsx("p",{children:"We're sorry, but something unexpected happened. Don't worry, our team has been notified."}),p.jsxs("div",{className:"error-boundary-buttons",children:[p.jsxs("button",{className:"error-boundary-button",onClick:this.handleRetry,"aria-label":"Try loading the page again",children:[p.jsx(zj,{}),"Try Again"]}),p.jsxs("button",{className:"error-boundary-button error-boundary-button-secondary",onClick:this.handleGoHome,"aria-label":"Go back to home page",children:[p.jsx(zk,{}),"Go Home"]})]}),!1,p.jsxs("div",{className:"error-boundary-help",children:[p.jsx("p",{children:"If the problem persists, please try:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Refreshing the page"}),p.jsx("li",{children:"Clearing your browser cache"}),p.jsx("li",{children:"Contacting support if the issue continues"})]})]})]}):this.props.children}}const ep=({allowedRoles:e,children:t,fallback:r=null})=>{const{user:i}=Ma(),n=i?.role;return e&&e.length>0&&!e.includes(n)&&n!=="Service Provider"?r||p.jsx(S1,{to:"/user/service-request"}):t},Doe=({children:e})=>{const{user:t}=Ma();return t?.banned?p.jsx(Moe,{}):t?.verified?e:p.jsx(Loe,{})},Roe=()=>{const{isAuthorized:e,tokenType:t,authLoaded:r,user:i,admin:n}=Ma(),a=sh(),c=Va(),s=e&&t==="admin",d=e&&t==="user",g=i?.role;return _e.useEffect(()=>{d&&a.pathname.startsWith("/user/")&&a.pathname!=="/user/login"&&localStorage.setItem("userLastPath",a.pathname)},[a.pathname,d]),_e.useEffect(()=>{if(!r)return;const x=a.pathname==="/login"||a.pathname==="/register"||a.pathname==="/admin/login"||a.pathname==="/forgot-password"||a.pathname==="/verify-email"||a.pathname==="/reset-password";if(e&&!x){if(s&&!a.pathname.startsWith("/admin")){const C=localStorage.getItem("adminLastPath");C&&C.startsWith("/admin/")?c(C,{replace:!0}):c("/admin/analytics",{replace:!0})}else if(d&&(a.pathname==="/"||a.pathname==="/home")){const C=localStorage.getItem("userLastPath");C&&C.startsWith("/user/")?c(C,{replace:!0}):g==="Service Provider"?(c("/user/my-service",{replace:!0}),localStorage.setItem("userLastPath","/user/my-service")):(c("/user/service-request",{replace:!0}),localStorage.setItem("userLastPath","/user/service-request"))}}else!e&&!x&&a.pathname.startsWith("/user/")?c("/login",{replace:!0}):!e&&!x&&a.pathname.startsWith("/admin/")&&c("/admin/login",{replace:!0})},[e,a.pathname,c,s,d,r,g]),p.jsxs(p.Fragment,{children:[p.jsx(rO,{}),p.jsxs(GM,{children:[p.jsx(Dn,{path:"/",element:p.jsx(LC,{})}),p.jsx(Dn,{path:"/home",element:p.jsx(LC,{})}),p.jsx(Dn,{path:"/about",element:p.jsx(uO,{})}),p.jsx(Dn,{path:"/login",element:p.jsx(hO,{})}),p.jsx(Dn,{path:"/register",element:p.jsx(AO,{})}),p.jsx(Dn,{path:"/forgot-password",element:p.jsx(fO,{})}),p.jsx(Dn,{path:"/verify-email",element:p.jsx(dO,{})}),p.jsx(Dn,{path:"/reset-password",element:p.jsx(pO,{})}),p.jsx(Dn,{path:"/admin/login",element:p.jsx(mO,{})}),p.jsxs(Dn,{path:"/user/*",element:d?p.jsx(Doe,{children:p.jsx(PF,{})}):p.jsx(S1,{to:"/login"}),children:[p.jsx(Dn,{index:!0,element:p.jsx(Wy,{})}),p.jsx(Dn,{path:"dashboard",element:p.jsx(Wy,{})}),p.jsx(Dn,{path:"my-service",element:p.jsx(ep,{allowedRoles:["Service Provider"],children:p.jsx(Wy,{})})}),p.jsx(Dn,{path:"my-service",element:p.jsx(Wy,{})}),p.jsx(Dn,{path:"manage-profile",element:p.jsx(Eoe,{})}),p.jsx(Dn,{path:"general-settings",element:p.jsx(Ioe,{})}),p.jsx(Dn,{path:"service-request",element:p.jsx(ep,{allowedRoles:["Community Member","Service Provider"],children:p.jsx(goe,{})})}),p.jsx(Dn,{path:"records",element:p.jsx(ep,{allowedRoles:["Community Member","Service Provider"],children:p.jsx(Boe,{})})}),p.jsx(Dn,{path:"waiting-for-worker",element:p.jsx(ep,{allowedRoles:["Community Member","Service Provider"],children:p.jsx(Toe,{})})}),p.jsx(Dn,{path:"accepted-order",element:p.jsx(ep,{allowedRoles:["Community Member","Service Provider"],children:p.jsx(Foe,{})})}),p.jsx(Dn,{path:"users-request",element:p.jsx(ep,{allowedRoles:["Service Provider"],children:p.jsx(Soe,{})})}),p.jsx(Dn,{path:"accepted-request",element:p.jsx(ep,{allowedRoles:["Service Provider"],children:p.jsx(koe,{})})}),p.jsx(Dn,{path:"client-accepted",element:p.jsx(ep,{allowedRoles:["Service Provider"],children:p.jsx(Noe,{})})})]}),p.jsxs(Dn,{path:"/admin/*",element:s?p.jsx(gO,{}):p.jsx(S1,{to:"/admin/login"}),children:[p.jsx(Dn,{index:!0,element:p.jsx(S1,{to:"/admin/analytics"})}),p.jsx(Dn,{path:"analytics",element:p.jsx(aY,{})}),p.jsx(Dn,{path:"recommendations",element:p.jsx(oY,{})}),p.jsx(Dn,{path:"service-providers",element:p.jsx(vO,{})}),p.jsx(Dn,{path:"jobfairs",element:p.jsx(xO,{})}),p.jsx(Dn,{path:"service-requests",element:p.jsx(yO,{})}),p.jsx(Dn,{path:"users",element:p.jsx(bO,{})}),p.jsx(Dn,{path:"admin-register",element:p.jsx(uY,{})}),p.jsx(Dn,{path:"admin-settings",element:p.jsx(cY,{})}),p.jsx(Dn,{path:"skill-category",element:p.jsx(lY,{})}),p.jsx(Dn,{path:"residents",element:p.jsx(foe,{})})]}),p.jsx(Dn,{path:"*",element:p.jsx(S1,{to:"/"})})]}),!s&&!d&&p.jsx(nO,{}),p.jsx(vj,{user:d?i:n})]})},Uoe=()=>p.jsx(Poe,{children:p.jsx(voe,{children:p.jsxs(pP,{children:[p.jsx(Roe,{}),p.jsx(gj,{})]})})});pg.register(X4,Z4,G4,mg,W4,$4,K4,q4,V4,M6);JL.createRoot(document.getElementById("root")).render(p.jsx(On.StrictMode,{children:p.jsx(DU,{children:p.jsx(Uoe,{})})}));export{Ns as _,joe as c,c4 as g};
