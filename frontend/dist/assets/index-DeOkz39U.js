(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const A of u.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&n(A)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();var X3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Y3(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var i=function n(){var o=!1;try{o=this instanceof n}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),i}var Y1={exports:{}},dg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function J3(){if(p2)return dg;p2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(n,o,u){var A=null;if(u!==void 0&&(A=""+u),o.key!==void 0&&(A=""+o.key),"key"in o){u={};for(var a in o)a!=="key"&&(u[a]=o[a])}else u=o;return o=u.ref,{$$typeof:t,type:n,key:A,ref:o!==void 0?o:null,props:u}}return dg.Fragment=e,dg.jsx=i,dg.jsxs=i,dg}var m2;function eE(){return m2||(m2=1,Y1.exports=J3()),Y1.exports}var p=eE(),J1={exports:{}},Xn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g2;function tE(){if(g2)return Xn;g2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),A=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),I=Symbol.iterator;function P(pe){return pe===null||typeof pe!="object"?null:(pe=I&&pe[I]||pe["@@iterator"],typeof pe=="function"?pe:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,R={};function H(pe,Qe,J){this.props=pe,this.context=Qe,this.refs=R,this.updater=J||F}H.prototype.isReactComponent={},H.prototype.setState=function(pe,Qe){if(typeof pe!="object"&&typeof pe!="function"&&pe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,pe,Qe,"setState")},H.prototype.forceUpdate=function(pe){this.updater.enqueueForceUpdate(this,pe,"forceUpdate")};function j(){}j.prototype=H.prototype;function V(pe,Qe,J){this.props=pe,this.context=Qe,this.refs=R,this.updater=J||F}var W=V.prototype=new j;W.constructor=V,Q(W,H.prototype),W.isPureReactComponent=!0;var ne=Array.isArray,te={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function ee(pe,Qe,J,me,Fe,ze){return J=ze.ref,{$$typeof:t,type:pe,key:Qe,ref:J!==void 0?J:null,props:ze}}function re(pe,Qe){return ee(pe.type,Qe,void 0,void 0,void 0,pe.props)}function xe(pe){return typeof pe=="object"&&pe!==null&&pe.$$typeof===t}function Be(pe){var Qe={"=":"=0",":":"=2"};return"$"+pe.replace(/[=:]/g,function(J){return Qe[J]})}var se=/\/+/g;function ae(pe,Qe){return typeof pe=="object"&&pe!==null&&pe.key!=null?Be(""+pe.key):Qe.toString(36)}function ce(){}function Ee(pe){switch(pe.status){case"fulfilled":return pe.value;case"rejected":throw pe.reason;default:switch(typeof pe.status=="string"?pe.then(ce,ce):(pe.status="pending",pe.then(function(Qe){pe.status==="pending"&&(pe.status="fulfilled",pe.value=Qe)},function(Qe){pe.status==="pending"&&(pe.status="rejected",pe.reason=Qe)})),pe.status){case"fulfilled":return pe.value;case"rejected":throw pe.reason}}throw pe}function Ve(pe,Qe,J,me,Fe){var ze=typeof pe;(ze==="undefined"||ze==="boolean")&&(pe=null);var Ke=!1;if(pe===null)Ke=!0;else switch(ze){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(pe.$$typeof){case t:case e:Ke=!0;break;case B:return Ke=pe._init,Ve(Ke(pe._payload),Qe,J,me,Fe)}}if(Ke)return Fe=Fe(pe),Ke=me===""?"."+ae(pe,0):me,ne(Fe)?(J="",Ke!=null&&(J=Ke.replace(se,"$&/")+"/"),Ve(Fe,Qe,J,"",function(Et){return Et})):Fe!=null&&(xe(Fe)&&(Fe=re(Fe,J+(Fe.key==null||pe&&pe.key===Fe.key?"":(""+Fe.key).replace(se,"$&/")+"/")+Ke)),Qe.push(Fe)),1;Ke=0;var _t=me===""?".":me+":";if(ne(pe))for(var gt=0;gt<pe.length;gt++)me=pe[gt],ze=_t+ae(me,gt),Ke+=Ve(me,Qe,J,ze,Fe);else if(gt=P(pe),typeof gt=="function")for(pe=gt.call(pe),gt=0;!(me=pe.next()).done;)me=me.value,ze=_t+ae(me,gt++),Ke+=Ve(me,Qe,J,ze,Fe);else if(ze==="object"){if(typeof pe.then=="function")return Ve(Ee(pe),Qe,J,me,Fe);throw Qe=String(pe),Error("Objects are not valid as a React child (found: "+(Qe==="[object Object]"?"object with keys {"+Object.keys(pe).join(", ")+"}":Qe)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function ue(pe,Qe,J){if(pe==null)return pe;var me=[],Fe=0;return Ve(pe,me,"","",function(ze){return Qe.call(J,ze,Fe++)}),me}function fe(pe){if(pe._status===-1){var Qe=pe._result;Qe=Qe(),Qe.then(function(J){(pe._status===0||pe._status===-1)&&(pe._status=1,pe._result=J)},function(J){(pe._status===0||pe._status===-1)&&(pe._status=2,pe._result=J)}),pe._status===-1&&(pe._status=0,pe._result=Qe)}if(pe._status===1)return pe._result.default;throw pe._result}var Ue=typeof reportError=="function"?reportError:function(pe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Qe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof pe=="object"&&pe!==null&&typeof pe.message=="string"?String(pe.message):String(pe),error:pe});if(!window.dispatchEvent(Qe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",pe);return}console.error(pe)};function ke(){}return Xn.Children={map:ue,forEach:function(pe,Qe,J){ue(pe,function(){Qe.apply(this,arguments)},J)},count:function(pe){var Qe=0;return ue(pe,function(){Qe++}),Qe},toArray:function(pe){return ue(pe,function(Qe){return Qe})||[]},only:function(pe){if(!xe(pe))throw Error("React.Children.only expected to receive a single React element child.");return pe}},Xn.Component=H,Xn.Fragment=i,Xn.Profiler=o,Xn.PureComponent=V,Xn.StrictMode=n,Xn.Suspense=g,Xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Xn.__COMPILER_RUNTIME={__proto__:null,c:function(pe){return te.H.useMemoCache(pe)}},Xn.cache=function(pe){return function(){return pe.apply(null,arguments)}},Xn.cloneElement=function(pe,Qe,J){if(pe==null)throw Error("The argument must be a React element, but you passed "+pe+".");var me=Q({},pe.props),Fe=pe.key,ze=void 0;if(Qe!=null)for(Ke in Qe.ref!==void 0&&(ze=void 0),Qe.key!==void 0&&(Fe=""+Qe.key),Qe)!de.call(Qe,Ke)||Ke==="key"||Ke==="__self"||Ke==="__source"||Ke==="ref"&&Qe.ref===void 0||(me[Ke]=Qe[Ke]);var Ke=arguments.length-2;if(Ke===1)me.children=J;else if(1<Ke){for(var _t=Array(Ke),gt=0;gt<Ke;gt++)_t[gt]=arguments[gt+2];me.children=_t}return ee(pe.type,Fe,void 0,void 0,ze,me)},Xn.createContext=function(pe){return pe={$$typeof:A,_currentValue:pe,_currentValue2:pe,_threadCount:0,Provider:null,Consumer:null},pe.Provider=pe,pe.Consumer={$$typeof:u,_context:pe},pe},Xn.createElement=function(pe,Qe,J){var me,Fe={},ze=null;if(Qe!=null)for(me in Qe.key!==void 0&&(ze=""+Qe.key),Qe)de.call(Qe,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Fe[me]=Qe[me]);var Ke=arguments.length-2;if(Ke===1)Fe.children=J;else if(1<Ke){for(var _t=Array(Ke),gt=0;gt<Ke;gt++)_t[gt]=arguments[gt+2];Fe.children=_t}if(pe&&pe.defaultProps)for(me in Ke=pe.defaultProps,Ke)Fe[me]===void 0&&(Fe[me]=Ke[me]);return ee(pe,ze,void 0,void 0,null,Fe)},Xn.createRef=function(){return{current:null}},Xn.forwardRef=function(pe){return{$$typeof:a,render:pe}},Xn.isValidElement=xe,Xn.lazy=function(pe){return{$$typeof:B,_payload:{_status:-1,_result:pe},_init:fe}},Xn.memo=function(pe,Qe){return{$$typeof:b,type:pe,compare:Qe===void 0?null:Qe}},Xn.startTransition=function(pe){var Qe=te.T,J={};te.T=J;try{var me=pe(),Fe=te.S;Fe!==null&&Fe(J,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ke,Ue)}catch(ze){Ue(ze)}finally{te.T=Qe}},Xn.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Xn.use=function(pe){return te.H.use(pe)},Xn.useActionState=function(pe,Qe,J){return te.H.useActionState(pe,Qe,J)},Xn.useCallback=function(pe,Qe){return te.H.useCallback(pe,Qe)},Xn.useContext=function(pe){return te.H.useContext(pe)},Xn.useDebugValue=function(){},Xn.useDeferredValue=function(pe,Qe){return te.H.useDeferredValue(pe,Qe)},Xn.useEffect=function(pe,Qe,J){var me=te.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return me.useEffect(pe,Qe)},Xn.useId=function(){return te.H.useId()},Xn.useImperativeHandle=function(pe,Qe,J){return te.H.useImperativeHandle(pe,Qe,J)},Xn.useInsertionEffect=function(pe,Qe){return te.H.useInsertionEffect(pe,Qe)},Xn.useLayoutEffect=function(pe,Qe){return te.H.useLayoutEffect(pe,Qe)},Xn.useMemo=function(pe,Qe){return te.H.useMemo(pe,Qe)},Xn.useOptimistic=function(pe,Qe){return te.H.useOptimistic(pe,Qe)},Xn.useReducer=function(pe,Qe,J){return te.H.useReducer(pe,Qe,J)},Xn.useRef=function(pe){return te.H.useRef(pe)},Xn.useState=function(pe){return te.H.useState(pe)},Xn.useSyncExternalStore=function(pe,Qe,J){return te.H.useSyncExternalStore(pe,Qe,J)},Xn.useTransition=function(){return te.H.useTransition()},Xn.version="19.1.1",Xn}var y2;function mb(){return y2||(y2=1,J1.exports=tE()),J1.exports}var Te=mb();const yr=Xv(Te);var e_={exports:{}},fg={},t_={exports:{}},i_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v2;function iE(){return v2||(v2=1,function(t){function e(ue,fe){var Ue=ue.length;ue.push(fe);e:for(;0<Ue;){var ke=Ue-1>>>1,pe=ue[ke];if(0<o(pe,fe))ue[ke]=fe,ue[Ue]=pe,Ue=ke;else break e}}function i(ue){return ue.length===0?null:ue[0]}function n(ue){if(ue.length===0)return null;var fe=ue[0],Ue=ue.pop();if(Ue!==fe){ue[0]=Ue;e:for(var ke=0,pe=ue.length,Qe=pe>>>1;ke<Qe;){var J=2*(ke+1)-1,me=ue[J],Fe=J+1,ze=ue[Fe];if(0>o(me,Ue))Fe<pe&&0>o(ze,me)?(ue[ke]=ze,ue[Fe]=Ue,ke=Fe):(ue[ke]=me,ue[J]=Ue,ke=J);else if(Fe<pe&&0>o(ze,Ue))ue[ke]=ze,ue[Fe]=Ue,ke=Fe;else break e}}return fe}function o(ue,fe){var Ue=ue.sortIndex-fe.sortIndex;return Ue!==0?Ue:ue.id-fe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var A=Date,a=A.now();t.unstable_now=function(){return A.now()-a}}var g=[],b=[],B=1,I=null,P=3,F=!1,Q=!1,R=!1,H=!1,j=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ne(ue){for(var fe=i(b);fe!==null;){if(fe.callback===null)n(b);else if(fe.startTime<=ue)n(b),fe.sortIndex=fe.expirationTime,e(g,fe);else break;fe=i(b)}}function te(ue){if(R=!1,ne(ue),!Q)if(i(g)!==null)Q=!0,de||(de=!0,ae());else{var fe=i(b);fe!==null&&Ve(te,fe.startTime-ue)}}var de=!1,ee=-1,re=5,xe=-1;function Be(){return H?!0:!(t.unstable_now()-xe<re)}function se(){if(H=!1,de){var ue=t.unstable_now();xe=ue;var fe=!0;try{e:{Q=!1,R&&(R=!1,V(ee),ee=-1),F=!0;var Ue=P;try{t:{for(ne(ue),I=i(g);I!==null&&!(I.expirationTime>ue&&Be());){var ke=I.callback;if(typeof ke=="function"){I.callback=null,P=I.priorityLevel;var pe=ke(I.expirationTime<=ue);if(ue=t.unstable_now(),typeof pe=="function"){I.callback=pe,ne(ue),fe=!0;break t}I===i(g)&&n(g),ne(ue)}else n(g);I=i(g)}if(I!==null)fe=!0;else{var Qe=i(b);Qe!==null&&Ve(te,Qe.startTime-ue),fe=!1}}break e}finally{I=null,P=Ue,F=!1}fe=void 0}}finally{fe?ae():de=!1}}}var ae;if(typeof W=="function")ae=function(){W(se)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Ee=ce.port2;ce.port1.onmessage=se,ae=function(){Ee.postMessage(null)}}else ae=function(){j(se,0)};function Ve(ue,fe){ee=j(function(){ue(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ue){ue.callback=null},t.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<ue?Math.floor(1e3/ue):5},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_next=function(ue){switch(P){case 1:case 2:case 3:var fe=3;break;default:fe=P}var Ue=P;P=fe;try{return ue()}finally{P=Ue}},t.unstable_requestPaint=function(){H=!0},t.unstable_runWithPriority=function(ue,fe){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var Ue=P;P=ue;try{return fe()}finally{P=Ue}},t.unstable_scheduleCallback=function(ue,fe,Ue){var ke=t.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?ke+Ue:ke):Ue=ke,ue){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Ue+pe,ue={id:B++,callback:fe,priorityLevel:ue,startTime:Ue,expirationTime:pe,sortIndex:-1},Ue>ke?(ue.sortIndex=Ue,e(b,ue),i(g)===null&&ue===i(b)&&(R?(V(ee),ee=-1):R=!0,Ve(te,Ue-ke))):(ue.sortIndex=pe,e(g,ue),Q||F||(Q=!0,de||(de=!0,ae()))),ue},t.unstable_shouldYield=Be,t.unstable_wrapCallback=function(ue){var fe=P;return function(){var Ue=P;P=fe;try{return ue.apply(this,arguments)}finally{P=Ue}}}}(i_)),i_}var _2;function nE(){return _2||(_2=1,t_.exports=iE()),t_.exports}var n_={exports:{}},oc={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function rE(){if(x2)return oc;x2=1;var t=mb();function e(g){var b="https://react.dev/errors/"+g;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var B=2;B<arguments.length;B++)b+="&args[]="+encodeURIComponent(arguments[B])}return"Minified React error #"+g+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,b,B){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:I==null?null:""+I,children:g,containerInfo:b,implementation:B}}var A=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(g,b){if(g==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return oc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,oc.createPortal=function(g,b){var B=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return u(g,b,null,B)},oc.flushSync=function(g){var b=A.T,B=n.p;try{if(A.T=null,n.p=2,g)return g()}finally{A.T=b,n.p=B,n.d.f()}},oc.preconnect=function(g,b){typeof g=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,n.d.C(g,b))},oc.prefetchDNS=function(g){typeof g=="string"&&n.d.D(g)},oc.preinit=function(g,b){if(typeof g=="string"&&b&&typeof b.as=="string"){var B=b.as,I=a(B,b.crossOrigin),P=typeof b.integrity=="string"?b.integrity:void 0,F=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;B==="style"?n.d.S(g,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:I,integrity:P,fetchPriority:F}):B==="script"&&n.d.X(g,{crossOrigin:I,integrity:P,fetchPriority:F,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},oc.preinitModule=function(g,b){if(typeof g=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var B=a(b.as,b.crossOrigin);n.d.M(g,{crossOrigin:B,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&n.d.M(g)},oc.preload=function(g,b){if(typeof g=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var B=b.as,I=a(B,b.crossOrigin);n.d.L(g,B,{crossOrigin:I,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},oc.preloadModule=function(g,b){if(typeof g=="string")if(b){var B=a(b.as,b.crossOrigin);n.d.m(g,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:B,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else n.d.m(g)},oc.requestFormReset=function(g){n.d.r(g)},oc.unstable_batchedUpdates=function(g,b){return g(b)},oc.useFormState=function(g,b,B){return A.H.useFormState(g,b,B)},oc.useFormStatus=function(){return A.H.useHostTransitionStatus()},oc.version="19.1.1",oc}var b2;function sE(){if(b2)return n_.exports;b2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),n_.exports=rE(),n_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w2;function aE(){if(w2)return fg;w2=1;var t=nE(),e=mb(),i=sE();function n(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function u(c){var f=c,v=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(v=f.return),c=f.return;while(c)}return f.tag===3?v:null}function A(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function a(c){if(u(c)!==c)throw Error(n(188))}function g(c){var f=c.alternate;if(!f){if(f=u(c),f===null)throw Error(n(188));return f!==c?null:c}for(var v=c,E=f;;){var k=v.return;if(k===null)break;var G=k.alternate;if(G===null){if(E=k.return,E!==null){v=E;continue}break}if(k.child===G.child){for(G=k.child;G;){if(G===v)return a(k),c;if(G===E)return a(k),f;G=G.sibling}throw Error(n(188))}if(v.return!==E.return)v=k,E=G;else{for(var ye=!1,je=k.child;je;){if(je===v){ye=!0,v=k,E=G;break}if(je===E){ye=!0,E=k,v=G;break}je=je.sibling}if(!ye){for(je=G.child;je;){if(je===v){ye=!0,v=G,E=k;break}if(je===E){ye=!0,E=G,v=k;break}je=je.sibling}if(!ye)throw Error(n(189))}}if(v.alternate!==E)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?c:f}function b(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=b(c),f!==null)return f;c=c.sibling}return null}var B=Object.assign,I=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),V=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),xe=Symbol.for("react.activity"),Be=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function ae(c){return c===null||typeof c!="object"?null:(c=se&&c[se]||c["@@iterator"],typeof c=="function"?c:null)}var ce=Symbol.for("react.client.reference");function Ee(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===ce?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case Q:return"Fragment";case H:return"Profiler";case R:return"StrictMode";case te:return"Suspense";case de:return"SuspenseList";case xe:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case F:return"Portal";case W:return(c.displayName||"Context")+".Provider";case V:return(c._context.displayName||"Context")+".Consumer";case ne:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case ee:return f=c.displayName||null,f!==null?f:Ee(c.type)||"Memo";case re:f=c._payload,c=c._init;try{return Ee(c(f))}catch{}}return null}var Ve=Array.isArray,ue=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ue={pending:!1,data:null,method:null,action:null},ke=[],pe=-1;function Qe(c){return{current:c}}function J(c){0>pe||(c.current=ke[pe],ke[pe]=null,pe--)}function me(c,f){pe++,ke[pe]=c.current,c.current=f}var Fe=Qe(null),ze=Qe(null),Ke=Qe(null),_t=Qe(null);function gt(c,f){switch(me(Ke,f),me(ze,c),me(Fe,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?ag(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=ag(f),c=Id(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}J(Fe),me(Fe,c)}function Et(){J(Fe),J(ze),J(Ke)}function hi(c){c.memoizedState!==null&&me(_t,c);var f=Fe.current,v=Id(f,c.type);f!==v&&(me(ze,c),me(Fe,v))}function Vt(c){ze.current===c&&(J(Fe),J(ze)),_t.current===c&&(J(_t),C._currentValue=Ue)}var Yt=Object.prototype.hasOwnProperty,Jt=t.unstable_scheduleCallback,bi=t.unstable_cancelCallback,ot=t.unstable_shouldYield,$e=t.unstable_requestPaint,Ni=t.unstable_now,yi=t.unstable_getCurrentPriorityLevel,si=t.unstable_ImmediatePriority,Mt=t.unstable_UserBlockingPriority,ei=t.unstable_NormalPriority,ai=t.unstable_LowPriority,Ei=t.unstable_IdlePriority,$i=t.log,zi=t.unstable_setDisableYieldValue,wi=null,Gi=null;function gn(c){if(typeof $i=="function"&&zi(c),Gi&&typeof Gi.setStrictMode=="function")try{Gi.setStrictMode(wi,c)}catch{}}var et=Math.clz32?Math.clz32:Re,be=Math.log,ge=Math.LN2;function Re(c){return c>>>=0,c===0?32:31-(be(c)/ge|0)|0}var Ze=256,st=4194304;function ut(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function wt(c,f,v){var E=c.pendingLanes;if(E===0)return 0;var k=0,G=c.suspendedLanes,ye=c.pingedLanes;c=c.warmLanes;var je=E&134217727;return je!==0?(E=je&~G,E!==0?k=ut(E):(ye&=je,ye!==0?k=ut(ye):v||(v=je&~c,v!==0&&(k=ut(v))))):(je=E&~G,je!==0?k=ut(je):ye!==0?k=ut(ye):v||(v=E&~c,v!==0&&(k=ut(v)))),k===0?0:f!==0&&f!==k&&(f&G)===0&&(G=k&-k,v=f&-f,G>=v||G===32&&(v&4194048)!==0)?f:k}function dt(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function Tt(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oi(){var c=Ze;return Ze<<=1,(Ze&4194048)===0&&(Ze=256),c}function Qt(){var c=st;return st<<=1,(st&62914560)===0&&(st=4194304),c}function Bi(c){for(var f=[],v=0;31>v;v++)f.push(c);return f}function Ui(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function yt(c,f,v,E,k,G){var ye=c.pendingLanes;c.pendingLanes=v,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=v,c.entangledLanes&=v,c.errorRecoveryDisabledLanes&=v,c.shellSuspendCounter=0;var je=c.entanglements,at=c.expirationTimes,Ct=c.hiddenUpdates;for(v=ye&~v;0<v;){var Zt=31-et(v),ci=1<<Zt;je[Zt]=0,at[Zt]=-1;var Rt=Ct[Zt];if(Rt!==null)for(Ct[Zt]=null,Zt=0;Zt<Rt.length;Zt++){var Ht=Rt[Zt];Ht!==null&&(Ht.lane&=-536870913)}v&=~ci}E!==0&&Ti(c,E,0),G!==0&&k===0&&c.tag!==0&&(c.suspendedLanes|=G&~(ye&~f))}function Ti(c,f,v){c.pendingLanes|=f,c.suspendedLanes&=~f;var E=31-et(f);c.entangledLanes|=f,c.entanglements[E]=c.entanglements[E]|1073741824|v&4194090}function Vi(c,f){var v=c.entangledLanes|=f;for(c=c.entanglements;v;){var E=31-et(v),k=1<<E;k&f|c[E]&f&&(c[E]|=f),v&=~k}}function Mi(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function sn(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function vr(){var c=fe.p;return c!==0?c:(c=window.event,c===void 0?32:At(c.type))}function Er(c,f){var v=fe.p;try{return fe.p=c,f()}finally{fe.p=v}}var Pi=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Pi,fn="__reactProps$"+Pi,Dn="__reactContainer$"+Pi,hn="__reactEvents$"+Pi,Kt="__reactListeners$"+Pi,ds="__reactHandles$"+Pi,qs="__reactResources$"+Pi,jr="__reactMarker$"+Pi;function or(c){delete c[Fn],delete c[fn],delete c[hn],delete c[Kt],delete c[ds]}function di(c){var f=c[Fn];if(f)return f;for(var v=c.parentNode;v;){if(f=v[Dn]||v[Fn]){if(v=f.alternate,f.child!==null||v!==null&&v.child!==null)for(c=lg(c);c!==null;){if(v=c[Fn])return v;c=lg(c)}return f}c=v,v=c.parentNode}return null}function tn(c){if(c=c[Fn]||c[Dn]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function nn(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(n(33))}function _r(c){var f=c[qs];return f||(f=c[qs]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Hn(c){c[jr]=!0}var ua=new Set,pn={};function Aa(c,f){Pa(c,f),Pa(c+"Capture",f)}function Pa(c,f){for(pn[c]=f,c=0;c<f.length;c++)ua.add(f[c])}var zo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_c={},Ho={};function xc(c){return Yt.call(Ho,c)?!0:Yt.call(_c,c)?!1:zo.test(c)?Ho[c]=!0:(_c[c]=!0,!1)}function xr(c,f,v){if(xc(f))if(v===null)c.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var E=f.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+v)}}function Gs(c,f,v){if(v===null)c.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+v)}}function qn(c,f,v,E){if(E===null)c.removeAttribute(v);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(v);return}c.setAttributeNS(f,v,""+E)}}var pl,bc;function ml(c){if(pl===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);pl=f&&f[1]||"",bc=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pl+c+bc}var gl=!1;function ba(c,f){if(!c||gl)return"";gl=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(f){var ci=function(){throw Error()};if(Object.defineProperty(ci.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ci,[])}catch(Ht){var Rt=Ht}Reflect.construct(c,[],ci)}else{try{ci.call()}catch(Ht){Rt=Ht}c.call(ci.prototype)}}else{try{throw Error()}catch(Ht){Rt=Ht}(ci=c())&&typeof ci.catch=="function"&&ci.catch(function(){})}}catch(Ht){if(Ht&&Rt&&typeof Ht.stack=="string")return[Ht.stack,Rt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var G=E.DetermineComponentFrameRoot(),ye=G[0],je=G[1];if(ye&&je){var at=ye.split(`
`),Ct=je.split(`
`);for(k=E=0;E<at.length&&!at[E].includes("DetermineComponentFrameRoot");)E++;for(;k<Ct.length&&!Ct[k].includes("DetermineComponentFrameRoot");)k++;if(E===at.length||k===Ct.length)for(E=at.length-1,k=Ct.length-1;1<=E&&0<=k&&at[E]!==Ct[k];)k--;for(;1<=E&&0<=k;E--,k--)if(at[E]!==Ct[k]){if(E!==1||k!==1)do if(E--,k--,0>k||at[E]!==Ct[k]){var Zt=`
`+at[E].replace(" at new "," at ");return c.displayName&&Zt.includes("<anonymous>")&&(Zt=Zt.replace("<anonymous>",c.displayName)),Zt}while(1<=E&&0<=k);break}}}finally{gl=!1,Error.prepareStackTrace=v}return(v=c?c.displayName||c.name:"")?ml(v):""}function XA(c){switch(c.tag){case 26:case 27:case 5:return ml(c.type);case 16:return ml("Lazy");case 13:return ml("Suspense");case 19:return ml("SuspenseList");case 0:case 15:return ba(c.type,!1);case 11:return ba(c.type.render,!1);case 1:return ba(c.type,!0);case 31:return ml("Activity");default:return""}}function Gr(c){try{var f="";do f+=XA(c),c=c.return;while(c);return f}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function wa(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Ql(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function gA(c){var f=Ql(c)?"checked":"value",v=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),E=""+c[f];if(!c.hasOwnProperty(f)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var k=v.get,G=v.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return k.call(this)},set:function(ye){E=""+ye,G.call(this,ye)}}),Object.defineProperty(c,f,{enumerable:v.enumerable}),{getValue:function(){return E},setValue:function(ye){E=""+ye},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function zc(c){c._valueTracker||(c._valueTracker=gA(c))}function YA(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var v=f.getValue(),E="";return c&&(E=Ql(c)?c.checked?"true":"false":c.value),c=E,c!==v?(f.setValue(c),!0):!1}function Ya(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var gu=/[\n"\\]/g;function Mr(c){return c.replace(gu,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function vo(c,f,v,E,k,G,ye,je){c.name="",ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?c.type=ye:c.removeAttribute("type"),f!=null?ye==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+wa(f)):c.value!==""+wa(f)&&(c.value=""+wa(f)):ye!=="submit"&&ye!=="reset"||c.removeAttribute("value"),f!=null?ku(c,ye,wa(f)):v!=null?ku(c,ye,wa(v)):E!=null&&c.removeAttribute("value"),k==null&&G!=null&&(c.defaultChecked=!!G),k!=null&&(c.checked=k&&typeof k!="function"&&typeof k!="symbol"),je!=null&&typeof je!="function"&&typeof je!="symbol"&&typeof je!="boolean"?c.name=""+wa(je):c.removeAttribute("name")}function yu(c,f,v,E,k,G,ye,je){if(G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(c.type=G),f!=null||v!=null){if(!(G!=="submit"&&G!=="reset"||f!=null))return;v=v!=null?""+wa(v):"",f=f!=null?""+wa(f):v,je||f===c.value||(c.value=f),c.defaultValue=f}E=E??k,E=typeof E!="function"&&typeof E!="symbol"&&!!E,c.checked=je?c.checked:!!E,c.defaultChecked=!!E,ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"&&(c.name=ye)}function ku(c,f,v){f==="number"&&Ya(c.ownerDocument)===c||c.defaultValue===""+v||(c.defaultValue=""+v)}function ka(c,f,v,E){if(c=c.options,f){f={};for(var k=0;k<v.length;k++)f["$"+v[k]]=!0;for(v=0;v<c.length;v++)k=f.hasOwnProperty("$"+c[v].value),c[v].selected!==k&&(c[v].selected=k),k&&E&&(c[v].defaultSelected=!0)}else{for(v=""+wa(v),f=null,k=0;k<c.length;k++){if(c[k].value===v){c[k].selected=!0,E&&(c[k].defaultSelected=!0);return}f!==null||c[k].disabled||(f=c[k])}f!==null&&(f.selected=!0)}}function ju(c,f,v){if(f!=null&&(f=""+wa(f),f!==c.value&&(c.value=f),v==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=v!=null?""+wa(v):""}function yA(c,f,v,E){if(f==null){if(E!=null){if(v!=null)throw Error(n(92));if(Ve(E)){if(1<E.length)throw Error(n(93));E=E[0]}v=E}v==null&&(v=""),f=v}v=wa(f),c.defaultValue=v,E=c.textContent,E===v&&E!==""&&E!==null&&(c.value=E)}function Vo(c,f){if(f){var v=c.firstChild;if(v&&v===c.lastChild&&v.nodeType===3){v.nodeValue=f;return}}c.textContent=f}var wc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uu(c,f,v){var E=f.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?E?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":E?c.setProperty(f,v):typeof v!="number"||v===0||wc.has(f)?f==="float"?c.cssFloat=v:c[f]=(""+v).trim():c[f]=v+"px"}function ea(c,f,v){if(f!=null&&typeof f!="object")throw Error(n(62));if(c=c.style,v!=null){for(var E in v)!v.hasOwnProperty(E)||f!=null&&f.hasOwnProperty(E)||(E.indexOf("--")===0?c.setProperty(E,""):E==="float"?c.cssFloat="":c[E]="");for(var k in f)E=f[k],f.hasOwnProperty(k)&&v[k]!==E&&Uu(c,k,E)}else for(var G in f)f.hasOwnProperty(G)&&Uu(c,G,f[G])}function Nn(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ja=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ja(c){return Ns.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var Cn=null;function fs(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var qo=null,eo=null;function Zi(c){var f=tn(c);if(f&&(c=f.stateNode)){var v=c[fn]||null;e:switch(c=f.stateNode,f.type){case"input":if(vo(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),f=v.name,v.type==="radio"&&f!=null){for(v=c;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Mr(""+f)+'"][type="radio"]'),f=0;f<v.length;f++){var E=v[f];if(E!==c&&E.form===c.form){var k=E[fn]||null;if(!k)throw Error(n(90));vo(E,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(f=0;f<v.length;f++)E=v[f],E.form===c.form&&YA(E)}break e;case"textarea":ju(c,v.value,v.defaultValue);break e;case"select":f=v.value,f!=null&&ka(c,!!v.multiple,f,!1)}}}var _s=!1;function xs(c,f,v){if(_s)return c(f,v);_s=!0;try{var E=c(f);return E}finally{if(_s=!1,(qo!==null||eo!==null)&&(gp(),qo&&(f=qo,c=eo,eo=qo=null,Zi(f),c)))for(f=0;f<c.length;f++)Zi(c[f])}}function fr(c,f){var v=c.stateNode;if(v===null)return null;var E=v[fn]||null;if(E===null)return null;v=E[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(c=c.type,E=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!E;break e;default:c=!1}if(c)return null;if(v&&typeof v!="function")throw Error(n(231,f,typeof v));return v}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yl=!1;if(Rn)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){yl=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{yl=!1}var Wr=null,ta=null,zl=null;function rr(){if(zl)return zl;var c,f=ta,v=f.length,E,k="value"in Wr?Wr.value:Wr.textContent,G=k.length;for(c=0;c<v&&f[c]===k[c];c++);var ye=v-c;for(E=1;E<=ye&&f[v-E]===k[G-E];E++);return zl=k.slice(c,1<E?1-E:void 0)}function pr(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function _n(){return!0}function Ji(){return!1}function bs(c){function f(v,E,k,G,ye){this._reactName=v,this._targetInst=k,this.type=E,this.nativeEvent=G,this.target=ye,this.currentTarget=null;for(var je in c)c.hasOwnProperty(je)&&(v=c[je],this[je]=v?v(G):G[je]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?_n:Ji,this.isPropagationStopped=Ji,this}return B(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=_n)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=_n)},persist:function(){},isPersistent:_n}),f}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vl=bs(rn),Ur=B({},rn,{view:0,detail:0}),Du=bs(Ur),Hl,Vl,_o,ha=B({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:da,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==_o&&(_o&&c.type==="mousemove"?(Hl=c.screenX-_o.screenX,Vl=c.screenY-_o.screenY):Vl=Hl=0,_o=c),Hl)},movementY:function(c){return"movementY"in c?c.movementY:Vl}}),Go=bs(ha),Ru=B({},ha,{dataTransfer:0}),Ko=bs(Ru),Ms=B({},Ur,{relatedTarget:0}),$r=bs(Ms),xo=B({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),vu=bs(xo),bo=B({},rn,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Is=bs(bo),Hc=B({},rn,{data:0}),Bc=bs(Hc),vA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ql(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=rs[c])?!!f[c]:!1}function da(){return ql}var Qu=B({},Ur,{key:function(c){if(c.key){var f=vA[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=pr(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Ou[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:da,charCode:function(c){return c.type==="keypress"?pr(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?pr(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Vc=bs(Qu),_l=B({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),to=bs(_l),ia=B({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:da}),zu=bs(ia),K=B({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Se=bs(K),tt=B({},ha,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),ft=bs(tt),Ft=B({},rn,{newState:0,oldState:0}),Gt=bs(Ft),fi=[9,13,27,32],Ii=Rn&&"CompositionEvent"in window,Ki=null;Rn&&"documentMode"in document&&(Ki=document.documentMode);var ln=Rn&&"TextEvent"in window&&!Ki,bn=Rn&&(!Ii||Ki&&8<Ki&&11>=Ki),On=" ",br=!1;function Ir(c,f){switch(c){case"keyup":return fi.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ws(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Zr=!1;function na(c,f){switch(c){case"compositionend":return ws(f);case"keypress":return f.which!==32?null:(br=!0,On);case"textInput":return c=f.data,c===On&&br?null:c;default:return null}}function Ba(c,f){if(Zr)return c==="compositionend"||!Ii&&Ir(c,f)?(c=rr(),zl=ta=Wr=null,Zr=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return bn&&f.locale!=="ko"?null:f.data;default:return null}}var io={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wo(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!io[c.type]:f==="textarea"}function Hu(c,f,v,E){qo?eo?eo.push(E):eo=[E]:qo=E,f=Oh(f,"onChange"),0<f.length&&(v=new vl("onChange","change",null,v,E),c.push({event:v,listeners:f}))}var Gl=null,xl=null;function _u(c){ry(c,0)}function Cc(c){var f=nn(c);if(YA(f))return c}function Kl(c,f){if(c==="change")return f}var qc=!1;if(Rn){var Dr;if(Rn){var Sc="oninput"in document;if(!Sc){var Gc=document.createElement("div");Gc.setAttribute("oninput","return;"),Sc=typeof Gc.oninput=="function"}Dr=Sc}else Dr=!1;qc=Dr&&(!document.documentMode||9<document.documentMode)}function Bo(){Gl&&(Gl.detachEvent("onpropertychange",xu),xl=Gl=null)}function xu(c){if(c.propertyName==="value"&&Cc(xl)){var f=[];Hu(f,xl,c,fs(c)),xs(_u,f)}}function fa(c,f,v){c==="focusin"?(Bo(),Gl=f,xl=v,Gl.attachEvent("onpropertychange",xu)):c==="focusout"&&Bo()}function Fh(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Cc(xl)}function Vu(c,f){if(c==="click")return Cc(f)}function qu(c,f){if(c==="input"||c==="change")return Cc(f)}function Co(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Ks=typeof Object.is=="function"?Object.is:Co;function Wl(c,f){if(Ks(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var v=Object.keys(c),E=Object.keys(f);if(v.length!==E.length)return!1;for(E=0;E<v.length;E++){var k=v[E];if(!Yt.call(f,k)||!Ks(c[k],f[k]))return!1}return!0}function bu(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Wo(c,f){var v=bu(c);c=0;for(var E;v;){if(v.nodeType===3){if(E=c+v.textContent.length,c<=f&&E>=f)return{node:v,offset:f-c};c=E}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=bu(v)}}function Ca(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?Ca(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function pa(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=Ya(c.document);f instanceof c.HTMLIFrameElement;){try{var v=typeof f.contentWindow.location.href=="string"}catch{v=!1}if(v)c=f.contentWindow;else break;f=Ya(c.document)}return f}function Ws(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var Mn=Rn&&"documentMode"in document&&11>=document.documentMode,Ua=null,So=null,Sa=null,Eo=!1;function ps(c,f,v){var E=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Eo||Ua==null||Ua!==Ya(E)||(E=Ua,"selectionStart"in E&&Ws(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Sa&&Wl(Sa,E)||(Sa=E,E=Oh(So,"onSelect"),0<E.length&&(f=new vl("onSelect","select",null,f,v),c.push({event:f,listeners:E}),f.target=Ua)))}function bl(c,f){var v={};return v[c.toLowerCase()]=f.toLowerCase(),v["Webkit"+c]="webkit"+f,v["Moz"+c]="moz"+f,v}var Ls={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionrun:bl("Transition","TransitionRun"),transitionstart:bl("Transition","TransitionStart"),transitioncancel:bl("Transition","TransitionCancel"),transitionend:bl("Transition","TransitionEnd")},no={},Kc={};Rn&&(Kc=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function $l(c){if(no[c])return no[c];if(!Ls[c])return c;var f=Ls[c],v;for(v in f)if(f.hasOwnProperty(v)&&v in Kc)return no[c]=f[v];return c}var wu=$l("animationend"),wl=$l("animationiteration"),Bl=$l("animationstart"),Cl=$l("transitionrun"),Ec=$l("transitionstart"),$o=$l("transitioncancel"),Zo=$l("transitionend"),ro=new Map,ra="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ra.push("scrollEnd");function ss(c,f){ro.set(c,f),Aa(f,[c])}var so=new WeakMap;function Pn(c,f){if(typeof c=="object"&&c!==null){var v=so.get(c);return v!==void 0?v:(f={value:c,source:f,stack:Gr(f)},so.set(c,f),f)}return{value:c,source:f,stack:Gr(f)}}var En=[],wr=0,Xr=0;function Ea(){for(var c=wr,f=Xr=wr=0;f<c;){var v=En[f];En[f++]=null;var E=En[f];En[f++]=null;var k=En[f];En[f++]=null;var G=En[f];if(En[f++]=null,E!==null&&k!==null){var ye=E.pending;ye===null?k.next=k:(k.next=ye.next,ye.next=k),E.pending=k}G!==0&&Fc(v,k,G)}}function Sl(c,f,v,E){En[wr++]=c,En[wr++]=f,En[wr++]=v,En[wr++]=E,Xr|=E,c.lanes|=E,c=c.alternate,c!==null&&(c.lanes|=E)}function Tc(c,f,v,E){return Sl(c,f,v,E),Wc(c)}function ao(c,f){return Sl(c,null,null,f),Wc(c)}function Fc(c,f,v){c.lanes|=v;var E=c.alternate;E!==null&&(E.lanes|=v);for(var k=!1,G=c.return;G!==null;)G.childLanes|=v,E=G.alternate,E!==null&&(E.childLanes|=v),G.tag===22&&(c=G.stateNode,c===null||c._visibility&1||(k=!0)),c=G,G=G.return;return c.tag===3?(G=c.stateNode,k&&f!==null&&(k=31-et(v),c=G.hiddenUpdates,E=c[k],E===null?c[k]=[f]:E.push(f),f.lane=v|536870912),G):null}function Wc(c){if(50<Sd)throw Sd=0,$m=null,Error(n(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var ms={};function dn(c,f,v,E){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $s(c,f,v,E){return new dn(c,f,v,E)}function Gu(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Xo(c,f){var v=c.alternate;return v===null?(v=$s(c.tag,f,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=f,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&65011712,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,f=c.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v.refCleanup=c.refCleanup,v}function Nc(c,f){c.flags&=65011714;var v=c.alternate;return v===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=v.childLanes,c.lanes=v.lanes,c.child=v.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=v.memoizedProps,c.memoizedState=v.memoizedState,c.updateQueue=v.updateQueue,c.type=v.type,f=v.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Bu(c,f,v,E,k,G){var ye=0;if(E=c,typeof c=="function")Gu(c)&&(ye=1);else if(typeof c=="string")ye=Tf(c,v,Fe.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case xe:return c=$s(31,v,f,k),c.elementType=xe,c.lanes=G,c;case Q:return Yo(v.children,k,G,f);case R:ye=8,k|=24;break;case H:return c=$s(12,v,f,k|2),c.elementType=H,c.lanes=G,c;case te:return c=$s(13,v,f,k),c.elementType=te,c.lanes=G,c;case de:return c=$s(19,v,f,k),c.elementType=de,c.lanes=G,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case j:case W:ye=10;break e;case V:ye=9;break e;case ne:ye=11;break e;case ee:ye=14;break e;case re:ye=16,E=null;break e}ye=29,v=Error(n(130,c===null?"null":typeof c,"")),E=null}return f=$s(ye,v,f,k),f.elementType=c,f.type=E,f.lanes=G,f}function Yo(c,f,v,E){return c=$s(7,c,E,f),c.lanes=v,c}function Ku(c,f,v){return c=$s(6,c,null,f),c.lanes=v,c}function _A(c,f,v){return f=$s(4,c.children!==null?c.children:[],c.key,f),f.lanes=v,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var Zl=[],Jo=0,Mc=null,Cu=0,Da=[],Ra=0,Xl=null,el=1,To="";function Fo(c,f){Zl[Jo++]=Cu,Zl[Jo++]=Mc,Mc=c,Cu=f}function xA(c,f,v){Da[Ra++]=el,Da[Ra++]=To,Da[Ra++]=Xl,Xl=c;var E=el;c=To;var k=32-et(E)-1;E&=~(1<<k),v+=1;var G=32-et(f)+k;if(30<G){var ye=k-k%5;G=(E&(1<<ye)-1).toString(32),E>>=ye,k-=ye,el=1<<32-et(f)+k|v<<k|E,To=G+c}else el=1<<G|v<<k|E,To=c}function bA(c){c.return!==null&&(Fo(c,1),xA(c,1,0))}function Ic(c){for(;c===Mc;)Mc=Zl[--Jo],Zl[Jo]=null,Cu=Zl[--Jo],Zl[Jo]=null;for(;c===Xl;)Xl=Da[--Ra],Da[Ra]=null,To=Da[--Ra],Da[Ra]=null,el=Da[--Ra],Da[Ra]=null}var Zs=null,as=null,Gn=!1,El=null,No=!1,Wu=Error(n(519));function tl(c){var f=Error(n(418,""));throw ma(Pn(f,c)),Wu}function $u(c){var f=c.stateNode,v=c.type,E=c.memoizedProps;switch(f[Fn]=c,f[fn]=E,v){case"dialog":$n("cancel",f),$n("close",f);break;case"iframe":case"object":case"embed":$n("load",f);break;case"video":case"audio":for(v=0;v<dh.length;v++)$n(dh[v],f);break;case"source":$n("error",f);break;case"img":case"image":case"link":$n("error",f),$n("load",f);break;case"details":$n("toggle",f);break;case"input":$n("invalid",f),yu(f,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),zc(f);break;case"select":$n("invalid",f);break;case"textarea":$n("invalid",f),yA(f,E.value,E.defaultValue,E.children),zc(f)}v=E.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||f.textContent===""+v||E.suppressHydrationWarning===!0||oy(f.textContent,v)?(E.popover!=null&&($n("beforetoggle",f),$n("toggle",f)),E.onScroll!=null&&$n("scroll",f),E.onScrollEnd!=null&&$n("scrollend",f),E.onClick!=null&&(f.onclick=Nd),f=!0):f=!1,f||tl(c)}function il(c){for(Zs=c.return;Zs;)switch(Zs.tag){case 5:case 13:No=!1;return;case 27:case 3:No=!0;return;default:Zs=Zs.return}}function Ta(c){if(c!==Zs)return!1;if(!Gn)return il(c),Gn=!0,!1;var f=c.tag,v;if((v=f!==3&&f!==27)&&((v=f===5)&&(v=c.type,v=!(v!=="form"&&v!=="button")||Pp(c.type,c.memoizedProps)),v=!v),v&&as&&tl(c),il(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(v=c.data,v==="/$"){if(f===0){as=cu(c.nextSibling);break e}f--}else v!=="$"&&v!=="$!"&&v!=="$?"||f++;c=c.nextSibling}as=null}}else f===27?(f=as,kA(c.type)?(c=jp,jp=null,as=c):as=f):as=Zs?cu(c.stateNode.nextSibling):null;return!0}function Yn(){as=Zs=null,Gn=!1}function $c(){var c=El;return c!==null&&(rc===null?rc=c:rc.push.apply(rc,c),El=null),c}function ma(c){El===null?El=[c]:El.push(c)}var nl=Qe(null),Bs=null,Tl=null;function oo(c,f,v){me(nl,f._currentValue),f._currentValue=v}function Oa(c){c._currentValue=nl.current,J(nl)}function Zc(c,f,v){for(;c!==null;){var E=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),c===v)break;c=c.return}}function Su(c,f,v,E){var k=c.child;for(k!==null&&(k.return=c);k!==null;){var G=k.dependencies;if(G!==null){var ye=k.child;G=G.firstContext;e:for(;G!==null;){var je=G;G=k;for(var at=0;at<f.length;at++)if(je.context===f[at]){G.lanes|=v,je=G.alternate,je!==null&&(je.lanes|=v),Zc(G.return,v,c),E||(ye=null);break e}G=je.next}}else if(k.tag===18){if(ye=k.return,ye===null)throw Error(n(341));ye.lanes|=v,G=ye.alternate,G!==null&&(G.lanes|=v),Zc(ye,v,c),ye=null}else ye=k.child;if(ye!==null)ye.return=k;else for(ye=k;ye!==null;){if(ye===c){ye=null;break}if(k=ye.sibling,k!==null){k.return=ye.return,ye=k;break}ye=ye.return}k=ye}}function Xc(c,f,v,E){c=null;for(var k=f,G=!1;k!==null;){if(!G){if((k.flags&524288)!==0)G=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var ye=k.alternate;if(ye===null)throw Error(n(387));if(ye=ye.memoizedProps,ye!==null){var je=k.type;Ks(k.pendingProps.value,ye.value)||(c!==null?c.push(je):c=[je])}}else if(k===_t.current){if(ye=k.alternate,ye===null)throw Error(n(387));ye.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(c!==null?c.push(C):c=[C])}k=k.return}c!==null&&Su(f,c,v,E),f.flags|=262144}function wA(c){for(c=c.firstContext;c!==null;){if(!Ks(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function rl(c){Bs=c,Tl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Cs(c){return Yl(Bs,c)}function Mo(c,f){return Bs===null&&rl(c),Yl(c,f)}function Yl(c,f){var v=f._currentValue;if(f={context:f,memoizedValue:v,next:null},Tl===null){if(c===null)throw Error(n(308));Tl=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else Tl=Tl.next=f;return v}var Ad=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(v,E){c.push(E)}};this.abort=function(){f.aborted=!0,c.forEach(function(v){return v()})}},Nh=t.unstable_scheduleCallback,hd=t.unstable_NormalPriority,Ps={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function JA(){return{controller:new Ad,data:new Map,refCount:0}}function Jl(c){c.refCount--,c.refCount===0&&Nh(hd,function(){c.controller.abort()})}var ec=null,Fa=0,lo=0,Fl=null;function sl(c,f){if(ec===null){var v=ec=[];Fa=0,lo=eg(),Fl={status:"pending",value:void 0,then:function(E){v.push(E)}}}return Fa++,f.then(al,al),f}function al(){if(--Fa===0&&ec!==null){Fl!==null&&(Fl.status="fulfilled");var c=ec;ec=null,lo=0,Fl=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function Eu(c,f){var v=[],E={status:"pending",value:null,reason:null,then:function(k){v.push(k)}};return c.then(function(){E.status="fulfilled",E.value=f;for(var k=0;k<v.length;k++)(0,v[k])(f)},function(k){for(E.status="rejected",E.reason=k,k=0;k<v.length;k++)(0,v[k])(void 0)}),E}var M=ue.S;ue.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&sl(c,f),M!==null&&M(c,f)};var O=Qe(null);function Z(){var c=O.current;return c!==null?c:gs.pooledCache}function le(c,f){f===null?me(O,O.current):me(O,f.pool)}function Ce(){var c=Z();return c===null?null:{parent:Ps._currentValue,pool:c}}var Me=Error(n(460)),Le=Error(n(474)),De=Error(n(542)),Oe={then:function(){}};function Pe(c){return c=c.status,c==="fulfilled"||c==="rejected"}function pt(){}function jt(c,f,v){switch(v=c[v],v===void 0?c.push(f):v!==f&&(f.then(pt,pt),f=v),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,ti(c),c;default:if(typeof f.status=="string")f.then(pt,pt);else{if(c=gs,c!==null&&100<c.shellSuspendCounter)throw Error(n(482));c=f,c.status="pending",c.then(function(E){if(f.status==="pending"){var k=f;k.status="fulfilled",k.value=E}},function(E){if(f.status==="pending"){var k=f;k.status="rejected",k.reason=E}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,ti(c),c}throw It=f,Me}}var It=null;function Bt(){if(It===null)throw Error(n(459));var c=It;return It=null,c}function ti(c){if(c===Me||c===De)throw Error(n(483))}var zt=!1;function ct(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bt(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Xt(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function ri(c,f,v){var E=c.updateQueue;if(E===null)return null;if(E=E.shared,(zr&2)!==0){var k=E.pending;return k===null?f.next=f:(f.next=k.next,k.next=f),E.pending=f,f=Wc(c),Fc(c,null,v),f}return Sl(c,E,f,v),Wc(c)}function ii(c,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194048)!==0)){var E=f.lanes;E&=c.pendingLanes,v|=E,f.lanes=v,Vi(c,v)}}function ji(c,f){var v=c.updateQueue,E=c.alternate;if(E!==null&&(E=E.updateQueue,v===E)){var k=null,G=null;if(v=v.firstBaseUpdate,v!==null){do{var ye={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};G===null?k=G=ye:G=G.next=ye,v=v.next}while(v!==null);G===null?k=G=f:G=G.next=f}else k=G=f;v={baseState:E.baseState,firstBaseUpdate:k,lastBaseUpdate:G,shared:E.shared,callbacks:E.callbacks},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=f}var Ci=!1;function Xi(){if(Ci){var c=Fl;if(c!==null)throw c}}function Fi(c,f,v,E){Ci=!1;var k=c.updateQueue;zt=!1;var G=k.firstBaseUpdate,ye=k.lastBaseUpdate,je=k.shared.pending;if(je!==null){k.shared.pending=null;var at=je,Ct=at.next;at.next=null,ye===null?G=Ct:ye.next=Ct,ye=at;var Zt=c.alternate;Zt!==null&&(Zt=Zt.updateQueue,je=Zt.lastBaseUpdate,je!==ye&&(je===null?Zt.firstBaseUpdate=Ct:je.next=Ct,Zt.lastBaseUpdate=at))}if(G!==null){var ci=k.baseState;ye=0,Zt=Ct=at=null,je=G;do{var Rt=je.lane&-536870913,Ht=Rt!==je.lane;if(Ht?(Wn&Rt)===Rt:(E&Rt)===Rt){Rt!==0&&Rt===lo&&(Ci=!0),Zt!==null&&(Zt=Zt.next={lane:0,tag:je.tag,payload:je.payload,callback:null,next:null});e:{var vn=c,An=je;Rt=f;var Br=v;switch(An.tag){case 1:if(vn=An.payload,typeof vn=="function"){ci=vn.call(Br,ci,Rt);break e}ci=vn;break e;case 3:vn.flags=vn.flags&-65537|128;case 0:if(vn=An.payload,Rt=typeof vn=="function"?vn.call(Br,ci,Rt):vn,Rt==null)break e;ci=B({},ci,Rt);break e;case 2:zt=!0}}Rt=je.callback,Rt!==null&&(c.flags|=64,Ht&&(c.flags|=8192),Ht=k.callbacks,Ht===null?k.callbacks=[Rt]:Ht.push(Rt))}else Ht={lane:Rt,tag:je.tag,payload:je.payload,callback:je.callback,next:null},Zt===null?(Ct=Zt=Ht,at=ci):Zt=Zt.next=Ht,ye|=Rt;if(je=je.next,je===null){if(je=k.shared.pending,je===null)break;Ht=je,je=Ht.next,Ht.next=null,k.lastBaseUpdate=Ht,k.shared.pending=null}}while(!0);Zt===null&&(at=ci),k.baseState=at,k.firstBaseUpdate=Ct,k.lastBaseUpdate=Zt,G===null&&(k.shared.lanes=0),au|=ye,c.lanes=ye,c.memoizedState=ci}}function er(c,f){if(typeof c!="function")throw Error(n(191,c));c.call(f)}function lr(c,f){var v=c.callbacks;if(v!==null)for(c.callbacks=null,c=0;c<v.length;c++)er(v[c],f)}var kn=Qe(null),In=Qe(0);function Kn(c,f){c=NA,me(In,c),me(kn,f),NA=c|f.baseLanes}function en(){me(In,NA),me(kn,kn.current)}function Sn(){NA=In.current,J(kn),J(In)}var cr=0,an=null,yn=null,Qn=null,tr=!1,ks=!1,Tr=!1,Yr=0,xi=0,Li=null,ga=0;function ur(){throw Error(n(321))}function os(c,f){if(f===null)return!1;for(var v=0;v<f.length&&v<c.length;v++)if(!Ks(c[v],f[v]))return!1;return!0}function Rr(c,f,v,E,k,G){return cr=G,an=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ue.H=c===null||c.memoizedState===null?Tu:tc,Tr=!1,G=v(E,k),Tr=!1,ks&&(G=ya(f,v,E,k)),Lc(c),G}function Lc(c){ue.H=Na;var f=yn!==null&&yn.next!==null;if(cr=0,Qn=yn=an=null,tr=!1,xi=0,Li=null,f)throw Error(n(300));c===null||za||(c=c.dependencies,c!==null&&wA(c)&&(za=!0))}function ya(c,f,v,E){an=c;var k=0;do{if(ks&&(Li=null),xi=0,ks=!1,25<=k)throw Error(n(301));if(k+=1,Qn=yn=null,c.updateQueue!=null){var G=c.updateQueue;G.lastEffect=null,G.events=null,G.stores=null,G.memoCache!=null&&(G.memoCache.index=0)}ue.H=Xu,G=f(v,E)}while(ks);return G}function co(){var c=ue.H,f=c.useState()[0];return f=typeof f.then=="function"?Qa(f):f,c=c.useState()[0],(yn!==null?yn.memoizedState:null)!==c&&(an.flags|=1024),f}function Jr(){var c=Yr!==0;return Yr=0,c}function BA(c,f,v){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~v}function eh(c){if(tr){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}tr=!1}cr=0,Qn=yn=an=null,ks=!1,xi=Yr=0,Li=null}function js(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?an.memoizedState=Qn=c:Qn=Qn.next=c,Qn}function wn(){if(yn===null){var c=an.alternate;c=c!==null?c.memoizedState:null}else c=yn.next;var f=Qn===null?an.memoizedState:Qn.next;if(f!==null)Qn=f,yn=c;else{if(c===null)throw an.alternate===null?Error(n(467)):Error(n(310));yn=c,c={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Qn===null?an.memoizedState=Qn=c:Qn=Qn.next=c}return Qn}function Fr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qa(c){var f=xi;return xi+=1,Li===null&&(Li=[]),c=jt(Li,c,f),f=an,(Qn===null?f.memoizedState:Qn.next)===null&&(f=f.alternate,ue.H=f===null||f.memoizedState===null?Tu:tc),c}function Xs(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Qa(c);if(c.$$typeof===W)return Cs(c)}throw Error(n(438,String(c)))}function Io(c){var f=null,v=an.updateQueue;if(v!==null&&(f=v.memoCache),f==null){var E=an.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(f={data:E.data.map(function(k){return k.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),v===null&&(v=Fr(),an.updateQueue=v),v.memoCache=f,v=f.data[f.index],v===void 0)for(v=f.data[f.index]=Array(c),E=0;E<c;E++)v[E]=Be;return f.index++,v}function va(c,f){return typeof f=="function"?f(c):f}function Pc(c){var f=wn();return Yc(f,yn,c)}function Yc(c,f,v){var E=c.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=v;var k=c.baseQueue,G=E.pending;if(G!==null){if(k!==null){var ye=k.next;k.next=G.next,G.next=ye}f.baseQueue=k=G,E.pending=null}if(G=c.baseState,k===null)c.memoizedState=G;else{f=k.next;var je=ye=null,at=null,Ct=f,Zt=!1;do{var ci=Ct.lane&-536870913;if(ci!==Ct.lane?(Wn&ci)===ci:(cr&ci)===ci){var Rt=Ct.revertLane;if(Rt===0)at!==null&&(at=at.next={lane:0,revertLane:0,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),ci===lo&&(Zt=!0);else if((cr&Rt)===Rt){Ct=Ct.next,Rt===lo&&(Zt=!0);continue}else ci={lane:0,revertLane:Ct.revertLane,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},at===null?(je=at=ci,ye=G):at=at.next=ci,an.lanes|=Rt,au|=Rt;ci=Ct.action,Tr&&v(G,ci),G=Ct.hasEagerState?Ct.eagerState:v(G,ci)}else Rt={lane:ci,revertLane:Ct.revertLane,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},at===null?(je=at=Rt,ye=G):at=at.next=Rt,an.lanes|=ci,au|=ci;Ct=Ct.next}while(Ct!==null&&Ct!==f);if(at===null?ye=G:at.next=je,!Ks(G,c.memoizedState)&&(za=!0,Zt&&(v=Fl,v!==null)))throw v;c.memoizedState=G,c.baseState=ye,c.baseQueue=at,E.lastRenderedState=G}return k===null&&(E.lanes=0),[c.memoizedState,E.dispatch]}function Nl(c){var f=wn(),v=f.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=c;var E=v.dispatch,k=v.pending,G=f.memoizedState;if(k!==null){v.pending=null;var ye=k=k.next;do G=c(G,ye.action),ye=ye.next;while(ye!==k);Ks(G,f.memoizedState)||(za=!0),f.memoizedState=G,f.baseQueue===null&&(f.baseState=G),v.lastRenderedState=G}return[G,E]}function Ml(c,f,v){var E=an,k=wn(),G=Gn;if(G){if(v===void 0)throw Error(n(407));v=v()}else v=f();var ye=!Ks((yn||k).memoizedState,v);ye&&(k.memoizedState=v,za=!0),k=k.queue;var je=ol.bind(null,E,k,c);if(Ge(2048,8,je,[c]),k.getSnapshot!==f||ye||Qn!==null&&Qn.memoizedState.tag&1){if(E.flags|=2048,oe(9,_e(),Jc.bind(null,E,k,v,f),null),gs===null)throw Error(n(349));G||(cr&124)!==0||Zu(E,f,v)}return v}function Zu(c,f,v){c.flags|=16384,c={getSnapshot:f,value:v},f=an.updateQueue,f===null?(f=Fr(),an.updateQueue=f,f.stores=[c]):(v=f.stores,v===null?f.stores=[c]:v.push(c))}function Jc(c,f,v,E){f.value=v,f.getSnapshot=E,th(f)&&ih(c)}function ol(c,f,v){return v(function(){th(f)&&ih(c)})}function th(c){var f=c.getSnapshot;c=c.value;try{var v=f();return!Ks(c,v)}catch{return!0}}function ih(c){var f=ao(c,2);f!==null&&sc(f,c,2)}function eu(c){var f=js();if(typeof c=="function"){var v=c;if(c=v(),Tr){gn(!0);try{v()}finally{gn(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:c},f}function Il(c,f,v,E){return c.baseState=v,Yc(c,yn,typeof E=="function"?E:va)}function w(c,f,v,E,k){if(sa(c))throw Error(n(485));if(c=f.action,c!==null){var G={payload:k,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ye){G.listeners.push(ye)}};ue.T!==null?v(!0):G.isTransition=!1,E(G),v=f.pending,v===null?(G.next=f.pending=G,r(f,G)):(G.next=v.next,f.pending=v.next=G)}}function r(c,f){var v=f.action,E=f.payload,k=c.state;if(f.isTransition){var G=ue.T,ye={};ue.T=ye;try{var je=v(k,E),at=ue.S;at!==null&&at(ye,je),d(c,f,je)}catch(Ct){x(c,f,Ct)}finally{ue.T=G}}else try{G=v(k,E),d(c,f,G)}catch(Ct){x(c,f,Ct)}}function d(c,f,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(E){y(c,f,E)},function(E){return x(c,f,E)}):y(c,f,v)}function y(c,f,v){f.status="fulfilled",f.value=v,S(f),c.state=v,f=c.pending,f!==null&&(v=f.next,v===f?c.pending=null:(v=v.next,f.next=v,r(c,v)))}function x(c,f,v){var E=c.pending;if(c.pending=null,E!==null){E=E.next;do f.status="rejected",f.reason=v,S(f),f=f.next;while(f!==E)}c.action=null}function S(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function N(c,f){return f}function U(c,f){if(Gn){var v=gs.formState;if(v!==null){e:{var E=an;if(Gn){if(as){t:{for(var k=as,G=No;k.nodeType!==8;){if(!G){k=null;break t}if(k=cu(k.nextSibling),k===null){k=null;break t}}G=k.data,k=G==="F!"||G==="F"?k:null}if(k){as=cu(k.nextSibling),E=k.data==="F!";break e}}tl(E)}E=!1}E&&(f=v[0])}}return v=js(),v.memoizedState=v.baseState=f,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:N,lastRenderedState:f},v.queue=E,v=kr.bind(null,an,E),E.dispatch=v,E=eu(!1),G=Or.bind(null,an,!1,E.queue),E=js(),k={state:f,dispatch:null,action:c,pending:null},E.queue=k,v=w.bind(null,an,k,G,v),k.dispatch=v,E.memoizedState=c,[f,v,!1]}function z(c){var f=wn();return X(f,yn,c)}function X(c,f,v){if(f=Yc(c,f,N)[0],c=Pc(va)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var E=Qa(f)}catch(ye){throw ye===Me?De:ye}else E=f;f=wn();var k=f.queue,G=k.dispatch;return v!==f.memoizedState&&(an.flags|=2048,oe(9,_e(),Y.bind(null,k,v),null)),[E,G,c]}function Y(c,f){c.action=f}function Ae(c){var f=wn(),v=yn;if(v!==null)return X(f,v,c);wn(),f=f.memoizedState,v=wn();var E=v.queue.dispatch;return v.memoizedState=c,[f,E,!1]}function oe(c,f,v,E){return c={tag:c,create:v,deps:E,inst:f,next:null},f=an.updateQueue,f===null&&(f=Fr(),an.updateQueue=f),v=f.lastEffect,v===null?f.lastEffect=c.next=c:(E=v.next,v.next=c,c.next=E,f.lastEffect=c),c}function _e(){return{destroy:void 0,resource:void 0}}function Ne(){return wn().memoizedState}function He(c,f,v,E){var k=js();E=E===void 0?null:E,an.flags|=c,k.memoizedState=oe(1|f,_e(),v,E)}function Ge(c,f,v,E){var k=wn();E=E===void 0?null:E;var G=k.memoizedState.inst;yn!==null&&E!==null&&os(E,yn.memoizedState.deps)?k.memoizedState=oe(f,G,v,E):(an.flags|=c,k.memoizedState=oe(1|f,G,v,E))}function We(c,f){He(8390656,8,c,f)}function Ye(c,f){Ge(2048,8,c,f)}function it(c,f){return Ge(4,2,c,f)}function Je(c,f){return Ge(4,4,c,f)}function lt(c,f){if(typeof f=="function"){c=c();var v=f(c);return function(){typeof v=="function"?v():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function ht(c,f,v){v=v!=null?v.concat([c]):null,Ge(4,4,lt.bind(null,f,c),v)}function nt(){}function mt(c,f){var v=wn();f=f===void 0?null:f;var E=v.memoizedState;return f!==null&&os(f,E[1])?E[0]:(v.memoizedState=[c,f],c)}function Dt(c,f){var v=wn();f=f===void 0?null:f;var E=v.memoizedState;if(f!==null&&os(f,E[1]))return E[0];if(E=c(),Tr){gn(!0);try{c()}finally{gn(!1)}}return v.memoizedState=[E,f],E}function Nt(c,f,v){return v===void 0||(cr&1073741824)!==0?c.memoizedState=f:(c.memoizedState=v,c=H0(),an.lanes|=c,au|=c,v)}function Lt(c,f,v,E){return Ks(v,f)?v:kn.current!==null?(c=Nt(c,v,E),Ks(c,f)||(za=!0),c):(cr&42)===0?(za=!0,c.memoizedState=v):(c=H0(),an.lanes|=c,au|=c,f)}function Pt(c,f,v,E,k){var G=fe.p;fe.p=G!==0&&8>G?G:8;var ye=ue.T,je={};ue.T=je,Or(c,!1,f,v);try{var at=k(),Ct=ue.S;if(Ct!==null&&Ct(je,at),at!==null&&typeof at=="object"&&typeof at.then=="function"){var Zt=Eu(at,E);Ln(c,f,Zt,hl(c))}else Ln(c,f,E,hl(c))}catch(ci){Ln(c,f,{then:function(){},status:"rejected",reason:ci},hl())}finally{fe.p=G,ue.T=ye}}function ui(){}function Ai(c,f,v,E){if(c.tag!==5)throw Error(n(476));var k=$t(c).queue;Pt(c,k,f,Ue,v===null?ui:function(){return ki(c),v(E)})}function $t(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:Ue,baseState:Ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:Ue},next:null};var v={};return f.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:v},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function ki(c){var f=$t(c).next.queue;Ln(c,f,{},hl())}function cn(){return Cs(C)}function ir(){return wn().memoizedState}function sr(){return wn().memoizedState}function Ar(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var v=hl();c=Xt(v);var E=ri(f,c,v);E!==null&&(sc(E,f,v),ii(E,f,v)),f={cache:JA()},c.payload=f;return}f=f.return}}function Pr(c,f,v){var E=hl();v={lane:E,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},sa(c)?Us(f,v):(v=Tc(c,f,v,E),v!==null&&(sc(v,c,E),Ds(v,f,E)))}function kr(c,f,v){var E=hl();Ln(c,f,v,E)}function Ln(c,f,v,E){var k={lane:E,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(sa(c))Us(f,k);else{var G=c.alternate;if(c.lanes===0&&(G===null||G.lanes===0)&&(G=f.lastRenderedReducer,G!==null))try{var ye=f.lastRenderedState,je=G(ye,v);if(k.hasEagerState=!0,k.eagerState=je,Ks(je,ye))return Sl(c,f,k,0),gs===null&&Ea(),!1}catch{}finally{}if(v=Tc(c,f,k,E),v!==null)return sc(v,c,E),Ds(v,f,E),!0}return!1}function Or(c,f,v,E){if(E={lane:2,revertLane:eg(),action:E,hasEagerState:!1,eagerState:null,next:null},sa(c)){if(f)throw Error(n(479))}else f=Tc(c,v,E,2),f!==null&&sc(f,c,2)}function sa(c){var f=c.alternate;return c===an||f!==null&&f===an}function Us(c,f){ks=tr=!0;var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}function Ds(c,f,v){if((v&4194048)!==0){var E=f.lanes;E&=c.pendingLanes,v|=E,f.lanes=v,Vi(c,v)}}var Na={readContext:Cs,use:Xs,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useLayoutEffect:ur,useInsertionEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useSyncExternalStore:ur,useId:ur,useHostTransitionStatus:ur,useFormState:ur,useActionState:ur,useOptimistic:ur,useMemoCache:ur,useCacheRefresh:ur},Tu={readContext:Cs,use:Xs,useCallback:function(c,f){return js().memoizedState=[c,f===void 0?null:f],c},useContext:Cs,useEffect:We,useImperativeHandle:function(c,f,v){v=v!=null?v.concat([c]):null,He(4194308,4,lt.bind(null,f,c),v)},useLayoutEffect:function(c,f){return He(4194308,4,c,f)},useInsertionEffect:function(c,f){He(4,2,c,f)},useMemo:function(c,f){var v=js();f=f===void 0?null:f;var E=c();if(Tr){gn(!0);try{c()}finally{gn(!1)}}return v.memoizedState=[E,f],E},useReducer:function(c,f,v){var E=js();if(v!==void 0){var k=v(f);if(Tr){gn(!0);try{v(f)}finally{gn(!1)}}}else k=f;return E.memoizedState=E.baseState=k,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:k},E.queue=c,c=c.dispatch=Pr.bind(null,an,c),[E.memoizedState,c]},useRef:function(c){var f=js();return c={current:c},f.memoizedState=c},useState:function(c){c=eu(c);var f=c.queue,v=kr.bind(null,an,f);return f.dispatch=v,[c.memoizedState,v]},useDebugValue:nt,useDeferredValue:function(c,f){var v=js();return Nt(v,c,f)},useTransition:function(){var c=eu(!1);return c=Pt.bind(null,an,c.queue,!0,!1),js().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,v){var E=an,k=js();if(Gn){if(v===void 0)throw Error(n(407));v=v()}else{if(v=f(),gs===null)throw Error(n(349));(Wn&124)!==0||Zu(E,f,v)}k.memoizedState=v;var G={value:v,getSnapshot:f};return k.queue=G,We(ol.bind(null,E,G,c),[c]),E.flags|=2048,oe(9,_e(),Jc.bind(null,E,G,v,f),null),v},useId:function(){var c=js(),f=gs.identifierPrefix;if(Gn){var v=To,E=el;v=(E&~(1<<32-et(E)-1)).toString(32)+v,f=""+f+"R"+v,v=Yr++,0<v&&(f+="H"+v.toString(32)),f+=""}else v=ga++,f=""+f+"r"+v.toString(32)+"";return c.memoizedState=f},useHostTransitionStatus:cn,useFormState:U,useActionState:U,useOptimistic:function(c){var f=js();f.memoizedState=f.baseState=c;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=v,f=Or.bind(null,an,!0,v),v.dispatch=f,[c,f]},useMemoCache:Io,useCacheRefresh:function(){return js().memoizedState=Ar.bind(null,an)}},tc={readContext:Cs,use:Xs,useCallback:mt,useContext:Cs,useEffect:Ye,useImperativeHandle:ht,useInsertionEffect:it,useLayoutEffect:Je,useMemo:Dt,useReducer:Pc,useRef:Ne,useState:function(){return Pc(va)},useDebugValue:nt,useDeferredValue:function(c,f){var v=wn();return Lt(v,yn.memoizedState,c,f)},useTransition:function(){var c=Pc(va)[0],f=wn().memoizedState;return[typeof c=="boolean"?c:Qa(c),f]},useSyncExternalStore:Ml,useId:ir,useHostTransitionStatus:cn,useFormState:z,useActionState:z,useOptimistic:function(c,f){var v=wn();return Il(v,yn,c,f)},useMemoCache:Io,useCacheRefresh:sr},Xu={readContext:Cs,use:Xs,useCallback:mt,useContext:Cs,useEffect:Ye,useImperativeHandle:ht,useInsertionEffect:it,useLayoutEffect:Je,useMemo:Dt,useReducer:Nl,useRef:Ne,useState:function(){return Nl(va)},useDebugValue:nt,useDeferredValue:function(c,f){var v=wn();return yn===null?Nt(v,c,f):Lt(v,yn.memoizedState,c,f)},useTransition:function(){var c=Nl(va)[0],f=wn().memoizedState;return[typeof c=="boolean"?c:Qa(c),f]},useSyncExternalStore:Ml,useId:ir,useHostTransitionStatus:cn,useFormState:Ae,useActionState:Ae,useOptimistic:function(c,f){var v=wn();return yn!==null?Il(v,yn,c,f):(v.baseState=c,[c,v.queue.dispatch])},useMemoCache:Io,useCacheRefresh:sr},ic=null,Yu=0;function Fu(c){var f=Yu;return Yu+=1,ic===null&&(ic=[]),jt(ic,c,f)}function Ll(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function uo(c,f){throw f.$$typeof===I?Error(n(525)):(c=Object.prototype.toString.call(f),Error(n(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function kc(c){var f=c._init;return f(c._payload)}function jc(c){function f(St,vt){if(c){var Ut=St.deletions;Ut===null?(St.deletions=[vt],St.flags|=16):Ut.push(vt)}}function v(St,vt){if(!c)return null;for(;vt!==null;)f(St,vt),vt=vt.sibling;return null}function E(St){for(var vt=new Map;St!==null;)St.key!==null?vt.set(St.key,St):vt.set(St.index,St),St=St.sibling;return vt}function k(St,vt){return St=Xo(St,vt),St.index=0,St.sibling=null,St}function G(St,vt,Ut){return St.index=Ut,c?(Ut=St.alternate,Ut!==null?(Ut=Ut.index,Ut<vt?(St.flags|=67108866,vt):Ut):(St.flags|=67108866,vt)):(St.flags|=1048576,vt)}function ye(St){return c&&St.alternate===null&&(St.flags|=67108866),St}function je(St,vt,Ut,li){return vt===null||vt.tag!==6?(vt=Ku(Ut,St.mode,li),vt.return=St,vt):(vt=k(vt,Ut),vt.return=St,vt)}function at(St,vt,Ut,li){var Wi=Ut.type;return Wi===Q?Zt(St,vt,Ut.props.children,li,Ut.key):vt!==null&&(vt.elementType===Wi||typeof Wi=="object"&&Wi!==null&&Wi.$$typeof===re&&kc(Wi)===vt.type)?(vt=k(vt,Ut.props),Ll(vt,Ut),vt.return=St,vt):(vt=Bu(Ut.type,Ut.key,Ut.props,null,St.mode,li),Ll(vt,Ut),vt.return=St,vt)}function Ct(St,vt,Ut,li){return vt===null||vt.tag!==4||vt.stateNode.containerInfo!==Ut.containerInfo||vt.stateNode.implementation!==Ut.implementation?(vt=_A(Ut,St.mode,li),vt.return=St,vt):(vt=k(vt,Ut.children||[]),vt.return=St,vt)}function Zt(St,vt,Ut,li,Wi){return vt===null||vt.tag!==7?(vt=Yo(Ut,St.mode,li,Wi),vt.return=St,vt):(vt=k(vt,Ut),vt.return=St,vt)}function ci(St,vt,Ut){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return vt=Ku(""+vt,St.mode,Ut),vt.return=St,vt;if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case P:return Ut=Bu(vt.type,vt.key,vt.props,null,St.mode,Ut),Ll(Ut,vt),Ut.return=St,Ut;case F:return vt=_A(vt,St.mode,Ut),vt.return=St,vt;case re:var li=vt._init;return vt=li(vt._payload),ci(St,vt,Ut)}if(Ve(vt)||ae(vt))return vt=Yo(vt,St.mode,Ut,null),vt.return=St,vt;if(typeof vt.then=="function")return ci(St,Fu(vt),Ut);if(vt.$$typeof===W)return ci(St,Mo(St,vt),Ut);uo(St,vt)}return null}function Rt(St,vt,Ut,li){var Wi=vt!==null?vt.key:null;if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint")return Wi!==null?null:je(St,vt,""+Ut,li);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case P:return Ut.key===Wi?at(St,vt,Ut,li):null;case F:return Ut.key===Wi?Ct(St,vt,Ut,li):null;case re:return Wi=Ut._init,Ut=Wi(Ut._payload),Rt(St,vt,Ut,li)}if(Ve(Ut)||ae(Ut))return Wi!==null?null:Zt(St,vt,Ut,li,null);if(typeof Ut.then=="function")return Rt(St,vt,Fu(Ut),li);if(Ut.$$typeof===W)return Rt(St,vt,Mo(St,Ut),li);uo(St,Ut)}return null}function Ht(St,vt,Ut,li,Wi){if(typeof li=="string"&&li!==""||typeof li=="number"||typeof li=="bigint")return St=St.get(Ut)||null,je(vt,St,""+li,Wi);if(typeof li=="object"&&li!==null){switch(li.$$typeof){case P:return St=St.get(li.key===null?Ut:li.key)||null,at(vt,St,li,Wi);case F:return St=St.get(li.key===null?Ut:li.key)||null,Ct(vt,St,li,Wi);case re:var Zn=li._init;return li=Zn(li._payload),Ht(St,vt,Ut,li,Wi)}if(Ve(li)||ae(li))return St=St.get(Ut)||null,Zt(vt,St,li,Wi,null);if(typeof li.then=="function")return Ht(St,vt,Ut,Fu(li),Wi);if(li.$$typeof===W)return Ht(St,vt,Ut,Mo(vt,li),Wi);uo(vt,li)}return null}function vn(St,vt,Ut,li){for(var Wi=null,Zn=null,on=vt,xn=vt=0,ys=null;on!==null&&xn<Ut.length;xn++){on.index>xn?(ys=on,on=null):ys=on.sibling;var Cr=Rt(St,on,Ut[xn],li);if(Cr===null){on===null&&(on=ys);break}c&&on&&Cr.alternate===null&&f(St,on),vt=G(Cr,vt,xn),Zn===null?Wi=Cr:Zn.sibling=Cr,Zn=Cr,on=ys}if(xn===Ut.length)return v(St,on),Gn&&Fo(St,xn),Wi;if(on===null){for(;xn<Ut.length;xn++)on=ci(St,Ut[xn],li),on!==null&&(vt=G(on,vt,xn),Zn===null?Wi=on:Zn.sibling=on,Zn=on);return Gn&&Fo(St,xn),Wi}for(on=E(on);xn<Ut.length;xn++)ys=Ht(on,St,xn,Ut[xn],li),ys!==null&&(c&&ys.alternate!==null&&on.delete(ys.key===null?xn:ys.key),vt=G(ys,vt,xn),Zn===null?Wi=ys:Zn.sibling=ys,Zn=ys);return c&&on.forEach(function(UA){return f(St,UA)}),Gn&&Fo(St,xn),Wi}function An(St,vt,Ut,li){if(Ut==null)throw Error(n(151));for(var Wi=null,Zn=null,on=vt,xn=vt=0,ys=null,Cr=Ut.next();on!==null&&!Cr.done;xn++,Cr=Ut.next()){on.index>xn?(ys=on,on=null):ys=on.sibling;var UA=Rt(St,on,Cr.value,li);if(UA===null){on===null&&(on=ys);break}c&&on&&UA.alternate===null&&f(St,on),vt=G(UA,vt,xn),Zn===null?Wi=UA:Zn.sibling=UA,Zn=UA,on=ys}if(Cr.done)return v(St,on),Gn&&Fo(St,xn),Wi;if(on===null){for(;!Cr.done;xn++,Cr=Ut.next())Cr=ci(St,Cr.value,li),Cr!==null&&(vt=G(Cr,vt,xn),Zn===null?Wi=Cr:Zn.sibling=Cr,Zn=Cr);return Gn&&Fo(St,xn),Wi}for(on=E(on);!Cr.done;xn++,Cr=Ut.next())Cr=Ht(on,St,xn,Cr.value,li),Cr!==null&&(c&&Cr.alternate!==null&&on.delete(Cr.key===null?xn:Cr.key),vt=G(Cr,vt,xn),Zn===null?Wi=Cr:Zn.sibling=Cr,Zn=Cr);return c&&on.forEach(function(X1){return f(St,X1)}),Gn&&Fo(St,xn),Wi}function Br(St,vt,Ut,li){if(typeof Ut=="object"&&Ut!==null&&Ut.type===Q&&Ut.key===null&&(Ut=Ut.props.children),typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case P:e:{for(var Wi=Ut.key;vt!==null;){if(vt.key===Wi){if(Wi=Ut.type,Wi===Q){if(vt.tag===7){v(St,vt.sibling),li=k(vt,Ut.props.children),li.return=St,St=li;break e}}else if(vt.elementType===Wi||typeof Wi=="object"&&Wi!==null&&Wi.$$typeof===re&&kc(Wi)===vt.type){v(St,vt.sibling),li=k(vt,Ut.props),Ll(li,Ut),li.return=St,St=li;break e}v(St,vt);break}else f(St,vt);vt=vt.sibling}Ut.type===Q?(li=Yo(Ut.props.children,St.mode,li,Ut.key),li.return=St,St=li):(li=Bu(Ut.type,Ut.key,Ut.props,null,St.mode,li),Ll(li,Ut),li.return=St,St=li)}return ye(St);case F:e:{for(Wi=Ut.key;vt!==null;){if(vt.key===Wi)if(vt.tag===4&&vt.stateNode.containerInfo===Ut.containerInfo&&vt.stateNode.implementation===Ut.implementation){v(St,vt.sibling),li=k(vt,Ut.children||[]),li.return=St,St=li;break e}else{v(St,vt);break}else f(St,vt);vt=vt.sibling}li=_A(Ut,St.mode,li),li.return=St,St=li}return ye(St);case re:return Wi=Ut._init,Ut=Wi(Ut._payload),Br(St,vt,Ut,li)}if(Ve(Ut))return vn(St,vt,Ut,li);if(ae(Ut)){if(Wi=ae(Ut),typeof Wi!="function")throw Error(n(150));return Ut=Wi.call(Ut),An(St,vt,Ut,li)}if(typeof Ut.then=="function")return Br(St,vt,Fu(Ut),li);if(Ut.$$typeof===W)return Br(St,vt,Mo(St,Ut),li);uo(St,Ut)}return typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint"?(Ut=""+Ut,vt!==null&&vt.tag===6?(v(St,vt.sibling),li=k(vt,Ut),li.return=St,St=li):(v(St,vt),li=Ku(Ut,St.mode,li),li.return=St,St=li),ye(St)):v(St,vt)}return function(St,vt,Ut,li){try{Yu=0;var Wi=Br(St,vt,Ut,li);return ic=null,Wi}catch(on){if(on===Me||on===De)throw on;var Zn=$s(29,on,null,St.mode);return Zn.lanes=li,Zn.return=St,Zn}finally{}}}var Ma=jc(!0),Ss=jc(!1),Nr=Qe(null),Rs=null;function ls(c){var f=c.alternate;me(Qr,Qr.current&1),me(Nr,c),Rs===null&&(f===null||kn.current!==null||f.memoizedState!==null)&&(Rs=c)}function dd(c){if(c.tag===22){if(me(Qr,Qr.current),me(Nr,c),Rs===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(Rs=c)}}else nc()}function nc(){me(Qr,Qr.current),me(Nr,Nr.current)}function Lo(c){J(Nr),Rs===c&&(Rs=null),J(Qr)}var Qr=Qe(0);function ll(c){for(var f=c;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||aA(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function tu(c,f,v,E){f=c.memoizedState,v=v(E,f),v=v==null?f:B({},f,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var iu={enqueueSetState:function(c,f,v){c=c._reactInternals;var E=hl(),k=Xt(E);k.payload=f,v!=null&&(k.callback=v),f=ri(c,k,E),f!==null&&(sc(f,c,E),ii(f,c,E))},enqueueReplaceState:function(c,f,v){c=c._reactInternals;var E=hl(),k=Xt(E);k.tag=1,k.payload=f,v!=null&&(k.callback=v),f=ri(c,k,E),f!==null&&(sc(f,c,E),ii(f,c,E))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var v=hl(),E=Xt(v);E.tag=2,f!=null&&(E.callback=f),f=ri(c,E,v),f!==null&&(sc(f,c,v),ii(f,c,v))}};function fd(c,f,v,E,k,G,ye){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(E,G,ye):f.prototype&&f.prototype.isPureReactComponent?!Wl(v,E)||!Wl(k,G):!0}function pd(c,f,v,E){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,E),f.state!==c&&iu.enqueueReplaceState(f,f.state,null)}function cl(c,f){var v=f;if("ref"in f){v={};for(var E in f)E!=="ref"&&(v[E]=f[E])}if(c=c.defaultProps){v===f&&(v=B({},v));for(var k in c)v[k]===void 0&&(v[k]=c[k])}return v}var nh=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function md(c){nh(c)}function rh(c){console.error(c)}function Sm(c){nh(c)}function Ju(c,f){try{var v=c.onUncaughtError;v(f.value,{componentStack:f.stack})}catch(E){setTimeout(function(){throw E})}}function sh(c,f,v){try{var E=c.onCaughtError;E(v.value,{componentStack:v.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function rp(c,f,v){return v=Xt(v),v.tag=3,v.payload={element:null},v.callback=function(){Ju(c,f)},v}function I0(c){return c=Xt(c),c.tag=3,c}function sp(c,f,v,E){var k=v.type.getDerivedStateFromError;if(typeof k=="function"){var G=E.value;c.payload=function(){return k(G)},c.callback=function(){sh(f,v,E)}}var ye=v.stateNode;ye!==null&&typeof ye.componentDidCatch=="function"&&(c.callback=function(){sh(f,v,E),typeof k!="function"&&(uh===null?uh=new Set([this]):uh.add(this));var je=E.stack;this.componentDidCatch(E.value,{componentStack:je!==null?je:""})})}function L0(c,f,v,E,k){if(v.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(f=v.alternate,f!==null&&Xc(f,v,k,!0),v=Nr.current,v!==null){switch(v.tag){case 13:return Rs===null?vp():v.alternate===null&&zs===0&&(zs=3),v.flags&=-257,v.flags|=65536,v.lanes=k,E===Oe?v.flags|=16384:(f=v.updateQueue,f===null?v.updateQueue=new Set([E]):f.add(E),rA(c,E,k)),!1;case 22:return v.flags|=65536,E===Oe?v.flags|=16384:(f=v.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([E])},v.updateQueue=f):(v=f.retryQueue,v===null?f.retryQueue=new Set([E]):v.add(E)),rA(c,E,k)),!1}throw Error(n(435,v.tag))}return rA(c,E,k),vp(),!1}if(Gn)return f=Nr.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=k,E!==Wu&&(c=Error(n(422),{cause:E}),ma(Pn(c,v)))):(E!==Wu&&(f=Error(n(423),{cause:E}),ma(Pn(f,v))),c=c.current.alternate,c.flags|=65536,k&=-k,c.lanes|=k,E=Pn(E,v),k=rp(c.stateNode,E,k),ji(c,k),zs!==4&&(zs=2)),!1;var G=Error(n(520),{cause:E});if(G=Pn(G,v),Bd===null?Bd=[G]:Bd.push(G),zs!==4&&(zs=2),f===null)return!0;E=Pn(E,v),v=f;do{switch(v.tag){case 3:return v.flags|=65536,c=k&-k,v.lanes|=c,c=rp(v.stateNode,E,c),ji(v,c),!1;case 1:if(f=v.type,G=v.stateNode,(v.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(uh===null||!uh.has(G))))return v.flags|=65536,k&=-k,v.lanes|=k,k=I0(k),sp(k,c,v,E),ji(v,k),!1}v=v.return}while(v!==null);return!1}var lf=Error(n(461)),za=!1;function Po(c,f,v,E){f.child=c===null?Ss(f,null,v,E):Ma(f,c.child,v,E)}function ap(c,f,v,E,k){v=v.render;var G=f.ref;if("ref"in E){var ye={};for(var je in E)je!=="ref"&&(ye[je]=E[je])}else ye=E;return rl(f),E=Rr(c,f,v,ye,G,k),je=Jr(),c!==null&&!za?(BA(c,f,k),eA(c,f,k)):(Gn&&je&&bA(f),f.flags|=1,Po(c,f,E,k),f.child)}function P0(c,f,v,E,k){if(c===null){var G=v.type;return typeof G=="function"&&!Gu(G)&&G.defaultProps===void 0&&v.compare===null?(f.tag=15,f.type=G,op(c,f,G,E,k)):(c=Bu(v.type,null,E,f,f.mode,k),c.ref=f.ref,c.return=f,f.child=c)}if(G=c.child,!up(c,k)){var ye=G.memoizedProps;if(v=v.compare,v=v!==null?v:Wl,v(ye,E)&&c.ref===f.ref)return eA(c,f,k)}return f.flags|=1,c=Xo(G,E),c.ref=f.ref,c.return=f,f.child=c}function op(c,f,v,E,k){if(c!==null){var G=c.memoizedProps;if(Wl(G,E)&&c.ref===f.ref)if(za=!1,f.pendingProps=E=G,up(c,k))(c.flags&131072)!==0&&(za=!0);else return f.lanes=c.lanes,eA(c,f,k)}return Fm(c,f,v,E,k)}function Em(c,f,v){var E=f.pendingProps,k=E.children,G=c!==null?c.memoizedState:null;if(E.mode==="hidden"){if((f.flags&128)!==0){if(E=G!==null?G.baseLanes|v:v,c!==null){for(k=f.child=c.child,G=0;k!==null;)G=G|k.lanes|k.childLanes,k=k.sibling;f.childLanes=G&~E}else f.childLanes=0,f.child=null;return Tm(c,f,E,v)}if((v&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&le(f,G!==null?G.cachePool:null),G!==null?Kn(f,G):en(),dd(f);else return f.lanes=f.childLanes=536870912,Tm(c,f,G!==null?G.baseLanes|v:v,v)}else G!==null?(le(f,G.cachePool),Kn(f,G),nc(),f.memoizedState=null):(c!==null&&le(f,null),en(),nc());return Po(c,f,k,v),f.child}function Tm(c,f,v,E){var k=Z();return k=k===null?null:{parent:Ps._currentValue,pool:k},f.memoizedState={baseLanes:v,cachePool:k},c!==null&&le(f,null),en(),dd(f),c!==null&&Xc(c,f,E,!0),null}function CA(c,f){var v=f.ref;if(v===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(n(284));(c===null||c.ref!==v)&&(f.flags|=4194816)}}function Fm(c,f,v,E,k){return rl(f),v=Rr(c,f,v,E,void 0,k),E=Jr(),c!==null&&!za?(BA(c,f,k),eA(c,f,k)):(Gn&&E&&bA(f),f.flags|=1,Po(c,f,v,k),f.child)}function Mh(c,f,v,E,k,G){return rl(f),f.updateQueue=null,v=ya(f,E,v,k),Lc(c),E=Jr(),c!==null&&!za?(BA(c,f,G),eA(c,f,G)):(Gn&&E&&bA(f),f.flags|=1,Po(c,f,v,G),f.child)}function cf(c,f,v,E,k){if(rl(f),f.stateNode===null){var G=ms,ye=v.contextType;typeof ye=="object"&&ye!==null&&(G=Cs(ye)),G=new v(E,G),f.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,G.updater=iu,f.stateNode=G,G._reactInternals=f,G=f.stateNode,G.props=E,G.state=f.memoizedState,G.refs={},ct(f),ye=v.contextType,G.context=typeof ye=="object"&&ye!==null?Cs(ye):ms,G.state=f.memoizedState,ye=v.getDerivedStateFromProps,typeof ye=="function"&&(tu(f,v,ye,E),G.state=f.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(ye=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),ye!==G.state&&iu.enqueueReplaceState(G,G.state,null),Fi(f,E,G,k),Xi(),G.state=f.memoizedState),typeof G.componentDidMount=="function"&&(f.flags|=4194308),E=!0}else if(c===null){G=f.stateNode;var je=f.memoizedProps,at=cl(v,je);G.props=at;var Ct=G.context,Zt=v.contextType;ye=ms,typeof Zt=="object"&&Zt!==null&&(ye=Cs(Zt));var ci=v.getDerivedStateFromProps;Zt=typeof ci=="function"||typeof G.getSnapshotBeforeUpdate=="function",je=f.pendingProps!==je,Zt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(je||Ct!==ye)&&pd(f,G,E,ye),zt=!1;var Rt=f.memoizedState;G.state=Rt,Fi(f,E,G,k),Xi(),Ct=f.memoizedState,je||Rt!==Ct||zt?(typeof ci=="function"&&(tu(f,v,ci,E),Ct=f.memoizedState),(at=zt||fd(f,v,at,E,Rt,Ct,ye))?(Zt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(f.flags|=4194308)):(typeof G.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=Ct),G.props=E,G.state=Ct,G.context=ye,E=at):(typeof G.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{G=f.stateNode,bt(c,f),ye=f.memoizedProps,Zt=cl(v,ye),G.props=Zt,ci=f.pendingProps,Rt=G.context,Ct=v.contextType,at=ms,typeof Ct=="object"&&Ct!==null&&(at=Cs(Ct)),je=v.getDerivedStateFromProps,(Ct=typeof je=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ye!==ci||Rt!==at)&&pd(f,G,E,at),zt=!1,Rt=f.memoizedState,G.state=Rt,Fi(f,E,G,k),Xi();var Ht=f.memoizedState;ye!==ci||Rt!==Ht||zt||c!==null&&c.dependencies!==null&&wA(c.dependencies)?(typeof je=="function"&&(tu(f,v,je,E),Ht=f.memoizedState),(Zt=zt||fd(f,v,Zt,E,Rt,Ht,at)||c!==null&&c.dependencies!==null&&wA(c.dependencies))?(Ct||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(E,Ht,at),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(E,Ht,at)),typeof G.componentDidUpdate=="function"&&(f.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof G.componentDidUpdate!="function"||ye===c.memoizedProps&&Rt===c.memoizedState||(f.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ye===c.memoizedProps&&Rt===c.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=Ht),G.props=E,G.state=Ht,G.context=at,E=Zt):(typeof G.componentDidUpdate!="function"||ye===c.memoizedProps&&Rt===c.memoizedState||(f.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ye===c.memoizedProps&&Rt===c.memoizedState||(f.flags|=1024),E=!1)}return G=E,CA(c,f),E=(f.flags&128)!==0,G||E?(G=f.stateNode,v=E&&typeof v.getDerivedStateFromError!="function"?null:G.render(),f.flags|=1,c!==null&&E?(f.child=Ma(f,c.child,null,k),f.child=Ma(f,null,v,k)):Po(c,f,v,k),f.memoizedState=G.state,c=f.child):c=eA(c,f,k),c}function uf(c,f,v,E){return Yn(),f.flags|=256,Po(c,f,v,E),f.child}var Nm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mm(c){return{baseLanes:c,cachePool:Ce()}}function Im(c,f,v){return c=c!==null?c.childLanes&~v:0,f&&(c|=ou),c}function k0(c,f,v){var E=f.pendingProps,k=!1,G=(f.flags&128)!==0,ye;if((ye=G)||(ye=c!==null&&c.memoizedState===null?!1:(Qr.current&2)!==0),ye&&(k=!0,f.flags&=-129),ye=(f.flags&32)!==0,f.flags&=-33,c===null){if(Gn){if(k?ls(f):nc(),Gn){var je=as,at;if(at=je){e:{for(at=je,je=No;at.nodeType!==8;){if(!je){je=null;break e}if(at=cu(at.nextSibling),at===null){je=null;break e}}je=at}je!==null?(f.memoizedState={dehydrated:je,treeContext:Xl!==null?{id:el,overflow:To}:null,retryLane:536870912,hydrationErrors:null},at=$s(18,null,null,0),at.stateNode=je,at.return=f,f.child=at,Zs=f,as=null,at=!0):at=!1}at||tl(f)}if(je=f.memoizedState,je!==null&&(je=je.dehydrated,je!==null))return aA(je)?f.lanes=32:f.lanes=536870912,null;Lo(f)}return je=E.children,E=E.fallback,k?(nc(),k=f.mode,je=gd({mode:"hidden",children:je},k),E=Yo(E,k,v,null),je.return=f,E.return=f,je.sibling=E,f.child=je,k=f.child,k.memoizedState=Mm(v),k.childLanes=Im(c,ye,v),f.memoizedState=Nm,E):(ls(f),lp(f,je))}if(at=c.memoizedState,at!==null&&(je=at.dehydrated,je!==null)){if(G)f.flags&256?(ls(f),f.flags&=-257,f=cp(c,f,v)):f.memoizedState!==null?(nc(),f.child=c.child,f.flags|=128,f=null):(nc(),k=E.fallback,je=f.mode,E=gd({mode:"visible",children:E.children},je),k=Yo(k,je,v,null),k.flags|=2,E.return=f,k.return=f,E.sibling=k,f.child=E,Ma(f,c.child,null,v),E=f.child,E.memoizedState=Mm(v),E.childLanes=Im(c,ye,v),f.memoizedState=Nm,f=k);else if(ls(f),aA(je)){if(ye=je.nextSibling&&je.nextSibling.dataset,ye)var Ct=ye.dgst;ye=Ct,E=Error(n(419)),E.stack="",E.digest=ye,ma({value:E,source:null,stack:null}),f=cp(c,f,v)}else if(za||Xc(c,f,v,!1),ye=(v&c.childLanes)!==0,za||ye){if(ye=gs,ye!==null&&(E=v&-v,E=(E&42)!==0?1:Mi(E),E=(E&(ye.suspendedLanes|v))!==0?0:E,E!==0&&E!==at.retryLane))throw at.retryLane=E,ao(c,E),sc(ye,c,E),lf;je.data==="$?"||vp(),f=cp(c,f,v)}else je.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=at.treeContext,as=cu(je.nextSibling),Zs=f,Gn=!0,El=null,No=!1,c!==null&&(Da[Ra++]=el,Da[Ra++]=To,Da[Ra++]=Xl,el=c.id,To=c.overflow,Xl=f),f=lp(f,E.children),f.flags|=4096);return f}return k?(nc(),k=E.fallback,je=f.mode,at=c.child,Ct=at.sibling,E=Xo(at,{mode:"hidden",children:E.children}),E.subtreeFlags=at.subtreeFlags&65011712,Ct!==null?k=Xo(Ct,k):(k=Yo(k,je,v,null),k.flags|=2),k.return=f,E.return=f,E.sibling=k,f.child=E,E=k,k=f.child,je=c.child.memoizedState,je===null?je=Mm(v):(at=je.cachePool,at!==null?(Ct=Ps._currentValue,at=at.parent!==Ct?{parent:Ct,pool:Ct}:at):at=Ce(),je={baseLanes:je.baseLanes|v,cachePool:at}),k.memoizedState=je,k.childLanes=Im(c,ye,v),f.memoizedState=Nm,E):(ls(f),v=c.child,c=v.sibling,v=Xo(v,{mode:"visible",children:E.children}),v.return=f,v.sibling=null,c!==null&&(ye=f.deletions,ye===null?(f.deletions=[c],f.flags|=16):ye.push(c)),f.child=v,f.memoizedState=null,v)}function lp(c,f){return f=gd({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function gd(c,f){return c=$s(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function cp(c,f,v){return Ma(f,c.child,null,v),c=lp(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function Lm(c,f,v){c.lanes|=f;var E=c.alternate;E!==null&&(E.lanes|=f),Zc(c.return,f,v)}function Pm(c,f,v,E,k){var G=c.memoizedState;G===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:v,tailMode:k}:(G.isBackwards=f,G.rendering=null,G.renderingStartTime=0,G.last=E,G.tail=v,G.tailMode=k)}function j0(c,f,v){var E=f.pendingProps,k=E.revealOrder,G=E.tail;if(Po(c,f,E.children,v),E=Qr.current,(E&2)!==0)E=E&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Lm(c,v,f);else if(c.tag===19)Lm(c,v,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}E&=1}switch(me(Qr,E),k){case"forwards":for(v=f.child,k=null;v!==null;)c=v.alternate,c!==null&&ll(c)===null&&(k=v),v=v.sibling;v=k,v===null?(k=f.child,f.child=null):(k=v.sibling,v.sibling=null),Pm(f,!1,k,v,G);break;case"backwards":for(v=null,k=f.child,f.child=null;k!==null;){if(c=k.alternate,c!==null&&ll(c)===null){f.child=k;break}c=k.sibling,k.sibling=v,v=k,k=c}Pm(f,!0,v,null,G);break;case"together":Pm(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function eA(c,f,v){if(c!==null&&(f.dependencies=c.dependencies),au|=f.lanes,(v&f.childLanes)===0)if(c!==null){if(Xc(c,f,v,!1),(v&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(n(153));if(f.child!==null){for(c=f.child,v=Xo(c,c.pendingProps),f.child=v,v.return=f;c.sibling!==null;)c=c.sibling,v=v.sibling=Xo(c,c.pendingProps),v.return=f;v.sibling=null}return f.child}function up(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&wA(c)))}function I1(c,f,v){switch(f.tag){case 3:gt(f,f.stateNode.containerInfo),oo(f,Ps,c.memoizedState.cache),Yn();break;case 27:case 5:hi(f);break;case 4:gt(f,f.stateNode.containerInfo);break;case 10:oo(f,f.type,f.memoizedProps.value);break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(ls(f),f.flags|=128,null):(v&f.child.childLanes)!==0?k0(c,f,v):(ls(f),c=eA(c,f,v),c!==null?c.sibling:null);ls(f);break;case 19:var k=(c.flags&128)!==0;if(E=(v&f.childLanes)!==0,E||(Xc(c,f,v,!1),E=(v&f.childLanes)!==0),k){if(E)return j0(c,f,v);f.flags|=128}if(k=f.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),me(Qr,Qr.current),E)break;return null;case 22:case 23:return f.lanes=0,Em(c,f,v);case 24:oo(f,Ps,c.memoizedState.cache)}return eA(c,f,v)}function Ap(c,f,v){if(c!==null)if(c.memoizedProps!==f.pendingProps)za=!0;else{if(!up(c,v)&&(f.flags&128)===0)return za=!1,I1(c,f,v);za=(c.flags&131072)!==0}else za=!1,Gn&&(f.flags&1048576)!==0&&xA(f,Cu,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var E=f.elementType,k=E._init;if(E=k(E._payload),f.type=E,typeof E=="function")Gu(E)?(c=cl(E,c),f.tag=1,f=cf(null,f,E,c,v)):(f.tag=0,f=Fm(null,f,E,c,v));else{if(E!=null){if(k=E.$$typeof,k===ne){f.tag=11,f=ap(null,f,E,c,v);break e}else if(k===ee){f.tag=14,f=P0(null,f,E,c,v);break e}}throw f=Ee(E)||E,Error(n(306,f,""))}}return f;case 0:return Fm(c,f,f.type,f.pendingProps,v);case 1:return E=f.type,k=cl(E,f.pendingProps),cf(c,f,E,k,v);case 3:e:{if(gt(f,f.stateNode.containerInfo),c===null)throw Error(n(387));E=f.pendingProps;var G=f.memoizedState;k=G.element,bt(c,f),Fi(f,E,null,v);var ye=f.memoizedState;if(E=ye.cache,oo(f,Ps,E),E!==G.cache&&Su(f,[Ps],v,!0),Xi(),E=ye.element,G.isDehydrated)if(G={element:E,isDehydrated:!1,cache:ye.cache},f.updateQueue.baseState=G,f.memoizedState=G,f.flags&256){f=uf(c,f,E,v);break e}else if(E!==k){k=Pn(Error(n(424)),f),ma(k),f=uf(c,f,E,v);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(as=cu(c.firstChild),Zs=f,Gn=!0,El=null,No=!0,v=Ss(f,null,E,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(Yn(),E===k){f=eA(c,f,v);break e}Po(c,f,E,v)}f=f.child}return f;case 26:return CA(c,f),c===null?(v=Rp(f.type,null,f.pendingProps,null))?f.memoizedState=v:Gn||(v=f.type,c=f.pendingProps,E=Md(Ke.current).createElement(v),E[Fn]=f,E[fn]=c,fo(E,v,c),Hn(E),f.stateNode=E):f.memoizedState=Rp(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return hi(f),c===null&&Gn&&(E=f.stateNode=dy(f.type,f.pendingProps,Ke.current),Zs=f,No=!0,k=as,kA(f.type)?(jp=k,as=cu(E.firstChild)):as=k),Po(c,f,f.pendingProps.children,v),CA(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&Gn&&((k=E=as)&&(E=G1(E,f.type,f.pendingProps,No),E!==null?(f.stateNode=E,Zs=f,as=cu(E.firstChild),No=!1,k=!0):k=!1),k||tl(f)),hi(f),k=f.type,G=f.pendingProps,ye=c!==null?c.memoizedProps:null,E=G.children,Pp(k,G)?E=null:ye!==null&&Pp(k,ye)&&(f.flags|=32),f.memoizedState!==null&&(k=Rr(c,f,co,null,null,v),C._currentValue=k),CA(c,f),Po(c,f,E,v),f.child;case 6:return c===null&&Gn&&((c=v=as)&&(v=Ay(v,f.pendingProps,No),v!==null?(f.stateNode=v,Zs=f,as=null,c=!0):c=!1),c||tl(f)),null;case 13:return k0(c,f,v);case 4:return gt(f,f.stateNode.containerInfo),E=f.pendingProps,c===null?f.child=Ma(f,null,E,v):Po(c,f,E,v),f.child;case 11:return ap(c,f,f.type,f.pendingProps,v);case 7:return Po(c,f,f.pendingProps,v),f.child;case 8:return Po(c,f,f.pendingProps.children,v),f.child;case 12:return Po(c,f,f.pendingProps.children,v),f.child;case 10:return E=f.pendingProps,oo(f,f.type,E.value),Po(c,f,E.children,v),f.child;case 9:return k=f.type._context,E=f.pendingProps.children,rl(f),k=Cs(k),E=E(k),f.flags|=1,Po(c,f,E,v),f.child;case 14:return P0(c,f,f.type,f.pendingProps,v);case 15:return op(c,f,f.type,f.pendingProps,v);case 19:return j0(c,f,v);case 31:return E=f.pendingProps,v=f.mode,E={mode:E.mode,children:E.children},c===null?(v=gd(E,v),v.ref=f.ref,f.child=v,v.return=f,f=v):(v=Xo(c.child,E),v.ref=f.ref,f.child=v,v.return=f,f=v),f;case 22:return Em(c,f,v);case 24:return rl(f),E=Cs(Ps),c===null?(k=Z(),k===null&&(k=gs,G=JA(),k.pooledCache=G,G.refCount++,G!==null&&(k.pooledCacheLanes|=v),k=G),f.memoizedState={parent:E,cache:k},ct(f),oo(f,Ps,k)):((c.lanes&v)!==0&&(bt(c,f),Fi(f,null,null,v),Xi()),k=c.memoizedState,G=f.memoizedState,k.parent!==E?(k={parent:E,cache:E},f.memoizedState=k,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=k),oo(f,Ps,E)):(E=G.cache,oo(f,Ps,E),E!==k.cache&&Su(f,[Ps],v,!0))),Po(c,f,f.pendingProps.children,v),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function tA(c){c.flags|=4}function hp(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!zp(f)){if(f=Nr.current,f!==null&&((Wn&4194048)===Wn?Rs!==null:(Wn&62914560)!==Wn&&(Wn&536870912)===0||f!==Rs))throw It=Oe,Le;c.flags|=8192}}function ah(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?Qt():536870912,c.lanes|=f,Ph|=f)}function Ha(c,f){if(!Gn)switch(c.tailMode){case"hidden":f=c.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var E=null;v!==null;)v.alternate!==null&&(E=v),v=v.sibling;E===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:E.sibling=null}}function Os(c){var f=c.alternate!==null&&c.alternate.child===c.child,v=0,E=0;if(f)for(var k=c.child;k!==null;)v|=k.lanes|k.childLanes,E|=k.subtreeFlags&65011712,E|=k.flags&65011712,k.return=c,k=k.sibling;else for(k=c.child;k!==null;)v|=k.lanes|k.childLanes,E|=k.subtreeFlags,E|=k.flags,k.return=c,k=k.sibling;return c.subtreeFlags|=E,c.childLanes=v,f}function km(c,f,v){var E=f.pendingProps;switch(Ic(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Os(f),null;case 1:return Os(f),null;case 3:return v=f.stateNode,E=null,c!==null&&(E=c.memoizedState.cache),f.memoizedState.cache!==E&&(f.flags|=2048),Oa(Ps),Et(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(Ta(f)?tA(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,$c())),Os(f),null;case 26:return v=f.memoizedState,c===null?(tA(f),v!==null?(Os(f),hp(f,v)):(Os(f),f.flags&=-16777217)):v?v!==c.memoizedState?(tA(f),Os(f),hp(f,v)):(Os(f),f.flags&=-16777217):(c.memoizedProps!==E&&tA(f),Os(f),f.flags&=-16777217),null;case 27:Vt(f),v=Ke.current;var k=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==E&&tA(f);else{if(!E){if(f.stateNode===null)throw Error(n(166));return Os(f),null}c=Fe.current,Ta(f)?$u(f):(c=dy(k,E,v),f.stateNode=c,tA(f))}return Os(f),null;case 5:if(Vt(f),v=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==E&&tA(f);else{if(!E){if(f.stateNode===null)throw Error(n(166));return Os(f),null}if(c=Fe.current,Ta(f))$u(f);else{switch(k=Md(Ke.current),c){case 1:c=k.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:c=k.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":c=k.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":c=k.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":c=k.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof E.is=="string"?k.createElement("select",{is:E.is}):k.createElement("select"),E.multiple?c.multiple=!0:E.size&&(c.size=E.size);break;default:c=typeof E.is=="string"?k.createElement(v,{is:E.is}):k.createElement(v)}}c[Fn]=f,c[fn]=E;e:for(k=f.child;k!==null;){if(k.tag===5||k.tag===6)c.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===f)break e;for(;k.sibling===null;){if(k.return===null||k.return===f)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}f.stateNode=c;e:switch(fo(c,v,E),v){case"button":case"input":case"select":case"textarea":c=!!E.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&tA(f)}}return Os(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==E&&tA(f);else{if(typeof E!="string"&&f.stateNode===null)throw Error(n(166));if(c=Ke.current,Ta(f)){if(c=f.stateNode,v=f.memoizedProps,E=null,k=Zs,k!==null)switch(k.tag){case 27:case 5:E=k.memoizedProps}c[Fn]=f,c=!!(c.nodeValue===v||E!==null&&E.suppressHydrationWarning===!0||oy(c.nodeValue,v)),c||tl(f)}else c=Md(c).createTextNode(E),c[Fn]=f,f.stateNode=c}return Os(f),null;case 13:if(E=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(k=Ta(f),E!==null&&E.dehydrated!==null){if(c===null){if(!k)throw Error(n(318));if(k=f.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(n(317));k[Fn]=f}else Yn(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Os(f),k=!1}else k=$c(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=k),k=!0;if(!k)return f.flags&256?(Lo(f),f):(Lo(f),null)}if(Lo(f),(f.flags&128)!==0)return f.lanes=v,f;if(v=E!==null,c=c!==null&&c.memoizedState!==null,v){E=f.child,k=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(k=E.alternate.memoizedState.cachePool.pool);var G=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(G=E.memoizedState.cachePool.pool),G!==k&&(E.flags|=2048)}return v!==c&&v&&(f.child.flags|=8192),ah(f,f.updateQueue),Os(f),null;case 4:return Et(),c===null&&Np(f.stateNode.containerInfo),Os(f),null;case 10:return Oa(f.type),Os(f),null;case 19:if(J(Qr),k=f.memoizedState,k===null)return Os(f),null;if(E=(f.flags&128)!==0,G=k.rendering,G===null)if(E)Ha(k,!1);else{if(zs!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(G=ll(c),G!==null){for(f.flags|=128,Ha(k,!1),c=G.updateQueue,f.updateQueue=c,ah(f,c),f.subtreeFlags=0,c=v,v=f.child;v!==null;)Nc(v,c),v=v.sibling;return me(Qr,Qr.current&1|2),f.child}c=c.sibling}k.tail!==null&&Ni()>mf&&(f.flags|=128,E=!0,Ha(k,!1),f.lanes=4194304)}else{if(!E)if(c=ll(G),c!==null){if(f.flags|=128,E=!0,c=c.updateQueue,f.updateQueue=c,ah(f,c),Ha(k,!0),k.tail===null&&k.tailMode==="hidden"&&!G.alternate&&!Gn)return Os(f),null}else 2*Ni()-k.renderingStartTime>mf&&v!==536870912&&(f.flags|=128,E=!0,Ha(k,!1),f.lanes=4194304);k.isBackwards?(G.sibling=f.child,f.child=G):(c=k.last,c!==null?c.sibling=G:f.child=G,k.last=G)}return k.tail!==null?(f=k.tail,k.rendering=f,k.tail=f.sibling,k.renderingStartTime=Ni(),f.sibling=null,c=Qr.current,me(Qr,E?c&1|2:c&1),f):(Os(f),null);case 22:case 23:return Lo(f),Sn(),E=f.memoizedState!==null,c!==null?c.memoizedState!==null!==E&&(f.flags|=8192):E&&(f.flags|=8192),E?(v&536870912)!==0&&(f.flags&128)===0&&(Os(f),f.subtreeFlags&6&&(f.flags|=8192)):Os(f),v=f.updateQueue,v!==null&&ah(f,v.retryQueue),v=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),E=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(E=f.memoizedState.cachePool.pool),E!==v&&(f.flags|=2048),c!==null&&J(O),null;case 24:return v=null,c!==null&&(v=c.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),Oa(Ps),Os(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function L1(c,f){switch(Ic(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Oa(Ps),Et(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return Vt(f),null;case 13:if(Lo(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(n(340));Yn()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return J(Qr),null;case 4:return Et(),null;case 10:return Oa(f.type),null;case 22:case 23:return Lo(f),Sn(),c!==null&&J(O),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return Oa(Ps),null;case 25:return null;default:return null}}function jm(c,f){switch(Ic(f),f.tag){case 3:Oa(Ps),Et();break;case 26:case 27:case 5:Vt(f);break;case 4:Et();break;case 13:Lo(f);break;case 19:J(Qr);break;case 10:Oa(f.type);break;case 22:case 23:Lo(f),Sn(),c!==null&&J(O);break;case 24:Oa(Ps)}}function Af(c,f){try{var v=f.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var k=E.next;v=k;do{if((v.tag&c)===c){E=void 0;var G=v.create,ye=v.inst;E=G(),ye.destroy=E}v=v.next}while(v!==k)}}catch(je){es(f,f.return,je)}}function oh(c,f,v){try{var E=f.updateQueue,k=E!==null?E.lastEffect:null;if(k!==null){var G=k.next;E=G;do{if((E.tag&c)===c){var ye=E.inst,je=ye.destroy;if(je!==void 0){ye.destroy=void 0,k=f;var at=v,Ct=je;try{Ct()}catch(Zt){es(k,at,Zt)}}}E=E.next}while(E!==G)}}catch(Zt){es(f,f.return,Zt)}}function Um(c){var f=c.updateQueue;if(f!==null){var v=c.stateNode;try{lr(f,v)}catch(E){es(c,c.return,E)}}}function U0(c,f,v){v.props=cl(c.type,c.memoizedProps),v.state=c.memoizedState;try{v.componentWillUnmount()}catch(E){es(c,f,E)}}function Ih(c,f){try{var v=c.ref;if(v!==null){switch(c.tag){case 26:case 27:case 5:var E=c.stateNode;break;case 30:E=c.stateNode;break;default:E=c.stateNode}typeof v=="function"?c.refCleanup=v(E):v.current=E}}catch(k){es(c,f,k)}}function Nu(c,f){var v=c.ref,E=c.refCleanup;if(v!==null)if(typeof E=="function")try{E()}catch(k){es(c,f,k)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(k){es(c,f,k)}else v.current=null}function Dm(c){var f=c.type,v=c.memoizedProps,E=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":v.autoFocus&&E.focus();break e;case"img":v.src?E.src=v.src:v.srcSet&&(E.srcset=v.srcSet)}}catch(k){es(c,c.return,k)}}function Rm(c,f,v){try{var E=c.stateNode;ly(E,c.type,v,f),E[fn]=f}catch(k){es(c,c.return,k)}}function D0(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&kA(c.type)||c.tag===4}function Om(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||D0(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&kA(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function yd(c,f,v){var E=c.tag;if(E===5||E===6)c=c.stateNode,f?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(c,f):(f=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,f.appendChild(c),v=v._reactRootContainer,v!=null||f.onclick!==null||(f.onclick=Nd));else if(E!==4&&(E===27&&kA(c.type)&&(v=c.stateNode,f=null),c=c.child,c!==null))for(yd(c,f,v),c=c.sibling;c!==null;)yd(c,f,v),c=c.sibling}function vd(c,f,v){var E=c.tag;if(E===5||E===6)c=c.stateNode,f?v.insertBefore(c,f):v.appendChild(c);else if(E!==4&&(E===27&&kA(c.type)&&(v=c.stateNode),c=c.child,c!==null))for(vd(c,f,v),c=c.sibling;c!==null;)vd(c,f,v),c=c.sibling}function Qm(c){var f=c.stateNode,v=c.memoizedProps;try{for(var E=c.type,k=f.attributes;k.length;)f.removeAttributeNode(k[0]);fo(f,E,v),f[Fn]=c,f[fn]=v}catch(G){es(c,c.return,G)}}var Pl=!1,Es=!1,zm=!1,R0=typeof WeakSet=="function"?WeakSet:Set,Ao=null;function P1(c,f){if(c=c.containerInfo,Ip=ve,c=pa(c),Ws(c)){if("selectionStart"in c)var v={start:c.selectionStart,end:c.selectionEnd};else e:{v=(v=c.ownerDocument)&&v.defaultView||window;var E=v.getSelection&&v.getSelection();if(E&&E.rangeCount!==0){v=E.anchorNode;var k=E.anchorOffset,G=E.focusNode;E=E.focusOffset;try{v.nodeType,G.nodeType}catch{v=null;break e}var ye=0,je=-1,at=-1,Ct=0,Zt=0,ci=c,Rt=null;t:for(;;){for(var Ht;ci!==v||k!==0&&ci.nodeType!==3||(je=ye+k),ci!==G||E!==0&&ci.nodeType!==3||(at=ye+E),ci.nodeType===3&&(ye+=ci.nodeValue.length),(Ht=ci.firstChild)!==null;)Rt=ci,ci=Ht;for(;;){if(ci===c)break t;if(Rt===v&&++Ct===k&&(je=ye),Rt===G&&++Zt===E&&(at=ye),(Ht=ci.nextSibling)!==null)break;ci=Rt,Rt=ci.parentNode}ci=Ht}v=je===-1||at===-1?null:{start:je,end:at}}else v=null}v=v||{start:0,end:0}}else v=null;for(Lp={focusedElem:c,selectionRange:v},ve=!1,Ao=f;Ao!==null;)if(f=Ao,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,Ao=c;else for(;Ao!==null;){switch(f=Ao,G=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&G!==null){c=void 0,v=f,k=G.memoizedProps,G=G.memoizedState,E=v.stateNode;try{var vn=cl(v.type,k,v.elementType===v.type);c=E.getSnapshotBeforeUpdate(vn,G),E.__reactInternalSnapshotBeforeUpdate=c}catch(An){es(v,v.return,An)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,v=c.nodeType,v===9)kp(c);else if(v===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":kp(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(n(163))}if(c=f.sibling,c!==null){c.return=f.return,Ao=c;break}Ao=f.return}}function O0(c,f,v){var E=v.flags;switch(v.tag){case 0:case 11:case 15:EA(c,v),E&4&&Af(5,v);break;case 1:if(EA(c,v),E&4)if(c=v.stateNode,f===null)try{c.componentDidMount()}catch(ye){es(v,v.return,ye)}else{var k=cl(v.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(k,f,c.__reactInternalSnapshotBeforeUpdate)}catch(ye){es(v,v.return,ye)}}E&64&&Um(v),E&512&&Ih(v,v.return);break;case 3:if(EA(c,v),E&64&&(c=v.updateQueue,c!==null)){if(f=null,v.child!==null)switch(v.child.tag){case 27:case 5:f=v.child.stateNode;break;case 1:f=v.child.stateNode}try{lr(c,f)}catch(ye){es(v,v.return,ye)}}break;case 27:f===null&&E&4&&Qm(v);case 26:case 5:EA(c,v),f===null&&E&4&&Dm(v),E&512&&Ih(v,v.return);break;case 12:EA(c,v);break;case 13:EA(c,v),E&4&&_d(c,v),E&64&&(c=v.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(v=wp.bind(null,v),hy(c,v))));break;case 22:if(E=v.memoizedState!==null||Pl,!E){f=f!==null&&f.memoizedState!==null||Es,k=Pl;var G=Es;Pl=E,(Es=f)&&!G?ru(c,v,(v.subtreeFlags&8772)!==0):EA(c,v),Pl=k,Es=G}break;case 30:break;default:EA(c,v)}}function Q0(c){var f=c.alternate;f!==null&&(c.alternate=null,Q0(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&or(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Qs=null,ul=!1;function SA(c,f,v){for(v=v.child;v!==null;)Hm(c,f,v),v=v.sibling}function Hm(c,f,v){if(Gi&&typeof Gi.onCommitFiberUnmount=="function")try{Gi.onCommitFiberUnmount(wi,v)}catch{}switch(v.tag){case 26:Es||Nu(v,f),SA(c,f,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Es||Nu(v,f);var E=Qs,k=ul;kA(v.type)&&(Qs=v.stateNode,ul=!1),SA(c,f,v),wf(v.stateNode),Qs=E,ul=k;break;case 5:Es||Nu(v,f);case 6:if(E=Qs,k=ul,Qs=null,SA(c,f,v),Qs=E,ul=k,Qs!==null)if(ul)try{(Qs.nodeType===9?Qs.body:Qs.nodeName==="HTML"?Qs.ownerDocument.body:Qs).removeChild(v.stateNode)}catch(G){es(v,f,G)}else try{Qs.removeChild(v.stateNode)}catch(G){es(v,f,G)}break;case 18:Qs!==null&&(ul?(c=Qs,og(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,v.stateNode),jo(c)):og(Qs,v.stateNode));break;case 4:E=Qs,k=ul,Qs=v.stateNode.containerInfo,ul=!0,SA(c,f,v),Qs=E,ul=k;break;case 0:case 11:case 14:case 15:Es||oh(2,v,f),Es||oh(4,v,f),SA(c,f,v);break;case 1:Es||(Nu(v,f),E=v.stateNode,typeof E.componentWillUnmount=="function"&&U0(v,f,E)),SA(c,f,v);break;case 21:SA(c,f,v);break;case 22:Es=(E=Es)||v.memoizedState!==null,SA(c,f,v),Es=E;break;default:SA(c,f,v)}}function _d(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{jo(c)}catch(v){es(f,f.return,v)}}function k1(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new R0),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new R0),f;default:throw Error(n(435,c.tag))}}function Ts(c,f){var v=k1(c);f.forEach(function(E){var k=Bp.bind(null,c,E);v.has(E)||(v.add(E),E.then(k,k))})}function ho(c,f){var v=f.deletions;if(v!==null)for(var E=0;E<v.length;E++){var k=v[E],G=c,ye=f,je=ye;e:for(;je!==null;){switch(je.tag){case 27:if(kA(je.type)){Qs=je.stateNode,ul=!1;break e}break;case 5:Qs=je.stateNode,ul=!1;break e;case 3:case 4:Qs=je.stateNode.containerInfo,ul=!0;break e}je=je.return}if(Qs===null)throw Error(n(160));Hm(G,ye,k),Qs=null,ul=!1,G=k.alternate,G!==null&&(G.return=null),k.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)hf(f,c),f=f.sibling}var nu=null;function hf(c,f){var v=c.alternate,E=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ho(f,c),Al(c),E&4&&(oh(3,c,c.return),Af(3,c),oh(5,c,c.return));break;case 1:ho(f,c),Al(c),E&512&&(Es||v===null||Nu(v,v.return)),E&64&&Pl&&(c=c.updateQueue,c!==null&&(E=c.callbacks,E!==null&&(v=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=v===null?E:v.concat(E))));break;case 26:var k=nu;if(ho(f,c),Al(c),E&512&&(Es||v===null||Nu(v,v.return)),E&4){var G=v!==null?v.memoizedState:null;if(E=c.memoizedState,v===null)if(E===null)if(c.stateNode===null){e:{E=c.type,v=c.memoizedProps,k=k.ownerDocument||k;t:switch(E){case"title":G=k.getElementsByTagName("title")[0],(!G||G[jr]||G[Fn]||G.namespaceURI==="http://www.w3.org/2000/svg"||G.hasAttribute("itemprop"))&&(G=k.createElement(E),k.head.insertBefore(G,k.querySelector("head > title"))),fo(G,E,v),G[Fn]=c,Hn(G),E=G;break e;case"link":var ye=Qp("link","href",k).get(E+(v.href||""));if(ye){for(var je=0;je<ye.length;je++)if(G=ye[je],G.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&G.getAttribute("rel")===(v.rel==null?null:v.rel)&&G.getAttribute("title")===(v.title==null?null:v.title)&&G.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){ye.splice(je,1);break t}}G=k.createElement(E),fo(G,E,v),k.head.appendChild(G);break;case"meta":if(ye=Qp("meta","content",k).get(E+(v.content||""))){for(je=0;je<ye.length;je++)if(G=ye[je],G.getAttribute("content")===(v.content==null?null:""+v.content)&&G.getAttribute("name")===(v.name==null?null:v.name)&&G.getAttribute("property")===(v.property==null?null:v.property)&&G.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&G.getAttribute("charset")===(v.charSet==null?null:v.charSet)){ye.splice(je,1);break t}}G=k.createElement(E),fo(G,E,v),k.head.appendChild(G);break;default:throw Error(n(468,E))}G[Fn]=c,Hn(G),E=G}c.stateNode=E}else Ef(k,c.type,c.stateNode);else c.stateNode=Op(k,E,c.memoizedProps);else G!==E?(G===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):G.count--,E===null?Ef(k,c.type,c.stateNode):Op(k,E,c.memoizedProps)):E===null&&c.stateNode!==null&&Rm(c,c.memoizedProps,v.memoizedProps)}break;case 27:ho(f,c),Al(c),E&512&&(Es||v===null||Nu(v,v.return)),v!==null&&E&4&&Rm(c,c.memoizedProps,v.memoizedProps);break;case 5:if(ho(f,c),Al(c),E&512&&(Es||v===null||Nu(v,v.return)),c.flags&32){k=c.stateNode;try{Vo(k,"")}catch(Ht){es(c,c.return,Ht)}}E&4&&c.stateNode!=null&&(k=c.memoizedProps,Rm(c,k,v!==null?v.memoizedProps:k)),E&1024&&(zm=!0);break;case 6:if(ho(f,c),Al(c),E&4){if(c.stateNode===null)throw Error(n(162));E=c.memoizedProps,v=c.stateNode;try{v.nodeValue=E}catch(Ht){es(c,c.return,Ht)}}break;case 3:if(Sf=null,k=nu,nu=Hh(f.containerInfo),ho(f,c),nu=k,Al(c),E&4&&v!==null&&v.memoizedState.isDehydrated)try{jo(f.containerInfo)}catch(Ht){es(c,c.return,Ht)}zm&&(zm=!1,xd(c));break;case 4:E=nu,nu=Hh(c.stateNode.containerInfo),ho(f,c),Al(c),nu=E;break;case 12:ho(f,c),Al(c);break;case 13:ho(f,c),Al(c),c.child.flags&8192&&c.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(kh=Ni()),E&4&&(E=c.updateQueue,E!==null&&(c.updateQueue=null,Ts(c,E)));break;case 22:k=c.memoizedState!==null;var at=v!==null&&v.memoizedState!==null,Ct=Pl,Zt=Es;if(Pl=Ct||k,Es=Zt||at,ho(f,c),Es=Zt,Pl=Ct,Al(c),E&8192)e:for(f=c.stateNode,f._visibility=k?f._visibility&-2:f._visibility|1,k&&(v===null||at||Pl||Es||lh(c)),v=null,f=c;;){if(f.tag===5||f.tag===26){if(v===null){at=v=f;try{if(G=at.stateNode,k)ye=G.style,typeof ye.setProperty=="function"?ye.setProperty("display","none","important"):ye.display="none";else{je=at.stateNode;var ci=at.memoizedProps.style,Rt=ci!=null&&ci.hasOwnProperty("display")?ci.display:null;je.style.display=Rt==null||typeof Rt=="boolean"?"":(""+Rt).trim()}}catch(Ht){es(at,at.return,Ht)}}}else if(f.tag===6){if(v===null){at=f;try{at.stateNode.nodeValue=k?"":at.memoizedProps}catch(Ht){es(at,at.return,Ht)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;v===f&&(v=null),f=f.return}v===f&&(v=null),f.sibling.return=f.return,f=f.sibling}E&4&&(E=c.updateQueue,E!==null&&(v=E.retryQueue,v!==null&&(E.retryQueue=null,Ts(c,v))));break;case 19:ho(f,c),Al(c),E&4&&(E=c.updateQueue,E!==null&&(c.updateQueue=null,Ts(c,E)));break;case 30:break;case 21:break;default:ho(f,c),Al(c)}}function Al(c){var f=c.flags;if(f&2){try{for(var v,E=c.return;E!==null;){if(D0(E)){v=E;break}E=E.return}if(v==null)throw Error(n(160));switch(v.tag){case 27:var k=v.stateNode,G=Om(c);vd(c,G,k);break;case 5:var ye=v.stateNode;v.flags&32&&(Vo(ye,""),v.flags&=-33);var je=Om(c);vd(c,je,ye);break;case 3:case 4:var at=v.stateNode.containerInfo,Ct=Om(c);yd(c,Ct,at);break;default:throw Error(n(161))}}catch(Zt){es(c,c.return,Zt)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function xd(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;xd(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function EA(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)O0(c,f.alternate,f),f=f.sibling}function lh(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:oh(4,f,f.return),lh(f);break;case 1:Nu(f,f.return);var v=f.stateNode;typeof v.componentWillUnmount=="function"&&U0(f,f.return,v),lh(f);break;case 27:wf(f.stateNode);case 26:case 5:Nu(f,f.return),lh(f);break;case 22:f.memoizedState===null&&lh(f);break;case 30:lh(f);break;default:lh(f)}c=c.sibling}}function ru(c,f,v){for(v=v&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var E=f.alternate,k=c,G=f,ye=G.flags;switch(G.tag){case 0:case 11:case 15:ru(k,G,v),Af(4,G);break;case 1:if(ru(k,G,v),E=G,k=E.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(Ct){es(E,E.return,Ct)}if(E=G,k=E.updateQueue,k!==null){var je=E.stateNode;try{var at=k.shared.hiddenCallbacks;if(at!==null)for(k.shared.hiddenCallbacks=null,k=0;k<at.length;k++)er(at[k],je)}catch(Ct){es(E,E.return,Ct)}}v&&ye&64&&Um(G),Ih(G,G.return);break;case 27:Qm(G);case 26:case 5:ru(k,G,v),v&&E===null&&ye&4&&Dm(G),Ih(G,G.return);break;case 12:ru(k,G,v);break;case 13:ru(k,G,v),v&&ye&4&&_d(k,G);break;case 22:G.memoizedState===null&&ru(k,G,v),Ih(G,G.return);break;case 30:break;default:ru(k,G,v)}f=f.sibling}}function df(c,f){var v=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==v&&(c!=null&&c.refCount++,v!=null&&Jl(v))}function ch(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Jl(c))}function Uc(c,f,v,E){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Lh(c,f,v,E),f=f.sibling}function Lh(c,f,v,E){var k=f.flags;switch(f.tag){case 0:case 11:case 15:Uc(c,f,v,E),k&2048&&Af(9,f);break;case 1:Uc(c,f,v,E);break;case 3:Uc(c,f,v,E),k&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Jl(c)));break;case 12:if(k&2048){Uc(c,f,v,E),c=f.stateNode;try{var G=f.memoizedProps,ye=G.id,je=G.onPostCommit;typeof je=="function"&&je(ye,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(at){es(f,f.return,at)}}else Uc(c,f,v,E);break;case 13:Uc(c,f,v,E);break;case 23:break;case 22:G=f.stateNode,ye=f.alternate,f.memoizedState!==null?G._visibility&2?Uc(c,f,v,E):ff(c,f):G._visibility&2?Uc(c,f,v,E):(G._visibility|=2,iA(c,f,v,E,(f.subtreeFlags&10256)!==0)),k&2048&&df(ye,f);break;case 24:Uc(c,f,v,E),k&2048&&ch(f.alternate,f);break;default:Uc(c,f,v,E)}}function iA(c,f,v,E,k){for(k=k&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var G=c,ye=f,je=v,at=E,Ct=ye.flags;switch(ye.tag){case 0:case 11:case 15:iA(G,ye,je,at,k),Af(8,ye);break;case 23:break;case 22:var Zt=ye.stateNode;ye.memoizedState!==null?Zt._visibility&2?iA(G,ye,je,at,k):ff(G,ye):(Zt._visibility|=2,iA(G,ye,je,at,k)),k&&Ct&2048&&df(ye.alternate,ye);break;case 24:iA(G,ye,je,at,k),k&&Ct&2048&&ch(ye.alternate,ye);break;default:iA(G,ye,je,at,k)}f=f.sibling}}function ff(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var v=c,E=f,k=E.flags;switch(E.tag){case 22:ff(v,E),k&2048&&df(E.alternate,E);break;case 24:ff(v,E),k&2048&&ch(E.alternate,E);break;default:ff(v,E)}f=f.sibling}}var bd=8192;function su(c){if(c.subtreeFlags&bd)for(c=c.child;c!==null;)z0(c),c=c.sibling}function z0(c){switch(c.tag){case 26:su(c),c.flags&bd&&c.memoizedState!==null&&Z1(nu,c.memoizedState,c.memoizedProps);break;case 5:su(c);break;case 3:case 4:var f=nu;nu=Hh(c.stateNode.containerInfo),su(c),nu=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=bd,bd=16777216,su(c),bd=f):su(c));break;default:su(c)}}function Vm(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function TA(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var E=f[v];Ao=E,qm(E,c)}Vm(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)dp(c),c=c.sibling}function dp(c){switch(c.tag){case 0:case 11:case 15:TA(c),c.flags&2048&&oh(9,c,c.return);break;case 3:TA(c);break;case 12:TA(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,pf(c)):TA(c);break;default:TA(c)}}function pf(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var E=f[v];Ao=E,qm(E,c)}Vm(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:oh(8,f,f.return),pf(f);break;case 22:v=f.stateNode,v._visibility&2&&(v._visibility&=-3,pf(f));break;default:pf(f)}c=c.sibling}}function qm(c,f){for(;Ao!==null;){var v=Ao;switch(v.tag){case 0:case 11:case 15:oh(8,v,f);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var E=v.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Jl(v.memoizedState.cache)}if(E=v.child,E!==null)E.return=v,Ao=E;else e:for(v=c;Ao!==null;){E=Ao;var k=E.sibling,G=E.return;if(Q0(E),E===v){Ao=null;break e}if(k!==null){k.return=G,Ao=k;break e}Ao=G}}}var j1={getCacheForType:function(c){var f=Cs(Ps),v=f.data.get(c);return v===void 0&&(v=c(),f.data.set(c,v)),v}},U1=typeof WeakMap=="function"?WeakMap:Map,zr=0,gs=null,nr=null,Wn=0,Hr=0,Dc=null,FA=!1,wd=!1,fp=!1,NA=0,zs=0,au=0,MA=0,Gm=0,ou=0,Ph=0,Bd=null,rc=null,Km=!1,kh=0,mf=1/0,pp=null,uh=null,ko=0,Ah=null,Cd=null,jh=0,gf=0,mp=null,Wm=null,Sd=0,$m=null;function hl(){if((zr&2)!==0&&Wn!==0)return Wn&-Wn;if(ue.T!==null){var c=lo;return c!==0?c:eg()}return vr()}function H0(){ou===0&&(ou=(Wn&536870912)===0||Gn?oi():536870912);var c=Nr.current;return c!==null&&(c.flags|=32),ou}function sc(c,f,v){(c===gs&&(Hr===2||Hr===9)||c.cancelPendingCommit!==null)&&(nA(c,0),IA(c,Wn,ou,!1)),Ui(c,v),((zr&2)===0||c!==gs)&&(c===gs&&((zr&2)===0&&(MA|=v),zs===4&&IA(c,Wn,ou,!1)),lu(c))}function V0(c,f,v){if((zr&6)!==0)throw Error(n(327));var E=!v&&(f&124)===0&&(f&c.expiredLanes)===0||dt(c,f),k=E?G0(c,f):yf(c,f,!0),G=E;do{if(k===0){wd&&!E&&IA(c,f,0,!1);break}else{if(v=c.current.alternate,G&&!D1(v)){k=yf(c,f,!1),G=!1;continue}if(k===2){if(G=f,c.errorRecoveryDisabledLanes&G)var ye=0;else ye=c.pendingLanes&-536870913,ye=ye!==0?ye:ye&536870912?536870912:0;if(ye!==0){f=ye;e:{var je=c;k=Bd;var at=je.current.memoizedState.isDehydrated;if(at&&(nA(je,ye).flags|=256),ye=yf(je,ye,!1),ye!==2){if(fp&&!at){je.errorRecoveryDisabledLanes|=G,MA|=G,k=4;break e}G=rc,rc=k,G!==null&&(rc===null?rc=G:rc.push.apply(rc,G))}k=ye}if(G=!1,k!==2)continue}}if(k===1){nA(c,0),IA(c,f,0,!0);break}e:{switch(E=c,G=k,G){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:IA(E,f,ou,!FA);break e;case 2:rc=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(k=kh+300-Ni(),10<k)){if(IA(E,f,ou,!FA),wt(E,0,!0)!==0)break e;E.timeoutHandle=ac(q0.bind(null,E,v,rc,pp,Km,f,ou,MA,Ph,FA,G,2,-0,0),k);break e}q0(E,v,rc,pp,Km,f,ou,MA,Ph,FA,G,0,-0,0)}}break}while(!0);lu(c)}function q0(c,f,v,E,k,G,ye,je,at,Ct,Zt,ci,Rt,Ht){if(c.timeoutHandle=-1,ci=f.subtreeFlags,(ci&8192||(ci&16785408)===16785408)&&(Kh={stylesheets:null,count:0,unsuspend:hg},z0(f),ci=h(),ci!==null)){c.cancelPendingCommit=ci(Z0.bind(null,c,f,G,v,E,k,ye,je,at,Zt,1,Rt,Ht)),IA(c,G,ye,!Ct);return}Z0(c,f,G,v,E,k,ye,je,at)}function D1(c){for(var f=c;;){var v=f.tag;if((v===0||v===11||v===15)&&f.flags&16384&&(v=f.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var E=0;E<v.length;E++){var k=v[E],G=k.getSnapshot;k=k.value;try{if(!Ks(G(),k))return!1}catch{return!1}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function IA(c,f,v,E){f&=~Gm,f&=~MA,c.suspendedLanes|=f,c.pingedLanes&=~f,E&&(c.warmLanes|=f),E=c.expirationTimes;for(var k=f;0<k;){var G=31-et(k),ye=1<<G;E[G]=-1,k&=~ye}v!==0&&Ti(c,v,f)}function gp(){return(zr&6)===0?(Rh(0),!1):!0}function Zm(){if(nr!==null){if(Hr===0)var c=nr.return;else c=nr,Tl=Bs=null,eh(c),ic=null,Yu=0,c=nr;for(;c!==null;)jm(c.alternate,c),c=c.return;nr=null}}function nA(c,f){var v=c.timeoutHandle;v!==-1&&(c.timeoutHandle=-1,Ld(v)),v=c.cancelPendingCommit,v!==null&&(c.cancelPendingCommit=null,v()),Zm(),gs=c,nr=v=Xo(c.current,null),Wn=f,Hr=0,Dc=null,FA=!1,wd=dt(c,f),fp=!1,Ph=ou=Gm=MA=au=zs=0,rc=Bd=null,Km=!1,(f&8)!==0&&(f|=f&32);var E=c.entangledLanes;if(E!==0)for(c=c.entanglements,E&=f;0<E;){var k=31-et(E),G=1<<k;f|=c[k],E&=~G}return NA=f,Ea(),v}function _a(c,f){an=null,ue.H=Na,f===Me||f===De?(f=Bt(),Hr=3):f===Le?(f=Bt(),Hr=4):Hr=f===lf?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Dc=f,nr===null&&(zs=1,Ju(c,Pn(f,c.current)))}function yp(){var c=ue.H;return ue.H=Na,c===null?Na:c}function Xm(){var c=ue.A;return ue.A=j1,c}function vp(){zs=4,FA||(Wn&4194048)!==Wn&&Nr.current!==null||(wd=!0),(au&134217727)===0&&(MA&134217727)===0||gs===null||IA(gs,Wn,ou,!1)}function yf(c,f,v){var E=zr;zr|=2;var k=yp(),G=Xm();(gs!==c||Wn!==f)&&(pp=null,nA(c,f)),f=!1;var ye=zs;e:do try{if(Hr!==0&&nr!==null){var je=nr,at=Dc;switch(Hr){case 8:Zm(),ye=6;break e;case 3:case 2:case 9:case 6:Nr.current===null&&(f=!0);var Ct=Hr;if(Hr=0,Dc=null,Td(c,je,at,Ct),v&&wd){ye=0;break e}break;default:Ct=Hr,Hr=0,Dc=null,Td(c,je,at,Ct)}}Ed(),ye=zs;break}catch(Zt){_a(c,Zt)}while(!0);return f&&c.shellSuspendCounter++,Tl=Bs=null,zr=E,ue.H=k,ue.A=G,nr===null&&(gs=null,Wn=0,Ea()),ye}function Ed(){for(;nr!==null;)K0(nr)}function G0(c,f){var v=zr;zr|=2;var E=yp(),k=Xm();gs!==c||Wn!==f?(pp=null,mf=Ni()+500,nA(c,f)):wd=dt(c,f);e:do try{if(Hr!==0&&nr!==null){f=nr;var G=Dc;t:switch(Hr){case 1:Hr=0,Dc=null,Td(c,f,G,1);break;case 2:case 9:if(Pe(G)){Hr=0,Dc=null,W0(f);break}f=function(){Hr!==2&&Hr!==9||gs!==c||(Hr=7),lu(c)},G.then(f,f);break e;case 3:Hr=7;break e;case 4:Hr=5;break e;case 7:Pe(G)?(Hr=0,Dc=null,W0(f)):(Hr=0,Dc=null,Td(c,f,G,7));break;case 5:var ye=null;switch(nr.tag){case 26:ye=nr.memoizedState;case 5:case 27:var je=nr;if(!ye||zp(ye)){Hr=0,Dc=null;var at=je.sibling;if(at!==null)nr=at;else{var Ct=je.return;Ct!==null?(nr=Ct,_p(Ct)):nr=null}break t}}Hr=0,Dc=null,Td(c,f,G,5);break;case 6:Hr=0,Dc=null,Td(c,f,G,6);break;case 8:Zm(),zs=6;break e;default:throw Error(n(462))}}R1();break}catch(Zt){_a(c,Zt)}while(!0);return Tl=Bs=null,ue.H=E,ue.A=k,zr=v,nr!==null?0:(gs=null,Wn=0,Ea(),zs)}function R1(){for(;nr!==null&&!ot();)K0(nr)}function K0(c){var f=Ap(c.alternate,c,NA);c.memoizedProps=c.pendingProps,f===null?_p(c):nr=f}function W0(c){var f=c,v=f.alternate;switch(f.tag){case 15:case 0:f=Mh(v,f,f.pendingProps,f.type,void 0,Wn);break;case 11:f=Mh(v,f,f.pendingProps,f.type.render,f.ref,Wn);break;case 5:eh(f);default:jm(v,f),f=nr=Nc(f,NA),f=Ap(v,f,NA)}c.memoizedProps=c.pendingProps,f===null?_p(c):nr=f}function Td(c,f,v,E){Tl=Bs=null,eh(f),ic=null,Yu=0;var k=f.return;try{if(L0(c,k,f,v,Wn)){zs=1,Ju(c,Pn(v,c.current)),nr=null;return}}catch(G){if(k!==null)throw nr=k,G;zs=1,Ju(c,Pn(v,c.current)),nr=null;return}f.flags&32768?(Gn||E===1?c=!0:wd||(Wn&536870912)!==0?c=!1:(FA=c=!0,(E===2||E===9||E===3||E===6)&&(E=Nr.current,E!==null&&E.tag===13&&(E.flags|=16384))),$0(f,c)):_p(f)}function _p(c){var f=c;do{if((f.flags&32768)!==0){$0(f,FA);return}c=f.return;var v=km(f.alternate,f,NA);if(v!==null){nr=v;return}if(f=f.sibling,f!==null){nr=f;return}nr=f=c}while(f!==null);zs===0&&(zs=5)}function $0(c,f){do{var v=L1(c.alternate,c);if(v!==null){v.flags&=32767,nr=v;return}if(v=c.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!f&&(c=c.sibling,c!==null)){nr=c;return}nr=c=v}while(c!==null);zs=6,nr=null}function Z0(c,f,v,E,k,G,ye,je,at){c.cancelPendingCommit=null;do xp();while(ko!==0);if((zr&6)!==0)throw Error(n(327));if(f!==null){if(f===c.current)throw Error(n(177));if(G=f.lanes|f.childLanes,G|=Xr,yt(c,v,G,ye,je,at),c===gs&&(nr=gs=null,Wn=0),Cd=f,Ah=c,jh=v,gf=G,mp=k,Wm=E,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,O1(ei,function(){return Ym(),null})):(c.callbackNode=null,c.callbackPriority=0),E=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||E){E=ue.T,ue.T=null,k=fe.p,fe.p=2,ye=zr,zr|=4;try{P1(c,f,v)}finally{zr=ye,fe.p=k,ue.T=E}}ko=1,X0(),Y0(),J0()}}function X0(){if(ko===1){ko=0;var c=Ah,f=Cd,v=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||v){v=ue.T,ue.T=null;var E=fe.p;fe.p=2;var k=zr;zr|=4;try{hf(f,c);var G=Lp,ye=pa(c.containerInfo),je=G.focusedElem,at=G.selectionRange;if(ye!==je&&je&&je.ownerDocument&&Ca(je.ownerDocument.documentElement,je)){if(at!==null&&Ws(je)){var Ct=at.start,Zt=at.end;if(Zt===void 0&&(Zt=Ct),"selectionStart"in je)je.selectionStart=Ct,je.selectionEnd=Math.min(Zt,je.value.length);else{var ci=je.ownerDocument||document,Rt=ci&&ci.defaultView||window;if(Rt.getSelection){var Ht=Rt.getSelection(),vn=je.textContent.length,An=Math.min(at.start,vn),Br=at.end===void 0?An:Math.min(at.end,vn);!Ht.extend&&An>Br&&(ye=Br,Br=An,An=ye);var St=Wo(je,An),vt=Wo(je,Br);if(St&&vt&&(Ht.rangeCount!==1||Ht.anchorNode!==St.node||Ht.anchorOffset!==St.offset||Ht.focusNode!==vt.node||Ht.focusOffset!==vt.offset)){var Ut=ci.createRange();Ut.setStart(St.node,St.offset),Ht.removeAllRanges(),An>Br?(Ht.addRange(Ut),Ht.extend(vt.node,vt.offset)):(Ut.setEnd(vt.node,vt.offset),Ht.addRange(Ut))}}}}for(ci=[],Ht=je;Ht=Ht.parentNode;)Ht.nodeType===1&&ci.push({element:Ht,left:Ht.scrollLeft,top:Ht.scrollTop});for(typeof je.focus=="function"&&je.focus(),je=0;je<ci.length;je++){var li=ci[je];li.element.scrollLeft=li.left,li.element.scrollTop=li.top}}ve=!!Ip,Lp=Ip=null}finally{zr=k,fe.p=E,ue.T=v}}c.current=f,ko=2}}function Y0(){if(ko===2){ko=0;var c=Ah,f=Cd,v=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||v){v=ue.T,ue.T=null;var E=fe.p;fe.p=2;var k=zr;zr|=4;try{O0(c,f.alternate,f)}finally{zr=k,fe.p=E,ue.T=v}}ko=3}}function J0(){if(ko===4||ko===3){ko=0,$e();var c=Ah,f=Cd,v=jh,E=Wm;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ko=5:(ko=0,Cd=Ah=null,ey(c,c.pendingLanes));var k=c.pendingLanes;if(k===0&&(uh=null),sn(v),f=f.stateNode,Gi&&typeof Gi.onCommitFiberRoot=="function")try{Gi.onCommitFiberRoot(wi,f,void 0,(f.current.flags&128)===128)}catch{}if(E!==null){f=ue.T,k=fe.p,fe.p=2,ue.T=null;try{for(var G=c.onRecoverableError,ye=0;ye<E.length;ye++){var je=E[ye];G(je.value,{componentStack:je.stack})}}finally{ue.T=f,fe.p=k}}(jh&3)!==0&&xp(),lu(c),k=c.pendingLanes,(v&4194090)!==0&&(k&42)!==0?c===$m?Sd++:(Sd=0,$m=c):Sd=0,Rh(0)}}function ey(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,Jl(f)))}function xp(c){return X0(),Y0(),J0(),Ym()}function Ym(){if(ko!==5)return!1;var c=Ah,f=gf;gf=0;var v=sn(jh),E=ue.T,k=fe.p;try{fe.p=32>v?32:v,ue.T=null,v=mp,mp=null;var G=Ah,ye=jh;if(ko=0,Cd=Ah=null,jh=0,(zr&6)!==0)throw Error(n(331));var je=zr;if(zr|=4,dp(G.current),Lh(G,G.current,ye,v),zr=je,Rh(0,!1),Gi&&typeof Gi.onPostCommitFiberRoot=="function")try{Gi.onPostCommitFiberRoot(wi,G)}catch{}return!0}finally{fe.p=k,ue.T=E,ey(c,f)}}function bp(c,f,v){f=Pn(v,f),f=rp(c.stateNode,f,2),c=ri(c,f,2),c!==null&&(Ui(c,2),lu(c))}function es(c,f,v){if(c.tag===3)bp(c,c,v);else for(;f!==null;){if(f.tag===3){bp(f,c,v);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(uh===null||!uh.has(E))){c=Pn(v,c),v=I0(2),E=ri(f,v,2),E!==null&&(sp(v,E,f,c),Ui(E,2),lu(E));break}}f=f.return}}function rA(c,f,v){var E=c.pingCache;if(E===null){E=c.pingCache=new U1;var k=new Set;E.set(f,k)}else k=E.get(f),k===void 0&&(k=new Set,E.set(f,k));k.has(v)||(fp=!0,k.add(v),c=vf.bind(null,c,f,v),f.then(c,c))}function vf(c,f,v){var E=c.pingCache;E!==null&&E.delete(f),c.pingedLanes|=c.suspendedLanes&v,c.warmLanes&=~v,gs===c&&(Wn&v)===v&&(zs===4||zs===3&&(Wn&62914560)===Wn&&300>Ni()-kh?(zr&2)===0&&nA(c,0):Gm|=v,Ph===Wn&&(Ph=0)),lu(c)}function Uh(c,f){f===0&&(f=Qt()),c=ao(c,f),c!==null&&(Ui(c,f),lu(c))}function wp(c){var f=c.memoizedState,v=0;f!==null&&(v=f.retryLane),Uh(c,v)}function Bp(c,f){var v=0;switch(c.tag){case 13:var E=c.stateNode,k=c.memoizedState;k!==null&&(v=k.retryLane);break;case 19:E=c.stateNode;break;case 22:E=c.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(f),Uh(c,v)}function O1(c,f){return Jt(c,f)}var Cp=null,Dh=null,Sp=!1,Ep=!1,Tp=!1,hh=0;function lu(c){c!==Dh&&c.next===null&&(Dh===null?Cp=Dh=c:Dh=Dh.next=c),Ep=!0,Sp||(Sp=!0,z1())}function Rh(c,f){if(!Tp&&Ep){Tp=!0;do for(var v=!1,E=Cp;E!==null;){if(c!==0){var k=E.pendingLanes;if(k===0)var G=0;else{var ye=E.suspendedLanes,je=E.pingedLanes;G=(1<<31-et(42|c)+1)-1,G&=k&~(ye&~je),G=G&201326741?G&201326741|1:G?G|2:0}G!==0&&(v=!0,ny(E,G))}else G=Wn,G=wt(E,E===gs?G:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(G&3)===0||dt(E,G)||(v=!0,ny(E,G));E=E.next}while(v);Tp=!1}}function Q1(){Jm()}function Jm(){Ep=Sp=!1;var c=0;hh!==0&&(cy()&&(c=hh),hh=0);for(var f=Ni(),v=null,E=Cp;E!==null;){var k=E.next,G=ty(E,f);G===0?(E.next=null,v===null?Cp=k:v.next=k,k===null&&(Dh=v)):(v=E,(c!==0||(G&3)!==0)&&(Ep=!0)),E=k}Rh(c)}function ty(c,f){for(var v=c.suspendedLanes,E=c.pingedLanes,k=c.expirationTimes,G=c.pendingLanes&-62914561;0<G;){var ye=31-et(G),je=1<<ye,at=k[ye];at===-1?((je&v)===0||(je&E)!==0)&&(k[ye]=Tt(je,f)):at<=f&&(c.expiredLanes|=je),G&=~je}if(f=gs,v=Wn,v=wt(c,c===f?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),E=c.callbackNode,v===0||c===f&&(Hr===2||Hr===9)||c.cancelPendingCommit!==null)return E!==null&&E!==null&&bi(E),c.callbackNode=null,c.callbackPriority=0;if((v&3)===0||dt(c,v)){if(f=v&-v,f===c.callbackPriority)return f;switch(E!==null&&bi(E),sn(v)){case 2:case 8:v=Mt;break;case 32:v=ei;break;case 268435456:v=Ei;break;default:v=ei}return E=iy.bind(null,c),v=Jt(v,E),c.callbackPriority=f,c.callbackNode=v,f}return E!==null&&E!==null&&bi(E),c.callbackPriority=2,c.callbackNode=null,2}function iy(c,f){if(ko!==0&&ko!==5)return c.callbackNode=null,c.callbackPriority=0,null;var v=c.callbackNode;if(xp()&&c.callbackNode!==v)return null;var E=Wn;return E=wt(c,c===gs?E:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),E===0?null:(V0(c,E,f),ty(c,Ni()),c.callbackNode!=null&&c.callbackNode===v?iy.bind(null,c):null)}function ny(c,f){if(xp())return null;V0(c,f,!0)}function z1(){zh(function(){(zr&6)!==0?Jt(si,Q1):Jm()})}function eg(){return hh===0&&(hh=oi()),hh}function tg(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:ja(""+c)}function ig(c,f){var v=f.ownerDocument.createElement("input");return v.name=f.name,v.value=f.value,c.id&&v.setAttribute("form",c.id),f.parentNode.insertBefore(v,f),c=new FormData(c),v.parentNode.removeChild(v),c}function LA(c,f,v,E,k){if(f==="submit"&&v&&v.stateNode===k){var G=tg((k[fn]||null).action),ye=E.submitter;ye&&(f=(f=ye[fn]||null)?tg(f.formAction):ye.getAttribute("formAction"),f!==null&&(G=f,ye=null));var je=new vl("action","action",null,E,k);c.push({event:je,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(hh!==0){var at=ye?ig(k,ye):new FormData(k);Ai(v,{pending:!0,data:at,method:k.method,action:G},null,at)}}else typeof G=="function"&&(je.preventDefault(),at=ye?ig(k,ye):new FormData(k),Ai(v,{pending:!0,data:at,method:k.method,action:G},G,at))},currentTarget:k}]})}}for(var sA=0;sA<ra.length;sA++){var Fp=ra[sA],ng=Fp.toLowerCase(),H1=Fp[0].toUpperCase()+Fp.slice(1);ss(ng,"on"+H1)}ss(wu,"onAnimationEnd"),ss(wl,"onAnimationIteration"),ss(Bl,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(Cl,"onTransitionRun"),ss(Ec,"onTransitionStart"),ss($o,"onTransitionCancel"),ss(Zo,"onTransitionEnd"),Pa("onMouseEnter",["mouseout","mouseover"]),Pa("onMouseLeave",["mouseout","mouseover"]),Pa("onPointerEnter",["pointerout","pointerover"]),Pa("onPointerLeave",["pointerout","pointerover"]),Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dh));function ry(c,f){f=(f&4)!==0;for(var v=0;v<c.length;v++){var E=c[v],k=E.event;E=E.listeners;e:{var G=void 0;if(f)for(var ye=E.length-1;0<=ye;ye--){var je=E[ye],at=je.instance,Ct=je.currentTarget;if(je=je.listener,at!==G&&k.isPropagationStopped())break e;G=je,k.currentTarget=Ct;try{G(k)}catch(Zt){nh(Zt)}k.currentTarget=null,G=at}else for(ye=0;ye<E.length;ye++){if(je=E[ye],at=je.instance,Ct=je.currentTarget,je=je.listener,at!==G&&k.isPropagationStopped())break e;G=je,k.currentTarget=Ct;try{G(k)}catch(Zt){nh(Zt)}k.currentTarget=null,G=at}}}}function $n(c,f){var v=f[hn];v===void 0&&(v=f[hn]=new Set);var E=c+"__bubble";v.has(E)||(sg(f,c,2,!1),v.add(E))}function _f(c,f,v){var E=0;f&&(E|=4),sg(v,c,E,f)}var PA="_reactListening"+Math.random().toString(36).slice(2);function Np(c){if(!c[PA]){c[PA]=!0,ua.forEach(function(v){v!=="selectionchange"&&(rg.has(v)||_f(v,!1,c),_f(v,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[PA]||(f[PA]=!0,_f("selectionchange",!1,f))}}function sg(c,f,v,E){switch(At(f)){case 2:var k=we;break;case 8:k=Ie;break;default:k=qe}v=k.bind(null,f,v,c),k=void 0,!yl||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(k=!0),E?k!==void 0?c.addEventListener(f,v,{capture:!0,passive:k}):c.addEventListener(f,v,!0):k!==void 0?c.addEventListener(f,v,{passive:k}):c.addEventListener(f,v,!1)}function xf(c,f,v,E,k){var G=E;if((f&1)===0&&(f&2)===0&&E!==null)e:for(;;){if(E===null)return;var ye=E.tag;if(ye===3||ye===4){var je=E.stateNode.containerInfo;if(je===k)break;if(ye===4)for(ye=E.return;ye!==null;){var at=ye.tag;if((at===3||at===4)&&ye.stateNode.containerInfo===k)return;ye=ye.return}for(;je!==null;){if(ye=di(je),ye===null)return;if(at=ye.tag,at===5||at===6||at===26||at===27){E=G=ye;continue e}je=je.parentNode}}E=E.return}xs(function(){var Ct=G,Zt=fs(v),ci=[];e:{var Rt=ro.get(c);if(Rt!==void 0){var Ht=vl,vn=c;switch(c){case"keypress":if(pr(v)===0)break e;case"keydown":case"keyup":Ht=Vc;break;case"focusin":vn="focus",Ht=$r;break;case"focusout":vn="blur",Ht=$r;break;case"beforeblur":case"afterblur":Ht=$r;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ht=Go;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ht=Ko;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ht=zu;break;case wu:case wl:case Bl:Ht=vu;break;case Zo:Ht=Se;break;case"scroll":case"scrollend":Ht=Du;break;case"wheel":Ht=ft;break;case"copy":case"cut":case"paste":Ht=Is;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ht=to;break;case"toggle":case"beforetoggle":Ht=Gt}var An=(f&4)!==0,Br=!An&&(c==="scroll"||c==="scrollend"),St=An?Rt!==null?Rt+"Capture":null:Rt;An=[];for(var vt=Ct,Ut;vt!==null;){var li=vt;if(Ut=li.stateNode,li=li.tag,li!==5&&li!==26&&li!==27||Ut===null||St===null||(li=fr(vt,St),li!=null&&An.push(Fd(vt,li,Ut))),Br)break;vt=vt.return}0<An.length&&(Rt=new Ht(Rt,vn,null,v,Zt),ci.push({event:Rt,listeners:An}))}}if((f&7)===0){e:{if(Rt=c==="mouseover"||c==="pointerover",Ht=c==="mouseout"||c==="pointerout",Rt&&v!==Cn&&(vn=v.relatedTarget||v.fromElement)&&(di(vn)||vn[Dn]))break e;if((Ht||Rt)&&(Rt=Zt.window===Zt?Zt:(Rt=Zt.ownerDocument)?Rt.defaultView||Rt.parentWindow:window,Ht?(vn=v.relatedTarget||v.toElement,Ht=Ct,vn=vn?di(vn):null,vn!==null&&(Br=u(vn),An=vn.tag,vn!==Br||An!==5&&An!==27&&An!==6)&&(vn=null)):(Ht=null,vn=Ct),Ht!==vn)){if(An=Go,li="onMouseLeave",St="onMouseEnter",vt="mouse",(c==="pointerout"||c==="pointerover")&&(An=to,li="onPointerLeave",St="onPointerEnter",vt="pointer"),Br=Ht==null?Rt:nn(Ht),Ut=vn==null?Rt:nn(vn),Rt=new An(li,vt+"leave",Ht,v,Zt),Rt.target=Br,Rt.relatedTarget=Ut,li=null,di(Zt)===Ct&&(An=new An(St,vt+"enter",vn,v,Zt),An.target=Ut,An.relatedTarget=Br,li=An),Br=li,Ht&&vn)t:{for(An=Ht,St=vn,vt=0,Ut=An;Ut;Ut=Qh(Ut))vt++;for(Ut=0,li=St;li;li=Qh(li))Ut++;for(;0<vt-Ut;)An=Qh(An),vt--;for(;0<Ut-vt;)St=Qh(St),Ut--;for(;vt--;){if(An===St||St!==null&&An===St.alternate)break t;An=Qh(An),St=Qh(St)}An=null}else An=null;Ht!==null&&sy(ci,Rt,Ht,An,!1),vn!==null&&Br!==null&&sy(ci,Br,vn,An,!0)}}e:{if(Rt=Ct?nn(Ct):window,Ht=Rt.nodeName&&Rt.nodeName.toLowerCase(),Ht==="select"||Ht==="input"&&Rt.type==="file")var Wi=Kl;else if(wo(Rt))if(qc)Wi=qu;else{Wi=Fh;var Zn=fa}else Ht=Rt.nodeName,!Ht||Ht.toLowerCase()!=="input"||Rt.type!=="checkbox"&&Rt.type!=="radio"?Ct&&Nn(Ct.elementType)&&(Wi=Kl):Wi=Vu;if(Wi&&(Wi=Wi(c,Ct))){Hu(ci,Wi,v,Zt);break e}Zn&&Zn(c,Rt,Ct),c==="focusout"&&Ct&&Rt.type==="number"&&Ct.memoizedProps.value!=null&&ku(Rt,"number",Rt.value)}switch(Zn=Ct?nn(Ct):window,c){case"focusin":(wo(Zn)||Zn.contentEditable==="true")&&(Ua=Zn,So=Ct,Sa=null);break;case"focusout":Sa=So=Ua=null;break;case"mousedown":Eo=!0;break;case"contextmenu":case"mouseup":case"dragend":Eo=!1,ps(ci,v,Zt);break;case"selectionchange":if(Mn)break;case"keydown":case"keyup":ps(ci,v,Zt)}var on;if(Ii)e:{switch(c){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else Zr?Ir(c,v)&&(xn="onCompositionEnd"):c==="keydown"&&v.keyCode===229&&(xn="onCompositionStart");xn&&(bn&&v.locale!=="ko"&&(Zr||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&Zr&&(on=rr()):(Wr=Zt,ta="value"in Wr?Wr.value:Wr.textContent,Zr=!0)),Zn=Oh(Ct,xn),0<Zn.length&&(xn=new Bc(xn,c,null,v,Zt),ci.push({event:xn,listeners:Zn}),on?xn.data=on:(on=ws(v),on!==null&&(xn.data=on)))),(on=ln?na(c,v):Ba(c,v))&&(xn=Oh(Ct,"onBeforeInput"),0<xn.length&&(Zn=new Bc("onBeforeInput","beforeinput",null,v,Zt),ci.push({event:Zn,listeners:xn}),Zn.data=on)),LA(ci,c,Ct,v,Zt)}ry(ci,f)})}function Fd(c,f,v){return{instance:c,listener:f,currentTarget:v}}function Oh(c,f){for(var v=f+"Capture",E=[];c!==null;){var k=c,G=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||G===null||(k=fr(c,v),k!=null&&E.unshift(Fd(c,k,G)),k=fr(c,f),k!=null&&E.push(Fd(c,k,G))),c.tag===3)return E;c=c.return}return[]}function Qh(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function sy(c,f,v,E,k){for(var G=f._reactName,ye=[];v!==null&&v!==E;){var je=v,at=je.alternate,Ct=je.stateNode;if(je=je.tag,at!==null&&at===E)break;je!==5&&je!==26&&je!==27||Ct===null||(at=Ct,k?(Ct=fr(v,G),Ct!=null&&ye.unshift(Fd(v,Ct,at))):k||(Ct=fr(v,G),Ct!=null&&ye.push(Fd(v,Ct,at)))),v=v.return}ye.length!==0&&c.push({event:f,listeners:ye})}var V1=/\r\n?/g,q1=/\u0000|\uFFFD/g;function ay(c){return(typeof c=="string"?c:""+c).replace(V1,`
`).replace(q1,"")}function oy(c,f){return f=ay(f),ay(c)===f}function Nd(){}function hr(c,f,v,E,k,G){switch(v){case"children":typeof E=="string"?f==="body"||f==="textarea"&&E===""||Vo(c,E):(typeof E=="number"||typeof E=="bigint")&&f!=="body"&&Vo(c,""+E);break;case"className":Gs(c,"class",E);break;case"tabIndex":Gs(c,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(c,v,E);break;case"style":ea(c,E,G);break;case"data":if(f!=="object"){Gs(c,"data",E);break}case"src":case"href":if(E===""&&(f!=="a"||v!=="href")){c.removeAttribute(v);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){c.removeAttribute(v);break}E=ja(""+E),c.setAttribute(v,E);break;case"action":case"formAction":if(typeof E=="function"){c.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof G=="function"&&(v==="formAction"?(f!=="input"&&hr(c,f,"name",k.name,k,null),hr(c,f,"formEncType",k.formEncType,k,null),hr(c,f,"formMethod",k.formMethod,k,null),hr(c,f,"formTarget",k.formTarget,k,null)):(hr(c,f,"encType",k.encType,k,null),hr(c,f,"method",k.method,k,null),hr(c,f,"target",k.target,k,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){c.removeAttribute(v);break}E=ja(""+E),c.setAttribute(v,E);break;case"onClick":E!=null&&(c.onclick=Nd);break;case"onScroll":E!=null&&$n("scroll",c);break;case"onScrollEnd":E!=null&&$n("scrollend",c);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(v=E.__html,v!=null){if(k.children!=null)throw Error(n(60));c.innerHTML=v}}break;case"multiple":c.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":c.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){c.removeAttribute("xlink:href");break}v=ja(""+E),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?c.setAttribute(v,""+E):c.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?c.setAttribute(v,""):c.removeAttribute(v);break;case"capture":case"download":E===!0?c.setAttribute(v,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?c.setAttribute(v,E):c.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?c.setAttribute(v,E):c.removeAttribute(v);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?c.removeAttribute(v):c.setAttribute(v,E);break;case"popover":$n("beforetoggle",c),$n("toggle",c),xr(c,"popover",E);break;case"xlinkActuate":qn(c,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":qn(c,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":qn(c,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":qn(c,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":qn(c,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":qn(c,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":qn(c,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":qn(c,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":qn(c,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":xr(c,"is",E);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=Ja.get(v)||v,xr(c,v,E))}}function Mp(c,f,v,E,k,G){switch(v){case"style":ea(c,E,G);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(v=E.__html,v!=null){if(k.children!=null)throw Error(n(60));c.innerHTML=v}}break;case"children":typeof E=="string"?Vo(c,E):(typeof E=="number"||typeof E=="bigint")&&Vo(c,""+E);break;case"onScroll":E!=null&&$n("scroll",c);break;case"onScrollEnd":E!=null&&$n("scrollend",c);break;case"onClick":E!=null&&(c.onclick=Nd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pn.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(k=v.endsWith("Capture"),f=v.slice(2,k?v.length-7:void 0),G=c[fn]||null,G=G!=null?G[v]:null,typeof G=="function"&&c.removeEventListener(f,G,k),typeof E=="function")){typeof G!="function"&&G!==null&&(v in c?c[v]=null:c.hasAttribute(v)&&c.removeAttribute(v)),c.addEventListener(f,E,k);break e}v in c?c[v]=E:E===!0?c.setAttribute(v,""):xr(c,v,E)}}}function fo(c,f,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$n("error",c),$n("load",c);var E=!1,k=!1,G;for(G in v)if(v.hasOwnProperty(G)){var ye=v[G];if(ye!=null)switch(G){case"src":E=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:hr(c,f,G,ye,v,null)}}k&&hr(c,f,"srcSet",v.srcSet,v,null),E&&hr(c,f,"src",v.src,v,null);return;case"input":$n("invalid",c);var je=G=ye=k=null,at=null,Ct=null;for(E in v)if(v.hasOwnProperty(E)){var Zt=v[E];if(Zt!=null)switch(E){case"name":k=Zt;break;case"type":ye=Zt;break;case"checked":at=Zt;break;case"defaultChecked":Ct=Zt;break;case"value":G=Zt;break;case"defaultValue":je=Zt;break;case"children":case"dangerouslySetInnerHTML":if(Zt!=null)throw Error(n(137,f));break;default:hr(c,f,E,Zt,v,null)}}yu(c,G,je,at,Ct,ye,k,!1),zc(c);return;case"select":$n("invalid",c),E=ye=G=null;for(k in v)if(v.hasOwnProperty(k)&&(je=v[k],je!=null))switch(k){case"value":G=je;break;case"defaultValue":ye=je;break;case"multiple":E=je;default:hr(c,f,k,je,v,null)}f=G,v=ye,c.multiple=!!E,f!=null?ka(c,!!E,f,!1):v!=null&&ka(c,!!E,v,!0);return;case"textarea":$n("invalid",c),G=k=E=null;for(ye in v)if(v.hasOwnProperty(ye)&&(je=v[ye],je!=null))switch(ye){case"value":E=je;break;case"defaultValue":k=je;break;case"children":G=je;break;case"dangerouslySetInnerHTML":if(je!=null)throw Error(n(91));break;default:hr(c,f,ye,je,v,null)}yA(c,E,k,G),zc(c);return;case"option":for(at in v)if(v.hasOwnProperty(at)&&(E=v[at],E!=null))switch(at){case"selected":c.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:hr(c,f,at,E,v,null)}return;case"dialog":$n("beforetoggle",c),$n("toggle",c),$n("cancel",c),$n("close",c);break;case"iframe":case"object":$n("load",c);break;case"video":case"audio":for(E=0;E<dh.length;E++)$n(dh[E],c);break;case"image":$n("error",c),$n("load",c);break;case"details":$n("toggle",c);break;case"embed":case"source":case"link":$n("error",c),$n("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ct in v)if(v.hasOwnProperty(Ct)&&(E=v[Ct],E!=null))switch(Ct){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:hr(c,f,Ct,E,v,null)}return;default:if(Nn(f)){for(Zt in v)v.hasOwnProperty(Zt)&&(E=v[Zt],E!==void 0&&Mp(c,f,Zt,E,v,void 0));return}}for(je in v)v.hasOwnProperty(je)&&(E=v[je],E!=null&&hr(c,f,je,E,v,null))}function ly(c,f,v,E){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,G=null,ye=null,je=null,at=null,Ct=null,Zt=null;for(Ht in v){var ci=v[Ht];if(v.hasOwnProperty(Ht)&&ci!=null)switch(Ht){case"checked":break;case"value":break;case"defaultValue":at=ci;default:E.hasOwnProperty(Ht)||hr(c,f,Ht,null,E,ci)}}for(var Rt in E){var Ht=E[Rt];if(ci=v[Rt],E.hasOwnProperty(Rt)&&(Ht!=null||ci!=null))switch(Rt){case"type":G=Ht;break;case"name":k=Ht;break;case"checked":Ct=Ht;break;case"defaultChecked":Zt=Ht;break;case"value":ye=Ht;break;case"defaultValue":je=Ht;break;case"children":case"dangerouslySetInnerHTML":if(Ht!=null)throw Error(n(137,f));break;default:Ht!==ci&&hr(c,f,Rt,Ht,E,ci)}}vo(c,ye,je,at,Ct,Zt,G,k);return;case"select":Ht=ye=je=Rt=null;for(G in v)if(at=v[G],v.hasOwnProperty(G)&&at!=null)switch(G){case"value":break;case"multiple":Ht=at;default:E.hasOwnProperty(G)||hr(c,f,G,null,E,at)}for(k in E)if(G=E[k],at=v[k],E.hasOwnProperty(k)&&(G!=null||at!=null))switch(k){case"value":Rt=G;break;case"defaultValue":je=G;break;case"multiple":ye=G;default:G!==at&&hr(c,f,k,G,E,at)}f=je,v=ye,E=Ht,Rt!=null?ka(c,!!v,Rt,!1):!!E!=!!v&&(f!=null?ka(c,!!v,f,!0):ka(c,!!v,v?[]:"",!1));return;case"textarea":Ht=Rt=null;for(je in v)if(k=v[je],v.hasOwnProperty(je)&&k!=null&&!E.hasOwnProperty(je))switch(je){case"value":break;case"children":break;default:hr(c,f,je,null,E,k)}for(ye in E)if(k=E[ye],G=v[ye],E.hasOwnProperty(ye)&&(k!=null||G!=null))switch(ye){case"value":Rt=k;break;case"defaultValue":Ht=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(n(91));break;default:k!==G&&hr(c,f,ye,k,E,G)}ju(c,Rt,Ht);return;case"option":for(var vn in v)if(Rt=v[vn],v.hasOwnProperty(vn)&&Rt!=null&&!E.hasOwnProperty(vn))switch(vn){case"selected":c.selected=!1;break;default:hr(c,f,vn,null,E,Rt)}for(at in E)if(Rt=E[at],Ht=v[at],E.hasOwnProperty(at)&&Rt!==Ht&&(Rt!=null||Ht!=null))switch(at){case"selected":c.selected=Rt&&typeof Rt!="function"&&typeof Rt!="symbol";break;default:hr(c,f,at,Rt,E,Ht)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var An in v)Rt=v[An],v.hasOwnProperty(An)&&Rt!=null&&!E.hasOwnProperty(An)&&hr(c,f,An,null,E,Rt);for(Ct in E)if(Rt=E[Ct],Ht=v[Ct],E.hasOwnProperty(Ct)&&Rt!==Ht&&(Rt!=null||Ht!=null))switch(Ct){case"children":case"dangerouslySetInnerHTML":if(Rt!=null)throw Error(n(137,f));break;default:hr(c,f,Ct,Rt,E,Ht)}return;default:if(Nn(f)){for(var Br in v)Rt=v[Br],v.hasOwnProperty(Br)&&Rt!==void 0&&!E.hasOwnProperty(Br)&&Mp(c,f,Br,void 0,E,Rt);for(Zt in E)Rt=E[Zt],Ht=v[Zt],!E.hasOwnProperty(Zt)||Rt===Ht||Rt===void 0&&Ht===void 0||Mp(c,f,Zt,Rt,E,Ht);return}}for(var St in v)Rt=v[St],v.hasOwnProperty(St)&&Rt!=null&&!E.hasOwnProperty(St)&&hr(c,f,St,null,E,Rt);for(ci in E)Rt=E[ci],Ht=v[ci],!E.hasOwnProperty(ci)||Rt===Ht||Rt==null&&Ht==null||hr(c,f,ci,Rt,E,Ht)}var Ip=null,Lp=null;function Md(c){return c.nodeType===9?c:c.ownerDocument}function ag(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Id(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function Pp(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var bf=null;function cy(){var c=window.event;return c&&c.type==="popstate"?c===bf?!1:(bf=c,!0):(bf=null,!1)}var ac=typeof setTimeout=="function"?setTimeout:void 0,Ld=typeof clearTimeout=="function"?clearTimeout:void 0,Pd=typeof Promise=="function"?Promise:void 0,zh=typeof queueMicrotask=="function"?queueMicrotask:typeof Pd<"u"?function(c){return Pd.resolve(null).then(c).catch(uy)}:ac;function uy(c){setTimeout(function(){throw c})}function kA(c){return c==="head"}function og(c,f){var v=f,E=0,k=0;do{var G=v.nextSibling;if(c.removeChild(v),G&&G.nodeType===8)if(v=G.data,v==="/$"){if(0<E&&8>E){v=E;var ye=c.ownerDocument;if(v&1&&wf(ye.documentElement),v&2&&wf(ye.body),v&4)for(v=ye.head,wf(v),ye=v.firstChild;ye;){var je=ye.nextSibling,at=ye.nodeName;ye[jr]||at==="SCRIPT"||at==="STYLE"||at==="LINK"&&ye.rel.toLowerCase()==="stylesheet"||v.removeChild(ye),ye=je}}if(k===0){c.removeChild(G),jo(f);return}k--}else v==="$"||v==="$?"||v==="$!"?k++:E=v.charCodeAt(0)-48;else E=0;v=G}while(v);jo(f)}function kp(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var v=f;switch(f=f.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":kp(v),or(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}c.removeChild(v)}}function G1(c,f,v,E){for(;c.nodeType===1;){var k=v;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!E&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(E){if(!c[jr])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(G=c.getAttribute("rel"),G==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(G!==k.rel||c.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||c.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||c.getAttribute("title")!==(k.title==null?null:k.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(G=c.getAttribute("src"),(G!==(k.src==null?null:k.src)||c.getAttribute("type")!==(k.type==null?null:k.type)||c.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&G&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var G=k.name==null?null:""+k.name;if(k.type==="hidden"&&c.getAttribute("name")===G)return c}else return c;if(c=cu(c.nextSibling),c===null)break}return null}function Ay(c,f,v){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!v||(c=cu(c.nextSibling),c===null))return null;return c}function aA(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function hy(c,f){var v=c.ownerDocument;if(c.data!=="$?"||v.readyState==="complete")f();else{var E=function(){f(),v.removeEventListener("DOMContentLoaded",E)};v.addEventListener("DOMContentLoaded",E),c._reactRetry=E}}function cu(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var jp=null;function lg(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var v=c.data;if(v==="$"||v==="$!"||v==="$?"){if(f===0)return c;f--}else v==="/$"&&f++}c=c.previousSibling}return null}function dy(c,f,v){switch(f=Md(v),c){case"html":if(c=f.documentElement,!c)throw Error(n(452));return c;case"head":if(c=f.head,!c)throw Error(n(453));return c;case"body":if(c=f.body,!c)throw Error(n(454));return c;default:throw Error(n(451))}}function wf(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);or(c)}var Rc=new Map,cg=new Set;function Hh(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var oA=fe.d;fe.d={f:Up,r:Dp,D:K1,C:W1,L:kd,m:po,X:py,S:ug,M:my};function Up(){var c=oA.f(),f=gp();return c||f}function Dp(c){var f=tn(c);f!==null&&f.tag===5&&f.type==="form"?ki(f):oA.r(c)}var jA=typeof document>"u"?null:document;function fy(c,f,v){var E=jA;if(E&&typeof f=="string"&&f){var k=Mr(f);k='link[rel="'+c+'"][href="'+k+'"]',typeof v=="string"&&(k+='[crossorigin="'+v+'"]'),cg.has(k)||(cg.add(k),c={rel:c,crossOrigin:v,href:f},E.querySelector(k)===null&&(f=E.createElement("link"),fo(f,"link",c),Hn(f),E.head.appendChild(f)))}}function K1(c){oA.D(c),fy("dns-prefetch",c,null)}function W1(c,f){oA.C(c,f),fy("preconnect",c,f)}function kd(c,f,v){oA.L(c,f,v);var E=jA;if(E&&c&&f){var k='link[rel="preload"][as="'+Mr(f)+'"]';f==="image"&&v&&v.imageSrcSet?(k+='[imagesrcset="'+Mr(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(k+='[imagesizes="'+Mr(v.imageSizes)+'"]')):k+='[href="'+Mr(c)+'"]';var G=k;switch(f){case"style":G=jd(c);break;case"script":G=Vh(c)}Rc.has(G)||(c=B({rel:"preload",href:f==="image"&&v&&v.imageSrcSet?void 0:c,as:f},v),Rc.set(G,c),E.querySelector(k)!==null||f==="style"&&E.querySelector(Ud(G))||f==="script"&&E.querySelector(qh(G))||(f=E.createElement("link"),fo(f,"link",c),Hn(f),E.head.appendChild(f)))}}function po(c,f){oA.m(c,f);var v=jA;if(v&&c){var E=f&&typeof f.as=="string"?f.as:"script",k='link[rel="modulepreload"][as="'+Mr(E)+'"][href="'+Mr(c)+'"]',G=k;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":G=Vh(c)}if(!Rc.has(G)&&(c=B({rel:"modulepreload",href:c},f),Rc.set(G,c),v.querySelector(k)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(qh(G)))return}E=v.createElement("link"),fo(E,"link",c),Hn(E),v.head.appendChild(E)}}}function ug(c,f,v){oA.S(c,f,v);var E=jA;if(E&&c){var k=_r(E).hoistableStyles,G=jd(c);f=f||"default";var ye=k.get(G);if(!ye){var je={loading:0,preload:null};if(ye=E.querySelector(Ud(G)))je.loading=5;else{c=B({rel:"stylesheet",href:c,"data-precedence":f},v),(v=Rc.get(G))&&Gh(c,v);var at=ye=E.createElement("link");Hn(at),fo(at,"link",c),at._p=new Promise(function(Ct,Zt){at.onload=Ct,at.onerror=Zt}),at.addEventListener("load",function(){je.loading|=1}),at.addEventListener("error",function(){je.loading|=2}),je.loading|=4,Bf(ye,f,E)}ye={type:"stylesheet",instance:ye,count:1,state:je},k.set(G,ye)}}}function py(c,f){oA.X(c,f);var v=jA;if(v&&c){var E=_r(v).hoistableScripts,k=Vh(c),G=E.get(k);G||(G=v.querySelector(qh(k)),G||(c=B({src:c,async:!0},f),(f=Rc.get(k))&&Cf(c,f),G=v.createElement("script"),Hn(G),fo(G,"link",c),v.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},E.set(k,G))}}function my(c,f){oA.M(c,f);var v=jA;if(v&&c){var E=_r(v).hoistableScripts,k=Vh(c),G=E.get(k);G||(G=v.querySelector(qh(k)),G||(c=B({src:c,async:!0,type:"module"},f),(f=Rc.get(k))&&Cf(c,f),G=v.createElement("script"),Hn(G),fo(G,"link",c),v.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},E.set(k,G))}}function Rp(c,f,v,E){var k=(k=Ke.current)?Hh(k):null;if(!k)throw Error(n(446));switch(c){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(f=jd(v.href),v=_r(k).hoistableStyles,E=v.get(f),E||(E={type:"style",instance:null,count:0,state:null},v.set(f,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){c=jd(v.href);var G=_r(k).hoistableStyles,ye=G.get(c);if(ye||(k=k.ownerDocument||k,ye={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},G.set(c,ye),(G=k.querySelector(Ud(c)))&&!G._p&&(ye.instance=G,ye.state.loading=5),Rc.has(c)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},Rc.set(c,v),G||$1(k,c,v,ye.state))),f&&E===null)throw Error(n(528,""));return ye}if(f&&E!==null)throw Error(n(529,""));return null;case"script":return f=v.async,v=v.src,typeof v=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Vh(v),v=_r(k).hoistableScripts,E=v.get(f),E||(E={type:"script",instance:null,count:0,state:null},v.set(f,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,c))}}function jd(c){return'href="'+Mr(c)+'"'}function Ud(c){return'link[rel="stylesheet"]['+c+"]"}function Ag(c){return B({},c,{"data-precedence":c.precedence,precedence:null})}function $1(c,f,v,E){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?E.loading=1:(f=c.createElement("link"),E.preload=f,f.addEventListener("load",function(){return E.loading|=1}),f.addEventListener("error",function(){return E.loading|=2}),fo(f,"link",v),Hn(f),c.head.appendChild(f))}function Vh(c){return'[src="'+Mr(c)+'"]'}function qh(c){return"script[async]"+c}function Op(c,f,v){if(f.count++,f.instance===null)switch(f.type){case"style":var E=c.querySelector('style[data-href~="'+Mr(v.href)+'"]');if(E)return f.instance=E,Hn(E),E;var k=B({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return E=(c.ownerDocument||c).createElement("style"),Hn(E),fo(E,"style",k),Bf(E,v.precedence,c),f.instance=E;case"stylesheet":k=jd(v.href);var G=c.querySelector(Ud(k));if(G)return f.state.loading|=4,f.instance=G,Hn(G),G;E=Ag(v),(k=Rc.get(k))&&Gh(E,k),G=(c.ownerDocument||c).createElement("link"),Hn(G);var ye=G;return ye._p=new Promise(function(je,at){ye.onload=je,ye.onerror=at}),fo(G,"link",E),f.state.loading|=4,Bf(G,v.precedence,c),f.instance=G;case"script":return G=Vh(v.src),(k=c.querySelector(qh(G)))?(f.instance=k,Hn(k),k):(E=v,(k=Rc.get(G))&&(E=B({},v),Cf(E,k)),c=c.ownerDocument||c,k=c.createElement("script"),Hn(k),fo(k,"link",E),c.head.appendChild(k),f.instance=k);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(E=f.instance,f.state.loading|=4,Bf(E,v.precedence,c));return f.instance}function Bf(c,f,v){for(var E=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=E.length?E[E.length-1]:null,G=k,ye=0;ye<E.length;ye++){var je=E[ye];if(je.dataset.precedence===f)G=je;else if(G!==k)break}G?G.parentNode.insertBefore(c,G.nextSibling):(f=v.nodeType===9?v.head:v,f.insertBefore(c,f.firstChild))}function Gh(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function Cf(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var Sf=null;function Qp(c,f,v){if(Sf===null){var E=new Map,k=Sf=new Map;k.set(v,E)}else k=Sf,E=k.get(v),E||(E=new Map,k.set(v,E));if(E.has(c))return E;for(E.set(c,null),v=v.getElementsByTagName(c),k=0;k<v.length;k++){var G=v[k];if(!(G[jr]||G[Fn]||c==="link"&&G.getAttribute("rel")==="stylesheet")&&G.namespaceURI!=="http://www.w3.org/2000/svg"){var ye=G.getAttribute(f)||"";ye=c+ye;var je=E.get(ye);je?je.push(G):E.set(ye,[G])}}return E}function Ef(c,f,v){c=c.ownerDocument||c,c.head.insertBefore(v,f==="title"?c.querySelector("head > title"):null)}function Tf(c,f,v){if(v===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function zp(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Kh=null;function hg(){}function Z1(c,f,v){if(Kh===null)throw Error(n(475));var E=Kh;if(f.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var k=jd(v.href),G=c.querySelector(Ud(k));if(G){c=G._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(E.count++,E=s.bind(E),c.then(E,E)),f.state.loading|=4,f.instance=G,Hn(G);return}G=c.ownerDocument||c,v=Ag(v),(k=Rc.get(k))&&Gh(v,k),G=G.createElement("link"),Hn(G);var ye=G;ye._p=new Promise(function(je,at){ye.onload=je,ye.onerror=at}),fo(G,"link",v),f.instance=G}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(E.count++,f=s.bind(E),c.addEventListener("load",f),c.addEventListener("error",f))}}function h(){if(Kh===null)throw Error(n(475));var c=Kh;return c.stylesheets&&c.count===0&&m(c,c.stylesheets),0<c.count?function(f){var v=setTimeout(function(){if(c.stylesheets&&m(c,c.stylesheets),c.unsuspend){var E=c.unsuspend;c.unsuspend=null,E()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(v)}}:null}function s(){if(this.count--,this.count===0){if(this.stylesheets)m(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var l=null;function m(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,l=new Map,f.forEach(_,c),l=null,s.call(c))}function _(c,f){if(!(f.state.loading&4)){var v=l.get(c);if(v)var E=v.get(null);else{v=new Map,l.set(c,v);for(var k=c.querySelectorAll("link[data-precedence],style[data-precedence]"),G=0;G<k.length;G++){var ye=k[G];(ye.nodeName==="LINK"||ye.getAttribute("media")!=="not all")&&(v.set(ye.dataset.precedence,ye),E=ye)}E&&v.set(null,E)}k=f.instance,ye=k.getAttribute("data-precedence"),G=v.get(ye)||E,G===E&&v.set(null,k),v.set(ye,k),this.count++,E=s.bind(this),k.addEventListener("load",E),k.addEventListener("error",E),G?G.parentNode.insertBefore(k,G.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(k,c.firstChild)),f.state.loading|=4}}var C={$$typeof:W,Provider:null,Consumer:null,_currentValue:Ue,_currentValue2:Ue,_threadCount:0};function T(c,f,v,E,k,G,ye,je){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.hiddenUpdates=Bi(null),this.identifierPrefix=E,this.onUncaughtError=k,this.onCaughtError=G,this.onRecoverableError=ye,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=je,this.incompleteTransitions=new Map}function L(c,f,v,E,k,G,ye,je,at,Ct,Zt,ci){return c=new T(c,f,v,ye,je,at,Ct,ci),f=1,G===!0&&(f|=24),G=$s(3,null,null,f),c.current=G,G.stateNode=c,f=JA(),f.refCount++,c.pooledCache=f,f.refCount++,G.memoizedState={element:E,isDehydrated:v,cache:f},ct(G),c}function D(c){return c?(c=ms,c):ms}function q(c,f,v,E,k,G){k=D(k),E.context===null?E.context=k:E.pendingContext=k,E=Xt(f),E.payload={element:v},G=G===void 0?null:G,G!==null&&(E.callback=G),v=ri(c,E,f),v!==null&&(sc(v,c,f),ii(v,c,f))}function $(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<f?v:f}}function ie(c,f){$(c,f),(c=c.alternate)&&$(c,f)}function he(c){if(c.tag===13){var f=ao(c,67108864);f!==null&&sc(f,c,67108864),ie(c,67108864)}}var ve=!0;function we(c,f,v,E){var k=ue.T;ue.T=null;var G=fe.p;try{fe.p=2,qe(c,f,v,E)}finally{fe.p=G,ue.T=k}}function Ie(c,f,v,E){var k=ue.T;ue.T=null;var G=fe.p;try{fe.p=8,qe(c,f,v,E)}finally{fe.p=G,ue.T=k}}function qe(c,f,v,E){if(ve){var k=Xe(E);if(k===null)xf(c,f,E,xt,v),_i(c,E);else if(un(k,c,f,v,E))E.stopPropagation();else if(_i(c,E),f&4&&-1<vi.indexOf(c)){for(;k!==null;){var G=tn(k);if(G!==null)switch(G.tag){case 3:if(G=G.stateNode,G.current.memoizedState.isDehydrated){var ye=ut(G.pendingLanes);if(ye!==0){var je=G;for(je.pendingLanes|=2,je.entangledLanes|=2;ye;){var at=1<<31-et(ye);je.entanglements[1]|=at,ye&=~at}lu(G),(zr&6)===0&&(mf=Ni()+500,Rh(0))}}break;case 13:je=ao(G,2),je!==null&&sc(je,G,2),gp(),ie(G,2)}if(G=Xe(E),G===null&&xf(c,f,E,xt,v),G===k)break;k=G}k!==null&&E.stopPropagation()}else xf(c,f,E,null,v)}}function Xe(c){return c=fs(c),rt(c)}var xt=null;function rt(c){if(xt=null,c=di(c),c!==null){var f=u(c);if(f===null)c=null;else{var v=f.tag;if(v===13){if(c=A(f),c!==null)return c;c=null}else if(v===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return xt=c,null}function At(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yi()){case si:return 2;case Mt:return 8;case ei:case ai:return 32;case Ei:return 268435456;default:return 32}default:return 32}}var kt=!1,Ot=null,ni=null,mi=null,pi=new Map,gi=new Map,Di=[],vi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _i(c,f){switch(c){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":pi.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":gi.delete(f.pointerId)}}function Wt(c,f,v,E,k,G){return c===null||c.nativeEvent!==G?(c={blockedOn:f,domEventName:v,eventSystemFlags:E,nativeEvent:G,targetContainers:[k]},f!==null&&(f=tn(f),f!==null&&he(f)),c):(c.eventSystemFlags|=E,f=c.targetContainers,k!==null&&f.indexOf(k)===-1&&f.push(k),c)}function un(c,f,v,E,k){switch(f){case"focusin":return Ot=Wt(Ot,c,f,v,E,k),!0;case"dragenter":return ni=Wt(ni,c,f,v,E,k),!0;case"mouseover":return mi=Wt(mi,c,f,v,E,k),!0;case"pointerover":var G=k.pointerId;return pi.set(G,Wt(pi.get(G)||null,c,f,v,E,k)),!0;case"gotpointercapture":return G=k.pointerId,gi.set(G,Wt(gi.get(G)||null,c,f,v,E,k)),!0}return!1}function mn(c){var f=di(c.target);if(f!==null){var v=u(f);if(v!==null){if(f=v.tag,f===13){if(f=A(v),f!==null){c.blockedOn=f,Er(c.priority,function(){if(v.tag===13){var E=hl();E=Mi(E);var k=ao(v,E);k!==null&&sc(k,v,E),ie(v,E)}});return}}else if(f===3&&v.stateNode.current.memoizedState.isDehydrated){c.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}c.blockedOn=null}function qi(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var v=Xe(c.nativeEvent);if(v===null){v=c.nativeEvent;var E=new v.constructor(v.type,v);Cn=E,v.target.dispatchEvent(E),Cn=null}else return f=tn(v),f!==null&&he(f),c.blockedOn=v,!1;f.shift()}return!0}function Ri(c,f,v){qi(c)&&v.delete(f)}function zn(){kt=!1,Ot!==null&&qi(Ot)&&(Ot=null),ni!==null&&qi(ni)&&(ni=null),mi!==null&&qi(mi)&&(mi=null),pi.forEach(Ri),gi.forEach(Ri)}function ts(c,f){c.blockedOn===f&&(c.blockedOn=null,kt||(kt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zn)))}var Hs=null;function Va(c){Hs!==c&&(Hs=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hs===c&&(Hs=null);for(var f=0;f<c.length;f+=3){var v=c[f],E=c[f+1],k=c[f+2];if(typeof E!="function"){if(rt(E||v)===null)continue;break}var G=tn(v);G!==null&&(c.splice(f,3),f-=3,Ai(G,{pending:!0,data:k,method:v.method,action:E},E,k))}}))}function jo(c){function f(at){return ts(at,c)}Ot!==null&&ts(Ot,c),ni!==null&&ts(ni,c),mi!==null&&ts(mi,c),pi.forEach(f),gi.forEach(f);for(var v=0;v<Di.length;v++){var E=Di[v];E.blockedOn===c&&(E.blockedOn=null)}for(;0<Di.length&&(v=Di[0],v.blockedOn===null);)mn(v),v.blockedOn===null&&Di.shift();if(v=(c.ownerDocument||c).$$reactFormReplay,v!=null)for(E=0;E<v.length;E+=3){var k=v[E],G=v[E+1],ye=k[fn]||null;if(typeof G=="function")ye||Va(v);else if(ye){var je=null;if(G&&G.hasAttribute("formAction")){if(k=G,ye=G[fn]||null)je=ye.formAction;else if(rt(k)!==null)continue}else je=ye.action;typeof je=="function"?v[E+1]=je:(v.splice(E,3),E-=3),Va(v)}}}function Uo(c){this._internalRoot=c}aa.prototype.render=Uo.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(n(409));var v=f.current,E=hl();q(v,E,c,f,null,null)},aa.prototype.unmount=Uo.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;q(c.current,2,null,c,null,null),gp(),f[Dn]=null}};function aa(c){this._internalRoot=c}aa.prototype.unstable_scheduleHydration=function(c){if(c){var f=vr();c={blockedOn:null,target:c,priority:f};for(var v=0;v<Di.length&&f!==0&&f<Di[v].priority;v++);Di.splice(v,0,c),v===0&&mn(c)}};var cs=e.version;if(cs!=="19.1.1")throw Error(n(527,cs,"19.1.1"));fe.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(n(188)):(c=Object.keys(c).join(","),Error(n(268,c)));return c=g(f),c=c!==null?b(c):null,c=c===null?null:c.stateNode,c};var Ia={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oa.isDisabled&&oa.supportsFiber)try{wi=oa.inject(Ia),Gi=oa}catch{}}return fg.createRoot=function(c,f){if(!o(c))throw Error(n(299));var v=!1,E="",k=md,G=rh,ye=Sm,je=null;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onUncaughtError!==void 0&&(k=f.onUncaughtError),f.onCaughtError!==void 0&&(G=f.onCaughtError),f.onRecoverableError!==void 0&&(ye=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(je=f.unstable_transitionCallbacks)),f=L(c,1,!1,null,null,v,E,k,G,ye,je,null),c[Dn]=f.current,Np(c),new Uo(f)},fg.hydrateRoot=function(c,f,v){if(!o(c))throw Error(n(299));var E=!1,k="",G=md,ye=rh,je=Sm,at=null,Ct=null;return v!=null&&(v.unstable_strictMode===!0&&(E=!0),v.identifierPrefix!==void 0&&(k=v.identifierPrefix),v.onUncaughtError!==void 0&&(G=v.onUncaughtError),v.onCaughtError!==void 0&&(ye=v.onCaughtError),v.onRecoverableError!==void 0&&(je=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(at=v.unstable_transitionCallbacks),v.formState!==void 0&&(Ct=v.formState)),f=L(c,1,!0,f,v??null,E,k,G,ye,je,at,Ct),f.context=D(null),v=f.current,E=hl(),E=Mi(E),k=Xt(E),k.callback=null,ri(v,k,E),v=E,f.current.lanes=v,Ui(f,v),lu(f),c[Dn]=f.current,Np(c),new aa(f)},fg.version="19.1.1",fg}var B2;function oE(){if(B2)return e_.exports;B2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),e_.exports=aE(),e_.exports}var lE=oE();const cE=Xv(lE);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var C2="popstate";function uE(t={}){function e(n,o){let{pathname:u,search:A,hash:a}=n.location;return rx("",{pathname:u,search:A,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(n,o){return typeof o=="string"?o:n0(o)}return hE(e,i,null,t)}function ca(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pA(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AE(){return Math.random().toString(36).substring(2,10)}function S2(t,e){return{usr:t.state,key:t.key,idx:e}}function rx(t,e,i=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?mm(e):e,state:i,key:e&&e.key||n||AE()}}function n0({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function mm(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function hE(t,e,i,n={}){let{window:o=document.defaultView,v5Compat:u=!1}=n,A=o.history,a="POP",g=null,b=B();b==null&&(b=0,A.replaceState({...A.state,idx:b},""));function B(){return(A.state||{idx:null}).idx}function I(){a="POP";let H=B(),j=H==null?null:H-b;b=H,g&&g({action:a,location:R.location,delta:j})}function P(H,j){a="PUSH";let V=rx(R.location,H,j);b=B()+1;let W=S2(V,b),ne=R.createHref(V);try{A.pushState(W,"",ne)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;o.location.assign(ne)}u&&g&&g({action:a,location:R.location,delta:1})}function F(H,j){a="REPLACE";let V=rx(R.location,H,j);b=B();let W=S2(V,b),ne=R.createHref(V);A.replaceState(W,"",ne),u&&g&&g({action:a,location:R.location,delta:0})}function Q(H){return dE(H)}let R={get action(){return a},get location(){return t(o,A)},listen(H){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(C2,I),g=H,()=>{o.removeEventListener(C2,I),g=null}},createHref(H){return e(o,H)},createURL:Q,encodeLocation(H){let j=Q(H);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:P,replace:F,go(H){return A.go(H)}};return R}function dE(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),ca(i,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:n0(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=i+n),new URL(n,i)}function XB(t,e,i="/"){return fE(t,e,i,!1)}function fE(t,e,i,n){let o=typeof e=="string"?mm(e):e,u=ad(o.pathname||"/",i);if(u==null)return null;let A=YB(t);pE(A);let a=null;for(let g=0;a==null&&g<A.length;++g){let b=SE(u);a=BE(A[g],b,n)}return a}function YB(t,e=[],i=[],n=""){let o=(u,A,a)=>{let g={relativePath:a===void 0?u.path||"":a,caseSensitive:u.caseSensitive===!0,childrenIndex:A,route:u};g.relativePath.startsWith("/")&&(ca(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length));let b=rd([n,g.relativePath]),B=i.concat(g);u.children&&u.children.length>0&&(ca(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),YB(u.children,e,B,b)),!(u.path==null&&!u.index)&&e.push({path:b,score:bE(b,u.index),routesMeta:B})};return t.forEach((u,A)=>{if(u.path===""||!u.path?.includes("?"))o(u,A);else for(let a of JB(u.path))o(u,A,a)}),e}function JB(t){let e=t.split("/");if(e.length===0)return[];let[i,...n]=e,o=i.endsWith("?"),u=i.replace(/\?$/,"");if(n.length===0)return o?[u,""]:[u];let A=JB(n.join("/")),a=[];return a.push(...A.map(g=>g===""?u:[u,g].join("/"))),o&&a.push(...A),a.map(g=>t.startsWith("/")&&g===""?"/":g)}function pE(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:wE(e.routesMeta.map(n=>n.childrenIndex),i.routesMeta.map(n=>n.childrenIndex)))}var mE=/^:[\w-]+$/,gE=3,yE=2,vE=1,_E=10,xE=-2,E2=t=>t==="*";function bE(t,e){let i=t.split("/"),n=i.length;return i.some(E2)&&(n+=xE),e&&(n+=yE),i.filter(o=>!E2(o)).reduce((o,u)=>o+(mE.test(u)?gE:u===""?vE:_E),n)}function wE(t,e){return t.length===e.length&&t.slice(0,-1).every((n,o)=>n===e[o])?t[t.length-1]-e[e.length-1]:0}function BE(t,e,i=!1){let{routesMeta:n}=t,o={},u="/",A=[];for(let a=0;a<n.length;++a){let g=n[a],b=a===n.length-1,B=u==="/"?e:e.slice(u.length)||"/",I=Tv({path:g.relativePath,caseSensitive:g.caseSensitive,end:b},B),P=g.route;if(!I&&b&&i&&!n[n.length-1].route.index&&(I=Tv({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},B)),!I)return null;Object.assign(o,I.params),A.push({params:o,pathname:rd([u,I.pathname]),pathnameBase:NE(rd([u,I.pathnameBase])),route:P}),I.pathnameBase!=="/"&&(u=rd([u,I.pathnameBase]))}return A}function Tv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,n]=CE(t.path,t.caseSensitive,t.end),o=e.match(i);if(!o)return null;let u=o[0],A=u.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:n.reduce((b,{paramName:B,isOptional:I},P)=>{if(B==="*"){let Q=a[P]||"";A=u.slice(0,u.length-Q.length).replace(/(.)\/+$/,"$1")}const F=a[P];return I&&!F?b[B]=void 0:b[B]=(F||"").replace(/%2F/g,"/"),b},{}),pathname:u,pathnameBase:A,pattern:t}}function CE(t,e=!1,i=!0){pA(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(A,a,g)=>(n.push({paramName:a,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),n]}function SE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pA(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ad(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,n=t.charAt(i);return n&&n!=="/"?null:t.slice(i)||"/"}function EE(t,e="/"){let{pathname:i,search:n="",hash:o=""}=typeof t=="string"?mm(t):t;return{pathname:i?i.startsWith("/")?i:TE(i,e):e,search:ME(n),hash:IE(o)}}function TE(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function r_(t,e,i,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FE(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function gb(t){let e=FE(t);return e.map((i,n)=>n===e.length-1?i.pathname:i.pathnameBase)}function yb(t,e,i,n=!1){let o;typeof t=="string"?o=mm(t):(o={...t},ca(!o.pathname||!o.pathname.includes("?"),r_("?","pathname","search",o)),ca(!o.pathname||!o.pathname.includes("#"),r_("#","pathname","hash",o)),ca(!o.search||!o.search.includes("#"),r_("#","search","hash",o)));let u=t===""||o.pathname==="",A=u?"/":o.pathname,a;if(A==null)a=i;else{let I=e.length-1;if(!n&&A.startsWith("..")){let P=A.split("/");for(;P[0]==="..";)P.shift(),I-=1;o.pathname=P.join("/")}a=I>=0?e[I]:"/"}let g=EE(o,a),b=A&&A!=="/"&&A.endsWith("/"),B=(u||A===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(b||B)&&(g.pathname+="/"),g}var rd=t=>t.join("/").replace(/\/\/+/g,"/"),NE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ME=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var eC=["POST","PUT","PATCH","DELETE"];new Set(eC);var PE=["GET",...eC];new Set(PE);var gm=Te.createContext(null);gm.displayName="DataRouter";var Yv=Te.createContext(null);Yv.displayName="DataRouterState";Te.createContext(!1);var tC=Te.createContext({isTransitioning:!1});tC.displayName="ViewTransition";var kE=Te.createContext(new Map);kE.displayName="Fetchers";var jE=Te.createContext(null);jE.displayName="Await";var qA=Te.createContext(null);qA.displayName="Navigation";var _0=Te.createContext(null);_0.displayName="Location";var GA=Te.createContext({outlet:null,matches:[],isDataRoute:!1});GA.displayName="Route";var vb=Te.createContext(null);vb.displayName="RouteError";function UE(t,{relative:e}={}){ca(ym(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:n}=Te.useContext(qA),{hash:o,pathname:u,search:A}=x0(t,{relative:e}),a=u;return i!=="/"&&(a=u==="/"?i:rd([i,u])),n.createHref({pathname:a,search:A,hash:o})}function ym(){return Te.useContext(_0)!=null}function pu(){return ca(ym(),"useLocation() may be used only in the context of a <Router> component."),Te.useContext(_0).location}var iC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nC(t){Te.useContext(qA).static||Te.useLayoutEffect(t)}function fl(){let{isDataRoute:t}=Te.useContext(GA);return t?YE():DE()}function DE(){ca(ym(),"useNavigate() may be used only in the context of a <Router> component.");let t=Te.useContext(gm),{basename:e,navigator:i}=Te.useContext(qA),{matches:n}=Te.useContext(GA),{pathname:o}=pu(),u=JSON.stringify(gb(n)),A=Te.useRef(!1);return nC(()=>{A.current=!0}),Te.useCallback((g,b={})=>{if(pA(A.current,iC),!A.current)return;if(typeof g=="number"){i.go(g);return}let B=yb(g,JSON.parse(u),o,b.relative==="path");t==null&&e!=="/"&&(B.pathname=B.pathname==="/"?e:rd([e,B.pathname])),(b.replace?i.replace:i.push)(B,b.state,b)},[e,i,u,o,t])}var RE=Te.createContext(null);function OE(t){let e=Te.useContext(GA).outlet;return e&&Te.createElement(RE.Provider,{value:t},e)}function x0(t,{relative:e}={}){let{matches:i}=Te.useContext(GA),{pathname:n}=pu(),o=JSON.stringify(gb(i));return Te.useMemo(()=>yb(t,JSON.parse(o),n,e==="path"),[t,o,n,e])}function QE(t,e){return rC(t,e)}function rC(t,e,i,n){ca(ym(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Te.useContext(qA),{matches:u}=Te.useContext(GA),A=u[u.length-1],a=A?A.params:{},g=A?A.pathname:"/",b=A?A.pathnameBase:"/",B=A&&A.route;{let j=B&&B.path||"";sC(g,!B||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let I=pu(),P;if(e){let j=typeof e=="string"?mm(e):e;ca(b==="/"||j.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${j.pathname}" was given in the \`location\` prop.`),P=j}else P=I;let F=P.pathname||"/",Q=F;if(b!=="/"){let j=b.replace(/^\//,"").split("/");Q="/"+F.replace(/^\//,"").split("/").slice(j.length).join("/")}let R=XB(t,{pathname:Q});pA(B||R!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),pA(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=GE(R&&R.map(j=>Object.assign({},j,{params:Object.assign({},a,j.params),pathname:rd([b,o.encodeLocation?o.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?b:rd([b,o.encodeLocation?o.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),u,i,n);return e&&H?Te.createElement(_0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},H):H}function zE(){let t=XE(),e=LE(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},u={padding:"2px 4px",backgroundColor:n},A=null;return console.error("Error handled by React Router default ErrorBoundary:",t),A=Te.createElement(Te.Fragment,null,Te.createElement("p",null," Hey developer "),Te.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Te.createElement("code",{style:u},"ErrorBoundary")," or"," ",Te.createElement("code",{style:u},"errorElement")," prop on your route.")),Te.createElement(Te.Fragment,null,Te.createElement("h2",null,"Unexpected Application Error!"),Te.createElement("h3",{style:{fontStyle:"italic"}},e),i?Te.createElement("pre",{style:o},i):null,A)}var HE=Te.createElement(zE,null),VE=class extends Te.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?Te.createElement(GA.Provider,{value:this.props.routeContext},Te.createElement(vb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qE({routeContext:t,match:e,children:i}){let n=Te.useContext(gm);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),Te.createElement(GA.Provider,{value:t},i)}function GE(t,e=[],i=null,n=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let o=t,u=i?.errors;if(u!=null){let g=o.findIndex(b=>b.route.id&&u?.[b.route.id]!==void 0);ca(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let A=!1,a=-1;if(i)for(let g=0;g<o.length;g++){let b=o[g];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(a=g),b.route.id){let{loaderData:B,errors:I}=i,P=b.route.loader&&!B.hasOwnProperty(b.route.id)&&(!I||I[b.route.id]===void 0);if(b.route.lazy||P){A=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((g,b,B)=>{let I,P=!1,F=null,Q=null;i&&(I=u&&b.route.id?u[b.route.id]:void 0,F=b.route.errorElement||HE,A&&(a<0&&B===0?(sC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,Q=null):a===B&&(P=!0,Q=b.route.hydrateFallbackElement||null)));let R=e.concat(o.slice(0,B+1)),H=()=>{let j;return I?j=F:P?j=Q:b.route.Component?j=Te.createElement(b.route.Component,null):b.route.element?j=b.route.element:j=g,Te.createElement(qE,{match:b,routeContext:{outlet:g,matches:R,isDataRoute:i!=null},children:j})};return i&&(b.route.ErrorBoundary||b.route.errorElement||B===0)?Te.createElement(VE,{location:i.location,revalidation:i.revalidation,component:F,error:I,children:H(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):H()},null)}function _b(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KE(t){let e=Te.useContext(gm);return ca(e,_b(t)),e}function WE(t){let e=Te.useContext(Yv);return ca(e,_b(t)),e}function $E(t){let e=Te.useContext(GA);return ca(e,_b(t)),e}function xb(t){let e=$E(t),i=e.matches[e.matches.length-1];return ca(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function ZE(){return xb("useRouteId")}function XE(){let t=Te.useContext(vb),e=WE("useRouteError"),i=xb("useRouteError");return t!==void 0?t:e.errors?.[i]}function YE(){let{router:t}=KE("useNavigate"),e=xb("useNavigate"),i=Te.useRef(!1);return nC(()=>{i.current=!0}),Te.useCallback(async(o,u={})=>{pA(i.current,iC),i.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...u}))},[t,e])}var T2={};function sC(t,e,i){!e&&!T2[t]&&(T2[t]=!0,pA(!1,i))}Te.memo(JE);function JE({routes:t,future:e,state:i}){return rC(t,void 0,i,e)}function Ng({to:t,replace:e,state:i,relative:n}){ca(ym(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=Te.useContext(qA);pA(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=Te.useContext(GA),{pathname:A}=pu(),a=fl(),g=yb(t,gb(u),A,n==="path"),b=JSON.stringify(g);return Te.useEffect(()=>{a(JSON.parse(b),{replace:e,state:i,relative:n})},[a,b,n,e,i]),null}function aC(t){return OE(t.context)}function Vr(t){ca(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eT({basename:t="/",children:e=null,location:i,navigationType:n="POP",navigator:o,static:u=!1}){ca(!ym(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let A=t.replace(/^\/*/,"/"),a=Te.useMemo(()=>({basename:A,navigator:o,static:u,future:{}}),[A,o,u]);typeof i=="string"&&(i=mm(i));let{pathname:g="/",search:b="",hash:B="",state:I=null,key:P="default"}=i,F=Te.useMemo(()=>{let Q=ad(g,A);return Q==null?null:{location:{pathname:Q,search:b,hash:B,state:I,key:P},navigationType:n}},[A,g,b,B,I,P,n]);return pA(F!=null,`<Router basename="${A}"> is not able to match the URL "${g}${b}${B}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:Te.createElement(qA.Provider,{value:a},Te.createElement(_0.Provider,{children:e,value:F}))}function tT({children:t,location:e}){return QE(sx(t),e)}function sx(t,e=[]){let i=[];return Te.Children.forEach(t,(n,o)=>{if(!Te.isValidElement(n))return;let u=[...e,o];if(n.type===Te.Fragment){i.push.apply(i,sx(n.props.children,u));return}ca(n.type===Vr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ca(!n.props.index||!n.props.children,"An index route cannot have child routes.");let A={id:n.props.id||u.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(A.children=sx(n.props.children,u)),i.push(A)}),i}var uv="get",Av="application/x-www-form-urlencoded";function Jv(t){return t!=null&&typeof t.tagName=="string"}function iT(t){return Jv(t)&&t.tagName.toLowerCase()==="button"}function nT(t){return Jv(t)&&t.tagName.toLowerCase()==="form"}function rT(t){return Jv(t)&&t.tagName.toLowerCase()==="input"}function sT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aT(t,e){return t.button===0&&(!e||e==="_self")&&!sT(t)}function ax(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,i)=>{let n=t[i];return e.concat(Array.isArray(n)?n.map(o=>[i,o]):[[i,n]])},[]))}function oT(t,e){let i=ax(t);return e&&e.forEach((n,o)=>{i.has(o)||e.getAll(o).forEach(u=>{i.append(o,u)})}),i}var yy=null;function lT(){if(yy===null)try{new FormData(document.createElement("form"),0),yy=!1}catch{yy=!0}return yy}var cT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function s_(t){return t!=null&&!cT.has(t)?(pA(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Av}"`),null):t}function uT(t,e){let i,n,o,u,A;if(nT(t)){let a=t.getAttribute("action");n=a?ad(a,e):null,i=t.getAttribute("method")||uv,o=s_(t.getAttribute("enctype"))||Av,u=new FormData(t)}else if(iT(t)||rT(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=t.getAttribute("formaction")||a.getAttribute("action");if(n=g?ad(g,e):null,i=t.getAttribute("formmethod")||a.getAttribute("method")||uv,o=s_(t.getAttribute("formenctype"))||s_(a.getAttribute("enctype"))||Av,u=new FormData(a,t),!lT()){let{name:b,type:B,value:I}=t;if(B==="image"){let P=b?`${b}.`:"";u.append(`${P}x`,"0"),u.append(`${P}y`,"0")}else b&&u.append(b,I)}}else{if(Jv(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=uv,n=null,o=Av,A=t}return u&&o==="text/plain"&&(A=u,u=void 0),{action:n,method:i.toLowerCase(),encType:o,formData:u,body:A}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AT(t,e,i){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${i}`:e&&ad(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${i}`,n}async function hT(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dT(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function fT(t,e,i){let n=await Promise.all(t.map(async o=>{let u=e.routes[o.route.id];if(u){let A=await hT(u,i);return A.links?A.links():[]}return[]}));return yT(n.flat(1).filter(dT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function F2(t,e,i,n,o,u){let A=(g,b)=>i[b]?g.route.id!==i[b].route.id:!0,a=(g,b)=>i[b].pathname!==g.pathname||i[b].route.path?.endsWith("*")&&i[b].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,b)=>A(g,b)||a(g,b)):u==="data"?e.filter((g,b)=>{let B=n.routes[g.route.id];if(!B||!B.hasLoader)return!1;if(A(g,b)||a(g,b))return!0;if(g.route.shouldRevalidate){let I=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function pT(t,e,{includeHydrateFallback:i}={}){return mT(t.map(n=>{let o=e.routes[n.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function mT(t){return[...new Set(t)]}function gT(t){let e={},i=Object.keys(t).sort();for(let n of i)e[n]=t[n];return e}function yT(t,e){let i=new Set;return new Set(e),t.reduce((n,o)=>{let u=JSON.stringify(gT(o));return i.has(u)||(i.add(u),n.push({key:u,link:o})),n},[])}function oC(){let t=Te.useContext(gm);return bb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function vT(){let t=Te.useContext(Yv);return bb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var wb=Te.createContext(void 0);wb.displayName="FrameworkContext";function lC(){let t=Te.useContext(wb);return bb(t,"You must render this element inside a <HydratedRouter> element"),t}function _T(t,e){let i=Te.useContext(wb),[n,o]=Te.useState(!1),[u,A]=Te.useState(!1),{onFocus:a,onBlur:g,onMouseEnter:b,onMouseLeave:B,onTouchStart:I}=e,P=Te.useRef(null);Te.useEffect(()=>{if(t==="render"&&A(!0),t==="viewport"){let R=j=>{j.forEach(V=>{A(V.isIntersecting)})},H=new IntersectionObserver(R,{threshold:.5});return P.current&&H.observe(P.current),()=>{H.disconnect()}}},[t]),Te.useEffect(()=>{if(n){let R=setTimeout(()=>{A(!0)},100);return()=>{clearTimeout(R)}}},[n]);let F=()=>{o(!0)},Q=()=>{o(!1),A(!1)};return i?t!=="intent"?[u,P,{}]:[u,P,{onFocus:pg(a,F),onBlur:pg(g,Q),onMouseEnter:pg(b,F),onMouseLeave:pg(B,Q),onTouchStart:pg(I,F)}]:[!1,P,{}]}function pg(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function xT({page:t,...e}){let{router:i}=oC(),n=Te.useMemo(()=>XB(i.routes,t,i.basename),[i.routes,t,i.basename]);return n?Te.createElement(wT,{page:t,matches:n,...e}):null}function bT(t){let{manifest:e,routeModules:i}=lC(),[n,o]=Te.useState([]);return Te.useEffect(()=>{let u=!1;return fT(t,e,i).then(A=>{u||o(A)}),()=>{u=!0}},[t,e,i]),n}function wT({page:t,matches:e,...i}){let n=pu(),{manifest:o,routeModules:u}=lC(),{basename:A}=oC(),{loaderData:a,matches:g}=vT(),b=Te.useMemo(()=>F2(t,e,g,o,n,"data"),[t,e,g,o,n]),B=Te.useMemo(()=>F2(t,e,g,o,n,"assets"),[t,e,g,o,n]),I=Te.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let Q=new Set,R=!1;if(e.forEach(j=>{let V=o.routes[j.route.id];!V||!V.hasLoader||(!b.some(W=>W.route.id===j.route.id)&&j.route.id in a&&u[j.route.id]?.shouldRevalidate||V.hasClientLoader?R=!0:Q.add(j.route.id))}),Q.size===0)return[];let H=AT(t,A,"data");return R&&Q.size>0&&H.searchParams.set("_routes",e.filter(j=>Q.has(j.route.id)).map(j=>j.route.id).join(",")),[H.pathname+H.search]},[A,a,n,o,b,e,t,u]),P=Te.useMemo(()=>pT(B,o),[B,o]),F=bT(B);return Te.createElement(Te.Fragment,null,I.map(Q=>Te.createElement("link",{key:Q,rel:"prefetch",as:"fetch",href:Q,...i})),P.map(Q=>Te.createElement("link",{key:Q,rel:"modulepreload",href:Q,...i})),F.map(({key:Q,link:R})=>Te.createElement("link",{key:Q,...R})))}function BT(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var cC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cC&&(window.__reactRouterVersion="7.7.1")}catch{}function CT({basename:t,children:e,window:i}){let n=Te.useRef();n.current==null&&(n.current=uE({window:i,v5Compat:!0}));let o=n.current,[u,A]=Te.useState({action:o.action,location:o.location}),a=Te.useCallback(g=>{Te.startTransition(()=>A(g))},[A]);return Te.useLayoutEffect(()=>o.listen(a),[o,a]),Te.createElement(eT,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:o})}var uC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=Te.forwardRef(function({onClick:e,discover:i="render",prefetch:n="none",relative:o,reloadDocument:u,replace:A,state:a,target:g,to:b,preventScrollReset:B,viewTransition:I,...P},F){let{basename:Q}=Te.useContext(qA),R=typeof b=="string"&&uC.test(b),H,j=!1;if(typeof b=="string"&&R&&(H=b,cC))try{let xe=new URL(window.location.href),Be=b.startsWith("//")?new URL(xe.protocol+b):new URL(b),se=ad(Be.pathname,Q);Be.origin===xe.origin&&se!=null?b=se+Be.search+Be.hash:j=!0}catch{pA(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=UE(b,{relative:o}),[W,ne,te]=_T(n,P),de=FT(b,{replace:A,state:a,target:g,preventScrollReset:B,relative:o,viewTransition:I});function ee(xe){e&&e(xe),xe.defaultPrevented||de(xe)}let re=Te.createElement("a",{...P,...te,href:H||V,onClick:j||u?e:ee,ref:BT(F,ne),target:g,"data-discover":!R&&i==="render"?"true":void 0});return W&&!R?Te.createElement(Te.Fragment,null,re,Te.createElement(xT,{page:V})):re});ar.displayName="Link";var ST=Te.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:n="",end:o=!1,style:u,to:A,viewTransition:a,children:g,...b},B){let I=x0(A,{relative:b.relative}),P=pu(),F=Te.useContext(Yv),{navigator:Q,basename:R}=Te.useContext(qA),H=F!=null&&kT(I)&&a===!0,j=Q.encodeLocation?Q.encodeLocation(I).pathname:I.pathname,V=P.pathname,W=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;i||(V=V.toLowerCase(),W=W?W.toLowerCase():null,j=j.toLowerCase()),W&&R&&(W=ad(W,R)||W);const ne=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let te=V===j||!o&&V.startsWith(j)&&V.charAt(ne)==="/",de=W!=null&&(W===j||!o&&W.startsWith(j)&&W.charAt(j.length)==="/"),ee={isActive:te,isPending:de,isTransitioning:H},re=te?e:void 0,xe;typeof n=="function"?xe=n(ee):xe=[n,te?"active":null,de?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let Be=typeof u=="function"?u(ee):u;return Te.createElement(ar,{...b,"aria-current":re,className:xe,ref:B,style:Be,to:A,viewTransition:a},typeof g=="function"?g(ee):g)});ST.displayName="NavLink";var ET=Te.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:n,replace:o,state:u,method:A=uv,action:a,onSubmit:g,relative:b,preventScrollReset:B,viewTransition:I,...P},F)=>{let Q=LT(),R=PT(a,{relative:b}),H=A.toLowerCase()==="get"?"get":"post",j=typeof a=="string"&&uC.test(a),V=W=>{if(g&&g(W),W.defaultPrevented)return;W.preventDefault();let ne=W.nativeEvent.submitter,te=ne?.getAttribute("formmethod")||A;Q(ne||W.currentTarget,{fetcherKey:e,method:te,navigate:i,replace:o,state:u,relative:b,preventScrollReset:B,viewTransition:I})};return Te.createElement("form",{ref:F,method:H,action:R,onSubmit:n?g:V,...P,"data-discover":!j&&t==="render"?"true":void 0})});ET.displayName="Form";function TT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AC(t){let e=Te.useContext(gm);return ca(e,TT(t)),e}function FT(t,{target:e,replace:i,state:n,preventScrollReset:o,relative:u,viewTransition:A}={}){let a=fl(),g=pu(),b=x0(t,{relative:u});return Te.useCallback(B=>{if(aT(B,e)){B.preventDefault();let I=i!==void 0?i:n0(g)===n0(b);a(t,{replace:I,state:n,preventScrollReset:o,relative:u,viewTransition:A})}},[g,a,b,i,n,e,t,o,u,A])}function NT(t){pA(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=Te.useRef(ax(t)),i=Te.useRef(!1),n=pu(),o=Te.useMemo(()=>oT(n.search,i.current?null:e.current),[n.search]),u=fl(),A=Te.useCallback((a,g)=>{const b=ax(typeof a=="function"?a(new URLSearchParams(o)):a);i.current=!0,u("?"+b,g)},[u,o]);return[o,A]}var MT=0,IT=()=>`__${String(++MT)}__`;function LT(){let{router:t}=AC("useSubmit"),{basename:e}=Te.useContext(qA),i=ZE();return Te.useCallback(async(n,o={})=>{let{action:u,method:A,encType:a,formData:g,body:b}=uT(n,e);if(o.navigate===!1){let B=o.fetcherKey||IT();await t.fetch(B,i,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:b,formMethod:o.method||A,formEncType:o.encType||a,flushSync:o.flushSync})}else await t.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:b,formMethod:o.method||A,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,i])}function PT(t,{relative:e}={}){let{basename:i}=Te.useContext(qA),n=Te.useContext(GA);ca(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),u={...x0(t||".",{relative:e})},A=pu();if(t==null){u.search=A.search;let a=new URLSearchParams(u.search),g=a.getAll("index");if(g.some(B=>B==="")){a.delete("index"),g.filter(I=>I).forEach(I=>a.append("index",I));let B=a.toString();u.search=B?`?${B}`:""}}return(!t||t===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:rd([i,u.pathname])),n0(u)}function kT(t,{relative:e}={}){let i=Te.useContext(tC);ca(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=AC("useViewTransitionState"),o=x0(t,{relative:e});if(!i.isTransitioning)return!1;let u=ad(i.currentLocation.pathname,n)||i.currentLocation.pathname,A=ad(i.nextLocation.pathname,n)||i.nextLocation.pathname;return Tv(o.pathname,A)!=null||Tv(o.pathname,u)!=null}function hC(t,e){return function(){return t.apply(e,arguments)}}const{toString:jT}=Object.prototype,{getPrototypeOf:Bb}=Object,{iterator:e1,toStringTag:dC}=Symbol,t1=(t=>e=>{const i=jT.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),KA=t=>(t=t.toLowerCase(),e=>t1(e)===t),i1=t=>e=>typeof e===t,{isArray:vm}=Array,Am=i1("undefined");function b0(t){return t!==null&&!Am(t)&&t.constructor!==null&&!Am(t.constructor)&&du(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const fC=KA("ArrayBuffer");function UT(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&fC(t.buffer),e}const DT=i1("string"),du=i1("function"),pC=i1("number"),w0=t=>t!==null&&typeof t=="object",RT=t=>t===!0||t===!1,hv=t=>{if(t1(t)!=="object")return!1;const e=Bb(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(dC in t)&&!(e1 in t)},OT=t=>{if(!w0(t)||b0(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},QT=KA("Date"),zT=KA("File"),HT=KA("Blob"),VT=KA("FileList"),qT=t=>w0(t)&&du(t.pipe),GT=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||du(t.append)&&((e=t1(t))==="formdata"||e==="object"&&du(t.toString)&&t.toString()==="[object FormData]"))},KT=KA("URLSearchParams"),[WT,$T,ZT,XT]=["ReadableStream","Request","Response","Headers"].map(KA),YT=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function B0(t,e,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let n,o;if(typeof t!="object"&&(t=[t]),vm(t))for(n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else{if(b0(t))return;const u=i?Object.getOwnPropertyNames(t):Object.keys(t),A=u.length;let a;for(n=0;n<A;n++)a=u[n],e.call(null,t[a],a,t)}}function mC(t,e){if(b0(t))return null;e=e.toLowerCase();const i=Object.keys(t);let n=i.length,o;for(;n-- >0;)if(o=i[n],e===o.toLowerCase())return o;return null}const Rf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gC=t=>!Am(t)&&t!==Rf;function ox(){const{caseless:t,skipUndefined:e}=gC(this)&&this||{},i={},n=(o,u)=>{const A=t&&mC(i,u)||u;hv(i[A])&&hv(o)?i[A]=ox(i[A],o):hv(o)?i[A]=ox({},o):vm(o)?i[A]=o.slice():(!e||!Am(o))&&(i[A]=o)};for(let o=0,u=arguments.length;o<u;o++)arguments[o]&&B0(arguments[o],n);return i}const JT=(t,e,i,{allOwnKeys:n}={})=>(B0(e,(o,u)=>{i&&du(o)?t[u]=hC(o,i):t[u]=o},{allOwnKeys:n}),t),eF=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),tF=(t,e,i,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},iF=(t,e,i,n)=>{let o,u,A;const a={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),u=o.length;u-- >0;)A=o[u],(!n||n(A,t,e))&&!a[A]&&(e[A]=t[A],a[A]=!0);t=i!==!1&&Bb(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},nF=(t,e,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=e.length;const n=t.indexOf(e,i);return n!==-1&&n===i},rF=t=>{if(!t)return null;if(vm(t))return t;let e=t.length;if(!pC(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=t[e];return i},sF=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Bb(Uint8Array)),aF=(t,e)=>{const n=(t&&t[e1]).call(t);let o;for(;(o=n.next())&&!o.done;){const u=o.value;e.call(t,u[0],u[1])}},oF=(t,e)=>{let i;const n=[];for(;(i=t.exec(e))!==null;)n.push(i);return n},lF=KA("HTMLFormElement"),cF=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,n,o){return n.toUpperCase()+o}),N2=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype),uF=KA("RegExp"),yC=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),n={};B0(i,(o,u)=>{let A;(A=e(o,u,t))!==!1&&(n[u]=A||o)}),Object.defineProperties(t,n)},AF=t=>{yC(t,(e,i)=>{if(du(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const n=t[i];if(du(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},hF=(t,e)=>{const i={},n=o=>{o.forEach(u=>{i[u]=!0})};return vm(t)?n(t):n(String(t).split(e)),i},dF=()=>{},fF=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function pF(t){return!!(t&&du(t.append)&&t[dC]==="FormData"&&t[e1])}const mF=t=>{const e=new Array(10),i=(n,o)=>{if(w0(n)){if(e.indexOf(n)>=0)return;if(b0(n))return n;if(!("toJSON"in n)){e[o]=n;const u=vm(n)?[]:{};return B0(n,(A,a)=>{const g=i(A,o+1);!Am(g)&&(u[a]=g)}),e[o]=void 0,u}}return n};return i(t,0)},gF=KA("AsyncFunction"),yF=t=>t&&(w0(t)||du(t))&&du(t.then)&&du(t.catch),vC=((t,e)=>t?setImmediate:e?((i,n)=>(Rf.addEventListener("message",({source:o,data:u})=>{o===Rf&&u===i&&n.length&&n.shift()()},!1),o=>{n.push(o),Rf.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",du(Rf.postMessage)),vF=typeof queueMicrotask<"u"?queueMicrotask.bind(Rf):typeof process<"u"&&process.nextTick||vC,_F=t=>t!=null&&du(t[e1]),qt={isArray:vm,isArrayBuffer:fC,isBuffer:b0,isFormData:GT,isArrayBufferView:UT,isString:DT,isNumber:pC,isBoolean:RT,isObject:w0,isPlainObject:hv,isEmptyObject:OT,isReadableStream:WT,isRequest:$T,isResponse:ZT,isHeaders:XT,isUndefined:Am,isDate:QT,isFile:zT,isBlob:HT,isRegExp:uF,isFunction:du,isStream:qT,isURLSearchParams:KT,isTypedArray:sF,isFileList:VT,forEach:B0,merge:ox,extend:JT,trim:YT,stripBOM:eF,inherits:tF,toFlatObject:iF,kindOf:t1,kindOfTest:KA,endsWith:nF,toArray:rF,forEachEntry:aF,matchAll:oF,isHTMLForm:lF,hasOwnProperty:N2,hasOwnProp:N2,reduceDescriptors:yC,freezeMethods:AF,toObjectSet:hF,toCamelCase:cF,noop:dF,toFiniteNumber:fF,findKey:mC,global:Rf,isContextDefined:gC,isSpecCompliantForm:pF,toJSONObject:mF,isAsyncFn:gF,isThenable:yF,setImmediate:vC,asap:vF,isIterable:_F};function Vn(t,e,i,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}qt.inherits(Vn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:qt.toJSONObject(this.config),code:this.code,status:this.status}}});const _C=Vn.prototype,xC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xC[t]={value:t}});Object.defineProperties(Vn,xC);Object.defineProperty(_C,"isAxiosError",{value:!0});Vn.from=(t,e,i,n,o,u)=>{const A=Object.create(_C);qt.toFlatObject(t,A,function(B){return B!==Error.prototype},b=>b!=="isAxiosError");const a=t&&t.message?t.message:"Error",g=e==null&&t?t.code:e;return Vn.call(A,a,g,i,n,o),t&&A.cause==null&&Object.defineProperty(A,"cause",{value:t,configurable:!0}),A.name=t&&t.name||"Error",u&&Object.assign(A,u),A};const xF=null;function lx(t){return qt.isPlainObject(t)||qt.isArray(t)}function bC(t){return qt.endsWith(t,"[]")?t.slice(0,-2):t}function M2(t,e,i){return t?t.concat(e).map(function(o,u){return o=bC(o),!i&&u?"["+o+"]":o}).join(i?".":""):e}function bF(t){return qt.isArray(t)&&!t.some(lx)}const wF=qt.toFlatObject(qt,{},null,function(e){return/^is[A-Z]/.test(e)});function n1(t,e,i){if(!qt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,i=qt.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,H){return!qt.isUndefined(H[R])});const n=i.metaTokens,o=i.visitor||B,u=i.dots,A=i.indexes,g=(i.Blob||typeof Blob<"u"&&Blob)&&qt.isSpecCompliantForm(e);if(!qt.isFunction(o))throw new TypeError("visitor must be a function");function b(Q){if(Q===null)return"";if(qt.isDate(Q))return Q.toISOString();if(qt.isBoolean(Q))return Q.toString();if(!g&&qt.isBlob(Q))throw new Vn("Blob is not supported. Use a Buffer instead.");return qt.isArrayBuffer(Q)||qt.isTypedArray(Q)?g&&typeof Blob=="function"?new Blob([Q]):Buffer.from(Q):Q}function B(Q,R,H){let j=Q;if(Q&&!H&&typeof Q=="object"){if(qt.endsWith(R,"{}"))R=n?R:R.slice(0,-2),Q=JSON.stringify(Q);else if(qt.isArray(Q)&&bF(Q)||(qt.isFileList(Q)||qt.endsWith(R,"[]"))&&(j=qt.toArray(Q)))return R=bC(R),j.forEach(function(W,ne){!(qt.isUndefined(W)||W===null)&&e.append(A===!0?M2([R],ne,u):A===null?R:R+"[]",b(W))}),!1}return lx(Q)?!0:(e.append(M2(H,R,u),b(Q)),!1)}const I=[],P=Object.assign(wF,{defaultVisitor:B,convertValue:b,isVisitable:lx});function F(Q,R){if(!qt.isUndefined(Q)){if(I.indexOf(Q)!==-1)throw Error("Circular reference detected in "+R.join("."));I.push(Q),qt.forEach(Q,function(j,V){(!(qt.isUndefined(j)||j===null)&&o.call(e,j,qt.isString(V)?V.trim():V,R,P))===!0&&F(j,R?R.concat(V):[V])}),I.pop()}}if(!qt.isObject(t))throw new TypeError("data must be an object");return F(t),e}function I2(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Cb(t,e){this._pairs=[],t&&n1(t,this,e)}const wC=Cb.prototype;wC.append=function(e,i){this._pairs.push([e,i])};wC.toString=function(e){const i=e?function(n){return e.call(this,n,I2)}:I2;return this._pairs.map(function(o){return i(o[0])+"="+i(o[1])},"").join("&")};function BF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function BC(t,e,i){if(!e)return t;const n=i&&i.encode||BF;qt.isFunction(i)&&(i={serialize:i});const o=i&&i.serialize;let u;if(o?u=o(e,i):u=qt.isURLSearchParams(e)?e.toString():new Cb(e,i).toString(n),u){const A=t.indexOf("#");A!==-1&&(t=t.slice(0,A)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t}class L2{constructor(){this.handlers=[]}use(e,i,n){return this.handlers.push({fulfilled:e,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){qt.forEach(this.handlers,function(n){n!==null&&e(n)})}}const CC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CF=typeof URLSearchParams<"u"?URLSearchParams:Cb,SF=typeof FormData<"u"?FormData:null,EF=typeof Blob<"u"?Blob:null,TF={isBrowser:!0,classes:{URLSearchParams:CF,FormData:SF,Blob:EF},protocols:["http","https","file","blob","url","data"]},Sb=typeof window<"u"&&typeof document<"u",cx=typeof navigator=="object"&&navigator||void 0,FF=Sb&&(!cx||["ReactNative","NativeScript","NS"].indexOf(cx.product)<0),NF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",MF=Sb&&window.location.href||"http://localhost",IF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Sb,hasStandardBrowserEnv:FF,hasStandardBrowserWebWorkerEnv:NF,navigator:cx,origin:MF},Symbol.toStringTag,{value:"Module"})),pc={...IF,...TF};function LF(t,e){return n1(t,new pc.classes.URLSearchParams,{visitor:function(i,n,o,u){return pc.isNode&&qt.isBuffer(i)?(this.append(n,i.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...e})}function PF(t){return qt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function kF(t){const e={},i=Object.keys(t);let n;const o=i.length;let u;for(n=0;n<o;n++)u=i[n],e[u]=t[u];return e}function SC(t){function e(i,n,o,u){let A=i[u++];if(A==="__proto__")return!0;const a=Number.isFinite(+A),g=u>=i.length;return A=!A&&qt.isArray(o)?o.length:A,g?(qt.hasOwnProp(o,A)?o[A]=[o[A],n]:o[A]=n,!a):((!o[A]||!qt.isObject(o[A]))&&(o[A]=[]),e(i,n,o[A],u)&&qt.isArray(o[A])&&(o[A]=kF(o[A])),!a)}if(qt.isFormData(t)&&qt.isFunction(t.entries)){const i={};return qt.forEachEntry(t,(n,o)=>{e(PF(n),o,i,0)}),i}return null}function jF(t,e,i){if(qt.isString(t))try{return(e||JSON.parse)(t),qt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(t)}const C0={transitional:CC,adapter:["xhr","http","fetch"],transformRequest:[function(e,i){const n=i.getContentType()||"",o=n.indexOf("application/json")>-1,u=qt.isObject(e);if(u&&qt.isHTMLForm(e)&&(e=new FormData(e)),qt.isFormData(e))return o?JSON.stringify(SC(e)):e;if(qt.isArrayBuffer(e)||qt.isBuffer(e)||qt.isStream(e)||qt.isFile(e)||qt.isBlob(e)||qt.isReadableStream(e))return e;if(qt.isArrayBufferView(e))return e.buffer;if(qt.isURLSearchParams(e))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(u){if(n.indexOf("application/x-www-form-urlencoded")>-1)return LF(e,this.formSerializer).toString();if((a=qt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return n1(a?{"files[]":e}:e,g&&new g,this.formSerializer)}}return u||o?(i.setContentType("application/json",!1),jF(e)):e}],transformResponse:[function(e){const i=this.transitional||C0.transitional,n=i&&i.forcedJSONParsing,o=this.responseType==="json";if(qt.isResponse(e)||qt.isReadableStream(e))return e;if(e&&qt.isString(e)&&(n&&!this.responseType||o)){const A=!(i&&i.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(a){if(A)throw a.name==="SyntaxError"?Vn.from(a,Vn.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pc.classes.FormData,Blob:pc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};qt.forEach(["delete","get","head","post","put","patch"],t=>{C0.headers[t]={}});const UF=qt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),DF=t=>{const e={};let i,n,o;return t&&t.split(`
`).forEach(function(A){o=A.indexOf(":"),i=A.substring(0,o).trim().toLowerCase(),n=A.substring(o+1).trim(),!(!i||e[i]&&UF[i])&&(i==="set-cookie"?e[i]?e[i].push(n):e[i]=[n]:e[i]=e[i]?e[i]+", "+n:n)}),e},P2=Symbol("internals");function mg(t){return t&&String(t).trim().toLowerCase()}function dv(t){return t===!1||t==null?t:qt.isArray(t)?t.map(dv):String(t)}function RF(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(t);)e[n[1]]=n[2];return e}const OF=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function a_(t,e,i,n,o){if(qt.isFunction(n))return n.call(this,e,i);if(o&&(e=i),!!qt.isString(e)){if(qt.isString(n))return e.indexOf(n)!==-1;if(qt.isRegExp(n))return n.test(e)}}function QF(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,i,n)=>i.toUpperCase()+n)}function zF(t,e){const i=qt.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+i,{value:function(o,u,A){return this[n].call(this,e,o,u,A)},configurable:!0})})}let fu=class{constructor(e){e&&this.set(e)}set(e,i,n){const o=this;function u(a,g,b){const B=mg(g);if(!B)throw new Error("header name must be a non-empty string");const I=qt.findKey(o,B);(!I||o[I]===void 0||b===!0||b===void 0&&o[I]!==!1)&&(o[I||g]=dv(a))}const A=(a,g)=>qt.forEach(a,(b,B)=>u(b,B,g));if(qt.isPlainObject(e)||e instanceof this.constructor)A(e,i);else if(qt.isString(e)&&(e=e.trim())&&!OF(e))A(DF(e),i);else if(qt.isObject(e)&&qt.isIterable(e)){let a={},g,b;for(const B of e){if(!qt.isArray(B))throw TypeError("Object iterator must return a key-value pair");a[b=B[0]]=(g=a[b])?qt.isArray(g)?[...g,B[1]]:[g,B[1]]:B[1]}A(a,i)}else e!=null&&u(i,e,n);return this}get(e,i){if(e=mg(e),e){const n=qt.findKey(this,e);if(n){const o=this[n];if(!i)return o;if(i===!0)return RF(o);if(qt.isFunction(i))return i.call(this,o,n);if(qt.isRegExp(i))return i.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,i){if(e=mg(e),e){const n=qt.findKey(this,e);return!!(n&&this[n]!==void 0&&(!i||a_(this,this[n],n,i)))}return!1}delete(e,i){const n=this;let o=!1;function u(A){if(A=mg(A),A){const a=qt.findKey(n,A);a&&(!i||a_(n,n[a],a,i))&&(delete n[a],o=!0)}}return qt.isArray(e)?e.forEach(u):u(e),o}clear(e){const i=Object.keys(this);let n=i.length,o=!1;for(;n--;){const u=i[n];(!e||a_(this,this[u],u,e,!0))&&(delete this[u],o=!0)}return o}normalize(e){const i=this,n={};return qt.forEach(this,(o,u)=>{const A=qt.findKey(n,u);if(A){i[A]=dv(o),delete i[u];return}const a=e?QF(u):String(u).trim();a!==u&&delete i[u],i[a]=dv(o),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const i=Object.create(null);return qt.forEach(this,(n,o)=>{n!=null&&n!==!1&&(i[o]=e&&qt.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,i])=>e+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...i){const n=new this(e);return i.forEach(o=>n.set(o)),n}static accessor(e){const n=(this[P2]=this[P2]={accessors:{}}).accessors,o=this.prototype;function u(A){const a=mg(A);n[a]||(zF(o,A),n[a]=!0)}return qt.isArray(e)?e.forEach(u):u(e),this}};fu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);qt.reduceDescriptors(fu.prototype,({value:t},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[i]=n}}});qt.freezeMethods(fu);function o_(t,e){const i=this||C0,n=e||i,o=fu.from(n.headers);let u=n.data;return qt.forEach(t,function(a){u=a.call(i,u,o.normalize(),e?e.status:void 0)}),o.normalize(),u}function EC(t){return!!(t&&t.__CANCEL__)}function _m(t,e,i){Vn.call(this,t??"canceled",Vn.ERR_CANCELED,e,i),this.name="CanceledError"}qt.inherits(_m,Vn,{__CANCEL__:!0});function TC(t,e,i){const n=i.config.validateStatus;!i.status||!n||n(i.status)?t(i):e(new Vn("Request failed with status code "+i.status,[Vn.ERR_BAD_REQUEST,Vn.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function HF(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function VF(t,e){t=t||10;const i=new Array(t),n=new Array(t);let o=0,u=0,A;return e=e!==void 0?e:1e3,function(g){const b=Date.now(),B=n[u];A||(A=b),i[o]=g,n[o]=b;let I=u,P=0;for(;I!==o;)P+=i[I++],I=I%t;if(o=(o+1)%t,o===u&&(u=(u+1)%t),b-A<e)return;const F=B&&b-B;return F?Math.round(P*1e3/F):void 0}}function qF(t,e){let i=0,n=1e3/e,o,u;const A=(b,B=Date.now())=>{i=B,o=null,u&&(clearTimeout(u),u=null),t(...b)};return[(...b)=>{const B=Date.now(),I=B-i;I>=n?A(b,B):(o=b,u||(u=setTimeout(()=>{u=null,A(o)},n-I)))},()=>o&&A(o)]}const Fv=(t,e,i=3)=>{let n=0;const o=VF(50,250);return qF(u=>{const A=u.loaded,a=u.lengthComputable?u.total:void 0,g=A-n,b=o(g),B=A<=a;n=A;const I={loaded:A,total:a,progress:a?A/a:void 0,bytes:g,rate:b||void 0,estimated:b&&a&&B?(a-A)/b:void 0,event:u,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(I)},i)},k2=(t,e)=>{const i=t!=null;return[n=>e[0]({lengthComputable:i,total:t,loaded:n}),e[1]]},j2=t=>(...e)=>qt.asap(()=>t(...e)),GF=pc.hasStandardBrowserEnv?((t,e)=>i=>(i=new URL(i,pc.origin),t.protocol===i.protocol&&t.host===i.host&&(e||t.port===i.port)))(new URL(pc.origin),pc.navigator&&/(msie|trident)/i.test(pc.navigator.userAgent)):()=>!0,KF=pc.hasStandardBrowserEnv?{write(t,e,i,n,o,u){const A=[t+"="+encodeURIComponent(e)];qt.isNumber(i)&&A.push("expires="+new Date(i).toGMTString()),qt.isString(n)&&A.push("path="+n),qt.isString(o)&&A.push("domain="+o),u===!0&&A.push("secure"),document.cookie=A.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function WF(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $F(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function FC(t,e,i){let n=!WF(e);return t&&(n||i==!1)?$F(t,e):e}const U2=t=>t instanceof fu?{...t}:t;function Yf(t,e){e=e||{};const i={};function n(b,B,I,P){return qt.isPlainObject(b)&&qt.isPlainObject(B)?qt.merge.call({caseless:P},b,B):qt.isPlainObject(B)?qt.merge({},B):qt.isArray(B)?B.slice():B}function o(b,B,I,P){if(qt.isUndefined(B)){if(!qt.isUndefined(b))return n(void 0,b,I,P)}else return n(b,B,I,P)}function u(b,B){if(!qt.isUndefined(B))return n(void 0,B)}function A(b,B){if(qt.isUndefined(B)){if(!qt.isUndefined(b))return n(void 0,b)}else return n(void 0,B)}function a(b,B,I){if(I in e)return n(b,B);if(I in t)return n(void 0,b)}const g={url:u,method:u,data:u,baseURL:A,transformRequest:A,transformResponse:A,paramsSerializer:A,timeout:A,timeoutMessage:A,withCredentials:A,withXSRFToken:A,adapter:A,responseType:A,xsrfCookieName:A,xsrfHeaderName:A,onUploadProgress:A,onDownloadProgress:A,decompress:A,maxContentLength:A,maxBodyLength:A,beforeRedirect:A,transport:A,httpAgent:A,httpsAgent:A,cancelToken:A,socketPath:A,responseEncoding:A,validateStatus:a,headers:(b,B,I)=>o(U2(b),U2(B),I,!0)};return qt.forEach(Object.keys({...t,...e}),function(B){const I=g[B]||o,P=I(t[B],e[B],B);qt.isUndefined(P)&&I!==a||(i[B]=P)}),i}const NC=t=>{const e=Yf({},t);let{data:i,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:u,headers:A,auth:a}=e;if(e.headers=A=fu.from(A),e.url=BC(FC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&A.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),qt.isFormData(i)){if(pc.hasStandardBrowserEnv||pc.hasStandardBrowserWebWorkerEnv)A.setContentType(void 0);else if(qt.isFunction(i.getHeaders)){const g=i.getHeaders(),b=["content-type","content-length"];Object.entries(g).forEach(([B,I])=>{b.includes(B.toLowerCase())&&A.set(B,I)})}}if(pc.hasStandardBrowserEnv&&(n&&qt.isFunction(n)&&(n=n(e)),n||n!==!1&&GF(e.url))){const g=o&&u&&KF.read(u);g&&A.set(o,g)}return e},ZF=typeof XMLHttpRequest<"u",XF=ZF&&function(t){return new Promise(function(i,n){const o=NC(t);let u=o.data;const A=fu.from(o.headers).normalize();let{responseType:a,onUploadProgress:g,onDownloadProgress:b}=o,B,I,P,F,Q;function R(){F&&F(),Q&&Q(),o.cancelToken&&o.cancelToken.unsubscribe(B),o.signal&&o.signal.removeEventListener("abort",B)}let H=new XMLHttpRequest;H.open(o.method.toUpperCase(),o.url,!0),H.timeout=o.timeout;function j(){if(!H)return;const W=fu.from("getAllResponseHeaders"in H&&H.getAllResponseHeaders()),te={data:!a||a==="text"||a==="json"?H.responseText:H.response,status:H.status,statusText:H.statusText,headers:W,config:t,request:H};TC(function(ee){i(ee),R()},function(ee){n(ee),R()},te),H=null}"onloadend"in H?H.onloadend=j:H.onreadystatechange=function(){!H||H.readyState!==4||H.status===0&&!(H.responseURL&&H.responseURL.indexOf("file:")===0)||setTimeout(j)},H.onabort=function(){H&&(n(new Vn("Request aborted",Vn.ECONNABORTED,t,H)),H=null)},H.onerror=function(ne){const te=ne&&ne.message?ne.message:"Network Error",de=new Vn(te,Vn.ERR_NETWORK,t,H);de.event=ne||null,n(de),H=null},H.ontimeout=function(){let ne=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const te=o.transitional||CC;o.timeoutErrorMessage&&(ne=o.timeoutErrorMessage),n(new Vn(ne,te.clarifyTimeoutError?Vn.ETIMEDOUT:Vn.ECONNABORTED,t,H)),H=null},u===void 0&&A.setContentType(null),"setRequestHeader"in H&&qt.forEach(A.toJSON(),function(ne,te){H.setRequestHeader(te,ne)}),qt.isUndefined(o.withCredentials)||(H.withCredentials=!!o.withCredentials),a&&a!=="json"&&(H.responseType=o.responseType),b&&([P,Q]=Fv(b,!0),H.addEventListener("progress",P)),g&&H.upload&&([I,F]=Fv(g),H.upload.addEventListener("progress",I),H.upload.addEventListener("loadend",F)),(o.cancelToken||o.signal)&&(B=W=>{H&&(n(!W||W.type?new _m(null,t,H):W),H.abort(),H=null)},o.cancelToken&&o.cancelToken.subscribe(B),o.signal&&(o.signal.aborted?B():o.signal.addEventListener("abort",B)));const V=HF(o.url);if(V&&pc.protocols.indexOf(V)===-1){n(new Vn("Unsupported protocol "+V+":",Vn.ERR_BAD_REQUEST,t));return}H.send(u||null)})},YF=(t,e)=>{const{length:i}=t=t?t.filter(Boolean):[];if(e||i){let n=new AbortController,o;const u=function(b){if(!o){o=!0,a();const B=b instanceof Error?b:this.reason;n.abort(B instanceof Vn?B:new _m(B instanceof Error?B.message:B))}};let A=e&&setTimeout(()=>{A=null,u(new Vn(`timeout ${e} of ms exceeded`,Vn.ETIMEDOUT))},e);const a=()=>{t&&(A&&clearTimeout(A),A=null,t.forEach(b=>{b.unsubscribe?b.unsubscribe(u):b.removeEventListener("abort",u)}),t=null)};t.forEach(b=>b.addEventListener("abort",u));const{signal:g}=n;return g.unsubscribe=()=>qt.asap(a),g}},JF=function*(t,e){let i=t.byteLength;if(i<e){yield t;return}let n=0,o;for(;n<i;)o=n+e,yield t.slice(n,o),n=o},e6=async function*(t,e){for await(const i of t6(t))yield*JF(i,e)},t6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:i,value:n}=await e.read();if(i)break;yield n}}finally{await e.cancel()}},D2=(t,e,i,n)=>{const o=e6(t,e);let u=0,A,a=g=>{A||(A=!0,n&&n(g))};return new ReadableStream({async pull(g){try{const{done:b,value:B}=await o.next();if(b){a(),g.close();return}let I=B.byteLength;if(i){let P=u+=I;i(P)}g.enqueue(new Uint8Array(B))}catch(b){throw a(b),b}},cancel(g){return a(g),o.return()}},{highWaterMark:2})},R2=64*1024,{isFunction:vy}=qt,i6=(({Request:t,Response:e})=>({Request:t,Response:e}))(qt.global),{ReadableStream:O2,TextEncoder:Q2}=qt.global,z2=(t,...e)=>{try{return!!t(...e)}catch{return!1}},n6=t=>{t=qt.merge.call({skipUndefined:!0},i6,t);const{fetch:e,Request:i,Response:n}=t,o=e?vy(e):typeof fetch=="function",u=vy(i),A=vy(n);if(!o)return!1;const a=o&&vy(O2),g=o&&(typeof Q2=="function"?(Q=>R=>Q.encode(R))(new Q2):async Q=>new Uint8Array(await new i(Q).arrayBuffer())),b=u&&a&&z2(()=>{let Q=!1;const R=new i(pc.origin,{body:new O2,method:"POST",get duplex(){return Q=!0,"half"}}).headers.has("Content-Type");return Q&&!R}),B=A&&a&&z2(()=>qt.isReadableStream(new n("").body)),I={stream:B&&(Q=>Q.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(Q=>{!I[Q]&&(I[Q]=(R,H)=>{let j=R&&R[Q];if(j)return j.call(R);throw new Vn(`Response type '${Q}' is not supported`,Vn.ERR_NOT_SUPPORT,H)})});const P=async Q=>{if(Q==null)return 0;if(qt.isBlob(Q))return Q.size;if(qt.isSpecCompliantForm(Q))return(await new i(pc.origin,{method:"POST",body:Q}).arrayBuffer()).byteLength;if(qt.isArrayBufferView(Q)||qt.isArrayBuffer(Q))return Q.byteLength;if(qt.isURLSearchParams(Q)&&(Q=Q+""),qt.isString(Q))return(await g(Q)).byteLength},F=async(Q,R)=>{const H=qt.toFiniteNumber(Q.getContentLength());return H??P(R)};return async Q=>{let{url:R,method:H,data:j,signal:V,cancelToken:W,timeout:ne,onDownloadProgress:te,onUploadProgress:de,responseType:ee,headers:re,withCredentials:xe="same-origin",fetchOptions:Be}=NC(Q),se=e||fetch;ee=ee?(ee+"").toLowerCase():"text";let ae=YF([V,W&&W.toAbortSignal()],ne),ce=null;const Ee=ae&&ae.unsubscribe&&(()=>{ae.unsubscribe()});let Ve;try{if(de&&b&&H!=="get"&&H!=="head"&&(Ve=await F(re,j))!==0){let Qe=new i(R,{method:"POST",body:j,duplex:"half"}),J;if(qt.isFormData(j)&&(J=Qe.headers.get("content-type"))&&re.setContentType(J),Qe.body){const[me,Fe]=k2(Ve,Fv(j2(de)));j=D2(Qe.body,R2,me,Fe)}}qt.isString(xe)||(xe=xe?"include":"omit");const ue=u&&"credentials"in i.prototype,fe={...Be,signal:ae,method:H.toUpperCase(),headers:re.normalize().toJSON(),body:j,duplex:"half",credentials:ue?xe:void 0};ce=u&&new i(R,fe);let Ue=await(u?se(ce,Be):se(R,fe));const ke=B&&(ee==="stream"||ee==="response");if(B&&(te||ke&&Ee)){const Qe={};["status","statusText","headers"].forEach(ze=>{Qe[ze]=Ue[ze]});const J=qt.toFiniteNumber(Ue.headers.get("content-length")),[me,Fe]=te&&k2(J,Fv(j2(te),!0))||[];Ue=new n(D2(Ue.body,R2,me,()=>{Fe&&Fe(),Ee&&Ee()}),Qe)}ee=ee||"text";let pe=await I[qt.findKey(I,ee)||"text"](Ue,Q);return!ke&&Ee&&Ee(),await new Promise((Qe,J)=>{TC(Qe,J,{data:pe,headers:fu.from(Ue.headers),status:Ue.status,statusText:Ue.statusText,config:Q,request:ce})})}catch(ue){throw Ee&&Ee(),ue&&ue.name==="TypeError"&&/Load failed|fetch/i.test(ue.message)?Object.assign(new Vn("Network Error",Vn.ERR_NETWORK,Q,ce),{cause:ue.cause||ue}):Vn.from(ue,ue&&ue.code,Q,ce)}}},r6=new Map,MC=t=>{let e=t?t.env:{};const{fetch:i,Request:n,Response:o}=e,u=[n,o,i];let A=u.length,a=A,g,b,B=r6;for(;a--;)g=u[a],b=B.get(g),b===void 0&&B.set(g,b=a?new Map:n6(e)),B=b;return b};MC();const ux={http:xF,xhr:XF,fetch:{get:MC}};qt.forEach(ux,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const H2=t=>`- ${t}`,s6=t=>qt.isFunction(t)||t===null||t===!1,IC={getAdapter:(t,e)=>{t=qt.isArray(t)?t:[t];const{length:i}=t;let n,o;const u={};for(let A=0;A<i;A++){n=t[A];let a;if(o=n,!s6(n)&&(o=ux[(a=String(n)).toLowerCase()],o===void 0))throw new Vn(`Unknown adapter '${a}'`);if(o&&(qt.isFunction(o)||(o=o.get(e))))break;u[a||"#"+A]=o}if(!o){const A=Object.entries(u).map(([g,b])=>`adapter ${g} `+(b===!1?"is not supported by the environment":"is not available in the build"));let a=i?A.length>1?`since :
`+A.map(H2).join(`
`):" "+H2(A[0]):"as no adapter specified";throw new Vn("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return o},adapters:ux};function l_(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new _m(null,t)}function V2(t){return l_(t),t.headers=fu.from(t.headers),t.data=o_.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),IC.getAdapter(t.adapter||C0.adapter,t)(t).then(function(n){return l_(t),n.data=o_.call(t,t.transformResponse,n),n.headers=fu.from(n.headers),n},function(n){return EC(n)||(l_(t),n&&n.response&&(n.response.data=o_.call(t,t.transformResponse,n.response),n.response.headers=fu.from(n.response.headers))),Promise.reject(n)})}const LC="1.12.2",r1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{r1[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const q2={};r1.transitional=function(e,i,n){function o(u,A){return"[Axios v"+LC+"] Transitional option '"+u+"'"+A+(n?". "+n:"")}return(u,A,a)=>{if(e===!1)throw new Vn(o(A," has been removed"+(i?" in "+i:"")),Vn.ERR_DEPRECATED);return i&&!q2[A]&&(q2[A]=!0,console.warn(o(A," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(u,A,a):!0}};r1.spelling=function(e){return(i,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function a6(t,e,i){if(typeof t!="object")throw new Vn("options must be an object",Vn.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let o=n.length;for(;o-- >0;){const u=n[o],A=e[u];if(A){const a=t[u],g=a===void 0||A(a,u,t);if(g!==!0)throw new Vn("option "+u+" must be "+g,Vn.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Vn("Unknown option "+u,Vn.ERR_BAD_OPTION)}}const fv={assertOptions:a6,validators:r1},ph=fv.validators;let Hf=class{constructor(e){this.defaults=e||{},this.interceptors={request:new L2,response:new L2}}async request(e,i){try{return await this._request(e,i)}catch(n){if(n instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const u=o.stack?o.stack.replace(/^.+\n/,""):"";try{n.stack?u&&!String(n.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+u):n.stack=u}catch{}}throw n}}_request(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=Yf(this.defaults,i);const{transitional:n,paramsSerializer:o,headers:u}=i;n!==void 0&&fv.assertOptions(n,{silentJSONParsing:ph.transitional(ph.boolean),forcedJSONParsing:ph.transitional(ph.boolean),clarifyTimeoutError:ph.transitional(ph.boolean)},!1),o!=null&&(qt.isFunction(o)?i.paramsSerializer={serialize:o}:fv.assertOptions(o,{encode:ph.function,serialize:ph.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),fv.assertOptions(i,{baseUrl:ph.spelling("baseURL"),withXsrfToken:ph.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let A=u&&qt.merge(u.common,u[i.method]);u&&qt.forEach(["delete","get","head","post","put","patch","common"],Q=>{delete u[Q]}),i.headers=fu.concat(A,u);const a=[];let g=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(i)===!1||(g=g&&R.synchronous,a.unshift(R.fulfilled,R.rejected))});const b=[];this.interceptors.response.forEach(function(R){b.push(R.fulfilled,R.rejected)});let B,I=0,P;if(!g){const Q=[V2.bind(this),void 0];for(Q.unshift(...a),Q.push(...b),P=Q.length,B=Promise.resolve(i);I<P;)B=B.then(Q[I++],Q[I++]);return B}P=a.length;let F=i;for(;I<P;){const Q=a[I++],R=a[I++];try{F=Q(F)}catch(H){R.call(this,H);break}}try{B=V2.call(this,F)}catch(Q){return Promise.reject(Q)}for(I=0,P=b.length;I<P;)B=B.then(b[I++],b[I++]);return B}getUri(e){e=Yf(this.defaults,e);const i=FC(e.baseURL,e.url,e.allowAbsoluteUrls);return BC(i,e.params,e.paramsSerializer)}};qt.forEach(["delete","get","head","options"],function(e){Hf.prototype[e]=function(i,n){return this.request(Yf(n||{},{method:e,url:i,data:(n||{}).data}))}});qt.forEach(["post","put","patch"],function(e){function i(n){return function(u,A,a){return this.request(Yf(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:u,data:A}))}}Hf.prototype[e]=i(),Hf.prototype[e+"Form"]=i(!0)});let o6=class PC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(u){i=u});const n=this;this.promise.then(o=>{if(!n._listeners)return;let u=n._listeners.length;for(;u-- >0;)n._listeners[u](o);n._listeners=null}),this.promise.then=o=>{let u;const A=new Promise(a=>{n.subscribe(a),u=a}).then(o);return A.cancel=function(){n.unsubscribe(u)},A},e(function(u,A,a){n.reason||(n.reason=new _m(u,A,a),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const i=this._listeners.indexOf(e);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const e=new AbortController,i=n=>{e.abort(n)};return this.subscribe(i),e.signal.unsubscribe=()=>this.unsubscribe(i),e.signal}static source(){let e;return{token:new PC(function(o){e=o}),cancel:e}}};function l6(t){return function(i){return t.apply(null,i)}}function c6(t){return qt.isObject(t)&&t.isAxiosError===!0}const Ax={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ax).forEach(([t,e])=>{Ax[e]=t});function kC(t){const e=new Hf(t),i=hC(Hf.prototype.request,e);return qt.extend(i,Hf.prototype,e,{allOwnKeys:!0}),qt.extend(i,e,null,{allOwnKeys:!0}),i.create=function(o){return kC(Yf(t,o))},i}const Xa=kC(C0);Xa.Axios=Hf;Xa.CanceledError=_m;Xa.CancelToken=o6;Xa.isCancel=EC;Xa.VERSION=LC;Xa.toFormData=n1;Xa.AxiosError=Vn;Xa.Cancel=Xa.CanceledError;Xa.all=function(e){return Promise.all(e)};Xa.spread=l6;Xa.isAxiosError=c6;Xa.mergeConfig=Yf;Xa.AxiosHeaders=fu;Xa.formToJSON=t=>SC(qt.isHTMLForm(t)?new FormData(t):t);Xa.getAdapter=IC.getAdapter;Xa.HttpStatusCode=Ax;Xa.default=Xa;const{Axios:lz,AxiosError:cz,CanceledError:uz,isCancel:Az,CancelToken:hz,VERSION:dz,all:fz,Cancel:pz,isAxiosError:mz,spread:gz,toFormData:yz,AxiosHeaders:vz,HttpStatusCode:_z,formToJSON:xz,getAdapter:bz,mergeConfig:wz}=Xa,u6="http://192.168.1.11:4000/api/v1",A6=5,h6=1e3,d6=2,Oi=Xa.create({baseURL:u6,withCredentials:!0});Oi.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t});Oi.interceptors.response.use(t=>t,t=>{const e=t.config;e._retryCount||(e._retryCount=0);const i=e.url?.includes("/user/register");if(t.response?.status===429&&e._retryCount<A6&&!i){e._retryCount+=1;const n=h6*Math.pow(d6,e._retryCount-1);return new Promise(o=>{setTimeout(()=>{o(Oi.request(e))},n)})}return Promise.reject(t)});let f6={data:""},p6=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||f6,m6=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,g6=/\/\*[^]*?\*\/|  +/g,G2=/\n+/g,Hd=(t,e)=>{let i="",n="",o="";for(let u in t){let A=t[u];u[0]=="@"?u[1]=="i"?i=u+" "+A+";":n+=u[1]=="f"?Hd(A,u):u+"{"+Hd(A,u[1]=="k"?"":e)+"}":typeof A=="object"?n+=Hd(A,e?e.replace(/([^,])+/g,a=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,a):a?a+" "+g:g)):u):A!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Hd.p?Hd.p(u,A):u+":"+A+";")}return i+(e&&o?e+"{"+o+"}":o)+n},Wh={},jC=t=>{if(typeof t=="object"){let e="";for(let i in t)e+=i+jC(t[i]);return e}return t},y6=(t,e,i,n,o)=>{let u=jC(t),A=Wh[u]||(Wh[u]=(g=>{let b=0,B=11;for(;b<g.length;)B=101*B+g.charCodeAt(b++)>>>0;return"go"+B})(u));if(!Wh[A]){let g=u!==t?t:(b=>{let B,I,P=[{}];for(;B=m6.exec(b.replace(g6,""));)B[4]?P.shift():B[3]?(I=B[3].replace(G2," ").trim(),P.unshift(P[0][I]=P[0][I]||{})):P[0][B[1]]=B[2].replace(G2," ").trim();return P[0]})(t);Wh[A]=Hd(o?{["@keyframes "+A]:g}:g,i?"":"."+A)}let a=i&&Wh.g?Wh.g:null;return i&&(Wh.g=Wh[A]),((g,b,B,I)=>{I?b.data=b.data.replace(I,g):b.data.indexOf(g)===-1&&(b.data=B?g+b.data:b.data+g)})(Wh[A],e,n,a),A},v6=(t,e,i)=>t.reduce((n,o,u)=>{let A=e[u];if(A&&A.call){let a=A(i),g=a&&a.props&&a.props.className||/^go/.test(a)&&a;A=g?"."+g:a&&typeof a=="object"?a.props?"":Hd(a,""):a===!1?"":a}return n+o+(A??"")},"");function s1(t){let e=this||{},i=t.call?t(e.p):t;return y6(i.unshift?i.raw?v6(i,[].slice.call(arguments,1),e.p):i.reduce((n,o)=>Object.assign(n,o&&o.call?o(e.p):o),{}):i,p6(e.target),e.g,e.o,e.k)}let UC,hx,dx;s1.bind({g:1});let od=s1.bind({k:1});function _6(t,e,i,n){Hd.p=e,UC=t,hx=i,dx=n}function of(t,e){let i=this||{};return function(){let n=arguments;function o(u,A){let a=Object.assign({},u),g=a.className||o.className;i.p=Object.assign({theme:hx&&hx()},a),i.o=/ *go\d+/.test(g),a.className=s1.apply(i,n)+(g?" "+g:"");let b=t;return t[0]&&(b=a.as||t,delete a.as),dx&&b[0]&&dx(a),UC(b,a)}return o}}var x6=t=>typeof t=="function",fx=(t,e)=>x6(t)?t(e):t,b6=(()=>{let t=0;return()=>(++t).toString()})(),w6=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),B6=20,DC="default",RC=(t,e)=>{let{toastLimit:i}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,i)};case 1:return{...t,toasts:t.toasts.map(A=>A.id===e.toast.id?{...A,...e.toast}:A)};case 2:let{toast:n}=e;return RC(t,{type:t.toasts.find(A=>A.id===n.id)?1:0,toast:n});case 3:let{toastId:o}=e;return{...t,toasts:t.toasts.map(A=>A.id===o||o===void 0?{...A,dismissed:!0,visible:!1}:A)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(A=>A.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let u=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(A=>({...A,pauseDuration:A.pauseDuration+u}))}}},C6=[],S6={toasts:[],pausedAt:void 0,settings:{toastLimit:B6}},sm={},OC=(t,e=DC)=>{sm[e]=RC(sm[e]||S6,t),C6.forEach(([i,n])=>{i===e&&n(sm[e])})},QC=t=>Object.keys(sm).forEach(e=>OC(t,e)),E6=t=>Object.keys(sm).find(e=>sm[e].toasts.some(i=>i.id===t)),Eb=(t=DC)=>e=>{OC(e,t)},T6=(t,e="blank",i)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...i,id:i?.id||b6()}),S0=t=>(e,i)=>{let n=T6(e,t,i);return Eb(n.toasterId||E6(n.id))({type:2,toast:n}),n.id},Dl=(t,e)=>S0("blank")(t,e);Dl.error=S0("error");Dl.success=S0("success");Dl.loading=S0("loading");Dl.custom=S0("custom");Dl.dismiss=(t,e)=>{let i={type:3,toastId:t};e?Eb(e)(i):QC(i)};Dl.dismissAll=t=>Dl.dismiss(void 0,t);Dl.remove=(t,e)=>{let i={type:4,toastId:t};e?Eb(e)(i):QC(i)};Dl.removeAll=t=>Dl.remove(void 0,t);Dl.promise=(t,e,i)=>{let n=Dl.loading(e.loading,{...i,...i?.loading});return typeof t=="function"&&(t=t()),t.then(o=>{let u=e.success?fx(e.success,o):void 0;return u?Dl.success(u,{id:n,...i,...i?.success}):Dl.dismiss(n),o}).catch(o=>{let u=e.error?fx(e.error,o):void 0;u?Dl.error(u,{id:n,...i,...i?.error}):Dl.dismiss(n)}),t};var F6=od`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,N6=od`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,M6=od`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,I6=of("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${F6} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${N6} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${M6} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,L6=od`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,P6=of("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${L6} 1s linear infinite;
`,k6=od`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,j6=od`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,U6=of("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${k6} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${j6} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,D6=of("div")`
  position: absolute;
`,R6=of("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,O6=od`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Q6=of("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${O6} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,z6=({toast:t})=>{let{icon:e,type:i,iconTheme:n}=t;return e!==void 0?typeof e=="string"?Te.createElement(Q6,null,e):e:i==="blank"?null:Te.createElement(R6,null,Te.createElement(P6,{...n}),i!=="loading"&&Te.createElement(D6,null,i==="error"?Te.createElement(I6,{...n}):Te.createElement(U6,{...n})))},H6=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,V6=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,q6="0%{opacity:0;} 100%{opacity:1;}",G6="0%{opacity:1;} 100%{opacity:0;}",K6=of("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,W6=of("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$6=(t,e)=>{let i=t.includes("top")?1:-1,[n,o]=w6()?[q6,G6]:[H6(i),V6(i)];return{animation:e?`${od(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${od(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};Te.memo(({toast:t,position:e,style:i,children:n})=>{let o=t.height?$6(t.position||e||"top-center",t.visible):{opacity:0},u=Te.createElement(z6,{toast:t}),A=Te.createElement(W6,{...t.ariaProps},fx(t.message,t));return Te.createElement(K6,{className:t.className,style:{...o,...i,...t.style}},typeof n=="function"?n({icon:u,message:A}):Te.createElement(Te.Fragment,null,u,A))});_6(Te.createElement);s1`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Si=Dl;const Ch=Object.create(null);Ch.open="0";Ch.close="1";Ch.ping="2";Ch.pong="3";Ch.message="4";Ch.upgrade="5";Ch.noop="6";const pv=Object.create(null);Object.keys(Ch).forEach(t=>{pv[Ch[t]]=t});const px={type:"error",data:"parser error"},zC=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",HC=typeof ArrayBuffer=="function",VC=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Tb=({type:t,data:e},i,n)=>zC&&e instanceof Blob?i?n(e):K2(e,n):HC&&(e instanceof ArrayBuffer||VC(e))?i?n(e):K2(new Blob([e]),n):n(Ch[t]+(e||"")),K2=(t,e)=>{const i=new FileReader;return i.onload=function(){const n=i.result.split(",")[1];e("b"+(n||""))},i.readAsDataURL(t)};function W2(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let c_;function Z6(t,e){if(zC&&t.data instanceof Blob)return t.data.arrayBuffer().then(W2).then(e);if(HC&&(t.data instanceof ArrayBuffer||VC(t.data)))return e(W2(t.data));Tb(t,!1,i=>{c_||(c_=new TextEncoder),e(c_.encode(i))})}const $2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<$2.length;t++)Mg[$2.charCodeAt(t)]=t;const X6=t=>{let e=t.length*.75,i=t.length,n,o=0,u,A,a,g;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const b=new ArrayBuffer(e),B=new Uint8Array(b);for(n=0;n<i;n+=4)u=Mg[t.charCodeAt(n)],A=Mg[t.charCodeAt(n+1)],a=Mg[t.charCodeAt(n+2)],g=Mg[t.charCodeAt(n+3)],B[o++]=u<<2|A>>4,B[o++]=(A&15)<<4|a>>2,B[o++]=(a&3)<<6|g&63;return b},Y6=typeof ArrayBuffer=="function",Fb=(t,e)=>{if(typeof t!="string")return{type:"message",data:qC(t,e)};const i=t.charAt(0);return i==="b"?{type:"message",data:J6(t.substring(1),e)}:pv[i]?t.length>1?{type:pv[i],data:t.substring(1)}:{type:pv[i]}:px},J6=(t,e)=>{if(Y6){const i=X6(t);return qC(i,e)}else return{base64:!0,data:t}},qC=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},GC="",eN=(t,e)=>{const i=t.length,n=new Array(i);let o=0;t.forEach((u,A)=>{Tb(u,!1,a=>{n[A]=a,++o===i&&e(n.join(GC))})})},tN=(t,e)=>{const i=t.split(GC),n=[];for(let o=0;o<i.length;o++){const u=Fb(i[o],e);if(n.push(u),u.type==="error")break}return n};function iN(){return new TransformStream({transform(t,e){Z6(t,i=>{const n=i.length;let o;if(n<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,n);else if(n<65536){o=new Uint8Array(3);const u=new DataView(o.buffer);u.setUint8(0,126),u.setUint16(1,n)}else{o=new Uint8Array(9);const u=new DataView(o.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(i)})}})}let u_;function _y(t){return t.reduce((e,i)=>e+i.length,0)}function xy(t,e){if(t[0].length===e)return t.shift();const i=new Uint8Array(e);let n=0;for(let o=0;o<e;o++)i[o]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),i}function nN(t,e){u_||(u_=new TextDecoder);const i=[];let n=0,o=-1,u=!1;return new TransformStream({transform(A,a){for(i.push(A);;){if(n===0){if(_y(i)<1)break;const g=xy(i,1);u=(g[0]&128)===128,o=g[0]&127,o<126?n=3:o===126?n=1:n=2}else if(n===1){if(_y(i)<2)break;const g=xy(i,2);o=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),n=3}else if(n===2){if(_y(i)<8)break;const g=xy(i,8),b=new DataView(g.buffer,g.byteOffset,g.length),B=b.getUint32(0);if(B>Math.pow(2,21)-1){a.enqueue(px);break}o=B*Math.pow(2,32)+b.getUint32(4),n=3}else{if(_y(i)<o)break;const g=xy(i,o);a.enqueue(Fb(u?g:u_.decode(g),e)),n=0}if(o===0||o>t){a.enqueue(px);break}}}})}const KC=4;function yo(t){if(t)return rN(t)}function rN(t){for(var e in yo.prototype)t[e]=yo.prototype[e];return t}yo.prototype.on=yo.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};yo.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this};yo.prototype.off=yo.prototype.removeListener=yo.prototype.removeAllListeners=yo.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,o=0;o<i.length;o++)if(n=i[o],n===e||n.fn===e){i.splice(o,1);break}return i.length===0&&delete this._callbacks["$"+t],this};yo.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){i=i.slice(0);for(var n=0,o=i.length;n<o;++n)i[n].apply(this,e)}return this};yo.prototype.emitReserved=yo.prototype.emit;yo.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};yo.prototype.hasListeners=function(t){return!!this.listeners(t).length};const a1=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,i)=>i(e,0),uA=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),sN="arraybuffer";function WC(t,...e){return e.reduce((i,n)=>(t.hasOwnProperty(n)&&(i[n]=t[n]),i),{})}const aN=uA.setTimeout,oN=uA.clearTimeout;function o1(t,e){e.useNativeTimers?(t.setTimeoutFn=aN.bind(uA),t.clearTimeoutFn=oN.bind(uA)):(t.setTimeoutFn=uA.setTimeout.bind(uA),t.clearTimeoutFn=uA.clearTimeout.bind(uA))}const lN=1.33;function cN(t){return typeof t=="string"?uN(t):Math.ceil((t.byteLength||t.size)*lN)}function uN(t){let e=0,i=0;for(let n=0,o=t.length;n<o;n++)e=t.charCodeAt(n),e<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(n++,i+=4);return i}function $C(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function AN(t){let e="";for(let i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}function hN(t){let e={},i=t.split("&");for(let n=0,o=i.length;n<o;n++){let u=i[n].split("=");e[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return e}class dN extends Error{constructor(e,i,n){super(e),this.description=i,this.context=n,this.type="TransportError"}}class Nb extends yo{constructor(e){super(),this.writable=!1,o1(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,i,n){return super.emitReserved("error",new dN(e,i,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const i=Fb(e,this.socket.binaryType);this.onPacket(i)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,i={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(i)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const i=AN(e);return i.length?"?"+i:""}}class fN extends Nb{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const i=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||i()})),this.writable||(n++,this.once("drain",function(){--n||i()}))}else i()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const i=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};tN(e,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,eN(e,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",i=this.query||{};return this.opts.timestampRequests!==!1&&(i[this.opts.timestampParam]=$C()),!this.supportsBinary&&!i.sid&&(i.b64=1),this.createUri(e,i)}}let ZC=!1;try{ZC=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const pN=ZC;function mN(){}class gN extends fN{constructor(e){if(super(e),typeof location<"u"){const i=location.protocol==="https:";let n=location.port;n||(n=i?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,i){const n=this.request({method:"POST",data:e});n.on("success",i),n.on("error",(o,u)=>{this.onError("xhr post error",o,u)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(i,n)=>{this.onError("xhr poll error",i,n)}),this.pollXhr=e}}let am=class mv extends yo{constructor(e,i,n){super(),this.createRequest=e,o1(this,n),this._opts=n,this._method=n.method||"GET",this._uri=i,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const i=WC(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(i);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var o;n.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=mv.requestsCount++,mv.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=mN,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete mv.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};am.requestsCount=0;am.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Z2);else if(typeof addEventListener=="function"){const t="onpagehide"in uA?"pagehide":"unload";addEventListener(t,Z2,!1)}}function Z2(){for(let t in am.requests)am.requests.hasOwnProperty(t)&&am.requests[t].abort()}const yN=function(){const t=XC({xdomain:!1});return t&&t.responseType!==null}();class vN extends gN{constructor(e){super(e);const i=e&&e.forceBase64;this.supportsBinary=yN&&!i}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new am(XC,this.uri(),e)}}function XC(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||pN))return new XMLHttpRequest}catch{}if(!e)try{return new uA[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const YC=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class _N extends Nb{get name(){return"websocket"}doOpen(){const e=this.uri(),i=this.opts.protocols,n=YC?{}:WC(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,i,n)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let i=0;i<e.length;i++){const n=e[i],o=i===e.length-1;Tb(n,this.supportsBinary,u=>{try{this.doWrite(n,u)}catch{}o&&a1(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",i=this.query||{};return this.opts.timestampRequests&&(i[this.opts.timestampParam]=$C()),this.supportsBinary||(i.b64=1),this.createUri(e,i)}}const A_=uA.WebSocket||uA.MozWebSocket;class xN extends _N{createSocket(e,i,n){return YC?new A_(e,i,n):i?new A_(e,i):new A_(e)}doWrite(e,i){this.ws.send(i)}}class bN extends Nb{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const i=nN(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(i).getReader(),o=iN();o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const u=()=>{n.read().then(({done:a,value:g})=>{a||(this.onPacket(g),u())}).catch(a=>{})};u();const A={type:"open"};this.query.sid&&(A.data=`{"sid":"${this.query.sid}"}`),this._writer.write(A).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let i=0;i<e.length;i++){const n=e[i],o=i===e.length-1;this._writer.write(n).then(()=>{o&&a1(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const wN={websocket:xN,webtransport:bN,polling:vN},BN=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,CN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function mx(t){if(t.length>8e3)throw"URI too long";const e=t,i=t.indexOf("["),n=t.indexOf("]");i!=-1&&n!=-1&&(t=t.substring(0,i)+t.substring(i,n).replace(/:/g,";")+t.substring(n,t.length));let o=BN.exec(t||""),u={},A=14;for(;A--;)u[CN[A]]=o[A]||"";return i!=-1&&n!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=SN(u,u.path),u.queryKey=EN(u,u.query),u}function SN(t,e){const i=/\/{2,9}/g,n=e.replace(i,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function EN(t,e){const i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,o,u){o&&(i[o]=u)}),i}const gx=typeof addEventListener=="function"&&typeof removeEventListener=="function",gv=[];gx&&addEventListener("offline",()=>{gv.forEach(t=>t())},!1);class Xd extends yo{constructor(e,i){if(super(),this.binaryType=sN,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(i=e,e=null),e){const n=mx(e);i.hostname=n.host,i.secure=n.protocol==="https"||n.protocol==="wss",i.port=n.port,n.query&&(i.query=n.query)}else i.host&&(i.hostname=mx(i.host).host);o1(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},i.transports.forEach(n=>{const o=n.prototype.name;this.transports.push(o),this._transportsByName[o]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=hN(this.opts.query)),gx&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},gv.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const i=Object.assign({},this.opts.query);i.EIO=KC,i.transport=e,this.id&&(i.sid=this.id);const n=Object.assign({},this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Xd.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const i=this.createTransport(e);i.open(),this.setTransport(i)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",i=>this._onClose("transport close",i))}onOpen(){this.readyState="open",Xd.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const i=new Error("server error");i.code=e.data,this._onError(i);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let n=0;n<this.writeBuffer.length;n++){const o=this.writeBuffer[n].data;if(o&&(i+=cN(o)),n>0&&i>this._maxPayload)return this.writeBuffer.slice(0,n);i+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,a1(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,i,n){return this._sendPacket("message",e,i,n),this}send(e,i,n){return this._sendPacket("message",e,i,n),this}_sendPacket(e,i,n,o){if(typeof i=="function"&&(o=i,i=void 0),typeof n=="function"&&(o=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const u={type:e,data:i,options:n};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),e()},n=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Xd.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),gx&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=gv.indexOf(this._offlineEventListener);n!==-1&&gv.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,i),this.writeBuffer=[],this._prevBufferLen=0}}}Xd.protocol=KC;class TN extends Xd{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let i=this.createTransport(e),n=!1;Xd.priorWebsocketSuccess=!1;const o=()=>{n||(i.send([{type:"ping",data:"probe"}]),i.once("packet",I=>{if(!n)if(I.type==="pong"&&I.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;Xd.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(B(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const P=new Error("probe error");P.transport=i.name,this.emitReserved("upgradeError",P)}}))};function u(){n||(n=!0,B(),i.close(),i=null)}const A=I=>{const P=new Error("probe error: "+I);P.transport=i.name,u(),this.emitReserved("upgradeError",P)};function a(){A("transport closed")}function g(){A("socket closed")}function b(I){i&&I.name!==i.name&&u()}const B=()=>{i.removeListener("open",o),i.removeListener("error",A),i.removeListener("close",a),this.off("close",g),this.off("upgrading",b)};i.once("open",o),i.once("error",A),i.once("close",a),this.once("close",g),this.once("upgrading",b),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||i.open()},200):i.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const i=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&i.push(e[n]);return i}}let FN=class extends TN{constructor(e,i={}){const n=typeof e=="object"?e:i;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(o=>wN[o]).filter(o=>!!o)),super(e,n)}};function NN(t,e="",i){let n=t;i=i||typeof location<"u"&&location,t==null&&(t=i.protocol+"//"+i.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=i.protocol+t:t=i.host+t),/^(https?|wss?):\/\//.test(t)||(typeof i<"u"?t=i.protocol+"//"+t:t="https://"+t),n=mx(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const u=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+u+":"+n.port+e,n.href=n.protocol+"://"+u+(i&&i.port===n.port?"":":"+n.port),n}const MN=typeof ArrayBuffer=="function",IN=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,JC=Object.prototype.toString,LN=typeof Blob=="function"||typeof Blob<"u"&&JC.call(Blob)==="[object BlobConstructor]",PN=typeof File=="function"||typeof File<"u"&&JC.call(File)==="[object FileConstructor]";function Mb(t){return MN&&(t instanceof ArrayBuffer||IN(t))||LN&&t instanceof Blob||PN&&t instanceof File}function yv(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let i=0,n=t.length;i<n;i++)if(yv(t[i]))return!0;return!1}if(Mb(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return yv(t.toJSON(),!0);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&yv(t[i]))return!0;return!1}function kN(t){const e=[],i=t.data,n=t;return n.data=yx(i,e),n.attachments=e.length,{packet:n,buffers:e}}function yx(t,e){if(!t)return t;if(Mb(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}else if(Array.isArray(t)){const i=new Array(t.length);for(let n=0;n<t.length;n++)i[n]=yx(t[n],e);return i}else if(typeof t=="object"&&!(t instanceof Date)){const i={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=yx(t[n],e));return i}return t}function jN(t,e){return t.data=vx(t.data,e),delete t.attachments,t}function vx(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=vx(t[i],e);else if(typeof t=="object")for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=vx(t[i],e));return t}const UN=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],DN=5;var Sr;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Sr||(Sr={}));class RN{constructor(e){this.replacer=e}encode(e){return(e.type===Sr.EVENT||e.type===Sr.ACK)&&yv(e)?this.encodeAsBinary({type:e.type===Sr.EVENT?Sr.BINARY_EVENT:Sr.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let i=""+e.type;return(e.type===Sr.BINARY_EVENT||e.type===Sr.BINARY_ACK)&&(i+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(i+=e.nsp+","),e.id!=null&&(i+=e.id),e.data!=null&&(i+=JSON.stringify(e.data,this.replacer)),i}encodeAsBinary(e){const i=kN(e),n=this.encodeAsString(i.packet),o=i.buffers;return o.unshift(n),o}}function X2(t){return Object.prototype.toString.call(t)==="[object Object]"}class Ib extends yo{constructor(e){super(),this.reviver=e}add(e){let i;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(e);const n=i.type===Sr.BINARY_EVENT;n||i.type===Sr.BINARY_ACK?(i.type=n?Sr.EVENT:Sr.ACK,this.reconstructor=new ON(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(Mb(e)||e.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(e),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let i=0;const n={type:Number(e.charAt(0))};if(Sr[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Sr.BINARY_EVENT||n.type===Sr.BINARY_ACK){const u=i+1;for(;e.charAt(++i)!=="-"&&i!=e.length;);const A=e.substring(u,i);if(A!=Number(A)||e.charAt(i)!=="-")throw new Error("Illegal attachments");n.attachments=Number(A)}if(e.charAt(i+1)==="/"){const u=i+1;for(;++i&&!(e.charAt(i)===","||i===e.length););n.nsp=e.substring(u,i)}else n.nsp="/";const o=e.charAt(i+1);if(o!==""&&Number(o)==o){const u=i+1;for(;++i;){const A=e.charAt(i);if(A==null||Number(A)!=A){--i;break}if(i===e.length)break}n.id=Number(e.substring(u,i+1))}if(e.charAt(++i)){const u=this.tryParse(e.substr(i));if(Ib.isPayloadValid(n.type,u))n.data=u;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,i){switch(e){case Sr.CONNECT:return X2(i);case Sr.DISCONNECT:return i===void 0;case Sr.CONNECT_ERROR:return typeof i=="string"||X2(i);case Sr.EVENT:case Sr.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&UN.indexOf(i[0])===-1);case Sr.ACK:case Sr.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ON{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const i=jN(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const QN=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ib,Encoder:RN,get PacketType(){return Sr},protocol:DN},Symbol.toStringTag,{value:"Module"}));function VA(t,e,i){return t.on(e,i),function(){t.off(e,i)}}const zN=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class e4 extends yo{constructor(e,i,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=i,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[VA(e,"open",this.onopen.bind(this)),VA(e,"packet",this.onpacket.bind(this)),VA(e,"error",this.onerror.bind(this)),VA(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...i){var n,o,u;if(zN.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(i.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const A={type:Sr.EVENT,data:i};if(A.options={},A.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const B=this.ids++,I=i.pop();this._registerAckCallback(B,I),A.id=B}const a=(o=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||o===void 0?void 0:o.writable,g=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!a||(g?(this.notifyOutgoingListeners(A),this.packet(A)):this.sendBuffer.push(A)),this.flags={},this}_registerAckCallback(e,i){var n;const o=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(o===void 0){this.acks[e]=i;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);i.call(this,new Error("operation has timed out"))},o),A=(...a)=>{this.io.clearTimeoutFn(u),i.apply(this,a)};A.withError=!0,this.acks[e]=A}emitWithAck(e,...i){return new Promise((n,o)=>{const u=(A,a)=>A?o(A):n(a);u.withError=!0,i.push(u),this.emit(e,...i)})}_addToQueue(e){let i;typeof e[e.length-1]=="function"&&(i=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...u)=>n!==this._queue[0]?void 0:(o!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(o)):(this._queue.shift(),i&&i(null,...u)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!e||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Sr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,i),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Sr.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Sr.EVENT:case Sr.BINARY_EVENT:this.onevent(e);break;case Sr.ACK:case Sr.BINARY_ACK:this.onack(e);break;case Sr.DISCONNECT:this.ondisconnect();break;case Sr.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const i=e.data||[];e.id!=null&&i.push(this.ack(e.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const n of i)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const i=this;let n=!1;return function(...o){n||(n=!0,i.packet({type:Sr.ACK,id:e,data:o}))}}onack(e){const i=this.acks[e.id];typeof i=="function"&&(delete this.acks[e.id],i.withError&&e.data.unshift(null),i.apply(this,e.data))}onconnect(e,i){this.id=e,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Sr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const i=this._anyListeners;for(let n=0;n<i.length;n++)if(e===i[n])return i.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const i=this._anyOutgoingListeners;for(let n=0;n<i.length;n++)if(e===i[n])return i.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const n of i)n.apply(this,e.data)}}}function xm(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}xm.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-i:t+i}return Math.min(t,this.max)|0};xm.prototype.reset=function(){this.attempts=0};xm.prototype.setMin=function(t){this.ms=t};xm.prototype.setMax=function(t){this.max=t};xm.prototype.setJitter=function(t){this.jitter=t};class _x extends yo{constructor(e,i){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(i=e,e=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,o1(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((n=i.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new xm({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=e;const o=i.parser||QN;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var i;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(i=this.backoff)===null||i===void 0||i.setMin(e),this)}randomizationFactor(e){var i;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(i=this.backoff)===null||i===void 0||i.setJitter(e),this)}reconnectionDelayMax(e){var i;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(i=this.backoff)===null||i===void 0||i.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new FN(this.uri,this.opts);const i=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const o=VA(i,"open",function(){n.onopen(),e&&e()}),u=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},A=VA(i,"error",u);if(this._timeout!==!1){const a=this._timeout,g=this.setTimeoutFn(()=>{o(),u(new Error("timeout")),i.close()},a);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(o),this.subs.push(A),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(VA(e,"ping",this.onping.bind(this)),VA(e,"data",this.ondata.bind(this)),VA(e,"error",this.onerror.bind(this)),VA(e,"close",this.onclose.bind(this)),VA(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(i){this.onclose("parse error",i)}}ondecoded(e){a1(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,i){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new e4(this,e,i),this.nsps[e]=n),n}_destroy(e){const i=Object.keys(this.nsps);for(const n of i)if(this.nsps[n].active)return;this._close()}_packet(e){const i=this.encoder.encode(e);for(let n=0;n<i.length;n++)this.engine.write(i[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,i){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},i);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const gg={};function vv(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const i=NN(t,e.path||"/socket.io"),n=i.source,o=i.id,u=i.path,A=gg[o]&&u in gg[o].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||A;let g;return a?g=new _x(n,e):(gg[o]||(gg[o]=new _x(n,e)),g=gg[o]),i.query&&!e.query&&(e.query=i.queryKey),g.socket(i.path,e)}Object.assign(vv,{Manager:_x,Socket:e4,io:vv,connect:vv});let qr=null,om=[];const dr={on(t,e){if(qr&&typeof qr.on=="function")return qr.on(t,e);om.push({event:t,cb:e})},off(t,e){if(qr&&typeof qr.off=="function")return qr.off(t,e);om=om.filter(i=>i.event!==t?!0:e?i.cb!==e:!1)},emit(t,...e){if(qr&&typeof qr.emit=="function")return qr.emit(t,...e)},disconnect(){qr&&typeof qr.disconnect=="function"&&(qr.disconnect(),qr=null)},get connected(){return qr?qr.connected:!1},_getRaw(){return qr}},HN=t=>t?(qr=vv("http://192.168.1.11:4000",{withCredentials:!0,auth:{token:t}}),qr.on("connect_error",e=>{console.warn("Socket connection error:",e.message),e.message==="Authentication error"&&(qr.disconnect(),qr=null)}),qr.on("connect",()=>{console.log("Socket connected successfully")}),om.length>0&&(om.forEach(({event:e,cb:i})=>{try{qr.on(e,i)}catch(n){console.error("Failed to attach pending listener",e,n)}}),om=[]),qr):null,xx=t=>{qr&&(qr.disconnect(),qr=null),t?(localStorage.setItem("token",t),qr=HN(t)):(localStorage.removeItem("token"),qr=null)},by=()=>{qr&&(qr.disconnect(),qr=null),localStorage.removeItem("token")},t4=Te.createContext(),VN=({children:t})=>{const[e,i]=Te.useState(!1),[n,o]=Te.useState(!1),[u,A]=Te.useState(null),[a,g]=Te.useState(null),[b,B]=Te.useState(null),[I,P]=Te.useState(!1),[F,Q]=Te.useState(!1),[R,H]=Te.useState(null),j=Te.useRef(!1),V=async(te=null)=>{if(!F){Q(!0);try{const de=localStorage.getItem("tokenType"),ee=JSON.parse(localStorage.getItem("admin")||"null"),re=JSON.parse(localStorage.getItem("user")||"null");let xe;if(de==="admin"?ee&&(xe=(await Oi.get("/admin/auth/me")).data):re&&(xe=(await Oi.get("/user/me")).data),xe&&xe.success&&xe.user){const Be=xe.user;if(Be.type==="admin"||Be.role==="Admin")B(Be),i(!0),A("admin"),g(null),localStorage.setItem("admin",JSON.stringify(Be));else{if(Be.banned){localStorage.clear(),by(),g(null),B(null),P(!1),i(!1),A(null),Si.error("Your account has been banned");return}g(Be),i(!0),A("user"),B(null),P(Be.isVerified||!1),localStorage.setItem("user",JSON.stringify(Be))}const se=localStorage.getItem("token");se&&xx(se),te&&te(de==="admin"?"/admin/analytics":"/user/my-service");return}}catch(de){console.warn("Authentication failed:",de.message),localStorage.removeItem("token"),by();try{if(localStorage.getItem("tokenType")==="admin"){const re=JSON.parse(localStorage.getItem("admin")||"null");if(re){B(re),i(!0),A("admin"),g(null);return}}else{const re=JSON.parse(localStorage.getItem("user")||"null");if(re){g(re),i(!0),A("user"),B(null),P(re.isVerified||!1);return}}}catch{localStorage.clear(),by(),g(null),B(null),i(!1),A(null)}}finally{Q(!1),o(!0)}}},W=async()=>{try{await Promise.all([Oi.get("/user/logout",{withCredentials:!0}),Oi.get("/admin/auth/logout",{withCredentials:!0})])}catch{console.warn("Logout request failed, clearing local data anyway.")}localStorage.clear(),by(),g(null),B(null),P(!1),i(!1),A(null),Si.success("Logged out successfully")};Te.useEffect(()=>{if(j.current)return;j.current=!0;const te=JSON.parse(localStorage.getItem("user")||"null"),de=JSON.parse(localStorage.getItem("admin")||"null"),ee=localStorage.getItem("isAuthorized")==="true",re=localStorage.getItem("tokenType");if(de&&ee&&re==="admin"){B(de),i(!0),A("admin"),g(null),o(!0),V();return}te&&ee&&re==="user"&&(g(te),i(!0),A("user"),B(null),P(te.isVerified||!1),o(!0)),V()},[]);const ne=te=>{H(te)};return p.jsx(t4.Provider,{value:{isAuthorized:e,setIsAuthorized:i,authLoaded:n,tokenType:u,setTokenType:A,user:a,setUser:g,admin:b,setAdmin:B,isUserVerified:I,setIsUserVerified:P,fetchProfile:V,logout:W,openChatAppointmentId:R,setOpenChatAppointmentId:H,openChat:ne},children:t})},Ol=()=>Te.useContext(t4);function i4(t){var e,i,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(i=i4(t[e]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i);return n}function Vf(){for(var t,e,i=0,n="",o=arguments.length;i<o;i++)(t=arguments[i])&&(e=i4(t))&&(n&&(n+=" "),n+=e);return n}function qN(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}qN(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var E0=t=>typeof t=="number"&&!isNaN(t),Jf=t=>typeof t=="string",ld=t=>typeof t=="function",GN=t=>Jf(t)||E0(t),bx=t=>Jf(t)||ld(t)?t:null,KN=(t,e)=>t===!1||E0(t)&&t>0?t:e,wx=t=>Te.isValidElement(t)||Jf(t)||ld(t)||E0(t);function WN(t,e,i=300){let{scrollHeight:n,style:o}=t;requestAnimationFrame(()=>{o.minHeight="initial",o.height=n+"px",o.transition=`all ${i}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(e,i)})})}function $N({enter:t,exit:e,appendPosition:i=!1,collapse:n=!0,collapseDuration:o=300}){return function({children:u,position:A,preventExitTransition:a,done:g,nodeRef:b,isIn:B,playToast:I}){let P=i?`${t}--${A}`:t,F=i?`${e}--${A}`:e,Q=Te.useRef(0);return Te.useLayoutEffect(()=>{let R=b.current,H=P.split(" "),j=V=>{V.target===b.current&&(I(),R.removeEventListener("animationend",j),R.removeEventListener("animationcancel",j),Q.current===0&&V.type!=="animationcancel"&&R.classList.remove(...H))};R.classList.add(...H),R.addEventListener("animationend",j),R.addEventListener("animationcancel",j)},[]),Te.useEffect(()=>{let R=b.current,H=()=>{R.removeEventListener("animationend",H),n?WN(R,g,o):g()};B||(a?H():(Q.current=1,R.className+=` ${F}`,R.addEventListener("animationend",H)))},[B]),yr.createElement(yr.Fragment,null,u)}}function Y2(t,e){return{content:n4(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function n4(t,e,i=!1){return Te.isValidElement(t)&&!Jf(t.type)?Te.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:i}):ld(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:i}):t}function ZN({closeToast:t,theme:e,ariaLabel:i="close"}){return yr.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:n=>{n.stopPropagation(),t(!0)},"aria-label":i},yr.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},yr.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function XN({delay:t,isRunning:e,closeToast:i,type:n="default",hide:o,className:u,controlledProgress:A,progress:a,rtl:g,isIn:b,theme:B}){let I=o||A&&a===0,P={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};A&&(P.transform=`scaleX(${a})`);let F=Vf("Toastify__progress-bar",A?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${B}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":g}),Q=ld(u)?u({rtl:g,type:n,defaultClassName:F}):Vf(F,u),R={[A&&a>=1?"onTransitionEnd":"onAnimationEnd"]:A&&a<1?null:()=>{b&&i()}};return yr.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":I},yr.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${B} Toastify__progress-bar--${n}`}),yr.createElement("div",{role:"progressbar","aria-hidden":I?"true":"false","aria-label":"notification timer",className:Q,style:P,...R}))}var YN=1,r4=()=>`${YN++}`;function JN(t,e,i){let n=1,o=0,u=[],A=[],a=e,g=new Map,b=new Set,B=V=>(b.add(V),()=>b.delete(V)),I=()=>{A=Array.from(g.values()),b.forEach(V=>V())},P=({containerId:V,toastId:W,updateId:ne})=>{let te=V?V!==t:t!==1,de=g.has(W)&&ne==null;return te||de},F=(V,W)=>{g.forEach(ne=>{var te;(W==null||W===ne.props.toastId)&&((te=ne.toggle)==null||te.call(ne,V))})},Q=V=>{var W,ne;(ne=(W=V.props)==null?void 0:W.onClose)==null||ne.call(W,V.removalReason),V.isActive=!1},R=V=>{if(V==null)g.forEach(Q);else{let W=g.get(V);W&&Q(W)}I()},H=()=>{o-=u.length,u=[]},j=V=>{var W,ne;let{toastId:te,updateId:de}=V.props,ee=de==null;V.staleId&&g.delete(V.staleId),V.isActive=!0,g.set(te,V),I(),i(Y2(V,ee?"added":"updated")),ee&&((ne=(W=V.props).onOpen)==null||ne.call(W))};return{id:t,props:a,observe:B,toggle:F,removeToast:R,toasts:g,clearQueue:H,buildToast:(V,W)=>{if(P(W))return;let{toastId:ne,updateId:te,data:de,staleId:ee,delay:re}=W,xe=te==null;xe&&o++;let Be={...a,style:a.toastStyle,key:n++,...Object.fromEntries(Object.entries(W).filter(([ae,ce])=>ce!=null)),toastId:ne,updateId:te,data:de,isIn:!1,className:bx(W.className||a.toastClassName),progressClassName:bx(W.progressClassName||a.progressClassName),autoClose:W.isLoading?!1:KN(W.autoClose,a.autoClose),closeToast(ae){g.get(ne).removalReason=ae,R(ne)},deleteToast(){let ae=g.get(ne);if(ae!=null){if(i(Y2(ae,"removed")),g.delete(ne),o--,o<0&&(o=0),u.length>0){j(u.shift());return}I()}}};Be.closeButton=a.closeButton,W.closeButton===!1||wx(W.closeButton)?Be.closeButton=W.closeButton:W.closeButton===!0&&(Be.closeButton=wx(a.closeButton)?a.closeButton:!0);let se={content:V,props:Be,staleId:ee};a.limit&&a.limit>0&&o>a.limit&&xe?u.push(se):E0(re)?setTimeout(()=>{j(se)},re):j(se)},setProps(V){a=V},setToggle:(V,W)=>{let ne=g.get(V);ne&&(ne.toggle=W)},isToastActive:V=>{var W;return(W=g.get(V))==null?void 0:W.isActive},getSnapshot:()=>A}}var Qc=new Map,r0=[],Bx=new Set,eM=t=>Bx.forEach(e=>e(t)),s4=()=>Qc.size>0;function tM(){r0.forEach(t=>o4(t.content,t.options)),r0=[]}var iM=(t,{containerId:e})=>{var i;return(i=Qc.get(e||1))==null?void 0:i.toasts.get(t)};function a4(t,e){var i;if(e)return!!((i=Qc.get(e))!=null&&i.isToastActive(t));let n=!1;return Qc.forEach(o=>{o.isToastActive(t)&&(n=!0)}),n}function nM(t){if(!s4()){r0=r0.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||GN(t))Qc.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Qc.get(t.containerId);e?e.removeToast(t.id):Qc.forEach(i=>{i.removeToast(t.id)})}}var rM=(t={})=>{Qc.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function o4(t,e){wx(t)&&(s4()||r0.push({content:t,options:e}),Qc.forEach(i=>{i.buildToast(t,e)}))}function sM(t){var e;(e=Qc.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function l4(t,e){Qc.forEach(i=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===i.id)&&i.toggle(t,e?.id)})}function aM(t){let e=t.containerId||1;return{subscribe(i){let n=JN(e,t,eM);Qc.set(e,n);let o=n.observe(i);return tM(),()=>{o(),Qc.delete(e)}},setProps(i){var n;(n=Qc.get(e))==null||n.setProps(i)},getSnapshot(){var i;return(i=Qc.get(e))==null?void 0:i.getSnapshot()}}}function oM(t){return Bx.add(t),()=>{Bx.delete(t)}}function lM(t){return t&&(Jf(t.toastId)||E0(t.toastId))?t.toastId:r4()}function T0(t,e){return o4(t,e),e.toastId}function l1(t,e){return{...e,type:e&&e.type||t,toastId:lM(e)}}function c1(t){return(e,i)=>T0(e,l1(t,i))}function Lr(t,e){return T0(t,l1("default",e))}Lr.loading=(t,e)=>T0(t,l1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function cM(t,{pending:e,error:i,success:n},o){let u;e&&(u=Jf(e)?Lr.loading(e,o):Lr.loading(e.render,{...o,...e}));let A={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},a=(b,B,I)=>{if(B==null){Lr.dismiss(u);return}let P={type:b,...A,...o,data:I},F=Jf(B)?{render:B}:B;return u?Lr.update(u,{...P,...F}):Lr(F.render,{...P,...F}),I},g=ld(t)?t():t;return g.then(b=>a("success",n,b)).catch(b=>a("error",i,b)),g}Lr.promise=cM;Lr.success=c1("success");Lr.info=c1("info");Lr.error=c1("error");Lr.warning=c1("warning");Lr.warn=Lr.warning;Lr.dark=(t,e)=>T0(t,l1("default",{theme:"dark",...e}));function uM(t){nM(t)}Lr.dismiss=uM;Lr.clearWaitingQueue=rM;Lr.isActive=a4;Lr.update=(t,e={})=>{let i=iM(t,e);if(i){let{props:n,content:o}=i,u={delay:100,...n,...e,toastId:e.toastId||t,updateId:r4()};u.toastId!==t&&(u.staleId=t);let A=u.render||o;delete u.render,T0(A,u)}};Lr.done=t=>{Lr.update(t,{progress:1})};Lr.onChange=oM;Lr.play=t=>l4(!0,t);Lr.pause=t=>l4(!1,t);function AM(t){var e;let{subscribe:i,getSnapshot:n,setProps:o}=Te.useRef(aM(t)).current;o(t);let u=(e=Te.useSyncExternalStore(i,n,n))==null?void 0:e.slice();function A(a){if(!u)return[];let g=new Map;return t.newestOnTop&&u.reverse(),u.forEach(b=>{let{position:B}=b.props;g.has(B)||g.set(B,[]),g.get(B).push(b)}),Array.from(g,b=>a(b[0],b[1]))}return{getToastToRender:A,isToastActive:a4,count:u?.length}}function hM(t){let[e,i]=Te.useState(!1),[n,o]=Te.useState(!1),u=Te.useRef(null),A=Te.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:g,closeToast:b,onClick:B,closeOnClick:I}=t;sM({id:t.toastId,containerId:t.containerId,fn:i}),Te.useEffect(()=>{if(t.pauseOnFocusLoss)return P(),()=>{F()}},[t.pauseOnFocusLoss]);function P(){document.hasFocus()||j(),window.addEventListener("focus",H),window.addEventListener("blur",j)}function F(){window.removeEventListener("focus",H),window.removeEventListener("blur",j)}function Q(ee){if(t.draggable===!0||t.draggable===ee.pointerType){V();let re=u.current;A.canCloseOnClick=!0,A.canDrag=!0,re.style.transition="none",t.draggableDirection==="x"?(A.start=ee.clientX,A.removalDistance=re.offsetWidth*(t.draggablePercent/100)):(A.start=ee.clientY,A.removalDistance=re.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function R(ee){let{top:re,bottom:xe,left:Be,right:se}=u.current.getBoundingClientRect();ee.nativeEvent.type!=="touchend"&&t.pauseOnHover&&ee.clientX>=Be&&ee.clientX<=se&&ee.clientY>=re&&ee.clientY<=xe?j():H()}function H(){i(!0)}function j(){i(!1)}function V(){A.didMove=!1,document.addEventListener("pointermove",ne),document.addEventListener("pointerup",te)}function W(){document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",te)}function ne(ee){let re=u.current;if(A.canDrag&&re){A.didMove=!0,e&&j(),t.draggableDirection==="x"?A.delta=ee.clientX-A.start:A.delta=ee.clientY-A.start,A.start!==ee.clientX&&(A.canCloseOnClick=!1);let xe=t.draggableDirection==="x"?`${A.delta}px, var(--y)`:`0, calc(${A.delta}px + var(--y))`;re.style.transform=`translate3d(${xe},0)`,re.style.opacity=`${1-Math.abs(A.delta/A.removalDistance)}`}}function te(){W();let ee=u.current;if(A.canDrag&&A.didMove&&ee){if(A.canDrag=!1,Math.abs(A.delta)>A.removalDistance){o(!0),t.closeToast(!0),t.collapseAll();return}ee.style.transition="transform 0.2s, opacity 0.2s",ee.style.removeProperty("transform"),ee.style.removeProperty("opacity")}}let de={onPointerDown:Q,onPointerUp:R};return a&&g&&(de.onMouseEnter=j,t.stacked||(de.onMouseLeave=H)),I&&(de.onClick=ee=>{B&&B(ee),A.canCloseOnClick&&b(!0)}),{playToast:H,pauseToast:j,isRunning:e,preventExitTransition:n,toastRef:u,eventHandlers:de}}var dM=typeof window<"u"?Te.useLayoutEffect:Te.useEffect,u1=({theme:t,type:e,isLoading:i,...n})=>yr.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...n});function fM(t){return yr.createElement(u1,{...t},yr.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function pM(t){return yr.createElement(u1,{...t},yr.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function mM(t){return yr.createElement(u1,{...t},yr.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function gM(t){return yr.createElement(u1,{...t},yr.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function yM(){return yr.createElement("div",{className:"Toastify__spinner"})}var Cx={info:pM,warning:fM,success:mM,error:gM,spinner:yM},vM=t=>t in Cx;function _M({theme:t,type:e,isLoading:i,icon:n}){let o=null,u={theme:t,type:e};return n===!1||(ld(n)?o=n({...u,isLoading:i}):Te.isValidElement(n)?o=Te.cloneElement(n,u):i?o=Cx.spinner():vM(e)&&(o=Cx[e](u))),o}var xM=t=>{let{isRunning:e,preventExitTransition:i,toastRef:n,eventHandlers:o,playToast:u}=hM(t),{closeButton:A,children:a,autoClose:g,onClick:b,type:B,hideProgressBar:I,closeToast:P,transition:F,position:Q,className:R,style:H,progressClassName:j,updateId:V,role:W,progress:ne,rtl:te,toastId:de,deleteToast:ee,isIn:re,isLoading:xe,closeOnClick:Be,theme:se,ariaLabel:ae}=t,ce=Vf("Toastify__toast",`Toastify__toast-theme--${se}`,`Toastify__toast--${B}`,{"Toastify__toast--rtl":te},{"Toastify__toast--close-on-click":Be}),Ee=ld(R)?R({rtl:te,position:Q,type:B,defaultClassName:ce}):Vf(ce,R),Ve=_M(t),ue=!!ne||!g,fe={closeToast:P,type:B,theme:se},Ue=null;return A===!1||(ld(A)?Ue=A(fe):Te.isValidElement(A)?Ue=Te.cloneElement(A,fe):Ue=ZN(fe)),yr.createElement(F,{isIn:re,done:ee,position:Q,preventExitTransition:i,nodeRef:n,playToast:u},yr.createElement("div",{id:de,tabIndex:0,onClick:b,"data-in":re,className:Ee,...o,style:H,ref:n,...re&&{role:W,"aria-label":ae}},Ve!=null&&yr.createElement("div",{className:Vf("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!xe})},Ve),n4(a,t,!e),Ue,!t.customProgressBar&&yr.createElement(XN,{...V&&!ue?{key:`p-${V}`}:{},rtl:te,theme:se,delay:g,isRunning:e,isIn:re,closeToast:P,hide:I,type:B,className:j,controlledProgress:ue,progress:ne||0})))},bM=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),wM=$N(bM("bounce",!0)),BM={position:"top-right",transition:wM,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function c4(t){let e={...BM,...t},i=t.stacked,[n,o]=Te.useState(!0),u=Te.useRef(null),{getToastToRender:A,isToastActive:a,count:g}=AM(e),{className:b,style:B,rtl:I,containerId:P,hotKeys:F}=e;function Q(H){let j=Vf("Toastify__toast-container",`Toastify__toast-container--${H}`,{"Toastify__toast-container--rtl":I});return ld(b)?b({position:H,rtl:I,defaultClassName:j}):Vf(j,bx(b))}function R(){i&&(o(!0),Lr.play())}return dM(()=>{var H;if(i){let j=u.current.querySelectorAll('[data-in="true"]'),V=12,W=(H=e.position)==null?void 0:H.includes("top"),ne=0,te=0;Array.from(j).reverse().forEach((de,ee)=>{let re=de;re.classList.add("Toastify__toast--stacked"),ee>0&&(re.dataset.collapsed=`${n}`),re.dataset.pos||(re.dataset.pos=W?"top":"bot");let xe=ne*(n?.2:1)+(n?0:V*ee);re.style.setProperty("--y",`${W?xe:xe*-1}px`),re.style.setProperty("--g",`${V}`),re.style.setProperty("--s",`${1-(n?te:0)}`),ne+=re.offsetHeight,te+=.025})}},[n,g,i]),Te.useEffect(()=>{function H(j){var V;let W=u.current;F(j)&&((V=W.querySelector('[tabIndex="0"]'))==null||V.focus(),o(!1),Lr.pause()),j.key==="Escape"&&(document.activeElement===W||W!=null&&W.contains(document.activeElement))&&(o(!0),Lr.play())}return document.addEventListener("keydown",H),()=>{document.removeEventListener("keydown",H)}},[F]),yr.createElement("section",{ref:u,className:"Toastify",id:P,onMouseEnter:()=>{i&&(o(!1),Lr.pause())},onMouseLeave:R,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},A((H,j)=>{let V=j.length?{...B}:{...B,pointerEvents:"none"};return yr.createElement("div",{tabIndex:-1,className:Q(H),"data-stacked":i,style:V,key:`c-${H}`},j.map(({content:W,props:ne})=>yr.createElement(xM,{...ne,stacked:i,collapseAll:R,isIn:a(ne.toastId,ne.containerId),key:`t-${ne.key}`},W)))}))}function CM({user:t}){return Te.useEffect(()=>{if(t?._id)return dr.emit("register",t._id),Notification.permission==="default"&&Notification.requestPermission(),dr.on("new-notification",e=>{Lr.info(`${e.title}: ${e.message}`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),Notification.permission==="granted"&&new Notification(e.title,{body:e.message,icon:"/skillconnect.png"})}),dr.on("appointment-notification",e=>{Lr.info(`${e.title}: ${new Date(e.appointment.appointmentDate).toLocaleString()}`,{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),dr.on("verification-status",e=>{Lr.info(`Verification status updated: ${e.status}`,{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),dr.on("request-cancelled",e=>{Lr.warn(e.message||"A service request was been cancelled.",{position:"top-right",autoClose:8e3,hideProgressBar:!1})}),dr.on("service-request-updated",e=>{e.action==="cancelled"&&Lr.info("A service request has been cancelled.",{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}),dr.on("request-accepted",e=>{Lr.success("A service request has been accepted.",{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}),()=>{dr.off("new-notification"),dr.off("appointment-notification"),dr.off("verification-status"),dr.off("request-cancelled"),dr.off("service-request-updated"),dr.off("request-accepted")}},[t]),null}var u4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},J2=yr.createContext&&yr.createContext(u4),SM=["attr","size","title"];function EM(t,e){if(t==null)return{};var i=TM(t,e),n,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function TM(t,e){if(t==null)return{};var i={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;i[n]=t[n]}return i}function Nv(){return Nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Nv.apply(this,arguments)}function ew(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),i.push.apply(i,n)}return i}function Mv(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ew(Object(i),!0).forEach(function(n){FM(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ew(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function FM(t,e,i){return e=NM(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function NM(t){var e=MM(t,"string");return typeof e=="symbol"?e:e+""}function MM(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function A4(t){return t&&t.map((e,i)=>yr.createElement(e.tag,Mv({key:i},e.attr),A4(e.child)))}function jn(t){return e=>yr.createElement(IM,Nv({attr:Mv({},t.attr)},e),A4(t.child))}function IM(t){var e=i=>{var{attr:n,size:o,title:u}=t,A=EM(t,SM),a=o||i.size||"1em",g;return i.className&&(g=i.className),t.className&&(g=(g?g+" ":"")+t.className),yr.createElement("svg",Nv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},i.attr,n,A,{className:g,style:Mv(Mv({color:t.color||i.color},i.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),u&&yr.createElement("title",null,u),t.children)};return J2!==void 0?yr.createElement(J2.Consumer,null,i=>e(i)):e(u4)}function LM(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"},child:[]}]})(t)}function PM(t){return jn({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(t)}function kM(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(t)}function jM(t){return jn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function UM(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function DM(t){return jn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function A1(t){return jn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function tw(t){return jn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(t)}function RM(t){return jn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function h4(t){return jn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function iw(t){return jn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z"},child:[]}]})(t)}function OM(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function Do(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function QM(t){return jn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function nw(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function d4(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function Sx(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function f4(t){return jn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function s0(t){return jn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(t)}function a0(t){return jn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function zM(t){return jn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function HM(t){return jn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm192.81 248H304c8.84 0 16 7.16 16 16s-7.16 16-16 16h-47.19c-16.45 0-31.27-9.14-38.64-23.86-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34a15.986 15.986 0 0 1-14.31 8.84c-.38 0-.75-.02-1.14-.05-6.45-.45-12-4.75-14.03-10.89L144 354.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.77-16.19 54.05-9.7 66 14.16 2.02 4.06 5.96 6.5 10.16 6.5zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(t)}function p4(t){return jn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Lb(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function VM(t){return jn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function qM(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(t)}function GM(t){return jn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(t)}function KM(t){return jn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function m4(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function WM(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(t)}function g4(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function rw(t){return jn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function Iv(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(t)}function sw(t){return jn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"},child:[]}]})(t)}function jl(t){return jn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function hm(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(t)}function $M(t){return jn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function ZM(t){return jn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(t)}function aw(t){return jn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function zg(t){return jn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function XM(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M427.68 351.43C402 320 383.87 304 383.87 217.35 383.87 138 343.35 109.73 310 96c-4.43-1.82-8.6-6-9.95-10.55C294.2 65.54 277.8 48 256 48s-38.21 17.55-44 37.47c-1.35 4.6-5.52 8.71-9.95 10.53-33.39 13.75-73.87 41.92-73.87 121.35C128.13 304 110 320 84.32 351.43 73.68 364.45 83 384 101.61 384h308.88c18.51 0 27.77-19.61 17.19-32.57zM320 384v16a64 64 0 0 1-128 0v-16"},child:[]}]})(t)}function YM(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M262.29 192.31a64 64 0 1 0 57.4 57.4 64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22 155.3 155.3 0 0 1-21.46-12.57 16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22 155.3 155.3 0 0 1 21.46 12.57 16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z"},child:[]}]})(t)}const JM=()=>{const{isAuthorized:t,tokenType:e,user:i,admin:n,openChatAppointmentId:o,setOpenChatAppointmentId:u}=Ol(),[A,a]=Te.useState(!1),[g,b]=Te.useState("list"),[B,I]=Te.useState([]),[P,F]=Te.useState(null),[Q,R]=Te.useState([]),[H,j]=Te.useState(""),[V,W]=Te.useState(!1),[ne,te]=Te.useState(null),[de,ee]=Te.useState(new Set),[re,xe]=Te.useState({}),[Be,se]=Te.useState([]),[ae,ce]=Te.useState(""),[Ee,Ve]=Te.useState(!1),[ue,fe]=Te.useState([]),[Ue,ke]=Te.useState(null),[pe,Qe]=Te.useState([]),J=Te.useRef(null),me=Te.useRef(null),Fe=()=>{J.current?.scrollIntoView({behavior:"smooth"})},ze=async()=>{W(!0),te(null);try{const{data:Mt}=await Oi.get("/user/chat-list"),ei=Mt.chatList||[],ai={};ei.forEach(zi=>{const wi=zi.otherUser?._id?.toString();wi&&(ai[wi]?(ai[wi].appointments.push(zi.appointmentId),ai[wi].totalUnreadCount+=zi.unreadCount||0,zi.lastMessage&&(!ai[wi].lastMessage||new Date(zi.lastMessage.timestamp)>new Date(ai[wi].lastMessage.timestamp))&&(ai[wi].lastMessage=zi.lastMessage,ai[wi].serviceRequest=zi.serviceRequest,ai[wi].status=zi.status)):ai[wi]={...zi,appointments:[zi.appointmentId],totalUnreadCount:zi.unreadCount||0})});const Ei=Object.values(ai);I(Ei);const $i={};Ei.forEach(zi=>{$i[zi.appointments[0]]=zi.totalUnreadCount}),xe($i)}catch(Mt){console.error("Error fetching chat list:",Mt),te("Failed to load chats")}finally{W(!1)}},Ke=async Mt=>{try{await Oi.put(`/user/chat/${Mt}/mark-seen`),xe(ei=>({...ei,[Mt]:0}))}catch(ei){console.error("Error marking messages as seen:",ei)}};Te.useEffect(()=>{if(!t||e!=="user"||!i)return;ze();const Mt=wi=>{P&&wi.appointment.toString()===P.appointmentId.toString()?(R(Gi=>[...Gi,wi]),Ke(P.appointmentId)):xe(Gi=>({...Gi,[wi.appointment]:(Gi[wi.appointment]||0)+1})),Fe()},ei=wi=>{R(wi||[]),P&&Ke(P.appointmentId),Fe()},ai=wi=>{i&&P&&wi.userId!==i._id&&ee(Gi=>new Set([...Gi,wi.userId]))},Ei=wi=>{i&&wi.userId!==i._id&&ee(Gi=>{const gn=new Set(Gi);return gn.delete(wi.userId),gn})},$i=wi=>{(!A||P&&P.appointmentId!==wi.appointmentId)&&Notification.permission==="granted"&&new Notification(`New message from ${wi.from}`,{body:wi.message.message,icon:"/skillconnect.png"})},zi=wi=>{console.error("Socket error:",wi),te(wi)};return dr.on("new-message",Mt),dr.on("chat-history",ei),dr.on("user-typing",ai),dr.on("user-stopped-typing",Ei),dr.on("message-notification",$i),dr.on("error",zi),Notification.permission==="default"&&Notification.requestPermission(),()=>{dr.off("new-message",Mt),dr.off("chat-history",ei),dr.off("user-typing",ai),dr.off("user-stopped-typing",Ei),dr.off("message-notification",$i),dr.off("error",zi)}},[P,i,A,t,e]),Te.useEffect(()=>{!t||e!=="user"||!i||Fe()},[Q,t,e,i]);const _t=()=>{fe([{id:1,category:"Account",title:"Password Reset",description:"Forgot your password or need to change it",content:"Go to Settings > Account > Change Password. If you forgot your password, use 'Forgot Password' on the login screen."},{id:2,category:"Account",title:"Profile Updates",description:"Update your personal information and profile",content:"Navigate to Profile section to edit your name, email, phone, and profile picture."},{id:3,category:"Booking",title:"How to Book Services",description:"Learn how to find and book skilled workers",content:"Browse skilled users by service type, check their ratings and reviews, then send a service request with your requirements."},{id:4,category:"Booking",title:"Track Service Requests",description:"Monitor the status of your service bookings",content:"Check your dashboard for active requests. You'll receive notifications when workers respond or accept your requests."},{id:5,category:"Payments",title:"Payment Methods",description:"Information about payments and billing",content:"Payments are processed securely through our platform. Contact support for billing questions."},{id:6,category:"Technical",title:"App Issues",description:"Report bugs or technical problems",content:"Please describe the issue you're experiencing. Include your device type and app version for faster resolution."},{id:7,category:"Technical",title:"Connection Problems",description:"Issues with internet connectivity",content:"Ensure you have a stable internet connection. Try restarting the app or checking your network settings."},{id:8,category:"General",title:"Contact Support",description:"Get in touch with our support team",content:`Email: skillconnect4b410@gmail.com
Phone: Available during business hours
We'll respond within 24 hours.`}])};if(Te.useEffect(()=>{if(o&&B.length>0){const Mt=B.find(ei=>ei.appointments.includes(o));Mt?(a(!0),bi(Mt),u(null)):(u(null),console.warn("Chat not found for appointment:",o))}},[o,B]),Te.useEffect(()=>{if(ue.length>0){const Mt={};ue.forEach(ei=>{const ai=ei.category||"General";Mt[ai]||(Mt[ai]=[]),Mt[ai].push(ei)}),Qe(Object.entries(Mt))}},[ue]),Te.useEffect(()=>{g==="help"&&ue.length===0&&_t()},[g]),!t||!i&&!n)return null;const gt=async Mt=>{try{const Ei=(await Oi.get("/user/chat-history")).data.chatHistory?.find($i=>$i.appointmentId.toString()===Mt.toString())?.messages||[];R(Ei),Ei.length>0&&await Oi.put(`/user/chat/${Mt}/mark-seen`),Fe(),dr.emit("join-chat",Mt)}catch(ei){console.error("Error fetching chat history:",ei),te("Failed to load chat history")}},Et=async()=>{if(!(!H.trim()||!P))try{await Oi.post("/user/send-message",{appointmentId:P.appointmentId,message:H.trim()}),j(""),dr.emit("stop-typing",P.appointmentId),me.current&&clearTimeout(me.current)}catch(Mt){console.error("Error sending message:",Mt),te("Failed to send message")}},hi=()=>{P&&(dr.emit("typing",P.appointmentId),me.current&&clearTimeout(me.current),me.current=setTimeout(()=>{dr.emit("stop-typing",P.appointmentId)},1e3))},Vt=Mt=>{if(!Mt)return"";const ei=new Date(Mt);return isNaN(ei.getTime())?"":ei.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},Yt=Mt=>{switch(Mt){case"sent":return"";case"delivered":return"";case"seen":return"";default:return""}},Jt=()=>{a(!A),A||(b("list"),F(null),R([]),te(null))},bi=Mt=>{F(Mt),b("chat"),te(null),gt(Mt.appointmentId)},ot=()=>{b("list"),F(null),R([]),ee(new Set),se([])},$e=()=>{if(!ae.trim())return;const Mt={sender:"user",message:ae.trim(),timestamp:new Date};se(ei=>[...ei,Mt]),ce(""),Ve(!0),setTimeout(()=>{const ai={sender:"support",message:Ni(Mt.message),timestamp:new Date};se(Ei=>[...Ei,ai]),Ve(!1)},1e3)},Ni=Mt=>{const ei=Mt.toLowerCase();return ei.includes("password")?"For password issues, please visit the Account Settings page or contact us at skillconnect4b410@gmail.com.":ei.includes("booking")?"To book a service, navigate to the skilled users list and select a service. If you need help, check our help center.":ei.includes("account")?"For account-related issues, please check your profile settings or contact us at skillconnect4b410@gmail.com.":ei.includes("technical")||ei.includes("bug")||ei.includes("report")?"For technical issues or bugs, please provide details about what happened and your device/browser info. We'll investigate and get back to you.":ei.includes("help")||ei.includes("support")||ei.includes("other")||ei.includes("contact")?"I'm here to help! Please describe your issue in detail.":"Thank you for contacting support. Our team will respond shortly. For urgent issues, email skillconnect4b410@gmail.com."},yi=Mt=>{const ai={sender:"user",message:{password:"I need help with password reset",booking:"I need help with booking a service",account:"I have account issues",technical:"I have a technical issue or found a bug",other:"I have another support request"}[Mt],timestamp:new Date};se([ai]),Ve(!0),setTimeout(()=>{const Ei={sender:"support",message:Ni(ai.message),timestamp:new Date};se([ai,Ei]),Ve(!1)},1e3)},si=Object.values(re).reduce((Mt,ei)=>Mt+ei,0);return p.jsxs(p.Fragment,{children:[p.jsxs("button",{className:"navbar-icon-btn",onClick:Jt,children:[p.jsx("span",{className:"chat-icon-text",children:p.jsx(kM,{})}),si>0&&p.jsx("span",{className:"chat-badge",children:si})]}),A&&p.jsxs("div",{className:"chat-panel",children:[p.jsx("div",{className:"chat-header",children:g==="chat"?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"back-btn",onClick:ot,children:""}),p.jsxs("h3",{children:[P?.otherUser?.firstName," ",P?.otherUser?.lastName]}),p.jsx("span",{className:`status-indicator ${P?.status?.toLowerCase()}`,children:P?.status})]}):g==="help"?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"back-btn",onClick:()=>b("list"),children:""}),p.jsx("h3",{children:"Help Center"})]}):g==="help-topics"?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"back-btn",onClick:()=>b("help"),children:""}),p.jsx("h3",{children:"Help Topics"})]}):p.jsxs(p.Fragment,{children:[p.jsx("h3",{children:"Messages"}),p.jsxs("div",{className:"header-actions",children:[p.jsx("button",{className:"help-header-btn",onClick:()=>b("help"),title:"Help",children:"?"}),p.jsx("button",{className:"close-btn",onClick:Jt,children:""})]})]})}),p.jsx("div",{className:"chat-body",children:g==="list"?V?p.jsx("p",{children:"Loading..."}):ne?p.jsx("p",{className:"error",children:ne}):p.jsxs("div",{className:"chat-list",children:[p.jsxs("div",{className:"chat-item",onClick:()=>b("help"),children:[p.jsxs("div",{className:"chat-item-header",children:[p.jsx("h4",{children:"Help Center"}),p.jsx("small",{children:"Support"})]}),p.jsx("p",{className:"last-message",children:"Get help with your questions"})]}),e==="user"&&B.map(Mt=>p.jsxs("div",{className:"chat-item",onClick:()=>bi(Mt),children:[p.jsxs("div",{className:"chat-item-header",children:[p.jsxs("h4",{children:[Mt.otherUser?.firstName," ",Mt.otherUser?.lastName]}),Mt.lastMessage&&p.jsx("small",{children:Vt(Mt.lastMessage.timestamp)})]}),p.jsxs("div",{className:"chat-item-content",children:[p.jsx("p",{className:"service-name",children:Mt.serviceRequest?.name}),Mt.lastMessage?p.jsxs("p",{className:"last-message",children:[p.jsxs("strong",{children:[Mt.lastMessage.sender?.firstName,":"]})," ",Mt.lastMessage.message]}):p.jsx("p",{className:"no-messages",children:"No messages yet"})]}),re[Mt.appointmentId]>0&&p.jsx("span",{className:"unread-badge",children:re[Mt.appointmentId]})]},Mt.appointmentId))]}):g==="chat"?p.jsxs("div",{className:"chat-messages",children:[ne&&p.jsx("p",{className:"error",children:ne}),p.jsxs("div",{className:"messages-container",children:[Q.map(Mt=>p.jsxs("div",{className:`message-wrapper ${Mt.sender._id===i._id?"own":"other"}`,children:[p.jsx("div",{className:"message-timestamp",children:p.jsx("small",{children:Vt(Mt.timestamp)})}),p.jsxs("div",{className:`message ${Mt.sender._id===i._id?"own":"other"}`,children:[Mt.sender._id!==i._id&&p.jsx("img",{src:Mt.sender.profilePic,alt:`${Mt.sender.firstName} ${Mt.sender.lastName}`,className:"message-avatar"}),p.jsx("div",{className:"message-content",children:p.jsx("span",{children:Mt.message})}),Mt.sender._id===i._id&&p.jsx("span",{className:`message-status ${Mt.status}`,children:Yt(Mt.status)})]})]},Mt.id||Mt._id)),de.size>0&&p.jsx("div",{className:"typing-indicator",children:p.jsx("span",{children:"Someone is typing..."})}),p.jsx("div",{ref:J})]}),p.jsxs("div",{className:"message-input",children:[p.jsx("input",{type:"text",value:H,onChange:Mt=>{j(Mt.target.value),hi()},onKeyPress:Mt=>Mt.key==="Enter"&&Et(),placeholder:"Type a message...",disabled:V}),p.jsx("button",{className:"send-btn",onClick:Et,disabled:!H.trim()||V,children:"Send"})]})]}):g==="help-topics"?p.jsx("div",{className:"help-topics-view",children:pe.map(([Mt,ei])=>p.jsxs("div",{className:"category-section",children:[p.jsx("h4",{className:"category-title",children:Mt}),ei.map(ai=>p.jsxs("div",{className:"help-topic-item",onClick:()=>{ke(ai),b("help");const Ei={sender:"user",message:`I need help with: ${ai.title}`,timestamp:new Date};se([Ei]),Ve(!0),setTimeout(()=>{const $i={sender:"support",message:ai.content,timestamp:new Date};se([Ei,$i]),Ve(!1)},1e3)},children:[p.jsxs("div",{className:"help-topic-content",children:[p.jsx("h5",{className:"help-topic-title",children:ai.title}),p.jsx("p",{className:"help-topic-desc",children:ai.description})]}),p.jsx("span",{className:"help-topic-arrow",children:""})]},ai.id))]},Mt))}):p.jsxs("div",{className:"chat-messages",children:[p.jsxs("div",{className:"messages-container",children:[Be.map((Mt,ei)=>p.jsx("div",{className:`message-wrapper ${Mt.sender==="user"?"own":"other"}`,children:p.jsx("div",{className:`message ${Mt.sender==="user"?"own":"other"}`,children:p.jsx("div",{className:"message-content",children:p.jsx("span",{children:Mt.message})})})},ei)),Ee&&p.jsx("div",{className:"typing-indicator",children:p.jsx("span",{children:"Support is typing..."})}),Be.length===0&&!Ee&&p.jsx("div",{className:"message-wrapper other",children:p.jsx("div",{className:"message other",children:p.jsxs("div",{className:"message-content",children:[p.jsx("span",{children:"Welcome to Help Center! How can we assist you today?"}),p.jsxs("div",{className:"quick-actions",children:[p.jsx("button",{className:"quick-action-button",onClick:()=>yi("password"),children:"Password Reset"}),p.jsx("button",{className:"quick-action-button",onClick:()=>yi("booking"),children:"Booking Help"}),p.jsx("button",{className:"quick-action-button",onClick:()=>yi("account"),children:"Account Issues"}),p.jsx("button",{className:"quick-action-button",onClick:()=>yi("technical"),children:"Technical Issues"}),p.jsx("button",{className:"quick-action-button",onClick:()=>yi("other"),children:"Other"})]}),p.jsxs("div",{className:"browse-topics-button",children:[p.jsx("span",{children:""}),p.jsx("span",{className:"browse-topics-text",children:"Browse Help Topics"})]})]})})}),Be.length>0&&Be[Be.length-1].sender==="support"&&!Ee&&p.jsx("div",{className:"message-wrapper other",children:p.jsx("div",{className:"message other",children:p.jsxs("div",{className:"message-content",children:[p.jsx("span",{children:"Is there anything else I can help you with?"}),p.jsxs("div",{className:"quick-actions",children:[p.jsx("button",{className:"quick-action-button",onClick:()=>yi("password"),children:"Password Reset"}),p.jsx("button",{className:"quick-action-button",onClick:()=>yi("booking"),children:"Booking Help"}),p.jsx("button",{className:"quick-action-button",onClick:()=>yi("account"),children:"Account Issues"}),p.jsx("button",{className:"quick-action-button",onClick:()=>yi("technical"),children:"Technical Issues"}),p.jsx("button",{className:"quick-action-button",onClick:()=>yi("other"),children:"Other"})]})]})})}),p.jsx("div",{ref:J})]}),p.jsxs("div",{className:"message-input",children:[p.jsx("input",{type:"text",value:ae,onChange:Mt=>ce(Mt.target.value),onKeyPress:Mt=>Mt.key==="Enter"&&$e(),placeholder:"Type your message to support...",disabled:Ee}),p.jsx("button",{className:"send-btn",onClick:$e,disabled:!ae.trim()||Ee,children:""})]})]})})]})]})},eI=()=>{const{user:t,admin:e,isAuthorized:i,tokenType:n,logout:o}=Ol(),[u,A]=Te.useState(!1),[a,g]=Te.useState(!1),[b,B]=Te.useState(!1),[I,P]=Te.useState(!1),[F,Q]=Te.useState([]),[R,H]=Te.useState(!1),[j,V]=Te.useState(0),W=fl(),ne=ce=>{ce.key==="Escape"&&(A(!1),g(!1))},te=ce=>{ce.target.closest(".dropdown")||g(!1)};Te.useEffect(()=>(u||a?(document.addEventListener("keydown",ne),document.addEventListener("click",te)):(document.removeEventListener("keydown",ne),document.removeEventListener("click",te)),()=>{document.removeEventListener("keydown",ne),document.removeEventListener("click",te)}),[u,a]),Te.useEffect(()=>{i?re():V(0)},[i]);const de=async()=>{if(!b){B(!0);try{await o(),localStorage.removeItem("user"),localStorage.removeItem("admin"),localStorage.removeItem("isAuthorized"),localStorage.removeItem("tokenType"),localStorage.removeItem("rememberedEmail"),W(n==="admin"?"/admin/login":"/login")}catch(ce){console.error("Logout failed:",ce.message),localStorage.removeItem("user"),localStorage.removeItem("admin"),localStorage.removeItem("isAuthorized"),localStorage.removeItem("tokenType"),localStorage.removeItem("rememberedEmail"),W(n==="admin"?"/admin/login":"/user/my-service")}finally{B(!1)}}},ee=async()=>{if(!i||!localStorage.getItem("token")){Q([]),H(!1);return}H(!0);try{const{data:ce}=await Oi.get("/user/notifications");Q(ce.notifications||[])}catch(ce){console.error("Error fetching notifications:",ce),ce.response?.status===401&&Q([])}finally{H(!1)}},re=async()=>{if(!i||!localStorage.getItem("token")){V(0);return}try{const{data:ce}=await Oi.get("/user/notifications/unread-count");V(ce.unreadCount||0)}catch(ce){console.error("Error fetching unread count:",ce),ce.response?.status===401&&V(0)}},xe=async()=>{P(!I),I||ee(),await se()},Be=async ce=>{try{await Oi.put(`/user/notifications/${ce._id}/read`),Q(Ve=>Ve.map(ue=>ue._id===ce._id?{...ue,read:!0}:ue)),V(Ve=>Math.max(0,Ve-1));const{meta:Ee}=ce;Ee&&(Ee.type==="apply-provider"?W("/user/manage-profile"):(Ee.type==="service-request"||Ee.type==="service-request-posted")&&Ee.requestId?W("/user/my-service"):Ee.bookingId?W("/user/chat"):Ee.apptId?e&&W("/admin/verification"):Ee.type==="verification_appointment"&&W("/user/manage-profile")),P(!1)}catch(Ee){console.error("Error handling notification click:",Ee)}},se=async()=>{try{await Oi.put("/user/notifications/mark-all-read"),Q(ce=>ce.map(Ee=>({...Ee,read:!0}))),V(0)}catch(ce){console.error("Error marking all notifications as read:",ce)}},ae=ce=>{if(!ce)return"";const Ee=new Date(ce);return isNaN(Ee.getTime())?"":Ee.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return p.jsxs("nav",{className:"navbar",role:"navigation","aria-label":"Main navigation",children:[p.jsxs("div",{className:"navbar-container",children:[p.jsxs(ar,{to:"/home",className:"navbar-logo",children:[p.jsx("img",{src:"https://i.ibb.co/MxKr7FVx/1000205778-removebg-preview.png",alt:"SkillConnect4B410 logo",className:"navbar-logo-image"}),p.jsx("span",{className:"navbar-logo-text",children:"SkillConnect4B410"})]}),p.jsx("div",{className:`navbar-menu ${u?"mobile-menu show":""}`,children:p.jsxs("ul",{className:"navbar-menu-list",children:[!i&&p.jsxs(p.Fragment,{children:[p.jsx("li",{role:"none",children:p.jsx(ar,{to:"/home",className:"navbar-link",role:"menuitem","aria-label":"Go to home page",children:"HOME"})}),p.jsx("li",{role:"none",children:p.jsx(ar,{to:"/about",className:"navbar-link",role:"menuitem","aria-label":"About SkillConnect4B410",children:"ABOUT"})})]}),!i&&p.jsxs(p.Fragment,{children:[p.jsx("li",{role:"none",children:p.jsx(ar,{to:"/login",className:"navbar-link",role:"menuitem","aria-label":"Login to your account",children:"LOGIN"})}),p.jsx("li",{role:"none",children:p.jsx(ar,{to:"/register",className:"navbar-link",role:"menuitem","aria-label":"Create a new account",children:"REGISTER"})})]}),i&&n!=="admin"&&p.jsx("li",{role:"none",children:p.jsxs("button",{onClick:xe,className:"navbar-icon-btn","aria-label":"View notifications",children:[p.jsx(XM,{size:24}),j>0&&p.jsx("span",{className:"notification-badge",children:j>99?"99+":j})]})}),i&&n!=="admin"&&p.jsx("li",{role:"none",children:p.jsx(JM,{})}),t.role==="Service Provider"&&n!=="admin"&&p.jsx(ar,{to:"/user/my-service",children:p.jsx(iw,{})}),t&&n!=="admin"&&p.jsxs("li",{role:"none",className:"dropdown",children:[p.jsx("button",{className:"dashboard-toggle",onClick:()=>g(!a),"aria-label":"User dashboard menu","aria-expanded":a,children:p.jsx(aw,{})}),a&&p.jsxs("ul",{className:"dropdown-menu",children:[p.jsx("li",{className:"dropdown-profile",children:p.jsxs(ar,{to:"/user/manage-profile",style:{display:"flex",alignItems:"center",width:"100%",textDecoration:"none"},children:[p.jsx("img",{src:t.profilePic,alt:"User"}),p.jsxs("div",{className:"dropdown-profile-info",children:[p.jsxs("strong",{children:[t.firstName," ",t.lastName]}),p.jsx("small",{children:t.role})]})]})}),p.jsx("li",{children:p.jsxs(ar,{to:"/user/manage-profile",children:[p.jsx(aw,{}),"Manage Profile"]})}),t?.role==="Service Provider"&&p.jsx("li",{}),p.jsx("li",{children:p.jsxs(ar,{to:"/user/request-service",children:[p.jsx(iw,{}),"Request Service"]})}),p.jsx("li",{children:p.jsxs(ar,{to:"/user/records",children:[p.jsx(zM,{}),"My Records"]})}),p.jsx("li",{children:p.jsxs(ar,{to:"/user/general-settings",children:[p.jsx(YM,{}),"General Settings "]})}),p.jsx("div",{className:"dropdown-divider"}),p.jsx("li",{className:"logout-item",children:p.jsxs("button",{onClick:de,children:[p.jsx(g4,{}),"Log Out"]})})]})]})]})}),p.jsx("button",{className:"hamburger",onClick:()=>A(!u),"aria-label":u?"Close navigation menu":"Open navigation menu","aria-expanded":u,"aria-controls":"navigation-menu",children:p.jsx(LM,{})})]}),I&&p.jsx("div",{className:"notification-popup-overlay",onClick:()=>P(!1),children:p.jsxs("div",{className:"notification-popup",onClick:ce=>ce.stopPropagation(),children:[p.jsxs("div",{className:"notification-popup-header",children:[p.jsx("h3",{children:"Notifications"}),p.jsx("button",{className:"notification-popup-close",onClick:()=>P(!1),children:""})]}),p.jsx("div",{className:"notification-popup-content",children:R?p.jsx("p",{children:"Loading..."}):F.length===0?p.jsx("div",{className:"notification-empty",children:p.jsx("p",{children:"No notifications yet"})}):p.jsx(p.Fragment,{children:F.map(ce=>p.jsx("div",{className:`notification-item ${ce.read?"":"notification-item-unread"}`,onClick:()=>Be(ce),children:p.jsxs("div",{className:"notification-item-content",children:[p.jsx("div",{className:"notification-item-title",children:ce.title}),p.jsx("div",{className:"notification-item-message",children:ce.message}),p.jsx("div",{className:"notification-item-time",children:ae(ce.createdAt)})]})},ce._id))})})]})})]})};function tI(t){return jn({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13.0281 2.00073C14.1535 2.00259 14.7238 2.00855 15.2166 2.02322L15.4107 2.02956C15.6349 2.03753 15.8561 2.04753 16.1228 2.06003C17.1869 2.1092 17.9128 2.27753 18.5503 2.52503C19.2094 2.7792 19.7661 3.12253 20.3219 3.67837C20.8769 4.2342 21.2203 4.79253 21.4753 5.45003C21.7219 6.0867 21.8903 6.81337 21.9403 7.87753C21.9522 8.1442 21.9618 8.3654 21.9697 8.58964L21.976 8.78373C21.9906 9.27647 21.9973 9.84686 21.9994 10.9723L22.0002 11.7179C22.0003 11.809 22.0003 11.903 22.0003 12L22.0002 12.2821L21.9996 13.0278C21.9977 14.1532 21.9918 14.7236 21.9771 15.2163L21.9707 15.4104C21.9628 15.6347 21.9528 15.8559 21.9403 16.1225C21.8911 17.1867 21.7219 17.9125 21.4753 18.55C21.2211 19.2092 20.8769 19.7659 20.3219 20.3217C19.7661 20.8767 19.2069 21.22 18.5503 21.475C17.9128 21.7217 17.1869 21.89 16.1228 21.94C15.8561 21.9519 15.6349 21.9616 15.4107 21.9694L15.2166 21.9757C14.7238 21.9904 14.1535 21.997 13.0281 21.9992L12.2824 22C12.1913 22 12.0973 22 12.0003 22L11.7182 22L10.9725 21.9993C9.8471 21.9975 9.27672 21.9915 8.78397 21.9768L8.58989 21.9705C8.36564 21.9625 8.14444 21.9525 7.87778 21.94C6.81361 21.8909 6.08861 21.7217 5.45028 21.475C4.79194 21.2209 4.23444 20.8767 3.67861 20.3217C3.12278 19.7659 2.78028 19.2067 2.52528 18.55C2.27778 17.9125 2.11028 17.1867 2.06028 16.1225C2.0484 15.8559 2.03871 15.6347 2.03086 15.4104L2.02457 15.2163C2.00994 14.7236 2.00327 14.1532 2.00111 13.0278L2.00098 10.9723C2.00284 9.84686 2.00879 9.27647 2.02346 8.78373L2.02981 8.58964C2.03778 8.3654 2.04778 8.1442 2.06028 7.87753C2.10944 6.81253 2.27778 6.08753 2.52528 5.45003C2.77944 4.7917 3.12278 4.2342 3.67861 3.67837C4.23444 3.12253 4.79278 2.78003 5.45028 2.52503C6.08778 2.27753 6.81278 2.11003 7.87778 2.06003C8.14444 2.04816 8.36564 2.03847 8.58989 2.03062L8.78397 2.02433C9.27672 2.00969 9.8471 2.00302 10.9725 2.00086L13.0281 2.00073ZM12.0003 7.00003C9.23738 7.00003 7.00028 9.23956 7.00028 12C7.00028 14.7629 9.23981 17 12.0003 17C14.7632 17 17.0003 14.7605 17.0003 12C17.0003 9.23713 14.7607 7.00003 12.0003 7.00003ZM12.0003 9.00003C13.6572 9.00003 15.0003 10.3427 15.0003 12C15.0003 13.6569 13.6576 15 12.0003 15C10.3434 15 9.00028 13.6574 9.00028 12C9.00028 10.3431 10.3429 9.00003 12.0003 9.00003ZM17.2503 5.50003C16.561 5.50003 16.0003 6.05994 16.0003 6.74918C16.0003 7.43843 16.5602 7.9992 17.2503 7.9992C17.9395 7.9992 18.5003 7.4393 18.5003 6.74918C18.5003 6.05994 17.9386 5.49917 17.2503 5.50003Z"},child:[]}]})(t)}const iI=()=>{const[t,e]=Te.useState({name:"",email:"",subject:"",message:""}),[i,n]=Te.useState(!1),o=A=>{e({...t,[A.target.name]:A.target.value})},u=async A=>{if(A.preventDefault(),!t.name||!t.email||!t.subject||!t.message){Si.error("Please fill in all fields");return}n(!0);try{const a=await Oi.post("/contact/send",t);a.data.success&&(Si.success(a.data.message||"Email Sent Successfully!!"),e({name:"",email:"",subject:"",message:""}))}catch(a){const g=a.response?.data?.message||"Failed to send your email!";Si.error(g)}finally{n(!1)}};return p.jsxs("footer",{className:"footer",children:[p.jsxs("div",{className:"footer-content",children:[p.jsxs("div",{className:"footer-section",children:[p.jsx("h2",{className:"footer-brand",children:"SkillConnect4b410"}),p.jsx("p",{className:"footer-desc",children:"Building modern solutions with simplicity and elegance."})]}),p.jsxs("div",{className:"footer-section",children:[p.jsx("h3",{children:"Quick Links"}),p.jsxs("ul",{className:"footer-links",children:[p.jsx("li",{children:p.jsx(ar,{to:"/",children:"Home"})}),p.jsx("li",{children:p.jsx(ar,{to:"/about",children:"About"})}),p.jsx("li",{children:p.jsx("a",{href:"/services",children:"Services"})}),p.jsx("li",{children:p.jsx("a",{href:"/contact",children:"Contact"})})]})]}),p.jsxs("div",{className:"footer-section",children:[p.jsx("h3",{children:"Contact Us"}),p.jsxs("form",{onSubmit:u,className:"footer-contact-form",children:[p.jsx("input",{type:"text",name:"name",placeholder:"Your Name",value:t.name,onChange:o,required:!0,className:"footer-input"}),p.jsx("input",{type:"email",name:"email",placeholder:"Your Email",value:t.email,onChange:o,required:!0,className:"footer-input"}),p.jsx("input",{type:"text",name:"subject",placeholder:"Subject",value:t.subject,onChange:o,required:!0,className:"footer-input"}),p.jsx("textarea",{name:"message",placeholder:"Your Message",value:t.message,onChange:o,required:!0,className:"footer-textarea"}),p.jsx("button",{type:"submit",disabled:i,className:"footer-submit-btn",children:i?"Sending...":"Send"})]}),status&&p.jsx("p",{className:`footer-status ${status.includes("success")?"success":"error"}`,children:status})]}),p.jsxs("div",{className:"footer-section",children:[p.jsx("h3",{children:"Follow Us"}),p.jsxs("div",{className:"footer-socials",children:[p.jsx("a",{href:"#",className:"footer-social-link",children:p.jsx(PM,{})}),p.jsx("a",{href:"#",className:"footer-social-link",children:p.jsx(tI,{})}),p.jsx("a",{href:"#",className:"footer-social-link",children:p.jsx(UM,{})}),p.jsx("a",{href:"#",className:"footer-social-link",children:p.jsx(jM,{})}),p.jsx("a",{href:"#",className:"footer-social-link",children:p.jsx(DM,{})})]})]})]}),p.jsxs("div",{className:"footer-bottom",children:[p.jsxs("p",{children:[" ",new Date().getFullYear()," SkillConnect4b410. All rights reserved."]}),p.jsxs("div",{className:"footer-legal",children:[p.jsx("a",{href:"/terms",children:"Terms & Conditions"}),p.jsx("span",{className:"footer-separator",children:" | "}),p.jsx("a",{href:"/privacy",children:"Privacy Policy"})]})]})]})},nI=()=>p.jsxs("div",{className:"hero",children:[p.jsxs("div",{className:"hero-background",children:[p.jsx("div",{className:"hero-pattern"}),p.jsx("div",{className:"hero-gradient"})]}),p.jsxs("div",{className:"hero-content",children:[p.jsxs("div",{className:"hero-text",children:[p.jsx("h6",{className:"hero-welcome",children:"Welcome to"}),p.jsxs("div",{className:"hero-title-container",children:[p.jsxs("h1",{className:"hero-title",children:["SkillConnect",p.jsx("span",{className:"hero-title-highlight",children:"4B410"})]}),p.jsx("div",{className:"hero-title-underline"})]}),p.jsx("div",{className:"hero-subtitle",children:p.jsx("h4",{children:"BARANGAY 410 ZONE 42"})}),p.jsx("p",{className:"hero-description",children:"Connecting skilled workers with opportunities in Barangay 410 Zone 42. Find local services, post your skills, and build a stronger community together. Join our network of local professionals and discover new possibilities."})]}),p.jsxs("div",{className:"hero-buttons",children:[p.jsxs(ar,{to:"/register",className:"cta-button primary hero-cta",children:[p.jsx(hm,{className:"btn-icon"}),"Find Services",p.jsx(tw,{className:"btn-arrow"})]}),p.jsxs(ar,{to:"/register",className:"cta-button secondary hero-cta",children:[p.jsx(zg,{className:"btn-icon"}),"Provide a Service",p.jsx(tw,{className:"btn-arrow"})]})]}),p.jsxs("div",{className:"hero-trust",children:[p.jsxs("div",{className:"trust-item",children:[p.jsx(rw,{className:"trust-icon"}),p.jsx("span",{children:"Verified Professionals"})]}),p.jsxs("div",{className:"trust-item",children:[p.jsx(zg,{className:"trust-icon"}),p.jsx("span",{children:"Local Community"})]}),p.jsxs("div",{className:"trust-item",children:[p.jsx(m4,{className:"trust-icon"}),p.jsx("span",{children:"Easy to Find Services"})]})]})]}),p.jsxs("div",{className:"hero-floating-elements",children:[p.jsx("div",{className:"floating-element element-1",children:p.jsx(hm,{})}),p.jsx("div",{className:"floating-element element-2",children:p.jsx(zg,{})}),p.jsx("div",{className:"floating-element element-3",children:p.jsx(rw,{})})]})]});function rI(t){return jn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(t)}function sI(t){return jn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 448l416-192L48 64v149.333L346 256 48 298.667z"},child:[]}]})(t)}const aI=()=>p.jsx(p.Fragment,{children:p.jsx("div",{className:"howitworks",children:p.jsxs("div",{className:"container",children:[p.jsx("h3",{children:"How SkillConnect4B410 Works"}),p.jsxs("div",{className:"banner",children:[p.jsxs("div",{className:"card",children:[p.jsx($M,{}),p.jsx("p",{className:"card-title",children:"Create Account "}),p.jsx("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Consequuntur, culpa."})]}),p.jsxs("div",{className:"card",children:[p.jsx(rI,{}),p.jsx("p",{children:"Find a Job/Post a Job"}),p.jsx("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Consequuntur, culpa."})]}),p.jsxs("div",{className:"card",children:[p.jsx(sI,{}),p.jsx("p",{className:"card-title",children:"Apply For Job/Recruit Suitable Candidates"}),p.jsx("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Consequuntur, culpa."})]})]})]})})}),oI=()=>p.jsx("div",{children:p.jsxs("div",{className:"mcontainer",children:[p.jsxs("div",{className:"mission",children:[p.jsx("h3",{children:"MISSION"}),p.jsx("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Molestias minima, inventore, architecto voluptatum excepturi porro odit ducimus velit ipsam laudantium labore dicta, totam eveniet ad alias consequuntur voluptate voluptatem impedit!"})]}),p.jsxs("div",{className:"vision",children:[p.jsx("h3",{children:"VISION"}),p.jsx("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores at expedita aut adipisci itaque architecto modi aliquam! Ad tempora, incidunt quae a quia repellendus dolore fugiat recusandae vel quibusdam ea."})]})]})}),lI=()=>{const[t,e]=Te.useState(null),[i,n]=Te.useState(!0),[o,u]=Te.useState("");return Te.useEffect(()=>{(async()=>{try{const{data:a}=await Oi.get("/settings/jobfair");a.success&&e(a.jobfair)}catch(a){u("Error: "+(a.response?.data?.message||a.message))}finally{n(!1)}})()},[]),i?p.jsx("div",{children:"Loading..."}):o?p.jsx("div",{children:o}):!t||new Date(t.date)<new Date?p.jsx("div",{}):p.jsx(p.Fragment,{children:p.jsxs("div",{className:"sectionann",children:[p.jsx("div",{className:"section-main-title",children:p.jsx("h1",{children:"CAREER FAIR"})}),p.jsx("div",{className:"section-title",children:p.jsxs("div",{className:"announcement-section",children:[p.jsx("div",{className:"announcement-background"}),p.jsxs("div",{className:"announcement-content",children:[p.jsxs("div",{className:"announcement-left",children:[p.jsx("div",{className:"career-fair-title",children:t.title}),t.description&&p.jsx("div",{className:"announcement-description",children:p.jsx("p",{children:t.description})}),p.jsxs("div",{className:"announcement-info",children:[p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-icon date-icon",children:p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),p.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),p.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),p.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),p.jsxs("div",{className:"info-text",children:[p.jsx("div",{className:"info-label",children:"DATE"}),p.jsx("div",{className:"info-value",children:t.date?new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Jun 24, 2025"})]})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-icon time-icon",children:p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("polyline",{points:"12,6 12,12 16,14"})]})}),p.jsxs("div",{className:"info-text",children:[p.jsx("div",{className:"info-label",children:"TIME"}),p.jsxs("div",{className:"info-value",children:[t.startTime," - ",t.endTime]})]})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("div",{className:"info-icon location-icon",children:p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),p.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}),p.jsxs("div",{className:"info-text",children:[p.jsx("div",{className:"info-label",children:"LOCATION"}),p.jsx("div",{className:"info-value",children:t.location})]})]})]})]}),p.jsxs("div",{className:"announcement-right",children:[p.jsx("div",{className:"image-container top-image",children:p.jsx("img",{src:"https://images.unsplash.com/photo-1521791136064-7986c2920216?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1469&q=80",alt:"People waiting for interviews"})}),p.jsx("div",{className:"image-container bottom-image",children:p.jsx("img",{src:"https://images.unsplash.com/photo-1556761175-b413da4baf72?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1574&q=80",alt:"People in meeting"})})]})]})]})})]})})},cI=()=>p.jsx(p.Fragment,{children:p.jsxs("section",{className:"homePage page",children:[p.jsx(nI,{}),p.jsx(lI,{}),p.jsx(oI,{}),p.jsx(aI,{})]})}),uI=()=>p.jsxs("div",{className:"aboutus-container",children:[p.jsxs("div",{className:"header-section",children:[p.jsx("div",{className:"barangay-namec",children:"Barangay 410 Zone 42"}),p.jsx("h1",{className:"page-title",children:"GALING at GANDA"}),p.jsx("div",{className:"header-image",children:p.jsx("img",{src:"https://ibb.co/84MzQQf8",alt:"Barangay Team"})})]}),p.jsxs("div",{className:"info-section",children:[p.jsx("div",{className:"description-text",children:"Barangay 410 is a community located in the district of Sampaloc, Manila. Based on the 2020 Census, it had a population of 2,444 with a coverage of 0.13% of the city's total population."}),p.jsx("div",{className:"map-container",children:p.jsx("img",{src:"https://ibb.co/MxQxQp9g",alt:"Map Location"})})]}),p.jsxs("div",{className:"mission-vision-section",children:[p.jsxs("div",{className:"card mission-card",children:[p.jsx("h3",{children:"Mission"}),p.jsx("p",{children:"To provide high-quality, ethically sourced coffees in a welcoming environment where people can connect, relax, and recharge."})]}),p.jsxs("div",{className:"card vision-card",children:[p.jsx("h3",{children:"Vision"}),p.jsx("p",{children:"To be the most loved local coffee brand known for exceptional flavor, sustainability, and community impact."})]})]}),p.jsxs("div",{className:"development-cards",children:[p.jsxs("div",{className:"dev-card",children:[p.jsx("img",{src:"https://ibb.co/jZZQYb0h",alt:"Encourage Skill Development"}),p.jsx("h4",{children:"Encourage Skill Development"}),p.jsx("p",{children:"Providing continuous training and education programs to equip individuals with necessary skills."})]}),p.jsxs("div",{className:"dev-card",children:[p.jsx("img",{src:"https://ibb.co/qT2wQyT",alt:"Expand Career Opportunities"}),p.jsx("h4",{children:"Expand Career Opportunities"}),p.jsx("p",{children:"Offering pathways for employment and advancement across various fields."})]}),p.jsxs("div",{className:"dev-card",children:[p.jsx("img",{src:"https://ibb.co/rKddwgMk",alt:"Promote Sustainable Livelihood"}),p.jsx("h4",{children:"Promote Sustainable Livelihood"}),p.jsx("p",{children:"Supporting sustainable projects that help maintain long-term economic growth for residents."})]})]}),p.jsxs("div",{className:"about-skillconnect",children:[p.jsx("h3",{children:"About SkillConnect"}),p.jsx("p",{children:"SkillConnect is a platform designed to connect skilled laborers with industries and businesses who need their services. Whether youre a professional looking for opportunities or someone seeking reliable help, SkillConnect bridges the gap."}),p.jsx("div",{className:"skillconnect-image",children:p.jsx("img",{src:"https://ibb.co/nsYsmHQ1",alt:"SkillConnect"})})]}),p.jsxs("div",{className:"contact-section",children:[p.jsxs("div",{className:"contact-form",children:[p.jsx("h3",{children:"Lets Get In Touch"}),p.jsxs("form",{children:[p.jsx("label",{htmlFor:"name",children:"Name"}),p.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Your name"}),p.jsx("label",{htmlFor:"email",children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Your email"}),p.jsx("label",{htmlFor:"message",children:"How Can We Help?"}),p.jsx("textarea",{id:"message",name:"message",rows:"4",placeholder:"Type your message here..."}),p.jsx("button",{type:"submit",className:"send-btn",children:"Send Message"})]})]}),p.jsx("div",{className:"contact-image",children:p.jsx("img",{src:"https://ibb.co/FLCfgXNr",alt:"Contact Person"})})]})]}),AI=()=>{const[t,e]=Te.useState({email:"",password:""}),[i,n]=Te.useState({}),[o,u]=Te.useState(!1),[A,a]=Te.useState(!1),{setIsAuthorized:g,setUser:b,setTokenType:B,setIsUserVerified:I}=Ol(),P=fl(),F=()=>{const H={};return t.email?/\S+@\S+\.\S+/.test(t.email)||(H.email="Please enter a valid email address"):H.email="Email is required",t.password?t.password.length<6&&(H.password="Password must be at least 6 characters"):H.password="Password is required",n(H),Object.keys(H).length===0};Te.useEffect(()=>{const H=JSON.parse(localStorage.getItem("user")||"null"),j=localStorage.getItem("token"),V=localStorage.getItem("isAuthorized")==="true",W=localStorage.getItem("tokenType");H&&V&&j&&W==="user"&&(b(H),g(!0),B(W),I(H.role=="Service Provider"||!1),xx(j),H.role=="Service Provider"?P("/user/my-service"):P("/user/request-service"))},[P,b,g,B,I]);const Q=H=>{const{name:j,value:V}=H.target;e(W=>({...W,[j]:V})),i[j]&&n(W=>({...W,[j]:""}))},R=async H=>{if(H.preventDefault(),!!F()){u(!0);try{const{data:j}=await Oi.post("/user/login",{email:t.email,password:t.password});b(j.user),g(!0),B("user"),I(j.user.isVerified||!1),localStorage.setItem("user",JSON.stringify(j.user)),localStorage.setItem("token",j.token),localStorage.setItem("isAuthorized","true"),localStorage.setItem("tokenType","user"),A&&localStorage.setItem("rememberedEmail",t.email);const V=localStorage.getItem("token");V&&xx(V),Si.success(j.message||"Login successful!"),e({email:"",password:""}),n({}),j.user.isVerified?P("/user/my-service"):P("/user/request-service")}catch(j){const V=j.response?.data?.message||"Login failed. Please try again.";Si.error(V),(V.toLowerCase().includes("email")||V.toLowerCase().includes("password"))&&n({general:V})}finally{u(!1)}}};return p.jsx("div",{className:"auth-container",children:p.jsxs("div",{className:"auth-card",children:[p.jsxs("div",{className:"auth-banner",children:[p.jsx("img",{src:"https://i.ibb.co/MxKr7FVx/1000205778-removebg-preview.png",alt:"SkillConnect4B410 Logo"}),p.jsx("h2",{children:"Welcome Back"}),p.jsx("p",{children:"Sign in to your account"})]}),i.general&&p.jsxs("div",{className:"error-message",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),i.general]}),p.jsxs("form",{onSubmit:R,className:"auth-form",children:[p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-envelope"}),p.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Enter your email address",value:t.email,onChange:Q,className:`auth-input ${i.email?"error":""}`,disabled:o,"aria-describedby":i.email?"email-error":"email-help","aria-invalid":!!i.email,autoComplete:"email",required:!0})]}),i.email&&p.jsxs("span",{id:"email-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),i.email]}),p.jsx("small",{id:"email-help",className:"form-help",children:"We'll use this email to send you important updates about your account"})]}),p.jsxs("div",{className:"input-container",children:[p.jsxs("div",{className:"icon-input",children:[p.jsx("i",{className:"fas fa-lock"}),p.jsx("input",{type:"password",id:"password",name:"password",placeholder:"Enter your password",value:t.password,onChange:Q,className:`auth-input ${i.password?"error":""}`,disabled:o,"aria-describedby":i.password?"password-error":"password-help","aria-invalid":!!i.password,autoComplete:"current-password",required:!0})]}),i.password&&p.jsxs("span",{id:"password-error",className:"field-error",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),i.password]}),p.jsx("small",{id:"password-help",className:"form-help",children:"Your password must be at least 6 characters long"})]}),p.jsxs("div",{className:"form-options",children:[p.jsxs("label",{className:"checkbox-container",children:[p.jsx("input",{type:"checkbox",checked:A,onChange:H=>a(H.target.checked),disabled:o}),"Remember me"]}),p.jsx(ar,{to:"/forgot-password",className:"forgot-password",children:"Forgot password?"})]}),p.jsx("button",{type:"submit",className:"auth-btn",disabled:o,children:o?p.jsx(p.Fragment,{children:"Signing In..."}):"Sign In"}),p.jsxs("div",{className:"auth-links",children:[p.jsxs("p",{children:["Don't have an account?"," ",p.jsx(ar,{to:"/register",className:"auth-link-text",children:"Create one here"})]}),p.jsxs("p",{className:"admin-link",children:["Admin?"," ",p.jsx(ar,{to:"/admin/login",className:"admin-link-text",children:"Login as Administrator"})]})]})]})]})})},hI=()=>{const[t,e]=Te.useState({role:"",skills:[],profilePic:null,username:"",password:"",confirmPassword:"",firstName:"",lastName:"",email:"",phone:"",address:"",occupation:"",birthdate:"",employed:"",isApplyingProvider:!1,certificates:[],validId:null}),[i,n]=Te.useState(!1),[o,u]=Te.useState(!1),[A,a]=Te.useState(!1),[g,b]=Te.useState({}),[B,I]=Te.useState(!1),{isAuthorized:P,setIsAuthorized:F,setUser:Q,setTokenType:R}=Ol(),H=fl(),j=()=>{const re={};(!t.username||t.username.length<3)&&(re.username="Username must be at least 3 characters long"),(!t.password||t.password.length<6)&&(re.password="Password must be at least 6 characters long"),t.password!==t.confirmPassword&&(re.confirmPassword="Passwords do not match");const xe=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;(!t.email||!xe.test(t.email))&&(re.email="Please enter a valid email address");const Be=/^[\+]?[0-9\-\(\)\s]+$/;return(!t.phone||!Be.test(t.phone))&&(re.phone="Please enter a valid phone number"),t.firstName.trim()||(re.firstName="First name is required"),t.lastName.trim()||(re.lastName="Last name is required"),t.address.trim()||(re.address="Address is required"),t.birthdate||(re.birthdate="Birthdate is required"),(!t.employed||!["employed","unemployed"].includes(t.employed))&&(re.employed="Employment status must be Employed or Unemployed"),t.role==="Service Provider Applicant"&&(!t.skills||t.skills.length===0?re.skills="At least one skill is required for Service Providers":t.skills.length>3&&(re.skills="You can select a maximum of 3 skills"),t.certificates.length===0&&(re.certificates="Certificates are required for Service Providers"),t.validId?t.validId.type.startsWith("image/")||(re.validId="Valid ID must be an image file (JPG, PNG, etc.)"):re.validId="Valid ID is required for Service Providers"),b(re),Object.keys(re).length===0},[V,W]=Te.useState(!1);Te.useEffect(()=>{if(!V)return;const re=setTimeout(()=>{j()},500);return()=>clearTimeout(re)},[t,V]);const ne=re=>{const{name:xe,value:Be,type:se,files:ae}=re.target;if(se==="file")e(xe==="certificates"?{...t,certificates:Array.from(ae)}:{...t,[xe]:ae[0]});else{const ce={...t,[xe]:Be};xe==="role"&&(ce.isApplyingProvider=Be==="Service Provider"),e(ce)}},te=async re=>{if(re.preventDefault(),W(!0),!j()){Si.error("Please fix the errors in the form before submitting");return}I(!0);try{const xe=new FormData;Object.keys(t).forEach(se=>{if(t[se])if(se==="certificates")t[se].forEach(ae=>xe.append(se,ae));else{if(se==="validId"&&t.role!=="Service Provider Applicant")return;xe.append(se,t[se])}});const{data:Be}=await Oi.post("/user/register",xe,{headers:{"Content-Type":"multipart/form-data"}});Si.success(Be.message),n(!0),Q(Be.user),F(!0),R("user"),Be.user.isVerified?H("/user/my-service"):H("/user/request-service"),localStorage.setItem("user",JSON.stringify(Be.user)),localStorage.setItem("isAuthorized","true"),localStorage.setItem("tokenType","user"),setTimeout(()=>n(!1),5e3)}catch(xe){Si.error(xe.response?.data?.message||"Registration failed")}finally{I(!1)}},ee=(re=>re.length===0?{strength:0,label:""}:re.length<6?{strength:1,label:"Weak"}:re.length<10?{strength:2,label:"Medium"}:{strength:3,label:"Strong"})(t.password);return p.jsxs("div",{className:"auth-container",children:[p.jsxs("div",{className:"auth-card register-card",children:[p.jsxs("div",{className:"auth-banner",children:[p.jsx("img",{src:"https://i.ibb.co/MxKr7FVx/1000205778-removebg-preview.png",alt:"Logo"}),p.jsx("h2",{children:"SkillConnect4B410"}),p.jsx("p",{children:"Create your account to book or offer services in the community."})]}),p.jsxs("form",{onSubmit:te,className:"auth-form register-form",noValidate:!0,children:[p.jsxs("div",{className:"form-group file-upload register-file",children:[p.jsx("label",{htmlFor:"profilePic",className:"register-label",children:"Upload Profile Picture:"}),p.jsx("input",{type:"file",id:"profilePic",name:"profilePic",accept:"image/*",onChange:ne,className:`register-input ${t.profilePic?"has-file":""}`,"aria-describedby":"profilePic-help"}),p.jsx("div",{className:"preview-box","aria-live":"polite",children:t.profilePic?p.jsx("img",{src:URL.createObjectURL(t.profilePic),alt:"Profile preview"}):p.jsx("span",{children:"No file selected"})}),p.jsx("small",{id:"profilePic-help",className:"form-help",children:"Optional: Upload a profile picture (JPG, PNG only)"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Username"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-user","aria-hidden":"true"}),p.jsx("input",{type:"text",name:"username",placeholder:"Choose a unique username",value:t.username,onChange:ne,required:!0,className:`auth-input ${g.username?"error":t.username?"success":""}`,"aria-describedby":g.username?"username-error":"username-help","aria-invalid":!!g.username,autoComplete:"username"}),t.username&&!g.username&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),g.username&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]})]}),g.username&&p.jsx("small",{id:"username-error",className:"field-error",role:"alert",children:g.username}),p.jsx("small",{id:"username-help",className:"form-help",children:"Choose a unique username (minimum 3 characters) - this will be visible to other users"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Password"}),p.jsxs("div",{className:"input-container icon-input password-field",children:[p.jsx("i",{className:"fas fa-lock","aria-hidden":"true"}),p.jsx("input",{type:o?"text":"password",name:"password",placeholder:"Enter Password",value:t.password,onChange:ne,required:!0,className:`register-input ${g.password?"error":t.password&&ee.strength>=2?"success":""}`,"aria-describedby":g.password?"password-error":"password-help","aria-invalid":!!g.password}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>u(!o),"aria-label":o?"Hide password":"Show password",children:o?p.jsx(s0,{}):p.jsx(a0,{})}),t.password&&!g.password&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),g.password&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]})]}),g.password&&p.jsx("small",{id:"password-error",className:"field-error",role:"alert",children:g.password}),t.password&&p.jsx("div",{className:"password-strength","aria-live":"polite",children:p.jsx("div",{className:`strength-bar strength-${ee.strength}`,children:p.jsx("span",{className:"strength-label",children:ee.label})})}),p.jsx("small",{id:"password-help",className:"form-help",children:"Password must be at least 6 characters long"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Confirm Password"}),p.jsxs("div",{className:"input-container icon-input password-field",children:[p.jsx("i",{className:"fas fa-lock","aria-hidden":"true"}),p.jsx("input",{type:A?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",value:t.confirmPassword,onChange:ne,required:!0,className:`register-input ${g.confirmPassword?"error":t.confirmPassword&&t.password===t.confirmPassword?"success":""}`,"aria-describedby":g.confirmPassword?"confirmPassword-error":"confirmPassword-help","aria-invalid":!!g.confirmPassword}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>a(!A),"aria-label":A?"Hide password":"Show password",children:A?p.jsx(s0,{}):p.jsx(a0,{})}),t.confirmPassword&&t.password===t.confirmPassword&&!g.confirmPassword&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),g.confirmPassword&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]})]}),g.confirmPassword&&p.jsx("small",{id:"confirmPassword-error",className:"field-error",role:"alert",children:g.confirmPassword}),p.jsx("small",{id:"confirmPassword-help",className:"form-help",children:"Re-enter your password to confirm"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Email"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-envelope","aria-hidden":"true"}),p.jsx("input",{type:"email",name:"email",placeholder:"Enter Email",value:t.email,onChange:ne,required:!0,className:`register-input ${g.email?"error":t.email?"success":""}`,"aria-describedby":g.email?"email-error":"email-help","aria-invalid":!!g.email}),t.email&&!g.email&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),g.email&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]})]}),g.email&&p.jsx("small",{id:"email-error",className:"field-error",role:"alert",children:g.email}),p.jsx("small",{id:"email-help",className:"form-help",children:"We'll use this to send you important updates"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"First Name"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-id-card","aria-hidden":"true"}),p.jsx("input",{type:"text",name:"firstName",placeholder:"First Name",value:t.firstName,onChange:ne,required:!0,className:`register-input ${g.firstName?"error":t.firstName?"success":""}`,"aria-describedby":g.firstName?"firstName-error":"firstName-help","aria-invalid":!!g.firstName}),t.firstName&&!g.firstName&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),g.firstName&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]})]}),g.firstName&&p.jsx("small",{id:"firstName-error",className:"field-error",role:"alert",children:g.firstName}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Last Name"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-id-card","aria-hidden":"true"}),p.jsx("input",{type:"text",name:"lastName",placeholder:"Last Name",value:t.lastName,onChange:ne,required:!0,className:`register-input ${g.lastName?"error":t.lastName?"success":""}`,"aria-describedby":g.lastName?"lastName-error":"lastName-help","aria-invalid":!!g.lastName}),t.lastName&&!g.lastName&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),g.lastName&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]})]}),g.lastName&&p.jsx("small",{id:"lastName-error",className:"field-error",role:"alert",children:g.lastName}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Phone Number"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-phone","aria-hidden":"true"}),p.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:t.phone,onChange:ne,required:!0,className:`register-input ${g.phone?"error":t.phone?"success":""}`,"aria-describedby":g.phone?"phone-error":"phone-help","aria-invalid":!!g.phone}),t.phone&&!g.phone&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),g.phone&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]})]}),g.phone&&p.jsx("small",{id:"phone-error",className:"field-error",role:"alert",children:g.phone}),p.jsx("small",{id:"phone-help",className:"form-help",children:"Include country code for international numbers"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Address"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-map-marker-alt","aria-hidden":"true"}),p.jsx("input",{type:"text",name:"address",placeholder:"Address",value:t.address,onChange:ne,required:!0,className:`register-input ${g.address?"error":t.address?"success":""}`,"aria-describedby":g.address?"address-error":"address-help","aria-invalid":!!g.address}),t.address&&!g.address&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),g.address&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]})]}),g.address&&p.jsx("small",{id:"address-error",className:"field-error",role:"alert",children:g.address}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Occupation"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-briefcase","aria-hidden":"true"}),p.jsx("input",{type:"text",name:"occupation",placeholder:"Occupation",value:t.occupation,onChange:ne,className:`register-input ${t.occupation?"success":""}`,"aria-describedby":"occupation-help"}),t.occupation&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"})]})]}),p.jsx("small",{id:"occupation-help",className:"form-help",children:"Optional: Enter your current occupation or profession"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Role"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-user-tag","aria-hidden":"true"}),p.jsxs("select",{name:"role",value:t.role,onChange:ne,required:!0,className:`register-input ${t.role?"success":""}`,"aria-describedby":"role-help","aria-label":"Select your role in the community",children:[p.jsx("option",{value:"Community Member",children:"Community Member"}),p.jsx("option",{value:"Service Provider Applicant",children:"Service Provider"})]})]})]}),p.jsx("small",{id:"role-help",className:"form-help",children:"Community Members can request services, Service Providers can offer services"}),t.role==="Service Provider Applicant"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"skills-selection",children:[p.jsxs("label",{className:"skills-label",children:[p.jsx("i",{className:"fas fa-tools","aria-hidden":"true"}),"Select Your Skills (Choose 1-3)"]}),p.jsx("div",{className:"skills-grid",children:["Pipe Installation","Leak Repair","Toilet Installation","Drain Cleaning","Water Heater Setup","Wiring Installation","Lighting Repair","Appliance Troubleshooting","Outlet Installation","Circuit Breaker Maintenance","General House Cleaning","Deep Cleaning","Carpet Cleaning","Sofa Shampooing","Post-Construction Cleaning","Furniture Repair","Wood Polishing","Door and Window Fixing","Custom Woodwork","Cabinet Installation","Interior Painting","Exterior Painting","Repainting","Wallpaper Installation","Color Consultation","Air Conditioner Repair","Refrigerator Repair","Washing Machine Repair","Microwave Oven Fixing","Electric Fan Maintenance","Tiling","Roofing","Masonry","Floor Installation","Room Remodeling","Termite Treatment","Cockroach Control","Rodent Control","Disinfection","Mosquito Control","Lawn Mowing","Plant Care","Landscape Design","Tree Trimming","Garden Cleanup","Aircon Installation","Aircon Cleaning","HVAC Maintenance","Filter Replacement","Ventilation Setup","Washing Clothes","Drying & Ironing","Folding & Packaging","Delicate Fabric Care","Stain Removal"].map(re=>p.jsx("div",{className:"skill-item",children:p.jsxs("label",{className:"skill-checkbox",children:[p.jsx("input",{type:"checkbox",checked:t.skills.includes(re),onChange:xe=>{const Be=[...t.skills];if(xe.target.checked)Be.length<3&&Be.push(re);else{const se=Be.indexOf(re);se>-1&&Be.splice(se,1)}e({...t,skills:Be})},disabled:!t.skills.includes(re)&&t.skills.length>=3}),p.jsx("span",{className:"checkmark"}),p.jsx("div",{className:"skill-content",children:p.jsx("div",{className:"skill-name",children:re})})]})},re))}),p.jsxs("div",{className:"skills-count",children:["Selected: ",t.skills.length,"/3 skills"]})]}),g.skills&&p.jsx("small",{id:"skills-error",className:"field-error",role:"alert",children:g.skills}),p.jsx("small",{id:"skills-help",className:"form-help",children:"Choose up to 3 skills that best match your expertise"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Birth Date"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-calendar","aria-hidden":"true"}),p.jsx("input",{type:"date",name:"birthdate",value:t.birthdate,onChange:ne,required:!0,className:`register-input ${g.birthdate?"error":t.birthdate?"success":""}`,"aria-describedby":g.birthdate?"birthdate-error":"birthdate-help","aria-invalid":!!g.birthdate,max:new Date().toISOString().split("T")[0]}),t.birthdate&&!g.birthdate&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),g.birthdate&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]})]}),g.birthdate&&p.jsx("small",{id:"birthdate-error",className:"field-error",role:"alert",children:g.birthdate}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"field-label",children:"Employment Status"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-briefcase","aria-hidden":"true"}),p.jsxs("select",{name:"employed",value:t.employed,onChange:ne,required:!0,className:`register-input ${g.employed?"error":t.employed?"success":""}`,"aria-describedby":g.employed?"employed-error":"employed-help","aria-invalid":!!g.employed,"aria-label":"Select your employment status",children:[p.jsx("option",{value:"",children:"Select Employment Status"}),p.jsx("option",{value:"employed",children:"Employed"}),p.jsx("option",{value:"unemployed",children:"Unemployed"})]}),t.employed&&!g.employed&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),g.employed&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]})]}),g.employed&&p.jsx("small",{id:"employed-error",className:"field-error",role:"alert",children:g.employed}),t.role==="Service Provider Applicant"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"form-group file-upload",children:[p.jsx("label",{htmlFor:"certificates",className:"register-label",children:"Upload Certificates *"}),p.jsx("input",{type:"file",id:"certificates",name:"certificates",accept:"image/*,application/pdf",multiple:!0,onChange:ne,className:`register-input ${g.certificates?"error":t.certificates.length>0?"success":""}`,"aria-describedby":g.certificates?"certificates-error":"certificates-help","aria-invalid":!!g.certificates}),p.jsx("div",{className:"file-list","aria-live":"polite",children:t.certificates.length>0?t.certificates.map((re,xe)=>p.jsx("div",{className:"file-item",children:re.type.startsWith("image/")?p.jsx("img",{src:URL.createObjectURL(re),alt:`Certificate ${xe+1}`}):p.jsx("span",{className:"file-name",children:re.name})},xe)):p.jsx("span",{className:"no-files",children:"No files selected"})}),g.certificates&&p.jsx("small",{id:"certificates-error",className:"field-error",role:"alert",children:g.certificates}),p.jsx("small",{id:"certificates-help",className:"form-help",children:"Upload certificates or licenses that prove your skills"})]}),p.jsxs("div",{className:"form-group file-upload",children:[p.jsx("label",{htmlFor:"validId",className:"register-label",children:"Upload Valid ID *"}),p.jsx("input",{type:"file",id:"validId",name:"validId",accept:"image/*",onChange:ne,className:`register-input ${g.validId?"error":t.validId?"success":""}`,"aria-describedby":g.validId?"validId-error":"validId-help","aria-invalid":!!g.validId}),p.jsx("div",{className:"file-preview","aria-live":"polite",children:t.validId?t.validId.type.startsWith("image/")?p.jsx("img",{src:URL.createObjectURL(t.validId),alt:"Valid ID preview"}):p.jsx("span",{className:"file-name",children:"Invalid file type. Please select an image."}):p.jsx("span",{className:"no-file",children:"No file selected"})}),g.validId&&p.jsx("small",{id:"validId-error",className:"field-error",role:"alert",children:g.validId}),p.jsx("small",{id:"validId-help",className:"form-help",children:"Upload a government-issued ID (images only: JPG, PNG, etc.)"})]})]}),p.jsx("button",{type:"submit",className:"auth-btn register-btn",disabled:B||Object.keys(g).length>0,"aria-describedby":"submit-help",children:B?p.jsx(p.Fragment,{children:"Creating Account..."}):"Create Account"}),p.jsx("small",{id:"submit-help",className:"form-help",children:"By creating an account, you agree to our terms of service"}),p.jsx("div",{className:"auth-links",children:p.jsxs("p",{children:["Already have an account? ",p.jsx(ar,{to:"/login",children:"Login"})," |"," ",p.jsx(ar,{to:"/admin/login",children:"Admin Login"})]})})]})]}),i&&p.jsx("div",{className:"popup-overlay",children:p.jsx("div",{className:"popup-box",children:p.jsx("h3",{children:"Registration successful! Welcome to SkillConnect."})})})]})},dI=()=>{const t=fl(),[e,i]=Te.useState(""),[n,o]=Te.useState(!1),[u,A]=Te.useState({}),a=B=>{const I=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return B?I.test(B)?"":"Please enter a valid email address":"Email address is required"},g=B=>{const I=B.target.value;i(I),A({...u,email:a(I)})},b=async B=>{B.preventDefault();const I=a(e);if(I){A({email:I}),Si.error("Please enter a valid email address");return}o(!0);try{const{data:P}=await Oi.post("/user/send-verification-otp",{email:e,purpose:"password_reset"});P.success?(localStorage.setItem("resetEmail",e),Si.success("Verification code sent to your email!"),t("/verify-email")):Si.error(P.message||"Failed to send verification code")}catch(P){Si.error(P.response?.data?.message||"Failed to send verification code. Please try again.")}finally{o(!1)}};return p.jsx("div",{className:"forgot-password-container",children:p.jsxs("div",{className:"forgot-password-card",children:[p.jsxs("div",{className:"forgot-password-header",children:[p.jsx("h2",{children:"Forgot Password?"}),p.jsx("p",{children:"Enter your email address and we'll send you a link to reset your password."})]}),p.jsxs("form",{onSubmit:b,className:"forgot-password-form",noValidate:!0,children:[p.jsxs("div",{className:"email-input-group",children:[p.jsx(Sx,{}),p.jsx("input",{type:"email",name:"email",placeholder:"your.email@example.com",value:e,onChange:g,className:"email-input","aria-describedby":u.email?"email-error":"email-help","aria-invalid":!!u.email,autoComplete:"email",required:!0}),e&&!u.email&&p.jsx(Do,{className:"success-icon","aria-hidden":"true"})]}),u.email&&p.jsx("small",{id:"email-error",className:"error-message",role:"alert",children:u.email}),e&&!u.email&&p.jsx("small",{className:"success-message",role:"alert",children:"Email address looks good!"}),p.jsx("small",{id:"email-help",className:"help-text",children:"Enter the email address associated with your account - we'll send you a password reset link"}),p.jsx("button",{type:"submit",className:"submit-button",disabled:n||!!u.email,"aria-describedby":"submit-help",children:n?p.jsx(p.Fragment,{children:"Sending Reset Email..."}):p.jsxs(p.Fragment,{children:[p.jsx(Sx,{className:"button-icon"}),"Send Reset Email"]})}),p.jsx("small",{id:"submit-help",className:"help-text",children:"We'll send you an email with instructions to reset your password"}),p.jsx("div",{className:"back-to-login-section",children:p.jsxs(ar,{to:"/login",className:"back-link",children:[p.jsx(A1,{className:"link-icon"}),"Back to Login"]})})]})]})})},fI=()=>{const t=fl(),[e,i]=Te.useState(""),[n,o]=Te.useState(["","","","","",""]),[u,A]=Te.useState(!1),[a,g]=Te.useState(!1),[b,B]=Te.useState(60),[I,P]=Te.useState({});Te.useEffect(()=>{const j=localStorage.getItem("resetEmail");j?i(j):(Si.error("No email found. Please try again."),t("/forgot-password"))},[t]),Te.useEffect(()=>{let j;return b>0&&(j=setTimeout(()=>B(b-1),1e3)),()=>clearTimeout(j)},[b]);const F=(j,V)=>{if(j.length>1)return;const W=[...n];if(W[V]=j,o(W),j&&V<n.length-1){const ne=document.getElementById(`otp-${V+1}`);ne&&ne.focus()}},Q=(j,V)=>{if(j.key==="Backspace"&&!n[V]&&V>0){const W=document.getElementById(`otp-${V-1}`);W&&W.focus()}},R=async j=>{j.preventDefault();const V=n.join("");if(V.length!==6){P({otp:"Please enter the complete 6-digit code"});return}A(!0);try{const{data:W}=await Oi.post("/user/verify-otp",{email:e,otp:V,purpose:"password_reset"});W.success?(localStorage.setItem("resetToken",W.token),Si.success("Email verified successfully!"),t(`/reset-password?email=${encodeURIComponent(e)}&token=${encodeURIComponent(W.token)}`)):P({otp:W.message||"Invalid verification code"})}catch(W){P({otp:W.response?.data?.message||"Failed to verify code. Please try again."})}finally{A(!1)}},H=async()=>{if(!(b>0)){g(!0);try{const{data:j}=await Oi.post("/user/send-verification-otp",{email:e,purpose:"password_reset"});j.success?(B(60),Si.success("Verification code sent again!")):Si.error(j.message||"Failed to resend code")}catch(j){Si.error(j.response?.data?.message||"Failed to resend verification code. Please try again.")}finally{g(!1)}}};return p.jsx("div",{className:"auth-container",children:p.jsxs("div",{className:"auth-card verify-email-card",children:[p.jsxs("div",{className:"auth-banner",children:[p.jsx("h2",{children:"Verify Your Email"}),p.jsx("p",{children:"Enter the 6-digit code sent to your email"})]}),p.jsxs("form",{onSubmit:R,className:"auth-form",noValidate:!0,children:[p.jsxs("div",{className:"email-display",children:[p.jsx(Sx,{className:"email-icon"}),p.jsx("span",{children:e})]}),p.jsx("div",{className:"otp-container",children:n.map((j,V)=>p.jsx("input",{id:`otp-${V}`,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"1",value:j,onChange:W=>F(W.target.value,V),onKeyDown:W=>Q(W,V),className:`otp-input ${I.otp?"error":j?"filled":""}`,"aria-describedby":I.otp?"otp-error":"otp-help","aria-invalid":!!I.otp,autoComplete:"one-time-code",required:!0},V))}),I.otp&&p.jsx("small",{id:"otp-error",className:"field-error",role:"alert",children:I.otp}),p.jsx("small",{id:"otp-help",className:"form-help",children:"Enter the 6-digit verification code sent to your email address"}),p.jsx("div",{className:"resend-container",children:p.jsx("button",{type:"button",className:"resend-btn",onClick:H,disabled:b>0||a,children:a?"Sending...":b>0?`Resend code in ${b}s`:"Resend verification code"})}),p.jsx("button",{type:"submit",className:"auth-btn primary",disabled:u||n.join("").length!==6,"aria-describedby":"submit-help",children:u?p.jsx(p.Fragment,{children:"Verifying..."}):p.jsxs(p.Fragment,{children:[p.jsx(Do,{className:"btn-icon"}),"Verify Email"]})}),p.jsx("small",{id:"submit-help",className:"form-help",children:"Verify your email to proceed with password reset"}),p.jsx("div",{className:"verify-email-footer",children:p.jsxs("button",{type:"button",className:"back-to-forgot",onClick:()=>t("/forgot-password"),children:[p.jsx(A1,{className:"btn-icon"}),"Back to Forgot Password"]})})]})]})})},pI=()=>{const[t]=NT(),e=fl(),[i,n]=Te.useState({email:"",token:"",newPassword:"",confirmPassword:""}),[o,u]=Te.useState(!1),[A,a]=Te.useState({}),[g,b]=Te.useState(!1),[B,I]=Te.useState(!1);Te.useEffect(()=>{const H=t.get("email"),j=t.get("token");H&&j?n(V=>({...V,email:H,token:j})):(Si.error("Invalid reset link. Please request a new password reset."),e("/forgot-password"))},[t,e]);const P=H=>H?H.length<8?"Password must be at least 8 characters long":"":"Password is required",F=(H,j)=>H?H!==j?"Passwords do not match":"":"Please confirm your password",Q=(H,j)=>{n(V=>({...V,[H]:j})),H==="newPassword"?a(V=>({...V,newPassword:P(j),confirmPassword:i.confirmPassword?F(i.confirmPassword,j):V.confirmPassword})):H==="confirmPassword"&&a(V=>({...V,confirmPassword:F(j,i.newPassword)}))},R=async H=>{H.preventDefault();const j=P(i.newPassword),V=F(i.confirmPassword,i.newPassword);if(j||V){a({newPassword:j,confirmPassword:V});return}u(!0);try{const{data:W}=await Oi.post("/user/reset-password",{email:i.email,token:i.token,newPassword:i.newPassword});W.success?(Si.success("Password reset successfully! You can now log in with your new password."),e("/login")):Si.error(W.message||"Failed to reset password")}catch(W){Si.error(W.response?.data?.message||"Failed to reset password. Please try again.")}finally{u(!1)}};return p.jsx("div",{className:"auth-container",children:p.jsxs("div",{className:"auth-card reset-password-card",children:[p.jsxs("div",{className:"auth-banner",children:[p.jsx("h2",{children:"Reset Your Password"}),p.jsx("p",{children:"Enter your new password below"})]}),p.jsxs("form",{onSubmit:R,className:"auth-form",noValidate:!0,children:[p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-lock","aria-hidden":"true"}),p.jsx("input",{type:g?"text":"password",name:"newPassword",placeholder:"New Password",value:i.newPassword,onChange:H=>Q("newPassword",H.target.value),className:`auth-input ${A.newPassword?"error":i.newPassword?"success":""}`,"aria-describedby":A.newPassword?"password-error":"password-help","aria-invalid":!!A.newPassword,autoComplete:"new-password",required:!0}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>b(!g),"aria-label":g?"Hide password":"Show password",children:g?p.jsx(s0,{}):p.jsx(a0,{})}),i.newPassword&&!A.newPassword&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),A.newPassword&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]}),A.newPassword&&p.jsx("small",{id:"password-error",className:"field-error",role:"alert",children:A.newPassword}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-lock","aria-hidden":"true"}),p.jsx("input",{type:B?"text":"password",name:"confirmPassword",placeholder:"Confirm New Password",value:i.confirmPassword,onChange:H=>Q("confirmPassword",H.target.value),className:`auth-input ${A.confirmPassword?"error":i.confirmPassword?"success":""}`,"aria-describedby":A.confirmPassword?"confirm-error":"confirm-help","aria-invalid":!!A.confirmPassword,autoComplete:"new-password",required:!0}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>I(!B),"aria-label":B?"Hide password":"Show password",children:B?p.jsx(s0,{}):p.jsx(a0,{})}),i.confirmPassword&&!A.confirmPassword&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),A.confirmPassword&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]}),A.confirmPassword&&p.jsx("small",{id:"confirm-error",className:"field-error",role:"alert",children:A.confirmPassword}),p.jsx("small",{id:"password-help",className:"form-help",children:"Password must be at least 8 characters long and contain a mix of letters, numbers, and symbols"}),p.jsx("button",{type:"submit",className:"auth-btn primary",disabled:o||!!A.newPassword||!!A.confirmPassword,"aria-describedby":"submit-help",children:o?p.jsx(p.Fragment,{children:"Resetting Password..."}):p.jsxs(p.Fragment,{children:[p.jsx(VM,{className:"btn-icon"}),"Reset Password"]})}),p.jsx("small",{id:"submit-help",className:"form-help",children:"Your new password will be saved and you can use it to log in immediately"}),p.jsx("div",{className:"reset-password-footer",children:p.jsxs("button",{type:"button",className:"back-to-login",onClick:()=>e("/login"),children:[p.jsx(A1,{className:"btn-icon"}),"Back to Login"]})})]})]})})},mI=()=>{const[t,e]=Te.useState({email:"",password:""}),[i,n]=Te.useState({}),[o,u]=Te.useState(!1),[A,a]=Te.useState(!1),{setIsAuthorized:g,setAdmin:b,setTokenType:B}=Ol(),I=fl(),P=R=>{const{name:H,value:j}=R.target;e(V=>({...V,[H]:j})),i[H]&&n(V=>({...V,[H]:""}))},F=()=>{const R={};return t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email.trim())||(R.email="Please enter a valid email address"):R.email="Email address is required",t.password.trim()?t.password.trim().length<6&&(R.password="Password must be at least 6 characters long"):R.password="Password is required",n(R),Object.keys(R).length===0},Q=async R=>{if(R.preventDefault(),!F()){Si.error("Please check the form and fix any errors");return}u(!0);try{const{data:H}=await Oi.post("/admin/auth/login",{email:t.email.trim(),password:t.password.trim()});b(H.user),g(!0),B("admin"),localStorage.setItem("admin",JSON.stringify(H.user)),localStorage.setItem("isAuthorized","true"),localStorage.setItem("tokenType","admin"),localStorage.setItem("token",H.token),Si.success(`Welcome back, ${H.user.name||"Admin"}!`),e({email:"",password:""}),n({}),I("/admin/analytics")}catch(H){const j=H.response?.data?.message||"Login failed. Please check your credentials.";j.toLowerCase().includes("not found")||j.toLowerCase().includes("invalid")?n({general:"Invalid email or password. Please check your credentials and try again."}):j.toLowerCase().includes("admin")?n({general:"This account doesn't have administrator privileges. Please contact support if you need admin access."}):n({general:j}),Si.error("Login failed. Please check your information and try again.")}finally{u(!1)}};return p.jsx("div",{className:"auth-container",children:p.jsxs("div",{className:"auth-card admin-card",children:[p.jsxs("div",{className:"auth-banner admin-banner",children:[p.jsx("img",{src:"https://i.ibb.co/MxKr7FVx/1000205778-removebg-preview.png",alt:"SkillConnect4B410 Logo",className:"admin-logo"}),p.jsx("h2",{children:"Administrator Portal"}),p.jsx("p",{className:"admin-subtitle",children:"Secure access for authorized administrators"})]}),i.general&&p.jsxs("div",{className:"error-message admin-error",children:[p.jsx(Lb,{className:"message-icon"}),i.general]}),p.jsxs("form",{onSubmit:Q,className:"auth-form admin-form",noValidate:!0,children:[p.jsxs("div",{className:"form-field",children:[p.jsx("label",{htmlFor:"admin-email",className:"field-label",children:"Administrator Email"}),p.jsxs("div",{className:"input-container icon-input",children:[p.jsx("i",{className:"fas fa-envelope field-icon","aria-hidden":"true"}),p.jsx("input",{id:"admin-email",type:"email",name:"email",placeholder:"admin@skillconnect.com",value:t.email,onChange:P,className:`auth-input ${i.email?"error":t.email?"success":""}`,disabled:o,"aria-describedby":i.email?"email-error":"email-help","aria-invalid":!!i.email,autoComplete:"email",required:!0}),t.email&&!i.email&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),i.email&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]}),i.email&&p.jsxs("small",{id:"email-error",className:"field-error",role:"alert",children:[p.jsx(jl,{className:"error-icon-small"}),i.email]}),p.jsx("small",{id:"email-help",className:"field-help",children:"Use the email address registered with your administrator account"})]}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{htmlFor:"admin-password",className:"field-label",children:"Password"}),p.jsxs("div",{className:"input-container icon-input password-field",children:[p.jsx("i",{className:"fas fa-lock field-icon","aria-hidden":"true"}),p.jsx("input",{id:"admin-password",type:A?"text":"password",name:"password",placeholder:"Enter your administrator password",value:t.password,onChange:P,className:`auth-input ${i.password?"error":t.password?"success":""}`,disabled:o,"aria-describedby":i.password?"password-error":"password-help","aria-invalid":!!i.password,autoComplete:"current-password",required:!0}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>a(!A),"aria-label":A?"Hide password":"Show password",disabled:o,children:A?p.jsx(s0,{}):p.jsx(a0,{})}),t.password&&!i.password&&p.jsx(Do,{className:"validation-icon success","aria-hidden":"true"}),i.password&&p.jsx(jl,{className:"validation-icon error","aria-hidden":"true"})]}),i.password&&p.jsxs("small",{id:"password-error",className:"field-error",role:"alert",children:[p.jsx(jl,{className:"error-icon-small"}),i.password]}),p.jsx("small",{id:"password-help",className:"field-help",children:"Enter the password for your administrator account (minimum 6 characters)"})]}),p.jsx("button",{type:"submit",className:"auth-btn admin-btn",disabled:o,"aria-describedby":"submit-help",children:o?p.jsx(p.Fragment,{children:"Authenticating..."}):p.jsxs(p.Fragment,{children:[p.jsx(WM,{className:"btn-icon"}),"Access Admin Dashboard"]})}),p.jsx("small",{id:"submit-help",className:"form-help submit-help",children:"This will log you into the administrator control panel"}),p.jsxs("div",{className:"admin-navigation",children:[p.jsx("div",{className:"nav-item",children:p.jsxs(ar,{to:"/login",className:"nav-link",children:[p.jsx(A1,{className:"nav-icon"}),"Back to User Login"]})}),p.jsx("div",{className:"nav-item",children:p.jsx(ar,{to:"/forgot-password",className:"nav-link secondary",children:"Forgot your password?"})})]}),p.jsx("div",{className:"admin-help",children:p.jsxs("div",{className:"help-section",children:[p.jsx("h4",{children:"Need Help?"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Make sure you're using the correct administrator email"}),p.jsx("li",{children:"Check that your account has administrator privileges"}),p.jsx("li",{children:"Contact your system administrator if you need access"})]})]})})]})]})})},gI=()=>{const t=fl(),e=pu(),i=e.pathname==="/admin/analytics",n=e.pathname==="/admin/jobfairs",o=e.pathname==="/admin/service-requests",u=e.pathname==="/admin/users",A=e.pathname==="/admin/admin-settings",a=e.pathname==="/admin/admin-register",{setAdmin:g,setIsAuthorized:b,setTokenType:B,logout:I,admin:P}=Ol();Te.useEffect(()=>{e.pathname.startsWith("/admin/")&&localStorage.setItem("adminLastPath",e.pathname)},[e.pathname]);const F=async()=>{try{await I(),t("/admin/login")}catch(j){console.error("Logout failed:",j),t("/admin/analytics")}},Q=P?.name||"Admin",R=P?.profilePic||"default-avatar.png",H=R.startsWith("http")?R:`http://192.168.1.13:4000/uploads/${R}`;return p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
       
        /* === SIDEBAR === */
        .admin-sidebar {
          position: fixed;
          top: 90px;
          left: 0;
          width: 180px;
          height: calc(100vh - 70px);
          background: #ffffff;
          box-shadow: 2px 0 6px rgba(0, 0, 0, 0.05);
          display: flex;
          flex-direction: column;
        }


        .admin-sidebar-header {
          text-align: center;
          padding: 15px;
          border-bottom: 1px solid #f0f0f0;
        }


        .admin-avatar-container {
          position: relative;
          width: 50px;
          height: 50px;
          margin: 0 auto 8px;
        }


        .admin-avatar {
          width: 50px;
          height: 50px;
          border-radius: 50%;
          object-fit: cover;
          border: 2px solid #0a84ff;
          background: #f0f0f0;
        }


        .admin-status-indicator {
          position: absolute;
          bottom: -3px;
          right: 1px;
          width: 10px;
          height: 10px;
          background: #4caf50;
          border-radius: 50%;
          border: 2px solid #fff;
        }


        .admin-name {
          font-size: 0.9rem;
          font-weight: 600;
          margin: 5px 0 2px;
        }


        .admin-role {
          font-size: 0.75rem;
          color: #888;
        }


        .admin-sidebar-nav {
          flex: 1;
          overflow-y: auto; /*  Scrollable */
          overflow-x: hidden;
          padding-bottom: 15px;
        }


        .admin-sidebar-nav::-webkit-scrollbar {
          width: 4px;
        }


        .admin-sidebar-nav::-webkit-scrollbar-thumb {
          background-color: #d0d0d0;
          border-radius: 4px;
        }


        .admin-sidebar-nav::-webkit-scrollbar-thumb:hover {
          background-color: #a8a8a8;
        }


        .admin-sidebar-nav ul {
          list-style: none;
          padding: 0;
          margin: 0;
        }


        .admin-nav-link {
          display: flex;
          align-items: center;
          padding: 10px 15px;
          color: #444;
          text-decoration: none;
          font-weight: 500;
          font-size: 0.7rem;
          transition: all 0.3s;
          position: relative;
        }


        .admin-nav-link:hover {
          background: #f1f3f7;
        }


        .admin-nav-link.active {
          background: #0a84ff;
          color: #fff;
        }


        .nav-icon {
          font-size: 0.8rem;
          margin-right: 8px;
        }


        .nav-indicator {
          position: absolute;
          right: 8px;
          width: 5px;
          height: 5px;
          background: white;
          border-radius: 50%;
        }


        .admin-sidebar-footer {
          padding: 15px;
          border-top: 1px solid #f0f0f0;
        }
        /* === CONTENT AREA === */
        .admin-content-wrapper {
          margin-left: 180px;
          flex: 1;
          background: #f5f6fa;
          overflow-y: auto;
        }

      `}),p.jsxs("div",{className:"analytics-container",children:[p.jsxs("aside",{className:"admin-sidebar",children:[p.jsxs("div",{className:"admin-sidebar-header",children:[p.jsxs("div",{className:"admin-avatar-container",children:[p.jsx("img",{src:H,alt:"Administrator Profile",className:"admin-avatar"}),p.jsx("div",{className:"admin-status-indicator"})]}),p.jsx("h2",{className:"admin-name",children:Q}),p.jsx("p",{className:"admin-role",children:"System Administrator"})]}),p.jsx("nav",{className:"admin-sidebar-nav",role:"navigation","aria-label":"Admin navigation",children:p.jsxs("ul",{className:"admin-nav-links",children:[p.jsx("li",{children:p.jsxs(ar,{to:"/admin/analytics",className:`admin-nav-link ${i?"active":""}`,children:[p.jsx(p4,{className:"nav-icon"}),p.jsx("span",{className:"nav-text",children:"Dashboard Home"}),i&&p.jsx("div",{className:"nav-indicator"})]})}),p.jsx("li",{children:p.jsxs(ar,{to:"/admin/jobfairs",className:`admin-nav-link ${n?"active":""}`,children:[p.jsx(h4,{className:"nav-icon"}),p.jsx("span",{className:"nav-text",children:"Job Fairs"}),n&&p.jsx("div",{className:"nav-indicator"})]})}),p.jsx("li",{children:p.jsxs(ar,{to:"/admin/service-requests",className:`admin-nav-link ${o?"active":""}`,children:[p.jsx(QM,{className:"nav-icon"}),p.jsx("span",{className:"nav-text",children:"Service Requests"}),o&&p.jsx("div",{className:"nav-indicator"})]})}),p.jsx("li",{children:p.jsxs(ar,{to:"/admin/users",className:`admin-nav-link ${u?"active":""}`,children:[p.jsx(zg,{className:"nav-icon"}),p.jsx("span",{className:"nav-text",children:"User Management"}),u&&p.jsx("div",{className:"nav-indicator"})]})}),p.jsx("li",{children:p.jsxs(ar,{to:"/admin/admin-settings",className:`admin-nav-link ${A?"active":""}`,children:[p.jsx(hm,{className:"nav-icon"}),p.jsx("span",{className:"nav-text",children:"Admin Settings"}),A&&p.jsx("div",{className:"nav-indicator"})]})}),p.jsx("li",{children:p.jsxs(ar,{to:"/admin/admin-register",className:`admin-nav-link ${a?"active":""}`,children:[p.jsx(hm,{className:"nav-icon"}),p.jsx("span",{className:"nav-text",children:"Admin Register"}),a&&p.jsx("div",{className:"nav-indicator"})]})})]})}),p.jsx("div",{className:"admin-sidebar-footer",children:p.jsxs("button",{onClick:F,className:"export-btn",children:[p.jsx(g4,{}),"Logout"]})})]}),p.jsx("div",{className:"admin-content-wrapper",children:p.jsx(aC,{})})]})]})},yI=()=>{const[t,e]=Te.useState([]),[i,n]=Te.useState(!0),[o,u]=Te.useState("");return Te.useEffect(()=>{(async()=>{try{const a=await Oi.get("/admin/service-providers");e(a.data.workers||a.data||[])}catch{u("Failed to fetch service providers")}finally{n(!1)}})()},[]),i?p.jsx("div",{className:"loading-skeleton"}):o?p.jsxs("div",{className:"analytics-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsx("h1",{children:"Error"})}),p.jsx("div",{className:"analytics-card",children:p.jsx("p",{className:"metric-change negative",children:o})})]}):t.length===0?p.jsxs("div",{className:"analytics-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsx("h1",{children:"No Service Providers"})}),p.jsx("div",{className:"analytics-card",children:p.jsx("p",{children:"No service providers found."})})]}):p.jsxs("div",{className:"analytics-container",children:[p.jsxs("div",{className:"analytics-header",children:[p.jsx("h1",{children:"Service Providers"}),p.jsx("p",{children:"List of all service providers"})]}),p.jsx("div",{className:"analytics-card",children:t.map(A=>p.jsxs("div",{className:"analytics-card",children:[p.jsx("img",{src:A.profilePic||"/default-avatar.png",alt:`${A.firstName} ${A.lastName}`,className:"profile-pic"}),p.jsxs("h2",{children:[A.firstName," ",A.lastName]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Skills:"})," ",Array.isArray(A.skills)&&A.skills.length>0?A.skills.join(", "):"N/A"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Availability:"})," ",A.availability||"Not set"]})]},A._id))})]})},vI=()=>{const[t,e]=Te.useState({title:"",description:"",date:"",startTime:"",endTime:"",location:""}),[i,n]=Te.useState(!1),o=A=>{e({...t,[A.target.name]:A.target.value})},u=async A=>{A.preventDefault(),n(!0);try{const a=new FormData;a.append("title",t.title),a.append("description",t.description),a.append("date",t.date),a.append("startTime",t.startTime),a.append("endTime",t.endTime),a.append("location",t.location);const g=await Oi.post("/admin/jobfairs",a);g.data.success?(Si.success("Job fair created successfully!"),e({title:"",description:"",date:"",startTime:"",endTime:"",location:""})):Si.error(g.data.message||"Failed to create job fair")}catch(a){Si.error("Error: "+a.message)}finally{n(!1)}};return p.jsxs("div",{className:"container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"Create Job Fair"}),p.jsx("p",{className:"header-description",children:"Set up a new job fair event"})]})}),p.jsx("div",{className:"form-container",children:p.jsxs("form",{onSubmit:u,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Title"}),p.jsx("input",{type:"text",name:"title",value:t.title,onChange:o,autoComplete:"off",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Description"}),p.jsx("textarea",{name:"description",value:t.description,onChange:o,rows:"3",autoComplete:"off",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Date"}),p.jsx("input",{type:"date",name:"date",value:t.date,onChange:o,autoComplete:"off",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Start Time"}),p.jsx("input",{type:"time",name:"startTime",value:t.startTime,onChange:o,autoComplete:"off",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"End Time"}),p.jsx("input",{type:"time",name:"endTime",value:t.endTime,onChange:o,autoComplete:"off",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Location"}),p.jsx("input",{type:"text",name:"location",value:t.location,onChange:o,autoComplete:"address-level2",required:!0})]}),p.jsx("div",{className:"actions-section",children:p.jsx("button",{type:"submit",disabled:i,className:"export-btn",children:i?"Creating...":"Create Job Fair"})})]})})]})},_I=()=>{const[t,e]=Te.useState([]),[i,n]=Te.useState(1),[o,u]=Te.useState(10),[A,a]=Te.useState(1),[g,b]=Te.useState(0),[B,I]=Te.useState(!1),[P,F]=Te.useState(""),[Q,R]=Te.useState(""),[H,j]=Te.useState(""),[V]=Te.useState("createdAt"),[W]=Te.useState("desc"),ne=async(te=1,de=o)=>{I(!0),F("");try{const ee=new URLSearchParams;ee.set("page",te),ee.set("limit",de),Q&&ee.set("skill",Q),H&&ee.set("status",H),ee.set("sort",`${V}:${W}`);const re=await Oi.get(`/admin/service-requests?${ee.toString()}`);if(!re.data)throw new Error("Invalid response format");const xe=re.data;e(Array.isArray(xe.requests)?xe.requests:[]),n(te),a(xe.totalPages||1),b(xe.count||0)}catch(ee){console.error("Failed to fetch requests",ee),F(ee.response?.data?.message||ee.message||"Failed to fetch service requests"),e([]),b(0),a(1)}finally{I(!1)}};return Te.useEffect(()=>{ne(1)},[]),p.jsxs("div",{className:"user-management-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"Service Requests Review"}),p.jsx("p",{className:"header-description",children:"Review and manage all service requests from the platform"})]})}),p.jsx("div",{className:"filters-section",children:p.jsxs("div",{className:"filters-grid",children:[p.jsxs("div",{className:"filter-group",children:[p.jsxs("label",{className:"filter-label",children:[p.jsx("i",{className:"fas fa-tools"}),"Filter by Skill"]}),p.jsx("input",{type:"text",placeholder:"Enter skill name...",value:Q,onChange:te=>R(te.target.value),className:"filter-input"})]}),p.jsxs("div",{className:"filter-group",children:[p.jsxs("label",{className:"filter-label",children:[p.jsx("i",{className:"fas fa-filter"}),"Status Filter"]}),p.jsxs("select",{value:H,onChange:te=>j(te.target.value),className:"filter-select",children:[p.jsx("option",{value:"",children:"All Status"}),p.jsx("option",{value:"pending",children:"Pending"}),p.jsx("option",{value:"accepted",children:"Accepted"}),p.jsx("option",{value:"complete",children:"Complete"}),p.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsxs("label",{className:"filter-label",children:[p.jsx("i",{className:"fas fa-list"}),"Items per Page"]}),p.jsxs("select",{value:o,onChange:te=>{u(parseInt(te.target.value)),ne(1,parseInt(te.target.value))},className:"filter-select",children:[p.jsx("option",{value:5,children:"5 per page"}),p.jsx("option",{value:10,children:"10 per page"}),p.jsx("option",{value:25,children:"25 per page"}),p.jsx("option",{value:50,children:"50 per page"})]})]}),p.jsx("div",{className:"filter-actions",children:p.jsxs("button",{onClick:()=>ne(1),className:"apply-filters-btn",disabled:B,children:[p.jsx("i",{className:"fas fa-search"}),"Apply Filters"]})})]})}),P?p.jsx("div",{className:"error-container",children:p.jsxs("div",{className:"error-content",children:[p.jsx("i",{className:"fas fa-exclamation-triangle error-icon"}),p.jsx("h3",{children:"Failed to Load Service Requests"}),p.jsx("p",{children:P}),p.jsxs("button",{onClick:()=>ne(1),className:"retry-btn",disabled:B,children:[p.jsx("i",{className:"fas fa-redo"}),"Try Again"]})]})}):B?p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Loading service requests..."})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"content-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-clipboard-list"}),"Service Requests (",t.length,")"]}),p.jsxs("div",{className:"card-stats",children:[p.jsxs("span",{className:"stat-item",children:[p.jsx("i",{className:"fas fa-clock"}),t.filter(te=>te.status==="pending").length," Pending"]}),p.jsxs("span",{className:"stat-item",children:[p.jsx("i",{className:"fas fa-check-circle"}),t.filter(te=>te.status==="accepted").length," Accepted"]}),p.jsxs("span",{className:"stat-item",children:[p.jsx("i",{className:"fas fa-check-double"}),t.filter(te=>te.status==="complete").length," Complete"]})]})]}),p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"data-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{children:[p.jsx("i",{className:"fas fa-user"}),"Customer"]}),p.jsxs("th",{children:[p.jsx("i",{className:"fas fa-wrench"}),"Service Type"]}),p.jsxs("th",{children:[p.jsx("i",{className:"fas fa-file-alt"}),"Description"]}),p.jsxs("th",{children:[p.jsx("i",{className:"fas fa-info-circle"}),"Status"]}),p.jsxs("th",{children:[p.jsx("i",{className:"fas fa-calendar"}),"Created"]})]})}),p.jsx("tbody",{children:t.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:"5",className:"no-data",children:p.jsxs("div",{className:"empty-state",children:[p.jsx("i",{className:"fas fa-inbox"}),p.jsx("h3",{children:"No service requests found"}),p.jsx("p",{children:"Try adjusting your filters or check back later for new requests."})]})})}):t.map(te=>p.jsxs("tr",{className:"request-row",children:[p.jsx("td",{children:p.jsxs("div",{className:"user-info",children:[p.jsx("div",{className:"user-name",children:te.requester?.firstName&&te.requester?.lastName?`${te.requester.firstName} ${te.requester.lastName}`:te.requester?.username||te.requester?.email||"Anonymous User"}),p.jsxs("div",{className:"user-id",children:["ID: ",te._id.slice(-6)]})]})}),p.jsx("td",{children:p.jsx("div",{className:"service-type",children:p.jsx("span",{className:"service-badge",children:te.typeOfWork||te.name||"Service"})})}),p.jsx("td",{children:p.jsx("div",{className:"description-cell",children:p.jsx("p",{className:"description-text",children:te.notes&&te.notes.length>100?`${te.notes.substring(0,100)}...`:te.notes||"No description provided"})})}),p.jsx("td",{children:p.jsxs("span",{className:`status-badge ${te.status?.toLowerCase()}`,children:[p.jsx("i",{className:`fas ${te.status==="Available"?"fa-clock":te.status==="Working"?"fa-play-circle":te.status==="Complete"?"fa-check-double":te.status==="Cancelled"?"fa-times-circle":"fa-question-circle"}`}),te.status||"Unknown"]})}),p.jsx("td",{children:p.jsxs("div",{className:"date-info",children:[p.jsx("div",{className:"date-main",children:new Date(te.createdAt).toLocaleDateString()}),p.jsx("div",{className:"date-time",children:new Date(te.createdAt).toLocaleTimeString()})]})})]},te._id))})]})})]}),p.jsxs("div",{className:"pagination-section",children:[p.jsxs("div",{className:"pagination-info",children:[p.jsxs("div",{className:"total-info",children:[p.jsx("i",{className:"fas fa-database"}),p.jsxs("span",{children:["Showing ",t.length," of ",g," service requests"]})]}),p.jsx("div",{className:"page-info",children:p.jsxs("span",{children:["Page ",i," of ",A]})})]}),p.jsxs("div",{className:"pagination-controls",children:[p.jsxs("button",{className:"pagination-btn prev-btn",disabled:i<=1||B,onClick:()=>ne(i-1),children:[p.jsx("i",{className:"fas fa-chevron-left"}),"Previous"]}),p.jsxs("div",{className:"page-jumper",children:[p.jsx("label",{className:"jump-label",children:"Go to page:"}),p.jsx("input",{type:"number",min:1,max:A,placeholder:i,onKeyDown:te=>{if(te.key==="Enter"){const de=parseInt(te.target.value);de>=1&&de<=A&&ne(de),te.target.value=""}},className:"page-input",disabled:B}),p.jsxs("span",{className:"page-total",children:["of ",A]})]}),p.jsxs("button",{className:"pagination-btn next-btn",disabled:i>=A||B,onClick:()=>ne(i+1),children:["Next",p.jsx("i",{className:"fas fa-chevron-right"})]})]})]})]})]})},xI=[{name:"Plumbing",description:"Pipe installation, leak repair, and bathroom plumbing maintenance.",icon:"water-outline"},{name:"Electrical",description:"Wiring, lighting, and electrical appliance repair.",icon:"flash-outline"},{name:"Cleaning",description:"House cleaning, deep cleaning, and carpet or sofa cleaning.",icon:"broom-outline"},{name:"Carpentry",description:"Furniture repair, assembly, and custom woodwork.",icon:"construct-outline"},{name:"Painting",description:"Interior and exterior wall painting, color consultation.",icon:"color-palette-outline"},{name:"Appliance Repair",description:"Aircon, refrigerator, and washing machine maintenance.",icon:"build-outline"},{name:"Home Renovation",description:"Tile, flooring, roofing, and home improvement.",icon:"hammer-outline"},{name:"Pest Control",description:"Termite, rodent, and insect control for safer homes.",icon:"bug-outline"},{name:"Gardening & Landscaping",description:"Lawn care, plant maintenance, and landscape design.",icon:"leaf-outline"},{name:"Air Conditioning & Ventilation",description:"Aircon installation, cleaning, and HVAC servicing.",icon:"snow-outline"}],bI=()=>{const{admin:t,isAuthorized:e,tokenType:i}=Ol(),[n,o]=Te.useState([]),[u,A]=Te.useState([]),[a,g]=Te.useState(!0),[b,B]=Te.useState(""),[I,P]=Te.useState("users"),[F,Q]=Te.useState(!1),[R,H]=Te.useState(null),[j,V]=Te.useState(null),[W,ne]=Te.useState(""),[te,de]=Te.useState(!1),[ee,re]=Te.useState(null),[xe,Be]=Te.useState([]),[se,ae]=Te.useState(!1),[ce,Ee]=Te.useState(null),[Ve,ue]=Te.useState({providerId:"",appointmentDate:"",location:""}),[fe,Ue]=Te.useState(!1),[ke,pe]=Te.useState(null),[Qe,J]=Te.useState({applicantId:"",interviewDate:"",location:"",notes:""}),[me,Fe]=Te.useState(!1);Te.useEffect(()=>{e!=null&&(e===!1?(g(!1),B("Please login to access this page.")):e&&i==="admin"&&t?ze():e&&i!=="admin"?(g(!1),B("Access denied. Admin authentication required.")):(g(!1),B("Loading admin data...")))},[e,i,t]);const ze=async()=>{try{g(!0),B("");const[ot,$e]=await Promise.all([Oi.get("/admin/users"),Oi.get("/admin/service-provider-applicants")]);console.log("Users response:",ot.data),console.log("Applicants response:",$e.data);const Ni=Array.isArray(ot.data.users)?ot.data.users:[],yi=Array.isArray($e.data.applicants)?$e.data.applicants:[];o(Ni),A(yi)}catch(ot){console.error("Failed to fetch data:",ot),B(`Failed to fetch data: ${ot.response?.data?.message||ot.message}`)}finally{g(!1)}},Ke=ot=>{pe(ot),J({applicantId:ot,interviewDate:"",location:"",notes:""}),Ue(!0)},_t=async()=>{if(!Ve.appointmentDate||!Ve.location){Si.error("Please fill in all appointment details");return}V("schedule");try{(await Oi.post("/verification/",{providerId:ce,appointmentDate:new Date(Ve.appointmentDate).toISOString(),location:Ve.location})).data.success?(Si.success("Appointment scheduled successfully"),ae(!1),ze()):Si.error("Failed to schedule appointment")}catch{Si.error("Error scheduling appointment")}finally{V(null)}},gt=async()=>{if(!Qe.interviewDate||!Qe.location){Si.error("Please fill in all interview details");return}V("schedule-interview");try{(await Oi.post("/admin/schedule-interview",{applicantId:ke,interviewDate:new Date(Qe.interviewDate).toISOString(),location:Qe.location,notes:Qe.notes})).data.success?(Si.success("Interview scheduled successfully"),Ue(!1),ze()):Si.error("Failed to schedule interview")}catch{Si.error("Error scheduling interview")}finally{V(null)}},Et=async ot=>{try{(await Oi.put(`/admin/user/verify/${ot}`)).data.success?(Si.success("User verified successfully"),ze()):Si.error("Failed to verify user")}catch($e){console.error("Error verifying user:",$e),Si.error("Error verifying user")}},hi=async ot=>{if(window.confirm("Are you sure you want to ban this user?"))try{(await Oi.delete(`/admin/user/${ot}`)).data.success?(Si.success("User banned successfully"),ze()):Si.error("Failed to ban user")}catch($e){console.error("Error banning user:",$e),Si.error("Error banning user")}},Vt=async ot=>{V("approve");try{(await Oi.put(`/admin/approve-service-provider/${ot}`)).data.success?(Si.success("Applicant approved successfully as Service Provider"),Q(!1),ze()):Si.error("Failed to approve applicant")}catch($e){console.error("Error approving applicant:",$e),Si.error("Error approving applicant")}finally{V(null)}},Yt=async ot=>{if(!W.trim()){Si.error("Please provide a reason for rejection");return}V("reject");try{(await Oi.put(`/admin/reject-service-provider/${ot}`,{reason:W})).data.success?(Si.success("Applicant rejected successfully"),Q(!1),ne(""),ze()):Si.error("Failed to reject applicant")}catch($e){console.error("Error rejecting applicant:",$e),Si.error("Error rejecting applicant")}finally{V(null)}},Jt=async ot=>{if(window.confirm("Are you sure you want to ban this applicant permanently?")){V("ban");try{(await Oi.delete(`/admin/user/${ot}`)).data.success?(Si.success("Applicant banned successfully"),Q(!1),ze()):Si.error("Failed to ban applicant")}catch($e){console.error("Error banning applicant:",$e),Si.error("Error banning applicant")}finally{V(null)}}},bi=async()=>{if(!ee)return;const ot=xe.filter($e=>$e.name&&$e.name.trim()!=="");if(ot.length===0){Si.error("At least one service with a valid name is required");return}V("save-service");try{(await Oi.put(`/admin/user/service-profile/${ee._id}`,ot)).data.success?(Si.success("User service profile updated successfully"),de(!1),ze()):Si.error("Failed to update service profile")}catch($e){console.error("Error updating service profile:",$e),Si.error("Error updating service profile")}finally{V(null)}};return a?p.jsx("div",{className:"user-management-container",children:p.jsx("div",{className:"loading-spinner"})}):b?p.jsxs("div",{className:"user-management-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsx("div",{children:p.jsx("h1",{children:"Error"})})}),p.jsx("div",{className:"content-card",children:p.jsx("p",{className:"empty-state",children:b})})]}):p.jsxs("div",{className:"user-management-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"User Management"}),p.jsx("p",{className:"header-description",children:"Review Applications and Manage All Users"})]})}),p.jsxs("div",{className:"tab-navigation",children:[p.jsxs("button",{onClick:()=>P("users"),className:`tab-btn ${I==="users"?"active":""}`,children:[p.jsx("i",{className:"fas fa-users"}),p.jsx("span",{className:"tab-text",children:"All Users"}),p.jsx("span",{className:"tab-count",children:n.length})]}),p.jsxs("button",{onClick:()=>P("applicants"),className:`tab-btn ${I==="applicants"?"active":""}`,children:[p.jsx("i",{className:"fas fa-user-plus"}),p.jsx("span",{className:"tab-text",children:"Service Provider Applicants"}),p.jsx("span",{className:"tab-count",children:u.length})]})]}),I==="users"&&p.jsxs("div",{className:"content-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-users"})," All Users"]}),p.jsx("span",{className:"count",children:n.length})]}),p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"data-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Profile"}),p.jsx("th",{children:"Name"}),p.jsx("th",{children:"Email"}),p.jsx("th",{children:"Role"}),p.jsx("th",{children:"Status"}),p.jsx("th",{children:"Joined"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:n.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:"7",className:"no-data",children:"No users found"})}):n.map(ot=>p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("img",{src:ot.profilePic||"/default-avatar.png",alt:`${ot.firstName} ${ot.lastName}`,className:"admin-avatar"})}),p.jsx("td",{children:p.jsxs("div",{className:"status-container",children:[p.jsxs("div",{className:"name",children:[ot.firstName," ",ot.lastName]}),p.jsxs("div",{className:"user-id",children:["ID: ",ot._id.slice(-6)]})]})}),p.jsx("td",{children:p.jsx("div",{className:"contact-info",children:p.jsx("div",{className:"email",children:ot.email})})}),p.jsx("td",{children:ot.role==="Community Member"?"Resident":ot.role}),p.jsx("td",{children:p.jsx("span",{className:`status-badge ${ot.banned?"banned":ot.role==="Service Provider"?"approved":ot.role==="Service Provider Applicant"?"pending":ot.verified?"approved":"pending"}`,children:ot.banned?"Banned":ot.role==="Community Member"?"Residents":ot.role==="Service Provider"?"Verified":ot.role==="Service Provider Applicant"?"Unverified":ot.verified?"Verified":"Unverified"})}),p.jsx("td",{children:new Date(ot.createdAt).toLocaleDateString()}),p.jsx("td",{children:p.jsx("div",{className:"action-buttons",children:p.jsxs("button",{onClick:()=>{re(ot),Fe(!0)},className:"action-btn view-btn",title:"View user details and manage account",children:[p.jsx("i",{className:"fas fa-eye"}),p.jsx("span",{children:"View"})]})})})]},ot._id))})]})})]}),I==="applicants"&&p.jsxs("div",{className:"content-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-user-plus"})," Service Provider Applicants"]}),p.jsx("span",{className:"count",children:u.length})]}),p.jsx("div",{className:"table-container",children:p.jsxs("table",{className:"data-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Profile"}),p.jsx("th",{children:"Name"}),p.jsx("th",{children:"Email"}),p.jsx("th",{children:"Skills"}),p.jsx("th",{children:"Applied Date"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:u.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:"6",className:"no-data",children:"No service provider applications"})}):u.map(ot=>p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("img",{src:ot.profilePic||"/default-avatar.png",alt:`${ot.firstName} ${ot.lastName}`,className:"admin-avatar"})}),p.jsx("td",{children:p.jsxs("div",{className:"status-container",children:[p.jsxs("div",{className:"name",children:[ot.firstName," ",ot.lastName]}),p.jsxs("div",{className:"user-id",children:["ID: ",ot._id.slice(-6)]})]})}),p.jsx("td",{children:p.jsx("div",{className:"contact-info",children:p.jsx("div",{className:"email",children:ot.email})})}),p.jsx("td",{children:ot.skills?ot.skills.join(", "):"None"}),p.jsx("td",{children:new Date(ot.createdAt).toLocaleDateString()}),p.jsx("td",{children:p.jsx("div",{className:"action-buttons",children:p.jsxs("button",{onClick:()=>{H(ot),Q(!0)},className:"action-btn review-btn",title:"Review applicant details and make decision",children:[p.jsx("i",{className:"fas fa-eye"}),p.jsx("span",{children:"Review Application"})]})})})]},ot._id))})]})})]}),se&&p.jsx("div",{className:"modal-overlay",onClick:()=>ae(!1),children:p.jsxs("div",{className:"modal-content",onClick:ot=>ot.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-calendar-plus"})," Schedule Appointment"]}),p.jsx("button",{className:"close-modal",onClick:()=>ae(!1),children:""})]}),p.jsx("div",{className:"modal-body",children:p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-calendar-alt"})," Appointment Details"]}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Appointment Date & Time"}),p.jsx("input",{type:"datetime-local",value:Ve.appointmentDate,onChange:ot=>ue({...Ve,appointmentDate:ot.target.value}),required:!0})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Location"}),p.jsx("input",{type:"text",value:Ve.location,onChange:ot=>ue({...Ve,location:ot.target.value}),placeholder:"Enter appointment location",required:!0})]})]})]})}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"cancel-btn",onClick:()=>ae(!1),disabled:j==="schedule",children:"Cancel"}),p.jsx("button",{className:"schedule-btn",onClick:_t,disabled:j==="schedule",children:j==="schedule"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"})," Scheduling..."]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-calendar-check"})," Schedule Appointment"]})})]})]})}),F&&R&&p.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:p.jsxs("div",{className:"modal-content applicant-modal",onClick:ot=>ot.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-user-check"})," Applicant Details"]}),p.jsx("button",{className:"close-modal",onClick:()=>Q(!1),children:""})]}),p.jsx("div",{className:"modal-body",children:p.jsxs("div",{className:"applicant-profile",children:[p.jsxs("div",{className:"profile-header",children:[p.jsx("img",{src:R.profilePic||"/default-avatar.png",alt:`${R.firstName} ${R.lastName}`,className:"applicant-avatar"}),p.jsxs("div",{className:"profile-info",children:[p.jsxs("h3",{children:[R.firstName," ",R.lastName]}),p.jsx("p",{className:"applicant-email",children:R.email}),p.jsxs("p",{className:"applicant-id",children:["ID: ",R._id.slice(-6)]})]})]}),p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-info-circle"})," Personal Information"]}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Phone"}),p.jsx("p",{children:R.phone||"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Address"}),p.jsx("p",{children:R.address||"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Birthdate"}),p.jsx("p",{children:R.birthdate?new Date(R.birthdate).toLocaleDateString():"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Employment"}),p.jsx("p",{children:R.employed||"Not provided"})]})]})]}),p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-tools"})," Service Provider Application"]}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Skills"}),p.jsx("p",{children:R.skills&&R.skills.length>0?R.skills.join(", "):"None specified"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Certificates"}),p.jsx("p",{children:R.certificates&&R.certificates.length>0?`${R.certificates.length} uploaded`:"None uploaded"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Valid ID"}),p.jsx("p",{children:R.validId?"Uploaded":"Not uploaded"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Applied Date"}),p.jsx("p",{children:new Date(R.createdAt).toLocaleDateString()})]})]})]})]})}),p.jsx("div",{className:"modal-actions applicant-actions",children:p.jsxs("div",{className:"decision-section",children:[p.jsxs("div",{className:"decision-header",children:[p.jsxs("h4",{children:[p.jsx("i",{className:"fas fa-gavel"})," Application Decision"]}),p.jsx("p",{className:"decision-subtitle",children:"Choose the appropriate action for this service provider application"})]}),p.jsxs("div",{className:"reject-reason-section",style:{marginBottom:"20px"},children:[p.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#555"},children:[p.jsx("i",{className:"fas fa-comment-dots"})," Rejection Reason (required for rejection)"]}),p.jsx("textarea",{value:W,onChange:ot=>ne(ot.target.value),placeholder:"Please provide a detailed reason for rejecting this application...",className:"reason-textarea",rows:"3"})]}),p.jsxs("div",{className:"action-buttons-grid",children:[p.jsx("button",{className:"action-btn schedule-interview-btn",onClick:()=>Ke(R._id),disabled:j==="schedule-interview",title:"Schedule an interview with this applicant",children:j==="schedule-interview"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"Scheduling..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-calendar-plus"}),p.jsx("span",{children:"Schedule Interview"})]})}),p.jsx("button",{className:"action-btn approve-application-btn",onClick:()=>Vt(R._id),disabled:j==="approve",title:"Approve this application and grant service provider status",children:j==="approve"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"Approving..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-check-circle"}),p.jsx("span",{children:"Approve Application"})]})}),p.jsx("button",{className:"action-btn reject-application-btn",onClick:()=>Yt(R._id),disabled:j==="reject"||!W.trim(),title:"Reject this application with the provided reason",children:j==="reject"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"Rejecting..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-times-circle"}),p.jsx("span",{children:"Reject Application"})]})}),p.jsx("button",{className:"action-btn ban-user-btn",onClick:()=>Jt(R._id),disabled:j==="ban",title:"Permanently ban this user from the platform",children:j==="ban"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"Banning..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-user-slash"}),p.jsx("span",{children:"Ban User"})]})})]}),p.jsx("div",{className:"modal-footer-actions",children:p.jsxs("button",{className:"secondary-btn close-modal-btn",onClick:()=>Q(!1),disabled:j!==null,children:[p.jsx("i",{className:"fas fa-times"}),p.jsx("span",{children:"Close"})]})})]})})]})}),te&&ee&&p.jsx("div",{className:"modal-overlay",onClick:()=>de(!1),children:p.jsxs("div",{className:"modal-content service-modal",onClick:ot=>ot.stopPropagation(),children:[p.jsxs("div",{className:"modal-header service-modal-header",children:[p.jsxs("div",{className:"modal-title-section",children:[p.jsx("i",{className:"fas fa-edit modal-icon"}),p.jsxs("div",{className:"modal-title-content",children:[p.jsx("h2",{children:"Edit Service Profile"}),p.jsxs("p",{className:"modal-subtitle",children:[ee.firstName," ",ee.lastName]})]})]}),p.jsx("button",{className:"close-modal",onClick:()=>de(!1),children:""})]}),p.jsxs("div",{className:"modal-body service-modal-body",children:[p.jsx("div",{className:"services-container",children:xe.map((ot,$e)=>p.jsxs("div",{className:"service-card",children:[p.jsxs("div",{className:"service-card-header",children:[p.jsx("span",{className:"service-badge",children:$e+1}),p.jsx("h4",{children:"Service Configuration"}),xe.length>1&&p.jsx("button",{type:"button",className:"remove-service-btn",onClick:()=>{const Ni=xe.filter((yi,si)=>si!==$e);Be(Ni)},title:"Remove this service",children:p.jsx("i",{className:"fas fa-trash-alt"})})]}),p.jsxs("div",{className:"service-form-grid",children:[p.jsxs("div",{className:"form-group service-name-group",children:[p.jsxs("label",{className:"form-label",children:[p.jsx("i",{className:"fas fa-tools"}),"Service Category"]}),p.jsxs("div",{className:"select-wrapper",children:[p.jsxs("select",{value:ot.name,onChange:Ni=>{const yi=[...xe];yi[$e].name=Ni.target.value,Be(yi)},className:"form-input service-select",required:!0,children:[p.jsx("option",{value:"",children:"Choose a service category"}),xI.map(Ni=>p.jsx("option",{value:Ni.name,children:Ni.name},Ni.name))]}),p.jsx("i",{className:"fas fa-chevron-down select-arrow"})]})]}),p.jsxs("div",{className:"form-group service-rate-group",children:[p.jsxs("label",{className:"form-label",children:[p.jsx("i",{className:"fas fa-peso-sign"}),"Service Rate "]}),p.jsx("div",{className:"input-wrapper",children:p.jsx("input",{type:"number",value:ot.rate,onChange:Ni=>{const yi=[...xe];yi[$e].rate=parseFloat(Ni.target.value)||0,Be(yi)},className:"form-input rate-input",placeholder:"0.00",min:"0",step:"50"})})]})]}),p.jsxs("div",{className:"form-group service-description-group",children:[p.jsxs("label",{className:"form-label",children:[p.jsx("i",{className:"fas fa-file-alt"}),"Service Description"]}),p.jsxs("div",{className:"textarea-wrapper",children:[p.jsx("textarea",{value:ot.description,onChange:Ni=>{const yi=[...xe];yi[$e].description=Ni.target.value,Be(yi)},className:"form-input description-textarea",rows:"4",placeholder:"Provide a detailed description of the service offered, including what it includes and any special considerations..."}),p.jsx("div",{className:"textarea-footer",children:p.jsxs("span",{className:"char-count",children:[ot.description.length,"/500"]})})]})]})]},$e))}),p.jsx("div",{className:"add-service-section",children:p.jsx("button",{type:"button",className:"add-service-btn",onClick:()=>{Be([...xe,{name:"",rate:0,description:""}])},children:p.jsxs("div",{className:"add-service-content",children:[p.jsx("i",{className:"fas fa-plus-circle"}),p.jsx("span",{children:"Add New Service"})]})})})]}),p.jsxs("div",{className:"modal-actions service-modal-actions",children:[p.jsxs("div",{className:"action-summary",children:[p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Total Services:"}),p.jsx("span",{className:"summary-value",children:xe.length})]}),p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Configured:"}),p.jsx("span",{className:"summary-value",children:xe.filter(ot=>ot.name&&ot.name.trim()!=="").length})]})]}),p.jsxs("div",{className:"action-buttons",children:[p.jsxs("button",{className:"btn-secondary cancel-btn",onClick:()=>de(!1),disabled:j==="save-service",children:[p.jsx("i",{className:"fas fa-times"}),"Cancel"]}),p.jsx("button",{className:"btn-primary save-btn",onClick:bi,disabled:j==="save-service",children:j==="save-service"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"Saving Changes..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-save"}),p.jsx("span",{children:"Save Service Profile"})]})})]})]})]})}),fe&&p.jsx("div",{className:"modal-overlay",onClick:()=>Ue(!1),children:p.jsxs("div",{className:"modal-content",onClick:ot=>ot.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-calendar-plus"})," Schedule Interview"]}),p.jsx("button",{className:"close-modal",onClick:()=>Ue(!1),children:""})]}),p.jsx("div",{className:"modal-body",children:p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-calendar-alt"})," Interview Details"]}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Interview Date & Time"}),p.jsx("input",{type:"datetime-local",value:Qe.interviewDate,onChange:ot=>J({...Qe,interviewDate:ot.target.value}),required:!0})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Location"}),p.jsx("input",{type:"text",value:Qe.location,onChange:ot=>J({...Qe,location:ot.target.value}),placeholder:"Enter interview location",required:!0})]}),p.jsxs("div",{className:"detail-item full-width",children:[p.jsx("label",{children:"Notes (Optional)"}),p.jsx("textarea",{value:Qe.notes,onChange:ot=>J({...Qe,notes:ot.target.value}),placeholder:"Add any additional notes or instructions for the interview...",rows:"3"})]})]})]})}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"cancel-btn",onClick:()=>Ue(!1),disabled:j==="schedule-interview",children:"Cancel"}),p.jsx("button",{className:"schedule-btn",onClick:gt,disabled:j==="schedule-interview",children:j==="schedule-interview"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"})," Scheduling..."]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-calendar-check"})," Schedule Interview"]})})]})]})}),me&&ee&&p.jsx("div",{className:"modal-overlay",onClick:()=>Fe(!1),children:p.jsxs("div",{className:"modal-content user-details-modal",onClick:ot=>ot.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h2",{children:[p.jsx("i",{className:"fas fa-user-circle"})," User Profile Details"]}),p.jsx("button",{className:"close-modal",onClick:()=>Fe(!1),children:""})]}),p.jsx("div",{className:"modal-body",children:p.jsxs("div",{className:"user-profile",children:[p.jsxs("div",{className:"profile-header",children:[p.jsx("img",{src:ee.profilePic||"/default-avatar.png",alt:`${ee.firstName} ${ee.lastName}`,className:"applicant-avatar"}),p.jsxs("div",{className:"profile-info",children:[p.jsxs("h3",{children:[ee.firstName," ",ee.lastName]}),p.jsx("p",{className:"user-email",children:ee.email}),p.jsxs("p",{className:"user-id",children:["ID: ",ee._id.slice(-6)]}),p.jsxs("div",{className:"user-status-badges",children:[p.jsx("span",{className:`status-badge ${ee.banned?"banned":ee.verified?"approved":"pending"}`,children:ee.banned?"Banned":ee.verified?"Verified":"Unverified"}),p.jsx("span",{className:`status-badge ${ee.isOnline?"approved":"pending"}`,children:ee.isOnline?"Online":"Offline"})]})]})]}),p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-id-card"})," Account Information"]}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Username"}),p.jsx("p",{children:ee.username})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Full Name"}),p.jsxs("p",{children:[ee.firstName," ",ee.lastName]})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Email"}),p.jsx("p",{children:ee.email})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Phone"}),p.jsx("p",{children:ee.phone||"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Other Contact"}),p.jsx("p",{children:ee.otherContact||"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Role"}),p.jsx("p",{children:ee.role==="Community Member"?"Community Resident":ee.role})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Member Since"}),p.jsx("p",{children:new Date(ee.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-user"})," Personal Information"]}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Birthdate"}),p.jsx("p",{children:ee.birthdate?new Date(ee.birthdate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Occupation"}),p.jsx("p",{children:ee.occupation||"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Employment Status"}),p.jsx("p",{children:ee.employed||"Not provided"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Availability"}),p.jsx("p",{children:ee.availability||"Not Available"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Accepted Work"}),p.jsx("p",{children:ee.acceptedWork?"Yes":"No"})]}),p.jsxs("div",{className:"detail-item full-width",children:[p.jsx("label",{children:"Address"}),p.jsx("p",{children:ee.address||"No address information provided"})]})]})]}),ee.skills&&ee.skills.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-tools"})," Skills & Expertise (",ee.skills.length,")"]}),p.jsx("div",{className:"skills-grid",children:ee.skills.map((ot,$e)=>p.jsx("span",{className:"skill-tag",children:ot},$e))})]}),ee.certificates&&ee.certificates.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-certificate"})," Certificates (",ee.certificates.length,")"]}),p.jsx("div",{className:"documents-preview",children:ee.certificates.map((ot,$e)=>p.jsxs("div",{className:"document-item",children:[p.jsxs("div",{className:"document-info",children:[p.jsx("i",{className:"fas fa-file-alt"}),p.jsxs("span",{children:["Certificate ",$e+1]})]}),p.jsx("div",{className:"document-preview",children:ot.match(/\.(jpg|jpeg|png|gif)$/i)?p.jsx("img",{src:ot,alt:`Certificate ${$e+1}`,className:"document-image",onClick:()=>window.open(ot,"_blank")}):p.jsxs("div",{className:"document-placeholder",children:[p.jsx("i",{className:"fas fa-file-pdf"}),p.jsx("span",{children:"PDF Document"}),p.jsxs("button",{className:"preview-btn",onClick:()=>window.open(ot,"_blank"),children:[p.jsx("i",{className:"fas fa-external-link-alt"})," View"]})]})})]},$e))})]}),ee.validId&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-id-badge"})," Government ID"]}),p.jsx("div",{className:"document-preview",children:p.jsxs("div",{className:"document-item",children:[p.jsxs("div",{className:"document-info",children:[p.jsx("i",{className:"fas fa-id-card"}),p.jsx("span",{children:"Valid ID Document"})]}),p.jsx("div",{className:"document-preview",children:ee.validId.match(/\.(jpg|jpeg|png|gif)$/i)?p.jsx("img",{src:ee.validId,alt:"Valid ID",className:"document-image",onClick:()=>window.open(ee.validId,"_blank")}):p.jsxs("div",{className:"document-placeholder",children:[p.jsx("i",{className:"fas fa-file-pdf"}),p.jsx("span",{children:"ID Document"}),p.jsxs("button",{className:"preview-btn",onClick:()=>window.open(ee.validId,"_blank"),children:[p.jsx("i",{className:"fas fa-external-link-alt"})," View"]})]})})]})})]}),ee.notificationPreferences&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-bell"})," Notification Preferences"]}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"E-Receipts"}),p.jsx("p",{children:ee.notificationPreferences.eReceipts?"Enabled":"Disabled"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Proof of Delivery"}),p.jsx("p",{children:ee.notificationPreferences.proofOfDelivery?"Enabled":"Disabled"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Email Notifications"}),p.jsx("p",{children:ee.notificationPreferences.emailNotifications?"Enabled":"Disabled"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Push Notifications"}),p.jsx("p",{children:ee.notificationPreferences.pushNotifications?"Enabled":"Disabled"})]})]})]}),ee.blockedUsers&&ee.blockedUsers.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-user-slash"})," Blocked Users"]}),p.jsx("div",{className:"detail-grid",children:p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Total Blocked"}),p.jsxs("p",{children:[ee.blockedUsers.length," user",ee.blockedUsers.length!==1?"s":""]})]})})]}),ee.role==="Service Provider"&&ee.services&&ee.services.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-concierge-bell"})," Services Offered (",ee.services.length,")"]}),p.jsx("div",{className:"services-grid",children:ee.services.map((ot,$e)=>p.jsxs("div",{className:"service-card-item",children:[p.jsx("h4",{children:ot.name}),p.jsxs("div",{className:"service-rate",children:["",ot.rate.toLocaleString()]}),p.jsx("p",{className:"service-description",children:ot.description||"No description available"})]},$e))})]}),ee.bookings&&ee.bookings.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-calendar-check"})," Booking History"]}),p.jsx("div",{className:"detail-grid",children:p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Total Bookings"}),p.jsx("p",{children:ee.bookings.length})]})})]}),ee.notifications&&ee.notifications.length>0&&p.jsxs("div",{className:"detail-section",children:[p.jsxs("h3",{children:[p.jsx("i",{className:"fas fa-bell"})," Notifications"]}),p.jsx("div",{className:"detail-grid",children:p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Total Notifications"}),p.jsx("p",{children:ee.notifications.length})]})})]})]})}),p.jsx("div",{className:"modal-actions user-modal-actions",children:p.jsxs("div",{className:"decision-section",children:[p.jsxs("div",{className:"decision-header",children:[p.jsxs("h4",{children:[p.jsx("i",{className:"fas fa-cogs"})," Account Management"]}),p.jsx("p",{className:"decision-subtitle",children:"Manage this user's account status and permissions"})]}),p.jsxs("div",{className:"action-buttons-grid",children:[!ee.verified&&p.jsx("button",{className:"action-btn verify-account-btn",onClick:()=>{Et(ee._id),Fe(!1)},disabled:j==="verify",title:"Verify this user's account",children:j==="verify"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"Verifying..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-check-circle"}),p.jsx("span",{children:"Verify Account"})]})}),ee.role==="Service Provider"&&p.jsxs("button",{className:"action-btn edit-services-btn",onClick:()=>{Be(ee.services&&ee.services.length>0?ee.services:[{name:"",rate:0,description:""}]),de(!0),Fe(!1)},title:"Edit this service provider's services",children:[p.jsx("i",{className:"fas fa-edit"}),p.jsx("span",{children:"Edit Services"})]}),!ee.banned&&p.jsx("button",{className:"action-btn ban-user-btn",onClick:()=>{hi(ee._id),Fe(!1)},disabled:j==="ban",title:"Permanently ban this user from the platform",children:j==="ban"?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),p.jsx("span",{children:"Banning..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-user-slash"}),p.jsx("span",{children:"Ban Account"})]})}),p.jsxs("button",{className:"action-btn close-modal-btn",onClick:()=>Fe(!1),disabled:j!==null,title:"Close this modal",children:[p.jsx("i",{className:"fas fa-times"}),p.jsx("span",{children:"Close"})]})]})]})})]})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function F0(t){return t+.5|0}const qd=(t,e,i)=>Math.max(Math.min(t,i),e);function Ig(t){return qd(F0(t*2.55),0,255)}function Yd(t){return qd(F0(t*255),0,255)}function td(t){return qd(F0(t/2.55)/100,0,1)}function ow(t){return qd(F0(t*100),0,100)}const lA={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ex=[..."0123456789ABCDEF"],wI=t=>Ex[t&15],BI=t=>Ex[(t&240)>>4]+Ex[t&15],wy=t=>(t&240)>>4===(t&15),CI=t=>wy(t.r)&&wy(t.g)&&wy(t.b)&&wy(t.a);function SI(t){var e=t.length,i;return t[0]==="#"&&(e===4||e===5?i={r:255&lA[t[1]]*17,g:255&lA[t[2]]*17,b:255&lA[t[3]]*17,a:e===5?lA[t[4]]*17:255}:(e===7||e===9)&&(i={r:lA[t[1]]<<4|lA[t[2]],g:lA[t[3]]<<4|lA[t[4]],b:lA[t[5]]<<4|lA[t[6]],a:e===9?lA[t[7]]<<4|lA[t[8]]:255})),i}const EI=(t,e)=>t<255?e(t):"";function TI(t){var e=CI(t)?wI:BI;return t?"#"+e(t.r)+e(t.g)+e(t.b)+EI(t.a,e):void 0}const FI=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function y4(t,e,i){const n=e*Math.min(i,1-i),o=(u,A=(u+t/30)%12)=>i-n*Math.max(Math.min(A-3,9-A,1),-1);return[o(0),o(8),o(4)]}function NI(t,e,i){const n=(o,u=(o+t/60)%6)=>i-i*e*Math.max(Math.min(u,4-u,1),0);return[n(5),n(3),n(1)]}function MI(t,e,i){const n=y4(t,1,.5);let o;for(e+i>1&&(o=1/(e+i),e*=o,i*=o),o=0;o<3;o++)n[o]*=1-e-i,n[o]+=e;return n}function II(t,e,i,n,o){return t===o?(e-i)/n+(e<i?6:0):e===o?(i-t)/n+2:(t-e)/n+4}function Pb(t){const i=t.r/255,n=t.g/255,o=t.b/255,u=Math.max(i,n,o),A=Math.min(i,n,o),a=(u+A)/2;let g,b,B;return u!==A&&(B=u-A,b=a>.5?B/(2-u-A):B/(u+A),g=II(i,n,o,B,u),g=g*60+.5),[g|0,b||0,a]}function kb(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(Yd)}function jb(t,e,i){return kb(y4,t,e,i)}function LI(t,e,i){return kb(MI,t,e,i)}function PI(t,e,i){return kb(NI,t,e,i)}function v4(t){return(t%360+360)%360}function kI(t){const e=FI.exec(t);let i=255,n;if(!e)return;e[5]!==n&&(i=e[6]?Ig(+e[5]):Yd(+e[5]));const o=v4(+e[2]),u=+e[3]/100,A=+e[4]/100;return e[1]==="hwb"?n=LI(o,u,A):e[1]==="hsv"?n=PI(o,u,A):n=jb(o,u,A),{r:n[0],g:n[1],b:n[2],a:i}}function jI(t,e){var i=Pb(t);i[0]=v4(i[0]+e),i=jb(i),t.r=i[0],t.g=i[1],t.b=i[2]}function UI(t){if(!t)return;const e=Pb(t),i=e[0],n=ow(e[1]),o=ow(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${o}%, ${td(t.a)})`:`hsl(${i}, ${n}%, ${o}%)`}const lw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function DI(){const t={},e=Object.keys(cw),i=Object.keys(lw);let n,o,u,A,a;for(n=0;n<e.length;n++){for(A=a=e[n],o=0;o<i.length;o++)u=i[o],a=a.replace(u,lw[u]);u=parseInt(cw[A],16),t[a]=[u>>16&255,u>>8&255,u&255]}return t}let By;function RI(t){By||(By=DI(),By.transparent=[0,0,0,0]);const e=By[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const OI=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function QI(t){const e=OI.exec(t);let i=255,n,o,u;if(e){if(e[7]!==n){const A=+e[7];i=e[8]?Ig(A):qd(A*255,0,255)}return n=+e[1],o=+e[3],u=+e[5],n=255&(e[2]?Ig(n):qd(n,0,255)),o=255&(e[4]?Ig(o):qd(o,0,255)),u=255&(e[6]?Ig(u):qd(u,0,255)),{r:n,g:o,b:u,a:i}}}function zI(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${td(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const h_=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Hp=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function HI(t,e,i){const n=Hp(td(t.r)),o=Hp(td(t.g)),u=Hp(td(t.b));return{r:Yd(h_(n+i*(Hp(td(e.r))-n))),g:Yd(h_(o+i*(Hp(td(e.g))-o))),b:Yd(h_(u+i*(Hp(td(e.b))-u))),a:t.a+i*(e.a-t.a)}}function Cy(t,e,i){if(t){let n=Pb(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,e===0?360:1)),n=jb(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function _4(t,e){return t&&Object.assign(e||{},t)}function uw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Yd(t[3]))):(e=_4(t,{r:0,g:0,b:0,a:1}),e.a=Yd(e.a)),e}function VI(t){return t.charAt(0)==="r"?QI(t):kI(t)}class o0{constructor(e){if(e instanceof o0)return e;const i=typeof e;let n;i==="object"?n=uw(e):i==="string"&&(n=SI(e)||RI(e)||VI(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=_4(this._rgb);return e&&(e.a=td(e.a)),e}set rgb(e){this._rgb=uw(e)}rgbString(){return this._valid?zI(this._rgb):void 0}hexString(){return this._valid?TI(this._rgb):void 0}hslString(){return this._valid?UI(this._rgb):void 0}mix(e,i){if(e){const n=this.rgb,o=e.rgb;let u;const A=i===u?.5:i,a=2*A-1,g=n.a-o.a,b=((a*g===-1?a:(a+g)/(1+a*g))+1)/2;u=1-b,n.r=255&b*n.r+u*o.r+.5,n.g=255&b*n.g+u*o.g+.5,n.b=255&b*n.b+u*o.b+.5,n.a=A*n.a+(1-A)*o.a,this.rgb=n}return this}interpolate(e,i){return e&&(this._rgb=HI(this._rgb,e._rgb,i)),this}clone(){return new o0(this.rgb)}alpha(e){return this._rgb.a=Yd(e),this}clearer(e){const i=this._rgb;return i.a*=1-e,this}greyscale(){const e=this._rgb,i=F0(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=i,this}opaquer(e){const i=this._rgb;return i.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Cy(this._rgb,2,e),this}darken(e){return Cy(this._rgb,2,-e),this}saturate(e){return Cy(this._rgb,1,e),this}desaturate(e){return Cy(this._rgb,1,-e),this}rotate(e){return jI(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function $h(){}const qI=(()=>{let t=0;return()=>t++})();function ns(t){return t==null}function go(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function gr(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function vc(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function mh(t,e){return vc(t)?t:e}function Jn(t,e){return typeof t>"u"?e:t}const GI=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,x4=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ys(t,e,i){if(t&&typeof t.call=="function")return t.apply(i,e)}function us(t,e,i,n){let o,u,A;if(go(t))for(u=t.length,o=0;o<u;o++)e.call(i,t[o],o);else if(gr(t))for(A=Object.keys(t),u=A.length,o=0;o<u;o++)e.call(i,t[A[o]],A[o])}function Lv(t,e){let i,n,o,u;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(o=t[i],u=e[i],o.datasetIndex!==u.datasetIndex||o.index!==u.index)return!1;return!0}function Pv(t){if(go(t))return t.map(Pv);if(gr(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let o=0;for(;o<n;++o)e[i[o]]=Pv(t[i[o]]);return e}return t}function b4(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function KI(t,e,i,n){if(!b4(t))return;const o=e[t],u=i[t];gr(o)&&gr(u)?l0(o,u,n):e[t]=Pv(u)}function l0(t,e,i){const n=go(e)?e:[e],o=n.length;if(!gr(t))return t;i=i||{};const u=i.merger||KI;let A;for(let a=0;a<o;++a){if(A=n[a],!gr(A))continue;const g=Object.keys(A);for(let b=0,B=g.length;b<B;++b)u(g[b],t,A,i)}return t}function Hg(t,e){return l0(t,e,{merger:WI})}function WI(t,e,i){if(!b4(t))return;const n=e[t],o=i[t];gr(n)&&gr(o)?Hg(n,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Pv(o))}const Aw={"":t=>t,x:t=>t.x,y:t=>t.y};function $I(t){const e=t.split("."),i=[];let n="";for(const o of e)n+=o,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function ZI(t){const e=$I(t);return i=>{for(const n of e){if(n==="")break;i=i&&i[n]}return i}}function ep(t,e){return(Aw[e]||(Aw[e]=ZI(e)))(t)}function Ub(t){return t.charAt(0).toUpperCase()+t.slice(1)}const c0=t=>typeof t<"u",nf=t=>typeof t=="function",hw=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function XI(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const As=Math.PI,xa=2*As,YI=xa+As,kv=Number.POSITIVE_INFINITY,JI=As/180,Qo=As/2,Mf=As/4,dw=As*2/3,w4=Math.log10,wh=Math.sign;function Vg(t,e,i){return Math.abs(t-e)<i}function fw(t){const e=Math.round(t);t=Vg(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(w4(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function eL(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n===0&&(e.push(n),e.push(t/n));return i===(i|0)&&e.push(i),e.sort((o,u)=>o-u).pop(),e}function tL(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function u0(t){return!tL(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function iL(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function nL(t,e,i){let n,o,u;for(n=0,o=t.length;n<o;n++)u=t[n][i],isNaN(u)||(e.min=Math.min(e.min,u),e.max=Math.max(e.max,u))}function id(t){return t*(As/180)}function rL(t){return t*(180/As)}function pw(t){if(!vc(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function B4(t,e){const i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n);let u=Math.atan2(n,i);return u<-.5*As&&(u+=xa),{angle:u,distance:o}}function Tx(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function sL(t,e){return(t-e+YI)%xa-As}function Lu(t){return(t%xa+xa)%xa}function A0(t,e,i,n){const o=Lu(t),u=Lu(e),A=Lu(i),a=Lu(u-o),g=Lu(A-o),b=Lu(o-u),B=Lu(o-A);return o===u||o===A||n&&u===A||a>g&&b<B}function gc(t,e,i){return Math.max(e,Math.min(i,t))}function aL(t){return gc(t,-32768,32767)}function nd(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}function Db(t,e,i){i=i||(A=>t[A]<e);let n=t.length-1,o=0,u;for(;n-o>1;)u=o+n>>1,i(u)?o=u:n=u;return{lo:o,hi:n}}const Of=(t,e,i,n)=>Db(t,i,n?o=>{const u=t[o][e];return u<i||u===i&&t[o+1][e]===i}:o=>t[o][e]<i),oL=(t,e,i)=>Db(t,i,n=>t[n][e]>=i);function lL(t,e,i){let n=0,o=t.length;for(;n<o&&t[n]<e;)n++;for(;o>n&&t[o-1]>i;)o--;return n>0||o<t.length?t.slice(n,o):t}const C4=["push","pop","shift","splice","unshift"];function cL(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),C4.forEach(i=>{const n="_onData"+Ub(i),o=t[i];Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value(...u){const A=o.apply(this,u);return t._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...u)}),A}})})}function mw(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,o=n.indexOf(e);o!==-1&&n.splice(o,1),!(n.length>0)&&(C4.forEach(u=>{delete t[u]}),delete t._chartjs)}function S4(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const E4=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function T4(t,e){let i=[],n=!1;return function(...o){i=o,n||(n=!0,E4.call(window,()=>{n=!1,t.apply(e,i)}))}}function uL(t,e){let i;return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}}const Rb=t=>t==="start"?"left":t==="end"?"right":"center",dc=(t,e,i)=>t==="start"?e:t==="end"?i:(e+i)/2,AL=(t,e,i,n)=>t===(n?"left":"right")?i:t==="center"?(e+i)/2:e;function hL(t,e,i){const n=e.length;let o=0,u=n;if(t._sorted){const{iScale:A,vScale:a,_parsed:g}=t,b=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,B=A.axis,{min:I,max:P,minDefined:F,maxDefined:Q}=A.getUserBounds();if(F){if(o=Math.min(Of(g,B,I).lo,i?n:Of(e,B,A.getPixelForValue(I)).lo),b){const R=g.slice(0,o+1).reverse().findIndex(H=>!ns(H[a.axis]));o-=Math.max(0,R)}o=gc(o,0,n-1)}if(Q){let R=Math.max(Of(g,A.axis,P,!0).hi+1,i?0:Of(e,B,A.getPixelForValue(P),!0).hi+1);if(b){const H=g.slice(R-1).findIndex(j=>!ns(j[a.axis]));R+=Math.max(0,H)}u=gc(R,o,n)-o}else u=n-o}return{start:o,count:u}}function dL(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,o={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=o,!0;const u=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,o),u}const Sy=t=>t===0||t===1,gw=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*xa/i)),yw=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*xa/i)+1,qg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Qo)+1,easeOutSine:t=>Math.sin(t*Qo),easeInOutSine:t=>-.5*(Math.cos(As*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Sy(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Sy(t)?t:gw(t,.075,.3),easeOutElastic:t=>Sy(t)?t:yw(t,.075,.3),easeInOutElastic(t){return Sy(t)?t:t<.5?.5*gw(t*2,.1125,.45):.5+.5*yw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-qg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?qg.easeInBounce(t*2)*.5:qg.easeOutBounce(t*2-1)*.5+.5};function Ob(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function vw(t){return Ob(t)?t:new o0(t)}function d_(t){return Ob(t)?t:new o0(t).saturate(.5).darken(.1).hexString()}const fL=["x","y","borderWidth","radius","tension"],pL=["color","borderColor","backgroundColor"];function mL(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:pL},numbers:{type:"number",properties:fL}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function gL(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const _w=new Map;function yL(t,e){e=e||{};const i=t+JSON.stringify(e);let n=_w.get(i);return n||(n=new Intl.NumberFormat(t,e),_w.set(i,n)),n}function Qb(t,e,i){return yL(e,i).format(t)}const vL={values(t){return go(t)?t:""+t},numeric(t,e,i){if(t===0)return"0";const n=this.chart.options.locale;let o,u=t;if(i.length>1){const b=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(b<1e-4||b>1e15)&&(o="scientific"),u=_L(t,i)}const A=w4(Math.abs(u)),a=isNaN(A)?1:Math.max(Math.min(-1*Math.floor(A),20),0),g={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(g,this.options.ticks.format),Qb(t,n,g)}};function _L(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}var F4={formatters:vL};function xL(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:F4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const tp=Object.create(null),Fx=Object.create(null);function Gg(t,e){if(!e)return t;const i=e.split(".");for(let n=0,o=i.length;n<o;++n){const u=i[n];t=t[u]||(t[u]=Object.create(null))}return t}function f_(t,e,i){return typeof e=="string"?l0(Gg(t,e),i):l0(Gg(t,""),e)}class bL{constructor(e,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,o)=>d_(o.backgroundColor),this.hoverBorderColor=(n,o)=>d_(o.borderColor),this.hoverColor=(n,o)=>d_(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(i)}set(e,i){return f_(this,e,i)}get(e){return Gg(this,e)}describe(e,i){return f_(Fx,e,i)}override(e,i){return f_(tp,e,i)}route(e,i,n,o){const u=Gg(this,e),A=Gg(this,n),a="_"+i;Object.defineProperties(u,{[a]:{value:u[i],writable:!0},[i]:{enumerable:!0,get(){const g=this[a],b=A[o];return gr(g)?Object.assign({},b,g):Jn(g,b)},set(g){this[a]=g}}})}apply(e){e.forEach(i=>i(this))}}var Za=new bL({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mL,gL,xL]);function wL(t){return!t||ns(t.size)||ns(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function xw(t,e,i,n,o){let u=e[o];return u||(u=e[o]=t.measureText(o).width,i.push(o)),u>n&&(n=u),n}function If(t,e,i){const n=t.currentDevicePixelRatio,o=i!==0?Math.max(i/2,.5):0;return Math.round((e-o)*n)/n+o}function bw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Nx(t,e,i,n){N4(t,e,i,n,null)}function N4(t,e,i,n,o){let u,A,a,g,b,B,I,P;const F=e.pointStyle,Q=e.rotation,R=e.radius;let H=(Q||0)*JI;if(F&&typeof F=="object"&&(u=F.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){t.save(),t.translate(i,n),t.rotate(H),t.drawImage(F,-F.width/2,-F.height/2,F.width,F.height),t.restore();return}if(!(isNaN(R)||R<=0)){switch(t.beginPath(),F){default:o?t.ellipse(i,n,o/2,R,0,0,xa):t.arc(i,n,R,0,xa),t.closePath();break;case"triangle":B=o?o/2:R,t.moveTo(i+Math.sin(H)*B,n-Math.cos(H)*R),H+=dw,t.lineTo(i+Math.sin(H)*B,n-Math.cos(H)*R),H+=dw,t.lineTo(i+Math.sin(H)*B,n-Math.cos(H)*R),t.closePath();break;case"rectRounded":b=R*.516,g=R-b,A=Math.cos(H+Mf)*g,I=Math.cos(H+Mf)*(o?o/2-b:g),a=Math.sin(H+Mf)*g,P=Math.sin(H+Mf)*(o?o/2-b:g),t.arc(i-I,n-a,b,H-As,H-Qo),t.arc(i+P,n-A,b,H-Qo,H),t.arc(i+I,n+a,b,H,H+Qo),t.arc(i-P,n+A,b,H+Qo,H+As),t.closePath();break;case"rect":if(!Q){g=Math.SQRT1_2*R,B=o?o/2:g,t.rect(i-B,n-g,2*B,2*g);break}H+=Mf;case"rectRot":I=Math.cos(H)*(o?o/2:R),A=Math.cos(H)*R,a=Math.sin(H)*R,P=Math.sin(H)*(o?o/2:R),t.moveTo(i-I,n-a),t.lineTo(i+P,n-A),t.lineTo(i+I,n+a),t.lineTo(i-P,n+A),t.closePath();break;case"crossRot":H+=Mf;case"cross":I=Math.cos(H)*(o?o/2:R),A=Math.cos(H)*R,a=Math.sin(H)*R,P=Math.sin(H)*(o?o/2:R),t.moveTo(i-I,n-a),t.lineTo(i+I,n+a),t.moveTo(i+P,n-A),t.lineTo(i-P,n+A);break;case"star":I=Math.cos(H)*(o?o/2:R),A=Math.cos(H)*R,a=Math.sin(H)*R,P=Math.sin(H)*(o?o/2:R),t.moveTo(i-I,n-a),t.lineTo(i+I,n+a),t.moveTo(i+P,n-A),t.lineTo(i-P,n+A),H+=Mf,I=Math.cos(H)*(o?o/2:R),A=Math.cos(H)*R,a=Math.sin(H)*R,P=Math.sin(H)*(o?o/2:R),t.moveTo(i-I,n-a),t.lineTo(i+I,n+a),t.moveTo(i+P,n-A),t.lineTo(i-P,n+A);break;case"line":A=o?o/2:Math.cos(H)*R,a=Math.sin(H)*R,t.moveTo(i-A,n-a),t.lineTo(i+A,n+a);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(H)*(o?o/2:R),n+Math.sin(H)*R);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function h0(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function h1(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function d1(t){t.restore()}function BL(t,e,i,n,o){if(!e)return t.lineTo(i.x,i.y);if(o==="middle"){const u=(e.x+i.x)/2;t.lineTo(u,e.y),t.lineTo(u,i.y)}else o==="after"!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function CL(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function SL(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ns(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function EL(t,e,i,n,o){if(o.strikethrough||o.underline){const u=t.measureText(n),A=e-u.actualBoundingBoxLeft,a=e+u.actualBoundingBoxRight,g=i-u.actualBoundingBoxAscent,b=i+u.actualBoundingBoxDescent,B=o.strikethrough?(g+b)/2:b;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(A,B),t.lineTo(a,B),t.stroke()}}function TL(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function d0(t,e,i,n,o,u={}){const A=go(e)?e:[e],a=u.strokeWidth>0&&u.strokeColor!=="";let g,b;for(t.save(),t.font=o.string,SL(t,u),g=0;g<A.length;++g)b=A[g],u.backdrop&&TL(t,u.backdrop),a&&(u.strokeColor&&(t.strokeStyle=u.strokeColor),ns(u.strokeWidth)||(t.lineWidth=u.strokeWidth),t.strokeText(b,i,n,u.maxWidth)),t.fillText(b,i,n,u.maxWidth),EL(t,i,n,b,u),n+=Number(o.lineHeight);t.restore()}function jv(t,e){const{x:i,y:n,w:o,h:u,radius:A}=e;t.arc(i+A.topLeft,n+A.topLeft,A.topLeft,1.5*As,As,!0),t.lineTo(i,n+u-A.bottomLeft),t.arc(i+A.bottomLeft,n+u-A.bottomLeft,A.bottomLeft,As,Qo,!0),t.lineTo(i+o-A.bottomRight,n+u),t.arc(i+o-A.bottomRight,n+u-A.bottomRight,A.bottomRight,Qo,0,!0),t.lineTo(i+o,n+A.topRight),t.arc(i+o-A.topRight,n+A.topRight,A.topRight,0,-Qo,!0),t.lineTo(i+A.topLeft,n)}const FL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,NL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ML(t,e){const i=(""+t).match(FL);if(!i||i[1]==="normal")return e*1.2;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100;break}return e*t}const IL=t=>+t||0;function zb(t,e){const i={},n=gr(e),o=n?Object.keys(e):e,u=gr(t)?n?A=>Jn(t[A],t[e[A]]):A=>t[A]:()=>t;for(const A of o)i[A]=IL(u(A));return i}function M4(t){return zb(t,{top:"y",right:"x",bottom:"y",left:"x"})}function lm(t){return zb(t,["topLeft","topRight","bottomLeft","bottomRight"])}function mA(t){const e=M4(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yc(t,e){t=t||{},e=e||Za.font;let i=Jn(t.size,e.size);typeof i=="string"&&(i=parseInt(i,10));let n=Jn(t.style,e.style);n&&!(""+n).match(NL)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const o={family:Jn(t.family,e.family),lineHeight:ML(Jn(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:Jn(t.weight,e.weight),string:""};return o.string=wL(o),o}function Ey(t,e,i,n){let o,u,A;for(o=0,u=t.length;o<u;++o)if(A=t[o],A!==void 0&&A!==void 0)return A}function LL(t,e,i){const{min:n,max:o}=t,u=x4(e,(o-n)/2),A=(a,g)=>i&&a===0?0:a+g;return{min:A(n,-Math.abs(u)),max:A(o,u)}}function ip(t,e){return Object.assign(Object.create(t),e)}function Hb(t,e=[""],i,n,o=()=>t[0]){const u=i||t;typeof n>"u"&&(n=k4("_fallback",t));const A={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:u,_fallback:n,_getTarget:o,override:a=>Hb([a,...t],e,u,n)};return new Proxy(A,{deleteProperty(a,g){return delete a[g],delete a._keys,delete t[0][g],!0},get(a,g){return L4(a,g,()=>QL(g,e,t,a))},getOwnPropertyDescriptor(a,g){return Reflect.getOwnPropertyDescriptor(a._scopes[0],g)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,g){return Bw(a).includes(g)},ownKeys(a){return Bw(a)},set(a,g,b){const B=a._storage||(a._storage=o());return a[g]=B[g]=b,delete a._keys,!0}})}function dm(t,e,i,n){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:I4(t,n),setContext:u=>dm(t,u,i,n),override:u=>dm(t.override(u),e,i,n)};return new Proxy(o,{deleteProperty(u,A){return delete u[A],delete t[A],!0},get(u,A,a){return L4(u,A,()=>kL(u,A,a))},getOwnPropertyDescriptor(u,A){return u._descriptors.allKeys?Reflect.has(t,A)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,A)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(u,A){return Reflect.has(t,A)},ownKeys(){return Reflect.ownKeys(t)},set(u,A,a){return t[A]=a,delete u[A],!0}})}function I4(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:i,indexable:n,isScriptable:nf(i)?i:()=>i,isIndexable:nf(n)?n:()=>n}}const PL=(t,e)=>t?t+Ub(e):e,Vb=(t,e)=>gr(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function L4(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=i();return t[e]=n,n}function kL(t,e,i){const{_proxy:n,_context:o,_subProxy:u,_descriptors:A}=t;let a=n[e];return nf(a)&&A.isScriptable(e)&&(a=jL(e,a,t,i)),go(a)&&a.length&&(a=UL(e,a,t,A.isIndexable)),Vb(e,a)&&(a=dm(a,o,u&&u[e],A)),a}function jL(t,e,i,n){const{_proxy:o,_context:u,_subProxy:A,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let g=e(u,A||n);return a.delete(t),Vb(t,g)&&(g=qb(o._scopes,o,t,g)),g}function UL(t,e,i,n){const{_proxy:o,_context:u,_subProxy:A,_descriptors:a}=i;if(typeof u.index<"u"&&n(t))return e[u.index%e.length];if(gr(e[0])){const g=e,b=o._scopes.filter(B=>B!==g);e=[];for(const B of g){const I=qb(b,o,t,B);e.push(dm(I,u,A&&A[t],a))}}return e}function P4(t,e,i){return nf(t)?t(e,i):t}const DL=(t,e)=>t===!0?e:typeof t=="string"?ep(e,t):void 0;function RL(t,e,i,n,o){for(const u of e){const A=DL(i,u);if(A){t.add(A);const a=P4(A._fallback,i,o);if(typeof a<"u"&&a!==i&&a!==n)return a}else if(A===!1&&typeof n<"u"&&i!==n)return null}return!1}function qb(t,e,i,n){const o=e._rootScopes,u=P4(e._fallback,i,n),A=[...t,...o],a=new Set;a.add(n);let g=ww(a,A,i,u||i,n);return g===null||typeof u<"u"&&u!==i&&(g=ww(a,A,u,g,n),g===null)?!1:Hb(Array.from(a),[""],o,u,()=>OL(e,i,n))}function ww(t,e,i,n,o){for(;i;)i=RL(t,e,i,n,o);return i}function OL(t,e,i){const n=t._getTarget();e in n||(n[e]={});const o=n[e];return go(o)&&gr(i)?i:o||{}}function QL(t,e,i,n){let o;for(const u of e)if(o=k4(PL(u,t),i),typeof o<"u")return Vb(t,o)?qb(i,n,t,o):o}function k4(t,e){for(const i of e){if(!i)continue;const n=i[t];if(typeof n<"u")return n}}function Bw(t){let e=t._keys;return e||(e=t._keys=zL(t._scopes)),e}function zL(t){const e=new Set;for(const i of t)for(const n of Object.keys(i).filter(o=>!o.startsWith("_")))e.add(n);return Array.from(e)}const HL=Number.EPSILON||1e-14,fm=(t,e)=>e<t.length&&!t[e].skip&&t[e],j4=t=>t==="x"?"y":"x";function VL(t,e,i,n){const o=t.skip?e:t,u=e,A=i.skip?e:i,a=Tx(u,o),g=Tx(A,u);let b=a/(a+g),B=g/(a+g);b=isNaN(b)?0:b,B=isNaN(B)?0:B;const I=n*b,P=n*B;return{previous:{x:u.x-I*(A.x-o.x),y:u.y-I*(A.y-o.y)},next:{x:u.x+P*(A.x-o.x),y:u.y+P*(A.y-o.y)}}}function qL(t,e,i){const n=t.length;let o,u,A,a,g,b=fm(t,0);for(let B=0;B<n-1;++B)if(g=b,b=fm(t,B+1),!(!g||!b)){if(Vg(e[B],0,HL)){i[B]=i[B+1]=0;continue}o=i[B]/e[B],u=i[B+1]/e[B],a=Math.pow(o,2)+Math.pow(u,2),!(a<=9)&&(A=3/Math.sqrt(a),i[B]=o*A*e[B],i[B+1]=u*A*e[B])}}function GL(t,e,i="x"){const n=j4(i),o=t.length;let u,A,a,g=fm(t,0);for(let b=0;b<o;++b){if(A=a,a=g,g=fm(t,b+1),!a)continue;const B=a[i],I=a[n];A&&(u=(B-A[i])/3,a[`cp1${i}`]=B-u,a[`cp1${n}`]=I-u*e[b]),g&&(u=(g[i]-B)/3,a[`cp2${i}`]=B+u,a[`cp2${n}`]=I+u*e[b])}}function KL(t,e="x"){const i=j4(e),n=t.length,o=Array(n).fill(0),u=Array(n);let A,a,g,b=fm(t,0);for(A=0;A<n;++A)if(a=g,g=b,b=fm(t,A+1),!!g){if(b){const B=b[e]-g[e];o[A]=B!==0?(b[i]-g[i])/B:0}u[A]=a?b?wh(o[A-1])!==wh(o[A])?0:(o[A-1]+o[A])/2:o[A-1]:o[A]}qL(t,o,u),GL(t,u,e)}function Ty(t,e,i){return Math.max(Math.min(t,i),e)}function WL(t,e){let i,n,o,u,A,a=h0(t[0],e);for(i=0,n=t.length;i<n;++i)A=u,u=a,a=i<n-1&&h0(t[i+1],e),u&&(o=t[i],A&&(o.cp1x=Ty(o.cp1x,e.left,e.right),o.cp1y=Ty(o.cp1y,e.top,e.bottom)),a&&(o.cp2x=Ty(o.cp2x,e.left,e.right),o.cp2y=Ty(o.cp2y,e.top,e.bottom)))}function $L(t,e,i,n,o){let u,A,a,g;if(e.spanGaps&&(t=t.filter(b=>!b.skip)),e.cubicInterpolationMode==="monotone")KL(t,o);else{let b=n?t[t.length-1]:t[0];for(u=0,A=t.length;u<A;++u)a=t[u],g=VL(b,a,t[Math.min(u+1,A-(n?0:1))%A],e.tension),a.cp1x=g.previous.x,a.cp1y=g.previous.y,a.cp2x=g.next.x,a.cp2y=g.next.y,b=a}e.capBezierPoints&&WL(t,i)}function Gb(){return typeof window<"u"&&typeof document<"u"}function Kb(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Uv(t,e,i){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[i])):n=t,n}const f1=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function ZL(t,e){return f1(t).getPropertyValue(e)}const XL=["top","right","bottom","left"];function qf(t,e,i){const n={};i=i?"-"+i:"";for(let o=0;o<4;o++){const u=XL[o];n[u]=parseFloat(t[e+"-"+u+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const YL=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function JL(t,e){const i=t.touches,n=i&&i.length?i[0]:t,{offsetX:o,offsetY:u}=n;let A=!1,a,g;if(YL(o,u,t.target))a=o,g=u;else{const b=e.getBoundingClientRect();a=n.clientX-b.left,g=n.clientY-b.top,A=!0}return{x:a,y:g,box:A}}function kf(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:n}=e,o=f1(i),u=o.boxSizing==="border-box",A=qf(o,"padding"),a=qf(o,"border","width"),{x:g,y:b,box:B}=JL(t,i),I=A.left+(B&&a.left),P=A.top+(B&&a.top);let{width:F,height:Q}=e;return u&&(F-=A.width+a.width,Q-=A.height+a.height),{x:Math.round((g-I)/F*i.width/n),y:Math.round((b-P)/Q*i.height/n)}}function eP(t,e,i){let n,o;if(e===void 0||i===void 0){const u=t&&Kb(t);if(!u)e=t.clientWidth,i=t.clientHeight;else{const A=u.getBoundingClientRect(),a=f1(u),g=qf(a,"border","width"),b=qf(a,"padding");e=A.width-b.width-g.width,i=A.height-b.height-g.height,n=Uv(a.maxWidth,u,"clientWidth"),o=Uv(a.maxHeight,u,"clientHeight")}}return{width:e,height:i,maxWidth:n||kv,maxHeight:o||kv}}const Fy=t=>Math.round(t*10)/10;function tP(t,e,i,n){const o=f1(t),u=qf(o,"margin"),A=Uv(o.maxWidth,t,"clientWidth")||kv,a=Uv(o.maxHeight,t,"clientHeight")||kv,g=eP(t,e,i);let{width:b,height:B}=g;if(o.boxSizing==="content-box"){const P=qf(o,"border","width"),F=qf(o,"padding");b-=F.width+P.width,B-=F.height+P.height}return b=Math.max(0,b-u.width),B=Math.max(0,n?b/n:B-u.height),b=Fy(Math.min(b,A,g.maxWidth)),B=Fy(Math.min(B,a,g.maxHeight)),b&&!B&&(B=Fy(b/2)),(e!==void 0||i!==void 0)&&n&&g.height&&B>g.height&&(B=g.height,b=Fy(Math.floor(B*n))),{width:b,height:B}}function Cw(t,e,i){const n=e||1,o=Math.floor(t.height*n),u=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const A=t.canvas;return A.style&&(i||!A.style.height&&!A.style.width)&&(A.style.height=`${t.height}px`,A.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||A.height!==o||A.width!==u?(t.currentDevicePixelRatio=n,A.height=o,A.width=u,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const iP=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Gb()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Sw(t,e){const i=ZL(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function jf(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function nP(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:n==="middle"?i<.5?t.y:e.y:n==="after"?i<1?t.y:e.y:i>0?e.y:t.y}}function rP(t,e,i,n){const o={x:t.cp2x,y:t.cp2y},u={x:e.cp1x,y:e.cp1y},A=jf(t,o,i),a=jf(o,u,i),g=jf(u,e,i),b=jf(A,a,i),B=jf(a,g,i);return jf(b,B,i)}const sP=function(t,e){return{x(i){return t+t+e-i},setWidth(i){e=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},aP=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function cm(t,e,i){return t?sP(e,i):aP()}function U4(t,e){let i,n;(e==="ltr"||e==="rtl")&&(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function D4(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function R4(t){return t==="angle"?{between:A0,compare:sL,normalize:Lu}:{between:nd,compare:(e,i)=>e-i,normalize:e=>e}}function Ew({start:t,end:e,count:i,loop:n,style:o}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i===0,style:o}}function oP(t,e,i){const{property:n,start:o,end:u}=i,{between:A,normalize:a}=R4(n),g=e.length;let{start:b,end:B,loop:I}=t,P,F;if(I){for(b+=g,B+=g,P=0,F=g;P<F&&A(a(e[b%g][n]),o,u);++P)b--,B--;b%=g,B%=g}return B<b&&(B+=g),{start:b,end:B,loop:I,style:t.style}}function O4(t,e,i){if(!i)return[t];const{property:n,start:o,end:u}=i,A=e.length,{compare:a,between:g,normalize:b}=R4(n),{start:B,end:I,loop:P,style:F}=oP(t,e,i),Q=[];let R=!1,H=null,j,V,W;const ne=()=>g(o,W,j)&&a(o,W)!==0,te=()=>a(u,j)===0||g(u,W,j),de=()=>R||ne(),ee=()=>!R||te();for(let re=B,xe=B;re<=I;++re)V=e[re%A],!V.skip&&(j=b(V[n]),j!==W&&(R=g(j,o,u),H===null&&de()&&(H=a(j,o)===0?re:xe),H!==null&&ee()&&(Q.push(Ew({start:H,end:re,loop:P,count:A,style:F})),H=null),xe=re,W=j));return H!==null&&Q.push(Ew({start:H,end:I,loop:P,count:A,style:F})),Q}function Q4(t,e){const i=[],n=t.segments;for(let o=0;o<n.length;o++){const u=O4(n[o],t.points,e);u.length&&i.push(...u)}return i}function lP(t,e,i,n){let o=0,u=e-1;if(i&&!n)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,i&&(u+=o);u>o&&t[u%e].skip;)u--;return u%=e,{start:o,end:u}}function cP(t,e,i,n){const o=t.length,u=[];let A=e,a=t[e],g;for(g=e+1;g<=i;++g){const b=t[g%o];b.skip||b.stop?a.skip||(n=!1,u.push({start:e%o,end:(g-1)%o,loop:n}),e=A=b.stop?g:null):(A=g,a.skip&&(e=g)),a=b}return A!==null&&u.push({start:e%o,end:A%o,loop:n}),u}function uP(t,e){const i=t.points,n=t.options.spanGaps,o=i.length;if(!o)return[];const u=!!t._loop,{start:A,end:a}=lP(i,o,u,n);if(n===!0)return Tw(t,[{start:A,end:a,loop:u}],i,e);const g=a<A?a+o:a,b=!!t._fullLoop&&A===0&&a===o-1;return Tw(t,cP(i,A,g,b),i,e)}function Tw(t,e,i,n){return!n||!n.setContext||!i?e:AP(t,e,i,n)}function AP(t,e,i,n){const o=t._chart.getContext(),u=Fw(t.options),{_datasetIndex:A,options:{spanGaps:a}}=t,g=i.length,b=[];let B=u,I=e[0].start,P=I;function F(Q,R,H,j){const V=a?-1:1;if(Q!==R){for(Q+=g;i[Q%g].skip;)Q-=V;for(;i[R%g].skip;)R+=V;Q%g!==R%g&&(b.push({start:Q%g,end:R%g,loop:H,style:j}),B=j,I=R%g)}}for(const Q of e){I=a?I:Q.start;let R=i[I%g],H;for(P=I+1;P<=Q.end;P++){const j=i[P%g];H=Fw(n.setContext(ip(o,{type:"segment",p0:R,p1:j,p0DataIndex:(P-1)%g,p1DataIndex:P%g,datasetIndex:A}))),hP(H,B)&&F(I,P-1,Q.loop,B),R=j,B=H}I<P-1&&F(I,P-1,Q.loop,B)}return b}function Fw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function hP(t,e){if(!e)return!1;const i=[],n=function(o,u){return Ob(u)?(i.includes(u)||i.push(u),i.indexOf(u)):u};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Ny(t,e,i){return t.options.clip?t[i]:e[i]}function dP(t,e){const{xScale:i,yScale:n}=t;return i&&n?{left:Ny(i,e,"left"),right:Ny(i,e,"right"),top:Ny(n,e,"top"),bottom:Ny(n,e,"bottom")}:e}function z4(t,e){const i=e._clip;if(i.disabled)return!1;const n=dP(e,t.chartArea);return{left:i.left===!1?0:n.left-(i.left===!0?0:i.left),right:i.right===!1?t.width:n.right+(i.right===!0?0:i.right),top:i.top===!1?0:n.top-(i.top===!0?0:i.top),bottom:i.bottom===!1?t.height:n.bottom+(i.bottom===!0?0:i.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class fP{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,i,n,o){const u=i.listeners[o],A=i.duration;u.forEach(a=>a({chart:e,initial:i.initial,numSteps:A,currentStep:Math.min(n-i.start,A)}))}_refresh(){this._request||(this._running=!0,this._request=E4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let i=0;this._charts.forEach((n,o)=>{if(!n.running||!n.items.length)return;const u=n.items;let A=u.length-1,a=!1,g;for(;A>=0;--A)g=u[A],g._active?(g._total>n.duration&&(n.duration=g._total),g.tick(e),a=!0):(u[A]=u[u.length-1],u.pop());a&&(o.draw(),this._notify(o,n,e,"progress")),u.length||(n.running=!1,this._notify(o,n,e,"complete"),n.initial=!1),i+=u.length}),this._lastDate=e,i===0&&(this._running=!1)}_getAnims(e){const i=this._charts;let n=i.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(e,n)),n}listen(e,i,n){this._getAnims(e).listeners[i].push(n)}add(e,i){!i||!i.length||this._getAnims(e).items.push(...i)}has(e){return this._getAnims(e).items.length>0}start(e){const i=this._charts.get(e);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,o)=>Math.max(n,o._duration),0),this._refresh())}running(e){if(!this._running)return!1;const i=this._charts.get(e);return!(!i||!i.running||!i.items.length)}stop(e){const i=this._charts.get(e);if(!i||!i.items.length)return;const n=i.items;let o=n.length-1;for(;o>=0;--o)n[o].cancel();i.items=[],this._notify(e,i,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Jh=new fP;const Nw="transparent",pP={boolean(t,e,i){return i>.5?e:t},color(t,e,i){const n=vw(t||Nw),o=n.valid&&vw(e||Nw);return o&&o.valid?o.mix(n,i).hexString():e},number(t,e,i){return t+(e-t)*i}};class mP{constructor(e,i,n,o){const u=i[n];o=Ey([e.to,o,u,e.from]);const A=Ey([e.from,u,o]);this._active=!0,this._fn=e.fn||pP[e.type||typeof A],this._easing=qg[e.easing]||qg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=i,this._prop=n,this._from=A,this._to=o,this._promises=void 0}active(){return this._active}update(e,i,n){if(this._active){this._notify(!1);const o=this._target[this._prop],u=n-this._start,A=this._duration-u;this._start=n,this._duration=Math.floor(Math.max(A,e.duration)),this._total+=u,this._loop=!!e.loop,this._to=Ey([e.to,i,o,e.from]),this._from=Ey([e.from,o,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const i=e-this._start,n=this._duration,o=this._prop,u=this._from,A=this._loop,a=this._to;let g;if(this._active=u!==a&&(A||i<n),!this._active){this._target[o]=a,this._notify(!0);return}if(i<0){this._target[o]=u;return}g=i/n%2,g=A&&g>1?2-g:g,g=this._easing(Math.min(1,Math.max(0,g))),this._target[o]=this._fn(u,a,g)}wait(){const e=this._promises||(this._promises=[]);return new Promise((i,n)=>{e.push({res:i,rej:n})})}_notify(e){const i=e?"res":"rej",n=this._promises||[];for(let o=0;o<n.length;o++)n[o][i]()}}class H4{constructor(e,i){this._chart=e,this._properties=new Map,this.configure(i)}configure(e){if(!gr(e))return;const i=Object.keys(Za.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(o=>{const u=e[o];if(!gr(u))return;const A={};for(const a of i)A[a]=u[a];(go(u.properties)&&u.properties||[o]).forEach(a=>{(a===o||!n.has(a))&&n.set(a,A)})})}_animateOptions(e,i){const n=i.options,o=yP(e,n);if(!o)return[];const u=this._createAnimations(o,n);return n.$shared&&gP(e.options.$animations,n).then(()=>{e.options=n},()=>{}),u}_createAnimations(e,i){const n=this._properties,o=[],u=e.$animations||(e.$animations={}),A=Object.keys(i),a=Date.now();let g;for(g=A.length-1;g>=0;--g){const b=A[g];if(b.charAt(0)==="$")continue;if(b==="options"){o.push(...this._animateOptions(e,i));continue}const B=i[b];let I=u[b];const P=n.get(b);if(I)if(P&&I.active()){I.update(P,B,a);continue}else I.cancel();if(!P||!P.duration){e[b]=B;continue}u[b]=I=new mP(P,e,b,B),o.push(I)}return o}update(e,i){if(this._properties.size===0){Object.assign(e,i);return}const n=this._createAnimations(e,i);if(n.length)return Jh.add(this._chart,n),!0}}function gP(t,e){const i=[],n=Object.keys(e);for(let o=0;o<n.length;o++){const u=t[n[o]];u&&u.active()&&i.push(u.wait())}return Promise.all(i)}function yP(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Mw(t,e){const i=t&&t.options||{},n=i.reverse,o=i.min===void 0?e:0,u=i.max===void 0?e:0;return{start:n?u:o,end:n?o:u}}function vP(t,e,i){if(i===!1)return!1;const n=Mw(t,i),o=Mw(e,i);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}function _P(t){let e,i,n,o;return gr(t)?(e=t.top,i=t.right,n=t.bottom,o=t.left):e=i=n=o=t,{top:e,right:i,bottom:n,left:o,disabled:t===!1}}function V4(t,e){const i=[],n=t._getSortedDatasetMetas(e);let o,u;for(o=0,u=n.length;o<u;++o)i.push(n[o].index);return i}function Iw(t,e,i,n={}){const o=t.keys,u=n.mode==="single";let A,a,g,b;if(e===null)return;let B=!1;for(A=0,a=o.length;A<a;++A){if(g=+o[A],g===i){if(B=!0,n.all)continue;break}b=t.values[g],vc(b)&&(u||e===0||wh(e)===wh(b))&&(e+=b)}return!B&&!n.all?0:e}function xP(t,e){const{iScale:i,vScale:n}=e,o=i.axis==="x"?"x":"y",u=n.axis==="x"?"x":"y",A=Object.keys(t),a=new Array(A.length);let g,b,B;for(g=0,b=A.length;g<b;++g)B=A[g],a[g]={[o]:B,[u]:t[B]};return a}function p_(t,e){const i=t&&t.options.stacked;return i||i===void 0&&e.stack!==void 0}function bP(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}function wP(t){const{min:e,max:i,minDefined:n,maxDefined:o}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:o?i:Number.POSITIVE_INFINITY}}function BP(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function Lw(t,e,i,n){for(const o of e.getMatchingVisibleMetas(n).reverse()){const u=t[o.index];if(i&&u>0||!i&&u<0)return o.index}return null}function Pw(t,e){const{chart:i,_cachedMeta:n}=t,o=i._stacks||(i._stacks={}),{iScale:u,vScale:A,index:a}=n,g=u.axis,b=A.axis,B=bP(u,A,n),I=e.length;let P;for(let F=0;F<I;++F){const Q=e[F],{[g]:R,[b]:H}=Q,j=Q._stacks||(Q._stacks={});P=j[b]=BP(o,B,R),P[a]=H,P._top=Lw(P,A,!0,n.type),P._bottom=Lw(P,A,!1,n.type);const V=P._visualValues||(P._visualValues={});V[a]=H}}function m_(t,e){const i=t.scales;return Object.keys(i).filter(n=>i[n].axis===e).shift()}function CP(t,e){return ip(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function SP(t,e,i){return ip(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function yg(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const o of e){const u=o._stacks;if(!u||u[n]===void 0||u[n][i]===void 0)return;delete u[n][i],u[n]._visualValues!==void 0&&u[n]._visualValues[i]!==void 0&&delete u[n]._visualValues[i]}}}const g_=t=>t==="reset"||t==="none",kw=(t,e)=>e?t:Object.assign({},t),EP=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:V4(i,!0),values:null};class p1{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=p_(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&yg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,n=this.getDataset(),o=(I,P,F,Q)=>I==="x"?P:I==="r"?Q:F,u=i.xAxisID=Jn(n.xAxisID,m_(e,"x")),A=i.yAxisID=Jn(n.yAxisID,m_(e,"y")),a=i.rAxisID=Jn(n.rAxisID,m_(e,"r")),g=i.indexAxis,b=i.iAxisID=o(g,u,A,a),B=i.vAxisID=o(g,A,u,a);i.xScale=this.getScaleForId(u),i.yScale=this.getScaleForId(A),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(b),i.vScale=this.getScaleForId(B)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&mw(this._data,this),e._stacked&&yg(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),n=this._data;if(gr(i)){const o=this._cachedMeta;this._data=xP(i,o)}else if(n!==i){if(n){mw(n,this);const o=this._cachedMeta;yg(o),o._parsed=[]}i&&Object.isExtensible(i)&&cL(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,n=this.getDataset();let o=!1;this._dataCheck();const u=i._stacked;i._stacked=p_(i.vScale,i),i.stack!==n.stack&&(o=!0,yg(i),i.stack=n.stack),this._resyncElements(e),(o||u!==i._stacked)&&(Pw(this,i._parsed),i._stacked=p_(i.vScale,i))}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:n,_data:o}=this,{iScale:u,_stacked:A}=n,a=u.axis;let g=e===0&&i===o.length?!0:n._sorted,b=e>0&&n._parsed[e-1],B,I,P;if(this._parsing===!1)n._parsed=o,n._sorted=!0,P=o;else{go(o[e])?P=this.parseArrayData(n,o,e,i):gr(o[e])?P=this.parseObjectData(n,o,e,i):P=this.parsePrimitiveData(n,o,e,i);const F=()=>I[a]===null||b&&I[a]<b[a];for(B=0;B<i;++B)n._parsed[B+e]=I=P[B],g&&(F()&&(g=!1),b=I);n._sorted=g}A&&Pw(this,P)}parsePrimitiveData(e,i,n,o){const{iScale:u,vScale:A}=e,a=u.axis,g=A.axis,b=u.getLabels(),B=u===A,I=new Array(o);let P,F,Q;for(P=0,F=o;P<F;++P)Q=P+n,I[P]={[a]:B||u.parse(b[Q],Q),[g]:A.parse(i[Q],Q)};return I}parseArrayData(e,i,n,o){const{xScale:u,yScale:A}=e,a=new Array(o);let g,b,B,I;for(g=0,b=o;g<b;++g)B=g+n,I=i[B],a[g]={x:u.parse(I[0],B),y:A.parse(I[1],B)};return a}parseObjectData(e,i,n,o){const{xScale:u,yScale:A}=e,{xAxisKey:a="x",yAxisKey:g="y"}=this._parsing,b=new Array(o);let B,I,P,F;for(B=0,I=o;B<I;++B)P=B+n,F=i[P],b[B]={x:u.parse(ep(F,a),P),y:A.parse(ep(F,g),P)};return b}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,n){const o=this.chart,u=this._cachedMeta,A=i[e.axis],a={keys:V4(o,!0),values:i._stacks[e.axis]._visualValues};return Iw(a,A,u.index,{mode:n})}updateRangeFromParsed(e,i,n,o){const u=n[i.axis];let A=u===null?NaN:u;const a=o&&n._stacks[i.axis];o&&a&&(o.values=a,A=Iw(o,u,this._cachedMeta.index)),e.min=Math.min(e.min,A),e.max=Math.max(e.max,A)}getMinMax(e,i){const n=this._cachedMeta,o=n._parsed,u=n._sorted&&e===n.iScale,A=o.length,a=this._getOtherScale(e),g=EP(i,n,this.chart),b={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:B,max:I}=wP(a);let P,F;function Q(){F=o[P];const R=F[a.axis];return!vc(F[e.axis])||B>R||I<R}for(P=0;P<A&&!(!Q()&&(this.updateRangeFromParsed(b,e,F,g),u));++P);if(u){for(P=A-1;P>=0;--P)if(!Q()){this.updateRangeFromParsed(b,e,F,g);break}}return b}getAllParsedValues(e){const i=this._cachedMeta._parsed,n=[];let o,u,A;for(o=0,u=i.length;o<u;++o)A=i[o][e.axis],vc(A)&&n.push(A);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,n=i.iScale,o=i.vScale,u=this.getParsed(e);return{label:n?""+n.getLabelForValue(u[n.axis]):"",value:o?""+o.getLabelForValue(u[o.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=_P(Jn(this.options.clip,vP(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,i=this.chart,n=this._cachedMeta,o=n.data||[],u=i.chartArea,A=[],a=this._drawStart||0,g=this._drawCount||o.length-a,b=this.options.drawActiveElementsOnTop;let B;for(n.dataset&&n.dataset.draw(e,u,a,g),B=a;B<a+g;++B){const I=o[B];I.hidden||(I.active&&b?A.push(I):I.draw(e,u))}for(B=0;B<A.length;++B)A[B].draw(e,u)}getStyle(e,i){const n=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,i,n){const o=this.getDataset();let u;if(e>=0&&e<this._cachedMeta.data.length){const A=this._cachedMeta.data[e];u=A.$context||(A.$context=SP(this.getContext(),e,A)),u.parsed=this.getParsed(e),u.raw=o.data[e],u.index=u.dataIndex=e}else u=this.$context||(this.$context=CP(this.chart.getContext(),this.index)),u.dataset=o,u.index=u.datasetIndex=this.index;return u.active=!!i,u.mode=n,u}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",n){const o=i==="active",u=this._cachedDataOpts,A=e+"-"+i,a=u[A],g=this.enableOptionSharing&&c0(n);if(a)return kw(a,g);const b=this.chart.config,B=b.datasetElementScopeKeys(this._type,e),I=o?[`${e}Hover`,"hover",e,""]:[e,""],P=b.getOptionScopes(this.getDataset(),B),F=Object.keys(Za.elements[e]),Q=()=>this.getContext(n,o,i),R=b.resolveNamedOptions(P,F,Q,I);return R.$shared&&(R.$shared=g,u[A]=Object.freeze(kw(R,g))),R}_resolveAnimations(e,i,n){const o=this.chart,u=this._cachedDataOpts,A=`animation-${i}`,a=u[A];if(a)return a;let g;if(o.options.animation!==!1){const B=this.chart.config,I=B.datasetAnimationScopeKeys(this._type,i),P=B.getOptionScopes(this.getDataset(),I);g=B.createResolver(P,this.getContext(e,n,i))}const b=new H4(o,g&&g.animations);return g&&g._cacheable&&(u[A]=Object.freeze(b)),b}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||g_(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const n=this.resolveDataElementOptions(e,i),o=this._sharedOptions,u=this.getSharedOptions(n),A=this.includeOptions(i,u)||u!==o;return this.updateSharedOptions(u,i,n),{sharedOptions:u,includeOptions:A}}updateElement(e,i,n,o){g_(o)?Object.assign(e,n):this._resolveAnimations(i,o).update(e,n)}updateSharedOptions(e,i,n){e&&!g_(i)&&this._resolveAnimations(void 0,i).update(e,n)}_setStyle(e,i,n,o){e.active=o;const u=this.getStyle(i,o);this._resolveAnimations(i,n,o).update(e,{options:!o&&this.getSharedOptions(u)||u})}removeHoverStyle(e,i,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,i,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,n=this._cachedMeta.data;for(const[a,g,b]of this._syncList)this[a](g,b);this._syncList=[];const o=n.length,u=i.length,A=Math.min(u,o);A&&this.parse(0,A),u>o?this._insertElements(o,u-o,e):u<o&&this._removeElements(u,o-u)}_insertElements(e,i,n=!0){const o=this._cachedMeta,u=o.data,A=e+i;let a;const g=b=>{for(b.length+=i,a=b.length-1;a>=A;a--)b[a]=b[a-i]};for(g(u),a=e;a<A;++a)u[a]=new this.dataElementType;this._parsing&&g(o._parsed),this.parse(e,i),n&&this.updateElements(u,e,i,"reset")}updateElements(e,i,n,o){}_removeElements(e,i){const n=this._cachedMeta;if(this._parsing){const o=n._parsed.splice(e,i);n._stacked&&yg(n,o)}n.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,n,o]=e;this[i](n,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function TP(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let n=[];for(let o=0,u=i.length;o<u;o++)n=n.concat(i[o].controller.getAllParsedValues(t));t._cache.$bar=S4(n.sort((o,u)=>o-u))}return t._cache.$bar}function FP(t){const e=t.iScale,i=TP(e,t.type);let n=e._length,o,u,A,a;const g=()=>{A===32767||A===-32768||(c0(a)&&(n=Math.min(n,Math.abs(A-a)||n)),a=A)};for(o=0,u=i.length;o<u;++o)A=e.getPixelForValue(i[o]),g();for(a=void 0,o=0,u=e.ticks.length;o<u;++o)A=e.getPixelForTick(o),g();return n}function NP(t,e,i,n){const o=i.barThickness;let u,A;return ns(o)?(u=e.min*i.categoryPercentage,A=i.barPercentage):(u=o*n,A=1),{chunk:u/n,ratio:A,start:e.pixels[t]-u/2}}function MP(t,e,i,n){const o=e.pixels,u=o[t];let A=t>0?o[t-1]:null,a=t<o.length-1?o[t+1]:null;const g=i.categoryPercentage;A===null&&(A=u-(a===null?e.end-e.start:a-u)),a===null&&(a=u+u-A);const b=u-(u-Math.min(A,a))/2*g;return{chunk:Math.abs(a-A)/2*g/n,ratio:i.barPercentage,start:b}}function IP(t,e,i,n){const o=i.parse(t[0],n),u=i.parse(t[1],n),A=Math.min(o,u),a=Math.max(o,u);let g=A,b=a;Math.abs(A)>Math.abs(a)&&(g=a,b=A),e[i.axis]=b,e._custom={barStart:g,barEnd:b,start:o,end:u,min:A,max:a}}function q4(t,e,i,n){return go(t)?IP(t,e,i,n):e[i.axis]=i.parse(t,n),e}function jw(t,e,i,n){const o=t.iScale,u=t.vScale,A=o.getLabels(),a=o===u,g=[];let b,B,I,P;for(b=i,B=i+n;b<B;++b)P=e[b],I={},I[o.axis]=a||o.parse(A[b],b),g.push(q4(P,I,u,b));return g}function y_(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function LP(t,e,i){return t!==0?wh(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}function PP(t){let e,i,n,o,u;return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(o="end",u="start"):(o="start",u="end"),{start:i,end:n,reverse:e,top:o,bottom:u}}function kP(t,e,i,n){let o=e.borderSkipped;const u={};if(!o){t.borderSkipped=u;return}if(o===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:A,end:a,reverse:g,top:b,bottom:B}=PP(t);o==="middle"&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?o=b:(i._bottom||0)===n?o=B:(u[Uw(B,A,a,g)]=!0,o=b)),u[Uw(o,A,a,g)]=!0,t.borderSkipped=u}function Uw(t,e,i,n){return n?(t=jP(t,e,i),t=Dw(t,i,e)):t=Dw(t,e,i),t}function jP(t,e,i){return t===e?i:t===i?e:t}function Dw(t,e,i){return t==="start"?e:t==="end"?i:t}function UP(t,{inflateAmount:e},i){t.inflateAmount=e==="auto"?i===1?.33:0:e}class DP extends p1{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,n,o){return jw(e,i,n,o)}parseArrayData(e,i,n,o){return jw(e,i,n,o)}parseObjectData(e,i,n,o){const{iScale:u,vScale:A}=e,{xAxisKey:a="x",yAxisKey:g="y"}=this._parsing,b=u.axis==="x"?a:g,B=A.axis==="x"?a:g,I=[];let P,F,Q,R;for(P=n,F=n+o;P<F;++P)R=i[P],Q={},Q[u.axis]=u.parse(ep(R,b),P),I.push(q4(ep(R,B),Q,A,P));return I}updateRangeFromParsed(e,i,n,o){super.updateRangeFromParsed(e,i,n,o);const u=n._custom;u&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,u.min),e.max=Math.max(e.max,u.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:n,vScale:o}=i,u=this.getParsed(e),A=u._custom,a=y_(A)?"["+A.start+", "+A.end+"]":""+o.getLabelForValue(u[o.axis]);return{label:""+n.getLabelForValue(u[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,n,o){const u=o==="reset",{index:A,_cachedMeta:{vScale:a}}=this,g=a.getBasePixel(),b=a.isHorizontal(),B=this._getRuler(),{sharedOptions:I,includeOptions:P}=this._getSharedOptions(i,o);for(let F=i;F<i+n;F++){const Q=this.getParsed(F),R=u||ns(Q[a.axis])?{base:g,head:g}:this._calculateBarValuePixels(F),H=this._calculateBarIndexPixels(F,B),j=(Q._stacks||{})[a.axis],V={horizontal:b,base:R.base,enableBorderRadius:!j||y_(Q._custom)||A===j._top||A===j._bottom,x:b?R.head:H.center,y:b?H.center:R.head,height:b?H.size:Math.abs(R.size),width:b?Math.abs(R.size):H.size};P&&(V.options=I||this.resolveDataElementOptions(F,e[F].active?"active":o));const W=V.options||e[F].options;kP(V,W,j,A),UP(V,W,B.ratio),this.updateElement(e[F],F,V,o)}}_getStacks(e,i){const{iScale:n}=this._cachedMeta,o=n.getMatchingVisibleMetas(this._type).filter(B=>B.controller.options.grouped),u=n.options.stacked,A=[],a=this._cachedMeta.controller.getParsed(i),g=a&&a[n.axis],b=B=>{const I=B._parsed.find(F=>F[n.axis]===g),P=I&&I[B.vScale.axis];if(ns(P)||isNaN(P))return!0};for(const B of o)if(!(i!==void 0&&b(B))&&((u===!1||A.indexOf(B.stack)===-1||u===void 0&&B.stack===void 0)&&A.push(B.stack),B.index===e))break;return A.length||A.push(void 0),A}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===i).shift()}_getAxis(){const e={},i=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Jn(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,i)]=!0;return Object.keys(e)}_getStackIndex(e,i,n){const o=this._getStacks(e,n),u=i!==void 0?o.indexOf(i):-1;return u===-1?o.length-1:u}_getRuler(){const e=this.options,i=this._cachedMeta,n=i.iScale,o=[];let u,A;for(u=0,A=i.data.length;u<A;++u)o.push(n.getPixelForValue(this.getParsed(u)[n.axis],u));const a=e.barThickness;return{min:a||FP(i),pixels:o,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:n,index:o},options:{base:u,minBarLength:A}}=this,a=u||0,g=this.getParsed(e),b=g._custom,B=y_(b);let I=g[i.axis],P=0,F=n?this.applyStack(i,g,n):I,Q,R;F!==I&&(P=F-I,F=I),B&&(I=b.barStart,F=b.barEnd-b.barStart,I!==0&&wh(I)!==wh(b.barEnd)&&(P=0),P+=I);const H=!ns(u)&&!B?u:P;let j=i.getPixelForValue(H);if(this.chart.getDataVisibility(e)?Q=i.getPixelForValue(P+F):Q=j,R=Q-j,Math.abs(R)<A){R=LP(R,i,a)*A,I===a&&(j-=R/2);const V=i.getPixelForDecimal(0),W=i.getPixelForDecimal(1),ne=Math.min(V,W),te=Math.max(V,W);j=Math.max(Math.min(j,te),ne),Q=j+R,n&&!B&&(g._stacks[i.axis]._visualValues[o]=i.getValueForPixel(Q)-i.getValueForPixel(j))}if(j===i.getPixelForValue(a)){const V=wh(R)*i.getLineWidthForValue(a)/2;j+=V,R-=V}return{size:R,base:j,head:Q,center:Q+R/2}}_calculateBarIndexPixels(e,i){const n=i.scale,o=this.options,u=o.skipNull,A=Jn(o.maxBarThickness,1/0);let a,g;const b=this._getAxisCount();if(i.grouped){const B=u?this._getStackCount(e):i.stackCount,I=o.barThickness==="flex"?MP(e,i,o,B*b):NP(e,i,o,B*b),P=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,F=this._getAxis().indexOf(Jn(P,this.getFirstScaleIdForIndexAxis())),Q=this._getStackIndex(this.index,this._cachedMeta.stack,u?e:void 0)+F;a=I.start+I.chunk*Q+I.chunk/2,g=Math.min(A,I.chunk*I.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),g=Math.min(A,i.min*i.ratio);return{base:a-g/2,head:a+g/2,center:a,size:g}}draw(){const e=this._cachedMeta,i=e.vScale,n=e.data,o=n.length;let u=0;for(;u<o;++u)this.getParsed(u)[i.axis]!==null&&!n[u].hidden&&n[u].draw(this._ctx)}}function RP(t,e,i){let n=1,o=1,u=0,A=0;if(e<xa){const a=t,g=a+e,b=Math.cos(a),B=Math.sin(a),I=Math.cos(g),P=Math.sin(g),F=(W,ne,te)=>A0(W,a,g,!0)?1:Math.max(ne,ne*i,te,te*i),Q=(W,ne,te)=>A0(W,a,g,!0)?-1:Math.min(ne,ne*i,te,te*i),R=F(0,b,I),H=F(Qo,B,P),j=Q(As,b,I),V=Q(As+Qo,B,P);n=(R-j)/2,o=(H-V)/2,u=-(R+j)/2,A=-(H+V)/2}return{ratioX:n,ratioY:o,offsetX:u,offsetY:A}}class OP extends p1{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:o}}=e.legend.options;return i.labels.map((u,A)=>{const g=e.getDatasetMeta(0).controller.getStyle(A);return{text:u,fillStyle:g.backgroundColor,strokeStyle:g.borderColor,fontColor:o,lineWidth:g.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(A),index:A}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const n=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=n;else{let u=g=>+n[g];if(gr(n[e])){const{key:g="value"}=this._parsing;u=b=>+ep(n[b],g)}let A,a;for(A=e,a=e+i;A<a;++A)o._parsed[A]=u(A)}}_getRotation(){return id(this.options.rotation-90)}_getCircumference(){return id(this.options.circumference)}_getRotationExtents(){let e=xa,i=-xa;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const o=this.chart.getDatasetMeta(n).controller,u=o._getRotation(),A=o._getCircumference();e=Math.min(e,u),i=Math.max(i,u+A)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:n}=i,o=this._cachedMeta,u=o.data,A=this.getMaxBorderWidth()+this.getMaxOffset(u)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-A)/2,0),g=Math.min(GI(this.options.cutout,a),1),b=this._getRingWeight(this.index),{circumference:B,rotation:I}=this._getRotationExtents(),{ratioX:P,ratioY:F,offsetX:Q,offsetY:R}=RP(I,B,g),H=(n.width-A)/P,j=(n.height-A)/F,V=Math.max(Math.min(H,j)/2,0),W=x4(this.options.radius,V),ne=Math.max(W*g,0),te=(W-ne)/this._getVisibleDatasetWeightTotal();this.offsetX=Q*W,this.offsetY=R*W,o.total=this.calculateTotal(),this.outerRadius=W-te*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-te*b,0),this.updateElements(u,0,u.length,e)}_circumference(e,i){const n=this.options,o=this._cachedMeta,u=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||o._parsed[e]===null||o.data[e].hidden?0:this.calculateCircumference(o._parsed[e]*u/xa)}updateElements(e,i,n,o){const u=o==="reset",A=this.chart,a=A.chartArea,b=A.options.animation,B=(a.left+a.right)/2,I=(a.top+a.bottom)/2,P=u&&b.animateScale,F=P?0:this.innerRadius,Q=P?0:this.outerRadius,{sharedOptions:R,includeOptions:H}=this._getSharedOptions(i,o);let j=this._getRotation(),V;for(V=0;V<i;++V)j+=this._circumference(V,u);for(V=i;V<i+n;++V){const W=this._circumference(V,u),ne=e[V],te={x:B+this.offsetX,y:I+this.offsetY,startAngle:j,endAngle:j+W,circumference:W,outerRadius:Q,innerRadius:F};H&&(te.options=R||this.resolveDataElementOptions(V,ne.active?"active":o)),j+=W,this.updateElement(ne,V,te,o)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let n=0,o;for(o=0;o<i.length;o++){const u=e._parsed[o];u!==null&&!isNaN(u)&&this.chart.getDataVisibility(o)&&!i[o].hidden&&(n+=Math.abs(u))}return n}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?xa*(Math.abs(e)/i):0}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart,o=n.data.labels||[],u=Qb(i._parsed[e],n.options.locale);return{label:o[e]||"",value:u}}getMaxBorderWidth(e){let i=0;const n=this.chart;let o,u,A,a,g;if(!e){for(o=0,u=n.data.datasets.length;o<u;++o)if(n.isDatasetVisible(o)){A=n.getDatasetMeta(o),e=A.data,a=A.controller;break}}if(!e)return 0;for(o=0,u=e.length;o<u;++o)g=a.resolveDataElementOptions(o),g.borderAlign!=="inner"&&(i=Math.max(i,g.borderWidth||0,g.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let n=0,o=e.length;n<o;++n){const u=this.resolveDataElementOptions(n);i=Math.max(i,u.offset||0,u.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(e){return Math.max(Jn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class QP extends p1{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:n,data:o=[],_dataset:u}=i,A=this.chart._animationsDisabled;let{start:a,count:g}=hL(i,o,A);this._drawStart=a,this._drawCount=g,dL(i)&&(a=0,g=o.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!u._decimated,n.points=o;const b=this.resolveDatasetElementOptions(e);this.options.showLine||(b.borderWidth=0),b.segment=this.options.segment,this.updateElement(n,void 0,{animated:!A,options:b},e),this.updateElements(o,a,g,e)}updateElements(e,i,n,o){const u=o==="reset",{iScale:A,vScale:a,_stacked:g,_dataset:b}=this._cachedMeta,{sharedOptions:B,includeOptions:I}=this._getSharedOptions(i,o),P=A.axis,F=a.axis,{spanGaps:Q,segment:R}=this.options,H=u0(Q)?Q:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||u||o==="none",V=i+n,W=e.length;let ne=i>0&&this.getParsed(i-1);for(let te=0;te<W;++te){const de=e[te],ee=j?de:{};if(te<i||te>=V){ee.skip=!0;continue}const re=this.getParsed(te),xe=ns(re[F]),Be=ee[P]=A.getPixelForValue(re[P],te),se=ee[F]=u||xe?a.getBasePixel():a.getPixelForValue(g?this.applyStack(a,re,g):re[F],te);ee.skip=isNaN(Be)||isNaN(se)||xe,ee.stop=te>0&&Math.abs(re[P]-ne[P])>H,R&&(ee.parsed=re,ee.raw=b.data[te]),I&&(ee.options=B||this.resolveDataElementOptions(te,de.active?"active":o)),j||this.updateElement(de,te,ee,o),ne=re}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,n=i.options&&i.options.borderWidth||0,o=e.data||[];if(!o.length)return n;const u=o[0].size(this.resolveDataElementOptions(0)),A=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(n,u,A)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Lf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Wb{static override(e){Object.assign(Wb.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Lf()}parse(){return Lf()}format(){return Lf()}add(){return Lf()}diff(){return Lf()}startOf(){return Lf()}endOf(){return Lf()}}var zP={_date:Wb};function HP(t,e,i,n){const{controller:o,data:u,_sorted:A}=t,a=o._cachedMeta.iScale,g=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&A&&u.length){const b=a._reversePixels?oL:Of;if(n){if(o._sharedOptions){const B=u[0],I=typeof B.getRange=="function"&&B.getRange(e);if(I){const P=b(u,e,i-I),F=b(u,e,i+I);return{lo:P.lo,hi:F.hi}}}}else{const B=b(u,e,i);if(g){const{vScale:I}=o._cachedMeta,{_parsed:P}=t,F=P.slice(0,B.lo+1).reverse().findIndex(R=>!ns(R[I.axis]));B.lo-=Math.max(0,F);const Q=P.slice(B.hi).findIndex(R=>!ns(R[I.axis]));B.hi+=Math.max(0,Q)}return B}}return{lo:0,hi:u.length-1}}function m1(t,e,i,n,o){const u=t.getSortedVisibleDatasetMetas(),A=i[e];for(let a=0,g=u.length;a<g;++a){const{index:b,data:B}=u[a],{lo:I,hi:P}=HP(u[a],e,A,o);for(let F=I;F<=P;++F){const Q=B[F];Q.skip||n(Q,b,F)}}}function VP(t){const e=t.indexOf("x")!==-1,i=t.indexOf("y")!==-1;return function(n,o){const u=e?Math.abs(n.x-o.x):0,A=i?Math.abs(n.y-o.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(A,2))}}function v_(t,e,i,n,o){const u=[];return!o&&!t.isPointInArea(e)||m1(t,i,e,function(a,g,b){!o&&!h0(a,t.chartArea,0)||a.inRange(e.x,e.y,n)&&u.push({element:a,datasetIndex:g,index:b})},!0),u}function qP(t,e,i,n){let o=[];function u(A,a,g){const{startAngle:b,endAngle:B}=A.getProps(["startAngle","endAngle"],n),{angle:I}=B4(A,{x:e.x,y:e.y});A0(I,b,B)&&o.push({element:A,datasetIndex:a,index:g})}return m1(t,i,e,u),o}function GP(t,e,i,n,o,u){let A=[];const a=VP(i);let g=Number.POSITIVE_INFINITY;function b(B,I,P){const F=B.inRange(e.x,e.y,o);if(n&&!F)return;const Q=B.getCenterPoint(o);if(!(!!u||t.isPointInArea(Q))&&!F)return;const H=a(e,Q);H<g?(A=[{element:B,datasetIndex:I,index:P}],g=H):H===g&&A.push({element:B,datasetIndex:I,index:P})}return m1(t,i,e,b),A}function __(t,e,i,n,o,u){return!u&&!t.isPointInArea(e)?[]:i==="r"&&!n?qP(t,e,i,o):GP(t,e,i,n,o,u)}function Rw(t,e,i,n,o){const u=[],A=i==="x"?"inXRange":"inYRange";let a=!1;return m1(t,i,e,(g,b,B)=>{g[A]&&g[A](e[i],o)&&(u.push({element:g,datasetIndex:b,index:B}),a=a||g.inRange(e.x,e.y,o))}),n&&!a?[]:u}var KP={modes:{index(t,e,i,n){const o=kf(e,t),u=i.axis||"x",A=i.includeInvisible||!1,a=i.intersect?v_(t,o,u,n,A):__(t,o,u,!1,n,A),g=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(b=>{const B=a[0].index,I=b.data[B];I&&!I.skip&&g.push({element:I,datasetIndex:b.index,index:B})}),g):[]},dataset(t,e,i,n){const o=kf(e,t),u=i.axis||"xy",A=i.includeInvisible||!1;let a=i.intersect?v_(t,o,u,n,A):__(t,o,u,!1,n,A);if(a.length>0){const g=a[0].datasetIndex,b=t.getDatasetMeta(g).data;a=[];for(let B=0;B<b.length;++B)a.push({element:b[B],datasetIndex:g,index:B})}return a},point(t,e,i,n){const o=kf(e,t),u=i.axis||"xy",A=i.includeInvisible||!1;return v_(t,o,u,n,A)},nearest(t,e,i,n){const o=kf(e,t),u=i.axis||"xy",A=i.includeInvisible||!1;return __(t,o,u,i.intersect,n,A)},x(t,e,i,n){const o=kf(e,t);return Rw(t,o,"x",i.intersect,n)},y(t,e,i,n){const o=kf(e,t);return Rw(t,o,"y",i.intersect,n)}}};const G4=["left","top","right","bottom"];function vg(t,e){return t.filter(i=>i.pos===e)}function Ow(t,e){return t.filter(i=>G4.indexOf(i.pos)===-1&&i.box.axis===e)}function _g(t,e){return t.sort((i,n)=>{const o=e?n:i,u=e?i:n;return o.weight===u.weight?o.index-u.index:o.weight-u.weight})}function WP(t){const e=[];let i,n,o,u,A,a;for(i=0,n=(t||[]).length;i<n;++i)o=t[i],{position:u,options:{stack:A,stackWeight:a=1}}=o,e.push({index:i,box:o,pos:u,horizontal:o.isHorizontal(),weight:o.weight,stack:A&&u+A,stackWeight:a});return e}function $P(t){const e={};for(const i of t){const{stack:n,pos:o,stackWeight:u}=i;if(!n||!G4.includes(o))continue;const A=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});A.count++,A.weight+=u}return e}function ZP(t,e){const i=$P(t),{vBoxMaxWidth:n,hBoxMaxHeight:o}=e;let u,A,a;for(u=0,A=t.length;u<A;++u){a=t[u];const{fullSize:g}=a.box,b=i[a.stack],B=b&&a.stackWeight/b.weight;a.horizontal?(a.width=B?B*n:g&&e.availableWidth,a.height=o):(a.width=n,a.height=B?B*o:g&&e.availableHeight)}return i}function XP(t){const e=WP(t),i=_g(e.filter(b=>b.box.fullSize),!0),n=_g(vg(e,"left"),!0),o=_g(vg(e,"right")),u=_g(vg(e,"top"),!0),A=_g(vg(e,"bottom")),a=Ow(e,"x"),g=Ow(e,"y");return{fullSize:i,leftAndTop:n.concat(u),rightAndBottom:o.concat(g).concat(A).concat(a),chartArea:vg(e,"chartArea"),vertical:n.concat(o).concat(g),horizontal:u.concat(A).concat(a)}}function Qw(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function K4(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function YP(t,e,i,n){const{pos:o,box:u}=i,A=t.maxPadding;if(!gr(o)){i.size&&(t[o]-=i.size);const I=n[i.stack]||{size:0,count:1};I.size=Math.max(I.size,i.horizontal?u.height:u.width),i.size=I.size/I.count,t[o]+=i.size}u.getPadding&&K4(A,u.getPadding());const a=Math.max(0,e.outerWidth-Qw(A,t,"left","right")),g=Math.max(0,e.outerHeight-Qw(A,t,"top","bottom")),b=a!==t.w,B=g!==t.h;return t.w=a,t.h=g,i.horizontal?{same:b,other:B}:{same:B,other:b}}function JP(t){const e=t.maxPadding;function i(n){const o=Math.max(e[n]-t[n],0);return t[n]+=o,o}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}function ek(t,e){const i=e.maxPadding;function n(o){const u={left:0,top:0,right:0,bottom:0};return o.forEach(A=>{u[A]=Math.max(e[A],i[A])}),u}return n(t?["left","right"]:["top","bottom"])}function Lg(t,e,i,n){const o=[];let u,A,a,g,b,B;for(u=0,A=t.length,b=0;u<A;++u){a=t[u],g=a.box,g.update(a.width||e.w,a.height||e.h,ek(a.horizontal,e));const{same:I,other:P}=YP(e,i,a,n);b|=I&&o.length,B=B||P,g.fullSize||o.push(a)}return b&&Lg(o,e,i,n)||B}function My(t,e,i,n,o){t.top=i,t.left=e,t.right=e+n,t.bottom=i+o,t.width=n,t.height=o}function zw(t,e,i,n){const o=i.padding;let{x:u,y:A}=e;for(const a of t){const g=a.box,b=n[a.stack]||{placed:0,weight:1},B=a.stackWeight/b.weight||1;if(a.horizontal){const I=e.w*B,P=b.size||g.height;c0(b.start)&&(A=b.start),g.fullSize?My(g,o.left,A,i.outerWidth-o.right-o.left,P):My(g,e.left+b.placed,A,I,P),b.start=A,b.placed+=I,A=g.bottom}else{const I=e.h*B,P=b.size||g.width;c0(b.start)&&(u=b.start),g.fullSize?My(g,u,o.top,P,i.outerHeight-o.bottom-o.top):My(g,u,e.top+b.placed,P,I),b.start=u,b.placed+=I,u=g.right}}e.x=u,e.y=A}var hA={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(i){e.draw(i)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;i!==-1&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const o=mA(t.options.layout.padding),u=Math.max(e-o.width,0),A=Math.max(i-o.height,0),a=XP(t.boxes),g=a.vertical,b=a.horizontal;us(t.boxes,R=>{typeof R.beforeLayout=="function"&&R.beforeLayout()});const B=g.reduce((R,H)=>H.box.options&&H.box.options.display===!1?R:R+1,0)||1,I=Object.freeze({outerWidth:e,outerHeight:i,padding:o,availableWidth:u,availableHeight:A,vBoxMaxWidth:u/2/B,hBoxMaxHeight:A/2}),P=Object.assign({},o);K4(P,mA(n));const F=Object.assign({maxPadding:P,w:u,h:A,x:o.left,y:o.top},o),Q=ZP(g.concat(b),I);Lg(a.fullSize,F,I,Q),Lg(g,F,I,Q),Lg(b,F,I,Q)&&Lg(g,F,I,Q),JP(F),zw(a.leftAndTop,F,I,Q),F.x+=F.w,F.y+=F.h,zw(a.rightAndBottom,F,I,Q),t.chartArea={left:F.left,top:F.top,right:F.left+F.w,bottom:F.top+F.h,height:F.h,width:F.w},us(a.chartArea,R=>{const H=R.box;Object.assign(H,t.chartArea),H.update(F.w,F.h,{left:0,top:0,right:0,bottom:0})})}};class W4{acquireContext(e,i){}releaseContext(e){return!1}addEventListener(e,i,n){}removeEventListener(e,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,i,n,o){return i=Math.max(0,i||e.width),n=n||e.height,{width:i,height:Math.max(0,o?Math.floor(i/o):n)}}isAttached(e){return!0}updateConfig(e){}}class tk extends W4{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _v="$chartjs",ik={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Hw=t=>t===null||t==="";function nk(t,e){const i=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t[_v]={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Hw(o)){const u=Sw(t,"width");u!==void 0&&(t.width=u)}if(Hw(n))if(t.style.height==="")t.height=t.width/(e||2);else{const u=Sw(t,"height");u!==void 0&&(t.height=u)}return t}const $4=iP?{passive:!0}:!1;function rk(t,e,i){t&&t.addEventListener(e,i,$4)}function sk(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,$4)}function ak(t,e){const i=ik[t.type]||t.type,{x:n,y:o}=kf(t,e);return{type:i,chart:e,native:t,x:n!==void 0?n:null,y:o!==void 0?o:null}}function Dv(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function ok(t,e,i){const n=t.canvas,o=new MutationObserver(u=>{let A=!1;for(const a of u)A=A||Dv(a.addedNodes,n),A=A&&!Dv(a.removedNodes,n);A&&i()});return o.observe(document,{childList:!0,subtree:!0}),o}function lk(t,e,i){const n=t.canvas,o=new MutationObserver(u=>{let A=!1;for(const a of u)A=A||Dv(a.removedNodes,n),A=A&&!Dv(a.addedNodes,n);A&&i()});return o.observe(document,{childList:!0,subtree:!0}),o}const f0=new Map;let Vw=0;function Z4(){const t=window.devicePixelRatio;t!==Vw&&(Vw=t,f0.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function ck(t,e){f0.size||window.addEventListener("resize",Z4),f0.set(t,e)}function uk(t){f0.delete(t),f0.size||window.removeEventListener("resize",Z4)}function Ak(t,e,i){const n=t.canvas,o=n&&Kb(n);if(!o)return;const u=T4((a,g)=>{const b=o.clientWidth;i(a,g),b<o.clientWidth&&i()},window),A=new ResizeObserver(a=>{const g=a[0],b=g.contentRect.width,B=g.contentRect.height;b===0&&B===0||u(b,B)});return A.observe(o),ck(t,u),A}function x_(t,e,i){i&&i.disconnect(),e==="resize"&&uk(t)}function hk(t,e,i){const n=t.canvas,o=T4(u=>{t.ctx!==null&&i(ak(u,t))},t);return rk(n,e,o),o}class dk extends W4{acquireContext(e,i){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(nk(e,i),n):null}releaseContext(e){const i=e.canvas;if(!i[_v])return!1;const n=i[_v].initial;["height","width"].forEach(u=>{const A=n[u];ns(A)?i.removeAttribute(u):i.setAttribute(u,A)});const o=n.style||{};return Object.keys(o).forEach(u=>{i.style[u]=o[u]}),i.width=i.width,delete i[_v],!0}addEventListener(e,i,n){this.removeEventListener(e,i);const o=e.$proxies||(e.$proxies={}),A={attach:ok,detach:lk,resize:Ak}[i]||hk;o[i]=A(e,i,n)}removeEventListener(e,i){const n=e.$proxies||(e.$proxies={}),o=n[i];if(!o)return;({attach:x_,detach:x_,resize:x_}[i]||sk)(e,i,o),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,i,n,o){return tP(e,i,n,o)}isAttached(e){const i=e&&Kb(e);return!!(i&&i.isConnected)}}function fk(t){return!Gb()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?tk:dk}class ud{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}hasValue(){return u0(this.x)&&u0(this.y)}getProps(e,i){const n=this.$animations;if(!i||!n)return this;const o={};return e.forEach(u=>{o[u]=n[u]&&n[u].active()?n[u]._to:this[u]}),o}}function pk(t,e){const i=t.options.ticks,n=mk(t),o=Math.min(i.maxTicksLimit||n,n),u=i.major.enabled?yk(e):[],A=u.length,a=u[0],g=u[A-1],b=[];if(A>o)return vk(e,b,u,A/o),b;const B=gk(u,e,o);if(A>0){let I,P;const F=A>1?Math.round((g-a)/(A-1)):null;for(Iy(e,b,B,ns(F)?0:a-F,a),I=0,P=A-1;I<P;I++)Iy(e,b,B,u[I],u[I+1]);return Iy(e,b,B,g,ns(F)?e.length:g+F),b}return Iy(e,b,B),b}function mk(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),o=t._maxLength/i;return Math.floor(Math.min(n,o))}function gk(t,e,i){const n=_k(t),o=e.length/i;if(!n)return Math.max(o,1);const u=eL(n);for(let A=0,a=u.length-1;A<a;A++){const g=u[A];if(g>o)return g}return Math.max(o,1)}function yk(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}function vk(t,e,i,n){let o=0,u=i[0],A;for(n=Math.ceil(n),A=0;A<t.length;A++)A===u&&(e.push(t[A]),o++,u=i[o*n])}function Iy(t,e,i,n,o){const u=Jn(n,0),A=Math.min(Jn(o,t.length),t.length);let a=0,g,b,B;for(i=Math.ceil(i),o&&(g=o-n,i=g/Math.floor(g/i)),B=u;B<0;)a++,B=Math.round(u+a*i);for(b=Math.max(u,0);b<A;b++)b===B&&(e.push(t[b]),a++,B=Math.round(u+a*i))}function _k(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}const xk=t=>t==="left"?"right":t==="right"?"left":t,qw=(t,e,i)=>e==="top"||e==="left"?t[e]+i:t[e]-i,Gw=(t,e)=>Math.min(e||t,t);function Kw(t,e){const i=[],n=t.length/e,o=t.length;let u=0;for(;u<o;u+=n)i.push(t[Math.floor(u)]);return i}function bk(t,e,i){const n=t.ticks.length,o=Math.min(e,n-1),u=t._startPixel,A=t._endPixel,a=1e-6;let g=t.getPixelForTick(o),b;if(!(i&&(n===1?b=Math.max(g-u,A-g):e===0?b=(t.getPixelForTick(1)-g)/2:b=(g-t.getPixelForTick(o-1))/2,g+=o<e?b:-b,g<u-a||g>A+a)))return g}function wk(t,e){us(t,i=>{const n=i.gc,o=n.length/2;let u;if(o>e){for(u=0;u<o;++u)delete i.data[n[u]];n.splice(0,o)}})}function xg(t){return t.drawTicks?t.tickLength:0}function Ww(t,e){if(!t.display)return 0;const i=yc(t.font,e),n=mA(t.padding);return(go(t.text)?t.text.length:1)*i.lineHeight+n.height}function Bk(t,e){return ip(t,{scale:e,type:"scale"})}function Ck(t,e,i){return ip(t,{tick:i,index:e,type:"tick"})}function Sk(t,e,i){let n=Rb(t);return(i&&e!=="right"||!i&&e==="right")&&(n=xk(n)),n}function Ek(t,e,i,n){const{top:o,left:u,bottom:A,right:a,chart:g}=t,{chartArea:b,scales:B}=g;let I=0,P,F,Q;const R=A-o,H=a-u;if(t.isHorizontal()){if(F=dc(n,u,a),gr(i)){const j=Object.keys(i)[0],V=i[j];Q=B[j].getPixelForValue(V)+R-e}else i==="center"?Q=(b.bottom+b.top)/2+R-e:Q=qw(t,i,e);P=a-u}else{if(gr(i)){const j=Object.keys(i)[0],V=i[j];F=B[j].getPixelForValue(V)-H+e}else i==="center"?F=(b.left+b.right)/2-H+e:F=qw(t,i,e);Q=dc(n,A,o),I=i==="left"?-Qo:Qo}return{titleX:F,titleY:Q,maxWidth:P,rotation:I}}class bm extends ud{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,i){return e}getUserBounds(){let{_userMin:e,_userMax:i,_suggestedMin:n,_suggestedMax:o}=this;return e=mh(e,Number.POSITIVE_INFINITY),i=mh(i,Number.NEGATIVE_INFINITY),n=mh(n,Number.POSITIVE_INFINITY),o=mh(o,Number.NEGATIVE_INFINITY),{min:mh(e,n),max:mh(i,o),minDefined:vc(e),maxDefined:vc(i)}}getMinMax(e){let{min:i,max:n,minDefined:o,maxDefined:u}=this.getUserBounds(),A;if(o&&u)return{min:i,max:n};const a=this.getMatchingVisibleMetas();for(let g=0,b=a.length;g<b;++g)A=a[g].controller.getMinMax(this,e),o||(i=Math.min(i,A.min)),u||(n=Math.max(n,A.max));return i=u&&i>n?n:i,n=o&&i>n?i:n,{min:mh(i,mh(n,i)),max:mh(n,mh(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ys(this.options.beforeUpdate,[this])}update(e,i,n){const{beginAtZero:o,grace:u,ticks:A}=this.options,a=A.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=LL(this,u,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const g=a<this.ticks.length;this._convertTicksToLabels(g?Kw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),A.display&&(A.autoSkip||A.source==="auto")&&(this.ticks=pk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),g&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,e=!e),this._startPixel=i,this._endPixel=n,this._reversePixels=e,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ys(this.options.afterUpdate,[this])}beforeSetDimensions(){Ys(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ys(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ys(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ys(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const i=this.options.ticks;let n,o,u;for(n=0,o=e.length;n<o;n++)u=e[n],u.label=Ys(i.callback,[u.value,n,e],this)}afterTickToLabelConversion(){Ys(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ys(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,i=e.ticks,n=Gw(this.ticks.length,e.ticks.maxTicksLimit),o=i.minRotation||0,u=i.maxRotation;let A=o,a,g,b;if(!this._isVisible()||!i.display||o>=u||n<=1||!this.isHorizontal()){this.labelRotation=o;return}const B=this._getLabelSizes(),I=B.widest.width,P=B.highest.height,F=gc(this.chart.width-I,0,this.maxWidth);a=e.offset?this.maxWidth/n:F/(n-1),I+6>a&&(a=F/(n-(e.offset?.5:1)),g=this.maxHeight-xg(e.grid)-i.padding-Ww(e.title,this.chart.options.font),b=Math.sqrt(I*I+P*P),A=rL(Math.min(Math.asin(gc((B.highest.height+6)/a,-1,1)),Math.asin(gc(g/b,-1,1))-Math.asin(gc(P/b,-1,1)))),A=Math.max(o,Math.min(u,A))),this.labelRotation=A}afterCalculateLabelRotation(){Ys(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ys(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:i,options:{ticks:n,title:o,grid:u}}=this,A=this._isVisible(),a=this.isHorizontal();if(A){const g=Ww(o,i.options.font);if(a?(e.width=this.maxWidth,e.height=xg(u)+g):(e.height=this.maxHeight,e.width=xg(u)+g),n.display&&this.ticks.length){const{first:b,last:B,widest:I,highest:P}=this._getLabelSizes(),F=n.padding*2,Q=id(this.labelRotation),R=Math.cos(Q),H=Math.sin(Q);if(a){const j=n.mirror?0:H*I.width+R*P.height;e.height=Math.min(this.maxHeight,e.height+j+F)}else{const j=n.mirror?0:R*I.width+H*P.height;e.width=Math.min(this.maxWidth,e.width+j+F)}this._calculatePadding(b,B,H,R)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,i,n,o){const{ticks:{align:u,padding:A},position:a}=this.options,g=this.labelRotation!==0,b=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const B=this.getPixelForTick(0)-this.left,I=this.right-this.getPixelForTick(this.ticks.length-1);let P=0,F=0;g?b?(P=o*e.width,F=n*i.height):(P=n*e.height,F=o*i.width):u==="start"?F=i.width:u==="end"?P=e.width:u!=="inner"&&(P=e.width/2,F=i.width/2),this.paddingLeft=Math.max((P-B+A)*this.width/(this.width-B),0),this.paddingRight=Math.max((F-I+A)*this.width/(this.width-I),0)}else{let B=i.height/2,I=e.height/2;u==="start"?(B=0,I=e.height):u==="end"&&(B=i.height,I=0),this.paddingTop=B+A,this.paddingBottom=I+A}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ys(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:i}=this.options;return i==="top"||i==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let i,n;for(i=0,n=e.length;i<n;i++)ns(e[i].label)&&(e.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=Kw(n,i)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,i,n){const{ctx:o,_longestTextCache:u}=this,A=[],a=[],g=Math.floor(i/Gw(i,n));let b=0,B=0,I,P,F,Q,R,H,j,V,W,ne,te;for(I=0;I<i;I+=g){if(Q=e[I].label,R=this._resolveTickFontOptions(I),o.font=H=R.string,j=u[H]=u[H]||{data:{},gc:[]},V=R.lineHeight,W=ne=0,!ns(Q)&&!go(Q))W=xw(o,j.data,j.gc,W,Q),ne=V;else if(go(Q))for(P=0,F=Q.length;P<F;++P)te=Q[P],!ns(te)&&!go(te)&&(W=xw(o,j.data,j.gc,W,te),ne+=V);A.push(W),a.push(ne),b=Math.max(W,b),B=Math.max(ne,B)}wk(u,i);const de=A.indexOf(b),ee=a.indexOf(B),re=xe=>({width:A[xe]||0,height:a[xe]||0});return{first:re(0),last:re(i-1),widest:re(de),highest:re(ee),widths:A,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,i){return NaN}getValueForPixel(e){}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const i=this._startPixel+e*this._length;return aL(this._alignToPixels?If(this.chart,i,0):i)}getDecimalForPixel(e){const i=(e-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:i}=this;return e<0&&i<0?i:e>0&&i>0?e:0}getContext(e){const i=this.ticks||[];if(e>=0&&e<i.length){const n=i[e];return n.$context||(n.$context=Ck(this.getContext(),e,n))}return this.$context||(this.$context=Bk(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,i=id(this.labelRotation),n=Math.abs(Math.cos(i)),o=Math.abs(Math.sin(i)),u=this._getLabelSizes(),A=e.autoSkipPadding||0,a=u?u.widest.width+A:0,g=u?u.highest.height+A:0;return this.isHorizontal()?g*n>a*o?a/n:g/o:g*o<a*n?g/n:a/o}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const i=this.axis,n=this.chart,o=this.options,{grid:u,position:A,border:a}=o,g=u.offset,b=this.isHorizontal(),I=this.ticks.length+(g?1:0),P=xg(u),F=[],Q=a.setContext(this.getContext()),R=Q.display?Q.width:0,H=R/2,j=function(ue){return If(n,ue,R)};let V,W,ne,te,de,ee,re,xe,Be,se,ae,ce;if(A==="top")V=j(this.bottom),ee=this.bottom-P,xe=V-H,se=j(e.top)+H,ce=e.bottom;else if(A==="bottom")V=j(this.top),se=e.top,ce=j(e.bottom)-H,ee=V+H,xe=this.top+P;else if(A==="left")V=j(this.right),de=this.right-P,re=V-H,Be=j(e.left)+H,ae=e.right;else if(A==="right")V=j(this.left),Be=e.left,ae=j(e.right)-H,de=V+H,re=this.left+P;else if(i==="x"){if(A==="center")V=j((e.top+e.bottom)/2+.5);else if(gr(A)){const ue=Object.keys(A)[0],fe=A[ue];V=j(this.chart.scales[ue].getPixelForValue(fe))}se=e.top,ce=e.bottom,ee=V+H,xe=ee+P}else if(i==="y"){if(A==="center")V=j((e.left+e.right)/2);else if(gr(A)){const ue=Object.keys(A)[0],fe=A[ue];V=j(this.chart.scales[ue].getPixelForValue(fe))}de=V-H,re=de-P,Be=e.left,ae=e.right}const Ee=Jn(o.ticks.maxTicksLimit,I),Ve=Math.max(1,Math.ceil(I/Ee));for(W=0;W<I;W+=Ve){const ue=this.getContext(W),fe=u.setContext(ue),Ue=a.setContext(ue),ke=fe.lineWidth,pe=fe.color,Qe=Ue.dash||[],J=Ue.dashOffset,me=fe.tickWidth,Fe=fe.tickColor,ze=fe.tickBorderDash||[],Ke=fe.tickBorderDashOffset;ne=bk(this,W,g),ne!==void 0&&(te=If(n,ne,ke),b?de=re=Be=ae=te:ee=xe=se=ce=te,F.push({tx1:de,ty1:ee,tx2:re,ty2:xe,x1:Be,y1:se,x2:ae,y2:ce,width:ke,color:pe,borderDash:Qe,borderDashOffset:J,tickWidth:me,tickColor:Fe,tickBorderDash:ze,tickBorderDashOffset:Ke}))}return this._ticksLength=I,this._borderValue=V,F}_computeLabelItems(e){const i=this.axis,n=this.options,{position:o,ticks:u}=n,A=this.isHorizontal(),a=this.ticks,{align:g,crossAlign:b,padding:B,mirror:I}=u,P=xg(n.grid),F=P+B,Q=I?-B:F,R=-id(this.labelRotation),H=[];let j,V,W,ne,te,de,ee,re,xe,Be,se,ae,ce="middle";if(o==="top")de=this.bottom-Q,ee=this._getXAxisLabelAlignment();else if(o==="bottom")de=this.top+Q,ee=this._getXAxisLabelAlignment();else if(o==="left"){const Ve=this._getYAxisLabelAlignment(P);ee=Ve.textAlign,te=Ve.x}else if(o==="right"){const Ve=this._getYAxisLabelAlignment(P);ee=Ve.textAlign,te=Ve.x}else if(i==="x"){if(o==="center")de=(e.top+e.bottom)/2+F;else if(gr(o)){const Ve=Object.keys(o)[0],ue=o[Ve];de=this.chart.scales[Ve].getPixelForValue(ue)+F}ee=this._getXAxisLabelAlignment()}else if(i==="y"){if(o==="center")te=(e.left+e.right)/2-F;else if(gr(o)){const Ve=Object.keys(o)[0],ue=o[Ve];te=this.chart.scales[Ve].getPixelForValue(ue)}ee=this._getYAxisLabelAlignment(P).textAlign}i==="y"&&(g==="start"?ce="top":g==="end"&&(ce="bottom"));const Ee=this._getLabelSizes();for(j=0,V=a.length;j<V;++j){W=a[j],ne=W.label;const Ve=u.setContext(this.getContext(j));re=this.getPixelForTick(j)+u.labelOffset,xe=this._resolveTickFontOptions(j),Be=xe.lineHeight,se=go(ne)?ne.length:1;const ue=se/2,fe=Ve.color,Ue=Ve.textStrokeColor,ke=Ve.textStrokeWidth;let pe=ee;A?(te=re,ee==="inner"&&(j===V-1?pe=this.options.reverse?"left":"right":j===0?pe=this.options.reverse?"right":"left":pe="center"),o==="top"?b==="near"||R!==0?ae=-se*Be+Be/2:b==="center"?ae=-Ee.highest.height/2-ue*Be+Be:ae=-Ee.highest.height+Be/2:b==="near"||R!==0?ae=Be/2:b==="center"?ae=Ee.highest.height/2-ue*Be:ae=Ee.highest.height-se*Be,I&&(ae*=-1),R!==0&&!Ve.showLabelBackdrop&&(te+=Be/2*Math.sin(R))):(de=re,ae=(1-se)*Be/2);let Qe;if(Ve.showLabelBackdrop){const J=mA(Ve.backdropPadding),me=Ee.heights[j],Fe=Ee.widths[j];let ze=ae-J.top,Ke=0-J.left;switch(ce){case"middle":ze-=me/2;break;case"bottom":ze-=me;break}switch(ee){case"center":Ke-=Fe/2;break;case"right":Ke-=Fe;break;case"inner":j===V-1?Ke-=Fe:j>0&&(Ke-=Fe/2);break}Qe={left:Ke,top:ze,width:Fe+J.width,height:me+J.height,color:Ve.backdropColor}}H.push({label:ne,font:xe,textOffset:ae,options:{rotation:R,color:fe,strokeColor:Ue,strokeWidth:ke,textAlign:pe,textBaseline:ce,translation:[te,de],backdrop:Qe}})}return H}_getXAxisLabelAlignment(){const{position:e,ticks:i}=this.options;if(-id(this.labelRotation))return e==="top"?"left":"right";let o="center";return i.align==="start"?o="left":i.align==="end"?o="right":i.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(e){const{position:i,ticks:{crossAlign:n,mirror:o,padding:u}}=this.options,A=this._getLabelSizes(),a=e+u,g=A.widest.width;let b,B;return i==="left"?o?(B=this.right+u,n==="near"?b="left":n==="center"?(b="center",B+=g/2):(b="right",B+=g)):(B=this.right-a,n==="near"?b="right":n==="center"?(b="center",B-=g/2):(b="left",B=this.left)):i==="right"?o?(B=this.left+u,n==="near"?b="right":n==="center"?(b="center",B-=g/2):(b="left",B-=g)):(B=this.left+a,n==="near"?b="left":n==="center"?(b="center",B+=g/2):(b="right",B=this.right)):b="right",{textAlign:b,x:B}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:i},left:n,top:o,width:u,height:A}=this;i&&(e.save(),e.fillStyle=i,e.fillRect(n,o,u,A),e.restore())}getLineWidthForValue(e){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const o=this.ticks.findIndex(u=>u.value===e);return o>=0?i.setContext(this.getContext(o)).lineWidth:0}drawGrid(e){const i=this.options.grid,n=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let u,A;const a=(g,b,B)=>{!B.width||!B.color||(n.save(),n.lineWidth=B.width,n.strokeStyle=B.color,n.setLineDash(B.borderDash||[]),n.lineDashOffset=B.borderDashOffset,n.beginPath(),n.moveTo(g.x,g.y),n.lineTo(b.x,b.y),n.stroke(),n.restore())};if(i.display)for(u=0,A=o.length;u<A;++u){const g=o[u];i.drawOnChartArea&&a({x:g.x1,y:g.y1},{x:g.x2,y:g.y2},g),i.drawTicks&&a({x:g.tx1,y:g.ty1},{x:g.tx2,y:g.ty2},{color:g.tickColor,width:g.tickWidth,borderDash:g.tickBorderDash,borderDashOffset:g.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:i,options:{border:n,grid:o}}=this,u=n.setContext(this.getContext()),A=n.display?u.width:0;if(!A)return;const a=o.setContext(this.getContext(0)).lineWidth,g=this._borderValue;let b,B,I,P;this.isHorizontal()?(b=If(e,this.left,A)-A/2,B=If(e,this.right,a)+a/2,I=P=g):(I=If(e,this.top,A)-A/2,P=If(e,this.bottom,a)+a/2,b=B=g),i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.beginPath(),i.moveTo(b,I),i.lineTo(B,P),i.stroke(),i.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,o=this._computeLabelArea();o&&h1(n,o);const u=this.getLabelItems(e);for(const A of u){const a=A.options,g=A.font,b=A.label,B=A.textOffset;d0(n,b,0,B,g,a)}o&&d1(n)}drawTitle(){const{ctx:e,options:{position:i,title:n,reverse:o}}=this;if(!n.display)return;const u=yc(n.font),A=mA(n.padding),a=n.align;let g=u.lineHeight/2;i==="bottom"||i==="center"||gr(i)?(g+=A.bottom,go(n.text)&&(g+=u.lineHeight*(n.text.length-1))):g+=A.top;const{titleX:b,titleY:B,maxWidth:I,rotation:P}=Ek(this,g,i,a);d0(e,n.text,0,0,u,{color:n.color,maxWidth:I,rotation:P,textAlign:Sk(a,i,o),textBaseline:"middle",translation:[b,B]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,i=e.ticks&&e.ticks.z||0,n=Jn(e.grid&&e.grid.z,-1),o=Jn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==bm.prototype.draw?[{z:i,draw:u=>{this.draw(u)}}]:[{z:n,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:i,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(e){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",o=[];let u,A;for(u=0,A=i.length;u<A;++u){const a=i[u];a[n]===this.id&&(!e||a.type===e)&&o.push(a)}return o}_resolveTickFontOptions(e){const i=this.options.ticks.setContext(this.getContext(e));return yc(i.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ly{constructor(e,i,n){this.type=e,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const i=Object.getPrototypeOf(e);let n;Nk(i)&&(n=this.register(i));const o=this.items,u=e.id,A=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+e);return u in o||(o[u]=e,Tk(e,A,n),this.override&&Za.override(e.id,e.overrides)),A}get(e){return this.items[e]}unregister(e){const i=this.items,n=e.id,o=this.scope;n in i&&delete i[n],o&&n in Za[o]&&(delete Za[o][n],this.override&&delete tp[n])}}function Tk(t,e,i){const n=l0(Object.create(null),[i?Za.get(i):{},Za.get(e),t.defaults]);Za.set(e,n),t.defaultRoutes&&Fk(e,t.defaultRoutes),t.descriptors&&Za.describe(e,t.descriptors)}function Fk(t,e){Object.keys(e).forEach(i=>{const n=i.split("."),o=n.pop(),u=[t].concat(n).join("."),A=e[i].split("."),a=A.pop(),g=A.join(".");Za.route(u,o,g,a)})}function Nk(t){return"id"in t&&"defaults"in t}class Mk{constructor(){this.controllers=new Ly(p1,"datasets",!0),this.elements=new Ly(ud,"elements"),this.plugins=new Ly(Object,"plugins"),this.scales=new Ly(bm,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,i,n){[...i].forEach(o=>{const u=n||this._getRegistryForType(o);n||u.isForType(o)||u===this.plugins&&o.id?this._exec(e,u,o):us(o,A=>{const a=n||this._getRegistryForType(A);this._exec(e,a,A)})})}_exec(e,i,n){const o=Ub(e);Ys(n["before"+o],[],n),i[e](n),Ys(n["after"+o],[],n)}_getRegistryForType(e){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(e))return n}return this.plugins}_get(e,i,n){const o=i.get(e);if(o===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return o}}var _h=new Mk;class Ik{constructor(){this._init=[]}notify(e,i,n,o){i==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const u=o?this._descriptors(e).filter(o):this._descriptors(e),A=this._notify(u,e,i,n);return i==="afterDestroy"&&(this._notify(u,e,"stop"),this._notify(this._init,e,"uninstall")),A}_notify(e,i,n,o){o=o||{};for(const u of e){const A=u.plugin,a=A[n],g=[i,o,u.options];if(Ys(a,g,A)===!1&&o.cancelable)return!1}return!0}invalidate(){ns(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),i}_createDescriptors(e,i){const n=e&&e.config,o=Jn(n.options&&n.options.plugins,{}),u=Lk(n);return o===!1&&!i?[]:kk(e,u,o,i)}_notifyStateChanges(e){const i=this._oldCache||[],n=this._cache,o=(u,A)=>u.filter(a=>!A.some(g=>a.plugin.id===g.plugin.id));this._notify(o(i,n),e,"stop"),this._notify(o(n,i),e,"start")}}function Lk(t){const e={},i=[],n=Object.keys(_h.plugins.items);for(let u=0;u<n.length;u++)i.push(_h.getPlugin(n[u]));const o=t.plugins||[];for(let u=0;u<o.length;u++){const A=o[u];i.indexOf(A)===-1&&(i.push(A),e[A.id]=!0)}return{plugins:i,localIds:e}}function Pk(t,e){return!e&&t===!1?null:t===!0?{}:t}function kk(t,{plugins:e,localIds:i},n,o){const u=[],A=t.getContext();for(const a of e){const g=a.id,b=Pk(n[g],o);b!==null&&u.push({plugin:a,options:jk(t.config,{plugin:a,local:i[g]},b,A)})}return u}function jk(t,{plugin:e,local:i},n,o){const u=t.pluginScopeKeys(e),A=t.getOptionScopes(n,u);return i&&e.defaults&&A.push(e.defaults),t.createResolver(A,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Mx(t,e){const i=Za.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function Uk(t,e){let i=t;return t==="_index_"?i=e:t==="_value_"&&(i=e==="x"?"y":"x"),i}function Dk(t,e){return t===e?"_index_":"_value_"}function $w(t){if(t==="x"||t==="y"||t==="r")return t}function Rk(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Ix(t,...e){if($w(t))return t;for(const i of e){const n=i.axis||Rk(i.position)||t.length>1&&$w(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Zw(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function Ok(t,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(i.length)return Zw(t,"x",i[0])||Zw(t,"y",i[0])}return{}}function Qk(t,e){const i=tp[t.type]||{scales:{}},n=e.scales||{},o=Mx(t.type,e),u=Object.create(null);return Object.keys(n).forEach(A=>{const a=n[A];if(!gr(a))return console.error(`Invalid scale configuration for scale: ${A}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${A}`);const g=Ix(A,a,Ok(A,t),Za.scales[a.type]),b=Dk(g,o),B=i.scales||{};u[A]=Hg(Object.create(null),[{axis:g},a,B[g],B[b]])}),t.data.datasets.forEach(A=>{const a=A.type||t.type,g=A.indexAxis||Mx(a,e),B=(tp[a]||{}).scales||{};Object.keys(B).forEach(I=>{const P=Uk(I,g),F=A[P+"AxisID"]||P;u[F]=u[F]||Object.create(null),Hg(u[F],[{axis:P},n[F],B[I]])})}),Object.keys(u).forEach(A=>{const a=u[A];Hg(a,[Za.scales[a.type],Za.scale])}),u}function X4(t){const e=t.options||(t.options={});e.plugins=Jn(e.plugins,{}),e.scales=Qk(t,e)}function Y4(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function zk(t){return t=t||{},t.data=Y4(t.data),X4(t),t}const Xw=new Map,J4=new Set;function Py(t,e){let i=Xw.get(t);return i||(i=e(),Xw.set(t,i),J4.add(i)),i}const bg=(t,e,i)=>{const n=ep(e,i);n!==void 0&&t.add(n)};class Hk{constructor(e){this._config=zk(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Y4(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),X4(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Py(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,i){return Py(`${e}.transition.${i}`,()=>[[`datasets.${e}.transitions.${i}`,`transitions.${i}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,i){return Py(`${e}-${i}`,()=>[[`datasets.${e}.elements.${i}`,`datasets.${e}`,`elements.${i}`,""]])}pluginScopeKeys(e){const i=e.id,n=this.type;return Py(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,i){const n=this._scopeCache;let o=n.get(e);return(!o||i)&&(o=new Map,n.set(e,o)),o}getOptionScopes(e,i,n){const{options:o,type:u}=this,A=this._cachedScopes(e,n),a=A.get(i);if(a)return a;const g=new Set;i.forEach(B=>{e&&(g.add(e),B.forEach(I=>bg(g,e,I))),B.forEach(I=>bg(g,o,I)),B.forEach(I=>bg(g,tp[u]||{},I)),B.forEach(I=>bg(g,Za,I)),B.forEach(I=>bg(g,Fx,I))});const b=Array.from(g);return b.length===0&&b.push(Object.create(null)),J4.has(i)&&A.set(i,b),b}chartOptionScopes(){const{options:e,type:i}=this;return[e,tp[i]||{},Za.datasets[i]||{},{type:i},Za,Fx]}resolveNamedOptions(e,i,n,o=[""]){const u={$shared:!0},{resolver:A,subPrefixes:a}=Yw(this._resolverCache,e,o);let g=A;if(qk(A,i)){u.$shared=!1,n=nf(n)?n():n;const b=this.createResolver(e,n,a);g=dm(A,n,b)}for(const b of i)u[b]=g[b];return u}createResolver(e,i,n=[""],o){const{resolver:u}=Yw(this._resolverCache,e,n);return gr(i)?dm(u,i,void 0,o):u}}function Yw(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const o=i.join();let u=n.get(o);return u||(u={resolver:Hb(e,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(o,u)),u}const Vk=t=>gr(t)&&Object.getOwnPropertyNames(t).some(e=>nf(t[e]));function qk(t,e){const{isScriptable:i,isIndexable:n}=I4(t);for(const o of e){const u=i(o),A=n(o),a=(A||u)&&t[o];if(u&&(nf(a)||Vk(a))||A&&go(a))return!0}return!1}var Gk="4.5.0";const Kk=["top","bottom","left","right","chartArea"];function Jw(t,e){return t==="top"||t==="bottom"||Kk.indexOf(t)===-1&&e==="x"}function e5(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function t5(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),Ys(i&&i.onComplete,[t],e)}function Wk(t){const e=t.chart,i=e.options.animation;Ys(i&&i.onProgress,[t],e)}function eS(t){return Gb()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const xv={},i5=t=>{const e=eS(t);return Object.values(xv).filter(i=>i.canvas===e).pop()};function $k(t,e,i){const n=Object.keys(t);for(const o of n){const u=+o;if(u>=e){const A=t[o];delete t[o],(i>0||u>e)&&(t[u+i]=A)}}}function Zk(t,e,i,n){return!i||t.type==="mouseout"?null:n?e:t}let wm=class{static defaults=Za;static instances=xv;static overrides=tp;static registry=_h;static version=Gk;static getChart=i5;static register(...e){_h.add(...e),n5()}static unregister(...e){_h.remove(...e),n5()}constructor(e,i){const n=this.config=new Hk(i),o=eS(e),u=i5(o);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const A=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||fk(o)),this.platform.updateConfig(n);const a=this.platform.acquireContext(o,A.aspectRatio),g=a&&a.canvas,b=g&&g.height,B=g&&g.width;if(this.id=qI(),this.ctx=a,this.canvas=g,this.width=B,this.height=b,this._options=A,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ik,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=uL(I=>this.update(I),A.resizeDelay||0),this._dataChanges=[],xv[this.id]=this,!a||!g){console.error("Failed to create chart: can't acquire context from the given item");return}Jh.listen(this,"complete",t5),Jh.listen(this,"progress",Wk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:n,height:o,_aspectRatio:u}=this;return ns(e)?i&&u?u:o?n/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return _h}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Cw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return bw(this.canvas,this.ctx),this}stop(){return Jh.stop(this),this}resize(e,i){Jh.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const n=this.options,o=this.canvas,u=n.maintainAspectRatio&&this.aspectRatio,A=this.platform.getMaximumSize(o,e,i,u),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),g=this.width?"resize":"attach";this.width=A.width,this.height=A.height,this._aspectRatio=this.aspectRatio,Cw(this,a,!0)&&(this.notifyPlugins("resize",{size:A}),Ys(n.onResize,[this,A],this),this.attached&&this._doResize(g)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};us(i,(n,o)=>{n.id=o})}buildOrUpdateScales(){const e=this.options,i=e.scales,n=this.scales,o=Object.keys(n).reduce((A,a)=>(A[a]=!1,A),{});let u=[];i&&(u=u.concat(Object.keys(i).map(A=>{const a=i[A],g=Ix(A,a),b=g==="r",B=g==="x";return{options:a,dposition:b?"chartArea":B?"bottom":"left",dtype:b?"radialLinear":B?"category":"linear"}}))),us(u,A=>{const a=A.options,g=a.id,b=Ix(g,a),B=Jn(a.type,A.dtype);(a.position===void 0||Jw(a.position,b)!==Jw(A.dposition))&&(a.position=A.dposition),o[g]=!0;let I=null;if(g in n&&n[g].type===B)I=n[g];else{const P=_h.getScale(B);I=new P({id:g,type:B,ctx:this.ctx,chart:this}),n[I.id]=I}I.init(a,e)}),us(o,(A,a)=>{A||delete n[a]}),us(n,A=>{hA.configure(this,A,A.options),hA.addBox(this,A)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,n=e.length;if(e.sort((o,u)=>o.index-u.index),n>i){for(let o=i;o<n;++o)this._destroyDatasetMeta(o);e.splice(i,n-i)}this._sortedMetasets=e.slice(0).sort(e5("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((n,o)=>{i.filter(u=>u===n._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let n,o;for(this._removeUnreferencedMetasets(),n=0,o=i.length;n<o;n++){const u=i[n];let A=this.getDatasetMeta(n);const a=u.type||this.config.type;if(A.type&&A.type!==a&&(this._destroyDatasetMeta(n),A=this.getDatasetMeta(n)),A.type=a,A.indexAxis=u.indexAxis||Mx(a,this.options),A.order=u.order||0,A.index=n,A.label=""+u.label,A.visible=this.isDatasetVisible(n),A.controller)A.controller.updateIndex(n),A.controller.linkScales();else{const g=_h.getController(a),{datasetElementType:b,dataElementType:B}=Za.datasets[a];Object.assign(g,{dataElementType:_h.getElement(B),datasetElementType:b&&_h.getElement(b)}),A.controller=new g(this,n),e.push(A.controller)}}return this._updateMetasets(),e}_resetElements(){us(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let A=0;for(let b=0,B=this.data.datasets.length;b<B;b++){const{controller:I}=this.getDatasetMeta(b),P=!o&&u.indexOf(I)===-1;I.buildOrUpdateElements(P),A=Math.max(+I.getMaxOverflow(),A)}A=this._minPadding=n.layout.autoPadding?A:0,this._updateLayout(A),o||us(u,b=>{b.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(e5("z","_idx"));const{_active:a,_lastEvent:g}=this;g?this._eventHandler(g,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){us(this.scales,e=>{hA.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!hw(i,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:o,count:u}of i){const A=n==="_removeElements"?-u:u;$k(e,o,A)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=u=>new Set(e.filter(A=>A[0]===u).map((A,a)=>a+","+A.splice(1).join(","))),o=n(0);for(let u=1;u<i;u++)if(!hw(o,n(u)))return;return Array.from(o).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;hA.update(this,this.width,this.height,e);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],us(this.boxes,o=>{n&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,u)=>{o._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,nf(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const n=this.getDatasetMeta(e),o={meta:n,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(n.controller._update(i),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Jh.has(this)?this.attached&&!Jh.running(this)&&Jh.start(this):(this.draw(),t5({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,n=[];let o,u;for(o=0,u=i.length;o<u;++o){const A=i[o];(!e||A.visible)&&n.push(A)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,n={meta:e,index:e.index,cancelable:!0},o=z4(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(o&&h1(i,o),e.controller.draw(),o&&d1(i),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return h0(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,n,o){const u=KP.modes[i];return typeof u=="function"?u(this,e,n,o):[]}getDatasetMeta(e){const i=this.data.datasets[e],n=this._metasets;let o=n.filter(u=>u&&u._dataset===i).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},n.push(o)),o}getContext(){return this.$context||(this.$context=ip(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(e,i){const n=this.getDatasetMeta(e);n.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,n){const o=n?"show":"hide",u=this.getDatasetMeta(e),A=u.controller._resolveAnimations(void 0,o);c0(i)?(u.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),A.update(u,{visible:n}),this.update(a=>a.datasetIndex===e?o:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),Jh.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),bw(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete xv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,n=(u,A)=>{i.addEventListener(this,u,A),e[u]=A},o=(u,A,a)=>{u.offsetX=A,u.offsetY=a,this._eventHandler(u)};us(this.options.events,u=>n(u,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,n=(g,b)=>{i.addEventListener(this,g,b),e[g]=b},o=(g,b)=>{e[g]&&(i.removeEventListener(this,g,b),delete e[g])},u=(g,b)=>{this.canvas&&this.resize(g,b)};let A;const a=()=>{o("attach",a),this.attached=!0,this.resize(),n("resize",u),n("detach",A)};A=()=>{this.attached=!1,o("resize",u),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():A()}unbindEvents(){us(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},us(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,n){const o=n?"set":"remove";let u,A,a,g;for(i==="dataset"&&(u=this.getDatasetMeta(e[0].datasetIndex),u.controller["_"+o+"DatasetHoverStyle"]()),a=0,g=e.length;a<g;++a){A=e[a];const b=A&&this.getDatasetMeta(A.datasetIndex).controller;b&&b[o+"HoverStyle"](A.element,A.datasetIndex,A.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],n=e.map(({datasetIndex:u,index:A})=>{const a=this.getDatasetMeta(u);if(!a)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:a.data[A],index:A}});!Lv(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(e,i,n){return this._plugins.notify(this,e,i,n)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,n){const o=this.options.hover,u=(g,b)=>g.filter(B=>!b.some(I=>B.datasetIndex===I.datasetIndex&&B.index===I.index)),A=u(i,e),a=n?e:u(e,i);A.length&&this.updateHoverStyle(A,o.mode,!1),a.length&&o.mode&&this.updateHoverStyle(a,o.mode,!0)}_eventHandler(e,i){const n={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},o=A=>(A.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,o)===!1)return;const u=this._handleEvent(e,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,o),(u||n.changed)&&this.render(),this}_handleEvent(e,i,n){const{_active:o=[],options:u}=this,A=i,a=this._getActiveElements(e,o,n,A),g=XI(e),b=Zk(e,this._lastEvent,n,g);n&&(this._lastEvent=null,Ys(u.onHover,[e,a,this],this),g&&Ys(u.onClick,[e,a,this],this));const B=!Lv(a,o);return(B||i)&&(this._active=a,this._updateHoverStyles(a,o,i)),this._lastEvent=b,B}_getActiveElements(e,i,n,o){if(e.type==="mouseout")return[];if(!n)return i;const u=this.options.hover;return this.getElementsAtEventForMode(e,u.mode,u,o)}};function n5(){return us(wm.instances,t=>t._plugins.invalidate())}function Xk(t,e,i){const{startAngle:n,x:o,y:u,outerRadius:A,innerRadius:a,options:g}=e,{borderWidth:b,borderJoinStyle:B}=g,I=Math.min(b/A,Lu(n-i));if(t.beginPath(),t.arc(o,u,A-b/2,n+I/2,i-I/2),a>0){const P=Math.min(b/a,Lu(n-i));t.arc(o,u,a+b/2,i-P/2,n+P/2,!0)}else{const P=Math.min(b/2,A*Lu(n-i));if(B==="round")t.arc(o,u,P,i-As/2,n+As/2,!0);else if(B==="bevel"){const F=2*P*P,Q=-F*Math.cos(i+As/2)+o,R=-F*Math.sin(i+As/2)+u,H=F*Math.cos(n+As/2)+o,j=F*Math.sin(n+As/2)+u;t.lineTo(Q,R),t.lineTo(H,j)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function Yk(t,e,i){const{startAngle:n,pixelMargin:o,x:u,y:A,outerRadius:a,innerRadius:g}=e;let b=o/a;t.beginPath(),t.arc(u,A,a,n-b,i+b),g>o?(b=o/g,t.arc(u,A,g,i+b,n-b,!0)):t.arc(u,A,o,i+Qo,n-Qo),t.closePath(),t.clip()}function Jk(t){return zb(t,["outerStart","outerEnd","innerStart","innerEnd"])}function ej(t,e,i,n){const o=Jk(t.options.borderRadius),u=(i-e)/2,A=Math.min(u,n*e/2),a=g=>{const b=(i-Math.min(u,g))*n/2;return gc(g,0,Math.min(u,b))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:gc(o.innerStart,0,A),innerEnd:gc(o.innerEnd,0,A)}}function Vp(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function Rv(t,e,i,n,o,u){const{x:A,y:a,startAngle:g,pixelMargin:b,innerRadius:B}=e,I=Math.max(e.outerRadius+n+i-b,0),P=B>0?B+n+i+b:0;let F=0;const Q=o-g;if(n){const Ve=B>0?B-n:0,ue=I>0?I-n:0,fe=(Ve+ue)/2,Ue=fe!==0?Q*fe/(fe+n):Q;F=(Q-Ue)/2}const R=Math.max(.001,Q*I-i/As)/I,H=(Q-R)/2,j=g+H+F,V=o-H-F,{outerStart:W,outerEnd:ne,innerStart:te,innerEnd:de}=ej(e,P,I,V-j),ee=I-W,re=I-ne,xe=j+W/ee,Be=V-ne/re,se=P+te,ae=P+de,ce=j+te/se,Ee=V-de/ae;if(t.beginPath(),u){const Ve=(xe+Be)/2;if(t.arc(A,a,I,xe,Ve),t.arc(A,a,I,Ve,Be),ne>0){const ke=Vp(re,Be,A,a);t.arc(ke.x,ke.y,ne,Be,V+Qo)}const ue=Vp(ae,V,A,a);if(t.lineTo(ue.x,ue.y),de>0){const ke=Vp(ae,Ee,A,a);t.arc(ke.x,ke.y,de,V+Qo,Ee+Math.PI)}const fe=(V-de/P+(j+te/P))/2;if(t.arc(A,a,P,V-de/P,fe,!0),t.arc(A,a,P,fe,j+te/P,!0),te>0){const ke=Vp(se,ce,A,a);t.arc(ke.x,ke.y,te,ce+Math.PI,j-Qo)}const Ue=Vp(ee,j,A,a);if(t.lineTo(Ue.x,Ue.y),W>0){const ke=Vp(ee,xe,A,a);t.arc(ke.x,ke.y,W,j-Qo,xe)}}else{t.moveTo(A,a);const Ve=Math.cos(xe)*I+A,ue=Math.sin(xe)*I+a;t.lineTo(Ve,ue);const fe=Math.cos(Be)*I+A,Ue=Math.sin(Be)*I+a;t.lineTo(fe,Ue)}t.closePath()}function tj(t,e,i,n,o){const{fullCircles:u,startAngle:A,circumference:a}=e;let g=e.endAngle;if(u){Rv(t,e,i,n,g,o);for(let b=0;b<u;++b)t.fill();isNaN(a)||(g=A+(a%xa||xa))}return Rv(t,e,i,n,g,o),t.fill(),g}function ij(t,e,i,n,o){const{fullCircles:u,startAngle:A,circumference:a,options:g}=e,{borderWidth:b,borderJoinStyle:B,borderDash:I,borderDashOffset:P,borderRadius:F}=g,Q=g.borderAlign==="inner";if(!b)return;t.setLineDash(I||[]),t.lineDashOffset=P,Q?(t.lineWidth=b*2,t.lineJoin=B||"round"):(t.lineWidth=b,t.lineJoin=B||"bevel");let R=e.endAngle;if(u){Rv(t,e,i,n,R,o);for(let H=0;H<u;++H)t.stroke();isNaN(a)||(R=A+(a%xa||xa))}Q&&Yk(t,e,R),g.selfJoin&&R-A>=As&&F===0&&B!=="miter"&&Xk(t,e,R),u||(Rv(t,e,i,n,R,o),t.stroke())}class $b extends ud{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,n){const o=this.getProps(["x","y"],n),{angle:u,distance:A}=B4(o,{x:e,y:i}),{startAngle:a,endAngle:g,innerRadius:b,outerRadius:B,circumference:I}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),P=(this.options.spacing+this.options.borderWidth)/2,F=Jn(I,g-a),Q=A0(u,a,g)&&a!==g,R=F>=xa||Q,H=nd(A,b+P,B+P);return R&&H}getCenterPoint(e){const{x:i,y:n,startAngle:o,endAngle:u,innerRadius:A,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:g,spacing:b}=this.options,B=(o+u)/2,I=(A+a+b+g)/2;return{x:i+Math.cos(B)*I,y:n+Math.sin(B)*I}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:n}=this,o=(i.offset||0)/4,u=(i.spacing||0)/2,A=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>xa?Math.floor(n/xa):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*o,Math.sin(a)*o);const g=1-Math.sin(Math.min(As,n||0)),b=o*g;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,tj(e,this,b,u,A),ij(e,this,b,u,A),e.restore()}}function tS(t,e,i=e){t.lineCap=Jn(i.borderCapStyle,e.borderCapStyle),t.setLineDash(Jn(i.borderDash,e.borderDash)),t.lineDashOffset=Jn(i.borderDashOffset,e.borderDashOffset),t.lineJoin=Jn(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Jn(i.borderWidth,e.borderWidth),t.strokeStyle=Jn(i.borderColor,e.borderColor)}function nj(t,e,i){t.lineTo(i.x,i.y)}function rj(t){return t.stepped?BL:t.tension||t.cubicInterpolationMode==="monotone"?CL:nj}function iS(t,e,i={}){const n=t.length,{start:o=0,end:u=n-1}=i,{start:A,end:a}=e,g=Math.max(o,A),b=Math.min(u,a),B=o<A&&u<A||o>a&&u>a;return{count:n,start:g,loop:e.loop,ilen:b<g&&!B?n+b-g:b-g}}function sj(t,e,i,n){const{points:o,options:u}=e,{count:A,start:a,loop:g,ilen:b}=iS(o,i,n),B=rj(u);let{move:I=!0,reverse:P}=n||{},F,Q,R;for(F=0;F<=b;++F)Q=o[(a+(P?b-F:F))%A],!Q.skip&&(I?(t.moveTo(Q.x,Q.y),I=!1):B(t,R,Q,P,u.stepped),R=Q);return g&&(Q=o[(a+(P?b:0))%A],B(t,R,Q,P,u.stepped)),!!g}function aj(t,e,i,n){const o=e.points,{count:u,start:A,ilen:a}=iS(o,i,n),{move:g=!0,reverse:b}=n||{};let B=0,I=0,P,F,Q,R,H,j;const V=ne=>(A+(b?a-ne:ne))%u,W=()=>{R!==H&&(t.lineTo(B,H),t.lineTo(B,R),t.lineTo(B,j))};for(g&&(F=o[V(0)],t.moveTo(F.x,F.y)),P=0;P<=a;++P){if(F=o[V(P)],F.skip)continue;const ne=F.x,te=F.y,de=ne|0;de===Q?(te<R?R=te:te>H&&(H=te),B=(I*B+ne)/++I):(W(),t.lineTo(ne,te),Q=de,I=0,R=H=te),j=te}W()}function Lx(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!i?aj:sj}function oj(t){return t.stepped?nP:t.tension||t.cubicInterpolationMode==="monotone"?rP:jf}function lj(t,e,i,n){let o=e._path;o||(o=e._path=new Path2D,e.path(o,i,n)&&o.closePath()),tS(t,e.options),t.stroke(o)}function cj(t,e,i,n){const{segments:o,options:u}=e,A=Lx(e);for(const a of o)tS(t,u,a.style),t.beginPath(),A(t,e,a,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}const uj=typeof Path2D=="function";function Aj(t,e,i,n){uj&&!e.options.segment?lj(t,e,i,n):cj(t,e,i,n)}class Bm extends ud{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const o=n.spanGaps?this._loop:this._fullLoop;$L(this._points,n,e,o,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=uP(this,this.options.segment))}first(){const e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){const e=this.segments,i=this.points,n=e.length;return n&&i[e[n-1].end]}interpolate(e,i){const n=this.options,o=e[i],u=this.points,A=Q4(this,{property:i,start:o,end:o});if(!A.length)return;const a=[],g=oj(n);let b,B;for(b=0,B=A.length;b<B;++b){const{start:I,end:P}=A[b],F=u[I],Q=u[P];if(F===Q){a.push(F);continue}const R=Math.abs((o-F[i])/(Q[i]-F[i])),H=g(F,Q,R,n.stepped);H[i]=e[i],a.push(H)}return a.length===1?a[0]:a}pathSegment(e,i,n){return Lx(this)(e,this,i,n)}path(e,i,n){const o=this.segments,u=Lx(this);let A=this._loop;i=i||0,n=n||this.points.length-i;for(const a of o)A&=u(e,this,a,{start:i,end:i+n-1});return!!A}draw(e,i,n,o){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(e.save(),Aj(e,this,n,o),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function r5(t,e,i,n){const o=t.options,{[i]:u}=t.getProps([i],n);return Math.abs(e-u)<o.radius+o.hitRadius}class Zb extends ud{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,n){const o=this.options,{x:u,y:A}=this.getProps(["x","y"],n);return Math.pow(e-u,2)+Math.pow(i-A,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return r5(this,e,"x",i)}inYRange(e,i){return r5(this,e,"y",i)}getCenterPoint(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const n=i&&e.borderWidth||0;return(i+n)*2}draw(e,i){const n=this.options;this.skip||n.radius<.1||!h0(this,i,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Nx(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function nS(t,e){const{x:i,y:n,base:o,width:u,height:A}=t.getProps(["x","y","base","width","height"],e);let a,g,b,B,I;return t.horizontal?(I=A/2,a=Math.min(i,o),g=Math.max(i,o),b=n-I,B=n+I):(I=u/2,a=i-I,g=i+I,b=Math.min(n,o),B=Math.max(n,o)),{left:a,top:b,right:g,bottom:B}}function Gd(t,e,i,n){return t?0:gc(e,i,n)}function hj(t,e,i){const n=t.options.borderWidth,o=t.borderSkipped,u=M4(n);return{t:Gd(o.top,u.top,0,i),r:Gd(o.right,u.right,0,e),b:Gd(o.bottom,u.bottom,0,i),l:Gd(o.left,u.left,0,e)}}function dj(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,u=lm(o),A=Math.min(e,i),a=t.borderSkipped,g=n||gr(o);return{topLeft:Gd(!g||a.top||a.left,u.topLeft,0,A),topRight:Gd(!g||a.top||a.right,u.topRight,0,A),bottomLeft:Gd(!g||a.bottom||a.left,u.bottomLeft,0,A),bottomRight:Gd(!g||a.bottom||a.right,u.bottomRight,0,A)}}function fj(t){const e=nS(t),i=e.right-e.left,n=e.bottom-e.top,o=hj(t,i/2,n/2),u=dj(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:u},inner:{x:e.left+o.l,y:e.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,u.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,u.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,u.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,u.bottomRight-Math.max(o.b,o.r))}}}}function b_(t,e,i,n){const o=e===null,u=i===null,a=t&&!(o&&u)&&nS(t,n);return a&&(o||nd(e,a.left,a.right))&&(u||nd(i,a.top,a.bottom))}function pj(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function mj(t,e){t.rect(e.x,e.y,e.w,e.h)}function w_(t,e,i={}){const n=t.x!==i.x?-e:0,o=t.y!==i.y?-e:0,u=(t.x+t.w!==i.x+i.w?e:0)-n,A=(t.y+t.h!==i.y+i.h?e:0)-o;return{x:t.x+n,y:t.y+o,w:t.w+u,h:t.h+A,radius:t.radius}}class Xb extends ud{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:i,options:{borderColor:n,backgroundColor:o}}=this,{inner:u,outer:A}=fj(this),a=pj(A.radius)?jv:mj;e.save(),(A.w!==u.w||A.h!==u.h)&&(e.beginPath(),a(e,w_(A,i,u)),e.clip(),a(e,w_(u,-i,A)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,w_(u,i)),e.fillStyle=o,e.fill(),e.restore()}inRange(e,i,n){return b_(this,e,i,n)}inXRange(e,i){return b_(this,e,null,i)}inYRange(e,i){return b_(this,null,e,i)}getCenterPoint(e){const{x:i,y:n,base:o,horizontal:u}=this.getProps(["x","y","base","horizontal"],e);return{x:u?(i+o)/2:i,y:u?n:(n+o)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function gj(t,e,i){const n=t.segments,o=t.points,u=e.points,A=[];for(const a of n){let{start:g,end:b}=a;b=g1(g,b,o);const B=Px(i,o[g],o[b],a.loop);if(!e.segments){A.push({source:a,target:B,start:o[g],end:o[b]});continue}const I=Q4(e,B);for(const P of I){const F=Px(i,u[P.start],u[P.end],P.loop),Q=O4(a,o,F);for(const R of Q)A.push({source:R,target:P,start:{[i]:s5(B,F,"start",Math.max)},end:{[i]:s5(B,F,"end",Math.min)}})}}return A}function Px(t,e,i,n){if(n)return;let o=e[t],u=i[t];return t==="angle"&&(o=Lu(o),u=Lu(u)),{property:t,start:o,end:u}}function yj(t,e){const{x:i=null,y:n=null}=t||{},o=e.points,u=[];return e.segments.forEach(({start:A,end:a})=>{a=g1(A,a,o);const g=o[A],b=o[a];n!==null?(u.push({x:g.x,y:n}),u.push({x:b.x,y:n})):i!==null&&(u.push({x:i,y:g.y}),u.push({x:i,y:b.y}))}),u}function g1(t,e,i){for(;e>t;e--){const n=i[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function s5(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function rS(t,e){let i=[],n=!1;return go(t)?(n=!0,i=t):i=yj(t,e),i.length?new Bm({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function a5(t){return t&&t.fill!==!1}function vj(t,e,i){let o=t[e].fill;const u=[e];let A;if(!i)return o;for(;o!==!1&&u.indexOf(o)===-1;){if(!vc(o))return o;if(A=t[o],!A)return!1;if(A.visible)return o;u.push(o),o=A.fill}return!1}function _j(t,e,i){const n=Bj(t);if(gr(n))return isNaN(n.value)?!1:n;let o=parseFloat(n);return vc(o)&&Math.floor(o)===o?xj(n[0],e,o,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function xj(t,e,i,n){return(t==="-"||t==="+")&&(i=e+i),i===e||i<0||i>=n?!1:i}function bj(t,e){let i=null;return t==="start"?i=e.bottom:t==="end"?i=e.top:gr(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}function wj(t,e,i){let n;return t==="start"?n=i:t==="end"?n=e.options.reverse?e.min:e.max:gr(t)?n=t.value:n=e.getBaseValue(),n}function Bj(t){const e=t.options,i=e.fill;let n=Jn(i&&i.target,i);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Cj(t){const{scale:e,index:i,line:n}=t,o=[],u=n.segments,A=n.points,a=Sj(e,i);a.push(rS({x:null,y:e.bottom},n));for(let g=0;g<u.length;g++){const b=u[g];for(let B=b.start;B<=b.end;B++)Ej(o,A[B],a)}return new Bm({points:o,options:{}})}function Sj(t,e){const i=[],n=t.getMatchingVisibleMetas("line");for(let o=0;o<n.length;o++){const u=n[o];if(u.index===e)break;u.hidden||i.unshift(u.dataset)}return i}function Ej(t,e,i){const n=[];for(let o=0;o<i.length;o++){const u=i[o],{first:A,last:a,point:g}=Tj(u,e,"x");if(!(!g||A&&a)){if(A)n.unshift(g);else if(t.push(g),!a)break}}t.push(...n)}function Tj(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const o=n[i],u=t.segments,A=t.points;let a=!1,g=!1;for(let b=0;b<u.length;b++){const B=u[b],I=A[B.start][i],P=A[B.end][i];if(nd(o,I,P)){a=o===I,g=o===P;break}}return{first:a,last:g,point:n}}class sS{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,i,n){const{x:o,y:u,radius:A}=this;return i=i||{start:0,end:xa},e.arc(o,u,A,i.end,i.start,!0),!n.bounds}interpolate(e){const{x:i,y:n,radius:o}=this,u=e.angle;return{x:i+Math.cos(u)*o,y:n+Math.sin(u)*o,angle:u}}}function Fj(t){const{chart:e,fill:i,line:n}=t;if(vc(i))return Nj(e,i);if(i==="stack")return Cj(t);if(i==="shape")return!0;const o=Mj(t);return o instanceof sS?o:rS(o,n)}function Nj(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}function Mj(t){return(t.scale||{}).getPointPositionForValue?Lj(t):Ij(t)}function Ij(t){const{scale:e={},fill:i}=t,n=bj(i,e);if(vc(n)){const o=e.isHorizontal();return{x:o?n:null,y:o?null:n}}return null}function Lj(t){const{scale:e,fill:i}=t,n=e.options,o=e.getLabels().length,u=n.reverse?e.max:e.min,A=wj(i,e,u),a=[];if(n.grid.circular){const g=e.getPointPositionForValue(0,u);return new sS({x:g.x,y:g.y,radius:e.getDistanceFromCenterForValue(A)})}for(let g=0;g<o;++g)a.push(e.getPointPositionForValue(g,A));return a}function B_(t,e,i){const n=Fj(e),{chart:o,index:u,line:A,scale:a,axis:g}=e,b=A.options,B=b.fill,I=b.backgroundColor,{above:P=I,below:F=I}=B||{},Q=o.getDatasetMeta(u),R=z4(o,Q);n&&A.points.length&&(h1(t,i),Pj(t,{line:A,target:n,above:P,below:F,area:i,scale:a,axis:g,clip:R}),d1(t))}function Pj(t,e){const{line:i,target:n,above:o,below:u,area:A,scale:a,clip:g}=e,b=i._loop?"angle":e.axis;t.save();let B=u;u!==o&&(b==="x"?(o5(t,n,A.top),C_(t,{line:i,target:n,color:o,scale:a,property:b,clip:g}),t.restore(),t.save(),o5(t,n,A.bottom)):b==="y"&&(l5(t,n,A.left),C_(t,{line:i,target:n,color:u,scale:a,property:b,clip:g}),t.restore(),t.save(),l5(t,n,A.right),B=o)),C_(t,{line:i,target:n,color:B,scale:a,property:b,clip:g}),t.restore()}function o5(t,e,i){const{segments:n,points:o}=e;let u=!0,A=!1;t.beginPath();for(const a of n){const{start:g,end:b}=a,B=o[g],I=o[g1(g,b,o)];u?(t.moveTo(B.x,B.y),u=!1):(t.lineTo(B.x,i),t.lineTo(B.x,B.y)),A=!!e.pathSegment(t,a,{move:A}),A?t.closePath():t.lineTo(I.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function l5(t,e,i){const{segments:n,points:o}=e;let u=!0,A=!1;t.beginPath();for(const a of n){const{start:g,end:b}=a,B=o[g],I=o[g1(g,b,o)];u?(t.moveTo(B.x,B.y),u=!1):(t.lineTo(i,B.y),t.lineTo(B.x,B.y)),A=!!e.pathSegment(t,a,{move:A}),A?t.closePath():t.lineTo(i,I.y)}t.lineTo(i,e.first().y),t.closePath(),t.clip()}function C_(t,e){const{line:i,target:n,property:o,color:u,scale:A,clip:a}=e,g=gj(i,n,o);for(const{source:b,target:B,start:I,end:P}of g){const{style:{backgroundColor:F=u}={}}=b,Q=n!==!0;t.save(),t.fillStyle=F,kj(t,A,a,Q&&Px(o,I,P)),t.beginPath();const R=!!i.pathSegment(t,b);let H;if(Q){R?t.closePath():c5(t,n,P,o);const j=!!n.pathSegment(t,B,{move:R,reverse:!0});H=R&&j,H||c5(t,n,I,o)}t.closePath(),t.fill(H?"evenodd":"nonzero"),t.restore()}}function kj(t,e,i,n){const o=e.chart.chartArea,{property:u,start:A,end:a}=n||{};if(u==="x"||u==="y"){let g,b,B,I;u==="x"?(g=A,b=o.top,B=a,I=o.bottom):(g=o.left,b=A,B=o.right,I=a),t.beginPath(),i&&(g=Math.max(g,i.left),B=Math.min(B,i.right),b=Math.max(b,i.top),I=Math.min(I,i.bottom)),t.rect(g,b,B-g,I-b),t.clip()}}function c5(t,e,i,n){const o=e.interpolate(i,n);o&&t.lineTo(o.x,o.y)}var aS={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,o=[];let u,A,a,g;for(A=0;A<n;++A)u=t.getDatasetMeta(A),a=u.dataset,g=null,a&&a.options&&a instanceof Bm&&(g={visible:t.isDatasetVisible(A),index:A,fill:_j(a,A,n),chart:t,axis:u.controller.options.indexAxis,scale:u.vScale,line:a}),u.$filler=g,o.push(g);for(A=0;A<n;++A)g=o[A],!(!g||g.fill===!1)&&(g.fill=vj(o,A,i.propagate))},beforeDraw(t,e,i){const n=i.drawTime==="beforeDraw",o=t.getSortedVisibleDatasetMetas(),u=t.chartArea;for(let A=o.length-1;A>=0;--A){const a=o[A].$filler;a&&(a.line.updateControlPoints(u,a.axis),n&&a.fill&&B_(t.ctx,a,u))}},beforeDatasetsDraw(t,e,i){if(i.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let o=n.length-1;o>=0;--o){const u=n[o].$filler;a5(u)&&B_(t.ctx,u,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;!a5(n)||i.drawTime!=="beforeDatasetDraw"||B_(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const u5=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t;return t.usePointStyle&&(i=Math.min(i,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}},jj=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class A5 extends ud{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i,n){this.maxWidth=e,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let i=Ys(e.generateLabels,[this.chart],this)||[];e.filter&&(i=i.filter(n=>e.filter(n,this.chart.data))),e.sort&&(i=i.sort((n,o)=>e.sort(n,o,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:e,ctx:i}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,o=yc(n.font),u=o.size,A=this._computeTitleHeight(),{boxWidth:a,itemHeight:g}=u5(n,u);let b,B;i.font=o.string,this.isHorizontal()?(b=this.maxWidth,B=this._fitRows(A,u,a,g)+10):(B=this.maxHeight,b=this._fitCols(A,o,a,g)+10),this.width=Math.min(b,e.maxWidth||this.maxWidth),this.height=Math.min(B,e.maxHeight||this.maxHeight)}_fitRows(e,i,n,o){const{ctx:u,maxWidth:A,options:{labels:{padding:a}}}=this,g=this.legendHitBoxes=[],b=this.lineWidths=[0],B=o+a;let I=e;u.textAlign="left",u.textBaseline="middle";let P=-1,F=-B;return this.legendItems.forEach((Q,R)=>{const H=n+i/2+u.measureText(Q.text).width;(R===0||b[b.length-1]+H+2*a>A)&&(I+=B,b[b.length-(R>0?0:1)]=0,F+=B,P++),g[R]={left:0,top:F,row:P,width:H,height:o},b[b.length-1]+=H+a}),I}_fitCols(e,i,n,o){const{ctx:u,maxHeight:A,options:{labels:{padding:a}}}=this,g=this.legendHitBoxes=[],b=this.columnSizes=[],B=A-e;let I=a,P=0,F=0,Q=0,R=0;return this.legendItems.forEach((H,j)=>{const{itemWidth:V,itemHeight:W}=Uj(n,i,u,H,o);j>0&&F+W+2*a>B&&(I+=P+a,b.push({width:P,height:F}),Q+=P+a,R++,P=F=0),g[j]={left:Q,top:F,col:R,width:V,height:W},P=Math.max(P,V),F+=W+a}),I+=P,b.push({width:P,height:F}),I}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:o},rtl:u}}=this,A=cm(u,this.left,this.width);if(this.isHorizontal()){let a=0,g=dc(n,this.left+o,this.right-this.lineWidths[a]);for(const b of i)a!==b.row&&(a=b.row,g=dc(n,this.left+o,this.right-this.lineWidths[a])),b.top+=this.top+e+o,b.left=A.leftForLtr(A.x(g),b.width),g+=b.width+o}else{let a=0,g=dc(n,this.top+e+o,this.bottom-this.columnSizes[a].height);for(const b of i)b.col!==a&&(a=b.col,g=dc(n,this.top+e+o,this.bottom-this.columnSizes[a].height)),b.top=g,b.left+=this.left+o,b.left=A.leftForLtr(A.x(b.left),b.width),g+=b.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;h1(e,this),this._draw(),d1(e)}}_draw(){const{options:e,columnSizes:i,lineWidths:n,ctx:o}=this,{align:u,labels:A}=e,a=Za.color,g=cm(e.rtl,this.left,this.width),b=yc(A.font),{padding:B}=A,I=b.size,P=I/2;let F;this.drawTitle(),o.textAlign=g.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=b.string;const{boxWidth:Q,boxHeight:R,itemHeight:H}=u5(A,I),j=function(de,ee,re){if(isNaN(Q)||Q<=0||isNaN(R)||R<0)return;o.save();const xe=Jn(re.lineWidth,1);if(o.fillStyle=Jn(re.fillStyle,a),o.lineCap=Jn(re.lineCap,"butt"),o.lineDashOffset=Jn(re.lineDashOffset,0),o.lineJoin=Jn(re.lineJoin,"miter"),o.lineWidth=xe,o.strokeStyle=Jn(re.strokeStyle,a),o.setLineDash(Jn(re.lineDash,[])),A.usePointStyle){const Be={radius:R*Math.SQRT2/2,pointStyle:re.pointStyle,rotation:re.rotation,borderWidth:xe},se=g.xPlus(de,Q/2),ae=ee+P;N4(o,Be,se,ae,A.pointStyleWidth&&Q)}else{const Be=ee+Math.max((I-R)/2,0),se=g.leftForLtr(de,Q),ae=lm(re.borderRadius);o.beginPath(),Object.values(ae).some(ce=>ce!==0)?jv(o,{x:se,y:Be,w:Q,h:R,radius:ae}):o.rect(se,Be,Q,R),o.fill(),xe!==0&&o.stroke()}o.restore()},V=function(de,ee,re){d0(o,re.text,de,ee+H/2,b,{strikethrough:re.hidden,textAlign:g.textAlign(re.textAlign)})},W=this.isHorizontal(),ne=this._computeTitleHeight();W?F={x:dc(u,this.left+B,this.right-n[0]),y:this.top+B+ne,line:0}:F={x:this.left+B,y:dc(u,this.top+ne+B,this.bottom-i[0].height),line:0},U4(this.ctx,e.textDirection);const te=H+B;this.legendItems.forEach((de,ee)=>{o.strokeStyle=de.fontColor,o.fillStyle=de.fontColor;const re=o.measureText(de.text).width,xe=g.textAlign(de.textAlign||(de.textAlign=A.textAlign)),Be=Q+P+re;let se=F.x,ae=F.y;g.setWidth(this.width),W?ee>0&&se+Be+B>this.right&&(ae=F.y+=te,F.line++,se=F.x=dc(u,this.left+B,this.right-n[F.line])):ee>0&&ae+te>this.bottom&&(se=F.x=se+i[F.line].width+B,F.line++,ae=F.y=dc(u,this.top+ne+B,this.bottom-i[F.line].height));const ce=g.x(se);if(j(ce,ae,de),se=AL(xe,se+Q+P,W?se+Be:this.right,e.rtl),V(g.x(se),ae,de),W)F.x+=Be+B;else if(typeof de.text!="string"){const Ee=b.lineHeight;F.y+=oS(de,Ee)+B}else F.y+=te}),D4(this.ctx,e.textDirection)}drawTitle(){const e=this.options,i=e.title,n=yc(i.font),o=mA(i.padding);if(!i.display)return;const u=cm(e.rtl,this.left,this.width),A=this.ctx,a=i.position,g=n.size/2,b=o.top+g;let B,I=this.left,P=this.width;if(this.isHorizontal())P=Math.max(...this.lineWidths),B=this.top+b,I=dc(e.align,I,this.right-P);else{const Q=this.columnSizes.reduce((R,H)=>Math.max(R,H.height),0);B=b+dc(e.align,this.top,this.bottom-Q-e.labels.padding-this._computeTitleHeight())}const F=dc(a,I,I+P);A.textAlign=u.textAlign(Rb(a)),A.textBaseline="middle",A.strokeStyle=i.color,A.fillStyle=i.color,A.font=n.string,d0(A,i.text,F,B,n)}_computeTitleHeight(){const e=this.options.title,i=yc(e.font),n=mA(e.padding);return e.display?i.lineHeight+n.height:0}_getLegendItemAt(e,i){let n,o,u;if(nd(e,this.left,this.right)&&nd(i,this.top,this.bottom)){for(u=this.legendHitBoxes,n=0;n<u.length;++n)if(o=u[n],nd(e,o.left,o.left+o.width)&&nd(i,o.top,o.top+o.height))return this.legendItems[n]}return null}handleEvent(e){const i=this.options;if(!Oj(e.type,i))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const o=this._hoveredItem,u=jj(o,n);o&&!u&&Ys(i.onLeave,[e,o,this],this),this._hoveredItem=n,n&&!u&&Ys(i.onHover,[e,n,this],this)}else n&&Ys(i.onClick,[e,n,this],this)}}function Uj(t,e,i,n,o){const u=Dj(n,t,e,i),A=Rj(o,n,e.lineHeight);return{itemWidth:u,itemHeight:A}}function Dj(t,e,i,n){let o=t.text;return o&&typeof o!="string"&&(o=o.reduce((u,A)=>u.length>A.length?u:A)),e+i.size/2+n.measureText(o).width}function Rj(t,e,i){let n=t;return typeof e.text!="string"&&(n=oS(e,i)),n}function oS(t,e){const i=t.text?t.text.length:0;return e*i}function Oj(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Yb={id:"legend",_element:A5,start(t,e,i){const n=t.legend=new A5({ctx:t.ctx,options:i,chart:t});hA.configure(t,n,i),hA.addBox(t,n)},stop(t){hA.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend;hA.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,o=i.chart;o.isDatasetVisible(n)?(o.hide(n),e.hidden=!0):(o.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:o,color:u,useBorderRadius:A,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(g=>{const b=g.controller.getStyle(i?0:void 0),B=mA(b.borderWidth);return{text:e[g.index].label,fillStyle:b.backgroundColor,fontColor:u,hidden:!g.visible,lineCap:b.borderCapStyle,lineDash:b.borderDash,lineDashOffset:b.borderDashOffset,lineJoin:b.borderJoinStyle,lineWidth:(B.width+B.height)/4,strokeStyle:b.borderColor,pointStyle:n||b.pointStyle,rotation:b.rotation,textAlign:o||b.textAlign,borderRadius:A&&(a||b.borderRadius),datasetIndex:g.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class lS extends ud{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=i;const o=go(n.text)?n.text.length:1;this._padding=mA(n.padding);const u=o*yc(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:i,left:n,bottom:o,right:u,options:A}=this,a=A.align;let g=0,b,B,I;return this.isHorizontal()?(B=dc(a,n,u),I=i+e,b=u-n):(A.position==="left"?(B=n+e,I=dc(a,o,i),g=As*-.5):(B=u-e,I=dc(a,i,o),g=As*.5),b=o-i),{titleX:B,titleY:I,maxWidth:b,rotation:g}}draw(){const e=this.ctx,i=this.options;if(!i.display)return;const n=yc(i.font),u=n.lineHeight/2+this._padding.top,{titleX:A,titleY:a,maxWidth:g,rotation:b}=this._drawArgs(u);d0(e,i.text,0,0,n,{color:i.color,maxWidth:g,rotation:b,textAlign:Rb(i.align),textBaseline:"middle",translation:[A,a]})}}function Qj(t,e){const i=new lS({ctx:t.ctx,options:e,chart:t});hA.configure(t,i,e),hA.addBox(t,i),t.titleBlock=i}var Jb={id:"title",_element:lS,start(t,e,i){Qj(t,i)},stop(t){const e=t.titleBlock;hA.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock;hA.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pg={average(t){if(!t.length)return!1;let e,i,n=new Set,o=0,u=0;for(e=0,i=t.length;e<i;++e){const a=t[e].element;if(a&&a.hasValue()){const g=a.tooltipPosition();n.add(g.x),o+=g.y,++u}}return u===0||n.size===0?!1:{x:[...n].reduce((a,g)=>a+g)/n.size,y:o/u}},nearest(t,e){if(!t.length)return!1;let i=e.x,n=e.y,o=Number.POSITIVE_INFINITY,u,A,a;for(u=0,A=t.length;u<A;++u){const g=t[u].element;if(g&&g.hasValue()){const b=g.getCenterPoint(),B=Tx(e,b);B<o&&(o=B,a=g)}}if(a){const g=a.tooltipPosition();i=g.x,n=g.y}return{x:i,y:n}}};function yh(t,e){return e&&(go(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ed(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function zj(t,e){const{element:i,datasetIndex:n,index:o}=e,u=t.getDatasetMeta(n).controller,{label:A,value:a}=u.getLabelAndValue(o);return{chart:t,label:A,parsed:u.getParsed(o),raw:t.data.datasets[n].data[o],formattedValue:a,dataset:u.getDataset(),dataIndex:o,datasetIndex:n,element:i}}function h5(t,e){const i=t.chart.ctx,{body:n,footer:o,title:u}=t,{boxWidth:A,boxHeight:a}=e,g=yc(e.bodyFont),b=yc(e.titleFont),B=yc(e.footerFont),I=u.length,P=o.length,F=n.length,Q=mA(e.padding);let R=Q.height,H=0,j=n.reduce((ne,te)=>ne+te.before.length+te.lines.length+te.after.length,0);if(j+=t.beforeBody.length+t.afterBody.length,I&&(R+=I*b.lineHeight+(I-1)*e.titleSpacing+e.titleMarginBottom),j){const ne=e.displayColors?Math.max(a,g.lineHeight):g.lineHeight;R+=F*ne+(j-F)*g.lineHeight+(j-1)*e.bodySpacing}P&&(R+=e.footerMarginTop+P*B.lineHeight+(P-1)*e.footerSpacing);let V=0;const W=function(ne){H=Math.max(H,i.measureText(ne).width+V)};return i.save(),i.font=b.string,us(t.title,W),i.font=g.string,us(t.beforeBody.concat(t.afterBody),W),V=e.displayColors?A+2+e.boxPadding:0,us(n,ne=>{us(ne.before,W),us(ne.lines,W),us(ne.after,W)}),V=0,i.font=B.string,us(t.footer,W),i.restore(),H+=Q.width,{width:H,height:R}}function Hj(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}function Vj(t,e,i,n){const{x:o,width:u}=n,A=i.caretSize+i.caretPadding;if(t==="left"&&o+u+A>e.width||t==="right"&&o-u-A<0)return!0}function qj(t,e,i,n){const{x:o,width:u}=i,{width:A,chartArea:{left:a,right:g}}=t;let b="center";return n==="center"?b=o<=(a+g)/2?"left":"right":o<=u/2?b="left":o>=A-u/2&&(b="right"),Vj(b,t,e,i)&&(b="center"),b}function d5(t,e,i){const n=i.yAlign||e.yAlign||Hj(t,i);return{xAlign:i.xAlign||e.xAlign||qj(t,e,i,n),yAlign:n}}function Gj(t,e){let{x:i,width:n}=t;return e==="right"?i-=n:e==="center"&&(i-=n/2),i}function Kj(t,e,i){let{y:n,height:o}=t;return e==="top"?n+=i:e==="bottom"?n-=o+i:n-=o/2,n}function f5(t,e,i,n){const{caretSize:o,caretPadding:u,cornerRadius:A}=t,{xAlign:a,yAlign:g}=i,b=o+u,{topLeft:B,topRight:I,bottomLeft:P,bottomRight:F}=lm(A);let Q=Gj(e,a);const R=Kj(e,g,b);return g==="center"?a==="left"?Q+=b:a==="right"&&(Q-=b):a==="left"?Q-=Math.max(B,P)+o:a==="right"&&(Q+=Math.max(I,F)+o),{x:gc(Q,0,n.width-e.width),y:gc(R,0,n.height-e.height)}}function ky(t,e,i){const n=mA(i.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function p5(t){return yh([],ed(t))}function Wj(t,e,i){return ip(t,{tooltip:e,tooltipItems:i,type:"tooltip"})}function m5(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const cS={beforeTitle:$h,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:$h,beforeBody:$h,beforeLabel:$h,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return ns(i)||(e+=i),e},labelColor(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:$h,afterBody:$h,beforeFooter:$h,footer:$h,afterFooter:$h};function uu(t,e,i,n){const o=t[e].call(i,n);return typeof o>"u"?cS[e].call(i,n):o}class g5 extends ud{static positioners=Pg;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,n=this.options.setContext(this.getContext()),o=n.enabled&&i.options.animation&&n.animations,u=new H4(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=Wj(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:n}=i,o=uu(n,"beforeTitle",this,e),u=uu(n,"title",this,e),A=uu(n,"afterTitle",this,e);let a=[];return a=yh(a,ed(o)),a=yh(a,ed(u)),a=yh(a,ed(A)),a}getBeforeBody(e,i){return p5(uu(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:n}=i,o=[];return us(e,u=>{const A={before:[],lines:[],after:[]},a=m5(n,u);yh(A.before,ed(uu(a,"beforeLabel",this,u))),yh(A.lines,uu(a,"label",this,u)),yh(A.after,ed(uu(a,"afterLabel",this,u))),o.push(A)}),o}getAfterBody(e,i){return p5(uu(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:n}=i,o=uu(n,"beforeFooter",this,e),u=uu(n,"footer",this,e),A=uu(n,"afterFooter",this,e);let a=[];return a=yh(a,ed(o)),a=yh(a,ed(u)),a=yh(a,ed(A)),a}_createItems(e){const i=this._active,n=this.chart.data,o=[],u=[],A=[];let a=[],g,b;for(g=0,b=i.length;g<b;++g)a.push(zj(this.chart,i[g]));return e.filter&&(a=a.filter((B,I,P)=>e.filter(B,I,P,n))),e.itemSort&&(a=a.sort((B,I)=>e.itemSort(B,I,n))),us(a,B=>{const I=m5(e.callbacks,B);o.push(uu(I,"labelColor",this,B)),u.push(uu(I,"labelPointStyle",this,B)),A.push(uu(I,"labelTextColor",this,B))}),this.labelColors=o,this.labelPointStyles=u,this.labelTextColors=A,this.dataPoints=a,a}update(e,i){const n=this.options.setContext(this.getContext()),o=this._active;let u,A=[];if(!o.length)this.opacity!==0&&(u={opacity:0});else{const a=Pg[n.position].call(this,o,this._eventPosition);A=this._createItems(n),this.title=this.getTitle(A,n),this.beforeBody=this.getBeforeBody(A,n),this.body=this.getBody(A,n),this.afterBody=this.getAfterBody(A,n),this.footer=this.getFooter(A,n);const g=this._size=h5(this,n),b=Object.assign({},a,g),B=d5(this.chart,n,b),I=f5(n,b,B,this.chart);this.xAlign=B.xAlign,this.yAlign=B.yAlign,u={opacity:1,x:I.x,y:I.y,width:g.width,height:g.height,caretX:a.x,caretY:a.y}}this._tooltipItems=A,this.$context=void 0,u&&this._resolveAnimations().update(this,u),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,n,o){const u=this.getCaretPosition(e,n,o);i.lineTo(u.x1,u.y1),i.lineTo(u.x2,u.y2),i.lineTo(u.x3,u.y3)}getCaretPosition(e,i,n){const{xAlign:o,yAlign:u}=this,{caretSize:A,cornerRadius:a}=n,{topLeft:g,topRight:b,bottomLeft:B,bottomRight:I}=lm(a),{x:P,y:F}=e,{width:Q,height:R}=i;let H,j,V,W,ne,te;return u==="center"?(ne=F+R/2,o==="left"?(H=P,j=H-A,W=ne+A,te=ne-A):(H=P+Q,j=H+A,W=ne-A,te=ne+A),V=H):(o==="left"?j=P+Math.max(g,B)+A:o==="right"?j=P+Q-Math.max(b,I)-A:j=this.caretX,u==="top"?(W=F,ne=W-A,H=j-A,V=j+A):(W=F+R,ne=W+A,H=j+A,V=j-A),te=W),{x1:H,x2:j,x3:V,y1:W,y2:ne,y3:te}}drawTitle(e,i,n){const o=this.title,u=o.length;let A,a,g;if(u){const b=cm(n.rtl,this.x,this.width);for(e.x=ky(this,n.titleAlign,n),i.textAlign=b.textAlign(n.titleAlign),i.textBaseline="middle",A=yc(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=A.string,g=0;g<u;++g)i.fillText(o[g],b.x(e.x),e.y+A.lineHeight/2),e.y+=A.lineHeight+a,g+1===u&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,i,n,o,u){const A=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:g,boxWidth:b}=u,B=yc(u.bodyFont),I=ky(this,"left",u),P=o.x(I),F=g<B.lineHeight?(B.lineHeight-g)/2:0,Q=i.y+F;if(u.usePointStyle){const R={radius:Math.min(b,g)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},H=o.leftForLtr(P,b)+b/2,j=Q+g/2;e.strokeStyle=u.multiKeyBackground,e.fillStyle=u.multiKeyBackground,Nx(e,R,H,j),e.strokeStyle=A.borderColor,e.fillStyle=A.backgroundColor,Nx(e,R,H,j)}else{e.lineWidth=gr(A.borderWidth)?Math.max(...Object.values(A.borderWidth)):A.borderWidth||1,e.strokeStyle=A.borderColor,e.setLineDash(A.borderDash||[]),e.lineDashOffset=A.borderDashOffset||0;const R=o.leftForLtr(P,b),H=o.leftForLtr(o.xPlus(P,1),b-2),j=lm(A.borderRadius);Object.values(j).some(V=>V!==0)?(e.beginPath(),e.fillStyle=u.multiKeyBackground,jv(e,{x:R,y:Q,w:b,h:g,radius:j}),e.fill(),e.stroke(),e.fillStyle=A.backgroundColor,e.beginPath(),jv(e,{x:H,y:Q+1,w:b-2,h:g-2,radius:j}),e.fill()):(e.fillStyle=u.multiKeyBackground,e.fillRect(R,Q,b,g),e.strokeRect(R,Q,b,g),e.fillStyle=A.backgroundColor,e.fillRect(H,Q+1,b-2,g-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,i,n){const{body:o}=this,{bodySpacing:u,bodyAlign:A,displayColors:a,boxHeight:g,boxWidth:b,boxPadding:B}=n,I=yc(n.bodyFont);let P=I.lineHeight,F=0;const Q=cm(n.rtl,this.x,this.width),R=function(re){i.fillText(re,Q.x(e.x+F),e.y+P/2),e.y+=P+u},H=Q.textAlign(A);let j,V,W,ne,te,de,ee;for(i.textAlign=A,i.textBaseline="middle",i.font=I.string,e.x=ky(this,H,n),i.fillStyle=n.bodyColor,us(this.beforeBody,R),F=a&&H!=="right"?A==="center"?b/2+B:b+2+B:0,ne=0,de=o.length;ne<de;++ne){for(j=o[ne],V=this.labelTextColors[ne],i.fillStyle=V,us(j.before,R),W=j.lines,a&&W.length&&(this._drawColorBox(i,e,ne,Q,n),P=Math.max(I.lineHeight,g)),te=0,ee=W.length;te<ee;++te)R(W[te]),P=I.lineHeight;us(j.after,R)}F=0,P=I.lineHeight,us(this.afterBody,R),e.y-=u}drawFooter(e,i,n){const o=this.footer,u=o.length;let A,a;if(u){const g=cm(n.rtl,this.x,this.width);for(e.x=ky(this,n.footerAlign,n),e.y+=n.footerMarginTop,i.textAlign=g.textAlign(n.footerAlign),i.textBaseline="middle",A=yc(n.footerFont),i.fillStyle=n.footerColor,i.font=A.string,a=0;a<u;++a)i.fillText(o[a],g.x(e.x),e.y+A.lineHeight/2),e.y+=A.lineHeight+n.footerSpacing}}drawBackground(e,i,n,o){const{xAlign:u,yAlign:A}=this,{x:a,y:g}=e,{width:b,height:B}=n,{topLeft:I,topRight:P,bottomLeft:F,bottomRight:Q}=lm(o.cornerRadius);i.fillStyle=o.backgroundColor,i.strokeStyle=o.borderColor,i.lineWidth=o.borderWidth,i.beginPath(),i.moveTo(a+I,g),A==="top"&&this.drawCaret(e,i,n,o),i.lineTo(a+b-P,g),i.quadraticCurveTo(a+b,g,a+b,g+P),A==="center"&&u==="right"&&this.drawCaret(e,i,n,o),i.lineTo(a+b,g+B-Q),i.quadraticCurveTo(a+b,g+B,a+b-Q,g+B),A==="bottom"&&this.drawCaret(e,i,n,o),i.lineTo(a+F,g+B),i.quadraticCurveTo(a,g+B,a,g+B-F),A==="center"&&u==="left"&&this.drawCaret(e,i,n,o),i.lineTo(a,g+I),i.quadraticCurveTo(a,g,a+I,g),i.closePath(),i.fill(),o.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,n=this.$animations,o=n&&n.x,u=n&&n.y;if(o||u){const A=Pg[e.position].call(this,this._active,this._eventPosition);if(!A)return;const a=this._size=h5(this,e),g=Object.assign({},A,this._size),b=d5(i,e,g),B=f5(e,g,b,i);(o._to!==B.x||u._to!==B.y)&&(this.xAlign=b.xAlign,this.yAlign=b.yAlign,this.width=a.width,this.height=a.height,this.caretX=A.x,this.caretY=A.y,this._resolveAnimations().update(this,B))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const o={width:this.width,height:this.height},u={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const A=mA(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(u,e,o,i),U4(e,i.textDirection),u.y+=A.top,this.drawTitle(u,e,i),this.drawBody(u,e,i),this.drawFooter(u,e,i),D4(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const n=this._active,o=e.map(({datasetIndex:a,index:g})=>{const b=this.chart.getDatasetMeta(a);if(!b)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:b.data[g],index:g}}),u=!Lv(n,o),A=this._positionChanged(o,i);(u||A)&&(this._active=o,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,u=this._active||[],A=this._getActiveElements(e,u,i,n),a=this._positionChanged(A,e),g=i||!Lv(A,u)||a;return g&&(this._active=A,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),g}_getActiveElements(e,i,n,o){const u=this.options;if(e.type==="mouseout")return[];if(!o)return i.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const A=this.chart.getElementsAtEventForMode(e,u.mode,u,n);return u.reverse&&A.reverse(),A}_positionChanged(e,i){const{caretX:n,caretY:o,options:u}=this,A=Pg[u.position].call(this,e,i);return A!==!1&&(n!==A.x||o!==A.y)}}var e2={id:"tooltip",_element:g5,positioners:Pg,afterInit(t,e,i){i&&(t.tooltip=new g5({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:cS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const $j=(t,e,i,n)=>(typeof e=="string"?(i=t.push(e)-1,n.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function Zj(t,e,i,n){const o=t.indexOf(e);if(o===-1)return $j(t,e,i,n);const u=t.lastIndexOf(e);return o!==u?i:o}const Xj=(t,e)=>t===null?null:gc(Math.round(t),0,e);function y5(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class t2 extends bm{static id="category";static defaults={ticks:{callback:y5}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:o,label:u}of i)n[o]===u&&n.splice(o,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(ns(e))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===e?i:Zj(n,e,Jn(i,e),this._addedLabels),Xj(i,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),i||(o=this.getLabels().length-1)),this.min=n,this.max=o}buildTicks(){const e=this.min,i=this.max,n=this.options.offset,o=[];let u=this.getLabels();u=e===0&&i===u.length-1?u:u.slice(e,i+1),this._valueRange=Math.max(u.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let A=e;A<=i;A++)o.push({value:A});return o}getLabelForValue(e){return y5.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Yj(t,e){const i=[],{bounds:o,step:u,min:A,max:a,precision:g,count:b,maxTicks:B,maxDigits:I,includeBounds:P}=t,F=u||1,Q=B-1,{min:R,max:H}=e,j=!ns(A),V=!ns(a),W=!ns(b),ne=(H-R)/(I+1);let te=fw((H-R)/Q/F)*F,de,ee,re,xe;if(te<1e-14&&!j&&!V)return[{value:R},{value:H}];xe=Math.ceil(H/te)-Math.floor(R/te),xe>Q&&(te=fw(xe*te/Q/F)*F),ns(g)||(de=Math.pow(10,g),te=Math.ceil(te*de)/de),o==="ticks"?(ee=Math.floor(R/te)*te,re=Math.ceil(H/te)*te):(ee=R,re=H),j&&V&&u&&iL((a-A)/u,te/1e3)?(xe=Math.round(Math.min((a-A)/te,B)),te=(a-A)/xe,ee=A,re=a):W?(ee=j?A:ee,re=V?a:re,xe=b-1,te=(re-ee)/xe):(xe=(re-ee)/te,Vg(xe,Math.round(xe),te/1e3)?xe=Math.round(xe):xe=Math.ceil(xe));const Be=Math.max(pw(te),pw(ee));de=Math.pow(10,ns(g)?Be:g),ee=Math.round(ee*de)/de,re=Math.round(re*de)/de;let se=0;for(j&&(P&&ee!==A?(i.push({value:A}),ee<A&&se++,Vg(Math.round((ee+se*te)*de)/de,A,v5(A,ne,t))&&se++):ee<A&&se++);se<xe;++se){const ae=Math.round((ee+se*te)*de)/de;if(V&&ae>a)break;i.push({value:ae})}return V&&P&&re!==a?i.length&&Vg(i[i.length-1].value,a,v5(a,ne,t))?i[i.length-1].value=a:i.push({value:a}):(!V||re===a)&&i.push({value:re}),i}function v5(t,e,{horizontal:i,minRotation:n}){const o=id(n),u=(i?Math.sin(o):Math.cos(o))||.001,A=.75*e*(""+t).length;return Math.min(e/u,A)}class Jj extends bm{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,i){return ns(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:o,max:u}=this;const A=g=>o=i?o:g,a=g=>u=n?u:g;if(e){const g=wh(o),b=wh(u);g<0&&b<0?a(0):g>0&&b>0&&A(0)}if(o===u){let g=u===0?1:Math.abs(u*.05);a(u+g),e||A(o-g)}this.min=o,this.max=u}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=e,o;return n?(o=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),i=i||11),i&&(o=Math.min(i,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,i=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},u=this._range||this,A=Yj(o,u);return e.bounds==="ticks"&&nL(A,this,"value"),e.reverse?(A.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),A}configure(){const e=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const o=(n-i)/Math.max(e.length-1,1)/2;i-=o,n+=o}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(e){return Qb(e,this.chart.options.locale,this.options.ticks.format)}}class i2 extends Jj{static id="linear";static defaults={ticks:{callback:F4.formatters.numeric}};determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=vc(e)?e:0,this.max=vc(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),i=e?this.width:this.height,n=id(this.options.ticks.minRotation),o=(e?Math.sin(n):Math.cos(n))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,u.lineHeight/o))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const y1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hu=Object.keys(y1);function _5(t,e){return t-e}function x5(t,e){if(ns(e))return null;const i=t._adapter,{parser:n,round:o,isoWeekday:u}=t._parseOpts;let A=e;return typeof n=="function"&&(A=n(A)),vc(A)||(A=typeof n=="string"?i.parse(A,n):i.parse(A)),A===null?null:(o&&(A=o==="week"&&(u0(u)||u===!0)?i.startOf(A,"isoWeek",u):i.startOf(A,o)),+A)}function b5(t,e,i,n){const o=hu.length;for(let u=hu.indexOf(t);u<o-1;++u){const A=y1[hu[u]],a=A.steps?A.steps:Number.MAX_SAFE_INTEGER;if(A.common&&Math.ceil((i-e)/(a*A.size))<=n)return hu[u]}return hu[o-1]}function e8(t,e,i,n,o){for(let u=hu.length-1;u>=hu.indexOf(i);u--){const A=hu[u];if(y1[A].common&&t._adapter.diff(o,n,A)>=e-1)return A}return hu[i?hu.indexOf(i):0]}function t8(t){for(let e=hu.indexOf(t)+1,i=hu.length;e<i;++e)if(y1[hu[e]].common)return hu[e]}function w5(t,e,i){if(!i)t[e]=!0;else if(i.length){const{lo:n,hi:o}=Db(i,e),u=i[n]>=e?i[n]:i[o];t[u]=!0}}function i8(t,e,i,n){const o=t._adapter,u=+o.startOf(e[0].value,n),A=e[e.length-1].value;let a,g;for(a=u;a<=A;a=+o.add(a,1,n))g=i[a],g>=0&&(e[g].major=!0);return e}function B5(t,e,i){const n=[],o={},u=e.length;let A,a;for(A=0;A<u;++A)a=e[A],o[a]=A,n.push({value:a,major:!1});return u===0||!i?n:i8(t,n,o,i)}class C5 extends bm{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const n=e.time||(e.time={}),o=this._adapter=new zP._date(e.adapters.date);o.init(i),Hg(n.displayFormats,o.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:x5(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,n=e.time.unit||"day";let{min:o,max:u,minDefined:A,maxDefined:a}=this.getUserBounds();function g(b){!A&&!isNaN(b.min)&&(o=Math.min(o,b.min)),!a&&!isNaN(b.max)&&(u=Math.max(u,b.max))}(!A||!a)&&(g(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&g(this.getMinMax(!1))),o=vc(o)&&!isNaN(o)?o:+i.startOf(Date.now(),n),u=vc(u)&&!isNaN(u)?u:+i.endOf(Date.now(),n)+1,this.min=Math.min(o,u-1),this.max=Math.max(o+1,u)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],n=e[e.length-1]),{min:i,max:n}}buildTicks(){const e=this.options,i=e.time,n=e.ticks,o=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const u=this.min,A=this.max,a=lL(o,u,A);return this._unit=i.unit||(n.autoSkip?b5(i.minUnit,this.min,this.max,this._getLabelCapacity(u)):e8(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:t8(this._unit),this.initOffsets(o),e.reverse&&a.reverse(),B5(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,n=0,o,u;this.options.offset&&e.length&&(o=this.getDecimalForValue(e[0]),e.length===1?i=1-o:i=(this.getDecimalForValue(e[1])-o)/2,u=this.getDecimalForValue(e[e.length-1]),e.length===1?n=u:n=(u-this.getDecimalForValue(e[e.length-2]))/2);const A=e.length<3?.5:.25;i=gc(i,0,A),n=gc(n,0,A),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const e=this._adapter,i=this.min,n=this.max,o=this.options,u=o.time,A=u.unit||b5(u.minUnit,i,n,this._getLabelCapacity(i)),a=Jn(o.ticks.stepSize,1),g=A==="week"?u.isoWeekday:!1,b=u0(g)||g===!0,B={};let I=i,P,F;if(b&&(I=+e.startOf(I,"isoWeek",g)),I=+e.startOf(I,b?"day":A),e.diff(n,i,A)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+A);const Q=o.ticks.source==="data"&&this.getDataTimestamps();for(P=I,F=0;P<n;P=+e.add(P,a,A),F++)w5(B,P,Q);return(P===n||o.bounds==="ticks"||F===1)&&w5(B,P,Q),Object.keys(B).sort(_5).map(R=>+R)}getLabelForValue(e){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(e,n.tooltipFormat):i.format(e,n.displayFormats.datetime)}format(e,i){const o=this.options.time.displayFormats,u=this._unit,A=i||o[u];return this._adapter.format(e,A)}_tickFormatFunction(e,i,n,o){const u=this.options,A=u.ticks.callback;if(A)return Ys(A,[e,i,n],this);const a=u.time.displayFormats,g=this._unit,b=this._majorUnit,B=g&&a[g],I=b&&a[b],P=n[i],F=b&&I&&P&&P.major;return this._adapter.format(e,o||(F?I:B))}generateTickLabels(e){let i,n,o;for(i=0,n=e.length;i<n;++i)o=e[i],o.label=this._tickFormatFunction(o.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,n=this.ctx.measureText(e).width,o=id(this.isHorizontal()?i.maxRotation:i.minRotation),u=Math.cos(o),A=Math.sin(o),a=this._resolveTickFontOptions(0).size;return{w:n*u+a*A,h:n*A+a*u}}_getLabelCapacity(e){const i=this.options.time,n=i.displayFormats,o=n[i.unit]||n.millisecond,u=this._tickFormatFunction(e,0,B5(this,[e],this._majorUnit),o),A=this._getLabelSize(u),a=Math.floor(this.isHorizontal()?this.width/A.w:this.height/A.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],i,n;if(e.length)return e;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(i=0,n=o.length;i<n;++i)e=e.concat(o[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,n;if(e.length)return e;const o=this.getLabels();for(i=0,n=o.length;i<n;++i)e.push(x5(this,o[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return S4(e.sort(_5))}}function jy(t,e,i){let n=0,o=t.length-1,u,A,a,g;i?(e>=t[n].pos&&e<=t[o].pos&&({lo:n,hi:o}=Of(t,"pos",e)),{pos:u,time:a}=t[n],{pos:A,time:g}=t[o]):(e>=t[n].time&&e<=t[o].time&&({lo:n,hi:o}=Of(t,"time",e)),{time:u,pos:a}=t[n],{time:A,pos:g}=t[o]);const b=A-u;return b?a+(g-a)*(e-u)/b:a}class Sz extends C5{static id="timeseries";static defaults=C5.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=jy(i,this.min),this._tableRange=jy(i,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:i,max:n}=this,o=[],u=[];let A,a,g,b,B;for(A=0,a=e.length;A<a;++A)b=e[A],b>=i&&b<=n&&o.push(b);if(o.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(A=0,a=o.length;A<a;++A)B=o[A+1],g=o[A-1],b=o[A],Math.round((B+g)/2)!==b&&u.push({time:b,pos:A/(a-1)});return u}_generate(){const e=this.min,i=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(i)||n.length===1)&&n.push(i),n.sort((o,u)=>o-u)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?e=this.normalize(i.concat(n)):e=i.length?i:n,e=this._cache.all=e,e}getDecimalForValue(e){return(jy(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return jy(this._table,n*this._tableRange+this._minPos,!0)}}const uS="label";function S5(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function n8(t,e){const i=t.options;i&&e&&Object.assign(i,e)}function AS(t,e){t.labels=e}function hS(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uS;const n=[];t.datasets=e.map(o=>{const u=t.datasets.find(A=>A[i]===o[i]);return!u||!o.data||n.includes(u)?{...o}:(n.push(u),Object.assign(u,o),u)})}function r8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uS;const i={labels:[],datasets:[]};return AS(i,t.labels),hS(i,t.datasets,e),i}function s8(t,e){const{height:i=150,width:n=300,redraw:o=!1,datasetIdKey:u,type:A,data:a,options:g,plugins:b=[],fallbackContent:B,updateMode:I,...P}=t,F=Te.useRef(null),Q=Te.useRef(null),R=()=>{F.current&&(Q.current=new wm(F.current,{type:A,data:r8(a,u),options:g&&{...g},plugins:b}),S5(e,Q.current))},H=()=>{S5(e,null),Q.current&&(Q.current.destroy(),Q.current=null)};return Te.useEffect(()=>{!o&&Q.current&&g&&n8(Q.current,g)},[o,g]),Te.useEffect(()=>{!o&&Q.current&&AS(Q.current.config.data,a.labels)},[o,a.labels]),Te.useEffect(()=>{!o&&Q.current&&a.datasets&&hS(Q.current.config.data,a.datasets,u)},[o,a.datasets]),Te.useEffect(()=>{Q.current&&(o?(H(),setTimeout(R)):Q.current.update(I))},[o,g,a.labels,a.datasets,I]),Te.useEffect(()=>{Q.current&&(H(),setTimeout(R))},[A]),Te.useEffect(()=>(R(),()=>H()),[]),yr.createElement("canvas",{ref:F,role:"img",height:i,width:n,...P},B)}const a8=Te.forwardRef(s8);function n2(t,e){return wm.register(e),Te.forwardRef((i,n)=>yr.createElement(a8,{...i,ref:n,type:t}))}const o8=n2("line",QP),S_=n2("bar",DP),E5=n2("doughnut",OP),l8="modulepreload",c8=function(t){return"/"+t},T5={},kx=function(e,i,n){let o=Promise.resolve();if(i&&i.length>0){let g=function(b){return Promise.all(b.map(B=>Promise.resolve(B).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};document.getElementsByTagName("link");const A=document.querySelector("meta[property=csp-nonce]"),a=A?.nonce||A?.getAttribute("nonce");o=g(i.map(b=>{if(b=c8(b),b in T5)return;T5[b]=!0;const B=b.endsWith(".css"),I=B?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${I}`))return;const P=document.createElement("link");if(P.rel=B?"stylesheet":l8,B||(P.as="script"),P.crossOrigin="",P.href=b,a&&P.setAttribute("nonce",a),document.head.appendChild(P),B)return new Promise((F,Q)=>{P.addEventListener("load",F),P.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${b}`)))})}))}function u(A){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=A,window.dispatchEvent(a),!a.defaultPrevented)throw A}return o.then(A=>{for(const a of A||[])a.status==="rejected"&&u(a.reason);return e().catch(u)})};function hs(t){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hs(t)}var mc=Uint8Array,Pu=Uint16Array,r2=Int32Array,v1=new mc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_1=new mc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jx=new mc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dS=function(t,e){for(var i=new Pu(31),n=0;n<31;++n)i[n]=e+=1<<t[n-1];for(var o=new r2(i[30]),n=1;n<30;++n)for(var u=i[n];u<i[n+1];++u)o[u]=u-i[n]<<5|n;return{b:i,r:o}},fS=dS(v1,2),pS=fS.b,Ux=fS.r;pS[28]=258,Ux[258]=28;var mS=dS(_1,0),u8=mS.b,F5=mS.r,Dx=new Pu(32768);for(var Js=0;Js<32768;++Js){var Dd=(Js&43690)>>1|(Js&21845)<<1;Dd=(Dd&52428)>>2|(Dd&13107)<<2,Dd=(Dd&61680)>>4|(Dd&3855)<<4,Dx[Js]=((Dd&65280)>>8|(Dd&255)<<8)>>1}var Bh=function(t,e,i){for(var n=t.length,o=0,u=new Pu(e);o<n;++o)t[o]&&++u[t[o]-1];var A=new Pu(e);for(o=1;o<e;++o)A[o]=A[o-1]+u[o-1]<<1;var a;if(i){a=new Pu(1<<e);var g=15-e;for(o=0;o<n;++o)if(t[o])for(var b=o<<4|t[o],B=e-t[o],I=A[t[o]-1]++<<B,P=I|(1<<B)-1;I<=P;++I)a[Dx[I]>>g]=b}else for(a=new Pu(n),o=0;o<n;++o)t[o]&&(a[o]=Dx[A[t[o]-1]++]>>15-t[o]);return a},rf=new mc(288);for(var Js=0;Js<144;++Js)rf[Js]=8;for(var Js=144;Js<256;++Js)rf[Js]=9;for(var Js=256;Js<280;++Js)rf[Js]=7;for(var Js=280;Js<288;++Js)rf[Js]=8;var p0=new mc(32);for(var Js=0;Js<32;++Js)p0[Js]=5;var A8=Bh(rf,9,0),h8=Bh(rf,9,1),d8=Bh(p0,5,0),f8=Bh(p0,5,1),E_=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},OA=function(t,e,i){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&i},T_=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(e&7)},s2=function(t){return(t+7)/8|0},gS=function(t,e,i){return(i==null||i>t.length)&&(i=t.length),new mc(t.subarray(e,i))},p8=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],HA=function(t,e,i){var n=new Error(e||p8[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,HA),!i)throw n;return n},m8=function(t,e,i,n){var o=t.length,u=0;if(!o||e.f&&!e.l)return i||new mc(0);var A=!i,a=A||e.i!=2,g=e.i;A&&(i=new mc(o*3));var b=function(Vt){var Yt=i.length;if(Vt>Yt){var Jt=new mc(Math.max(Yt*2,Vt));Jt.set(i),i=Jt}},B=e.f||0,I=e.p||0,P=e.b||0,F=e.l,Q=e.d,R=e.m,H=e.n,j=o*8;do{if(!F){B=OA(t,I,1);var V=OA(t,I+1,3);if(I+=3,V)if(V==1)F=h8,Q=f8,R=9,H=5;else if(V==2){var de=OA(t,I,31)+257,ee=OA(t,I+10,15)+4,re=de+OA(t,I+5,31)+1;I+=14;for(var xe=new mc(re),Be=new mc(19),se=0;se<ee;++se)Be[jx[se]]=OA(t,I+se*3,7);I+=ee*3;for(var ae=E_(Be),ce=(1<<ae)-1,Ee=Bh(Be,ae,1),se=0;se<re;){var Ve=Ee[OA(t,I,ce)];I+=Ve&15;var W=Ve>>4;if(W<16)xe[se++]=W;else{var ue=0,fe=0;for(W==16?(fe=3+OA(t,I,3),I+=2,ue=xe[se-1]):W==17?(fe=3+OA(t,I,7),I+=3):W==18&&(fe=11+OA(t,I,127),I+=7);fe--;)xe[se++]=ue}}var Ue=xe.subarray(0,de),ke=xe.subarray(de);R=E_(Ue),H=E_(ke),F=Bh(Ue,R,1),Q=Bh(ke,H,1)}else HA(1);else{var W=s2(I)+4,ne=t[W-4]|t[W-3]<<8,te=W+ne;if(te>o){g&&HA(0);break}a&&b(P+ne),i.set(t.subarray(W,te),P),e.b=P+=ne,e.p=I=te*8,e.f=B;continue}if(I>j){g&&HA(0);break}}a&&b(P+131072);for(var pe=(1<<R)-1,Qe=(1<<H)-1,J=I;;J=I){var ue=F[T_(t,I)&pe],me=ue>>4;if(I+=ue&15,I>j){g&&HA(0);break}if(ue||HA(2),me<256)i[P++]=me;else if(me==256){J=I,F=null;break}else{var Fe=me-254;if(me>264){var se=me-257,ze=v1[se];Fe=OA(t,I,(1<<ze)-1)+pS[se],I+=ze}var Ke=Q[T_(t,I)&Qe],_t=Ke>>4;Ke||HA(3),I+=Ke&15;var ke=u8[_t];if(_t>3){var ze=_1[_t];ke+=T_(t,I)&(1<<ze)-1,I+=ze}if(I>j){g&&HA(0);break}a&&b(P+131072);var gt=P+Fe;if(P<ke){var Et=u-ke,hi=Math.min(ke,gt);for(Et+P<0&&HA(3);P<hi;++P)i[P]=n[Et+P]}for(;P<gt;++P)i[P]=i[P-ke]}}e.l=F,e.p=J,e.b=P,e.f=B,F&&(B=1,e.m=R,e.d=Q,e.n=H)}while(!B);return P!=i.length&&A?gS(i,0,P):i.subarray(0,P)},Zh=function(t,e,i){i<<=e&7;var n=e/8|0;t[n]|=i,t[n+1]|=i>>8},wg=function(t,e,i){i<<=e&7;var n=e/8|0;t[n]|=i,t[n+1]|=i>>8,t[n+2]|=i>>16},F_=function(t,e){for(var i=[],n=0;n<t.length;++n)t[n]&&i.push({s:n,f:t[n]});var o=i.length,u=i.slice();if(!o)return{t:vS,l:0};if(o==1){var A=new mc(i[0].s+1);return A[i[0].s]=1,{t:A,l:1}}i.sort(function(te,de){return te.f-de.f}),i.push({s:-1,f:25001});var a=i[0],g=i[1],b=0,B=1,I=2;for(i[0]={s:-1,f:a.f+g.f,l:a,r:g};B!=o-1;)a=i[i[b].f<i[I].f?b++:I++],g=i[b!=B&&i[b].f<i[I].f?b++:I++],i[B++]={s:-1,f:a.f+g.f,l:a,r:g};for(var P=u[0].s,n=1;n<o;++n)u[n].s>P&&(P=u[n].s);var F=new Pu(P+1),Q=Rx(i[B-1],F,0);if(Q>e){var n=0,R=0,H=Q-e,j=1<<H;for(u.sort(function(de,ee){return F[ee.s]-F[de.s]||de.f-ee.f});n<o;++n){var V=u[n].s;if(F[V]>e)R+=j-(1<<Q-F[V]),F[V]=e;else break}for(R>>=H;R>0;){var W=u[n].s;F[W]<e?R-=1<<e-F[W]++-1:++n}for(;n>=0&&R;--n){var ne=u[n].s;F[ne]==e&&(--F[ne],++R)}Q=e}return{t:new mc(F),l:Q}},Rx=function(t,e,i){return t.s==-1?Math.max(Rx(t.l,e,i+1),Rx(t.r,e,i+1)):e[t.s]=i},N5=function(t){for(var e=t.length;e&&!t[--e];);for(var i=new Pu(++e),n=0,o=t[0],u=1,A=function(g){i[n++]=g},a=1;a<=e;++a)if(t[a]==o&&a!=e)++u;else{if(!o&&u>2){for(;u>138;u-=138)A(32754);u>2&&(A(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(A(o),--u;u>6;u-=6)A(8304);u>2&&(A(u-3<<5|8208),u=0)}for(;u--;)A(o);u=1,o=t[a]}return{c:i.subarray(0,n),n:e}},Bg=function(t,e){for(var i=0,n=0;n<e.length;++n)i+=t[n]*e[n];return i},yS=function(t,e,i){var n=i.length,o=s2(e+2);t[o]=n&255,t[o+1]=n>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var u=0;u<n;++u)t[o+u+4]=i[u];return(o+4+n)*8},M5=function(t,e,i,n,o,u,A,a,g,b,B){Zh(e,B++,i),++o[256];for(var I=F_(o,15),P=I.t,F=I.l,Q=F_(u,15),R=Q.t,H=Q.l,j=N5(P),V=j.c,W=j.n,ne=N5(R),te=ne.c,de=ne.n,ee=new Pu(19),re=0;re<V.length;++re)++ee[V[re]&31];for(var re=0;re<te.length;++re)++ee[te[re]&31];for(var xe=F_(ee,7),Be=xe.t,se=xe.l,ae=19;ae>4&&!Be[jx[ae-1]];--ae);var ce=b+5<<3,Ee=Bg(o,rf)+Bg(u,p0)+A,Ve=Bg(o,P)+Bg(u,R)+A+14+3*ae+Bg(ee,Be)+2*ee[16]+3*ee[17]+7*ee[18];if(g>=0&&ce<=Ee&&ce<=Ve)return yS(e,B,t.subarray(g,g+b));var ue,fe,Ue,ke;if(Zh(e,B,1+(Ve<Ee)),B+=2,Ve<Ee){ue=Bh(P,F,0),fe=P,Ue=Bh(R,H,0),ke=R;var pe=Bh(Be,se,0);Zh(e,B,W-257),Zh(e,B+5,de-1),Zh(e,B+10,ae-4),B+=14;for(var re=0;re<ae;++re)Zh(e,B+3*re,Be[jx[re]]);B+=3*ae;for(var Qe=[V,te],J=0;J<2;++J)for(var me=Qe[J],re=0;re<me.length;++re){var Fe=me[re]&31;Zh(e,B,pe[Fe]),B+=Be[Fe],Fe>15&&(Zh(e,B,me[re]>>5&127),B+=me[re]>>12)}}else ue=A8,fe=rf,Ue=d8,ke=p0;for(var re=0;re<a;++re){var ze=n[re];if(ze>255){var Fe=ze>>18&31;wg(e,B,ue[Fe+257]),B+=fe[Fe+257],Fe>7&&(Zh(e,B,ze>>23&31),B+=v1[Fe]);var Ke=ze&31;wg(e,B,Ue[Ke]),B+=ke[Ke],Ke>3&&(wg(e,B,ze>>5&8191),B+=_1[Ke])}else wg(e,B,ue[ze]),B+=fe[ze]}return wg(e,B,ue[256]),B+fe[256]},g8=new r2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),vS=new mc(0),y8=function(t,e,i,n,o,u){var A=u.z||t.length,a=new mc(n+A+5*(1+Math.ceil(A/7e3))+o),g=a.subarray(n,a.length-o),b=u.l,B=(u.r||0)&7;if(e){B&&(g[0]=u.r>>3);for(var I=g8[e-1],P=I>>13,F=I&8191,Q=(1<<i)-1,R=u.p||new Pu(32768),H=u.h||new Pu(Q+1),j=Math.ceil(i/3),V=2*j,W=function(bi){return(t[bi]^t[bi+1]<<j^t[bi+2]<<V)&Q},ne=new r2(25e3),te=new Pu(288),de=new Pu(32),ee=0,re=0,xe=u.i||0,Be=0,se=u.w||0,ae=0;xe+2<A;++xe){var ce=W(xe),Ee=xe&32767,Ve=H[ce];if(R[Ee]=Ve,H[ce]=Ee,se<=xe){var ue=A-xe;if((ee>7e3||Be>24576)&&(ue>423||!b)){B=M5(t,g,0,ne,te,de,re,Be,ae,xe-ae,B),Be=ee=re=0,ae=xe;for(var fe=0;fe<286;++fe)te[fe]=0;for(var fe=0;fe<30;++fe)de[fe]=0}var Ue=2,ke=0,pe=F,Qe=Ee-Ve&32767;if(ue>2&&ce==W(xe-Qe))for(var J=Math.min(P,ue)-1,me=Math.min(32767,xe),Fe=Math.min(258,ue);Qe<=me&&--pe&&Ee!=Ve;){if(t[xe+Ue]==t[xe+Ue-Qe]){for(var ze=0;ze<Fe&&t[xe+ze]==t[xe+ze-Qe];++ze);if(ze>Ue){if(Ue=ze,ke=Qe,ze>J)break;for(var Ke=Math.min(Qe,ze-2),_t=0,fe=0;fe<Ke;++fe){var gt=xe-Qe+fe&32767,Et=R[gt],hi=gt-Et&32767;hi>_t&&(_t=hi,Ve=gt)}}}Ee=Ve,Ve=R[Ee],Qe+=Ee-Ve&32767}if(ke){ne[Be++]=268435456|Ux[Ue]<<18|F5[ke];var Vt=Ux[Ue]&31,Yt=F5[ke]&31;re+=v1[Vt]+_1[Yt],++te[257+Vt],++de[Yt],se=xe+Ue,++ee}else ne[Be++]=t[xe],++te[t[xe]]}}for(xe=Math.max(xe,se);xe<A;++xe)ne[Be++]=t[xe],++te[t[xe]];B=M5(t,g,b,ne,te,de,re,Be,ae,xe-ae,B),b||(u.r=B&7|g[B/8|0]<<3,B-=7,u.h=H,u.p=R,u.i=xe,u.w=se)}else{for(var xe=u.w||0;xe<A+b;xe+=65535){var Jt=xe+65535;Jt>=A&&(g[B/8|0]=b,Jt=A),B=yS(g,B+1,t.subarray(xe,Jt))}u.i=A}return gS(a,0,n+s2(B)+o)},_S=function(){var t=1,e=0;return{p:function(i){for(var n=t,o=e,u=i.length|0,A=0;A!=u;){for(var a=Math.min(A+2655,u);A<a;++A)o+=n+=i[A];n=(n&65535)+15*(n>>16),o=(o&65535)+15*(o>>16)}t=n,e=o},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},v8=function(t,e,i,n,o){if(!o&&(o={l:1},e.dictionary)){var u=e.dictionary.subarray(-32768),A=new mc(u.length+t.length);A.set(u),A.set(t,u.length),t=A,o.w=u.length}return y8(t,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,i,n,o)},xS=function(t,e,i){for(;i;++e)t[e]=i,i>>>=8},_8=function(t,e){var i=e.level,n=i==0?0:i<6?1:i==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var o=_S();o.p(e.dictionary),xS(t,2,o.d())}},x8=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&HA(6,"invalid zlib data"),(t[1]>>5&1)==1&&HA(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Ox(t,e){e||(e={});var i=_S();i.p(t);var n=v8(t,e,e.dictionary?6:2,4);return _8(n,e),xS(n,n.length-4,i.d()),n}function b8(t,e){return m8(t.subarray(x8(t),-4),{i:2},e,e)}var w8=typeof TextDecoder<"u"&&new TextDecoder,B8=0;try{w8.decode(vS,{stream:!0}),B8=1}catch{}var Tn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function N_(){Tn.console&&typeof Tn.console.log=="function"&&Tn.console.log.apply(Tn.console,arguments)}var Fs={log:N_,warn:function(t){Tn.console&&(typeof Tn.console.warn=="function"?Tn.console.warn.apply(Tn.console,arguments):N_.call(null,arguments))},error:function(t){Tn.console&&(typeof Tn.console.error=="function"?Tn.console.error.apply(Tn.console,arguments):N_(t))}};function M_(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Uf(n.response,e,i)},n.onerror=function(){Fs.error("could not download file")},n.send()}function I5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Uy(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Kg,Qx,Uf=Tn.saveAs||((typeof window>"u"?"undefined":hs(window))!=="object"||window!==Tn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,i){var n=Tn.URL||Tn.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?I5(o.href)?M_(t,e,i):Uy(o,o.target="_blank"):Uy(o)):(o.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(o.href)},4e4),setTimeout(function(){Uy(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,i){if(e=e||t.name||"download",typeof t=="string")if(I5(t))M_(t,e,i);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Uy(n)})}else navigator.msSaveOrOpenBlob(function(o,u){return u===void 0?u={autoBom:!1}:hs(u)!=="object"&&(Fs.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,i),e)}:function(t,e,i,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return M_(t,e,i);var o=t.type==="application/octet-stream",u=/constructor/i.test(Tn.HTMLElement)||Tn.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||o&&u)&&(typeof FileReader>"u"?"undefined":hs(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var B=a.result;B=A?B:B.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=B:location=B,n=null},a.readAsDataURL(t)}else{var g=Tn.URL||Tn.webkitURL,b=g.createObjectURL(t);n?n.location=b:location.href=b,n=null,setTimeout(function(){g.revokeObjectURL(b)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function bS(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<i.length;n++){var o=i[n].re,u=i[n].process,A=o.exec(t);A&&(e=u(A),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),g=this.g.toString(16),b=this.b.toString(16);return a.length==1&&(a="0"+a),g.length==1&&(g="0"+g),b.length==1&&(b="0"+b),"#"+a+g+b}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function I_(t,e){var i=t[0],n=t[1],o=t[2],u=t[3];i=lc(i,n,o,u,e[0],7,-680876936),u=lc(u,i,n,o,e[1],12,-389564586),o=lc(o,u,i,n,e[2],17,606105819),n=lc(n,o,u,i,e[3],22,-1044525330),i=lc(i,n,o,u,e[4],7,-176418897),u=lc(u,i,n,o,e[5],12,1200080426),o=lc(o,u,i,n,e[6],17,-1473231341),n=lc(n,o,u,i,e[7],22,-45705983),i=lc(i,n,o,u,e[8],7,1770035416),u=lc(u,i,n,o,e[9],12,-1958414417),o=lc(o,u,i,n,e[10],17,-42063),n=lc(n,o,u,i,e[11],22,-1990404162),i=lc(i,n,o,u,e[12],7,1804603682),u=lc(u,i,n,o,e[13],12,-40341101),o=lc(o,u,i,n,e[14],17,-1502002290),i=cc(i,n=lc(n,o,u,i,e[15],22,1236535329),o,u,e[1],5,-165796510),u=cc(u,i,n,o,e[6],9,-1069501632),o=cc(o,u,i,n,e[11],14,643717713),n=cc(n,o,u,i,e[0],20,-373897302),i=cc(i,n,o,u,e[5],5,-701558691),u=cc(u,i,n,o,e[10],9,38016083),o=cc(o,u,i,n,e[15],14,-660478335),n=cc(n,o,u,i,e[4],20,-405537848),i=cc(i,n,o,u,e[9],5,568446438),u=cc(u,i,n,o,e[14],9,-1019803690),o=cc(o,u,i,n,e[3],14,-187363961),n=cc(n,o,u,i,e[8],20,1163531501),i=cc(i,n,o,u,e[13],5,-1444681467),u=cc(u,i,n,o,e[2],9,-51403784),o=cc(o,u,i,n,e[7],14,1735328473),i=uc(i,n=cc(n,o,u,i,e[12],20,-1926607734),o,u,e[5],4,-378558),u=uc(u,i,n,o,e[8],11,-2022574463),o=uc(o,u,i,n,e[11],16,1839030562),n=uc(n,o,u,i,e[14],23,-35309556),i=uc(i,n,o,u,e[1],4,-1530992060),u=uc(u,i,n,o,e[4],11,1272893353),o=uc(o,u,i,n,e[7],16,-155497632),n=uc(n,o,u,i,e[10],23,-1094730640),i=uc(i,n,o,u,e[13],4,681279174),u=uc(u,i,n,o,e[0],11,-358537222),o=uc(o,u,i,n,e[3],16,-722521979),n=uc(n,o,u,i,e[6],23,76029189),i=uc(i,n,o,u,e[9],4,-640364487),u=uc(u,i,n,o,e[12],11,-421815835),o=uc(o,u,i,n,e[15],16,530742520),i=Ac(i,n=uc(n,o,u,i,e[2],23,-995338651),o,u,e[0],6,-198630844),u=Ac(u,i,n,o,e[7],10,1126891415),o=Ac(o,u,i,n,e[14],15,-1416354905),n=Ac(n,o,u,i,e[5],21,-57434055),i=Ac(i,n,o,u,e[12],6,1700485571),u=Ac(u,i,n,o,e[3],10,-1894986606),o=Ac(o,u,i,n,e[10],15,-1051523),n=Ac(n,o,u,i,e[1],21,-2054922799),i=Ac(i,n,o,u,e[8],6,1873313359),u=Ac(u,i,n,o,e[15],10,-30611744),o=Ac(o,u,i,n,e[6],15,-1560198380),n=Ac(n,o,u,i,e[13],21,1309151649),i=Ac(i,n,o,u,e[4],6,-145523070),u=Ac(u,i,n,o,e[11],10,-1120210379),o=Ac(o,u,i,n,e[2],15,718787259),n=Ac(n,o,u,i,e[9],21,-343485551),t[0]=Kd(i,t[0]),t[1]=Kd(n,t[1]),t[2]=Kd(o,t[2]),t[3]=Kd(u,t[3])}function x1(t,e,i,n,o,u){return e=Kd(Kd(e,t),Kd(n,u)),Kd(e<<o|e>>>32-o,i)}function lc(t,e,i,n,o,u,A){return x1(e&i|~e&n,t,e,o,u,A)}function cc(t,e,i,n,o,u,A){return x1(e&n|i&~n,t,e,o,u,A)}function uc(t,e,i,n,o,u,A){return x1(e^i^n,t,e,o,u,A)}function Ac(t,e,i,n,o,u,A){return x1(i^(e|~n),t,e,o,u,A)}function wS(t){var e,i=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)I_(n,C8(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(I_(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*i,I_(n,o),n}function C8(t){var e,i=[];for(e=0;e<64;e+=4)i[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return i}Kg=Tn.atob.bind(Tn),Qx=Tn.btoa.bind(Tn);var L5="0123456789abcdef".split("");function S8(t){for(var e="",i=0;i<4;i++)e+=L5[t>>8*i+4&15]+L5[t>>8*i&15];return e}function E8(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function zx(t){return wS(t).map(E8).join("")}var T8=function(t){for(var e=0;e<t.length;e++)t[e]=S8(t[e]);return t.join("")}(wS("hello"))!="5d41402abc4b2a76b9719d911017c592";function Kd(t,e){if(T8){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Hx(t,e){var i,n,o,u;if(t!==i){for(var A=(o=t,u=1+(256/t.length>>0),new Array(u+1).join(o)),a=[],g=0;g<256;g++)a[g]=g;var b=0;for(g=0;g<256;g++){var B=a[g];b=(b+B+A.charCodeAt(g))%256,a[g]=a[b],a[b]=B}i=t,n=a}else a=n;var I=e.length,P=0,F=0,Q="";for(g=0;g<I;g++)F=(F+(B=a[P=(P+1)%256]))%256,a[P]=a[F],a[F]=B,A=a[(a[P]+a[F])%256],Q+=String.fromCharCode(e.charCodeAt(g)^A);return Q}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var P5={print:4,modify:8,copy:16,"annot-forms":32};function em(t,e,i,n){this.v=1,this.r=2;var o=192;t.forEach(function(a){if(P5.perm!==void 0)throw new Error("Invalid permission: "+a);o+=P5[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var u=(e+this.padding).substr(0,32),A=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,A),this.P=-(1+(255^o)),this.encryptionKey=zx(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Hx(this.encryptionKey,this.padding)}function tm(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",i=t.length,n=0;n<i;n++){var o=t.charCodeAt(n);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=t[n]}return e}function k5(t){if(hs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(i,n,o){if(o=o||!1,typeof i!="string"||typeof n!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(i)||(e[i]={});var u=Math.random().toString(35);return e[i][u]=[n,!!o],u},this.unsubscribe=function(i){for(var n in e)if(e[n][i])return delete e[n][i],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(i){if(e.hasOwnProperty(i)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var u in e[i]){var A=e[i][u];try{A[0].apply(t,n)}catch(a){Tn.console&&Fs.error("jsPDF PubSub Error",a.message,a)}A[1]&&o.push(u)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function m0(t){if(!(this instanceof m0))return new m0(t);var e="opacity,stroke-opacity".split(",");for(var i in t)t.hasOwnProperty(i)&&e.indexOf(i)>=0&&(this[i]=t[i]);this.id="",this.objectNumber=-1}function BS(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Vd(t,e,i,n,o){if(!(this instanceof Vd))return new Vd(t,e,i,n,o);this.type=t==="axial"?2:3,this.coords=e,this.colors=i,BS.call(this,n,o)}function Qf(t,e,i,n,o){if(!(this instanceof Qf))return new Qf(t,e,i,n,o);this.boundingBox=t,this.xStep=e,this.yStep=i,this.stream="",this.cloneIndex=0,BS.call(this,n,o)}function Bn(t){var e,i=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],o=arguments[2],u=arguments[3],A=[],a=1,g=16,b="S",B=null;hs(t=t||{})==="object"&&(i=t.orientation,n=t.unit||n,o=t.format||o,u=t.compress||t.compressPdf||u,(B=t.encryption||null)!==null&&(B.userPassword=B.userPassword||"",B.ownerPassword=B.ownerPassword||"",B.userPermissions=B.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(g=t.floatPrecision),b=t.defaultPathOperation||"S"),A=t.filters||(u===!0?["FlateEncode"]:A),n=n||"mm",i=(""+(i||"P")).toLowerCase();var I=t.putOnlyUsedFonts||!1,P={},F={internal:{},__private__:{}};F.__private__.PubSub=k5;var Q="1.3",R=F.__private__.getPdfVersion=function(){return Q};F.__private__.setPdfVersion=function(K){Q=K};var H={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};F.__private__.getPageFormats=function(){return H};var j=F.__private__.getPageFormat=function(K){return H[K]};o=o||"a4";var V={COMPAT:"compat",ADVANCED:"advanced"},W=V.COMPAT;function ne(){this.saveGraphicsState(),$e(new Pi(ge,0,0,-ge,0,ia()*ge).toString()+" cm"),this.setFontSize(this.getFontSize()/ge),b="n",W=V.ADVANCED}function te(){this.restoreGraphicsState(),b="S",W=V.COMPAT}var de=F.__private__.combineFontStyleAndFontWeight=function(K,Se){if(K=="bold"&&Se=="normal"||K=="bold"&&Se==400||K=="normal"&&Se=="italic"||K=="bold"&&Se=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Se&&(K=Se==400||Se==="normal"?K==="italic"?"italic":"normal":Se!=700&&Se!=="bold"||K!=="normal"?(Se==700?"bold":Se)+""+K:"bold"),K};F.advancedAPI=function(K){var Se=W===V.COMPAT;return Se&&ne.call(this),typeof K!="function"||(K(this),Se&&te.call(this)),this},F.compatAPI=function(K){var Se=W===V.ADVANCED;return Se&&te.call(this),typeof K!="function"||(K(this),Se&&ne.call(this)),this},F.isAdvancedAPI=function(){return W===V.ADVANCED};var ee,re=function(K){if(W!==V.ADVANCED)throw new Error(K+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},xe=F.roundToPrecision=F.__private__.roundToPrecision=function(K,Se){var tt=e||Se;if(isNaN(K)||isNaN(tt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return K.toFixed(tt).replace(/0+$/,"")};ee=F.hpf=F.__private__.hpf=typeof g=="number"?function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return xe(K,g)}:g==="smart"?function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return xe(K,K>-1&&K<1?16:5)}:function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return xe(K,16)};var Be=F.f2=F.__private__.f2=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.f2");return xe(K,2)},se=F.__private__.f3=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.f3");return xe(K,3)},ae=F.scale=F.__private__.scale=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.scale");return W===V.COMPAT?K*ge:W===V.ADVANCED?K:void 0},ce=function(K){return W===V.COMPAT?ia()-K:W===V.ADVANCED?K:void 0},Ee=function(K){return ae(ce(K))};F.__private__.setPrecision=F.setPrecision=function(K){typeof parseInt(K,10)=="number"&&(e=parseInt(K,10))};var Ve,ue="00000000000000000000000000000000",fe=F.__private__.getFileId=function(){return ue},Ue=F.__private__.setFileId=function(K){return ue=K!==void 0&&/^[a-fA-F0-9]{32}$/.test(K)?K.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),B!==null&&(fs=new em(B.userPermissions,B.userPassword,B.ownerPassword,ue)),ue};F.setFileId=function(K){return Ue(K),this},F.getFileId=function(){return fe()};var ke=F.__private__.convertDateToPDFDate=function(K){var Se=K.getTimezoneOffset(),tt=Se<0?"+":"-",ft=Math.floor(Math.abs(Se/60)),Ft=Math.abs(Se%60),Gt=[tt,Fe(ft),"'",Fe(Ft),"'"].join("");return["D:",K.getFullYear(),Fe(K.getMonth()+1),Fe(K.getDate()),Fe(K.getHours()),Fe(K.getMinutes()),Fe(K.getSeconds()),Gt].join("")},pe=F.__private__.convertPDFDateToDate=function(K){var Se=parseInt(K.substr(2,4),10),tt=parseInt(K.substr(6,2),10)-1,ft=parseInt(K.substr(8,2),10),Ft=parseInt(K.substr(10,2),10),Gt=parseInt(K.substr(12,2),10),fi=parseInt(K.substr(14,2),10);return new Date(Se,tt,ft,Ft,Gt,fi,0)},Qe=F.__private__.setCreationDate=function(K){var Se;if(K===void 0&&(K=new Date),K instanceof Date)Se=ke(K);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(K))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Se=K}return Ve=Se},J=F.__private__.getCreationDate=function(K){var Se=Ve;return K==="jsDate"&&(Se=pe(Ve)),Se};F.setCreationDate=function(K){return Qe(K),this},F.getCreationDate=function(K){return J(K)};var me,Fe=F.__private__.padd2=function(K){return("0"+parseInt(K)).slice(-2)},ze=F.__private__.padd2Hex=function(K){return("00"+(K=K.toString())).substr(K.length)},Ke=0,_t=[],gt=[],Et=0,hi=[],Vt=[],Yt=!1,Jt=gt,bi=function(){Ke=0,Et=0,gt=[],_t=[],hi=[],jr=Kt(),or=Kt()};F.__private__.setCustomOutputDestination=function(K){Yt=!0,Jt=K};var ot=function(K){Yt||(Jt=K)};F.__private__.resetCustomOutputDestination=function(){Yt=!1,Jt=gt};var $e=F.__private__.out=function(K){return K=K.toString(),Et+=K.length+1,Jt.push(K),Jt},Ni=F.__private__.write=function(K){return $e(arguments.length===1?K.toString():Array.prototype.join.call(arguments," "))},yi=F.__private__.getArrayBuffer=function(K){for(var Se=K.length,tt=new ArrayBuffer(Se),ft=new Uint8Array(tt);Se--;)ft[Se]=K.charCodeAt(Se);return tt},si=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];F.__private__.getStandardFonts=function(){return si};var Mt=t.fontSize||16;F.__private__.setFontSize=F.setFontSize=function(K){return Mt=W===V.ADVANCED?K/ge:K,this};var ei,ai=F.__private__.getFontSize=F.getFontSize=function(){return W===V.COMPAT?Mt:Mt*ge},Ei=t.R2L||!1;F.__private__.setR2L=F.setR2L=function(K){return Ei=K,this},F.__private__.getR2L=F.getR2L=function(){return Ei};var $i,zi=F.__private__.setZoomMode=function(K){var Se=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(K))ei=K;else if(isNaN(K)){if(Se.indexOf(K)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+K+'" is not recognized.');ei=K}else ei=parseInt(K,10)};F.__private__.getZoomMode=function(){return ei};var wi,Gi=F.__private__.setPageMode=function(K){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(K)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+K+'" is not recognized.');$i=K};F.__private__.getPageMode=function(){return $i};var gn=F.__private__.setLayoutMode=function(K){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(K)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+K+'" is not recognized.');wi=K};F.__private__.getLayoutMode=function(){return wi},F.__private__.setDisplayMode=F.setDisplayMode=function(K,Se,tt){return zi(K),gn(Se),Gi(tt),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};F.__private__.getDocumentProperty=function(K){if(Object.keys(et).indexOf(K)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[K]},F.__private__.getDocumentProperties=function(){return et},F.__private__.setDocumentProperties=F.setProperties=F.setDocumentProperties=function(K){for(var Se in et)et.hasOwnProperty(Se)&&K[Se]&&(et[Se]=K[Se]);return this},F.__private__.setDocumentProperty=function(K,Se){if(Object.keys(et).indexOf(K)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[K]=Se};var be,ge,Re,Ze,st,ut={},wt={},dt=[],Tt={},oi={},Qt={},Bi={},Ui=null,yt=0,Ti=[],Vi=new k5(F),Mi=t.hotfixes||[],sn={},vr={},Er=[],Pi=function K(Se,tt,ft,Ft,Gt,fi){if(!(this instanceof K))return new K(Se,tt,ft,Ft,Gt,fi);isNaN(Se)&&(Se=1),isNaN(tt)&&(tt=0),isNaN(ft)&&(ft=0),isNaN(Ft)&&(Ft=1),isNaN(Gt)&&(Gt=0),isNaN(fi)&&(fi=0),this._matrix=[Se,tt,ft,Ft,Gt,fi]};Object.defineProperty(Pi.prototype,"sx",{get:function(){return this._matrix[0]},set:function(K){this._matrix[0]=K}}),Object.defineProperty(Pi.prototype,"shy",{get:function(){return this._matrix[1]},set:function(K){this._matrix[1]=K}}),Object.defineProperty(Pi.prototype,"shx",{get:function(){return this._matrix[2]},set:function(K){this._matrix[2]=K}}),Object.defineProperty(Pi.prototype,"sy",{get:function(){return this._matrix[3]},set:function(K){this._matrix[3]=K}}),Object.defineProperty(Pi.prototype,"tx",{get:function(){return this._matrix[4]},set:function(K){this._matrix[4]=K}}),Object.defineProperty(Pi.prototype,"ty",{get:function(){return this._matrix[5]},set:function(K){this._matrix[5]=K}}),Object.defineProperty(Pi.prototype,"a",{get:function(){return this._matrix[0]},set:function(K){this._matrix[0]=K}}),Object.defineProperty(Pi.prototype,"b",{get:function(){return this._matrix[1]},set:function(K){this._matrix[1]=K}}),Object.defineProperty(Pi.prototype,"c",{get:function(){return this._matrix[2]},set:function(K){this._matrix[2]=K}}),Object.defineProperty(Pi.prototype,"d",{get:function(){return this._matrix[3]},set:function(K){this._matrix[3]=K}}),Object.defineProperty(Pi.prototype,"e",{get:function(){return this._matrix[4]},set:function(K){this._matrix[4]=K}}),Object.defineProperty(Pi.prototype,"f",{get:function(){return this._matrix[5]},set:function(K){this._matrix[5]=K}}),Object.defineProperty(Pi.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pi.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pi.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pi.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pi.prototype.join=function(K){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ee).join(K)},Pi.prototype.multiply=function(K){var Se=K.sx*this.sx+K.shy*this.shx,tt=K.sx*this.shy+K.shy*this.sy,ft=K.shx*this.sx+K.sy*this.shx,Ft=K.shx*this.shy+K.sy*this.sy,Gt=K.tx*this.sx+K.ty*this.shx+this.tx,fi=K.tx*this.shy+K.ty*this.sy+this.ty;return new Pi(Se,tt,ft,Ft,Gt,fi)},Pi.prototype.decompose=function(){var K=this.sx,Se=this.shy,tt=this.shx,ft=this.sy,Ft=this.tx,Gt=this.ty,fi=Math.sqrt(K*K+Se*Se),Ii=(K/=fi)*tt+(Se/=fi)*ft;tt-=K*Ii,ft-=Se*Ii;var Ki=Math.sqrt(tt*tt+ft*ft);return Ii/=Ki,K*(ft/=Ki)<Se*(tt/=Ki)&&(K=-K,Se=-Se,Ii=-Ii,fi=-fi),{scale:new Pi(fi,0,0,Ki,0,0),translate:new Pi(1,0,0,1,Ft,Gt),rotate:new Pi(K,Se,-Se,K,0,0),skew:new Pi(1,0,Ii,1,0,0)}},Pi.prototype.toString=function(K){return this.join(" ")},Pi.prototype.inversed=function(){var K=this.sx,Se=this.shy,tt=this.shx,ft=this.sy,Ft=this.tx,Gt=this.ty,fi=1/(K*ft-Se*tt),Ii=ft*fi,Ki=-Se*fi,ln=-tt*fi,bn=K*fi;return new Pi(Ii,Ki,ln,bn,-Ii*Ft-ln*Gt,-Ki*Ft-bn*Gt)},Pi.prototype.applyToPoint=function(K){var Se=K.x*this.sx+K.y*this.shx+this.tx,tt=K.x*this.shy+K.y*this.sy+this.ty;return new Ou(Se,tt)},Pi.prototype.applyToRectangle=function(K){var Se=this.applyToPoint(K),tt=this.applyToPoint(new Ou(K.x+K.w,K.y+K.h));return new rs(Se.x,Se.y,tt.x-Se.x,tt.y-Se.y)},Pi.prototype.clone=function(){var K=this.sx,Se=this.shy,tt=this.shx,ft=this.sy,Ft=this.tx,Gt=this.ty;return new Pi(K,Se,tt,ft,Ft,Gt)},F.Matrix=Pi;var Fn=F.matrixMult=function(K,Se){return Se.multiply(K)},fn=new Pi(1,0,0,1,0,0);F.unitMatrix=F.identityMatrix=fn;var Dn=function(K,Se){if(!oi[K]){var tt=(Se instanceof Vd?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);Se.id=tt,oi[K]=tt,Tt[tt]=Se,Vi.publish("addPattern",Se)}};F.ShadingPattern=Vd,F.TilingPattern=Qf,F.addShadingPattern=function(K,Se){return re("addShadingPattern()"),Dn(K,Se),this},F.beginTilingPattern=function(K){re("beginTilingPattern()"),da(K.boundingBox[0],K.boundingBox[1],K.boundingBox[2]-K.boundingBox[0],K.boundingBox[3]-K.boundingBox[1],K.matrix)},F.endTilingPattern=function(K,Se){re("endTilingPattern()"),Se.stream=Vt[me].join(`
`),Dn(K,Se),Vi.publish("endTilingPattern",Se),Er.pop().restore()};var hn=F.__private__.newObject=function(){var K=Kt();return ds(K,!0),K},Kt=F.__private__.newObjectDeferred=function(){return Ke++,_t[Ke]=function(){return Et},Ke},ds=function(K,Se){return Se=typeof Se=="boolean"&&Se,_t[K]=Et,Se&&$e(K+" 0 obj"),K},qs=F.__private__.newAdditionalObject=function(){var K={objId:Kt(),content:""};return hi.push(K),K},jr=Kt(),or=Kt(),di=F.__private__.decodeColorString=function(K){var Se=K.split(" ");if(Se.length!==2||Se[1]!=="g"&&Se[1]!=="G")Se.length===5&&(Se[4]==="k"||Se[4]==="K")&&(Se=[(1-Se[0])*(1-Se[3]),(1-Se[1])*(1-Se[3]),(1-Se[2])*(1-Se[3]),"r"]);else{var tt=parseFloat(Se[0]);Se=[tt,tt,tt,"r"]}for(var ft="#",Ft=0;Ft<3;Ft++)ft+=("0"+Math.floor(255*parseFloat(Se[Ft])).toString(16)).slice(-2);return ft},tn=F.__private__.encodeColorString=function(K){var Se;typeof K=="string"&&(K={ch1:K});var tt=K.ch1,ft=K.ch2,Ft=K.ch3,Gt=K.ch4,fi=K.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof tt=="string"&&tt.charAt(0)!=="#"){var Ii=new bS(tt);if(Ii.ok)tt=Ii.toHex();else if(!/^\d*\.?\d*$/.test(tt))throw new Error('Invalid color "'+tt+'" passed to jsPDF.encodeColorString.')}if(typeof tt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(tt)&&(tt="#"+tt[1]+tt[1]+tt[2]+tt[2]+tt[3]+tt[3]),typeof tt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(tt)){var Ki=parseInt(tt.substr(1),16);tt=Ki>>16&255,ft=Ki>>8&255,Ft=255&Ki}if(ft===void 0||Gt===void 0&&tt===ft&&ft===Ft)if(typeof tt=="string")Se=tt+" "+fi[0];else switch(K.precision){case 2:Se=Be(tt/255)+" "+fi[0];break;case 3:default:Se=se(tt/255)+" "+fi[0]}else if(Gt===void 0||hs(Gt)==="object"){if(Gt&&!isNaN(Gt.a)&&Gt.a===0)return Se=["1.","1.","1.",fi[1]].join(" ");if(typeof tt=="string")Se=[tt,ft,Ft,fi[1]].join(" ");else switch(K.precision){case 2:Se=[Be(tt/255),Be(ft/255),Be(Ft/255),fi[1]].join(" ");break;default:case 3:Se=[se(tt/255),se(ft/255),se(Ft/255),fi[1]].join(" ")}}else if(typeof tt=="string")Se=[tt,ft,Ft,Gt,fi[2]].join(" ");else switch(K.precision){case 2:Se=[Be(tt),Be(ft),Be(Ft),Be(Gt),fi[2]].join(" ");break;case 3:default:Se=[se(tt),se(ft),se(Ft),se(Gt),fi[2]].join(" ")}return Se},nn=F.__private__.getFilters=function(){return A},_r=F.__private__.putStream=function(K){var Se=(K=K||{}).data||"",tt=K.filters||nn(),ft=K.alreadyAppliedFilters||[],Ft=K.addLength1||!1,Gt=Se.length,fi=K.objectId,Ii=function(Zr){return Zr};if(B!==null&&fi===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");B!==null&&(Ii=fs.encryptor(fi,0));var Ki={};tt===!0&&(tt=["FlateEncode"]);var ln=K.additionalKeyValues||[],bn=(Ki=Bn.API.processDataByFilters!==void 0?Bn.API.processDataByFilters(Se,tt):{data:Se,reverseChain:[]}).reverseChain+(Array.isArray(ft)?ft.join(" "):ft.toString());if(Ki.data.length!==0&&(ln.push({key:"Length",value:Ki.data.length}),Ft===!0&&ln.push({key:"Length1",value:Gt})),bn.length!=0)if(bn.split("/").length-1==1)ln.push({key:"Filter",value:bn});else{ln.push({key:"Filter",value:"["+bn+"]"});for(var On=0;On<ln.length;On+=1)if(ln[On].key==="DecodeParms"){for(var br=[],Ir=0;Ir<Ki.reverseChain.split("/").length-1;Ir+=1)br.push("null");br.push(ln[On].value),ln[On].value="["+br.join(" ")+"]"}}$e("<<");for(var ws=0;ws<ln.length;ws++)$e("/"+ln[ws].key+" "+ln[ws].value);$e(">>"),Ki.data.length!==0&&($e("stream"),$e(Ii(Ki.data)),$e("endstream"))},Hn=F.__private__.putPage=function(K){var Se=K.number,tt=K.data,ft=K.objId,Ft=K.contentsObjId;ds(ft,!0),$e("<</Type /Page"),$e("/Parent "+K.rootDictionaryObjId+" 0 R"),$e("/Resources "+K.resourceDictionaryObjId+" 0 R"),$e("/MediaBox ["+parseFloat(ee(K.mediaBox.bottomLeftX))+" "+parseFloat(ee(K.mediaBox.bottomLeftY))+" "+ee(K.mediaBox.topRightX)+" "+ee(K.mediaBox.topRightY)+"]"),K.cropBox!==null&&$e("/CropBox ["+ee(K.cropBox.bottomLeftX)+" "+ee(K.cropBox.bottomLeftY)+" "+ee(K.cropBox.topRightX)+" "+ee(K.cropBox.topRightY)+"]"),K.bleedBox!==null&&$e("/BleedBox ["+ee(K.bleedBox.bottomLeftX)+" "+ee(K.bleedBox.bottomLeftY)+" "+ee(K.bleedBox.topRightX)+" "+ee(K.bleedBox.topRightY)+"]"),K.trimBox!==null&&$e("/TrimBox ["+ee(K.trimBox.bottomLeftX)+" "+ee(K.trimBox.bottomLeftY)+" "+ee(K.trimBox.topRightX)+" "+ee(K.trimBox.topRightY)+"]"),K.artBox!==null&&$e("/ArtBox ["+ee(K.artBox.bottomLeftX)+" "+ee(K.artBox.bottomLeftY)+" "+ee(K.artBox.topRightX)+" "+ee(K.artBox.topRightY)+"]"),typeof K.userUnit=="number"&&K.userUnit!==1&&$e("/UserUnit "+K.userUnit),Vi.publish("putPage",{objId:ft,pageContext:Ti[Se],pageNumber:Se,page:tt}),$e("/Contents "+Ft+" 0 R"),$e(">>"),$e("endobj");var Gt=tt.join(`
`);return W===V.ADVANCED&&(Gt+=`
Q`),ds(Ft,!0),_r({data:Gt,filters:nn(),objectId:Ft}),$e("endobj"),ft},ua=F.__private__.putPages=function(){var K,Se,tt=[];for(K=1;K<=yt;K++)Ti[K].objId=Kt(),Ti[K].contentsObjId=Kt();for(K=1;K<=yt;K++)tt.push(Hn({number:K,data:Vt[K],objId:Ti[K].objId,contentsObjId:Ti[K].contentsObjId,mediaBox:Ti[K].mediaBox,cropBox:Ti[K].cropBox,bleedBox:Ti[K].bleedBox,trimBox:Ti[K].trimBox,artBox:Ti[K].artBox,userUnit:Ti[K].userUnit,rootDictionaryObjId:jr,resourceDictionaryObjId:or}));ds(jr,!0),$e("<</Type /Pages");var ft="/Kids [";for(Se=0;Se<yt;Se++)ft+=tt[Se]+" 0 R ";$e(ft+"]"),$e("/Count "+yt),$e(">>"),$e("endobj"),Vi.publish("postPutPages")},pn=function(K){Vi.publish("putFont",{font:K,out:$e,newObject:hn,putStream:_r}),K.isAlreadyPutted!==!0&&(K.objectNumber=hn(),$e("<<"),$e("/Type /Font"),$e("/BaseFont /"+tm(K.postScriptName)),$e("/Subtype /Type1"),typeof K.encoding=="string"&&$e("/Encoding /"+K.encoding),$e("/FirstChar 32"),$e("/LastChar 255"),$e(">>"),$e("endobj"))},Aa=function(){for(var K in ut)ut.hasOwnProperty(K)&&(I===!1||I===!0&&P.hasOwnProperty(K))&&pn(ut[K])},Pa=function(K){K.objectNumber=hn();var Se=[];Se.push({key:"Type",value:"/XObject"}),Se.push({key:"Subtype",value:"/Form"}),Se.push({key:"BBox",value:"["+[ee(K.x),ee(K.y),ee(K.x+K.width),ee(K.y+K.height)].join(" ")+"]"}),Se.push({key:"Matrix",value:"["+K.matrix.toString()+"]"});var tt=K.pages[1].join(`
`);_r({data:tt,additionalKeyValues:Se,objectId:K.objectNumber}),$e("endobj")},zo=function(){for(var K in sn)sn.hasOwnProperty(K)&&Pa(sn[K])},_c=function(K,Se){var tt,ft=[],Ft=1/(Se-1);for(tt=0;tt<1;tt+=Ft)ft.push(tt);if(ft.push(1),K[0].offset!=0){var Gt={offset:0,color:K[0].color};K.unshift(Gt)}if(K[K.length-1].offset!=1){var fi={offset:1,color:K[K.length-1].color};K.push(fi)}for(var Ii="",Ki=0,ln=0;ln<ft.length;ln++){for(tt=ft[ln];tt>K[Ki+1].offset;)Ki++;var bn=K[Ki].offset,On=(tt-bn)/(K[Ki+1].offset-bn),br=K[Ki].color,Ir=K[Ki+1].color;Ii+=ze(Math.round((1-On)*br[0]+On*Ir[0]).toString(16))+ze(Math.round((1-On)*br[1]+On*Ir[1]).toString(16))+ze(Math.round((1-On)*br[2]+On*Ir[2]).toString(16))}return Ii.trim()},Ho=function(K,Se){Se||(Se=21);var tt=hn(),ft=_c(K.colors,Se),Ft=[];Ft.push({key:"FunctionType",value:"0"}),Ft.push({key:"Domain",value:"[0.0 1.0]"}),Ft.push({key:"Size",value:"["+Se+"]"}),Ft.push({key:"BitsPerSample",value:"8"}),Ft.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ft.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_r({data:ft,additionalKeyValues:Ft,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:tt}),$e("endobj"),K.objectNumber=hn(),$e("<< /ShadingType "+K.type),$e("/ColorSpace /DeviceRGB");var Gt="/Coords ["+ee(parseFloat(K.coords[0]))+" "+ee(parseFloat(K.coords[1]))+" ";K.type===2?Gt+=ee(parseFloat(K.coords[2]))+" "+ee(parseFloat(K.coords[3])):Gt+=ee(parseFloat(K.coords[2]))+" "+ee(parseFloat(K.coords[3]))+" "+ee(parseFloat(K.coords[4]))+" "+ee(parseFloat(K.coords[5])),$e(Gt+="]"),K.matrix&&$e("/Matrix ["+K.matrix.toString()+"]"),$e("/Function "+tt+" 0 R"),$e("/Extend [true true]"),$e(">>"),$e("endobj")},xc=function(K,Se){var tt=Kt(),ft=hn();Se.push({resourcesOid:tt,objectOid:ft}),K.objectNumber=ft;var Ft=[];Ft.push({key:"Type",value:"/Pattern"}),Ft.push({key:"PatternType",value:"1"}),Ft.push({key:"PaintType",value:"1"}),Ft.push({key:"TilingType",value:"1"}),Ft.push({key:"BBox",value:"["+K.boundingBox.map(ee).join(" ")+"]"}),Ft.push({key:"XStep",value:ee(K.xStep)}),Ft.push({key:"YStep",value:ee(K.yStep)}),Ft.push({key:"Resources",value:tt+" 0 R"}),K.matrix&&Ft.push({key:"Matrix",value:"["+K.matrix.toString()+"]"}),_r({data:K.stream,additionalKeyValues:Ft,objectId:K.objectNumber}),$e("endobj")},xr=function(K){var Se;for(Se in Tt)Tt.hasOwnProperty(Se)&&(Tt[Se]instanceof Vd?Ho(Tt[Se]):Tt[Se]instanceof Qf&&xc(Tt[Se],K))},Gs=function(K){for(var Se in K.objectNumber=hn(),$e("<<"),K)switch(Se){case"opacity":$e("/ca "+Be(K[Se]));break;case"stroke-opacity":$e("/CA "+Be(K[Se]))}$e(">>"),$e("endobj")},qn=function(){var K;for(K in Qt)Qt.hasOwnProperty(K)&&Gs(Qt[K])},pl=function(){for(var K in $e("/XObject <<"),sn)sn.hasOwnProperty(K)&&sn[K].objectNumber>=0&&$e("/"+K+" "+sn[K].objectNumber+" 0 R");Vi.publish("putXobjectDict"),$e(">>")},bc=function(){fs.oid=hn(),$e("<<"),$e("/Filter /Standard"),$e("/V "+fs.v),$e("/R "+fs.r),$e("/U <"+fs.toHexString(fs.U)+">"),$e("/O <"+fs.toHexString(fs.O)+">"),$e("/P "+fs.P),$e(">>"),$e("endobj")},ml=function(){for(var K in $e("/Font <<"),ut)ut.hasOwnProperty(K)&&(I===!1||I===!0&&P.hasOwnProperty(K))&&$e("/"+K+" "+ut[K].objectNumber+" 0 R");$e(">>")},gl=function(){if(Object.keys(Tt).length>0){for(var K in $e("/Shading <<"),Tt)Tt.hasOwnProperty(K)&&Tt[K]instanceof Vd&&Tt[K].objectNumber>=0&&$e("/"+K+" "+Tt[K].objectNumber+" 0 R");Vi.publish("putShadingPatternDict"),$e(">>")}},ba=function(K){if(Object.keys(Tt).length>0){for(var Se in $e("/Pattern <<"),Tt)Tt.hasOwnProperty(Se)&&Tt[Se]instanceof F.TilingPattern&&Tt[Se].objectNumber>=0&&Tt[Se].objectNumber<K&&$e("/"+Se+" "+Tt[Se].objectNumber+" 0 R");Vi.publish("putTilingPatternDict"),$e(">>")}},XA=function(){if(Object.keys(Qt).length>0){var K;for(K in $e("/ExtGState <<"),Qt)Qt.hasOwnProperty(K)&&Qt[K].objectNumber>=0&&$e("/"+K+" "+Qt[K].objectNumber+" 0 R");Vi.publish("putGStateDict"),$e(">>")}},Gr=function(K){ds(K.resourcesOid,!0),$e("<<"),$e("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ml(),gl(),ba(K.objectOid),XA(),pl(),$e(">>"),$e("endobj")},wa=function(){var K=[];Aa(),qn(),zo(),xr(K),Vi.publish("putResources"),K.forEach(Gr),Gr({resourcesOid:or,objectOid:Number.MAX_SAFE_INTEGER}),Vi.publish("postPutResources")},Ql=function(){Vi.publish("putAdditionalObjects");for(var K=0;K<hi.length;K++){var Se=hi[K];ds(Se.objId,!0),$e(Se.content),$e("endobj")}Vi.publish("postPutAdditionalObjects")},gA=function(K){wt[K.fontName]=wt[K.fontName]||{},wt[K.fontName][K.fontStyle]=K.id},zc=function(K,Se,tt,ft,Ft){var Gt={id:"F"+(Object.keys(ut).length+1).toString(10),postScriptName:K,fontName:Se,fontStyle:tt,encoding:ft,isStandardFont:Ft||!1,metadata:{}};return Vi.publish("addFont",{font:Gt,instance:this}),ut[Gt.id]=Gt,gA(Gt),Gt.id},YA=function(K){for(var Se=0,tt=si.length;Se<tt;Se++){var ft=zc.call(this,K[Se][0],K[Se][1],K[Se][2],si[Se][3],!0);I===!1&&(P[ft]=!0);var Ft=K[Se][0].split("-");gA({id:ft,fontName:Ft[0],fontStyle:Ft[1]||""})}Vi.publish("addFonts",{fonts:ut,dictionary:wt})},Ya=function(K){return K.foo=function(){try{return K.apply(this,arguments)}catch(ft){var Se=ft.stack||"";~Se.indexOf(" at ")&&(Se=Se.split(" at ")[1]);var tt="Error in function "+Se.split(`
`)[0].split("<")[0]+": "+ft.message;if(!Tn.console)throw new Error(tt);Tn.console.error(tt,ft),Tn.alert&&alert(tt)}},K.foo.bar=K,K.foo},gu=function(K,Se){var tt,ft,Ft,Gt,fi,Ii,Ki,ln,bn;if(Ft=(Se=Se||{}).sourceEncoding||"Unicode",fi=Se.outputEncoding,(Se.autoencode||fi)&&ut[be].metadata&&ut[be].metadata[Ft]&&ut[be].metadata[Ft].encoding&&(Gt=ut[be].metadata[Ft].encoding,!fi&&ut[be].encoding&&(fi=ut[be].encoding),!fi&&Gt.codePages&&(fi=Gt.codePages[0]),typeof fi=="string"&&(fi=Gt[fi]),fi)){for(Ki=!1,Ii=[],tt=0,ft=K.length;tt<ft;tt++)(ln=fi[K.charCodeAt(tt)])?Ii.push(String.fromCharCode(ln)):Ii.push(K[tt]),Ii[tt].charCodeAt(0)>>8&&(Ki=!0);K=Ii.join("")}for(tt=K.length;Ki===void 0&&tt!==0;)K.charCodeAt(tt-1)>>8&&(Ki=!0),tt--;if(!Ki)return K;for(Ii=Se.noBOM?[]:[254,255],tt=0,ft=K.length;tt<ft;tt++){if((bn=(ln=K.charCodeAt(tt))>>8)>>8)throw new Error("Character at position "+tt+" of string '"+K+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ii.push(bn),Ii.push(ln-(bn<<8))}return String.fromCharCode.apply(void 0,Ii)},Mr=F.__private__.pdfEscape=F.pdfEscape=function(K,Se){return gu(K,Se).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vo=F.__private__.beginPage=function(K){Vt[++yt]=[],Ti[yt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(K[0]),topRightY:Number(K[1])}},ka(yt),ot(Vt[me])},yu=function(K,Se){var tt,ft,Ft;switch(i=Se||i,typeof K=="string"&&(tt=j(K.toLowerCase()),Array.isArray(tt)&&(ft=tt[0],Ft=tt[1])),Array.isArray(K)&&(ft=K[0]*ge,Ft=K[1]*ge),isNaN(ft)&&(ft=o[0],Ft=o[1]),(ft>14400||Ft>14400)&&(Fs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ft=Math.min(14400,ft),Ft=Math.min(14400,Ft)),o=[ft,Ft],i.substr(0,1)){case"l":Ft>ft&&(o=[Ft,ft]);break;case"p":ft>Ft&&(o=[Ft,ft])}vo(o),Du(vl),$e(Ms),Hc!==0&&$e(Hc+" J"),Bc!==0&&$e(Bc+" j"),Vi.publish("addPage",{pageNumber:yt})},ku=function(K){K>0&&K<=yt&&(Vt.splice(K,1),Ti.splice(K,1),yt--,me>yt&&(me=yt),this.setPage(me))},ka=function(K){K>0&&K<=yt&&(me=K)},ju=F.__private__.getNumberOfPages=F.getNumberOfPages=function(){return Vt.length-1},yA=function(K,Se,tt){var ft,Ft=void 0;return tt=tt||{},K=K!==void 0?K:ut[be].fontName,Se=Se!==void 0?Se:ut[be].fontStyle,ft=K.toLowerCase(),wt[ft]!==void 0&&wt[ft][Se]!==void 0?Ft=wt[ft][Se]:wt[K]!==void 0&&wt[K][Se]!==void 0?Ft=wt[K][Se]:tt.disableWarning===!1&&Fs.warn("Unable to look up font label for font '"+K+"', '"+Se+"'. Refer to getFontList() for available fonts."),Ft||tt.noFallback||(Ft=wt.times[Se])==null&&(Ft=wt.times.normal),Ft},Vo=F.__private__.putInfo=function(){var K=hn(),Se=function(ft){return ft};for(var tt in B!==null&&(Se=fs.encryptor(K,0)),$e("<<"),$e("/Producer ("+Mr(Se("jsPDF "+Bn.version))+")"),et)et.hasOwnProperty(tt)&&et[tt]&&$e("/"+tt.substr(0,1).toUpperCase()+tt.substr(1)+" ("+Mr(Se(et[tt]))+")");$e("/CreationDate ("+Mr(Se(Ve))+")"),$e(">>"),$e("endobj")},wc=F.__private__.putCatalog=function(K){var Se=(K=K||{}).rootDictionaryObjId||jr;switch(hn(),$e("<<"),$e("/Type /Catalog"),$e("/Pages "+Se+" 0 R"),ei||(ei="fullwidth"),ei){case"fullwidth":$e("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$e("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$e("/OpenAction [3 0 R /Fit]");break;case"original":$e("/OpenAction [3 0 R /XYZ null null 1]");break;default:var tt=""+ei;tt.substr(tt.length-1)==="%"&&(ei=parseInt(ei)/100),typeof ei=="number"&&$e("/OpenAction [3 0 R /XYZ null null "+Be(ei)+"]")}switch(wi||(wi="continuous"),wi){case"continuous":$e("/PageLayout /OneColumn");break;case"single":$e("/PageLayout /SinglePage");break;case"two":case"twoleft":$e("/PageLayout /TwoColumnLeft");break;case"tworight":$e("/PageLayout /TwoColumnRight")}$i&&$e("/PageMode /"+$i),Vi.publish("putCatalog"),$e(">>"),$e("endobj")},Uu=F.__private__.putTrailer=function(){$e("trailer"),$e("<<"),$e("/Size "+(Ke+1)),$e("/Root "+Ke+" 0 R"),$e("/Info "+(Ke-1)+" 0 R"),B!==null&&$e("/Encrypt "+fs.oid+" 0 R"),$e("/ID [ <"+ue+"> <"+ue+"> ]"),$e(">>")},ea=F.__private__.putHeader=function(){$e("%PDF-"+Q),$e("%")},Nn=F.__private__.putXRef=function(){var K="0000000000";$e("xref"),$e("0 "+(Ke+1)),$e("0000000000 65535 f ");for(var Se=1;Se<=Ke;Se++)typeof _t[Se]=="function"?$e((K+_t[Se]()).slice(-10)+" 00000 n "):_t[Se]!==void 0?$e((K+_t[Se]).slice(-10)+" 00000 n "):$e("0000000000 00000 n ")},Ja=F.__private__.buildDocument=function(){bi(),ot(gt),Vi.publish("buildDocument"),ea(),ua(),Ql(),wa(),B!==null&&bc(),Vo(),wc();var K=Et;return Nn(),Uu(),$e("startxref"),$e(""+K),$e("%%EOF"),ot(Vt[me]),gt.join(`
`)},Ns=F.__private__.getBlob=function(K){return new Blob([yi(K)],{type:"application/pdf"})},ja=F.output=F.__private__.output=Ya(function(K,Se){switch(typeof(Se=Se||{})=="string"?Se={filename:Se}:Se.filename=Se.filename||"generated.pdf",K){case void 0:return Ja();case"save":F.save(Se.filename);break;case"arraybuffer":return yi(Ja());case"blob":return Ns(Ja());case"bloburi":case"bloburl":if(Tn.URL!==void 0&&typeof Tn.URL.createObjectURL=="function")return Tn.URL&&Tn.URL.createObjectURL(Ns(Ja()))||void 0;Fs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var tt="",ft=Ja();try{tt=Qx(ft)}catch{tt=Qx(unescape(encodeURIComponent(ft)))}return"data:application/pdf;filename="+Se.filename+";base64,"+tt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Tn)==="[object Window]"){var Ft="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Se.pdfObjectUrl&&(Ft=Se.pdfObjectUrl,Gt="");var fi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ft+'"'+Gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Se)+");<\/script></body></html>",Ii=Tn.open();return Ii!==null&&Ii.document.write(fi),Ii}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Tn)==="[object Window]"){var Ki='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Se.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Se.filename+'" width="500px" height="400px" /></body></html>',ln=Tn.open();if(ln!==null){ln.document.write(Ki);var bn=this;ln.document.documentElement.querySelector("#pdfViewer").onload=function(){ln.document.title=Se.filename,ln.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(bn.output("bloburl"))}}return ln}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Tn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var On='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Se)+'"></iframe></body></html>',br=Tn.open();if(br!==null&&(br.document.write(On),br.document.title=Se.filename),br||typeof safari>"u")return br;break;case"datauri":case"dataurl":return Tn.document.location.href=this.output("datauristring",Se);default:return null}}),Cn=function(K){return Array.isArray(Mi)===!0&&Mi.indexOf(K)>-1};switch(n){case"pt":ge=1;break;case"mm":ge=72/25.4;break;case"cm":ge=72/2.54;break;case"in":ge=72;break;case"px":ge=Cn("px_scaling")==1?.75:96/72;break;case"pc":case"em":ge=12;break;case"ex":ge=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ge=n}var fs=null;Qe(),Ue();var qo=function(K){return B!==null?fs.encryptor(K,0):function(Se){return Se}},eo=F.__private__.getPageInfo=F.getPageInfo=function(K){if(isNaN(K)||K%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ti[K].objId,pageNumber:K,pageContext:Ti[K]}},Zi=F.__private__.getPageInfoByObjId=function(K){if(isNaN(K)||K%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Se in Ti)if(Ti[Se].objId===K)break;return eo(Se)},_s=F.__private__.getCurrentPageInfo=F.getCurrentPageInfo=function(){return{objId:Ti[me].objId,pageNumber:me,pageContext:Ti[me]}};F.addPage=function(){return yu.apply(this,arguments),this},F.setPage=function(){return ka.apply(this,arguments),ot.call(this,Vt[me]),this},F.insertPage=function(K){return this.addPage(),this.movePage(me,K),this},F.movePage=function(K,Se){var tt,ft;if(K>Se){tt=Vt[K],ft=Ti[K];for(var Ft=K;Ft>Se;Ft--)Vt[Ft]=Vt[Ft-1],Ti[Ft]=Ti[Ft-1];Vt[Se]=tt,Ti[Se]=ft,this.setPage(Se)}else if(K<Se){tt=Vt[K],ft=Ti[K];for(var Gt=K;Gt<Se;Gt++)Vt[Gt]=Vt[Gt+1],Ti[Gt]=Ti[Gt+1];Vt[Se]=tt,Ti[Se]=ft,this.setPage(Se)}return this},F.deletePage=function(){return ku.apply(this,arguments),this},F.__private__.text=F.text=function(K,Se,tt,ft,Ft){var Gt,fi,Ii,Ki,ln,bn,On,br,Ir,ws=(ft=ft||{}).scope||this;if(typeof K=="number"&&typeof Se=="number"&&(typeof tt=="string"||Array.isArray(tt))){var Zr=tt;tt=Se,Se=K,K=Zr}if(arguments[3]instanceof Pi?(re("The transform parameter of text() with a Matrix value"),Ir=Ft):(Ii=arguments[4],Ki=arguments[5],hs(On=arguments[3])==="object"&&On!==null||(typeof Ii=="string"&&(Ki=Ii,Ii=null),typeof On=="string"&&(Ki=On,On=null),typeof On=="number"&&(Ii=On,On=null),ft={flags:On,angle:Ii,align:Ki})),isNaN(Se)||isNaN(tt)||K==null)throw new Error("Invalid arguments passed to jsPDF.text");if(K.length===0)return ws;var na="",Ba=!1,io=typeof ft.lineHeightFactor=="number"?ft.lineHeightFactor:rn,wo=ws.internal.scaleFactor;function Hu(Pn){return Pn=Pn.split("	").join(Array(ft.TabLen||9).join(" ")),Mr(Pn,On)}function Gl(Pn){for(var En,wr=Pn.concat(),Xr=[],Ea=wr.length;Ea--;)typeof(En=wr.shift())=="string"?Xr.push(En):Array.isArray(Pn)&&(En.length===1||En[1]===void 0&&En[2]===void 0)?Xr.push(En[0]):Xr.push([En[0],En[1],En[2]]);return Xr}function xl(Pn,En){var wr;if(typeof Pn=="string")wr=En(Pn)[0];else if(Array.isArray(Pn)){for(var Xr,Ea,Sl=Pn.concat(),Tc=[],ao=Sl.length;ao--;)typeof(Xr=Sl.shift())=="string"?Tc.push(En(Xr)[0]):Array.isArray(Xr)&&typeof Xr[0]=="string"&&(Ea=En(Xr[0],Xr[1],Xr[2]),Tc.push([Ea[0],Ea[1],Ea[2]]));wr=Tc}return wr}var _u=!1,Cc=!0;if(typeof K=="string")_u=!0;else if(Array.isArray(K)){var Kl=K.concat();fi=[];for(var qc,Dr=Kl.length;Dr--;)(typeof(qc=Kl.shift())!="string"||Array.isArray(qc)&&typeof qc[0]!="string")&&(Cc=!1);_u=Cc}if(_u===!1)throw new Error('Type of text must be string or Array. "'+K+'" is not recognized.');typeof K=="string"&&(K=K.match(/[\r?\n]/)?K.split(/\r\n|\r|\n/g):[K]);var Sc=Mt/ws.internal.scaleFactor,Gc=Sc*(io-1);switch(ft.baseline){case"bottom":tt-=Gc;break;case"top":tt+=Sc-Gc;break;case"hanging":tt+=Sc-2*Gc;break;case"middle":tt+=Sc/2-Gc}if((bn=ft.maxWidth||0)>0&&(typeof K=="string"?K=ws.splitTextToSize(K,bn):Object.prototype.toString.call(K)==="[object Array]"&&(K=K.reduce(function(Pn,En){return Pn.concat(ws.splitTextToSize(En,bn))},[]))),Gt={text:K,x:Se,y:tt,options:ft,mutex:{pdfEscape:Mr,activeFontKey:be,fonts:ut,activeFontSize:Mt}},Vi.publish("preProcessText",Gt),K=Gt.text,Ii=(ft=Gt.options).angle,!(Ir instanceof Pi)&&Ii&&typeof Ii=="number"){Ii*=Math.PI/180,ft.rotationDirection===0&&(Ii=-Ii),W===V.ADVANCED&&(Ii=-Ii);var Bo=Math.cos(Ii),xu=Math.sin(Ii);Ir=new Pi(Bo,xu,-xu,Bo,0,0)}else Ii&&Ii instanceof Pi&&(Ir=Ii);W!==V.ADVANCED||Ir||(Ir=fn),(ln=ft.charSpace||bo)!==void 0&&(na+=ee(ae(ln))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(br=ft.horizontalScale)!==void 0&&(na+=ee(100*br)+` Tz
`),ft.lang;var fa=-1,Fh=ft.renderingMode!==void 0?ft.renderingMode:ft.stroke,Vu=ws.internal.getCurrentPageInfo().pageContext;switch(Fh){case 0:case!1:case"fill":fa=0;break;case 1:case!0:case"stroke":fa=1;break;case 2:case"fillThenStroke":fa=2;break;case 3:case"invisible":fa=3;break;case 4:case"fillAndAddForClipping":fa=4;break;case 5:case"strokeAndAddPathForClipping":fa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":fa=6;break;case 7:case"addToPathForClipping":fa=7}var qu=Vu.usedRenderingMode!==void 0?Vu.usedRenderingMode:-1;fa!==-1?na+=fa+` Tr
`:qu!==-1&&(na+=`0 Tr
`),fa!==-1&&(Vu.usedRenderingMode=fa),Ki=ft.align||"left";var Co,Ks=Mt*io,Wl=ws.internal.pageSize.getWidth(),bu=ut[be];ln=ft.charSpace||bo,bn=ft.maxWidth||0,On=Object.assign({autoencode:!0,noBOM:!0},ft.flags);var Wo=[],Ca=function(Pn){return ws.getStringUnitWidth(Pn,{font:bu,charSpace:ln,fontSize:Mt,doKerning:!1})*Mt/wo};if(Object.prototype.toString.call(K)==="[object Array]"){var pa;fi=Gl(K),Ki!=="left"&&(Co=fi.map(Ca));var Ws,Mn=0;if(Ki==="right"){Se-=Co[0],K=[],Dr=fi.length;for(var Ua=0;Ua<Dr;Ua++)Ua===0?(Ws=ha(Se),pa=Go(tt)):(Ws=ae(Mn-Co[Ua]),pa=-Ks),K.push([fi[Ua],Ws,pa]),Mn=Co[Ua]}else if(Ki==="center"){Se-=Co[0]/2,K=[],Dr=fi.length;for(var So=0;So<Dr;So++)So===0?(Ws=ha(Se),pa=Go(tt)):(Ws=ae((Mn-Co[So])/2),pa=-Ks),K.push([fi[So],Ws,pa]),Mn=Co[So]}else if(Ki==="left"){K=[],Dr=fi.length;for(var Sa=0;Sa<Dr;Sa++)K.push(fi[Sa])}else if(Ki==="justify"&&bu.encoding==="Identity-H"){K=[],Dr=fi.length,bn=bn!==0?bn:Wl;for(var Eo=0,ps=0;ps<Dr;ps++)if(pa=ps===0?Go(tt):-Ks,Ws=ps===0?ha(Se):Eo,ps<Dr-1){var bl=ae((bn-Co[ps])/(fi[ps].split(" ").length-1)),Ls=fi[ps].split(" ");K.push([Ls[0]+" ",Ws,pa]),Eo=0;for(var no=1;no<Ls.length;no++){var Kc=(Ca(Ls[no-1]+" "+Ls[no])-Ca(Ls[no]))*wo+bl;no==Ls.length-1?K.push([Ls[no],Kc,0]):K.push([Ls[no]+" ",Kc,0]),Eo-=Kc}}else K.push([fi[ps],Ws,pa]);K.push(["",Eo,0])}else{if(Ki!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(K=[],Dr=fi.length,bn=bn!==0?bn:Wl,ps=0;ps<Dr;ps++)pa=ps===0?Go(tt):-Ks,Ws=ps===0?ha(Se):0,ps<Dr-1?Wo.push(ee(ae((bn-Co[ps])/(fi[ps].split(" ").length-1)))):Wo.push(0),K.push([fi[ps],Ws,pa])}}var $l=typeof ft.R2L=="boolean"?ft.R2L:Ei;$l===!0&&(K=xl(K,function(Pn,En,wr){return[Pn.split("").reverse().join(""),En,wr]})),Gt={text:K,x:Se,y:tt,options:ft,mutex:{pdfEscape:Mr,activeFontKey:be,fonts:ut,activeFontSize:Mt}},Vi.publish("postProcessText",Gt),K=Gt.text,Ba=Gt.mutex.isHex||!1;var wu=ut[be].encoding;wu!=="WinAnsiEncoding"&&wu!=="StandardEncoding"||(K=xl(K,function(Pn,En,wr){return[Hu(Pn),En,wr]})),fi=Gl(K),K=[];for(var wl,Bl,Cl,Ec=0,$o=1,Zo=Array.isArray(fi[0])?$o:Ec,ro="",ra=function(Pn,En,wr){var Xr="";return wr instanceof Pi?(wr=typeof ft.angle=="number"?Fn(wr,new Pi(1,0,0,1,Pn,En)):Fn(new Pi(1,0,0,1,Pn,En),wr),W===V.ADVANCED&&(wr=Fn(new Pi(1,0,0,-1,0,0),wr)),Xr=wr.join(" ")+` Tm
`):Xr=ee(Pn)+" "+ee(En)+` Td
`,Xr},ss=0;ss<fi.length;ss++){switch(ro="",Zo){case $o:Cl=(Ba?"<":"(")+fi[ss][0]+(Ba?">":")"),wl=parseFloat(fi[ss][1]),Bl=parseFloat(fi[ss][2]);break;case Ec:Cl=(Ba?"<":"(")+fi[ss]+(Ba?">":")"),wl=ha(Se),Bl=Go(tt)}Wo!==void 0&&Wo[ss]!==void 0&&(ro=Wo[ss]+` Tw
`),ss===0?K.push(ro+ra(wl,Bl,Ir)+Cl):Zo===Ec?K.push(ro+Cl):Zo===$o&&K.push(ro+ra(wl,Bl,Ir)+Cl)}K=Zo===Ec?K.join(` Tj
T* `):K.join(` Tj
`),K+=` Tj
`;var so=`BT
/`;return so+=be+" "+Mt+` Tf
`,so+=ee(Mt*io)+` TL
`,so+=xo+`
`,so+=na,so+=K,$e(so+="ET"),P[be]=!0,ws};var xs=F.__private__.clip=F.clip=function(K){return $e(K==="evenodd"?"W*":"W"),this};F.clipEvenOdd=function(){return xs("evenodd")},F.__private__.discardPath=F.discardPath=function(){return $e("n"),this};var fr=F.__private__.isValidStyle=function(K){var Se=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(K)!==-1&&(Se=!0),Se};F.__private__.setDefaultPathOperation=F.setDefaultPathOperation=function(K){return fr(K)&&(b=K),this};var Rn=F.__private__.getStyle=F.getStyle=function(K){var Se=b;switch(K){case"D":case"S":Se="S";break;case"F":Se="f";break;case"FD":case"DF":Se="B";break;case"f":case"f*":case"B":case"B*":Se=K}return Se},yl=F.close=function(){return $e("h"),this};F.stroke=function(){return $e("S"),this},F.fill=function(K){return Kr("f",K),this},F.fillEvenOdd=function(K){return Kr("f*",K),this},F.fillStroke=function(K){return Kr("B",K),this},F.fillStrokeEvenOdd=function(K){return Kr("B*",K),this};var Kr=function(K,Se){hs(Se)==="object"?zl(Se,K):$e(K)},Wr=function(K){K===null||W===V.ADVANCED&&K===void 0||(K=Rn(K),$e(K))};function ta(K,Se,tt,ft,Ft){var Gt=new Qf(Se||this.boundingBox,tt||this.xStep,ft||this.yStep,this.gState,Ft||this.matrix);Gt.stream=this.stream;var fi=K+"$$"+this.cloneIndex+++"$$";return Dn(fi,Gt),Gt}var zl=function(K,Se){var tt=oi[K.key],ft=Tt[tt];if(ft instanceof Vd)$e("q"),$e(rr(Se)),ft.gState&&F.setGState(ft.gState),$e(K.matrix.toString()+" cm"),$e("/"+tt+" sh"),$e("Q");else if(ft instanceof Qf){var Ft=new Pi(1,0,0,-1,0,ia());K.matrix&&(Ft=Ft.multiply(K.matrix||fn),tt=ta.call(ft,K.key,K.boundingBox,K.xStep,K.yStep,Ft).id),$e("q"),$e("/Pattern cs"),$e("/"+tt+" scn"),ft.gState&&F.setGState(ft.gState),$e(Se),$e("Q")}},rr=function(K){switch(K){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},pr=F.moveTo=function(K,Se){return $e(ee(ae(K))+" "+ee(Ee(Se))+" m"),this},_n=F.lineTo=function(K,Se){return $e(ee(ae(K))+" "+ee(Ee(Se))+" l"),this},Ji=F.curveTo=function(K,Se,tt,ft,Ft,Gt){return $e([ee(ae(K)),ee(Ee(Se)),ee(ae(tt)),ee(Ee(ft)),ee(ae(Ft)),ee(Ee(Gt)),"c"].join(" ")),this};F.__private__.line=F.line=function(K,Se,tt,ft,Ft){if(isNaN(K)||isNaN(Se)||isNaN(tt)||isNaN(ft)||!fr(Ft))throw new Error("Invalid arguments passed to jsPDF.line");return W===V.COMPAT?this.lines([[tt-K,ft-Se]],K,Se,[1,1],Ft||"S"):this.lines([[tt-K,ft-Se]],K,Se,[1,1]).stroke()},F.__private__.lines=F.lines=function(K,Se,tt,ft,Ft,Gt){var fi,Ii,Ki,ln,bn,On,br,Ir,ws,Zr,na,Ba;if(typeof K=="number"&&(Ba=tt,tt=Se,Se=K,K=Ba),ft=ft||[1,1],Gt=Gt||!1,isNaN(Se)||isNaN(tt)||!Array.isArray(K)||!Array.isArray(ft)||!fr(Ft)||typeof Gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(pr(Se,tt),fi=ft[0],Ii=ft[1],ln=K.length,Zr=Se,na=tt,Ki=0;Ki<ln;Ki++)(bn=K[Ki]).length===2?(Zr=bn[0]*fi+Zr,na=bn[1]*Ii+na,_n(Zr,na)):(On=bn[0]*fi+Zr,br=bn[1]*Ii+na,Ir=bn[2]*fi+Zr,ws=bn[3]*Ii+na,Zr=bn[4]*fi+Zr,na=bn[5]*Ii+na,Ji(On,br,Ir,ws,Zr,na));return Gt&&yl(),Wr(Ft),this},F.path=function(K){for(var Se=0;Se<K.length;Se++){var tt=K[Se],ft=tt.c;switch(tt.op){case"m":pr(ft[0],ft[1]);break;case"l":_n(ft[0],ft[1]);break;case"c":Ji.apply(this,ft);break;case"h":yl()}}return this},F.__private__.rect=F.rect=function(K,Se,tt,ft,Ft){if(isNaN(K)||isNaN(Se)||isNaN(tt)||isNaN(ft)||!fr(Ft))throw new Error("Invalid arguments passed to jsPDF.rect");return W===V.COMPAT&&(ft=-ft),$e([ee(ae(K)),ee(Ee(Se)),ee(ae(tt)),ee(ae(ft)),"re"].join(" ")),Wr(Ft),this},F.__private__.triangle=F.triangle=function(K,Se,tt,ft,Ft,Gt,fi){if(isNaN(K)||isNaN(Se)||isNaN(tt)||isNaN(ft)||isNaN(Ft)||isNaN(Gt)||!fr(fi))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[tt-K,ft-Se],[Ft-tt,Gt-ft],[K-Ft,Se-Gt]],K,Se,[1,1],fi,!0),this},F.__private__.roundedRect=F.roundedRect=function(K,Se,tt,ft,Ft,Gt,fi){if(isNaN(K)||isNaN(Se)||isNaN(tt)||isNaN(ft)||isNaN(Ft)||isNaN(Gt)||!fr(fi))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ii=4/3*(Math.SQRT2-1);return Ft=Math.min(Ft,.5*tt),Gt=Math.min(Gt,.5*ft),this.lines([[tt-2*Ft,0],[Ft*Ii,0,Ft,Gt-Gt*Ii,Ft,Gt],[0,ft-2*Gt],[0,Gt*Ii,-Ft*Ii,Gt,-Ft,Gt],[2*Ft-tt,0],[-Ft*Ii,0,-Ft,-Gt*Ii,-Ft,-Gt],[0,2*Gt-ft],[0,-Gt*Ii,Ft*Ii,-Gt,Ft,-Gt]],K+Ft,Se,[1,1],fi,!0),this},F.__private__.ellipse=F.ellipse=function(K,Se,tt,ft,Ft){if(isNaN(K)||isNaN(Se)||isNaN(tt)||isNaN(ft)||!fr(Ft))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Gt=4/3*(Math.SQRT2-1)*tt,fi=4/3*(Math.SQRT2-1)*ft;return pr(K+tt,Se),Ji(K+tt,Se-fi,K+Gt,Se-ft,K,Se-ft),Ji(K-Gt,Se-ft,K-tt,Se-fi,K-tt,Se),Ji(K-tt,Se+fi,K-Gt,Se+ft,K,Se+ft),Ji(K+Gt,Se+ft,K+tt,Se+fi,K+tt,Se),Wr(Ft),this},F.__private__.circle=F.circle=function(K,Se,tt,ft){if(isNaN(K)||isNaN(Se)||isNaN(tt)||!fr(ft))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(K,Se,tt,tt,ft)},F.setFont=function(K,Se,tt){return tt&&(Se=de(Se,tt)),be=yA(K,Se,{disableWarning:!1}),this};var bs=F.__private__.getFont=F.getFont=function(){return ut[yA.apply(F,arguments)]};F.__private__.getFontList=F.getFontList=function(){var K,Se,tt={};for(K in wt)if(wt.hasOwnProperty(K))for(Se in tt[K]=[],wt[K])wt[K].hasOwnProperty(Se)&&tt[K].push(Se);return tt},F.addFont=function(K,Se,tt,ft,Ft){var Gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Gt.indexOf(arguments[3])!==-1?Ft=arguments[3]:arguments[3]&&Gt.indexOf(arguments[3])==-1&&(tt=de(tt,ft)),Ft=Ft||"Identity-H",zc.call(this,K,Se,tt,Ft)};var rn,vl=t.lineWidth||.200025,Ur=F.__private__.getLineWidth=F.getLineWidth=function(){return vl},Du=F.__private__.setLineWidth=F.setLineWidth=function(K){return vl=K,$e(ee(ae(K))+" w"),this};F.__private__.setLineDash=Bn.API.setLineDash=Bn.API.setLineDashPattern=function(K,Se){if(K=K||[],Se=Se||0,isNaN(Se)||!Array.isArray(K))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return K=K.map(function(tt){return ee(ae(tt))}).join(" "),Se=ee(ae(Se)),$e("["+K+"] "+Se+" d"),this};var Hl=F.__private__.getLineHeight=F.getLineHeight=function(){return Mt*rn};F.__private__.getLineHeight=F.getLineHeight=function(){return Mt*rn};var Vl=F.__private__.setLineHeightFactor=F.setLineHeightFactor=function(K){return typeof(K=K||1.15)=="number"&&(rn=K),this},_o=F.__private__.getLineHeightFactor=F.getLineHeightFactor=function(){return rn};Vl(t.lineHeight);var ha=F.__private__.getHorizontalCoordinate=function(K){return ae(K)},Go=F.__private__.getVerticalCoordinate=function(K){return W===V.ADVANCED?K:Ti[me].mediaBox.topRightY-Ti[me].mediaBox.bottomLeftY-ae(K)},Ru=F.__private__.getHorizontalCoordinateString=F.getHorizontalCoordinateString=function(K){return ee(ha(K))},Ko=F.__private__.getVerticalCoordinateString=F.getVerticalCoordinateString=function(K){return ee(Go(K))},Ms=t.strokeColor||"0 G";F.__private__.getStrokeColor=F.getDrawColor=function(){return di(Ms)},F.__private__.setStrokeColor=F.setDrawColor=function(K,Se,tt,ft){return Ms=tn({ch1:K,ch2:Se,ch3:tt,ch4:ft,pdfColorType:"draw",precision:2}),$e(Ms),this};var $r=t.fillColor||"0 g";F.__private__.getFillColor=F.getFillColor=function(){return di($r)},F.__private__.setFillColor=F.setFillColor=function(K,Se,tt,ft){return $r=tn({ch1:K,ch2:Se,ch3:tt,ch4:ft,pdfColorType:"fill",precision:2}),$e($r),this};var xo=t.textColor||"0 g",vu=F.__private__.getTextColor=F.getTextColor=function(){return di(xo)};F.__private__.setTextColor=F.setTextColor=function(K,Se,tt,ft){return xo=tn({ch1:K,ch2:Se,ch3:tt,ch4:ft,pdfColorType:"text",precision:3}),this};var bo=t.charSpace,Is=F.__private__.getCharSpace=F.getCharSpace=function(){return parseFloat(bo||0)};F.__private__.setCharSpace=F.setCharSpace=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return bo=K,this};var Hc=0;F.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},F.__private__.setLineCap=F.setLineCap=function(K){var Se=F.CapJoinStyles[K];if(Se===void 0)throw new Error("Line cap style of '"+K+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hc=Se,$e(Se+" J"),this};var Bc=0;F.__private__.setLineJoin=F.setLineJoin=function(K){var Se=F.CapJoinStyles[K];if(Se===void 0)throw new Error("Line join style of '"+K+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bc=Se,$e(Se+" j"),this},F.__private__.setLineMiterLimit=F.__private__.setMiterLimit=F.setLineMiterLimit=F.setMiterLimit=function(K){if(K=K||0,isNaN(K))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $e(ee(ae(K))+" M"),this},F.GState=m0,F.setGState=function(K){(K=typeof K=="string"?Qt[Bi[K]]:vA(null,K)).equals(Ui)||($e("/"+K.id+" gs"),Ui=K)};var vA=function(K,Se){if(!K||!Bi[K]){var tt=!1;for(var ft in Qt)if(Qt.hasOwnProperty(ft)&&Qt[ft].equals(Se)){tt=!0;break}if(tt)Se=Qt[ft];else{var Ft="GS"+(Object.keys(Qt).length+1).toString(10);Qt[Ft]=Se,Se.id=Ft}return K&&(Bi[K]=Se.id),Vi.publish("addGState",Se),Se}};F.addGState=function(K,Se){return vA(K,Se),this},F.saveGraphicsState=function(){return $e("q"),dt.push({key:be,size:Mt,color:xo}),this},F.restoreGraphicsState=function(){$e("Q");var K=dt.pop();return be=K.key,Mt=K.size,xo=K.color,Ui=null,this},F.setCurrentTransformationMatrix=function(K){return $e(K.toString()+" cm"),this},F.comment=function(K){return $e("#"+K),this};var Ou=function(K,Se){var tt=K||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return tt},set:function(Gt){isNaN(Gt)||(tt=parseFloat(Gt))}});var ft=Se||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ft},set:function(Gt){isNaN(Gt)||(ft=parseFloat(Gt))}});var Ft="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ft},set:function(Gt){Ft=Gt.toString()}}),this},rs=function(K,Se,tt,ft){Ou.call(this,K,Se),this.type="rect";var Ft=tt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ft},set:function(fi){isNaN(fi)||(Ft=parseFloat(fi))}});var Gt=ft||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Gt},set:function(fi){isNaN(fi)||(Gt=parseFloat(fi))}}),this},ql=function(){this.page=yt,this.currentPage=me,this.pages=Vt.slice(0),this.pagesContext=Ti.slice(0),this.x=Re,this.y=Ze,this.matrix=st,this.width=_l(me),this.height=ia(me),this.outputDestination=Jt,this.id="",this.objectNumber=-1};ql.prototype.restore=function(){yt=this.page,me=this.currentPage,Ti=this.pagesContext,Vt=this.pages,Re=this.x,Ze=this.y,st=this.matrix,to(me,this.width),zu(me,this.height),Jt=this.outputDestination};var da=function(K,Se,tt,ft,Ft){Er.push(new ql),yt=me=0,Vt=[],Re=K,Ze=Se,st=Ft,vo([tt,ft])},Qu=function(K){if(vr[K])Er.pop().restore();else{var Se=new ql,tt="Xo"+(Object.keys(sn).length+1).toString(10);Se.id=tt,vr[K]=tt,sn[tt]=Se,Vi.publish("addFormObject",Se),Er.pop().restore()}};for(var Vc in F.beginFormObject=function(K,Se,tt,ft,Ft){return da(K,Se,tt,ft,Ft),this},F.endFormObject=function(K){return Qu(K),this},F.doFormObject=function(K,Se){var tt=sn[vr[K]];return $e("q"),$e(Se.toString()+" cm"),$e("/"+tt.id+" Do"),$e("Q"),this},F.getFormObject=function(K){var Se=sn[vr[K]];return{x:Se.x,y:Se.y,width:Se.width,height:Se.height,matrix:Se.matrix}},F.save=function(K,Se){return K=K||"generated.pdf",(Se=Se||{}).returnPromise=Se.returnPromise||!1,Se.returnPromise===!1?(Uf(Ns(Ja()),K),typeof Uf.unload=="function"&&Tn.setTimeout&&setTimeout(Uf.unload,911),this):new Promise(function(tt,ft){try{var Ft=Uf(Ns(Ja()),K);typeof Uf.unload=="function"&&Tn.setTimeout&&setTimeout(Uf.unload,911),tt(Ft)}catch(Gt){ft(Gt.message)}})},Bn.API)Bn.API.hasOwnProperty(Vc)&&(Vc==="events"&&Bn.API.events.length?function(K,Se){var tt,ft,Ft;for(Ft=Se.length-1;Ft!==-1;Ft--)tt=Se[Ft][0],ft=Se[Ft][1],K.subscribe.apply(K,[tt].concat(typeof ft=="function"?[ft]:ft))}(Vi,Bn.API.events):F[Vc]=Bn.API[Vc]);var _l=F.getPageWidth=function(K){return(Ti[K=K||me].mediaBox.topRightX-Ti[K].mediaBox.bottomLeftX)/ge},to=F.setPageWidth=function(K,Se){Ti[K].mediaBox.topRightX=Se*ge+Ti[K].mediaBox.bottomLeftX},ia=F.getPageHeight=function(K){return(Ti[K=K||me].mediaBox.topRightY-Ti[K].mediaBox.bottomLeftY)/ge},zu=F.setPageHeight=function(K,Se){Ti[K].mediaBox.topRightY=Se*ge+Ti[K].mediaBox.bottomLeftY};return F.internal={pdfEscape:Mr,getStyle:Rn,getFont:bs,getFontSize:ai,getCharSpace:Is,getTextColor:vu,getLineHeight:Hl,getLineHeightFactor:_o,getLineWidth:Ur,write:Ni,getHorizontalCoordinate:ha,getVerticalCoordinate:Go,getCoordinateString:Ru,getVerticalCoordinateString:Ko,collections:{},newObject:hn,newAdditionalObject:qs,newObjectDeferred:Kt,newObjectDeferredBegin:ds,getFilters:nn,putStream:_r,events:Vi,scaleFactor:ge,pageSize:{getWidth:function(){return _l(me)},setWidth:function(K){to(me,K)},getHeight:function(){return ia(me)},setHeight:function(K){zu(me,K)}},encryptionOptions:B,encryption:fs,getEncryptor:qo,output:ja,getNumberOfPages:ju,pages:Vt,out:$e,f2:Be,f3:se,getPageInfo:eo,getPageInfoByObjId:Zi,getCurrentPageInfo:_s,getPDFVersion:R,Point:Ou,Rectangle:rs,Matrix:Pi,hasHotfix:Cn},Object.defineProperty(F.internal.pageSize,"width",{get:function(){return _l(me)},set:function(K){to(me,K)},enumerable:!0,configurable:!0}),Object.defineProperty(F.internal.pageSize,"height",{get:function(){return ia(me)},set:function(K){zu(me,K)},enumerable:!0,configurable:!0}),YA.call(F,si),be="F1",yu(o,i),Vi.publish("initialized"),F}em.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},em.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},em.prototype.hexToBytes=function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(String.fromCharCode(parseInt(t.substr(i,2),16)));return e.join("")},em.prototype.processOwnerPassword=function(t,e){return Hx(zx(e).substr(0,5),t)},em.prototype.encryptor=function(t,e){var i=zx(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Hx(i,n)}},m0.prototype.equals=function(t){var e,i="id,objectNumber,equals";if(!t||hs(t)!==hs(this))return!1;var n=0;for(e in this)if(!(i.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&i.indexOf(e)<0&&n--;return n===0},Bn.API={events:[]},Bn.version="2.5.2";var La=Bn.API,a2=1,np=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qp=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Un=function(t){return t.toFixed(2)},Rd=function(t){return t.toFixed(5)};La.__acroform__={};var mu=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},j5=function(t){return t*a2},vh=function(t){var e=new SS,i=Yi.internal.getHeight(t)||0,n=Yi.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Un(n)),Number(Un(i))],e},F8=La.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},N8=La.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},M8=La.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Ka=La.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return M8(t,e-1)},Wa=La.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return F8(t,e-1)},$a=La.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return N8(t,e-1)},I8=La.__acroform__.calculateCoordinates=function(t,e){var i=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,o=t[0],u=t[1],A=t[2],a=t[3],g={};return g.lowerLeft_X=i(o)||0,g.lowerLeft_Y=n(u+a)||0,g.upperRight_X=i(o+A)||0,g.upperRight_Y=n(u)||0,[Number(Un(g.lowerLeft_X)),Number(Un(g.lowerLeft_Y)),Number(Un(g.upperRight_X)),Number(Un(g.upperRight_Y))]},L8=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],i=t._V||t.DV,n=Vx(t,i),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+o+" "+Un(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var u=vh(t);return u.scope=t.scope,u.stream=e.join(`
`),u}},Vx=function(t,e){var i=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=t.multiline?o.map(function(se){return se.split(`
`)}):o.map(function(se){return[se]});var u=i,A=Yi.internal.getHeight(t)||0;A=A<0?-A:A;var a=Yi.internal.getWidth(t)||0;a=a<0?-a:a;var g=function(se,ae,ce){if(se+1<o.length){var Ee=ae+" "+o[se+1][0];return Dy(Ee,t,ce).width<=a-4}return!1};u++;e:for(;u>0;){e="",u--;var b,B,I=Dy("3",t,u).height,P=t.multiline?A-u:(A-I)/2,F=P+=2,Q=0,R=0,H=0;if(u<=0){e=`(...) Tj
`,e+="% Width of Text: "+Dy(e,t,u=12).width+", FieldWidth:"+a+`
`;break}for(var j="",V=0,W=0;W<o.length;W++)if(o.hasOwnProperty(W)){var ne=!1;if(o[W].length!==1&&H!==o[W].length-1){if((I+2)*(V+2)+2>A)continue e;j+=o[W][H],ne=!0,R=W,W--}else{j=(j+=o[W][H]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var te=parseInt(W),de=g(te,j,u),ee=W>=o.length-1;if(de&&!ee){j+=" ",H=0;continue}if(de||ee){if(ee)R=te;else if(t.multiline&&(I+2)*(V+2)+2>A)continue e}else{if(!t.multiline||(I+2)*(V+2)+2>A)continue e;R=te}}for(var re="",xe=Q;xe<=R;xe++){var Be=o[xe];if(t.multiline){if(xe===R){re+=Be[H]+" ",H=(H+1)%Be.length;continue}if(xe===Q){re+=Be[Be.length-1]+" ";continue}}re+=Be[0]+" "}switch(re=re.substr(re.length-1)==" "?re.substr(0,re.length-1):re,B=Dy(re,t,u).width,t.textAlign){case"right":b=a-B-2;break;case"center":b=(a-B)/2;break;case"left":default:b=2}e+=Un(b)+" "+Un(F)+` Td
`,e+="("+np(re)+`) Tj
`,e+=-Un(b)+` 0 Td
`,F=-(u+2),B=0,Q=ne?R:R+1,V++,j=""}break}return n.text=e,n.fontSize=u,n},Dy=function(t,e,i){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:o}},P8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},k8=function(t,e){var i={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===i.type&&n.object===i.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(i)},j8=function(t,e){for(var i in t)if(t.hasOwnProperty(i)){var n=i,o=t[i];e.internal.newObjectDeferredBegin(o.objId,!0),hs(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[n]}},U8=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(WA.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(P8)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");a2=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new ES,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];u.objId=void 0,u.hasAnnotation&&k8(u,i)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(i){(function(n,o){var u=!n;for(var A in n||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(A)){var a=n[A],g=[],b=a.Rect;if(a.Rect&&(a.Rect=I8(a.Rect,o)),o.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Yi.createDefaultAppearanceStream(a),hs(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(g=a.getKeyValueListForStream()),a.Rect=b,a.hasAppearanceStream&&!a.appearanceStreamContent){var B=L8(a);g.push({key:"AP",value:"<</N "+B+">>"}),o.internal.acroformPlugin.xForms.push(B)}if(a.appearanceStreamContent){var I="";for(var P in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(P)){var F=a.appearanceStreamContent[P];if(I+="/"+P+" ",I+="<<",Object.keys(F).length>=1||Array.isArray(F)){for(var A in F)if(F.hasOwnProperty(A)){var Q=F[A];typeof Q=="function"&&(Q=Q.call(o,a)),I+="/"+A+" "+Q+" ",o.internal.acroformPlugin.xForms.indexOf(Q)>=0||o.internal.acroformPlugin.xForms.push(Q)}}else typeof(Q=F)=="function"&&(Q=Q.call(o,a)),I+="/"+A+" "+Q,o.internal.acroformPlugin.xForms.indexOf(Q)>=0||o.internal.acroformPlugin.xForms.push(Q);I+=">>"}g.push({key:"AP",value:`<<
`+I+">>"})}o.internal.putStream({additionalKeyValues:g,objectId:a.objId}),o.internal.out("endobj")}u&&j8(o.internal.acroformPlugin.xForms,o)})(i,t)}),t.internal.acroformPlugin.isInitialized=!0}},CS=La.__acroform__.arrayToPdfArray=function(t,e,i){var n=function(A){return A};if(Array.isArray(t)){for(var o="[",u=0;u<t.length;u++)switch(u!==0&&(o+=" "),hs(t[u])){case"boolean":case"number":case"object":o+=t[u].toString();break;case"string":t[u].substr(0,1)!=="/"?(e!==void 0&&i&&(n=i.internal.getEncryptor(e)),o+="("+np(n(t[u].toString()))+")"):o+=t[u].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},L_=function(t,e,i){var n=function(o){return o};return e!==void 0&&i&&(n=i.internal.getEncryptor(e)),(t=t||"").toString(),t="("+np(n(t))+")"},bh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};bh.prototype.toString=function(){return this.objId+" 0 R"},bh.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},bh.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var i in e)if(Object.getOwnPropertyDescriptor(this,e[i]).configurable===!1){var n=e[i],o=this[n];o&&(Array.isArray(o)?t.push({key:n,value:CS(o,this.objId,this.scope)}):o instanceof bh?(o.scope=this.scope,t.push({key:n,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:n,value:o}))}return t};var SS=function(){bh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){t=i.trim()},get:function(){return t||null}})};mu(SS,bh);var ES=function(){bh.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var i=function(n){return n};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+np(i(t))+")"}},set:function(i){t=i}})};mu(ES,bh);var WA=function t(){bh.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');e=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ka(e,3)},set:function(j){j?this.F=Wa(e,3):this.F=$a(e,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');i=j}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(j){n=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(j){n[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(j){n[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(j){n[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(j){n[3]=j}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof Ov)return;u="FieldObject"+t.FieldNum++}var j=function(V){return V};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+np(j(u))+")"},set:function(j){u=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(j){u=j}});var A="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return A},set:function(j){A=j}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(j){a=j}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(j){g=j}});var b=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return b===void 0?50/a2:b},set:function(j){b=j}});var B="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return B},set:function(j){B=j}});var I="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!I||this instanceof Ov||this instanceof Jd))return L_(I,this.objId,this.scope)},set:function(j){j=j.toString(),I=j}});var P=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(P)return this instanceof Ro?P:L_(P,this.objId,this.scope)},set:function(j){j=j.toString(),P=this instanceof Ro?j:j.substr(0,1)==="("?qp(j.substr(1,j.length-2)):qp(j)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ro?qp(P.substr(1,P.length-1)):P},set:function(j){j=j.toString(),P=this instanceof Ro?"/"+j:j}});var F=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(F)return F},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(F)return this instanceof Ro?F:L_(F,this.objId,this.scope)},set:function(j){j=j.toString(),F=this instanceof Ro?j:j.substr(0,1)==="("?qp(j.substr(1,j.length-2)):qp(j)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ro?qp(F.substr(1,F.length-1)):F},set:function(j){j=j.toString(),F=this instanceof Ro?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Q,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(j){j=!!j,R=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Q)return Q},set:function(j){Q=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,1)},set:function(j){j?this.Ff=Wa(this.Ff,1):this.Ff=$a(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,2)},set:function(j){j?this.Ff=Wa(this.Ff,2):this.Ff=$a(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,3)},set:function(j){j?this.Ff=Wa(this.Ff,3):this.Ff=$a(this.Ff,3)}});var H=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(H!==null)return H},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');H=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(H){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:H=2;break;case"center":case 1:H=1;break;case"left":case 0:default:H=0}}})};mu(WA,bh);var Gf=function(){WA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(i){t=i}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return CS(e,this.objId,this.scope)},set:function(i){var n,o;o=[],typeof(n=i)=="string"&&(o=function(u,A,a){a||(a=1);for(var g,b=[];g=A.exec(u);)b.push(g[a]);return b}(n,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(i){e=i,this.sort&&e.sort()},this.addOption=function(i){i=(i=i||"").toString(),e.push(i),this.sort&&e.sort()},this.removeOption=function(i,n){for(n=n||!1,i=(i=i||"").toString();e.indexOf(i)!==-1&&(e.splice(e.indexOf(i),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,18)},set:function(i){i?this.Ff=Wa(this.Ff,18):this.Ff=$a(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=Wa(this.Ff,19):this.Ff=$a(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,20)},set:function(i){i?(this.Ff=Wa(this.Ff,20),e.sort()):this.Ff=$a(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,22)},set:function(i){i?this.Ff=Wa(this.Ff,22):this.Ff=$a(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,23)},set:function(i){i?this.Ff=Wa(this.Ff,23):this.Ff=$a(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,27)},set:function(i){i?this.Ff=Wa(this.Ff,27):this.Ff=$a(this.Ff,27)}}),this.hasAppearanceStream=!1};mu(Gf,WA);var Kf=function(){Gf.call(this),this.fontName="helvetica",this.combo=!1};mu(Kf,Gf);var Wf=function(){Kf.call(this),this.combo=!0};mu(Wf,Kf);var Wg=function(){Wf.call(this),this.edit=!0};mu(Wg,Wf);var Ro=function(){WA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,15)},set:function(i){i?this.Ff=Wa(this.Ff,15):this.Ff=$a(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,16)},set:function(i){i?this.Ff=Wa(this.Ff,16):this.Ff=$a(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,17)},set:function(i){i?this.Ff=Wa(this.Ff,17):this.Ff=$a(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,26)},set:function(i){i?this.Ff=Wa(this.Ff,26):this.Ff=$a(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,o=[];for(n in o.push("<<"),e)o.push("/"+n+" ("+np(i(e[n]))+")");return o.push(">>"),o.join(`
`)}},set:function(i){hs(i)==="object"&&(e=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(i){typeof i=="string"&&(e.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}})};mu(Ro,WA);var $g=function(){Ro.call(this),this.pushButton=!0};mu($g,Ro);var $f=function(){Ro.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};mu($f,Ro);var Ov=function(){var t,e;WA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var i,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(a){return a};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var u,A=[];for(u in A.push("<<"),n)A.push("/"+u+" ("+np(o(n[u]))+")");return A.push(">>"),A.join(`
`)},set:function(o){hs(o)==="object"&&(n=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(o){typeof o=="string"&&(n.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(o){i="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Yi.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};mu(Ov,WA),$f.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var i=this.Kids[e];i.appearanceStreamContent=t.createAppearanceStream(i.optionName),i.caption=t.getCA()}},$f.prototype.createOption=function(t){var e=new Ov;return e.Parent=this,e.optionName=t,this.Kids.push(e),D8.call(this.scope,e),e};var Zg=function(){Ro.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Yi.CheckBox.createAppearanceStream()};mu(Zg,Ro);var Jd=function(){WA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,13)},set:function(e){e?this.Ff=Wa(this.Ff,13):this.Ff=$a(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,21)},set:function(e){e?this.Ff=Wa(this.Ff,21):this.Ff=$a(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,23)},set:function(e){e?this.Ff=Wa(this.Ff,23):this.Ff=$a(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,24)},set:function(e){e?this.Ff=Wa(this.Ff,24):this.Ff=$a(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,25)},set:function(e){e?this.Ff=Wa(this.Ff,25):this.Ff=$a(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,26)},set:function(e){e?this.Ff=Wa(this.Ff,26):this.Ff=$a(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};mu(Jd,WA);var Xg=function(){Jd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ka(this.Ff,14)},set:function(t){t?this.Ff=Wa(this.Ff,14):this.Ff=$a(this.Ff,14)}}),this.password=!0};mu(Xg,Jd);var Yi={CheckBox:{createAppearanceStream:function(){return{N:{On:Yi.CheckBox.YesNormal},D:{On:Yi.CheckBox.YesPushDown,Off:Yi.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=vh(t);e.scope=t.scope;var i=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),u=Vx(t,t.caption);return i.push("0.749023 g"),i.push("0 0 "+Un(Yi.internal.getWidth(t))+" "+Un(Yi.internal.getHeight(t))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+n+" "+Un(u.fontSize)+" Tf "+o),i.push("BT"),i.push(u.text),i.push("ET"),i.push("Q"),i.push("EMC"),e.stream=i.join(`
`),e},YesNormal:function(t){var e=vh(t);e.scope=t.scope;var i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),o=[],u=Yi.internal.getHeight(t),A=Yi.internal.getWidth(t),a=Vx(t,t.caption);return o.push("1 g"),o.push("0 0 "+Un(A)+" "+Un(u)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Un(A-1)+" "+Un(u-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+i+" "+Un(a.fontSize)+" Tf "+n),o.push(a.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(t){var e=vh(t);e.scope=t.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Un(Yi.internal.getWidth(t))+" "+Un(Yi.internal.getHeight(t))+" re"),i.push("f"),e.stream=i.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Yi.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Yi.RadioButton.Circle.YesNormal,e.D[t]=Yi.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=vh(t);e.scope=t.scope;var i=[],n=Yi.internal.getWidth(t)<=Yi.internal.getHeight(t)?Yi.internal.getWidth(t)/4:Yi.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var o=Yi.internal.Bezier_C,u=Number((n*o).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+Rd(Yi.internal.getWidth(t)/2)+" "+Rd(Yi.internal.getHeight(t)/2)+" cm"),i.push(n+" 0 m"),i.push(n+" "+u+" "+u+" "+n+" 0 "+n+" c"),i.push("-"+u+" "+n+" -"+n+" "+u+" -"+n+" 0 c"),i.push("-"+n+" -"+u+" -"+u+" -"+n+" 0 -"+n+" c"),i.push(u+" -"+n+" "+n+" -"+u+" "+n+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join(`
`),e},YesPushDown:function(t){var e=vh(t);e.scope=t.scope;var i=[],n=Yi.internal.getWidth(t)<=Yi.internal.getHeight(t)?Yi.internal.getWidth(t)/4:Yi.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),u=Number((o*Yi.internal.Bezier_C).toFixed(5)),A=Number((n*Yi.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Rd(Yi.internal.getWidth(t)/2)+" "+Rd(Yi.internal.getHeight(t)/2)+" cm"),i.push(o+" 0 m"),i.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),i.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),i.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),i.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+Rd(Yi.internal.getWidth(t)/2)+" "+Rd(Yi.internal.getHeight(t)/2)+" cm"),i.push(n+" 0 m"),i.push(n+" "+A+" "+A+" "+n+" 0 "+n+" c"),i.push("-"+A+" "+n+" -"+n+" "+A+" -"+n+" 0 c"),i.push("-"+n+" -"+A+" -"+A+" -"+n+" 0 -"+n+" c"),i.push(A+" -"+n+" "+n+" -"+A+" "+n+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=vh(t);e.scope=t.scope;var i=[],n=Yi.internal.getWidth(t)<=Yi.internal.getHeight(t)?Yi.internal.getWidth(t)/4:Yi.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),u=Number((o*Yi.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Rd(Yi.internal.getWidth(t)/2)+" "+Rd(Yi.internal.getHeight(t)/2)+" cm"),i.push(o+" 0 m"),i.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),i.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),i.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),i.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Yi.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Yi.RadioButton.Cross.YesNormal,e.D[t]=Yi.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=vh(t);e.scope=t.scope;var i=[],n=Yi.internal.calculateCross(t);return i.push("q"),i.push("1 1 "+Un(Yi.internal.getWidth(t)-2)+" "+Un(Yi.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(Un(n.x1.x)+" "+Un(n.x1.y)+" m"),i.push(Un(n.x2.x)+" "+Un(n.x2.y)+" l"),i.push(Un(n.x4.x)+" "+Un(n.x4.y)+" m"),i.push(Un(n.x3.x)+" "+Un(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},YesPushDown:function(t){var e=vh(t);e.scope=t.scope;var i=Yi.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Un(Yi.internal.getWidth(t))+" "+Un(Yi.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Un(Yi.internal.getWidth(t)-2)+" "+Un(Yi.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Un(i.x1.x)+" "+Un(i.x1.y)+" m"),n.push(Un(i.x2.x)+" "+Un(i.x2.y)+" l"),n.push(Un(i.x4.x)+" "+Un(i.x4.y)+" m"),n.push(Un(i.x3.x)+" "+Un(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=vh(t);e.scope=t.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Un(Yi.internal.getWidth(t))+" "+Un(Yi.internal.getHeight(t))+" re"),i.push("f"),e.stream=i.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+i}};Yi.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Yi.internal.getWidth(t),i=Yi.internal.getHeight(t),n=Math.min(e,i);return{x1:{x:(e-n)/2,y:(i-n)/2+n},x2:{x:(e-n)/2+n,y:(i-n)/2},x3:{x:(e-n)/2,y:(i-n)/2},x4:{x:(e-n)/2+n,y:(i-n)/2+n}}}},Yi.internal.getWidth=function(t){var e=0;return hs(t)==="object"&&(e=j5(t.Rect[2])),e},Yi.internal.getHeight=function(t){var e=0;return hs(t)==="object"&&(e=j5(t.Rect[3])),e};var D8=La.addField=function(t){if(U8(this,t),!(t instanceof WA))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};La.AcroFormChoiceField=Gf,La.AcroFormListBox=Kf,La.AcroFormComboBox=Wf,La.AcroFormEditBox=Wg,La.AcroFormButton=Ro,La.AcroFormPushButton=$g,La.AcroFormRadioButton=$f,La.AcroFormCheckBox=Zg,La.AcroFormTextField=Jd,La.AcroFormPasswordField=Xg,La.AcroFormAppearance=Yi,La.AcroForm={ChoiceField:Gf,ListBox:Kf,ComboBox:Wf,EditBox:Wg,Button:Ro,PushButton:$g,RadioButton:$f,CheckBox:Zg,TextField:Jd,PasswordField:Xg,Appearance:Yi},Bn.AcroForm={ChoiceField:Gf,ListBox:Kf,ComboBox:Wf,EditBox:Wg,Button:Ro,PushButton:$g,RadioButton:$f,CheckBox:Zg,TextField:Jd,PasswordField:Xg,Appearance:Yi};var R8=Bn.AcroForm;function TS(t){return t.reduce(function(e,i,n){return e[i]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(se,ae){var ce,Ee,Ve,ue,fe,Ue=e;if((ae=ae||e)==="RGBA"||se.data!==void 0&&se.data instanceof Uint8ClampedArray&&"height"in se&&"width"in se)return"RGBA";if(de(se))for(fe in i)for(Ve=i[fe],ce=0;ce<Ve.length;ce+=1){for(ue=!0,Ee=0;Ee<Ve[ce].length;Ee+=1)if(Ve[ce][Ee]!==void 0&&Ve[ce][Ee]!==se[Ee]){ue=!1;break}if(ue===!0){Ue=fe;break}}else for(fe in i)for(Ve=i[fe],ce=0;ce<Ve.length;ce+=1){for(ue=!0,Ee=0;Ee<Ve[ce].length;Ee+=1)if(Ve[ce][Ee]!==void 0&&Ve[ce][Ee]!==se.charCodeAt(Ee)){ue=!1;break}if(ue===!0){Ue=fe;break}}return Ue===e&&ae!==e&&(Ue=ae),Ue},o=function se(ae){for(var ce=this.internal.write,Ee=this.internal.putStream,Ve=(0,this.internal.getFilters)();Ve.indexOf("FlateEncode")!==-1;)Ve.splice(Ve.indexOf("FlateEncode"),1);ae.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:ae.width}),ue.push({key:"Height",value:ae.height}),ae.colorSpace===H.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ae.palette.length/3-1)+" "+("sMask"in ae&&ae.sMask!==void 0?ae.objectId+2:ae.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+ae.colorSpace}),ae.colorSpace===H.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:ae.bitsPerComponent}),"decodeParameters"in ae&&ae.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+ae.decodeParameters+">>"}),"transparency"in ae&&Array.isArray(ae.transparency)){for(var fe="",Ue=0,ke=ae.transparency.length;Ue<ke;Ue++)fe+=ae.transparency[Ue]+" "+ae.transparency[Ue]+" ";ue.push({key:"Mask",value:"["+fe+"]"})}ae.sMask!==void 0&&ue.push({key:"SMask",value:ae.objectId+1+" 0 R"});var pe=ae.filter!==void 0?["/"+ae.filter]:void 0;if(Ee({data:ae.data,additionalKeyValues:ue,alreadyAppliedFilters:pe,objectId:ae.objectId}),ce("endobj"),"sMask"in ae&&ae.sMask!==void 0){var Qe="/Predictor "+ae.predictor+" /Colors 1 /BitsPerComponent "+ae.bitsPerComponent+" /Columns "+ae.width,J={width:ae.width,height:ae.height,colorSpace:"DeviceGray",bitsPerComponent:ae.bitsPerComponent,decodeParameters:Qe,data:ae.sMask};"filter"in ae&&(J.filter=ae.filter),se.call(this,J)}if(ae.colorSpace===H.INDEXED){var me=this.internal.newObject();Ee({data:re(new Uint8Array(ae.palette)),objectId:me}),ce("endobj")}},u=function(){var se=this.internal.collections.addImage_images;for(var ae in se)o.call(this,se[ae])},A=function(){var se,ae=this.internal.collections.addImage_images,ce=this.internal.write;for(var Ee in ae)ce("/I"+(se=ae[Ee]).index,se.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",A))},g=function(){var se=this.internal.collections.addImage_images;return a.call(this),se},b=function(){return Object.keys(this.internal.collections.addImage_images).length},B=function(se){return typeof t["process"+se.toUpperCase()]=="function"},I=function(se){return hs(se)==="object"&&se.nodeType===1},P=function(se,ae){if(se.nodeName==="IMG"&&se.hasAttribute("src")){var ce=""+se.getAttribute("src");if(ce.indexOf("data:image/")===0)return Kg(unescape(ce).split("base64,").pop());var Ee=t.loadFile(ce,!0);if(Ee!==void 0)return Ee}if(se.nodeName==="CANVAS"){if(se.width===0||se.height===0)throw new Error("Given canvas must have data. Canvas width: "+se.width+", height: "+se.height);var Ve;switch(ae){case"PNG":Ve="image/png";break;case"WEBP":Ve="image/webp";break;case"JPEG":case"JPG":default:Ve="image/jpeg"}return Kg(se.toDataURL(Ve,1).split("base64,").pop())}},F=function(se){var ae=this.internal.collections.addImage_images;if(ae){for(var ce in ae)if(se===ae[ce].alias)return ae[ce]}},Q=function(se,ae,ce){return se||ae||(se=-96,ae=-96),se<0&&(se=-1*ce.width*72/se/this.internal.scaleFactor),ae<0&&(ae=-1*ce.height*72/ae/this.internal.scaleFactor),se===0&&(se=ae*ce.width/ce.height),ae===0&&(ae=se*ce.height/ce.width),[se,ae]},R=function(se,ae,ce,Ee,Ve,ue){var fe=Q.call(this,ce,Ee,Ve),Ue=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString,pe=g.call(this);if(ce=fe[0],Ee=fe[1],pe[Ve.index]=Ve,ue){ue*=Math.PI/180;var Qe=Math.cos(ue),J=Math.sin(ue),me=function(ze){return ze.toFixed(4)},Fe=[me(Qe),me(J),me(-1*J),me(Qe),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,Ue(se),ke(ae+Ee),"cm"].join(" ")),this.internal.write(Fe.join(" ")),this.internal.write([Ue(ce),"0","0",Ue(Ee),"0","0","cm"].join(" "))):this.internal.write([Ue(ce),"0","0",Ue(Ee),Ue(se),ke(ae+Ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ve.index+" Do"),this.internal.write("Q")},H=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},V=t.__addimage__.sHashCode=function(se){var ae,ce,Ee=0;if(typeof se=="string")for(ce=se.length,ae=0;ae<ce;ae++)Ee=(Ee<<5)-Ee+se.charCodeAt(ae),Ee|=0;else if(de(se))for(ce=se.byteLength/2,ae=0;ae<ce;ae++)Ee=(Ee<<5)-Ee+se[ae],Ee|=0;return Ee},W=t.__addimage__.validateStringAsBase64=function(se){(se=se||"").toString().trim();var ae=!0;return se.length===0&&(ae=!1),se.length%4!=0&&(ae=!1),/^[A-Za-z0-9+/]+$/.test(se.substr(0,se.length-2))===!1&&(ae=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(se.substr(-2))===!1&&(ae=!1),ae},ne=t.__addimage__.extractImageFromDataUrl=function(se){var ae=(se=se||"").split("base64,"),ce=null;if(ae.length===2){var Ee=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(ae[0]);Array.isArray(Ee)&&(ce={mimeType:Ee[1],charset:Ee[2],data:ae[1]})}return ce},te=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(se){return te()&&se instanceof ArrayBuffer};var de=t.__addimage__.isArrayBufferView=function(se){return te()&&typeof Uint32Array<"u"&&(se instanceof Int8Array||se instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&se instanceof Uint8ClampedArray||se instanceof Int16Array||se instanceof Uint16Array||se instanceof Int32Array||se instanceof Uint32Array||se instanceof Float32Array||se instanceof Float64Array)},ee=t.__addimage__.binaryStringToUint8Array=function(se){for(var ae=se.length,ce=new Uint8Array(ae),Ee=0;Ee<ae;Ee++)ce[Ee]=se.charCodeAt(Ee);return ce},re=t.__addimage__.arrayBufferToBinaryString=function(se){for(var ae="",ce=de(se)?se:new Uint8Array(se),Ee=0;Ee<ce.length;Ee+=8192)ae+=String.fromCharCode.apply(null,ce.subarray(Ee,Ee+8192));return ae};t.addImage=function(){var se,ae,ce,Ee,Ve,ue,fe,Ue,ke;if(typeof arguments[1]=="number"?(ae=e,ce=arguments[1],Ee=arguments[2],Ve=arguments[3],ue=arguments[4],fe=arguments[5],Ue=arguments[6],ke=arguments[7]):(ae=arguments[1],ce=arguments[2],Ee=arguments[3],Ve=arguments[4],ue=arguments[5],fe=arguments[6],Ue=arguments[7],ke=arguments[8]),hs(se=arguments[0])==="object"&&!I(se)&&"imageData"in se){var pe=se;se=pe.imageData,ae=pe.format||ae||e,ce=pe.x||ce||0,Ee=pe.y||Ee||0,Ve=pe.w||pe.width||Ve,ue=pe.h||pe.height||ue,fe=pe.alias||fe,Ue=pe.compression||Ue,ke=pe.rotation||pe.angle||ke}var Qe=this.internal.getFilters();if(Ue===void 0&&Qe.indexOf("FlateEncode")!==-1&&(Ue="SLOW"),isNaN(ce)||isNaN(Ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var J=xe.call(this,se,ae,fe,Ue);return R.call(this,ce,Ee,Ve,ue,J,ke),this};var xe=function(se,ae,ce,Ee){var Ve,ue,fe;if(typeof se=="string"&&n(se)===e){se=unescape(se);var Ue=Be(se,!1);(Ue!==""||(Ue=t.loadFile(se,!0))!==void 0)&&(se=Ue)}if(I(se)&&(se=P(se,ae)),ae=n(se,ae),!B(ae))throw new Error("addImage does not support files of type '"+ae+"', please ensure that a plugin for '"+ae+"' support is added.");if(((fe=ce)==null||fe.length===0)&&(ce=function(ke){return typeof ke=="string"||de(ke)?V(ke):de(ke.data)?V(ke.data):null}(se)),(Ve=F.call(this,ce))||(te()&&(se instanceof Uint8Array||ae==="RGBA"||(ue=se,se=ee(se))),Ve=this["process"+ae.toUpperCase()](se,b.call(this),ce,function(ke){return ke&&typeof ke=="string"&&(ke=ke.toUpperCase()),ke in t.image_compression?ke:j.NONE}(Ee),ue)),!Ve)throw new Error("An unknown error occurred whilst processing the image.");return Ve},Be=t.__addimage__.convertBase64ToBinaryString=function(se,ae){var ce;ae=typeof ae!="boolean"||ae;var Ee,Ve="";if(typeof se=="string"){Ee=(ce=ne(se))!==null?ce.data:se;try{Ve=Kg(Ee)}catch(ue){if(ae)throw W(Ee)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ve};t.getImageProperties=function(se){var ae,ce,Ee="";if(I(se)&&(se=P(se)),typeof se=="string"&&n(se)===e&&((Ee=Be(se,!1))===""&&(Ee=t.loadFile(se)||""),se=Ee),ce=n(se),!B(ce))throw new Error("addImage does not support files of type '"+ce+"', please ensure that a plugin for '"+ce+"' support is added.");if(!te()||se instanceof Uint8Array||(se=ee(se)),!(ae=this["process"+ce.toUpperCase()](se)))throw new Error("An unknown error occurred whilst processing the image");return ae.fileType=ce,ae}})(Bn.API),function(t){var e=function(i){if(i!==void 0&&i!="")return!0};Bn.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(i){for(var n,o,u,A=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,g=this.internal.getPageInfoByObjId(i.objId),b=i.pageContext.annotations,B=!1,I=0;I<b.length&&!B;I++)switch((n=b[I]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(B=!0);break;case"reference":case"text":case"freetext":B=!0}if(B!=0){this.internal.write("/Annots [");for(var P=0;P<b.length;P++){n=b[P];var F=this.internal.pdfEscape,Q=this.internal.getEncryptor(i.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),H=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(R.objId),V=n.title||"Note";u="<</Type /Annot /Subtype /Text "+(o="/Rect ["+A(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+A(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+F(j(n.contents))+")",u+=" /Popup "+H.objId+" 0 R",u+=" /P "+g.objId+" 0 R",u+=" /T ("+F(j(V))+") >>",R.content=u;var W=R.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+A(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+A(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+W,n.open&&(u+=" /Open true"),u+=" >>",H.content=u,this.internal.write(R.objId,"0 R",H.objId,"0 R");break;case"freetext":o="/Rect ["+A(n.bounds.x)+" "+a(n.bounds.y)+" "+A(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var ne=n.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+F(Q(n.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ne+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(n.options.name){var te=this.annotations._nameMap[n.options.name];n.options.pageNumber=te.page,n.options.top=te.y}else n.options.top||(n.options.top=0);if(o="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",u="",n.options.url)u="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+F(Q(n.options.url))+") >>";else if(n.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,u+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var de=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),u+=" /XYZ "+n.options.left+" "+de+" "+n.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),t.createAnnotation=function(i){var n=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":n.pageContext.annotations.push(i)}},t.link=function(i,n,o,u,A){var a=this.internal.getCurrentPageInfo(),g=this.internal.getCoordinateString,b=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:g(i),y:b(n),w:g(i+o),h:b(n+u)},options:A,type:"link"})},t.textWithLink=function(i,n,o,u){var A,a,g=this.getTextWidth(i),b=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){a=u.maxWidth;var B=this.splitTextToSize(i,a).length;A=Math.ceil(b*B)}else a=g,A=b;return this.text(i,n,o,u),o+=.2*b,u.align==="center"&&(n-=g/2),u.align==="right"&&(n-=g),this.link(n,o-b,a,A,u),g},t.getTextWidth=function(i){var n=this.internal.getFontSize();return this.getStringUnitWidth(i)*n/this.internal.scaleFactor}}(Bn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var u=t.__arabicParser__.isInArabicSubstitutionA=function(R){return e[R.charCodeAt(0)]!==void 0},A=t.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},a=t.__arabicParser__.isArabicEndLetter=function(R){return A(R)&&u(R)&&e[R.charCodeAt(0)].length<=2},g=t.__arabicParser__.isArabicAlfLetter=function(R){return A(R)&&o.indexOf(R.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return A(R)&&u(R)&&e[R.charCodeAt(0)].length>=1};var b=t.__arabicParser__.arabicLetterHasFinalForm=function(R){return A(R)&&u(R)&&e[R.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(R){return A(R)&&u(R)&&e[R.charCodeAt(0)].length>=3};var B=t.__arabicParser__.arabicLetterHasMedialForm=function(R){return A(R)&&u(R)&&e[R.charCodeAt(0)].length==4},I=t.__arabicParser__.resolveLigatures=function(R){var H=0,j=i,V="",W=0;for(H=0;H<R.length;H+=1)j[R.charCodeAt(H)]!==void 0?(W++,typeof(j=j[R.charCodeAt(H)])=="number"&&(V+=String.fromCharCode(j),j=i,W=0),H===R.length-1&&(j=i,V+=R.charAt(H-(W-1)),H-=W-1,W=0)):(j=i,V+=R.charAt(H-W),H-=W,W=0);return V};t.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&n[R.charCodeAt(0)]!==void 0};var P=t.__arabicParser__.getCorrectForm=function(R,H,j){return A(R)?u(R)===!1?-1:!b(R)||!A(H)&&!A(j)||!A(j)&&a(H)||a(R)&&!A(H)||a(R)&&g(H)||a(R)&&a(H)?0:B(R)&&A(H)&&!a(H)&&A(j)&&b(j)?3:a(R)||!A(j)?1:2:-1},F=function(R){var H=0,j=0,V=0,W="",ne="",te="",de=(R=R||"").split("\\s+"),ee=[];for(H=0;H<de.length;H+=1){for(ee.push(""),j=0;j<de[H].length;j+=1)W=de[H][j],ne=de[H][j-1],te=de[H][j+1],A(W)?(V=P(W,ne,te),ee[H]+=V!==-1?String.fromCharCode(e[W.charCodeAt(0)][V]):W):ee[H]+=W;ee[H]=I(ee[H])}return ee.join(" ")},Q=t.__arabicParser__.processArabic=t.processArabic=function(){var R,H=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(H)){var V=0;for(j=[],V=0;V<H.length;V+=1)Array.isArray(H[V])?j.push([F(H[V][0]),H[V][1],H[V][2]]):j.push([F(H[V])]);R=j}else R=F(H);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};t.events.push(["preProcessText",Q])}(Bn.API),Bn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(a){i=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(a){o=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(a){u=a}});var A={};Object.defineProperty(this,"style",{get:function(){return A},set:function(a){A=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(i,n){var o;if((i=i||"2d")!=="2d")return null;for(o in n)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=n[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Bn.API),function(t){var e={left:0,top:0,bottom:0,right:0},i=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var g=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return g},set:function(R){g=R}});var b=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return b},set:function(R){b=R}});var B=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return B},set:function(R){B=R}});var I=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return I},set:function(R){I=R}});var P=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return P},set:function(R){P=R}});var F=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return F},set:function(R){F=R}});var Q=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Q},set:function(R){Q=R}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(g){return n.call(this),this.internal.__cell__.headerFunction=typeof g=="function"?g:void 0,this},t.getTextDimensions=function(g,b){n.call(this);var B=(b=b||{}).fontSize||this.getFontSize(),I=b.font||this.getFont(),P=b.scaleFactor||this.internal.scaleFactor,F=0,Q=0,R=0,H=this;if(!Array.isArray(g)&&typeof g!="string"){if(typeof g!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");g=String(g)}var j=b.maxWidth;j>0?typeof g=="string"?g=this.splitTextToSize(g,j):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(W,ne){return W.concat(H.splitTextToSize(ne,j))},[])):g=Array.isArray(g)?g:[g];for(var V=0;V<g.length;V++)F<(R=this.getStringUnitWidth(g[V],{font:I})*B)&&(F=R);return F!==0&&(Q=g.length),{w:F/=P,h:Math.max((Q*B*this.getLineHeightFactor()-B*(this.getLineHeightFactor()-1))/P,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var g=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new u(g.left,g.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var A=t.cell=function(){var g;g=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var b=this.internal.__cell__.lastCell,B=this.internal.__cell__.padding,I=this.internal.__cell__.margins||e,P=this.internal.__cell__.tableHeaderRow,F=this.internal.__cell__.printHeaders;return b.lineNumber!==void 0&&(b.lineNumber===g.lineNumber?(g.x=(b.x||0)+(b.width||0),g.y=b.y||0):b.y+b.height+g.height+I.bottom>this.getPageHeight()?(this.cellAddPage(),g.y=I.top,F&&P&&(this.printHeaderRow(g.lineNumber,!0),g.y+=P[0].height)):g.y=b.y+b.height||g.y),g.text[0]!==void 0&&(this.rect(g.x,g.y,g.width,g.height,i===!0?"FD":void 0),g.align==="right"?this.text(g.text,g.x+g.width-B,g.y+B,{align:"right",baseline:"top"}):g.align==="center"?this.text(g.text,g.x+g.width/2,g.y+B,{align:"center",baseline:"top",maxWidth:g.width-B-B}):this.text(g.text,g.x+B,g.y+B,{align:"left",baseline:"top",maxWidth:g.width-B-B})),this.internal.__cell__.lastCell=g,this};t.table=function(g,b,B,I,P){if(n.call(this),!B)throw new Error("No data for PDF table.");var F,Q,R,H,j=[],V=[],W=[],ne={},te={},de=[],ee=[],re=(P=P||{}).autoSize||!1,xe=P.printHeaders!==!1,Be=P.css&&P.css["font-size"]!==void 0?16*P.css["font-size"]:P.fontSize||12,se=P.margins||Object.assign({width:this.getPageWidth()},e),ae=typeof P.padding=="number"?P.padding:3,ce=P.headerBackgroundColor||"#c8c8c8",Ee=P.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=xe,this.internal.__cell__.margins=se,this.internal.__cell__.table_font_size=Be,this.internal.__cell__.padding=ae,this.internal.__cell__.headerBackgroundColor=ce,this.internal.__cell__.headerTextColor=Ee,this.setFontSize(Be),I==null)V=j=Object.keys(B[0]),W=j.map(function(){return"left"});else if(Array.isArray(I)&&hs(I[0])==="object")for(j=I.map(function(pe){return pe.name}),V=I.map(function(pe){return pe.prompt||pe.name||""}),W=I.map(function(pe){return pe.align||"left"}),F=0;F<I.length;F+=1)te[I[F].name]=I[F].width*(19.049976/25.4);else Array.isArray(I)&&typeof I[0]=="string"&&(V=j=I,W=j.map(function(){return"left"}));if(re||Array.isArray(I)&&typeof I[0]=="string")for(F=0;F<j.length;F+=1){for(ne[H=j[F]]=B.map(function(pe){return pe[H]}),this.setFont(void 0,"bold"),de.push(this.getTextDimensions(V[F],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Q=ne[H],this.setFont(void 0,"normal"),R=0;R<Q.length;R+=1)de.push(this.getTextDimensions(Q[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[H]=Math.max.apply(null,de)+ae+ae,de=[]}if(xe){var Ve={};for(F=0;F<j.length;F+=1)Ve[j[F]]={},Ve[j[F]].text=V[F],Ve[j[F]].align=W[F];var ue=a.call(this,Ve,te);ee=j.map(function(pe){return new u(g,b,te[pe],ue,Ve[pe].text,void 0,Ve[pe].align)}),this.setTableHeaderRow(ee),this.printHeaderRow(1,!1)}var fe=I.reduce(function(pe,Qe){return pe[Qe.name]=Qe.align,pe},{});for(F=0;F<B.length;F+=1){"rowStart"in P&&P.rowStart instanceof Function&&P.rowStart({row:F,data:B[F]},this);var Ue=a.call(this,B[F],te);for(R=0;R<j.length;R+=1){var ke=B[F][j[R]];"cellStart"in P&&P.cellStart instanceof Function&&P.cellStart({row:F,col:R,data:ke},this),A.call(this,new u(g,b,te[j[R]],Ue,ke,F+2,fe[j[R]]))}}return this.internal.__cell__.table_x=g,this.internal.__cell__.table_y=b,this};var a=function(g,b){var B=this.internal.__cell__.padding,I=this.internal.__cell__.table_font_size,P=this.internal.scaleFactor;return Object.keys(g).map(function(F){var Q=g[F];return this.splitTextToSize(Q.hasOwnProperty("text")?Q.text:Q,b[F]-B-B)},this).map(function(F){return this.getLineHeightFactor()*F.length*I/P+B+B},this).reduce(function(F,Q){return Math.max(F,Q)},0)};t.setTableHeaderRow=function(g){n.call(this),this.internal.__cell__.tableHeaderRow=g},t.printHeaderRow=function(g,b){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var B;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var I=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(I[0],I[1],I[2],I[3],void 0,-1)}this.setFont(void 0,"bold");for(var P=[],F=0;F<this.internal.__cell__.tableHeaderRow.length;F+=1){B=this.internal.__cell__.tableHeaderRow[F].clone(),b&&(B.y=this.internal.__cell__.margins.top||0,P.push(B)),B.lineNumber=g;var Q=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),A.call(this,B),this.setTextColor(Q)}P.length>0&&this.setTableHeaderRow(P),this.setFont(void 0,"normal"),i=!1}}(Bn.API);var FS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},NS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],qx=TS(NS),MS=[100,200,300,400,500,600,700,800,900],O8=TS(MS);function Gx(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),i=function(u){return FS[u=u||"normal"]?u:"normal"}(t.style),n=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(u){return typeof qx[u=u||"normal"]=="number"?u:"normal"}(t.stretch);return{family:e,style:i,weight:n,stretch:o,src:t.src||[],ref:t.ref||{name:e,style:[o,i,n].join(" ")}}}function U5(t,e,i,n){var o;for(o=i;o>=0&&o<e.length;o+=n)if(t[e[o]])return t[e[o]];for(o=i;o>=0&&o<e.length;o-=n)if(t[e[o]])return t[e[o]]}var Q8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},D5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function R5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function z8(t,e,i){for(var n=(i=i||{}).defaultFontFamily||"times",o=Object.assign({},Q8,i.genericFontFamilies||{}),u=null,A=null,a=0;a<e.length;++a)if(o[(u=Gx(e[a])).family]&&(u.family=o[u.family]),t.hasOwnProperty(u.family)){A=t[u.family];break}if(!(A=A||t[n]))throw new Error("Could not find a font-family for the rule '"+R5(u)+"' and default family '"+n+"'.");if(A=function(g,b){if(b[g])return b[g];var B=qx[g],I=B<=qx.normal?-1:1,P=U5(b,NS,B,I);if(!P)throw new Error("Could not find a matching font-stretch value for "+g);return P}(u.stretch,A),A=function(g,b){if(b[g])return b[g];for(var B=FS[g],I=0;I<B.length;++I)if(b[B[I]])return b[B[I]];throw new Error("Could not find a matching font-style for "+g)}(u.style,A),!(A=function(g,b){if(b[g])return b[g];if(g===400&&b[500])return b[500];if(g===500&&b[400])return b[400];var B=O8[g],I=U5(b,MS,B,g<400?-1:1);if(!I)throw new Error("Could not find a matching font-weight for value "+g);return I}(u.weight,A)))throw new Error("Failed to resolve a font for the rule '"+R5(u)+"'.");return A}function O5(t){return t.trimLeft()}function H8(t,e){for(var i=0;i<t.length;){if(t.charAt(i)===e)return[t.substring(0,i),t.substring(i+1)];i+=1}return null}function V8(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Ry,Q5,z5,P_=["times"];(function(t){var e,i,n,o,u,A,a,g,b,B=function(J){return J=J||{},this.isStrokeTransparent=J.isStrokeTransparent||!1,this.strokeOpacity=J.strokeOpacity||1,this.strokeStyle=J.strokeStyle||"#000000",this.fillStyle=J.fillStyle||"#000000",this.isFillTransparent=J.isFillTransparent||!1,this.fillOpacity=J.fillOpacity||1,this.font=J.font||"10px sans-serif",this.textBaseline=J.textBaseline||"alphabetic",this.textAlign=J.textAlign||"left",this.lineWidth=J.lineWidth||1,this.lineJoin=J.lineJoin||"miter",this.lineCap=J.lineCap||"butt",this.path=J.path||[],this.transform=J.transform!==void 0?J.transform.clone():new g,this.globalCompositeOperation=J.globalCompositeOperation||"normal",this.globalAlpha=J.globalAlpha||1,this.clip_path=J.clip_path||[],this.currentPoint=J.currentPoint||new A,this.miterLimit=J.miterLimit||10,this.lastPoint=J.lastPoint||new A,this.lineDashOffset=J.lineDashOffset||0,this.lineDash=J.lineDash||[],this.margin=J.margin||[0,0,0,0],this.prevPageLastElemOffset=J.prevPageLastElemOffset||0,this.ignoreClearRect=typeof J.ignoreClearRect!="boolean"||J.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new I(this),e=this.internal.f2,i=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,A=this.internal.Point,a=this.internal.Rectangle,g=this.internal.Matrix,b=new B}]);var I=function(J){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var me=J;Object.defineProperty(this,"pdf",{get:function(){return me}});var Fe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Fe},set:function(ot){Fe=!!ot}});var ze=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ze},set:function(ot){ze=!!ot}});var Ke=0;Object.defineProperty(this,"posX",{get:function(){return Ke},set:function(ot){isNaN(ot)||(Ke=ot)}});var _t=0;Object.defineProperty(this,"posY",{get:function(){return _t},set:function(ot){isNaN(ot)||(_t=ot)}}),Object.defineProperty(this,"margin",{get:function(){return b.margin},set:function(ot){var $e;typeof ot=="number"?$e=[ot,ot,ot,ot]:(($e=new Array(4))[0]=ot[0],$e[1]=ot.length>=2?ot[1]:$e[0],$e[2]=ot.length>=3?ot[2]:$e[0],$e[3]=ot.length>=4?ot[3]:$e[1]),b.margin=$e}});var gt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return gt},set:function(ot){gt=ot}});var Et=0;Object.defineProperty(this,"lastBreak",{get:function(){return Et},set:function(ot){Et=ot}});var hi=[];Object.defineProperty(this,"pageBreaks",{get:function(){return hi},set:function(ot){hi=ot}}),Object.defineProperty(this,"ctx",{get:function(){return b},set:function(ot){ot instanceof B&&(b=ot)}}),Object.defineProperty(this,"path",{get:function(){return b.path},set:function(ot){b.path=ot}});var Vt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Vt},set:function(ot){Vt=ot}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ot){var $e;$e=P(ot),this.ctx.fillStyle=$e.style,this.ctx.isFillTransparent=$e.a===0,this.ctx.fillOpacity=$e.a,this.pdf.setFillColor($e.r,$e.g,$e.b,{a:$e.a}),this.pdf.setTextColor($e.r,$e.g,$e.b,{a:$e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ot){var $e=P(ot);this.ctx.strokeStyle=$e.style,this.ctx.isStrokeTransparent=$e.a===0,this.ctx.strokeOpacity=$e.a,$e.a===0?this.pdf.setDrawColor(255,255,255):($e.a,this.pdf.setDrawColor($e.r,$e.g,$e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ot){["butt","round","square"].indexOf(ot)!==-1&&(this.ctx.lineCap=ot,this.pdf.setLineCap(ot))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ot){isNaN(ot)||(this.ctx.lineWidth=ot,this.pdf.setLineWidth(ot))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ot){["bevel","round","miter"].indexOf(ot)!==-1&&(this.ctx.lineJoin=ot,this.pdf.setLineJoin(ot))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ot){isNaN(ot)||(this.ctx.miterLimit=ot,this.pdf.setMiterLimit(ot))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ot){this.ctx.textBaseline=ot}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ot){["right","end","center","left","start"].indexOf(ot)!==-1&&(this.ctx.textAlign=ot)}});var Yt=null;function Jt(ot,$e){if(Yt===null){var Ni=function(yi){var si=[];return Object.keys(yi).forEach(function(Mt){yi[Mt].forEach(function(ei){var ai=null;switch(ei){case"bold":ai={family:Mt,weight:"bold"};break;case"italic":ai={family:Mt,style:"italic"};break;case"bolditalic":ai={family:Mt,weight:"bold",style:"italic"};break;case"":case"normal":ai={family:Mt}}ai!==null&&(ai.ref={name:Mt,style:ei},si.push(ai))})}),si}(ot.getFontList());Yt=function(yi){for(var si={},Mt=0;Mt<yi.length;++Mt){var ei=Gx(yi[Mt]),ai=ei.family,Ei=ei.stretch,$i=ei.style,zi=ei.weight;si[ai]=si[ai]||{},si[ai][Ei]=si[ai][Ei]||{},si[ai][Ei][$i]=si[ai][Ei][$i]||{},si[ai][Ei][$i][zi]=ei}return si}(Ni.concat($e))}return Yt}var bi=null;Object.defineProperty(this,"fontFaces",{get:function(){return bi},set:function(ot){Yt=null,bi=ot}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ot){var $e;if(this.ctx.font=ot,($e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ot))!==null){var Ni=$e[1],yi=($e[2],$e[3]),si=$e[4],Mt=($e[5],$e[6]),ei=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(si)[2];si=Math.floor(ei==="px"?parseFloat(si)*this.pdf.internal.scaleFactor:ei==="em"?parseFloat(si)*this.pdf.getFontSize():parseFloat(si)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(si);var ai=function(et){var be,ge,Re=[],Ze=et.trim();if(Ze==="")return P_;if(Ze in D5)return[D5[Ze]];for(;Ze!=="";){switch(ge=null,be=(Ze=O5(Ze)).charAt(0)){case'"':case"'":ge=H8(Ze.substring(1),be);break;default:ge=V8(Ze)}if(ge===null||(Re.push(ge[0]),(Ze=O5(ge[1]))!==""&&Ze.charAt(0)!==","))return P_;Ze=Ze.replace(/^,/,"")}return Re}(Mt);if(this.fontFaces){var Ei=z8(Jt(this.pdf,this.fontFaces),ai.map(function(et){return{family:et,stretch:"normal",weight:yi,style:Ni}}));this.pdf.setFont(Ei.ref.name,Ei.ref.style)}else{var $i="";(yi==="bold"||parseInt(yi,10)>=700||Ni==="bold")&&($i="bold"),Ni==="italic"&&($i+="italic"),$i.length===0&&($i="normal");for(var zi="",wi={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Gi=0;Gi<ai.length;Gi++){if(this.pdf.internal.getFont(ai[Gi],$i,{noFallback:!0,disableWarning:!0})!==void 0){zi=ai[Gi];break}if($i==="bolditalic"&&this.pdf.internal.getFont(ai[Gi],"bold",{noFallback:!0,disableWarning:!0})!==void 0)zi=ai[Gi],$i="bold";else if(this.pdf.internal.getFont(ai[Gi],"normal",{noFallback:!0,disableWarning:!0})!==void 0){zi=ai[Gi],$i="normal";break}}if(zi===""){for(var gn=0;gn<ai.length;gn++)if(wi[ai[gn]]){zi=wi[ai[gn]];break}}zi=zi===""?"Times":zi,this.pdf.setFont(zi,$i)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ot){this.ctx.globalCompositeOperation=ot}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ot){this.ctx.globalAlpha=ot}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ot){this.ctx.lineDashOffset=ot,Qe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ot){this.ctx.lineDash=ot,Qe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ot){this.ctx.ignoreClearRect=!!ot}})};I.prototype.setLineDash=function(J){this.lineDash=J},I.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},I.prototype.fill=function(){ne.call(this,"fill",!1)},I.prototype.stroke=function(){ne.call(this,"stroke",!1)},I.prototype.beginPath=function(){this.path=[{type:"begin"}]},I.prototype.moveTo=function(J,me){if(isNaN(J)||isNaN(me))throw Fs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Fe=this.ctx.transform.applyToPoint(new A(J,me));this.path.push({type:"mt",x:Fe.x,y:Fe.y}),this.ctx.lastPoint=new A(J,me)},I.prototype.closePath=function(){var J=new A(0,0),me=0;for(me=this.path.length-1;me!==-1;me--)if(this.path[me].type==="begin"&&hs(this.path[me+1])==="object"&&typeof this.path[me+1].x=="number"){J=new A(this.path[me+1].x,this.path[me+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new A(J.x,J.y)},I.prototype.lineTo=function(J,me){if(isNaN(J)||isNaN(me))throw Fs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Fe=this.ctx.transform.applyToPoint(new A(J,me));this.path.push({type:"lt",x:Fe.x,y:Fe.y}),this.ctx.lastPoint=new A(Fe.x,Fe.y)},I.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ne.call(this,null,!0)},I.prototype.quadraticCurveTo=function(J,me,Fe,ze){if(isNaN(Fe)||isNaN(ze)||isNaN(J)||isNaN(me))throw Fs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ke=this.ctx.transform.applyToPoint(new A(Fe,ze)),_t=this.ctx.transform.applyToPoint(new A(J,me));this.path.push({type:"qct",x1:_t.x,y1:_t.y,x:Ke.x,y:Ke.y}),this.ctx.lastPoint=new A(Ke.x,Ke.y)},I.prototype.bezierCurveTo=function(J,me,Fe,ze,Ke,_t){if(isNaN(Ke)||isNaN(_t)||isNaN(J)||isNaN(me)||isNaN(Fe)||isNaN(ze))throw Fs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var gt=this.ctx.transform.applyToPoint(new A(Ke,_t)),Et=this.ctx.transform.applyToPoint(new A(J,me)),hi=this.ctx.transform.applyToPoint(new A(Fe,ze));this.path.push({type:"bct",x1:Et.x,y1:Et.y,x2:hi.x,y2:hi.y,x:gt.x,y:gt.y}),this.ctx.lastPoint=new A(gt.x,gt.y)},I.prototype.arc=function(J,me,Fe,ze,Ke,_t){if(isNaN(J)||isNaN(me)||isNaN(Fe)||isNaN(ze)||isNaN(Ke))throw Fs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_t=!!_t,!this.ctx.transform.isIdentity){var gt=this.ctx.transform.applyToPoint(new A(J,me));J=gt.x,me=gt.y;var Et=this.ctx.transform.applyToPoint(new A(0,Fe)),hi=this.ctx.transform.applyToPoint(new A(0,0));Fe=Math.sqrt(Math.pow(Et.x-hi.x,2)+Math.pow(Et.y-hi.y,2))}Math.abs(Ke-ze)>=2*Math.PI&&(ze=0,Ke=2*Math.PI),this.path.push({type:"arc",x:J,y:me,radius:Fe,startAngle:ze,endAngle:Ke,counterclockwise:_t})},I.prototype.arcTo=function(J,me,Fe,ze,Ke){throw new Error("arcTo not implemented.")},I.prototype.rect=function(J,me,Fe,ze){if(isNaN(J)||isNaN(me)||isNaN(Fe)||isNaN(ze))throw Fs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(J,me),this.lineTo(J+Fe,me),this.lineTo(J+Fe,me+ze),this.lineTo(J,me+ze),this.lineTo(J,me),this.lineTo(J+Fe,me),this.lineTo(J,me)},I.prototype.fillRect=function(J,me,Fe,ze){if(isNaN(J)||isNaN(me)||isNaN(Fe)||isNaN(ze))throw Fs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!F.call(this)){var Ke={};this.lineCap!=="butt"&&(Ke.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ke.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(J,me,Fe,ze),this.fill(),Ke.hasOwnProperty("lineCap")&&(this.lineCap=Ke.lineCap),Ke.hasOwnProperty("lineJoin")&&(this.lineJoin=Ke.lineJoin)}},I.prototype.strokeRect=function(J,me,Fe,ze){if(isNaN(J)||isNaN(me)||isNaN(Fe)||isNaN(ze))throw Fs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Q.call(this)||(this.beginPath(),this.rect(J,me,Fe,ze),this.stroke())},I.prototype.clearRect=function(J,me,Fe,ze){if(isNaN(J)||isNaN(me)||isNaN(Fe)||isNaN(ze))throw Fs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(J,me,Fe,ze))},I.prototype.save=function(J){J=typeof J!="boolean"||J;for(var me=this.pdf.internal.getCurrentPageInfo().pageNumber,Fe=0;Fe<this.pdf.internal.getNumberOfPages();Fe++)this.pdf.setPage(Fe+1),this.pdf.internal.out("q");if(this.pdf.setPage(me),J){this.ctx.fontSize=this.pdf.internal.getFontSize();var ze=new B(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ze}},I.prototype.restore=function(J){J=typeof J!="boolean"||J;for(var me=this.pdf.internal.getCurrentPageInfo().pageNumber,Fe=0;Fe<this.pdf.internal.getNumberOfPages();Fe++)this.pdf.setPage(Fe+1),this.pdf.internal.out("Q");this.pdf.setPage(me),J&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},I.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var P=function(J){var me,Fe,ze,Ke;if(J.isCanvasGradient===!0&&(J=J.getColor()),!J)return{r:0,g:0,b:0,a:0,style:J};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(J))me=0,Fe=0,ze=0,Ke=0;else{var _t=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(J);if(_t!==null)me=parseInt(_t[1]),Fe=parseInt(_t[2]),ze=parseInt(_t[3]),Ke=1;else if((_t=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(J))!==null)me=parseInt(_t[1]),Fe=parseInt(_t[2]),ze=parseInt(_t[3]),Ke=parseFloat(_t[4]);else{if(Ke=1,typeof J=="string"&&J.charAt(0)!=="#"){var gt=new bS(J);J=gt.ok?gt.toHex():"#000000"}J.length===4?(me=J.substring(1,2),me+=me,Fe=J.substring(2,3),Fe+=Fe,ze=J.substring(3,4),ze+=ze):(me=J.substring(1,3),Fe=J.substring(3,5),ze=J.substring(5,7)),me=parseInt(me,16),Fe=parseInt(Fe,16),ze=parseInt(ze,16)}}return{r:me,g:Fe,b:ze,a:Ke,style:J}},F=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Q=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};I.prototype.fillText=function(J,me,Fe,ze){if(isNaN(me)||isNaN(Fe)||typeof J!="string")throw Fs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ze=isNaN(ze)?void 0:ze,!F.call(this)){var Ke=Ue(this.ctx.transform.rotation),_t=this.ctx.transform.scaleX;ae.call(this,{text:J,x:me,y:Fe,scale:_t,angle:Ke,align:this.textAlign,maxWidth:ze})}},I.prototype.strokeText=function(J,me,Fe,ze){if(isNaN(me)||isNaN(Fe)||typeof J!="string")throw Fs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Q.call(this)){ze=isNaN(ze)?void 0:ze;var Ke=Ue(this.ctx.transform.rotation),_t=this.ctx.transform.scaleX;ae.call(this,{text:J,x:me,y:Fe,scale:_t,renderingMode:"stroke",angle:Ke,align:this.textAlign,maxWidth:ze})}},I.prototype.measureText=function(J){if(typeof J!="string")throw Fs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var me=this.pdf,Fe=this.pdf.internal.scaleFactor,ze=me.internal.getFontSize(),Ke=me.getStringUnitWidth(J)*ze/me.internal.scaleFactor,_t=function(gt){var Et=(gt=gt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Et}}),this};return new _t({width:Ke*=Math.round(96*Fe/72*1e4)/1e4})},I.prototype.scale=function(J,me){if(isNaN(J)||isNaN(me))throw Fs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Fe=new g(J,0,0,me,0,0);this.ctx.transform=this.ctx.transform.multiply(Fe)},I.prototype.rotate=function(J){if(isNaN(J))throw Fs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var me=new g(Math.cos(J),Math.sin(J),-Math.sin(J),Math.cos(J),0,0);this.ctx.transform=this.ctx.transform.multiply(me)},I.prototype.translate=function(J,me){if(isNaN(J)||isNaN(me))throw Fs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Fe=new g(1,0,0,1,J,me);this.ctx.transform=this.ctx.transform.multiply(Fe)},I.prototype.transform=function(J,me,Fe,ze,Ke,_t){if(isNaN(J)||isNaN(me)||isNaN(Fe)||isNaN(ze)||isNaN(Ke)||isNaN(_t))throw Fs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var gt=new g(J,me,Fe,ze,Ke,_t);this.ctx.transform=this.ctx.transform.multiply(gt)},I.prototype.setTransform=function(J,me,Fe,ze,Ke,_t){J=isNaN(J)?1:J,me=isNaN(me)?0:me,Fe=isNaN(Fe)?0:Fe,ze=isNaN(ze)?1:ze,Ke=isNaN(Ke)?0:Ke,_t=isNaN(_t)?0:_t,this.ctx.transform=new g(J,me,Fe,ze,Ke,_t)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};I.prototype.drawImage=function(J,me,Fe,ze,Ke,_t,gt,Et,hi){var Vt=this.pdf.getImageProperties(J),Yt=1,Jt=1,bi=1,ot=1;ze!==void 0&&Et!==void 0&&(bi=Et/ze,ot=hi/Ke,Yt=Vt.width/ze*Et/ze,Jt=Vt.height/Ke*hi/Ke),_t===void 0&&(_t=me,gt=Fe,me=0,Fe=0),ze!==void 0&&Et===void 0&&(Et=ze,hi=Ke),ze===void 0&&Et===void 0&&(Et=Vt.width,hi=Vt.height);for(var $e,Ni=this.ctx.transform.decompose(),yi=Ue(Ni.rotate.shx),si=new g,Mt=(si=(si=(si=si.multiply(Ni.translate)).multiply(Ni.skew)).multiply(Ni.scale)).applyToRectangle(new a(_t-me*bi,gt-Fe*ot,ze*Yt,Ke*Jt)),ei=H.call(this,Mt),ai=[],Ei=0;Ei<ei.length;Ei+=1)ai.indexOf(ei[Ei])===-1&&ai.push(ei[Ei]);if(W(ai),this.autoPaging)for(var $i=ai[0],zi=ai[ai.length-1],wi=$i;wi<zi+1;wi++){this.pdf.setPage(wi);var Gi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],gn=wi===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ge=wi===1?0:et+(wi-2)*be;if(this.ctx.clip_path.length!==0){var Re=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V($e,this.posX+this.margin[3],-ge+gn+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=Re}var Ze=JSON.parse(JSON.stringify(Mt));Ze=V([Ze],this.posX+this.margin[3],-ge+gn+this.ctx.prevPageLastElemOffset)[0];var st=(wi>$i||wi<zi)&&R.call(this);st&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gi,be,null).clip().discardPath()),this.pdf.addImage(J,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,yi),st&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(J,"JPEG",Mt.x,Mt.y,Mt.w,Mt.h,null,null,yi)};var H=function(J,me,Fe){var ze=[];me=me||this.pdf.internal.pageSize.width,Fe=Fe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ke=this.posY+this.ctx.prevPageLastElemOffset;switch(J.type){default:case"mt":case"lt":ze.push(Math.floor((J.y+Ke)/Fe)+1);break;case"arc":ze.push(Math.floor((J.y+Ke-J.radius)/Fe)+1),ze.push(Math.floor((J.y+Ke+J.radius)/Fe)+1);break;case"qct":var _t=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,J.x1,J.y1,J.x,J.y);ze.push(Math.floor((_t.y+Ke)/Fe)+1),ze.push(Math.floor((_t.y+_t.h+Ke)/Fe)+1);break;case"bct":var gt=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,J.x1,J.y1,J.x2,J.y2,J.x,J.y);ze.push(Math.floor((gt.y+Ke)/Fe)+1),ze.push(Math.floor((gt.y+gt.h+Ke)/Fe)+1);break;case"rect":ze.push(Math.floor((J.y+Ke)/Fe)+1),ze.push(Math.floor((J.y+J.h+Ke)/Fe)+1)}for(var Et=0;Et<ze.length;Et+=1)for(;this.pdf.internal.getNumberOfPages()<ze[Et];)j.call(this);return ze},j=function(){var J=this.fillStyle,me=this.strokeStyle,Fe=this.font,ze=this.lineCap,Ke=this.lineWidth,_t=this.lineJoin;this.pdf.addPage(),this.fillStyle=J,this.strokeStyle=me,this.font=Fe,this.lineCap=ze,this.lineWidth=Ke,this.lineJoin=_t},V=function(J,me,Fe){for(var ze=0;ze<J.length;ze++)switch(J[ze].type){case"bct":J[ze].x2+=me,J[ze].y2+=Fe;case"qct":J[ze].x1+=me,J[ze].y1+=Fe;case"mt":case"lt":case"arc":default:J[ze].x+=me,J[ze].y+=Fe}return J},W=function(J){return J.sort(function(me,Fe){return me-Fe})},ne=function(J,me){for(var Fe,ze,Ke=this.fillStyle,_t=this.strokeStyle,gt=this.lineCap,Et=this.lineWidth,hi=Math.abs(Et*this.ctx.transform.scaleX),Vt=this.lineJoin,Yt=JSON.parse(JSON.stringify(this.path)),Jt=JSON.parse(JSON.stringify(this.path)),bi=[],ot=0;ot<Jt.length;ot++)if(Jt[ot].x!==void 0)for(var $e=H.call(this,Jt[ot]),Ni=0;Ni<$e.length;Ni+=1)bi.indexOf($e[Ni])===-1&&bi.push($e[Ni]);for(var yi=0;yi<bi.length;yi++)for(;this.pdf.internal.getNumberOfPages()<bi[yi];)j.call(this);if(W(bi),this.autoPaging)for(var si=bi[0],Mt=bi[bi.length-1],ei=si;ei<Mt+1;ei++){this.pdf.setPage(ei),this.fillStyle=Ke,this.strokeStyle=_t,this.lineCap=gt,this.lineWidth=hi,this.lineJoin=Vt;var ai=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ei=ei===1?this.posY+this.margin[0]:this.margin[0],$i=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wi=ei===1?0:$i+(ei-2)*zi;if(this.ctx.clip_path.length!==0){var Gi=this.path;Fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(Fe,this.posX+this.margin[3],-wi+Ei+this.ctx.prevPageLastElemOffset),te.call(this,J,!0),this.path=Gi}if(ze=JSON.parse(JSON.stringify(Yt)),this.path=V(ze,this.posX+this.margin[3],-wi+Ei+this.ctx.prevPageLastElemOffset),me===!1||ei===0){var gn=(ei>si||ei<Mt)&&R.call(this);gn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ai,zi,null).clip().discardPath()),te.call(this,J,me),gn&&this.pdf.restoreGraphicsState()}this.lineWidth=Et}else this.lineWidth=hi,te.call(this,J,me),this.lineWidth=Et;this.path=Yt},te=function(J,me){if((J!=="stroke"||me||!Q.call(this))&&(J==="stroke"||me||!F.call(this))){for(var Fe,ze,Ke=[],_t=this.path,gt=0;gt<_t.length;gt++){var Et=_t[gt];switch(Et.type){case"begin":Ke.push({begin:!0});break;case"close":Ke.push({close:!0});break;case"mt":Ke.push({start:Et,deltas:[],abs:[]});break;case"lt":var hi=Ke.length;if(_t[gt-1]&&!isNaN(_t[gt-1].x)&&(Fe=[Et.x-_t[gt-1].x,Et.y-_t[gt-1].y],hi>0)){for(;hi>=0;hi--)if(Ke[hi-1].close!==!0&&Ke[hi-1].begin!==!0){Ke[hi-1].deltas.push(Fe),Ke[hi-1].abs.push(Et);break}}break;case"bct":Fe=[Et.x1-_t[gt-1].x,Et.y1-_t[gt-1].y,Et.x2-_t[gt-1].x,Et.y2-_t[gt-1].y,Et.x-_t[gt-1].x,Et.y-_t[gt-1].y],Ke[Ke.length-1].deltas.push(Fe);break;case"qct":var Vt=_t[gt-1].x+2/3*(Et.x1-_t[gt-1].x),Yt=_t[gt-1].y+2/3*(Et.y1-_t[gt-1].y),Jt=Et.x+2/3*(Et.x1-Et.x),bi=Et.y+2/3*(Et.y1-Et.y),ot=Et.x,$e=Et.y;Fe=[Vt-_t[gt-1].x,Yt-_t[gt-1].y,Jt-_t[gt-1].x,bi-_t[gt-1].y,ot-_t[gt-1].x,$e-_t[gt-1].y],Ke[Ke.length-1].deltas.push(Fe);break;case"arc":Ke.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ke[Ke.length-1].abs)&&Ke[Ke.length-1].abs.push(Et)}}ze=me?null:J==="stroke"?"stroke":"fill";for(var Ni=!1,yi=0;yi<Ke.length;yi++)if(Ke[yi].arc)for(var si=Ke[yi].abs,Mt=0;Mt<si.length;Mt++){var ei=si[Mt];ei.type==="arc"?re.call(this,ei.x,ei.y,ei.radius,ei.startAngle,ei.endAngle,ei.counterclockwise,void 0,me,!Ni):ce.call(this,ei.x,ei.y),Ni=!0}else if(Ke[yi].close===!0)this.pdf.internal.out("h"),Ni=!1;else if(Ke[yi].begin!==!0){var ai=Ke[yi].start.x,Ei=Ke[yi].start.y;Ee.call(this,Ke[yi].deltas,ai,Ei),Ni=!0}ze&&xe.call(this,ze),me&&Be.call(this)}},de=function(J){var me=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Fe=me*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return J-Fe;case"top":return J+me-Fe;case"hanging":return J+me-2*Fe;case"middle":return J+me/2-Fe;case"ideographic":return J;case"alphabetic":default:return J}},ee=function(J){return J+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};I.prototype.createLinearGradient=function(){var J=function(){};return J.colorStops=[],J.addColorStop=function(me,Fe){this.colorStops.push([me,Fe])},J.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},J.isCanvasGradient=!0,J},I.prototype.createPattern=function(){return this.createLinearGradient()},I.prototype.createRadialGradient=function(){return this.createLinearGradient()};var re=function(J,me,Fe,ze,Ke,_t,gt,Et,hi){for(var Vt=ue.call(this,Fe,ze,Ke,_t),Yt=0;Yt<Vt.length;Yt++){var Jt=Vt[Yt];Yt===0&&(hi?se.call(this,Jt.x1+J,Jt.y1+me):ce.call(this,Jt.x1+J,Jt.y1+me)),Ve.call(this,J,me,Jt.x2,Jt.y2,Jt.x3,Jt.y3,Jt.x4,Jt.y4)}Et?Be.call(this):xe.call(this,gt)},xe=function(J){switch(J){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Be=function(){this.pdf.clip(),this.pdf.discardPath()},se=function(J,me){this.pdf.internal.out(i(J)+" "+n(me)+" m")},ae=function(J){var me;switch(J.align){case"right":case"end":me="right";break;case"center":me="center";break;case"left":case"start":default:me="left"}var Fe=this.pdf.getTextDimensions(J.text),ze=de.call(this,J.y),Ke=ee.call(this,ze)-Fe.h,_t=this.ctx.transform.applyToPoint(new A(J.x,ze)),gt=this.ctx.transform.decompose(),Et=new g;Et=(Et=(Et=Et.multiply(gt.translate)).multiply(gt.skew)).multiply(gt.scale);for(var hi,Vt,Yt,Jt=this.ctx.transform.applyToRectangle(new a(J.x,ze,Fe.w,Fe.h)),bi=Et.applyToRectangle(new a(J.x,Ke,Fe.w,Fe.h)),ot=H.call(this,bi),$e=[],Ni=0;Ni<ot.length;Ni+=1)$e.indexOf(ot[Ni])===-1&&$e.push(ot[Ni]);if(W($e),this.autoPaging)for(var yi=$e[0],si=$e[$e.length-1],Mt=yi;Mt<si+1;Mt++){this.pdf.setPage(Mt);var ei=Mt===1?this.posY+this.margin[0]:this.margin[0],ai=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ei=this.pdf.internal.pageSize.height-this.margin[2],$i=Ei-this.margin[0],zi=this.pdf.internal.pageSize.width-this.margin[1],wi=zi-this.margin[3],Gi=Mt===1?0:ai+(Mt-2)*$i;if(this.ctx.clip_path.length!==0){var gn=this.path;hi=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(hi,this.posX+this.margin[3],-1*Gi+ei),te.call(this,"fill",!0),this.path=gn}var et=V([JSON.parse(JSON.stringify(bi))],this.posX+this.margin[3],-Gi+ei+this.ctx.prevPageLastElemOffset)[0];J.scale>=.01&&(Vt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Vt*J.scale),Yt=this.lineWidth,this.lineWidth=Yt*J.scale);var be=this.autoPaging!=="text";if(be||et.y+et.h<=Ei){if(be||et.y>=ei&&et.x<=zi){var ge=be?J.text:this.pdf.splitTextToSize(J.text,J.maxWidth||zi-et.x)[0],Re=V([JSON.parse(JSON.stringify(Jt))],this.posX+this.margin[3],-Gi+ei+this.ctx.prevPageLastElemOffset)[0],Ze=be&&(Mt>yi||Mt<si)&&R.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wi,$i,null).clip().discardPath()),this.pdf.text(ge,Re.x,Re.y,{angle:J.angle,align:me,renderingMode:J.renderingMode}),Ze&&this.pdf.restoreGraphicsState()}}else et.y<Ei&&(this.ctx.prevPageLastElemOffset+=Ei-et.y);J.scale>=.01&&(this.pdf.setFontSize(Vt),this.lineWidth=Yt)}else J.scale>=.01&&(Vt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Vt*J.scale),Yt=this.lineWidth,this.lineWidth=Yt*J.scale),this.pdf.text(J.text,_t.x+this.posX,_t.y+this.posY,{angle:J.angle,align:me,renderingMode:J.renderingMode,maxWidth:J.maxWidth}),J.scale>=.01&&(this.pdf.setFontSize(Vt),this.lineWidth=Yt)},ce=function(J,me,Fe,ze){Fe=Fe||0,ze=ze||0,this.pdf.internal.out(i(J+Fe)+" "+n(me+ze)+" l")},Ee=function(J,me,Fe){return this.pdf.lines(J,me,Fe,null,null)},Ve=function(J,me,Fe,ze,Ke,_t,gt,Et){this.pdf.internal.out([e(o(Fe+J)),e(u(ze+me)),e(o(Ke+J)),e(u(_t+me)),e(o(gt+J)),e(u(Et+me)),"c"].join(" "))},ue=function(J,me,Fe,ze){for(var Ke=2*Math.PI,_t=Math.PI/2;me>Fe;)me-=Ke;var gt=Math.abs(Fe-me);gt<Ke&&ze&&(gt=Ke-gt);for(var Et=[],hi=ze?-1:1,Vt=me;gt>1e-5;){var Yt=Vt+hi*Math.min(gt,_t);Et.push(fe.call(this,J,Vt,Yt)),gt-=Math.abs(Yt-Vt),Vt=Yt}return Et},fe=function(J,me,Fe){var ze=(Fe-me)/2,Ke=J*Math.cos(ze),_t=J*Math.sin(ze),gt=Ke,Et=-_t,hi=gt*gt+Et*Et,Vt=hi+gt*Ke+Et*_t,Yt=4/3*(Math.sqrt(2*hi*Vt)-Vt)/(gt*_t-Et*Ke),Jt=gt-Yt*Et,bi=Et+Yt*gt,ot=Jt,$e=-bi,Ni=ze+me,yi=Math.cos(Ni),si=Math.sin(Ni);return{x1:J*Math.cos(me),y1:J*Math.sin(me),x2:Jt*yi-bi*si,y2:Jt*si+bi*yi,x3:ot*yi-$e*si,y3:ot*si+$e*yi,x4:J*Math.cos(Fe),y4:J*Math.sin(Fe)}},Ue=function(J){return 180*J/Math.PI},ke=function(J,me,Fe,ze,Ke,_t){var gt=J+.5*(Fe-J),Et=me+.5*(ze-me),hi=Ke+.5*(Fe-Ke),Vt=_t+.5*(ze-_t),Yt=Math.min(J,Ke,gt,hi),Jt=Math.max(J,Ke,gt,hi),bi=Math.min(me,_t,Et,Vt),ot=Math.max(me,_t,Et,Vt);return new a(Yt,bi,Jt-Yt,ot-bi)},pe=function(J,me,Fe,ze,Ke,_t,gt,Et){var hi,Vt,Yt,Jt,bi,ot,$e,Ni,yi,si,Mt,ei,ai,Ei,$i=Fe-J,zi=ze-me,wi=Ke-Fe,Gi=_t-ze,gn=gt-Ke,et=Et-_t;for(Vt=0;Vt<41;Vt++)yi=($e=(Yt=J+(hi=Vt/40)*$i)+hi*((bi=Fe+hi*wi)-Yt))+hi*(bi+hi*(Ke+hi*gn-bi)-$e),si=(Ni=(Jt=me+hi*zi)+hi*((ot=ze+hi*Gi)-Jt))+hi*(ot+hi*(_t+hi*et-ot)-Ni),Vt==0?(Mt=yi,ei=si,ai=yi,Ei=si):(Mt=Math.min(Mt,yi),ei=Math.min(ei,si),ai=Math.max(ai,yi),Ei=Math.max(Ei,si));return new a(Math.round(Mt),Math.round(ei),Math.round(ai-Mt),Math.round(Ei-ei))},Qe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var J,me,Fe=(J=this.ctx.lineDash,me=this.ctx.lineDashOffset,JSON.stringify({lineDash:J,lineDashOffset:me}));this.prevLineDash!==Fe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Fe)}}})(Bn.API),function(t){var e=function(u){var A,a,g,b,B,I,P,F,Q,R;for(a=[],g=0,b=(u+=A="\0\0\0\0".slice(u.length%4||4)).length;b>g;g+=4)(B=(u.charCodeAt(g)<<24)+(u.charCodeAt(g+1)<<16)+(u.charCodeAt(g+2)<<8)+u.charCodeAt(g+3))!==0?(I=(B=((B=((B=((B=(B-(R=B%85))/85)-(Q=B%85))/85)-(F=B%85))/85)-(P=B%85))/85)%85,a.push(I+33,P+33,F+33,Q+33,R+33)):a.push(122);return function(H,j){for(var V=j;V>0;V--)H.pop()}(a,A.length),String.fromCharCode.apply(String,a)+"~>"},i=function(u){var A,a,g,b,B,I=String,P="length",F=255,Q="charCodeAt",R="slice",H="replace";for(u[R](-2),u=u[R](0,-2)[H](/\s/g,"")[H]("z","!!!!!"),g=[],b=0,B=(u+=A="uuuuu"[R](u[P]%5||5))[P];B>b;b+=5)a=52200625*(u[Q](b)-33)+614125*(u[Q](b+1)-33)+7225*(u[Q](b+2)-33)+85*(u[Q](b+3)-33)+(u[Q](b+4)-33),g.push(F&a>>24,F&a>>16,F&a>>8,F&a);return function(j,V){for(var W=V;W>0;W--)j.pop()}(g,A[P]),I.fromCharCode.apply(I,g)},n=function(u){var A=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),A.test(u)===!1)return"";for(var a="",g=0;g<u.length;g+=2)a+=String.fromCharCode("0x"+(u[g]+u[g+1]));return a},o=function(u){for(var A=new Uint8Array(u.length),a=u.length;a--;)A[a]=u.charCodeAt(a);return u=(A=Ox(A)).reduce(function(g,b){return g+String.fromCharCode(b)},"")};t.processDataByFilters=function(u,A){var a=0,g=u||"",b=[];for(typeof(A=A||[])=="string"&&(A=[A]),a=0;a<A.length;a+=1)switch(A[a]){case"ASCII85Decode":case"/ASCII85Decode":g=i(g),b.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=e(g),b.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=n(g),b.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=g.split("").map(function(B){return("0"+B.charCodeAt().toString(16)).slice(-2)}).join("")+">",b.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=o(g),b.push("/FlateDecode");break;default:throw new Error('The filter: "'+A[a]+'" is not implemented')}return{data:g,reverseChain:b.reverse().join(" ")}}}(Bn.API),function(t){t.loadFile=function(e,i,n){return function(o,u,A){u=u!==!1,A=typeof A=="function"?A:function(){};var a=void 0;try{a=function(g,b,B){var I=new XMLHttpRequest,P=0,F=function(Q){var R=Q.length,H=[],j=String.fromCharCode;for(P=0;P<R;P+=1)H.push(j(255&Q.charCodeAt(P)));return H.join("")};if(I.open("GET",g,!b),I.overrideMimeType("text/plain; charset=x-user-defined"),b===!1&&(I.onload=function(){I.status===200?B(F(this.responseText)):B(void 0)}),I.send(null),b&&I.status===200)return F(I.responseText)}(o,u,A)}catch{}return a}(e,i,n)},t.loadImageFile=t.loadFile}(Bn.API),function(t){function e(){return(Tn.html2canvas?Promise.resolve(Tn.html2canvas):kx(()=>Promise.resolve().then(()=>j7),[])).catch(function(A){return Promise.reject(new Error("Could not load html2canvas: "+A))}).then(function(A){return A.default?A.default:A})}function i(){return(Tn.DOMPurify?Promise.resolve(Tn.DOMPurify):kx(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load dompurify: "+A))}).then(function(A){return A.default?A.default:A})}var n=function(A){var a=hs(A);return a==="undefined"?"undefined":a==="string"||A instanceof String?"string":a==="number"||A instanceof Number?"number":a==="function"||A instanceof Function?"function":A&&A.constructor===Array?"array":A&&A.nodeType===1?"element":a==="object"?"object":"unknown"},o=function(A,a){var g=document.createElement(A);for(var b in a.className&&(g.className=a.className),a.innerHTML&&a.dompurify&&(g.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)g.style[b]=a.style[b];return g},u=function A(a){var g=Object.assign(A.convert(Promise.resolve()),JSON.parse(JSON.stringify(A.template))),b=A.convert(Promise.resolve(),g);return b=(b=b.setProgress(1,A,1,[A])).set(a)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(A,a){return A.__proto__=a||u.prototype,A},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(A,a){return this.then(function(){switch(a=a||function(g){switch(n(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(A)){case"string":return this.then(i).then(function(g){return this.set({src:o("div",{innerHTML:A,dompurify:g})})});case"element":return this.set({src:A});case"canvas":return this.set({canvas:A});case"img":return this.set({img:A});default:return this.error("Unknown source type.")}})},u.prototype.to=function(A){switch(A){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var A={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function g(b,B){for(var I=b.nodeType===3?document.createTextNode(b.nodeValue):b.cloneNode(!1),P=b.firstChild;P;P=P.nextSibling)B!==!0&&P.nodeType===1&&P.nodeName==="SCRIPT"||I.appendChild(g(P,B));return b.nodeType===1&&(b.nodeName==="CANVAS"?(I.width=b.width,I.height=b.height,I.getContext("2d").drawImage(b,0,0)):b.nodeName!=="TEXTAREA"&&b.nodeName!=="SELECT"||(I.value=b.value),I.addEventListener("load",function(){I.scrollTop=b.scrollTop,I.scrollLeft=b.scrollLeft},!0)),I}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(A.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:A}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var A=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(A).then(e).then(function(a){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,a(this.prop.container,g)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var A=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(A).then(e).then(function(a){var g=this.opt.jsPDF,b=this.opt.fontFaces,B=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,I=Object.assign({async:!0,allowTaint:!0,scale:B,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete I.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=b,b)for(var P=0;P<b.length;++P){var F=b[P],Q=F.src.find(function(R){return R.format==="truetype"});Q&&g.addFont(Q.url,F.ref.name,F.ref.style)}return I.windowHeight=I.windowHeight||0,I.windowHeight=I.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):I.windowHeight,g.context2d.save(!0),a(this.prop.container,I)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var A=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=A})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(A,a,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(A,a):this.outputPdf(A,a)},u.prototype.outputPdf=function(A,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(A,a)})},u.prototype.outputImg=function(A){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(A){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+A+'" is not supported.'}})},u.prototype.save=function(A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(A?{filename:A}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(A){if(n(A)!=="object")return this;var a=Object.keys(A||{}).map(function(g){if(g in u.template.prop)return function(){this.prop[g]=A[g]};switch(g){case"margin":return this.setMargin.bind(this,A.margin);case"jsPDF":return function(){return this.opt.jsPDF=A.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,A.pageSize);default:return function(){this.opt[g]=A[g]}}},this);return this.then(function(){return this.thenList(a)})},u.prototype.get=function(A,a){return this.then(function(){var g=A in u.template.prop?this.prop[A]:this.opt[A];return a?a(g):g})},u.prototype.setMargin=function(A){return this.then(function(){switch(n(A)){case"number":A=[A,A,A,A];case"array":if(A.length===2&&(A=[A[0],A[1],A[0],A[1]]),A.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=A}).then(this.setPageSize)},u.prototype.setPageSize=function(A){function a(g,b){return Math.floor(g*b/72*96)}return this.then(function(){(A=A||Bn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(A.inner={width:A.width-this.opt.margin[1]-this.opt.margin[3],height:A.height-this.opt.margin[0]-this.opt.margin[2]},A.inner.px={width:a(A.inner.width,A.k),height:a(A.inner.height,A.k)},A.inner.ratio=A.inner.height/A.inner.width),this.prop.pageSize=A})},u.prototype.setProgress=function(A,a,g,b){return A!=null&&(this.progress.val=A),a!=null&&(this.progress.state=a),g!=null&&(this.progress.n=g),b!=null&&(this.progress.stack=b),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(A,a,g,b){return this.setProgress(A?this.progress.val+A:null,a||null,g?this.progress.n+g:null,b?this.progress.stack.concat(b):null)},u.prototype.then=function(A,a){var g=this;return this.thenCore(A,a,function(b,B){return g.updateProgress(null,null,1,[b]),Promise.prototype.then.call(this,function(I){return g.updateProgress(null,b),I}).then(b,B).then(function(I){return g.updateProgress(1),I})})},u.prototype.thenCore=function(A,a,g){g=g||Promise.prototype.then,A&&(A=A.bind(this)),a&&(a=a.bind(this));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),B=g.call(b,A,a);return u.convert(B,this.__proto__)},u.prototype.thenExternal=function(A,a){return Promise.prototype.then.call(this,A,a)},u.prototype.thenList=function(A){var a=this;return A.forEach(function(g){a=a.thenCore(g)}),a},u.prototype.catch=function(A){A&&(A=A.bind(this));var a=Promise.prototype.catch.call(this,A);return u.convert(a,this)},u.prototype.catchExternal=function(A){return Promise.prototype.catch.call(this,A)},u.prototype.error=function(A){return this.then(function(){throw new Error(A)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Bn.getPageSize=function(A,a,g){if(hs(A)==="object"){var b=A;A=b.orientation,a=b.unit||a,g=b.format||g}a=a||"mm",g=g||"a4",A=(""+(A||"P")).toLowerCase();var B,I=(""+g).toLowerCase(),P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":B=1;break;case"mm":B=72/25.4;break;case"cm":B=72/2.54;break;case"in":B=72;break;case"px":B=.75;break;case"pc":case"em":B=12;break;case"ex":B=6;break;default:throw"Invalid unit: "+a}var F,Q=0,R=0;if(P.hasOwnProperty(I))Q=P[I][1]/B,R=P[I][0]/B;else try{Q=g[1],R=g[0]}catch{throw new Error("Invalid format: "+g)}if(A==="p"||A==="portrait")A="p",R>Q&&(F=R,R=Q,Q=F);else{if(A!=="l"&&A!=="landscape")throw"Invalid orientation: "+A;A="l",Q>R&&(F=R,R=Q,Q=F)}return{width:R,height:Q,unit:a,k:B,orientation:A}},t.html=function(A,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Gx):null;var g=new u(a);return a.worker?g:g.from(A).doCallback()}}(Bn.API),Bn.API.addJS=function(t){return z5=t,this.internal.events.subscribe("postPutResources",function(){Ry=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ry+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Q5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+z5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ry!==void 0&&Q5!==void 0&&this.internal.out("/Names <</JavaScript "+Ry+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var i=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=i.outline.render().split(/\r\n/),u=0;u<o.length;u++){var A=o[u],a=n.exec(A);if(a!=null){var g=a[1];i.internal.newObjectDeferredBegin(g,!1)}i.internal.write(A)}if(this.outline.createNamedDestinations){var b=this.internal.pages.length,B=[];for(u=0;u<b;u++){var I=i.internal.newObject();B.push(I);var P=i.internal.getPageInfo(u+1);i.internal.write("<< /D["+P.objId+" 0 R /XYZ null null null]>> endobj")}var F=i.internal.newObject();for(i.internal.write("<< /Names [ "),u=0;u<B.length;u++)i.internal.write("(page_"+(u+1)+")"+B[u]+" 0 R");i.internal.write(" ] >>","endobj"),e=i.internal.newObject(),i.internal.write("<< /Dests "+F+" 0 R"),i.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(n,o,u){var A={title:o,options:u,children:[]};return n==null&&(n=this.root),n.children.push(A),A},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(n){n.id=i.internal.newObjectDeferred();for(var o=0;o<n.children.length;o++)this.genIds_r(n.children[o])},i.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},i.outline.renderItems=function(n){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<n.children.length;u++){var A=n.children[u];this.objStart(A),this.line("/Title "+this.makeString(A.title)),this.line("/Parent "+this.makeRef(n)),u>0&&this.line("/Prev "+this.makeRef(n.children[u-1])),u<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[u+1])),A.children.length>0&&(this.line("/First "+this.makeRef(A.children[0])),this.line("/Last "+this.makeRef(A.children[A.children.length-1])));var a=this.count=this.count_r({count:0},A);if(a>0&&this.line("/Count "+a),A.options&&A.options.pageNumber){var g=i.internal.getPageInfo(A.options.pageNumber);this.line("/Dest ["+g.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var b=0;b<n.children.length;b++)this.renderItems(n.children[b])},i.outline.line=function(n){this.ctx.val+=n+`\r
`},i.outline.makeRef=function(n){return n.id+" 0 R"},i.outline.makeString=function(n){return"("+i.internal.pdfEscape(n)+")"},i.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(n,o){for(var u=0;u<o.children.length;u++)n.count++,this.count_r(n,o.children[u]);return n.count}}])}(Bn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(i,n,o,u,A,a){var g,b=this.decode.DCT_DECODE,B=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=A||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,(g=function(I){for(var P,F=256*I.charCodeAt(4)+I.charCodeAt(5),Q=I.length,R={width:0,height:0,numcomponents:1},H=4;H<Q;H+=2){if(H+=F,e.indexOf(I.charCodeAt(H+1))!==-1){P=256*I.charCodeAt(H+5)+I.charCodeAt(H+6),R={width:256*I.charCodeAt(H+7)+I.charCodeAt(H+8),height:P,numcomponents:I.charCodeAt(H+9)};break}F=256*I.charCodeAt(H+2)+I.charCodeAt(H+3)}return R}(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}B={data:i,width:g.width,height:g.height,colorSpace:a,bitsPerComponent:8,filter:b,index:n,alias:o}}return B}}(Bn.API);var Gp,Oy,H5,V5,q5,q8=function(){var t,e,i;function n(u){var A,a,g,b,B,I,P,F,Q,R,H,j,V,W;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},I=null;;){switch(A=this.readUInt32(),Q=(function(){var ne,te;for(te=[],ne=0;ne<4;++ne)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(A);break;case"fcTL":I&&this.animation.frames.push(I),this.pos+=4,I={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},B=this.readUInt16(),b=this.readUInt16()||100,I.delay=1e3*B/b,I.disposeOp=this.data[this.pos++],I.blendOp=this.data[this.pos++],I.data=[];break;case"IDAT":case"fdAT":for(Q==="fdAT"&&(this.pos+=4,A-=4),u=I?.data||this.imgData,j=0;0<=A?j<A:j>A;0<=A?++j:--j)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(g=this.palette.length/3,this.transparency.indexed=this.read(A),this.transparency.indexed.length>g)throw new Error("More transparent colors than palette size");if((R=g-this.transparency.indexed.length)>0)for(V=0;0<=R?V<R:V>R;0<=R?++V:--V)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(A)[0];break;case 2:this.transparency.rgb=this.read(A)}break;case"tEXt":P=(H=this.read(A)).indexOf(0),F=String.fromCharCode.apply(String,H.slice(0,P)),this.text[F]=String.fromCharCode.apply(String,H.slice(P+1));break;case"IEND":return I&&this.animation.frames.push(I),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(W=this.colorType)===4||W===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=A}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(u){var A,a;for(a=[],A=0;0<=u?A<u:A>u;0<=u?++A:--A)a.push(this.data[this.pos++]);return a},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(u){var A=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*A),g=0,b=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function B(I,P,F,Q){var R,H,j,V,W,ne,te,de,ee,re,xe,Be,se,ae,ce,Ee,Ve,ue,fe,Ue,ke,pe=Math.ceil((b.width-I)/F),Qe=Math.ceil((b.height-P)/Q),J=b.width==pe&&b.height==Qe;for(ae=A*pe,Be=J?a:new Uint8Array(ae*Qe),ne=u.length,se=0,H=0;se<Qe&&g<ne;){switch(u[g++]){case 0:for(V=Ve=0;Ve<ae;V=Ve+=1)Be[H++]=u[g++];break;case 1:for(V=ue=0;ue<ae;V=ue+=1)R=u[g++],W=V<A?0:Be[H-A],Be[H++]=(R+W)%256;break;case 2:for(V=fe=0;fe<ae;V=fe+=1)R=u[g++],j=(V-V%A)/A,ce=se&&Be[(se-1)*ae+j*A+V%A],Be[H++]=(ce+R)%256;break;case 3:for(V=Ue=0;Ue<ae;V=Ue+=1)R=u[g++],j=(V-V%A)/A,W=V<A?0:Be[H-A],ce=se&&Be[(se-1)*ae+j*A+V%A],Be[H++]=(R+Math.floor((W+ce)/2))%256;break;case 4:for(V=ke=0;ke<ae;V=ke+=1)R=u[g++],j=(V-V%A)/A,W=V<A?0:Be[H-A],se===0?ce=Ee=0:(ce=Be[(se-1)*ae+j*A+V%A],Ee=j&&Be[(se-1)*ae+(j-1)*A+V%A]),te=W+ce-Ee,de=Math.abs(te-W),re=Math.abs(te-ce),xe=Math.abs(te-Ee),ee=de<=re&&de<=xe?W:re<=xe?ce:Ee,Be[H++]=(R+ee)%256;break;default:throw new Error("Invalid filter algorithm: "+u[g-1])}if(!J){var me=((P+se*Q)*b.width+I)*A,Fe=se*ae;for(V=0;V<pe;V+=1){for(var ze=0;ze<A;ze+=1)a[me++]=Be[Fe++];me+=(F-1)*A}}se++}}return u=b8(u),b.interlaceMethod==1?(B(0,0,8,8),B(4,0,8,8),B(0,4,4,8),B(2,0,4,4),B(0,2,2,4),B(1,0,2,2),B(0,1,1,2)):B(0,0,1,1),a},n.prototype.decodePalette=function(){var u,A,a,g,b,B,I,P,F;for(a=this.palette,B=this.transparency.indexed||[],b=new Uint8Array((B.length||0)+a.length),g=0,u=0,A=I=0,P=a.length;I<P;A=I+=3)b[g++]=a[A],b[g++]=a[A+1],b[g++]=a[A+2],b[g++]=(F=B[u++])!=null?F:255;return b},n.prototype.copyToImageData=function(u,A){var a,g,b,B,I,P,F,Q,R,H,j;if(g=this.colors,R=null,a=this.hasAlphaChannel,this.palette.length&&(R=(j=this._decodedPalette)!=null?j:this._decodedPalette=this.decodePalette(),g=4,a=!0),Q=(b=u.data||u).length,I=R||A,B=P=0,g===1)for(;B<Q;)F=R?4*A[B/4]:P,H=I[F++],b[B++]=H,b[B++]=H,b[B++]=H,b[B++]=a?I[F++]:255,P=F;else for(;B<Q;)F=R?4*A[B/4]:P,b[B++]=I[F++],b[B++]=I[F++],b[B++]=I[F++],b[B++]=a?I[F++]:255,P=F},n.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var o=function(){if(Object.prototype.toString.call(Tn)==="[object Window]"){try{e=Tn.document.createElement("canvas"),i=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(u){var A;if(o()===!0)return i.width=u.width,i.height=u.height,i.clearRect(0,0,u.width,u.height),i.putImageData(u,0,0),(A=new Image).src=e.toDataURL(),A;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(u){var A,a,g,b,B,I,P,F;if(this.animation){for(F=[],a=B=0,I=(P=this.animation.frames).length;B<I;a=++B)A=P[a],g=u.createImageData(A.width,A.height),b=this.decodePixels(new Uint8Array(A.data)),this.copyToImageData(g,b),A.imageData=g,F.push(A.image=t(g));return F}},n.prototype.renderFrame=function(u,A){var a,g,b;return a=(g=this.animation.frames)[A],b=g[A-1],A===0&&u.clearRect(0,0,this.width,this.height),b?.disposeOp===1?u.clearRect(b.xOffset,b.yOffset,b.width,b.height):b?.disposeOp===2&&u.putImageData(b.imageData,b.xOffset,b.yOffset),a.blendOp===0&&u.clearRect(a.xOffset,a.yOffset,a.width,a.height),u.drawImage(a.image,a.xOffset,a.yOffset)},n.prototype.animate=function(u){var A,a,g,b,B,I,P=this;return a=0,I=this.animation,b=I.numFrames,g=I.frames,B=I.numPlays,(A=function(){var F,Q;if(F=a++%b,Q=g[F],P.renderFrame(u,F),b>1&&a/b<B)return P.animation._timeout=setTimeout(A,Q.delay)})()},n.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},n.prototype.render=function(u){var A,a;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,A=u.getContext("2d"),this.animation?(this.decodeFrames(A),this.animate(A)):(a=A.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),A.putImageData(a,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function G8(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,o=t[e++],u=o>>7,A=1<<(7&o)+1;t[e++],t[e++];var a=null,g=null;u&&(a=e,g=A,e+=3*A);var b=!0,B=[],I=0,P=null,F=0,Q=null;for(this.width=i,this.height=n;b&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,Q=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((se=t[e++])>=0))throw Error("Invalid block size");if(se===0)break;e+=se}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var R=t[e++];I=t[e++]|t[e++]<<8,P=t[e++],(1&R)==0&&(P=null),F=R>>2&7,e++;break;case 254:for(;;){if(!((se=t[e++])>=0))throw Error("Invalid block size");if(se===0)break;e+=se}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var H=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,V=t[e++]|t[e++]<<8,W=t[e++]|t[e++]<<8,ne=t[e++],te=ne>>6&1,de=1<<(7&ne)+1,ee=a,re=g,xe=!1;ne>>7&&(xe=!0,ee=e,re=de,e+=3*de);var Be=e;for(e++;;){var se;if(!((se=t[e++])>=0))throw Error("Invalid block size");if(se===0)break;e+=se}B.push({x:H,y:j,width:V,height:W,has_local_palette:xe,palette_offset:ee,palette_size:re,data_offset:Be,data_length:e-Be,transparent_index:P,interlaced:!!te,delay:I,disposal:F});break;case 59:b=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return B.length},this.loopCount=function(){return Q},this.frameInfo=function(ae){if(ae<0||ae>=B.length)throw new Error("Frame index out of range.");return B[ae]},this.decodeAndBlitFrameBGRA=function(ae,ce){var Ee=this.frameInfo(ae),Ve=Ee.width*Ee.height,ue=new Uint8Array(Ve);G5(t,Ee.data_offset,ue,Ve);var fe=Ee.palette_offset,Ue=Ee.transparent_index;Ue===null&&(Ue=256);var ke=Ee.width,pe=i-ke,Qe=ke,J=4*(Ee.y*i+Ee.x),me=4*((Ee.y+Ee.height)*i+Ee.x),Fe=J,ze=4*pe;Ee.interlaced===!0&&(ze+=4*i*7);for(var Ke=8,_t=0,gt=ue.length;_t<gt;++_t){var Et=ue[_t];if(Qe===0&&(Qe=ke,(Fe+=ze)>=me&&(ze=4*pe+4*i*(Ke-1),Fe=J+(ke+pe)*(Ke<<1),Ke>>=1)),Et===Ue)Fe+=4;else{var hi=t[fe+3*Et],Vt=t[fe+3*Et+1],Yt=t[fe+3*Et+2];ce[Fe++]=Yt,ce[Fe++]=Vt,ce[Fe++]=hi,ce[Fe++]=255}--Qe}},this.decodeAndBlitFrameRGBA=function(ae,ce){var Ee=this.frameInfo(ae),Ve=Ee.width*Ee.height,ue=new Uint8Array(Ve);G5(t,Ee.data_offset,ue,Ve);var fe=Ee.palette_offset,Ue=Ee.transparent_index;Ue===null&&(Ue=256);var ke=Ee.width,pe=i-ke,Qe=ke,J=4*(Ee.y*i+Ee.x),me=4*((Ee.y+Ee.height)*i+Ee.x),Fe=J,ze=4*pe;Ee.interlaced===!0&&(ze+=4*i*7);for(var Ke=8,_t=0,gt=ue.length;_t<gt;++_t){var Et=ue[_t];if(Qe===0&&(Qe=ke,(Fe+=ze)>=me&&(ze=4*pe+4*i*(Ke-1),Fe=J+(ke+pe)*(Ke<<1),Ke>>=1)),Et===Ue)Fe+=4;else{var hi=t[fe+3*Et],Vt=t[fe+3*Et+1],Yt=t[fe+3*Et+2];ce[Fe++]=hi,ce[Fe++]=Vt,ce[Fe++]=Yt,ce[Fe++]=255}--Qe}}}function G5(t,e,i,n){for(var o=t[e++],u=1<<o,A=u+1,a=A+1,g=o+1,b=(1<<g)-1,B=0,I=0,P=0,F=t[e++],Q=new Int32Array(4096),R=null;;){for(;B<16&&F!==0;)I|=t[e++]<<B,B+=8,F===1?F=t[e++]:--F;if(B<g)break;var H=I&b;if(I>>=g,B-=g,H!==u){if(H===A)break;for(var j=H<a?H:R,V=0,W=j;W>u;)W=Q[W]>>8,++V;var ne=W;if(P+V+(j!==H?1:0)>n)return void Fs.log("Warning, gif stream longer than expected.");i[P++]=ne;var te=P+=V;for(j!==H&&(i[P++]=ne),W=j;V--;)W=Q[W],i[--te]=255&W,W>>=8;R!==null&&a<4096&&(Q[a++]=R<<8|ne,a>=b+1&&g<12&&(++g,b=b<<1|1)),R=H}else a=A+1,b=(1<<(g=o+1))-1,R=null}return P!==n&&Fs.log("Warning, gif stream shorter than expected."),i}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function k_(t){var e,i,n,o,u,A=Math.floor,a=new Array(64),g=new Array(64),b=new Array(64),B=new Array(64),I=new Array(65535),P=new Array(65535),F=new Array(64),Q=new Array(64),R=[],H=0,j=7,V=new Array(64),W=new Array(64),ne=new Array(64),te=new Array(256),de=new Array(2048),ee=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],xe=[0,1,2,3,4,5,6,7,8,9,10,11],Be=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],se=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ae=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ce=[0,1,2,3,4,5,6,7,8,9,10,11],Ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ve=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(J,me){for(var Fe=0,ze=0,Ke=new Array,_t=1;_t<=16;_t++){for(var gt=1;gt<=J[_t];gt++)Ke[me[ze]]=[],Ke[me[ze]][0]=Fe,Ke[me[ze]][1]=_t,ze++,Fe++;Fe*=2}return Ke}function fe(J){for(var me=J[0],Fe=J[1]-1;Fe>=0;)me&1<<Fe&&(H|=1<<j),Fe--,--j<0&&(H==255?(Ue(255),Ue(0)):Ue(H),j=7,H=0)}function Ue(J){R.push(J)}function ke(J){Ue(J>>8&255),Ue(255&J)}function pe(J,me,Fe,ze,Ke){for(var _t,gt=Ke[0],Et=Ke[240],hi=function(si,Mt){var ei,ai,Ei,$i,zi,wi,Gi,gn,et,be,ge=0;for(et=0;et<8;++et){ei=si[ge],ai=si[ge+1],Ei=si[ge+2],$i=si[ge+3],zi=si[ge+4],wi=si[ge+5],Gi=si[ge+6];var Re=ei+(gn=si[ge+7]),Ze=ei-gn,st=ai+Gi,ut=ai-Gi,wt=Ei+wi,dt=Ei-wi,Tt=$i+zi,oi=$i-zi,Qt=Re+Tt,Bi=Re-Tt,Ui=st+wt,yt=st-wt;si[ge]=Qt+Ui,si[ge+4]=Qt-Ui;var Ti=.707106781*(yt+Bi);si[ge+2]=Bi+Ti,si[ge+6]=Bi-Ti;var Vi=.382683433*((Qt=oi+dt)-(yt=ut+Ze)),Mi=.5411961*Qt+Vi,sn=1.306562965*yt+Vi,vr=.707106781*(Ui=dt+ut),Er=Ze+vr,Pi=Ze-vr;si[ge+5]=Pi+Mi,si[ge+3]=Pi-Mi,si[ge+1]=Er+sn,si[ge+7]=Er-sn,ge+=8}for(ge=0,et=0;et<8;++et){ei=si[ge],ai=si[ge+8],Ei=si[ge+16],$i=si[ge+24],zi=si[ge+32],wi=si[ge+40],Gi=si[ge+48];var Fn=ei+(gn=si[ge+56]),fn=ei-gn,Dn=ai+Gi,hn=ai-Gi,Kt=Ei+wi,ds=Ei-wi,qs=$i+zi,jr=$i-zi,or=Fn+qs,di=Fn-qs,tn=Dn+Kt,nn=Dn-Kt;si[ge]=or+tn,si[ge+32]=or-tn;var _r=.707106781*(nn+di);si[ge+16]=di+_r,si[ge+48]=di-_r;var Hn=.382683433*((or=jr+ds)-(nn=hn+fn)),ua=.5411961*or+Hn,pn=1.306562965*nn+Hn,Aa=.707106781*(tn=ds+hn),Pa=fn+Aa,zo=fn-Aa;si[ge+40]=zo+ua,si[ge+24]=zo-ua,si[ge+8]=Pa+pn,si[ge+56]=Pa-pn,ge++}for(et=0;et<64;++et)be=si[et]*Mt[et],F[et]=be>0?be+.5|0:be-.5|0;return F}(J,me),Vt=0;Vt<64;++Vt)Q[ee[Vt]]=hi[Vt];var Yt=Q[0]-Fe;Fe=Q[0],Yt==0?fe(ze[0]):(fe(ze[P[_t=32767+Yt]]),fe(I[_t]));for(var Jt=63;Jt>0&&Q[Jt]==0;)Jt--;if(Jt==0)return fe(gt),Fe;for(var bi,ot=1;ot<=Jt;){for(var $e=ot;Q[ot]==0&&ot<=Jt;)++ot;var Ni=ot-$e;if(Ni>=16){bi=Ni>>4;for(var yi=1;yi<=bi;++yi)fe(Et);Ni&=15}_t=32767+Q[ot],fe(Ke[(Ni<<4)+P[_t]]),fe(I[_t]),ot++}return Jt!=63&&fe(gt),Fe}function Qe(J){J=Math.min(Math.max(J,1),100),u!=J&&(function(me){for(var Fe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ze=0;ze<64;ze++){var Ke=A((Fe[ze]*me+50)/100);Ke=Math.min(Math.max(Ke,1),255),a[ee[ze]]=Ke}for(var _t=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],gt=0;gt<64;gt++){var Et=A((_t[gt]*me+50)/100);Et=Math.min(Math.max(Et,1),255),g[ee[gt]]=Et}for(var hi=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Vt=0,Yt=0;Yt<8;Yt++)for(var Jt=0;Jt<8;Jt++)b[Vt]=1/(a[ee[Vt]]*hi[Yt]*hi[Jt]*8),B[Vt]=1/(g[ee[Vt]]*hi[Yt]*hi[Jt]*8),Vt++}(J<50?Math.floor(5e3/J):Math.floor(200-2*J)),u=J)}this.encode=function(J,me){me&&Qe(me),R=new Array,H=0,j=7,ke(65496),ke(65504),ke(16),Ue(74),Ue(70),Ue(73),Ue(70),Ue(0),Ue(1),Ue(1),Ue(0),ke(1),ke(1),Ue(0),Ue(0),function(){ke(65499),ke(132),Ue(0);for(var ai=0;ai<64;ai++)Ue(a[ai]);Ue(1);for(var Ei=0;Ei<64;Ei++)Ue(g[Ei])}(),function(ai,Ei){ke(65472),ke(17),Ue(8),ke(Ei),ke(ai),Ue(3),Ue(1),Ue(17),Ue(0),Ue(2),Ue(17),Ue(1),Ue(3),Ue(17),Ue(1)}(J.width,J.height),function(){ke(65476),ke(418),Ue(0);for(var ai=0;ai<16;ai++)Ue(re[ai+1]);for(var Ei=0;Ei<=11;Ei++)Ue(xe[Ei]);Ue(16);for(var $i=0;$i<16;$i++)Ue(Be[$i+1]);for(var zi=0;zi<=161;zi++)Ue(se[zi]);Ue(1);for(var wi=0;wi<16;wi++)Ue(ae[wi+1]);for(var Gi=0;Gi<=11;Gi++)Ue(ce[Gi]);Ue(17);for(var gn=0;gn<16;gn++)Ue(Ee[gn+1]);for(var et=0;et<=161;et++)Ue(Ve[et])}(),ke(65498),ke(12),Ue(3),Ue(1),Ue(0),Ue(2),Ue(17),Ue(3),Ue(17),Ue(0),Ue(63),Ue(0);var Fe=0,ze=0,Ke=0;H=0,j=7,this.encode.displayName="_encode_";for(var _t,gt,Et,hi,Vt,Yt,Jt,bi,ot,$e=J.data,Ni=J.width,yi=J.height,si=4*Ni,Mt=0;Mt<yi;){for(_t=0;_t<si;){for(Vt=si*Mt+_t,Jt=-1,bi=0,ot=0;ot<64;ot++)Yt=Vt+(bi=ot>>3)*si+(Jt=4*(7&ot)),Mt+bi>=yi&&(Yt-=si*(Mt+1+bi-yi)),_t+Jt>=si&&(Yt-=_t+Jt-si+4),gt=$e[Yt++],Et=$e[Yt++],hi=$e[Yt++],V[ot]=(de[gt]+de[Et+256>>0]+de[hi+512>>0]>>16)-128,W[ot]=(de[gt+768>>0]+de[Et+1024>>0]+de[hi+1280>>0]>>16)-128,ne[ot]=(de[gt+1280>>0]+de[Et+1536>>0]+de[hi+1792>>0]>>16)-128;Fe=pe(V,b,Fe,e,n),ze=pe(W,B,ze,i,o),Ke=pe(ne,B,Ke,i,o),_t+=32}Mt+=8}if(j>=0){var ei=[];ei[1]=j+1,ei[0]=(1<<j+1)-1,fe(ei)}return ke(65497),new Uint8Array(R)},t=t||50,function(){for(var J=String.fromCharCode,me=0;me<256;me++)te[me]=J(me)}(),e=ue(re,xe),i=ue(ae,ce),n=ue(Be,se),o=ue(Ee,Ve),function(){for(var J=1,me=2,Fe=1;Fe<=15;Fe++){for(var ze=J;ze<me;ze++)P[32767+ze]=Fe,I[32767+ze]=[],I[32767+ze][1]=Fe,I[32767+ze][0]=ze;for(var Ke=-(me-1);Ke<=-J;Ke++)P[32767+Ke]=Fe,I[32767+Ke]=[],I[32767+Ke][1]=Fe,I[32767+Ke][0]=me-1+Ke;J<<=1,me<<=1}}(),function(){for(var J=0;J<256;J++)de[J]=19595*J,de[J+256>>0]=38470*J,de[J+512>>0]=7471*J+32768,de[J+768>>0]=-11059*J,de[J+1024>>0]=-21709*J,de[J+1280>>0]=32768*J+8421375,de[J+1536>>0]=-27439*J,de[J+1792>>0]=-5329*J}(),Qe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function QA(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function K5(t){function e(re){if(!re)throw Error("assert :P")}function i(re,xe,Be){for(var se=0;4>se;se++)if(re[xe+se]!=Be.charCodeAt(se))return!0;return!1}function n(re,xe,Be,se,ae){for(var ce=0;ce<ae;ce++)re[xe+ce]=Be[se+ce]}function o(re,xe,Be,se){for(var ae=0;ae<se;ae++)re[xe+ae]=Be}function u(re){return new Int32Array(re)}function A(re,xe){for(var Be=[],se=0;se<re;se++)Be.push(new xe);return Be}function a(re,xe){var Be=[];return function se(ae,ce,Ee){for(var Ve=Ee[ce],ue=0;ue<Ve&&(ae.push(Ee.length>ce+1?[]:new xe),!(Ee.length<ce+1));ue++)se(ae[ue],ce+1,Ee)}(Be,0,re),Be}var g=function(){var re=this;function xe(M,O){for(var Z=1<<O-1>>>0;M&Z;)Z>>>=1;return Z?(M&Z-1)+Z:M}function Be(M,O,Z,le,Ce){e(!(le%Z));do M[O+(le-=Z)]=Ce;while(0<le)}function se(M,O,Z,le,Ce){if(e(2328>=Ce),512>=Ce)var Me=u(512);else if((Me=u(Ce))==null)return 0;return function(Le,De,Oe,Pe,pt,jt){var It,Bt,ti=De,zt=1<<Oe,ct=u(16),bt=u(16);for(e(pt!=0),e(Pe!=null),e(Le!=null),e(0<Oe),Bt=0;Bt<pt;++Bt){if(15<Pe[Bt])return 0;++ct[Pe[Bt]]}if(ct[0]==pt)return 0;for(bt[1]=0,It=1;15>It;++It){if(ct[It]>1<<It)return 0;bt[It+1]=bt[It]+ct[It]}for(Bt=0;Bt<pt;++Bt)It=Pe[Bt],0<Pe[Bt]&&(jt[bt[It]++]=Bt);if(bt[15]==1)return(Pe=new ae).g=0,Pe.value=jt[0],Be(Le,ti,1,zt,Pe),zt;var Xt,ri=-1,ii=zt-1,ji=0,Ci=1,Xi=1,Fi=1<<Oe;for(Bt=0,It=1,pt=2;It<=Oe;++It,pt<<=1){if(Ci+=Xi<<=1,0>(Xi-=ct[It]))return 0;for(;0<ct[It];--ct[It])(Pe=new ae).g=It,Pe.value=jt[Bt++],Be(Le,ti+ji,pt,Fi,Pe),ji=xe(ji,It)}for(It=Oe+1,pt=2;15>=It;++It,pt<<=1){if(Ci+=Xi<<=1,0>(Xi-=ct[It]))return 0;for(;0<ct[It];--ct[It]){if(Pe=new ae,(ji&ii)!=ri){for(ti+=Fi,Xt=1<<(ri=It)-Oe;15>ri&&!(0>=(Xt-=ct[ri]));)++ri,Xt<<=1;zt+=Fi=1<<(Xt=ri-Oe),Le[De+(ri=ji&ii)].g=Xt+Oe,Le[De+ri].value=ti-De-ri}Pe.g=It-Oe,Pe.value=jt[Bt++],Be(Le,ti+(ji>>Oe),pt,Fi,Pe),ji=xe(ji,It)}}return Ci!=2*bt[15]-1?0:zt}(M,O,Z,le,Ce,Me)}function ae(){this.value=this.g=0}function ce(){this.value=this.g=0}function Ee(){this.G=A(5,ae),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=A(Dr,ce)}function Ve(M,O,Z,le){e(M!=null),e(O!=null),e(2147483648>le),M.Ca=254,M.I=0,M.b=-8,M.Ka=0,M.oa=O,M.pa=Z,M.Jd=O,M.Yc=Z+le,M.Zc=4<=le?Z+le-4+1:Z,_t(M)}function ue(M,O){for(var Z=0;0<O--;)Z|=Et(M,128)<<O;return Z}function fe(M,O){var Z=ue(M,O);return gt(M)?-Z:Z}function Ue(M,O,Z,le){var Ce,Me=0;for(e(M!=null),e(O!=null),e(4294967288>le),M.Sb=le,M.Ra=0,M.u=0,M.h=0,4<le&&(le=4),Ce=0;Ce<le;++Ce)Me+=O[Z+Ce]<<8*Ce;M.Ra=Me,M.bb=le,M.oa=O,M.pa=Z}function ke(M){for(;8<=M.u&&M.bb<M.Sb;)M.Ra>>>=8,M.Ra+=M.oa[M.pa+M.bb]<<Bo-8>>>0,++M.bb,M.u-=8;Fe(M)&&(M.h=1,M.u=0)}function pe(M,O){if(e(0<=O),!M.h&&O<=Gc){var Z=me(M)&Sc[O];return M.u+=O,ke(M),Z}return M.h=1,M.u=0}function Qe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function me(M){return M.Ra>>>(M.u&Bo-1)>>>0}function Fe(M){return e(M.bb<=M.Sb),M.h||M.bb==M.Sb&&M.u>Bo}function ze(M,O){M.u=O,M.h=Fe(M)}function Ke(M){M.u>=xu&&(e(M.u>=xu),ke(M))}function _t(M){e(M!=null&&M.oa!=null),M.pa<M.Zc?(M.I=(M.oa[M.pa++]|M.I<<8)>>>0,M.b+=8):(e(M!=null&&M.oa!=null),M.pa<M.Yc?(M.b+=8,M.I=M.oa[M.pa++]|M.I<<8):M.Ka?M.b=0:(M.I<<=8,M.b+=8,M.Ka=1))}function gt(M){return ue(M,1)}function Et(M,O){var Z=M.Ca;0>M.b&&_t(M);var le=M.b,Ce=Z*O>>>8,Me=(M.I>>>le>Ce)+0;for(Me?(Z-=Ce,M.I-=Ce+1<<le>>>0):Z=Ce+1,le=Z,Ce=0;256<=le;)Ce+=8,le>>=8;return le=7^Ce+fa[le],M.b-=le,M.Ca=(Z<<le)-1,Me}function hi(M,O,Z){M[O+0]=Z>>24&255,M[O+1]=Z>>16&255,M[O+2]=Z>>8&255,M[O+3]=Z>>0&255}function Vt(M,O){return M[O+0]<<0|M[O+1]<<8}function Yt(M,O){return Vt(M,O)|M[O+2]<<16}function Jt(M,O){return Vt(M,O)|Vt(M,O+2)<<16}function bi(M,O){var Z=1<<O;return e(M!=null),e(0<O),M.X=u(Z),M.X==null?0:(M.Mb=32-O,M.Xa=O,1)}function ot(M,O){e(M!=null),e(O!=null),e(M.Xa==O.Xa),n(O.X,0,M.X,0,1<<O.Xa)}function $e(){this.X=[],this.Xa=this.Mb=0}function Ni(M,O,Z,le){e(Z!=null),e(le!=null);var Ce=Z[0],Me=le[0];return Ce==0&&(Ce=(M*Me+O/2)/O),Me==0&&(Me=(O*Ce+M/2)/M),0>=Ce||0>=Me?0:(Z[0]=Ce,le[0]=Me,1)}function yi(M,O){return M+(1<<O)-1>>>O}function si(M,O){return((4278255360&M)+(4278255360&O)>>>0&4278255360)+((16711935&M)+(16711935&O)>>>0&16711935)>>>0}function Mt(M,O){re[O]=function(Z,le,Ce,Me,Le,De,Oe){var Pe;for(Pe=0;Pe<Le;++Pe){var pt=re[M](De[Oe+Pe-1],Ce,Me+Pe);De[Oe+Pe]=si(Z[le+Pe],pt)}}}function ei(){this.ud=this.hd=this.jd=0}function ai(M,O){return((4278124286&(M^O))>>>1)+(M&O)>>>0}function Ei(M){return 0<=M&&256>M?M:0>M?0:255<M?255:void 0}function $i(M,O){return Ei(M+(M-O+.5>>1))}function zi(M,O,Z){return Math.abs(O-Z)-Math.abs(M-Z)}function wi(M,O,Z,le,Ce,Me,Le){for(le=Me[Le-1],Z=0;Z<Ce;++Z)Me[Le+Z]=le=si(M[O+Z],le)}function Gi(M,O,Z,le,Ce){var Me;for(Me=0;Me<Z;++Me){var Le=M[O+Me],De=Le>>8&255,Oe=16711935&(Oe=(Oe=16711935&Le)+((De<<16)+De));le[Ce+Me]=(4278255360&Le)+Oe>>>0}}function gn(M,O){O.jd=M>>0&255,O.hd=M>>8&255,O.ud=M>>16&255}function et(M,O,Z,le,Ce,Me){var Le;for(Le=0;Le<le;++Le){var De=O[Z+Le],Oe=De>>>8,Pe=De,pt=255&(pt=(pt=De>>>16)+((M.jd<<24>>24)*(Oe<<24>>24)>>>5));Pe=255&(Pe=(Pe=Pe+((M.hd<<24>>24)*(Oe<<24>>24)>>>5))+((M.ud<<24>>24)*(pt<<24>>24)>>>5)),Ce[Me+Le]=(4278255360&De)+(pt<<16)+Pe}}function be(M,O,Z,le,Ce){re[O]=function(Me,Le,De,Oe,Pe,pt,jt,It,Bt){for(Oe=jt;Oe<It;++Oe)for(jt=0;jt<Bt;++jt)Pe[pt++]=Ce(De[le(Me[Le++])])},re[M]=function(Me,Le,De,Oe,Pe,pt,jt){var It=8>>Me.b,Bt=Me.Ea,ti=Me.K[0],zt=Me.w;if(8>It)for(Me=(1<<Me.b)-1,zt=(1<<It)-1;Le<De;++Le){var ct,bt=0;for(ct=0;ct<Bt;++ct)ct&Me||(bt=le(Oe[Pe++])),pt[jt++]=Ce(ti[bt&zt]),bt>>=It}else re["VP8LMapColor"+Z](Oe,Pe,ti,zt,pt,jt,Le,De,Bt)}}function ge(M,O,Z,le,Ce){for(Z=O+Z;O<Z;){var Me=M[O++];le[Ce++]=Me>>16&255,le[Ce++]=Me>>8&255,le[Ce++]=Me>>0&255}}function Re(M,O,Z,le,Ce){for(Z=O+Z;O<Z;){var Me=M[O++];le[Ce++]=Me>>16&255,le[Ce++]=Me>>8&255,le[Ce++]=Me>>0&255,le[Ce++]=Me>>24&255}}function Ze(M,O,Z,le,Ce){for(Z=O+Z;O<Z;){var Me=(Le=M[O++])>>16&240|Le>>12&15,Le=Le>>0&240|Le>>28&15;le[Ce++]=Me,le[Ce++]=Le}}function st(M,O,Z,le,Ce){for(Z=O+Z;O<Z;){var Me=(Le=M[O++])>>16&248|Le>>13&7,Le=Le>>5&224|Le>>3&31;le[Ce++]=Me,le[Ce++]=Le}}function ut(M,O,Z,le,Ce){for(Z=O+Z;O<Z;){var Me=M[O++];le[Ce++]=Me>>0&255,le[Ce++]=Me>>8&255,le[Ce++]=Me>>16&255}}function wt(M,O,Z,le,Ce,Me){if(Me==0)for(Z=O+Z;O<Z;)hi(le,((Me=M[O++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),Ce+=32;else n(le,Ce,M,O,Z)}function dt(M,O){re[O][0]=re[M+"0"],re[O][1]=re[M+"1"],re[O][2]=re[M+"2"],re[O][3]=re[M+"3"],re[O][4]=re[M+"4"],re[O][5]=re[M+"5"],re[O][6]=re[M+"6"],re[O][7]=re[M+"7"],re[O][8]=re[M+"8"],re[O][9]=re[M+"9"],re[O][10]=re[M+"10"],re[O][11]=re[M+"11"],re[O][12]=re[M+"12"],re[O][13]=re[M+"13"],re[O][14]=re[M+"0"],re[O][15]=re[M+"0"]}function Tt(M){return M==_A||M==Zl||M==Jo||M==Mc}function oi(){this.eb=[],this.size=this.A=this.fb=0}function Qt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Bi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new oi,this.f.kb=new Qt,this.sd=null}function Ui(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ti(M){return alert("todo:WebPSamplerProcessPlane"),M.T}function Vi(M,O){var Z=M.T,le=O.ba.f.RGBA,Ce=le.eb,Me=le.fb+M.ka*le.A,Le=Bs[O.ba.S],De=M.y,Oe=M.O,Pe=M.f,pt=M.N,jt=M.ea,It=M.W,Bt=O.cc,ti=O.dc,zt=O.Mc,ct=O.Nc,bt=M.ka,Xt=M.ka+M.T,ri=M.U,ii=ri+1>>1;for(bt==0?Le(De,Oe,null,null,Pe,pt,jt,It,Pe,pt,jt,It,Ce,Me,null,null,ri):(Le(O.ec,O.fc,De,Oe,Bt,ti,zt,ct,Pe,pt,jt,It,Ce,Me-le.A,Ce,Me,ri),++Z);bt+2<Xt;bt+=2)Bt=Pe,ti=pt,zt=jt,ct=It,pt+=M.Rc,It+=M.Rc,Me+=2*le.A,Le(De,(Oe+=2*M.fa)-M.fa,De,Oe,Bt,ti,zt,ct,Pe,pt,jt,It,Ce,Me-le.A,Ce,Me,ri);return Oe+=M.fa,M.j+Xt<M.o?(n(O.ec,O.fc,De,Oe,ri),n(O.cc,O.dc,Pe,pt,ii),n(O.Mc,O.Nc,jt,It,ii),Z--):1&Xt||Le(De,Oe,null,null,Pe,pt,jt,It,Pe,pt,jt,It,Ce,Me+le.A,null,null,ri),Z}function Mi(M,O,Z){var le=M.F,Ce=[M.J];if(le!=null){var Me=M.U,Le=O.ba.S,De=Le==Bu||Le==Jo;O=O.ba.f.RGBA;var Oe=[0],Pe=M.ka;Oe[0]=M.T,M.Kb&&(Pe==0?--Oe[0]:(--Pe,Ce[0]-=M.width),M.j+M.ka+M.T==M.o&&(Oe[0]=M.o-M.j-Pe));var pt=O.eb;Pe=O.fb+Pe*O.A,M=En(le,Ce[0],M.width,Me,Oe,pt,Pe+(De?0:3),O.A),e(Z==Oe),M&&Tt(Le)&&so(pt,Pe,De,Me,Oe,O.A)}return 0}function sn(M){var O=M.ma,Z=O.ba.S,le=11>Z,Ce=Z==Gu||Z==Nc||Z==Bu||Z==Yo||Z==12||Tt(Z);if(O.memory=null,O.Ib=null,O.Jb=null,O.Nd=null,!Cc(O.Oa,M,Ce?11:12))return 0;if(Ce&&Tt(Z)&&fi(),M.da)alert("todo:use_scaling");else{if(le){if(O.Ib=Ti,M.Kb){if(Z=M.U+1>>1,O.memory=u(M.U+2*Z),O.memory==null)return 0;O.ec=O.memory,O.fc=0,O.cc=O.ec,O.dc=O.fc+M.U,O.Mc=O.cc,O.Nc=O.dc+Z,O.Ib=Vi,fi()}}else alert("todo:EmitYUV");Ce&&(O.Jb=Mi,le&&Ft())}if(le&&!Nh){for(M=0;256>M;++M)hd[M]=89858*(M-128)+Cs>>rl,Jl[M]=-22014*(M-128)+Cs,JA[M]=-45773*(M-128),Ps[M]=113618*(M-128)+Cs>>rl;for(M=Mo;M<Yl;++M)O=76283*(M-16)+Cs>>rl,ec[M-Mo]=io(O,255),Fa[M-Mo]=io(O+8>>4,15);Nh=1}return 1}function vr(M){var O=M.ma,Z=M.U,le=M.T;return e(!(1&M.ka)),0>=Z||0>=le?0:(Z=O.Ib(M,O),O.Jb!=null&&O.Jb(M,O,Z),O.Dc+=Z,1)}function Er(M){M.ma.memory=null}function Pi(M,O,Z,le){return pe(M,8)!=47?0:(O[0]=pe(M,14)+1,Z[0]=pe(M,14)+1,le[0]=pe(M,1),pe(M,3)!=0?0:!M.h)}function Fn(M,O){if(4>M)return M+1;var Z=M-2>>1;return(2+(1&M)<<Z)+pe(O,Z)+1}function fn(M,O){return 120<O?O-120:1<=(Z=((Z=To[O-1])>>4)*M+(8-(15&Z)))?Z:1;var Z}function Dn(M,O,Z){var le=me(Z),Ce=M[O+=255&le].g-8;return 0<Ce&&(ze(Z,Z.u+8),le=me(Z),O+=M[O].value,O+=le&(1<<Ce)-1),ze(Z,Z.u+M[O].g),M[O].value}function hn(M,O,Z){return Z.g+=M.g,Z.value+=M.value<<O>>>0,e(8>=Z.g),M.g}function Kt(M,O,Z){var le=M.xc;return e((O=le==0?0:M.vc[M.md*(Z>>le)+(O>>le)])<M.Wb),M.Ya[O]}function ds(M,O,Z,le){var Ce=M.ab,Me=M.c*O,Le=M.C;O=Le+O;var De=Z,Oe=le;for(le=M.Ta,Z=M.Ua;0<Ce--;){var Pe=M.gc[Ce],pt=Le,jt=O,It=De,Bt=Oe,ti=(Oe=le,De=Z,Pe.Ea);switch(e(pt<jt),e(jt<=Pe.nc),Pe.hc){case 2:qu(It,Bt,(jt-pt)*ti,Oe,De);break;case 0:var zt=pt,ct=jt,bt=Oe,Xt=De,ri=(Fi=Pe).Ea;zt==0&&(Fh(It,Bt,null,null,1,bt,Xt),wi(It,Bt+1,0,0,ri-1,bt,Xt+1),Bt+=ri,Xt+=ri,++zt);for(var ii=1<<Fi.b,ji=ii-1,Ci=yi(ri,Fi.b),Xi=Fi.K,Fi=Fi.w+(zt>>Fi.b)*Ci;zt<ct;){var er=Xi,lr=Fi,kn=1;for(Vu(It,Bt,bt,Xt-ri,1,bt,Xt);kn<ri;){var In=(kn&~ji)+ii;In>ri&&(In=ri),(0,Wo[er[lr++]>>8&15])(It,Bt+ +kn,bt,Xt+kn-ri,In-kn,bt,Xt+kn),kn=In}Bt+=ri,Xt+=ri,++zt&ji||(Fi+=Ci)}jt!=Pe.nc&&n(Oe,De-ti,Oe,De+(jt-pt-1)*ti,ti);break;case 1:for(ti=It,ct=Bt,ri=(It=Pe.Ea)-(Xt=It&~(bt=(Bt=1<<Pe.b)-1)),zt=yi(It,Pe.b),ii=Pe.K,Pe=Pe.w+(pt>>Pe.b)*zt;pt<jt;){for(ji=ii,Ci=Pe,Xi=new ei,Fi=ct+Xt,er=ct+It;ct<Fi;)gn(ji[Ci++],Xi),Ca(Xi,ti,ct,Bt,Oe,De),ct+=Bt,De+=Bt;ct<er&&(gn(ji[Ci++],Xi),Ca(Xi,ti,ct,ri,Oe,De),ct+=ri,De+=ri),++pt&bt||(Pe+=zt)}break;case 3:if(It==Oe&&Bt==De&&0<Pe.b){for(ct=Oe,It=ti=De+(jt-pt)*ti-(Xt=(jt-pt)*yi(Pe.Ea,Pe.b)),Bt=Oe,bt=De,zt=[],Xt=(ri=Xt)-1;0<=Xt;--Xt)zt[Xt]=Bt[bt+Xt];for(Xt=ri-1;0<=Xt;--Xt)ct[It+Xt]=zt[Xt];Co(Pe,pt,jt,Oe,ti,Oe,De)}else Co(Pe,pt,jt,It,Bt,Oe,De)}De=le,Oe=Z}Oe!=Z&&n(le,Z,De,Oe,Me)}function qs(M,O){var Z=M.V,le=M.Ba+M.c*M.C,Ce=O-M.C;if(e(O<=M.l.o),e(16>=Ce),0<Ce){var Me=M.l,Le=M.Ta,De=M.Ua,Oe=Me.width;if(ds(M,Ce,Z,le),Ce=De=[De],e((Z=M.C)<(le=O)),e(Me.v<Me.va),le>Me.o&&(le=Me.o),Z<Me.j){var Pe=Me.j-Z;Z=Me.j,Ce[0]+=Pe*Oe}if(Z>=le?Z=0:(Ce[0]+=4*Me.v,Me.ka=Z-Me.j,Me.U=Me.va-Me.v,Me.T=le-Z,Z=1),Z){if(De=De[0],11>(Z=M.ca).S){var pt=Z.f.RGBA,jt=(le=Z.S,Ce=Me.U,Me=Me.T,Pe=pt.eb,pt.A),It=Me;for(pt=pt.fb+M.Ma*pt.A;0<It--;){var Bt=Le,ti=De,zt=Ce,ct=Pe,bt=pt;switch(le){case $s:pa(Bt,ti,zt,ct,bt);break;case Gu:Ws(Bt,ti,zt,ct,bt);break;case _A:Ws(Bt,ti,zt,ct,bt),so(ct,bt,0,zt,1,0);break;case Xo:So(Bt,ti,zt,ct,bt);break;case Nc:wt(Bt,ti,zt,ct,bt,1);break;case Zl:wt(Bt,ti,zt,ct,bt,1),so(ct,bt,0,zt,1,0);break;case Bu:wt(Bt,ti,zt,ct,bt,0);break;case Jo:wt(Bt,ti,zt,ct,bt,0),so(ct,bt,1,zt,1,0);break;case Yo:Mn(Bt,ti,zt,ct,bt);break;case Mc:Mn(Bt,ti,zt,ct,bt),Pn(ct,bt,zt,1,0);break;case Ku:Ua(Bt,ti,zt,ct,bt);break;default:e(0)}De+=Oe,pt+=jt}M.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(M.Ma<=Z.height)}}M.C=O,e(M.C<=M.i)}function jr(M){var O;if(0<M.ua)return 0;for(O=0;O<M.Wb;++O){var Z=M.Ya[O].G,le=M.Ya[O].H;if(0<Z[1][le[1]+0].g||0<Z[2][le[2]+0].g||0<Z[3][le[3]+0].g)return 0}return 1}function or(M,O,Z,le,Ce,Me){if(M.Z!=0){var Le=M.qd,De=M.rd;for(e(nl[M.Z]!=null);O<Z;++O)nl[M.Z](Le,De,le,Ce,le,Ce,Me),Le=le,De=Ce,Ce+=Me;M.qd=Le,M.rd=De}}function di(M,O){var Z=M.l.ma,le=Z.Z==0||Z.Z==1?M.l.j:M.C;if(le=M.C<le?le:M.C,e(O<=M.l.o),O>le){var Ce=M.l.width,Me=Z.ca,Le=Z.tb+Ce*le,De=M.V,Oe=M.Ba+M.c*le,Pe=M.gc;e(M.ab==1),e(Pe[0].hc==3),Wl(Pe[0],le,O,De,Oe,Me,Le),or(Z,le,O,Me,Le,Ce)}M.C=M.Ma=O}function tn(M,O,Z,le,Ce,Me,Le){var De=M.$/le,Oe=M.$%le,Pe=M.m,pt=M.s,jt=Z+M.$,It=jt;Ce=Z+le*Ce;var Bt=Z+le*Me,ti=280+pt.ua,zt=M.Pb?De:16777216,ct=0<pt.ua?pt.Wa:null,bt=pt.wc,Xt=jt<Bt?Kt(pt,Oe,De):null;e(M.C<Me),e(Bt<=Ce);var ri=!1;e:for(;;){for(;ri||jt<Bt;){var ii=0;if(De>=zt){var ji=jt-Z;e((zt=M).Pb),zt.wd=zt.m,zt.xd=ji,0<zt.s.ua&&ot(zt.s.Wa,zt.s.vb),zt=De+xA}if(Oe&bt||(Xt=Kt(pt,Oe,De)),e(Xt!=null),Xt.Qb&&(O[jt]=Xt.qb,ri=!0),!ri)if(Ke(Pe),Xt.jc){ii=Pe,ji=O;var Ci=jt,Xi=Xt.pd[me(ii)&Dr-1];e(Xt.jc),256>Xi.g?(ze(ii,ii.u+Xi.g),ji[Ci]=Xi.value,ii=0):(ze(ii,ii.u+Xi.g-256),e(256<=Xi.value),ii=Xi.value),ii==0&&(ri=!0)}else ii=Dn(Xt.G[0],Xt.H[0],Pe);if(Pe.h)break;if(ri||256>ii){if(!ri)if(Xt.nd)O[jt]=(Xt.qb|ii<<8)>>>0;else{if(Ke(Pe),ri=Dn(Xt.G[1],Xt.H[1],Pe),Ke(Pe),ji=Dn(Xt.G[2],Xt.H[2],Pe),Ci=Dn(Xt.G[3],Xt.H[3],Pe),Pe.h)break;O[jt]=(Ci<<24|ri<<16|ii<<8|ji)>>>0}if(ri=!1,++jt,++Oe>=le&&(Oe=0,++De,Le!=null&&De<=Me&&!(De%16)&&Le(M,De),ct!=null))for(;It<jt;)ii=O[It++],ct.X[(506832829*ii&4294967295)>>>ct.Mb]=ii}else if(280>ii){if(ii=Fn(ii-256,Pe),ji=Dn(Xt.G[4],Xt.H[4],Pe),Ke(Pe),ji=fn(le,ji=Fn(ji,Pe)),Pe.h)break;if(jt-Z<ji||Ce-jt<ii)break e;for(Ci=0;Ci<ii;++Ci)O[jt+Ci]=O[jt+Ci-ji];for(jt+=ii,Oe+=ii;Oe>=le;)Oe-=le,++De,Le!=null&&De<=Me&&!(De%16)&&Le(M,De);if(e(jt<=Ce),Oe&bt&&(Xt=Kt(pt,Oe,De)),ct!=null)for(;It<jt;)ii=O[It++],ct.X[(506832829*ii&4294967295)>>>ct.Mb]=ii}else{if(!(ii<ti))break e;for(ri=ii-280,e(ct!=null);It<jt;)ii=O[It++],ct.X[(506832829*ii&4294967295)>>>ct.Mb]=ii;ii=jt,e(!(ri>>>(ji=ct).Xa)),O[ii]=ji.X[ri],ri=!0}ri||e(Pe.h==Fe(Pe))}if(M.Pb&&Pe.h&&jt<Ce)e(M.m.h),M.a=5,M.m=M.wd,M.$=M.xd,0<M.s.ua&&ot(M.s.vb,M.s.Wa);else{if(Pe.h)break e;Le?.(M,De>Me?Me:De),M.a=0,M.$=jt-Z}return 1}return M.a=3,0}function nn(M){e(M!=null),M.vc=null,M.yc=null,M.Ya=null;var O=M.Wa;O!=null&&(O.X=null),M.vb=null,e(M!=null)}function _r(){var M=new Qu;return M==null?null:(M.a=0,M.xb=ma,dt("Predictor","VP8LPredictors"),dt("Predictor","VP8LPredictors_C"),dt("PredictorAdd","VP8LPredictorsAdd"),dt("PredictorAdd","VP8LPredictorsAdd_C"),qu=Gi,Ca=et,pa=ge,Ws=Re,Mn=Ze,Ua=st,So=ut,re.VP8LMapColor32b=Ks,re.VP8LMapColor8b=bu,M)}function Hn(M,O,Z,le,Ce){var Me=1,Le=[M],De=[O],Oe=le.m,Pe=le.s,pt=null,jt=0;e:for(;;){if(Z)for(;Me&&pe(Oe,1);){var It=Le,Bt=De,ti=le,zt=1,ct=ti.m,bt=ti.gc[ti.ab],Xt=pe(ct,2);if(ti.Oc&1<<Xt)Me=0;else{switch(ti.Oc|=1<<Xt,bt.hc=Xt,bt.Ea=It[0],bt.nc=Bt[0],bt.K=[null],++ti.ab,e(4>=ti.ab),Xt){case 0:case 1:bt.b=pe(ct,3)+2,zt=Hn(yi(bt.Ea,bt.b),yi(bt.nc,bt.b),0,ti,bt.K),bt.K=bt.K[0];break;case 3:var ri,ii=pe(ct,8)+1,ji=16<ii?0:4<ii?1:2<ii?2:3;if(It[0]=yi(bt.Ea,ji),bt.b=ji,ri=zt=Hn(ii,1,0,ti,bt.K)){var Ci,Xi=ii,Fi=bt,er=1<<(8>>Fi.b),lr=u(er);if(lr==null)ri=0;else{var kn=Fi.K[0],In=Fi.w;for(lr[0]=Fi.K[0][0],Ci=1;Ci<1*Xi;++Ci)lr[Ci]=si(kn[In+Ci],lr[Ci-1]);for(;Ci<4*er;++Ci)lr[Ci]=0;Fi.K[0]=null,Fi.K[0]=lr,ri=1}}zt=ri;break;case 2:break;default:e(0)}Me=zt}}if(Le=Le[0],De=De[0],Me&&pe(Oe,1)&&!(Me=1<=(jt=pe(Oe,4))&&11>=jt)){le.a=3;break e}var Kn;if(Kn=Me)t:{var en,Sn,cr,an=le,yn=Le,Qn=De,tr=jt,ks=Z,Tr=an.m,Yr=an.s,xi=[null],Li=1,ga=0,ur=Fo[tr];i:for(;;){if(ks&&pe(Tr,1)){var os=pe(Tr,3)+2,Rr=yi(yn,os),Lc=yi(Qn,os),ya=Rr*Lc;if(!Hn(Rr,Lc,0,an,xi))break i;for(xi=xi[0],Yr.xc=os,en=0;en<ya;++en){var co=xi[en]>>8&65535;xi[en]=co,co>=Li&&(Li=co+1)}}if(Tr.h)break i;for(Sn=0;5>Sn;++Sn){var Jr=Ra[Sn];!Sn&&0<tr&&(Jr+=1<<tr),ga<Jr&&(ga=Jr)}var BA=A(Li*ur,ae),eh=Li,js=A(eh,Ee);if(js==null)var wn=null;else e(65536>=eh),wn=js;var Fr=u(ga);if(wn==null||Fr==null||BA==null){an.a=1;break i}var Qa=BA;for(en=cr=0;en<Li;++en){var Xs=wn[en],Io=Xs.G,va=Xs.H,Pc=0,Yc=1,Nl=0;for(Sn=0;5>Sn;++Sn){Jr=Ra[Sn],Io[Sn]=Qa,va[Sn]=cr,!Sn&&0<tr&&(Jr+=1<<tr);r:{var Ml,Zu=Jr,Jc=an,ol=Fr,th=Qa,ih=cr,eu=0,Il=Jc.m,w=pe(Il,1);if(o(ol,0,0,Zu),w){var r=pe(Il,1)+1,d=pe(Il,1),y=pe(Il,d==0?1:8);ol[y]=1,r==2&&(ol[y=pe(Il,8)]=1);var x=1}else{var S=u(19),N=pe(Il,4)+4;if(19<N){Jc.a=3;var U=0;break r}for(Ml=0;Ml<N;++Ml)S[el[Ml]]=pe(Il,3);var z=void 0,X=void 0,Y=Jc,Ae=S,oe=Zu,_e=ol,Ne=0,He=Y.m,Ge=8,We=A(128,ae);n:for(;se(We,0,7,Ae,19);){if(pe(He,1)){var Ye=2+2*pe(He,3);if((z=2+pe(He,Ye))>oe)break n}else z=oe;for(X=0;X<oe&&z--;){Ke(He);var it=We[0+(127&me(He))];ze(He,He.u+it.g);var Je=it.value;if(16>Je)_e[X++]=Je,Je!=0&&(Ge=Je);else{var lt=Je==16,ht=Je-16,nt=Da[ht],mt=pe(He,Cu[ht])+nt;if(X+mt>oe)break n;for(var Dt=lt?Ge:0;0<mt--;)_e[X++]=Dt}}Ne=1;break n}Ne||(Y.a=3),x=Ne}(x=x&&!Il.h)&&(eu=se(th,ih,8,ol,Zu)),x&&eu!=0?U=eu:(Jc.a=3,U=0)}if(U==0)break i;if(Yc&&Xl[Sn]==1&&(Yc=Qa[cr].g==0),Pc+=Qa[cr].g,cr+=U,3>=Sn){var Nt,Lt=Fr[0];for(Nt=1;Nt<Jr;++Nt)Fr[Nt]>Lt&&(Lt=Fr[Nt]);Nl+=Lt}}if(Xs.nd=Yc,Xs.Qb=0,Yc&&(Xs.qb=(Io[3][va[3]+0].value<<24|Io[1][va[1]+0].value<<16|Io[2][va[2]+0].value)>>>0,Pc==0&&256>Io[0][va[0]+0].value&&(Xs.Qb=1,Xs.qb+=Io[0][va[0]+0].value<<8)),Xs.jc=!Xs.Qb&&6>Nl,Xs.jc){var Pt,ui=Xs;for(Pt=0;Pt<Dr;++Pt){var Ai=Pt,$t=ui.pd[Ai],ki=ui.G[0][ui.H[0]+Ai];256<=ki.value?($t.g=ki.g+256,$t.value=ki.value):($t.g=0,$t.value=0,Ai>>=hn(ki,8,$t),Ai>>=hn(ui.G[1][ui.H[1]+Ai],16,$t),Ai>>=hn(ui.G[2][ui.H[2]+Ai],0,$t),hn(ui.G[3][ui.H[3]+Ai],24,$t))}}}Yr.vc=xi,Yr.Wb=Li,Yr.Ya=wn,Yr.yc=BA,Kn=1;break t}Kn=0}if(!(Me=Kn)){le.a=3;break e}if(0<jt){if(Pe.ua=1<<jt,!bi(Pe.Wa,jt)){le.a=1,Me=0;break e}}else Pe.ua=0;var cn=le,ir=Le,sr=De,Ar=cn.s,Pr=Ar.xc;if(cn.c=ir,cn.i=sr,Ar.md=yi(ir,Pr),Ar.wc=Pr==0?-1:(1<<Pr)-1,Z){le.xb=$c;break e}if((pt=u(Le*De))==null){le.a=1,Me=0;break e}Me=(Me=tn(le,pt,0,Le,De,De,null))&&!Oe.h;break e}return Me?(Ce!=null?Ce[0]=pt:(e(pt==null),e(Z)),le.$=0,Z||nn(Pe)):nn(Pe),Me}function ua(M,O){var Z=M.c*M.i,le=Z+O+16*O;return e(M.c<=O),M.V=u(le),M.V==null?(M.Ta=null,M.Ua=0,M.a=1,0):(M.Ta=M.V,M.Ua=M.Ba+Z+O,1)}function pn(M,O){var Z=M.C,le=O-Z,Ce=M.V,Me=M.Ba+M.c*Z;for(e(O<=M.l.o);0<le;){var Le=16<le?16:le,De=M.l.ma,Oe=M.l.width,Pe=Oe*Le,pt=De.ca,jt=De.tb+Oe*Z,It=M.Ta,Bt=M.Ua;ds(M,Le,Ce,Me),wr(It,Bt,pt,jt,Pe),or(De,Z,Z+Le,pt,jt,Oe),le-=Le,Ce+=Le*M.c,Z+=Le}e(Z==O),M.C=M.Ma=O}function Aa(){this.ub=this.yd=this.td=this.Rb=0}function Pa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function zo(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function _c(){this.Yb=function(){var M=[];return function O(Z,le,Ce){for(var Me=Ce[le],Le=0;Le<Me&&(Z.push(Ce.length>le+1?[]:0),!(Ce.length<le+1));Le++)O(Z[Le],le+1,Ce)}(M,0,[3,11]),M}()}function Ho(){this.jb=u(3),this.Wc=a([4,8],_c),this.Xc=a([4,17],_c)}function xc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function xr(){this.ld=this.La=this.dd=this.tc=0}function Gs(){this.Na=this.la=0}function qn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function pl(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bc(){this.uc=this.M=this.Nb=0,this.wa=Array(new xr),this.Y=0,this.ya=Array(new pl),this.aa=0,this.l=new ba}function ml(){this.y=u(16),this.f=u(8),this.ea=u(8)}function gl(){this.cb=this.a=0,this.sc="",this.m=new Qe,this.Od=new Aa,this.Kc=new Pa,this.ed=new xc,this.Qa=new zo,this.Ic=this.$c=this.Aa=0,this.D=new bc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=A(8,Qe),this.ia=0,this.pb=A(4,qn),this.Pa=new Ho,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ml),this.Hd=0,this.rb=Array(new Gs),this.sb=0,this.wa=Array(new xr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new pl),this.L=this.aa=0,this.gd=a([4,2],xr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ba(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function XA(){var M=new gl;return M!=null&&(M.a=0,M.sc="OK",M.cb=0,M.Xb=0,Zs||(Zs=gA)),M}function Gr(M,O,Z){return M.a==0&&(M.a=O,M.sc=Z,M.cb=0),0}function wa(M,O,Z){return 3<=Z&&M[O+0]==157&&M[O+1]==1&&M[O+2]==42}function Ql(M,O){if(M==null)return 0;if(M.a=0,M.sc="OK",O==null)return Gr(M,2,"null VP8Io passed to VP8GetHeaders()");var Z=O.data,le=O.w,Ce=O.ha;if(4>Ce)return Gr(M,7,"Truncated header.");var Me=Z[le+0]|Z[le+1]<<8|Z[le+2]<<16,Le=M.Od;if(Le.Rb=!(1&Me),Le.td=Me>>1&7,Le.yd=Me>>4&1,Le.ub=Me>>5,3<Le.td)return Gr(M,3,"Incorrect keyframe parameters.");if(!Le.yd)return Gr(M,4,"Frame not displayable.");le+=3,Ce-=3;var De=M.Kc;if(Le.Rb){if(7>Ce)return Gr(M,7,"cannot parse picture header");if(!wa(Z,le,Ce))return Gr(M,3,"Bad code word");De.c=16383&(Z[le+4]<<8|Z[le+3]),De.Td=Z[le+4]>>6,De.i=16383&(Z[le+6]<<8|Z[le+5]),De.Ud=Z[le+6]>>6,le+=7,Ce-=7,M.za=De.c+15>>4,M.Ub=De.i+15>>4,O.width=De.c,O.height=De.i,O.Da=0,O.j=0,O.v=0,O.va=O.width,O.o=O.height,O.da=0,O.ib=O.width,O.hb=O.height,O.U=O.width,O.T=O.height,o((Me=M.Pa).jb,0,255,Me.jb.length),e((Me=M.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,o(Me.Zb,0,0,Me.Zb.length),o(Me.Lb,0,0,Me.Lb)}if(Le.ub>Ce)return Gr(M,7,"bad partition length");Ve(Me=M.m,Z,le,Le.ub),le+=Le.ub,Ce-=Le.ub,Le.Rb&&(De.Ld=gt(Me),De.Kd=gt(Me)),De=M.Qa;var Oe,Pe=M.Pa;if(e(Me!=null),e(De!=null),De.Cb=gt(Me),De.Cb){if(De.Bb=gt(Me),gt(Me)){for(De.Fb=gt(Me),Oe=0;4>Oe;++Oe)De.Zb[Oe]=gt(Me)?fe(Me,7):0;for(Oe=0;4>Oe;++Oe)De.Lb[Oe]=gt(Me)?fe(Me,6):0}if(De.Bb)for(Oe=0;3>Oe;++Oe)Pe.jb[Oe]=gt(Me)?ue(Me,8):255}else De.Bb=0;if(Me.Ka)return Gr(M,3,"cannot parse segment header");if((De=M.ed).zd=gt(Me),De.Tb=ue(Me,6),De.wb=ue(Me,3),De.Pc=gt(Me),De.Pc&&gt(Me)){for(Pe=0;4>Pe;++Pe)gt(Me)&&(De.vd[Pe]=fe(Me,6));for(Pe=0;4>Pe;++Pe)gt(Me)&&(De.od[Pe]=fe(Me,6))}if(M.L=De.Tb==0?0:De.zd?1:2,Me.Ka)return Gr(M,3,"cannot parse filter header");var pt=Ce;if(Ce=Oe=le,le=Oe+pt,De=pt,M.Xb=(1<<ue(M.m,2))-1,pt<3*(Pe=M.Xb))Z=7;else{for(Oe+=3*Pe,De-=3*Pe,pt=0;pt<Pe;++pt){var jt=Z[Ce+0]|Z[Ce+1]<<8|Z[Ce+2]<<16;jt>De&&(jt=De),Ve(M.Jc[+pt],Z,Oe,jt),Oe+=jt,De-=jt,Ce+=3}Ve(M.Jc[+Pe],Z,Oe,De),Z=Oe<le?0:5}if(Z!=0)return Gr(M,Z,"cannot parse partitions");for(Z=ue(Oe=M.m,7),Ce=gt(Oe)?fe(Oe,4):0,le=gt(Oe)?fe(Oe,4):0,De=gt(Oe)?fe(Oe,4):0,Pe=gt(Oe)?fe(Oe,4):0,Oe=gt(Oe)?fe(Oe,4):0,pt=M.Qa,jt=0;4>jt;++jt){if(pt.Cb){var It=pt.Zb[jt];pt.Fb||(It+=Z)}else{if(0<jt){M.pb[jt]=M.pb[0];continue}It=Z}var Bt=M.pb[jt];Bt.Sc[0]=bA[io(It+Ce,127)],Bt.Sc[1]=Ic[io(It+0,127)],Bt.Eb[0]=2*bA[io(It+le,127)],Bt.Eb[1]=101581*Ic[io(It+De,127)]>>16,8>Bt.Eb[1]&&(Bt.Eb[1]=8),Bt.Qc[0]=bA[io(It+Pe,117)],Bt.Qc[1]=Ic[io(It+Oe,127)],Bt.lc=It+Oe}if(!Le.Rb)return Gr(M,4,"Not a key frame.");for(gt(Me),Le=M.Pa,Z=0;4>Z;++Z){for(Ce=0;8>Ce;++Ce)for(le=0;3>le;++le)for(De=0;11>De;++De)Pe=Et(Me,tl[Z][Ce][le][De])?ue(Me,8):No[Z][Ce][le][De],Le.Wc[Z][Ce].Yb[le][De]=Pe;for(Ce=0;17>Ce;++Ce)Le.Xc[Z][Ce]=Le.Wc[Z][$u[Ce]]}return M.kc=gt(Me),M.kc&&(M.Bd=ue(Me,8)),M.cb=1}function gA(M,O,Z,le,Ce,Me,Le){var De=O[Ce].Yb[Z];for(Z=0;16>Ce;++Ce){if(!Et(M,De[Z+0]))return Ce;for(;!Et(M,De[Z+1]);)if(De=O[++Ce].Yb[0],Z=0,Ce==16)return 16;var Oe=O[Ce+1].Yb;if(Et(M,De[Z+2])){var Pe=M,pt=0;if(Et(Pe,(It=De)[(jt=Z)+3]))if(Et(Pe,It[jt+6])){for(De=0,jt=2*(pt=Et(Pe,It[jt+8]))+(It=Et(Pe,It[jt+9+pt])),pt=0,It=as[jt];It[De];++De)pt+=pt+Et(Pe,It[De]);pt+=3+(8<<jt)}else Et(Pe,It[jt+7])?(pt=7+2*Et(Pe,165),pt+=Et(Pe,145)):pt=5+Et(Pe,159);else pt=Et(Pe,It[jt+4])?3+Et(Pe,It[jt+5]):2;De=Oe[2]}else pt=1,De=Oe[1];Oe=Le+Gn[Ce],0>(Pe=M).b&&_t(Pe);var jt,It=Pe.b,Bt=(jt=Pe.Ca>>1)-(Pe.I>>It)>>31;--Pe.b,Pe.Ca+=Bt,Pe.Ca|=1,Pe.I-=(jt+1&Bt)<<It,Me[Oe]=((pt^Bt)-Bt)*le[(0<Ce)+0]}return 16}function zc(M){var O=M.rb[M.sb-1];O.la=0,O.Na=0,o(M.zc,0,0,M.zc.length),M.ja=0}function YA(M,O){if(M==null)return 0;if(O==null)return Gr(M,2,"NULL VP8Io parameter in VP8Decode().");if(!M.cb&&!Ql(M,O))return 0;if(e(M.cb),O.ac==null||O.ac(O)){O.ob&&(M.L=0);var Z=Fl[M.L];if(M.L==2?(M.yb=0,M.zb=0):(M.yb=O.v-Z>>4,M.zb=O.j-Z>>4,0>M.yb&&(M.yb=0),0>M.zb&&(M.zb=0)),M.Va=O.o+15+Z>>4,M.Hb=O.va+15+Z>>4,M.Hb>M.za&&(M.Hb=M.za),M.Va>M.Ub&&(M.Va=M.Ub),0<M.L){var le=M.ed;for(Z=0;4>Z;++Z){var Ce;if(M.Qa.Cb){var Me=M.Qa.Lb[Z];M.Qa.Fb||(Me+=le.Tb)}else Me=le.Tb;for(Ce=0;1>=Ce;++Ce){var Le=M.gd[Z][Ce],De=Me;if(le.Pc&&(De+=le.vd[0],Ce&&(De+=le.od[0])),0<(De=0>De?0:63<De?63:De)){var Oe=De;0<le.wb&&(Oe=4<le.wb?Oe>>2:Oe>>1)>9-le.wb&&(Oe=9-le.wb),1>Oe&&(Oe=1),Le.dd=Oe,Le.tc=2*De+Oe,Le.ld=40<=De?2:15<=De?1:0}else Le.tc=0;Le.La=Ce}}}Z=0}else Gr(M,6,"Frame setup failed"),Z=M.a;if(Z=Z==0){if(Z){M.$c=0,0<M.Aa||(M.Ic=al);e:{Z=M.Ic,le=4*(Oe=M.za);var Pe=32*Oe,pt=Oe+1,jt=0<M.L?Oe*(0<M.Aa?2:1):0,It=(M.Aa==2?2:1)*Oe;if((Le=le+832+(Ce=3*(16*Z+Fl[M.L])/2*Pe)+(Me=M.Fa!=null&&0<M.Fa.length?M.Kc.c*M.Kc.i:0))!=Le)Z=0;else{if(Le>M.Vb){if(M.Vb=0,M.Ec=u(Le),M.Fc=0,M.Ec==null){Z=Gr(M,1,"no memory during frame initialization.");break e}M.Vb=Le}Le=M.Ec,De=M.Fc,M.Ac=Le,M.Bc=De,De+=le,M.Gd=A(Pe,ml),M.Hd=0,M.rb=A(pt+1,Gs),M.sb=1,M.wa=jt?A(jt,xr):null,M.Y=0,M.D.Nb=0,M.D.wa=M.wa,M.D.Y=M.Y,0<M.Aa&&(M.D.Y+=Oe),e(!0),M.oc=Le,M.pc=De,De+=832,M.ya=A(It,pl),M.aa=0,M.D.ya=M.ya,M.D.aa=M.aa,M.Aa==2&&(M.D.aa+=Oe),M.R=16*Oe,M.B=8*Oe,Oe=(Pe=Fl[M.L])*M.R,Pe=Pe/2*M.B,M.sa=Le,M.ta=De+Oe,M.qa=M.sa,M.ra=M.ta+16*Z*M.R+Pe,M.Ha=M.qa,M.Ia=M.ra+8*Z*M.B+Pe,M.$c=0,De+=Ce,M.mb=Me?Le:null,M.nb=Me?De:null,e(De+Me<=M.Fc+M.Vb),zc(M),o(M.Ac,M.Bc,0,le),Z=1}}if(Z){if(O.ka=0,O.y=M.sa,O.O=M.ta,O.f=M.qa,O.N=M.ra,O.ea=M.Ha,O.Vd=M.Ia,O.fa=M.R,O.Rc=M.B,O.F=null,O.J=0,!ao){for(Z=-255;255>=Z;++Z)Xr[255+Z]=0>Z?-Z:Z;for(Z=-1020;1020>=Z;++Z)Ea[1020+Z]=-128>Z?-128:127<Z?127:Z;for(Z=-112;112>=Z;++Z)Sl[112+Z]=-16>Z?-16:15<Z?15:Z;for(Z=-255;510>=Z;++Z)Tc[255+Z]=0>Z?0:255<Z?255:Z;ao=1}Sa=Vo,Eo=ku,bl=ka,Ls=ju,no=yA,ps=yu,Kc=$r,$l=xo,wu=Is,wl=Hc,Bl=vu,Cl=bo,Ec=Bc,$o=vA,Zo=_o,ro=ha,ra=Go,ss=Ru,Ta[0]=fr,Ta[1]=Uu,Ta[2]=_s,Ta[3]=xs,Ta[4]=Rn,Ta[5]=Kr,Ta[6]=yl,Ta[7]=Wr,Ta[8]=zl,Ta[9]=ta,il[0]=Cn,il[1]=Nn,il[2]=Ja,il[3]=Ns,il[4]=fs,il[5]=qo,il[6]=eo,Yn[0]=Ji,Yn[1]=ea,Yn[2]=rr,Yn[3]=pr,Yn[4]=rn,Yn[5]=bs,Yn[6]=vl,Z=1}else Z=0}Z&&(Z=function(Bt,ti){for(Bt.M=0;Bt.M<Bt.Va;++Bt.M){var zt,ct=Bt.Jc[Bt.M&Bt.Xb],bt=Bt.m,Xt=Bt;for(zt=0;zt<Xt.za;++zt){var ri=bt,ii=Xt,ji=ii.Ac,Ci=ii.Bc+4*zt,Xi=ii.zc,Fi=ii.ya[ii.aa+zt];if(ii.Qa.Bb?Fi.$b=Et(ri,ii.Pa.jb[0])?2+Et(ri,ii.Pa.jb[2]):Et(ri,ii.Pa.jb[1]):Fi.$b=0,ii.kc&&(Fi.Ad=Et(ri,ii.Bd)),Fi.Za=!Et(ri,145)+0,Fi.Za){var er=Fi.Ob,lr=0;for(ii=0;4>ii;++ii){var kn,In=Xi[0+ii];for(kn=0;4>kn;++kn){In=Wu[ji[Ci+kn]][In];for(var Kn=El[Et(ri,In[0])];0<Kn;)Kn=El[2*Kn+Et(ri,In[Kn])];In=-Kn,ji[Ci+kn]=In}n(er,lr,ji,Ci,4),lr+=4,Xi[0+ii]=In}}else In=Et(ri,156)?Et(ri,128)?1:3:Et(ri,163)?2:0,Fi.Ob[0]=In,o(ji,Ci,In,4),o(Xi,0,In,4);Fi.Dd=Et(ri,142)?Et(ri,114)?Et(ri,183)?1:3:2:0}if(Xt.m.Ka)return Gr(Bt,7,"Premature end-of-partition0 encountered.");for(;Bt.ja<Bt.za;++Bt.ja){if(Xt=ct,ri=(bt=Bt).rb[bt.sb-1],ji=bt.rb[bt.sb+bt.ja],zt=bt.ya[bt.aa+bt.ja],Ci=bt.kc?zt.Ad:0)ri.la=ji.la=0,zt.Za||(ri.Na=ji.Na=0),zt.Hc=0,zt.Gc=0,zt.ia=0;else{var en,Sn;if(ri=ji,ji=Xt,Ci=bt.Pa.Xc,Xi=bt.ya[bt.aa+bt.ja],Fi=bt.pb[Xi.$b],ii=Xi.ad,er=0,lr=bt.rb[bt.sb-1],In=kn=0,o(ii,er,0,384),Xi.Za)var cr=0,an=Ci[3];else{Kn=u(16);var yn=ri.Na+lr.Na;if(yn=Zs(ji,Ci[1],yn,Fi.Eb,0,Kn,0),ri.Na=lr.Na=(0<yn)+0,1<yn)Sa(Kn,0,ii,er);else{var Qn=Kn[0]+3>>3;for(Kn=0;256>Kn;Kn+=16)ii[er+Kn]=Qn}cr=1,an=Ci[0]}var tr=15&ri.la,ks=15&lr.la;for(Kn=0;4>Kn;++Kn){var Tr=1&ks;for(Qn=Sn=0;4>Qn;++Qn)tr=tr>>1|(Tr=(yn=Zs(ji,an,yn=Tr+(1&tr),Fi.Sc,cr,ii,er))>cr)<<7,Sn=Sn<<2|(3<yn?3:1<yn?2:ii[er+0]!=0),er+=16;tr>>=4,ks=ks>>1|Tr<<7,kn=(kn<<8|Sn)>>>0}for(an=tr,cr=ks>>4,en=0;4>en;en+=2){for(Sn=0,tr=ri.la>>4+en,ks=lr.la>>4+en,Kn=0;2>Kn;++Kn){for(Tr=1&ks,Qn=0;2>Qn;++Qn)yn=Tr+(1&tr),tr=tr>>1|(Tr=0<(yn=Zs(ji,Ci[2],yn,Fi.Qc,0,ii,er)))<<3,Sn=Sn<<2|(3<yn?3:1<yn?2:ii[er+0]!=0),er+=16;tr>>=2,ks=ks>>1|Tr<<5}In|=Sn<<4*en,an|=tr<<4<<en,cr|=(240&ks)<<en}ri.la=an,lr.la=cr,Xi.Hc=kn,Xi.Gc=In,Xi.ia=43690&In?0:Fi.ia,Ci=!(kn|In)}if(0<bt.L&&(bt.wa[bt.Y+bt.ja]=bt.gd[zt.$b][zt.Za],bt.wa[bt.Y+bt.ja].La|=!Ci),Xt.Ka)return Gr(Bt,7,"Premature end-of-file encountered.")}if(zc(Bt),bt=ti,Xt=1,zt=(ct=Bt).D,ri=0<ct.L&&ct.M>=ct.zb&&ct.M<=ct.Va,ct.Aa==0)e:{if(zt.M=ct.M,zt.uc=ri,xl(ct,zt),Xt=1,zt=(Sn=ct.D).Nb,ri=(In=Fl[ct.L])*ct.R,ji=In/2*ct.B,Kn=16*zt*ct.R,Qn=8*zt*ct.B,Ci=ct.sa,Xi=ct.ta-ri+Kn,Fi=ct.qa,ii=ct.ra-ji+Qn,er=ct.Ha,lr=ct.Ia-ji+Qn,ks=(tr=Sn.M)==0,kn=tr>=ct.Va-1,ct.Aa==2&&xl(ct,Sn),Sn.uc)for(Tr=(yn=ct).D.M,e(yn.D.uc),Sn=yn.yb;Sn<yn.Hb;++Sn){cr=Sn,an=Tr;var Yr=(xi=(Jr=yn).D).Nb;en=Jr.R;var xi=xi.wa[xi.Y+cr],Li=Jr.sa,ga=Jr.ta+16*Yr*en+16*cr,ur=xi.dd,os=xi.tc;if(os!=0)if(e(3<=os),Jr.L==1)0<cr&&ro(Li,ga,en,os+4),xi.La&&ss(Li,ga,en,os),0<an&&Zo(Li,ga,en,os+4),xi.La&&ra(Li,ga,en,os);else{var Rr=Jr.B,Lc=Jr.qa,ya=Jr.ra+8*Yr*Rr+8*cr,co=Jr.Ha,Jr=Jr.Ia+8*Yr*Rr+8*cr;Yr=xi.ld,0<cr&&($l(Li,ga,en,os+4,ur,Yr),wl(Lc,ya,co,Jr,Rr,os+4,ur,Yr)),xi.La&&(Cl(Li,ga,en,os,ur,Yr),$o(Lc,ya,co,Jr,Rr,os,ur,Yr)),0<an&&(Kc(Li,ga,en,os+4,ur,Yr),wu(Lc,ya,co,Jr,Rr,os+4,ur,Yr)),xi.La&&(Bl(Li,ga,en,os,ur,Yr),Ec(Lc,ya,co,Jr,Rr,os,ur,Yr))}}if(ct.ia&&alert("todo:DitherRow"),bt.put!=null){if(Sn=16*tr,tr=16*(tr+1),ks?(bt.y=ct.sa,bt.O=ct.ta+Kn,bt.f=ct.qa,bt.N=ct.ra+Qn,bt.ea=ct.Ha,bt.W=ct.Ia+Qn):(Sn-=In,bt.y=Ci,bt.O=Xi,bt.f=Fi,bt.N=ii,bt.ea=er,bt.W=lr),kn||(tr-=In),tr>bt.o&&(tr=bt.o),bt.F=null,bt.J=null,ct.Fa!=null&&0<ct.Fa.length&&Sn<tr&&(bt.J=zu(ct,bt,Sn,tr-Sn),bt.F=ct.mb,bt.F==null&&bt.F.length==0)){Xt=Gr(ct,3,"Could not decode alpha data.");break e}Sn<bt.j&&(In=bt.j-Sn,Sn=bt.j,e(!(1&In)),bt.O+=ct.R*In,bt.N+=ct.B*(In>>1),bt.W+=ct.B*(In>>1),bt.F!=null&&(bt.J+=bt.width*In)),Sn<tr&&(bt.O+=bt.v,bt.N+=bt.v>>1,bt.W+=bt.v>>1,bt.F!=null&&(bt.J+=bt.v),bt.ka=Sn-bt.j,bt.U=bt.va-bt.v,bt.T=tr-Sn,Xt=bt.put(bt))}zt+1!=ct.Ic||kn||(n(ct.sa,ct.ta-ri,Ci,Xi+16*ct.R,ri),n(ct.qa,ct.ra-ji,Fi,ii+8*ct.B,ji),n(ct.Ha,ct.Ia-ji,er,lr+8*ct.B,ji))}if(!Xt)return Gr(Bt,6,"Output aborted.")}return 1}(M,O)),O.bc!=null&&O.bc(O),Z&=1}return Z?(M.cb=0,Z):0}function Ya(M,O,Z,le,Ce){Ce=M[O+Z+32*le]+(Ce>>3),M[O+Z+32*le]=-256&Ce?0>Ce?0:255:Ce}function gu(M,O,Z,le,Ce,Me){Ya(M,O,0,Z,le+Ce),Ya(M,O,1,Z,le+Me),Ya(M,O,2,Z,le-Me),Ya(M,O,3,Z,le-Ce)}function Mr(M){return(20091*M>>16)+M}function vo(M,O,Z,le){var Ce,Me=0,Le=u(16);for(Ce=0;4>Ce;++Ce){var De=M[O+0]+M[O+8],Oe=M[O+0]-M[O+8],Pe=(35468*M[O+4]>>16)-Mr(M[O+12]),pt=Mr(M[O+4])+(35468*M[O+12]>>16);Le[Me+0]=De+pt,Le[Me+1]=Oe+Pe,Le[Me+2]=Oe-Pe,Le[Me+3]=De-pt,Me+=4,O++}for(Ce=Me=0;4>Ce;++Ce)De=(M=Le[Me+0]+4)+Le[Me+8],Oe=M-Le[Me+8],Pe=(35468*Le[Me+4]>>16)-Mr(Le[Me+12]),Ya(Z,le,0,0,De+(pt=Mr(Le[Me+4])+(35468*Le[Me+12]>>16))),Ya(Z,le,1,0,Oe+Pe),Ya(Z,le,2,0,Oe-Pe),Ya(Z,le,3,0,De-pt),Me++,le+=32}function yu(M,O,Z,le){var Ce=M[O+0]+4,Me=35468*M[O+4]>>16,Le=Mr(M[O+4]),De=35468*M[O+1]>>16;gu(Z,le,0,Ce+Le,M=Mr(M[O+1]),De),gu(Z,le,1,Ce+Me,M,De),gu(Z,le,2,Ce-Me,M,De),gu(Z,le,3,Ce-Le,M,De)}function ku(M,O,Z,le,Ce){vo(M,O,Z,le),Ce&&vo(M,O+16,Z,le+4)}function ka(M,O,Z,le){Eo(M,O+0,Z,le,1),Eo(M,O+32,Z,le+128,1)}function ju(M,O,Z,le){var Ce;for(M=M[O+0]+4,Ce=0;4>Ce;++Ce)for(O=0;4>O;++O)Ya(Z,le,O,Ce,M)}function yA(M,O,Z,le){M[O+0]&&Ls(M,O+0,Z,le),M[O+16]&&Ls(M,O+16,Z,le+4),M[O+32]&&Ls(M,O+32,Z,le+128),M[O+48]&&Ls(M,O+48,Z,le+128+4)}function Vo(M,O,Z,le){var Ce,Me=u(16);for(Ce=0;4>Ce;++Ce){var Le=M[O+0+Ce]+M[O+12+Ce],De=M[O+4+Ce]+M[O+8+Ce],Oe=M[O+4+Ce]-M[O+8+Ce],Pe=M[O+0+Ce]-M[O+12+Ce];Me[0+Ce]=Le+De,Me[8+Ce]=Le-De,Me[4+Ce]=Pe+Oe,Me[12+Ce]=Pe-Oe}for(Ce=0;4>Ce;++Ce)Le=(M=Me[0+4*Ce]+3)+Me[3+4*Ce],De=Me[1+4*Ce]+Me[2+4*Ce],Oe=Me[1+4*Ce]-Me[2+4*Ce],Pe=M-Me[3+4*Ce],Z[le+0]=Le+De>>3,Z[le+16]=Pe+Oe>>3,Z[le+32]=Le-De>>3,Z[le+48]=Pe-Oe>>3,le+=64}function wc(M,O,Z){var le,Ce=O-32,Me=ms,Le=255-M[Ce-1];for(le=0;le<Z;++le){var De,Oe=Me,Pe=Le+M[O-1];for(De=0;De<Z;++De)M[O+De]=Oe[Pe+M[Ce+De]];O+=32}}function Uu(M,O){wc(M,O,4)}function ea(M,O){wc(M,O,8)}function Nn(M,O){wc(M,O,16)}function Ja(M,O){var Z;for(Z=0;16>Z;++Z)n(M,O+32*Z,M,O-32,16)}function Ns(M,O){var Z;for(Z=16;0<Z;--Z)o(M,O,M[O-1],16),O+=32}function ja(M,O,Z){var le;for(le=0;16>le;++le)o(O,Z+32*le,M,16)}function Cn(M,O){var Z,le=16;for(Z=0;16>Z;++Z)le+=M[O-1+32*Z]+M[O+Z-32];ja(le>>5,M,O)}function fs(M,O){var Z,le=8;for(Z=0;16>Z;++Z)le+=M[O-1+32*Z];ja(le>>4,M,O)}function qo(M,O){var Z,le=8;for(Z=0;16>Z;++Z)le+=M[O+Z-32];ja(le>>4,M,O)}function eo(M,O){ja(128,M,O)}function Zi(M,O,Z){return M+2*O+Z+2>>2}function _s(M,O){var Z,le=O-32;for(le=new Uint8Array([Zi(M[le-1],M[le+0],M[le+1]),Zi(M[le+0],M[le+1],M[le+2]),Zi(M[le+1],M[le+2],M[le+3]),Zi(M[le+2],M[le+3],M[le+4])]),Z=0;4>Z;++Z)n(M,O+32*Z,le,0,le.length)}function xs(M,O){var Z=M[O-1],le=M[O-1+32],Ce=M[O-1+64],Me=M[O-1+96];hi(M,O+0,16843009*Zi(M[O-1-32],Z,le)),hi(M,O+32,16843009*Zi(Z,le,Ce)),hi(M,O+64,16843009*Zi(le,Ce,Me)),hi(M,O+96,16843009*Zi(Ce,Me,Me))}function fr(M,O){var Z,le=4;for(Z=0;4>Z;++Z)le+=M[O+Z-32]+M[O-1+32*Z];for(le>>=3,Z=0;4>Z;++Z)o(M,O+32*Z,le,4)}function Rn(M,O){var Z=M[O-1+0],le=M[O-1+32],Ce=M[O-1+64],Me=M[O-1-32],Le=M[O+0-32],De=M[O+1-32],Oe=M[O+2-32],Pe=M[O+3-32];M[O+0+96]=Zi(le,Ce,M[O-1+96]),M[O+1+96]=M[O+0+64]=Zi(Z,le,Ce),M[O+2+96]=M[O+1+64]=M[O+0+32]=Zi(Me,Z,le),M[O+3+96]=M[O+2+64]=M[O+1+32]=M[O+0+0]=Zi(Le,Me,Z),M[O+3+64]=M[O+2+32]=M[O+1+0]=Zi(De,Le,Me),M[O+3+32]=M[O+2+0]=Zi(Oe,De,Le),M[O+3+0]=Zi(Pe,Oe,De)}function yl(M,O){var Z=M[O+1-32],le=M[O+2-32],Ce=M[O+3-32],Me=M[O+4-32],Le=M[O+5-32],De=M[O+6-32],Oe=M[O+7-32];M[O+0+0]=Zi(M[O+0-32],Z,le),M[O+1+0]=M[O+0+32]=Zi(Z,le,Ce),M[O+2+0]=M[O+1+32]=M[O+0+64]=Zi(le,Ce,Me),M[O+3+0]=M[O+2+32]=M[O+1+64]=M[O+0+96]=Zi(Ce,Me,Le),M[O+3+32]=M[O+2+64]=M[O+1+96]=Zi(Me,Le,De),M[O+3+64]=M[O+2+96]=Zi(Le,De,Oe),M[O+3+96]=Zi(De,Oe,Oe)}function Kr(M,O){var Z=M[O-1+0],le=M[O-1+32],Ce=M[O-1+64],Me=M[O-1-32],Le=M[O+0-32],De=M[O+1-32],Oe=M[O+2-32],Pe=M[O+3-32];M[O+0+0]=M[O+1+64]=Me+Le+1>>1,M[O+1+0]=M[O+2+64]=Le+De+1>>1,M[O+2+0]=M[O+3+64]=De+Oe+1>>1,M[O+3+0]=Oe+Pe+1>>1,M[O+0+96]=Zi(Ce,le,Z),M[O+0+64]=Zi(le,Z,Me),M[O+0+32]=M[O+1+96]=Zi(Z,Me,Le),M[O+1+32]=M[O+2+96]=Zi(Me,Le,De),M[O+2+32]=M[O+3+96]=Zi(Le,De,Oe),M[O+3+32]=Zi(De,Oe,Pe)}function Wr(M,O){var Z=M[O+0-32],le=M[O+1-32],Ce=M[O+2-32],Me=M[O+3-32],Le=M[O+4-32],De=M[O+5-32],Oe=M[O+6-32],Pe=M[O+7-32];M[O+0+0]=Z+le+1>>1,M[O+1+0]=M[O+0+64]=le+Ce+1>>1,M[O+2+0]=M[O+1+64]=Ce+Me+1>>1,M[O+3+0]=M[O+2+64]=Me+Le+1>>1,M[O+0+32]=Zi(Z,le,Ce),M[O+1+32]=M[O+0+96]=Zi(le,Ce,Me),M[O+2+32]=M[O+1+96]=Zi(Ce,Me,Le),M[O+3+32]=M[O+2+96]=Zi(Me,Le,De),M[O+3+64]=Zi(Le,De,Oe),M[O+3+96]=Zi(De,Oe,Pe)}function ta(M,O){var Z=M[O-1+0],le=M[O-1+32],Ce=M[O-1+64],Me=M[O-1+96];M[O+0+0]=Z+le+1>>1,M[O+2+0]=M[O+0+32]=le+Ce+1>>1,M[O+2+32]=M[O+0+64]=Ce+Me+1>>1,M[O+1+0]=Zi(Z,le,Ce),M[O+3+0]=M[O+1+32]=Zi(le,Ce,Me),M[O+3+32]=M[O+1+64]=Zi(Ce,Me,Me),M[O+3+64]=M[O+2+64]=M[O+0+96]=M[O+1+96]=M[O+2+96]=M[O+3+96]=Me}function zl(M,O){var Z=M[O-1+0],le=M[O-1+32],Ce=M[O-1+64],Me=M[O-1+96],Le=M[O-1-32],De=M[O+0-32],Oe=M[O+1-32],Pe=M[O+2-32];M[O+0+0]=M[O+2+32]=Z+Le+1>>1,M[O+0+32]=M[O+2+64]=le+Z+1>>1,M[O+0+64]=M[O+2+96]=Ce+le+1>>1,M[O+0+96]=Me+Ce+1>>1,M[O+3+0]=Zi(De,Oe,Pe),M[O+2+0]=Zi(Le,De,Oe),M[O+1+0]=M[O+3+32]=Zi(Z,Le,De),M[O+1+32]=M[O+3+64]=Zi(le,Z,Le),M[O+1+64]=M[O+3+96]=Zi(Ce,le,Z),M[O+1+96]=Zi(Me,Ce,le)}function rr(M,O){var Z;for(Z=0;8>Z;++Z)n(M,O+32*Z,M,O-32,8)}function pr(M,O){var Z;for(Z=0;8>Z;++Z)o(M,O,M[O-1],8),O+=32}function _n(M,O,Z){var le;for(le=0;8>le;++le)o(O,Z+32*le,M,8)}function Ji(M,O){var Z,le=8;for(Z=0;8>Z;++Z)le+=M[O+Z-32]+M[O-1+32*Z];_n(le>>4,M,O)}function bs(M,O){var Z,le=4;for(Z=0;8>Z;++Z)le+=M[O+Z-32];_n(le>>3,M,O)}function rn(M,O){var Z,le=4;for(Z=0;8>Z;++Z)le+=M[O-1+32*Z];_n(le>>3,M,O)}function vl(M,O){_n(128,M,O)}function Ur(M,O,Z){var le=M[O-Z],Ce=M[O+0],Me=3*(Ce-le)+Fc[1020+M[O-2*Z]-M[O+Z]],Le=Wc[112+(Me+4>>3)];M[O-Z]=ms[255+le+Wc[112+(Me+3>>3)]],M[O+0]=ms[255+Ce-Le]}function Du(M,O,Z,le){var Ce=M[O+0],Me=M[O+Z];return dn[255+M[O-2*Z]-M[O-Z]]>le||dn[255+Me-Ce]>le}function Hl(M,O,Z,le){return 4*dn[255+M[O-Z]-M[O+0]]+dn[255+M[O-2*Z]-M[O+Z]]<=le}function Vl(M,O,Z,le,Ce){var Me=M[O-3*Z],Le=M[O-2*Z],De=M[O-Z],Oe=M[O+0],Pe=M[O+Z],pt=M[O+2*Z],jt=M[O+3*Z];return 4*dn[255+De-Oe]+dn[255+Le-Pe]>le?0:dn[255+M[O-4*Z]-Me]<=Ce&&dn[255+Me-Le]<=Ce&&dn[255+Le-De]<=Ce&&dn[255+jt-pt]<=Ce&&dn[255+pt-Pe]<=Ce&&dn[255+Pe-Oe]<=Ce}function _o(M,O,Z,le){var Ce=2*le+1;for(le=0;16>le;++le)Hl(M,O+le,Z,Ce)&&Ur(M,O+le,Z)}function ha(M,O,Z,le){var Ce=2*le+1;for(le=0;16>le;++le)Hl(M,O+le*Z,1,Ce)&&Ur(M,O+le*Z,1)}function Go(M,O,Z,le){var Ce;for(Ce=3;0<Ce;--Ce)_o(M,O+=4*Z,Z,le)}function Ru(M,O,Z,le){var Ce;for(Ce=3;0<Ce;--Ce)ha(M,O+=4,Z,le)}function Ko(M,O,Z,le,Ce,Me,Le,De){for(Me=2*Me+1;0<Ce--;){if(Vl(M,O,Z,Me,Le))if(Du(M,O,Z,De))Ur(M,O,Z);else{var Oe=M,Pe=O,pt=Z,jt=Oe[Pe-2*pt],It=Oe[Pe-pt],Bt=Oe[Pe+0],ti=Oe[Pe+pt],zt=Oe[Pe+2*pt],ct=27*(Xt=Fc[1020+3*(Bt-It)+Fc[1020+jt-ti]])+63>>7,bt=18*Xt+63>>7,Xt=9*Xt+63>>7;Oe[Pe-3*pt]=ms[255+Oe[Pe-3*pt]+Xt],Oe[Pe-2*pt]=ms[255+jt+bt],Oe[Pe-pt]=ms[255+It+ct],Oe[Pe+0]=ms[255+Bt-ct],Oe[Pe+pt]=ms[255+ti-bt],Oe[Pe+2*pt]=ms[255+zt-Xt]}O+=le}}function Ms(M,O,Z,le,Ce,Me,Le,De){for(Me=2*Me+1;0<Ce--;){if(Vl(M,O,Z,Me,Le))if(Du(M,O,Z,De))Ur(M,O,Z);else{var Oe=M,Pe=O,pt=Z,jt=Oe[Pe-pt],It=Oe[Pe+0],Bt=Oe[Pe+pt],ti=Wc[112+((zt=3*(It-jt))+4>>3)],zt=Wc[112+(zt+3>>3)],ct=ti+1>>1;Oe[Pe-2*pt]=ms[255+Oe[Pe-2*pt]+ct],Oe[Pe-pt]=ms[255+jt+zt],Oe[Pe+0]=ms[255+It-ti],Oe[Pe+pt]=ms[255+Bt-ct]}O+=le}}function $r(M,O,Z,le,Ce,Me){Ko(M,O,Z,1,16,le,Ce,Me)}function xo(M,O,Z,le,Ce,Me){Ko(M,O,1,Z,16,le,Ce,Me)}function vu(M,O,Z,le,Ce,Me){var Le;for(Le=3;0<Le;--Le)Ms(M,O+=4*Z,Z,1,16,le,Ce,Me)}function bo(M,O,Z,le,Ce,Me){var Le;for(Le=3;0<Le;--Le)Ms(M,O+=4,1,Z,16,le,Ce,Me)}function Is(M,O,Z,le,Ce,Me,Le,De){Ko(M,O,Ce,1,8,Me,Le,De),Ko(Z,le,Ce,1,8,Me,Le,De)}function Hc(M,O,Z,le,Ce,Me,Le,De){Ko(M,O,1,Ce,8,Me,Le,De),Ko(Z,le,1,Ce,8,Me,Le,De)}function Bc(M,O,Z,le,Ce,Me,Le,De){Ms(M,O+4*Ce,Ce,1,8,Me,Le,De),Ms(Z,le+4*Ce,Ce,1,8,Me,Le,De)}function vA(M,O,Z,le,Ce,Me,Le,De){Ms(M,O+4,1,Ce,8,Me,Le,De),Ms(Z,le+4,1,Ce,8,Me,Le,De)}function Ou(){this.ba=new Bi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ql(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function da(){this.ua=0,this.Wa=new $e,this.vb=new $e,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ee,this.yc=new ae}function Qu(){this.xb=this.a=0,this.l=new ba,this.ca=new Bi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new da,this.ab=0,this.gc=A(4,ql),this.Oc=0}function Vc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ba,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function _l(M,O,Z,le,Ce,Me,Le){for(M=M==null?0:M[O+0],O=0;O<Le;++O)Ce[Me+O]=M+Z[le+O]&255,M=Ce[Me+O]}function to(M,O,Z,le,Ce,Me,Le){var De;if(M==null)_l(null,null,Z,le,Ce,Me,Le);else for(De=0;De<Le;++De)Ce[Me+De]=M[O+De]+Z[le+De]&255}function ia(M,O,Z,le,Ce,Me,Le){if(M==null)_l(null,null,Z,le,Ce,Me,Le);else{var De,Oe=M[O+0],Pe=Oe,pt=Oe;for(De=0;De<Le;++De)Pe=pt+(Oe=M[O+De])-Pe,pt=Z[le+De]+(-256&Pe?0>Pe?0:255:Pe)&255,Pe=Oe,Ce[Me+De]=pt}}function zu(M,O,Z,le){var Ce=O.width,Me=O.o;if(e(M!=null&&O!=null),0>Z||0>=le||Z+le>Me)return null;if(!M.Cc){if(M.ga==null){var Le;if(M.ga=new Vc,(Le=M.ga==null)||(Le=O.width*O.o,e(M.Gb.length==0),M.Gb=u(Le),M.Uc=0,M.Gb==null?Le=0:(M.mb=M.Gb,M.nb=M.Uc,M.rc=null,Le=1),Le=!Le),!Le){Le=M.ga;var De=M.Fa,Oe=M.P,Pe=M.qc,pt=M.mb,jt=M.nb,It=Oe+1,Bt=Pe-1,ti=Le.l;if(e(De!=null&&pt!=null&&O!=null),nl[0]=null,nl[1]=_l,nl[2]=to,nl[3]=ia,Le.ca=pt,Le.tb=jt,Le.c=O.width,Le.i=O.height,e(0<Le.c&&0<Le.i),1>=Pe)O=0;else if(Le.$a=De[Oe+0]>>0&3,Le.Z=De[Oe+0]>>2&3,Le.Lc=De[Oe+0]>>4&3,Oe=De[Oe+0]>>6&3,0>Le.$a||1<Le.$a||4<=Le.Z||1<Le.Lc||Oe)O=0;else if(ti.put=vr,ti.ac=sn,ti.bc=Er,ti.ma=Le,ti.width=O.width,ti.height=O.height,ti.Da=O.Da,ti.v=O.v,ti.va=O.va,ti.j=O.j,ti.o=O.o,Le.$a)e:{e(Le.$a==1),O=_r();t:for(;;){if(O==null){O=0;break e}if(e(Le!=null),Le.mc=O,O.c=Le.c,O.i=Le.i,O.l=Le.l,O.l.ma=Le,O.l.width=Le.c,O.l.height=Le.i,O.a=0,Ue(O.m,De,It,Bt),!Hn(Le.c,Le.i,1,O,null)||(O.ab==1&&O.gc[0].hc==3&&jr(O.s)?(Le.ic=1,De=O.c*O.i,O.Ta=null,O.Ua=0,O.V=u(De),O.Ba=0,O.V==null?(O.a=1,O=0):O=1):(Le.ic=0,O=ua(O,Le.c)),!O))break t;O=1;break e}Le.mc=null,O=0}else O=Bt>=Le.c*Le.i;Le=!O}if(Le)return null;M.ga.Lc!=1?M.Ga=0:le=Me-Z}e(M.ga!=null),e(Z+le<=Me);e:{if(O=(De=M.ga).c,Me=De.l.o,De.$a==0){if(It=M.rc,Bt=M.Vc,ti=M.Fa,Oe=M.P+1+Z*O,Pe=M.mb,pt=M.nb+Z*O,e(Oe<=M.P+M.qc),De.Z!=0)for(e(nl[De.Z]!=null),Le=0;Le<le;++Le)nl[De.Z](It,Bt,ti,Oe,Pe,pt,O),It=Pe,Bt=pt,pt+=O,Oe+=O;else for(Le=0;Le<le;++Le)n(Pe,pt,ti,Oe,O),It=Pe,Bt=pt,pt+=O,Oe+=O;M.rc=It,M.Vc=Bt}else{if(e(De.mc!=null),O=Z+le,e((Le=De.mc)!=null),e(O<=Le.i),Le.C>=O)O=1;else if(De.ic||Ft(),De.ic){De=Le.V,It=Le.Ba,Bt=Le.c;var zt=Le.i,ct=(ti=1,Oe=Le.$/Bt,Pe=Le.$%Bt,pt=Le.m,jt=Le.s,Le.$),bt=Bt*zt,Xt=Bt*O,ri=jt.wc,ii=ct<Xt?Kt(jt,Pe,Oe):null;e(ct<=bt),e(O<=zt),e(jr(jt));t:for(;;){for(;!pt.h&&ct<Xt;){if(Pe&ri||(ii=Kt(jt,Pe,Oe)),e(ii!=null),Ke(pt),256>(zt=Dn(ii.G[0],ii.H[0],pt)))De[It+ct]=zt,++ct,++Pe>=Bt&&(Pe=0,++Oe<=O&&!(Oe%16)&&di(Le,Oe));else{if(!(280>zt)){ti=0;break t}zt=Fn(zt-256,pt);var ji,Ci=Dn(ii.G[4],ii.H[4],pt);if(Ke(pt),!(ct>=(Ci=fn(Bt,Ci=Fn(Ci,pt)))&&bt-ct>=zt)){ti=0;break t}for(ji=0;ji<zt;++ji)De[It+ct+ji]=De[It+ct+ji-Ci];for(ct+=zt,Pe+=zt;Pe>=Bt;)Pe-=Bt,++Oe<=O&&!(Oe%16)&&di(Le,Oe);ct<Xt&&Pe&ri&&(ii=Kt(jt,Pe,Oe))}e(pt.h==Fe(pt))}di(Le,Oe>O?O:Oe);break t}!ti||pt.h&&ct<bt?(ti=0,Le.a=pt.h?5:3):Le.$=ct,O=ti}else O=tn(Le,Le.V,Le.Ba,Le.c,Le.i,O,pn);if(!O){le=0;break e}}Z+le>=Me&&(M.Cc=1),le=1}if(!le)return null;if(M.Cc&&((le=M.ga)!=null&&(le.mc=null),M.ga=null,0<M.Ga))return alert("todo:WebPDequantizeLevels"),null}return M.nb+Z*Ce}function K(M,O,Z,le,Ce,Me){for(;0<Ce--;){var Le,De=M,Oe=O+(Z?1:0),Pe=M,pt=O+(Z?0:3);for(Le=0;Le<le;++Le){var jt=Pe[pt+4*Le];jt!=255&&(jt*=32897,De[Oe+4*Le+0]=De[Oe+4*Le+0]*jt>>23,De[Oe+4*Le+1]=De[Oe+4*Le+1]*jt>>23,De[Oe+4*Le+2]=De[Oe+4*Le+2]*jt>>23)}O+=Me}}function Se(M,O,Z,le,Ce){for(;0<le--;){var Me;for(Me=0;Me<Z;++Me){var Le=M[O+2*Me+0],De=15&(Pe=M[O+2*Me+1]),Oe=4369*De,Pe=(240&Pe|Pe>>4)*Oe>>16;M[O+2*Me+0]=(240&Le|Le>>4)*Oe>>16&240|(15&Le|Le<<4)*Oe>>16>>4&15,M[O+2*Me+1]=240&Pe|De}O+=Ce}}function tt(M,O,Z,le,Ce,Me,Le,De){var Oe,Pe,pt=255;for(Pe=0;Pe<Ce;++Pe){for(Oe=0;Oe<le;++Oe){var jt=M[O+Oe];Me[Le+4*Oe]=jt,pt&=jt}O+=Z,Le+=De}return pt!=255}function ft(M,O,Z,le,Ce){var Me;for(Me=0;Me<Ce;++Me)Z[le+Me]=M[O+Me]>>8}function Ft(){so=K,Pn=Se,En=tt,wr=ft}function Gt(M,O,Z){re[M]=function(le,Ce,Me,Le,De,Oe,Pe,pt,jt,It,Bt,ti,zt,ct,bt,Xt,ri){var ii,ji=ri-1>>1,Ci=De[Oe+0]|Pe[pt+0]<<16,Xi=jt[It+0]|Bt[ti+0]<<16;e(le!=null);var Fi=3*Ci+Xi+131074>>2;for(O(le[Ce+0],255&Fi,Fi>>16,zt,ct),Me!=null&&(Fi=3*Xi+Ci+131074>>2,O(Me[Le+0],255&Fi,Fi>>16,bt,Xt)),ii=1;ii<=ji;++ii){var er=De[Oe+ii]|Pe[pt+ii]<<16,lr=jt[It+ii]|Bt[ti+ii]<<16,kn=Ci+er+Xi+lr+524296,In=kn+2*(er+Xi)>>3;Fi=In+Ci>>1,Ci=(kn=kn+2*(Ci+lr)>>3)+er>>1,O(le[Ce+2*ii-1],255&Fi,Fi>>16,zt,ct+(2*ii-1)*Z),O(le[Ce+2*ii-0],255&Ci,Ci>>16,zt,ct+(2*ii-0)*Z),Me!=null&&(Fi=kn+Xi>>1,Ci=In+lr>>1,O(Me[Le+2*ii-1],255&Fi,Fi>>16,bt,Xt+(2*ii-1)*Z),O(Me[Le+2*ii+0],255&Ci,Ci>>16,bt,Xt+(2*ii+0)*Z)),Ci=er,Xi=lr}1&ri||(Fi=3*Ci+Xi+131074>>2,O(le[Ce+ri-1],255&Fi,Fi>>16,zt,ct+(ri-1)*Z),Me!=null&&(Fi=3*Xi+Ci+131074>>2,O(Me[Le+ri-1],255&Fi,Fi>>16,bt,Xt+(ri-1)*Z)))}}function fi(){Bs[$s]=Tl,Bs[Gu]=Oa,Bs[Xo]=oo,Bs[Nc]=Zc,Bs[Bu]=Su,Bs[Yo]=Xc,Bs[Ku]=wA,Bs[_A]=Oa,Bs[Zl]=Zc,Bs[Jo]=Su,Bs[Mc]=Xc}function Ii(M){return M&-16384?0>M?0:255:M>>Ad}function Ki(M,O){return Ii((19077*M>>8)+(26149*O>>8)-14234)}function ln(M,O,Z){return Ii((19077*M>>8)-(6419*O>>8)-(13320*Z>>8)+8708)}function bn(M,O){return Ii((19077*M>>8)+(33050*O>>8)-17685)}function On(M,O,Z,le,Ce){le[Ce+0]=Ki(M,Z),le[Ce+1]=ln(M,O,Z),le[Ce+2]=bn(M,O)}function br(M,O,Z,le,Ce){le[Ce+0]=bn(M,O),le[Ce+1]=ln(M,O,Z),le[Ce+2]=Ki(M,Z)}function Ir(M,O,Z,le,Ce){var Me=ln(M,O,Z);O=Me<<3&224|bn(M,O)>>3,le[Ce+0]=248&Ki(M,Z)|Me>>5,le[Ce+1]=O}function ws(M,O,Z,le,Ce){var Me=240&bn(M,O)|15;le[Ce+0]=240&Ki(M,Z)|ln(M,O,Z)>>4,le[Ce+1]=Me}function Zr(M,O,Z,le,Ce){le[Ce+0]=255,On(M,O,Z,le,Ce+1)}function na(M,O,Z,le,Ce){br(M,O,Z,le,Ce),le[Ce+3]=255}function Ba(M,O,Z,le,Ce){On(M,O,Z,le,Ce),le[Ce+3]=255}function io(M,O){return 0>M?0:M>O?O:M}function wo(M,O,Z){re[M]=function(le,Ce,Me,Le,De,Oe,Pe,pt,jt){for(var It=pt+(-2&jt)*Z;pt!=It;)O(le[Ce+0],Me[Le+0],De[Oe+0],Pe,pt),O(le[Ce+1],Me[Le+0],De[Oe+0],Pe,pt+Z),Ce+=2,++Le,++Oe,pt+=2*Z;1&jt&&O(le[Ce+0],Me[Le+0],De[Oe+0],Pe,pt)}}function Hu(M,O,Z){return Z==0?M==0?O==0?6:5:O==0?4:0:Z}function Gl(M,O,Z,le,Ce){switch(M>>>30){case 3:Eo(O,Z,le,Ce,0);break;case 2:ps(O,Z,le,Ce);break;case 1:Ls(O,Z,le,Ce)}}function xl(M,O){var Z,le,Ce=O.M,Me=O.Nb,Le=M.oc,De=M.pc+40,Oe=M.oc,Pe=M.pc+584,pt=M.oc,jt=M.pc+600;for(Z=0;16>Z;++Z)Le[De+32*Z-1]=129;for(Z=0;8>Z;++Z)Oe[Pe+32*Z-1]=129,pt[jt+32*Z-1]=129;for(0<Ce?Le[De-1-32]=Oe[Pe-1-32]=pt[jt-1-32]=129:(o(Le,De-32-1,127,21),o(Oe,Pe-32-1,127,9),o(pt,jt-32-1,127,9)),le=0;le<M.za;++le){var It=O.ya[O.aa+le];if(0<le){for(Z=-1;16>Z;++Z)n(Le,De+32*Z-4,Le,De+32*Z+12,4);for(Z=-1;8>Z;++Z)n(Oe,Pe+32*Z-4,Oe,Pe+32*Z+4,4),n(pt,jt+32*Z-4,pt,jt+32*Z+4,4)}var Bt=M.Gd,ti=M.Hd+le,zt=It.ad,ct=It.Hc;if(0<Ce&&(n(Le,De-32,Bt[ti].y,0,16),n(Oe,Pe-32,Bt[ti].f,0,8),n(pt,jt-32,Bt[ti].ea,0,8)),It.Za){var bt=Le,Xt=De-32+16;for(0<Ce&&(le>=M.za-1?o(bt,Xt,Bt[ti].y[15],4):n(bt,Xt,Bt[ti+1].y,0,4)),Z=0;4>Z;Z++)bt[Xt+128+Z]=bt[Xt+256+Z]=bt[Xt+384+Z]=bt[Xt+0+Z];for(Z=0;16>Z;++Z,ct<<=2)bt=Le,Xt=De+lo[Z],Ta[It.Ob[Z]](bt,Xt),Gl(ct,zt,16*+Z,bt,Xt)}else if(bt=Hu(le,Ce,It.Ob[0]),il[bt](Le,De),ct!=0)for(Z=0;16>Z;++Z,ct<<=2)Gl(ct,zt,16*+Z,Le,De+lo[Z]);for(Z=It.Gc,bt=Hu(le,Ce,It.Dd),Yn[bt](Oe,Pe),Yn[bt](pt,jt),ct=zt,bt=Oe,Xt=Pe,255&(It=Z>>0)&&(170&It?bl(ct,256,bt,Xt):no(ct,256,bt,Xt)),It=pt,ct=jt,255&(Z>>=8)&&(170&Z?bl(zt,320,It,ct):no(zt,320,It,ct)),Ce<M.Ub-1&&(n(Bt[ti].y,0,Le,De+480,16),n(Bt[ti].f,0,Oe,Pe+224,8),n(Bt[ti].ea,0,pt,jt+224,8)),Z=8*Me*M.B,Bt=M.sa,ti=M.ta+16*le+16*Me*M.R,zt=M.qa,It=M.ra+8*le+Z,ct=M.Ha,bt=M.Ia+8*le+Z,Z=0;16>Z;++Z)n(Bt,ti+Z*M.R,Le,De+32*Z,16);for(Z=0;8>Z;++Z)n(zt,It+Z*M.B,Oe,Pe+32*Z,8),n(ct,bt+Z*M.B,pt,jt+32*Z,8)}}function _u(M,O,Z,le,Ce,Me,Le,De,Oe){var Pe=[0],pt=[0],jt=0,It=Oe!=null?Oe.kd:0,Bt=Oe??new rs;if(M==null||12>Z)return 7;Bt.data=M,Bt.w=O,Bt.ha=Z,O=[O],Z=[Z],Bt.gb=[Bt.gb];e:{var ti=O,zt=Z,ct=Bt.gb;if(e(M!=null),e(zt!=null),e(ct!=null),ct[0]=0,12<=zt[0]&&!i(M,ti[0],"RIFF")){if(i(M,ti[0]+8,"WEBP")){ct=3;break e}var bt=Jt(M,ti[0]+4);if(12>bt||4294967286<bt){ct=3;break e}if(It&&bt>zt[0]-8){ct=7;break e}ct[0]=bt,ti[0]+=12,zt[0]-=12}ct=0}if(ct!=0)return ct;for(bt=0<Bt.gb[0],Z=Z[0];;){e:{var Xt=M;zt=O,ct=Z;var ri=Pe,ii=pt,ji=ti=[0];if((Fi=jt=[jt])[0]=0,8>ct[0])ct=7;else{if(!i(Xt,zt[0],"VP8X")){if(Jt(Xt,zt[0]+4)!=10){ct=3;break e}if(18>ct[0]){ct=7;break e}var Ci=Jt(Xt,zt[0]+8),Xi=1+Yt(Xt,zt[0]+12);if(2147483648<=Xi*(Xt=1+Yt(Xt,zt[0]+15))){ct=3;break e}ji!=null&&(ji[0]=Ci),ri!=null&&(ri[0]=Xi),ii!=null&&(ii[0]=Xt),zt[0]+=18,ct[0]-=18,Fi[0]=1}ct=0}}if(jt=jt[0],ti=ti[0],ct!=0)return ct;if(zt=!!(2&ti),!bt&&jt)return 3;if(Me!=null&&(Me[0]=!!(16&ti)),Le!=null&&(Le[0]=zt),De!=null&&(De[0]=0),Le=Pe[0],ti=pt[0],jt&&zt&&Oe==null){ct=0;break}if(4>Z){ct=7;break}if(bt&&jt||!bt&&!jt&&!i(M,O[0],"ALPH")){Z=[Z],Bt.na=[Bt.na],Bt.P=[Bt.P],Bt.Sa=[Bt.Sa];e:{Ci=M,ct=O,bt=Z;var Fi=Bt.gb;ri=Bt.na,ii=Bt.P,ji=Bt.Sa,Xi=22,e(Ci!=null),e(bt!=null),Xt=ct[0];var er=bt[0];for(e(ri!=null),e(ji!=null),ri[0]=null,ii[0]=null,ji[0]=0;;){if(ct[0]=Xt,bt[0]=er,8>er){ct=7;break e}var lr=Jt(Ci,Xt+4);if(4294967286<lr){ct=3;break e}var kn=8+lr+1&-2;if(Xi+=kn,0<Fi&&Xi>Fi){ct=3;break e}if(!i(Ci,Xt,"VP8 ")||!i(Ci,Xt,"VP8L")){ct=0;break e}if(er[0]<kn){ct=7;break e}i(Ci,Xt,"ALPH")||(ri[0]=Ci,ii[0]=Xt+8,ji[0]=lr),Xt+=kn,er-=kn}}if(Z=Z[0],Bt.na=Bt.na[0],Bt.P=Bt.P[0],Bt.Sa=Bt.Sa[0],ct!=0)break}Z=[Z],Bt.Ja=[Bt.Ja],Bt.xa=[Bt.xa];e:if(Fi=M,ct=O,bt=Z,ri=Bt.gb[0],ii=Bt.Ja,ji=Bt.xa,Ci=ct[0],Xt=!i(Fi,Ci,"VP8 "),Xi=!i(Fi,Ci,"VP8L"),e(Fi!=null),e(bt!=null),e(ii!=null),e(ji!=null),8>bt[0])ct=7;else{if(Xt||Xi){if(Fi=Jt(Fi,Ci+4),12<=ri&&Fi>ri-12){ct=3;break e}if(It&&Fi>bt[0]-8){ct=7;break e}ii[0]=Fi,ct[0]+=8,bt[0]-=8,ji[0]=Xi}else ji[0]=5<=bt[0]&&Fi[Ci+0]==47&&!(Fi[Ci+4]>>5),ii[0]=bt[0];ct=0}if(Z=Z[0],Bt.Ja=Bt.Ja[0],Bt.xa=Bt.xa[0],O=O[0],ct!=0)break;if(4294967286<Bt.Ja)return 3;if(De==null||zt||(De[0]=Bt.xa?2:1),Le=[Le],ti=[ti],Bt.xa){if(5>Z){ct=7;break}De=Le,It=ti,zt=Me,M==null||5>Z?M=0:5<=Z&&M[O+0]==47&&!(M[O+4]>>5)?(bt=[0],Fi=[0],ri=[0],Ue(ii=new J,M,O,Z),Pi(ii,bt,Fi,ri)?(De!=null&&(De[0]=bt[0]),It!=null&&(It[0]=Fi[0]),zt!=null&&(zt[0]=ri[0]),M=1):M=0):M=0}else{if(10>Z){ct=7;break}De=ti,M==null||10>Z||!wa(M,O+3,Z-3)?M=0:(It=M[O+0]|M[O+1]<<8|M[O+2]<<16,zt=16383&(M[O+7]<<8|M[O+6]),M=16383&(M[O+9]<<8|M[O+8]),1&It||3<(It>>1&7)||!(It>>4&1)||It>>5>=Bt.Ja||!zt||!M?M=0:(Le&&(Le[0]=zt),De&&(De[0]=M),M=1))}if(!M||(Le=Le[0],ti=ti[0],jt&&(Pe[0]!=Le||pt[0]!=ti)))return 3;Oe!=null&&(Oe[0]=Bt,Oe.offset=O-Oe.w,e(4294967286>O-Oe.w),e(Oe.offset==Oe.ha-Z));break}return ct==0||ct==7&&jt&&Oe==null?(Me!=null&&(Me[0]|=Bt.na!=null&&0<Bt.na.length),le!=null&&(le[0]=Le),Ce!=null&&(Ce[0]=ti),0):ct}function Cc(M,O,Z){var le=O.width,Ce=O.height,Me=0,Le=0,De=le,Oe=Ce;if(O.Da=M!=null&&0<M.Da,O.Da&&(De=M.cd,Oe=M.bd,Me=M.v,Le=M.j,11>Z||(Me&=-2,Le&=-2),0>Me||0>Le||0>=De||0>=Oe||Me+De>le||Le+Oe>Ce))return 0;if(O.v=Me,O.j=Le,O.va=Me+De,O.o=Le+Oe,O.U=De,O.T=Oe,O.da=M!=null&&0<M.da,O.da){if(!Ni(De,Oe,Z=[M.ib],Me=[M.hb]))return 0;O.ib=Z[0],O.hb=Me[0]}return O.ob=M!=null&&M.ob,O.Kb=M==null||!M.Sd,O.da&&(O.ob=O.ib<3*le/4&&O.hb<3*Ce/4,O.Kb=0),1}function Kl(M){if(M==null)return 2;if(11>M.S){var O=M.f.RGBA;O.fb+=(M.height-1)*O.A,O.A=-O.A}else O=M.f.kb,M=M.height,O.O+=(M-1)*O.fa,O.fa=-O.fa,O.N+=(M-1>>1)*O.Ab,O.Ab=-O.Ab,O.W+=(M-1>>1)*O.Db,O.Db=-O.Db,O.F!=null&&(O.J+=(M-1)*O.lb,O.lb=-O.lb);return 0}function qc(M,O,Z,le){if(le==null||0>=M||0>=O)return 2;if(Z!=null){if(Z.Da){var Ce=Z.cd,Me=Z.bd,Le=-2&Z.v,De=-2&Z.j;if(0>Le||0>De||0>=Ce||0>=Me||Le+Ce>M||De+Me>O)return 2;M=Ce,O=Me}if(Z.da){if(!Ni(M,O,Ce=[Z.ib],Me=[Z.hb]))return 2;M=Ce[0],O=Me[0]}}le.width=M,le.height=O;e:{var Oe=le.width,Pe=le.height;if(M=le.S,0>=Oe||0>=Pe||!(M>=$s&&13>M))M=2;else{if(0>=le.Rd&&le.sd==null){Le=Me=Ce=O=0;var pt=(De=Oe*Eu[M])*Pe;if(11>M||(Me=(Pe+1)/2*(O=(Oe+1)/2),M==12&&(Le=(Ce=Oe)*Pe)),(Pe=u(pt+2*Me+Le))==null){M=1;break e}le.sd=Pe,11>M?((Oe=le.f.RGBA).eb=Pe,Oe.fb=0,Oe.A=De,Oe.size=pt):((Oe=le.f.kb).y=Pe,Oe.O=0,Oe.fa=De,Oe.Fd=pt,Oe.f=Pe,Oe.N=0+pt,Oe.Ab=O,Oe.Cd=Me,Oe.ea=Pe,Oe.W=0+pt+Me,Oe.Db=O,Oe.Ed=Me,M==12&&(Oe.F=Pe,Oe.J=0+pt+2*Me),Oe.Tc=Le,Oe.lb=Ce)}if(O=1,Ce=le.S,Me=le.width,Le=le.height,Ce>=$s&&13>Ce)if(11>Ce)M=le.f.RGBA,O&=(De=Math.abs(M.A))*(Le-1)+Me<=M.size,O&=De>=Me*Eu[Ce],O&=M.eb!=null;else{M=le.f.kb,De=(Me+1)/2,pt=(Le+1)/2,Oe=Math.abs(M.fa),Pe=Math.abs(M.Ab);var jt=Math.abs(M.Db),It=Math.abs(M.lb),Bt=It*(Le-1)+Me;O&=Oe*(Le-1)+Me<=M.Fd,O&=Pe*(pt-1)+De<=M.Cd,O=(O&=jt*(pt-1)+De<=M.Ed)&Oe>=Me&Pe>=De&jt>=De,O&=M.y!=null,O&=M.f!=null,O&=M.ea!=null,Ce==12&&(O&=It>=Me,O&=Bt<=M.Tc,O&=M.F!=null)}else O=0;M=O?0:2}}return M!=0||Z!=null&&Z.fd&&(M=Kl(le)),M}var Dr=64,Sc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Gc=24,Bo=32,xu=8,fa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Mt("Predictor0","PredictorAdd0"),re.Predictor0=function(){return 4278190080},re.Predictor1=function(M){return M},re.Predictor2=function(M,O,Z){return O[Z+0]},re.Predictor3=function(M,O,Z){return O[Z+1]},re.Predictor4=function(M,O,Z){return O[Z-1]},re.Predictor5=function(M,O,Z){return ai(ai(M,O[Z+1]),O[Z+0])},re.Predictor6=function(M,O,Z){return ai(M,O[Z-1])},re.Predictor7=function(M,O,Z){return ai(M,O[Z+0])},re.Predictor8=function(M,O,Z){return ai(O[Z-1],O[Z+0])},re.Predictor9=function(M,O,Z){return ai(O[Z+0],O[Z+1])},re.Predictor10=function(M,O,Z){return ai(ai(M,O[Z-1]),ai(O[Z+0],O[Z+1]))},re.Predictor11=function(M,O,Z){var le=O[Z+0];return 0>=zi(le>>24&255,M>>24&255,(O=O[Z-1])>>24&255)+zi(le>>16&255,M>>16&255,O>>16&255)+zi(le>>8&255,M>>8&255,O>>8&255)+zi(255&le,255&M,255&O)?le:M},re.Predictor12=function(M,O,Z){var le=O[Z+0];return(Ei((M>>24&255)+(le>>24&255)-((O=O[Z-1])>>24&255))<<24|Ei((M>>16&255)+(le>>16&255)-(O>>16&255))<<16|Ei((M>>8&255)+(le>>8&255)-(O>>8&255))<<8|Ei((255&M)+(255&le)-(255&O)))>>>0},re.Predictor13=function(M,O,Z){var le=O[Z-1];return($i((M=ai(M,O[Z+0]))>>24&255,le>>24&255)<<24|$i(M>>16&255,le>>16&255)<<16|$i(M>>8&255,le>>8&255)<<8|$i(M>>0&255,le>>0&255))>>>0};var Fh=re.PredictorAdd0;re.PredictorAdd1=wi,Mt("Predictor2","PredictorAdd2"),Mt("Predictor3","PredictorAdd3"),Mt("Predictor4","PredictorAdd4"),Mt("Predictor5","PredictorAdd5"),Mt("Predictor6","PredictorAdd6"),Mt("Predictor7","PredictorAdd7"),Mt("Predictor8","PredictorAdd8"),Mt("Predictor9","PredictorAdd9"),Mt("Predictor10","PredictorAdd10"),Mt("Predictor11","PredictorAdd11"),Mt("Predictor12","PredictorAdd12"),Mt("Predictor13","PredictorAdd13");var Vu=re.PredictorAdd2;be("ColorIndexInverseTransform","MapARGB","32b",function(M){return M>>8&255},function(M){return M}),be("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(M){return M},function(M){return M>>8&255});var qu,Co=re.ColorIndexInverseTransform,Ks=re.MapARGB,Wl=re.VP8LColorIndexInverseTransformAlpha,bu=re.MapAlpha,Wo=re.VP8LPredictorsAdd=[];Wo.length=16,(re.VP8LPredictors=[]).length=16,(re.VP8LPredictorsAdd_C=[]).length=16,(re.VP8LPredictors_C=[]).length=16;var Ca,pa,Ws,Mn,Ua,So,Sa,Eo,ps,bl,Ls,no,Kc,$l,wu,wl,Bl,Cl,Ec,$o,Zo,ro,ra,ss,so,Pn,En,wr,Xr=u(511),Ea=u(2041),Sl=u(225),Tc=u(767),ao=0,Fc=Ea,Wc=Sl,ms=Tc,dn=Xr,$s=0,Gu=1,Xo=2,Nc=3,Bu=4,Yo=5,Ku=6,_A=7,Zl=8,Jo=9,Mc=10,Cu=[2,3,7],Da=[3,3,11],Ra=[280,256,256,256,40],Xl=[0,1,1,1,0],el=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],To=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Fo=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],xA=8,bA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ic=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Zs=null,as=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Gn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],El=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],No=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Wu=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],tl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],$u=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],il=[],Ta=[],Yn=[],$c=1,ma=2,nl=[],Bs=[];Gt("UpsampleRgbLinePair",On,3),Gt("UpsampleBgrLinePair",br,3),Gt("UpsampleRgbaLinePair",Ba,4),Gt("UpsampleBgraLinePair",na,4),Gt("UpsampleArgbLinePair",Zr,4),Gt("UpsampleRgba4444LinePair",ws,2),Gt("UpsampleRgb565LinePair",Ir,2);var Tl=re.UpsampleRgbLinePair,oo=re.UpsampleBgrLinePair,Oa=re.UpsampleRgbaLinePair,Zc=re.UpsampleBgraLinePair,Su=re.UpsampleArgbLinePair,Xc=re.UpsampleRgba4444LinePair,wA=re.UpsampleRgb565LinePair,rl=16,Cs=1<<rl-1,Mo=-227,Yl=482,Ad=6,Nh=0,hd=u(256),Ps=u(256),JA=u(256),Jl=u(256),ec=u(Yl-Mo),Fa=u(Yl-Mo);wo("YuvToRgbRow",On,3),wo("YuvToBgrRow",br,3),wo("YuvToRgbaRow",Ba,4),wo("YuvToBgraRow",na,4),wo("YuvToArgbRow",Zr,4),wo("YuvToRgba4444Row",ws,2),wo("YuvToRgb565Row",Ir,2);var lo=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fl=[0,2,8],sl=[8,7,6,4,4,2,2,2,1,1,1,1],al=1;this.WebPDecodeRGBA=function(M,O,Z,le,Ce){var Me=Gu,Le=new Ou,De=new Bi;Le.ba=De,De.S=Me,De.width=[De.width],De.height=[De.height];var Oe=De.width,Pe=De.height,pt=new Ui;if(pt==null||M==null)var jt=2;else e(pt!=null),jt=_u(M,O,Z,pt.width,pt.height,pt.Pd,pt.Qd,pt.format,null);if(jt!=0?Oe=0:(Oe!=null&&(Oe[0]=pt.width[0]),Pe!=null&&(Pe[0]=pt.height[0]),Oe=1),Oe){De.width=De.width[0],De.height=De.height[0],le!=null&&(le[0]=De.width),Ce!=null&&(Ce[0]=De.height);e:{if(le=new ba,(Ce=new rs).data=M,Ce.w=O,Ce.ha=Z,Ce.kd=1,O=[0],e(Ce!=null),((M=_u(Ce.data,Ce.w,Ce.ha,null,null,null,O,null,Ce))==0||M==7)&&O[0]&&(M=4),(O=M)==0){if(e(Le!=null),le.data=Ce.data,le.w=Ce.w+Ce.offset,le.ha=Ce.ha-Ce.offset,le.put=vr,le.ac=sn,le.bc=Er,le.ma=Le,Ce.xa){if((M=_r())==null){Le=1;break e}if(function(It,Bt){var ti=[0],zt=[0],ct=[0];t:for(;;){if(It==null)return 0;if(Bt==null)return It.a=2,0;if(It.l=Bt,It.a=0,Ue(It.m,Bt.data,Bt.w,Bt.ha),!Pi(It.m,ti,zt,ct)){It.a=3;break t}if(It.xb=ma,Bt.width=ti[0],Bt.height=zt[0],!Hn(ti[0],zt[0],1,It,null))break t;return 1}return e(It.a!=0),0}(M,le)){if(le=(O=qc(le.width,le.height,Le.Oa,Le.ba))==0){t:{le=M;i:for(;;){if(le==null){le=0;break t}if(e(le.s.yc!=null),e(le.s.Ya!=null),e(0<le.s.Wb),e((Z=le.l)!=null),e((Ce=Z.ma)!=null),le.xb!=0){if(le.ca=Ce.ba,le.tb=Ce.tb,e(le.ca!=null),!Cc(Ce.Oa,Z,Nc)){le.a=2;break i}if(!ua(le,Z.width)||Z.da)break i;if((Z.da||Tt(le.ca.S))&&Ft(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&Ft()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!bi(le.s.vb,le.s.Wa.Xa)){le.a=1;break i}le.xb=0}if(!tn(le,le.V,le.Ba,le.c,le.i,Z.o,qs))break i;Ce.Dc=le.Ma,le=1;break t}e(le.a!=0),le=0}le=!le}le&&(O=M.a)}else O=M.a}else{if((M=new XA)==null){Le=1;break e}if(M.Fa=Ce.na,M.P=Ce.P,M.qc=Ce.Sa,Ql(M,le)){if((O=qc(le.width,le.height,Le.Oa,Le.ba))==0){if(M.Aa=0,Z=Le.Oa,e((Ce=M)!=null),Z!=null){if(0<(Oe=0>(Oe=Z.Md)?0:100<Oe?255:255*Oe/100)){for(Pe=pt=0;4>Pe;++Pe)12>(jt=Ce.pb[Pe]).lc&&(jt.ia=Oe*sl[0>jt.lc?0:jt.lc]>>3),pt|=jt.ia;pt&&(alert("todo:VP8InitRandom"),Ce.ia=1)}Ce.Ga=Z.Id,100<Ce.Ga?Ce.Ga=100:0>Ce.Ga&&(Ce.Ga=0)}YA(M,le)||(O=M.a)}}else O=M.a}O==0&&Le.Oa!=null&&Le.Oa.fd&&(O=Kl(Le.ba))}Le=O}Me=Le!=0?null:11>Me?De.f.RGBA.eb:De.f.kb.y}else Me=null;return Me};var Eu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function b(re,xe){for(var Be="",se=0;se<4;se++)Be+=String.fromCharCode(re[xe++]);return Be}function B(re,xe){return(re[xe+0]<<0|re[xe+1]<<8|re[xe+2]<<16)>>>0}function I(re,xe){return(re[xe+0]<<0|re[xe+1]<<8|re[xe+2]<<16|re[xe+3]<<24)>>>0}new g;var P=[0],F=[0],Q=[],R=new g,H=t,j=function(re,xe){var Be={},se=0,ae=!1,ce=0,Ee=0;if(Be.frames=[],!function(me,Fe,ze,Ke){for(var _t=0;_t<Ke;_t++)if(me[Fe+_t]!=ze.charCodeAt(_t))return!0;return!1}(re,xe,"RIFF",4)){var Ve,ue;for(I(re,xe+=4),xe+=8;xe<re.length;){var fe=b(re,xe),Ue=I(re,xe+=4);xe+=4;var ke=Ue+(1&Ue);switch(fe){case"VP8 ":case"VP8L":Be.frames[se]===void 0&&(Be.frames[se]={}),(J=Be.frames[se]).src_off=ae?Ee:xe-8,J.src_size=ce+Ue+8,se++,ae&&(ae=!1,ce=0,Ee=0);break;case"VP8X":(J=Be.header={}).feature_flags=re[xe];var pe=xe+4;J.canvas_width=1+B(re,pe),pe+=3,J.canvas_height=1+B(re,pe),pe+=3;break;case"ALPH":ae=!0,ce=ke+8,Ee=xe-8;break;case"ANIM":(J=Be.header).bgcolor=I(re,xe),pe=xe+4,J.loop_count=(Ve=re)[(ue=pe)+0]<<0|Ve[ue+1]<<8,pe+=2;break;case"ANMF":var Qe,J;(J=Be.frames[se]={}).offset_x=2*B(re,xe),xe+=3,J.offset_y=2*B(re,xe),xe+=3,J.width=1+B(re,xe),xe+=3,J.height=1+B(re,xe),xe+=3,J.duration=B(re,xe),xe+=3,Qe=re[xe++],J.dispose=1&Qe,J.blend=Qe>>1&1}fe!="ANMF"&&(xe+=ke)}return Be}}(H,0);j.response=H,j.rgbaoutput=!0,j.dataurl=!1;var V=j.header?j.header:null,W=j.frames?j.frames:null;if(V){V.loop_counter=V.loop_count,P=[V.canvas_height],F=[V.canvas_width];for(var ne=0;ne<W.length&&W[ne].blend!=0;ne++);}var te=W[0],de=R.WebPDecodeRGBA(H,te.src_off,te.src_size,F,P);te.rgba=de,te.imgwidth=F[0],te.imgheight=P[0];for(var ee=0;ee<F[0]*P[0]*4;ee++)Q[ee]=de[ee];return this.width=F,this.height=P,this.data=Q,this}(function(t){var e=function(){return typeof Ox=="function"},i=function(P,F,Q,R){var H=4,j=A;switch(R){case t.image_compression.FAST:H=1,j=u;break;case t.image_compression.MEDIUM:H=6,j=a;break;case t.image_compression.SLOW:H=9,j=g}P=n(P,F,Q,j);var V=Ox(P,{level:H});return t.__addimage__.arrayBufferToBinaryString(V)},n=function(P,F,Q,R){for(var H,j,V,W=P.length/F,ne=new Uint8Array(P.length+W),te=B(),de=0;de<W;de+=1){if(V=de*F,H=P.subarray(V,V+F),R)ne.set(R(H,Q,j),V+de);else{for(var ee,re=te.length,xe=[];ee<re;ee+=1)xe[ee]=te[ee](H,Q,j);var Be=I(xe.concat());ne.set(xe[Be],V+de)}j=H}return ne},o=function(P){var F=Array.apply([],P);return F.unshift(0),F},u=function(P,F){var Q,R=[],H=P.length;R[0]=1;for(var j=0;j<H;j+=1)Q=P[j-F]||0,R[j+1]=P[j]-Q+256&255;return R},A=function(P,F,Q){var R,H=[],j=P.length;H[0]=2;for(var V=0;V<j;V+=1)R=Q&&Q[V]||0,H[V+1]=P[V]-R+256&255;return H},a=function(P,F,Q){var R,H,j=[],V=P.length;j[0]=3;for(var W=0;W<V;W+=1)R=P[W-F]||0,H=Q&&Q[W]||0,j[W+1]=P[W]+256-(R+H>>>1)&255;return j},g=function(P,F,Q){var R,H,j,V,W=[],ne=P.length;W[0]=4;for(var te=0;te<ne;te+=1)R=P[te-F]||0,H=Q&&Q[te]||0,j=Q&&Q[te-F]||0,V=b(R,H,j),W[te+1]=P[te]-V+256&255;return W},b=function(P,F,Q){if(P===F&&F===Q)return P;var R=Math.abs(F-Q),H=Math.abs(P-Q),j=Math.abs(P+F-Q-Q);return R<=H&&R<=j?P:H<=j?F:Q},B=function(){return[o,u,A,a,g]},I=function(P){var F=P.map(function(Q){return Q.reduce(function(R,H){return R+Math.abs(H)},0)});return F.indexOf(Math.min.apply(null,F))};t.processPNG=function(P,F,Q,R){var H,j,V,W,ne,te,de,ee,re,xe,Be,se,ae,ce,Ee,Ve=this.decode.FLATE_DECODE,ue="";if(this.__addimage__.isArrayBuffer(P)&&(P=new Uint8Array(P)),this.__addimage__.isArrayBufferView(P)){if(P=(V=new q8(P)).imgData,j=V.bits,H=V.colorSpace,ne=V.colors,[4,6].indexOf(V.colorType)!==-1){if(V.bits===8){re=(ee=V.pixelBitlength==32?new Uint32Array(V.decodePixels().buffer):V.pixelBitlength==16?new Uint16Array(V.decodePixels().buffer):new Uint8Array(V.decodePixels().buffer)).length,Be=new Uint8Array(re*V.colors),xe=new Uint8Array(re);var fe,Ue=V.pixelBitlength-V.bits;for(ce=0,Ee=0;ce<re;ce++){for(ae=ee[ce],fe=0;fe<Ue;)Be[Ee++]=ae>>>fe&255,fe+=V.bits;xe[ce]=ae>>>fe&255}}if(V.bits===16){re=(ee=new Uint32Array(V.decodePixels().buffer)).length,Be=new Uint8Array(re*(32/V.pixelBitlength)*V.colors),xe=new Uint8Array(re*(32/V.pixelBitlength)),se=V.colors>1,ce=0,Ee=0;for(var ke=0;ce<re;)ae=ee[ce++],Be[Ee++]=ae>>>0&255,se&&(Be[Ee++]=ae>>>16&255,ae=ee[ce++],Be[Ee++]=ae>>>0&255),xe[ke++]=ae>>>16&255;j=8}R!==t.image_compression.NONE&&e()?(P=i(Be,V.width*V.colors,V.colors,R),de=i(xe,V.width,1,R)):(P=Be,de=xe,Ve=void 0)}if(V.colorType===3&&(H=this.color_spaces.INDEXED,te=V.palette,V.transparency.indexed)){var pe=V.transparency.indexed,Qe=0;for(ce=0,re=pe.length;ce<re;++ce)Qe+=pe[ce];if((Qe/=255)===re-1&&pe.indexOf(0)!==-1)W=[pe.indexOf(0)];else if(Qe!==re){for(ee=V.decodePixels(),xe=new Uint8Array(ee.length),ce=0,re=ee.length;ce<re;ce++)xe[ce]=pe[ee[ce]];de=i(xe,V.width,1)}}var J=function(me){var Fe;switch(me){case t.image_compression.FAST:Fe=11;break;case t.image_compression.MEDIUM:Fe=13;break;case t.image_compression.SLOW:Fe=14;break;default:Fe=12}return Fe}(R);return Ve===this.decode.FLATE_DECODE&&(ue="/Predictor "+J+" "),ue+="/Colors "+ne+" /BitsPerComponent "+j+" /Columns "+V.width,(this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),(de&&this.__addimage__.isArrayBuffer(de)||this.__addimage__.isArrayBufferView(de))&&(de=this.__addimage__.arrayBufferToBinaryString(de)),{alias:Q,data:P,index:F,filter:Ve,decodeParameters:ue,transparency:W,palette:te,sMask:de,predictor:J,width:V.width,height:V.height,bitsPerComponent:j,colorSpace:H}}}})(Bn.API),function(t){t.processGIF89A=function(e,i,n,o){var u=new G8(e),A=u.width,a=u.height,g=[];u.decodeAndBlitFrameRGBA(0,g);var b={data:g,width:A,height:a},B=new k_(100).encode(b,100);return t.processJPEG.call(this,B,i,n,o)},t.processGIF87A=t.processGIF89A}(Bn.API),QA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:n,blue:i,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},QA.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(i){Fs.log("bit decode error:"+i)}},QA.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),i=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,o=0;o<e;o++)for(var u=this.datav.getUint8(this.pos++,!0),A=n*this.width*4+8*o*4,a=0;a<8&&8*o+a<this.width;a++){var g=this.palette[u>>7-a&1];this.data[A+4*a]=g.blue,this.data[A+4*a+1]=g.green,this.data[A+4*a+2]=g.red,this.data[A+4*a+3]=255}i!==0&&(this.pos+=4-i)}},QA.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,o=0;o<t;o++){var u=this.datav.getUint8(this.pos++,!0),A=n*this.width*4+2*o*4,a=u>>4,g=15&u,b=this.palette[a];if(this.data[A]=b.blue,this.data[A+1]=b.green,this.data[A+2]=b.red,this.data[A+3]=255,2*o+1>=this.width)break;b=this.palette[g],this.data[A+4]=b.blue,this.data[A+4+1]=b.green,this.data[A+4+2]=b.red,this.data[A+4+3]=255}e!==0&&(this.pos+=4-e)}},QA.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var o=this.datav.getUint8(this.pos++,!0),u=i*this.width*4+4*n;if(o<this.palette.length){var A=this.palette[o];this.data[u]=A.red,this.data[u+1]=A.green,this.data[u+2]=A.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}t!==0&&(this.pos+=4-t)}},QA.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(u&e)/e*255|0,a=(u>>5&e)/e*255|0,g=(u>>10&e)/e*255|0,b=u>>15?255:0,B=n*this.width*4+4*o;this.data[B]=g,this.data[B+1]=a,this.data[B+2]=A,this.data[B+3]=b}this.pos+=t}},QA.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),i=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,u=0;u<this.width;u++){var A=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(A&e)/e*255|0,g=(A>>5&i)/i*255|0,b=(A>>11)/e*255|0,B=o*this.width*4+4*u;this.data[B]=b,this.data[B+1]=g,this.data[B+2]=a,this.data[B+3]=255}this.pos+=t}},QA.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),A=e*this.width*4+4*i;this.data[A]=u,this.data[A+1]=o,this.data[A+2]=n,this.data[A+3]=255}this.pos+=this.width%4}},QA.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),A=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*i;this.data[a]=u,this.data[a+1]=o,this.data[a+2]=n,this.data[a+3]=A}},QA.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,i,n,o){var u=new QA(e,!1),A=u.width,a=u.height,g={data:u.getData(),width:A,height:a},b=new k_(100).encode(g,100);return t.processJPEG.call(this,b,i,n,o)}}(Bn.API),K5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,i,n,o){var u=new K5(e),A=u.width,a=u.height,g={data:u.getData(),width:A,height:a},b=new k_(100).encode(g,100);return t.processJPEG.call(this,b,i,n,o)}}(Bn.API),Bn.API.processRGBA=function(t,e,i){for(var n=t.data,o=n.length,u=new Uint8Array(o/4*3),A=new Uint8Array(o/4),a=0,g=0,b=0;b<o;b+=4){var B=n[b],I=n[b+1],P=n[b+2],F=n[b+3];u[a++]=B,u[a++]=I,u[a++]=P,A[g++]=F}var Q=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(A),data:Q,index:e,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Bn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Gp=Bn.API,Oy=Gp.getCharWidthsArray=function(t,e){var i,n,o=(e=e||{}).font||this.internal.getFont(),u=e.fontSize||this.internal.getFontSize(),A=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:o.metadata.Unicode.widths,g=a.fof?a.fof:1,b=e.kerning?e.kerning:o.metadata.Unicode.kerning,B=b.fof?b.fof:1,I=e.doKerning!==!1,P=0,F=t.length,Q=0,R=a[0]||g,H=[];for(i=0;i<F;i++)n=t.charCodeAt(i),typeof o.metadata.widthOfString=="function"?H.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(n))+A*(1e3/u)||0)/1e3):(P=I&&hs(b[n])==="object"&&!isNaN(parseInt(b[n][Q],10))?b[n][Q]/B:0,H.push((a[n]||R)/g+P)),Q=n;return H},H5=Gp.getStringUnitWidth=function(t,e){var i=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Gp.processArabic&&(t=Gp.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,i,o)/i:Oy.apply(this,arguments).reduce(function(u,A){return u+A},0)},V5=function(t,e,i,n){for(var o=[],u=0,A=t.length,a=0;u!==A&&a+e[u]<i;)a+=e[u],u++;o.push(t.slice(0,u));var g=u;for(a=0;u!==A;)a+e[u]>n&&(o.push(t.slice(g,u)),a=0,g=u),a+=e[u],u++;return g!==u&&o.push(t.slice(g,u)),o},q5=function(t,e,i){i||(i={});var n,o,u,A,a,g,b,B=[],I=[B],P=i.textIndent||0,F=0,Q=0,R=t.split(" "),H=Oy.apply(this,[" ",i])[0];if(g=i.lineIndent===-1?R[0].length+2:i.lineIndent||0){var j=Array(g).join(" "),V=[];R.map(function(ne){(ne=ne.split(/\s*\n/)).length>1?V=V.concat(ne.map(function(te,de){return(de&&te.length?`
`:"")+te})):V.push(ne[0])}),R=V,g=H5.apply(this,[j,i])}for(u=0,A=R.length;u<A;u++){var W=0;if(n=R[u],g&&n[0]==`
`&&(n=n.substr(1),W=1),P+F+(Q=(o=Oy.apply(this,[n,i])).reduce(function(ne,te){return ne+te},0))>e||W){if(Q>e){for(a=V5.apply(this,[n,o,e-(P+F),e]),B.push(a.shift()),B=[a.pop()];a.length;)I.push([a.shift()]);Q=o.slice(n.length-(B[0]?B[0].length:0)).reduce(function(ne,te){return ne+te},0)}else B=[n];I.push(B),P=Q+g,F=H}else B.push(n),P+=F+Q,F=H}return b=g?function(ne,te){return(te?j:"")+ne.join(" ")}:function(ne){return ne.join(" ")},I.map(b)},Gp.splitTextToSize=function(t,e,i){var n,o=(i=i||{}).fontSize||this.internal.getFontSize(),u=(function(B){if(B.widths&&B.kerning)return{widths:B.widths,kerning:B.kerning};var I=this.internal.getFont(B.fontName,B.fontStyle);return I.metadata.Unicode?{widths:I.metadata.Unicode.widths||{0:1},kerning:I.metadata.Unicode.kerning||{}}:{font:I.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var A=1*this.internal.scaleFactor*e/o;u.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/o:0,u.lineIndent=i.lineIndent;var a,g,b=[];for(a=0,g=n.length;a<g;a++)b=b.concat(q5.apply(this,[n[a],A,u]));return b},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",i={},n={},o=0;o<e.length;o++)i[e[o]]="0123456789abcdef"[o],n["0123456789abcdef"[o]]=e[o];var u=function(I){return"0x"+parseInt(I,10).toString(16)},A=t.__fontmetrics__.compress=function(I){var P,F,Q,R,H=["{"];for(var j in I){if(P=I[j],isNaN(parseInt(j,10))?F="'"+j+"'":(j=parseInt(j,10),F=(F=u(j).slice(2)).slice(0,-1)+n[F.slice(-1)]),typeof P=="number")P<0?(Q=u(P).slice(3),R="-"):(Q=u(P).slice(2),R=""),Q=R+Q.slice(0,-1)+n[Q.slice(-1)];else{if(hs(P)!=="object")throw new Error("Don't know what to do with value type "+hs(P)+".");Q=A(P)}H.push(F+Q)}return H.push("}"),H.join("")},a=t.__fontmetrics__.uncompress=function(I){if(typeof I!="string")throw new Error("Invalid argument passed to uncompress.");for(var P,F,Q,R,H={},j=1,V=H,W=[],ne="",te="",de=I.length-1,ee=1;ee<de;ee+=1)(R=I[ee])=="'"?P?(Q=P.join(""),P=void 0):P=[]:P?P.push(R):R=="{"?(W.push([V,Q]),V={},Q=void 0):R=="}"?((F=W.pop())[0][F[1]]=V,Q=void 0,V=F[0]):R=="-"?j=-1:Q===void 0?i.hasOwnProperty(R)?(ne+=i[R],Q=parseInt(ne,16)*j,j=1,ne=""):ne+=R:i.hasOwnProperty(R)?(te+=i[R],V[Q]=parseInt(te,16)*j,j=1,Q=void 0,te=""):te+=R;return H},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},b={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},B={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(I){var P=I.font,F=B.Unicode[P.postScriptName];F&&(P.metadata.Unicode={},P.metadata.Unicode.widths=F.widths,P.metadata.Unicode.kerning=F.kerning);var Q=b.Unicode[P.postScriptName];Q&&(P.metadata.Unicode.encoding=Q,P.encoding=Q.codePages[0])}])}(Bn.API),function(t){var e=function(i){for(var n=i.length,o=new Uint8Array(n),u=0;u<n;u++)o[u]=i.charCodeAt(u);return o};t.API.events.push(["addFont",function(i){var n=void 0,o=i.font,u=i.instance;if(!o.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(n=u.existsFileInVFS(o.postScriptName)===!1?u.loadFile(o.postScriptName):u.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(A,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Kg(a)),A.metadata=t.API.TTFFont.open(a),A.metadata.Unicode=A.metadata.Unicode||{encoding:{},kerning:{},widths:[]},A.metadata.glyIdsUsed=[0]})(o,n)}}])}(Bn),function(t){function e(){return(Tn.canvg?Promise.resolve(Tn.canvg):kx(()=>import("./index.es-DNLFxdGb.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load canvg: "+i))}).then(function(i){return i.default?i.default:i})}Bn.API.addSvgAsImage=function(i,n,o,u,A,a,g,b){if(isNaN(n)||isNaN(o))throw Fs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(A))throw Fs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var B=document.createElement("canvas");B.width=u,B.height=A;var I=B.getContext("2d");I.fillStyle="#fff",I.fillRect(0,0,B.width,B.height);var P={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},F=this;return e().then(function(Q){return Q.fromString(I,i,P)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Q){return Q.render(P)}).then(function(){F.addImage(B.toDataURL("image/jpeg",1),n,o,u,A,g,b)})}}(),Bn.API.putTotalPages=function(t){var e,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),i=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var o=0;o<this.internal.pages[n].length;o++)this.internal.pages[n][o]=this.internal.pages[n][o].replace(e,i);return this},Bn.API.viewerPreferences=function(t,e){var i;t=t||{},e=e||!1;var n,o,u,A={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(A),g=[],b=0,B=0,I=0;function P(Q,R){var H,j=!1;for(H=0;H<Q.length;H+=1)Q[H]===R&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(A)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var F=a.length;for(I=0;I<F;I+=1)i[a[I]].value=i[a[I]].defaultValue,i[a[I]].explicitSet=!1}if(hs(t)==="object"){for(o in t)if(u=t[o],P(a,o)&&u!==void 0){if(i[o].type==="boolean"&&typeof u=="boolean")i[o].value=u;else if(i[o].type==="name"&&P(i[o].valueSet,u))i[o].value=u;else if(i[o].type==="integer"&&Number.isInteger(u))i[o].value=u;else if(i[o].type==="array"){for(b=0;b<u.length;b+=1)if(n=!0,u[b].length===1&&typeof u[b][0]=="number")g.push(String(u[b]-1));else if(u[b].length>1){for(B=0;B<u[b].length;B+=1)typeof u[b][B]!="number"&&(n=!1);n===!0&&g.push([u[b][0]-1,u[b][1]-1].join(" "))}i[o].value="["+g.join(" ")+"]"}else i[o].value=i[o].defaultValue;i[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Q,R=[];for(Q in i)i[Q].explicitSet===!0&&(i[Q].type==="name"?R.push("/"+Q+" /"+i[Q].value):R.push("/"+Q+" "+i[Q].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(n)),A=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),g=unescape(encodeURIComponent("</x:xmpmeta>")),b=u.length+A.length+a.length+o.length+g.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+b+" >>"),this.internal.write("stream"),this.internal.write(o+u+A+a+g),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",e)),this}}(Bn.API),function(t){var e=t.API,i=e.pdfEscape16=function(u,A){for(var a,g=A.metadata.Unicode.widths,b=["","0","00","000","0000"],B=[""],I=0,P=u.length;I<P;++I){if(a=A.metadata.characterToGlyph(u.charCodeAt(I)),A.metadata.glyIdsUsed.push(a),A.metadata.toUnicode[a]=u.charCodeAt(I),g.indexOf(a)==-1&&(g.push(a),g.push([parseInt(A.metadata.widthOfGlyph(a),10)])),a=="0")return B.join("");a=a.toString(16),B.push(b[4-a.length],a)}return B.join("")},n=function(u){var A,a,g,b,B,I,P;for(B=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,g=[],I=0,P=(a=Object.keys(u).sort(function(F,Q){return F-Q})).length;I<P;I++)A=a[I],g.length>=100&&(B+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar`,g=[]),u[A]!==void 0&&u[A]!==null&&typeof u[A].toString=="function"&&(b=("0000"+u[A].toString(16)).slice(-4),A=("0000"+(+A).toString(16)).slice(-4),g.push("<"+A+"><"+b+">"));return g.length&&(B+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar
`),B+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(u){(function(A){var a=A.font,g=A.out,b=A.newObject,B=A.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var I=a.metadata.Unicode.widths,P=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),F="",Q=0;Q<P.length;Q++)F+=String.fromCharCode(P[Q]);var R=b();B({data:F,addLength1:!0,objectId:R}),g("endobj");var H=b();B({data:n(a.metadata.toUnicode),addLength1:!0,objectId:H}),g("endobj");var j=b();g("<<"),g("/Type /FontDescriptor"),g("/FontName /"+tm(a.fontName)),g("/FontFile2 "+R+" 0 R"),g("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),g("/Flags "+a.metadata.flags),g("/StemV "+a.metadata.stemV),g("/ItalicAngle "+a.metadata.italicAngle),g("/Ascent "+a.metadata.ascender),g("/Descent "+a.metadata.decender),g("/CapHeight "+a.metadata.capHeight),g(">>"),g("endobj");var V=b();g("<<"),g("/Type /Font"),g("/BaseFont /"+tm(a.fontName)),g("/FontDescriptor "+j+" 0 R"),g("/W "+t.API.PDFObject.convert(I)),g("/CIDToGIDMap /Identity"),g("/DW 1000"),g("/Subtype /CIDFontType2"),g("/CIDSystemInfo"),g("<<"),g("/Supplement 0"),g("/Registry (Adobe)"),g("/Ordering ("+a.encoding+")"),g(">>"),g(">>"),g("endobj"),a.objectNumber=b(),g("<<"),g("/Type /Font"),g("/Subtype /Type0"),g("/ToUnicode "+H+" 0 R"),g("/BaseFont /"+tm(a.fontName)),g("/Encoding /"+a.encoding),g("/DescendantFonts ["+V+" 0 R]"),g(">>"),g("endobj"),a.isAlreadyPutted=!0}})(u)}]),e.events.push(["putFont",function(u){(function(A){var a=A.font,g=A.out,b=A.newObject,B=A.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var I=a.metadata.rawData,P="",F=0;F<I.length;F++)P+=String.fromCharCode(I[F]);var Q=b();B({data:P,addLength1:!0,objectId:Q}),g("endobj");var R=b();B({data:n(a.metadata.toUnicode),addLength1:!0,objectId:R}),g("endobj");var H=b();g("<<"),g("/Descent "+a.metadata.decender),g("/CapHeight "+a.metadata.capHeight),g("/StemV "+a.metadata.stemV),g("/Type /FontDescriptor"),g("/FontFile2 "+Q+" 0 R"),g("/Flags 96"),g("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),g("/FontName /"+tm(a.fontName)),g("/ItalicAngle "+a.metadata.italicAngle),g("/Ascent "+a.metadata.ascender),g(">>"),g("endobj"),a.objectNumber=b();for(var j=0;j<a.metadata.hmtx.widths.length;j++)a.metadata.hmtx.widths[j]=parseInt(a.metadata.hmtx.widths[j]*(1e3/a.metadata.head.unitsPerEm));g("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+tm(a.fontName)+"/FontDescriptor "+H+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),g("endobj"),a.isAlreadyPutted=!0}})(u)}]);var o=function(u){var A,a=u.text||"",g=u.x,b=u.y,B=u.options||{},I=u.mutex||{},P=I.pdfEscape,F=I.activeFontKey,Q=I.fonts,R=F,H="",j=0,V="",W=Q[R].encoding;if(Q[R].encoding!=="Identity-H")return{text:a,x:g,y:b,options:B,mutex:I};for(V=a,R=F,Array.isArray(a)&&(V=a[0]),j=0;j<V.length;j+=1)Q[R].metadata.hasOwnProperty("cmap")&&(A=Q[R].metadata.cmap.unicode.codeMap[V[j].charCodeAt(0)]),A||V[j].charCodeAt(0)<256&&Q[R].metadata.hasOwnProperty("Unicode")?H+=V[j]:H+="";var ne="";return parseInt(R.slice(1))<14||W==="WinAnsiEncoding"?ne=P(H,R).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):W==="Identity-H"&&(ne=i(H,Q[R])),I.isHex=!0,{text:ne,x:g,y:b,options:B,mutex:I}};e.events.push(["postProcessText",function(u){var A=u.text||"",a=[],g={text:A,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(A)){var b=0;for(b=0;b<A.length;b+=1)Array.isArray(A[b])&&A[b].length===3?a.push([o(Object.assign({},g,{text:A[b][0]})).text,A[b][1],A[b][2]]):a.push(o(Object.assign({},g,{text:A[b]})).text);u.text=a}else u.text=o(Object.assign({},g,{text:A})).text}])}(Bn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(i){return e.call(this),this.internal.vFS[i]!==void 0},t.addFileToVFS=function(i,n){return e.call(this),this.internal.vFS[i]=n,this},t.getFileFromVFS=function(i){return e.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}}(Bn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var o,u,A,a,g,b,B,I=e,P=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],F=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Q={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},H=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),V=!1,W=0;this.__bidiEngine__={};var ne=function(se){var ae=se.charCodeAt(),ce=ae>>8,Ee=R[ce];return Ee!==void 0?I[256*Ee+(255&ae)]:ce===252||ce===253?"AL":j.test(ce)?"L":ce===8?"R":"N"},te=function(se){for(var ae,ce=0;ce<se.length;ce++){if((ae=ne(se.charAt(ce)))==="L")return!1;if(ae==="R")return!0}return!1},de=function(se,ae,ce,Ee){var Ve,ue,fe,Ue,ke=ae[Ee];switch(ke){case"L":case"R":V=!1;break;case"N":case"AN":break;case"EN":V&&(ke="AN");break;case"AL":V=!0,ke="R";break;case"WS":ke="N";break;case"CS":Ee<1||Ee+1>=ae.length||(Ve=ce[Ee-1])!=="EN"&&Ve!=="AN"||(ue=ae[Ee+1])!=="EN"&&ue!=="AN"?ke="N":V&&(ue="AN"),ke=ue===Ve?ue:"N";break;case"ES":ke=(Ve=Ee>0?ce[Ee-1]:"B")==="EN"&&Ee+1<ae.length&&ae[Ee+1]==="EN"?"EN":"N";break;case"ET":if(Ee>0&&ce[Ee-1]==="EN"){ke="EN";break}if(V){ke="N";break}for(fe=Ee+1,Ue=ae.length;fe<Ue&&ae[fe]==="ET";)fe++;ke=fe<Ue&&ae[fe]==="EN"?"EN":"N";break;case"NSM":if(A&&!a){for(Ue=ae.length,fe=Ee+1;fe<Ue&&ae[fe]==="NSM";)fe++;if(fe<Ue){var pe=se[Ee],Qe=pe>=1425&&pe<=2303||pe===64286;if(Ve=ae[fe],Qe&&(Ve==="R"||Ve==="AL")){ke="R";break}}}ke=Ee<1||(Ve=ae[Ee-1])==="B"?"N":ce[Ee-1];break;case"B":V=!1,o=!0,ke=W;break;case"S":u=!0,ke="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":V=!1;break;case"BN":ke="N"}return ke},ee=function(se,ae,ce){var Ee=se.split("");return ce&&re(Ee,ce,{hiLevel:W}),Ee.reverse(),ae&&ae.reverse(),Ee.join("")},re=function(se,ae,ce){var Ee,Ve,ue,fe,Ue,ke=-1,pe=se.length,Qe=0,J=[],me=W?F:P,Fe=[];for(V=!1,o=!1,u=!1,Ve=0;Ve<pe;Ve++)Fe[Ve]=ne(se[Ve]);for(ue=0;ue<pe;ue++){if(Ue=Qe,J[ue]=de(se,Fe,J,ue),Ee=240&(Qe=me[Ue][Q[J[ue]]]),Qe&=15,ae[ue]=fe=me[Qe][5],Ee>0)if(Ee===16){for(Ve=ke;Ve<ue;Ve++)ae[Ve]=1;ke=-1}else ke=-1;if(me[Qe][6])ke===-1&&(ke=ue);else if(ke>-1){for(Ve=ke;Ve<ue;Ve++)ae[Ve]=fe;ke=-1}Fe[ue]==="B"&&(ae[ue]=0),ce.hiLevel|=fe}u&&function(ze,Ke,_t){for(var gt=0;gt<_t;gt++)if(ze[gt]==="S"){Ke[gt]=W;for(var Et=gt-1;Et>=0&&ze[Et]==="WS";Et--)Ke[Et]=W}}(Fe,ae,pe)},xe=function(se,ae,ce,Ee,Ve){if(!(Ve.hiLevel<se)){if(se===1&&W===1&&!o)return ae.reverse(),void(ce&&ce.reverse());for(var ue,fe,Ue,ke,pe=ae.length,Qe=0;Qe<pe;){if(Ee[Qe]>=se){for(Ue=Qe+1;Ue<pe&&Ee[Ue]>=se;)Ue++;for(ke=Qe,fe=Ue-1;ke<fe;ke++,fe--)ue=ae[ke],ae[ke]=ae[fe],ae[fe]=ue,ce&&(ue=ce[ke],ce[ke]=ce[fe],ce[fe]=ue);Qe=Ue}Qe++}}},Be=function(se,ae,ce){var Ee=se.split(""),Ve={hiLevel:W};return ce||(ce=[]),re(Ee,ce,Ve),function(ue,fe,Ue){if(Ue.hiLevel!==0&&B)for(var ke,pe=0;pe<ue.length;pe++)fe[pe]===1&&(ke=H.indexOf(ue[pe]))>=0&&(ue[pe]=H[ke+1])}(Ee,ce,Ve),xe(2,Ee,ae,ce,Ve),xe(1,Ee,ae,ce,Ve),Ee.join("")};return this.__bidiEngine__.doBidiReorder=function(se,ae,ce){if(function(Ve,ue){if(ue)for(var fe=0;fe<Ve.length;fe++)ue[fe]=fe;a===void 0&&(a=te(Ve)),b===void 0&&(b=te(Ve))}(se,ae),A||!g||b)if(A&&g&&a^b)W=a?1:0,se=ee(se,ae,ce);else if(!A&&g&&b)W=a?1:0,se=Be(se,ae,ce),se=ee(se,ae);else if(!A||a||g||b){if(A&&!g&&a^b)se=ee(se,ae),a?(W=0,se=Be(se,ae,ce)):(W=1,se=Be(se,ae,ce),se=ee(se,ae));else if(A&&a&&!g&&b)W=1,se=Be(se,ae,ce),se=ee(se,ae);else if(!A&&!g&&a^b){var Ee=B;a?(W=1,se=Be(se,ae,ce),W=0,B=!1,se=Be(se,ae,ce),B=Ee):(W=0,se=Be(se,ae,ce),se=ee(se,ae),W=1,B=!1,se=Be(se,ae,ce),B=Ee,se=ee(se,ae))}}else W=0,se=Be(se,ae,ce);else W=a?1:0,se=Be(se,ae,ce);return se},this.__bidiEngine__.setOptions=function(se){se&&(A=se.isInputVisual,g=se.isOutputVisual,a=se.isInputRtl,b=se.isOutputRtl,B=se.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var o=n.text,u=(n.x,n.y,n.options||{}),A=(n.mutex,u.lang,[]);if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,i.setOptions(u),Object.prototype.toString.call(o)==="[object Array]"){var a=0;for(A=[],a=0;a<o.length;a+=1)Object.prototype.toString.call(o[a])==="[object Array]"?A.push([i.doBidiReorder(o[a][0]),o[a][1],o[a][2]]):A.push([i.doBidiReorder(o[a])]);n.text=A}else n.text=i.doBidiReorder(o);i.setOptions({isInputVisual:!0})}])}(Bn),Bn.API.TTFFont=function(){function t(e){var i;if(this.rawData=e,i=this.contents=new sf(e),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new oU(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new K8(this.contents),this.head=new $8(this),this.name=new eU(this),this.cmap=new IS(this),this.toUnicode={},this.hhea=new Z8(this),this.maxp=new tU(this),this.hmtx=new iU(this),this.post=new Y8(this),this.os2=new X8(this),this.loca=new aU(this),this.glyf=new nU(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,i,n,o,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var A,a,g,b;for(b=[],A=0,a=(g=this.bbox).length;A<a;A++)e=g[A],b.push(Math.round(e*this.scaleFactor));return b}).call(this),this.stemV=0,this.post.exists?(n=255&(o=this.post.italic_angle),(32768&(i=o>>16))!=0&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var i;return((i=this.cmap.unicode)!=null?i.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*i},t.prototype.widthOfString=function(e,i,n){var o,u,A,a;for(A=0,u=0,a=(e=""+e).length;0<=a?u<a:u>a;u=0<=a?++u:--u)o=e.charCodeAt(u),A+=this.widthOfGlyph(this.characterToGlyph(o))+n*(1e3/i)||0;return A*(i/1e3)},t.prototype.lineHeight=function(e,i){var n;return i==null&&(i=!1),n=i?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var $A,sf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var i,n;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n[i]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var i,n,o;for(o=[],i=0,n=e.length;0<=n?i<n:i>n;i=0<=n?++i:--i)o.push(this.writeByte(e.charCodeAt(i)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,i,n,o,u,A,a,g;return e=this.readByte(),i=this.readByte(),n=this.readByte(),o=this.readByte(),u=this.readByte(),A=this.readByte(),a=this.readByte(),g=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^i)+1099511627776*(255^n)+4294967296*(255^o)+16777216*(255^u)+65536*(255^A)+256*(255^a)+(255^g)+1):72057594037927940*e+281474976710656*i+1099511627776*n+4294967296*o+16777216*u+65536*A+256*a+g},t.prototype.writeLongLong=function(e){var i,n;return i=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var i,n;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i.push(this.readByte());return i},t.prototype.write=function(e){var i,n,o,u;for(u=[],n=0,o=e.length;n<o;n++)i=e[n],u.push(this.writeByte(i));return u},t}(),K8=function(){var t;function e(i){var n,o,u;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},o=0,u=this.tableCount;0<=u?o<u:o>u;o=0<=u?++o:--o)n={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(i){var n,o,u,A,a,g,b,B,I,P,F,Q,R;for(R in F=Object.keys(i).length,g=Math.log(2),I=16*Math.floor(Math.log(F)/g),A=Math.floor(I/g),B=16*F-I,(o=new sf).writeInt(this.scalarType),o.writeShort(F),o.writeShort(I),o.writeShort(A),o.writeShort(B),u=16*F,b=o.pos+u,a=null,Q=[],i)for(P=i[R],o.writeString(R),o.writeInt(t(P)),o.writeInt(b),o.writeInt(P.length),Q=Q.concat(P),R==="head"&&(a=b),b+=P.length;b%4;)Q.push(0),b++;return o.write(Q),n=2981146554-t(o.data),o.pos=a+8,o.writeUInt32(n),o.data},t=function(i){var n,o,u,A;for(i=LS.call(i);i.length%4;)i.push(0);for(u=new sf(i),o=0,n=0,A=i.length;n<A;n=n+=4)o+=u.readUInt32();return 4294967295&o},e}(),W8={}.hasOwnProperty,Sh=function(t,e){for(var i in e)W8.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};$A=function(){function t(e){var i;this.file=e,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var $8=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Sh(e,$A),e.prototype.tag="head",e.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.revision=i.readInt(),this.checkSumAdjustment=i.readInt(),this.magicNumber=i.readInt(),this.flags=i.readShort(),this.unitsPerEm=i.readShort(),this.created=i.readLongLong(),this.modified=i.readLongLong(),this.xMin=i.readShort(),this.yMin=i.readShort(),this.xMax=i.readShort(),this.yMax=i.readShort(),this.macStyle=i.readShort(),this.lowestRecPPEM=i.readShort(),this.fontDirectionHint=i.readShort(),this.indexToLocFormat=i.readShort(),this.glyphDataFormat=i.readShort()},e.prototype.encode=function(i){var n;return(n=new sf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(i),n.writeShort(this.glyphDataFormat),n.data},e}(),W5=function(){function t(e,i){var n,o,u,A,a,g,b,B,I,P,F,Q,R,H,j,V,W;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=i+e.readInt(),I=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(g=0;g<256;++g)this.codeMap[g]=e.readByte();break;case 4:for(F=e.readUInt16(),P=F/2,e.pos+=6,u=function(){var ne,te;for(te=[],g=ne=0;0<=P?ne<P:ne>P;g=0<=P?++ne:--ne)te.push(e.readUInt16());return te}(),e.pos+=2,R=function(){var ne,te;for(te=[],g=ne=0;0<=P?ne<P:ne>P;g=0<=P?++ne:--ne)te.push(e.readUInt16());return te}(),b=function(){var ne,te;for(te=[],g=ne=0;0<=P?ne<P:ne>P;g=0<=P?++ne:--ne)te.push(e.readUInt16());return te}(),B=function(){var ne,te;for(te=[],g=ne=0;0<=P?ne<P:ne>P;g=0<=P?++ne:--ne)te.push(e.readUInt16());return te}(),o=(this.length-e.pos+this.offset)/2,a=function(){var ne,te;for(te=[],g=ne=0;0<=o?ne<o:ne>o;g=0<=o?++ne:--ne)te.push(e.readUInt16());return te}(),g=j=0,W=u.length;j<W;g=++j)for(H=u[g],n=V=Q=R[g];Q<=H?V<=H:V>=H;n=Q<=H?++V:--V)B[g]===0?A=n+b[g]:(A=a[B[g]/2+(n-Q)-(P-g)]||0)!==0&&(A+=b[g]),this.codeMap[n]=65535&A}e.pos=I}return t.encode=function(e,i){var n,o,u,A,a,g,b,B,I,P,F,Q,R,H,j,V,W,ne,te,de,ee,re,xe,Be,se,ae,ce,Ee,Ve,ue,fe,Ue,ke,pe,Qe,J,me,Fe,ze,Ke,_t,gt,Et,hi,Vt,Yt;switch(Ee=new sf,A=Object.keys(e).sort(function(Jt,bi){return Jt-bi}),i){case"macroman":for(R=0,H=function(){var Jt=[];for(Q=0;Q<256;++Q)Jt.push(0);return Jt}(),V={0:0},u={},Ve=0,ke=A.length;Ve<ke;Ve++)V[Et=e[o=A[Ve]]]==null&&(V[Et]=++R),u[o]={old:e[o],new:V[e[o]]},H[o]=V[e[o]];return Ee.writeUInt16(1),Ee.writeUInt16(0),Ee.writeUInt32(12),Ee.writeUInt16(0),Ee.writeUInt16(262),Ee.writeUInt16(0),Ee.write(H),{charMap:u,subtable:Ee.data,maxGlyphID:R+1};case"unicode":for(ae=[],I=[],W=0,V={},n={},j=b=null,ue=0,pe=A.length;ue<pe;ue++)V[te=e[o=A[ue]]]==null&&(V[te]=++W),n[o]={old:te,new:V[te]},a=V[te]-o,j!=null&&a===b||(j&&I.push(j),ae.push(o),b=a),j=o;for(j&&I.push(j),I.push(65535),ae.push(65535),Be=2*(xe=ae.length),re=2*Math.pow(Math.log(xe)/Math.LN2,2),P=Math.log(re/2)/Math.LN2,ee=2*xe-re,g=[],de=[],F=[],Q=fe=0,Qe=ae.length;fe<Qe;Q=++fe){if(se=ae[Q],B=I[Q],se===65535){g.push(0),de.push(0);break}if(se-(ce=n[se].new)>=32768)for(g.push(0),de.push(2*(F.length+xe-Q)),o=Ue=se;se<=B?Ue<=B:Ue>=B;o=se<=B?++Ue:--Ue)F.push(n[o].new);else g.push(ce-se),de.push(0)}for(Ee.writeUInt16(3),Ee.writeUInt16(1),Ee.writeUInt32(12),Ee.writeUInt16(4),Ee.writeUInt16(16+8*xe+2*F.length),Ee.writeUInt16(0),Ee.writeUInt16(Be),Ee.writeUInt16(re),Ee.writeUInt16(P),Ee.writeUInt16(ee),_t=0,J=I.length;_t<J;_t++)o=I[_t],Ee.writeUInt16(o);for(Ee.writeUInt16(0),gt=0,me=ae.length;gt<me;gt++)o=ae[gt],Ee.writeUInt16(o);for(hi=0,Fe=g.length;hi<Fe;hi++)a=g[hi],Ee.writeUInt16(a);for(Vt=0,ze=de.length;Vt<ze;Vt++)ne=de[Vt],Ee.writeUInt16(ne);for(Yt=0,Ke=F.length;Yt<Ke;Yt++)R=F[Yt],Ee.writeUInt16(R);return{charMap:n,subtable:Ee.data,maxGlyphID:W+1}}},t}(),IS=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Sh(e,$A),e.prototype.tag="cmap",e.prototype.parse=function(i){var n,o,u;for(i.pos=this.offset,this.version=i.readUInt16(),u=i.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=u?o<u:o>u;o=0<=u?++o:--o)n=new W5(i,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(i,n){var o,u;return n==null&&(n="macroman"),o=W5.encode(i,n),(u=new sf).writeUInt16(0),u.writeUInt16(1),o.table=u.data.concat(o.subtable),o},e}(),Z8=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Sh(e,$A),e.prototype.tag="hhea",e.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.ascender=i.readShort(),this.decender=i.readShort(),this.lineGap=i.readShort(),this.advanceWidthMax=i.readShort(),this.minLeftSideBearing=i.readShort(),this.minRightSideBearing=i.readShort(),this.xMaxExtent=i.readShort(),this.caretSlopeRise=i.readShort(),this.caretSlopeRun=i.readShort(),this.caretOffset=i.readShort(),i.pos+=8,this.metricDataFormat=i.readShort(),this.numberOfMetrics=i.readUInt16()},e}(),X8=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Sh(e,$A),e.prototype.tag="OS/2",e.prototype.parse=function(i){if(i.pos=this.offset,this.version=i.readUInt16(),this.averageCharWidth=i.readShort(),this.weightClass=i.readUInt16(),this.widthClass=i.readUInt16(),this.type=i.readShort(),this.ySubscriptXSize=i.readShort(),this.ySubscriptYSize=i.readShort(),this.ySubscriptXOffset=i.readShort(),this.ySubscriptYOffset=i.readShort(),this.ySuperscriptXSize=i.readShort(),this.ySuperscriptYSize=i.readShort(),this.ySuperscriptXOffset=i.readShort(),this.ySuperscriptYOffset=i.readShort(),this.yStrikeoutSize=i.readShort(),this.yStrikeoutPosition=i.readShort(),this.familyClass=i.readShort(),this.panose=function(){var n,o;for(o=[],n=0;n<10;++n)o.push(i.readByte());return o}(),this.charRange=function(){var n,o;for(o=[],n=0;n<4;++n)o.push(i.readInt());return o}(),this.vendorID=i.readString(4),this.selection=i.readShort(),this.firstCharIndex=i.readShort(),this.lastCharIndex=i.readShort(),this.version>0&&(this.ascent=i.readShort(),this.descent=i.readShort(),this.lineGap=i.readShort(),this.winAscent=i.readShort(),this.winDescent=i.readShort(),this.codePageRange=function(){var n,o;for(o=[],n=0;n<2;n=++n)o.push(i.readInt());return o}(),this.version>1))return this.xHeight=i.readShort(),this.capHeight=i.readShort(),this.defaultChar=i.readShort(),this.breakChar=i.readShort(),this.maxContext=i.readShort()},e}(),Y8=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Sh(e,$A),e.prototype.tag="post",e.prototype.parse=function(i){var n,o,u;switch(i.pos=this.offset,this.format=i.readInt(),this.italicAngle=i.readInt(),this.underlinePosition=i.readShort(),this.underlineThickness=i.readShort(),this.isFixedPitch=i.readInt(),this.minMemType42=i.readInt(),this.maxMemType42=i.readInt(),this.minMemType1=i.readInt(),this.maxMemType1=i.readInt(),this.format){case 65536:break;case 131072:var A;for(o=i.readUInt16(),this.glyphNameIndex=[],A=0;0<=o?A<o:A>o;A=0<=o?++A:--A)this.glyphNameIndex.push(i.readUInt16());for(this.names=[],u=[];i.pos<this.offset+this.length;)n=i.readByte(),u.push(this.names.push(i.readString(n)));return u;case 151552:return o=i.readUInt16(),this.offsets=i.read(o);case 196608:break;case 262144:return this.map=(function(){var a,g,b;for(b=[],A=a=0,g=this.file.maxp.numGlyphs;0<=g?a<g:a>g;A=0<=g?++a:--a)b.push(i.readUInt32());return b}).call(this)}},e}(),J8=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},eU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Sh(e,$A),e.prototype.tag="name",e.prototype.parse=function(i){var n,o,u,A,a,g,b,B,I,P,F;for(i.pos=this.offset,i.readShort(),n=i.readShort(),g=i.readShort(),o=[],A=0;0<=n?A<n:A>n;A=0<=n?++A:--A)o.push({platformID:i.readShort(),encodingID:i.readShort(),languageID:i.readShort(),nameID:i.readShort(),length:i.readShort(),offset:this.offset+g+i.readShort()});for(b={},A=I=0,P=o.length;I<P;A=++I)u=o[A],i.pos=u.offset,B=i.readString(u.length),a=new J8(B,u),b[F=u.nameID]==null&&(b[F]=[]),b[u.nameID].push(a);this.strings=b,this.copyright=b[0],this.fontFamily=b[1],this.fontSubfamily=b[2],this.uniqueSubfamily=b[3],this.fontName=b[4],this.version=b[5];try{this.postscriptName=b[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=b[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=b[7],this.manufacturer=b[8],this.designer=b[9],this.description=b[10],this.vendorUrl=b[11],this.designerUrl=b[12],this.license=b[13],this.licenseUrl=b[14],this.preferredFamily=b[15],this.preferredSubfamily=b[17],this.compatibleFull=b[18],this.sampleText=b[19]},e}(),tU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Sh(e,$A),e.prototype.tag="maxp",e.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.numGlyphs=i.readUInt16(),this.maxPoints=i.readUInt16(),this.maxContours=i.readUInt16(),this.maxCompositePoints=i.readUInt16(),this.maxComponentContours=i.readUInt16(),this.maxZones=i.readUInt16(),this.maxTwilightPoints=i.readUInt16(),this.maxStorage=i.readUInt16(),this.maxFunctionDefs=i.readUInt16(),this.maxInstructionDefs=i.readUInt16(),this.maxStackElements=i.readUInt16(),this.maxSizeOfInstructions=i.readUInt16(),this.maxComponentElements=i.readUInt16(),this.maxComponentDepth=i.readUInt16()},e}(),iU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Sh(e,$A),e.prototype.tag="hmtx",e.prototype.parse=function(i){var n,o,u,A,a,g,b;for(i.pos=this.offset,this.metrics=[],n=0,g=this.file.hhea.numberOfMetrics;0<=g?n<g:n>g;n=0<=g?++n:--n)this.metrics.push({advance:i.readUInt16(),lsb:i.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var B,I;for(I=[],n=B=0;0<=u?B<u:B>u;n=0<=u?++B:--B)I.push(i.readInt16());return I}(),this.widths=(function(){var B,I,P,F;for(F=[],B=0,I=(P=this.metrics).length;B<I;B++)A=P[B],F.push(A.advance);return F}).call(this),o=this.widths[this.widths.length-1],b=[],n=a=0;0<=u?a<u:a>u;n=0<=u?++a:--a)b.push(this.widths.push(o));return b},e.prototype.forGlyph=function(i){return i in this.metrics?this.metrics[i]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[i-this.metrics.length]}},e}(),LS=[].slice,nU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Sh(e,$A),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(i){var n,o,u,A,a,g,b,B,I,P;return i in this.cache?this.cache[i]:(A=this.file.loca,n=this.file.contents,o=A.indexOf(i),(u=A.lengthOf(i))===0?this.cache[i]=null:(n.pos=this.offset+o,a=(g=new sf(n.read(u))).readShort(),B=g.readShort(),P=g.readShort(),b=g.readShort(),I=g.readShort(),this.cache[i]=a===-1?new sU(g,B,P,b,I):new rU(g,a,B,P,b,I),this.cache[i]))},e.prototype.encode=function(i,n,o){var u,A,a,g,b;for(a=[],A=[],g=0,b=n.length;g<b;g++)u=i[n[g]],A.push(a.length),u&&(a=a.concat(u.encode(o)));return A.push(a.length),{table:a,offsets:A}},e}(),rU=function(){function t(e,i,n,o,u,A){this.raw=e,this.numberOfContours=i,this.xMin=n,this.yMin=o,this.xMax=u,this.yMax=A,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),sU=function(){function t(e,i,n,o,u){var A,a;for(this.raw=e,this.xMin=i,this.yMin=n,this.xMax=o,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],A=this.raw;a=A.readShort(),this.glyphOffsets.push(A.pos),this.glyphIDs.push(A.readUInt16()),32&a;)A.pos+=1&a?4:2,128&a?A.pos+=8:64&a?A.pos+=4:8&a&&(A.pos+=2)}return t.prototype.encode=function(){var e,i,n;for(i=new sf(LS.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)i.pos=this.glyphOffsets[e];return i.data},t}(),aU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Sh(e,$A),e.prototype.tag="loca",e.prototype.parse=function(i){var n,o;return i.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var u,A;for(A=[],o=0,u=this.length;o<u;o+=2)A.push(2*i.readUInt16());return A}).call(this):(function(){var u,A;for(A=[],o=0,u=this.length;o<u;o+=4)A.push(i.readUInt32());return A}).call(this)},e.prototype.indexOf=function(i){return this.offsets[i]},e.prototype.lengthOf=function(i){return this.offsets[i+1]-this.offsets[i]},e.prototype.encode=function(i,n){for(var o=new Uint32Array(this.offsets.length),u=0,A=0,a=0;a<o.length;++a)if(o[a]=u,A<n.length&&n[A]==a){++A,o[a]=u;var g=this.offsets[a],b=this.offsets[a+1]-g;b>0&&(u+=b)}for(var B=new Array(4*o.length),I=0;I<o.length;++I)B[4*I+3]=255&o[I],B[4*I+2]=(65280&o[I])>>8,B[4*I+1]=(16711680&o[I])>>16,B[4*I]=(4278190080&o[I])>>24;return B},e}(),oU=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,i,n,o,u;for(i in o=this.font.cmap.tables[0].codeMap,e={},u=this.subset)n=u[i],e[i]=o[n];return e},t.prototype.glyphsFor=function(e){var i,n,o,u,A,a,g;for(o={},A=0,a=e.length;A<a;A++)o[u=e[A]]=this.font.glyf.glyphFor(u);for(u in i=[],o)(n=o[u])!=null&&n.compound&&i.push.apply(i,n.glyphIDs);if(i.length>0)for(u in g=this.glyphsFor(i))n=g[u],o[u]=n;return o},t.prototype.encode=function(e,i){var n,o,u,A,a,g,b,B,I,P,F,Q,R,H,j;for(o in n=IS.encode(this.generateCmap(),"unicode"),A=this.glyphsFor(e),F={0:0},j=n.charMap)F[(g=j[o]).old]=g.new;for(Q in P=n.maxGlyphID,A)Q in F||(F[Q]=P++);return B=function(V){var W,ne;for(W in ne={},V)ne[V[W]]=W;return ne}(F),I=Object.keys(B).sort(function(V,W){return V-W}),R=function(){var V,W,ne;for(ne=[],V=0,W=I.length;V<W;V++)a=I[V],ne.push(B[a]);return ne}(),u=this.font.glyf.encode(A,R,F),b=this.font.loca.encode(u.offsets,R),H={cmap:this.font.cmap.raw(),glyf:u.table,loca:b,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(H["OS/2"]=this.font.os2.raw()),this.font.directory.encode(H)},t}();Bn.API.PDFObject=function(){var t;function e(){}return t=function(i,n){return(Array(n+1).join("0")+i).slice(-n)},e.convert=function(i){var n,o,u,A;if(Array.isArray(i))return"["+function(){var a,g,b;for(b=[],a=0,g=i.length;a<g;a++)n=i[a],b.push(e.convert(n));return b}().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i?.isString)return"("+i+")";if(i instanceof Date)return"(D:"+t(i.getUTCFullYear(),4)+t(i.getUTCMonth(),2)+t(i.getUTCDate(),2)+t(i.getUTCHours(),2)+t(i.getUTCMinutes(),2)+t(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(o in u=["<<"],i)A=i[o],u.push("/"+o+" "+e.convert(A));return u.push(">>"),u.join(`
`)}return""+i},e}();const lU=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:R8,AcroFormAppearance:Yi,AcroFormButton:Ro,AcroFormCheckBox:Zg,AcroFormChoiceField:Gf,AcroFormComboBox:Wf,AcroFormEditBox:Wg,AcroFormListBox:Kf,AcroFormPasswordField:Xg,AcroFormPushButton:$g,AcroFormRadioButton:$f,AcroFormTextField:Jd,GState:m0,ShadingPattern:Vd,TilingPattern:Qf,default:Bn,jsPDF:Bn},Symbol.toStringTag,{value:"Module"}));var bv={exports:{}};const cU=Y3(lU);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var $5=bv.exports,Z5;function uU(){return Z5||(Z5=1,function(t,e){(function(n,o){t.exports=o(function(){try{return cU}catch{}}())})(typeof globalThis<"u"?globalThis:typeof $5<"u"?$5:typeof window<"u"?window:typeof self<"u"?self:X3,function(i){return function(){var n={172:function(a,g){var b=this&&this.__extends||function(){var P=function(F,Q){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,H){R.__proto__=H}||function(R,H){for(var j in H)Object.prototype.hasOwnProperty.call(H,j)&&(R[j]=H[j])},P(F,Q)};return function(F,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");P(F,Q);function R(){this.constructor=F}F.prototype=Q===null?Object.create(Q):(R.prototype=Q.prototype,new R)}}();Object.defineProperty(g,"__esModule",{value:!0}),g.CellHookData=g.HookData=void 0;var B=function(){function P(F,Q,R){this.table=Q,this.pageNumber=Q.pageNumber,this.pageCount=this.pageNumber,this.settings=Q.settings,this.cursor=R,this.doc=F.getDocument()}return P}();g.HookData=B;var I=function(P){b(F,P);function F(Q,R,H,j,V,W){var ne=P.call(this,Q,R,W)||this;return ne.cell=H,ne.row=j,ne.column=V,ne.section=j.section,ne}return F}(B);g.CellHookData=I},340:function(a,g,b){Object.defineProperty(g,"__esModule",{value:!0});var B=b(4),I=b(136),P=b(744),F=b(776),Q=b(664),R=b(972);function H(j){j.API.autoTable=function(){for(var V=[],W=0;W<arguments.length;W++)V[W]=arguments[W];var ne;V.length===1?ne=V[0]:(console.error("Use of deprecated autoTable initiation"),ne=V[2]||{},ne.columns=V[0],ne.body=V[1]);var te=(0,F.parseInput)(this,ne),de=(0,R.createTable)(this,te);return(0,Q.drawTable)(this,de),this},j.API.lastAutoTable=!1,j.API.previousAutoTable=!1,j.API.autoTable.previous=!1,j.API.autoTableText=function(V,W,ne,te){(0,I.default)(V,W,ne,te,this)},j.API.autoTableSetDefaults=function(V){return P.DocHandler.setDefaults(V,this),this},j.autoTableSetDefaults=function(V,W){P.DocHandler.setDefaults(V,W)},j.API.autoTableHtmlToJson=function(V,W){var ne;if(W===void 0&&(W=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var te=new P.DocHandler(this),de=(0,B.parseHtml)(te,V,window,W,!1),ee=de.head,re=de.body,xe=((ne=ee[0])===null||ne===void 0?void 0:ne.map(function(Be){return Be.content}))||[];return{columns:xe,rows:re,data:re}},j.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var V=this.lastAutoTable;return V&&V.finalY?V.finalY:0},j.API.autoTableAddPageContent=function(V){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),j.API.autoTable.globalDefaults||(j.API.autoTable.globalDefaults={}),j.API.autoTable.globalDefaults.addPageContent=V,this},j.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}g.default=H},136:function(a,g){Object.defineProperty(g,"__esModule",{value:!0});function b(B,I,P,F,Q){F=F||{};var R=1.15,H=Q.internal.scaleFactor,j=Q.internal.getFontSize()/H,V=Q.getLineHeightFactor?Q.getLineHeightFactor():R,W=j*V,ne=/\r\n|\r|\n/g,te="",de=1;if((F.valign==="middle"||F.valign==="bottom"||F.halign==="center"||F.halign==="right")&&(te=typeof B=="string"?B.split(ne):B,de=te.length||1),P+=j*(2-R),F.valign==="middle"?P-=de/2*W:F.valign==="bottom"&&(P-=de*W),F.halign==="center"||F.halign==="right"){var ee=j;if(F.halign==="center"&&(ee*=.5),te&&de>=1){for(var re=0;re<te.length;re++)Q.text(te[re],I-Q.getStringUnitWidth(te[re])*ee,P),P+=W;return Q}I-=Q.getStringUnitWidth(B)*ee}return F.halign==="justify"?Q.text(B,I,P,{maxWidth:F.maxWidth||100,align:"justify"}):Q.text(B,I,P),Q}g.default=b},420:function(a,g){Object.defineProperty(g,"__esModule",{value:!0}),g.getPageAvailableWidth=g.parseSpacing=g.getFillStyle=g.addTableBorder=g.getStringWidth=void 0;function b(Q,R,H){H.applyStyles(R,!0);var j=Array.isArray(Q)?Q:[Q],V=j.map(function(W){return H.getTextWidth(W)}).reduce(function(W,ne){return Math.max(W,ne)},0);return V}g.getStringWidth=b;function B(Q,R,H,j){var V=R.settings.tableLineWidth,W=R.settings.tableLineColor;Q.applyStyles({lineWidth:V,lineColor:W});var ne=I(V,!1);ne&&Q.rect(H.x,H.y,R.getWidth(Q.pageSize().width),j.y-H.y,ne)}g.addTableBorder=B;function I(Q,R){var H=Q>0,j=R||R===0;return H&&j?"DF":H?"S":j?"F":null}g.getFillStyle=I;function P(Q,R){var H,j,V,W;if(Q=Q||R,Array.isArray(Q)){if(Q.length>=4)return{top:Q[0],right:Q[1],bottom:Q[2],left:Q[3]};if(Q.length===3)return{top:Q[0],right:Q[1],bottom:Q[2],left:Q[1]};if(Q.length===2)return{top:Q[0],right:Q[1],bottom:Q[0],left:Q[1]};Q.length===1?Q=Q[0]:Q=R}return typeof Q=="object"?(typeof Q.vertical=="number"&&(Q.top=Q.vertical,Q.bottom=Q.vertical),typeof Q.horizontal=="number"&&(Q.right=Q.horizontal,Q.left=Q.horizontal),{left:(H=Q.left)!==null&&H!==void 0?H:R,top:(j=Q.top)!==null&&j!==void 0?j:R,right:(V=Q.right)!==null&&V!==void 0?V:R,bottom:(W=Q.bottom)!==null&&W!==void 0?W:R}):(typeof Q!="number"&&(Q=R),{top:Q,right:Q,bottom:Q,left:Q})}g.parseSpacing=P;function F(Q,R){var H=P(R.settings.margin,0);return Q.pageSize().width-(H.left+H.right)}g.getPageAvailableWidth=F},796:function(a,g){var b=this&&this.__extends||function(){var F=function(Q,R){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,j){H.__proto__=j}||function(H,j){for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&(H[V]=j[V])},F(Q,R)};return function(Q,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");F(Q,R);function H(){this.constructor=Q}Q.prototype=R===null?Object.create(R):(H.prototype=R.prototype,new H)}}();Object.defineProperty(g,"__esModule",{value:!0}),g.getTheme=g.defaultStyles=g.HtmlRowInput=void 0;var B=function(F){b(Q,F);function Q(R){var H=F.call(this)||this;return H._element=R,H}return Q}(Array);g.HtmlRowInput=B;function I(F){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/F,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}g.defaultStyles=I;function P(F){var Q={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return Q[F]}g.getTheme=P},903:function(a,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.parseCss=void 0;var B=b(420);function I(H,j,V,W,ne){var te={},de=1.3333333333333333,ee=F(j,function(ke){return ne.getComputedStyle(ke).backgroundColor});ee!=null&&(te.fillColor=ee);var re=F(j,function(ke){return ne.getComputedStyle(ke).color});re!=null&&(te.textColor=re);var xe=R(W,V);xe&&(te.cellPadding=xe);var Be="borderTopColor",se=de*V,ae=W.borderTopWidth;if(W.borderBottomWidth===ae&&W.borderRightWidth===ae&&W.borderLeftWidth===ae){var ce=(parseFloat(ae)||0)/se;ce&&(te.lineWidth=ce)}else te.lineWidth={top:(parseFloat(W.borderTopWidth)||0)/se,right:(parseFloat(W.borderRightWidth)||0)/se,bottom:(parseFloat(W.borderBottomWidth)||0)/se,left:(parseFloat(W.borderLeftWidth)||0)/se},te.lineWidth.top||(te.lineWidth.right?Be="borderRightColor":te.lineWidth.bottom?Be="borderBottomColor":te.lineWidth.left&&(Be="borderLeftColor"));var Ee=F(j,function(ke){return ne.getComputedStyle(ke)[Be]});Ee!=null&&(te.lineColor=Ee);var Ve=["left","right","center","justify"];Ve.indexOf(W.textAlign)!==-1&&(te.halign=W.textAlign),Ve=["middle","bottom","top"],Ve.indexOf(W.verticalAlign)!==-1&&(te.valign=W.verticalAlign);var ue=parseInt(W.fontSize||"");isNaN(ue)||(te.fontSize=ue/de);var fe=P(W);fe&&(te.fontStyle=fe);var Ue=(W.fontFamily||"").toLowerCase();return H.indexOf(Ue)!==-1&&(te.font=Ue),te}g.parseCss=I;function P(H){var j="";return(H.fontWeight==="bold"||H.fontWeight==="bolder"||parseInt(H.fontWeight)>=700)&&(j="bold"),(H.fontStyle==="italic"||H.fontStyle==="oblique")&&(j+="italic"),j}function F(H,j){var V=Q(H,j);if(!V)return null;var W=V.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!W||!Array.isArray(W))return null;var ne=[parseInt(W[1]),parseInt(W[2]),parseInt(W[3])],te=parseInt(W[4]);return te===0||isNaN(ne[0])||isNaN(ne[1])||isNaN(ne[2])?null:ne}function Q(H,j){var V=j(H);return V==="rgba(0, 0, 0, 0)"||V==="transparent"||V==="initial"||V==="inherit"?H.parentElement==null?null:Q(H.parentElement,j):V}function R(H,j){var V=[H.paddingTop,H.paddingRight,H.paddingBottom,H.paddingLeft],W=96/(72/j),ne=(parseInt(H.lineHeight)-parseInt(H.fontSize))/j/2,te=V.map(function(ee){return parseInt(ee||"0")/W}),de=(0,B.parseSpacing)(te,0);return ne>de.top&&(de.top=ne),ne>de.bottom&&(de.bottom=ne),de}},744:function(a,g){Object.defineProperty(g,"__esModule",{value:!0}),g.DocHandler=void 0;var b={},B=function(){function I(P){this.jsPDFDocument=P,this.userStyles={textColor:P.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:P.internal.getFontSize(),fontStyle:P.internal.getFont().fontStyle,font:P.internal.getFont().fontName,lineWidth:P.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:P.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return I.setDefaults=function(P,F){F===void 0&&(F=null),F?F.__autoTableDocumentDefaults=P:b=P},I.unifyColor=function(P){return Array.isArray(P)?P:typeof P=="number"?[P,P,P]:typeof P=="string"?[P]:null},I.prototype.applyStyles=function(P,F){var Q,R,H;F===void 0&&(F=!1),P.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(P.fontStyle);var j=this.jsPDFDocument.internal.getFont(),V=j.fontStyle,W=j.fontName;if(P.font&&(W=P.font),P.fontStyle){V=P.fontStyle;var ne=this.getFontList()[W];ne&&ne.indexOf(V)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(ne[0]),V=ne[0])}if(this.jsPDFDocument.setFont(W,V),P.fontSize&&this.jsPDFDocument.setFontSize(P.fontSize),!F){var te=I.unifyColor(P.fillColor);te&&(Q=this.jsPDFDocument).setFillColor.apply(Q,te),te=I.unifyColor(P.textColor),te&&(R=this.jsPDFDocument).setTextColor.apply(R,te),te=I.unifyColor(P.lineColor),te&&(H=this.jsPDFDocument).setDrawColor.apply(H,te),typeof P.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(P.lineWidth)}},I.prototype.splitTextToSize=function(P,F,Q){return this.jsPDFDocument.splitTextToSize(P,F,Q)},I.prototype.rect=function(P,F,Q,R,H){return this.jsPDFDocument.rect(P,F,Q,R,H)},I.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},I.prototype.getTextWidth=function(P){return this.jsPDFDocument.getTextWidth(P)},I.prototype.getDocument=function(){return this.jsPDFDocument},I.prototype.setPage=function(P){this.jsPDFDocument.setPage(P)},I.prototype.addPage=function(){return this.jsPDFDocument.addPage()},I.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},I.prototype.getGlobalOptions=function(){return b||{}},I.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},I.prototype.pageSize=function(){var P=this.jsPDFDocument.internal.pageSize;return P.width==null&&(P={width:P.getWidth(),height:P.getHeight()}),P},I.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},I.prototype.getLineHeightFactor=function(){var P=this.jsPDFDocument;return P.getLineHeightFactor?P.getLineHeightFactor():1.15},I.prototype.getLineHeight=function(P){return P/this.scaleFactor()*this.getLineHeightFactor()},I.prototype.pageNumber=function(){var P=this.jsPDFDocument.internal.getCurrentPageInfo();return P?P.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},I}();g.DocHandler=B},4:function(a,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.parseHtml=void 0;var B=b(903),I=b(796);function P(R,H,j,V,W){var ne,te;V===void 0&&(V=!1),W===void 0&&(W=!1);var de;typeof H=="string"?de=j.document.querySelector(H):de=H;var ee=Object.keys(R.getFontList()),re=R.scaleFactor(),xe=[],Be=[],se=[];if(!de)return console.error("Html table could not be found with input: ",H),{head:xe,body:Be,foot:se};for(var ae=0;ae<de.rows.length;ae++){var ce=de.rows[ae],Ee=(te=(ne=ce?.parentElement)===null||ne===void 0?void 0:ne.tagName)===null||te===void 0?void 0:te.toLowerCase(),Ve=F(ee,re,j,ce,V,W);Ve&&(Ee==="thead"?xe.push(Ve):Ee==="tfoot"?se.push(Ve):Be.push(Ve))}return{head:xe,body:Be,foot:se}}g.parseHtml=P;function F(R,H,j,V,W,ne){for(var te=new I.HtmlRowInput(V),de=0;de<V.cells.length;de++){var ee=V.cells[de],re=j.getComputedStyle(ee);if(W||re.display!=="none"){var xe=void 0;ne&&(xe=(0,B.parseCss)(R,ee,H,re,j)),te.push({rowSpan:ee.rowSpan,colSpan:ee.colSpan,styles:xe,_element:ee,content:Q(ee)})}}var Be=j.getComputedStyle(V);if(te.length>0&&(W||Be.display!=="none"))return te}function Q(R){var H=R.cloneNode(!0);return H.innerHTML=H.innerHTML.replace(/\n/g,"").replace(/ +/g," "),H.innerHTML=H.innerHTML.split(/<br.*?>/).map(function(j){return j.trim()}).join(`
`),H.innerText||H.textContent||""}},776:function(a,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.parseInput=void 0;var B=b(4),I=b(356),P=b(420),F=b(744),Q=b(792);function R(de,ee){var re=new F.DocHandler(de),xe=re.getDocumentOptions(),Be=re.getGlobalOptions();(0,Q.default)(re,Be,xe,ee);var se=(0,I.assign)({},Be,xe,ee),ae;typeof window<"u"&&(ae=window);var ce=H(Be,xe,ee),Ee=j(Be,xe,ee),Ve=V(re,se),ue=ne(re,se,ae);return{id:ee.tableId,content:ue,hooks:Ee,styles:ce,settings:Ve}}g.parseInput=R;function H(de,ee,re){for(var xe={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},Be=function(Ee){if(Ee==="columnStyles"){var Ve=de[Ee],ue=ee[Ee],fe=re[Ee];xe.columnStyles=(0,I.assign)({},Ve,ue,fe)}else{var Ue=[de,ee,re],ke=Ue.map(function(pe){return pe[Ee]||{}});xe[Ee]=(0,I.assign)({},ke[0],ke[1],ke[2])}},se=0,ae=Object.keys(xe);se<ae.length;se++){var ce=ae[se];Be(ce)}return xe}function j(de,ee,re){for(var xe=[de,ee,re],Be={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},se=0,ae=xe;se<ae.length;se++){var ce=ae[se];ce.didParseCell&&Be.didParseCell.push(ce.didParseCell),ce.willDrawCell&&Be.willDrawCell.push(ce.willDrawCell),ce.didDrawCell&&Be.didDrawCell.push(ce.didDrawCell),ce.willDrawPage&&Be.willDrawPage.push(ce.willDrawPage),ce.didDrawPage&&Be.didDrawPage.push(ce.didDrawPage)}return Be}function V(de,ee){var re,xe,Be,se,ae,ce,Ee,Ve,ue,fe,Ue,ke,pe=(0,P.parseSpacing)(ee.margin,40/de.scaleFactor()),Qe=(re=W(de,ee.startY))!==null&&re!==void 0?re:pe.top,J;ee.showFoot===!0?J="everyPage":ee.showFoot===!1?J="never":J=(xe=ee.showFoot)!==null&&xe!==void 0?xe:"everyPage";var me;ee.showHead===!0?me="everyPage":ee.showHead===!1?me="never":me=(Be=ee.showHead)!==null&&Be!==void 0?Be:"everyPage";var Fe=(se=ee.useCss)!==null&&se!==void 0?se:!1,ze=ee.theme||(Fe?"plain":"striped"),Ke=!!ee.horizontalPageBreak,_t=(ae=ee.horizontalPageBreakRepeat)!==null&&ae!==void 0?ae:null;return{includeHiddenHtml:(ce=ee.includeHiddenHtml)!==null&&ce!==void 0?ce:!1,useCss:Fe,theme:ze,startY:Qe,margin:pe,pageBreak:(Ee=ee.pageBreak)!==null&&Ee!==void 0?Ee:"auto",rowPageBreak:(Ve=ee.rowPageBreak)!==null&&Ve!==void 0?Ve:"auto",tableWidth:(ue=ee.tableWidth)!==null&&ue!==void 0?ue:"auto",showHead:me,showFoot:J,tableLineWidth:(fe=ee.tableLineWidth)!==null&&fe!==void 0?fe:0,tableLineColor:(Ue=ee.tableLineColor)!==null&&Ue!==void 0?Ue:200,horizontalPageBreak:Ke,horizontalPageBreakRepeat:_t,horizontalPageBreakBehaviour:(ke=ee.horizontalPageBreakBehaviour)!==null&&ke!==void 0?ke:"afterAllRows"}}function W(de,ee){var re=de.getLastAutoTable(),xe=de.scaleFactor(),Be=de.pageNumber(),se=!1;if(re&&re.startPageNumber){var ae=re.startPageNumber+re.pageNumber-1;se=ae===Be}return typeof ee=="number"?ee:(ee==null||ee===!1)&&se&&re?.finalY!=null?re.finalY+20/xe:null}function ne(de,ee,re){var xe=ee.head||[],Be=ee.body||[],se=ee.foot||[];if(ee.html){var ae=ee.includeHiddenHtml;if(re){var ce=(0,B.parseHtml)(de,ee.html,re,ae,ee.useCss)||{};xe=ce.head||xe,Be=ce.body||xe,se=ce.foot||xe}else console.error("Cannot parse html in non browser environment")}var Ee=ee.columns||te(xe,Be,se);return{columns:Ee,head:xe,body:Be,foot:se}}function te(de,ee,re){var xe=de[0]||ee[0]||re[0]||[],Be=[];return Object.keys(xe).filter(function(se){return se!=="_element"}).forEach(function(se){var ae=1,ce;Array.isArray(xe)?ce=xe[parseInt(se)]:ce=xe[se],typeof ce=="object"&&!Array.isArray(ce)&&(ae=ce?.colSpan||1);for(var Ee=0;Ee<ae;Ee++){var Ve=void 0;Array.isArray(xe)?Ve=Be.length:Ve=se+(Ee>0?"_".concat(Ee):"");var ue={dataKey:Ve};Be.push(ue)}}),Be}},792:function(a,g){Object.defineProperty(g,"__esModule",{value:!0});function b(I,P,F,Q){for(var R=function(W){W&&typeof W!="object"&&console.error("The options parameter should be of type object, is: "+typeof W),typeof W.extendWidth<"u"&&(W.tableWidth=W.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof W.margins<"u"&&(typeof W.margin>"u"&&(W.margin=W.margins),console.error("Use of deprecated option: margins, use margin instead.")),W.startY&&typeof W.startY!="number"&&(console.error("Invalid value for startY option",W.startY),delete W.startY),!W.didDrawPage&&(W.afterPageContent||W.beforePageContent||W.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),W.didDrawPage=function(se){I.applyStyles(I.userStyles),W.beforePageContent&&W.beforePageContent(se),I.applyStyles(I.userStyles),W.afterPageContent&&W.afterPageContent(se),I.applyStyles(I.userStyles),W.afterPageAdd&&se.pageNumber>1&&se.afterPageAdd(se),I.applyStyles(I.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(se){W[se]&&console.error('The "'.concat(se,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(se){var ae=se[0],ce=se[1];W[ce]&&(console.error("Use of deprecated option ".concat(ce,". Use ").concat(ae," instead")),W[ae]=W[ce])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(se){var ae=typeof se=="string"?se:se[0],ce=typeof se=="string"?se:se[1];typeof W[ae]<"u"&&(typeof W.styles[ce]>"u"&&(W.styles[ce]=W[ae]),console.error("Use of deprecated option: "+ae+", use the style "+ce+" instead."))});for(var ne=0,te=["styles","bodyStyles","headStyles","footStyles"];ne<te.length;ne++){var de=te[ne];B(W[de]||{})}for(var ee=W.columnStyles||{},re=0,xe=Object.keys(ee);re<xe.length;re++){var Be=xe[re];B(ee[Be]||{})}},H=0,j=[P,F,Q];H<j.length;H++){var V=j[H];R(V)}}g.default=b;function B(I){I.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),I.minCellHeight||(I.minCellHeight=I.rowHeight)):I.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),I.cellWidth||(I.cellWidth=I.columnWidth))}},260:function(a,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.Column=g.Cell=g.Row=g.Table=void 0;var B=b(796),I=b(172),P=b(420),F=function(){function j(V,W){this.pageNumber=1,this.pageCount=1,this.id=V.id,this.settings=V.settings,this.styles=V.styles,this.hooks=V.hooks,this.columns=W.columns,this.head=W.head,this.body=W.body,this.foot=W.foot}return j.prototype.getHeadHeight=function(V){return this.head.reduce(function(W,ne){return W+ne.getMaxCellHeight(V)},0)},j.prototype.getFootHeight=function(V){return this.foot.reduce(function(W,ne){return W+ne.getMaxCellHeight(V)},0)},j.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},j.prototype.callCellHooks=function(V,W,ne,te,de,ee){for(var re=0,xe=W;re<xe.length;re++){var Be=xe[re],se=new I.CellHookData(V,this,ne,te,de,ee),ae=Be(se)===!1;if(ne.text=Array.isArray(ne.text)?ne.text:[ne.text],ae)return!1}return!0},j.prototype.callEndPageHooks=function(V,W){V.applyStyles(V.userStyles);for(var ne=0,te=this.hooks.didDrawPage;ne<te.length;ne++){var de=te[ne];de(new I.HookData(V,this,W))}},j.prototype.callWillDrawPageHooks=function(V,W){for(var ne=0,te=this.hooks.willDrawPage;ne<te.length;ne++){var de=te[ne];de(new I.HookData(V,this,W))}},j.prototype.getWidth=function(V){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var W=this.columns.reduce(function(te,de){return te+de.wrappedWidth},0);return W}else{var ne=this.settings.margin;return V-ne.left-ne.right}},j}();g.Table=F;var Q=function(){function j(V,W,ne,te,de){de===void 0&&(de=!1),this.height=0,this.raw=V,V instanceof B.HtmlRowInput&&(this.raw=V._element,this.element=V._element),this.index=W,this.section=ne,this.cells=te,this.spansMultiplePages=de}return j.prototype.getMaxCellHeight=function(V){var W=this;return V.reduce(function(ne,te){var de;return Math.max(ne,((de=W.cells[te.index])===null||de===void 0?void 0:de.height)||0)},0)},j.prototype.hasRowSpan=function(V){var W=this;return V.filter(function(ne){var te=W.cells[ne.index];return te?te.rowSpan>1:!1}).length>0},j.prototype.canEntireRowFit=function(V,W){return this.getMaxCellHeight(W)<=V},j.prototype.getMinimumRowHeight=function(V,W){var ne=this;return V.reduce(function(te,de){var ee=ne.cells[de.index];if(!ee)return 0;var re=W.getLineHeight(ee.styles.fontSize),xe=ee.padding("vertical"),Be=xe+re;return Be>te?Be:te},0)},j}();g.Row=Q;var R=function(){function j(V,W,ne){var te,de;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=W,this.section=ne,this.raw=V;var ee=V;V!=null&&typeof V=="object"&&!Array.isArray(V)?(this.rowSpan=V.rowSpan||1,this.colSpan=V.colSpan||1,ee=(de=(te=V.content)!==null&&te!==void 0?te:V.title)!==null&&de!==void 0?de:V,V._element&&(this.raw=V._element)):(this.rowSpan=1,this.colSpan=1);var re=ee!=null?""+ee:"",xe=/\r\n|\r|\n/g;this.text=re.split(xe)}return j.prototype.getTextPos=function(){var V;if(this.styles.valign==="top")V=this.y+this.padding("top");else if(this.styles.valign==="bottom")V=this.y+this.height-this.padding("bottom");else{var W=this.height-this.padding("vertical");V=this.y+W/2+this.padding("top")}var ne;if(this.styles.halign==="right")ne=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var te=this.width-this.padding("horizontal");ne=this.x+te/2+this.padding("left")}else ne=this.x+this.padding("left");return{x:ne,y:V}},j.prototype.getContentHeight=function(V,W){W===void 0&&(W=1.15);var ne=Array.isArray(this.text)?this.text.length:1,te=this.styles.fontSize/V*W,de=ne*te+this.padding("vertical");return Math.max(de,this.styles.minCellHeight)},j.prototype.padding=function(V){var W=(0,P.parseSpacing)(this.styles.cellPadding,0);return V==="vertical"?W.top+W.bottom:V==="horizontal"?W.left+W.right:W[V]},j}();g.Cell=R;var H=function(){function j(V,W,ne){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=V,this.raw=W,this.index=ne}return j.prototype.getMaxCustomCellWidth=function(V){for(var W=0,ne=0,te=V.allRows();ne<te.length;ne++){var de=te[ne],ee=de.cells[this.index];ee&&typeof ee.styles.cellWidth=="number"&&(W=Math.max(W,ee.styles.cellWidth))}return W},j}();g.Column=H},356:function(a,g){Object.defineProperty(g,"__esModule",{value:!0}),g.assign=void 0;function b(B,I,P,F,Q){if(B==null)throw new TypeError("Cannot convert undefined or null to object");for(var R=Object(B),H=1;H<arguments.length;H++){var j=arguments[H];if(j!=null)for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&(R[V]=j[V])}return R}g.assign=b},972:function(a,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.createTable=void 0;var B=b(744),I=b(260),P=b(324),F=b(796),Q=b(356);function R(de,ee){var re=new B.DocHandler(de),xe=H(ee,re.scaleFactor()),Be=new I.Table(ee,xe);return(0,P.calculateWidths)(re,Be),re.applyStyles(re.userStyles),Be}g.createTable=R;function H(de,ee){var re=de.content,xe=ne(re.columns);if(re.head.length===0){var Be=V(xe,"head");Be&&re.head.push(Be)}if(re.foot.length===0){var Be=V(xe,"foot");Be&&re.foot.push(Be)}var se=de.settings.theme,ae=de.styles;return{columns:xe,head:j("head",re.head,xe,ae,se,ee),body:j("body",re.body,xe,ae,se,ee),foot:j("foot",re.foot,xe,ae,se,ee)}}function j(de,ee,re,xe,Be,se){var ae={},ce=ee.map(function(Ee,Ve){for(var ue=0,fe={},Ue=0,ke=0,pe=0,Qe=re;pe<Qe.length;pe++){var J=Qe[pe];if(ae[J.index]==null||ae[J.index].left===0)if(ke===0){var me=void 0;Array.isArray(Ee)?me=Ee[J.index-Ue-ue]:me=Ee[J.dataKey];var Fe={};typeof me=="object"&&!Array.isArray(me)&&(Fe=me?.styles||{});var ze=te(de,J,Ve,Be,xe,se,Fe),Ke=new I.Cell(me,ze,de);fe[J.dataKey]=Ke,fe[J.index]=Ke,ke=Ke.colSpan-1,ae[J.index]={left:Ke.rowSpan-1,times:ke}}else ke--,Ue++;else ae[J.index].left--,ke=ae[J.index].times,ue++}return new I.Row(Ee,Ve,de,fe)});return ce}function V(de,ee){var re={};return de.forEach(function(xe){if(xe.raw!=null){var Be=W(ee,xe.raw);Be!=null&&(re[xe.dataKey]=Be)}}),Object.keys(re).length>0?re:null}function W(de,ee){if(de==="head"){if(typeof ee=="object")return ee.header||ee.title||null;if(typeof ee=="string"||typeof ee=="number")return ee}else if(de==="foot"&&typeof ee=="object")return ee.footer;return null}function ne(de){return de.map(function(ee,re){var xe,Be,se;return typeof ee=="object"?se=(Be=(xe=ee.dataKey)!==null&&xe!==void 0?xe:ee.key)!==null&&Be!==void 0?Be:re:se=re,new I.Column(se,ee,re)})}function te(de,ee,re,xe,Be,se,ae){var ce=(0,F.getTheme)(xe),Ee;de==="head"?Ee=Be.headStyles:de==="body"?Ee=Be.bodyStyles:de==="foot"&&(Ee=Be.footStyles);var Ve=(0,Q.assign)({},ce.table,ce[de],Be.styles,Ee),ue=Be.columnStyles[ee.dataKey]||Be.columnStyles[ee.index]||{},fe=de==="body"?ue:{},Ue=de==="body"&&re%2===0?(0,Q.assign)({},ce.alternateRow,Be.alternateRowStyles):{},ke=(0,F.defaultStyles)(se),pe=(0,Q.assign)({},ke,Ve,Ue,fe);return(0,Q.assign)(pe,ae)}},664:function(a,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.addPage=g.drawTable=void 0;var B=b(420),I=b(260),P=b(744),F=b(356),Q=b(136),R=b(224);function H(ue,fe){var Ue=fe.settings,ke=Ue.startY,pe=Ue.margin,Qe={x:pe.left,y:ke},J=fe.getHeadHeight(fe.columns)+fe.getFootHeight(fe.columns),me=ke+pe.bottom+J;if(Ue.pageBreak==="avoid"){var Fe=fe.body,ze=Fe.reduce(function(gt,Et){return gt+Et.height},0);me+=ze}var Ke=new P.DocHandler(ue);(Ue.pageBreak==="always"||Ue.startY!=null&&me>Ke.pageSize().height)&&(Ve(Ke),Qe.y=pe.top),fe.callWillDrawPageHooks(Ke,Qe);var _t=(0,F.assign)({},Qe);fe.startPageNumber=Ke.pageNumber(),Ue.horizontalPageBreak?j(Ke,fe,_t,Qe):(Ke.applyStyles(Ke.userStyles),(Ue.showHead==="firstPage"||Ue.showHead==="everyPage")&&fe.head.forEach(function(gt){return Be(Ke,fe,gt,Qe,fe.columns)}),Ke.applyStyles(Ke.userStyles),fe.body.forEach(function(gt,Et){var hi=Et===fe.body.length-1;xe(Ke,fe,gt,hi,_t,Qe,fe.columns)}),Ke.applyStyles(Ke.userStyles),(Ue.showFoot==="lastPage"||Ue.showFoot==="everyPage")&&fe.foot.forEach(function(gt){return Be(Ke,fe,gt,Qe,fe.columns)})),(0,B.addTableBorder)(Ke,fe,_t,Qe),fe.callEndPageHooks(Ke,Qe),fe.finalY=Qe.y,ue.lastAutoTable=fe,ue.previousAutoTable=fe,ue.autoTable&&(ue.autoTable.previous=fe),Ke.applyStyles(Ke.userStyles)}g.drawTable=H;function j(ue,fe,Ue,ke){var pe=(0,R.calculateAllColumnsCanFitInPage)(ue,fe),Qe=fe.settings;if(Qe.horizontalPageBreakBehaviour==="afterAllRows")pe.forEach(function(ze,Ke){ue.applyStyles(ue.userStyles),Ke>0?Ee(ue,fe,Ue,ke,ze.columns,!0):V(ue,fe,ke,ze.columns),W(ue,fe,Ue,ke,ze.columns),te(ue,fe,ke,ze.columns)});else for(var J=-1,me=pe[0],Fe=function(){var ze=J;if(me){ue.applyStyles(ue.userStyles);var Ke=me.columns;J>=0?Ee(ue,fe,Ue,ke,Ke,!0):V(ue,fe,ke,Ke),ze=ne(ue,fe,J+1,ke,Ke),te(ue,fe,ke,Ke)}var _t=ze-J;pe.slice(1).forEach(function(gt){ue.applyStyles(ue.userStyles),Ee(ue,fe,Ue,ke,gt.columns,!0),ne(ue,fe,J+1,ke,gt.columns,_t),te(ue,fe,ke,gt.columns)}),J=ze};J<fe.body.length-1;)Fe()}function V(ue,fe,Ue,ke){var pe=fe.settings;ue.applyStyles(ue.userStyles),(pe.showHead==="firstPage"||pe.showHead==="everyPage")&&fe.head.forEach(function(Qe){return Be(ue,fe,Qe,Ue,ke)})}function W(ue,fe,Ue,ke,pe){ue.applyStyles(ue.userStyles),fe.body.forEach(function(Qe,J){var me=J===fe.body.length-1;xe(ue,fe,Qe,me,Ue,ke,pe)})}function ne(ue,fe,Ue,ke,pe,Qe){ue.applyStyles(ue.userStyles),Qe=Qe??fe.body.length;var J=Math.min(Ue+Qe,fe.body.length),me=-1;return fe.body.slice(Ue,J).forEach(function(Fe,ze){var Ke=Ue+ze===fe.body.length-1,_t=ce(ue,fe,Ke,ke);Fe.canEntireRowFit(_t,pe)&&(Be(ue,fe,Fe,ke,pe),me=Ue+ze)}),me}function te(ue,fe,Ue,ke){var pe=fe.settings;ue.applyStyles(ue.userStyles),(pe.showFoot==="lastPage"||pe.showFoot==="everyPage")&&fe.foot.forEach(function(Qe){return Be(ue,fe,Qe,Ue,ke)})}function de(ue,fe,Ue){var ke=Ue.getLineHeight(ue.styles.fontSize),pe=ue.padding("vertical"),Qe=Math.floor((fe-pe)/ke);return Math.max(0,Qe)}function ee(ue,fe,Ue,ke){var pe={};ue.spansMultiplePages=!0,ue.height=0;for(var Qe=0,J=0,me=Ue.columns;J<me.length;J++){var Fe=me[J],ze=ue.cells[Fe.index];if(ze){Array.isArray(ze.text)||(ze.text=[ze.text]);var Ke=new I.Cell(ze.raw,ze.styles,ze.section);Ke=(0,F.assign)(Ke,ze),Ke.text=[];var _t=de(ze,fe,ke);ze.text.length>_t&&(Ke.text=ze.text.splice(_t,ze.text.length));var gt=ke.scaleFactor(),Et=ke.getLineHeightFactor();ze.contentHeight=ze.getContentHeight(gt,Et),ze.contentHeight>=fe&&(ze.contentHeight=fe,Ke.styles.minCellHeight-=fe),ze.contentHeight>ue.height&&(ue.height=ze.contentHeight),Ke.contentHeight=Ke.getContentHeight(gt,Et),Ke.contentHeight>Qe&&(Qe=Ke.contentHeight),pe[Fe.index]=Ke}}var hi=new I.Row(ue.raw,-1,ue.section,pe,!0);hi.height=Qe;for(var Vt=0,Yt=Ue.columns;Vt<Yt.length;Vt++){var Fe=Yt[Vt],Ke=hi.cells[Fe.index];Ke&&(Ke.height=hi.height);var ze=ue.cells[Fe.index];ze&&(ze.height=ue.height)}return hi}function re(ue,fe,Ue,ke){var pe=ue.pageSize().height,Qe=ke.settings.margin,J=Qe.top+Qe.bottom,me=pe-J;fe.section==="body"&&(me-=ke.getHeadHeight(ke.columns)+ke.getFootHeight(ke.columns));var Fe=fe.getMinimumRowHeight(ke.columns,ue),ze=Fe<Ue;if(Fe>me)return console.error("Will not be able to print row ".concat(fe.index," correctly since it's minimum height is larger than page height")),!0;if(!ze)return!1;var Ke=fe.hasRowSpan(ke.columns),_t=fe.getMaxCellHeight(ke.columns)>me;return _t?(Ke&&console.error("The content of row ".concat(fe.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(Ke||ke.settings.rowPageBreak==="avoid")}function xe(ue,fe,Ue,ke,pe,Qe,J){var me=ce(ue,fe,ke,Qe);if(Ue.canEntireRowFit(me,J))Be(ue,fe,Ue,Qe,J);else if(re(ue,Ue,me,fe)){var Fe=ee(Ue,me,fe,ue);Be(ue,fe,Ue,Qe,J),Ee(ue,fe,pe,Qe,J),xe(ue,fe,Fe,ke,pe,Qe,J)}else Ee(ue,fe,pe,Qe,J),xe(ue,fe,Ue,ke,pe,Qe,J)}function Be(ue,fe,Ue,ke,pe){ke.x=fe.settings.margin.left;for(var Qe=0,J=pe;Qe<J.length;Qe++){var me=J[Qe],Fe=Ue.cells[me.index];if(!Fe){ke.x+=me.width;continue}ue.applyStyles(Fe.styles),Fe.x=ke.x,Fe.y=ke.y;var ze=fe.callCellHooks(ue,fe.hooks.willDrawCell,Fe,Ue,me,ke);if(ze===!1){ke.x+=me.width;continue}se(ue,Fe,ke);var Ke=Fe.getTextPos();(0,Q.default)(Fe.text,Ke.x,Ke.y,{halign:Fe.styles.halign,valign:Fe.styles.valign,maxWidth:Math.ceil(Fe.width-Fe.padding("left")-Fe.padding("right"))},ue.getDocument()),fe.callCellHooks(ue,fe.hooks.didDrawCell,Fe,Ue,me,ke),ke.x+=me.width}ke.y+=Ue.height}function se(ue,fe,Ue){var ke=fe.styles;if(ue.getDocument().setFillColor(ue.getDocument().getFillColor()),typeof ke.lineWidth=="number"){var pe=(0,B.getFillStyle)(ke.lineWidth,ke.fillColor);pe&&ue.rect(fe.x,Ue.y,fe.width,fe.height,pe)}else typeof ke.lineWidth=="object"&&(ke.fillColor&&ue.rect(fe.x,Ue.y,fe.width,fe.height,"F"),ae(ue,fe,Ue,ke.lineWidth))}function ae(ue,fe,Ue,ke){var pe,Qe,J,me;ke.top&&(pe=Ue.x,Qe=Ue.y,J=Ue.x+fe.width,me=Ue.y,ke.right&&(J+=.5*ke.right),ke.left&&(pe-=.5*ke.left),Fe(ke.top,pe,Qe,J,me)),ke.bottom&&(pe=Ue.x,Qe=Ue.y+fe.height,J=Ue.x+fe.width,me=Ue.y+fe.height,ke.right&&(J+=.5*ke.right),ke.left&&(pe-=.5*ke.left),Fe(ke.bottom,pe,Qe,J,me)),ke.left&&(pe=Ue.x,Qe=Ue.y,J=Ue.x,me=Ue.y+fe.height,ke.top&&(Qe-=.5*ke.top),ke.bottom&&(me+=.5*ke.bottom),Fe(ke.left,pe,Qe,J,me)),ke.right&&(pe=Ue.x+fe.width,Qe=Ue.y,J=Ue.x+fe.width,me=Ue.y+fe.height,ke.top&&(Qe-=.5*ke.top),ke.bottom&&(me+=.5*ke.bottom),Fe(ke.right,pe,Qe,J,me));function Fe(ze,Ke,_t,gt,Et){ue.getDocument().setLineWidth(ze),ue.getDocument().line(Ke,_t,gt,Et,"S")}}function ce(ue,fe,Ue,ke){var pe=fe.settings.margin.bottom,Qe=fe.settings.showFoot;return(Qe==="everyPage"||Qe==="lastPage"&&Ue)&&(pe+=fe.getFootHeight(fe.columns)),ue.pageSize().height-ke.y-pe}function Ee(ue,fe,Ue,ke,pe,Qe){pe===void 0&&(pe=[]),Qe===void 0&&(Qe=!1),ue.applyStyles(ue.userStyles),fe.settings.showFoot==="everyPage"&&!Qe&&fe.foot.forEach(function(me){return Be(ue,fe,me,ke,pe)}),fe.callEndPageHooks(ue,ke);var J=fe.settings.margin;(0,B.addTableBorder)(ue,fe,Ue,ke),Ve(ue),fe.pageNumber++,fe.pageCount++,ke.x=J.left,ke.y=J.top,Ue.y=J.top,fe.callWillDrawPageHooks(ue,ke),fe.settings.showHead==="everyPage"&&(fe.head.forEach(function(me){return Be(ue,fe,me,ke,pe)}),ue.applyStyles(ue.userStyles))}g.addPage=Ee;function Ve(ue){var fe=ue.pageNumber();ue.setPage(fe+1);var Ue=ue.pageNumber();return Ue===fe?(ue.addPage(),!0):!1}},224:function(a,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.calculateAllColumnsCanFitInPage=void 0;var B=b(420);function I(F,Q,R){var H;R===void 0&&(R={});var j=(0,B.getPageAvailableWidth)(F,Q),V=new Map,W=[],ne=[],te=[];Q.settings.horizontalPageBreakRepeat,Array.isArray(Q.settings.horizontalPageBreakRepeat)?te=Q.settings.horizontalPageBreakRepeat:(typeof Q.settings.horizontalPageBreakRepeat=="string"||typeof Q.settings.horizontalPageBreakRepeat=="number")&&(te=[Q.settings.horizontalPageBreakRepeat]),te.forEach(function(xe){var Be=Q.columns.find(function(se){return se.dataKey===xe||se.index===xe});Be&&!V.has(Be.index)&&(V.set(Be.index,!0),W.push(Be.index),ne.push(Q.columns[Be.index]),j-=Be.wrappedWidth)});for(var de=!0,ee=(H=R?.start)!==null&&H!==void 0?H:0;ee<Q.columns.length;){if(V.has(ee)){ee++;continue}var re=Q.columns[ee].wrappedWidth;if(de||j>=re)de=!1,W.push(ee),ne.push(Q.columns[ee]),j-=re;else break;ee++}return{colIndexes:W,columns:ne,lastIndex:ee-1}}function P(F,Q){for(var R=[],H=0;H<Q.columns.length;H++){var j=I(F,Q,{start:H});j.columns.length&&(R.push(j),H=j.lastIndex)}return R}g.calculateAllColumnsCanFitInPage=P},324:function(a,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.ellipsize=g.resizeColumns=g.calculateWidths=void 0;var B=b(420);function I(W,ne){P(W,ne);var te=[],de=0;ne.columns.forEach(function(re){var xe=re.getMaxCustomCellWidth(ne);xe?re.width=xe:(re.width=re.wrappedWidth,te.push(re)),de+=re.width});var ee=ne.getWidth(W.pageSize().width)-de;ee&&(ee=F(te,ee,function(re){return Math.max(re.minReadableWidth,re.minWidth)})),ee&&(ee=F(te,ee,function(re){return re.minWidth})),ee=Math.abs(ee),!ne.settings.horizontalPageBreak&&ee>.1/W.scaleFactor()&&(ee=ee<1?ee:Math.round(ee),console.warn("Of the table content, ".concat(ee," units width could not fit page"))),R(ne),H(ne,W),Q(ne)}g.calculateWidths=I;function P(W,ne){var te=W.scaleFactor(),de=ne.settings.horizontalPageBreak,ee=(0,B.getPageAvailableWidth)(W,ne);ne.allRows().forEach(function(re){for(var xe=0,Be=ne.columns;xe<Be.length;xe++){var se=Be[xe],ae=re.cells[se.index];if(ae){var ce=ne.hooks.didParseCell;ne.callCellHooks(W,ce,ae,re,se,null);var Ee=ae.padding("horizontal");ae.contentWidth=(0,B.getStringWidth)(ae.text,ae.styles,W)+Ee;var Ve=(0,B.getStringWidth)(ae.text.join(" ").split(/[^\S\u00A0]+/),ae.styles,W);if(ae.minReadableWidth=Ve+ae.padding("horizontal"),typeof ae.styles.cellWidth=="number")ae.minWidth=ae.styles.cellWidth,ae.wrappedWidth=ae.styles.cellWidth;else if(ae.styles.cellWidth==="wrap"||de===!0)ae.contentWidth>ee?(ae.minWidth=ee,ae.wrappedWidth=ee):(ae.minWidth=ae.contentWidth,ae.wrappedWidth=ae.contentWidth);else{var ue=10/te;ae.minWidth=ae.styles.minCellWidth||ue,ae.wrappedWidth=ae.contentWidth,ae.minWidth>ae.wrappedWidth&&(ae.wrappedWidth=ae.minWidth)}}}}),ne.allRows().forEach(function(re){for(var xe=0,Be=ne.columns;xe<Be.length;xe++){var se=Be[xe],ae=re.cells[se.index];if(ae&&ae.colSpan===1)se.wrappedWidth=Math.max(se.wrappedWidth,ae.wrappedWidth),se.minWidth=Math.max(se.minWidth,ae.minWidth),se.minReadableWidth=Math.max(se.minReadableWidth,ae.minReadableWidth);else{var ce=ne.styles.columnStyles[se.dataKey]||ne.styles.columnStyles[se.index]||{},Ee=ce.cellWidth||ce.minCellWidth;Ee&&typeof Ee=="number"&&(se.minWidth=Ee,se.wrappedWidth=Ee)}ae&&(ae.colSpan>1&&!se.minWidth&&(se.minWidth=ae.minWidth),ae.colSpan>1&&!se.wrappedWidth&&(se.wrappedWidth=ae.minWidth))}})}function F(W,ne,te){for(var de=ne,ee=W.reduce(function(ue,fe){return ue+fe.wrappedWidth},0),re=0;re<W.length;re++){var xe=W[re],Be=xe.wrappedWidth/ee,se=de*Be,ae=xe.width+se,ce=te(xe),Ee=ae<ce?ce:ae;ne-=Ee-xe.width,xe.width=Ee}if(ne=Math.round(ne*1e10)/1e10,ne){var Ve=W.filter(function(ue){return ne<0?ue.width>te(ue):!0});Ve.length&&(ne=F(Ve,ne,te))}return ne}g.resizeColumns=F;function Q(W){for(var ne={},te=1,de=W.allRows(),ee=0;ee<de.length;ee++)for(var re=de[ee],xe=0,Be=W.columns;xe<Be.length;xe++){var se=Be[xe],ae=ne[se.index];if(te>1)te--,delete re.cells[se.index];else if(ae)ae.cell.height+=re.height,te=ae.cell.colSpan,delete re.cells[se.index],ae.left--,ae.left<=1&&delete ne[se.index];else{var ce=re.cells[se.index];if(!ce)continue;if(ce.height=re.height,ce.rowSpan>1){var Ee=de.length-ee,Ve=ce.rowSpan>Ee?Ee:ce.rowSpan;ne[se.index]={cell:ce,left:Ve,row:re}}}}}function R(W){for(var ne=W.allRows(),te=0;te<ne.length;te++)for(var de=ne[te],ee=null,re=0,xe=0,Be=0;Be<W.columns.length;Be++){var se=W.columns[Be];if(xe-=1,xe>1&&W.columns[Be+1])re+=se.width,delete de.cells[se.index];else if(ee){var ae=ee;delete de.cells[se.index],ee=null,ae.width=se.width+re}else{var ae=de.cells[se.index];if(!ae)continue;if(xe=ae.colSpan,re=0,ae.colSpan>1){ee=ae,re+=se.width;continue}ae.width=se.width+re}}}function H(W,ne){for(var te={count:0,height:0},de=0,ee=W.allRows();de<ee.length;de++){for(var re=ee[de],xe=0,Be=W.columns;xe<Be.length;xe++){var se=Be[xe],ae=re.cells[se.index];if(ae){ne.applyStyles(ae.styles,!0);var ce=ae.width-ae.padding("horizontal");if(ae.styles.overflow==="linebreak")ae.text=ne.splitTextToSize(ae.text,ce+1/ne.scaleFactor(),{fontSize:ae.styles.fontSize});else if(ae.styles.overflow==="ellipsize")ae.text=j(ae.text,ce,ae.styles,ne,"...");else if(ae.styles.overflow==="hidden")ae.text=j(ae.text,ce,ae.styles,ne,"");else if(typeof ae.styles.overflow=="function"){var Ee=ae.styles.overflow(ae.text,ce);typeof Ee=="string"?ae.text=[Ee]:ae.text=Ee}ae.contentHeight=ae.getContentHeight(ne.scaleFactor(),ne.getLineHeightFactor());var Ve=ae.contentHeight/ae.rowSpan;ae.rowSpan>1&&te.count*te.height<Ve*ae.rowSpan?te={height:Ve,count:ae.rowSpan}:te&&te.count>0&&te.height>Ve&&(Ve=te.height),Ve>re.height&&(re.height=Ve)}}te.count--}}function j(W,ne,te,de,ee){return W.map(function(re){return V(re,ne,te,de,ee)})}g.ellipsize=j;function V(W,ne,te,de,ee){var re=1e4*de.scaleFactor();if(ne=Math.ceil(ne*re)/re,ne>=(0,B.getStringWidth)(W,te,de))return W;for(;ne<(0,B.getStringWidth)(W+ee,te,de)&&!(W.length<=1);)W=W.substring(0,W.length-1);return W.trim()+ee}},964:function(a){if(typeof i>"u"){var g=new Error("Cannot find module 'undefined'");throw g.code="MODULE_NOT_FOUND",g}a.exports=i}},o={};function u(a){var g=o[a];if(g!==void 0)return g.exports;var b=o[a]={exports:{}};return n[a].call(b.exports,b,b.exports,u),b.exports}var A={};return function(){var a=A;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var g=u(340),b=u(776),B=u(664),I=u(972),P=u(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return P.Table}});var F=u(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return F.CellHookData}});var Q=u(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return Q.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return Q.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return Q.Row}});function R(ne){(0,g.default)(ne)}a.applyPlugin=R;function H(ne,te){var de=(0,b.parseInput)(ne,te),ee=(0,I.createTable)(ne,de);(0,B.drawTable)(ne,ee)}function j(ne,te){var de=(0,b.parseInput)(ne,te);return(0,I.createTable)(ne,de)}a.__createTable=j;function V(ne,te){(0,B.drawTable)(ne,te)}a.__drawTable=V;try{var W=u(964);W.jsPDF&&(W=W.jsPDF),R(W)}catch{}a.default=H}(),A}()})}(bv)),bv.exports}var AU=uU();const Cg=Xv(AU);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kx=function(t,e){return Kx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])},Kx(t,e)};function ZA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Kx(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Wx=function(){return Wx=Object.assign||function(e){for(var i,n=1,o=arguments.length;n<o;n++){i=arguments[n];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(e[u]=i[u])}return e},Wx.apply(this,arguments)};function Oc(t,e,i,n){function o(u){return u instanceof i?u:new i(function(A){A(u)})}return new(i||(i=Promise))(function(u,A){function a(B){try{b(n.next(B))}catch(I){A(I)}}function g(B){try{b(n.throw(B))}catch(I){A(I)}}function b(B){B.done?u(B.value):o(B.value).then(a,g)}b((n=n.apply(t,[])).next())})}function hc(t,e){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},n,o,u,A;return A={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function a(b){return function(B){return g([b,B])}}function g(b){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(u=b[0]&2?o.return:b[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,b[1])).done)return u;switch(o=0,u&&(b=[b[0]&2,u.value]),b[0]){case 0:case 1:u=b;break;case 4:return i.label++,{value:b[1],done:!1};case 5:i.label++,o=b[1],b=[0];continue;case 7:b=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(b[0]===6||b[0]===2)){i=0;continue}if(b[0]===3&&(!u||b[1]>u[0]&&b[1]<u[3])){i.label=b[1];break}if(b[0]===6&&i.label<u[1]){i.label=u[1],u=b;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(b);break}u[2]&&i.ops.pop(),i.trys.pop();continue}b=e.call(t,i)}catch(B){b=[6,B],o=0}finally{n=u=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}}function Qy(t,e,i){if(arguments.length===2)for(var n=0,o=e.length,u;n<o;n++)(u||!(n in e))&&(u||(u=Array.prototype.slice.call(e,0,n)),u[n]=e[n]);return t.concat(u||e)}var cd=function(){function t(e,i,n,o){this.left=e,this.top=i,this.width=n,this.height=o}return t.prototype.add=function(e,i,n,o){return new t(this.left+e,this.top+i,this.width+n,this.height+o)},t.fromClientRect=function(e,i){return new t(i.left+e.windowBounds.left,i.top+e.windowBounds.top,i.width,i.height)},t.fromDOMRectList=function(e,i){var n=Array.from(i).find(function(o){return o.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),b1=function(t,e){return cd.fromClientRect(t,e.getBoundingClientRect())},hU=function(t){var e=t.body,i=t.documentElement;if(!e||!i)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.offsetWidth,i.offsetWidth),Math.max(e.clientWidth,i.clientWidth)),o=Math.max(Math.max(e.scrollHeight,i.scrollHeight),Math.max(e.offsetHeight,i.offsetHeight),Math.max(e.clientHeight,i.clientHeight));return new cd(0,0,n,o)},w1=function(t){for(var e=[],i=0,n=t.length;i<n;){var o=t.charCodeAt(i++);if(o>=55296&&o<=56319&&i<n){var u=t.charCodeAt(i++);(u&64512)===56320?e.push(((o&1023)<<10)+(u&1023)+65536):(e.push(o),i--)}else e.push(o)}return e},Ga=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var n=[],o=-1,u="";++o<i;){var A=t[o];A<=65535?n.push(A):(A-=65536,n.push((A>>10)+55296,A%1024+56320)),(o+1===i||n.length>16384)&&(u+=String.fromCharCode.apply(String,n),n.length=0)}return u},X5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dU=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zy=0;zy<X5.length;zy++)dU[X5.charCodeAt(zy)]=zy;var Y5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hy=0;Hy<Y5.length;Hy++)kg[Y5.charCodeAt(Hy)]=Hy;var fU=function(t){var e=t.length*.75,i=t.length,n,o=0,u,A,a,g;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var b=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),B=Array.isArray(b)?b:new Uint8Array(b);for(n=0;n<i;n+=4)u=kg[t.charCodeAt(n)],A=kg[t.charCodeAt(n+1)],a=kg[t.charCodeAt(n+2)],g=kg[t.charCodeAt(n+3)],B[o++]=u<<2|A>>4,B[o++]=(A&15)<<4|a>>2,B[o++]=(a&3)<<6|g&63;return b},pU=function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(t[n+1]<<8|t[n]);return i},mU=function(t){for(var e=t.length,i=[],n=0;n<e;n+=4)i.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return i},Zf=5,o2=11,j_=2,gU=o2-Zf,PS=65536>>Zf,yU=1<<Zf,U_=yU-1,vU=1024>>Zf,_U=PS+vU,xU=_U,bU=32,wU=xU+bU,BU=65536>>o2,CU=1<<gU,SU=CU-1,J5=function(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))},EU=function(t,e,i){return t.slice?t.slice(e,i):new Uint32Array(Array.prototype.slice.call(t,e,i))},TU=function(t,e){var i=fU(t),n=Array.isArray(i)?mU(i):new Uint32Array(i),o=Array.isArray(i)?pU(i):new Uint16Array(i),u=24,A=J5(o,u/2,n[4]/2),a=n[5]===2?J5(o,(u+n[4])/2):EU(n,Math.ceil((u+n[4])/4));return new FU(n[0],n[1],n[2],n[3],A,a)},FU=function(){function t(e,i,n,o,u,A){this.initialValue=e,this.errorValue=i,this.highStart=n,this.highValueIndex=o,this.index=u,this.data=A}return t.prototype.get=function(e){var i;if(e>=0){if(e<55296||e>56319&&e<=65535)return i=this.index[e>>Zf],i=(i<<j_)+(e&U_),this.data[i];if(e<=65535)return i=this.index[PS+(e-55296>>Zf)],i=(i<<j_)+(e&U_),this.data[i];if(e<this.highStart)return i=wU-BU+(e>>o2),i=this.index[i],i+=e>>Zf&SU,i=this.index[i],i=(i<<j_)+(e&U_),this.data[i];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),eB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",NU=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vy=0;Vy<eB.length;Vy++)NU[eB.charCodeAt(Vy)]=Vy;var MU="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",tB=50,IU=1,kS=2,jS=3,LU=4,PU=5,iB=7,US=8,nB=9,Wd=10,$x=11,rB=12,Zx=13,kU=14,jg=15,Xx=16,qy=17,Sg=18,jU=19,sB=20,Yx=21,Eg=22,D_=23,Kp=24,Iu=25,Ug=26,Dg=27,Wp=28,UU=29,Df=30,DU=31,Gy=32,Ky=33,Jx=34,eb=35,tb=36,g0=37,ib=38,wv=39,Bv=40,R_=41,DS=42,RU=43,OU=[9001,65288],RS="!",mr="",Wy="",nb=TU(MU),Xh=[Df,tb],rb=[IU,kS,jS,PU],OS=[Wd,US],aB=[Dg,Ug],QU=rb.concat(OS),oB=[ib,wv,Bv,Jx,eb],zU=[jg,Zx],HU=function(t,e){e===void 0&&(e="strict");var i=[],n=[],o=[];return t.forEach(function(u,A){var a=nb.get(u);if(a>tB?(o.push(!0),a-=tB):o.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(u)!==-1)return n.push(A),i.push(Xx);if(a===LU||a===$x){if(A===0)return n.push(A),i.push(Df);var g=i[A-1];return QU.indexOf(g)===-1?(n.push(n[A-1]),i.push(g)):(n.push(A),i.push(Df))}if(n.push(A),a===DU)return i.push(e==="strict"?Yx:g0);if(a===DS||a===UU)return i.push(Df);if(a===RU)return u>=131072&&u<=196605||u>=196608&&u<=262141?i.push(g0):i.push(Df);i.push(a)}),[n,i,o]},O_=function(t,e,i,n){var o=n[i];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var u=i;u<=n.length;){u++;var A=n[u];if(A===e)return!0;if(A!==Wd)break}if(o===Wd)for(var u=i;u>0;){u--;var a=n[u];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var g=i;g<=n.length;){g++;var A=n[g];if(A===e)return!0;if(A!==Wd)break}if(a!==Wd)break}return!1},lB=function(t,e){for(var i=t;i>=0;){var n=e[i];if(n===Wd)i--;else return n}return 0},VU=function(t,e,i,n,o){if(i[n]===0)return mr;var u=n-1;if(Array.isArray(o)&&o[u]===!0)return mr;var A=u-1,a=u+1,g=e[u],b=A>=0?e[A]:0,B=e[a];if(g===kS&&B===jS)return mr;if(rb.indexOf(g)!==-1)return RS;if(rb.indexOf(B)!==-1||OS.indexOf(B)!==-1)return mr;if(lB(u,e)===US)return Wy;if(nb.get(t[u])===$x||(g===Gy||g===Ky)&&nb.get(t[a])===$x||g===iB||B===iB||g===nB||[Wd,Zx,jg].indexOf(g)===-1&&B===nB||[qy,Sg,jU,Kp,Wp].indexOf(B)!==-1||lB(u,e)===Eg||O_(D_,Eg,u,e)||O_([qy,Sg],Yx,u,e)||O_(rB,rB,u,e))return mr;if(g===Wd)return Wy;if(g===D_||B===D_)return mr;if(B===Xx||g===Xx)return Wy;if([Zx,jg,Yx].indexOf(B)!==-1||g===kU||b===tb&&zU.indexOf(g)!==-1||g===Wp&&B===tb||B===sB||Xh.indexOf(B)!==-1&&g===Iu||Xh.indexOf(g)!==-1&&B===Iu||g===Dg&&[g0,Gy,Ky].indexOf(B)!==-1||[g0,Gy,Ky].indexOf(g)!==-1&&B===Ug||Xh.indexOf(g)!==-1&&aB.indexOf(B)!==-1||aB.indexOf(g)!==-1&&Xh.indexOf(B)!==-1||[Dg,Ug].indexOf(g)!==-1&&(B===Iu||[Eg,jg].indexOf(B)!==-1&&e[a+1]===Iu)||[Eg,jg].indexOf(g)!==-1&&B===Iu||g===Iu&&[Iu,Wp,Kp].indexOf(B)!==-1)return mr;if([Iu,Wp,Kp,qy,Sg].indexOf(B)!==-1)for(var I=u;I>=0;){var P=e[I];if(P===Iu)return mr;if([Wp,Kp].indexOf(P)!==-1)I--;else break}if([Dg,Ug].indexOf(B)!==-1)for(var I=[qy,Sg].indexOf(g)!==-1?A:u;I>=0;){var P=e[I];if(P===Iu)return mr;if([Wp,Kp].indexOf(P)!==-1)I--;else break}if(ib===g&&[ib,wv,Jx,eb].indexOf(B)!==-1||[wv,Jx].indexOf(g)!==-1&&[wv,Bv].indexOf(B)!==-1||[Bv,eb].indexOf(g)!==-1&&B===Bv||oB.indexOf(g)!==-1&&[sB,Ug].indexOf(B)!==-1||oB.indexOf(B)!==-1&&g===Dg||Xh.indexOf(g)!==-1&&Xh.indexOf(B)!==-1||g===Kp&&Xh.indexOf(B)!==-1||Xh.concat(Iu).indexOf(g)!==-1&&B===Eg&&OU.indexOf(t[a])===-1||Xh.concat(Iu).indexOf(B)!==-1&&g===Sg)return mr;if(g===R_&&B===R_){for(var F=i[u],Q=1;F>0&&(F--,e[F]===R_);)Q++;if(Q%2!==0)return mr}return g===Gy&&B===Ky?mr:Wy},qU=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var i=HU(t,e.lineBreak),n=i[0],o=i[1],u=i[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(o=o.map(function(a){return[Iu,Df,DS].indexOf(a)!==-1?g0:a}));var A=e.wordBreak==="keep-all"?u.map(function(a,g){return a&&t[g]>=19968&&t[g]<=40959}):void 0;return[n,o,A]},GU=function(){function t(e,i,n,o){this.codePoints=e,this.required=i===RS,this.start=n,this.end=o}return t.prototype.slice=function(){return Ga.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),KU=function(t,e){var i=w1(t),n=qU(i,e),o=n[0],u=n[1],A=n[2],a=i.length,g=0,b=0;return{next:function(){if(b>=a)return{done:!0,value:null};for(var B=mr;b<a&&(B=VU(i,u,o,++b,A))===mr;);if(B!==mr||b===a){var I=new GU(i,B,g,b);return g=b,{value:I,done:!1}}return{done:!0,value:null}}}},WU=1,$U=2,N0=4,cB=8,Qv=10,uB=47,Yg=92,ZU=9,XU=32,$y=34,Tg=61,YU=35,JU=36,eD=37,Zy=39,Xy=40,Fg=41,tD=95,Au=45,iD=33,nD=60,rD=62,sD=64,aD=91,oD=93,lD=61,cD=123,Yy=63,uD=125,AB=124,AD=126,hD=128,hB=65533,Q_=42,zf=43,dD=44,fD=58,pD=59,y0=46,mD=0,gD=8,yD=11,vD=14,_D=31,xD=127,gh=-1,QS=48,zS=97,HS=101,bD=102,wD=117,BD=122,VS=65,qS=69,GS=70,CD=85,SD=90,fc=function(t){return t>=QS&&t<=57},ED=function(t){return t>=55296&&t<=57343},$p=function(t){return fc(t)||t>=VS&&t<=GS||t>=zS&&t<=bD},TD=function(t){return t>=zS&&t<=BD},FD=function(t){return t>=VS&&t<=SD},ND=function(t){return TD(t)||FD(t)},MD=function(t){return t>=hD},Jy=function(t){return t===Qv||t===ZU||t===XU},zv=function(t){return ND(t)||MD(t)||t===tD},dB=function(t){return zv(t)||fc(t)||t===Au},ID=function(t){return t>=mD&&t<=gD||t===yD||t>=vD&&t<=_D||t===xD},zd=function(t,e){return t!==Yg?!1:e!==Qv},ev=function(t,e,i){return t===Au?zv(e)||zd(e,i):zv(t)?!0:!!(t===Yg&&zd(t,e))},z_=function(t,e,i){return t===zf||t===Au?fc(e)?!0:e===y0&&fc(i):fc(t===y0?e:t)},LD=function(t){var e=0,i=1;(t[e]===zf||t[e]===Au)&&(t[e]===Au&&(i=-1),e++);for(var n=[];fc(t[e]);)n.push(t[e++]);var o=n.length?parseInt(Ga.apply(void 0,n),10):0;t[e]===y0&&e++;for(var u=[];fc(t[e]);)u.push(t[e++]);var A=u.length,a=A?parseInt(Ga.apply(void 0,u),10):0;(t[e]===qS||t[e]===HS)&&e++;var g=1;(t[e]===zf||t[e]===Au)&&(t[e]===Au&&(g=-1),e++);for(var b=[];fc(t[e]);)b.push(t[e++]);var B=b.length?parseInt(Ga.apply(void 0,b),10):0;return i*(o+a*Math.pow(10,-A))*Math.pow(10,g*B)},PD={type:2},kD={type:3},jD={type:4},UD={type:13},DD={type:8},RD={type:21},OD={type:9},QD={type:10},zD={type:11},HD={type:12},VD={type:14},tv={type:23},qD={type:1},GD={type:25},KD={type:24},WD={type:26},$D={type:27},ZD={type:28},XD={type:29},YD={type:31},sb={type:32},KS=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(w1(e))},t.prototype.read=function(){for(var e=[],i=this.consumeToken();i!==sb;)e.push(i),i=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case $y:return this.consumeStringToken($y);case YU:var i=this.peekCodePoint(0),n=this.peekCodePoint(1),o=this.peekCodePoint(2);if(dB(i)||zd(n,o)){var u=ev(i,n,o)?$U:WU,A=this.consumeName();return{type:5,value:A,flags:u}}break;case JU:if(this.peekCodePoint(0)===Tg)return this.consumeCodePoint(),UD;break;case Zy:return this.consumeStringToken(Zy);case Xy:return PD;case Fg:return kD;case Q_:if(this.peekCodePoint(0)===Tg)return this.consumeCodePoint(),VD;break;case zf:if(z_(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case dD:return jD;case Au:var a=e,g=this.peekCodePoint(0),b=this.peekCodePoint(1);if(z_(a,g,b))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(ev(a,g,b))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(g===Au&&b===rD)return this.consumeCodePoint(),this.consumeCodePoint(),KD;break;case y0:if(z_(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case uB:if(this.peekCodePoint(0)===Q_)for(this.consumeCodePoint();;){var B=this.consumeCodePoint();if(B===Q_&&(B=this.consumeCodePoint(),B===uB))return this.consumeToken();if(B===gh)return this.consumeToken()}break;case fD:return WD;case pD:return $D;case nD:if(this.peekCodePoint(0)===iD&&this.peekCodePoint(1)===Au&&this.peekCodePoint(2)===Au)return this.consumeCodePoint(),this.consumeCodePoint(),GD;break;case sD:var I=this.peekCodePoint(0),P=this.peekCodePoint(1),F=this.peekCodePoint(2);if(ev(I,P,F)){var A=this.consumeName();return{type:7,value:A}}break;case aD:return ZD;case Yg:if(zd(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case oD:return XD;case lD:if(this.peekCodePoint(0)===Tg)return this.consumeCodePoint(),DD;break;case cD:return zD;case uD:return HD;case wD:case CD:var Q=this.peekCodePoint(0),R=this.peekCodePoint(1);return Q===zf&&($p(R)||R===Yy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case AB:if(this.peekCodePoint(0)===Tg)return this.consumeCodePoint(),OD;if(this.peekCodePoint(0)===AB)return this.consumeCodePoint(),RD;break;case AD:if(this.peekCodePoint(0)===Tg)return this.consumeCodePoint(),QD;break;case gh:return sb}return Jy(e)?(this.consumeWhiteSpace(),YD):fc(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):zv(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ga(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],i=this.consumeCodePoint();$p(i)&&e.length<6;)e.push(i),i=this.consumeCodePoint();for(var n=!1;i===Yy&&e.length<6;)e.push(i),i=this.consumeCodePoint(),n=!0;if(n){var o=parseInt(Ga.apply(void 0,e.map(function(g){return g===Yy?QS:g})),16),u=parseInt(Ga.apply(void 0,e.map(function(g){return g===Yy?GS:g})),16);return{type:30,start:o,end:u}}var A=parseInt(Ga.apply(void 0,e),16);if(this.peekCodePoint(0)===Au&&$p(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var a=[];$p(i)&&a.length<6;)a.push(i),i=this.consumeCodePoint();var u=parseInt(Ga.apply(void 0,a),16);return{type:30,start:A,end:u}}else return{type:30,start:A,end:A}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Xy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Xy?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===gh)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===Zy||i===$y){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===gh||this.peekCodePoint(0)===Fg)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),tv)}for(;;){var o=this.consumeCodePoint();if(o===gh||o===Fg)return{type:22,value:Ga.apply(void 0,e)};if(Jy(o))return this.consumeWhiteSpace(),this.peekCodePoint(0)===gh||this.peekCodePoint(0)===Fg?(this.consumeCodePoint(),{type:22,value:Ga.apply(void 0,e)}):(this.consumeBadUrlRemnants(),tv);if(o===$y||o===Zy||o===Xy||ID(o))return this.consumeBadUrlRemnants(),tv;if(o===Yg)if(zd(o,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),tv;else e.push(o)}},t.prototype.consumeWhiteSpace=function(){for(;Jy(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Fg||e===gh)return;zd(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var i=5e4,n="";e>0;){var o=Math.min(i,e);n+=Ga.apply(void 0,this._value.splice(0,o)),e-=o}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var i="",n=0;do{var o=this._value[n];if(o===gh||o===void 0||o===e)return i+=this.consumeStringSlice(n),{type:0,value:i};if(o===Qv)return this._value.splice(0,n),qD;if(o===Yg){var u=this._value[n+1];u!==gh&&u!==void 0&&(u===Qv?(i+=this.consumeStringSlice(n),n=-1,this._value.shift()):zd(o,u)&&(i+=this.consumeStringSlice(n),i+=Ga(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],i=N0,n=this.peekCodePoint(0);for((n===zf||n===Au)&&e.push(this.consumeCodePoint());fc(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var o=this.peekCodePoint(1);if(n===y0&&fc(o))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),i=cB;fc(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),o=this.peekCodePoint(1);var u=this.peekCodePoint(2);if((n===qS||n===HS)&&((o===zf||o===Au)&&fc(u)||fc(o)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),i=cB;fc(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[LD(e),i]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),i=e[0],n=e[1],o=this.peekCodePoint(0),u=this.peekCodePoint(1),A=this.peekCodePoint(2);if(ev(o,u,A)){var a=this.consumeName();return{type:15,number:i,flags:n,unit:a}}return o===eD?(this.consumeCodePoint(),{type:16,number:i,flags:n}):{type:17,number:i,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if($p(e)){for(var i=Ga(e);$p(this.peekCodePoint(0))&&i.length<6;)i+=Ga(this.consumeCodePoint());Jy(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(i,16);return n===0||ED(n)||n>1114111?hB:n}return e===gh?hB:e},t.prototype.consumeName=function(){for(var e="";;){var i=this.consumeCodePoint();if(dB(i))e+=Ga(i);else if(zd(i,this.peekCodePoint(0)))e+=Ga(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),e}},t}(),WS=function(){function t(e){this._tokens=e}return t.create=function(e){var i=new KS;return i.write(e),new t(i.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var i=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var i=this.consumeComponentValue();if(i.type===32)return e;e.push(i),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var i={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||eR(n,e))return i;this.reconsumeToken(n),i.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var i={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return i;this.reconsumeToken(n),i.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?sb:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),M0=function(t){return t.type===15},Cm=function(t){return t.type===17},vs=function(t){return t.type===20},JD=function(t){return t.type===0},ab=function(t,e){return vs(t)&&t.value===e},$S=function(t){return t.type!==31},pm=function(t){return t.type!==31&&t.type!==4},Eh=function(t){var e=[],i=[];return t.forEach(function(n){if(n.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(i),i=[];return}n.type!==31&&i.push(n)}),i.length&&e.push(i),e},eR=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},af=function(t){return t.type===17||t.type===15},mo=function(t){return t.type===16||af(t)},ZS=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Rl={type:17,number:0,flags:N0},l2={type:16,number:50,flags:N0},$d={type:16,number:100,flags:N0},Rg=function(t,e,i){var n=t[0],o=t[1];return[Vs(n,e),Vs(typeof o<"u"?o:n,i)]},Vs=function(t,e){if(t.type===16)return t.number/100*e;if(M0(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},XS="deg",YS="grad",JS="rad",e3="turn",B1={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case XS:return Math.PI*e.number/180;case YS:return Math.PI/200*e.number;case JS:return e.number;case e3:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},t3=function(t){return t.type===15&&(t.unit===XS||t.unit===YS||t.unit===JS||t.unit===e3)},i3=function(t){var e=t.filter(vs).map(function(i){return i.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Rl,Rl];case"to top":case"bottom":return dA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Rl,$d];case"to right":case"left":return dA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[$d,$d];case"to bottom":case"top":return dA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[$d,Rl];case"to left":case"right":return dA(270)}return 0},dA=function(t){return Math.PI*t/180},ef={name:"color",parse:function(t,e){if(e.type===18){var i=tR[e.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return i(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),o=e.value.substring(1,2),u=e.value.substring(2,3);return Zd(parseInt(n+n,16),parseInt(o+o,16),parseInt(u+u,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),o=e.value.substring(1,2),u=e.value.substring(2,3),A=e.value.substring(3,4);return Zd(parseInt(n+n,16),parseInt(o+o,16),parseInt(u+u,16),parseInt(A+A,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),o=e.value.substring(2,4),u=e.value.substring(4,6);return Zd(parseInt(n,16),parseInt(o,16),parseInt(u,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),o=e.value.substring(2,4),u=e.value.substring(4,6),A=e.value.substring(6,8);return Zd(parseInt(n,16),parseInt(o,16),parseInt(u,16),parseInt(A,16)/255)}}if(e.type===20){var a=sd[e.value.toUpperCase()];if(typeof a<"u")return a}return sd.TRANSPARENT}},tf=function(t){return(255&t)===0},dl=function(t){var e=255&t,i=255&t>>8,n=255&t>>16,o=255&t>>24;return e<255?"rgba("+o+","+n+","+i+","+e/255+")":"rgb("+o+","+n+","+i+")"},Zd=function(t,e,i,n){return(t<<24|e<<16|i<<8|Math.round(n*255)<<0)>>>0},fB=function(t,e){if(t.type===17)return t.number;if(t.type===16){var i=e===3?1:255;return e===3?t.number/100*i:Math.round(t.number/100*i)}return 0},pB=function(t,e){var i=e.filter(pm);if(i.length===3){var n=i.map(fB),o=n[0],u=n[1],A=n[2];return Zd(o,u,A,1)}if(i.length===4){var a=i.map(fB),o=a[0],u=a[1],A=a[2],g=a[3];return Zd(o,u,A,g)}return 0};function H_(t,e,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(e-t)*i*6+t:i<1/2?e:i<2/3?(e-t)*6*(2/3-i)+t:t}var mB=function(t,e){var i=e.filter(pm),n=i[0],o=i[1],u=i[2],A=i[3],a=(n.type===17?dA(n.number):B1.parse(t,n))/(Math.PI*2),g=mo(o)?o.number/100:0,b=mo(u)?u.number/100:0,B=typeof A<"u"&&mo(A)?Vs(A,1):1;if(g===0)return Zd(b*255,b*255,b*255,1);var I=b<=.5?b*(g+1):b+g-b*g,P=b*2-I,F=H_(P,I,a+1/3),Q=H_(P,I,a),R=H_(P,I,a-1/3);return Zd(F*255,Q*255,R*255,B)},tR={hsl:mB,hsla:mB,rgb:pB,rgba:pB},Jg=function(t,e){return ef.parse(t,WS.create(e).parseComponentValue())},sd={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},iR={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(i){if(vs(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},nR={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},C1=function(t,e){var i=ef.parse(t,e[0]),n=e[1];return n&&mo(n)?{color:i,stop:n}:{color:i,stop:null}},gB=function(t,e){var i=t[0],n=t[t.length-1];i.stop===null&&(i.stop=Rl),n.stop===null&&(n.stop=$d);for(var o=[],u=0,A=0;A<t.length;A++){var a=t[A].stop;if(a!==null){var g=Vs(a,e);g>u?o.push(g):o.push(u),u=g}else o.push(null)}for(var b=null,A=0;A<o.length;A++){var B=o[A];if(B===null)b===null&&(b=A);else if(b!==null){for(var I=A-b,P=o[b-1],F=(B-P)/(I+1),Q=1;Q<=I;Q++)o[b+Q-1]=F*Q;b=null}}return t.map(function(R,H){var j=R.color;return{color:j,stop:Math.max(Math.min(1,o[H]/e),0)}})},rR=function(t,e,i){var n=e/2,o=i/2,u=Vs(t[0],e)-n,A=o-Vs(t[1],i);return(Math.atan2(A,u)+Math.PI*2)%(Math.PI*2)},sR=function(t,e,i){var n=typeof t=="number"?t:rR(t,e,i),o=Math.abs(e*Math.sin(n))+Math.abs(i*Math.cos(n)),u=e/2,A=i/2,a=o/2,g=Math.sin(n-Math.PI/2)*a,b=Math.cos(n-Math.PI/2)*a;return[o,u-b,u+b,A-g,A+g]},zA=function(t,e){return Math.sqrt(t*t+e*e)},yB=function(t,e,i,n,o){var u=[[0,0],[0,e],[t,0],[t,e]];return u.reduce(function(A,a){var g=a[0],b=a[1],B=zA(i-g,n-b);return(o?B<A.optimumDistance:B>A.optimumDistance)?{optimumCorner:a,optimumDistance:B}:A},{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},aR=function(t,e,i,n,o){var u=0,A=0;switch(t.size){case 0:t.shape===0?u=A=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(i),Math.abs(i-o)):t.shape===1&&(u=Math.min(Math.abs(e),Math.abs(e-n)),A=Math.min(Math.abs(i),Math.abs(i-o)));break;case 2:if(t.shape===0)u=A=Math.min(zA(e,i),zA(e,i-o),zA(e-n,i),zA(e-n,i-o));else if(t.shape===1){var a=Math.min(Math.abs(i),Math.abs(i-o))/Math.min(Math.abs(e),Math.abs(e-n)),g=yB(n,o,e,i,!0),b=g[0],B=g[1];u=zA(b-e,(B-i)/a),A=a*u}break;case 1:t.shape===0?u=A=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(i),Math.abs(i-o)):t.shape===1&&(u=Math.max(Math.abs(e),Math.abs(e-n)),A=Math.max(Math.abs(i),Math.abs(i-o)));break;case 3:if(t.shape===0)u=A=Math.max(zA(e,i),zA(e,i-o),zA(e-n,i),zA(e-n,i-o));else if(t.shape===1){var a=Math.max(Math.abs(i),Math.abs(i-o))/Math.max(Math.abs(e),Math.abs(e-n)),I=yB(n,o,e,i,!1),b=I[0],B=I[1];u=zA(b-e,(B-i)/a),A=a*u}break}return Array.isArray(t.size)&&(u=Vs(t.size[0],n),A=t.size.length===2?Vs(t.size[1],o):u),[u,A]},oR=function(t,e){var i=dA(180),n=[];return Eh(e).forEach(function(o,u){if(u===0){var A=o[0];if(A.type===20&&A.value==="to"){i=i3(o);return}else if(t3(A)){i=B1.parse(t,A);return}}var a=C1(t,o);n.push(a)}),{angle:i,stops:n,type:1}},iv=function(t,e){var i=dA(180),n=[];return Eh(e).forEach(function(o,u){if(u===0){var A=o[0];if(A.type===20&&["top","left","right","bottom"].indexOf(A.value)!==-1){i=i3(o);return}else if(t3(A)){i=(B1.parse(t,A)+dA(270))%dA(360);return}}var a=C1(t,o);n.push(a)}),{angle:i,stops:n,type:1}},lR=function(t,e){var i=dA(180),n=[],o=1,u=0,A=3,a=[];return Eh(e).forEach(function(g,b){var B=g[0];if(b===0){if(vs(B)&&B.value==="linear"){o=1;return}else if(vs(B)&&B.value==="radial"){o=2;return}}if(B.type===18){if(B.name==="from"){var I=ef.parse(t,B.values[0]);n.push({stop:Rl,color:I})}else if(B.name==="to"){var I=ef.parse(t,B.values[0]);n.push({stop:$d,color:I})}else if(B.name==="color-stop"){var P=B.values.filter(pm);if(P.length===2){var I=ef.parse(t,P[1]),F=P[0];Cm(F)&&n.push({stop:{type:16,number:F.number*100,flags:F.flags},color:I})}}}}),o===1?{angle:(i+dA(180))%dA(360),stops:n,type:o}:{size:A,shape:u,stops:n,position:a,type:o}},n3="closest-side",r3="farthest-side",s3="closest-corner",a3="farthest-corner",o3="circle",l3="ellipse",c3="cover",u3="contain",cR=function(t,e){var i=0,n=3,o=[],u=[];return Eh(e).forEach(function(A,a){var g=!0;if(a===0){var b=!1;g=A.reduce(function(I,P){if(b)if(vs(P))switch(P.value){case"center":return u.push(l2),I;case"top":case"left":return u.push(Rl),I;case"right":case"bottom":return u.push($d),I}else(mo(P)||af(P))&&u.push(P);else if(vs(P))switch(P.value){case o3:return i=0,!1;case l3:return i=1,!1;case"at":return b=!0,!1;case n3:return n=0,!1;case c3:case r3:return n=1,!1;case u3:case s3:return n=2,!1;case a3:return n=3,!1}else if(af(P)||mo(P))return Array.isArray(n)||(n=[]),n.push(P),!1;return I},g)}if(g){var B=C1(t,A);o.push(B)}}),{size:n,shape:i,stops:o,position:u,type:2}},nv=function(t,e){var i=0,n=3,o=[],u=[];return Eh(e).forEach(function(A,a){var g=!0;if(a===0?g=A.reduce(function(B,I){if(vs(I))switch(I.value){case"center":return u.push(l2),!1;case"top":case"left":return u.push(Rl),!1;case"right":case"bottom":return u.push($d),!1}else if(mo(I)||af(I))return u.push(I),!1;return B},g):a===1&&(g=A.reduce(function(B,I){if(vs(I))switch(I.value){case o3:return i=0,!1;case l3:return i=1,!1;case u3:case n3:return n=0,!1;case r3:return n=1,!1;case s3:return n=2,!1;case c3:case a3:return n=3,!1}else if(af(I)||mo(I))return Array.isArray(n)||(n=[]),n.push(I),!1;return B},g)),g){var b=C1(t,A);o.push(b)}}),{size:n,shape:i,stops:o,position:u,type:2}},uR=function(t){return t.type===1},AR=function(t){return t.type===2},c2={name:"image",parse:function(t,e){if(e.type===22){var i={url:e.value,type:0};return t.cache.addImage(e.value),i}if(e.type===18){var n=A3[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function hR(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!A3[t.name])}var A3={"linear-gradient":oR,"-moz-linear-gradient":iv,"-ms-linear-gradient":iv,"-o-linear-gradient":iv,"-webkit-linear-gradient":iv,"radial-gradient":cR,"-moz-radial-gradient":nv,"-ms-radial-gradient":nv,"-o-radial-gradient":nv,"-webkit-radial-gradient":nv,"-webkit-gradient":lR},dR={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var i=e[0];return i.type===20&&i.value==="none"?[]:e.filter(function(n){return pm(n)&&hR(n)}).map(function(n){return c2.parse(t,n)})}},fR={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(i){if(vs(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},pR={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Eh(e).map(function(i){return i.filter(mo)}).map(ZS)}},mR={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Eh(e).map(function(i){return i.filter(vs).map(function(n){return n.value}).join(" ")}).map(gR)}},gR=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},um;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(um||(um={}));var yR={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Eh(e).map(function(i){return i.filter(vR)})}},vR=function(t){return vs(t)||mo(t)},S1=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},_R=S1("top"),xR=S1("right"),bR=S1("bottom"),wR=S1("left"),E1=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,i){return ZS(i.filter(mo))}}},BR=E1("top-left"),CR=E1("top-right"),SR=E1("bottom-right"),ER=E1("bottom-left"),T1=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},TR=T1("top"),FR=T1("right"),NR=T1("bottom"),MR=T1("left"),F1=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,i){return M0(i)?i.number:0}}},IR=F1("top"),LR=F1("right"),PR=F1("bottom"),kR=F1("left"),jR={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},UR={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},DR={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(vs).reduce(function(i,n){return i|RR(n.value)},0)}},RR=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},OR={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},QR={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Hv;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Hv||(Hv={}));var zR={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Hv.STRICT;case"normal":default:return Hv.NORMAL}}},HR={name:"line-height",initialValue:"normal",prefix:!1,type:4},vB=function(t,e){return vs(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:mo(t)?Vs(t,e):e},VR={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:c2.parse(t,e)}},qR={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},ob={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},N1=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},GR=N1("top"),KR=N1("right"),WR=N1("bottom"),$R=N1("left"),ZR={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(vs).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},XR={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},M1=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},YR=M1("top"),JR=M1("right"),eO=M1("bottom"),tO=M1("left"),iO={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},nO={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},rO={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&ab(e[0],"none")?[]:Eh(e).map(function(i){for(var n={color:sd.TRANSPARENT,offsetX:Rl,offsetY:Rl,blur:Rl},o=0,u=0;u<i.length;u++){var A=i[u];af(A)?(o===0?n.offsetX=A:o===1?n.offsetY=A:n.blur=A,o++):n.color=ef.parse(t,A)}return n})}},sO={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},aO={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var i=cO[e.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return i(e.values)}return null}},oO=function(t){var e=t.filter(function(i){return i.type===17}).map(function(i){return i.number});return e.length===6?e:null},lO=function(t){var e=t.filter(function(g){return g.type===17}).map(function(g){return g.number}),i=e[0],n=e[1];e[2],e[3];var o=e[4],u=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var A=e[12],a=e[13];return e[14],e[15],e.length===16?[i,n,o,u,A,a]:null},cO={matrix:oO,matrix3d:lO},_B={type:16,number:50,flags:N0},uO=[_B,_B],AO={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var i=e.filter(mo);return i.length!==2?uO:[i[0],i[1]]}},hO={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},e0;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(e0||(e0={}));var dO={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return e0.BREAK_ALL;case"keep-all":return e0.KEEP_ALL;case"normal":default:return e0.NORMAL}}},fO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Cm(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},h3={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},pO={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Cm(e)?e.number:1}},mO={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},gO={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(vs).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},yO={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var i=[],n=[];return e.forEach(function(o){switch(o.type){case 20:case 0:i.push(o.value);break;case 17:i.push(o.number.toString());break;case 4:n.push(i.join(" ")),i.length=0;break}}),i.length&&n.push(i.join(" ")),n.map(function(o){return o.indexOf(" ")===-1?o:"'"+o+"'"})}},vO={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},_O={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Cm(e))return e.number;if(vs(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},xO={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(vs).map(function(i){return i.value})}},bO={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Oo=function(t,e){return(t&e)!==0},wO={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var i=e[0];return i.type===20&&i.value==="none"?[]:e}},BO={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var i=e[0];if(i.type===20&&i.value==="none")return null;for(var n=[],o=e.filter($S),u=0;u<o.length;u++){var A=o[u],a=o[u+1];if(A.type===20){var g=a&&Cm(a)?a.number:1;n.push({counter:A.value,increment:g})}}return n}},CO={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var i=[],n=e.filter($S),o=0;o<n.length;o++){var u=n[o],A=n[o+1];if(vs(u)&&u.value!=="none"){var a=A&&Cm(A)?A.number:0;i.push({counter:u.value,reset:a})}}return i}},SO={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(M0).map(function(i){return h3.parse(t,i)})}},EO={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var i=e[0];if(i.type===20&&i.value==="none")return null;var n=[],o=e.filter(JD);if(o.length%2!==0)return null;for(var u=0;u<o.length;u+=2){var A=o[u].value,a=o[u+1].value;n.push({open:A,close:a})}return n}},xB=function(t,e,i){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?i?n.open:n.close:""},TO={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&ab(e[0],"none")?[]:Eh(e).map(function(i){for(var n={color:255,offsetX:Rl,offsetY:Rl,blur:Rl,spread:Rl,inset:!1},o=0,u=0;u<i.length;u++){var A=i[u];ab(A,"inset")?n.inset=!0:af(A)?(o===0?n.offsetX=A:o===1?n.offsetY=A:o===2?n.blur=A:n.spread=A,o++):n.color=ef.parse(t,A)}return n})}},FO={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var i=[0,1,2],n=[];return e.filter(vs).forEach(function(o){switch(o.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),i.forEach(function(o){n.indexOf(o)===-1&&n.push(o)}),n}},NO={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},MO={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return M0(e)?e.number:0}},IO=function(){function t(e,i){var n,o;this.animationDuration=Hi(e,SO,i.animationDuration),this.backgroundClip=Hi(e,iR,i.backgroundClip),this.backgroundColor=Hi(e,nR,i.backgroundColor),this.backgroundImage=Hi(e,dR,i.backgroundImage),this.backgroundOrigin=Hi(e,fR,i.backgroundOrigin),this.backgroundPosition=Hi(e,pR,i.backgroundPosition),this.backgroundRepeat=Hi(e,mR,i.backgroundRepeat),this.backgroundSize=Hi(e,yR,i.backgroundSize),this.borderTopColor=Hi(e,_R,i.borderTopColor),this.borderRightColor=Hi(e,xR,i.borderRightColor),this.borderBottomColor=Hi(e,bR,i.borderBottomColor),this.borderLeftColor=Hi(e,wR,i.borderLeftColor),this.borderTopLeftRadius=Hi(e,BR,i.borderTopLeftRadius),this.borderTopRightRadius=Hi(e,CR,i.borderTopRightRadius),this.borderBottomRightRadius=Hi(e,SR,i.borderBottomRightRadius),this.borderBottomLeftRadius=Hi(e,ER,i.borderBottomLeftRadius),this.borderTopStyle=Hi(e,TR,i.borderTopStyle),this.borderRightStyle=Hi(e,FR,i.borderRightStyle),this.borderBottomStyle=Hi(e,NR,i.borderBottomStyle),this.borderLeftStyle=Hi(e,MR,i.borderLeftStyle),this.borderTopWidth=Hi(e,IR,i.borderTopWidth),this.borderRightWidth=Hi(e,LR,i.borderRightWidth),this.borderBottomWidth=Hi(e,PR,i.borderBottomWidth),this.borderLeftWidth=Hi(e,kR,i.borderLeftWidth),this.boxShadow=Hi(e,TO,i.boxShadow),this.color=Hi(e,jR,i.color),this.direction=Hi(e,UR,i.direction),this.display=Hi(e,DR,i.display),this.float=Hi(e,OR,i.cssFloat),this.fontFamily=Hi(e,yO,i.fontFamily),this.fontSize=Hi(e,vO,i.fontSize),this.fontStyle=Hi(e,bO,i.fontStyle),this.fontVariant=Hi(e,xO,i.fontVariant),this.fontWeight=Hi(e,_O,i.fontWeight),this.letterSpacing=Hi(e,QR,i.letterSpacing),this.lineBreak=Hi(e,zR,i.lineBreak),this.lineHeight=Hi(e,HR,i.lineHeight),this.listStyleImage=Hi(e,VR,i.listStyleImage),this.listStylePosition=Hi(e,qR,i.listStylePosition),this.listStyleType=Hi(e,ob,i.listStyleType),this.marginTop=Hi(e,GR,i.marginTop),this.marginRight=Hi(e,KR,i.marginRight),this.marginBottom=Hi(e,WR,i.marginBottom),this.marginLeft=Hi(e,$R,i.marginLeft),this.opacity=Hi(e,pO,i.opacity);var u=Hi(e,ZR,i.overflow);this.overflowX=u[0],this.overflowY=u[u.length>1?1:0],this.overflowWrap=Hi(e,XR,i.overflowWrap),this.paddingTop=Hi(e,YR,i.paddingTop),this.paddingRight=Hi(e,JR,i.paddingRight),this.paddingBottom=Hi(e,eO,i.paddingBottom),this.paddingLeft=Hi(e,tO,i.paddingLeft),this.paintOrder=Hi(e,FO,i.paintOrder),this.position=Hi(e,nO,i.position),this.textAlign=Hi(e,iO,i.textAlign),this.textDecorationColor=Hi(e,mO,(n=i.textDecorationColor)!==null&&n!==void 0?n:i.color),this.textDecorationLine=Hi(e,gO,(o=i.textDecorationLine)!==null&&o!==void 0?o:i.textDecoration),this.textShadow=Hi(e,rO,i.textShadow),this.textTransform=Hi(e,sO,i.textTransform),this.transform=Hi(e,aO,i.transform),this.transformOrigin=Hi(e,AO,i.transformOrigin),this.visibility=Hi(e,hO,i.visibility),this.webkitTextStrokeColor=Hi(e,NO,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=Hi(e,MO,i.webkitTextStrokeWidth),this.wordBreak=Hi(e,dO,i.wordBreak),this.zIndex=Hi(e,fO,i.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return tf(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Oo(this.display,4)||Oo(this.display,33554432)||Oo(this.display,268435456)||Oo(this.display,536870912)||Oo(this.display,67108864)||Oo(this.display,134217728)},t}(),LO=function(){function t(e,i){this.content=Hi(e,wO,i.content),this.quotes=Hi(e,EO,i.quotes)}return t}(),bB=function(){function t(e,i){this.counterIncrement=Hi(e,BO,i.counterIncrement),this.counterReset=Hi(e,CO,i.counterReset)}return t}(),Hi=function(t,e,i){var n=new KS,o=i!==null&&typeof i<"u"?i.toString():e.initialValue;n.write(o);var u=new WS(n.read());switch(e.type){case 2:var A=u.parseComponentValue();return e.parse(t,vs(A)?A.value:e.initialValue);case 0:return e.parse(t,u.parseComponentValue());case 1:return e.parse(t,u.parseComponentValues());case 4:return u.parseComponentValue();case 3:switch(e.format){case"angle":return B1.parse(t,u.parseComponentValue());case"color":return ef.parse(t,u.parseComponentValue());case"image":return c2.parse(t,u.parseComponentValue());case"length":var a=u.parseComponentValue();return af(a)?a:Rl;case"length-percentage":var g=u.parseComponentValue();return mo(g)?g:Rl;case"time":return h3.parse(t,u.parseComponentValue())}break}},PO="data-html2canvas-debug",kO=function(t){var e=t.getAttribute(PO);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},lb=function(t,e){var i=kO(t);return i===1||e===i},Th=function(){function t(e,i){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,lb(i,3))debugger;this.styles=new IO(e,window.getComputedStyle(i,null)),Ab(i)&&(this.styles.animationDuration.some(function(n){return n>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=b1(this.context,i),lb(i,4)&&(this.flags|=16)}return t}(),jO="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",wB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Og=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rv=0;rv<wB.length;rv++)Og[wB.charCodeAt(rv)]=rv;var UO=function(t){var e=t.length*.75,i=t.length,n,o=0,u,A,a,g;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var b=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),B=Array.isArray(b)?b:new Uint8Array(b);for(n=0;n<i;n+=4)u=Og[t.charCodeAt(n)],A=Og[t.charCodeAt(n+1)],a=Og[t.charCodeAt(n+2)],g=Og[t.charCodeAt(n+3)],B[o++]=u<<2|A>>4,B[o++]=(A&15)<<4|a>>2,B[o++]=(a&3)<<6|g&63;return b},DO=function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(t[n+1]<<8|t[n]);return i},RO=function(t){for(var e=t.length,i=[],n=0;n<e;n+=4)i.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return i},Xf=5,u2=11,V_=2,OO=u2-Xf,d3=65536>>Xf,QO=1<<Xf,q_=QO-1,zO=1024>>Xf,HO=d3+zO,VO=HO,qO=32,GO=VO+qO,KO=65536>>u2,WO=1<<OO,$O=WO-1,BB=function(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))},ZO=function(t,e,i){return t.slice?t.slice(e,i):new Uint32Array(Array.prototype.slice.call(t,e,i))},XO=function(t,e){var i=UO(t),n=Array.isArray(i)?RO(i):new Uint32Array(i),o=Array.isArray(i)?DO(i):new Uint16Array(i),u=24,A=BB(o,u/2,n[4]/2),a=n[5]===2?BB(o,(u+n[4])/2):ZO(n,Math.ceil((u+n[4])/4));return new YO(n[0],n[1],n[2],n[3],A,a)},YO=function(){function t(e,i,n,o,u,A){this.initialValue=e,this.errorValue=i,this.highStart=n,this.highValueIndex=o,this.index=u,this.data=A}return t.prototype.get=function(e){var i;if(e>=0){if(e<55296||e>56319&&e<=65535)return i=this.index[e>>Xf],i=(i<<V_)+(e&q_),this.data[i];if(e<=65535)return i=this.index[d3+(e-55296>>Xf)],i=(i<<V_)+(e&q_),this.data[i];if(e<this.highStart)return i=GO-KO+(e>>u2),i=this.index[i],i+=e>>Xf&$O,i=this.index[i],i=(i<<V_)+(e&q_),this.data[i];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),CB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",JO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sv=0;sv<CB.length;sv++)JO[CB.charCodeAt(sv)]=sv;var eQ=1,G_=2,K_=3,SB=4,EB=5,tQ=7,TB=8,W_=9,$_=10,FB=11,NB=12,MB=13,IB=14,Z_=15,iQ=function(t){for(var e=[],i=0,n=t.length;i<n;){var o=t.charCodeAt(i++);if(o>=55296&&o<=56319&&i<n){var u=t.charCodeAt(i++);(u&64512)===56320?e.push(((o&1023)<<10)+(u&1023)+65536):(e.push(o),i--)}else e.push(o)}return e},nQ=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var n=[],o=-1,u="";++o<i;){var A=t[o];A<=65535?n.push(A):(A-=65536,n.push((A>>10)+55296,A%1024+56320)),(o+1===i||n.length>16384)&&(u+=String.fromCharCode.apply(String,n),n.length=0)}return u},rQ=XO(jO),cA="",X_="",sQ=function(t){return rQ.get(t)},aQ=function(t,e,i){var n=i-2,o=e[n],u=e[i-1],A=e[i];if(u===G_&&A===K_)return cA;if(u===G_||u===K_||u===SB||A===G_||A===K_||A===SB)return X_;if(u===TB&&[TB,W_,FB,NB].indexOf(A)!==-1||(u===FB||u===W_)&&(A===W_||A===$_)||(u===NB||u===$_)&&A===$_||A===MB||A===EB||A===tQ||u===eQ)return cA;if(u===MB&&A===IB){for(;o===EB;)o=e[--n];if(o===IB)return cA}if(u===Z_&&A===Z_){for(var a=0;o===Z_;)a++,o=e[--n];if(a%2===0)return cA}return X_},oQ=function(t){var e=iQ(t),i=e.length,n=0,o=0,u=e.map(sQ);return{next:function(){if(n>=i)return{done:!0,value:null};for(var A=cA;n<i&&(A=aQ(e,u,++n))===cA;);if(A!==cA||n===i){var a=nQ.apply(null,e.slice(o,n));return o=n,{value:a,done:!1}}return{done:!0,value:null}}}},lQ=function(t){for(var e=oQ(t),i=[],n;!(n=e.next()).done;)n.value&&i.push(n.value.slice());return i},cQ=function(t){var e=123;if(t.createRange){var i=t.createRange();if(i.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),i.selectNode(n);var o=i.getBoundingClientRect(),u=Math.round(o.height);if(t.body.removeChild(n),u===e)return!0}}return!1},uQ=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var i=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,o=w1(n.data).map(function(g){return Ga(g)}),u=0,A={},a=o.every(function(g,b){i.setStart(n,u),i.setEnd(n,u+g.length);var B=i.getBoundingClientRect();u+=g.length;var I=B.x>A.x||B.y>A.y;return A=B,b===0?!0:I});return t.body.removeChild(e),a},AQ=function(){return typeof new Image().crossOrigin<"u"},hQ=function(){return typeof new XMLHttpRequest().responseType=="string"},dQ=function(t){var e=new Image,i=t.createElement("canvas"),n=i.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),i.toDataURL()}catch{return!1}return!0},LB=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},fQ=function(t){var e=t.createElement("canvas"),i=100;e.width=i,e.height=i;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,i,i);var o=new Image,u=e.toDataURL();o.src=u;var A=cb(i,i,0,0,o);return n.fillStyle="red",n.fillRect(0,0,i,i),PB(A).then(function(a){n.drawImage(a,0,0);var g=n.getImageData(0,0,i,i).data;n.fillStyle="red",n.fillRect(0,0,i,i);var b=t.createElement("div");return b.style.backgroundImage="url("+u+")",b.style.height=i+"px",LB(g)?PB(cb(i,i,0,0,b)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),LB(n.getImageData(0,0,i,i).data)}).catch(function(){return!1})},cb=function(t,e,i,n,o){var u="http://www.w3.org/2000/svg",A=document.createElementNS(u,"svg"),a=document.createElementNS(u,"foreignObject");return A.setAttributeNS(null,"width",t.toString()),A.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",i.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),A.appendChild(a),a.appendChild(o),A},PB=function(t){return new Promise(function(e,i){var n=new Image;n.onload=function(){return e(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Ul={get SUPPORT_RANGE_BOUNDS(){var t=cQ(document);return Object.defineProperty(Ul,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Ul.SUPPORT_RANGE_BOUNDS&&uQ(document);return Object.defineProperty(Ul,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=dQ(document);return Object.defineProperty(Ul,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?fQ(document):Promise.resolve(!1);return Object.defineProperty(Ul,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=AQ();return Object.defineProperty(Ul,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=hQ();return Object.defineProperty(Ul,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ul,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ul,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},t0=function(){function t(e,i){this.text=e,this.bounds=i}return t}(),pQ=function(t,e,i,n){var o=yQ(e,i),u=[],A=0;return o.forEach(function(a){if(i.textDecorationLine.length||a.trim().length>0)if(Ul.SUPPORT_RANGE_BOUNDS){var g=kB(n,A,a.length).getClientRects();if(g.length>1){var b=A2(a),B=0;b.forEach(function(P){u.push(new t0(P,cd.fromDOMRectList(t,kB(n,B+A,P.length).getClientRects()))),B+=P.length})}else u.push(new t0(a,cd.fromDOMRectList(t,g)))}else{var I=n.splitText(a.length);u.push(new t0(a,mQ(t,n))),n=I}else Ul.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));A+=a.length}),u},mQ=function(t,e){var i=e.ownerDocument;if(i){var n=i.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var o=e.parentNode;if(o){o.replaceChild(n,e);var u=b1(t,n);return n.firstChild&&o.replaceChild(n.firstChild,n),u}}return cd.EMPTY},kB=function(t,e,i){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var o=n.createRange();return o.setStart(t,e),o.setEnd(t,e+i),o},A2=function(t){if(Ul.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(i){return i.segment})}return lQ(t)},gQ=function(t,e){if(Ul.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(t)).map(function(n){return n.segment})}return _Q(t,e)},yQ=function(t,e){return e.letterSpacing!==0?A2(t):gQ(t,e)},vQ=[32,160,4961,65792,65793,4153,4241],_Q=function(t,e){for(var i=KU(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],o,u=function(){if(o.value){var A=o.value.slice(),a=w1(A),g="";a.forEach(function(b){vQ.indexOf(b)===-1?g+=Ga(b):(g.length&&n.push(g),n.push(Ga(b)),g="")}),g.length&&n.push(g)}};!(o=i.next()).done;)u();return n},xQ=function(){function t(e,i,n){this.text=bQ(i.data,n.textTransform),this.textBounds=pQ(e,this.text,n,i)}return t}(),bQ=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(wQ,BQ);case 2:return t.toUpperCase();default:return t}},wQ=/(^|\s|:|-|\(|\))([a-z])/g,BQ=function(t,e,i){return t.length>0?e+i.toUpperCase():t},f3=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this;return o.src=n.currentSrc||n.src,o.intrinsicWidth=n.naturalWidth,o.intrinsicHeight=n.naturalHeight,o.context.cache.addImage(o.src),o}return e}(Th),p3=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this;return o.canvas=n,o.intrinsicWidth=n.width,o.intrinsicHeight=n.height,o}return e}(Th),m3=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this,u=new XMLSerializer,A=b1(i,n);return n.setAttribute("width",A.width+"px"),n.setAttribute("height",A.height+"px"),o.svg="data:image/svg+xml,"+encodeURIComponent(u.serializeToString(n)),o.intrinsicWidth=n.width.baseVal.value,o.intrinsicHeight=n.height.baseVal.value,o.context.cache.addImage(o.svg),o}return e}(Th),g3=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this;return o.value=n.value,o}return e}(Th),ub=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this;return o.start=n.start,o.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,o}return e}(Th),CQ=[{type:15,flags:0,unit:"px",number:3}],SQ=[{type:16,flags:0,number:50}],EQ=function(t){return t.width>t.height?new cd(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new cd(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},TQ=function(t){var e=t.type===FQ?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Vv="checkbox",qv="radio",FQ="password",jB=707406591,h2=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this;switch(o.type=n.type.toLowerCase(),o.checked=n.checked,o.value=TQ(n),(o.type===Vv||o.type===qv)&&(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=EQ(o.bounds)),o.type){case Vv:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=CQ;break;case qv:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=SQ;break}return o}return e}(Th),y3=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this,u=n.options[n.selectedIndex||0];return o.value=u&&u.text||"",o}return e}(Th),v3=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this;return o.value=n.value,o}return e}(Th),_3=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this;o.src=n.src,o.width=parseInt(n.width,10)||0,o.height=parseInt(n.height,10)||0,o.backgroundColor=o.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){o.tree=b3(i,n.contentWindow.document.documentElement);var u=n.contentWindow.document.documentElement?Jg(i,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):sd.TRANSPARENT,A=n.contentWindow.document.body?Jg(i,getComputedStyle(n.contentWindow.document.body).backgroundColor):sd.TRANSPARENT;o.backgroundColor=tf(u)?tf(A)?o.styles.backgroundColor:A:u}}catch{}return o}return e}(Th),NQ=["OL","UL","MENU"],Cv=function(t,e,i,n){for(var o=e.firstChild,u=void 0;o;o=u)if(u=o.nextSibling,w3(o)&&o.data.trim().length>0)i.textNodes.push(new xQ(t,o,i.styles));else if(rm(o))if(E3(o)&&o.assignedNodes)o.assignedNodes().forEach(function(a){return Cv(t,a,i,n)});else{var A=x3(t,o);A.styles.isVisible()&&(MQ(o,A,n)?A.flags|=4:IQ(A.styles)&&(A.flags|=2),NQ.indexOf(o.tagName)!==-1&&(A.flags|=8),i.elements.push(A),o.slot,o.shadowRoot?Cv(t,o.shadowRoot,A,n):!Gv(o)&&!B3(o)&&!Kv(o)&&Cv(t,o,A,n))}},x3=function(t,e){return hb(e)?new f3(t,e):C3(e)?new p3(t,e):B3(e)?new m3(t,e):LQ(e)?new g3(t,e):PQ(e)?new ub(t,e):kQ(e)?new h2(t,e):Kv(e)?new y3(t,e):Gv(e)?new v3(t,e):S3(e)?new _3(t,e):new Th(t,e)},b3=function(t,e){var i=x3(t,e);return i.flags|=4,Cv(t,e,i,i),i},MQ=function(t,e,i){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||d2(t)&&i.styles.isTransparent()},IQ=function(t){return t.isPositioned()||t.isFloating()},w3=function(t){return t.nodeType===Node.TEXT_NODE},rm=function(t){return t.nodeType===Node.ELEMENT_NODE},Ab=function(t){return rm(t)&&typeof t.style<"u"&&!Sv(t)},Sv=function(t){return typeof t.className=="object"},LQ=function(t){return t.tagName==="LI"},PQ=function(t){return t.tagName==="OL"},kQ=function(t){return t.tagName==="INPUT"},jQ=function(t){return t.tagName==="HTML"},B3=function(t){return t.tagName==="svg"},d2=function(t){return t.tagName==="BODY"},C3=function(t){return t.tagName==="CANVAS"},UB=function(t){return t.tagName==="VIDEO"},hb=function(t){return t.tagName==="IMG"},S3=function(t){return t.tagName==="IFRAME"},DB=function(t){return t.tagName==="STYLE"},UQ=function(t){return t.tagName==="SCRIPT"},Gv=function(t){return t.tagName==="TEXTAREA"},Kv=function(t){return t.tagName==="SELECT"},E3=function(t){return t.tagName==="SLOT"},RB=function(t){return t.tagName.indexOf("-")>0},DQ=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var i=this.counters[e];return i&&i.length?i[i.length-1]:1},t.prototype.getCounterValues=function(e){var i=this.counters[e];return i||[]},t.prototype.pop=function(e){var i=this;e.forEach(function(n){return i.counters[n].pop()})},t.prototype.parse=function(e){var i=this,n=e.counterIncrement,o=e.counterReset,u=!0;n!==null&&n.forEach(function(a){var g=i.counters[a.counter];g&&a.increment!==0&&(u=!1,g.length||g.push(1),g[Math.max(0,g.length-1)]+=a.increment)});var A=[];return u&&o.forEach(function(a){var g=i.counters[a.counter];A.push(a.counter),g||(g=i.counters[a.counter]=[]),g.push(a.reset)}),A},t}(),OB={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},QB={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},RQ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},OQ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Zp=function(t,e,i,n,o,u){return t<e||t>i?v0(t,o,u.length>0):n.integers.reduce(function(A,a,g){for(;t>=a;)t-=a,A+=n.values[g];return A},"")+u},T3=function(t,e,i,n){var o="";do i||t--,o=n(t)+o,t/=e;while(t*e>=e);return o},qa=function(t,e,i,n,o){var u=i-e+1;return(t<0?"-":"")+(T3(Math.abs(t),u,n,function(A){return Ga(Math.floor(A%u)+e)})+o)},Pf=function(t,e,i){i===void 0&&(i=". ");var n=e.length;return T3(Math.abs(t),n,!1,function(o){return e[Math.floor(o%n)]})+i},im=1,Od=2,Qd=4,Qg=8,Yh=function(t,e,i,n,o,u){if(t<-9999||t>9999)return v0(t,4,o.length>0);var A=Math.abs(t),a=o;if(A===0)return e[0]+a;for(var g=0;A>0&&g<=4;g++){var b=A%10;b===0&&Oo(u,im)&&a!==""?a=e[b]+a:b>1||b===1&&g===0||b===1&&g===1&&Oo(u,Od)||b===1&&g===1&&Oo(u,Qd)&&t>100||b===1&&g>1&&Oo(u,Qg)?a=e[b]+(g>0?i[g-1]:"")+a:b===1&&g>0&&(a=i[g-1]+a),A=Math.floor(A/10)}return(t<0?n:"")+a},zB="",HB="",VB="",Y_="",v0=function(t,e,i){var n=i?". ":"",o=i?"":"",u=i?", ":"",A=i?" ":"";switch(e){case 0:return""+A;case 1:return""+A;case 2:return""+A;case 5:var a=qa(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return Pf(t,"",o);case 6:return Zp(t,1,3999,OB,3,n).toLowerCase();case 7:return Zp(t,1,3999,OB,3,n);case 8:return qa(t,945,969,!1,n);case 9:return qa(t,97,122,!1,n);case 10:return qa(t,65,90,!1,n);case 11:return qa(t,1632,1641,!0,n);case 12:case 49:return Zp(t,1,9999,QB,3,n);case 35:return Zp(t,1,9999,QB,3,n).toLowerCase();case 13:return qa(t,2534,2543,!0,n);case 14:case 30:return qa(t,6112,6121,!0,n);case 15:return Pf(t,"",o);case 16:return Pf(t,"",o);case 17:case 48:return Yh(t,"",zB,"",o,Od|Qd|Qg);case 47:return Yh(t,"",HB,"",o,im|Od|Qd|Qg);case 42:return Yh(t,"",zB,"",o,Od|Qd|Qg);case 41:return Yh(t,"",HB,"",o,im|Od|Qd|Qg);case 26:return Yh(t,"","",VB,o,0);case 25:return Yh(t,"","",VB,o,im|Od|Qd);case 31:return Yh(t,"","",Y_,u,im|Od|Qd);case 33:return Yh(t,"","",Y_,u,0);case 32:return Yh(t,"","",Y_,u,im|Od|Qd);case 18:return qa(t,2406,2415,!0,n);case 20:return Zp(t,1,19999,OQ,3,n);case 21:return qa(t,2790,2799,!0,n);case 22:return qa(t,2662,2671,!0,n);case 22:return Zp(t,1,10999,RQ,3,n);case 23:return Pf(t,"");case 24:return Pf(t,"");case 27:return qa(t,3302,3311,!0,n);case 28:return Pf(t,"",o);case 29:return Pf(t,"",o);case 34:return qa(t,3792,3801,!0,n);case 37:return qa(t,6160,6169,!0,n);case 38:return qa(t,4160,4169,!0,n);case 39:return qa(t,2918,2927,!0,n);case 40:return qa(t,1776,1785,!0,n);case 43:return qa(t,3046,3055,!0,n);case 44:return qa(t,3174,3183,!0,n);case 45:return qa(t,3664,3673,!0,n);case 46:return qa(t,3872,3881,!0,n);case 3:default:return qa(t,48,57,!0,n)}},F3="data-html2canvas-ignore",qB=function(){function t(e,i,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=i,this.counters=new DQ,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,i){var n=this,o=QQ(e,i);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var u=e.defaultView.pageXOffset,A=e.defaultView.pageYOffset,a=o.contentWindow,g=a.document,b=VQ(o).then(function(){return Oc(n,void 0,void 0,function(){var B,I;return hc(this,function(P){switch(P.label){case 0:return this.scrolledElements.forEach(WQ),a&&(a.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==i.top||a.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-i.left,a.scrollY-i.top,0,0))),B=this.options.onclone,I=this.clonedReferenceElement,typeof I>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:g.fonts&&g.fonts.ready?[4,g.fonts.ready]:[3,2];case 1:P.sent(),P.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,HQ(g)]:[3,4];case 3:P.sent(),P.label=4;case 4:return typeof B=="function"?[2,Promise.resolve().then(function(){return B(g,I)}).then(function(){return o})]:[2,o]}})})});return g.open(),g.write(GQ(document.doctype)+"<html></html>"),KQ(this.referenceElement.ownerDocument,u,A),g.replaceChild(g.adoptNode(this.documentElement),g.documentElement),g.close(),b},t.prototype.createElementClone=function(e){if(lb(e,2))debugger;if(C3(e))return this.createCanvasClone(e);if(UB(e))return this.createVideoClone(e);if(DB(e))return this.createStyleClone(e);var i=e.cloneNode(!1);return hb(i)&&(hb(e)&&e.currentSrc&&e.currentSrc!==e.src&&(i.src=e.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),RB(i)?this.createCustomElementClone(i):i},t.prototype.createCustomElementClone=function(e){var i=document.createElement("html2canvascustomelement");return J_(e.style,i),i},t.prototype.createStyleClone=function(e){try{var i=e.sheet;if(i&&i.cssRules){var n=[].slice.call(i.cssRules,0).reduce(function(u,A){return A&&typeof A.cssText=="string"?u+A.cssText:u},""),o=e.cloneNode(!1);return o.textContent=n,o}}catch(u){if(this.context.logger.error("Unable to access cssRules property",u),u.name!=="SecurityError")throw u}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var i;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var o=e.cloneNode(!1);try{o.width=e.width,o.height=e.height;var u=e.getContext("2d"),A=o.getContext("2d");if(A)if(!this.options.allowTaint&&u)A.putImageData(u.getImageData(0,0,e.width,e.height),0,0);else{var a=(i=e.getContext("webgl2"))!==null&&i!==void 0?i:e.getContext("webgl");if(a){var g=a.getContextAttributes();g?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}A.drawImage(e,0,0)}return o}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return o},t.prototype.createVideoClone=function(e){var i=e.ownerDocument.createElement("canvas");i.width=e.offsetWidth,i.height=e.offsetHeight;var n=i.getContext("2d");try{return n&&(n.drawImage(e,0,0,i.width,i.height),this.options.allowTaint||n.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var o=e.ownerDocument.createElement("canvas");return o.width=e.offsetWidth,o.height=e.offsetHeight,o},t.prototype.appendChildNode=function(e,i,n){(!rm(i)||!UQ(i)&&!i.hasAttribute(F3)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!rm(i)||!DB(i))&&e.appendChild(this.cloneNode(i,n))},t.prototype.cloneChildNodes=function(e,i,n){for(var o=this,u=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;u;u=u.nextSibling)if(rm(u)&&E3(u)&&typeof u.assignedNodes=="function"){var A=u.assignedNodes();A.length&&A.forEach(function(a){return o.appendChildNode(i,a,n)})}else this.appendChildNode(i,u,n)},t.prototype.cloneNode=function(e,i){if(w3(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&rm(e)&&(Ab(e)||Sv(e))){var o=this.createElementClone(e);o.style.transitionProperty="none";var u=n.getComputedStyle(e),A=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&Ab(o)&&(this.clonedReferenceElement=o),d2(o)&&XQ(o);var g=this.counters.parse(new bB(this.context,u)),b=this.resolvePseudoContent(e,o,A,i0.BEFORE);RB(e)&&(i=!0),UB(e)||this.cloneChildNodes(e,o,i),b&&o.insertBefore(b,o.firstChild);var B=this.resolvePseudoContent(e,o,a,i0.AFTER);return B&&o.appendChild(B),this.counters.pop(g),(u&&(this.options.copyStyles||Sv(e))&&!S3(e)||i)&&J_(u,o),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([o,e.scrollLeft,e.scrollTop]),(Gv(e)||Kv(e))&&(Gv(o)||Kv(o))&&(o.value=e.value),o}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,i,n,o){var u=this;if(n){var A=n.content,a=i.ownerDocument;if(!(!a||!A||A==="none"||A==="-moz-alt-content"||n.display==="none")){this.counters.parse(new bB(this.context,n));var g=new LO(this.context,n),b=a.createElement("html2canvaspseudoelement");J_(n,b),g.content.forEach(function(I){if(I.type===0)b.appendChild(a.createTextNode(I.value));else if(I.type===22){var P=a.createElement("img");P.src=I.value,P.style.opacity="1",b.appendChild(P)}else if(I.type===18){if(I.name==="attr"){var F=I.values.filter(vs);F.length&&b.appendChild(a.createTextNode(e.getAttribute(F[0].value)||""))}else if(I.name==="counter"){var Q=I.values.filter(pm),R=Q[0],H=Q[1];if(R&&vs(R)){var j=u.counters.getCounterValue(R.value),V=H&&vs(H)?ob.parse(u.context,H.value):3;b.appendChild(a.createTextNode(v0(j,V,!1)))}}else if(I.name==="counters"){var W=I.values.filter(pm),R=W[0],ne=W[1],H=W[2];if(R&&vs(R)){var te=u.counters.getCounterValues(R.value),de=H&&vs(H)?ob.parse(u.context,H.value):3,ee=ne&&ne.type===0?ne.value:"",re=te.map(function(se){return v0(se,de,!1)}).join(ee);b.appendChild(a.createTextNode(re))}}}else if(I.type===20)switch(I.value){case"open-quote":b.appendChild(a.createTextNode(xB(g.quotes,u.quoteDepth++,!0)));break;case"close-quote":b.appendChild(a.createTextNode(xB(g.quotes,--u.quoteDepth,!1)));break;default:b.appendChild(a.createTextNode(I.value))}}),b.className=db+" "+fb;var B=o===i0.BEFORE?" "+db:" "+fb;return Sv(i)?i.className.baseValue+=B:i.className+=B,b}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),i0;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(i0||(i0={}));var QQ=function(t,e){var i=t.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=e.width.toString(),i.height=e.height.toString(),i.scrolling="no",i.setAttribute(F3,"true"),t.body.appendChild(i),i},zQ=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},HQ=function(t){return Promise.all([].slice.call(t.images,0).map(zQ))},VQ=function(t){return new Promise(function(e,i){var n=t.contentWindow;if(!n)return i("No window assigned for iframe");var o=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var u=setInterval(function(){o.body.childNodes.length>0&&o.readyState==="complete"&&(clearInterval(u),e(t))},50)}})},qQ=["all","d","content"],J_=function(t,e){for(var i=t.length-1;i>=0;i--){var n=t.item(i);qQ.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},GQ=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},KQ=function(t,e,i){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||i!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,i)},WQ=function(t){var e=t[0],i=t[1],n=t[2];e.scrollLeft=i,e.scrollTop=n},$Q=":before",ZQ=":after",db="___html2canvas___pseudoelement_before",fb="___html2canvas___pseudoelement_after",GB=`{
    content: "" !important;
    display: none !important;
}`,XQ=function(t){YQ(t,"."+db+$Q+GB+`
         .`+fb+ZQ+GB)},YQ=function(t,e){var i=t.ownerDocument;if(i){var n=i.createElement("style");n.textContent=e,t.appendChild(n)}},N3=function(){function t(){}return t.getOrigin=function(e){var i=t._link;return i?(i.href=e,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),JQ=function(){function t(e,i){this.context=e,this._options=i,this._cache={}}return t.prototype.addImage=function(e){var i=Promise.resolve();return this.has(e)||(tx(e)||n7(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),i},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Oc(this,void 0,void 0,function(){var i,n,o,u,A=this;return hc(this,function(a){switch(a.label){case 0:return i=N3.isSameOrigin(e),n=!ex(e)&&this._options.useCORS===!0&&Ul.SUPPORT_CORS_IMAGES&&!i,o=!ex(e)&&!i&&!tx(e)&&typeof this._options.proxy=="string"&&Ul.SUPPORT_CORS_XHR&&!n,!i&&this._options.allowTaint===!1&&!ex(e)&&!tx(e)&&!o&&!n?[2]:(u=e,o?[4,this.proxy(u)]:[3,2]);case 1:u=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(g,b){var B=new Image;B.onload=function(){return g(B)},B.onerror=b,(r7(u)||n)&&(B.crossOrigin="anonymous"),B.src=u,B.complete===!0&&setTimeout(function(){return g(B)},500),A._options.imageTimeout>0&&setTimeout(function(){return b("Timed out ("+A._options.imageTimeout+"ms) loading image")},A._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var i=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var o=e.substring(0,256);return new Promise(function(u,A){var a=Ul.SUPPORT_RESPONSE_TYPE?"blob":"text",g=new XMLHttpRequest;g.onload=function(){if(g.status===200)if(a==="text")u(g.response);else{var I=new FileReader;I.addEventListener("load",function(){return u(I.result)},!1),I.addEventListener("error",function(P){return A(P)},!1),I.readAsDataURL(g.response)}else A("Failed to proxy resource "+o+" with status code "+g.status)},g.onerror=A;var b=n.indexOf("?")>-1?"&":"?";if(g.open("GET",""+n+b+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&g instanceof XMLHttpRequest&&(g.responseType=a),i._options.imageTimeout){var B=i._options.imageTimeout;g.timeout=B,g.ontimeout=function(){return A("Timed out ("+B+"ms) proxying "+o)}}g.send()})},t}(),e7=/^data:image\/svg\+xml/i,t7=/^data:image\/.*;base64,/i,i7=/^data:image\/.*/i,n7=function(t){return Ul.SUPPORT_SVG_DRAWING||!s7(t)},ex=function(t){return i7.test(t)},r7=function(t){return t7.test(t)},tx=function(t){return t.substr(0,4)==="blob"},s7=function(t){return t.substr(-3).toLowerCase()==="svg"||e7.test(t)},Qi=function(){function t(e,i){this.type=0,this.x=e,this.y=i}return t.prototype.add=function(e,i){return new t(this.x+e,this.y+i)},t}(),Xp=function(t,e,i){return new Qi(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)},av=function(){function t(e,i,n,o){this.type=1,this.start=e,this.startControl=i,this.endControl=n,this.end=o}return t.prototype.subdivide=function(e,i){var n=Xp(this.start,this.startControl,e),o=Xp(this.startControl,this.endControl,e),u=Xp(this.endControl,this.end,e),A=Xp(n,o,e),a=Xp(o,u,e),g=Xp(A,a,e);return i?new t(this.start,n,A,g):new t(g,a,u,this.end)},t.prototype.add=function(e,i){return new t(this.start.add(e,i),this.startControl.add(e,i),this.endControl.add(e,i),this.end.add(e,i))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),AA=function(t){return t.type===1},a7=function(){function t(e){var i=e.styles,n=e.bounds,o=Rg(i.borderTopLeftRadius,n.width,n.height),u=o[0],A=o[1],a=Rg(i.borderTopRightRadius,n.width,n.height),g=a[0],b=a[1],B=Rg(i.borderBottomRightRadius,n.width,n.height),I=B[0],P=B[1],F=Rg(i.borderBottomLeftRadius,n.width,n.height),Q=F[0],R=F[1],H=[];H.push((u+g)/n.width),H.push((Q+I)/n.width),H.push((A+R)/n.height),H.push((b+P)/n.height);var j=Math.max.apply(Math,H);j>1&&(u/=j,A/=j,g/=j,b/=j,I/=j,P/=j,Q/=j,R/=j);var V=n.width-g,W=n.height-P,ne=n.width-I,te=n.height-R,de=i.borderTopWidth,ee=i.borderRightWidth,re=i.borderBottomWidth,xe=i.borderLeftWidth,Be=Vs(i.paddingTop,e.bounds.width),se=Vs(i.paddingRight,e.bounds.width),ae=Vs(i.paddingBottom,e.bounds.width),ce=Vs(i.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=u>0||A>0?la(n.left+xe/3,n.top+de/3,u-xe/3,A-de/3,is.TOP_LEFT):new Qi(n.left+xe/3,n.top+de/3),this.topRightBorderDoubleOuterBox=u>0||A>0?la(n.left+V,n.top+de/3,g-ee/3,b-de/3,is.TOP_RIGHT):new Qi(n.left+n.width-ee/3,n.top+de/3),this.bottomRightBorderDoubleOuterBox=I>0||P>0?la(n.left+ne,n.top+W,I-ee/3,P-re/3,is.BOTTOM_RIGHT):new Qi(n.left+n.width-ee/3,n.top+n.height-re/3),this.bottomLeftBorderDoubleOuterBox=Q>0||R>0?la(n.left+xe/3,n.top+te,Q-xe/3,R-re/3,is.BOTTOM_LEFT):new Qi(n.left+xe/3,n.top+n.height-re/3),this.topLeftBorderDoubleInnerBox=u>0||A>0?la(n.left+xe*2/3,n.top+de*2/3,u-xe*2/3,A-de*2/3,is.TOP_LEFT):new Qi(n.left+xe*2/3,n.top+de*2/3),this.topRightBorderDoubleInnerBox=u>0||A>0?la(n.left+V,n.top+de*2/3,g-ee*2/3,b-de*2/3,is.TOP_RIGHT):new Qi(n.left+n.width-ee*2/3,n.top+de*2/3),this.bottomRightBorderDoubleInnerBox=I>0||P>0?la(n.left+ne,n.top+W,I-ee*2/3,P-re*2/3,is.BOTTOM_RIGHT):new Qi(n.left+n.width-ee*2/3,n.top+n.height-re*2/3),this.bottomLeftBorderDoubleInnerBox=Q>0||R>0?la(n.left+xe*2/3,n.top+te,Q-xe*2/3,R-re*2/3,is.BOTTOM_LEFT):new Qi(n.left+xe*2/3,n.top+n.height-re*2/3),this.topLeftBorderStroke=u>0||A>0?la(n.left+xe/2,n.top+de/2,u-xe/2,A-de/2,is.TOP_LEFT):new Qi(n.left+xe/2,n.top+de/2),this.topRightBorderStroke=u>0||A>0?la(n.left+V,n.top+de/2,g-ee/2,b-de/2,is.TOP_RIGHT):new Qi(n.left+n.width-ee/2,n.top+de/2),this.bottomRightBorderStroke=I>0||P>0?la(n.left+ne,n.top+W,I-ee/2,P-re/2,is.BOTTOM_RIGHT):new Qi(n.left+n.width-ee/2,n.top+n.height-re/2),this.bottomLeftBorderStroke=Q>0||R>0?la(n.left+xe/2,n.top+te,Q-xe/2,R-re/2,is.BOTTOM_LEFT):new Qi(n.left+xe/2,n.top+n.height-re/2),this.topLeftBorderBox=u>0||A>0?la(n.left,n.top,u,A,is.TOP_LEFT):new Qi(n.left,n.top),this.topRightBorderBox=g>0||b>0?la(n.left+V,n.top,g,b,is.TOP_RIGHT):new Qi(n.left+n.width,n.top),this.bottomRightBorderBox=I>0||P>0?la(n.left+ne,n.top+W,I,P,is.BOTTOM_RIGHT):new Qi(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=Q>0||R>0?la(n.left,n.top+te,Q,R,is.BOTTOM_LEFT):new Qi(n.left,n.top+n.height),this.topLeftPaddingBox=u>0||A>0?la(n.left+xe,n.top+de,Math.max(0,u-xe),Math.max(0,A-de),is.TOP_LEFT):new Qi(n.left+xe,n.top+de),this.topRightPaddingBox=g>0||b>0?la(n.left+Math.min(V,n.width-ee),n.top+de,V>n.width+ee?0:Math.max(0,g-ee),Math.max(0,b-de),is.TOP_RIGHT):new Qi(n.left+n.width-ee,n.top+de),this.bottomRightPaddingBox=I>0||P>0?la(n.left+Math.min(ne,n.width-xe),n.top+Math.min(W,n.height-re),Math.max(0,I-ee),Math.max(0,P-re),is.BOTTOM_RIGHT):new Qi(n.left+n.width-ee,n.top+n.height-re),this.bottomLeftPaddingBox=Q>0||R>0?la(n.left+xe,n.top+Math.min(te,n.height-re),Math.max(0,Q-xe),Math.max(0,R-re),is.BOTTOM_LEFT):new Qi(n.left+xe,n.top+n.height-re),this.topLeftContentBox=u>0||A>0?la(n.left+xe+ce,n.top+de+Be,Math.max(0,u-(xe+ce)),Math.max(0,A-(de+Be)),is.TOP_LEFT):new Qi(n.left+xe+ce,n.top+de+Be),this.topRightContentBox=g>0||b>0?la(n.left+Math.min(V,n.width+xe+ce),n.top+de+Be,V>n.width+xe+ce?0:g-xe+ce,b-(de+Be),is.TOP_RIGHT):new Qi(n.left+n.width-(ee+se),n.top+de+Be),this.bottomRightContentBox=I>0||P>0?la(n.left+Math.min(ne,n.width-(xe+ce)),n.top+Math.min(W,n.height+de+Be),Math.max(0,I-(ee+se)),P-(re+ae),is.BOTTOM_RIGHT):new Qi(n.left+n.width-(ee+se),n.top+n.height-(re+ae)),this.bottomLeftContentBox=Q>0||R>0?la(n.left+xe+ce,n.top+te,Math.max(0,Q-(xe+ce)),R-(re+ae),is.BOTTOM_LEFT):new Qi(n.left+xe+ce,n.top+n.height-(re+ae))}return t}(),is;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(is||(is={}));var la=function(t,e,i,n,o){var u=4*((Math.sqrt(2)-1)/3),A=i*u,a=n*u,g=t+i,b=e+n;switch(o){case is.TOP_LEFT:return new av(new Qi(t,b),new Qi(t,b-a),new Qi(g-A,e),new Qi(g,e));case is.TOP_RIGHT:return new av(new Qi(t,e),new Qi(t+A,e),new Qi(g,b-a),new Qi(g,b));case is.BOTTOM_RIGHT:return new av(new Qi(g,e),new Qi(g,e+a),new Qi(t+A,b),new Qi(t,b));case is.BOTTOM_LEFT:default:return new av(new Qi(g,b),new Qi(g-A,b),new Qi(t,e+a),new Qi(t,e))}},Wv=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},o7=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},$v=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},l7=function(){function t(e,i,n){this.offsetX=e,this.offsetY=i,this.matrix=n,this.type=0,this.target=6}return t}(),ov=function(){function t(e,i){this.path=e,this.target=i,this.type=1}return t}(),c7=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),u7=function(t){return t.type===0},M3=function(t){return t.type===1},A7=function(t){return t.type===2},KB=function(t,e){return t.length===e.length?t.some(function(i,n){return i===e[n]}):!1},h7=function(t,e,i,n,o){return t.map(function(u,A){switch(A){case 0:return u.add(e,i);case 1:return u.add(e+n,i);case 2:return u.add(e+n,i+o);case 3:return u.add(e,i+o)}return u})},I3=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),L3=function(){function t(e,i){if(this.container=e,this.parent=i,this.effects=[],this.curves=new a7(this.container),this.container.styles.opacity<1&&this.effects.push(new c7(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,o=this.container.bounds.top+this.container.styles.transformOrigin[1].number,u=this.container.styles.transform;this.effects.push(new l7(n,o,u))}if(this.container.styles.overflowX!==0){var A=Wv(this.curves),a=$v(this.curves);KB(A,a)?this.effects.push(new ov(A,6)):(this.effects.push(new ov(A,2)),this.effects.push(new ov(a,4)))}}return t.prototype.getEffects=function(e){for(var i=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,o=this.effects.slice(0);n;){var u=n.effects.filter(function(g){return!M3(g)});if(i||n.container.styles.position!==0||!n.parent){if(o.unshift.apply(o,u),i=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var A=Wv(n.curves),a=$v(n.curves);KB(A,a)||o.unshift(new ov(a,6))}}else o.unshift.apply(o,u);n=n.parent}return o.filter(function(g){return Oo(g.target,e)})},t}(),pb=function(t,e,i,n){t.container.elements.forEach(function(o){var u=Oo(o.flags,4),A=Oo(o.flags,2),a=new L3(o,t);Oo(o.styles.display,2048)&&n.push(a);var g=Oo(o.flags,8)?[]:n;if(u||A){var b=u||o.styles.isPositioned()?i:e,B=new I3(a);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var I=o.styles.zIndex.order;if(I<0){var P=0;b.negativeZIndex.some(function(Q,R){return I>Q.element.container.styles.zIndex.order?(P=R,!1):P>0}),b.negativeZIndex.splice(P,0,B)}else if(I>0){var F=0;b.positiveZIndex.some(function(Q,R){return I>=Q.element.container.styles.zIndex.order?(F=R+1,!1):F>0}),b.positiveZIndex.splice(F,0,B)}else b.zeroOrAutoZIndexOrTransformedOrOpacity.push(B)}else o.styles.isFloating()?b.nonPositionedFloats.push(B):b.nonPositionedInlineLevel.push(B);pb(a,B,u?B:i,g)}else o.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),pb(a,e,i,g);Oo(o.flags,8)&&P3(o,g)})},P3=function(t,e){for(var i=t instanceof ub?t.start:1,n=t instanceof ub?t.reversed:!1,o=0;o<e.length;o++){var u=e[o];u.container instanceof g3&&typeof u.container.value=="number"&&u.container.value!==0&&(i=u.container.value),u.listValue=v0(i,u.container.styles.listStyleType,!0),i+=n?-1:1}},d7=function(t){var e=new L3(t,null),i=new I3(e),n=[];return pb(e,i,i,n),P3(e.container,n),i},WB=function(t,e){switch(e){case 0:return fA(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return fA(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return fA(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return fA(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},f7=function(t,e){switch(e){case 0:return fA(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return fA(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return fA(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return fA(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},p7=function(t,e){switch(e){case 0:return fA(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return fA(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return fA(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return fA(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},m7=function(t,e){switch(e){case 0:return lv(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return lv(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return lv(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return lv(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},lv=function(t,e){var i=[];return AA(t)?i.push(t.subdivide(.5,!1)):i.push(t),AA(e)?i.push(e.subdivide(.5,!0)):i.push(e),i},fA=function(t,e,i,n){var o=[];return AA(t)?o.push(t.subdivide(.5,!1)):o.push(t),AA(i)?o.push(i.subdivide(.5,!0)):o.push(i),AA(n)?o.push(n.subdivide(.5,!0).reverse()):o.push(n),AA(e)?o.push(e.subdivide(.5,!1).reverse()):o.push(e),o},k3=function(t){var e=t.bounds,i=t.styles;return e.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},Zv=function(t){var e=t.styles,i=t.bounds,n=Vs(e.paddingLeft,i.width),o=Vs(e.paddingRight,i.width),u=Vs(e.paddingTop,i.width),A=Vs(e.paddingBottom,i.width);return i.add(n+e.borderLeftWidth,u+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+o),-(e.borderTopWidth+e.borderBottomWidth+u+A))},g7=function(t,e){return t===0?e.bounds:t===2?Zv(e):k3(e)},y7=function(t,e){return t===0?e.bounds:t===2?Zv(e):k3(e)},ix=function(t,e,i){var n=g7(nm(t.styles.backgroundOrigin,e),t),o=y7(nm(t.styles.backgroundClip,e),t),u=v7(nm(t.styles.backgroundSize,e),i,n),A=u[0],a=u[1],g=Rg(nm(t.styles.backgroundPosition,e),n.width-A,n.height-a),b=_7(nm(t.styles.backgroundRepeat,e),g,u,n,o),B=Math.round(n.left+g[0]),I=Math.round(n.top+g[1]);return[b,B,I,A,a]},Yp=function(t){return vs(t)&&t.value===um.AUTO},cv=function(t){return typeof t=="number"},v7=function(t,e,i){var n=e[0],o=e[1],u=e[2],A=t[0],a=t[1];if(!A)return[0,0];if(mo(A)&&a&&mo(a))return[Vs(A,i.width),Vs(a,i.height)];var g=cv(u);if(vs(A)&&(A.value===um.CONTAIN||A.value===um.COVER)){if(cv(u)){var b=i.width/i.height;return b<u!=(A.value===um.COVER)?[i.width,i.width/u]:[i.height*u,i.height]}return[i.width,i.height]}var B=cv(n),I=cv(o),P=B||I;if(Yp(A)&&(!a||Yp(a))){if(B&&I)return[n,o];if(!g&&!P)return[i.width,i.height];if(P&&g){var F=B?n:o*u,Q=I?o:n/u;return[F,Q]}var R=B?n:i.width,H=I?o:i.height;return[R,H]}if(g){var j=0,V=0;return mo(A)?j=Vs(A,i.width):mo(a)&&(V=Vs(a,i.height)),Yp(A)?j=V*u:(!a||Yp(a))&&(V=j/u),[j,V]}var W=null,ne=null;if(mo(A)?W=Vs(A,i.width):a&&mo(a)&&(ne=Vs(a,i.height)),W!==null&&(!a||Yp(a))&&(ne=B&&I?W/n*o:i.height),ne!==null&&Yp(A)&&(W=B&&I?ne/o*n:i.width),W!==null&&ne!==null)return[W,ne];throw new Error("Unable to calculate background-size for element")},nm=function(t,e){var i=t[e];return typeof i>"u"?t[0]:i},_7=function(t,e,i,n,o){var u=e[0],A=e[1],a=i[0],g=i[1];switch(t){case 2:return[new Qi(Math.round(n.left),Math.round(n.top+A)),new Qi(Math.round(n.left+n.width),Math.round(n.top+A)),new Qi(Math.round(n.left+n.width),Math.round(g+n.top+A)),new Qi(Math.round(n.left),Math.round(g+n.top+A))];case 3:return[new Qi(Math.round(n.left+u),Math.round(n.top)),new Qi(Math.round(n.left+u+a),Math.round(n.top)),new Qi(Math.round(n.left+u+a),Math.round(n.height+n.top)),new Qi(Math.round(n.left+u),Math.round(n.height+n.top))];case 1:return[new Qi(Math.round(n.left+u),Math.round(n.top+A)),new Qi(Math.round(n.left+u+a),Math.round(n.top+A)),new Qi(Math.round(n.left+u+a),Math.round(n.top+A+g)),new Qi(Math.round(n.left+u),Math.round(n.top+A+g))];default:return[new Qi(Math.round(o.left),Math.round(o.top)),new Qi(Math.round(o.left+o.width),Math.round(o.top)),new Qi(Math.round(o.left+o.width),Math.round(o.height+o.top)),new Qi(Math.round(o.left),Math.round(o.height+o.top))]}},x7="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",$B="Hidden Text",b7=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,i){var n=this._document.createElement("div"),o=this._document.createElement("img"),u=this._document.createElement("span"),A=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=i,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",A.appendChild(n),o.src=x7,o.width=1,o.height=1,o.style.margin="0",o.style.padding="0",o.style.verticalAlign="baseline",u.style.fontFamily=e,u.style.fontSize=i,u.style.margin="0",u.style.padding="0",u.appendChild(this._document.createTextNode($B)),n.appendChild(u),n.appendChild(o);var a=o.offsetTop-u.offsetTop+2;n.removeChild(u),n.appendChild(this._document.createTextNode($B)),n.style.lineHeight="normal",o.style.verticalAlign="super";var g=o.offsetTop-n.offsetTop+2;return A.removeChild(n),{baseline:a,middle:g}},t.prototype.getMetrics=function(e,i){var n=e+" "+i;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,i)),this._data[n]},t}(),j3=function(){function t(e,i){this.context=e,this.options=i}return t}(),w7=1e4,B7=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this;return o._activeEffects=[],o.canvas=n.canvas?n.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),n.canvas||(o.canvas.width=Math.floor(n.width*n.scale),o.canvas.height=Math.floor(n.height*n.scale),o.canvas.style.width=n.width+"px",o.canvas.style.height=n.height+"px"),o.fontMetrics=new b7(document),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-n.x,-n.y),o.ctx.textBaseline="bottom",o._activeEffects=[],o.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),o}return e.prototype.applyEffects=function(i){for(var n=this;this._activeEffects.length;)this.popEffect();i.forEach(function(o){return n.applyEffect(o)})},e.prototype.applyEffect=function(i){this.ctx.save(),A7(i)&&(this.ctx.globalAlpha=i.opacity),u7(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),M3(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(i){return Oc(this,void 0,void 0,function(){var n;return hc(this,function(o){switch(o.label){case 0:return n=i.element.container.styles,n.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(i){return Oc(this,void 0,void 0,function(){return hc(this,function(n){switch(n.label){case 0:if(Oo(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(i)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(i,n,o){var u=this;if(n===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+o);else{var A=A2(i.text);A.reduce(function(a,g){return u.ctx.fillText(g,a,i.bounds.top+o),a+u.ctx.measureText(g).width},i.bounds.left)}},e.prototype.createFontStyle=function(i){var n=i.fontVariant.filter(function(A){return A==="normal"||A==="small-caps"}).join(""),o=F7(i.fontFamily).join(", "),u=M0(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,n,i.fontWeight,u,o].join(" "),o,u]},e.prototype.renderTextNode=function(i,n){return Oc(this,void 0,void 0,function(){var o,u,A,a,g,b,B,I,P=this;return hc(this,function(F){return o=this.createFontStyle(n),u=o[0],A=o[1],a=o[2],this.ctx.font=u,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",g=this.fontMetrics.getMetrics(A,a),b=g.baseline,B=g.middle,I=n.paintOrder,i.textBounds.forEach(function(Q){I.forEach(function(R){switch(R){case 0:P.ctx.fillStyle=dl(n.color),P.renderTextWithLetterSpacing(Q,n.letterSpacing,b);var H=n.textShadow;H.length&&Q.text.trim().length&&(H.slice(0).reverse().forEach(function(j){P.ctx.shadowColor=dl(j.color),P.ctx.shadowOffsetX=j.offsetX.number*P.options.scale,P.ctx.shadowOffsetY=j.offsetY.number*P.options.scale,P.ctx.shadowBlur=j.blur.number,P.renderTextWithLetterSpacing(Q,n.letterSpacing,b)}),P.ctx.shadowColor="",P.ctx.shadowOffsetX=0,P.ctx.shadowOffsetY=0,P.ctx.shadowBlur=0),n.textDecorationLine.length&&(P.ctx.fillStyle=dl(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(j){switch(j){case 1:P.ctx.fillRect(Q.bounds.left,Math.round(Q.bounds.top+b),Q.bounds.width,1);break;case 2:P.ctx.fillRect(Q.bounds.left,Math.round(Q.bounds.top),Q.bounds.width,1);break;case 3:P.ctx.fillRect(Q.bounds.left,Math.ceil(Q.bounds.top+B),Q.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&Q.text.trim().length&&(P.ctx.strokeStyle=dl(n.webkitTextStrokeColor),P.ctx.lineWidth=n.webkitTextStrokeWidth,P.ctx.lineJoin=window.chrome?"miter":"round",P.ctx.strokeText(Q.text,Q.bounds.left,Q.bounds.top+b)),P.ctx.strokeStyle="",P.ctx.lineWidth=0,P.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(i,n,o){if(o&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var u=Zv(i),A=$v(n);this.path(A),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(o,0,0,i.intrinsicWidth,i.intrinsicHeight,u.left,u.top,u.width,u.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(i){return Oc(this,void 0,void 0,function(){var n,o,u,A,a,g,V,V,b,B,I,P,ne,F,Q,te,R,H,j,V,W,ne,te;return hc(this,function(de){switch(de.label){case 0:this.applyEffects(i.getEffects(4)),n=i.container,o=i.curves,u=n.styles,A=0,a=n.textNodes,de.label=1;case 1:return A<a.length?(g=a[A],[4,this.renderTextNode(g,u)]):[3,4];case 2:de.sent(),de.label=3;case 3:return A++,[3,1];case 4:if(!(n instanceof f3))return[3,8];de.label=5;case 5:return de.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return V=de.sent(),this.renderReplacedElement(n,o,V),[3,8];case 7:return de.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof p3&&this.renderReplacedElement(n,o,n.canvas),!(n instanceof m3))return[3,12];de.label=9;case 9:return de.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return V=de.sent(),this.renderReplacedElement(n,o,V),[3,12];case 11:return de.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof _3&&n.tree?(b=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,b.render(n.tree)]):[3,14];case 13:B=de.sent(),n.width&&n.height&&this.ctx.drawImage(B,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),de.label=14;case 14:if(n instanceof h2&&(I=Math.min(n.bounds.width,n.bounds.height),n.type===Vv?n.checked&&(this.ctx.save(),this.path([new Qi(n.bounds.left+I*.39363,n.bounds.top+I*.79),new Qi(n.bounds.left+I*.16,n.bounds.top+I*.5549),new Qi(n.bounds.left+I*.27347,n.bounds.top+I*.44071),new Qi(n.bounds.left+I*.39694,n.bounds.top+I*.5649),new Qi(n.bounds.left+I*.72983,n.bounds.top+I*.23),new Qi(n.bounds.left+I*.84,n.bounds.top+I*.34085),new Qi(n.bounds.left+I*.39363,n.bounds.top+I*.79)]),this.ctx.fillStyle=dl(jB),this.ctx.fill(),this.ctx.restore()):n.type===qv&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+I/2,n.bounds.top+I/2,I/4,0,Math.PI*2,!0),this.ctx.fillStyle=dl(jB),this.ctx.fill(),this.ctx.restore())),C7(n)&&n.value.length){switch(P=this.createFontStyle(u),ne=P[0],F=P[1],Q=this.fontMetrics.getMetrics(ne,F).baseline,this.ctx.font=ne,this.ctx.fillStyle=dl(u.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=E7(n.styles.textAlign),te=Zv(n),R=0,n.styles.textAlign){case 1:R+=te.width/2;break;case 2:R+=te.width;break}H=te.add(R,0,0,-te.height/2+1),this.ctx.save(),this.path([new Qi(te.left,te.top),new Qi(te.left+te.width,te.top),new Qi(te.left+te.width,te.top+te.height),new Qi(te.left,te.top+te.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new t0(n.value,H),u.letterSpacing,Q),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Oo(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(j=n.styles.listStyleImage,j.type!==0)return[3,18];V=void 0,W=j.url,de.label=15;case 15:return de.trys.push([15,17,,18]),[4,this.context.cache.match(W)];case 16:return V=de.sent(),this.ctx.drawImage(V,n.bounds.left-(V.width+10),n.bounds.top),[3,18];case 17:return de.sent(),this.context.logger.error("Error loading list-style-image "+W),[3,18];case 18:return[3,20];case 19:i.listValue&&n.styles.listStyleType!==-1&&(ne=this.createFontStyle(u)[0],this.ctx.font=ne,this.ctx.fillStyle=dl(u.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",te=new cd(n.bounds.left,n.bounds.top+Vs(n.styles.paddingTop,n.bounds.width),n.bounds.width,vB(u.lineHeight,u.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new t0(i.listValue,te),u.letterSpacing,vB(u.lineHeight,u.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),de.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(i){return Oc(this,void 0,void 0,function(){var n,o,j,u,A,j,a,g,j,b,B,j,I,P,j,F,Q,j,R,H,j;return hc(this,function(V){switch(V.label){case 0:if(Oo(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:V.sent(),n=0,o=i.negativeZIndex,V.label=2;case 2:return n<o.length?(j=o[n],[4,this.renderStack(j)]):[3,5];case 3:V.sent(),V.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:V.sent(),u=0,A=i.nonInlineLevel,V.label=7;case 7:return u<A.length?(j=A[u],[4,this.renderNode(j)]):[3,10];case 8:V.sent(),V.label=9;case 9:return u++,[3,7];case 10:a=0,g=i.nonPositionedFloats,V.label=11;case 11:return a<g.length?(j=g[a],[4,this.renderStack(j)]):[3,14];case 12:V.sent(),V.label=13;case 13:return a++,[3,11];case 14:b=0,B=i.nonPositionedInlineLevel,V.label=15;case 15:return b<B.length?(j=B[b],[4,this.renderStack(j)]):[3,18];case 16:V.sent(),V.label=17;case 17:return b++,[3,15];case 18:I=0,P=i.inlineLevel,V.label=19;case 19:return I<P.length?(j=P[I],[4,this.renderNode(j)]):[3,22];case 20:V.sent(),V.label=21;case 21:return I++,[3,19];case 22:F=0,Q=i.zeroOrAutoZIndexOrTransformedOrOpacity,V.label=23;case 23:return F<Q.length?(j=Q[F],[4,this.renderStack(j)]):[3,26];case 24:V.sent(),V.label=25;case 25:return F++,[3,23];case 26:R=0,H=i.positiveZIndex,V.label=27;case 27:return R<H.length?(j=H[R],[4,this.renderStack(j)]):[3,30];case 28:V.sent(),V.label=29;case 29:return R++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},e.prototype.formatPath=function(i){var n=this;i.forEach(function(o,u){var A=AA(o)?o.start:o;u===0?n.ctx.moveTo(A.x,A.y):n.ctx.lineTo(A.x,A.y),AA(o)&&n.ctx.bezierCurveTo(o.startControl.x,o.startControl.y,o.endControl.x,o.endControl.y,o.end.x,o.end.y)})},e.prototype.renderRepeat=function(i,n,o,u){this.path(i),this.ctx.fillStyle=n,this.ctx.translate(o,u),this.ctx.fill(),this.ctx.translate(-o,-u)},e.prototype.resizeImage=function(i,n,o){var u;if(i.width===n&&i.height===o)return i;var A=(u=this.canvas.ownerDocument)!==null&&u!==void 0?u:document,a=A.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,o);var g=a.getContext("2d");return g.drawImage(i,0,0,i.width,i.height,0,0,n,o),a},e.prototype.renderBackgroundImage=function(i){return Oc(this,void 0,void 0,function(){var n,o,u,A,a,g;return hc(this,function(b){switch(b.label){case 0:n=i.styles.backgroundImage.length-1,o=function(B){var I,P,F,Be,ue,fe,ce,Ee,re,Q,Be,ue,fe,ce,Ee,R,H,j,V,W,ne,te,de,ee,re,xe,Be,se,ae,ce,Ee,Ve,ue,fe,Ue,ke,pe,Qe,J,me,Fe,ze;return hc(this,function(Ke){switch(Ke.label){case 0:if(B.type!==0)return[3,5];I=void 0,P=B.url,Ke.label=1;case 1:return Ke.trys.push([1,3,,4]),[4,u.context.cache.match(P)];case 2:return I=Ke.sent(),[3,4];case 3:return Ke.sent(),u.context.logger.error("Error loading background-image "+P),[3,4];case 4:return I&&(F=ix(i,n,[I.width,I.height,I.width/I.height]),Be=F[0],ue=F[1],fe=F[2],ce=F[3],Ee=F[4],re=u.ctx.createPattern(u.resizeImage(I,ce,Ee),"repeat"),u.renderRepeat(Be,re,ue,fe)),[3,6];case 5:uR(B)?(Q=ix(i,n,[null,null,null]),Be=Q[0],ue=Q[1],fe=Q[2],ce=Q[3],Ee=Q[4],R=sR(B.angle,ce,Ee),H=R[0],j=R[1],V=R[2],W=R[3],ne=R[4],te=document.createElement("canvas"),te.width=ce,te.height=Ee,de=te.getContext("2d"),ee=de.createLinearGradient(j,W,V,ne),gB(B.stops,H).forEach(function(_t){return ee.addColorStop(_t.stop,dl(_t.color))}),de.fillStyle=ee,de.fillRect(0,0,ce,Ee),ce>0&&Ee>0&&(re=u.ctx.createPattern(te,"repeat"),u.renderRepeat(Be,re,ue,fe))):AR(B)&&(xe=ix(i,n,[null,null,null]),Be=xe[0],se=xe[1],ae=xe[2],ce=xe[3],Ee=xe[4],Ve=B.position.length===0?[l2]:B.position,ue=Vs(Ve[0],ce),fe=Vs(Ve[Ve.length-1],Ee),Ue=aR(B,ue,fe,ce,Ee),ke=Ue[0],pe=Ue[1],ke>0&&pe>0&&(Qe=u.ctx.createRadialGradient(se+ue,ae+fe,0,se+ue,ae+fe,ke),gB(B.stops,ke*2).forEach(function(_t){return Qe.addColorStop(_t.stop,dl(_t.color))}),u.path(Be),u.ctx.fillStyle=Qe,ke!==pe?(J=i.bounds.left+.5*i.bounds.width,me=i.bounds.top+.5*i.bounds.height,Fe=pe/ke,ze=1/Fe,u.ctx.save(),u.ctx.translate(J,me),u.ctx.transform(1,0,0,Fe,0,0),u.ctx.translate(-J,-me),u.ctx.fillRect(se,ze*(ae-me)+me,ce,Ee*ze),u.ctx.restore()):u.ctx.fill())),Ke.label=6;case 6:return n--,[2]}})},u=this,A=0,a=i.styles.backgroundImage.slice(0).reverse(),b.label=1;case 1:return A<a.length?(g=a[A],[5,o(g)]):[3,4];case 2:b.sent(),b.label=3;case 3:return A++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(i,n,o){return Oc(this,void 0,void 0,function(){return hc(this,function(u){return this.path(WB(o,n)),this.ctx.fillStyle=dl(i),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(i,n,o,u){return Oc(this,void 0,void 0,function(){var A,a;return hc(this,function(g){switch(g.label){case 0:return n<3?[4,this.renderSolidBorder(i,o,u)]:[3,2];case 1:return g.sent(),[2];case 2:return A=f7(u,o),this.path(A),this.ctx.fillStyle=dl(i),this.ctx.fill(),a=p7(u,o),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(i){return Oc(this,void 0,void 0,function(){var n,o,u,A,a,g,b,B,I=this;return hc(this,function(P){switch(P.label){case 0:return this.applyEffects(i.getEffects(2)),n=i.container.styles,o=!tf(n.backgroundColor)||n.backgroundImage.length,u=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],A=S7(nm(n.backgroundClip,0),i.curves),o||n.boxShadow.length?(this.ctx.save(),this.path(A),this.ctx.clip(),tf(n.backgroundColor)||(this.ctx.fillStyle=dl(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:P.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(F){I.ctx.save();var Q=Wv(i.curves),R=F.inset?0:w7,H=h7(Q,-R+(F.inset?1:-1)*F.spread.number,(F.inset?1:-1)*F.spread.number,F.spread.number*(F.inset?-2:2),F.spread.number*(F.inset?-2:2));F.inset?(I.path(Q),I.ctx.clip(),I.mask(H)):(I.mask(Q),I.ctx.clip(),I.path(H)),I.ctx.shadowOffsetX=F.offsetX.number+R,I.ctx.shadowOffsetY=F.offsetY.number,I.ctx.shadowColor=dl(F.color),I.ctx.shadowBlur=F.blur.number,I.ctx.fillStyle=F.inset?dl(F.color):"rgba(0,0,0,1)",I.ctx.fill(),I.ctx.restore()}),P.label=2;case 2:a=0,g=0,b=u,P.label=3;case 3:return g<b.length?(B=b[g],B.style!==0&&!tf(B.color)&&B.width>0?B.style!==2?[3,5]:[4,this.renderDashedDottedBorder(B.color,B.width,a,i.curves,2)]:[3,11]):[3,13];case 4:return P.sent(),[3,11];case 5:return B.style!==3?[3,7]:[4,this.renderDashedDottedBorder(B.color,B.width,a,i.curves,3)];case 6:return P.sent(),[3,11];case 7:return B.style!==4?[3,9]:[4,this.renderDoubleBorder(B.color,B.width,a,i.curves)];case 8:return P.sent(),[3,11];case 9:return[4,this.renderSolidBorder(B.color,a,i.curves)];case 10:P.sent(),P.label=11;case 11:a++,P.label=12;case 12:return g++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(i,n,o,u,A){return Oc(this,void 0,void 0,function(){var a,g,b,B,I,P,F,Q,R,H,j,V,W,ne,te,de,te,de;return hc(this,function(ee){return this.ctx.save(),a=m7(u,o),g=WB(u,o),A===2&&(this.path(g),this.ctx.clip()),AA(g[0])?(b=g[0].start.x,B=g[0].start.y):(b=g[0].x,B=g[0].y),AA(g[1])?(I=g[1].end.x,P=g[1].end.y):(I=g[1].x,P=g[1].y),o===0||o===2?F=Math.abs(b-I):F=Math.abs(B-P),this.ctx.beginPath(),A===3?this.formatPath(a):this.formatPath(g.slice(0,2)),Q=n<3?n*3:n*2,R=n<3?n*2:n,A===3&&(Q=n,R=n),H=!0,F<=Q*2?H=!1:F<=Q*2+R?(j=F/(2*Q+R),Q*=j,R*=j):(V=Math.floor((F+R)/(Q+R)),W=(F-V*Q)/(V-1),ne=(F-(V+1)*Q)/V,R=ne<=0||Math.abs(R-W)<Math.abs(R-ne)?W:ne),H&&(A===3?this.ctx.setLineDash([0,Q+R]):this.ctx.setLineDash([Q,R])),A===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=dl(i),this.ctx.stroke(),this.ctx.setLineDash([]),A===2&&(AA(g[0])&&(te=g[3],de=g[0],this.ctx.beginPath(),this.formatPath([new Qi(te.end.x,te.end.y),new Qi(de.start.x,de.start.y)]),this.ctx.stroke()),AA(g[1])&&(te=g[1],de=g[2],this.ctx.beginPath(),this.formatPath([new Qi(te.end.x,te.end.y),new Qi(de.start.x,de.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(i){return Oc(this,void 0,void 0,function(){var n;return hc(this,function(o){switch(o.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=dl(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=d7(i),[4,this.renderStack(n)];case 1:return o.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(j3),C7=function(t){return t instanceof v3||t instanceof y3?!0:t instanceof h2&&t.type!==qv&&t.type!==Vv},S7=function(t,e){switch(t){case 0:return Wv(e);case 2:return o7(e);case 1:default:return $v(e)}},E7=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},T7=["-apple-system","system-ui"],F7=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return T7.indexOf(e)===-1}):t},N7=function(t){ZA(e,t);function e(i,n){var o=t.call(this,i,n)||this;return o.canvas=n.canvas?n.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),o.options=n,o.canvas.width=Math.floor(n.width*n.scale),o.canvas.height=Math.floor(n.height*n.scale),o.canvas.style.width=n.width+"px",o.canvas.style.height=n.height+"px",o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-n.x,-n.y),o.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),o}return e.prototype.render=function(i){return Oc(this,void 0,void 0,function(){var n,o;return hc(this,function(u){switch(u.label){case 0:return n=cb(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,M7(n)];case 1:return o=u.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=dl(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(o,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(j3),M7=function(t){return new Promise(function(e,i){var n=new Image;n.onload=function(){e(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},I7=function(){function t(e){var i=e.id,n=e.enabled;this.id=i,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Qy([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Qy([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Qy([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Qy([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),L7=function(){function t(e,i){var n;this.windowBounds=i,this.instanceName="#"+t.instanceCount++,this.logger=new I7({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new JQ(this,e)}return t.instanceCount=1,t}(),U3=function(t,e){return e===void 0&&(e={}),P7(t,e)};typeof window<"u"&&N3.setContext(window);var P7=function(t,e){return Oc(void 0,void 0,void 0,function(){var i,n,o,u,A,a,g,b,B,I,P,F,Q,R,H,j,V,W,ne,te,ee,de,ee,re,xe,Be,se,ae,ce,Ee,Ve,ue,fe,Ue,ke,pe,Qe,J,me,Fe;return hc(this,function(ze){switch(ze.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=t.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(n=i.defaultView,!n)throw new Error("Document is not attached to a Window");return o={allowTaint:(re=e.allowTaint)!==null&&re!==void 0?re:!1,imageTimeout:(xe=e.imageTimeout)!==null&&xe!==void 0?xe:15e3,proxy:e.proxy,useCORS:(Be=e.useCORS)!==null&&Be!==void 0?Be:!1},u=Wx({logging:(se=e.logging)!==null&&se!==void 0?se:!0,cache:e.cache},o),A={windowWidth:(ae=e.windowWidth)!==null&&ae!==void 0?ae:n.innerWidth,windowHeight:(ce=e.windowHeight)!==null&&ce!==void 0?ce:n.innerHeight,scrollX:(Ee=e.scrollX)!==null&&Ee!==void 0?Ee:n.pageXOffset,scrollY:(Ve=e.scrollY)!==null&&Ve!==void 0?Ve:n.pageYOffset},a=new cd(A.scrollX,A.scrollY,A.windowWidth,A.windowHeight),g=new L7(u,a),b=(ue=e.foreignObjectRendering)!==null&&ue!==void 0?ue:!1,B={allowTaint:(fe=e.allowTaint)!==null&&fe!==void 0?fe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:b,copyStyles:b},g.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),I=new qB(g,t,B),P=I.clonedReferenceElement,P?[4,I.toIFrame(i,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return F=ze.sent(),Q=d2(P)||jQ(P)?hU(P.ownerDocument):b1(g,P),R=Q.width,H=Q.height,j=Q.left,V=Q.top,W=k7(g,P,e.backgroundColor),ne={canvas:e.canvas,backgroundColor:W,scale:(ke=(Ue=e.scale)!==null&&Ue!==void 0?Ue:n.devicePixelRatio)!==null&&ke!==void 0?ke:1,x:((pe=e.x)!==null&&pe!==void 0?pe:0)+j,y:((Qe=e.y)!==null&&Qe!==void 0?Qe:0)+V,width:(J=e.width)!==null&&J!==void 0?J:Math.ceil(R),height:(me=e.height)!==null&&me!==void 0?me:Math.ceil(H)},b?(g.logger.debug("Document cloned, using foreign object rendering"),ee=new N7(g,ne),[4,ee.render(P)]):[3,3];case 2:return te=ze.sent(),[3,5];case 3:return g.logger.debug("Document cloned, element located at "+j+","+V+" with size "+R+"x"+H+" using computed rendering"),g.logger.debug("Starting DOM parsing"),de=b3(g,P),W===de.styles.backgroundColor&&(de.styles.backgroundColor=sd.TRANSPARENT),g.logger.debug("Starting renderer for element at "+ne.x+","+ne.y+" with size "+ne.width+"x"+ne.height),ee=new B7(g,ne),[4,ee.render(de)];case 4:te=ze.sent(),ze.label=5;case 5:return(!((Fe=e.removeContainer)!==null&&Fe!==void 0)||Fe)&&(qB.destroy(F)||g.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),g.logger.debug("Finished rendering"),[2,te]}})})},k7=function(t,e,i){var n=e.ownerDocument,o=n.documentElement?Jg(t,getComputedStyle(n.documentElement).backgroundColor):sd.TRANSPARENT,u=n.body?Jg(t,getComputedStyle(n.body).backgroundColor):sd.TRANSPARENT,A=typeof i=="string"?Jg(t,i):i===null?sd.TRANSPARENT:4294967295;return e===n.documentElement?tf(o)?tf(u)?A:u:o:A};const j7=Object.freeze(Object.defineProperty({__proto__:null,default:U3},Symbol.toStringTag,{value:"Module"}));wm.register(t2,i2,Xb,Bm,Zb,$b,Jb,e2,Yb,aS);const U7=()=>{const[t,e]=Te.useState({totals:{totalUsers:0,serviceProviders:0,totalPopulation:0},demographics:{ageGroups:{},employment:{}},skills:{},skilledPerTrade:{byRole:{},bySkill:{}},mostBookedServices:{},totalsOverTime:{labels:[],values:[]},activeUsers:0,verifiedProviders:0,totalBookings:0,popularServices:[]}),[i,n]=Te.useState(!0),[o,u]=Te.useState(null),[A,a]=Te.useState("12"),g=Te.useRef(null),b=Te.useRef(null),B=Te.useRef(null),I=Te.useRef(null),P=Te.useRef(null),F=Te.useRef(null),Q=(ce,Ee)=>{const Ve=ce.totalsOverTime.values;if(Ve.length<2)return"Insufficient data for trend analysis.";const ue=Ve[Ve.length-1],fe=Ve[Ve.length-2],Ue=fe>0?((ue-fe)/fe*100).toFixed(1):0,ke=Ve.length>1?((ue-Ve[0])/(Ve[0]||1)*100).toFixed(1):0,pe=Ve.reduce((Qe,J)=>Qe+J,0)/Ve.length;return`User registration shows ${Ue>=0?"positive":"negative"} momentum with ${Math.abs(Ue)}% ${Ue>=0?"growth":"decline"} from last month. Overall ${ke}% increase over ${Ee} months. Average monthly registrations: ${Math.round(pe)}.`},R=ce=>{const Ee=ce.demographics.ageGroups||{};if(Object.keys(Ee).length===0)return"No age distribution data available.";const ue=Object.entries(Ee).sort((ke,pe)=>pe[1]-ke[1])[0],fe=Object.values(Ee).reduce((ke,pe)=>ke+pe,0),Ue=(ue[1]/fe*100).toFixed(1);return`The ${ue[0]} age group dominates with ${Ue}% of users (${ue[1]} users). This suggests the platform primarily serves ${ue[0].includes("18-25")||ue[0].includes("26-35")?"young adults":ue[0].includes("36-45")?"middle-aged adults":"mature adults"}.`},H=ce=>{const Ee=ce.demographics.employment;if(!Ee)return"Employment data not available.";const Ve=(Ee.worker||0)+(Ee.nonWorker||0);if(Ve===0)return"No employment data available.";const ue=(Ee.worker/Ve*100).toFixed(1),fe=(Ee.nonWorker/Ve*100).toFixed(1);return`Employment rate stands at ${ue}% (${Ee.worker} employed users) vs ${fe}% unemployed (${Ee.nonWorker} users). ${ue>50?"Majority of users are employed, indicating strong workforce participation.":"Significant portion of users are unemployed, suggesting potential for skill development programs."}`},j=ce=>{const Ee=ce.skills;if(Object.keys(Ee).length===0)return"No skills data available.";const Ve=Object.entries(Ee).sort((pe,Qe)=>Qe[1]-pe[1]),ue=Ve[0],fe=Object.values(Ee).reduce((pe,Qe)=>pe+Qe,0),Ue=(ue[1]/fe*100).toFixed(1),ke=Ve.length;return`"${ue[0]}" is the most common skill with ${Ue}% adoption (${ue[1]} users). Platform offers ${ke} different skills, indicating ${ke>10?"good":"moderate"} skill diversity. ${Ue>30?"High concentration in top skill suggests specialization opportunity.":"Well-distributed skills show broad service coverage."}`},V=ce=>{if(ce.popularServices.length===0)return"No service booking data available.";const Ee=ce.popularServices[0],Ve=ce.totalBookings,ue=(Ee.count/Ve*100).toFixed(1);return`"${Ee.service}" leads service bookings with ${ue}% market share (${Ee.count} bookings). Total platform bookings: ${Ve}. ${ue>40?"High demand concentration suggests specialization in popular services.":"Well-distributed demand indicates diverse service needs."}`},W=ce=>{const Ee=ce.skilledPerTrade.byRole||{};if(Object.keys(Ee).length===0)return"No provider role data available.";const Ve=Object.entries(Ee).sort((ke,pe)=>pe[1]-ke[1]),ue=Ve[0],fe=Object.values(Ee).reduce((ke,pe)=>ke+pe,0),Ue=(ue[1]/fe*100).toFixed(1);return`"${ue[0]}" is the most represented role with ${Ue}% of providers (${ue[1]} providers). Network includes ${Ve.length} different roles. ${Ue>30?"Specialized provider network with strong focus on key trades.":"Diverse provider network covering multiple service categories."}`},ne=(ce,Ee)=>{const Ve=R(ce),ue=W(ce),fe=ce.totals.totalUsers||0,Ue=ce.totals.serviceProviders||0,ke=ce.totalBookings,pe=ce.activeUsers,Qe=ce.totalsOverTime.values,J=Qe.length>1?Math.round((Qe[Qe.length-1]-Qe[Qe.length-2])/(Qe[Qe.length-2]||1)*100):0,me=ce.demographics.employment,Fe=me?.worker&&me?.nonWorker?Math.round(me.worker/(me.worker+me.nonWorker)*100):0,ze=Object.entries(ce.skills).sort((_t,gt)=>gt[1]-_t[1])[0],Ke=ce.popularServices[0];return`SkillConnect platform demonstrates robust performance with ${fe.toLocaleString()} total users and ${Ue.toLocaleString()} service providers, achieving ${ke.toLocaleString()} service bookings. The platform shows ${J>=0?"positive":"challenging"} growth momentum with a ${Math.abs(J)}% ${J>=0?"increase":"decrease"} in user registrations, maintaining ${pe.toLocaleString()} active users. User demographics reveal a ${Fe}% employment rate, with the platform primarily serving ${Ve.includes("young adults")?"young professionals":Ve.includes("middle-aged")?"established adults":"diverse age groups"}. The skills ecosystem features "${ze?.[0]||"various skills"}" as the most demanded skill, complemented by "${Ke?.service||"popular services"}" leading service bookings. The provider network shows ${ue.includes("Specialized")?"strong specialization":"good diversity"} across ${Object.keys(ce.skilledPerTrade.byRole||{}).length} different roles, indicating a ${ke>fe*.5?"highly engaged":"moderately active"} marketplace. Overall, the platform exhibits healthy growth patterns with opportunities for ${Fe<50?"employment-focused initiatives":"continued expansion"} and ${Object.keys(ce.skills).length>15?"diverse skill development":"targeted skill enhancement"}.`};Te.useEffect(()=>{te()},[A]);const te=async()=>{n(!0),u(null);try{const[ce,Ee,Ve,ue,fe,Ue]=await Promise.all([Oi.get("/reports/totals"),Oi.get("/reports/demographics"),Oi.get("/reports/skills"),Oi.get("/reports/skilled-per-trade"),Oi.get("/reports/most-booked-services"),Oi.get(`/reports/totals-over-time?months=${A}`)]),ke=Object.values(fe.data).reduce((Qe,J)=>Qe+J,0),pe=Object.entries(fe.data).map(([Qe,J])=>({service:Qe,count:J})).sort((Qe,J)=>J.count-Qe.count).slice(0,10);e({totals:ce.data,demographics:Ee.data,skills:Ve.data,skilledPerTrade:ue.data,mostBookedServices:fe.data,totalsOverTime:Ue.data,activeUsers:Math.floor(ce.data.totalUsers*.7),verifiedProviders:Math.floor(ce.data.serviceProviders*.85),totalBookings:ke,popularServices:pe}),Si.success("Analytics data loaded successfully!")}catch(ce){console.error("Failed to fetch analytics data:",ce),u("Failed to load analytics data"),Si.error("Failed to load analytics data")}finally{n(!1)}},de=async()=>{try{Si.loading("Generating PDF report..."),wm.register(t2,i2,Xb,Bm,Zb,$b,Jb,e2,Yb);const ce=new Bn("p","mm","a4"),Ee=ce.internal.pageSize.getWidth(),Ve=ce.internal.pageSize.getHeight(),ue=20;let fe=ue;const Ue=(Vt,Yt,Jt,bi,ot=11)=>{ce.setFontSize(ot);const $e=ce.splitTextToSize(Vt,bi);return ce.text($e,Yt,Jt),Jt+$e.length*ot*.4},ke=Vt=>fe+Vt>Ve-ue?(ce.addPage(),fe=ue,!0):!1;ce.setFontSize(24),ce.setFont("helvetica","bold"),ce.text("System Analytics Report",Ee/2,fe,{align:"center"}),fe+=15,ce.setFontSize(14),ce.setFont("helvetica","normal"),ce.text(`Generated on ${new Date().toLocaleDateString()}`,Ee/2,fe,{align:"center"}),fe+=10,ce.text(`Report Period: Last ${A} months`,Ee/2,fe,{align:"center"}),ce.addPage(),fe=ue,ce.setFontSize(18),ce.setFont("helvetica","bold"),ce.text("Executive Summary",ue,fe),fe+=15;const pe=`This comprehensive analytics report provides detailed insights into the SkillConnect platform's performance and user engagement metrics. The report covers key performance indicators, user demographics, skill distribution, and service utilization patterns over the past ${A} months.

Key highlights include:
 Total registered users: ${t.totals.totalUsers?.toLocaleString()||0}
 Active service providers: ${t.totals.serviceProviders?.toLocaleString()||0}
 Total service bookings: ${t.totalBookings.toLocaleString()}
 Platform growth rate: ${t.totalsOverTime.values.length>1?Math.round((t.totalsOverTime.values[t.totalsOverTime.values.length-1]-t.totalsOverTime.values[t.totalsOverTime.values.length-2])/(t.totalsOverTime.values[t.totalsOverTime.values.length-2]||1)*100):0}%

The following sections provide detailed analysis and visualizations of these metrics.`;fe=Ue(pe,ue,fe,Ee-2*ue),ke(80),fe+=10,ce.setFontSize(16),ce.setFont("helvetica","bold"),ce.text("Platform Overview",ue,fe),fe+=10;const Qe=[["Metric","Value","Description"],["Total Users",t.totals.totalUsers?.toLocaleString()||"0","Registered platform users"],["Service Providers",t.totals.serviceProviders?.toLocaleString()||"0","Verified service providers"],["Total Population",t.totals.totalPopulation?.toLocaleString()||"0","Total population in coverage area"],["Active Users",t.activeUsers.toLocaleString(),"Estimated active users (70%)"],["Verified Providers",t.verifiedProviders.toLocaleString(),"Estimated verified providers (85%)"],["Total Bookings",t.totalBookings.toLocaleString(),"Completed service bookings"]];if(Cg(ce,{startY:fe,head:[Qe[0]],body:Qe.slice(1),theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[37,99,235]},margin:{left:ue,right:ue}}),fe=ce.lastAutoTable.finalY+15,ke(100),ce.setFontSize(16),ce.setFont("helvetica","bold"),ce.text("User Demographics Analysis",ue,fe),fe+=10,t.demographics.ageGroups&&Object.keys(t.demographics.ageGroups).length>0){ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.text("Age Distribution",ue,fe),fe+=8;const Vt=[["Age Group","Count","Percentage"]],Yt=Object.values(t.demographics.ageGroups).reduce((Jt,bi)=>Jt+bi,0);Object.entries(t.demographics.ageGroups).forEach(([Jt,bi])=>{const ot=Yt>0?(bi/Yt*100).toFixed(1):"0.0";Vt.push([Jt,bi.toString(),`${ot}%`])}),Cg(ce,{startY:fe,head:[Vt[0]],body:Vt.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:ue,right:ue}}),fe=ce.lastAutoTable.finalY+10}if(t.demographics.employment){ke(40),ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.text("Employment Status",ue,fe),fe+=8;const Vt=[["Status","Count","Percentage"]],Yt=(t.demographics.employment.worker||0)+(t.demographics.employment.nonWorker||0);if(t.demographics.employment.worker){const Jt=Yt>0?(t.demographics.employment.worker/Yt*100).toFixed(1):"0.0";Vt.push(["Employed",t.demographics.employment.worker.toString(),`${Jt}%`])}if(t.demographics.employment.nonWorker){const Jt=Yt>0?(t.demographics.employment.nonWorker/Yt*100).toFixed(1):"0.0";Vt.push(["Unemployed",t.demographics.employment.nonWorker.toString(),`${Jt}%`])}Cg(ce,{startY:fe,head:[Vt[0]],body:Vt.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:ue,right:ue}}),fe=ce.lastAutoTable.finalY+10}ke(80),ce.setFontSize(16),ce.setFont("helvetica","bold"),ce.text("Skills & Services Analysis",ue,fe),fe+=10,ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.text("Top Skills Distribution",ue,fe),fe+=8;const J=[["Skill","Users","Percentage"]],me=Object.values(t.skills).reduce((Vt,Yt)=>Vt+Yt,0);Object.entries(t.skills).slice(0,10).forEach(([Vt,Yt])=>{const Jt=me>0?(Yt/me*100).toFixed(1):"0.0";J.push([Vt,Yt.toString(),`${Jt}%`])}),Cg(ce,{startY:fe,head:[J[0]],body:J.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:ue,right:ue}}),fe=ce.lastAutoTable.finalY+10,ke(60),ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.text("Popular Services",ue,fe),fe+=8;const Fe=[["Service","Bookings","Percentage"]],ze=t.popularServices.reduce((Vt,Yt)=>Vt+Yt.count,0);t.popularServices.slice(0,10).forEach(({service:Vt,count:Yt})=>{const Jt=ze>0?(Yt/ze*100).toFixed(1):"0.0";Fe.push([Vt,Yt.toString(),`${Jt}%`])}),Cg(ce,{startY:fe,head:[Fe[0]],body:Fe.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:ue,right:ue}}),fe=ce.lastAutoTable.finalY+15,ce.addPage(),fe=ue,ce.setFontSize(18),ce.setFont("helvetica","bold"),ce.text("Visual Analytics",ue,fe),fe+=15;const Ke=[{ref:g,title:"User Registration Trends",height:80,getInsights:()=>Q(t,A)},{ref:b,title:"Age Distribution",height:60,getInsights:()=>R(t)},{ref:B,title:"Employment Status",height:60,getInsights:()=>H(t)},{ref:I,title:"Skills Distribution",height:80,getInsights:()=>j(t)},{ref:P,title:"Popular Services",height:70,getInsights:()=>V(t)},{ref:F,title:"Service Provider Network",height:70,getInsights:()=>W(t)}];for(const Vt of Ke)if(Vt.ref?.current)try{ke(Vt.height+40),ce.setFontSize(14),ce.setFont("helvetica","bold"),ce.text(Vt.title||"Untitled Chart",ue,fe),fe+=10;const Yt=await U3(Vt.ref.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",ignoreElements:yi=>{const si=window.getComputedStyle(yi);return si.display==="none"||si.visibility==="hidden"}}),Jt=Yt.toDataURL("image/png"),bi=Ee-2*ue,ot=Yt.height*bi/Yt.width;ce.addImage(Jt,"PNG",ue,fe,bi,ot),fe+=ot+8,ce.setFontSize(10),ce.setFont("helvetica","italic"),ce.setTextColor(100,100,100);const $e=Vt.getInsights?Vt.getInsights():"No insights available.",Ni=ce.splitTextToSize(`${$e}`,Ee-2*ue);ce.text(Ni,ue,fe),fe+=Ni.length*10*.4+12,ce.setTextColor(0,0,0)}catch(Yt){console.error(`Chart capture failed (${Vt.title}):`,Yt),fe+=10}ke(60),ce.setFontSize(16),ce.setFont("helvetica","bold"),ce.text("Comprehensive Summary",ue,fe),fe+=12,ce.setFontSize(11),ce.setFont("helvetica","normal");const _t=ne(t,A),gt=ce.splitTextToSize(_t,Ee-2*ue);ce.text(gt,ue,fe),fe+=gt.length*11*.4+15;const Et=ce.internal.getNumberOfPages();for(let Vt=1;Vt<=Et;Vt++)ce.setPage(Vt),ce.setFontSize(8),ce.setFont("helvetica","normal"),ce.text(`Page ${Vt} of ${Et}`,Ee/2,Ve-10,{align:"center"}),ce.text(`SkillConnect Analytics Report - ${new Date().toLocaleDateString()}`,ue,Ve-10);const hi=`skillconnect-analytics-report-${new Date().toISOString().split("T")[0]}.pdf`;ce.save(hi),Si.dismiss(),Si.success("PDF report generated successfully!")}catch(ce){console.error("PDF generation failed:",ce),Si.dismiss(),Si.error("Failed to generate PDF report")}};if(i)return p.jsxs("div",{className:"analytics-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"System Analytics"}),p.jsx("p",{className:"header-description",children:"Loading analytics data..."})]})}),p.jsx("div",{className:"analytics-card loading-card",children:p.jsx("div",{className:"loading-wrapper",children:p.jsx("div",{className:"loader"})})})]});if(o)return p.jsxs("div",{className:"analytics-container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"System Analytics"}),p.jsx("p",{className:"header-description",children:"Error loading analytics data"})]})}),p.jsx("div",{className:"analytics-card error-card",children:p.jsxs("div",{className:"error-message",children:[p.jsx("h3",{children:" Error Loading Data"}),p.jsx("p",{children:o}),p.jsxs("button",{onClick:te,className:"retry-btn",children:[p.jsx(Iv,{})," Retry"]})]})})]});const ee={labels:t.totalsOverTime.labels,datasets:[{label:"New User Registrations",data:t.totalsOverTime.values,borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.1)",tension:.4,fill:!0}]},re={labels:Object.keys(t.skills).slice(0,10),datasets:[{label:"Users with Skill",data:Object.values(t.skills).slice(0,10),backgroundColor:["#2563eb","#16a34a","#ca8a04","#dc2626","#7c3aed","#ea580c","#0891b2","#be185d","#4b5563","#0f766e"]}]},xe={labels:Object.keys(t.demographics.ageGroups||{}),datasets:[{label:"Users by Age Group",data:Object.values(t.demographics.ageGroups||{}),backgroundColor:"#2563eb"}]},Be={labels:t.popularServices.slice(0,8).map(ce=>ce.service.length>15?ce.service.substring(0,15)+"...":ce.service),datasets:[{label:"Service Bookings",data:t.popularServices.slice(0,8).map(ce=>ce.count),backgroundColor:"#16a34a"}]},se={labels:["Employed","Unemployed"],datasets:[{label:"Employment Status",data:[t.demographics.employment?.worker||0,t.demographics.employment?.nonWorker||0],backgroundColor:["#16a34a","#dc2626"],borderWidth:2,borderColor:"#ffffff"}]},ae={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}};return p.jsxs("div",{className:"analytics-container",children:[p.jsxs("div",{className:"analytics-header",children:[p.jsxs("div",{children:[p.jsx("h1",{children:"System Analytics Dashboard"}),p.jsx("p",{className:"header-description",children:"Real-time insights from database analytics"})]}),p.jsxs("div",{className:"header-actions",children:[p.jsxs("select",{value:A,onChange:ce=>a(ce.target.value),className:"time-select",children:[p.jsx("option",{value:"6",children:" Last 6 months"}),p.jsx("option",{value:"12",children:" Last 12 months"}),p.jsx("option",{value:"24",children:" Last 24 months"})]}),p.jsxs("button",{onClick:te,className:"refresh-btn",title:"Refresh data",children:[p.jsx(Iv,{})," Refresh"]})]})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" Platform Overview"}),p.jsx("div",{className:"card-subinfo",children:"Real-time metrics from database"})]}),p.jsxs("div",{className:"metrics-grid",children:[p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon users",children:p.jsx(zg,{})}),p.jsx("h3",{className:"metric-title",children:"Total Users"}),p.jsx("p",{className:"metric-value",children:t.totals.totalUsers?.toLocaleString()||0}),p.jsx("div",{className:"metric-description",children:"Registered platform users"})]}),p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon providers",children:p.jsx(hm,{})}),p.jsx("h3",{className:"metric-title",children:"Service Providers"}),p.jsx("p",{className:"metric-value",children:t.totals.serviceProviders?.toLocaleString()||0}),p.jsx("div",{className:"metric-description",children:"Verified service providers"})]}),p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon bookings",children:p.jsx(OM,{})}),p.jsx("h3",{className:"metric-title",children:"Total Bookings"}),p.jsx("p",{className:"metric-value",children:t.totalBookings.toLocaleString()}),p.jsx("div",{className:"metric-description",children:"Completed service bookings"})]}),p.jsxs("div",{className:"metric-card",children:[p.jsx("div",{className:"metric-icon jobfairs",children:p.jsx(h4,{})}),p.jsx("h3",{className:"metric-title",children:"Active Users"}),p.jsx("p",{className:"metric-value",children:t.activeUsers.toLocaleString()}),p.jsx("div",{className:"metric-description",children:"~70% of total users"})]})]})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" User Registration Trends"}),p.jsx("div",{className:"card-subinfo",children:"Monthly user growth over time"})]}),p.jsx("div",{className:"chart-container",ref:g,children:p.jsx(o8,{data:ee,options:{...ae,plugins:{...ae.plugins,title:{display:!1}}},height:300})})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsx("div",{className:"card-header",children:p.jsx("h2",{children:" User Demographics"})}),p.jsxs("div",{className:"charts-grid",children:[p.jsxs("div",{className:"chart-item",children:[p.jsx("h4",{children:"Age Distribution"}),p.jsxs("div",{className:"chart-wrapper",ref:b,children:[p.jsx(S_,{data:xe,options:{...ae,plugins:{legend:{display:!1}}},height:180}),p.jsx("div",{className:"card-subinfo",children:"Age distribution and employment status"})]})]}),p.jsxs("div",{className:"chart-item",children:[p.jsx("h4",{children:"Employment Status"}),p.jsx("div",{className:"chart-wrapper",ref:B,children:p.jsx(E5,{data:se,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:10,font:{size:10},padding:10}},tooltip:{callbacks:{label:function(ce){const Ee=ce.label||"",Ve=ce.parsed||0,ue=ce.dataset.data.reduce((Ue,ke)=>Ue+ke,0),fe=ue>0?Math.round(Ve/ue*100):0;return`${Ee}: ${Ve} (${fe}%)`}}}},cutout:"65%"},height:180})}),p.jsx("div",{className:"employment-summary",children:p.jsxs("div",{className:"employment-rate",children:[p.jsx("span",{className:"rate-label",children:"Employment Rate:"}),p.jsxs("span",{className:"rate-value",children:[t.demographics.employment?.worker&&t.demographics.employment?.nonWorker?Math.round(t.demographics.employment.worker/(t.demographics.employment.worker+t.demographics.employment.nonWorker)*100):0,"%"]})]})})]})]})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsx("div",{className:"card-header",children:p.jsx("h2",{children:" Skills & Services Analysis"})}),p.jsxs("div",{className:"charts-grid",children:[p.jsxs("div",{className:"chart-item",children:[p.jsx("h4",{children:"Top Skills Distribution"}),p.jsxs("div",{className:"chart-wrapper",ref:I,children:[p.jsx(E5,{data:re,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:15,font:{size:11}}}}},width:350,height:350}),p.jsx("div",{className:"card-subinfo",children:"Most demanded skills and popular services"})]})]}),p.jsxs("div",{className:"chart-item",children:[p.jsx("h4",{children:"Popular Services"}),p.jsx("div",{className:"chart-wrapper",ref:P,children:p.jsx(S_,{data:Be,options:{...ae,plugins:{legend:{display:!1}},scales:{x:{ticks:{maxRotation:45,minRotation:45}}}},height:300})})]})]})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" Service Provider Network"}),p.jsx("div",{className:"card-subinfo",children:"Provider distribution by role and skills"})]}),p.jsx("div",{className:"chart-container",ref:F,children:p.jsx(S_,{data:{labels:Object.keys(t.skilledPerTrade.byRole||{}),datasets:[{label:"Users by Role",data:Object.values(t.skilledPerTrade.byRole||{}),backgroundColor:["#2563eb","#16a34a","#ca8a04","#dc2626","#7c3aed","#ea580c","#0891b2","#be185d","#4b5563","#0f766e"],borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(ce){const Ee=ce.parsed.y,Ve=ce.dataset.data.reduce((fe,Ue)=>fe+Ue,0),ue=Ve>0?Math.round(Ee/Ve*100):0;return`${ce.label}: ${Ee} users (${ue}%)`}}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}},x:{ticks:{maxRotation:45,minRotation:45}}}},height:300})})]}),p.jsxs("div",{className:"analytics-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsx("h2",{children:" Data Export & Actions"}),p.jsx("div",{className:"card-subinfo",children:"Download reports and access detailed analytics"})]}),p.jsx("div",{className:"actions-grid",children:p.jsxs("button",{className:"export-btn",onClick:de,children:[p.jsx(d4,{})," Export Full Report"]})})]})]})},D7=()=>{const[t,e]=Te.useState([]),[i,n]=Te.useState([]),[o,u]=Te.useState(!0),[A,a]=Te.useState(""),[g,b]=Te.useState(null);Te.useEffect(()=>{setTimeout(()=>{const H=[{id:1,name:"Plumbing",userCount:156,previousUserCount:142,averageRating:4.7,color:"#FF6384",popularServices:["Pipe Repair","Installation","Maintenance"]},{id:2,name:"Electrical",userCount:132,previousUserCount:125,averageRating:4.8,color:"#36A2EB",popularServices:["Wiring","Appliance Repair","Installation"]},{id:3,name:"Carpentry",userCount:98,previousUserCount:105,averageRating:4.6,color:"#FFCE56",popularServices:["Furniture","Cabinets","Repairs"]},{id:4,name:"Painting",userCount:87,previousUserCount:78,averageRating:4.9,color:"#4BC0C0",popularServices:["Interior","Exterior","Decorative"]},{id:5,name:"Gardening",userCount:76,previousUserCount:82,averageRating:4.5,color:"#9966FF",popularServices:["Lawn Care","Landscaping","Tree Service"]},{id:6,name:"Cleaning",userCount:65,previousUserCount:58,averageRating:4.7,color:"#FF9F40",popularServices:["Deep Clean","Regular","Office"]},{id:7,name:"Appliance Repair",userCount:54,previousUserCount:50,averageRating:4.4,color:"#FF6384",popularServices:["Refrigerator","Washer","Dryer"]},{id:8,name:"Moving",userCount:43,previousUserCount:40,averageRating:4.6,color:"#C9CBCF",popularServices:["Local","Long Distance","Packing"]}],j=H.reduce((W,ne)=>W+ne.userCount,0),V=H.map((W,ne)=>({...W,percentage:(W.userCount/j*100).toFixed(1),rank:ne+1}));e(V),n(V),u(!1)},1e3)},[]),Te.useEffect(()=>{let H=t;A&&(H=H.filter(j=>j.name.toLowerCase().includes(A.toLowerCase())||j.popularServices.some(V=>V.toLowerCase().includes(A.toLowerCase())))),n(H)},[A,t]);const B=()=>{const H=t.reduce((V,W)=>V+W.userCount,0);let j=-90;return t.map(V=>{const W=V.userCount/H*100,ne=W/100*360,te=j,de=j+ne;return j+=ne,{...V,startAngle:te,endAngle:de,percentage:W}})},I=(H,j,V,W)=>{const ne=(W-90)*Math.PI/180;return{x:H+V*Math.cos(ne),y:j+V*Math.sin(ne)}},P=(H,j,V,W,ne)=>{const te=I(H,j,V,ne),de=I(H,j,V,W),ee=ne-W<=180?"0":"1";return["M",H,j,"L",te.x,te.y,"A",V,V,0,ee,0,de.x,de.y,"Z"].join(" ")},F=(H,j)=>H>j?"up":H<j?"down":"stable",Q=H=>{const j=[],V=Math.floor(H),W=H%1!==0;for(let te=0;te<V;te++)j.push(p.jsx(FaStar,{className:"star filled"},te));W&&j.push(p.jsx(FaStar,{className:"star half"},"half"));const ne=5-Math.ceil(H);for(let te=0;te<ne;te++)j.push(p.jsx(FaStar,{className:"star empty"},`empty-${te}`));return j},R=B();return p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
        .skill-categories-container {
          background: #fff;
          border-radius: 10px;
          padding: 20px;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
          margin-bottom: 20px;
        }
       
        .page-header {
          display: flex;
          align-items: center;
          margin-bottom: 15px;
        }
       
        .page-title {
          font-size: 1.5rem;
          font-weight: 600;
          color: #333;
          margin: 0;
          display: flex;
          align-items: center;
        }
       
        .page-title .icon {
          margin-right: 10px;
          color: #0a84ff;
        }
       
        .intro-text {
          color: #666;
          font-size: 0.9rem;
          margin-bottom: 25px;
          line-height: 1.5;
        }
       
        .content-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        }
       
        .chart-container {
          background: #f9f9f9;
          border-radius: 8px;
          padding: 20px;
          display: flex;
          flex-direction: column;
          align-items: center;
        }
       
        .chart-title {
          font-size: 1.1rem;
          font-weight: 600;
          color: #333;
          margin: 0 0 20px 0;
          display: flex;
          align-items: center;
        }
       
        .chart-title .icon {
          margin-right: 8px;
          color: #0a84ff;
        }
       
        .pie-chart-container {
          position: relative;
          width: 250px;
          height: 250px;
        }
       
        .pie-chart-svg {
          width: 100%;
          height: 100%;
        }
       
        .pie-segment {
          cursor: pointer;
          transition: transform 0.2s;
        }
       
        .pie-segment:hover {
          transform: scale(1.05);
          filter: brightness(1.1);
        }
       
        .pie-legend {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 10px;
          margin-top: 20px;
        }
       
        .legend-item {
          display: flex;
          align-items: center;
          font-size: 0.8rem;
        }
       
        .legend-color {
          width: 12px;
          height: 12px;
          border-radius: 2px;
          margin-right: 5px;
        }
       
        .stats-container {
          background: #f9f9f9;
          border-radius: 8px;
          padding: 20px;
        }
       
        .stats-title {
          font-size: 1.1rem;
          font-weight: 600;
          color: #333;
          margin: 0 0 20px 0;
          display: flex;
          align-items: center;
        }
       
        .stats-title .icon {
          margin-right: 8px;
          color: #0a84ff;
        }
       
        .stat-item {
          display: flex;
          justify-content: space-between;
          padding: 10px 0;
          border-bottom: 1px solid #eee;
        }
       
        .stat-item:last-child {
          border-bottom: none;
        }
       
        .stat-label {
          font-weight: 500;
          color: #555;
        }
       
        .stat-value {
          font-weight: 600;
          color: #333;
        }
       
        .filters-container {
          display: flex;
          flex-wrap: wrap;
          gap: 15px;
          margin-bottom: 20px;
        }
       
        .search-container {
          flex: 1;
          min-width: 200px;
          position: relative;
        }
       
        .search-input {
          width: 100%;
          padding: 10px 15px 10px 40px;
          border: 1px solid #ddd;
          border-radius: 6px;
          font-size: 0.9rem;
        }
       
        .search-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          color: #999;
        }
       
        .data-table-container {
          overflow-x: auto;
        }
       
        .data-table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 10px;
        }
       
        .data-table th {
          background: #f1f3f7;
          padding: 12px 15px;
          text-align: left;
          font-weight: 600;
          color: #333;
          font-size: 0.85rem;
          border-bottom: 2px solid #e9ecef;
        }
       
        .data-table td {
          padding: 12px 15px;
          border-bottom: 1px solid #e9ecef;
          font-size: 0.85rem;
          color: #555;
        }
       
        .data-table tr:hover {
          background: #f9f9f9;
        }
       
        .rank-badge {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          width: 28px;
          height: 28px;
          border-radius: 50%;
          font-weight: 600;
          font-size: 0.8rem;
        }
       
        .rank-1 {
          background: #ffd700;
          color: #333;
        }
       
        .rank-2 {
          background: #c0c0c0;
          color: #333;
        }
       
        .rank-3 {
          background: #cd7f32;
          color: #fff;
        }
       
        .rank-default {
          background: #e9ecef;
          color: #555;
        }
       
        .category-info {
          display: flex;
          flex-direction: column;
        }
       
        .category-name {
          font-weight: 600;
          color: #333;
        }
       
        .popular-services {
          font-size: 0.75rem;
          color: #666;
          margin-top: 3px;
        }
       
        .user-count {
          display: flex;
          align-items: center;
        }
       
        .count-value {
          font-weight: 600;
          margin-right: 5px;
        }
       
        .trend {
          display: flex;
          align-items: center;
        }
       
        .trend.up {
          color: #28a745;
        }
       
        .trend.down {
          color: #dc3545;
        }
       
        .trend.stable {
          color: #6c757d;
        }
       
        .percentage-bar {
          display: inline-block;
          height: 6px;
          background: #e9ecef;
          border-radius: 3px;
          width: 50px;
          margin-right: 8px;
          position: relative;
        }
       
        .percentage-fill {
          height: 100%;
          background: #0a84ff;
          border-radius: 3px;
        }
       
        .rating-container {
          display: flex;
          align-items: center;
        }
       
        .star {
          color: #ddd;
          font-size: 0.8rem;
        }
       
        .star.filled {
          color: #ffc107;
        }
       
        .star.half {
          color: #ffc107;
          opacity: 0.7;
        }
       
        .action-buttons {
          display: flex;
          gap: 8px;
        }
       
        .action-btn {
          padding: 6px 10px;
          border: none;
          border-radius: 4px;
          font-size: 0.8rem;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 5px;
          transition: all 0.2s;
        }
       
        .view-btn {
          background: #0a84ff;
          color: white;
        }
       
        .view-btn:hover {
          background: #0077e6;
        }
       
        .loading-container {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 200px;
        }
       
        .spinner {
          width: 40px;
          height: 40px;
          border: 4px solid #f3f3f3;
          border-top: 4px solid #0a84ff;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        }
       
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
       
        .no-results {
          text-align: center;
          padding: 20px;
          color: #666;
        }
       
        .tooltip {
          position: absolute;
          background: rgba(0, 0, 0, 0.8);
          color: white;
          padding: 8px 12px;
          border-radius: 4px;
          font-size: 0.8rem;
          pointer-events: none;
          z-index: 1000;
        }
       
        @media (max-width: 1024px) {
          .content-grid {
            grid-template-columns: 1fr;
          }
        }
       
        @media (max-width: 768px) {
          .filters-container {
            flex-direction: column;
          }
         
          .search-container {
            min-width: 100%;
          }
         
          .data-table th, .data-table td {
            padding: 8px 10px;
            font-size: 0.75rem;
          }
         
          .pie-chart-container {
            width: 200px;
            height: 200px;
          }
        }
      `}),p.jsxs("div",{className:"skill-categories-container",children:[p.jsx("div",{className:"page-header",children:p.jsxs("h1",{className:"page-title",children:[p.jsx(sw,{className:"icon"}),"Skill Categories"]})}),p.jsxs("p",{className:"intro-text",children:[p.jsx(Lb,{style:{marginRight:"5px",color:"#0a84ff"}}),"This page provides an overview of all skill categories available on the platform. Analyze the distribution of service providers across different categories to understand market trends and identify opportunities for growth."]}),o?p.jsx("div",{className:"loading-container",children:p.jsx("div",{className:"spinner"})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"content-grid",children:[p.jsxs("div",{className:"chart-container",children:[p.jsxs("h2",{className:"chart-title",children:[p.jsx(sw,{className:"icon"}),"Category Distribution"]}),p.jsxs("div",{className:"pie-chart-container",children:[p.jsx("svg",{className:"pie-chart-svg",viewBox:"0 0 250 250",children:R.map((H,j)=>p.jsx("path",{d:P(125,125,100,H.startAngle,H.endAngle),fill:H.color,className:"pie-segment",onMouseEnter:()=>b(H),onMouseLeave:()=>b(null)},H.id))}),g&&p.jsxs("div",{className:"tooltip",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[p.jsx("div",{children:g.name}),p.jsxs("div",{children:[g.userCount," users (",g.percentage,"%)"]})]})]}),p.jsx("div",{className:"pie-legend",children:t.map(H=>p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-color",style:{backgroundColor:H.color}}),p.jsx("span",{children:H.name})]},H.id))})]}),p.jsxs("div",{className:"stats-container",children:[p.jsxs("h2",{className:"stats-title",children:[p.jsx(FaUsers,{className:"icon"}),"Category Statistics"]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Total Categories"}),p.jsx("span",{className:"stat-value",children:t.length})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Total Service Providers"}),p.jsx("span",{className:"stat-value",children:t.reduce((H,j)=>H+j.userCount,0)})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Most Popular Category"}),p.jsx("span",{className:"stat-value",children:t.length>0?t[0].name:"N/A"})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Highest Rated Category"}),p.jsx("span",{className:"stat-value",children:t.length>0?t.reduce((H,j)=>j.averageRating>H.averageRating?j:H).name:"N/A"})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Growing Categories"}),p.jsx("span",{className:"stat-value",children:t.filter(H=>F(H.userCount,H.previousUserCount)==="up").length})]})]})]}),p.jsx("div",{className:"filters-container",children:p.jsxs("div",{className:"search-container",children:[p.jsx(m4,{className:"search-icon"}),p.jsx("input",{type:"text",className:"search-input",placeholder:"Search by category or service...",value:A,onChange:H=>a(H.target.value)})]})}),i.length>0?p.jsx("div",{className:"data-table-container",children:p.jsxs("table",{className:"data-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Rank"}),p.jsx("th",{children:"Skill (Category)"}),p.jsx("th",{children:"User Count"}),p.jsx("th",{children:"Percentage"}),p.jsx("th",{children:"Avg. Rating"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:i.map((H,j)=>p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("span",{className:`rank-badge ${j+1===1?"rank-1":j+1===2?"rank-2":j+1===3?"rank-3":"rank-default"}`,children:j+1})}),p.jsx("td",{children:p.jsxs("div",{className:"category-info",children:[p.jsx("div",{className:"category-name",children:H.name}),p.jsxs("div",{className:"popular-services",children:["Popular: ",H.popularServices.join(", ")]})]})}),p.jsx("td",{children:p.jsxs("div",{className:"user-count",children:[p.jsx("span",{className:"count-value",children:H.userCount}),p.jsxs("div",{className:`trend ${F(H.userCount,H.previousUserCount)}`,children:[F(H.userCount,H.previousUserCount)==="up"&&p.jsx(FaTrendingUp,{}),F(H.userCount,H.previousUserCount)==="down"&&p.jsx(FaTrendingDown,{})]})]})}),p.jsx("td",{children:p.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[p.jsx("div",{className:"percentage-bar",children:p.jsx("div",{className:"percentage-fill",style:{width:`${H.percentage}%`}})}),H.percentage,"%"]})}),p.jsx("td",{children:p.jsxs("div",{className:"rating-container",children:[Q(H.averageRating),p.jsx("span",{style:{marginLeft:"5px",fontSize:"0.8rem"},children:H.averageRating})]})}),p.jsx("td",{children:p.jsx("div",{className:"action-buttons",children:p.jsxs("button",{className:"action-btn view-btn",children:[p.jsx(FaEye,{}),"View"]})})})]},H.id))})]})}):p.jsx("div",{className:"no-results",children:"No categories found matching your criteria."})]})]})]})},R7=()=>{const t=fl();pu();const[e,i]=Te.useState("general"),[n,o]=Te.useState({general:{siteName:"SkillConnect4B410",siteEmail:"admin@skillconnect.com",maintenanceMode:!1,debugMode:!1},admin:{sessionTimeout:30,passwordMinLength:8,requireTwoFactor:!1,maxLoginAttempts:5},notifications:{emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,notificationFrequency:"daily"},automation:{autoBackup:!0,backupFrequency:"weekly",autoCleanup:!0,cleanupDays:30},maintenance:{scheduledMaintenance:!1,maintenanceMessage:"System is under maintenance. Please try again later.",maintenanceStartTime:"",maintenanceEndTime:""},security:{ipWhitelist:"",allowedOrigins:"localhost:3000",rateLimitEnabled:!0,rateLimitRequests:100},api:{apiKeyEnabled:!1,apiKeyExpiry:30,apiRateLimit:1e3},theme:{primaryColor:"#0a84ff",secondaryColor:"#d6355d",darkMode:!1}}),[u,A]=Te.useState(""),[a,g]=Te.useState({version:"1.0.0",uptime:"0 days, 0 hours, 0 minutes",lastBackup:"Never",dbSize:"0 MB",activeUsers:0,totalBookings:0});Te.useEffect(()=>{(async()=>{try{g({version:"1.0.0",uptime:"15 days, 7 hours, 32 minutes",lastBackup:"2023-06-15 02:30:00",dbSize:"245.7 MB",activeUsers:1247,totalBookings:3842})}catch(Q){console.error("Failed to fetch system info:",Q)}})()},[]);const b=(F,Q,R)=>{o(H=>({...H,[F]:{...H[F],[Q]:R}}))},B=async()=>{A("saving");try{await new Promise(F=>setTimeout(F,1e3)),A("success"),setTimeout(()=>A(""),3e3)}catch(F){console.error("Failed to save settings:",F),A("error"),setTimeout(()=>A(""),3e3)}},I=async()=>{try{A("backup"),await new Promise(F=>setTimeout(F,2e3)),A("backup-success"),setTimeout(()=>A(""),3e3)}catch(F){console.error("Backup failed:",F),A("error"),setTimeout(()=>A(""),3e3)}},P=()=>{switch(e){case"general":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"General Settings"}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"siteName",children:"Site Name"}),p.jsx("input",{type:"text",id:"siteName",value:n.general.siteName,onChange:F=>b("general","siteName",F.target.value)})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"siteEmail",children:"Site Email"}),p.jsx("input",{type:"email",id:"siteEmail",value:n.general.siteEmail,onChange:F=>b("general","siteEmail",F.target.value)})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:n.general.maintenanceMode,onChange:F=>b("general","maintenanceMode",F.target.checked)}),"Maintenance Mode"]}),p.jsx("p",{className:"form-help",children:"When enabled, the site will display a maintenance message to all users except administrators."})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:n.general.debugMode,onChange:F=>b("general","debugMode",F.target.checked)}),"Debug Mode"]}),p.jsx("p",{className:"form-help",children:"Enable detailed error logging and debugging information."})]})]})]});case"admin":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"Admin Account Management"}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"sessionTimeout",children:"Session Timeout (minutes)"}),p.jsx("input",{type:"number",id:"sessionTimeout",min:"5",max:"120",value:n.admin.sessionTimeout,onChange:F=>b("admin","sessionTimeout",parseInt(F.target.value))}),p.jsx("p",{className:"form-help",children:"Administrators will be automatically logged out after this period of inactivity."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"passwordMinLength",children:"Minimum Password Length"}),p.jsx("input",{type:"number",id:"passwordMinLength",min:"6",max:"20",value:n.admin.passwordMinLength,onChange:F=>b("admin","passwordMinLength",parseInt(F.target.value))})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:n.admin.requireTwoFactor,onChange:F=>b("admin","requireTwoFactor",F.target.checked)}),"Require Two-Factor Authentication"]}),p.jsx("p",{className:"form-help",children:"Require administrators to use two-factor authentication for enhanced security."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"maxLoginAttempts",children:"Maximum Login Attempts"}),p.jsx("input",{type:"number",id:"maxLoginAttempts",min:"3",max:"10",value:n.admin.maxLoginAttempts,onChange:F=>b("admin","maxLoginAttempts",parseInt(F.target.value))}),p.jsx("p",{className:"form-help",children:"Number of failed login attempts before account is temporarily locked."})]})]})]});case"notifications":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"Notification Settings"}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:n.notifications.emailNotifications,onChange:F=>b("notifications","emailNotifications",F.target.checked)}),"Email Notifications"]}),p.jsx("p",{className:"form-help",children:"Receive important system notifications via email."})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:n.notifications.smsNotifications,onChange:F=>b("notifications","smsNotifications",F.target.checked)}),"SMS Notifications"]}),p.jsx("p",{className:"form-help",children:"Receive critical alerts via SMS message."})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:n.notifications.pushNotifications,onChange:F=>b("notifications","pushNotifications",F.target.checked)}),"Push Notifications"]}),p.jsx("p",{className:"form-help",children:"Receive browser push notifications when logged in."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"notificationFrequency",children:"Notification Frequency"}),p.jsxs("select",{id:"notificationFrequency",value:n.notifications.notificationFrequency,onChange:F=>b("notifications","notificationFrequency",F.target.value),children:[p.jsx("option",{value:"immediate",children:"Immediate"}),p.jsx("option",{value:"hourly",children:"Hourly Digest"}),p.jsx("option",{value:"daily",children:"Daily Digest"}),p.jsx("option",{value:"weekly",children:"Weekly Digest"})]})]})]})]});case"automation":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"Automation Settings"}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:n.automation.autoBackup,onChange:F=>b("automation","autoBackup",F.target.checked)}),"Automatic Backups"]}),p.jsx("p",{className:"form-help",children:"Automatically create system backups at regular intervals."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"backupFrequency",children:"Backup Frequency"}),p.jsxs("select",{id:"backupFrequency",value:n.automation.backupFrequency,onChange:F=>b("automation","backupFrequency",F.target.value),disabled:!n.automation.autoBackup,children:[p.jsx("option",{value:"daily",children:"Daily"}),p.jsx("option",{value:"weekly",children:"Weekly"}),p.jsx("option",{value:"monthly",children:"Monthly"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:n.automation.autoCleanup,onChange:F=>b("automation","autoCleanup",F.target.checked)}),"Automatic Cleanup"]}),p.jsx("p",{className:"form-help",children:"Automatically remove old logs and temporary files."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"cleanupDays",children:"Cleanup Retention (days)"}),p.jsx("input",{type:"number",id:"cleanupDays",min:"7",max:"365",value:n.automation.cleanupDays,onChange:F=>b("automation","cleanupDays",parseInt(F.target.value)),disabled:!n.automation.autoCleanup}),p.jsx("p",{className:"form-help",children:"Keep logs and temporary files for this many days before cleanup."})]}),p.jsx("div",{className:"form-group",children:p.jsxs("button",{className:"btn btn-primary",onClick:I,children:[p.jsx(d4,{})," Create Backup Now"]})})]})]});case"maintenance":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"System Maintenance"}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{className:"checkbox-label",children:[p.jsx("input",{type:"checkbox",checked:n.maintenance.scheduledMaintenance,onChange:F=>b("maintenance","scheduledMaintenance",F.target.checked)}),"Scheduled Maintenance"]}),p.jsx("p",{className:"form-help",children:"Schedule a maintenance window for system updates."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"maintenanceMessage",children:"Maintenance Message"}),p.jsx("textarea",{id:"maintenanceMessage",rows:"3",value:n.maintenance.maintenanceMessage,onChange:F=>b("maintenance","maintenanceMessage",F.target.value),disabled:!n.maintenance.scheduledMaintenance})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"maintenanceStartTime",children:"Start Time"}),p.jsx("input",{type:"datetime-local",id:"maintenanceStartTime",value:n.maintenance.maintenanceStartTime,onChange:F=>b("maintenance","maintenanceStartTime",F.target.value),disabled:!n.maintenance.scheduledMaintenance})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"maintenanceEndTime",children:"End Time"}),p.jsx("input",{type:"datetime-local",id:"maintenanceEndTime",value:n.maintenance.maintenanceEndTime,onChange:F=>b("maintenance","maintenanceEndTime",F.target.value),disabled:!n.maintenance.scheduledMaintenance})]})]}),p.jsxs("div",{className:"system-info",children:[p.jsx("h3",{children:"System Information"}),p.jsxs("div",{className:"info-grid",children:[p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Version:"}),p.jsx("span",{className:"info-value",children:a.version})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Uptime:"}),p.jsx("span",{className:"info-value",children:a.uptime})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Last Backup:"}),p.jsx("span",{className:"info-value",children:a.lastBackup})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Database Size:"}),p.jsx("span",{className:"info-value",children:a.dbSize})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Active Users:"}),p.jsx("span",{className:"info-value",children:a.activeUsers})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Total Bookings:"}),p.jsx("span",{className:"info-value",children:a.totalBookings})]})]})]})]})]});case"terms":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"Terms & Policies"}),p.jsxs("div",{className:"policy-container",children:[p.jsxs("div",{className:"policy-section",children:[p.jsx("h3",{children:"Terms of Service"}),p.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl."})]}),p.jsxs("div",{className:"policy-section",children:[p.jsx("h3",{children:"Privacy Policy"}),p.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl."})]}),p.jsxs("div",{className:"policy-section",children:[p.jsx("h3",{children:"Cookie Policy"}),p.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl."})]}),p.jsxs("div",{className:"policy-section",children:[p.jsx("h3",{children:"Refund Policy"}),p.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl."})]})]})]});case"about":return p.jsxs("div",{className:"settings-content",children:[p.jsx("h2",{className:"section-title",children:"About Us"}),p.jsxs("div",{className:"about-container",children:[p.jsxs("div",{className:"about-section",children:[p.jsx("h3",{children:"Our Mission"}),p.jsx("p",{children:"SkillConnect4B410 is dedicated to connecting skilled service providers with community members who need their expertise. Our platform makes it easy to find, book, and review services in your local area."})]}),p.jsxs("div",{className:"about-section",children:[p.jsx("h3",{children:"Our Team"}),p.jsx("p",{children:"Our team consists of passionate developers, designers, and community organizers who believe in the power of local connections and skill sharing."})]}),p.jsxs("div",{className:"about-section",children:[p.jsx("h3",{children:"Contact Information"}),p.jsxs("div",{className:"contact-info",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Email:"})," admin@skillconnect.com"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Phone:"})," (123) 456-7890"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Address:"})," 123 Main Street, Anytown, USA 12345"]})]})]}),p.jsxs("div",{className:"about-section",children:[p.jsx("h3",{children:"Version History"}),p.jsx("div",{className:"version-history",children:p.jsxs("div",{className:"version-item",children:[p.jsx("span",{className:"version-number",children:"v1.0.0"}),p.jsx("span",{className:"version-date",children:"June 15, 2023"}),p.jsx("span",{className:"version-desc",children:"Initial release with core functionality"})]})})]})]})]});default:return p.jsx("div",{className:"settings-content",children:"Select a settings section"})}};return p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
        .admin-settings-container {
          display: flex;
          height: calc(100vh - 90px);
        }
       
        .settings-sidebar {
          width: 250px;
          background: #fff;
          box-shadow: 2px 0 6px rgba(0, 0, 0, 0.05);
          overflow-y: auto;
        }
       
        .settings-header {
          padding: 20px;
          border-bottom: 1px solid #f0f0f0;
        }
       
        .settings-title {
          font-size: 1.2rem;
          font-weight: 600;
          color: #333;
          margin: 0;
          display: flex;
          align-items: center;
        }
       
        .settings-title .icon {
          margin-right: 10px;
          color: #0a84ff;
        }
       
        .settings-nav {
          padding: 15px 0;
        }
       
        .nav-section {
          margin-bottom: 20px;
        }
       
        .nav-section-title {
          font-size: 0.8rem;
          font-weight: 600;
          color: #888;
          text-transform: uppercase;
          padding: 0 20px;
          margin-bottom: 10px;
        }
       
        .nav-link {
          display: flex;
          align-items: center;
          padding: 12px 20px;
          color: #444;
          text-decoration: none;
          font-weight: 500;
          font-size: 0.9rem;
          transition: all 0.3s;
          position: relative;
        }
       
        .nav-link:hover {
          background: #f1f3f7;
        }
       
        .nav-link.active {
          background: #0a84ff;
          color: #fff;
        }
       
        .nav-icon {
          font-size: 1rem;
          margin-right: 10px;
        }
       
        .settings-content-wrapper {
          flex: 1;
          padding: 20px;
          overflow-y: auto;
          background: #f5f6fa;
        }
       
        .settings-content {
          background: #fff;
          border-radius: 10px;
          padding: 25px;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
       
        .section-title {
          font-size: 1.5rem;
          font-weight: 600;
          color: #333;
          margin: 0 0 20px 0;
          padding-bottom: 10px;
          border-bottom: 1px solid #eee;
        }
       
        .settings-form {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }
       
        .form-group {
          display: flex;
          flex-direction: column;
        }
       
        .form-row {
          display: flex;
          gap: 20px;
        }
       
        .form-row .form-group {
          flex: 1;
        }
       
        label {
          font-weight: 500;
          margin-bottom: 8px;
          color: #333;
        }
       
        input[type="text"],
        input[type="email"],
        input[type="number"],
        input[type="datetime-local"],
        select,
        textarea {
          padding: 10px 15px;
          border: 1px solid #ddd;
          border-radius: 6px;
          font-size: 0.9rem;
        }
       
        .checkbox-label {
          display: flex;
          align-items: center;
          font-weight: 500;
          cursor: pointer;
        }
       
        .checkbox-label input {
          margin-right: 10px;
        }
       
        .form-help {
          font-size: 0.8rem;
          color: #666;
          margin-top: 5px;
        }
       
        .btn {
          padding: 10px 15px;
          border: none;
          border-radius: 6px;
          font-size: 0.9rem;
          font-weight: 500;
          cursor: pointer;
          display: inline-flex;
          align-items: center;
          gap: 8px;
          transition: all 0.2s;
        }
       
        .btn-primary {
          background: #0a84ff;
          color: white;
        }
       
        .btn-primary:hover {
          background: #0077e6;
        }
       
        .save-status {
          position: fixed;
          top: 100px;
          right: 20px;
          padding: 10px 15px;
          border-radius: 6px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 8px;
          z-index: 1000;
        }
       
        .save-status.saving {
          background: #f8f9fa;
          color: #333;
          border: 1px solid #ddd;
        }
       
        .save-status.success {
          background: #d4edda;
          color: #155724;
          border: 1px solid #c3e6cb;
        }
       
        .save-status.error {
          background: #f8d7da;
          color: #721c24;
          border: 1px solid #f5c6cb;
        }
       
        .save-status.backup {
          background: #d1ecf1;
          color: #0c5460;
          border: 1px solid #bee5eb;
        }
       
        .save-status.backup-success {
          background: #d1ecf1;
          color: #0c5460;
          border: 1px solid #bee5eb;
        }
       
        .system-info {
          margin-top: 30px;
          padding: 20px;
          background: #f8f9fa;
          border-radius: 8px;
        }
       
        .system-info h3 {
          margin: 0 0 15px 0;
          font-size: 1.1rem;
          color: #333;
        }
       
        .info-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 15px;
        }
       
        .info-item {
          display: flex;
          justify-content: space-between;
        }
       
        .info-label {
          font-weight: 500;
          color: #555;
        }
       
        .info-value {
          font-weight: 600;
          color: #333;
        }
       
        .policy-container,
        .about-container {
          display: flex;
          flex-direction: column;
          gap: 25px;
        }
       
        .policy-section,
        .about-section {
          padding-bottom: 20px;
          border-bottom: 1px solid #eee;
        }
       
        .policy-section:last-child,
        .about-section:last-child {
          border-bottom: none;
        }
       
        .policy-section h3,
        .about-section h3 {
          margin: 0 0 10px 0;
          font-size: 1.1rem;
          color: #333;
        }
       
        .contact-info p {
          margin: 5px 0;
        }
       
        .version-history {
          display: flex;
          flex-direction: column;
          gap: 10px;
        }
       
        .version-item {
          display: flex;
          flex-direction: column;
          gap: 5px;
        }
       
        .version-number {
          font-weight: 600;
          color: #0a84ff;
        }
       
        .version-date {
          font-size: 0.8rem;
          color: #666;
        }
       
        .version-desc {
          font-size: 0.9rem;
          color: #555;
        }
       
        .back-button {
          margin-bottom: 20px;
        }
       
        @media (max-width: 768px) {
          .admin-settings-container {
            flex-direction: column;
          }
         
          .settings-sidebar {
            width: 100%;
          }
         
          .form-row {
            flex-direction: column;
            gap: 0;
          }
        }
      `}),p.jsxs("div",{className:"admin-settings-container",children:[p.jsxs("aside",{className:"settings-sidebar",children:[p.jsx("div",{className:"settings-header",children:p.jsxs("h1",{className:"settings-title",children:[p.jsx(nw,{className:"icon"}),"Settings"]})}),p.jsxs("nav",{className:"settings-nav",children:[p.jsxs("div",{className:"nav-section",children:[p.jsx("div",{className:"nav-section-title",children:"Settings"}),p.jsxs(ar,{to:"#",className:`nav-link ${e==="general"?"active":""}`,onClick:F=>{F.preventDefault(),i("general")},children:[p.jsx(nw,{className:"nav-icon"}),"General Settings"]}),p.jsxs(ar,{to:"#",className:`nav-link ${e==="admin"?"active":""}`,onClick:F=>{F.preventDefault(),i("admin")},children:[p.jsx(ZM,{className:"nav-icon"}),"Admin Account Management"]}),p.jsxs(ar,{to:"#",className:`nav-link ${e==="notifications"?"active":""}`,onClick:F=>{F.preventDefault(),i("notifications")},children:[p.jsx(RM,{className:"nav-icon"}),"Notifications"]}),p.jsxs(ar,{to:"#",className:`nav-link ${e==="automation"?"active":""}`,onClick:F=>{F.preventDefault(),i("automation")},children:[p.jsx(GM,{className:"nav-icon"}),"Automation"]}),p.jsxs(ar,{to:"#",className:`nav-link ${e==="maintenance"?"active":""}`,onClick:F=>{F.preventDefault(),i("maintenance")},children:[p.jsx(hm,{className:"nav-icon"}),"System Maintenance"]})]}),p.jsxs("div",{className:"nav-section",children:[p.jsx("div",{className:"nav-section-title",children:"About"}),p.jsxs(ar,{to:"#",className:`nav-link ${e==="terms"?"active":""}`,onClick:F=>{F.preventDefault(),i("terms")},children:[p.jsx(HM,{className:"nav-icon"}),"Terms & Policies"]}),p.jsxs(ar,{to:"#",className:`nav-link ${e==="about"?"active":""}`,onClick:F=>{F.preventDefault(),i("about")},children:[p.jsx(Lb,{className:"nav-icon"}),"About Us"]})]})]})]}),p.jsxs("div",{className:"settings-content-wrapper",children:[p.jsx("div",{className:"back-button",children:p.jsxs("button",{className:"btn btn-primary",onClick:()=>t("/admin/dashboard"),children:[p.jsx(jl,{})," Back to Dashboard"]})}),P(),e!=="terms"&&e!=="about"&&p.jsx("div",{className:"form-group",style:{marginTop:"30px"},children:p.jsxs("button",{className:"btn btn-primary",onClick:B,children:[p.jsx(KM,{})," Save Settings"]})})]})]}),u&&p.jsxs("div",{className:`save-status ${u}`,children:[u==="saving"&&p.jsxs(p.Fragment,{children:[p.jsx(Iv,{className:"spin"})," Saving settings..."]}),u==="success"&&p.jsxs(p.Fragment,{children:[p.jsx(Do,{})," Settings saved successfully!"]}),u==="error"&&p.jsxs(p.Fragment,{children:[p.jsx(f4,{})," Error saving settings!"]}),u==="backup"&&p.jsxs(p.Fragment,{children:[p.jsx(Iv,{className:"spin"})," Creating backup..."]}),u==="backup-success"&&p.jsxs(p.Fragment,{children:[p.jsx(Do,{})," Backup created successfully!"]})]})]})},O7=()=>{const t=fl(),[e,i]=Te.useState(""),[n,o]=Te.useState(""),[u,A]=Te.useState(""),[a,g]=Te.useState(null),[b,B]=Te.useState(!1),[I,P]=Te.useState(""),F=R=>{g(R.target.files[0])},Q=async R=>{if(R.preventDefault(),P(""),!e||!n||!u){P("Name, email, and password are required.");return}const H=new FormData;H.append("name",e),H.append("email",n),H.append("password",u),a&&H.append("profilePic",a);try{B(!0);const j=await Oi.post("/admin/auth/register",H);console.log(j.data),B(!1),t("/admin/login")}catch(j){B(!1),P(j.response?.data?.message||"Registration failed")}};return p.jsxs("div",{className:"container",children:[p.jsx("div",{className:"analytics-header",children:p.jsxs("div",{children:[p.jsx("h1",{children:"Admin Registration"}),p.jsx("p",{className:"header-description",children:"Register a new admin account"})]})}),I&&p.jsx("div",{className:"card error-message",children:I}),p.jsx("div",{className:"form-container",children:p.jsxs("form",{onSubmit:Q,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Name"}),p.jsx("input",{type:"text",value:e,onChange:R=>i(R.target.value),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Email"}),p.jsx("input",{type:"email",value:n,onChange:R=>o(R.target.value),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Password"}),p.jsx("input",{type:"password",value:u,onChange:R=>A(R.target.value),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Profile Picture (Optional)"}),p.jsx("input",{type:"file",accept:"image/*",onChange:F})]}),p.jsx("div",{className:"actions-section",children:p.jsx("button",{type:"submit",disabled:b,className:"export-btn",children:b?"Registering...":"Register"})})]})})]})};var Ev={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.9.0/LICENSE.txt
 */var Q7=Ev.exports,ZB;function z7(){return ZB||(ZB=1,function(t,e){(function(i,n){t.exports=n()})(Q7,function(){var i={},n={};function o(A,a,g){if(n[A]=g,A==="index"){var b="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",B={};return n.shared(B),n.index(i,B),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([b],{type:"text/javascript"}))),i}}o("shared",["exports"],function(A){function a(h,s,l,m){return new(l||(l=Promise))(function(_,C){function T(q){try{D(m.next(q))}catch($){C($)}}function L(q){try{D(m.throw(q))}catch($){C($)}}function D(q){var $;q.done?_(q.value):($=q.value,$ instanceof l?$:new l(function(ie){ie($)})).then(T,L)}D((m=m.apply(h,s||[])).next())})}function g(h,s){this.x=h,this.y=s}function b(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var B,I;typeof SuppressedError=="function"&&SuppressedError,g.prototype={clone(){return new g(this.x,this.y)},add(h){return this.clone()._add(h)},sub(h){return this.clone()._sub(h)},multByPoint(h){return this.clone()._multByPoint(h)},divByPoint(h){return this.clone()._divByPoint(h)},mult(h){return this.clone()._mult(h)},div(h){return this.clone()._div(h)},rotate(h){return this.clone()._rotate(h)},rotateAround(h,s){return this.clone()._rotateAround(h,s)},matMult(h){return this.clone()._matMult(h)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(h){return this.x===h.x&&this.y===h.y},dist(h){return Math.sqrt(this.distSqr(h))},distSqr(h){const s=h.x-this.x,l=h.y-this.y;return s*s+l*l},angle(){return Math.atan2(this.y,this.x)},angleTo(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith(h){return this.angleWithSep(h.x,h.y)},angleWithSep(h,s){return Math.atan2(this.x*s-this.y*h,this.x*h+this.y*s)},_matMult(h){const s=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=s,this},_add(h){return this.x+=h.x,this.y+=h.y,this},_sub(h){return this.x-=h.x,this.y-=h.y,this},_mult(h){return this.x*=h,this.y*=h,this},_div(h){return this.x/=h,this.y/=h,this},_multByPoint(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint(h){return this.x/=h.x,this.y/=h.y,this},_unit(){return this._div(this.mag()),this},_perp(){const h=this.y;return this.y=this.x,this.x=-h,this},_rotate(h){const s=Math.cos(h),l=Math.sin(h),m=l*this.x+s*this.y;return this.x=s*this.x-l*this.y,this.y=m,this},_rotateAround(h,s){const l=Math.cos(h),m=Math.sin(h),_=s.y+m*(this.x-s.x)+l*(this.y-s.y);return this.x=s.x+l*(this.x-s.x)-m*(this.y-s.y),this.y=_,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:g},g.convert=function(h){if(h instanceof g)return h;if(Array.isArray(h))return new g(+h[0],+h[1]);if(h.x!==void 0&&h.y!==void 0)return new g(+h.x,+h.y);throw new Error("Expected [x, y] or {x, y} point format")};var P=function(){if(I)return B;function h(s,l,m,_){this.cx=3*s,this.bx=3*(m-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(_-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=l,this.p2x=m,this.p2y=_}return I=1,B=h,h.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,l){if(l===void 0&&(l=1e-6),s<0)return 0;if(s>1)return 1;for(var m=s,_=0;_<8;_++){var C=this.sampleCurveX(m)-s;if(Math.abs(C)<l)return m;var T=this.sampleCurveDerivativeX(m);if(Math.abs(T)<1e-6)break;m-=C/T}var L=0,D=1;for(m=s,_=0;_<20&&(C=this.sampleCurveX(m),!(Math.abs(C-s)<l));_++)s>C?L=m:D=m,m=.5*(D-L)+L;return m},solve:function(s,l){return this.sampleCurveY(this.solveCurveX(s,l))}},B}(),F=b(P);let Q,R;function H(){return Q==null&&(Q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Q}function j(){if(R==null&&(R=!1,H())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let m=0;m<25;m++){const _=4*m;s.fillStyle=`rgb(${_},${_+1},${_+2})`,s.fillRect(m%5,Math.floor(m/5),1,1)}const l=s.getImageData(0,0,5,5).data;for(let m=0;m<100;m++)if(m%4!=3&&l[m]!==m){R=!0;break}}}return R||!1}var V=1e-6,W=typeof Float32Array<"u"?Float32Array:Array;function ne(){var h=new W(9);return W!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function te(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function de(){var h=new W(3);return W!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function ee(h){var s=h[0],l=h[1],m=h[2];return Math.sqrt(s*s+l*l+m*m)}function re(h,s,l){var m=new W(3);return m[0]=h,m[1]=s,m[2]=l,m}function xe(h,s,l){return h[0]=s[0]+l[0],h[1]=s[1]+l[1],h[2]=s[2]+l[2],h}function Be(h,s,l){return h[0]=s[0]*l,h[1]=s[1]*l,h[2]=s[2]*l,h}function se(h,s,l){var m=s[0],_=s[1],C=s[2],T=l[0],L=l[1],D=l[2];return h[0]=_*D-C*L,h[1]=C*T-m*D,h[2]=m*L-_*T,h}var ae,ce=ee;function Ee(h,s,l){var m=s[0],_=s[1],C=s[2],T=s[3];return h[0]=l[0]*m+l[4]*_+l[8]*C+l[12]*T,h[1]=l[1]*m+l[5]*_+l[9]*C+l[13]*T,h[2]=l[2]*m+l[6]*_+l[10]*C+l[14]*T,h[3]=l[3]*m+l[7]*_+l[11]*C+l[15]*T,h}function Ve(){var h=new W(4);return W!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function ue(h,s,l,m){var _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",C=Math.PI/360;s*=C,m*=C,l*=C;var T=Math.sin(s),L=Math.cos(s),D=Math.sin(l),q=Math.cos(l),$=Math.sin(m),ie=Math.cos(m);switch(_){case"xyz":h[0]=T*q*ie+L*D*$,h[1]=L*D*ie-T*q*$,h[2]=L*q*$+T*D*ie,h[3]=L*q*ie-T*D*$;break;case"xzy":h[0]=T*q*ie-L*D*$,h[1]=L*D*ie-T*q*$,h[2]=L*q*$+T*D*ie,h[3]=L*q*ie+T*D*$;break;case"yxz":h[0]=T*q*ie+L*D*$,h[1]=L*D*ie-T*q*$,h[2]=L*q*$-T*D*ie,h[3]=L*q*ie+T*D*$;break;case"yzx":h[0]=T*q*ie+L*D*$,h[1]=L*D*ie+T*q*$,h[2]=L*q*$-T*D*ie,h[3]=L*q*ie-T*D*$;break;case"zxy":h[0]=T*q*ie-L*D*$,h[1]=L*D*ie+T*q*$,h[2]=L*q*$+T*D*ie,h[3]=L*q*ie-T*D*$;break;case"zyx":h[0]=T*q*ie-L*D*$,h[1]=L*D*ie+T*q*$,h[2]=L*q*$-T*D*ie,h[3]=L*q*ie+T*D*$;break;default:throw new Error("Unknown angle order "+_)}return h}function fe(){var h=new W(2);return W!=Float32Array&&(h[0]=0,h[1]=0),h}function Ue(h,s){var l=new W(2);return l[0]=h,l[1]=s,l}de(),ae=new W(4),W!=Float32Array&&(ae[0]=0,ae[1]=0,ae[2]=0,ae[3]=0),de(),re(1,0,0),re(0,1,0),Ve(),Ve(),ne(),fe();const ke=8192;function pe(h,s,l){return s*(ke/(h.tileSize*Math.pow(2,l-h.tileID.overscaledZ)))}function Qe(h,s){return(h%s+s)%s}function J(h,s,l){return h*(1-l)+s*l}function me(h){if(h<=0)return 0;if(h>=1)return 1;const s=h*h,l=s*h;return 4*(h<.5?l:3*(h-s)+l-.75)}function Fe(h,s,l,m){const _=new F(h,s,l,m);return C=>_.solve(C)}const ze=Fe(.25,.1,.25,1);function Ke(h,s,l){return Math.min(l,Math.max(s,h))}function _t(h,s,l){const m=l-s,_=((h-s)%m+m)%m+s;return _===s?l:_}function gt(h,...s){for(const l of s)for(const m in l)h[m]=l[m];return h}let Et=1;function hi(h,s,l){const m={};for(const _ in h)m[_]=s.call(this,h[_],_,h);return m}function Vt(h,s,l){const m={};for(const _ in h)s.call(this,h[_],_,h)&&(m[_]=h[_]);return m}function Yt(h){return Array.isArray(h)?h.map(Yt):typeof h=="object"&&h?hi(h,Yt):h}const Jt={};function bi(h){Jt[h]||(typeof console<"u"&&console.warn(h),Jt[h]=!0)}function ot(h,s,l){return(l.y-h.y)*(s.x-h.x)>(s.y-h.y)*(l.x-h.x)}function $e(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let Ni=null;function yi(h){if(Ni==null){const s=h.navigator?h.navigator.userAgent:null;Ni=!!h.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Ni}function si(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const Mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ei(h,s,l,m,_){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const C=new VideoFrame(h,{timestamp:0});try{const T=C?.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const L=T.startsWith("BGR"),D=new Uint8ClampedArray(m*_*4);if(yield C.copyTo(D,function(q,$,ie,he,ve){const we=4*Math.max(-$,0),Ie=(Math.max(0,ie)-ie)*he*4+we,qe=4*he,Xe=Math.max(0,$),xt=Math.max(0,ie);return{rect:{x:Xe,y:xt,width:Math.min(q.width,$+he)-Xe,height:Math.min(q.height,ie+ve)-xt},layout:[{offset:Ie,stride:qe}]}}(h,s,l,m,_)),L)for(let q=0;q<D.length;q+=4){const $=D[q];D[q]=D[q+2],D[q+2]=$}return D}finally{C.close()}})}let ai,Ei;function $i(h,s,l,m){return h.addEventListener(s,l,m),{unsubscribe:()=>{h.removeEventListener(s,l,m)}}}function zi(h){return h*Math.PI/180}function wi(h){return h/Math.PI*180}const Gi={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},gn={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},et="AbortError";function be(){return new Error(et)}const ge={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Re(h){return ge.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const Ze="global-dispatcher";class st extends Error{constructor(s,l,m,_){super(`AJAXError: ${l} (${s}): ${m}`),this.status=s,this.statusText=l,this.url=m,this.body=_}}const ut=()=>$e(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,wt=function(h,s){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const m=Re(h.url);if(m)return m(h,s);if($e(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:Ze},s)}if(!(/^file:/.test(l=h.url)||/^file:/.test(ut())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,_){return a(this,void 0,void 0,function*(){const C=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:ut(),signal:_.signal});let T,L;m.type!=="json"||C.headers.has("Accept")||C.headers.set("Accept","application/json");try{T=yield fetch(C)}catch(q){throw new st(0,q.message,m.url,new Blob)}if(!T.ok){const q=yield T.blob();throw new st(T.status,T.statusText,m.url,q)}L=m.type==="arrayBuffer"||m.type==="image"?T.arrayBuffer():m.type==="json"?T.json():T.text();const D=yield L;if(_.signal.aborted)throw be();return{data:D,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}})}(h,s);if($e(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:Ze},s)}var l;return function(m,_){return new Promise((C,T)=>{var L;const D=new XMLHttpRequest;D.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(D.responseType="arraybuffer");for(const q in m.headers)D.setRequestHeader(q,m.headers[q]);m.type==="json"&&(D.responseType="text",!((L=m.headers)===null||L===void 0)&&L.Accept||D.setRequestHeader("Accept","application/json")),D.withCredentials=m.credentials==="include",D.onerror=()=>{T(new Error(D.statusText))},D.onload=()=>{if(!_.signal.aborted)if((D.status>=200&&D.status<300||D.status===0)&&D.response!==null){let q=D.response;if(m.type==="json")try{q=JSON.parse(D.response)}catch($){return void T($)}C({data:q,cacheControl:D.getResponseHeader("Cache-Control"),expires:D.getResponseHeader("Expires")})}else{const q=new Blob([D.response],{type:D.getResponseHeader("Content-Type")});T(new st(D.status,D.statusText,m.url,q))}},_.signal.addEventListener("abort",()=>{D.abort(),T(be())}),D.send(m.body)})}(h,s)};function dt(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const s=new URL(h),l=window.location;return s.protocol===l.protocol&&s.host===l.host}function Tt(h,s,l){l[h]&&l[h].indexOf(s)!==-1||(l[h]=l[h]||[],l[h].push(s))}function oi(h,s,l){if(l&&l[h]){const m=l[h].indexOf(s);m!==-1&&l[h].splice(m,1)}}class Qt{constructor(s,l={}){gt(this,l),this.type=s}}class Bi extends Qt{constructor(s,l={}){super("error",gt({error:s},l))}}class Ui{on(s,l){return this._listeners=this._listeners||{},Tt(s,l,this._listeners),{unsubscribe:()=>{this.off(s,l)}}}off(s,l){return oi(s,l,this._listeners),oi(s,l,this._oneTimeListeners),this}once(s,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Tt(s,l,this._oneTimeListeners),this):new Promise(m=>this.once(s,m))}fire(s,l){typeof s=="string"&&(s=new Qt(s,l||{}));const m=s.type;if(this.listens(m)){s.target=this;const _=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const L of _)L.call(this,s);const C=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const L of C)oi(m,L,this._oneTimeListeners),L.call(this,s);const T=this._eventedParent;T&&(gt(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(s))}else s instanceof Bi&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,l){return this._eventedParent=s,this._eventedParentData=l,this}}var yt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ti=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Vi(h,s){const l={};for(const m in h)m!=="ref"&&(l[m]=h[m]);return Ti.forEach(m=>{m in s&&(l[m]=s[m])}),l}function Mi(h,s){if(Array.isArray(h)){if(!Array.isArray(s)||h.length!==s.length)return!1;for(let l=0;l<h.length;l++)if(!Mi(h[l],s[l]))return!1;return!0}if(typeof h=="object"&&h!==null&&s!==null){if(typeof s!="object"||Object.keys(h).length!==Object.keys(s).length)return!1;for(const l in h)if(!Mi(h[l],s[l]))return!1;return!0}return h===s}function sn(h,s){h.push(s)}function vr(h,s,l){sn(l,{command:"addSource",args:[h,s[h]]})}function Er(h,s,l){sn(s,{command:"removeSource",args:[h]}),l[h]=!0}function Pi(h,s,l,m){Er(h,l,m),vr(h,s,l)}function Fn(h,s,l){let m;for(m in h[l])if(Object.prototype.hasOwnProperty.call(h[l],m)&&m!=="data"&&!Mi(h[l][m],s[l][m]))return!1;for(m in s[l])if(Object.prototype.hasOwnProperty.call(s[l],m)&&m!=="data"&&!Mi(h[l][m],s[l][m]))return!1;return!0}function fn(h,s,l,m,_,C){h=h||{},s=s||{};for(const T in h)Object.prototype.hasOwnProperty.call(h,T)&&(Mi(h[T],s[T])||l.push({command:C,args:[m,T,s[T],_]}));for(const T in s)Object.prototype.hasOwnProperty.call(s,T)&&!Object.prototype.hasOwnProperty.call(h,T)&&(Mi(h[T],s[T])||l.push({command:C,args:[m,T,s[T],_]}))}function Dn(h){return h.id}function hn(h,s){return h[s.id]=s,h}class Kt{constructor(s,l,m,_){this.message=(s?`${s}: `:"")+m,_&&(this.identifier=_),l!=null&&l.__line__&&(this.line=l.__line__)}}function ds(h,...s){for(const l of s)for(const m in l)h[m]=l[m];return h}class qs extends Error{constructor(s,l){super(l),this.message=l,this.key=s}}class jr{constructor(s,l=[]){this.parent=s,this.bindings={};for(const[m,_]of l)this.bindings[m]=_}concat(s){return new jr(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const or={kind:"null"},di={kind:"number"},tn={kind:"string"},nn={kind:"boolean"},_r={kind:"color"},Hn={kind:"projectionDefinition"},ua={kind:"object"},pn={kind:"value"},Aa={kind:"collator"},Pa={kind:"formatted"},zo={kind:"padding"},_c={kind:"colorArray"},Ho={kind:"numberArray"},xc={kind:"resolvedImage"},xr={kind:"variableAnchorOffsetCollection"};function Gs(h,s){return{kind:"array",itemType:h,N:s}}function qn(h){if(h.kind==="array"){const s=qn(h.itemType);return typeof h.N=="number"?`array<${s}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${s}>`}return h.kind}const pl=[or,di,tn,nn,_r,Hn,Pa,ua,Gs(pn),zo,Ho,_c,xc,xr];function bc(h,s){if(s.kind==="error")return null;if(h.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!bc(h.itemType,s.itemType))&&(typeof h.N!="number"||h.N===s.N))return null}else{if(h.kind===s.kind)return null;if(h.kind==="value"){for(const l of pl)if(!bc(l,s))return null}}return`Expected ${qn(h)} but found ${qn(s)} instead.`}function ml(h,s){return s.some(l=>l.kind===h.kind)}function gl(h,s){return s.some(l=>l==="null"?h===null:l==="array"?Array.isArray(h):l==="object"?h&&!Array.isArray(h)&&typeof h=="object":l===typeof h)}function ba(h,s){return h.kind==="array"&&s.kind==="array"?h.itemType.kind===s.itemType.kind&&typeof h.N=="number":h.kind===s.kind}const XA=.96422,Gr=.82521,wa=4/29,Ql=6/29,gA=3*Ql*Ql,zc=Ql*Ql*Ql,YA=Math.PI/180,Ya=180/Math.PI;function gu(h){return(h%=360)<0&&(h+=360),h}function Mr([h,s,l,m]){let _,C;const T=yu((.2225045*(h=vo(h))+.7168786*(s=vo(s))+.0606169*(l=vo(l)))/1);h===s&&s===l?_=C=T:(_=yu((.4360747*h+.3850649*s+.1430804*l)/XA),C=yu((.0139322*h+.0971045*s+.7141733*l)/Gr));const L=116*T-16;return[L<0?0:L,500*(_-T),200*(T-C),m]}function vo(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function yu(h){return h>zc?Math.pow(h,1/3):h/gA+wa}function ku([h,s,l,m]){let _=(h+16)/116,C=isNaN(s)?_:_+s/500,T=isNaN(l)?_:_-l/200;return _=1*ju(_),C=XA*ju(C),T=Gr*ju(T),[ka(3.1338561*C-1.6168667*_-.4906146*T),ka(-.9787684*C+1.9161415*_+.033454*T),ka(.0719453*C-.2289914*_+1.4052427*T),m]}function ka(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function ju(h){return h>Ql?h*h*h:gA*(h-wa)}const yA=Object.hasOwn||function(h,s){return Object.prototype.hasOwnProperty.call(h,s)};function Vo(h,s){return yA(h,s)?h[s]:void 0}function wc(h){return parseInt(h.padEnd(2,h),16)/255}function Uu(h,s){return ea(s?h/100:h,0,1)}function ea(h,s,l){return Math.min(Math.max(s,h),l)}function Nn(h){return!h.some(Number.isNaN)}const Ja={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ns(h,s,l){return h+l*(s-h)}function ja(h,s,l){return h.map((m,_)=>Ns(m,s[_],l))}class Cn{constructor(s,l,m,_=1,C=!0){this.r=s,this.g=l,this.b=m,this.a=_,C||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[s,l,m,_]))}static parse(s){if(s instanceof Cn)return s;if(typeof s!="string")return;const l=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=Vo(Ja,m);if(_){const[T,L,D]=_;return[T/255,L/255,D/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const T=m.length<6?1:2;let L=1;return[wc(m.slice(L,L+=T)),wc(m.slice(L,L+=T)),wc(m.slice(L,L+=T)),wc(m.slice(L,L+T)||"ff")]}if(m.startsWith("rgb")){const T=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[L,D,q,$,ie,he,ve,we,Ie,qe,Xe,xt]=T,rt=[$||" ",ve||" ",qe].join("");if(rt==="  "||rt==="  /"||rt===",,"||rt===",,,"){const At=[q,he,Ie].join(""),kt=At==="%%%"?100:At===""?255:0;if(kt){const Ot=[ea(+D/kt,0,1),ea(+ie/kt,0,1),ea(+we/kt,0,1),Xe?Uu(+Xe,xt):1];if(Nn(Ot))return Ot}}return}}const C=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[T,L,D,q,$,ie,he,ve,we]=C,Ie=[D||" ",$||" ",he].join("");if(Ie==="  "||Ie==="  /"||Ie===",,"||Ie===",,,"){const qe=[+L,ea(+q,0,100),ea(+ie,0,100),ve?Uu(+ve,we):1];if(Nn(qe))return function([Xe,xt,rt,At]){function kt(Ot){const ni=(Ot+Xe/30)%12,mi=xt*Math.min(rt,1-rt);return rt-mi*Math.max(-1,Math.min(ni-3,9-ni,1))}return Xe=gu(Xe),xt/=100,rt/=100,[kt(0),kt(8),kt(4),At]}(qe)}}}(s);return l?new Cn(...l,!1):void 0}get rgb(){const{r:s,g:l,b:m,a:_}=this,C=_||1/0;return this.overwriteGetter("rgb",[s/C,l/C,m/C,_])}get hcl(){return this.overwriteGetter("hcl",function(s){const[l,m,_,C]=Mr(s),T=Math.sqrt(m*m+_*_);return[Math.round(1e4*T)?gu(Math.atan2(_,m)*Ya):NaN,T,l,C]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Mr(this.rgb))}overwriteGetter(s,l){return Object.defineProperty(this,s,{value:l}),l}toString(){const[s,l,m,_]=this.rgb;return`rgba(${[s,l,m].map(C=>Math.round(255*C)).join(",")},${_})`}static interpolate(s,l,m,_="rgb"){switch(_){case"rgb":{const[C,T,L,D]=ja(s.rgb,l.rgb,m);return new Cn(C,T,L,D,!1)}case"hcl":{const[C,T,L,D]=s.hcl,[q,$,ie,he]=l.hcl;let ve,we;if(isNaN(C)||isNaN(q))isNaN(C)?isNaN(q)?ve=NaN:(ve=q,L!==1&&L!==0||(we=$)):(ve=C,ie!==1&&ie!==0||(we=T));else{let rt=q-C;q>C&&rt>180?rt-=360:q<C&&C-q>180&&(rt+=360),ve=C+m*rt}const[Ie,qe,Xe,xt]=function([rt,At,kt,Ot]){return rt=isNaN(rt)?0:rt*YA,ku([kt,Math.cos(rt)*At,Math.sin(rt)*At,Ot])}([ve,we??Ns(T,$,m),Ns(L,ie,m),Ns(D,he,m)]);return new Cn(Ie,qe,Xe,xt,!1)}case"lab":{const[C,T,L,D]=ku(ja(s.lab,l.lab,m));return new Cn(C,T,L,D,!1)}}}}Cn.black=new Cn(0,0,0,1),Cn.white=new Cn(1,1,1,1),Cn.transparent=new Cn(0,0,0,0),Cn.red=new Cn(1,0,0,1);class fs{constructor(s,l,m){this.sensitivity=s?l?"variant":"case":l?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,l){return this.collator.compare(s,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const qo=["bottom","center","top"];class eo{constructor(s,l,m,_,C,T){this.text=s,this.image=l,this.scale=m,this.fontStack=_,this.textColor=C,this.verticalAlign=T}}class Zi{constructor(s){this.sections=s}static fromString(s){return new Zi([new eo(s,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof Zi?s:Zi.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class _s{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof _s)return s;if(typeof s=="number")return new _s([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const l of s)if(typeof l!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new _s(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,l,m){return new _s(ja(s.values,l.values,m))}}class xs{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof xs)return s;if(typeof s=="number")return new xs([s]);if(Array.isArray(s)){for(const l of s)if(typeof l!="number")return;return new xs(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,l,m){return new xs(ja(s.values,l.values,m))}}class fr{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof fr)return s;if(typeof s=="string"){const m=Cn.parse(s);return m?new fr([m]):void 0}if(!Array.isArray(s))return;const l=[];for(const m of s){if(typeof m!="string")return;const _=Cn.parse(m);if(!_)return;l.push(_)}return new fr(l)}toString(){return JSON.stringify(this.values)}static interpolate(s,l,m,_="rgb"){const C=[];if(s.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${s.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let T=0;T<s.values.length;T++)C.push(Cn.interpolate(s.values[T],l.values[T],m,_));return new fr(C)}}class Rn extends Error{constructor(s){super(s),this.name="RuntimeError"}toJSON(){return this.message}}const yl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Kr{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Kr)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let l=0;l<s.length;l+=2){const m=s[l],_=s[l+1];if(typeof m!="string"||!yl.has(m)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new Kr(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,l,m){const _=s.values,C=l.values;if(_.length!==C.length)throw new Rn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${l.toString()}`);const T=[];for(let L=0;L<_.length;L+=2){if(_[L]!==C[L])throw new Rn(`Cannot interpolate values containing mismatched anchors. from[${L}]: ${_[L]}, to[${L}]: ${C[L]}`);T.push(_[L]);const[D,q]=_[L+1],[$,ie]=C[L+1];T.push([Ns(D,$,m),Ns(q,ie,m)])}return new Kr(T)}}class Wr{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Wr({name:s,available:!1}):null}}class ta{constructor(s,l,m){this.from=s,this.to=l,this.transition=m}static interpolate(s,l,m){return new ta(s,l,m)}static parse(s){return s instanceof ta?s:Array.isArray(s)&&s.length===3&&typeof s[0]=="string"&&typeof s[1]=="string"&&typeof s[2]=="number"?new ta(s[0],s[1],s[2]):typeof s=="object"&&typeof s.from=="string"&&typeof s.to=="string"&&typeof s.transition=="number"?new ta(s.from,s.to,s.transition):typeof s=="string"?new ta(s,s,1):void 0}}function zl(h,s,l,m){return typeof h=="number"&&h>=0&&h<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof l=="number"&&l>=0&&l<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[h,s,l,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[h,s,l,m]:[h,s,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rr(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof ta||h instanceof Cn||h instanceof fs||h instanceof Zi||h instanceof _s||h instanceof xs||h instanceof fr||h instanceof Kr||h instanceof Wr)return!0;if(Array.isArray(h)){for(const s of h)if(!rr(s))return!1;return!0}if(typeof h=="object"){for(const s in h)if(!rr(h[s]))return!1;return!0}return!1}function pr(h){if(h===null)return or;if(typeof h=="string")return tn;if(typeof h=="boolean")return nn;if(typeof h=="number")return di;if(h instanceof Cn)return _r;if(h instanceof ta)return Hn;if(h instanceof fs)return Aa;if(h instanceof Zi)return Pa;if(h instanceof _s)return zo;if(h instanceof xs)return Ho;if(h instanceof fr)return _c;if(h instanceof Kr)return xr;if(h instanceof Wr)return xc;if(Array.isArray(h)){const s=h.length;let l;for(const m of h){const _=pr(m);if(l){if(l===_)continue;l=pn;break}l=_}return Gs(l||pn,s)}return ua}function _n(h){const s=typeof h;return h===null?"":s==="string"||s==="number"||s==="boolean"?String(h):h instanceof Cn||h instanceof ta||h instanceof Zi||h instanceof _s||h instanceof xs||h instanceof fr||h instanceof Kr||h instanceof Wr?h.toString():JSON.stringify(h)}class Ji{constructor(s,l){this.type=s,this.value=l}static parse(s,l){if(s.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!rr(s[1]))return l.error("invalid value");const m=s[1];let _=pr(m);const C=l.expectedType;return _.kind!=="array"||_.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(_=C),new Ji(_,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const bs={string:tn,number:di,boolean:nn,object:ua};class rn{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let m,_=1;const C=s[0];if(C==="array"){let L,D;if(s.length>2){const q=s[1];if(typeof q!="string"||!(q in bs)||q==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);L=bs[q],_++}else L=pn;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return l.error('The length argument to "array" must be a positive integer literal',2);D=s[2],_++}m=Gs(L,D)}else{if(!bs[C])throw new Error(`Types doesn't contain name = ${C}`);m=bs[C]}const T=[];for(;_<s.length;_++){const L=l.parse(s[_],_,pn);if(!L)return null;T.push(L)}return new rn(m,T)}evaluate(s){for(let l=0;l<this.args.length;l++){const m=this.args[l].evaluate(s);if(!bc(this.type,pr(m)))return m;if(l===this.args.length-1)throw new Rn(`Expected value to be of type ${qn(this.type)}, but found ${qn(pr(m))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const vl={"to-boolean":nn,"to-color":_r,"to-number":di,"to-string":tn};class Ur{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");const m=s[0];if(!vl[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&s.length!==2)return l.error("Expected one argument.");const _=vl[m],C=[];for(let T=1;T<s.length;T++){const L=l.parse(s[T],T,pn);if(!L)return null;C.push(L)}return new Ur(_,C)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let l,m;for(const _ of this.args){if(l=_.evaluate(s),m=null,l instanceof Cn)return l;if(typeof l=="string"){const C=s.parseColor(l);if(C)return C}else if(Array.isArray(l)&&(m=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:zl(l[0],l[1],l[2],l[3]),!m))return new Cn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Rn(m||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const m of this.args){l=m.evaluate(s);const _=_s.parse(l);if(_)return _}throw new Rn(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const m of this.args){l=m.evaluate(s);const _=xs.parse(l);if(_)return _}throw new Rn(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const m of this.args){l=m.evaluate(s);const _=fr.parse(l);if(_)return _}throw new Rn(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const m of this.args){l=m.evaluate(s);const _=Kr.parse(l);if(_)return _}throw new Rn(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const m of this.args){if(l=m.evaluate(s),l===null)return 0;const _=Number(l);if(!isNaN(_))return _}throw new Rn(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Zi.fromString(_n(this.args[0].evaluate(s)));case"resolvedImage":return Wr.fromString(_n(this.args[0].evaluate(s)));case"projectionDefinition":return this.args[0].evaluate(s);default:return _n(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Du=["Unknown","Point","LineString","Polygon"];class Hl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Du[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let l=this._parseColorCache.get(s);return l||(l=Cn.parse(s),this._parseColorCache.set(s,l)),l}}class Vl{constructor(s,l,m=[],_,C=new jr,T=[]){this.registry=s,this.path=m,this.key=m.map(L=>`[${L}]`).join(""),this.scope=C,this.errors=T,this.expectedType=_,this._isConstant=l}parse(s,l,m,_,C={}){return l?this.concat(l,m,_)._parse(s,C):this._parse(s,C)}_parse(s,l){function m(_,C,T){return T==="assert"?new rn(C,[_]):T==="coerce"?new Ur(C,[_]):_}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=s[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[_];if(C){let T=C.parse(s,this);if(!T)return null;if(this.expectedType){const L=this.expectedType,D=T.type;if(L.kind!=="string"&&L.kind!=="number"&&L.kind!=="boolean"&&L.kind!=="object"&&L.kind!=="array"||D.kind!=="value"){if(L.kind==="projectionDefinition"&&["string","array"].includes(D.kind)||["color","formatted","resolvedImage"].includes(L.kind)&&["value","string"].includes(D.kind)||["padding","numberArray"].includes(L.kind)&&["value","number","array"].includes(D.kind)||L.kind==="colorArray"&&["value","string","array"].includes(D.kind)||L.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(D.kind))T=m(T,L,l.typeAnnotation||"coerce");else if(this.checkSubtype(L,D))return null}else T=m(T,L,l.typeAnnotation||"assert")}if(!(T instanceof Ji)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const L=new Hl;try{T=new Ji(T.type,T.evaluate(L))}catch(D){return this.error(D.message),null}}return T}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,l,m){const _=typeof s=="number"?this.path.concat(s):this.path,C=m?this.scope.concat(m):this.scope;return new Vl(this.registry,this._isConstant,_,l||null,C,this.errors)}error(s,...l){const m=`${this.key}${l.map(_=>`[${_}]`).join("")}`;this.errors.push(new qs(m,s))}checkSubtype(s,l){const m=bc(s,l);return m&&this.error(m),m}}class _o{constructor(s,l){this.type=l.type,this.bindings=[].concat(s),this.result=l}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const l of this.bindings)s(l[1]);s(this.result)}static parse(s,l){if(s.length<4)return l.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const m=[];for(let C=1;C<s.length-1;C+=2){const T=s[C];if(typeof T!="string")return l.error(`Expected string, but found ${typeof T} instead.`,C);if(/[^a-zA-Z0-9_]/.test(T))return l.error("Variable names must contain only alphanumeric characters or '_'.",C);const L=l.parse(s[C+1],C+1);if(!L)return null;m.push([T,L])}const _=l.parse(s[s.length-1],s.length-1,l.expectedType,m);return _?new _o(m,_):null}outputDefined(){return this.result.outputDefined()}}class ha{constructor(s,l){this.type=l.type,this.name=s,this.boundExpression=l}static parse(s,l){if(s.length!==2||typeof s[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const m=s[1];return l.scope.has(m)?new ha(m,l.scope.get(m)):l.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Go{constructor(s,l,m){this.type=s,this.index=l,this.input=m}static parse(s,l){if(s.length!==3)return l.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=l.parse(s[1],1,di),_=l.parse(s[2],2,Gs(l.expectedType||pn));return m&&_?new Go(_.type.itemType,m,_):null}evaluate(s){const l=this.index.evaluate(s),m=this.input.evaluate(s);if(l<0)throw new Rn(`Array index out of bounds: ${l} < 0.`);if(l>=m.length)throw new Rn(`Array index out of bounds: ${l} > ${m.length-1}.`);if(l!==Math.floor(l))throw new Rn(`Array index must be an integer, but found ${l} instead.`);return m[l]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class Ru{constructor(s,l){this.type=nn,this.needle=s,this.haystack=l}static parse(s,l){if(s.length!==3)return l.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=l.parse(s[1],1,pn),_=l.parse(s[2],2,pn);return m&&_?ml(m.type,[nn,tn,di,or,pn])?new Ru(m,_):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${qn(m.type)} instead`):null}evaluate(s){const l=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!m)return!1;if(!gl(l,["boolean","string","number","null"]))throw new Rn(`Expected first argument to be of type boolean, string, number or null, but found ${qn(pr(l))} instead.`);if(!gl(m,["string","array"]))throw new Rn(`Expected second argument to be of type array or string, but found ${qn(pr(m))} instead.`);return m.indexOf(l)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class Ko{constructor(s,l,m){this.type=di,this.needle=s,this.haystack=l,this.fromIndex=m}static parse(s,l){if(s.length<=2||s.length>=5)return l.error(`Expected 2 or 3 arguments, but found ${s.length-1} instead.`);const m=l.parse(s[1],1,pn),_=l.parse(s[2],2,pn);if(!m||!_)return null;if(!ml(m.type,[nn,tn,di,or,pn]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${qn(m.type)} instead`);if(s.length===4){const C=l.parse(s[3],3,di);return C?new Ko(m,_,C):null}return new Ko(m,_)}evaluate(s){const l=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!gl(l,["boolean","string","number","null"]))throw new Rn(`Expected first argument to be of type boolean, string, number or null, but found ${qn(pr(l))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(s)),gl(m,["string"])){const C=m.indexOf(l,_);return C===-1?-1:[...m.slice(0,C)].length}if(gl(m,["array"]))return m.indexOf(l,_);throw new Rn(`Expected second argument to be of type array or string, but found ${qn(pr(m))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Ms{constructor(s,l,m,_,C,T){this.inputType=s,this.type=l,this.input=m,this.cases=_,this.outputs=C,this.otherwise=T}static parse(s,l){if(s.length<5)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return l.error("Expected an even number of arguments.");let m,_;l.expectedType&&l.expectedType.kind!=="value"&&(_=l.expectedType);const C={},T=[];for(let q=2;q<s.length-1;q+=2){let $=s[q];const ie=s[q+1];Array.isArray($)||($=[$]);const he=l.concat(q);if($.length===0)return he.error("Expected at least one branch label.");for(const we of $){if(typeof we!="number"&&typeof we!="string")return he.error("Branch labels must be numbers or strings.");if(typeof we=="number"&&Math.abs(we)>Number.MAX_SAFE_INTEGER)return he.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof we=="number"&&Math.floor(we)!==we)return he.error("Numeric branch labels must be integer values.");if(m){if(he.checkSubtype(m,pr(we)))return null}else m=pr(we);if(C[String(we)]!==void 0)return he.error("Branch labels must be unique.");C[String(we)]=T.length}const ve=l.parse(ie,q,_);if(!ve)return null;_=_||ve.type,T.push(ve)}const L=l.parse(s[1],1,pn);if(!L)return null;const D=l.parse(s[s.length-1],s.length-1,_);return D?L.type.kind!=="value"&&l.concat(1).checkSubtype(m,L.type)?null:new Ms(m,_,L,C,T,D):null}evaluate(s){const l=this.input.evaluate(s);return(pr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class $r{constructor(s,l,m){this.type=s,this.branches=l,this.otherwise=m}static parse(s,l){if(s.length<4)return l.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return l.error("Expected an odd number of arguments.");let m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const _=[];for(let T=1;T<s.length-1;T+=2){const L=l.parse(s[T],T,nn);if(!L)return null;const D=l.parse(s[T+1],T+1,m);if(!D)return null;_.push([L,D]),m=m||D.type}const C=l.parse(s[s.length-1],s.length-1,m);if(!C)return null;if(!m)throw new Error("Can't infer output type");return new $r(m,_,C)}evaluate(s){for(const[l,m]of this.branches)if(l.evaluate(s))return m.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[l,m]of this.branches)s(l),s(m);s(this.otherwise)}outputDefined(){return this.branches.every(([s,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class xo{constructor(s,l,m,_){this.type=s,this.input=l,this.beginIndex=m,this.endIndex=_}static parse(s,l){if(s.length<=2||s.length>=5)return l.error(`Expected 2 or 3 arguments, but found ${s.length-1} instead.`);const m=l.parse(s[1],1,pn),_=l.parse(s[2],2,di);if(!m||!_)return null;if(!ml(m.type,[Gs(pn),tn,pn]))return l.error(`Expected first argument to be of type array or string, but found ${qn(m.type)} instead`);if(s.length===4){const C=l.parse(s[3],3,di);return C?new xo(m.type,m,_,C):null}return new xo(m.type,m,_)}evaluate(s){const l=this.input.evaluate(s),m=this.beginIndex.evaluate(s);let _;if(this.endIndex&&(_=this.endIndex.evaluate(s)),gl(l,["string"]))return[...l].slice(m,_).join("");if(gl(l,["array"]))return l.slice(m,_);throw new Rn(`Expected first argument to be of type array or string, but found ${qn(pr(l))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function vu(h,s){const l=h.length-1;let m,_,C=0,T=l,L=0;for(;C<=T;)if(L=Math.floor((C+T)/2),m=h[L],_=h[L+1],m<=s){if(L===l||s<_)return L;C=L+1}else{if(!(m>s))throw new Rn("Input is not a number.");T=L-1}return 0}class bo{constructor(s,l,m){this.type=s,this.input=l,this.labels=[],this.outputs=[];for(const[_,C]of m)this.labels.push(_),this.outputs.push(C)}static parse(s,l){if(s.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");const m=l.parse(s[1],1,di);if(!m)return null;const _=[];let C=null;l.expectedType&&l.expectedType.kind!=="value"&&(C=l.expectedType);for(let T=1;T<s.length;T+=2){const L=T===1?-1/0:s[T],D=s[T+1],q=T,$=T+1;if(typeof L!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(_.length&&_[_.length-1][0]>=L)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',q);const ie=l.parse(D,$,C);if(!ie)return null;C=C||ie.type,_.push([L,ie])}return new bo(C,m,_)}evaluate(s){const l=this.labels,m=this.outputs;if(l.length===1)return m[0].evaluate(s);const _=this.input.evaluate(s);if(_<=l[0])return m[0].evaluate(s);const C=l.length;return _>=l[C-1]?m[C-1].evaluate(s):m[vu(l,_)].evaluate(s)}eachChild(s){s(this.input);for(const l of this.outputs)s(l)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Is(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Hc,Bc,vA=function(){if(Bc)return Hc;function h(s,l,m,_){this.cx=3*s,this.bx=3*(m-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(_-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=l,this.p2x=m,this.p2y=_}return Bc=1,Hc=h,h.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,l){if(l===void 0&&(l=1e-6),s<0)return 0;if(s>1)return 1;for(var m=s,_=0;_<8;_++){var C=this.sampleCurveX(m)-s;if(Math.abs(C)<l)return m;var T=this.sampleCurveDerivativeX(m);if(Math.abs(T)<1e-6)break;m-=C/T}var L=0,D=1;for(m=s,_=0;_<20&&(C=this.sampleCurveX(m),!(Math.abs(C-s)<l));_++)s>C?L=m:D=m,m=.5*(D-L)+L;return m},solve:function(s,l){return this.sampleCurveY(this.solveCurveX(s,l))}},Hc}(),Ou=Is(vA);class rs{constructor(s,l,m,_,C){this.type=s,this.operator=l,this.interpolation=m,this.input=_,this.labels=[],this.outputs=[];for(const[T,L]of C)this.labels.push(T),this.outputs.push(L)}static interpolationFactor(s,l,m,_){let C=0;if(s.name==="exponential")C=ql(l,s.base,m,_);else if(s.name==="linear")C=ql(l,1,m,_);else if(s.name==="cubic-bezier"){const T=s.controlPoints;C=new Ou(T[0],T[1],T[2],T[3]).solve(ql(l,1,m,_))}return C}static parse(s,l){let[m,_,C,...T]=s;if(!Array.isArray(_)||_.length===0)return l.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const q=_[1];if(typeof q!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:q}}else{if(_[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const q=_.slice(1);if(q.length!==4||q.some($=>typeof $!="number"||$<0||$>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:q}}}if(s.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(C=l.parse(C,2,di),!C)return null;const L=[];let D=null;m!=="interpolate-hcl"&&m!=="interpolate-lab"||l.expectedType==_c?l.expectedType&&l.expectedType.kind!=="value"&&(D=l.expectedType):D=_r;for(let q=0;q<T.length;q+=2){const $=T[q],ie=T[q+1],he=q+3,ve=q+4;if(typeof $!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',he);if(L.length&&L[L.length-1][0]>=$)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',he);const we=l.parse(ie,ve,D);if(!we)return null;D=D||we.type,L.push([$,we])}return ba(D,di)||ba(D,Hn)||ba(D,_r)||ba(D,zo)||ba(D,Ho)||ba(D,_c)||ba(D,xr)||ba(D,Gs(di))?new rs(D,m,_,C,L):l.error(`Type ${qn(D)} is not interpolatable.`)}evaluate(s){const l=this.labels,m=this.outputs;if(l.length===1)return m[0].evaluate(s);const _=this.input.evaluate(s);if(_<=l[0])return m[0].evaluate(s);const C=l.length;if(_>=l[C-1])return m[C-1].evaluate(s);const T=vu(l,_),L=rs.interpolationFactor(this.interpolation,_,l[T],l[T+1]),D=m[T].evaluate(s),q=m[T+1].evaluate(s);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ns(D,q,L);case"color":return Cn.interpolate(D,q,L);case"padding":return _s.interpolate(D,q,L);case"colorArray":return fr.interpolate(D,q,L);case"numberArray":return xs.interpolate(D,q,L);case"variableAnchorOffsetCollection":return Kr.interpolate(D,q,L);case"array":return ja(D,q,L);case"projectionDefinition":return ta.interpolate(D,q,L)}case"interpolate-hcl":switch(this.type.kind){case"color":return Cn.interpolate(D,q,L,"hcl");case"colorArray":return fr.interpolate(D,q,L,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Cn.interpolate(D,q,L,"lab");case"colorArray":return fr.interpolate(D,q,L,"lab")}}}eachChild(s){s(this.input);for(const l of this.outputs)s(l)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function ql(h,s,l,m){const _=m-l,C=h-l;return _===0?0:s===1?C/_:(Math.pow(s,C)-1)/(Math.pow(s,_)-1)}const da={color:Cn.interpolate,number:Ns,padding:_s.interpolate,numberArray:xs.interpolate,colorArray:fr.interpolate,variableAnchorOffsetCollection:Kr.interpolate,array:ja};class Qu{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let m=null;const _=l.expectedType;_&&_.kind!=="value"&&(m=_);const C=[];for(const L of s.slice(1)){const D=l.parse(L,1+C.length,m,void 0,{typeAnnotation:"omit"});if(!D)return null;m=m||D.type,C.push(D)}if(!m)throw new Error("No output type");const T=_&&C.some(L=>bc(_,L.type));return new Qu(T?pn:m,C)}evaluate(s){let l,m=null,_=0;for(const C of this.args)if(_++,m=C.evaluate(s),m&&m instanceof Wr&&!m.available&&(l||(l=m.name),m=null,_===this.args.length&&(m=l)),m!==null)break;return m}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function Vc(h,s){return h==="=="||h==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function _l(h,s,l,m){return m.compare(s,l)===0}function to(h,s,l){const m=h!=="=="&&h!=="!=";return class D3{constructor(C,T,L){this.type=nn,this.lhs=C,this.rhs=T,this.collator=L,this.hasUntypedArgument=C.type.kind==="value"||T.type.kind==="value"}static parse(C,T){if(C.length!==3&&C.length!==4)return T.error("Expected two or three arguments.");const L=C[0];let D=T.parse(C[1],1,pn);if(!D)return null;if(!Vc(L,D.type))return T.concat(1).error(`"${L}" comparisons are not supported for type '${qn(D.type)}'.`);let q=T.parse(C[2],2,pn);if(!q)return null;if(!Vc(L,q.type))return T.concat(2).error(`"${L}" comparisons are not supported for type '${qn(q.type)}'.`);if(D.type.kind!==q.type.kind&&D.type.kind!=="value"&&q.type.kind!=="value")return T.error(`Cannot compare types '${qn(D.type)}' and '${qn(q.type)}'.`);m&&(D.type.kind==="value"&&q.type.kind!=="value"?D=new rn(q.type,[D]):D.type.kind!=="value"&&q.type.kind==="value"&&(q=new rn(D.type,[q])));let $=null;if(C.length===4){if(D.type.kind!=="string"&&q.type.kind!=="string"&&D.type.kind!=="value"&&q.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if($=T.parse(C[3],3,Aa),!$)return null}return new D3(D,q,$)}evaluate(C){const T=this.lhs.evaluate(C),L=this.rhs.evaluate(C);if(m&&this.hasUntypedArgument){const D=pr(T),q=pr(L);if(D.kind!==q.kind||D.kind!=="string"&&D.kind!=="number")throw new Rn(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${D.kind}, ${q.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const D=pr(T),q=pr(L);if(D.kind!=="string"||q.kind!=="string")return s(C,T,L)}return this.collator?l(C,T,L,this.collator.evaluate(C)):s(C,T,L)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const ia=to("==",function(h,s,l){return s===l},_l),zu=to("!=",function(h,s,l){return s!==l},function(h,s,l,m){return!_l(0,s,l,m)}),K=to("<",function(h,s,l){return s<l},function(h,s,l,m){return m.compare(s,l)<0}),Se=to(">",function(h,s,l){return s>l},function(h,s,l,m){return m.compare(s,l)>0}),tt=to("<=",function(h,s,l){return s<=l},function(h,s,l,m){return m.compare(s,l)<=0}),ft=to(">=",function(h,s,l){return s>=l},function(h,s,l,m){return m.compare(s,l)>=0});class Ft{constructor(s,l,m){this.type=Aa,this.locale=m,this.caseSensitive=s,this.diacriticSensitive=l}static parse(s,l){if(s.length!==2)return l.error("Expected one argument.");const m=s[1];if(typeof m!="object"||Array.isArray(m))return l.error("Collator options argument must be an object.");const _=l.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,nn);if(!_)return null;const C=l.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,nn);if(!C)return null;let T=null;return m.locale&&(T=l.parse(m.locale,1,tn),!T)?null:new Ft(_,C,T)}evaluate(s){return new fs(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class Gt{constructor(s,l,m,_,C){this.type=tn,this.number=s,this.locale=l,this.currency=m,this.minFractionDigits=_,this.maxFractionDigits=C}static parse(s,l){if(s.length!==3)return l.error("Expected two arguments.");const m=l.parse(s[1],1,di);if(!m)return null;const _=s[2];if(typeof _!="object"||Array.isArray(_))return l.error("NumberFormat options argument must be an object.");let C=null;if(_.locale&&(C=l.parse(_.locale,1,tn),!C))return null;let T=null;if(_.currency&&(T=l.parse(_.currency,1,tn),!T))return null;let L=null;if(_["min-fraction-digits"]&&(L=l.parse(_["min-fraction-digits"],1,di),!L))return null;let D=null;return _["max-fraction-digits"]&&(D=l.parse(_["max-fraction-digits"],1,di),!D)?null:new Gt(m,C,T,L,D)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class fi{constructor(s){this.type=Pa,this.sections=s}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");const m=s[1];if(!Array.isArray(m)&&typeof m=="object")return l.error("First argument must be an image or text section.");const _=[];let C=!1;for(let T=1;T<=s.length-1;++T){const L=s[T];if(C&&typeof L=="object"&&!Array.isArray(L)){C=!1;let D=null;if(L["font-scale"]&&(D=l.parse(L["font-scale"],1,di),!D))return null;let q=null;if(L["text-font"]&&(q=l.parse(L["text-font"],1,Gs(tn)),!q))return null;let $=null;if(L["text-color"]&&($=l.parse(L["text-color"],1,_r),!$))return null;let ie=null;if(L["vertical-align"]){if(typeof L["vertical-align"]=="string"&&!qo.includes(L["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${L["vertical-align"]}' instead.`);if(ie=l.parse(L["vertical-align"],1,tn),!ie)return null}const he=_[_.length-1];he.scale=D,he.font=q,he.textColor=$,he.verticalAlign=ie}else{const D=l.parse(s[T],1,pn);if(!D)return null;const q=D.type.kind;if(q!=="string"&&q!=="value"&&q!=="null"&&q!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,_.push({content:D,scale:null,font:null,textColor:null,verticalAlign:null})}}return new fi(_)}evaluate(s){return new Zi(this.sections.map(l=>{const m=l.content.evaluate(s);return pr(m)===xc?new eo("",m,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(s):null):new eo(_n(m),null,l.scale?l.scale.evaluate(s):null,l.font?l.font.evaluate(s).join(","):null,l.textColor?l.textColor.evaluate(s):null,l.verticalAlign?l.verticalAlign.evaluate(s):null)}))}eachChild(s){for(const l of this.sections)s(l.content),l.scale&&s(l.scale),l.font&&s(l.font),l.textColor&&s(l.textColor),l.verticalAlign&&s(l.verticalAlign)}outputDefined(){return!1}}class Ii{constructor(s){this.type=xc,this.input=s}static parse(s,l){if(s.length!==2)return l.error("Expected two arguments.");const m=l.parse(s[1],1,tn);return m?new Ii(m):l.error("No image name provided.")}evaluate(s){const l=this.input.evaluate(s),m=Wr.fromString(l);return m&&s.availableImages&&(m.available=s.availableImages.indexOf(l)>-1),m}eachChild(s){s(this.input)}outputDefined(){return!1}}class Ki{constructor(s){this.type=di,this.input=s}static parse(s,l){if(s.length!==2)return l.error(`Expected 1 argument, but found ${s.length-1} instead.`);const m=l.parse(s[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${qn(m.type)} instead.`):new Ki(m):null}evaluate(s){const l=this.input.evaluate(s);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new Rn(`Expected value to be of type string or array, but found ${qn(pr(l))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const ln=8192;function bn(h,s){const l=(180+h[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,_=Math.pow(2,s.z);return[Math.round(l*_*ln),Math.round(m*_*ln)]}function On(h,s){const l=Math.pow(2,s.z);return[(_=(h[0]/ln+s.x)/l,360*_-180),(m=(h[1]/ln+s.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,_}function br(h,s){h[0]=Math.min(h[0],s[0]),h[1]=Math.min(h[1],s[1]),h[2]=Math.max(h[2],s[0]),h[3]=Math.max(h[3],s[1])}function Ir(h,s){return!(h[0]<=s[0]||h[2]>=s[2]||h[1]<=s[1]||h[3]>=s[3])}function ws(h,s,l){const m=h[0]-s[0],_=h[1]-s[1],C=h[0]-l[0],T=h[1]-l[1];return m*T-C*_==0&&m*C<=0&&_*T<=0}function Zr(h,s,l,m){return(_=[m[0]-l[0],m[1]-l[1]])[0]*(C=[s[0]-h[0],s[1]-h[1]])[1]-_[1]*C[0]!=0&&!(!Gl(h,s,l,m)||!Gl(l,m,h,s));var _,C}function na(h,s,l){for(const m of l)for(let _=0;_<m.length-1;++_)if(Zr(h,s,m[_],m[_+1]))return!0;return!1}function Ba(h,s,l=!1){let m=!1;for(const L of s)for(let D=0;D<L.length-1;D++){if(ws(h,L[D],L[D+1]))return l;(C=L[D])[1]>(_=h)[1]!=(T=L[D+1])[1]>_[1]&&_[0]<(T[0]-C[0])*(_[1]-C[1])/(T[1]-C[1])+C[0]&&(m=!m)}var _,C,T;return m}function io(h,s){for(const l of s)if(Ba(h,l))return!0;return!1}function wo(h,s){for(const l of h)if(!Ba(l,s))return!1;for(let l=0;l<h.length-1;++l)if(na(h[l],h[l+1],s))return!1;return!0}function Hu(h,s){for(const l of s)if(wo(h,l))return!0;return!1}function Gl(h,s,l,m){const _=m[0]-l[0],C=m[1]-l[1],T=(h[0]-l[0])*C-_*(h[1]-l[1]),L=(s[0]-l[0])*C-_*(s[1]-l[1]);return T>0&&L<0||T<0&&L>0}function xl(h,s,l){const m=[];for(let _=0;_<h.length;_++){const C=[];for(let T=0;T<h[_].length;T++){const L=bn(h[_][T],l);br(s,L),C.push(L)}m.push(C)}return m}function _u(h,s,l){const m=[];for(let _=0;_<h.length;_++){const C=xl(h[_],s,l);m.push(C)}return m}function Cc(h,s,l,m){if(h[0]<l[0]||h[0]>l[2]){const _=.5*m;let C=h[0]-l[0]>_?-m:l[0]-h[0]>_?m:0;C===0&&(C=h[0]-l[2]>_?-m:l[2]-h[0]>_?m:0),h[0]+=C}br(s,h)}function Kl(h,s,l,m){const _=Math.pow(2,m.z)*ln,C=[m.x*ln,m.y*ln],T=[];for(const L of h)for(const D of L){const q=[D.x+C[0],D.y+C[1]];Cc(q,s,l,_),T.push(q)}return T}function qc(h,s,l,m){const _=Math.pow(2,m.z)*ln,C=[m.x*ln,m.y*ln],T=[];for(const D of h){const q=[];for(const $ of D){const ie=[$.x+C[0],$.y+C[1]];br(s,ie),q.push(ie)}T.push(q)}if(s[2]-s[0]<=_/2){(L=s)[0]=L[1]=1/0,L[2]=L[3]=-1/0;for(const D of T)for(const q of D)Cc(q,s,l,_)}var L;return T}class Dr{constructor(s,l){this.type=nn,this.geojson=s,this.geometries=l}static parse(s,l){if(s.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(rr(s[1])){const m=s[1];if(m.type==="FeatureCollection"){const _=[];for(const C of m.features){const{type:T,coordinates:L}=C.geometry;T==="Polygon"&&_.push(L),T==="MultiPolygon"&&_.push(...L)}if(_.length)return new Dr(m,{type:"MultiPolygon",coordinates:_})}else if(m.type==="Feature"){const _=m.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Dr(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Dr(m,m)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(l,m){const _=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],T=l.canonicalID();if(m.type==="Polygon"){const L=xl(m.coordinates,C,T),D=Kl(l.geometry(),_,C,T);if(!Ir(_,C))return!1;for(const q of D)if(!Ba(q,L))return!1}if(m.type==="MultiPolygon"){const L=_u(m.coordinates,C,T),D=Kl(l.geometry(),_,C,T);if(!Ir(_,C))return!1;for(const q of D)if(!io(q,L))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(l,m){const _=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],T=l.canonicalID();if(m.type==="Polygon"){const L=xl(m.coordinates,C,T),D=qc(l.geometry(),_,C,T);if(!Ir(_,C))return!1;for(const q of D)if(!wo(q,L))return!1}if(m.type==="MultiPolygon"){const L=_u(m.coordinates,C,T),D=qc(l.geometry(),_,C,T);if(!Ir(_,C))return!1;for(const q of D)if(!Hu(q,L))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Sc=class{constructor(h=[],s=(l,m)=>l<m?-1:l>m?1:0){if(this.data=h,this.length=this.data.length,this.compare=s,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:s,compare:l}=this,m=s[h];for(;h>0;){const _=h-1>>1,C=s[_];if(l(m,C)>=0)break;s[h]=C,h=_}s[h]=m}_down(h){const{data:s,compare:l}=this,m=this.length>>1,_=s[h];for(;h<m;){let C=1+(h<<1);const T=C+1;if(T<this.length&&l(s[T],s[C])<0&&(C=T),l(s[C],_)>=0)break;s[h]=s[C],h=C}s[h]=_}};function Gc(h,s,l=0,m=h.length-1,_=xu){for(;m>l;){if(m-l>600){const D=m-l+1,q=s-l+1,$=Math.log(D),ie=.5*Math.exp(2*$/3),he=.5*Math.sqrt($*ie*(D-ie)/D)*(q-D/2<0?-1:1);Gc(h,s,Math.max(l,Math.floor(s-q*ie/D+he)),Math.min(m,Math.floor(s+(D-q)*ie/D+he)),_)}const C=h[s];let T=l,L=m;for(Bo(h,l,s),_(h[m],C)>0&&Bo(h,l,m);T<L;){for(Bo(h,T,L),T++,L--;_(h[T],C)<0;)T++;for(;_(h[L],C)>0;)L--}_(h[l],C)===0?Bo(h,l,L):(L++,Bo(h,L,m)),L<=s&&(l=L+1),s<=L&&(m=L-1)}}function Bo(h,s,l){const m=h[s];h[s]=h[l],h[l]=m}function xu(h,s){return h<s?-1:h>s?1:0}function fa(h,s){if(h.length<=1)return[h];const l=[];let m,_;for(const C of h){const T=Vu(C);T!==0&&(C.area=Math.abs(T),_===void 0&&(_=T<0),_===T<0?(m&&l.push(m),m=[C]):m.push(C))}if(m&&l.push(m),s>1)for(let C=0;C<l.length;C++)l[C].length<=s||(Gc(l[C],s,1,l[C].length-1,Fh),l[C]=l[C].slice(0,s));return l}function Fh(h,s){return s.area-h.area}function Vu(h){let s=0;for(let l,m,_=0,C=h.length,T=C-1;_<C;T=_++)l=h[_],m=h[T],s+=(m.x-l.x)*(l.y+m.y);return s}const qu=1/298.257223563,Co=qu*(2-qu),Ks=Math.PI/180;class Wl{constructor(s){const l=6378.137*Ks*1e3,m=Math.cos(s*Ks),_=1/(1-Co*(1-m*m)),C=Math.sqrt(_);this.kx=l*C*m,this.ky=l*C*_*(1-Co)}distance(s,l){const m=this.wrap(s[0]-l[0])*this.kx,_=(s[1]-l[1])*this.ky;return Math.sqrt(m*m+_*_)}pointOnLine(s,l){let m,_,C,T,L=1/0;for(let D=0;D<s.length-1;D++){let q=s[D][0],$=s[D][1],ie=this.wrap(s[D+1][0]-q)*this.kx,he=(s[D+1][1]-$)*this.ky,ve=0;ie===0&&he===0||(ve=(this.wrap(l[0]-q)*this.kx*ie+(l[1]-$)*this.ky*he)/(ie*ie+he*he),ve>1?(q=s[D+1][0],$=s[D+1][1]):ve>0&&(q+=ie/this.kx*ve,$+=he/this.ky*ve)),ie=this.wrap(l[0]-q)*this.kx,he=(l[1]-$)*this.ky;const we=ie*ie+he*he;we<L&&(L=we,m=q,_=$,C=D,T=ve)}return{point:[m,_],index:C,t:Math.max(0,Math.min(1,T))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function bu(h,s){return s[0]-h[0]}function Wo(h){return h[1]-h[0]+1}function Ca(h,s){return h[1]>=h[0]&&h[1]<s}function pa(h,s){if(h[0]>h[1])return[null,null];const l=Wo(h);if(s){if(l===2)return[h,null];const _=Math.floor(l/2);return[[h[0],h[0]+_],[h[0]+_,h[1]]]}if(l===1)return[h,null];const m=Math.floor(l/2)-1;return[[h[0],h[0]+m],[h[0]+m+1,h[1]]]}function Ws(h,s){if(!Ca(s,h.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let m=s[0];m<=s[1];++m)br(l,h[m]);return l}function Mn(h){const s=[1/0,1/0,-1/0,-1/0];for(const l of h)for(const m of l)br(s,m);return s}function Ua(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function So(h,s,l){if(!Ua(h)||!Ua(s))return NaN;let m=0,_=0;return h[2]<s[0]&&(m=s[0]-h[2]),h[0]>s[2]&&(m=h[0]-s[2]),h[1]>s[3]&&(_=h[1]-s[3]),h[3]<s[1]&&(_=s[1]-h[3]),l.distance([0,0],[m,_])}function Sa(h,s,l){const m=l.pointOnLine(s,h);return l.distance(h,m.point)}function Eo(h,s,l,m,_){const C=Math.min(Sa(h,[l,m],_),Sa(s,[l,m],_)),T=Math.min(Sa(l,[h,s],_),Sa(m,[h,s],_));return Math.min(C,T)}function ps(h,s,l,m,_){if(!Ca(s,h.length)||!Ca(m,l.length))return 1/0;let C=1/0;for(let T=s[0];T<s[1];++T){const L=h[T],D=h[T+1];for(let q=m[0];q<m[1];++q){const $=l[q],ie=l[q+1];if(Zr(L,D,$,ie))return 0;C=Math.min(C,Eo(L,D,$,ie,_))}}return C}function bl(h,s,l,m,_){if(!Ca(s,h.length)||!Ca(m,l.length))return NaN;let C=1/0;for(let T=s[0];T<=s[1];++T)for(let L=m[0];L<=m[1];++L)if(C=Math.min(C,_.distance(h[T],l[L])),C===0)return C;return C}function Ls(h,s,l){if(Ba(h,s,!0))return 0;let m=1/0;for(const _ of s){const C=_[0],T=_[_.length-1];if(C!==T&&(m=Math.min(m,Sa(h,[T,C],l)),m===0))return m;const L=l.pointOnLine(_,h);if(m=Math.min(m,l.distance(h,L.point)),m===0)return m}return m}function no(h,s,l,m){if(!Ca(s,h.length))return NaN;for(let C=s[0];C<=s[1];++C)if(Ba(h[C],l,!0))return 0;let _=1/0;for(let C=s[0];C<s[1];++C){const T=h[C],L=h[C+1];for(const D of l)for(let q=0,$=D.length,ie=$-1;q<$;ie=q++){const he=D[ie],ve=D[q];if(Zr(T,L,he,ve))return 0;_=Math.min(_,Eo(T,L,he,ve,m))}}return _}function Kc(h,s){for(const l of h)for(const m of l)if(Ba(m,s,!0))return!0;return!1}function $l(h,s,l,m=1/0){const _=Mn(h),C=Mn(s);if(m!==1/0&&So(_,C,l)>=m)return m;if(Ir(_,C)){if(Kc(h,s))return 0}else if(Kc(s,h))return 0;let T=1/0;for(const L of h)for(let D=0,q=L.length,$=q-1;D<q;$=D++){const ie=L[$],he=L[D];for(const ve of s)for(let we=0,Ie=ve.length,qe=Ie-1;we<Ie;qe=we++){const Xe=ve[qe],xt=ve[we];if(Zr(ie,he,Xe,xt))return 0;T=Math.min(T,Eo(ie,he,Xe,xt,l))}}return T}function wu(h,s,l,m,_,C){if(!C)return;const T=So(Ws(m,C),_,l);T<s&&h.push([T,C,[0,0]])}function wl(h,s,l,m,_,C,T){if(!C||!T)return;const L=So(Ws(m,C),Ws(_,T),l);L<s&&h.push([L,C,T])}function Bl(h,s,l,m,_=1/0){let C=Math.min(m.distance(h[0],l[0][0]),_);if(C===0)return C;const T=new Sc([[0,[0,h.length-1],[0,0]]],bu),L=Mn(l);for(;T.length>0;){const D=T.pop();if(D[0]>=C)continue;const q=D[1],$=s?50:100;if(Wo(q)<=$){if(!Ca(q,h.length))return NaN;if(s){const ie=no(h,q,l,m);if(isNaN(ie)||ie===0)return ie;C=Math.min(C,ie)}else for(let ie=q[0];ie<=q[1];++ie){const he=Ls(h[ie],l,m);if(C=Math.min(C,he),C===0)return 0}}else{const ie=pa(q,s);wu(T,C,m,h,L,ie[0]),wu(T,C,m,h,L,ie[1])}}return C}function Cl(h,s,l,m,_,C=1/0){let T=Math.min(C,_.distance(h[0],l[0]));if(T===0)return T;const L=new Sc([[0,[0,h.length-1],[0,l.length-1]]],bu);for(;L.length>0;){const D=L.pop();if(D[0]>=T)continue;const q=D[1],$=D[2],ie=s?50:100,he=m?50:100;if(Wo(q)<=ie&&Wo($)<=he){if(!Ca(q,h.length)&&Ca($,l.length))return NaN;let ve;if(s&&m)ve=ps(h,q,l,$,_),T=Math.min(T,ve);else if(s&&!m){const we=h.slice(q[0],q[1]+1);for(let Ie=$[0];Ie<=$[1];++Ie)if(ve=Sa(l[Ie],we,_),T=Math.min(T,ve),T===0)return T}else if(!s&&m){const we=l.slice($[0],$[1]+1);for(let Ie=q[0];Ie<=q[1];++Ie)if(ve=Sa(h[Ie],we,_),T=Math.min(T,ve),T===0)return T}else ve=bl(h,q,l,$,_),T=Math.min(T,ve)}else{const ve=pa(q,s),we=pa($,m);wl(L,T,_,h,l,ve[0],we[0]),wl(L,T,_,h,l,ve[0],we[1]),wl(L,T,_,h,l,ve[1],we[0]),wl(L,T,_,h,l,ve[1],we[1])}}return T}function Ec(h){return h.type==="MultiPolygon"?h.coordinates.map(s=>({type:"Polygon",coordinates:s})):h.type==="MultiLineString"?h.coordinates.map(s=>({type:"LineString",coordinates:s})):h.type==="MultiPoint"?h.coordinates.map(s=>({type:"Point",coordinates:s})):[h]}class $o{constructor(s,l){this.type=di,this.geojson=s,this.geometries=l}static parse(s,l){if(s.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(rr(s[1])){const m=s[1];if(m.type==="FeatureCollection")return new $o(m,m.features.map(_=>Ec(_.geometry)).flat());if(m.type==="Feature")return new $o(m,Ec(m.geometry));if("type"in m&&"coordinates"in m)return new $o(m,Ec(m))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(l,m){const _=l.geometry(),C=_.flat().map(D=>On([D.x,D.y],l.canonical));if(_.length===0)return NaN;const T=new Wl(C[0][1]);let L=1/0;for(const D of m){switch(D.type){case"Point":L=Math.min(L,Cl(C,!1,[D.coordinates],!1,T,L));break;case"LineString":L=Math.min(L,Cl(C,!1,D.coordinates,!0,T,L));break;case"Polygon":L=Math.min(L,Bl(C,!1,D.coordinates,T,L))}if(L===0)return L}return L}(s,this.geometries);if(s.geometryType()==="LineString")return function(l,m){const _=l.geometry(),C=_.flat().map(D=>On([D.x,D.y],l.canonical));if(_.length===0)return NaN;const T=new Wl(C[0][1]);let L=1/0;for(const D of m){switch(D.type){case"Point":L=Math.min(L,Cl(C,!0,[D.coordinates],!1,T,L));break;case"LineString":L=Math.min(L,Cl(C,!0,D.coordinates,!0,T,L));break;case"Polygon":L=Math.min(L,Bl(C,!0,D.coordinates,T,L))}if(L===0)return L}return L}(s,this.geometries);if(s.geometryType()==="Polygon")return function(l,m){const _=l.geometry();if(_.length===0||_[0].length===0)return NaN;const C=fa(_,0).map(D=>D.map(q=>q.map($=>On([$.x,$.y],l.canonical)))),T=new Wl(C[0][0][0][1]);let L=1/0;for(const D of m)for(const q of C){switch(D.type){case"Point":L=Math.min(L,Bl([D.coordinates],!1,q,T,L));break;case"LineString":L=Math.min(L,Bl(D.coordinates,!0,q,T,L));break;case"Polygon":L=Math.min(L,$l(q,D.coordinates,T,L))}if(L===0)return L}return L}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Zo{constructor(s){this.type=pn,this.key=s}static parse(s,l){if(s.length!==2)return l.error(`Expected 1 argument, but found ${s.length-1} instead.`);const m=s[1];return m==null?l.error("Global state property must be defined."):typeof m!="string"?l.error(`Global state property must be string, but found ${typeof s[1]} instead.`):new Zo(m)}evaluate(s){var l;const m=(l=s.globals)===null||l===void 0?void 0:l.globalState;return m&&Object.keys(m).length!==0?Vo(m,this.key):null}eachChild(){}outputDefined(){return!1}}const ro={"==":ia,"!=":zu,">":Se,"<":K,">=":ft,"<=":tt,array:rn,at:Go,boolean:rn,case:$r,coalesce:Qu,collator:Ft,format:fi,image:Ii,in:Ru,"index-of":Ko,interpolate:rs,"interpolate-hcl":rs,"interpolate-lab":rs,length:Ki,let:_o,literal:Ji,match:Ms,number:rn,"number-format":Gt,object:rn,slice:xo,step:bo,string:rn,"to-boolean":Ur,"to-color":Ur,"to-number":Ur,"to-string":Ur,var:ha,within:Dr,distance:$o,"global-state":Zo};class ra{constructor(s,l,m,_){this.name=s,this.type=l,this._evaluate=m,this.args=_}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,l){const m=s[0],_=ra.definitions[m];if(!_)return l.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(_)?_[0]:_.type,T=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,L=T.filter(([q])=>!Array.isArray(q)||q.length===s.length-1);let D=null;for(const[q,$]of L){D=new Vl(l.registry,wr,l.path,null,l.scope);const ie=[];let he=!1;for(let ve=1;ve<s.length;ve++){const we=s[ve],Ie=Array.isArray(q)?q[ve-1]:q.type,qe=D.parse(we,1+ie.length,Ie);if(!qe){he=!0;break}ie.push(qe)}if(!he)if(Array.isArray(q)&&q.length!==ie.length)D.error(`Expected ${q.length} arguments, but found ${ie.length} instead.`);else{for(let ve=0;ve<ie.length;ve++){const we=Array.isArray(q)?q[ve]:q.type,Ie=ie[ve];D.concat(ve+1).checkSubtype(we,Ie.type)}if(D.errors.length===0)return new ra(m,C,$,ie)}}if(L.length===1)l.errors.push(...D.errors);else{const q=(L.length?L:T).map(([ie])=>{return he=ie,Array.isArray(he)?`(${he.map(qn).join(", ")})`:`(${qn(he.type)}...)`;var he}).join(" | "),$=[];for(let ie=1;ie<s.length;ie++){const he=l.parse(s[ie],1+$.length);if(!he)return null;$.push(qn(he.type))}l.error(`Expected arguments of type ${q}, but found (${$.join(", ")}) instead.`)}return null}static register(s,l){ra.definitions=l;for(const m in l)s[m]=ra}}function ss(h,[s,l,m,_]){s=s.evaluate(h),l=l.evaluate(h),m=m.evaluate(h);const C=_?_.evaluate(h):1,T=zl(s,l,m,C);if(T)throw new Rn(T);return new Cn(s/255,l/255,m/255,C,!1)}function so(h,s){return h in s}function Pn(h,s){const l=s[h];return l===void 0?null:l}function En(h){return{type:h}}function wr(h){if(h instanceof ha)return wr(h.boundExpression);if(h instanceof ra&&h.name==="error"||h instanceof Ft||h instanceof Dr||h instanceof $o||h instanceof Zo)return!1;const s=h instanceof Ur||h instanceof rn;let l=!0;return h.eachChild(m=>{l=s?l&&wr(m):l&&m instanceof Ji}),!!l&&Xr(h)&&Sl(h,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Xr(h){if(h instanceof ra&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Dr||h instanceof $o)return!1;let s=!0;return h.eachChild(l=>{s&&!Xr(l)&&(s=!1)}),s}function Ea(h){if(h instanceof ra&&h.name==="feature-state")return!1;let s=!0;return h.eachChild(l=>{s&&!Ea(l)&&(s=!1)}),s}function Sl(h,s){if(h instanceof ra&&s.indexOf(h.name)>=0)return!1;let l=!0;return h.eachChild(m=>{l&&!Sl(m,s)&&(l=!1)}),l}function Tc(h){return{result:"success",value:h}}function ao(h){return{result:"error",value:h}}function Fc(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function Wc(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function ms(h){return!!h.expression&&h.expression.interpolated}function dn(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function $s(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)&&pr(h)===ua}function Gu(h){return h}function Xo(h,s){const l=h.stops&&typeof h.stops[0][0]=="object",m=l||!(l||h.property!==void 0),_=h.type||(ms(s)?"exponential":"interval"),C=function($){switch($.type){case"color":return Cn.parse;case"padding":return _s.parse;case"numberArray":return xs.parse;case"colorArray":return fr.parse;default:return null}}(s);if(C&&((h=ds({},h)).stops&&(h.stops=h.stops.map($=>[$[0],C($[1])])),h.default=C(h.default?h.default:s.default)),h.colorSpace&&(T=h.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var T;const L=function($){switch($){case"exponential":return Ku;case"interval":return Yo;case"categorical":return Bu;case"identity":return _A;default:throw new Error(`Unknown function type "${$}"`)}}(_);let D,q;if(_==="categorical"){D=Object.create(null);for(const $ of h.stops)D[$[0]]=$[1];q=typeof h.stops[0][0]}if(l){const $={},ie=[];for(let we=0;we<h.stops.length;we++){const Ie=h.stops[we],qe=Ie[0].zoom;$[qe]===void 0&&($[qe]={zoom:qe,type:h.type,property:h.property,default:h.default,stops:[]},ie.push(qe)),$[qe].stops.push([Ie[0].value,Ie[1]])}const he=[];for(const we of ie)he.push([$[we].zoom,Xo($[we],s)]);const ve={name:"linear"};return{kind:"composite",interpolationType:ve,interpolationFactor:rs.interpolationFactor.bind(void 0,ve),zoomStops:he.map(we=>we[0]),evaluate:({zoom:we},Ie)=>Ku({stops:he,base:h.base},s,we).evaluate(we,Ie)}}if(m){const $=_==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:rs.interpolationFactor.bind(void 0,$),zoomStops:h.stops.map(ie=>ie[0]),evaluate:({zoom:ie})=>L(h,s,ie,D,q)}}return{kind:"source",evaluate($,ie){const he=ie&&ie.properties?ie.properties[h.property]:void 0;return he===void 0?Nc(h.default,s.default):L(h,s,he,D,q)}}}function Nc(h,s,l){return h!==void 0?h:s!==void 0?s:l!==void 0?l:void 0}function Bu(h,s,l,m,_){return Nc(typeof l===_?m[l]:void 0,h.default,s.default)}function Yo(h,s,l){if(dn(l)!=="number")return Nc(h.default,s.default);const m=h.stops.length;if(m===1||l<=h.stops[0][0])return h.stops[0][1];if(l>=h.stops[m-1][0])return h.stops[m-1][1];const _=vu(h.stops.map(C=>C[0]),l);return h.stops[_][1]}function Ku(h,s,l){const m=h.base!==void 0?h.base:1;if(dn(l)!=="number")return Nc(h.default,s.default);const _=h.stops.length;if(_===1||l<=h.stops[0][0])return h.stops[0][1];if(l>=h.stops[_-1][0])return h.stops[_-1][1];const C=vu(h.stops.map($=>$[0]),l),T=function($,ie,he,ve){const we=ve-he,Ie=$-he;return we===0?0:ie===1?Ie/we:(Math.pow(ie,Ie)-1)/(Math.pow(ie,we)-1)}(l,m,h.stops[C][0],h.stops[C+1][0]),L=h.stops[C][1],D=h.stops[C+1][1],q=da[s.type]||Gu;return typeof L.evaluate=="function"?{evaluate(...$){const ie=L.evaluate.apply(void 0,$),he=D.evaluate.apply(void 0,$);if(ie!==void 0&&he!==void 0)return q(ie,he,T,h.colorSpace)}}:q(L,D,T,h.colorSpace)}function _A(h,s,l){switch(s.type){case"color":l=Cn.parse(l);break;case"formatted":l=Zi.fromString(l.toString());break;case"resolvedImage":l=Wr.fromString(l.toString());break;case"padding":l=_s.parse(l);break;case"colorArray":l=fr.parse(l);break;case"numberArray":l=xs.parse(l);break;default:dn(l)===s.type||s.type==="enum"&&s.values[l]||(l=void 0)}return Nc(l,h.default,s.default)}ra.register(ro,{error:[{kind:"error"},[tn],(h,[s])=>{throw new Rn(s.evaluate(h))}],typeof:[tn,[pn],(h,[s])=>qn(pr(s.evaluate(h)))],"to-rgba":[Gs(di,4),[_r],(h,[s])=>{const[l,m,_,C]=s.evaluate(h).rgb;return[255*l,255*m,255*_,C]}],rgb:[_r,[di,di,di],ss],rgba:[_r,[di,di,di,di],ss],has:{type:nn,overloads:[[[tn],(h,[s])=>so(s.evaluate(h),h.properties())],[[tn,ua],(h,[s,l])=>so(s.evaluate(h),l.evaluate(h))]]},get:{type:pn,overloads:[[[tn],(h,[s])=>Pn(s.evaluate(h),h.properties())],[[tn,ua],(h,[s,l])=>Pn(s.evaluate(h),l.evaluate(h))]]},"feature-state":[pn,[tn],(h,[s])=>Pn(s.evaluate(h),h.featureState||{})],properties:[ua,[],h=>h.properties()],"geometry-type":[tn,[],h=>h.geometryType()],id:[pn,[],h=>h.id()],zoom:[di,[],h=>h.globals.zoom],"heatmap-density":[di,[],h=>h.globals.heatmapDensity||0],elevation:[di,[],h=>h.globals.elevation||0],"line-progress":[di,[],h=>h.globals.lineProgress||0],accumulated:[pn,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[di,En(di),(h,s)=>{let l=0;for(const m of s)l+=m.evaluate(h);return l}],"*":[di,En(di),(h,s)=>{let l=1;for(const m of s)l*=m.evaluate(h);return l}],"-":{type:di,overloads:[[[di,di],(h,[s,l])=>s.evaluate(h)-l.evaluate(h)],[[di],(h,[s])=>-s.evaluate(h)]]},"/":[di,[di,di],(h,[s,l])=>s.evaluate(h)/l.evaluate(h)],"%":[di,[di,di],(h,[s,l])=>s.evaluate(h)%l.evaluate(h)],ln2:[di,[],()=>Math.LN2],pi:[di,[],()=>Math.PI],e:[di,[],()=>Math.E],"^":[di,[di,di],(h,[s,l])=>Math.pow(s.evaluate(h),l.evaluate(h))],sqrt:[di,[di],(h,[s])=>Math.sqrt(s.evaluate(h))],log10:[di,[di],(h,[s])=>Math.log(s.evaluate(h))/Math.LN10],ln:[di,[di],(h,[s])=>Math.log(s.evaluate(h))],log2:[di,[di],(h,[s])=>Math.log(s.evaluate(h))/Math.LN2],sin:[di,[di],(h,[s])=>Math.sin(s.evaluate(h))],cos:[di,[di],(h,[s])=>Math.cos(s.evaluate(h))],tan:[di,[di],(h,[s])=>Math.tan(s.evaluate(h))],asin:[di,[di],(h,[s])=>Math.asin(s.evaluate(h))],acos:[di,[di],(h,[s])=>Math.acos(s.evaluate(h))],atan:[di,[di],(h,[s])=>Math.atan(s.evaluate(h))],min:[di,En(di),(h,s)=>Math.min(...s.map(l=>l.evaluate(h)))],max:[di,En(di),(h,s)=>Math.max(...s.map(l=>l.evaluate(h)))],abs:[di,[di],(h,[s])=>Math.abs(s.evaluate(h))],round:[di,[di],(h,[s])=>{const l=s.evaluate(h);return l<0?-Math.round(-l):Math.round(l)}],floor:[di,[di],(h,[s])=>Math.floor(s.evaluate(h))],ceil:[di,[di],(h,[s])=>Math.ceil(s.evaluate(h))],"filter-==":[nn,[tn,pn],(h,[s,l])=>h.properties()[s.value]===l.value],"filter-id-==":[nn,[pn],(h,[s])=>h.id()===s.value],"filter-type-==":[nn,[tn],(h,[s])=>h.geometryType()===s.value],"filter-<":[nn,[tn,pn],(h,[s,l])=>{const m=h.properties()[s.value],_=l.value;return typeof m==typeof _&&m<_}],"filter-id-<":[nn,[pn],(h,[s])=>{const l=h.id(),m=s.value;return typeof l==typeof m&&l<m}],"filter->":[nn,[tn,pn],(h,[s,l])=>{const m=h.properties()[s.value],_=l.value;return typeof m==typeof _&&m>_}],"filter-id->":[nn,[pn],(h,[s])=>{const l=h.id(),m=s.value;return typeof l==typeof m&&l>m}],"filter-<=":[nn,[tn,pn],(h,[s,l])=>{const m=h.properties()[s.value],_=l.value;return typeof m==typeof _&&m<=_}],"filter-id-<=":[nn,[pn],(h,[s])=>{const l=h.id(),m=s.value;return typeof l==typeof m&&l<=m}],"filter->=":[nn,[tn,pn],(h,[s,l])=>{const m=h.properties()[s.value],_=l.value;return typeof m==typeof _&&m>=_}],"filter-id->=":[nn,[pn],(h,[s])=>{const l=h.id(),m=s.value;return typeof l==typeof m&&l>=m}],"filter-has":[nn,[pn],(h,[s])=>s.value in h.properties()],"filter-has-id":[nn,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[nn,[Gs(tn)],(h,[s])=>s.value.indexOf(h.geometryType())>=0],"filter-id-in":[nn,[Gs(pn)],(h,[s])=>s.value.indexOf(h.id())>=0],"filter-in-small":[nn,[tn,Gs(pn)],(h,[s,l])=>l.value.indexOf(h.properties()[s.value])>=0],"filter-in-large":[nn,[tn,Gs(pn)],(h,[s,l])=>function(m,_,C,T){for(;C<=T;){const L=C+T>>1;if(_[L]===m)return!0;_[L]>m?T=L-1:C=L+1}return!1}(h.properties()[s.value],l.value,0,l.value.length-1)],all:{type:nn,overloads:[[[nn,nn],(h,[s,l])=>s.evaluate(h)&&l.evaluate(h)],[En(nn),(h,s)=>{for(const l of s)if(!l.evaluate(h))return!1;return!0}]]},any:{type:nn,overloads:[[[nn,nn],(h,[s,l])=>s.evaluate(h)||l.evaluate(h)],[En(nn),(h,s)=>{for(const l of s)if(l.evaluate(h))return!0;return!1}]]},"!":[nn,[nn],(h,[s])=>!s.evaluate(h)],"is-supported-script":[nn,[tn],(h,[s])=>{const l=h.globals&&h.globals.isSupportedScript;return!l||l(s.evaluate(h))}],upcase:[tn,[tn],(h,[s])=>s.evaluate(h).toUpperCase()],downcase:[tn,[tn],(h,[s])=>s.evaluate(h).toLowerCase()],concat:[tn,En(pn),(h,s)=>s.map(l=>_n(l.evaluate(h))).join("")],"resolved-locale":[tn,[Aa],(h,[s])=>s.evaluate(h).resolvedLocale()]});class Zl{constructor(s,l,m){this.expression=s,this._warningHistory={},this._evaluator=new Hl,this._defaultValue=l?function(_){if(_.type==="color"&&$s(_.default))return new Cn(0,0,0,0);switch(_.type){case"color":return Cn.parse(_.default)||null;case"padding":return _s.parse(_.default)||null;case"numberArray":return xs.parse(_.default)||null;case"colorArray":return fr.parse(_.default)||null;case"variableAnchorOffsetCollection":return Kr.parse(_.default)||null;case"projectionDefinition":return ta.parse(_.default)||null;default:return _.default===void 0?null:_.default}}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null,this._globalState=m}evaluateWithoutErrorHandling(s,l,m,_,C,T){return this._globalState&&(s=Fo(s,this._globalState)),this._evaluator.globals=s,this._evaluator.feature=l,this._evaluator.featureState=m,this._evaluator.canonical=_,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(s,l,m,_,C,T){this._globalState&&(s=Fo(s,this._globalState)),this._evaluator.globals=s,this._evaluator.feature=l||null,this._evaluator.featureState=m||null,this._evaluator.canonical=_,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=T||null;try{const L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new Rn(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(L.message)),this._defaultValue}}}function Jo(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in ro}function Mc(h,s,l){const m=new Vl(ro,wr,[],s?function(C){const T={color:_r,string:tn,number:di,enum:tn,boolean:nn,formatted:Pa,padding:zo,numberArray:Ho,colorArray:_c,projectionDefinition:Hn,resolvedImage:xc,variableAnchorOffsetCollection:xr};return C.type==="array"?Gs(T[C.value]||pn,C.length):T[C.type]}(s):void 0),_=m.parse(h,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?Tc(new Zl(_,s,l)):ao(m.errors)}class Cu{constructor(s,l,m){this.kind=s,this._styleExpression=l,this.isStateDependent=s!=="constant"&&!Ea(l.expression),this.globalStateRefs=To(l.expression),this._globalState=m}evaluateWithoutErrorHandling(s,l,m,_,C,T){return this._globalState&&(s=Fo(s,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(s,l,m,_,C,T)}evaluate(s,l,m,_,C,T){return this._globalState&&(s=Fo(s,this._globalState)),this._styleExpression.evaluate(s,l,m,_,C,T)}}class Da{constructor(s,l,m,_,C){this.kind=s,this.zoomStops=m,this._styleExpression=l,this.isStateDependent=s!=="camera"&&!Ea(l.expression),this.globalStateRefs=To(l.expression),this.interpolationType=_,this._globalState=C}evaluateWithoutErrorHandling(s,l,m,_,C,T){return this._globalState&&(s=Fo(s,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(s,l,m,_,C,T)}evaluate(s,l,m,_,C,T){return this._globalState&&(s=Fo(s,this._globalState)),this._styleExpression.evaluate(s,l,m,_,C,T)}interpolationFactor(s,l,m){return this.interpolationType?rs.interpolationFactor(this.interpolationType,s,l,m):0}}function Ra(h,s,l){const m=Mc(h,s,l);if(m.result==="error")return m;const _=m.value.expression,C=Xr(_);if(!C&&!Fc(s))return ao([new qs("","data expressions not supported")]);const T=Sl(_,["zoom"]);if(!T&&!Wc(s))return ao([new qs("","zoom expressions not supported")]);const L=el(_);return L||T?L instanceof qs?ao([L]):L instanceof rs&&!ms(s)?ao([new qs("",'"interpolate" expressions cannot be used with this property')]):Tc(L?new Da(C?"camera":"composite",m.value,L.labels,L instanceof rs?L.interpolation:void 0,l):new Cu(C?"constant":"source",m.value,l)):ao([new qs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xl{constructor(s,l){this._parameters=s,this._specification=l,ds(this,Xo(this._parameters,this._specification))}static deserialize(s){return new Xl(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function el(h){let s=null;if(h instanceof _o)s=el(h.result);else if(h instanceof Qu){for(const l of h.args)if(s=el(l),s)break}else(h instanceof bo||h instanceof rs)&&h.input instanceof ra&&h.input.name==="zoom"&&(s=h);return s instanceof qs||h.eachChild(l=>{const m=el(l);m instanceof qs?s=m:!s&&m?s=new qs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&m&&s!==m&&(s=new qs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function To(h,s=new Set){return h instanceof Zo&&s.add(h.key),h.eachChild(l=>{To(l,s)}),s}function Fo(h,s){const{zoom:l,heatmapDensity:m,elevation:_,lineProgress:C,isSupportedScript:T,accumulated:L}=h??{};return{zoom:l,heatmapDensity:m,elevation:_,lineProgress:C,isSupportedScript:T,accumulated:L,globalState:s}}function xA(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const s of h.slice(1))if(!xA(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const bA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ic(h,s){if(h==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};xA(h)||(h=Gn(h));const l=Mc(h,bA,s);if(l.result==="error")throw new Error(l.value.map(m=>`${m.key}: ${m.message}`).join(", "));return{filter:(m,_,C)=>l.value.evaluate(m,_,{},C),needGeometry:as(h),getGlobalStateRefs:()=>To(l.value.expression)}}function Zs(h,s){return h<s?-1:h>s?1:0}function as(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let s=1;s<h.length;s++)if(as(h[s]))return!0;return!1}function Gn(h){if(!h)return!0;const s=h[0];return h.length<=1?s!=="any":s==="=="?El(h[1],h[2],"=="):s==="!="?tl(El(h[1],h[2],"==")):s==="<"||s===">"||s==="<="||s===">="?El(h[1],h[2],s):s==="any"?(l=h.slice(1),["any"].concat(l.map(Gn))):s==="all"?["all"].concat(h.slice(1).map(Gn)):s==="none"?["all"].concat(h.slice(1).map(Gn).map(tl)):s==="in"?No(h[1],h.slice(2)):s==="!in"?tl(No(h[1],h.slice(2))):s==="has"?Wu(h[1]):s!=="!has"||tl(Wu(h[1]));var l}function El(h,s,l){switch(h){case"$type":return[`filter-type-${l}`,s];case"$id":return[`filter-id-${l}`,s];default:return[`filter-${l}`,h,s]}}function No(h,s){if(s.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(l=>typeof l!=typeof s[0])?["filter-in-large",h,["literal",s.sort(Zs)]]:["filter-in-small",h,["literal",s]]}}function Wu(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function tl(h){return["!",h]}function $u(h){const s=typeof h;if(s==="number"||s==="boolean"||s==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let _="[";for(const C of h)_+=`${$u(C)},`;return`${_}]`}const l=Object.keys(h).sort();let m="{";for(let _=0;_<l.length;_++)m+=`${JSON.stringify(l[_])}:${$u(h[l[_]])},`;return`${m}}`}function il(h){let s="";for(const l of Ti)s+=`/${$u(h[l])}`;return s}function Ta(h){const s=h.value;return s?[new Kt(h.key,s,"constants have been deprecated as of v8")]:[]}function Yn(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function $c(h){if(Array.isArray(h))return h.map($c);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const s={};for(const l in h)s[l]=$c(h[l]);return s}return Yn(h)}function ma(h){const s=h.key,l=h.value,m=h.valueSpec||{},_=h.objectElementValidators||{},C=h.style,T=h.styleSpec,L=h.validateSpec;let D=[];const q=dn(l);if(q!=="object")return[new Kt(s,l,`object expected, ${q} found`)];for(const $ in l){const ie=$.split(".")[0],he=Vo(m,ie)||m["*"];let ve;if(Vo(_,ie))ve=_[ie];else if(Vo(m,ie))ve=L;else if(_["*"])ve=_["*"];else{if(!m["*"]){D.push(new Kt(s,l[$],`unknown property "${$}"`));continue}ve=L}D=D.concat(ve({key:(s&&`${s}.`)+$,value:l[$],valueSpec:he,style:C,styleSpec:T,object:l,objectKey:$,validateSpec:L},l))}for(const $ in m)_[$]||m[$].required&&m[$].default===void 0&&l[$]===void 0&&D.push(new Kt(s,l,`missing required property "${$}"`));return D}function nl(h){const s=h.value,l=h.valueSpec,m=h.style,_=h.styleSpec,C=h.key,T=h.arrayElementValidator||h.validateSpec;if(dn(s)!=="array")return[new Kt(C,s,`array expected, ${dn(s)} found`)];if(l.length&&s.length!==l.length)return[new Kt(C,s,`array length ${l.length} expected, length ${s.length} found`)];if(l["min-length"]&&s.length<l["min-length"])return[new Kt(C,s,`array length at least ${l["min-length"]} expected, length ${s.length} found`)];let L={type:l.value,values:l.values};_.$version<7&&(L.function=l.function),dn(l.value)==="object"&&(L=l.value);let D=[];for(let q=0;q<s.length;q++)D=D.concat(T({array:s,arrayIndex:q,value:s[q],valueSpec:L,validateSpec:h.validateSpec,style:m,styleSpec:_,key:`${C}[${q}]`}));return D}function Bs(h){const s=h.key,l=h.value,m=h.valueSpec;let _=dn(l);return _==="number"&&l!=l&&(_="NaN"),_!=="number"?[new Kt(s,l,`number expected, ${_} found`)]:"minimum"in m&&l<m.minimum?[new Kt(s,l,`${l} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&l>m.maximum?[new Kt(s,l,`${l} is greater than the maximum value ${m.maximum}`)]:[]}function Tl(h){const s=h.valueSpec,l=Yn(h.value.type);let m,_,C,T={};const L=l!=="categorical"&&h.value.property===void 0,D=!L,q=dn(h.value.stops)==="array"&&dn(h.value.stops[0])==="array"&&dn(h.value.stops[0][0])==="object",$=ma({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(ve){if(l==="identity")return[new Kt(ve.key,ve.value,'identity function may not have a "stops" property')];let we=[];const Ie=ve.value;return we=we.concat(nl({key:ve.key,value:Ie,valueSpec:ve.valueSpec,validateSpec:ve.validateSpec,style:ve.style,styleSpec:ve.styleSpec,arrayElementValidator:ie})),dn(Ie)==="array"&&Ie.length===0&&we.push(new Kt(ve.key,Ie,"array must have at least one stop")),we},default:function(ve){return ve.validateSpec({key:ve.key,value:ve.value,valueSpec:s,validateSpec:ve.validateSpec,style:ve.style,styleSpec:ve.styleSpec})}}});return l==="identity"&&L&&$.push(new Kt(h.key,h.value,'missing required property "property"')),l==="identity"||h.value.stops||$.push(new Kt(h.key,h.value,'missing required property "stops"')),l==="exponential"&&h.valueSpec.expression&&!ms(h.valueSpec)&&$.push(new Kt(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(D&&!Fc(h.valueSpec)?$.push(new Kt(h.key,h.value,"property functions not supported")):L&&!Wc(h.valueSpec)&&$.push(new Kt(h.key,h.value,"zoom functions not supported"))),l!=="categorical"&&!q||h.value.property!==void 0||$.push(new Kt(h.key,h.value,'"property" property is required')),$;function ie(ve){let we=[];const Ie=ve.value,qe=ve.key;if(dn(Ie)!=="array")return[new Kt(qe,Ie,`array expected, ${dn(Ie)} found`)];if(Ie.length!==2)return[new Kt(qe,Ie,`array length 2 expected, length ${Ie.length} found`)];if(q){if(dn(Ie[0])!=="object")return[new Kt(qe,Ie,`object expected, ${dn(Ie[0])} found`)];if(Ie[0].zoom===void 0)return[new Kt(qe,Ie,"object stop key must have zoom")];if(Ie[0].value===void 0)return[new Kt(qe,Ie,"object stop key must have value")];if(C&&C>Yn(Ie[0].zoom))return[new Kt(qe,Ie[0].zoom,"stop zoom values must appear in ascending order")];Yn(Ie[0].zoom)!==C&&(C=Yn(Ie[0].zoom),_=void 0,T={}),we=we.concat(ma({key:`${qe}[0]`,value:Ie[0],valueSpec:{zoom:{}},validateSpec:ve.validateSpec,style:ve.style,styleSpec:ve.styleSpec,objectElementValidators:{zoom:Bs,value:he}}))}else we=we.concat(he({key:`${qe}[0]`,value:Ie[0],validateSpec:ve.validateSpec,style:ve.style,styleSpec:ve.styleSpec},Ie));return Jo($c(Ie[1]))?we.concat([new Kt(`${qe}[1]`,Ie[1],"expressions are not allowed in function stops.")]):we.concat(ve.validateSpec({key:`${qe}[1]`,value:Ie[1],valueSpec:s,validateSpec:ve.validateSpec,style:ve.style,styleSpec:ve.styleSpec}))}function he(ve,we){const Ie=dn(ve.value),qe=Yn(ve.value),Xe=ve.value!==null?ve.value:we;if(m){if(Ie!==m)return[new Kt(ve.key,Xe,`${Ie} stop domain type must match previous stop domain type ${m}`)]}else m=Ie;if(Ie!=="number"&&Ie!=="string"&&Ie!=="boolean")return[new Kt(ve.key,Xe,"stop domain value must be a number, string, or boolean")];if(Ie!=="number"&&l!=="categorical"){let xt=`number expected, ${Ie} found`;return Fc(s)&&l===void 0&&(xt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Kt(ve.key,Xe,xt)]}return l!=="categorical"||Ie!=="number"||isFinite(qe)&&Math.floor(qe)===qe?l!=="categorical"&&Ie==="number"&&_!==void 0&&qe<_?[new Kt(ve.key,Xe,"stop domain values must appear in ascending order")]:(_=qe,l==="categorical"&&qe in T?[new Kt(ve.key,Xe,"stop domain values must be unique")]:(T[qe]=!0,[])):[new Kt(ve.key,Xe,`integer expected, found ${qe}`)]}}function oo(h){const s=(h.expressionContext==="property"?Ra:Mc)($c(h.value),h.valueSpec);if(s.result==="error")return s.value.map(m=>new Kt(`${h.key}${m.key}`,h.value,m.message));const l=s.value.expression||s.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!l.outputDefined())return[new Kt(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!Ea(l))return[new Kt(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!Ea(l))return[new Kt(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Sl(l,["zoom","feature-state"]))return[new Kt(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!Xr(l))return[new Kt(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Oa(h){const s=h.key,l=h.value,m=dn(l);return m!=="string"?[new Kt(s,l,`color expected, ${m} found`)]:Cn.parse(String(l))?[]:[new Kt(s,l,`color expected, "${l}" found`)]}function Zc(h){const s=h.key,l=h.value,m=h.valueSpec,_=[];return Array.isArray(m.values)?m.values.indexOf(Yn(l))===-1&&_.push(new Kt(s,l,`expected one of [${m.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(m.values).indexOf(Yn(l))===-1&&_.push(new Kt(s,l,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(l)} found`)),_}function Su(h){return xA($c(h.value))?oo(ds({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Xc(h)}function Xc(h){const s=h.value,l=h.key;if(dn(s)!=="array")return[new Kt(l,s,`array expected, ${dn(s)} found`)];const m=h.styleSpec;let _,C=[];if(s.length<1)return[new Kt(l,s,"filter array must have at least 1 element")];switch(C=C.concat(Zc({key:`${l}[0]`,value:s[0],valueSpec:m.filter_operator,style:h.style,styleSpec:h.styleSpec})),Yn(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&Yn(s[1])==="$type"&&C.push(new Kt(l,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&C.push(new Kt(l,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(_=dn(s[1]),_!=="string"&&C.push(new Kt(`${l}[1]`,s[1],`string expected, ${_} found`)));for(let T=2;T<s.length;T++)_=dn(s[T]),Yn(s[1])==="$type"?C=C.concat(Zc({key:`${l}[${T}]`,value:s[T],valueSpec:m.geometry_type,style:h.style,styleSpec:h.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&C.push(new Kt(`${l}[${T}]`,s[T],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let T=1;T<s.length;T++)C=C.concat(Xc({key:`${l}[${T}]`,value:s[T],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":_=dn(s[1]),s.length!==2?C.push(new Kt(l,s,`filter array for "${s[0]}" operator must have 2 elements`)):_!=="string"&&C.push(new Kt(`${l}[1]`,s[1],`string expected, ${_} found`))}return C}function wA(h,s){const l=h.key,m=h.validateSpec,_=h.style,C=h.styleSpec,T=h.value,L=h.objectKey,D=C[`${s}_${h.layerType}`];if(!D)return[];const q=L.match(/^(.*)-transition$/);if(s==="paint"&&q&&D[q[1]]&&D[q[1]].transition)return m({key:l,value:T,valueSpec:C.transition,style:_,styleSpec:C});const $=h.valueSpec||D[L];if(!$)return[new Kt(l,T,`unknown property "${L}"`)];let ie;if(dn(T)==="string"&&Fc($)&&!$.tokens&&(ie=/^{([^}]+)}$/.exec(T)))return[new Kt(l,T,`"${L}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ie[1])} }\`.`)];const he=[];return h.layerType==="symbol"&&(L==="text-field"&&_&&!_.glyphs&&he.push(new Kt(l,T,'use of "text-field" requires a style "glyphs" property')),L==="text-font"&&$s($c(T))&&Yn(T.type)==="identity"&&he.push(new Kt(l,T,'"text-font" does not support identity functions'))),he.concat(m({key:h.key,value:T,valueSpec:$,style:_,styleSpec:C,expressionContext:"property",propertyType:s,propertyKey:L}))}function rl(h){return wA(h,"paint")}function Cs(h){return wA(h,"layout")}function Mo(h){let s=[];const l=h.value,m=h.key,_=h.style,C=h.styleSpec;if(dn(l)!=="object")return[new Kt(m,l,`object expected, ${dn(l)} found`)];l.type||l.ref||s.push(new Kt(m,l,'either "type" or "ref" is required'));let T=Yn(l.type);const L=Yn(l.ref);if(l.id){const D=Yn(l.id);for(let q=0;q<h.arrayIndex;q++){const $=_.layers[q];Yn($.id)===D&&s.push(new Kt(m,l.id,`duplicate layer id "${l.id}", previously used at line ${$.id.__line__}`))}}if("ref"in l){let D;["type","source","source-layer","filter","layout"].forEach(q=>{q in l&&s.push(new Kt(m,l[q],`"${q}" is prohibited for ref layers`))}),_.layers.forEach(q=>{Yn(q.id)===L&&(D=q)}),D?D.ref?s.push(new Kt(m,l.ref,"ref cannot reference another ref layer")):T=Yn(D.type):s.push(new Kt(m,l.ref,`ref layer "${L}" not found`))}else if(T!=="background")if(l.source){const D=_.sources&&_.sources[l.source],q=D&&Yn(D.type);D?q==="vector"&&T==="raster"?s.push(new Kt(m,l.source,`layer "${l.id}" requires a raster source`)):q!=="raster-dem"&&T==="hillshade"||q!=="raster-dem"&&T==="color-relief"?s.push(new Kt(m,l.source,`layer "${l.id}" requires a raster-dem source`)):q==="raster"&&T!=="raster"?s.push(new Kt(m,l.source,`layer "${l.id}" requires a vector source`)):q!=="vector"||l["source-layer"]?q==="raster-dem"&&T!=="hillshade"&&T!=="color-relief"?s.push(new Kt(m,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):T!=="line"||!l.paint||!l.paint["line-gradient"]||q==="geojson"&&D.lineMetrics||s.push(new Kt(m,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Kt(m,l,`layer "${l.id}" must specify a "source-layer"`)):s.push(new Kt(m,l.source,`source "${l.source}" not found`))}else s.push(new Kt(m,l,'missing required property "source"'));return s=s.concat(ma({key:m,value:l,valueSpec:C.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${m}.type`,value:l.type,valueSpec:C.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:l,objectKey:"type"}),filter:Su,layout:D=>ma({layer:l,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":q=>Cs(ds({layerType:T},q))}}),paint:D=>ma({layer:l,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":q=>rl(ds({layerType:T},q))}})}})),s}function Yl(h){const s=h.value,l=h.key,m=dn(s);return m!=="string"?[new Kt(l,s,`string expected, ${m} found`)]:[]}const Ad={promoteId:function({key:h,value:s}){if(dn(s)==="string")return Yl({key:h,value:s});{const l=[];for(const m in s)l.push(...Yl({key:`${h}.${m}`,value:s[m]}));return l}}};function Nh(h){const s=h.value,l=h.key,m=h.styleSpec,_=h.style,C=h.validateSpec;if(!s.type)return[new Kt(l,s,'"type" is required')];const T=Yn(s.type);let L;switch(T){case"vector":case"raster":return L=ma({key:l,value:s,valueSpec:m[`source_${T.replace("-","_")}`],style:h.style,styleSpec:m,objectElementValidators:Ad,validateSpec:C}),L;case"raster-dem":return L=function(D){var q;const $=(q=D.sourceName)!==null&&q!==void 0?q:"",ie=D.value,he=D.styleSpec,ve=he.source_raster_dem,we=D.style;let Ie=[];const qe=dn(ie);if(ie===void 0)return Ie;if(qe!=="object")return Ie.push(new Kt("source_raster_dem",ie,`object expected, ${qe} found`)),Ie;const Xe=Yn(ie.encoding)==="custom",xt=["redFactor","greenFactor","blueFactor","baseShift"],rt=D.value.encoding?`"${D.value.encoding}"`:"Default";for(const At in ie)!Xe&&xt.includes(At)?Ie.push(new Kt(At,ie[At],`In "${$}": "${At}" is only valid when "encoding" is set to "custom". ${rt} encoding found`)):ve[At]?Ie=Ie.concat(D.validateSpec({key:At,value:ie[At],valueSpec:ve[At],validateSpec:D.validateSpec,style:we,styleSpec:he})):Ie.push(new Kt(At,ie[At],`unknown property "${At}"`));return Ie}({sourceName:l,value:s,style:h.style,styleSpec:m,validateSpec:C}),L;case"geojson":if(L=ma({key:l,value:s,valueSpec:m.source_geojson,style:_,styleSpec:m,validateSpec:C,objectElementValidators:Ad}),s.cluster)for(const D in s.clusterProperties){const[q,$]=s.clusterProperties[D],ie=typeof q=="string"?[q,["accumulated"],["get",D]]:q;L.push(...oo({key:`${l}.${D}.map`,value:$,expressionContext:"cluster-map"})),L.push(...oo({key:`${l}.${D}.reduce`,value:ie,expressionContext:"cluster-reduce"}))}return L;case"video":return ma({key:l,value:s,valueSpec:m.source_video,style:_,validateSpec:C,styleSpec:m});case"image":return ma({key:l,value:s,valueSpec:m.source_image,style:_,validateSpec:C,styleSpec:m});case"canvas":return[new Kt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zc({key:`${l}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function hd(h){const s=h.value,l=h.styleSpec,m=l.light,_=h.style;let C=[];const T=dn(s);if(s===void 0)return C;if(T!=="object")return C=C.concat([new Kt("light",s,`object expected, ${T} found`)]),C;for(const L in s){const D=L.match(/^(.*)-transition$/);C=C.concat(D&&m[D[1]]&&m[D[1]].transition?h.validateSpec({key:L,value:s[L],valueSpec:l.transition,validateSpec:h.validateSpec,style:_,styleSpec:l}):m[L]?h.validateSpec({key:L,value:s[L],valueSpec:m[L],validateSpec:h.validateSpec,style:_,styleSpec:l}):[new Kt(L,s[L],`unknown property "${L}"`)])}return C}function Ps(h){const s=h.value,l=h.styleSpec,m=l.sky,_=h.style,C=dn(s);if(s===void 0)return[];if(C!=="object")return[new Kt("sky",s,`object expected, ${C} found`)];let T=[];for(const L in s)T=T.concat(m[L]?h.validateSpec({key:L,value:s[L],valueSpec:m[L],style:_,styleSpec:l}):[new Kt(L,s[L],`unknown property "${L}"`)]);return T}function JA(h){const s=h.value,l=h.styleSpec,m=l.terrain,_=h.style;let C=[];const T=dn(s);if(s===void 0)return C;if(T!=="object")return C=C.concat([new Kt("terrain",s,`object expected, ${T} found`)]),C;for(const L in s)C=C.concat(m[L]?h.validateSpec({key:L,value:s[L],valueSpec:m[L],validateSpec:h.validateSpec,style:_,styleSpec:l}):[new Kt(L,s[L],`unknown property "${L}"`)]);return C}function Jl(h){let s=[];const l=h.value,m=h.key;if(Array.isArray(l)){const _=[],C=[];for(const T in l)l[T].id&&_.includes(l[T].id)&&s.push(new Kt(m,l,`all the sprites' ids must be unique, but ${l[T].id} is duplicated`)),_.push(l[T].id),l[T].url&&C.includes(l[T].url)&&s.push(new Kt(m,l,`all the sprites' URLs must be unique, but ${l[T].url} is duplicated`)),C.push(l[T].url),s=s.concat(ma({key:`${m}[${T}]`,value:l[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return s}return Yl({key:m,value:l})}function ec(h){return s=h.value,s&&s.constructor===Object?[]:[new Kt(h.key,h.value,`object expected, ${dn(h.value)} found`)];var s}const Fa={"*":()=>[],array:nl,boolean:function(h){const s=h.value,l=h.key,m=dn(s);return m!=="boolean"?[new Kt(l,s,`boolean expected, ${m} found`)]:[]},number:Bs,color:Oa,constants:Ta,enum:Zc,filter:Su,function:Tl,layer:Mo,object:ma,source:Nh,light:hd,sky:Ps,terrain:JA,projection:function(h){const s=h.value,l=h.styleSpec,m=l.projection,_=h.style,C=dn(s);if(s===void 0)return[];if(C!=="object")return[new Kt("projection",s,`object expected, ${C} found`)];let T=[];for(const L in s)T=T.concat(m[L]?h.validateSpec({key:L,value:s[L],valueSpec:m[L],style:_,styleSpec:l}):[new Kt(L,s[L],`unknown property "${L}"`)]);return T},projectionDefinition:function(h){const s=h.key;let l=h.value;l=l instanceof String?l.valueOf():l;const m=dn(l);return m!=="array"||function(_){return Array.isArray(_)&&_.length===3&&typeof _[0]=="string"&&typeof _[1]=="string"&&typeof _[2]=="number"}(l)||function(_){return!!["interpolate","step","literal"].includes(_[0])}(l)?["array","string"].includes(m)?[]:[new Kt(s,l,`projection expected, invalid type "${m}" found`)]:[new Kt(s,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:Yl,formatted:function(h){return Yl(h).length===0?[]:oo(h)},resolvedImage:function(h){return Yl(h).length===0?[]:oo(h)},padding:function(h){const s=h.key,l=h.value;if(dn(l)==="array"){if(l.length<1||l.length>4)return[new Kt(s,l,`padding requires 1 to 4 values; ${l.length} values found`)];const m={type:"number"};let _=[];for(let C=0;C<l.length;C++)_=_.concat(h.validateSpec({key:`${s}[${C}]`,value:l[C],validateSpec:h.validateSpec,valueSpec:m}));return _}return Bs({key:s,value:l,valueSpec:{}})},numberArray:function(h){const s=h.key,l=h.value;if(dn(l)==="array"){const m={type:"number"};if(l.length<1)return[new Kt(s,l,"array length at least 1 expected, length 0 found")];let _=[];for(let C=0;C<l.length;C++)_=_.concat(h.validateSpec({key:`${s}[${C}]`,value:l[C],validateSpec:h.validateSpec,valueSpec:m}));return _}return Bs({key:s,value:l,valueSpec:{}})},colorArray:function(h){const s=h.key,l=h.value;if(dn(l)==="array"){if(l.length<1)return[new Kt(s,l,"array length at least 1 expected, length 0 found")];let m=[];for(let _=0;_<l.length;_++)m=m.concat(Oa({key:`${s}[${_}]`,value:l[_]}));return m}return Oa({key:s,value:l})},variableAnchorOffsetCollection:function(h){const s=h.key,l=h.value,m=dn(l),_=h.styleSpec;if(m!=="array"||l.length<1||l.length%2!=0)return[new Kt(s,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let C=[];for(let T=0;T<l.length;T+=2)C=C.concat(Zc({key:`${s}[${T}]`,value:l[T],valueSpec:_.layout_symbol["text-anchor"]})),C=C.concat(nl({key:`${s}[${T+1}]`,value:l[T+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:_}));return C},sprite:Jl,state:ec};function lo(h){const s=h.value,l=h.valueSpec,m=h.styleSpec;return h.validateSpec=lo,l.expression&&$s(Yn(s))?Tl(h):l.expression&&Jo($c(s))?oo(h):l.type&&Fa[l.type]?Fa[l.type](h):ma(ds({},h,{valueSpec:l.type?m[l.type]:l}))}function Fl(h){const s=h.value,l=h.key,m=Yl(h);return m.length||(s.indexOf("{fontstack}")===-1&&m.push(new Kt(l,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&m.push(new Kt(l,s,'"glyphs" url must include a "{range}" token'))),m}function sl(h,s=yt){let l=[];return l=l.concat(lo({key:"",value:h,valueSpec:s.$root,styleSpec:s,style:h,validateSpec:lo,objectElementValidators:{glyphs:Fl,"*":()=>[]}})),h.constants&&(l=l.concat(Ta({key:"constants",value:h.constants}))),Eu(l)}function al(h){return function(s){return h(Object.assign({},s,{validateSpec:lo}))}}function Eu(h){return[].concat(h).sort((s,l)=>s.line-l.line)}function M(h){return function(...s){return Eu(h.apply(this,s))}}sl.source=M(al(Nh)),sl.sprite=M(al(Jl)),sl.glyphs=M(al(Fl)),sl.light=M(al(hd)),sl.sky=M(al(Ps)),sl.terrain=M(al(JA)),sl.state=M(al(ec)),sl.layer=M(al(Mo)),sl.filter=M(al(Su)),sl.paintProperty=M(al(rl)),sl.layoutProperty=M(al(Cs));const O=sl,Z=O.light,le=O.sky,Ce=O.paintProperty,Me=O.layoutProperty;function Le(h,s){let l=!1;if(s&&s.length)for(const m of s)h.fire(new Bi(new Error(m.message))),l=!0;return l}class De{constructor(s,l,m){const _=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const T=new Int32Array(this.arrayBuffer);s=T[0],this.d=(l=T[1])+2*(m=T[2]);for(let D=0;D<this.d*this.d;D++){const q=T[3+D],$=T[3+D+1];_.push(q===$?null:T.subarray(q,$))}const L=T[3+_.length+1];this.keys=T.subarray(T[3+_.length],L),this.bboxes=T.subarray(L),this.insert=this._insertReadonly}else{this.d=l+2*m;for(let T=0;T<this.d*this.d;T++)_.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=s,this.padding=m,this.scale=l/s,this.uid=0;const C=m/l*s;this.min=-C,this.max=s+C}insert(s,l,m,_,C){this._forEachCell(l,m,_,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(l),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,l,m,_,C,T){this.cells[C].push(T)}query(s,l,m,_,C){const T=this.min,L=this.max;if(s<=T&&l<=T&&L<=m&&L<=_&&!C)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(s,l,m,_,this._queryCell,D,{},C),D}}_queryCell(s,l,m,_,C,T,L,D){const q=this.cells[C];if(q!==null){const $=this.keys,ie=this.bboxes;for(let he=0;he<q.length;he++){const ve=q[he];if(L[ve]===void 0){const we=4*ve;(D?D(ie[we+0],ie[we+1],ie[we+2],ie[we+3]):s<=ie[we+2]&&l<=ie[we+3]&&m>=ie[we+0]&&_>=ie[we+1])?(L[ve]=!0,T.push($[ve])):L[ve]=!1}}}}_forEachCell(s,l,m,_,C,T,L,D){const q=this._convertToCellCoord(s),$=this._convertToCellCoord(l),ie=this._convertToCellCoord(m),he=this._convertToCellCoord(_);for(let ve=q;ve<=ie;ve++)for(let we=$;we<=he;we++){const Ie=this.d*we+ve;if((!D||D(this._convertFromCellCoord(ve),this._convertFromCellCoord(we),this._convertFromCellCoord(ve+1),this._convertFromCellCoord(we+1)))&&C.call(this,s,l,m,_,Ie,T,L,D))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,l=3+this.cells.length+1+1;let m=0;for(let T=0;T<this.cells.length;T++)m+=this.cells[T].length;const _=new Int32Array(l+m+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let C=l;for(let T=0;T<s.length;T++){const L=s[T];_[3+T]=C,_.set(L,C),C+=L.length}return _[3+s.length]=C,_.set(this.keys,C),C+=this.keys.length,_[3+s.length+1]=C,_.set(this.bboxes,C),C+=this.bboxes.length,_.buffer}static serialize(s,l){const m=s.toArrayBuffer();return l&&l.push(m),{buffer:m}}static deserialize(s){return new De(s.buffer)}}const Oe={};function Pe(h,s,l={}){if(Oe[h])throw new Error(`${h} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:h,writeable:!1}),Oe[h]={klass:s,omit:l.omit||[],shallow:l.shallow||[]}}Pe("Object",Object),Pe("Set",Set),Pe("TransferableGridIndex",De),Pe("Color",Cn),Pe("Error",Error),Pe("AJAXError",st),Pe("ResolvedImage",Wr),Pe("StylePropertyFunction",Xl),Pe("StyleExpression",Zl,{omit:["_evaluator"]}),Pe("ZoomDependentExpression",Da),Pe("ZoomConstantExpression",Cu),Pe("CompoundExpression",ra,{omit:["_evaluate"]});for(const h in ro)ro[h]._classRegistryKey||Pe(`Expression_${h}`,ro[h]);function pt(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function jt(h){return h.$name||h.constructor._classRegistryKey}function It(h){return!function(s){if(s===null||typeof s!="object")return!1;const l=jt(s);return!(!l||l==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||pt(h)||si(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function Bt(h,s){if(It(h))return(pt(h)||si(h))&&s&&s.push(h),ArrayBuffer.isView(h)&&s&&s.push(h.buffer),h instanceof ImageData&&s&&s.push(h.data.buffer),h;if(Array.isArray(h)){const C=[];for(const T of h)C.push(Bt(T,s));return C}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const l=jt(h);if(!l)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!Oe[l])throw new Error(`${l} is not registered.`);const{klass:m}=Oe[l],_=m.serialize?m.serialize(h,s):{};if(m.serialize){if(s&&_===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in h){if(!h.hasOwnProperty(C)||Oe[l].omit.indexOf(C)>=0)continue;const T=h[C];_[C]=Oe[l].shallow.indexOf(C)>=0?T:Bt(T,s)}h instanceof Error&&(_.message=h.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(_.$name=l),_}function ti(h){if(It(h))return h;if(Array.isArray(h))return h.map(ti);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const s=jt(h)||"Object";if(!Oe[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:l}=Oe[s];if(!l)throw new Error(`can't deserialize unregistered class ${s}`);if(l.deserialize)return l.deserialize(h);const m=Object.create(l.prototype);for(const _ of Object.keys(h)){if(_==="$name")continue;const C=h[_];m[_]=Oe[s].shallow.indexOf(_)>=0?C:ti(C)}return m}class zt{constructor(){this.first=!0}update(s,l){const m=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=l),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=m,!0))}}const ct={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Hangul Syllables":h=>h>=44032&&h<=55215,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function bt(h){for(const s of h)if(Xi(s.charCodeAt(0)))return!0;return!1}function Xt(h){for(const s of h)if(!ji(s.charCodeAt(0)))return!1;return!0}function ri(h){const s=h.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(s.join("|"),"u")}const ii=ri(["Arab","Dupl","Mong","Ougr","Syrc"]);function ji(h){return!ii.test(String.fromCodePoint(h))}const Ci=ri(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Xi(h){return!(h!==746&&h!==747&&(h<4352||!(ct["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||ct["CJK Compatibility"](h)||ct["CJK Strokes"](h)||!(!ct["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||ct["Enclosed CJK Letters and Months"](h)||ct["Ideographic Description Characters"](h)||ct.Kanbun(h)||ct.Katakana(h)&&h!==12540||!(!ct["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!ct["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||ct["Vertical Forms"](h)||ct["Yijing Hexagram Symbols"](h)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(h))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(h))||Ci.test(String.fromCodePoint(h)))))}function Fi(h){return!(Xi(h)||function(s){return!!(ct["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||ct["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||ct["Letterlike Symbols"](s)||ct["Number Forms"](s)||ct["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||ct["Control Pictures"](s)&&s!==9251||ct["Optical Character Recognition"](s)||ct["Enclosed Alphanumerics"](s)||ct["Geometric Shapes"](s)||ct["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||ct["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||ct["CJK Symbols and Punctuation"](s)||ct.Katakana(s)||ct["Private Use Area"](s)||ct["CJK Compatibility Forms"](s)||ct["Small Form Variants"](s)||ct["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(h))}const er=ri(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function lr(h){return er.test(String.fromCodePoint(h))}function kn(h,s){return!(!s&&lr(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||ct.Khmer(h))}function In(h){for(const s of h)if(lr(s.charCodeAt(0)))return!0;return!1}const Kn=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(Kn.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,s){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const l=h.pluginURL,m=new Promise(C=>{this.loadScriptResolve=C});s(l);const _=new Promise(C=>setTimeout(()=>C(),this.TIMEOUT));if(yield Promise.race([m,_]),this.isParsed()){const C={pluginStatus:"loaded",pluginURL:l};return this.setState(C),C}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class en{constructor(s,l){this.isSupportedScript=Sn,this.zoom=s,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new zt,this.transition=l.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zt,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,l=s-Math.floor(s),m=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*l}}}function Sn(h){return function(s,l){for(const m of s)if(!kn(m.charCodeAt(0),l))return!1;return!0}(h,Kn.getRTLTextPluginStatus()==="loaded")}class cr{constructor(s,l,m){this.property=s,this.value=l,this.expression=function(_,C,T){if($s(_))return new Xl(_,C);if(Jo(_)){const L=Ra(_,C,T);if(L.result==="error")throw new Error(L.value.map(D=>`${D.key}: ${D.message}`).join(", "));return L.value}{let L=_;return C.type==="color"&&typeof _=="string"?L=Cn.parse(_):C.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?C.type!=="numberArray"||typeof _!="number"&&!Array.isArray(_)?C.type!=="colorArray"||typeof _!="string"&&!Array.isArray(_)?C.type==="variableAnchorOffsetCollection"&&Array.isArray(_)?L=Kr.parse(_):C.type==="projectionDefinition"&&typeof _=="string"&&(L=ta.parse(_)):L=fr.parse(_):L=xs.parse(_):L=_s.parse(_),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>L}}}(l===void 0?s.specification.default:l,s.specification,m)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(s,l,m){return this.property.possiblyEvaluate(this,s,l,m)}}class an{constructor(s,l){this.property=s,this.value=new cr(s,void 0,l)}transitioned(s,l){return new Qn(this.property,this.value,l,gt({},s.transition,this.transition),s.now)}untransitioned(){return new Qn(this.property,this.value,null,{},0)}}class yn{constructor(s,l){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues),this._globalState=l}getValue(s){return Yt(this._values[s].value.value)}setValue(s,l){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new an(this._values[s].property,this._globalState)),this._values[s].value=new cr(this._values[s].property,l===null?void 0:Yt(l),this._globalState)}getTransition(s){return Yt(this._values[s].transition)}setTransition(s,l){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new an(this._values[s].property,this._globalState)),this._values[s].transition=Yt(l)||void 0}serialize(){const s={};for(const l of Object.keys(this._values)){const m=this.getValue(l);m!==void 0&&(s[l]=m);const _=this.getTransition(l);_!==void 0&&(s[`${l}-transition`]=_)}return s}transitioned(s,l){const m=new tr(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].transitioned(s,l._values[_]);return m}untransitioned(){const s=new tr(this._properties);for(const l of Object.keys(this._values))s._values[l]=this._values[l].untransitioned();return s}}class Qn{constructor(s,l,m,_,C){this.property=s,this.value=l,this.begin=C+_.delay||0,this.end=this.begin+_.duration||0,s.specification.transition&&(_.delay||_.duration)&&(this.prior=m)}possiblyEvaluate(s,l,m){const _=s.now||0,C=this.value.possiblyEvaluate(s,l,m),T=this.prior;if(T){if(_>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(_<this.begin)return T.possiblyEvaluate(s,l,m);{const L=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(s,l,m),C,me(L))}}return C}}class tr{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,l,m){const _=new Yr(this._properties);for(const C of Object.keys(this._values))_._values[C]=this._values[C].possiblyEvaluate(s,l,m);return _}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class ks{constructor(s,l){this._properties=s,this._values=Object.create(s.defaultPropertyValues),this._globalState=l}hasValue(s){return this._values[s].value!==void 0}getValue(s){return Yt(this._values[s].value)}setValue(s,l){this._values[s]=new cr(this._values[s].property,l===null?void 0:Yt(l),this._globalState)}serialize(){const s={};for(const l of Object.keys(this._values)){const m=this.getValue(l);m!==void 0&&(s[l]=m)}return s}possiblyEvaluate(s,l,m){const _=new Yr(this._properties);for(const C of Object.keys(this._values))_._values[C]=this._values[C].possiblyEvaluate(s,l,m);return _}}class Tr{constructor(s,l,m){this.property=s,this.value=l,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,l,m,_){return this.property.evaluate(this.value,this.parameters,s,l,m,_)}}class Yr{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class xi{constructor(s){this.specification=s}possiblyEvaluate(s,l){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(l)}interpolate(s,l,m){const _=da[this.specification.type];return _?_(s,l,m):s}}class Li{constructor(s,l){this.specification=s,this.overrides=l}possiblyEvaluate(s,l,m,_){return new Tr(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(l,null,{},m,_)}:s.expression,l)}interpolate(s,l,m){if(s.value.kind!=="constant"||l.value.kind!=="constant")return s;if(s.value.value===void 0||l.value.value===void 0)return new Tr(this,{kind:"constant",value:void 0},s.parameters);const _=da[this.specification.type];if(_){const C=_(s.value.value,l.value.value,m);return new Tr(this,{kind:"constant",value:C},s.parameters)}return s}evaluate(s,l,m,_,C,T){return s.kind==="constant"?s.value:s.evaluate(l,m,_,C,T)}}class ga extends Li{possiblyEvaluate(s,l,m,_){if(s.value===void 0)return new Tr(this,{kind:"constant",value:void 0},l);if(s.expression.kind==="constant"){const C=s.expression.evaluate(l,null,{},m,_),T=s.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,L=this._calculate(T,T,T,l);return new Tr(this,{kind:"constant",value:L},l)}if(s.expression.kind==="camera"){const C=this._calculate(s.expression.evaluate({zoom:l.zoom-1}),s.expression.evaluate({zoom:l.zoom}),s.expression.evaluate({zoom:l.zoom+1}),l);return new Tr(this,{kind:"constant",value:C},l)}return new Tr(this,s.expression,l)}evaluate(s,l,m,_,C,T){if(s.kind==="source"){const L=s.evaluate(l,m,_,C,T);return this._calculate(L,L,L,l)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(l.zoom)-1},m,_),s.evaluate({zoom:Math.floor(l.zoom)},m,_),s.evaluate({zoom:Math.floor(l.zoom)+1},m,_),l):s.value}_calculate(s,l,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:m,to:l}}interpolate(s){return s}}class ur{constructor(s){this.specification=s}possiblyEvaluate(s,l,m,_){if(s.value!==void 0){if(s.expression.kind==="constant"){const C=s.expression.evaluate(l,null,{},m,_);return this._calculate(C,C,C,l)}return this._calculate(s.expression.evaluate(new en(Math.floor(l.zoom-1),l)),s.expression.evaluate(new en(Math.floor(l.zoom),l)),s.expression.evaluate(new en(Math.floor(l.zoom+1),l)),l)}}_calculate(s,l,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:m,to:l}}interpolate(s){return s}}class os{constructor(s){this.specification=s}possiblyEvaluate(s,l,m,_){return!!s.expression.evaluate(l,null,{},m,_)}interpolate(){return!1}}class Rr{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in s){const m=s[l];m.specification.overridable&&this.overridableProperties.push(l);const _=this.defaultPropertyValues[l]=new cr(m,void 0,void 0),C=this.defaultTransitionablePropertyValues[l]=new an(m,void 0);this.defaultTransitioningPropertyValues[l]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=_.possiblyEvaluate({})}}}Pe("DataDrivenProperty",Li),Pe("DataConstantProperty",xi),Pe("CrossFadedDataDrivenProperty",ga),Pe("CrossFadedProperty",ur),Pe("ColorRampProperty",os);const Lc="-transition";class ya extends Ui{constructor(s,l,m){if(super(),this.id=s.id,this.type=s.type,this._globalState=m,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter,this._featureFilter=Ic(s.filter,m)),l.layout&&(this._unevaluatedLayout=new ks(l.layout,m)),l.paint)){this._transitionablePaint=new yn(l.paint,m);for(const _ in s.paint)this.setPaintProperty(_,s.paint[_],{validate:!1});for(const _ in s.layout)this.setLayoutProperty(_,s.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yr(l.paint)}}setFilter(s){this.filter=s,this._featureFilter=Ic(s,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}getLayoutAffectingGlobalStateRefs(){const s=new Set;if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const m=this._unevaluatedLayout._values[l];for(const _ of m.getGlobalStateRefs())s.add(_)}for(const l of this._featureFilter.getGlobalStateRefs())s.add(l);return s}getPaintAffectingGlobalStateRefs(){var s;const l=new globalThis.Map;if(this._transitionablePaint)for(const m in this._transitionablePaint._values){const _=this._transitionablePaint._values[m].value;for(const C of _.getGlobalStateRefs()){const T=(s=l.get(C))!==null&&s!==void 0?s:[];T.push({name:m,value:_.value}),l.set(C,T)}}return l}setLayoutProperty(s,l,m={}){l!=null&&this._validate(Me,`layers.${this.id}.layout.${s}`,s,l,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,l):this.visibility=l)}getPaintProperty(s){return s.endsWith(Lc)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,l,m={}){if(l!=null&&this._validate(Ce,`layers.${this.id}.paint.${s}`,s,l,m))return!1;if(s.endsWith(Lc))return this._transitionablePaint.setTransition(s.slice(0,-11),l||void 0),!1;{const _=this._transitionablePaint._values[s],C=_.property.specification["property-type"]==="cross-faded-data-driven",T=_.value.isDataDriven(),L=_.value;this._transitionablePaint.setValue(s,l),this._handleSpecialPaintPropertyUpdate(s);const D=this._transitionablePaint._values[s].value;return D.isDataDriven()||T||C||this._handleOverridablePaintPropertyUpdate(s,L,D)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,l,m){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,l){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,l)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Vt(s,(l,m)=>!(l===void 0||m==="layout"&&!Object.keys(l).length||m==="paint"&&!Object.keys(l).length))}_validate(s,l,m,_,C={}){return(!C||C.validate!==!1)&&Le(this,s.call(O,{key:l,layerType:this.type,objectKey:m,value:_,styleSpec:yt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const l=this.paint.get(s);if(l instanceof Tr&&Fc(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}let co;var Jr={get paint(){return co=co||new Rr({"raster-opacity":new xi(yt.paint_raster["raster-opacity"]),"raster-hue-rotate":new xi(yt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new xi(yt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new xi(yt.paint_raster["raster-brightness-max"]),"raster-saturation":new xi(yt.paint_raster["raster-saturation"]),"raster-contrast":new xi(yt.paint_raster["raster-contrast"]),"raster-resampling":new xi(yt.paint_raster["raster-resampling"]),"raster-fade-duration":new xi(yt.paint_raster["raster-fade-duration"])})}};class BA extends ya{constructor(s,l){super(s,Jr,l)}}const eh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class js{constructor(s,l){this._structArray=s,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class wn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,l){return s._trim(),l&&(s.isTransferred=!0,l.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const l=Object.create(this.prototype);return l.arrayBuffer=s.arrayBuffer,l.length=s.length,l.capacity=s.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Fr(h,s=1){let l=0,m=0;return{members:h.map(_=>{const C=eh[_.type].BYTES_PER_ELEMENT,T=l=Qa(l,Math.max(s,C)),L=_.components||1;return m=Math.max(m,C),l+=C*L,{name:_.name,type:_.type,components:L,offset:T}}),size:Qa(l,Math.max(m,s)),alignment:s}}function Qa(h,s){return Math.ceil(h/s)*s}class Xs extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l){const m=this.length;return this.resize(m+1),this.emplace(m,s,l)}emplace(s,l,m){const _=2*s;return this.int16[_+0]=l,this.int16[_+1]=m,s}}Xs.prototype.bytesPerElement=4,Pe("StructArrayLayout2i4",Xs);class Io extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,l,m)}emplace(s,l,m,_){const C=3*s;return this.int16[C+0]=l,this.int16[C+1]=m,this.int16[C+2]=_,s}}Io.prototype.bytesPerElement=6,Pe("StructArrayLayout3i6",Io);class va extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,m,_){const C=this.length;return this.resize(C+1),this.emplace(C,s,l,m,_)}emplace(s,l,m,_,C){const T=4*s;return this.int16[T+0]=l,this.int16[T+1]=m,this.int16[T+2]=_,this.int16[T+3]=C,s}}va.prototype.bytesPerElement=8,Pe("StructArrayLayout4i8",va);class Pc extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C,T){const L=this.length;return this.resize(L+1),this.emplace(L,s,l,m,_,C,T)}emplace(s,l,m,_,C,T,L){const D=6*s;return this.int16[D+0]=l,this.int16[D+1]=m,this.int16[D+2]=_,this.int16[D+3]=C,this.int16[D+4]=T,this.int16[D+5]=L,s}}Pc.prototype.bytesPerElement=12,Pe("StructArrayLayout2i4i12",Pc);class Yc extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C,T){const L=this.length;return this.resize(L+1),this.emplace(L,s,l,m,_,C,T)}emplace(s,l,m,_,C,T,L){const D=4*s,q=8*s;return this.int16[D+0]=l,this.int16[D+1]=m,this.uint8[q+4]=_,this.uint8[q+5]=C,this.uint8[q+6]=T,this.uint8[q+7]=L,s}}Yc.prototype.bytesPerElement=8,Pe("StructArrayLayout2i4ub8",Yc);class Nl extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l){const m=this.length;return this.resize(m+1),this.emplace(m,s,l)}emplace(s,l,m){const _=2*s;return this.float32[_+0]=l,this.float32[_+1]=m,s}}Nl.prototype.bytesPerElement=8,Pe("StructArrayLayout2f8",Nl);class Ml extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C,T,L,D,q,$){const ie=this.length;return this.resize(ie+1),this.emplace(ie,s,l,m,_,C,T,L,D,q,$)}emplace(s,l,m,_,C,T,L,D,q,$,ie){const he=10*s;return this.uint16[he+0]=l,this.uint16[he+1]=m,this.uint16[he+2]=_,this.uint16[he+3]=C,this.uint16[he+4]=T,this.uint16[he+5]=L,this.uint16[he+6]=D,this.uint16[he+7]=q,this.uint16[he+8]=$,this.uint16[he+9]=ie,s}}Ml.prototype.bytesPerElement=20,Pe("StructArrayLayout10ui20",Ml);class Zu extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C,T,L,D){const q=this.length;return this.resize(q+1),this.emplace(q,s,l,m,_,C,T,L,D)}emplace(s,l,m,_,C,T,L,D,q){const $=8*s;return this.uint16[$+0]=l,this.uint16[$+1]=m,this.uint16[$+2]=_,this.uint16[$+3]=C,this.uint16[$+4]=T,this.uint16[$+5]=L,this.uint16[$+6]=D,this.uint16[$+7]=q,s}}Zu.prototype.bytesPerElement=16,Pe("StructArrayLayout8ui16",Zu);class Jc extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C,T,L,D,q,$,ie,he){const ve=this.length;return this.resize(ve+1),this.emplace(ve,s,l,m,_,C,T,L,D,q,$,ie,he)}emplace(s,l,m,_,C,T,L,D,q,$,ie,he,ve){const we=12*s;return this.int16[we+0]=l,this.int16[we+1]=m,this.int16[we+2]=_,this.int16[we+3]=C,this.uint16[we+4]=T,this.uint16[we+5]=L,this.uint16[we+6]=D,this.uint16[we+7]=q,this.int16[we+8]=$,this.int16[we+9]=ie,this.int16[we+10]=he,this.int16[we+11]=ve,s}}Jc.prototype.bytesPerElement=24,Pe("StructArrayLayout4i4ui4i24",Jc);class ol extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,l,m)}emplace(s,l,m,_){const C=3*s;return this.float32[C+0]=l,this.float32[C+1]=m,this.float32[C+2]=_,s}}ol.prototype.bytesPerElement=12,Pe("StructArrayLayout3f12",ol);class th extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.uint32[1*s+0]=l,s}}th.prototype.bytesPerElement=4,Pe("StructArrayLayout1ul4",th);class ih extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C,T,L,D,q){const $=this.length;return this.resize($+1),this.emplace($,s,l,m,_,C,T,L,D,q)}emplace(s,l,m,_,C,T,L,D,q,$){const ie=10*s,he=5*s;return this.int16[ie+0]=l,this.int16[ie+1]=m,this.int16[ie+2]=_,this.int16[ie+3]=C,this.int16[ie+4]=T,this.int16[ie+5]=L,this.uint32[he+3]=D,this.uint16[ie+8]=q,this.uint16[ie+9]=$,s}}ih.prototype.bytesPerElement=20,Pe("StructArrayLayout6i1ul2ui20",ih);class eu extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C,T){const L=this.length;return this.resize(L+1),this.emplace(L,s,l,m,_,C,T)}emplace(s,l,m,_,C,T,L){const D=6*s;return this.int16[D+0]=l,this.int16[D+1]=m,this.int16[D+2]=_,this.int16[D+3]=C,this.int16[D+4]=T,this.int16[D+5]=L,s}}eu.prototype.bytesPerElement=12,Pe("StructArrayLayout2i2i2i12",eu);class Il extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C){const T=this.length;return this.resize(T+1),this.emplace(T,s,l,m,_,C)}emplace(s,l,m,_,C,T){const L=4*s,D=8*s;return this.float32[L+0]=l,this.float32[L+1]=m,this.float32[L+2]=_,this.int16[D+6]=C,this.int16[D+7]=T,s}}Il.prototype.bytesPerElement=16,Pe("StructArrayLayout2f1f2i16",Il);class w extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C,T){const L=this.length;return this.resize(L+1),this.emplace(L,s,l,m,_,C,T)}emplace(s,l,m,_,C,T,L){const D=16*s,q=4*s,$=8*s;return this.uint8[D+0]=l,this.uint8[D+1]=m,this.float32[q+1]=_,this.float32[q+2]=C,this.int16[$+6]=T,this.int16[$+7]=L,s}}w.prototype.bytesPerElement=16,Pe("StructArrayLayout2ub2f2i16",w);class r extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,l,m)}emplace(s,l,m,_){const C=3*s;return this.uint16[C+0]=l,this.uint16[C+1]=m,this.uint16[C+2]=_,s}}r.prototype.bytesPerElement=6,Pe("StructArrayLayout3ui6",r);class d extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C,T,L,D,q,$,ie,he,ve,we,Ie,qe,Xe){const xt=this.length;return this.resize(xt+1),this.emplace(xt,s,l,m,_,C,T,L,D,q,$,ie,he,ve,we,Ie,qe,Xe)}emplace(s,l,m,_,C,T,L,D,q,$,ie,he,ve,we,Ie,qe,Xe,xt){const rt=24*s,At=12*s,kt=48*s;return this.int16[rt+0]=l,this.int16[rt+1]=m,this.uint16[rt+2]=_,this.uint16[rt+3]=C,this.uint32[At+2]=T,this.uint32[At+3]=L,this.uint32[At+4]=D,this.uint16[rt+10]=q,this.uint16[rt+11]=$,this.uint16[rt+12]=ie,this.float32[At+7]=he,this.float32[At+8]=ve,this.uint8[kt+36]=we,this.uint8[kt+37]=Ie,this.uint8[kt+38]=qe,this.uint32[At+10]=Xe,this.int16[rt+22]=xt,s}}d.prototype.bytesPerElement=48,Pe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",d);class y extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,m,_,C,T,L,D,q,$,ie,he,ve,we,Ie,qe,Xe,xt,rt,At,kt,Ot,ni,mi,pi,gi,Di,vi){const _i=this.length;return this.resize(_i+1),this.emplace(_i,s,l,m,_,C,T,L,D,q,$,ie,he,ve,we,Ie,qe,Xe,xt,rt,At,kt,Ot,ni,mi,pi,gi,Di,vi)}emplace(s,l,m,_,C,T,L,D,q,$,ie,he,ve,we,Ie,qe,Xe,xt,rt,At,kt,Ot,ni,mi,pi,gi,Di,vi,_i){const Wt=32*s,un=16*s;return this.int16[Wt+0]=l,this.int16[Wt+1]=m,this.int16[Wt+2]=_,this.int16[Wt+3]=C,this.int16[Wt+4]=T,this.int16[Wt+5]=L,this.int16[Wt+6]=D,this.int16[Wt+7]=q,this.uint16[Wt+8]=$,this.uint16[Wt+9]=ie,this.uint16[Wt+10]=he,this.uint16[Wt+11]=ve,this.uint16[Wt+12]=we,this.uint16[Wt+13]=Ie,this.uint16[Wt+14]=qe,this.uint16[Wt+15]=Xe,this.uint16[Wt+16]=xt,this.uint16[Wt+17]=rt,this.uint16[Wt+18]=At,this.uint16[Wt+19]=kt,this.uint16[Wt+20]=Ot,this.uint16[Wt+21]=ni,this.uint16[Wt+22]=mi,this.uint32[un+12]=pi,this.float32[un+13]=gi,this.float32[un+14]=Di,this.uint16[Wt+30]=vi,this.uint16[Wt+31]=_i,s}}y.prototype.bytesPerElement=64,Pe("StructArrayLayout8i15ui1ul2f2ui64",y);class x extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.float32[1*s+0]=l,s}}x.prototype.bytesPerElement=4,Pe("StructArrayLayout1f4",x);class S extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,l,m)}emplace(s,l,m,_){const C=3*s;return this.uint16[6*s+0]=l,this.float32[C+1]=m,this.float32[C+2]=_,s}}S.prototype.bytesPerElement=12,Pe("StructArrayLayout1ui2f12",S);class N extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,m){const _=this.length;return this.resize(_+1),this.emplace(_,s,l,m)}emplace(s,l,m,_){const C=4*s;return this.uint32[2*s+0]=l,this.uint16[C+2]=m,this.uint16[C+3]=_,s}}N.prototype.bytesPerElement=8,Pe("StructArrayLayout1ul2ui8",N);class U extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l){const m=this.length;return this.resize(m+1),this.emplace(m,s,l)}emplace(s,l,m){const _=2*s;return this.uint16[_+0]=l,this.uint16[_+1]=m,s}}U.prototype.bytesPerElement=4,Pe("StructArrayLayout2ui4",U);class z extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.uint16[1*s+0]=l,s}}z.prototype.bytesPerElement=2,Pe("StructArrayLayout1ui2",z);class X extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,m,_){const C=this.length;return this.resize(C+1),this.emplace(C,s,l,m,_)}emplace(s,l,m,_,C){const T=4*s;return this.float32[T+0]=l,this.float32[T+1]=m,this.float32[T+2]=_,this.float32[T+3]=C,s}}X.prototype.bytesPerElement=16,Pe("StructArrayLayout4f16",X);class Y extends js{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new g(this.anchorPointX,this.anchorPointY)}}Y.prototype.size=20;class Ae extends ih{get(s){return new Y(this,s)}}Pe("CollisionBoxArray",Ae);class oe extends js{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}oe.prototype.size=48;class _e extends d{get(s){return new oe(this,s)}}Pe("PlacedSymbolArray",_e);class Ne extends js{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ne.prototype.size=64;class He extends y{get(s){return new Ne(this,s)}}Pe("SymbolInstanceArray",He);class Ge extends x{getoffsetX(s){return this.float32[1*s+0]}}Pe("GlyphOffsetArray",Ge);class We extends Io{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Pe("SymbolLineVertexArray",We);class Ye extends js{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ye.prototype.size=12;class it extends S{get(s){return new Ye(this,s)}}Pe("TextAnchorOffsetArray",it);class Je extends js{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Je.prototype.size=8;class lt extends N{get(s){return new Je(this,s)}}Pe("FeatureIndexArray",lt);class ht extends Xs{}class nt extends Xs{}class mt extends Xs{}class Dt extends Pc{}class Nt extends Yc{}class Lt extends Nl{}class Pt extends Ml{}class ui extends Zu{}class Ai extends Jc{}class $t extends ol{}class ki extends th{}class cn extends eu{}class ir extends w{}class sr extends r{}class Ar extends U{}const Pr=Fr([{name:"a_pos",components:2,type:"Int16"}],4),{members:kr}=Pr;class Ln{constructor(s=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=s}prepareSegment(s,l,m,_){const C=this.segments[this.segments.length-1];return s>Ln.MAX_VERTEX_ARRAY_LENGTH&&bi(`Max vertices per segment is ${Ln.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Ln.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!C||C.vertexLength+s>Ln.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==_?this.createNewSegment(l,m,_):C}createNewSegment(s,l,m){const _={vertexOffset:s.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return m!==void 0&&(_.sortKey=m),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(_),_}getOrCreateLatestSegment(s,l,m){return this.prepareSegment(0,s,l,m)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const s of this.segments)for(const l in s.vaos)s.vaos[l].destroy()}static simpleSegment(s,l,m,_){return new Ln([{vertexOffset:s,primitiveOffset:l,vertexLength:m,primitiveLength:_,vaos:{},sortKey:0}])}}function Or(h,s){return 256*(h=Ke(Math.floor(h),0,255))+Ke(Math.floor(s),0,255)}Ln.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pe("SegmentVector",Ln);const sa=Fr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Us=Fr([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Ds,Na,Tu,tc={exports:{}},Xu={exports:{}},ic={exports:{}},Yu=function(){if(Tu)return tc.exports;Tu=1;var h=(Ds||(Ds=1,Xu.exports=function(l,m){var _,C,T,L,D,q,$,ie;for(C=l.length-(_=3&l.length),T=m,D=3432918353,q=461845907,ie=0;ie<C;)$=255&l.charCodeAt(ie)|(255&l.charCodeAt(++ie))<<8|(255&l.charCodeAt(++ie))<<16|(255&l.charCodeAt(++ie))<<24,++ie,T=27492+(65535&(L=5*(65535&(T=(T^=$=(65535&($=($=(65535&$)*D+((($>>>16)*D&65535)<<16)&4294967295)<<15|$>>>17))*q+((($>>>16)*q&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(L>>>16)&65535)<<16);switch($=0,_){case 3:$^=(255&l.charCodeAt(ie+2))<<16;case 2:$^=(255&l.charCodeAt(ie+1))<<8;case 1:T^=$=(65535&($=($=(65535&($^=255&l.charCodeAt(ie)))*D+((($>>>16)*D&65535)<<16)&4294967295)<<15|$>>>17))*q+((($>>>16)*q&65535)<<16)&4294967295}return T^=l.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0}),Xu.exports),s=(Na||(Na=1,ic.exports=function(l,m){for(var _,C=l.length,T=m^C,L=0;C>=4;)_=1540483477*(65535&(_=255&l.charCodeAt(L)|(255&l.charCodeAt(++L))<<8|(255&l.charCodeAt(++L))<<16|(255&l.charCodeAt(++L))<<24))+((1540483477*(_>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),C-=4,++L;switch(C){case 3:T^=(255&l.charCodeAt(L+2))<<16;case 2:T^=(255&l.charCodeAt(L+1))<<8;case 1:T=1540483477*(65535&(T^=255&l.charCodeAt(L)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0}),ic.exports);return tc.exports=h,tc.exports.murmur3=h,tc.exports.murmur2=s,tc.exports}(),Fu=b(Yu);class Ll{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,l,m,_){this.ids.push(uo(s)),this.positions.push(l,m,_)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=uo(s);let m=0,_=this.ids.length-1;for(;m<_;){const T=m+_>>1;this.ids[T]>=l?_=T:m=T+1}const C=[];for(;this.ids[m]===l;)C.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return C}static serialize(s,l){const m=new Float64Array(s.ids),_=new Uint32Array(s.positions);return kc(m,_,0,m.length-1),l&&l.push(m.buffer,_.buffer),{ids:m,positions:_}}static deserialize(s){const l=new Ll;return l.ids=s.ids,l.positions=s.positions,l.indexed=!0,l}}function uo(h){const s=+h;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Fu(String(h))}function kc(h,s,l,m){for(;l<m;){const _=h[l+m>>1];let C=l-1,T=m+1;for(;;){do C++;while(h[C]<_);do T--;while(h[T]>_);if(C>=T)break;jc(h,C,T),jc(s,3*C,3*T),jc(s,3*C+1,3*T+1),jc(s,3*C+2,3*T+2)}T-l<m-T?(kc(h,s,l,T),l=T+1):(kc(h,s,T+1,m),m=T)}}function jc(h,s,l){const m=h[s];h[s]=h[l],h[l]=m}Pe("FeaturePositionMap",Ll);class Ma{constructor(s,l){this.gl=s.gl,this.location=l}}class Ss extends Ma{constructor(s,l){super(s,l),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class Nr extends Ma{constructor(s,l){super(s,l),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class Rs extends Ma{constructor(s,l){super(s,l),this.current=Cn.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const ls=new Float32Array(16);function dd(h){return[Or(255*h.r,255*h.g),Or(255*h.b,255*h.a)]}class nc{constructor(s,l,m){this.value=s,this.uniformNames=l.map(_=>`u_${_}`),this.type=m}setUniform(s,l,m){s.set(m.constantOr(this.value))}getBinding(s,l,m){return this.type==="color"?new Rs(s,l):new Ss(s,l)}}class Lo{constructor(s,l){this.uniformNames=l.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=s.tlbr}setConstantDashPositions(s,l){this.dashTo=[0,s.y,s.height,s.width],this.dashFrom=[0,l.y,l.height,l.width]}setUniform(s,l,m,_){let C=null;_==="u_pattern_to"?C=this.patternTo:_==="u_pattern_from"?C=this.patternFrom:_==="u_dasharray_to"?C=this.dashTo:_==="u_dasharray_from"?C=this.dashFrom:_==="u_pixel_ratio_to"?C=this.pixelRatioTo:_==="u_pixel_ratio_from"&&(C=this.pixelRatioFrom),C!==null&&s.set(C)}getBinding(s,l,m){return m.substr(0,9)==="u_pattern"||m.substr(0,12)==="u_dasharray_"?new Nr(s,l):new Ss(s,l)}}class Qr{constructor(s,l,m,_){this.expression=s,this.type=m,this.maxValue=0,this.paintVertexAttributes=l.map(C=>({name:`a_${C}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(s,l,m){const _=this.paintVertexArray.length,C=this.expression.evaluate(new en(0,m),l,{},m.canonical,[],m.formattedSection);this.paintVertexArray.resize(s),this._setPaintValue(_,s,C)}updatePaintArray(s,l,m,_,C){const T=this.expression.evaluate(new en(0,C),m,_);this._setPaintValue(s,l,T)}_setPaintValue(s,l,m){if(this.type==="color"){const _=dd(m);for(let C=s;C<l;C++)this.paintVertexArray.emplace(C,_[0],_[1])}else{for(let _=s;_<l;_++)this.paintVertexArray.emplace(_,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ll{constructor(s,l,m,_,C,T){this.expression=s,this.uniformNames=l.map(L=>`u_${L}_t`),this.type=m,this.useIntegerZoom=_,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=l.map(L=>({name:`a_${L}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(s,l,m){const _=this.expression.evaluate(new en(this.zoom,m),l,{},m.canonical,[],m.formattedSection),C=this.expression.evaluate(new en(this.zoom+1,m),l,{},m.canonical,[],m.formattedSection),T=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(T,s,_,C)}updatePaintArray(s,l,m,_,C){const T=this.expression.evaluate(new en(this.zoom,C),m,_),L=this.expression.evaluate(new en(this.zoom+1,C),m,_);this._setPaintValue(s,l,T,L)}_setPaintValue(s,l,m,_){if(this.type==="color"){const C=dd(m),T=dd(_);for(let L=s;L<l;L++)this.paintVertexArray.emplace(L,C[0],C[1],T[0],T[1])}else{for(let C=s;C<l;C++)this.paintVertexArray.emplace(C,m,_);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(_))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,l){const m=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,_=Ke(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);s.set(_)}getBinding(s,l,m){return new Ss(s,l)}}class tu{constructor(s,l,m,_,C,T){this.expression=s,this.type=l,this.useIntegerZoom=m,this.zoom=_,this.layerId=T,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(s,l,m){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(_,s,this.getPositionIds(l),m)}updatePaintArray(s,l,m,_,C){this._setPaintValues(s,l,this.getPositionIds(m),C)}_setPaintValues(s,l,m,_){const C=this.getPositions(_);if(!C||!m)return;const T=C[m.min],L=C[m.mid],D=C[m.max];if(T&&L&&D)for(let q=s;q<l;q++)this.emplace(this.zoomInPaintVertexArray,q,L,T),this.emplace(this.zoomOutPaintVertexArray,q,L,D)}upload(s){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const l=this.getVertexAttributes();this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,l,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,l,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class iu extends tu{getPositions(s){return s.imagePositions}getPositionIds(s){return s.patterns&&s.patterns[this.layerId]}getVertexAttributes(){return sa.members}emplace(s,l,m,_){s.emplace(l,m.tlbr[0],m.tlbr[1],m.tlbr[2],m.tlbr[3],_.tlbr[0],_.tlbr[1],_.tlbr[2],_.tlbr[3],m.pixelRatio,_.pixelRatio)}}class fd extends tu{getPositions(s){return s.dashPositions}getPositionIds(s){return s.dashes&&s.dashes[this.layerId]}getVertexAttributes(){return Us.members}emplace(s,l,m,_){s.emplace(l,0,m.y,m.height,m.width,0,_.y,_.height,_.width)}}class pd{constructor(s,l,m){this.binders={},this._buffers=[];const _=[];for(const C in s.paint._values){if(!m(C))continue;const T=s.paint.get(C);if(!(T instanceof Tr&&Fc(T.property.specification)))continue;const L=nh(C,s.type),D=T.value,q=T.property.specification.type,$=T.property.useIntegerZoom,ie=T.property.specification["property-type"],he=ie==="cross-faded"||ie==="cross-faded-data-driven";if(D.kind==="constant")this.binders[C]=he?new Lo(D.value,L):new nc(D.value,L,q),_.push(`/u_${C}`);else if(D.kind==="source"||he){const ve=md(C,q,"source");this.binders[C]=he?C==="line-dasharray"?new fd(D,q,$,l,ve,s.id):new iu(D,q,$,l,ve,s.id):new Qr(D,L,q,ve),_.push(`/a_${C}`)}else{const ve=md(C,q,"composite");this.binders[C]=new ll(D,L,q,$,l,ve),_.push(`/z_${C}`)}}this.cacheKey=_.sort().join("")}getMaxValue(s){const l=this.binders[s];return l instanceof Qr||l instanceof ll?l.maxValue:0}populatePaintArrays(s,l,m){for(const _ in this.binders){const C=this.binders[_];(C instanceof Qr||C instanceof ll||C instanceof tu)&&C.populatePaintArray(s,l,m)}}setConstantPatternPositions(s,l){for(const m in this.binders){const _=this.binders[m];_ instanceof Lo&&_.setConstantPatternPositions(s,l)}}setConstantDashPositions(s,l){for(const m in this.binders){const _=this.binders[m];_ instanceof Lo&&_.setConstantDashPositions(s,l)}}updatePaintArrays(s,l,m,_,C){let T=!1;for(const L in s){const D=l.getPositions(L);for(const q of D){const $=m.feature(q.index);for(const ie in this.binders){const he=this.binders[ie];if((he instanceof Qr||he instanceof ll||he instanceof tu)&&he.expression.isStateDependent===!0){const ve=_.paint.get(ie);he.expression=ve.value,he.updatePaintArray(q.start,q.end,$,s[L],C),T=!0}}}}return T}defines(){const s=[];for(const l in this.binders){const m=this.binders[l];(m instanceof nc||m instanceof Lo)&&s.push(...m.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return s}getBinderAttributes(){const s=[];for(const l in this.binders){const m=this.binders[l];if(m instanceof Qr||m instanceof ll)for(let _=0;_<m.paintVertexAttributes.length;_++)s.push(m.paintVertexAttributes[_].name);else if(m instanceof tu){const _=m.getVertexAttributes();for(const C of _)s.push(C.name)}}return s}getBinderUniforms(){const s=[];for(const l in this.binders){const m=this.binders[l];if(m instanceof nc||m instanceof Lo||m instanceof ll)for(const _ of m.uniformNames)s.push(_)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,l){const m=[];for(const _ in this.binders){const C=this.binders[_];if(C instanceof nc||C instanceof Lo||C instanceof ll){for(const T of C.uniformNames)if(l[T]){const L=C.getBinding(s,l[T],T);m.push({name:T,property:_,binding:L})}}}return m}setUniforms(s,l,m,_){for(const{name:C,property:T,binding:L}of l)this.binders[T].setUniform(L,_,m.get(T),C)}updatePaintBuffers(s){this._buffers=[];for(const l in this.binders){const m=this.binders[l];if(s&&m instanceof tu){const _=s.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(m instanceof Qr||m instanceof ll)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(s){for(const l in this.binders){const m=this.binders[l];(m instanceof Qr||m instanceof ll||m instanceof tu)&&m.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const l=this.binders[s];(l instanceof Qr||l instanceof ll||l instanceof tu)&&l.destroy()}}}class cl{constructor(s,l,m=()=>!0){this.programConfigurations={};for(const _ of s)this.programConfigurations[_.id]=new pd(_,l,m);this.needsUpload=!1,this._featureMap=new Ll,this._bufferOffset=0}populatePaintArrays(s,l,m,_){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(s,l,_);l.id!==void 0&&this._featureMap.add(l.id,m,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,l,m,_){for(const C of m)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(s,this._featureMap,l,C,_)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function nh(h,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${s}-`,"").replace(/-/g,"_")]}function md(h,s,l){const m={color:{source:Nl,composite:X},number:{source:x,composite:Nl}},_=function(C){return{"line-pattern":{source:Pt,composite:Pt},"fill-pattern":{source:Pt,composite:Pt},"fill-extrusion-pattern":{source:Pt,composite:Pt},"line-dasharray":{source:ui,composite:ui}}[C]}(h);return _&&_[l]||m[s][l]}Pe("ConstantBinder",nc),Pe("CrossFadedConstantBinder",Lo),Pe("SourceExpressionBinder",Qr),Pe("CrossFadedPatternBinder",iu),Pe("CrossFadedDasharrayBinder",fd),Pe("CompositeExpressionBinder",ll),Pe("ProgramConfiguration",pd,{omit:["_buffers"]}),Pe("ProgramConfigurationSet",cl);const rh=Math.pow(2,14)-1,Sm=-rh-1;function Ju(h){const s=ke/h.extent,l=h.loadGeometry();for(let m=0;m<l.length;m++){const _=l[m];for(let C=0;C<_.length;C++){const T=_[C],L=Math.round(T.x*s),D=Math.round(T.y*s);T.x=Ke(L,Sm,rh),T.y=Ke(D,Sm,rh),(L<T.x||L>T.x+1||D<T.y||D>T.y+1)&&bi("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function sh(h,s){return{type:h.type,id:h.id,properties:h.properties,geometry:s?Ju(h):[]}}const rp=-32768;function I0(h,s,l,m,_){h.emplaceBack(rp+8*s+m,rp+8*l+_)}class sp{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasDependencies=!1,this.layoutVertexArray=new nt,this.indexArray=new sr,this.segments=new Ln,this.programConfigurations=new cl(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,m){const _=this.layers[0],C=[];let T=null,L=!1,D=_.type==="heatmap";if(_.type==="circle"){const $=_;T=$.layout.get("circle-sort-key"),L=!T.isConstant(),D=D||$.paint.get("circle-pitch-alignment")==="map"}const q=D?l.subdivisionGranularity.circle:1;for(const{feature:$,id:ie,index:he,sourceLayerIndex:ve}of s){const we=this.layers[0]._featureFilter.needGeometry,Ie=sh($,we);if(!this.layers[0]._featureFilter.filter(new en(this.zoom),Ie,m))continue;const qe=L?T.evaluate(Ie,{},m):void 0,Xe={id:ie,properties:$.properties,type:$.type,sourceLayerIndex:ve,index:he,geometry:we?Ie.geometry:Ju($),patterns:{},sortKey:qe};C.push(Xe)}L&&C.sort(($,ie)=>$.sortKey-ie.sortKey);for(const $ of C){const{geometry:ie,index:he,sourceLayerIndex:ve}=$,we=s[he].feature;this.addFeature($,ie,he,m,q),l.featureIndex.insert(we,ie,he,ve,this.index)}}update(s,l,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,{imagePositions:m})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,kr),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,l,m,_,C=1){let T;switch(C){case 1:T=[0,7];break;case 3:T=[0,2,5,7];break;case 5:T=[0,1,3,4,6,7];break;case 7:T=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${C}; valid values are 1, 3, 5, 7.`)}const L=T.length;for(const D of l)for(const q of D){const $=q.x,ie=q.y;if($<0||$>=ke||ie<0||ie>=ke)continue;const he=this.segments.prepareSegment(L*L,this.layoutVertexArray,this.indexArray,s.sortKey),ve=he.vertexLength;for(let we=0;we<L;we++)for(let Ie=0;Ie<L;Ie++)I0(this.layoutVertexArray,$,ie,T[Ie],T[we]);for(let we=0;we<L-1;we++)for(let Ie=0;Ie<L-1;Ie++){const qe=ve+we*L+Ie,Xe=ve+(we+1)*L+Ie;this.indexArray.emplaceBack(qe,Xe+1,qe+1),this.indexArray.emplaceBack(qe,Xe,Xe+1)}he.vertexLength+=L*L,he.primitiveLength+=(L-1)*(L-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:{},canonical:_})}}function L0(h,s){for(let l=0;l<h.length;l++)if(CA(s,h[l]))return!0;for(let l=0;l<s.length;l++)if(CA(h,s[l]))return!0;return!!ap(h,s)}function lf(h,s,l){return!!CA(h,s)||!!op(s,h,l)}function za(h,s){if(h.length===1)return Tm(s,h[0]);for(let l=0;l<s.length;l++){const m=s[l];for(let _=0;_<m.length;_++)if(CA(h,m[_]))return!0}for(let l=0;l<h.length;l++)if(Tm(s,h[l]))return!0;for(let l=0;l<s.length;l++)if(ap(h,s[l]))return!0;return!1}function Po(h,s,l){if(h.length>1){if(ap(h,s))return!0;for(let m=0;m<s.length;m++)if(op(s[m],h,l))return!0}for(let m=0;m<h.length;m++)if(op(h[m],s,l))return!0;return!1}function ap(h,s){if(h.length===0||s.length===0)return!1;for(let l=0;l<h.length-1;l++){const m=h[l],_=h[l+1];for(let C=0;C<s.length-1;C++)if(P0(m,_,s[C],s[C+1]))return!0}return!1}function P0(h,s,l,m){return ot(h,l,m)!==ot(s,l,m)&&ot(h,s,l)!==ot(h,s,m)}function op(h,s,l){const m=l*l;if(s.length===1)return h.distSqr(s[0])<m;for(let _=1;_<s.length;_++)if(Em(h,s[_-1],s[_])<m)return!0;return!1}function Em(h,s,l){const m=s.distSqr(l);if(m===0)return h.distSqr(s);const _=((h.x-s.x)*(l.x-s.x)+(h.y-s.y)*(l.y-s.y))/m;return h.distSqr(_<0?s:_>1?l:l.sub(s)._mult(_)._add(s))}function Tm(h,s){let l,m,_,C=!1;for(let T=0;T<h.length;T++){l=h[T];for(let L=0,D=l.length-1;L<l.length;D=L++)m=l[L],_=l[D],m.y>s.y!=_.y>s.y&&s.x<(_.x-m.x)*(s.y-m.y)/(_.y-m.y)+m.x&&(C=!C)}return C}function CA(h,s){let l=!1;for(let m=0,_=h.length-1;m<h.length;_=m++){const C=h[m],T=h[_];C.y>s.y!=T.y>s.y&&s.x<(T.x-C.x)*(s.y-C.y)/(T.y-C.y)+C.x&&(l=!l)}return l}function Fm(h,s,l){const m=l[0],_=l[2];if(h.x<m.x&&s.x<m.x||h.x>_.x&&s.x>_.x||h.y<m.y&&s.y<m.y||h.y>_.y&&s.y>_.y)return!1;const C=ot(h,s,l[0]);return C!==ot(h,s,l[1])||C!==ot(h,s,l[2])||C!==ot(h,s,l[3])}function Mh(h,s,l){const m=s.paint.get(h).value;return m.kind==="constant"?m.value:l.programConfigurations.get(s.id).getMaxValue(h)}function cf(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function uf(h,s,l,m,_){if(!s[0]&&!s[1])return h;const C=g.convert(s)._mult(_);l==="viewport"&&C._rotate(-m);const T=[];for(let L=0;L<h.length;L++)T.push(h[L].sub(C));return T}function Nm({queryGeometry:h,size:s},l){return lf(h,l,s)}function Mm({queryGeometry:h,size:s,transform:l,unwrappedTileID:m,getElevation:_},C){return lf(h,C,s*(l.projectTileCoordinates(C.x,C.y,m,_).signedDistanceFromCamera/l.cameraToCenterDistance))}function Im({queryGeometry:h,size:s,transform:l,unwrappedTileID:m,getElevation:_},C){const T=l.projectTileCoordinates(C.x,C.y,m,_).signedDistanceFromCamera,L=s*(l.cameraToCenterDistance/T);return lf(h,gd(C,l,m,_),L)}function k0({queryGeometry:h,size:s,transform:l,unwrappedTileID:m,getElevation:_},C){return lf(h,gd(C,l,m,_),s)}function lp({queryGeometry:h,size:s,transform:l,unwrappedTileID:m,getElevation:_,pitchAlignment:C="map",pitchScale:T="map"},L){const D=C==="map"?T==="map"?Nm:Mm:T==="map"?Im:k0,q={queryGeometry:h,size:s,transform:l,unwrappedTileID:m,getElevation:_};for(const $ of L)for(const ie of $)if(D(q,ie))return!0;return!1}function gd(h,s,l,m){const _=s.projectTileCoordinates(h.x,h.y,l,m).point;return new g((.5*_.x+.5)*s.width,(.5*-_.y+.5)*s.height)}let cp,Lm;Pe("CircleBucket",sp,{omit:["layers"]});var Pm={get paint(){return Lm=Lm||new Rr({"circle-radius":new Li(yt.paint_circle["circle-radius"]),"circle-color":new Li(yt.paint_circle["circle-color"]),"circle-blur":new Li(yt.paint_circle["circle-blur"]),"circle-opacity":new Li(yt.paint_circle["circle-opacity"]),"circle-translate":new xi(yt.paint_circle["circle-translate"]),"circle-translate-anchor":new xi(yt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new xi(yt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new xi(yt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Li(yt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Li(yt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Li(yt.paint_circle["circle-stroke-opacity"])})},get layout(){return cp=cp||new Rr({"circle-sort-key":new Li(yt.layout_circle["circle-sort-key"])})}};class j0 extends ya{constructor(s,l){super(s,Pm,l)}createBucket(s){return new sp(s)}queryRadius(s){const l=s;return Mh("circle-radius",this,l)+Mh("circle-stroke-width",this,l)+cf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:s,feature:l,featureState:m,geometry:_,transform:C,pixelsToTileUnits:T,unwrappedTileID:L,getElevation:D}){const q=uf(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-C.bearingInRadians,T),$=this.paint.get("circle-radius").evaluate(l,m)+this.paint.get("circle-stroke-width").evaluate(l,m),ie=this.paint.get("circle-pitch-scale"),he=this.paint.get("circle-pitch-alignment");let ve,we;return he==="map"?(ve=q,we=$*T):(ve=function(Ie,qe,Xe,xt){return Ie.map(rt=>gd(rt,qe,Xe,xt))}(q,C,L,D),we=$),lp({queryGeometry:ve,size:we,transform:C,unwrappedTileID:L,getElevation:D,pitchAlignment:he,pitchScale:ie},_)}}class eA extends sp{}let up;Pe("HeatmapBucket",eA,{omit:["layers"]});var I1={get paint(){return up=up||new Rr({"heatmap-radius":new Li(yt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Li(yt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new xi(yt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new os(yt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new xi(yt.paint_heatmap["heatmap-opacity"])})}};function Ap(h,{width:s,height:l},m,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==s*l*m)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${s*l*m}`)}else _=new Uint8Array(s*l*m);return h.width=s,h.height=l,h.data=_,h}function tA(h,{width:s,height:l},m){if(s===h.width&&l===h.height)return;const _=Ap({},{width:s,height:l},m);hp(h,_,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,s),height:Math.min(h.height,l)},m),h.width=s,h.height=l,h.data=_.data}function hp(h,s,l,m,_,C){if(_.width===0||_.height===0)return s;if(_.width>h.width||_.height>h.height||l.x>h.width-_.width||l.y>h.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>s.width||_.height>s.height||m.x>s.width-_.width||m.y>s.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const T=h.data,L=s.data;if(T===L)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<_.height;D++){const q=((l.y+D)*h.width+l.x)*C,$=((m.y+D)*s.width+m.x)*C;for(let ie=0;ie<_.width*C;ie++)L[$+ie]=T[q+ie]}return s}class ah{constructor(s,l){Ap(this,s,1,l)}resize(s){tA(this,s,1)}clone(){return new ah({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,l,m,_,C){hp(s,l,m,_,C,1)}}class Ha{constructor(s,l){Ap(this,s,4,l)}resize(s){tA(this,s,4)}replace(s,l){l?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new Ha({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,l,m,_,C){hp(s,l,m,_,C,4)}setPixel(s,l,m){const _=4*(s*this.width+l);this.data[_+0]=Math.round(255*m.r/m.a),this.data[_+1]=Math.round(255*m.g/m.a),this.data[_+2]=Math.round(255*m.b/m.a),this.data[_+3]=Math.round(255*m.a)}}function Os(h){const s={},l=h.resolution||256,m=h.clips?h.clips.length:1,_=h.image||new Ha({width:l,height:m});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const C=(T,L,D)=>{s[h.evaluationKey]=D;const q=h.expression.evaluate(s);_.setPixel(T/4/l,L/4,q)};if(h.clips)for(let T=0,L=0;T<m;++T,L+=4*l)for(let D=0,q=0;D<l;D++,q+=4){const $=D/(l-1),{start:ie,end:he}=h.clips[T];C(L,q,ie*(1-$)+he*$)}else for(let T=0,L=0;T<l;T++,L+=4)C(0,L,T/(l-1));return _}Pe("AlphaImage",ah),Pe("RGBAImage",Ha);const km="big-fb";class L1 extends ya{createBucket(s){return new eA(s)}constructor(s,l){super(s,I1,l),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Os({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(km)&&this.heatmapFbos.delete(km)}queryRadius(s){return Mh("heatmap-radius",this,s)}queryIntersectsFeature({queryGeometry:s,feature:l,featureState:m,geometry:_,transform:C,pixelsToTileUnits:T,unwrappedTileID:L,getElevation:D}){return lp({queryGeometry:s,size:this.paint.get("heatmap-radius").evaluate(l,m)*T,transform:C,unwrappedTileID:L,getElevation:D},_)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let jm;var Af={get paint(){return jm=jm||new Rr({"hillshade-illumination-direction":new xi(yt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new xi(yt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new xi(yt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new xi(yt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new xi(yt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new xi(yt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new xi(yt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new xi(yt.paint_hillshade["hillshade-method"])})}};class oh extends ya{constructor(s,l){super(s,Af,l),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let s=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,m=this.paint.get("hillshade-highlight-color").values,_=this.paint.get("hillshade-shadow-color").values;const C=Math.max(s.length,l.length,m.length,_.length);s=s.concat(Array(C-s.length).fill(s.at(-1))),l=l.concat(Array(C-l.length).fill(l.at(-1))),m=m.concat(Array(C-m.length).fill(m.at(-1))),_=_.concat(Array(C-_.length).fill(_.at(-1)));const T=l.map(zi);return{directionRadians:s.map(zi),altitudeRadians:T,shadowColor:_,highlightColor:m}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Um;var U0={get paint(){return Um=Um||new Rr({"color-relief-opacity":new xi(yt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new os(yt["paint_color-relief"]["color-relief-color"])})}};class Ih{constructor(s,l,m,_){this.context=s,this.format=m,this.texture=s.gl.createTexture(),this.update(l,_)}update(s,l,m){const{width:_,height:C}=s,T=!(this.size&&this.size[0]===_&&this.size[1]===C||m),{context:L}=this,{gl:D}=L;if(this.useMipmap=!!(l&&l.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!l||l.premultiply!==!1)),T)this.size=[_,C],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||si(s)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,s):D.texImage2D(D.TEXTURE_2D,0,this.format,_,C,0,this.format,D.UNSIGNED_BYTE,s.data);else{const{x:q,y:$}=m||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||si(s)?D.texSubImage2D(D.TEXTURE_2D,0,q,$,D.RGBA,D.UNSIGNED_BYTE,s):D.texSubImage2D(D.TEXTURE_2D,0,q,$,_,C,D.RGBA,D.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D),L.pixelStoreUnpackFlipY.setDefault(),L.pixelStoreUnpack.setDefault(),L.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(s,l,m){const{context:_}=this,{gl:C}=_;C.bindTexture(C.TEXTURE_2D,this.texture),m!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=C.LINEAR),s!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,s),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,m||s),this.filter=s),l!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,l),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class Nu{constructor(s,l,m,_=1,C=1,T=1,L=0){if(this.uid=s,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void bi(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const D=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=C,this.blueFactor=T,this.baseShift=L;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let q=0;q<D;q++)this.data[this._idx(-1,q)]=this.data[this._idx(0,q)],this.data[this._idx(D,q)]=this.data[this._idx(D-1,q)],this.data[this._idx(q,-1)]=this.data[this._idx(q,0)],this.data[this._idx(q,D)]=this.data[this._idx(q,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let q=0;q<D;q++)for(let $=0;$<D;$++){const ie=this.get(q,$);ie>this.max&&(this.max=ie),ie<this.min&&(this.min=ie)}}get(s,l){const m=new Uint8Array(this.data.buffer),_=4*this._idx(s,l);return this.unpack(m[_],m[_+1],m[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,l){if(s<-1||s>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(s+1)}unpack(s,l,m){return s*this.redFactor+l*this.greenFactor+m*this.blueFactor-this.baseShift}pack(s){return Dm(s,this.getUnpackVector())}getPixels(){return new Ha({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,l,m){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let _=l*this.dim,C=l*this.dim+this.dim,T=m*this.dim,L=m*this.dim+this.dim;switch(l){case-1:_=C-1;break;case 1:C=_+1}switch(m){case-1:T=L-1;break;case 1:L=T+1}const D=-l*this.dim,q=-m*this.dim;for(let $=T;$<L;$++)for(let ie=_;ie<C;ie++)this.data[this._idx(ie,$)]=s.data[this._idx(ie+D,$+q)]}}function Dm(h,s){const l=s[0],m=s[1],_=s[2],C=s[3],T=Math.min(l,m,_),L=Math.round((h+C)/T);return{r:Math.floor(L*T/l)%256,g:Math.floor(L*T/m)%256,b:Math.floor(L*T/_)%256}}Pe("DEMData",Nu);class Rm extends ya{constructor(s,l){super(s,U0,l)}_createColorRamp(s){const l={elevationStops:[],colorStops:[]},m=this._transitionablePaint._values["color-relief-color"].value.expression;if(m instanceof Cu&&m._styleExpression.expression instanceof rs){this.colorRampExpression=m;const T=m._styleExpression.expression;l.elevationStops=T.labels,l.colorStops=[];for(const L of l.elevationStops)l.colorStops.push(T.evaluate({globals:{elevation:L}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[Cn.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=s)return l;const _={elevationStops:[],colorStops:[]},C=(l.elevationStops.length-1)/(s-1);for(let T=0;T<l.elevationStops.length-.5;T+=C)_.elevationStops.push(l.elevationStops[Math.round(T)]),_.colorStops.push(l.colorStops[Math.round(T)]);return bi(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),_}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(s,l,m){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const _=this._createColorRamp(l),C=new Ha({width:_.colorStops.length,height:1}),T=new Ha({width:_.colorStops.length,height:1});for(let L=0;L<_.elevationStops.length;L++){const D=Dm(_.elevationStops[L],m);T.setPixel(0,L,new Cn(D.r/255,D.g/255,D.b/255,1)),C.setPixel(0,L,_.colorStops[L])}return this.colorRampTextures={elevationTexture:new Ih(s,T,s.gl.RGBA),colorTexture:new Ih(s,C,s.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const D0=Fr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Om}=D0;function yd(h,s,l){const m=l.patternDependencies;let _=!1;for(const C of s){const T=C.paint.get(`${h}-pattern`);T.isConstant()||(_=!0);const L=T.constantOr(null);L&&(_=!0,m[L.to]=!0,m[L.from]=!0)}return _}function vd(h,s,l,m,_){const{zoom:C}=m,T=_.patternDependencies;for(const L of s){const D=L.paint.get(`${h}-pattern`).value;if(D.kind!=="constant"){let q=D.evaluate({zoom:C-1},l,{},_.availableImages),$=D.evaluate({zoom:C},l,{},_.availableImages),ie=D.evaluate({zoom:C+1},l,{},_.availableImages);q=q&&q.name?q.name:q,$=$&&$.name?$.name:$,ie=ie&&ie.name?ie.name:ie,T[q]=!0,T[$]=!0,T[ie]=!0,l.patterns[L.id]={min:q,mid:$,max:ie}}}return l}function Qm(h,s,l,m,_){let C;if(_===function(T,L,D,q){let $=0;for(let ie=L,he=D-q;ie<D;ie+=q)$+=(T[he]-T[ie])*(T[ie+1]+T[he+1]),he=ie;return $}(h,s,l,m)>0)for(let T=s;T<l;T+=m)C=lh(T/m|0,h[T],h[T+1],C);else for(let T=l-m;T>=s;T-=m)C=lh(T/m|0,h[T],h[T+1],C);return C&&ho(C,C.next)&&(ru(C),C=C.next),C}function Pl(h,s){if(!h)return h;s||(s=h);let l,m=h;do if(l=!1,m.steiner||!ho(m,m.next)&&Ts(m.prev,m,m.next)!==0)m=m.next;else{if(ru(m),m=s=m.prev,m===m.next)break;l=!0}while(l||m!==s);return s}function Es(h,s,l,m,_,C,T){if(!h)return;!T&&C&&function(D,q,$,ie){let he=D;do he.z===0&&(he.z=ul(he.x,he.y,q,$,ie)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next;while(he!==D);he.prevZ.nextZ=null,he.prevZ=null,function(ve){let we,Ie=1;do{let qe,Xe=ve;ve=null;let xt=null;for(we=0;Xe;){we++;let rt=Xe,At=0;for(let Ot=0;Ot<Ie&&(At++,rt=rt.nextZ,rt);Ot++);let kt=Ie;for(;At>0||kt>0&&rt;)At!==0&&(kt===0||!rt||Xe.z<=rt.z)?(qe=Xe,Xe=Xe.nextZ,At--):(qe=rt,rt=rt.nextZ,kt--),xt?xt.nextZ=qe:ve=qe,qe.prevZ=xt,xt=qe;Xe=rt}xt.nextZ=null,Ie*=2}while(we>1)}(he)}(h,m,_,C);let L=h;for(;h.prev!==h.next;){const D=h.prev,q=h.next;if(C?R0(h,m,_,C):zm(h))s.push(D.i,h.i,q.i),ru(h),h=q.next,L=q.next;else if((h=q)===L){T?T===1?Es(h=Ao(Pl(h),s),s,l,m,_,C,2):T===2&&P1(h,s,l,m,_,C):Es(Pl(h),s,l,m,_,C,1);break}}}function zm(h){const s=h.prev,l=h,m=h.next;if(Ts(s,l,m)>=0)return!1;const _=s.x,C=l.x,T=m.x,L=s.y,D=l.y,q=m.y,$=Math.min(_,C,T),ie=Math.min(L,D,q),he=Math.max(_,C,T),ve=Math.max(L,D,q);let we=m.next;for(;we!==s;){if(we.x>=$&&we.x<=he&&we.y>=ie&&we.y<=ve&&_d(_,L,C,D,T,q,we.x,we.y)&&Ts(we.prev,we,we.next)>=0)return!1;we=we.next}return!0}function R0(h,s,l,m){const _=h.prev,C=h,T=h.next;if(Ts(_,C,T)>=0)return!1;const L=_.x,D=C.x,q=T.x,$=_.y,ie=C.y,he=T.y,ve=Math.min(L,D,q),we=Math.min($,ie,he),Ie=Math.max(L,D,q),qe=Math.max($,ie,he),Xe=ul(ve,we,s,l,m),xt=ul(Ie,qe,s,l,m);let rt=h.prevZ,At=h.nextZ;for(;rt&&rt.z>=Xe&&At&&At.z<=xt;){if(rt.x>=ve&&rt.x<=Ie&&rt.y>=we&&rt.y<=qe&&rt!==_&&rt!==T&&_d(L,$,D,ie,q,he,rt.x,rt.y)&&Ts(rt.prev,rt,rt.next)>=0||(rt=rt.prevZ,At.x>=ve&&At.x<=Ie&&At.y>=we&&At.y<=qe&&At!==_&&At!==T&&_d(L,$,D,ie,q,he,At.x,At.y)&&Ts(At.prev,At,At.next)>=0))return!1;At=At.nextZ}for(;rt&&rt.z>=Xe;){if(rt.x>=ve&&rt.x<=Ie&&rt.y>=we&&rt.y<=qe&&rt!==_&&rt!==T&&_d(L,$,D,ie,q,he,rt.x,rt.y)&&Ts(rt.prev,rt,rt.next)>=0)return!1;rt=rt.prevZ}for(;At&&At.z<=xt;){if(At.x>=ve&&At.x<=Ie&&At.y>=we&&At.y<=qe&&At!==_&&At!==T&&_d(L,$,D,ie,q,he,At.x,At.y)&&Ts(At.prev,At,At.next)>=0)return!1;At=At.nextZ}return!0}function Ao(h,s){let l=h;do{const m=l.prev,_=l.next.next;!ho(m,_)&&nu(m,l,l.next,_)&&xd(m,_)&&xd(_,m)&&(s.push(m.i,l.i,_.i),ru(l),ru(l.next),l=h=_),l=l.next}while(l!==h);return Pl(l)}function P1(h,s,l,m,_,C){let T=h;do{let L=T.next.next;for(;L!==T.prev;){if(T.i!==L.i&&k1(T,L)){let D=EA(T,L);return T=Pl(T,T.next),D=Pl(D,D.next),Es(T,s,l,m,_,C,0),void Es(D,s,l,m,_,C,0)}L=L.next}T=T.next}while(T!==h)}function O0(h,s){let l=h.x-s.x;return l===0&&(l=h.y-s.y,l===0)&&(l=(h.next.y-h.y)/(h.next.x-h.x)-(s.next.y-s.y)/(s.next.x-s.x)),l}function Q0(h,s){const l=function(_,C){let T=C;const L=_.x,D=_.y;let q,$=-1/0;if(ho(_,T))return T;do{if(ho(_,T.next))return T.next;if(D<=T.y&&D>=T.next.y&&T.next.y!==T.y){const Ie=T.x+(D-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(Ie<=L&&Ie>$&&($=Ie,q=T.x<T.next.x?T:T.next,Ie===L))return q}T=T.next}while(T!==C);if(!q)return null;const ie=q,he=q.x,ve=q.y;let we=1/0;T=q;do{if(L>=T.x&&T.x>=he&&L!==T.x&&Hm(D<ve?L:$,D,he,ve,D<ve?$:L,D,T.x,T.y)){const Ie=Math.abs(D-T.y)/(L-T.x);xd(T,_)&&(Ie<we||Ie===we&&(T.x>q.x||T.x===q.x&&Qs(q,T)))&&(q=T,we=Ie)}T=T.next}while(T!==ie);return q}(h,s);if(!l)return s;const m=EA(l,h);return Pl(m,m.next),Pl(l,l.next)}function Qs(h,s){return Ts(h.prev,h,s.prev)<0&&Ts(s.next,h,h.next)<0}function ul(h,s,l,m,_){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-l)*_|0)|h<<8))|h<<4))|h<<2))|h<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-m)*_|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function SA(h){let s=h,l=h;do(s.x<l.x||s.x===l.x&&s.y<l.y)&&(l=s),s=s.next;while(s!==h);return l}function Hm(h,s,l,m,_,C,T,L){return(_-T)*(s-L)>=(h-T)*(C-L)&&(h-T)*(m-L)>=(l-T)*(s-L)&&(l-T)*(C-L)>=(_-T)*(m-L)}function _d(h,s,l,m,_,C,T,L){return!(h===T&&s===L)&&Hm(h,s,l,m,_,C,T,L)}function k1(h,s){return h.next.i!==s.i&&h.prev.i!==s.i&&!function(l,m){let _=l;do{if(_.i!==l.i&&_.next.i!==l.i&&_.i!==m.i&&_.next.i!==m.i&&nu(_,_.next,l,m))return!0;_=_.next}while(_!==l);return!1}(h,s)&&(xd(h,s)&&xd(s,h)&&function(l,m){let _=l,C=!1;const T=(l.x+m.x)/2,L=(l.y+m.y)/2;do _.y>L!=_.next.y>L&&_.next.y!==_.y&&T<(_.next.x-_.x)*(L-_.y)/(_.next.y-_.y)+_.x&&(C=!C),_=_.next;while(_!==l);return C}(h,s)&&(Ts(h.prev,h,s.prev)||Ts(h,s.prev,s))||ho(h,s)&&Ts(h.prev,h,h.next)>0&&Ts(s.prev,s,s.next)>0)}function Ts(h,s,l){return(s.y-h.y)*(l.x-s.x)-(s.x-h.x)*(l.y-s.y)}function ho(h,s){return h.x===s.x&&h.y===s.y}function nu(h,s,l,m){const _=Al(Ts(h,s,l)),C=Al(Ts(h,s,m)),T=Al(Ts(l,m,h)),L=Al(Ts(l,m,s));return _!==C&&T!==L||!(_!==0||!hf(h,l,s))||!(C!==0||!hf(h,m,s))||!(T!==0||!hf(l,h,m))||!(L!==0||!hf(l,s,m))}function hf(h,s,l){return s.x<=Math.max(h.x,l.x)&&s.x>=Math.min(h.x,l.x)&&s.y<=Math.max(h.y,l.y)&&s.y>=Math.min(h.y,l.y)}function Al(h){return h>0?1:h<0?-1:0}function xd(h,s){return Ts(h.prev,h,h.next)<0?Ts(h,s,h.next)>=0&&Ts(h,h.prev,s)>=0:Ts(h,s,h.prev)<0||Ts(h,h.next,s)<0}function EA(h,s){const l=df(h.i,h.x,h.y),m=df(s.i,s.x,s.y),_=h.next,C=s.prev;return h.next=s,s.prev=h,l.next=_,_.prev=l,m.next=l,l.prev=m,C.next=m,m.prev=C,m}function lh(h,s,l,m){const _=df(h,s,l);return m?(_.next=m.next,_.prev=m,m.next.prev=_,m.next=_):(_.prev=_,_.next=_),_}function ru(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function df(h,s,l){return{i:h,x:s,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class ch{constructor(s,l){if(l>s)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=s,this._minGranularity=l}getGranularityForZoomLevel(s){return Math.max(Math.floor(this._baseZoomGranularity/(1<<s)),this._minGranularity,1)}}class Uc{constructor(s){this.fill=s.fill,this.line=s.line,this.tile=s.tile,this.stencil=s.stencil,this.circle=s.circle}}Uc.noSubdivision=new Uc({fill:new ch(0,0),line:new ch(0,0),tile:new ch(0,0),stencil:new ch(0,0),circle:1}),Pe("SubdivisionGranularityExpression",ch),Pe("SubdivisionGranularitySetting",Uc);const Lh=-32768,iA=32767;class ff{constructor(s,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=s,this._granularityCellSize=ke/s,this._canonical=l}_getKey(s,l){return(s+=32768)<<16|l+32768}_vertexToIndex(s,l){if(s<-32768||l<-32768||s>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const m=0|Math.round(s),_=0|Math.round(l),C=this._getKey(m,_);if(this._vertexDictionary.has(C))return this._vertexDictionary.get(C);const T=this._vertexBuffer.length/2;return this._vertexDictionary.set(C,T),this._vertexBuffer.push(m,_),T}_subdivideTrianglesScanline(s){if(this._granularity<2)return function(_,C){const T=[];for(let L=0;L<C.length;L+=3){const D=C[L],q=C[L+1],$=C[L+2],ie=_[2*D],he=_[2*D+1];(_[2*q]-ie)*(_[2*$+1]-he)-(_[2*q+1]-he)*(_[2*$]-ie)>0?(T.push(D),T.push($),T.push(q)):(T.push(D),T.push(q),T.push($))}return T}(this._vertexBuffer,s);const l=[],m=s.length;for(let _=0;_<m;_+=3){const C=[s[_+0],s[_+1],s[_+2]],T=[this._vertexBuffer[2*s[_+0]+0],this._vertexBuffer[2*s[_+0]+1],this._vertexBuffer[2*s[_+1]+0],this._vertexBuffer[2*s[_+1]+1],this._vertexBuffer[2*s[_+2]+0],this._vertexBuffer[2*s[_+2]+1]];let L=1/0,D=1/0,q=-1/0,$=-1/0;for(let Ie=0;Ie<3;Ie++){const qe=T[2*Ie],Xe=T[2*Ie+1];L=Math.min(L,qe),q=Math.max(q,qe),D=Math.min(D,Xe),$=Math.max($,Xe)}if(L===q||D===$)continue;const ie=Math.floor(L/this._granularityCellSize),he=Math.ceil(q/this._granularityCellSize),ve=Math.floor(D/this._granularityCellSize),we=Math.ceil($/this._granularityCellSize);if(ie!==he||ve!==we)for(let Ie=ve;Ie<we;Ie++){const qe=this._scanlineGenerateVertexRingForCellRow(Ie,T,C);z0(this._vertexBuffer,qe,l)}else l.push(...C)}return l}_scanlineGenerateVertexRingForCellRow(s,l,m){const _=s*this._granularityCellSize,C=_+this._granularityCellSize,T=[];for(let L=0;L<3;L++){const D=l[2*L],q=l[2*L+1],$=l[2*(L+1)%6],ie=l[(2*(L+1)+1)%6],he=l[2*(L+2)%6],ve=l[(2*(L+2)+1)%6],we=$-D,Ie=ie-q,qe=we===0,Xe=Ie===0,xt=(_-q)/Ie,rt=(C-q)/Ie,At=Math.min(xt,rt),kt=Math.max(xt,rt);if(!Xe&&(At>=1||kt<=0)||Xe&&(q<_||q>C)){ie>=_&&ie<=C&&T.push(m[(L+1)%3]);continue}!Xe&&At>0&&T.push(this._vertexToIndex(D+we*At,q+Ie*At));const Ot=D+we*Math.max(At,0),ni=D+we*Math.min(kt,1);qe||this._generateIntraEdgeVertices(T,D,q,$,ie,Ot,ni),!Xe&&kt<1&&T.push(this._vertexToIndex(D+we*kt,q+Ie*kt)),(Xe||ie>=_&&ie<=C)&&T.push(m[(L+1)%3]),!Xe&&(ie<=_||ie>=C)&&this._generateInterEdgeVertices(T,D,q,$,ie,he,ve,ni,_,C)}return T}_generateIntraEdgeVertices(s,l,m,_,C,T,L){const D=_-l,q=C-m,$=q===0,ie=$?Math.min(l,_):Math.min(T,L),he=$?Math.max(l,_):Math.max(T,L),ve=Math.floor(ie/this._granularityCellSize)+1,we=Math.ceil(he/this._granularityCellSize)-1;if($?l<_:T<L)for(let Ie=ve;Ie<=we;Ie++){const qe=Ie*this._granularityCellSize;s.push(this._vertexToIndex(qe,m+q*(qe-l)/D))}else for(let Ie=we;Ie>=ve;Ie--){const qe=Ie*this._granularityCellSize;s.push(this._vertexToIndex(qe,m+q*(qe-l)/D))}}_generateInterEdgeVertices(s,l,m,_,C,T,L,D,q,$){const ie=C-m,he=T-_,ve=L-C,we=(q-C)/ve,Ie=($-C)/ve,qe=Math.min(we,Ie),Xe=Math.max(we,Ie),xt=_+he*qe;let rt=Math.floor(Math.min(xt,D)/this._granularityCellSize)+1,At=Math.ceil(Math.max(xt,D)/this._granularityCellSize)-1,kt=D<xt;const Ot=ve===0;if(Ot&&(L===q||L===$))return;if(Ot||qe>=1||Xe<=0){const mi=m-L,pi=T+(l-T)*Math.min((q-L)/mi,($-L)/mi);rt=Math.floor(Math.min(pi,D)/this._granularityCellSize)+1,At=Math.ceil(Math.max(pi,D)/this._granularityCellSize)-1,kt=D<pi}const ni=ie>0?$:q;if(kt)for(let mi=rt;mi<=At;mi++)s.push(this._vertexToIndex(mi*this._granularityCellSize,ni));else for(let mi=At;mi>=rt;mi--)s.push(this._vertexToIndex(mi*this._granularityCellSize,ni))}_generateOutline(s){const l=[];for(const m of s){const _=su(m,this._granularity,!0),C=this._pointArrayToIndices(_),T=[];for(let L=1;L<C.length;L++)T.push(C[L-1]),T.push(C[L]);l.push(T)}return l}_handlePoles(s){let l=!1,m=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(m=!0)),(l||m)&&this._fillPoles(s,l,m)}_ensureNoPoleVertices(){const s=this._vertexBuffer;for(let l=0;l<s.length;l+=2){const m=s[l+1];m===Lh&&(s[l+1]=-32767),m===iA&&(s[l+1]=32766)}}_generatePoleQuad(s,l,m,_,C,T){_>C!=(T===Lh)?(s.push(l),s.push(m),s.push(this._vertexToIndex(_,T)),s.push(m),s.push(this._vertexToIndex(C,T)),s.push(this._vertexToIndex(_,T))):(s.push(m),s.push(l),s.push(this._vertexToIndex(_,T)),s.push(this._vertexToIndex(C,T)),s.push(m),s.push(this._vertexToIndex(_,T)))}_fillPoles(s,l,m){const _=this._vertexBuffer,C=ke,T=s.length;for(let L=2;L<T;L+=3){const D=s[L-2],q=s[L-1],$=s[L],ie=_[2*D],he=_[2*D+1],ve=_[2*q],we=_[2*q+1],Ie=_[2*$],qe=_[2*$+1];l&&(he===0&&we===0&&this._generatePoleQuad(s,D,q,ie,ve,Lh),we===0&&qe===0&&this._generatePoleQuad(s,q,$,ve,Ie,Lh),qe===0&&he===0&&this._generatePoleQuad(s,$,D,Ie,ie,Lh)),m&&(he===C&&we===C&&this._generatePoleQuad(s,D,q,ie,ve,iA),we===C&&qe===C&&this._generatePoleQuad(s,q,$,ve,Ie,iA),qe===C&&he===C&&this._generatePoleQuad(s,$,D,Ie,ie,iA))}}_initializeVertices(s){for(let l=0;l<s.length;l+=2)this._vertexToIndex(s[l],s[l+1])}subdividePolygonInternal(s,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:m,holeIndices:_}=function(L){const D=[],q=[];for(const $ of L)if($.length!==0){$!==L[0]&&D.push(q.length/2);for(let ie=0;ie<$.length;ie++)q.push($[ie].x),q.push($[ie].y)}return{flattened:q,holeIndices:D}}(s);let C;this._initializeVertices(m);try{const L=function(q,$,ie=2){const he=$&&$.length,ve=he?$[0]*ie:q.length;let we=Qm(q,0,ve,ie,!0);const Ie=[];if(!we||we.next===we.prev)return Ie;let qe,Xe,xt;if(he&&(we=function(rt,At,kt,Ot){const ni=[];for(let mi=0,pi=At.length;mi<pi;mi++){const gi=Qm(rt,At[mi]*Ot,mi<pi-1?At[mi+1]*Ot:rt.length,Ot,!1);gi===gi.next&&(gi.steiner=!0),ni.push(SA(gi))}ni.sort(O0);for(let mi=0;mi<ni.length;mi++)kt=Q0(ni[mi],kt);return kt}(q,$,we,ie)),q.length>80*ie){qe=q[0],Xe=q[1];let rt=qe,At=Xe;for(let kt=ie;kt<ve;kt+=ie){const Ot=q[kt],ni=q[kt+1];Ot<qe&&(qe=Ot),ni<Xe&&(Xe=ni),Ot>rt&&(rt=Ot),ni>At&&(At=ni)}xt=Math.max(rt-qe,At-Xe),xt=xt!==0?32767/xt:0}return Es(we,Ie,ie,qe,Xe,xt,0),Ie}(m,_),D=this._convertIndices(m,L);C=this._subdivideTrianglesScanline(D)}catch(L){console.error(L)}let T=[];return l&&(T=this._generateOutline(s)),this._ensureNoPoleVertices(),this._handlePoles(C),{verticesFlattened:this._vertexBuffer,indicesTriangles:C,indicesLineList:T}}_convertIndices(s,l){const m=[];for(let _=0;_<l.length;_++)m.push(this._vertexToIndex(s[2*l[_]],s[2*l[_]+1]));return m}_pointArrayToIndices(s){const l=[];for(let m=0;m<s.length;m++){const _=s[m];l.push(this._vertexToIndex(_.x,_.y))}return l}}function bd(h,s,l,m=!0){return new ff(l,s).subdividePolygonInternal(h,m)}function su(h,s,l=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const m=h[0],_=h[h.length-1],C=l&&(m.x!==_.x||m.y!==_.y);if(s<2)return C?[...h,h[0]]:[...h];const T=Math.floor(ke/s),L=[];L.push(new g(h[0].x,h[0].y));const D=h.length,q=C?D:D-1;for(let $=0;$<q;$++){const ie=h[$],he=$<D-1?h[$+1]:h[0],ve=ie.x,we=ie.y,Ie=he.x,qe=he.y,Xe=ve!==Ie,xt=we!==qe;if(!Xe&&!xt)continue;const rt=Ie-ve,At=qe-we,kt=Math.abs(rt),Ot=Math.abs(At);let ni=ve,mi=we;for(;;){const gi=rt>0?(Math.floor(ni/T)+1)*T:(Math.ceil(ni/T)-1)*T,Di=At>0?(Math.floor(mi/T)+1)*T:(Math.ceil(mi/T)-1)*T,vi=Math.abs(ni-gi),_i=Math.abs(mi-Di),Wt=Math.abs(ni-Ie),un=Math.abs(mi-qe),mn=Xe?vi/kt:Number.POSITIVE_INFINITY,qi=xt?_i/Ot:Number.POSITIVE_INFINITY;if((Wt<=vi||!Xe)&&(un<=_i||!xt))break;if(mn<qi&&Xe||!xt){ni=gi,mi+=At*mn;const Ri=new g(ni,Math.round(mi));L[L.length-1].x===Ri.x&&L[L.length-1].y===Ri.y||L.push(Ri)}else{ni+=rt*qi,mi=Di;const Ri=new g(Math.round(ni),mi);L[L.length-1].x===Ri.x&&L[L.length-1].y===Ri.y||L.push(Ri)}}const pi=new g(Ie,qe);L[L.length-1].x===pi.x&&L[L.length-1].y===pi.y||L.push(pi)}return L}function z0(h,s,l){if(s.length===0)throw new Error("Subdivision vertex ring is empty.");let m=0,_=h[2*s[0]];for(let D=1;D<s.length;D++){const q=h[2*s[D]];q<_&&(_=q,m=D)}const C=s.length;let T=m,L=(T+1)%C;for(;;){const D=T-1>=0?T-1:C-1,q=(L+1)%C,$=h[2*s[D]],ie=h[2*s[q]],he=h[2*s[T]],ve=h[2*s[T]+1],we=h[2*s[L]+1];let Ie=!1;if($<ie)Ie=!0;else if($>ie)Ie=!1;else{const qe=we-ve,Xe=-(h[2*s[L]]-he),xt=ve<we?1:-1;(($-he)*qe+(h[2*s[D]+1]-ve)*Xe)*xt>((ie-he)*qe+(h[2*s[q]+1]-ve)*Xe)*xt&&(Ie=!0)}if(Ie){const qe=s[D],Xe=s[T],xt=s[L];qe!==Xe&&qe!==xt&&Xe!==xt&&l.push(xt,Xe,qe),T--,T<0&&(T=C-1)}else{const qe=s[q],Xe=s[T],xt=s[L];qe!==Xe&&qe!==xt&&Xe!==xt&&l.push(xt,Xe,qe),L++,L>=C&&(L=0)}if(D===q)break}}function Vm(h,s,l,m,_,C,T,L,D){const q=_.length/2,$=T&&L&&D;if(q<Ln.MAX_VERTEX_ARRAY_LENGTH){const ie=s.prepareSegment(q,l,m),he=ie.vertexLength;for(let Ie=0;Ie<C.length;Ie+=3)m.emplaceBack(he+C[Ie],he+C[Ie+1],he+C[Ie+2]);let ve,we;ie.vertexLength+=q,ie.primitiveLength+=C.length/3,$&&(we=T.prepareSegment(q,l,L),ve=we.vertexLength,we.vertexLength+=q);for(let Ie=0;Ie<_.length;Ie+=2)h(_[Ie],_[Ie+1]);if($)for(let Ie=0;Ie<D.length;Ie++){const qe=D[Ie];for(let Xe=1;Xe<qe.length;Xe+=2)L.emplaceBack(ve+qe[Xe-1],ve+qe[Xe]);we.primitiveLength+=qe.length/2}}else(function(ie,he,ve,we,Ie,qe){const Xe=[];for(let Ot=0;Ot<we.length/2;Ot++)Xe.push(-1);const xt={count:0};let rt=0,At=ie.getOrCreateLatestSegment(he,ve),kt=At.vertexLength;for(let Ot=2;Ot<Ie.length;Ot+=3){const ni=Ie[Ot-2],mi=Ie[Ot-1],pi=Ie[Ot];let gi=Xe[ni]<rt,Di=Xe[mi]<rt,vi=Xe[pi]<rt;At.vertexLength+((gi?1:0)+(Di?1:0)+(vi?1:0))>Ln.MAX_VERTEX_ARRAY_LENGTH&&(At=ie.createNewSegment(he,ve),rt=xt.count,gi=!0,Di=!0,vi=!0,kt=0);const _i=TA(Xe,we,qe,xt,ni,gi,At),Wt=TA(Xe,we,qe,xt,mi,Di,At),un=TA(Xe,we,qe,xt,pi,vi,At);ve.emplaceBack(kt+_i-rt,kt+Wt-rt,kt+un-rt),At.primitiveLength++}})(s,l,m,_,C,h),$&&function(ie,he,ve,we,Ie,qe){const Xe=[];for(let Ot=0;Ot<we.length/2;Ot++)Xe.push(-1);const xt={count:0};let rt=0,At=ie.getOrCreateLatestSegment(he,ve),kt=At.vertexLength;for(let Ot=0;Ot<Ie.length;Ot++){const ni=Ie[Ot];for(let mi=1;mi<Ie[Ot].length;mi+=2){const pi=ni[mi-1],gi=ni[mi];let Di=Xe[pi]<rt,vi=Xe[gi]<rt;At.vertexLength+((Di?1:0)+(vi?1:0))>Ln.MAX_VERTEX_ARRAY_LENGTH&&(At=ie.createNewSegment(he,ve),rt=xt.count,Di=!0,vi=!0,kt=0);const _i=TA(Xe,we,qe,xt,pi,Di,At),Wt=TA(Xe,we,qe,xt,gi,vi,At);ve.emplaceBack(kt+_i-rt,kt+Wt-rt),At.primitiveLength++}}}(T,l,L,_,D,h),s.forceNewSegmentOnNextPrepare(),T?.forceNewSegmentOnNextPrepare()}function TA(h,s,l,m,_,C,T){if(C){const L=m.count;return l(s[2*_],s[2*_+1]),h[_]=m.count,m.count++,T.vertexLength++,L}return h[_]}class dp{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new mt,this.indexArray=new sr,this.indexArray2=new Ar,this.programConfigurations=new cl(s.layers,s.zoom),this.segments=new Ln,this.segments2=new Ln,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,m){this.hasDependencies=yd("fill",this.layers,l);const _=this.layers[0].layout.get("fill-sort-key"),C=!_.isConstant(),T=[];for(const{feature:L,id:D,index:q,sourceLayerIndex:$}of s){const ie=this.layers[0]._featureFilter.needGeometry,he=sh(L,ie);if(!this.layers[0]._featureFilter.filter(new en(this.zoom),he,m))continue;const ve=C?_.evaluate(he,{},m,l.availableImages):void 0,we={id:D,properties:L.properties,type:L.type,sourceLayerIndex:$,index:q,geometry:ie?he.geometry:Ju(L),patterns:{},sortKey:ve};T.push(we)}C&&T.sort((L,D)=>L.sortKey-D.sortKey);for(const L of T){const{geometry:D,index:q,sourceLayerIndex:$}=L;if(this.hasDependencies){const ie=vd("fill",this.layers,L,{zoom:this.zoom},l);this.patternFeatures.push(ie)}else this.addFeature(L,D,q,m,{},l.subdivisionGranularity);l.featureIndex.insert(s[q].feature,D,q,$,this.index)}}update(s,l,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,{imagePositions:m})}addFeatures(s,l,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,l,m,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Om),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,l,m,_,C,T){for(const L of fa(l,500)){const D=bd(L,_,T.fill.getGranularityForZoomLevel(_.z)),q=this.layoutVertexArray;Vm(($,ie)=>{q.emplaceBack($,ie)},this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles,this.segments2,this.indexArray2,D.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:C,canonical:_})}}let pf,qm;Pe("FillBucket",dp,{omit:["layers","patternFeatures"]});var j1={get paint(){return qm=qm||new Rr({"fill-antialias":new xi(yt.paint_fill["fill-antialias"]),"fill-opacity":new Li(yt.paint_fill["fill-opacity"]),"fill-color":new Li(yt.paint_fill["fill-color"]),"fill-outline-color":new Li(yt.paint_fill["fill-outline-color"]),"fill-translate":new xi(yt.paint_fill["fill-translate"]),"fill-translate-anchor":new xi(yt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ga(yt.paint_fill["fill-pattern"])})},get layout(){return pf=pf||new Rr({"fill-sort-key":new Li(yt.layout_fill["fill-sort-key"])})}};class U1 extends ya{constructor(s,l){super(s,j1,l)}recalculate(s,l){super.recalculate(s,l);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new dp(s)}queryRadius(){return cf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:s,geometry:l,transform:m,pixelsToTileUnits:_}){return za(uf(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-m.bearingInRadians,_),l)}isTileClipped(){return!0}}const zr=Fr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),gs=Fr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:nr}=zr;class Wn{constructor(s,l,m,_,C){this.properties={},this.extent=m,this.type=0,this.id=void 0,this._pbf=s,this._geometry=-1,this._keys=_,this._values=C,s.readFields(Hr,this,l)}loadGeometry(){const s=this._pbf;s.pos=this._geometry;const l=s.readVarint()+s.pos,m=[];let _,C=1,T=0,L=0,D=0;for(;s.pos<l;){if(T<=0){const q=s.readVarint();C=7&q,T=q>>3}if(T--,C===1||C===2)L+=s.readSVarint(),D+=s.readSVarint(),C===1&&(_&&m.push(_),_=[]),_&&_.push(new g(L,D));else{if(C!==7)throw new Error(`unknown command ${C}`);_&&_.push(_[0].clone())}}return _&&m.push(_),m}bbox(){const s=this._pbf;s.pos=this._geometry;const l=s.readVarint()+s.pos;let m=1,_=0,C=0,T=0,L=1/0,D=-1/0,q=1/0,$=-1/0;for(;s.pos<l;){if(_<=0){const ie=s.readVarint();m=7&ie,_=ie>>3}if(_--,m===1||m===2)C+=s.readSVarint(),T+=s.readSVarint(),C<L&&(L=C),C>D&&(D=C),T<q&&(q=T),T>$&&($=T);else if(m!==7)throw new Error(`unknown command ${m}`)}return[L,q,D,$]}toGeoJSON(s,l,m){const _=this.extent*Math.pow(2,m),C=this.extent*s,T=this.extent*l,L=this.loadGeometry();function D(he){return[360*(he.x+C)/_-180,360/Math.PI*Math.atan(Math.exp((1-2*(he.y+T)/_)*Math.PI))-90]}function q(he){return he.map(D)}let $;if(this.type===1){const he=[];for(const we of L)he.push(we[0]);const ve=q(he);$=he.length===1?{type:"Point",coordinates:ve[0]}:{type:"MultiPoint",coordinates:ve}}else if(this.type===2){const he=L.map(q);$=he.length===1?{type:"LineString",coordinates:he[0]}:{type:"MultiLineString",coordinates:he}}else{if(this.type!==3)throw new Error("unknown feature type");{const he=function(we){const Ie=we.length;if(Ie<=1)return[we];const qe=[];let Xe,xt;for(let rt=0;rt<Ie;rt++){const At=Dc(we[rt]);At!==0&&(xt===void 0&&(xt=At<0),xt===At<0?(Xe&&qe.push(Xe),Xe=[we[rt]]):Xe&&Xe.push(we[rt]))}return Xe&&qe.push(Xe),qe}(L),ve=[];for(const we of he)ve.push(we.map(q));$=ve.length===1?{type:"Polygon",coordinates:ve[0]}:{type:"MultiPolygon",coordinates:ve}}}const ie={type:"Feature",geometry:$,properties:this.properties};return this.id!=null&&(ie.id=this.id),ie}}function Hr(h,s,l){h===1?s.id=l.readVarint():h===2?function(m,_){const C=m.readVarint()+m.pos;for(;m.pos<C;){const T=_._keys[m.readVarint()],L=_._values[m.readVarint()];_.properties[T]=L}}(l,s):h===3?s.type=l.readVarint():h===4&&(s._geometry=l.pos)}function Dc(h){let s=0;for(let l,m,_=0,C=h.length,T=C-1;_<C;T=_++)l=h[_],m=h[T],s+=(m.x-l.x)*(l.y+m.y);return s}Wn.types=["Unknown","Point","LineString","Polygon"];class FA{constructor(s,l){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(wd,this,l),this.length=this._features.length}feature(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];const l=this._pbf.readVarint()+this._pbf.pos;return new Wn(this._pbf,l,this.extent,this._keys,this._values)}}function wd(h,s,l){h===15?s.version=l.readVarint():h===1?s.name=l.readString():h===5?s.extent=l.readVarint():h===2?s._features.push(l.pos):h===3?s._keys.push(l.readString()):h===4&&s._values.push(function(m){let _=null;const C=m.readVarint()+m.pos;for(;m.pos<C;){const T=m.readVarint()>>3;_=T===1?m.readString():T===2?m.readFloat():T===3?m.readDouble():T===4?m.readVarint64():T===5?m.readVarint():T===6?m.readSVarint():T===7?m.readBoolean():null}if(_==null)throw new Error("unknown feature value");return _}(l))}class fp{constructor(s,l){this.layers=s.readFields(NA,{},l)}}function NA(h,s,l){if(h===3){const m=new FA(l,l.readVarint()+l.pos);m.length&&(s[m.name]=m)}}const zs=Math.pow(2,13);function au(h,s,l,m,_,C,T,L){h.emplaceBack(s,l,2*Math.floor(m*zs)+T,_*zs*2,C*zs*2,Math.round(L))}class MA{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasDependencies=!1,this.layoutVertexArray=new Dt,this.centroidVertexArray=new ht,this.indexArray=new sr,this.programConfigurations=new cl(s.layers,s.zoom),this.segments=new Ln,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,m){this.features=[],this.hasDependencies=yd("fill-extrusion",this.layers,l);for(const{feature:_,id:C,index:T,sourceLayerIndex:L}of s){const D=this.layers[0]._featureFilter.needGeometry,q=sh(_,D);if(!this.layers[0]._featureFilter.filter(new en(this.zoom),q,m))continue;const $={id:C,sourceLayerIndex:L,index:T,geometry:D?q.geometry:Ju(_),properties:_.properties,type:_.type,patterns:{}};this.hasDependencies?this.features.push(vd("fill-extrusion",this.layers,$,{zoom:this.zoom},l)):this.addFeature($,$.geometry,T,m,{},l.subdivisionGranularity),l.featureIndex.insert(_,$.geometry,T,L,this.index,!0)}}addFeatures(s,l,m){for(const _ of this.features){const{geometry:C}=_;this.addFeature(_,C,_.index,l,m,s.subdivisionGranularity)}}update(s,l,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,{imagePositions:m})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,nr),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,gs.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,l,m,_,C,T){for(const L of fa(l,500)){const D={x:0,y:0,sampleCount:0},q=this.layoutVertexArray.length;this.processPolygon(D,_,s,L,T);const $=this.layoutVertexArray.length-q,ie=Math.floor(D.x/D.sampleCount),he=Math.floor(D.y/D.sampleCount);for(let ve=0;ve<$;ve++)this.centroidVertexArray.emplaceBack(ie,he)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:C,canonical:_})}processPolygon(s,l,m,_,C){if(_.length<1||Ph(_[0]))return;for(const ie of _)ie.length!==0&&Gm(s,ie);const T={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},L=C.fill.getGranularityForZoomLevel(l.z),D=Wn.types[m.type]==="Polygon";for(const ie of _){if(ie.length===0||Ph(ie))continue;const he=su(ie,L,D);this._generateSideFaces(he,T)}if(!D)return;const q=bd(_,l,L,!1),$=this.layoutVertexArray;Vm((ie,he)=>{au($,ie,he,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,q.verticesFlattened,q.indicesTriangles)}_generateSideFaces(s,l){let m=0;for(let _=1;_<s.length;_++){const C=s[_],T=s[_-1];if(ou(C,T))continue;l.segment.vertexLength+4>Ln.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const L=C.sub(T)._perp()._unit(),D=T.dist(C);m+D>32768&&(m=0),au(this.layoutVertexArray,C.x,C.y,L.x,L.y,0,0,m),au(this.layoutVertexArray,C.x,C.y,L.x,L.y,0,1,m),m+=D,au(this.layoutVertexArray,T.x,T.y,L.x,L.y,0,0,m),au(this.layoutVertexArray,T.x,T.y,L.x,L.y,0,1,m);const q=l.segment.vertexLength;this.indexArray.emplaceBack(q,q+2,q+1),this.indexArray.emplaceBack(q+1,q+2,q+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function Gm(h,s){for(let l=0;l<s.length;l++){const m=s[l];l===s.length-1&&s[0].x===m.x&&s[0].y===m.y||(h.x+=m.x,h.y+=m.y,h.sampleCount++)}}function ou(h,s){return h.x===s.x&&(h.x<0||h.x>ke)||h.y===s.y&&(h.y<0||h.y>ke)}function Ph(h){return h.every(s=>s.x<0)||h.every(s=>s.x>ke)||h.every(s=>s.y<0)||h.every(s=>s.y>ke)}let Bd;Pe("FillExtrusionBucket",MA,{omit:["layers","features"]});var rc={get paint(){return Bd=Bd||new Rr({"fill-extrusion-opacity":new xi(yt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Li(yt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new xi(yt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new xi(yt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ga(yt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Li(yt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Li(yt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new xi(yt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Km extends ya{constructor(s,l){super(s,rc,l)}createBucket(s){return new MA(s)}queryRadius(){return cf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:s,feature:l,featureState:m,geometry:_,transform:C,pixelsToTileUnits:T,pixelPosMatrix:L}){const D=uf(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-C.bearingInRadians,T),q=this.paint.get("fill-extrusion-height").evaluate(l,m),$=this.paint.get("fill-extrusion-base").evaluate(l,m),ie=function(ve,we){const Ie=[];for(const qe of ve){const Xe=[qe.x,qe.y,0,1];Ee(Xe,Xe,we),Ie.push(new g(Xe[0]/Xe[3],Xe[1]/Xe[3]))}return Ie}(D,L),he=function(ve,we,Ie,qe){const Xe=[],xt=[],rt=qe[8]*we,At=qe[9]*we,kt=qe[10]*we,Ot=qe[11]*we,ni=qe[8]*Ie,mi=qe[9]*Ie,pi=qe[10]*Ie,gi=qe[11]*Ie;for(const Di of ve){const vi=[],_i=[];for(const Wt of Di){const un=Wt.x,mn=Wt.y,qi=qe[0]*un+qe[4]*mn+qe[12],Ri=qe[1]*un+qe[5]*mn+qe[13],zn=qe[2]*un+qe[6]*mn+qe[14],ts=qe[3]*un+qe[7]*mn+qe[15],Hs=zn+kt,Va=ts+Ot,jo=qi+ni,Uo=Ri+mi,aa=zn+pi,cs=ts+gi,Ia=new g((qi+rt)/Va,(Ri+At)/Va);Ia.z=Hs/Va,vi.push(Ia);const oa=new g(jo/cs,Uo/cs);oa.z=aa/cs,_i.push(oa)}Xe.push(vi),xt.push(_i)}return[Xe,xt]}(_,$,q,L);return function(ve,we,Ie){let qe=1/0;za(Ie,we)&&(qe=mf(Ie,we[0]));for(let Xe=0;Xe<we.length;Xe++){const xt=we[Xe],rt=ve[Xe];for(let At=0;At<xt.length-1;At++){const kt=xt[At],Ot=[kt,xt[At+1],rt[At+1],rt[At],kt];L0(Ie,Ot)&&(qe=Math.min(qe,mf(Ie,Ot)))}}return qe!==1/0&&qe}(he[0],he[1],ie)}}function kh(h,s){return h.x*s.x+h.y*s.y}function mf(h,s){if(h.length===1){let l=0;const m=s[l++];let _;for(;!_||m.equals(_);)if(_=s[l++],!_)return 1/0;for(;l<s.length;l++){const C=s[l],T=h[0],L=_.sub(m),D=C.sub(m),q=T.sub(m),$=kh(L,L),ie=kh(L,D),he=kh(D,D),ve=kh(q,L),we=kh(q,D),Ie=$*he-ie*ie,qe=(he*ve-ie*we)/Ie,Xe=($*we-ie*ve)/Ie,xt=m.z*(1-qe-Xe)+_.z*qe+C.z*Xe;if(isFinite(xt))return xt}return 1/0}{let l=1/0;for(const m of s)l=Math.min(l,m.z);return l}}const pp=Fr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:uh}=pp,ko=Fr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ah}=ko,Cd=Math.cos(Math.PI/180*37.5),jh=Math.pow(2,14)/.5;class gf{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Nt,this.layoutVertexArray2=new Lt,this.indexArray=new sr,this.programConfigurations=new cl(s.layers,s.zoom),this.segments=new Ln,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,m){this.hasDependencies=yd("line",this.layers,l)||this.hasLineDasharray(this.layers);const _=this.layers[0].layout.get("line-sort-key"),C=!_.isConstant(),T=[];for(const{feature:L,id:D,index:q,sourceLayerIndex:$}of s){const ie=this.layers[0]._featureFilter.needGeometry,he=sh(L,ie);if(!this.layers[0]._featureFilter.filter(new en(this.zoom),he,m))continue;const ve=C?_.evaluate(he,{},m):void 0,we={id:D,properties:L.properties,type:L.type,sourceLayerIndex:$,index:q,geometry:ie?he.geometry:Ju(L),patterns:{},dashes:{},sortKey:ve};T.push(we)}C&&T.sort((L,D)=>L.sortKey-D.sortKey);for(const L of T){const{geometry:D,index:q,sourceLayerIndex:$}=L;this.hasDependencies?(yd("line",this.layers,l)?vd("line",this.layers,L,{zoom:this.zoom},l):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,L,this.zoom,l),this.patternFeatures.push(L)):this.addFeature(L,D,q,m,{},{},l.subdivisionGranularity),l.featureIndex.insert(s[q].feature,D,q,$,this.index)}}update(s,l,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,{imagePositions:m,dashPositions:_})}addFeatures(s,l,m,_){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,l,m,_,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,Ah)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,uh),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,l,m,_,C,T,L){const D=this.layers[0].layout,q=D.get("line-join").evaluate(s,{}),$=D.get("line-cap"),ie=D.get("line-miter-limit"),he=D.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const ve of l)this.addLine(ve,s,q,$,ie,he,_,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:C,dashPositions:T,canonical:_})}addLine(s,l,m,_,C,T,L,D){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s=su(s,L?D.line.getGranularityForZoomLevel(L.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let rt=0;rt<s.length-1;rt++)this.totalDistance+=s[rt].dist(s[rt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const q=Wn.types[l.type]==="Polygon";let $=s.length;for(;$>=2&&s[$-1].equals(s[$-2]);)$--;let ie=0;for(;ie<$-1&&s[ie].equals(s[ie+1]);)ie++;if($<(q?3:2))return;m==="bevel"&&(C=1.05);const he=this.overscaling<=16?122880/(512*this.overscaling):0,ve=this.segments.prepareSegment(10*$,this.layoutVertexArray,this.indexArray);let we,Ie,qe,Xe,xt;this.e1=this.e2=-1,q&&(we=s[$-2],xt=s[ie].sub(we)._unit()._perp());for(let rt=ie;rt<$;rt++){if(qe=rt===$-1?q?s[ie+1]:void 0:s[rt+1],qe&&s[rt].equals(qe))continue;xt&&(Xe=xt),we&&(Ie=we),we=s[rt],xt=qe?qe.sub(we)._unit()._perp():Xe,Xe=Xe||xt;let At=Xe.add(xt);At.x===0&&At.y===0||At._unit();const kt=Xe.x*xt.x+Xe.y*xt.y,Ot=At.x*xt.x+At.y*xt.y,ni=Ot!==0?1/Ot:1/0,mi=2*Math.sqrt(2-2*Ot),pi=Ot<Cd&&Ie&&qe,gi=Xe.x*xt.y-Xe.y*xt.x>0;if(pi&&rt>ie){const _i=we.dist(Ie);if(_i>2*he){const Wt=we.sub(we.sub(Ie)._mult(he/_i)._round());this.updateDistance(Ie,Wt),this.addCurrentVertex(Wt,Xe,0,0,ve),Ie=Wt}}const Di=Ie&&qe;let vi=Di?m:q?"butt":_;if(Di&&vi==="round"&&(ni<T?vi="miter":ni<=2&&(vi="fakeround")),vi==="miter"&&ni>C&&(vi="bevel"),vi==="bevel"&&(ni>2&&(vi="flipbevel"),ni<C&&(vi="miter")),Ie&&this.updateDistance(Ie,we),vi==="miter")At._mult(ni),this.addCurrentVertex(we,At,0,0,ve);else if(vi==="flipbevel"){if(ni>100)At=xt.mult(-1);else{const _i=ni*Xe.add(xt).mag()/Xe.sub(xt).mag();At._perp()._mult(_i*(gi?-1:1))}this.addCurrentVertex(we,At,0,0,ve),this.addCurrentVertex(we,At.mult(-1),0,0,ve)}else if(vi==="bevel"||vi==="fakeround"){const _i=-Math.sqrt(ni*ni-1),Wt=gi?_i:0,un=gi?0:_i;if(Ie&&this.addCurrentVertex(we,Xe,Wt,un,ve),vi==="fakeround"){const mn=Math.round(180*mi/Math.PI/20);for(let qi=1;qi<mn;qi++){let Ri=qi/mn;if(Ri!==.5){const ts=Ri-.5;Ri+=Ri*ts*(Ri-1)*((1.0904+kt*(kt*(3.55645-1.43519*kt)-3.2452))*ts*ts+(.848013+kt*(.215638*kt-1.06021)))}const zn=xt.sub(Xe)._mult(Ri)._add(Xe)._unit()._mult(gi?-1:1);this.addHalfVertex(we,zn.x,zn.y,!1,gi,0,ve)}}qe&&this.addCurrentVertex(we,xt,-Wt,-un,ve)}else if(vi==="butt")this.addCurrentVertex(we,At,0,0,ve);else if(vi==="square"){const _i=Ie?1:-1;this.addCurrentVertex(we,At,_i,_i,ve)}else vi==="round"&&(Ie&&(this.addCurrentVertex(we,Xe,0,0,ve),this.addCurrentVertex(we,Xe,1,1,ve,!0)),qe&&(this.addCurrentVertex(we,xt,-1,-1,ve,!0),this.addCurrentVertex(we,xt,0,0,ve)));if(pi&&rt<$-1){const _i=we.dist(qe);if(_i>2*he){const Wt=we.add(qe.sub(we)._mult(he/_i)._round());this.updateDistance(we,Wt),this.addCurrentVertex(Wt,xt,0,0,ve),we=Wt}}}}addCurrentVertex(s,l,m,_,C,T=!1){const L=l.y*_-l.x,D=-l.y-l.x*_;this.addHalfVertex(s,l.x+l.y*m,l.y-l.x*m,T,!1,m,C),this.addHalfVertex(s,L,D,T,!0,-_,C),this.distance>jh/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,l,m,_,C,T))}addHalfVertex({x:s,y:l},m,_,C,T,L,D){const q=.5*(this.lineClips?this.scaledDistance*(jh-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(C?1:0),(l<<1)+(T?1:0),Math.round(63*m)+128,Math.round(63*_)+128,1+(L===0?0:L<0?-1:1)|(63&q)<<2,q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const $=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,$,this.e2),D.primitiveLength++),T?this.e2=$:this.e1=$}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,l){this.distance+=s.dist(l),this.updateScaledDistance()}hasLineDasharray(s){for(const l of s){const m=l.paint.get("line-dasharray");if(m&&!m.isConstant())return!0}return!1}addLineDashDependencies(s,l,m,_){for(const C of s){const T=C.paint.get("line-dasharray");if(!T||T.value.kind==="constant")continue;const L=C.layout.get("line-cap")==="round",D={dasharray:T.value.evaluate({zoom:m-1},l,{}),round:L},q={dasharray:T.value.evaluate({zoom:m},l,{}),round:L},$={dasharray:T.value.evaluate({zoom:m+1},l,{}),round:L},ie=`${D.dasharray.join(",")},${D.round}`,he=`${q.dasharray.join(",")},${q.round}`,ve=`${$.dasharray.join(",")},${$.round}`;_.dashDependencies[ie]=D,_.dashDependencies[he]=q,_.dashDependencies[ve]=$,l.dashes[C.id]={min:ie,mid:he,max:ve}}}}let mp,Wm;Pe("LineBucket",gf,{omit:["layers","patternFeatures"]});var Sd={get paint(){return Wm=Wm||new Rr({"line-opacity":new Li(yt.paint_line["line-opacity"]),"line-color":new Li(yt.paint_line["line-color"]),"line-translate":new xi(yt.paint_line["line-translate"]),"line-translate-anchor":new xi(yt.paint_line["line-translate-anchor"]),"line-width":new Li(yt.paint_line["line-width"]),"line-gap-width":new Li(yt.paint_line["line-gap-width"]),"line-offset":new Li(yt.paint_line["line-offset"]),"line-blur":new Li(yt.paint_line["line-blur"]),"line-dasharray":new ga(yt.paint_line["line-dasharray"]),"line-pattern":new ga(yt.paint_line["line-pattern"]),"line-gradient":new os(yt.paint_line["line-gradient"])})},get layout(){return mp=mp||new Rr({"line-cap":new xi(yt.layout_line["line-cap"]),"line-join":new Li(yt.layout_line["line-join"]),"line-miter-limit":new xi(yt.layout_line["line-miter-limit"]),"line-round-limit":new xi(yt.layout_line["line-round-limit"]),"line-sort-key":new Li(yt.layout_line["line-sort-key"])})}};class $m extends Li{possiblyEvaluate(s,l){return l=new en(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(s,l)}evaluate(s,l,m,_){return l=gt({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(s,l,m,_)}}let hl;class H0 extends ya{constructor(s,l){super(s,Sd,l),this.gradientVersion=0,hl||(hl=new $m(Sd.paint.properties["line-width"].specification),hl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof bo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,l){super.recalculate(s,l),this.paint._values["line-floorwidth"]=hl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new gf(s)}queryRadius(s){const l=s,m=sc(Mh("line-width",this,l),Mh("line-gap-width",this,l)),_=Mh("line-offset",this,l);return m/2+Math.abs(_)+cf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:s,feature:l,featureState:m,geometry:_,transform:C,pixelsToTileUnits:T}){const L=uf(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-C.bearingInRadians,T),D=T/2*sc(this.paint.get("line-width").evaluate(l,m),this.paint.get("line-gap-width").evaluate(l,m)),q=this.paint.get("line-offset").evaluate(l,m);return q&&(_=function($,ie){const he=[];for(let ve=0;ve<$.length;ve++){const we=$[ve],Ie=[];for(let qe=0;qe<we.length;qe++){const Xe=we[qe-1],xt=we[qe],rt=we[qe+1],At=qe===0?new g(0,0):xt.sub(Xe)._unit()._perp(),kt=qe===we.length-1?new g(0,0):rt.sub(xt)._unit()._perp(),Ot=At._add(kt)._unit(),ni=Ot.x*kt.x+Ot.y*kt.y;ni!==0&&Ot._mult(1/ni),Ie.push(Ot._mult(ie)._add(xt))}he.push(Ie)}return he}(_,q*T)),function($,ie,he){for(let ve=0;ve<ie.length;ve++){const we=ie[ve];if($.length>=3){for(let Ie=0;Ie<we.length;Ie++)if(CA($,we[Ie]))return!0}if(Po($,we,he))return!0}return!1}(L,_,D)}isTileClipped(){return!0}}function sc(h,s){return s>0?s+2*h:h}const V0=Fr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),q0=Fr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Fr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const D1=Fr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Fr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const IA=Fr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),gp=Fr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Zm(h,s,l){return h.sections.forEach(m=>{m.text=function(_,C,T){const L=C.layout.get("text-transform").evaluate(T,{});return L==="uppercase"?_=_.toLocaleUpperCase():L==="lowercase"&&(_=_.toLocaleLowerCase()),Kn.applyArabicShaping&&(_=Kn.applyArabicShaping(_)),_}(m.text,s,l)}),h}Fr([{name:"triangle",components:3,type:"Uint16"}]),Fr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Fr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Fr([{type:"Float32",name:"offsetX"}]),Fr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Fr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const nA={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var _a=24;const yp=4294967296,Xm=1/yp,vp=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class yf{constructor(s=new Uint8Array(16)){this.buf=ArrayBuffer.isView(s)?s:new Uint8Array(s),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(s,l,m=this.length){for(;this.pos<m;){const _=this.readVarint(),C=_>>3,T=this.pos;this.type=7&_,s(C,l,this),this.pos===T&&this.skip(_)}return l}readMessage(s,l){return this.readFields(s,l,this.readVarint()+this.pos)}readFixed32(){const s=this.dataView.getUint32(this.pos,!0);return this.pos+=4,s}readSFixed32(){const s=this.dataView.getInt32(this.pos,!0);return this.pos+=4,s}readFixed64(){const s=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*yp;return this.pos+=8,s}readSFixed64(){const s=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*yp;return this.pos+=8,s}readFloat(){const s=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,s}readDouble(){const s=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,s}readVarint(s){const l=this.buf;let m,_;return _=l[this.pos++],m=127&_,_<128?m:(_=l[this.pos++],m|=(127&_)<<7,_<128?m:(_=l[this.pos++],m|=(127&_)<<14,_<128?m:(_=l[this.pos++],m|=(127&_)<<21,_<128?m:(_=l[this.pos],m|=(15&_)<<28,function(C,T,L){const D=L.buf;let q,$;if($=D[L.pos++],q=(112&$)>>4,$<128||($=D[L.pos++],q|=(127&$)<<3,$<128)||($=D[L.pos++],q|=(127&$)<<10,$<128)||($=D[L.pos++],q|=(127&$)<<17,$<128)||($=D[L.pos++],q|=(127&$)<<24,$<128)||($=D[L.pos++],q|=(1&$)<<31,$<128))return Ed(C,q,T);throw new Error("Expected varint not more than 10 bytes")}(m,s,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const s=this.readVarint();return s%2==1?(s+1)/-2:s/2}readBoolean(){return!!this.readVarint()}readString(){const s=this.readVarint()+this.pos,l=this.pos;return this.pos=s,s-l>=12&&vp?vp.decode(this.buf.subarray(l,s)):function(m,_,C){let T="",L=_;for(;L<C;){const D=m[L];let q,$,ie,he=null,ve=D>239?4:D>223?3:D>191?2:1;if(L+ve>C)break;ve===1?D<128&&(he=D):ve===2?(q=m[L+1],(192&q)==128&&(he=(31&D)<<6|63&q,he<=127&&(he=null))):ve===3?(q=m[L+1],$=m[L+2],(192&q)==128&&(192&$)==128&&(he=(15&D)<<12|(63&q)<<6|63&$,(he<=2047||he>=55296&&he<=57343)&&(he=null))):ve===4&&(q=m[L+1],$=m[L+2],ie=m[L+3],(192&q)==128&&(192&$)==128&&(192&ie)==128&&(he=(15&D)<<18|(63&q)<<12|(63&$)<<6|63&ie,(he<=65535||he>=1114112)&&(he=null))),he===null?(he=65533,ve=1):he>65535&&(he-=65536,T+=String.fromCharCode(he>>>10&1023|55296),he=56320|1023&he),T+=String.fromCharCode(he),L+=ve}return T}(this.buf,l,s)}readBytes(){const s=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,s);return this.pos=s,l}readPackedVarint(s=[],l){const m=this.readPackedEnd();for(;this.pos<m;)s.push(this.readVarint(l));return s}readPackedSVarint(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readSVarint());return s}readPackedBoolean(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readBoolean());return s}readPackedFloat(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readFloat());return s}readPackedDouble(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readDouble());return s}readPackedFixed32(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readFixed32());return s}readPackedSFixed32(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readSFixed32());return s}readPackedFixed64(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readFixed64());return s}readPackedSFixed64(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readSFixed64());return s}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(s){const l=7&s;if(l===0)for(;this.buf[this.pos++]>127;);else if(l===2)this.pos=this.readVarint()+this.pos;else if(l===5)this.pos+=4;else{if(l!==1)throw new Error(`Unimplemented type: ${l}`);this.pos+=8}}writeTag(s,l){this.writeVarint(s<<3|l)}realloc(s){let l=this.length||16;for(;l<this.pos+s;)l*=2;if(l!==this.length){const m=new Uint8Array(l);m.set(this.buf),this.buf=m,this.dataView=new DataView(m.buffer),this.length=l}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(s){this.realloc(4),this.dataView.setInt32(this.pos,s,!0),this.pos+=4}writeSFixed32(s){this.realloc(4),this.dataView.setInt32(this.pos,s,!0),this.pos+=4}writeFixed64(s){this.realloc(8),this.dataView.setInt32(this.pos,-1&s,!0),this.dataView.setInt32(this.pos+4,Math.floor(s*Xm),!0),this.pos+=8}writeSFixed64(s){this.realloc(8),this.dataView.setInt32(this.pos,-1&s,!0),this.dataView.setInt32(this.pos+4,Math.floor(s*Xm),!0),this.pos+=8}writeVarint(s){(s=+s||0)>268435455||s<0?function(l,m){let _,C;if(l>=0?(_=l%4294967296|0,C=l/4294967296|0):(_=~(-l%4294967296),C=~(-l/4294967296),4294967295^_?_=_+1|0:(_=0,C=C+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),function(T,L,D){D.buf[D.pos++]=127&T|128,T>>>=7,D.buf[D.pos++]=127&T|128,T>>>=7,D.buf[D.pos++]=127&T|128,T>>>=7,D.buf[D.pos++]=127&T|128,D.buf[D.pos]=127&(T>>>=7)}(_,0,m),function(T,L){const D=(7&T)<<4;L.buf[L.pos++]|=D|((T>>>=3)?128:0),T&&(L.buf[L.pos++]=127&T|((T>>>=7)?128:0),T&&(L.buf[L.pos++]=127&T|((T>>>=7)?128:0),T&&(L.buf[L.pos++]=127&T|((T>>>=7)?128:0),T&&(L.buf[L.pos++]=127&T|((T>>>=7)?128:0),T&&(L.buf[L.pos++]=127&T)))))}(C,m)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))}writeSVarint(s){this.writeVarint(s<0?2*-s-1:2*s)}writeBoolean(s){this.writeVarint(+s)}writeString(s){s=String(s),this.realloc(4*s.length),this.pos++;const l=this.pos;this.pos=function(_,C,T){for(let L,D,q=0;q<C.length;q++){if(L=C.charCodeAt(q),L>55295&&L<57344){if(!D){L>56319||q+1===C.length?(_[T++]=239,_[T++]=191,_[T++]=189):D=L;continue}if(L<56320){_[T++]=239,_[T++]=191,_[T++]=189,D=L;continue}L=D-55296<<10|L-56320|65536,D=null}else D&&(_[T++]=239,_[T++]=191,_[T++]=189,D=null);L<128?_[T++]=L:(L<2048?_[T++]=L>>6|192:(L<65536?_[T++]=L>>12|224:(_[T++]=L>>18|240,_[T++]=L>>12&63|128),_[T++]=L>>6&63|128),_[T++]=63&L|128)}return T}(this.buf,s,this.pos);const m=this.pos-l;m>=128&&G0(l,m,this),this.pos=l-1,this.writeVarint(m),this.pos+=m}writeFloat(s){this.realloc(4),this.dataView.setFloat32(this.pos,s,!0),this.pos+=4}writeDouble(s){this.realloc(8),this.dataView.setFloat64(this.pos,s,!0),this.pos+=8}writeBytes(s){const l=s.length;this.writeVarint(l),this.realloc(l);for(let m=0;m<l;m++)this.buf[this.pos++]=s[m]}writeRawMessage(s,l){this.pos++;const m=this.pos;s(l,this);const _=this.pos-m;_>=128&&G0(m,_,this),this.pos=m-1,this.writeVarint(_),this.pos+=_}writeMessage(s,l,m){this.writeTag(s,2),this.writeRawMessage(l,m)}writePackedVarint(s,l){l.length&&this.writeMessage(s,R1,l)}writePackedSVarint(s,l){l.length&&this.writeMessage(s,K0,l)}writePackedBoolean(s,l){l.length&&this.writeMessage(s,_p,l)}writePackedFloat(s,l){l.length&&this.writeMessage(s,W0,l)}writePackedDouble(s,l){l.length&&this.writeMessage(s,Td,l)}writePackedFixed32(s,l){l.length&&this.writeMessage(s,$0,l)}writePackedSFixed32(s,l){l.length&&this.writeMessage(s,Z0,l)}writePackedFixed64(s,l){l.length&&this.writeMessage(s,X0,l)}writePackedSFixed64(s,l){l.length&&this.writeMessage(s,Y0,l)}writeBytesField(s,l){this.writeTag(s,2),this.writeBytes(l)}writeFixed32Field(s,l){this.writeTag(s,5),this.writeFixed32(l)}writeSFixed32Field(s,l){this.writeTag(s,5),this.writeSFixed32(l)}writeFixed64Field(s,l){this.writeTag(s,1),this.writeFixed64(l)}writeSFixed64Field(s,l){this.writeTag(s,1),this.writeSFixed64(l)}writeVarintField(s,l){this.writeTag(s,0),this.writeVarint(l)}writeSVarintField(s,l){this.writeTag(s,0),this.writeSVarint(l)}writeStringField(s,l){this.writeTag(s,2),this.writeString(l)}writeFloatField(s,l){this.writeTag(s,5),this.writeFloat(l)}writeDoubleField(s,l){this.writeTag(s,1),this.writeDouble(l)}writeBooleanField(s,l){this.writeVarintField(s,+l)}}function Ed(h,s,l){return l?4294967296*s+(h>>>0):4294967296*(s>>>0)+(h>>>0)}function G0(h,s,l){const m=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));l.realloc(m);for(let _=l.pos-1;_>=h;_--)l.buf[_+m]=l.buf[_]}function R1(h,s){for(let l=0;l<h.length;l++)s.writeVarint(h[l])}function K0(h,s){for(let l=0;l<h.length;l++)s.writeSVarint(h[l])}function W0(h,s){for(let l=0;l<h.length;l++)s.writeFloat(h[l])}function Td(h,s){for(let l=0;l<h.length;l++)s.writeDouble(h[l])}function _p(h,s){for(let l=0;l<h.length;l++)s.writeBoolean(h[l])}function $0(h,s){for(let l=0;l<h.length;l++)s.writeFixed32(h[l])}function Z0(h,s){for(let l=0;l<h.length;l++)s.writeSFixed32(h[l])}function X0(h,s){for(let l=0;l<h.length;l++)s.writeFixed64(h[l])}function Y0(h,s){for(let l=0;l<h.length;l++)s.writeSFixed64(h[l])}function J0(h,s,l){h===1&&l.readMessage(ey,s)}function ey(h,s,l){if(h===3){const{id:m,bitmap:_,width:C,height:T,left:L,top:D,advance:q}=l.readMessage(xp,{});s.push({id:m,bitmap:new ah({width:C+6,height:T+6},_),metrics:{width:C,height:T,left:L,top:D,advance:q}})}}function xp(h,s,l){h===1?s.id=l.readVarint():h===2?s.bitmap=l.readBytes():h===3?s.width=l.readVarint():h===4?s.height=l.readVarint():h===5?s.left=l.readSVarint():h===6?s.top=l.readSVarint():h===7&&(s.advance=l.readVarint())}function Ym(h){let s=0,l=0;for(const T of h)s+=T.w*T.h,l=Math.max(l,T.w);h.sort((T,L)=>L.h-T.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),l),h:1/0}];let _=0,C=0;for(const T of h)for(let L=m.length-1;L>=0;L--){const D=m[L];if(!(T.w>D.w||T.h>D.h)){if(T.x=D.x,T.y=D.y,C=Math.max(C,T.y+T.h),_=Math.max(_,T.x+T.w),T.w===D.w&&T.h===D.h){const q=m.pop();q&&L<m.length&&(m[L]=q)}else T.h===D.h?(D.x+=T.w,D.w-=T.w):T.w===D.w?(D.y+=T.h,D.h-=T.h):(m.push({x:D.x+T.w,y:D.y,w:D.w-T.w,h:T.h}),D.y+=T.h,D.h-=T.h);break}}return{w:_,h:C,fill:s/(_*C)||0}}class bp{constructor(s,{pixelRatio:l,version:m,stretchX:_,stretchY:C,content:T,textFitWidth:L,textFitHeight:D}){this.paddedRect=s,this.pixelRatio=l,this.stretchX=_,this.stretchY=C,this.content=T,this.version=m,this.textFitWidth=L,this.textFitHeight=D}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class es{constructor(s,l){const m={},_={};this.haveRenderCallbacks=[];const C=[];this.addImages(s,m,C),this.addImages(l,_,C);const{w:T,h:L}=Ym(C),D=new Ha({width:T||1,height:L||1});for(const q in s){const $=s[q],ie=m[q].paddedRect;Ha.copy($.data,D,{x:0,y:0},{x:ie.x+1,y:ie.y+1},$.data)}for(const q in l){const $=l[q],ie=_[q].paddedRect,he=ie.x+1,ve=ie.y+1,we=$.data.width,Ie=$.data.height;Ha.copy($.data,D,{x:0,y:0},{x:he,y:ve},$.data),Ha.copy($.data,D,{x:0,y:Ie-1},{x:he,y:ve-1},{width:we,height:1}),Ha.copy($.data,D,{x:0,y:0},{x:he,y:ve+Ie},{width:we,height:1}),Ha.copy($.data,D,{x:we-1,y:0},{x:he-1,y:ve},{width:1,height:Ie}),Ha.copy($.data,D,{x:0,y:0},{x:he+we,y:ve},{width:1,height:Ie})}this.image=D,this.iconPositions=m,this.patternPositions=_}addImages(s,l,m){for(const _ in s){const C=s[_],T={x:0,y:0,w:C.data.width+2,h:C.data.height+2};m.push(T),l[_]=new bp(T,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(s,l){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in s.updatedImages)this.patchUpdatedImage(this.iconPositions[m],s.getImage(m),l),this.patchUpdatedImage(this.patternPositions[m],s.getImage(m),l)}patchUpdatedImage(s,l,m){if(!s||!l||s.version===l.version)return;s.version=l.version;const[_,C]=s.tl;m.update(l.data,void 0,{x:_,y:C})}}var rA;Pe("ImagePosition",bp),Pe("ImageAtlas",es),A.ao=void 0,(rA=A.ao||(A.ao={}))[rA.none=0]="none",rA[rA.horizontal=1]="horizontal",rA[rA.vertical=2]="vertical",rA[rA.horizontalOnly=3]="horizontalOnly";class vf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(s,l,m){const _=new vf;return _.scale=s||1,_.fontStack=l,_.verticalAlign=m||"bottom",_}static forImage(s,l){const m=new vf;return m.imageName=s,m.verticalAlign=l||"bottom",m}}class Uh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,l){const m=new Uh;for(let _=0;_<s.sections.length;_++){const C=s.sections[_];C.image?m.addImageSection(C):m.addTextSection(C,l)}return m}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let l="";for(let m=0;m<s.length;m++){const _=s.charCodeAt(m+1)||null,C=s.charCodeAt(m-1)||null;l+=_&&Fi(_)&&!nA[s[m+1]]||C&&Fi(C)&&!nA[s[m-1]]||!nA[s[m]]?s[m]:nA[s[m]]}return l}(this.text)}trim(){let s=0;for(let m=0;m<this.text.length&&Bp[this.text.charCodeAt(m)];m++)s++;let l=this.text.length;for(let m=this.text.length-1;m>=0&&m>=s&&Bp[this.text.charCodeAt(m)];m--)l--;this.text=this.text.substring(s,l),this.sectionIndex=this.sectionIndex.slice(s,l)}substring(s,l){const m=new Uh;return m.text=this.text.substring(s,l),m.sectionIndex=this.sectionIndex.slice(s,l),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,l)=>Math.max(s,this.sections[l].scale),0)}getMaxImageSize(s){let l=0,m=0;for(let _=0;_<this.length();_++){const C=this.getSection(_);if(C.imageName){const T=s[C.imageName];if(!T)continue;const L=T.displaySize;l=Math.max(l,L[0]),m=Math.max(m,L[1])}}return{maxImageWidth:l,maxImageHeight:m}}addTextSection(s,l){this.text+=s.text,this.sections.push(vf.forText(s.scale,s.fontStack||l,s.verticalAlign));const m=this.sections.length-1;for(let _=0;_<s.text.length;++_)this.sectionIndex.push(m)}addImageSection(s){const l=s.image?s.image.name:"";if(l.length===0)return void bi("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(vf.forImage(l,s.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):bi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wp(h,s,l,m,_,C,T,L,D,q,$,ie,he,ve,we){const Ie=Uh.fromFeature(h,_);let qe;ie===A.ao.vertical&&Ie.verticalizePunctuation();const{processBidirectionalText:Xe,processStyledBidirectionalText:xt}=Kn;if(Xe&&Ie.sections.length===1){qe=[];const kt=Xe(Ie.toString(),lu(Ie,q,C,s,m,ve));for(const Ot of kt){const ni=new Uh;ni.text=Ot,ni.sections=Ie.sections;for(let mi=0;mi<Ot.length;mi++)ni.sectionIndex.push(0);qe.push(ni)}}else if(xt){qe=[];const kt=xt(Ie.text,Ie.sectionIndex,lu(Ie,q,C,s,m,ve));for(const Ot of kt){const ni=new Uh;ni.text=Ot[0],ni.sectionIndex=Ot[1],ni.sections=Ie.sections,qe.push(ni)}}else qe=function(kt,Ot){const ni=[],mi=kt.text;let pi=0;for(const gi of Ot)ni.push(kt.substring(pi,gi)),pi=gi;return pi<mi.length&&ni.push(kt.substring(pi,mi.length)),ni}(Ie,lu(Ie,q,C,s,m,ve));const rt=[],At={positionedLines:rt,text:Ie.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:ie,iconsInText:!1,verticalizable:!1};return function(kt,Ot,ni,mi,pi,gi,Di,vi,_i,Wt,un,mn){let qi=0,Ri=0,zn=0,ts=0;const Hs=vi==="right"?1:vi==="left"?0:.5,Va=_a/mn;let jo=0;for(const cs of pi){cs.trim();const Ia=cs.getMaxScale(),oa={positionedGlyphs:[],lineOffset:0};kt.positionedLines[jo]=oa;const c=oa.positionedGlyphs;let f=0;if(!cs.length()){Ri+=gi,++jo;continue}const v=Q1(mi,cs,Va);for(let k=0;k<cs.length();k++){const G=cs.getSection(k),ye=cs.getSectionIndex(k),je=cs.getCharCode(k),at=ty(_i,un,je);let Ct;if(G.imageName){if(kt.iconsInText=!0,G.scale=G.scale*Va,Ct=ny(G,at,Ia,v,mi),!Ct)continue;f=Math.max(f,Ct.imageOffset)}else if(Ct=iy(G,je,at,v,Ot,ni),!Ct)continue;const{rect:Zt,metrics:ci,baselineOffset:Rt}=Ct;c.push({glyph:je,imageName:G.imageName,x:qi,y:Ri+Rt+-17,vertical:at,scale:G.scale,fontStack:G.fontStack,sectionIndex:ye,metrics:ci,rect:Zt}),at?(kt.verticalizable=!0,qi+=(G.imageName?ci.advance:_a)*G.scale+Wt):qi+=ci.advance*G.scale+Wt}c.length!==0&&(zn=Math.max(qi-Wt,zn),z1(c,0,c.length-1,Hs)),qi=0,oa.lineOffset=Math.max(f,(Ia-1)*_a);const E=gi*Ia+f;Ri+=E,ts=Math.max(E,ts),++jo}const{horizontalAlign:Uo,verticalAlign:aa}=Rh(Di);(function(cs,Ia,oa,c,f,v,E,k,G){const ye=(Ia-oa)*f;let je=0;je=v!==E?-k*c- -17:-c*G*E+.5*E;for(const at of cs)for(const Ct of at.positionedGlyphs)Ct.x+=ye,Ct.y+=je})(kt.positionedLines,Hs,Uo,aa,zn,ts,gi,Ri,pi.length),kt.top+=-aa*Ri,kt.bottom=kt.top+Ri,kt.left+=-Uo*zn,kt.right=kt.left+zn}(At,s,l,m,qe,T,L,D,ie,q,he,we),!function(kt){for(const Ot of kt)if(Ot.positionedGlyphs.length!==0)return!1;return!0}(rt)&&At}const Bp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},O1={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Cp={40:!0};function Dh(h,s,l,m,_,C){if(s.imageName){const T=m[s.imageName];return T?T.displaySize[0]*s.scale*_a/C+_:0}{const T=l[s.fontStack],L=T&&T[h];return L?L.metrics.advance*s.scale+_:0}}function Sp(h,s,l,m){const _=Math.pow(h-s,2);return m?h<s?_/2:2*_:_+Math.abs(l)*l}function Ep(h,s,l){let m=0;return h===10&&(m-=1e4),l&&(m+=150),h!==40&&h!==65288||(m+=50),s!==41&&s!==65289||(m+=50),m}function Tp(h,s,l,m,_,C){let T=null,L=Sp(s,l,_,C);for(const D of m){const q=Sp(s-D.x,l,_,C)+D.badness;q<=L&&(T=D,L=q)}return{index:h,x:s,priorBreak:T,badness:L}}function hh(h){return h?hh(h.priorBreak).concat(h.index):[]}function lu(h,s,l,m,_,C){if(!h)return[];const T=[],L=function(ie,he,ve,we,Ie,qe){let Xe=0;for(let xt=0;xt<ie.length();xt++){const rt=ie.getSection(xt);Xe+=Dh(ie.getCharCode(xt),rt,we,Ie,he,qe)}return Xe/Math.max(1,Math.ceil(Xe/ve))}(h,s,l,m,_,C),D=h.text.indexOf("")>=0;let q=0;for(let ie=0;ie<h.length();ie++){const he=h.getSection(ie),ve=h.getCharCode(ie);if(Bp[ve]||(q+=Dh(ve,he,m,_,s,C)),ie<h.length()-1){const we=!(($=ve)<11904)&&(!!ct["CJK Compatibility Forms"]($)||!!ct["CJK Compatibility"]($)||!!ct["CJK Strokes"]($)||!!ct["CJK Symbols and Punctuation"]($)||!!ct["Enclosed CJK Letters and Months"]($)||!!ct["Halfwidth and Fullwidth Forms"]($)||!!ct["Ideographic Description Characters"]($)||!!ct["Vertical Forms"]($)||Ci.test(String.fromCodePoint($)));(O1[ve]||we||he.imageName||ie!==h.length()-2&&Cp[h.getCharCode(ie+1)])&&T.push(Tp(ie+1,q,L,T,Ep(ve,h.getCharCode(ie+1),we&&D),!1))}}var $;return hh(Tp(h.length(),q,L,T,0,!0))}function Rh(h){let s=.5,l=.5;switch(h){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:s,verticalAlign:l}}function Q1(h,s,l){const m=s.getMaxScale()*_a,{maxImageWidth:_,maxImageHeight:C}=s.getMaxImageSize(h),T=Math.max(m,C*l);return{verticalLineContentWidth:Math.max(m,_*l),horizontalLineContentHeight:T}}function Jm(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function ty(h,s,l){return!(h===A.ao.horizontal||!s&&!Xi(l)||s&&(Bp[l]||(m=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(m)))));var m}function iy(h,s,l,m,_,C){const T=C[h.fontStack],L=function(q,$,ie,he){if(q&&q.rect)return q;const ve=$[ie.fontStack],we=ve&&ve[he];return we?{rect:null,metrics:we.metrics}:null}(T&&T[s],_,h,s);if(L===null)return null;let D;if(l)D=m.verticalLineContentWidth-h.scale*_a;else{const q=Jm(h.verticalAlign);D=(m.horizontalLineContentHeight-h.scale*_a)*q}return{rect:L.rect,metrics:L.metrics,baselineOffset:D}}function ny(h,s,l,m,_){const C=_[h.imageName];if(!C)return null;const T=C.paddedRect,L=C.displaySize,D={width:L[0],height:L[1],left:1,top:-3,advance:s?L[1]:L[0]};let q;if(s)q=m.verticalLineContentWidth-L[1]*h.scale;else{const $=Jm(h.verticalAlign);q=(m.horizontalLineContentHeight-L[1]*h.scale)*$}return{rect:T,metrics:D,baselineOffset:q,imageOffset:(s?L[0]:L[1])*h.scale-_a*l}}function z1(h,s,l,m){if(m===0)return;const _=h[l],C=(h[l].x+_.metrics.advance*_.scale)*m;for(let T=s;T<=l;T++)h[T].x-=C}function eg(h,s,l){const{horizontalAlign:m,verticalAlign:_}=Rh(l),C=s[0]-h.displaySize[0]*m,T=s[1]-h.displaySize[1]*_;return{image:h,top:T,bottom:T+h.displaySize[1],left:C,right:C+h.displaySize[0]}}function tg(h){var s,l;let m=h.left,_=h.top,C=h.right-m,T=h.bottom-_;const L=(s=h.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",D=(l=h.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",q=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(D==="proportional"){if(L==="stretchOnly"&&C/T<q||L==="proportional"){const $=Math.ceil(T*q);m*=$/C,C=$}}else if(L==="proportional"&&D==="stretchOnly"&&q!==0&&C/T>q){const $=Math.ceil(C/q);_*=$/T,T=$}return{x1:m,y1:_,x2:m+C,y2:_+T}}function ig(h,s,l,m,_,C){const T=h.image;let L;if(T.content){const qe=T.content,Xe=T.pixelRatio||1;L=[qe[0]/Xe,qe[1]/Xe,T.displaySize[0]-qe[2]/Xe,T.displaySize[1]-qe[3]/Xe]}const D=s.left*C,q=s.right*C;let $,ie,he,ve;l==="width"||l==="both"?(ve=_[0]+D-m[3],ie=_[0]+q+m[1]):(ve=_[0]+(D+q-T.displaySize[0])/2,ie=ve+T.displaySize[0]);const we=s.top*C,Ie=s.bottom*C;return l==="height"||l==="both"?($=_[1]+we-m[0],he=_[1]+Ie+m[2]):($=_[1]+(we+Ie-T.displaySize[1])/2,he=$+T.displaySize[1]),{image:T,top:$,right:ie,bottom:he,left:ve,collisionPadding:L}}const LA=128,sA=32640;function Fp(h,s){const{expression:l}=s;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new en(h+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:_}=l;let C=0;for(;C<m.length&&m[C]<=h;)C++;C=Math.max(0,C-1);let T=C;for(;T<m.length&&m[T]<h+1;)T++;T=Math.min(m.length-1,T);const L=m[C],D=m[T];return l.kind==="composite"?{kind:"composite",minZoom:L,maxZoom:D,interpolationType:_}:{kind:"camera",minZoom:L,maxZoom:D,minSize:l.evaluate(new en(L)),maxSize:l.evaluate(new en(D)),interpolationType:_}}}function ng(h,s,l){let m="never";const _=h.get(s);return _?m=_:h.get(l)&&(m="always"),m}const H1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function dh(h,s,l,m,_,C,T,L,D,q,$,ie,he){const ve=L?Math.min(sA,Math.round(L[0])):0,we=L?Math.min(sA,Math.round(L[1])):0;h.emplaceBack(s,l,Math.round(32*m),Math.round(32*_),C,T,(ve<<1)+(D?1:0),we,16*q,16*$,256*ie,256*he)}function rg(h,s,l){h.emplaceBack(s.x,s.y,l),h.emplaceBack(s.x,s.y,l),h.emplaceBack(s.x,s.y,l),h.emplaceBack(s.x,s.y,l)}function ry(h){for(const s of h.sections)if(In(s.text))return!0;return!1}class $n{constructor(s){this.layoutVertexArray=new Ai,this.indexArray=new sr,this.programConfigurations=s,this.segments=new Ln,this.dynamicLayoutVertexArray=new $t,this.opacityVertexArray=new ki,this.hasVisibleVertices=!1,this.placedSymbolArray=new _e}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,l,m,_){this.isEmpty()||(m&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,V0.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,q0.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,H1,!0),this.opacityVertexBuffer.itemSize=1),(m||_)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pe("SymbolBuffers",$n);class _f{constructor(s,l,m){this.layoutVertexArray=new s,this.layoutAttributes=l,this.indexArray=new m,this.segments=new Ln,this.collisionVertexArray=new ir}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,D1.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pe("CollisionBuffers",_f);class PA{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=yi(globalThis)?Math.min(s.overscaling,128):s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(T=>T.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fp(this.zoom,l["text-size"]),this.iconSizeData=Fp(this.zoom,l["icon-size"]);const m=this.layers[0].layout,_=m.get("symbol-sort-key"),C=m.get("symbol-z-order");this.canOverlap=ng(m,"text-overlap","text-allow-overlap")!=="never"||ng(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(T=>A.ao[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=s.sourceID}createArrays(){this.text=new $n(new cl(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new $n(new cl(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new Ge,this.lineVertexArray=new We,this.symbolInstances=new He,this.textAnchorOffsets=new it}calculateGlyphDependencies(s,l,m,_,C){for(let T=0;T<s.length;T++)if(l[s.charCodeAt(T)]=!0,(m||_)&&C){const L=nA[s.charAt(T)];L&&(l[L.charCodeAt(0)]=!0)}}populate(s,l,m){const _=this.layers[0],C=_.layout,T=C.get("text-font"),L=C.get("text-field"),D=C.get("icon-image"),q=(L.value.kind!=="constant"||L.value.value instanceof Zi&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),$=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,ie=C.get("symbol-sort-key");if(this.features=[],!q&&!$)return;const he=l.iconDependencies,ve=l.glyphDependencies,we=l.availableImages,Ie=new en(this.zoom);for(const{feature:qe,id:Xe,index:xt,sourceLayerIndex:rt}of s){const At=_._featureFilter.needGeometry,kt=sh(qe,At);if(!_._featureFilter.filter(Ie,kt,m))continue;let Ot,ni;if(At||(kt.geometry=Ju(qe)),q){const pi=_.getValueAndResolveTokens("text-field",kt,m,we),gi=Zi.factory(pi),Di=this.hasRTLText=this.hasRTLText||ry(gi);(!Di||Kn.getRTLTextPluginStatus()==="unavailable"||Di&&Kn.isParsed())&&(Ot=Zm(gi,_,kt))}if($){const pi=_.getValueAndResolveTokens("icon-image",kt,m,we);ni=pi instanceof Wr?pi:Wr.fromString(pi)}if(!Ot&&!ni)continue;const mi=this.sortFeaturesByKey?ie.evaluate(kt,{},m):void 0;if(this.features.push({id:Xe,text:Ot,icon:ni,index:xt,sourceLayerIndex:rt,geometry:kt.geometry,properties:qe.properties,type:Wn.types[qe.type],sortKey:mi}),ni&&(he[ni.name]=!0),Ot){const pi=T.evaluate(kt,{},m).join(","),gi=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(A.ao.vertical)>=0;for(const Di of Ot.sections)if(Di.image)he[Di.image.name]=!0;else{const vi=bt(Ot.toString()),_i=Di.fontStack||pi,Wt=ve[_i]=ve[_i]||{};this.calculateGlyphDependencies(Di.text,Wt,gi,this.allowVerticalPlacement,vi)}}}C.get("symbol-placement")==="line"&&(this.features=function(qe){const Xe={},xt={},rt=[];let At=0;function kt(pi){rt.push(qe[pi]),At++}function Ot(pi,gi,Di){const vi=xt[pi];return delete xt[pi],xt[gi]=vi,rt[vi].geometry[0].pop(),rt[vi].geometry[0]=rt[vi].geometry[0].concat(Di[0]),vi}function ni(pi,gi,Di){const vi=Xe[gi];return delete Xe[gi],Xe[pi]=vi,rt[vi].geometry[0].shift(),rt[vi].geometry[0]=Di[0].concat(rt[vi].geometry[0]),vi}function mi(pi,gi,Di){const vi=Di?gi[0][gi[0].length-1]:gi[0][0];return`${pi}:${vi.x}:${vi.y}`}for(let pi=0;pi<qe.length;pi++){const gi=qe[pi],Di=gi.geometry,vi=gi.text?gi.text.toString():null;if(!vi){kt(pi);continue}const _i=mi(vi,Di),Wt=mi(vi,Di,!0);if(_i in xt&&Wt in Xe&&xt[_i]!==Xe[Wt]){const un=ni(_i,Wt,Di),mn=Ot(_i,Wt,rt[un].geometry);delete Xe[_i],delete xt[Wt],xt[mi(vi,rt[mn].geometry,!0)]=mn,rt[un].geometry=null}else _i in xt?Ot(_i,Wt,Di):Wt in Xe?ni(_i,Wt,Di):(kt(pi),Xe[_i]=At-1,xt[Wt]=At-1)}return rt.filter(pi=>pi.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((qe,Xe)=>qe.sortKey-Xe.sortKey)}update(s,l,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,l,this.layers,{imagePositions:m}),this.icon.programConfigurations.updatePaintArrays(s,l,this.layers,{imagePositions:m}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,l){const m=this.lineVertexArray.length;if(s.segment!==void 0){let _=s.dist(l[s.segment+1]),C=s.dist(l[s.segment]);const T={};for(let L=s.segment+1;L<l.length;L++)T[L]={x:l[L].x,y:l[L].y,tileUnitDistanceFromAnchor:_},L<l.length-1&&(_+=l[L+1].dist(l[L]));for(let L=s.segment||0;L>=0;L--)T[L]={x:l[L].x,y:l[L].y,tileUnitDistanceFromAnchor:C},L>0&&(C+=l[L-1].dist(l[L]));for(let L=0;L<l.length;L++){const D=T[L];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(s,l,m,_,C,T,L,D,q,$,ie,he){const ve=s.indexArray,we=s.layoutVertexArray,Ie=s.segments.prepareSegment(4*l.length,we,ve,this.canOverlap?T.sortKey:void 0),qe=this.glyphOffsetArray.length,Xe=Ie.vertexLength,xt=this.allowVerticalPlacement&&L===A.ao.vertical?Math.PI/2:0,rt=T.text&&T.text.sections;for(let At=0;At<l.length;At++){const{tl:kt,tr:Ot,bl:ni,br:mi,tex:pi,pixelOffsetTL:gi,pixelOffsetBR:Di,minFontScaleX:vi,minFontScaleY:_i,glyphOffset:Wt,isSDF:un,sectionIndex:mn}=l[At],qi=Ie.vertexLength,Ri=Wt[1];dh(we,D.x,D.y,kt.x,Ri+kt.y,pi.x,pi.y,m,un,gi.x,gi.y,vi,_i),dh(we,D.x,D.y,Ot.x,Ri+Ot.y,pi.x+pi.w,pi.y,m,un,Di.x,gi.y,vi,_i),dh(we,D.x,D.y,ni.x,Ri+ni.y,pi.x,pi.y+pi.h,m,un,gi.x,Di.y,vi,_i),dh(we,D.x,D.y,mi.x,Ri+mi.y,pi.x+pi.w,pi.y+pi.h,m,un,Di.x,Di.y,vi,_i),rg(s.dynamicLayoutVertexArray,D,xt),ve.emplaceBack(qi,qi+2,qi+1),ve.emplaceBack(qi+1,qi+2,qi+3),Ie.vertexLength+=4,Ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Wt[0]),At!==l.length-1&&mn===l[At+1].sectionIndex||s.programConfigurations.populatePaintArrays(we.length,T,T.index,{imagePositions:{},canonical:he,formattedSection:rt&&rt[mn]})}s.placedSymbolArray.emplaceBack(D.x,D.y,qe,this.glyphOffsetArray.length-qe,Xe,q,$,D.segment,m?m[0]:0,m?m[1]:0,_[0],_[1],L,0,!1,0,ie)}_addCollisionDebugVertex(s,l,m,_,C,T){return l.emplaceBack(0,0),s.emplaceBack(m.x,m.y,_,C,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(s,l,m,_,C,T,L){const D=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),q=D.vertexLength,$=C.layoutVertexArray,ie=C.collisionVertexArray,he=L.anchorX,ve=L.anchorY;this._addCollisionDebugVertex($,ie,T,he,ve,new g(s,l)),this._addCollisionDebugVertex($,ie,T,he,ve,new g(m,l)),this._addCollisionDebugVertex($,ie,T,he,ve,new g(m,_)),this._addCollisionDebugVertex($,ie,T,he,ve,new g(s,_)),D.vertexLength+=4;const we=C.indexArray;we.emplaceBack(q,q+1),we.emplaceBack(q+1,q+2),we.emplaceBack(q+2,q+3),we.emplaceBack(q+3,q),D.primitiveLength+=4}addDebugCollisionBoxes(s,l,m,_){for(let C=s;C<l;C++){const T=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,_?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _f(cn,IA.members,Ar),this.iconCollisionBox=new _f(cn,IA.members,Ar);for(let s=0;s<this.symbolInstances.length;s++){const l=this.symbolInstances.get(s);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(s,l,m,_,C,T,L,D,q){const $={};for(let ie=l;ie<m;ie++){const he=s.get(ie);$.textBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},$.textFeatureIndex=he.featureIndex;break}for(let ie=_;ie<C;ie++){const he=s.get(ie);$.verticalTextBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},$.verticalTextFeatureIndex=he.featureIndex;break}for(let ie=T;ie<L;ie++){const he=s.get(ie);$.iconBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},$.iconFeatureIndex=he.featureIndex;break}for(let ie=D;ie<q;ie++){const he=s.get(ie);$.verticalIconBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},$.verticalIconFeatureIndex=he.featureIndex;break}return $}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const m=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,l){const m=s.placedSymbolArray.get(l),_=m.vertexStartIndex+4*m.numGlyphs;for(let C=m.vertexStartIndex;C<_;C+=4)s.indexArray.emplaceBack(C,C+2,C+1),s.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(s),m=Math.cos(s),_=[],C=[],T=[];for(let L=0;L<this.symbolInstances.length;++L){T.push(L);const D=this.symbolInstances.get(L);_.push(0|Math.round(l*D.anchorX+m*D.anchorY)),C.push(D.featureIndex)}return T.sort((L,D)=>_[L]-_[D]||C[D]-C[L]),T}addToSortKeyRanges(s,l){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===l?m.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const m=this.symbolInstances.get(l);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((_,C,T)=>{_>=0&&T.indexOf(_)===C&&this.addIndicesForPlacedSymbol(this.text,_)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Np,sg;Pe("SymbolBucket",PA,{omit:["layers","collisionBoxArray","features","compareText"]}),PA.MAX_GLYPHS=65535,PA.addDynamicAttributes=rg;var xf={get paint(){return sg=sg||new Rr({"icon-opacity":new Li(yt.paint_symbol["icon-opacity"]),"icon-color":new Li(yt.paint_symbol["icon-color"]),"icon-halo-color":new Li(yt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Li(yt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Li(yt.paint_symbol["icon-halo-blur"]),"icon-translate":new xi(yt.paint_symbol["icon-translate"]),"icon-translate-anchor":new xi(yt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Li(yt.paint_symbol["text-opacity"]),"text-color":new Li(yt.paint_symbol["text-color"],{runtimeType:_r,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Li(yt.paint_symbol["text-halo-color"]),"text-halo-width":new Li(yt.paint_symbol["text-halo-width"]),"text-halo-blur":new Li(yt.paint_symbol["text-halo-blur"]),"text-translate":new xi(yt.paint_symbol["text-translate"]),"text-translate-anchor":new xi(yt.paint_symbol["text-translate-anchor"])})},get layout(){return Np=Np||new Rr({"symbol-placement":new xi(yt.layout_symbol["symbol-placement"]),"symbol-spacing":new xi(yt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new xi(yt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Li(yt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new xi(yt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new xi(yt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new xi(yt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new xi(yt.layout_symbol["icon-ignore-placement"]),"icon-optional":new xi(yt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new xi(yt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Li(yt.layout_symbol["icon-size"]),"icon-text-fit":new xi(yt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new xi(yt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Li(yt.layout_symbol["icon-image"]),"icon-rotate":new Li(yt.layout_symbol["icon-rotate"]),"icon-padding":new Li(yt.layout_symbol["icon-padding"]),"icon-keep-upright":new xi(yt.layout_symbol["icon-keep-upright"]),"icon-offset":new Li(yt.layout_symbol["icon-offset"]),"icon-anchor":new Li(yt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new xi(yt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new xi(yt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new xi(yt.layout_symbol["text-rotation-alignment"]),"text-field":new Li(yt.layout_symbol["text-field"]),"text-font":new Li(yt.layout_symbol["text-font"]),"text-size":new Li(yt.layout_symbol["text-size"]),"text-max-width":new Li(yt.layout_symbol["text-max-width"]),"text-line-height":new xi(yt.layout_symbol["text-line-height"]),"text-letter-spacing":new Li(yt.layout_symbol["text-letter-spacing"]),"text-justify":new Li(yt.layout_symbol["text-justify"]),"text-radial-offset":new Li(yt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new xi(yt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Li(yt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Li(yt.layout_symbol["text-anchor"]),"text-max-angle":new xi(yt.layout_symbol["text-max-angle"]),"text-writing-mode":new xi(yt.layout_symbol["text-writing-mode"]),"text-rotate":new Li(yt.layout_symbol["text-rotate"]),"text-padding":new xi(yt.layout_symbol["text-padding"]),"text-keep-upright":new xi(yt.layout_symbol["text-keep-upright"]),"text-transform":new Li(yt.layout_symbol["text-transform"]),"text-offset":new Li(yt.layout_symbol["text-offset"]),"text-allow-overlap":new xi(yt.layout_symbol["text-allow-overlap"]),"text-overlap":new xi(yt.layout_symbol["text-overlap"]),"text-ignore-placement":new xi(yt.layout_symbol["text-ignore-placement"]),"text-optional":new xi(yt.layout_symbol["text-optional"])})}};class Fd{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:or,this.defaultValue=s}evaluate(s){if(s.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(s.formattedSection))return l.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pe("FormatSectionOverride",Fd,{omit:["defaultValue"]});class Oh extends ya{constructor(s,l){super(s,xf,l)}recalculate(s,l){if(super.recalculate(s,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const _=[];for(const C of m)_.indexOf(C)<0&&_.push(C);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,l,m,_){const C=this.layout.get(s).evaluate(l,{},m,_),T=this._unevaluatedLayout._values[s];return T.isDataDriven()||Jo(T.value)||!C?C:function(L,D){return D.replace(/{([^{}]+)}/g,(q,$)=>L&&$ in L?String(L[$]):"")}(l.properties,C)}createBucket(s){return new PA(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of xf.paint.overridableProperties){if(!Oh.hasPaintOverride(this.layout,s))continue;const l=this.paint.get(s),m=new Fd(l),_=new Zl(m,l.property.specification);let C=null;C=l.value.kind==="constant"||l.value.kind==="source"?new Cu("source",_):new Da("composite",_,l.value.zoomStops),this.paint._values[s]=new Tr(l.property,C,l.parameters)}}_handleOverridablePaintPropertyUpdate(s,l,m){return!(!this.layout||l.isDataDriven()||m.isDataDriven())&&Oh.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,l){const m=s.get("text-field"),_=xf.paint.properties[l];let C=!1;const T=L=>{for(const D of L)if(_.overrides&&_.overrides.hasOverride(D))return void(C=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Zi)T(m.value.value.sections);else if(m.value.kind==="source"||m.value.kind==="composite"){const L=q=>{C||(q instanceof Ji&&pr(q.value)===Pa?T(q.value.sections):q instanceof fi?T(q.sections):q.eachChild(L))},D=m.value;D._styleExpression&&L(D._styleExpression.expression)}return C}}let Qh;var sy={get paint(){return Qh=Qh||new Rr({"background-color":new xi(yt.paint_background["background-color"]),"background-pattern":new ur(yt.paint_background["background-pattern"]),"background-opacity":new xi(yt.paint_background["background-opacity"])})}};class V1 extends ya{constructor(s,l){super(s,sy,l)}}class q1 extends ya{constructor(s,l){super(s,{},l),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class ay{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const oy={once:!0},Nd=63710088e-1;class hr{constructor(s,l){if(isNaN(s)||isNaN(l))throw new Error(`Invalid LngLat object: (${s}, ${l})`);if(this.lng=+s,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new hr(_t(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const l=Math.PI/180,m=this.lat*l,_=s.lat*l,C=Math.sin(m)*Math.sin(_)+Math.cos(m)*Math.cos(_)*Math.cos((s.lng-this.lng)*l);return Nd*Math.acos(Math.min(C,1))}static convert(s){if(s instanceof hr)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new hr(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new hr(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Mp=2*Math.PI*Nd;function fo(h){return Mp*Math.cos(h*Math.PI/180)}function ly(h){return(180+h)/360}function Ip(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function Lp(h,s){return h/fo(s)}function Md(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function ag(h,s){return h*fo(Md(s))}class Id{constructor(s,l,m=0){this.x=+s,this.y=+l,this.z=+m}static fromLngLat(s,l=0){const m=hr.convert(s);return new Id(ly(m.lng),Ip(m.lat),Lp(l,m.lat))}toLngLat(){return new hr(360*this.x-180,Md(this.y))}toAltitude(){return ag(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Mp*(s=Md(this.y),1/Math.cos(s*Math.PI/180));var s}}function Pp(h,s,l){var m=2*Math.PI*6378137/256/Math.pow(2,l);return[h*m-2*Math.PI*6378137/2,s*m-2*Math.PI*6378137/2]}class bf{constructor(s,l,m){if(!function(_,C,T){return!(_<0||_>25||T<0||T>=Math.pow(2,_)||C<0||C>=Math.pow(2,_))}(s,l,m))throw new Error(`x=${l}, y=${m}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=l,this.y=m,this.key=Ld(0,s,s,l,m)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,l,m){const _=(T=this.y,L=this.z,D=Pp(256*(C=this.x),256*(T=Math.pow(2,L)-T-1),L),q=Pp(256*(C+1),256*(T+1),L),D[0]+","+D[1]+","+q[0]+","+q[1]);var C,T,L,D,q;const $=function(ie,he,ve){let we,Ie="";for(let qe=ie;qe>0;qe--)we=1<<qe-1,Ie+=(he&we?1:0)+(ve&we?2:0);return Ie}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,$).replace(/{bbox-epsg-3857}/g,_)}isChildOf(s){const l=this.z-s.z;return l>0&&s.x===this.x>>l&&s.y===this.y>>l}getTilePoint(s){const l=Math.pow(2,this.z);return new g((s.x*l-this.x)*ke,(s.y*l-this.y)*ke)}toString(){return`${this.z}/${this.x}/${this.y}`}}class cy{constructor(s,l){this.wrap=s,this.canonical=l,this.key=Ld(s,l.z,l.z,l.x,l.y)}}class ac{constructor(s,l,m,_,C){if(this.terrainRttPosMatrix32f=null,s<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${m}`);this.overscaledZ=s,this.wrap=l,this.canonical=new bf(m,+_,+C),this.key=Ld(l,s,m,_,C)}clone(){return new ac(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-s;return s>this.canonical.z?new ac(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ac(s,this.wrap,s,this.canonical.x>>l,this.canonical.y>>l)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(s,l){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-s;return s>this.canonical.z?Ld(this.wrap*+l,s,this.canonical.z,this.canonical.x,this.canonical.y):Ld(this.wrap*+l,s,s,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(s){if(s.wrap!==this.wrap||this.overscaledZ-s.overscaledZ<=0)return!1;if(s.overscaledZ===0)return this.overscaledZ>0;const l=this.canonical.z-s.canonical.z;return!(l<0)&&s.canonical.x===this.canonical.x>>l&&s.canonical.y===this.canonical.y>>l}children(s){if(this.overscaledZ>=s)return[new ac(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,m=2*this.canonical.x,_=2*this.canonical.y;return[new ac(l,this.wrap,l,m,_),new ac(l,this.wrap,l,m+1,_),new ac(l,this.wrap,l,m,_+1),new ac(l,this.wrap,l,m+1,_+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new ac(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new ac(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new cy(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Id(s.x-this.wrap,s.y))}}function Ld(h,s,l,m,_){(h*=2)<0&&(h=-1*h-1);const C=1<<l;return(C*C*h+C*_+m).toString(36)+l.toString(36)+s.toString(36)}function Pd(h,s){return s?h.properties[s]:h.id}Pe("CanonicalTileID",bf),Pe("OverscaledTileID",ac,{omit:["terrainRttPosMatrix32f"]});class zh{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(s){return this.minX=Math.min(this.minX,s.x),this.minY=Math.min(this.minY,s.y),this.maxX=Math.max(this.maxX,s.x),this.maxY=Math.max(this.maxY,s.y),this}expandBy(s){return this.minX-=s,this.minY-=s,this.maxX+=s,this.maxY+=s,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(s){return this.expandBy(-s)}map(s){const l=new zh;return l.extend(s(new g(this.minX,this.minY))),l.extend(s(new g(this.maxX,this.minY))),l.extend(s(new g(this.minX,this.maxY))),l.extend(s(new g(this.maxX,this.maxY))),l}static fromPoints(s){const l=new zh;for(const m of s)l.extend(m);return l}contains(s){return s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(s){return!this.empty()&&!s.empty()&&s.minX>=this.minX&&s.maxX<=this.maxX&&s.minY>=this.minY&&s.maxY<=this.maxY}intersects(s){return!this.empty()&&!s.empty()&&s.minX<=this.maxX&&s.maxX>=this.minX&&s.minY<=this.maxY&&s.maxY>=this.minY}}class uy{constructor(s){this._stringToNumber={},this._numberToString=[];for(let l=0;l<s.length;l++){const m=s[l];this._stringToNumber[m]=l,this._numberToString[l]=m}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class kA{constructor(s,l,m,_,C){this.type="Feature",this._vectorTileFeature=s,s._z=l,s._x=m,s._y=_,this.properties=s.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(s[l]=this[l]);return s}}class og{constructor(s,l){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new De(ke,16,0),this.grid3D=new De(ke,16,0),this.featureIndexArray=new lt,this.promoteId=l}insert(s,l,m,_,C,T){const L=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,_,C);const D=T?this.grid3D:this.grid;for(let q=0;q<l.length;q++){const $=l[q],ie=[1/0,1/0,-1/0,-1/0];for(let he=0;he<$.length;he++){const ve=$[he];ie[0]=Math.min(ie[0],ve.x),ie[1]=Math.min(ie[1],ve.y),ie[2]=Math.max(ie[2],ve.x),ie[3]=Math.max(ie[3],ve.y)}ie[0]<ke&&ie[1]<ke&&ie[2]>=0&&ie[3]>=0&&D.insert(L,ie[0],ie[1],ie[2],ie[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new fp(new yf(this.rawTileData)).layers,this.sourceLayerCoder=new uy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,l,m,_){this.loadVTLayers();const C=s.params,T=ke/s.tileSize/s.scale,L=Ic(C.filter,C.globalState),D=s.queryGeometry,q=s.queryPadding*T,$=zh.fromPoints(D),ie=this.grid.query($.minX-q,$.minY-q,$.maxX+q,$.maxY+q),he=zh.fromPoints(s.cameraQueryGeometry).expandBy(q),ve=this.grid3D.query(he.minX,he.minY,he.maxX,he.maxY,(qe,Xe,xt,rt)=>function(At,kt,Ot,ni,mi){for(const gi of At)if(kt<=gi.x&&Ot<=gi.y&&ni>=gi.x&&mi>=gi.y)return!0;const pi=[new g(kt,Ot),new g(kt,mi),new g(ni,mi),new g(ni,Ot)];if(At.length>2){for(const gi of pi)if(CA(At,gi))return!0}for(let gi=0;gi<At.length-1;gi++)if(Fm(At[gi],At[gi+1],pi))return!0;return!1}(s.cameraQueryGeometry,qe-q,Xe-q,xt+q,rt+q));for(const qe of ve)ie.push(qe);ie.sort(G1);const we={};let Ie;for(let qe=0;qe<ie.length;qe++){const Xe=ie[qe];if(Xe===Ie)continue;Ie=Xe;const xt=this.featureIndexArray.get(Xe);let rt=null;this.loadMatchingFeature(we,xt.bucketIndex,xt.sourceLayerIndex,xt.featureIndex,L,C.layers,C.availableImages,l,m,_,(At,kt,Ot)=>(rt||(rt=Ju(At)),kt.queryIntersectsFeature({queryGeometry:D,feature:At,featureState:Ot,geometry:rt,zoom:this.z,transform:s.transform,pixelsToTileUnits:T,pixelPosMatrix:s.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:s.getElevation})))}return we}loadMatchingFeature(s,l,m,_,C,T,L,D,q,$,ie){const he=this.bucketLayerIDs[l];if(T&&!he.some(qe=>T.has(qe)))return;const ve=this.sourceLayerCoder.decode(m),we=this.vtLayers[ve].feature(_);if(C.needGeometry){const qe=sh(we,!0);if(!C.filter(new en(this.tileID.overscaledZ),qe,this.tileID.canonical))return}else if(!C.filter(new en(this.tileID.overscaledZ),we))return;const Ie=this.getId(we,ve);for(let qe=0;qe<he.length;qe++){const Xe=he[qe];if(T&&!T.has(Xe))continue;const xt=D[Xe];if(!xt)continue;let rt={};Ie&&$&&(rt=$.getState(xt.sourceLayer||"_geojsonTileLayer",Ie));const At=gt({},q[Xe]);At.paint=kp(At.paint,xt.paint,we,rt,L),At.layout=kp(At.layout,xt.layout,we,rt,L);const kt=!ie||ie(we,xt,rt);if(!kt)continue;const Ot=new kA(we,this.z,this.x,this.y,Ie);Ot.layer=At;let ni=s[Xe];ni===void 0&&(ni=s[Xe]=[]),ni.push({featureIndex:_,feature:Ot,intersectionZ:kt})}}lookupSymbolFeatures(s,l,m,_,C,T,L,D){const q={};this.loadVTLayers();const $=Ic(C.filterSpec,C.globalState);for(const ie of s)this.loadMatchingFeature(q,m,_,ie,$,T,L,D,l);return q}hasLayer(s){for(const l of this.bucketLayerIDs)for(const m of l)if(s===m)return!0;return!1}getId(s,l){var m;let _=s.id;return this.promoteId&&(_=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof _=="boolean"&&(_=Number(_)),_===void 0&&(!((m=s.properties)===null||m===void 0)&&m.cluster)&&this.promoteId&&(_=Number(s.properties.cluster_id))),_}}function kp(h,s,l,m,_){return hi(h,(C,T)=>{const L=s instanceof Yr?s.get(T):null;return L&&L.evaluate?L.evaluate(l,m,_):L})}function G1(h,s){return s-h}function Ay(h,s,l,m,_){const C=[];for(let T=0;T<h.length;T++){const L=h[T];let D;for(let q=0;q<L.length-1;q++){let $=L[q],ie=L[q+1];$.x<s&&ie.x<s||($.x<s?$=new g(s,$.y+(s-$.x)/(ie.x-$.x)*(ie.y-$.y))._round():ie.x<s&&(ie=new g(s,$.y+(s-$.x)/(ie.x-$.x)*(ie.y-$.y))._round()),$.y<l&&ie.y<l||($.y<l?$=new g($.x+(l-$.y)/(ie.y-$.y)*(ie.x-$.x),l)._round():ie.y<l&&(ie=new g($.x+(l-$.y)/(ie.y-$.y)*(ie.x-$.x),l)._round()),$.x>=m&&ie.x>=m||($.x>=m?$=new g(m,$.y+(m-$.x)/(ie.x-$.x)*(ie.y-$.y))._round():ie.x>=m&&(ie=new g(m,$.y+(m-$.x)/(ie.x-$.x)*(ie.y-$.y))._round()),$.y>=_&&ie.y>=_||($.y>=_?$=new g($.x+(_-$.y)/(ie.y-$.y)*(ie.x-$.x),_)._round():ie.y>=_&&(ie=new g($.x+(_-$.y)/(ie.y-$.y)*(ie.x-$.x),_)._round()),D&&$.equals(D[D.length-1])||(D=[$],C.push(D)),D.push(ie)))))}}return C}Pe("FeatureIndex",og,{omit:["rawTileData","sourceLayerCoder"]});class aA extends g{constructor(s,l,m,_){super(s,l),this.angle=m,_!==void 0&&(this.segment=_)}clone(){return new aA(this.x,this.y,this.angle,this.segment)}}function hy(h,s,l,m,_){if(s.segment===void 0||l===0)return!0;let C=s,T=s.segment+1,L=0;for(;L>-l/2;){if(T--,T<0)return!1;L-=h[T].dist(C),C=h[T]}L+=h[T].dist(h[T+1]),T++;const D=[];let q=0;for(;L<l/2;){const $=h[T],ie=h[T+1];if(!ie)return!1;let he=h[T-1].angleTo($)-$.angleTo(ie);for(he=Math.abs((he+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:L,angleDelta:he}),q+=he;L-D[0].distance>m;)q-=D.shift().angleDelta;if(q>_)return!1;T++,L+=$.dist(ie)}return!0}function cu(h){let s=0;for(let l=0;l<h.length-1;l++)s+=h[l].dist(h[l+1]);return s}function jp(h,s,l){return h?.6*s*l:0}function lg(h,s){return Math.max(h?h.right-h.left:0,s?s.right-s.left:0)}function dy(h,s,l,m,_,C){const T=jp(l,_,C),L=lg(l,m)*C;let D=0;const q=cu(h)/2;for(let $=0;$<h.length-1;$++){const ie=h[$],he=h[$+1],ve=ie.dist(he);if(D+ve>q){const we=(q-D)/ve,Ie=da.number(ie.x,he.x,we),qe=da.number(ie.y,he.y,we),Xe=new aA(Ie,qe,he.angleTo(ie),$);return Xe._round(),!T||hy(h,Xe,L,T,s)?Xe:void 0}D+=ve}}function wf(h,s,l,m,_,C,T,L,D){const q=jp(m,C,T),$=lg(m,_),ie=$*T,he=h[0].x===0||h[0].x===D||h[0].y===0||h[0].y===D;return s-ie<s/4&&(s=ie+s/4),Rc(h,he?s/2*L%s:($/2+2*C)*T*L%s,s,q,l,ie,he,!1,D)}function Rc(h,s,l,m,_,C,T,L,D){const q=C/2,$=cu(h);let ie=0,he=s-l,ve=[];for(let we=0;we<h.length-1;we++){const Ie=h[we],qe=h[we+1],Xe=Ie.dist(qe),xt=qe.angleTo(Ie);for(;he+l<ie+Xe;){he+=l;const rt=(he-ie)/Xe,At=da.number(Ie.x,qe.x,rt),kt=da.number(Ie.y,qe.y,rt);if(At>=0&&At<D&&kt>=0&&kt<D&&he-q>=0&&he+q<=$){const Ot=new aA(At,kt,xt,we);Ot._round(),m&&!hy(h,Ot,C,m,_)||ve.push(Ot)}}ie+=Xe}return L||ve.length||T||(ve=Rc(h,ie/2,l,m,_,C,T,!0,D)),ve}function cg(h,s,l,m){const _=[],C=h.image,T=C.pixelRatio,L=C.paddedRect.w-2,D=C.paddedRect.h-2;let q={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const $=C.stretchX||[[0,L]],ie=C.stretchY||[[0,D]],he=(Wt,un)=>Wt+un[1]-un[0],ve=$.reduce(he,0),we=ie.reduce(he,0),Ie=L-ve,qe=D-we;let Xe=0,xt=ve,rt=0,At=we,kt=0,Ot=Ie,ni=0,mi=qe;if(C.content&&m){const Wt=C.content,un=Wt[2]-Wt[0],mn=Wt[3]-Wt[1];(C.textFitWidth||C.textFitHeight)&&(q=tg(h)),Xe=Hh($,0,Wt[0]),rt=Hh(ie,0,Wt[1]),xt=Hh($,Wt[0],Wt[2]),At=Hh(ie,Wt[1],Wt[3]),kt=Wt[0]-Xe,ni=Wt[1]-rt,Ot=un-xt,mi=mn-At}const pi=q.x1,gi=q.y1,Di=q.x2-pi,vi=q.y2-gi,_i=(Wt,un,mn,qi)=>{const Ri=Up(Wt.stretch-Xe,xt,Di,pi),zn=Dp(Wt.fixed-kt,Ot,Wt.stretch,ve),ts=Up(un.stretch-rt,At,vi,gi),Hs=Dp(un.fixed-ni,mi,un.stretch,we),Va=Up(mn.stretch-Xe,xt,Di,pi),jo=Dp(mn.fixed-kt,Ot,mn.stretch,ve),Uo=Up(qi.stretch-rt,At,vi,gi),aa=Dp(qi.fixed-ni,mi,qi.stretch,we),cs=new g(Ri,ts),Ia=new g(Va,ts),oa=new g(Va,Uo),c=new g(Ri,Uo),f=new g(zn/T,Hs/T),v=new g(jo/T,aa/T),E=s*Math.PI/180;if(E){const ye=Math.sin(E),je=Math.cos(E),at=[je,-ye,ye,je];cs._matMult(at),Ia._matMult(at),c._matMult(at),oa._matMult(at)}const k=Wt.stretch+Wt.fixed,G=un.stretch+un.fixed;return{tl:cs,tr:Ia,bl:c,br:oa,tex:{x:C.paddedRect.x+1+k,y:C.paddedRect.y+1+G,w:mn.stretch+mn.fixed-k,h:qi.stretch+qi.fixed-G},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:f,pixelOffsetBR:v,minFontScaleX:Ot/T/Di,minFontScaleY:mi/T/vi,isSDF:l}};if(m&&(C.stretchX||C.stretchY)){const Wt=oA($,Ie,ve),un=oA(ie,qe,we);for(let mn=0;mn<Wt.length-1;mn++){const qi=Wt[mn],Ri=Wt[mn+1];for(let zn=0;zn<un.length-1;zn++)_.push(_i(qi,un[zn],Ri,un[zn+1]))}}else _.push(_i({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:L+1},{fixed:0,stretch:D+1}));return _}function Hh(h,s,l){let m=0;for(const _ of h)m+=Math.max(s,Math.min(l,_[1]))-Math.max(s,Math.min(l,_[0]));return m}function oA(h,s,l){const m=[{fixed:-1,stretch:0}];for(const[_,C]of h){const T=m[m.length-1];m.push({fixed:_-T.stretch,stretch:T.stretch}),m.push({fixed:_-T.stretch,stretch:T.stretch+(C-_)})}return m.push({fixed:s+1,stretch:l}),m}function Up(h,s,l,m){return h/s*l+m}function Dp(h,s,l,m){return h-s*l/m}Pe("Anchor",aA);class jA{constructor(s,l,m,_,C,T,L,D,q,$){var ie;if(this.boxStartIndex=s.length,q){let he=T.top,ve=T.bottom;const we=T.collisionPadding;we&&(he-=we[1],ve+=we[3]);let Ie=ve-he;Ie>0&&(Ie=Math.max(10,Ie),this.circleDiameter=Ie)}else{const he=!((ie=T.image)===null||ie===void 0)&&ie.content&&(T.image.textFitWidth||T.image.textFitHeight)?tg(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};he.y1=he.y1*L-D[0],he.y2=he.y2*L+D[2],he.x1=he.x1*L-D[3],he.x2=he.x2*L+D[1];const ve=T.collisionPadding;if(ve&&(he.x1-=ve[0]*L,he.y1-=ve[1]*L,he.x2+=ve[2]*L,he.y2+=ve[3]*L),$){const we=new g(he.x1,he.y1),Ie=new g(he.x2,he.y1),qe=new g(he.x1,he.y2),Xe=new g(he.x2,he.y2),xt=$*Math.PI/180;we._rotate(xt),Ie._rotate(xt),qe._rotate(xt),Xe._rotate(xt),he.x1=Math.min(we.x,Ie.x,qe.x,Xe.x),he.x2=Math.max(we.x,Ie.x,qe.x,Xe.x),he.y1=Math.min(we.y,Ie.y,qe.y,Xe.y),he.y2=Math.max(we.y,Ie.y,qe.y,Xe.y)}s.emplaceBack(l.x,l.y,he.x1,he.y1,he.x2,he.y2,m,_,C)}this.boxEndIndex=s.length}}class fy{constructor(s=[],l=(m,_)=>m<_?-1:m>_?1:0){if(this.data=s,this.length=this.data.length,this.compare=l,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:l,compare:m}=this,_=l[s];for(;s>0;){const C=s-1>>1,T=l[C];if(m(_,T)>=0)break;l[s]=T,s=C}l[s]=_}_down(s){const{data:l,compare:m}=this,_=this.length>>1,C=l[s];for(;s<_;){let T=1+(s<<1);const L=T+1;if(L<this.length&&m(l[L],l[T])<0&&(T=L),m(l[T],C)>=0)break;l[s]=l[T],s=T}l[s]=C}}function K1(h,s=1,l=!1){const m=zh.fromPoints(h[0]),_=Math.min(m.width(),m.height());let C=_/2;const T=new fy([],W1),{minX:L,minY:D,maxX:q,maxY:$}=m;if(_===0)return new g(L,D);for(let ve=L;ve<q;ve+=_)for(let we=D;we<$;we+=_)T.push(new kd(ve+C,we+C,C,h));let ie=function(ve){let we=0,Ie=0,qe=0;const Xe=ve[0];for(let xt=0,rt=Xe.length,At=rt-1;xt<rt;At=xt++){const kt=Xe[xt],Ot=Xe[At],ni=kt.x*Ot.y-Ot.x*kt.y;Ie+=(kt.x+Ot.x)*ni,qe+=(kt.y+Ot.y)*ni,we+=3*ni}return new kd(Ie/we,qe/we,0,ve)}(h),he=T.length;for(;T.length;){const ve=T.pop();(ve.d>ie.d||!ie.d)&&(ie=ve,l&&console.log("found best %d after %d probes",Math.round(1e4*ve.d)/1e4,he)),ve.max-ie.d<=s||(C=ve.h/2,T.push(new kd(ve.p.x-C,ve.p.y-C,C,h)),T.push(new kd(ve.p.x+C,ve.p.y-C,C,h)),T.push(new kd(ve.p.x-C,ve.p.y+C,C,h)),T.push(new kd(ve.p.x+C,ve.p.y+C,C,h)),he+=4)}return l&&(console.log(`num probes: ${he}`),console.log(`best distance: ${ie.d}`)),ie.p}function W1(h,s){return s.max-h.max}function kd(h,s,l,m){this.p=new g(h,s),this.h=l,this.d=function(_,C){let T=!1,L=1/0;for(let D=0;D<C.length;D++){const q=C[D];for(let $=0,ie=q.length,he=ie-1;$<ie;he=$++){const ve=q[$],we=q[he];ve.y>_.y!=we.y>_.y&&_.x<(we.x-ve.x)*(_.y-ve.y)/(we.y-ve.y)+ve.x&&(T=!T),L=Math.min(L,Em(_,ve,we))}}return(T?1:-1)*Math.sqrt(L)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var po;A.aE=void 0,(po=A.aE||(A.aE={}))[po.center=1]="center",po[po.left=2]="left",po[po.right=3]="right",po[po.top=4]="top",po[po.bottom=5]="bottom",po[po["top-left"]=6]="top-left",po[po["top-right"]=7]="top-right",po[po["bottom-left"]=8]="bottom-left",po[po["bottom-right"]=9]="bottom-right";const ug=Number.POSITIVE_INFINITY;function py(h,s){return s[1]!==ug?function(l,m,_){let C=0,T=0;switch(m=Math.abs(m),_=Math.abs(_),l){case"top-right":case"top-left":case"top":T=_-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-_}switch(l){case"top-right":case"bottom-right":case"right":C=-m;break;case"top-left":case"bottom-left":case"left":C=m}return[C,T]}(h,s[0],s[1]):function(l,m){let _=0,C=0;m<0&&(m=0);const T=m/Math.SQRT2;switch(l){case"top-right":case"top-left":C=T-7;break;case"bottom-right":case"bottom-left":C=7-T;break;case"bottom":C=7-m;break;case"top":C=m-7}switch(l){case"top-right":case"bottom-right":_=-T;break;case"top-left":case"bottom-left":_=T;break;case"left":_=m;break;case"right":_=-m}return[_,C]}(h,s[0])}function my(h,s,l){var m;const _=h.layout,C=(m=_.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(s,{},l);if(C){const L=C.values,D=[];for(let q=0;q<L.length;q+=2){const $=D[q]=L[q],ie=L[q+1].map(he=>he*_a);$.startsWith("top")?ie[1]-=7:$.startsWith("bottom")&&(ie[1]+=7),D[q+1]=ie}return new Kr(D)}const T=_.get("text-variable-anchor");if(T){let L;L=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(s,{},l)*_a,ug]:_.get("text-offset").evaluate(s,{},l).map(q=>q*_a);const D=[];for(const q of T)D.push(q,py(q,L));return new Kr(D)}return null}function Rp(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function jd(h,s,l,m,_,C,T,L,D,q,$,ie){let he=C.textMaxSize.evaluate(s,{});he===void 0&&(he=T);const ve=h.layers[0].layout,we=ve.get("icon-offset").evaluate(s,{},$),Ie=Ag(l.horizontal),qe=T/24,Xe=h.tilePixelRatio*qe,xt=h.tilePixelRatio*he/24,rt=h.tilePixelRatio*L,At=h.tilePixelRatio*ve.get("symbol-spacing"),kt=ve.get("text-padding")*h.tilePixelRatio,Ot=function(mn,qi,Ri,zn=1){const ts=mn.get("icon-padding").evaluate(qi,{},Ri),Hs=ts&&ts.values;return[Hs[0]*zn,Hs[1]*zn,Hs[2]*zn,Hs[3]*zn]}(ve,s,$,h.tilePixelRatio),ni=ve.get("text-max-angle")/180*Math.PI,mi=ve.get("text-rotation-alignment")!=="viewport"&&ve.get("symbol-placement")!=="point",pi=ve.get("icon-rotation-alignment")==="map"&&ve.get("symbol-placement")!=="point",gi=ve.get("symbol-placement"),Di=At/2,vi=ve.get("icon-text-fit");let _i;m&&vi!=="none"&&(h.allowVerticalPlacement&&l.vertical&&(_i=ig(m,l.vertical,vi,ve.get("icon-text-fit-padding"),we,qe)),Ie&&(m=ig(m,Ie,vi,ve.get("icon-text-fit-padding"),we,qe)));const Wt=$?ie.line.getGranularityForZoomLevel($.z):1,un=(mn,qi)=>{qi.x<0||qi.x>=ke||qi.y<0||qi.y>=ke||function(Ri,zn,ts,Hs,Va,jo,Uo,aa,cs,Ia,oa,c,f,v,E,k,G,ye,je,at,Ct,Zt,ci,Rt,Ht){const vn=Ri.addToLineVertexArray(zn,ts);let An,Br,St,vt,Ut=0,li=0,Wi=0,Zn=0,on=-1,xn=-1;const ys={};let Cr=Fu("");if(Ri.allowVerticalPlacement&&Hs.vertical){const kl=aa.layout.get("text-rotate").evaluate(Ct,{},Rt)+90;St=new jA(cs,zn,Ia,oa,c,Hs.vertical,f,v,E,kl),Uo&&(vt=new jA(cs,zn,Ia,oa,c,Uo,G,ye,E,kl))}if(Va){const kl=aa.layout.get("icon-rotate").evaluate(Ct,{}),Mu=aa.layout.get("icon-text-fit")!=="none",Ff=cg(Va,kl,ci,Mu),RA=Uo?cg(Uo,kl,ci,Mu):void 0;Br=new jA(cs,zn,Ia,oa,c,Va,G,ye,!1,kl),Ut=4*Ff.length;const Nf=Ri.iconSizeData;let fh=null;Nf.kind==="source"?(fh=[LA*aa.layout.get("icon-size").evaluate(Ct,{})],fh[0]>sA&&bi(`${Ri.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Nf.kind==="composite"&&(fh=[LA*Zt.compositeIconSizes[0].evaluate(Ct,{},Rt),LA*Zt.compositeIconSizes[1].evaluate(Ct,{},Rt)],(fh[0]>sA||fh[1]>sA)&&bi(`${Ri.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ri.addSymbols(Ri.icon,Ff,fh,at,je,Ct,A.ao.none,zn,vn.lineStartIndex,vn.lineLength,-1,Rt),on=Ri.icon.placedSymbolArray.length-1,RA&&(li=4*RA.length,Ri.addSymbols(Ri.icon,RA,fh,at,je,Ct,A.ao.vertical,zn,vn.lineStartIndex,vn.lineLength,-1,Rt),xn=Ri.icon.placedSymbolArray.length-1)}const UA=Object.keys(Hs.horizontal);for(const kl of UA){const Mu=Hs.horizontal[kl];if(!An){Cr=Fu(Mu.text);const RA=aa.layout.get("text-rotate").evaluate(Ct,{},Rt);An=new jA(cs,zn,Ia,oa,c,Mu,f,v,E,RA)}const Ff=Mu.positionedLines.length===1;if(Wi+=Ud(Ri,zn,Mu,jo,aa,E,Ct,k,vn,Hs.vertical?A.ao.horizontal:A.ao.horizontalOnly,Ff?UA:[kl],ys,on,Zt,Rt),Ff)break}Hs.vertical&&(Zn+=Ud(Ri,zn,Hs.vertical,jo,aa,E,Ct,k,vn,A.ao.vertical,["vertical"],ys,xn,Zt,Rt));const X1=An?An.boxStartIndex:Ri.collisionBoxArray.length,Q3=An?An.boxEndIndex:Ri.collisionBoxArray.length,z3=St?St.boxStartIndex:Ri.collisionBoxArray.length,H3=St?St.boxEndIndex:Ri.collisionBoxArray.length,V3=Br?Br.boxStartIndex:Ri.collisionBoxArray.length,q3=Br?Br.boxEndIndex:Ri.collisionBoxArray.length,G3=vt?vt.boxStartIndex:Ri.collisionBoxArray.length,K3=vt?vt.boxEndIndex:Ri.collisionBoxArray.length;let DA=-1;const gy=(kl,Mu)=>kl&&kl.circleDiameter?Math.max(kl.circleDiameter,Mu):Mu;DA=gy(An,DA),DA=gy(St,DA),DA=gy(Br,DA),DA=gy(vt,DA);const f2=DA>-1?1:0;f2&&(DA*=Ht/_a),Ri.glyphOffsetArray.length>=PA.MAX_GLYPHS&&bi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ct.sortKey!==void 0&&Ri.addToSortKeyRanges(Ri.symbolInstances.length,Ct.sortKey);const W3=my(aa,Ct,Rt),[$3,Z3]=function(kl,Mu){const Ff=kl.length,RA=Mu?.values;if(RA?.length>0)for(let Nf=0;Nf<RA.length;Nf+=2){const fh=RA[Nf+1];kl.emplaceBack(A.aE[RA[Nf]],fh[0],fh[1])}return[Ff,kl.length]}(Ri.textAnchorOffsets,W3);Ri.symbolInstances.emplaceBack(zn.x,zn.y,ys.right>=0?ys.right:-1,ys.center>=0?ys.center:-1,ys.left>=0?ys.left:-1,ys.vertical||-1,on,xn,Cr,X1,Q3,z3,H3,V3,q3,G3,K3,Ia,Wi,Zn,Ut,li,f2,0,f,DA,$3,Z3)}(h,qi,mn,l,m,_,_i,h.layers[0],h.collisionBoxArray,s.index,s.sourceLayerIndex,h.index,Xe,[kt,kt,kt,kt],mi,D,rt,Ot,pi,we,s,C,q,$,T)};if(gi==="line")for(const mn of Ay(s.geometry,0,0,ke,ke)){const qi=su(mn,Wt),Ri=wf(qi,At,ni,l.vertical||Ie,m,24,xt,h.overscaling,ke);for(const zn of Ri)Ie&&$1(h,Ie.text,Di,zn)||un(qi,zn)}else if(gi==="line-center"){for(const mn of s.geometry)if(mn.length>1){const qi=su(mn,Wt),Ri=dy(qi,ni,l.vertical||Ie,m,24,xt);Ri&&un(qi,Ri)}}else if(s.type==="Polygon")for(const mn of fa(s.geometry,0)){const qi=K1(mn,16);un(su(mn[0],Wt,!0),new aA(qi.x,qi.y,0))}else if(s.type==="LineString")for(const mn of s.geometry){const qi=su(mn,Wt);un(qi,new aA(qi[0].x,qi[0].y,0))}else if(s.type==="Point")for(const mn of s.geometry)for(const qi of mn)un([qi],new aA(qi.x,qi.y,0))}function Ud(h,s,l,m,_,C,T,L,D,q,$,ie,he,ve,we){const Ie=function(xt,rt,At,kt,Ot,ni,mi,pi){const gi=kt.layout.get("text-rotate").evaluate(ni,{})*Math.PI/180,Di=[];for(const vi of rt.positionedLines)for(const _i of vi.positionedGlyphs){if(!_i.rect)continue;const Wt=_i.rect||{};let un=4,mn=!0,qi=1,Ri=0;const zn=(Ot||pi)&&_i.vertical,ts=_i.metrics.advance*_i.scale/2;if(pi&&rt.verticalizable&&(Ri=vi.lineOffset/2-(_i.imageName?-(_a-_i.metrics.width*_i.scale)/2:(_i.scale-1)*_a)),_i.imageName){const ye=mi[_i.imageName];mn=ye.sdf,qi=ye.pixelRatio,un=1/qi}const Hs=Ot?[_i.x+ts,_i.y]:[0,0];let Va=Ot?[0,0]:[_i.x+ts+At[0],_i.y+At[1]-Ri],jo=[0,0];zn&&(jo=Va,Va=[0,0]);const Uo=_i.metrics.isDoubleResolution?2:1,aa=(_i.metrics.left-un)*_i.scale-ts+Va[0],cs=(-_i.metrics.top-un)*_i.scale+Va[1],Ia=aa+Wt.w/Uo*_i.scale/qi,oa=cs+Wt.h/Uo*_i.scale/qi,c=new g(aa,cs),f=new g(Ia,cs),v=new g(aa,oa),E=new g(Ia,oa);if(zn){const ye=new g(-ts,ts- -17),je=-Math.PI/2,at=12-ts,Ct=new g(22-at,-(_i.imageName?at:0)),Zt=new g(...jo);c._rotateAround(je,ye)._add(Ct)._add(Zt),f._rotateAround(je,ye)._add(Ct)._add(Zt),v._rotateAround(je,ye)._add(Ct)._add(Zt),E._rotateAround(je,ye)._add(Ct)._add(Zt)}if(gi){const ye=Math.sin(gi),je=Math.cos(gi),at=[je,-ye,ye,je];c._matMult(at),f._matMult(at),v._matMult(at),E._matMult(at)}const k=new g(0,0),G=new g(0,0);Di.push({tl:c,tr:f,bl:v,br:E,tex:Wt,writingMode:rt.writingMode,glyphOffset:Hs,sectionIndex:_i.sectionIndex,isSDF:mn,pixelOffsetTL:k,pixelOffsetBR:G,minFontScaleX:0,minFontScaleY:0})}return Di}(0,l,L,_,C,T,m,h.allowVerticalPlacement),qe=h.textSizeData;let Xe=null;qe.kind==="source"?(Xe=[LA*_.layout.get("text-size").evaluate(T,{})],Xe[0]>sA&&bi(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):qe.kind==="composite"&&(Xe=[LA*ve.compositeTextSizes[0].evaluate(T,{},we),LA*ve.compositeTextSizes[1].evaluate(T,{},we)],(Xe[0]>sA||Xe[1]>sA)&&bi(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),h.addSymbols(h.text,Ie,Xe,L,C,T,q,s,D.lineStartIndex,D.lineLength,he,we);for(const xt of $)ie[xt]=h.text.placedSymbolArray.length-1;return 4*Ie.length}function Ag(h){for(const s in h)return h[s];return null}function $1(h,s,l,m){const _=h.compareText;if(s in _){const C=_[s];for(let T=C.length-1;T>=0;T--)if(m.dist(C[T])<l)return!0}else _[s]=[];return _[s].push(m),!1}const Vh=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class qh{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,m]=new Uint8Array(s,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=m>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const C=Vh[15&m];if(!C)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(s,2,1),[L]=new Uint32Array(s,4,1);return new qh(L,T,C,s)}constructor(s,l=64,m=Float64Array,_){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=m,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const C=Vh.indexOf(this.ArrayType),T=2*s*this.ArrayType.BYTES_PER_ELEMENT,L=s*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-L%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${m}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+L+D,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+T+L+D),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+L+D,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=s)}add(s,l){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=s,this.coords[this._pos++]=l,m}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return Op(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,l,m,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:T,nodeSize:L}=this,D=[0,C.length-1,0],q=[];for(;D.length;){const $=D.pop()||0,ie=D.pop()||0,he=D.pop()||0;if(ie-he<=L){for(let qe=he;qe<=ie;qe++){const Xe=T[2*qe],xt=T[2*qe+1];Xe>=s&&Xe<=m&&xt>=l&&xt<=_&&q.push(C[qe])}continue}const ve=he+ie>>1,we=T[2*ve],Ie=T[2*ve+1];we>=s&&we<=m&&Ie>=l&&Ie<=_&&q.push(C[ve]),($===0?s<=we:l<=Ie)&&(D.push(he),D.push(ve-1),D.push(1-$)),($===0?m>=we:_>=Ie)&&(D.push(ve+1),D.push(ie),D.push(1-$))}return q}within(s,l,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:C,nodeSize:T}=this,L=[0,_.length-1,0],D=[],q=m*m;for(;L.length;){const $=L.pop()||0,ie=L.pop()||0,he=L.pop()||0;if(ie-he<=T){for(let qe=he;qe<=ie;qe++)Sf(C[2*qe],C[2*qe+1],s,l)<=q&&D.push(_[qe]);continue}const ve=he+ie>>1,we=C[2*ve],Ie=C[2*ve+1];Sf(we,Ie,s,l)<=q&&D.push(_[ve]),($===0?s-m<=we:l-m<=Ie)&&(L.push(he),L.push(ve-1),L.push(1-$)),($===0?s+m>=we:l+m>=Ie)&&(L.push(ve+1),L.push(ie),L.push(1-$))}return D}}function Op(h,s,l,m,_,C){if(_-m<=l)return;const T=m+_>>1;Bf(h,s,T,m,_,C),Op(h,s,l,m,T-1,1-C),Op(h,s,l,T+1,_,1-C)}function Bf(h,s,l,m,_,C){for(;_>m;){if(_-m>600){const q=_-m+1,$=l-m+1,ie=Math.log(q),he=.5*Math.exp(2*ie/3),ve=.5*Math.sqrt(ie*he*(q-he)/q)*($-q/2<0?-1:1);Bf(h,s,l,Math.max(m,Math.floor(l-$*he/q+ve)),Math.min(_,Math.floor(l+(q-$)*he/q+ve)),C)}const T=s[2*l+C];let L=m,D=_;for(Gh(h,s,m,l),s[2*_+C]>T&&Gh(h,s,m,_);L<D;){for(Gh(h,s,L,D),L++,D--;s[2*L+C]<T;)L++;for(;s[2*D+C]>T;)D--}s[2*m+C]===T?Gh(h,s,m,D):(D++,Gh(h,s,D,_)),D<=l&&(m=D+1),l<=D&&(_=D-1)}}function Gh(h,s,l,m){Cf(h,l,m),Cf(s,2*l,2*m),Cf(s,2*l+1,2*m+1)}function Cf(h,s,l){const m=h[s];h[s]=h[l],h[l]=m}function Sf(h,s,l,m){const _=h-l,C=s-m;return _*_+C*C}var Qp;A.cx=void 0,(Qp=A.cx||(A.cx={})).create="create",Qp.load="load",Qp.fullLoad="fullLoad";let Ef=null,Tf=[];const zp=1e3/60,Kh="loadTime",hg="fullLoadTime",Z1={mark(h){performance.mark(h)},frame(h){const s=h;Ef!=null&&Tf.push(s-Ef),Ef=s},clearMetrics(){Ef=null,Tf=[],performance.clearMeasures(Kh),performance.clearMeasures(hg);for(const h in A.cx)performance.clearMarks(A.cx[h])},getPerformanceMetrics(){performance.measure(Kh,A.cx.create,A.cx.load),performance.measure(hg,A.cx.create,A.cx.fullLoad);const h=performance.getEntriesByName(Kh)[0].duration,s=performance.getEntriesByName(hg)[0].duration,l=Tf.length,m=1/(Tf.reduce((C,T)=>C+T,0)/l/1e3),_=Tf.filter(C=>C>zp).reduce((C,T)=>C+(T-zp)/zp,0);return{loadTime:h,fullLoadTime:s,fps:m,percentDroppedFrames:_/(l+_)*100,totalFrames:l}}};A.$=ke,A.A=W,A.B=function([h,s,l]){return s+=90,s*=Math.PI/180,l*=Math.PI/180,{x:h*Math.cos(s)*Math.sin(l),y:h*Math.sin(s)*Math.sin(l),z:h*Math.cos(l)}},A.C=da,A.D=xi,A.E=Ui,A.F=en,A.G=le,A.H=yi,A.I=bp,A.J=class{constructor(h,s){this.target=h,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new ay(()=>this.process()),this.subscription=$i(this.target,"message",l=>this.receive(l),!1),this.globalScope=$e(self)?h:window}registerMessageHandler(h,s){this.messageHandlers[h]=s}sendAsync(h,s){return new Promise((l,m)=>{const _=Math.round(1e18*Math.random()).toString(36).substring(0,10),C=s?$i(s.signal,"abort",()=>{C?.unsubscribe(),delete this.resolveRejects[_];const D={id:_,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(D)},oy):null;this.resolveRejects[_]={resolve:D=>{C?.unsubscribe(),l(D)},reject:D=>{C?.unsubscribe(),m(D)}};const T=[],L=Object.assign(Object.assign({},h),{id:_,sourceMapId:this.mapId,origin:location.origin,data:Bt(h.data,T)});this.target.postMessage(L,{transfer:T})})}receive(h){const s=h.data,l=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[l];const m=this.abortControllers[l];return delete this.abortControllers[l],void(m&&m.abort())}if($e(self)||s.mustQueue)return this.tasks[l]=s,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,s)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),s=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(h,s)}processTask(h,s){return a(this,void 0,void 0,function*(){if(s.type==="<response>"){const _=this.resolveRejects[h];return delete this.resolveRejects[h],_?void(s.error?_.reject(ti(s.error)):_.resolve(ti(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=ti(s.data),m=new AbortController;this.abortControllers[h]=m;try{const _=yield this.messageHandlers[s.type](s.sourceMapId,l,m);this.completeTask(h,null,_)}catch(_){this.completeTask(h,_)}})}completeTask(h,s,l){const m=[];delete this.abortControllers[h];const _={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?Bt(s):null,data:Bt(l,m)};this.target.postMessage(_,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},A.K=Ze,A.L=function(){var h=new W(16);return W!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},A.M=function(h,s,l){var m,_,C,T,L,D,q,$,ie,he,ve,we,Ie=l[0],qe=l[1],Xe=l[2];return s===h?(h[12]=s[0]*Ie+s[4]*qe+s[8]*Xe+s[12],h[13]=s[1]*Ie+s[5]*qe+s[9]*Xe+s[13],h[14]=s[2]*Ie+s[6]*qe+s[10]*Xe+s[14],h[15]=s[3]*Ie+s[7]*qe+s[11]*Xe+s[15]):(_=s[1],C=s[2],T=s[3],L=s[4],D=s[5],q=s[6],$=s[7],ie=s[8],he=s[9],ve=s[10],we=s[11],h[0]=m=s[0],h[1]=_,h[2]=C,h[3]=T,h[4]=L,h[5]=D,h[6]=q,h[7]=$,h[8]=ie,h[9]=he,h[10]=ve,h[11]=we,h[12]=m*Ie+L*qe+ie*Xe+s[12],h[13]=_*Ie+D*qe+he*Xe+s[13],h[14]=C*Ie+q*qe+ve*Xe+s[14],h[15]=T*Ie+$*qe+we*Xe+s[15]),h},A.N=function(h,s,l){var m=l[0],_=l[1],C=l[2];return h[0]=s[0]*m,h[1]=s[1]*m,h[2]=s[2]*m,h[3]=s[3]*m,h[4]=s[4]*_,h[5]=s[5]*_,h[6]=s[6]*_,h[7]=s[7]*_,h[8]=s[8]*C,h[9]=s[9]*C,h[10]=s[10]*C,h[11]=s[11]*C,h[12]=s[12],h[13]=s[13],h[14]=s[14],h[15]=s[15],h},A.O=function(h,s,l){var m=s[0],_=s[1],C=s[2],T=s[3],L=s[4],D=s[5],q=s[6],$=s[7],ie=s[8],he=s[9],ve=s[10],we=s[11],Ie=s[12],qe=s[13],Xe=s[14],xt=s[15],rt=l[0],At=l[1],kt=l[2],Ot=l[3];return h[0]=rt*m+At*L+kt*ie+Ot*Ie,h[1]=rt*_+At*D+kt*he+Ot*qe,h[2]=rt*C+At*q+kt*ve+Ot*Xe,h[3]=rt*T+At*$+kt*we+Ot*xt,h[4]=(rt=l[4])*m+(At=l[5])*L+(kt=l[6])*ie+(Ot=l[7])*Ie,h[5]=rt*_+At*D+kt*he+Ot*qe,h[6]=rt*C+At*q+kt*ve+Ot*Xe,h[7]=rt*T+At*$+kt*we+Ot*xt,h[8]=(rt=l[8])*m+(At=l[9])*L+(kt=l[10])*ie+(Ot=l[11])*Ie,h[9]=rt*_+At*D+kt*he+Ot*qe,h[10]=rt*C+At*q+kt*ve+Ot*Xe,h[11]=rt*T+At*$+kt*we+Ot*xt,h[12]=(rt=l[12])*m+(At=l[13])*L+(kt=l[14])*ie+(Ot=l[15])*Ie,h[13]=rt*_+At*D+kt*he+Ot*qe,h[14]=rt*C+At*q+kt*ve+Ot*Xe,h[15]=rt*T+At*$+kt*we+Ot*xt,h},A.P=g,A.Q=function(h,s){const l={};for(let m=0;m<s.length;m++){const _=s[m];_ in h&&(l[_]=h[_])}return l},A.R=Ha,A.S=hr,A.T=Ih,A.U=Ip,A.V=ly,A.W=H,A.X=j,A.Y=ei,A.Z=ac,A._=a,A.a=ge,A.a$=ce,A.a0=function(h,s){var l,m,_,C,T;if(!h)return s??{};if(!s)return h;let L=Object.assign({},h);if(s.removeAll&&(L={removeAll:!0}),s.remove){const D=new Set(s.remove);L.add&&(L.add=L.add.filter($=>!D.has($.id))),L.update&&(L.update=L.update.filter($=>!D.has($.id)));const q=new Set(((l=h.add)!==null&&l!==void 0?l:[]).map($=>$.id));s.remove=s.remove.filter($=>!q.has($))}if(s.remove){const D=new Set(L.remove?L.remove.concat(s.remove):s.remove);L.remove=Array.from(D.values())}if(s.add){const D=L.add?L.add.concat(s.add):s.add,q=new Map(D.map($=>[$.id,$]));L.add=Array.from(q.values())}if(s.update){const D=new Map((m=L.update)===null||m===void 0?void 0:m.map(q=>[q.id,q]));for(const q of s.update){const $=(_=D.get(q.id))!==null&&_!==void 0?_:{id:q.id};q.newGeometry&&($.newGeometry=q.newGeometry),q.addOrUpdateProperties&&($.addOrUpdateProperties=((C=$.addOrUpdateProperties)!==null&&C!==void 0?C:[]).concat(q.addOrUpdateProperties)),q.removeProperties&&($.removeProperties=((T=$.removeProperties)!==null&&T!==void 0?T:[]).concat(q.removeProperties)),q.removeAllProperties&&($.removeAllProperties=!0),D.set(q.id,$)}L.update=Array.from(D.values())}return L.remove&&L.add&&(L.remove=L.remove.filter(D=>L.add.findIndex(q=>q.id===D)===-1)),L},A.a1=Id,A.a2=zh,A.a3=25,A.a4=bf,A.a5=h=>{const s=window.document.createElement("video");return s.muted=!0,new Promise(l=>{s.onloadstart=()=>{l(s)};for(const m of h){const _=window.document.createElement("source");dt(m)||(s.crossOrigin="Anonymous"),_.src=m,s.appendChild(_)}})},A.a6=Kt,A.a7=function(){return Et++},A.a8=Ae,A.a9=PA,A.aA=function(h){let s=1/0,l=1/0,m=-1/0,_=-1/0;for(const C of h)s=Math.min(s,C.x),l=Math.min(l,C.y),m=Math.max(m,C.x),_=Math.max(_,C.y);return[s,l,m,_]},A.aB=_a,A.aC=pe,A.aD=function(h,s,l,m,_=!1){if(!l[0]&&!l[1])return[0,0];const C=_?m==="map"?-h.bearingInRadians:0:m==="viewport"?h.bearingInRadians:0;if(C){const T=Math.sin(C),L=Math.cos(C);l=[l[0]*L-l[1]*T,l[0]*T+l[1]*L]}return[_?l[0]:pe(s,l[0],h.zoom),_?l[1]:pe(s,l[1],h.zoom)]},A.aF=ng,A.aG=Rp,A.aH=Rh,A.aI=qh,A.aJ=Fr,A.aK=Uc,A.aL=ht,A.aM=Ln,A.aN=sr,A.aO=_t,A.aP=wi,A.aQ=ag,A.aR=Be,A.aS=xe,A.aT=function(h){var s=new W(3);return s[0]=h[0],s[1]=h[1],s[2]=h[2],s},A.aU=function(h,s,l){return h[0]=s[0]-l[0],h[1]=s[1]-l[1],h[2]=s[2]-l[2],h},A.aV=function(h,s){var l=s[0],m=s[1],_=s[2],C=l*l+m*m+_*_;return C>0&&(C=1/Math.sqrt(C)),h[0]=s[0]*C,h[1]=s[1]*C,h[2]=s[2]*C,h},A.aW=se,A.aX=function(h,s){return h[0]*s[0]+h[1]*s[1]+h[2]*s[2]},A.aY=function(h,s,l){return h[0]=s[0]*l[0],h[1]=s[1]*l[1],h[2]=s[2]*l[2],h[3]=s[3]*l[3],h},A.aZ=ee,A.a_=function(h,s,l){const m=s[0]*l[0]+s[1]*l[1]+s[2]*l[2];return m===0?null:(-(h[0]*l[0]+h[1]*l[1]+h[2]*l[2])-l[3])/m},A.aa=Ic,A.ab=sh,A.ac=kA,A.ad=function(h){const s={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,m,_,C)=>{const T=_||C;return s[m]=!T||T.toLowerCase(),""}),s["max-age"]){const l=parseInt(s["max-age"],10);isNaN(l)?delete s["max-age"]:s["max-age"]=l}return s},A.ae=zi,A.af=function(h){return Math.pow(2,h)},A.ag=te,A.ah=Ke,A.ai=85.051129,A.aj=Lp,A.ak=function(h){return Math.log(h)/Math.LN2},A.al=function(h){var s=h[0],l=h[1];return s*s+l*l},A.am=function(h){if(!h.length)return new Set;const s=Math.max(...h.map(D=>D.canonical.z));let l=1/0,m=-1/0,_=1/0,C=-1/0;const T=[];for(const D of h){const{x:q,y:$,z:ie}=D.canonical,he=Math.pow(2,s-ie),ve=q*he,we=$*he;T.push({id:D,x:ve,y:we}),ve<l&&(l=ve),ve>m&&(m=ve),we<_&&(_=we),we>C&&(C=we)}const L=new Set;for(const D of T)D.x!==l&&D.x!==m&&D.y!==_&&D.y!==C||L.add(D.id);return L},A.an=function(h,s){let l=0,m=0;if(h.kind==="constant")m=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:_,minZoom:C,maxZoom:T}=h,L=_?Ke(rs.interpolationFactor(_,s,C,T),0,1):0;h.kind==="camera"?m=da.number(h.minSize,h.maxSize,L):l=L}return{uSizeT:l,uSize:m}},A.ap=function(h,{uSize:s,uSizeT:l},{lowerSize:m,upperSize:_}){return h.kind==="source"?m/LA:h.kind==="composite"?da.number(m/LA,_/LA,l):s},A.aq=function(h,s){var l=s[0],m=s[1],_=s[2],C=s[3],T=s[4],L=s[5],D=s[6],q=s[7],$=s[8],ie=s[9],he=s[10],ve=s[11],we=s[12],Ie=s[13],qe=s[14],Xe=s[15],xt=l*L-m*T,rt=l*D-_*T,At=l*q-C*T,kt=m*D-_*L,Ot=m*q-C*L,ni=_*q-C*D,mi=$*Ie-ie*we,pi=$*qe-he*we,gi=$*Xe-ve*we,Di=ie*qe-he*Ie,vi=ie*Xe-ve*Ie,_i=he*Xe-ve*qe,Wt=xt*_i-rt*vi+At*Di+kt*gi-Ot*pi+ni*mi;return Wt?(h[0]=(L*_i-D*vi+q*Di)*(Wt=1/Wt),h[1]=(_*vi-m*_i-C*Di)*Wt,h[2]=(Ie*ni-qe*Ot+Xe*kt)*Wt,h[3]=(he*Ot-ie*ni-ve*kt)*Wt,h[4]=(D*gi-T*_i-q*pi)*Wt,h[5]=(l*_i-_*gi+C*pi)*Wt,h[6]=(qe*At-we*ni-Xe*rt)*Wt,h[7]=($*ni-he*At+ve*rt)*Wt,h[8]=(T*vi-L*gi+q*mi)*Wt,h[9]=(m*gi-l*vi-C*mi)*Wt,h[10]=(we*Ot-Ie*At+Xe*xt)*Wt,h[11]=(ie*At-$*Ot-ve*xt)*Wt,h[12]=(L*pi-T*Di-D*mi)*Wt,h[13]=(l*Di-m*pi+_*mi)*Wt,h[14]=(Ie*rt-we*kt-qe*xt)*Wt,h[15]=($*kt-ie*rt+he*xt)*Wt,h):null},A.ar=fe,A.as=function(h){var s=h[0],l=h[1];return Math.sqrt(s*s+l*l)},A.at=function(h){return h[0]=0,h[1]=0,h},A.au=function(h,s,l){return h[0]=s[0]*l,h[1]=s[1]*l,h},A.av=rg,A.aw=Ee,A.ax=function(h,s,l,m){const _=s.y-h.y,C=s.x-h.x,T=m.y-l.y,L=m.x-l.x,D=T*C-L*_;if(D===0)return null;const q=(L*(h.y-l.y)-T*(h.x-l.x))/D;return new g(h.x+q*C,h.y+q*_)},A.ay=Ay,A.az=L0,A.b=si,A.b$=class extends Ma{constructor(h,s){super(h,s),this.current=new Array}set(h){if(h!=this.current){this.current=h;const s=new Float32Array(h);this.gl.uniform1fv(this.location,s)}}},A.b0=function(h,s,l){return h[0]=s[0]*l,h[1]=s[1]*l,h[2]=s[2]*l,h[3]=s[3]*l,h},A.b1=function(h,s){return h[0]*s[0]+h[1]*s[1]+h[2]*s[2]+h[3]},A.b2=cy,A.b3=Ld,A.b4=function(h,s,l,m,_){var C=1/Math.tan(s/2);if(h[0]=C/l,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=C,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,_!=null&&_!==1/0){var T=1/(m-_);h[10]=(_+m)*T,h[14]=2*_*m*T}else h[10]=-1,h[14]=-2*m;return h},A.b5=function(h){var s=new W(16);return s[0]=h[0],s[1]=h[1],s[2]=h[2],s[3]=h[3],s[4]=h[4],s[5]=h[5],s[6]=h[6],s[7]=h[7],s[8]=h[8],s[9]=h[9],s[10]=h[10],s[11]=h[11],s[12]=h[12],s[13]=h[13],s[14]=h[14],s[15]=h[15],s},A.b6=function(h,s,l){var m=Math.sin(l),_=Math.cos(l),C=s[0],T=s[1],L=s[2],D=s[3],q=s[4],$=s[5],ie=s[6],he=s[7];return s!==h&&(h[8]=s[8],h[9]=s[9],h[10]=s[10],h[11]=s[11],h[12]=s[12],h[13]=s[13],h[14]=s[14],h[15]=s[15]),h[0]=C*_+q*m,h[1]=T*_+$*m,h[2]=L*_+ie*m,h[3]=D*_+he*m,h[4]=q*_-C*m,h[5]=$*_-T*m,h[6]=ie*_-L*m,h[7]=he*_-D*m,h},A.b7=function(h,s,l){var m=Math.sin(l),_=Math.cos(l),C=s[4],T=s[5],L=s[6],D=s[7],q=s[8],$=s[9],ie=s[10],he=s[11];return s!==h&&(h[0]=s[0],h[1]=s[1],h[2]=s[2],h[3]=s[3],h[12]=s[12],h[13]=s[13],h[14]=s[14],h[15]=s[15]),h[4]=C*_+q*m,h[5]=T*_+$*m,h[6]=L*_+ie*m,h[7]=D*_+he*m,h[8]=q*_-C*m,h[9]=$*_-T*m,h[10]=ie*_-L*m,h[11]=he*_-D*m,h},A.b8=function(){const h=new Float32Array(16);return te(h),h},A.b9=function(){const h=new Float64Array(16);return te(h),h},A.bA=function(h,s){const l=Qe(h,360),m=Qe(s,360),_=m-l,C=m>l?_-360:_+360;return Math.abs(_)<Math.abs(C)?_:C},A.bB=function(h){return h[0]=0,h[1]=0,h[2]=0,h},A.bC=function(h,s,l,m){const _=Math.sqrt(h*h+s*s),C=Math.sqrt(l*l+m*m);h/=_,s/=_,l/=C,m/=C;const T=Math.acos(h*l+s*m);return-s*l+h*m>0?T:-T},A.bD=function(h,s){const l=Qe(h,2*Math.PI),m=Qe(s,2*Math.PI);return Math.min(Math.abs(l-m),Math.abs(l-m+2*Math.PI),Math.abs(l-m-2*Math.PI))},A.bE=function(){const h={},s=yt.$version;for(const l in yt.$root){const m=yt.$root[l];if(m.required){let _=null;_=l==="version"?s:m.type==="array"?[]:{},_!=null&&(h[l]=_)}}return h},A.bF=zt,A.bG=ut,A.bH=function h(s,l){if(Array.isArray(s)){if(!Array.isArray(l)||s.length!==l.length)return!1;for(let m=0;m<s.length;m++)if(!h(s[m],l[m]))return!1;return!0}if(typeof s=="object"&&s!==null&&l!==null){if(typeof l!="object"||Object.keys(s).length!==Object.keys(l).length)return!1;for(const m in s)if(!h(s[m],l[m]))return!1;return!0}return s===l},A.bI=function(h){h=h.slice();const s=Object.create(null);for(let l=0;l<h.length;l++)s[h[l].id]=h[l];for(let l=0;l<h.length;l++)"ref"in h[l]&&(h[l]=Vi(h[l],s[h[l].ref]));return h},A.bJ=function(h,s){if(h.type==="custom")return new q1(h,s);switch(h.type){case"background":return new V1(h,s);case"circle":return new j0(h,s);case"color-relief":return new Rm(h,s);case"fill":return new U1(h,s);case"fill-extrusion":return new Km(h,s);case"heatmap":return new L1(h,s);case"hillshade":return new oh(h,s);case"line":return new H0(h,s);case"raster":return new BA(h,s);case"symbol":return new Oh(h,s)}},A.bK=h=>h.type==="raster",A.bL=Yt,A.bM=function(h,s){if(!h)return[{command:"setStyle",args:[s]}];let l=[];try{if(!Mi(h.version,s.version))return[{command:"setStyle",args:[s]}];Mi(h.center,s.center)||l.push({command:"setCenter",args:[s.center]}),Mi(h.state,s.state)||l.push({command:"setGlobalState",args:[s.state]}),Mi(h.centerAltitude,s.centerAltitude)||l.push({command:"setCenterAltitude",args:[s.centerAltitude]}),Mi(h.zoom,s.zoom)||l.push({command:"setZoom",args:[s.zoom]}),Mi(h.bearing,s.bearing)||l.push({command:"setBearing",args:[s.bearing]}),Mi(h.pitch,s.pitch)||l.push({command:"setPitch",args:[s.pitch]}),Mi(h.roll,s.roll)||l.push({command:"setRoll",args:[s.roll]}),Mi(h.sprite,s.sprite)||l.push({command:"setSprite",args:[s.sprite]}),Mi(h.glyphs,s.glyphs)||l.push({command:"setGlyphs",args:[s.glyphs]}),Mi(h.transition,s.transition)||l.push({command:"setTransition",args:[s.transition]}),Mi(h.light,s.light)||l.push({command:"setLight",args:[s.light]}),Mi(h.terrain,s.terrain)||l.push({command:"setTerrain",args:[s.terrain]}),Mi(h.sky,s.sky)||l.push({command:"setSky",args:[s.sky]}),Mi(h.projection,s.projection)||l.push({command:"setProjection",args:[s.projection]});const m={},_=[];(function(T,L,D,q){let $;for($ in L=L||{},T=T||{})Object.prototype.hasOwnProperty.call(T,$)&&(Object.prototype.hasOwnProperty.call(L,$)||Er($,D,q));for($ in L)Object.prototype.hasOwnProperty.call(L,$)&&(Object.prototype.hasOwnProperty.call(T,$)?Mi(T[$],L[$])||(T[$].type==="geojson"&&L[$].type==="geojson"&&Fn(T,L,$)?sn(D,{command:"setGeoJSONSourceData",args:[$,L[$].data]}):Pi($,L,D,q)):vr($,L,D))})(h.sources,s.sources,_,m);const C=[];h.layers&&h.layers.forEach(T=>{"source"in T&&m[T.source]?l.push({command:"removeLayer",args:[T.id]}):C.push(T)}),l=l.concat(_),function(T,L,D){L=L||[];const q=(T=T||[]).map(Dn),$=L.map(Dn),ie=T.reduce(hn,{}),he=L.reduce(hn,{}),ve=q.slice(),we=Object.create(null);let Ie,qe,Xe,xt,rt;for(let At=0,kt=0;At<q.length;At++)Ie=q[At],Object.prototype.hasOwnProperty.call(he,Ie)?kt++:(sn(D,{command:"removeLayer",args:[Ie]}),ve.splice(ve.indexOf(Ie,kt),1));for(let At=0,kt=0;At<$.length;At++)Ie=$[$.length-1-At],ve[ve.length-1-At]!==Ie&&(Object.prototype.hasOwnProperty.call(ie,Ie)?(sn(D,{command:"removeLayer",args:[Ie]}),ve.splice(ve.lastIndexOf(Ie,ve.length-kt),1)):kt++,xt=ve[ve.length-At],sn(D,{command:"addLayer",args:[he[Ie],xt]}),ve.splice(ve.length-At,0,Ie),we[Ie]=!0);for(let At=0;At<$.length;At++)if(Ie=$[At],qe=ie[Ie],Xe=he[Ie],!we[Ie]&&!Mi(qe,Xe))if(Mi(qe.source,Xe.source)&&Mi(qe["source-layer"],Xe["source-layer"])&&Mi(qe.type,Xe.type)){for(rt in fn(qe.layout,Xe.layout,D,Ie,null,"setLayoutProperty"),fn(qe.paint,Xe.paint,D,Ie,null,"setPaintProperty"),Mi(qe.filter,Xe.filter)||sn(D,{command:"setFilter",args:[Ie,Xe.filter]}),Mi(qe.minzoom,Xe.minzoom)&&Mi(qe.maxzoom,Xe.maxzoom)||sn(D,{command:"setLayerZoomRange",args:[Ie,Xe.minzoom,Xe.maxzoom]}),qe)Object.prototype.hasOwnProperty.call(qe,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?fn(qe[rt],Xe[rt],D,Ie,rt.slice(6),"setPaintProperty"):Mi(qe[rt],Xe[rt])||sn(D,{command:"setLayerProperty",args:[Ie,rt,Xe[rt]]}));for(rt in Xe)Object.prototype.hasOwnProperty.call(Xe,rt)&&!Object.prototype.hasOwnProperty.call(qe,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?fn(qe[rt],Xe[rt],D,Ie,rt.slice(6),"setPaintProperty"):Mi(qe[rt],Xe[rt])||sn(D,{command:"setLayerProperty",args:[Ie,rt,Xe[rt]]}))}else sn(D,{command:"removeLayer",args:[Ie]}),xt=ve[ve.lastIndexOf(Ie)+1],sn(D,{command:"addLayer",args:[Xe,xt]})}(C,s.layers,l)}catch(m){console.warn("Unable to compute style diff:",m),l=[{command:"setStyle",args:[s]}]}return l},A.bN=function(h){const s=[],l=h.id;return l===void 0&&s.push({message:`layers.${l}: missing required property "id"`}),h.render===void 0&&s.push({message:`layers.${l}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&s.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),s},A.bO=hi,A.bP=Vt,A.bQ=class extends Ma{constructor(h,s){super(h,s),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},A.bR=Rs,A.bS=class extends Ma{constructor(h,s){super(h,s),this.current=ls}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let s=1;s<16;s++)if(h[s]!==this.current[s]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},A.bT=Nr,A.bU=class extends Ma{constructor(h,s){super(h,s),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},A.bV=class extends Ma{constructor(h,s){super(h,s),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},A.bW=ne,A.bX=function(h,s){var l=Math.sin(s),m=Math.cos(s);return h[0]=m,h[1]=l,h[2]=0,h[3]=-l,h[4]=m,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},A.bY=function(h,s,l){var m=s[0],_=s[1],C=s[2];return h[0]=m*l[0]+_*l[3]+C*l[6],h[1]=m*l[1]+_*l[4]+C*l[7],h[2]=m*l[2]+_*l[5]+C*l[8],h},A.bZ=function(h,s,l,m,_,C,T){var L=1/(s-l),D=1/(m-_),q=1/(C-T);return h[0]=-2*L,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*D,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*q,h[11]=0,h[12]=(s+l)*L,h[13]=(_+m)*D,h[14]=(T+C)*q,h[15]=1,h},A.b_=class extends Ma{constructor(h,s){super(h,s),this.current=new Array}set(h){if(h!=this.current){this.current=h;const s=new Float32Array(4*h.length);for(let l=0;l<h.length;l++)s[4*l]=h[l].r,s[4*l+1]=h[l].g,s[4*l+2]=h[l].b,s[4*l+3]=h[l].a;this.gl.uniform4fv(this.location,s)}}},A.ba=function(){return new Float64Array(16)},A.bb=function(h,s,l){const m=new Float64Array(4);return ue(m,h,s-90,l),m},A.bc=function(h,s,l,m){var _,C,T,L,D,q=s[0],$=s[1],ie=s[2],he=s[3],ve=l[0],we=l[1],Ie=l[2],qe=l[3];return(C=q*ve+$*we+ie*Ie+he*qe)<0&&(C=-C,ve=-ve,we=-we,Ie=-Ie,qe=-qe),1-C>V?(_=Math.acos(C),T=Math.sin(_),L=Math.sin((1-m)*_)/T,D=Math.sin(m*_)/T):(L=1-m,D=m),h[0]=L*q+D*ve,h[1]=L*$+D*we,h[2]=L*ie+D*Ie,h[3]=L*he+D*qe,h},A.bd=function(h){const s=new Float64Array(9);var l,m,_,C,T,L,D,q,$,ie,he,ve,we,Ie,qe,Xe,xt,rt;ie=(_=(m=h)[0])*(D=_+_),he=(C=m[1])*D,we=(T=m[2])*D,Ie=T*(q=C+C),Xe=(L=m[3])*D,xt=L*q,rt=L*($=T+T),(l=s)[0]=1-(ve=C*q)-(qe=T*$),l[3]=he-rt,l[6]=we+xt,l[1]=he+rt,l[4]=1-ie-qe,l[7]=Ie-Xe,l[2]=we-xt,l[5]=Ie+Xe,l[8]=1-ie-ve;const At=wi(-Math.asin(Ke(s[2],-1,1)));let kt,Ot;return Math.hypot(s[5],s[8])<.001?(kt=0,Ot=-wi(Math.atan2(s[3],s[4]))):(kt=wi(s[5]===0&&s[8]===0?0:Math.atan2(s[5],s[8])),Ot=wi(s[1]===0&&s[0]===0?0:Math.atan2(s[1],s[0]))),{roll:kt,pitch:At+90,bearing:Ot}},A.be=function(h,s){return h.roll==s.roll&&h.pitch==s.pitch&&h.bearing==s.bearing},A.bf=Cn,A.bg=Ss,A.bh=Lh,A.bi=iA,A.bj=ch,A.bk=J,A.bl=me,A.bm=ta,A.bn=function(h,s,l,m,_){return J(m,_,Ke((h-s)/(l-s),0,1))},A.bo=Qe,A.bp=function(){return new Float64Array(3)},A.bq=function(h,s,l,m){return h[0]=s[0]+l[0]*m,h[1]=s[1]+l[1]*m,h[2]=s[2]+l[2]*m,h},A.br=ue,A.bs=function(h,s,l){var m=l[0],_=l[1],C=l[2],T=l[3],L=s[0],D=s[1],q=s[2],$=_*q-C*D,ie=C*L-m*q,he=m*D-_*L;return h[0]=L+T*($+=$)+_*(he+=he)-C*(ie+=ie),h[1]=D+T*ie+C*$-m*he,h[2]=q+T*he+m*ie-_*$,h},A.bt=function(h,s,l){const m=(_=[h[0],h[1],h[2],s[0],s[1],s[2],l[0],l[1],l[2]])[0]*(($=_[8])*(T=_[4])-(L=_[5])*(q=_[7]))+_[1]*(-$*(C=_[3])+L*(D=_[6]))+_[2]*(q*C-T*D);var _,C,T,L,D,q,$;if(m===0)return null;const ie=se([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),he=se([],[l[0],l[1],l[2]],[h[0],h[1],h[2]]),ve=se([],[h[0],h[1],h[2]],[s[0],s[1],s[2]]),we=Be([],ie,-h[3]);return xe(we,we,Be([],he,-s[3])),xe(we,we,Be([],ve,-l[3])),Be(we,we,1/m),we},A.bu=Nd,A.bv=function(){return new Float64Array(4)},A.bw=function(h,s,l,m){var _=[],C=[];return _[0]=s[0]-l[0],_[1]=s[1]-l[1],_[2]=s[2]-l[2],C[0]=_[0]*Math.cos(m)-_[1]*Math.sin(m),C[1]=_[0]*Math.sin(m)+_[1]*Math.cos(m),C[2]=_[2],h[0]=C[0]+l[0],h[1]=C[1]+l[1],h[2]=C[2]+l[2],h},A.bx=function(h,s,l,m){var _=[],C=[];return _[0]=s[0]-l[0],_[1]=s[1]-l[1],_[2]=s[2]-l[2],C[0]=_[0],C[1]=_[1]*Math.cos(m)-_[2]*Math.sin(m),C[2]=_[1]*Math.sin(m)+_[2]*Math.cos(m),h[0]=C[0]+l[0],h[1]=C[1]+l[1],h[2]=C[2]+l[2],h},A.by=function(h,s,l,m){var _=[],C=[];return _[0]=s[0]-l[0],_[1]=s[1]-l[1],_[2]=s[2]-l[2],C[0]=_[2]*Math.sin(m)+_[0]*Math.cos(m),C[1]=_[1],C[2]=_[2]*Math.cos(m)-_[0]*Math.sin(m),h[0]=C[0]+l[0],h[1]=C[1]+l[1],h[2]=C[2]+l[2],h},A.bz=function(h,s,l){var m=Math.sin(l),_=Math.cos(l),C=s[0],T=s[1],L=s[2],D=s[3],q=s[8],$=s[9],ie=s[10],he=s[11];return s!==h&&(h[4]=s[4],h[5]=s[5],h[6]=s[6],h[7]=s[7],h[12]=s[12],h[13]=s[13],h[14]=s[14],h[15]=s[15]),h[0]=C*_-q*m,h[1]=T*_-$*m,h[2]=L*_-ie*m,h[3]=D*_-he*m,h[8]=C*m+q*_,h[9]=T*m+$*_,h[10]=L*m+ie*_,h[11]=D*m+he*_,h},A.c=be,A.c0=class extends Il{},A.c1=gp,A.c2=class extends r{},A.c3=km,A.c4=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},A.c5=Os,A.c6=function(h,s,l){var m=s[0],_=s[1],C=s[2],T=l[3]*m+l[7]*_+l[11]*C+l[15];return h[0]=(l[0]*m+l[4]*_+l[8]*C+l[12])/(T=T||1),h[1]=(l[1]*m+l[5]*_+l[9]*C+l[13])/T,h[2]=(l[2]*m+l[6]*_+l[10]*C+l[14])/T,h},A.c7=class extends va{},A.c8=class extends z{},A.c9=function(h,s){return h[0]===s[0]&&h[1]===s[1]&&h[2]===s[2]&&h[3]===s[3]&&h[4]===s[4]&&h[5]===s[5]&&h[6]===s[6]&&h[7]===s[7]&&h[8]===s[8]&&h[9]===s[9]&&h[10]===s[10]&&h[11]===s[11]&&h[12]===s[12]&&h[13]===s[13]&&h[14]===s[14]&&h[15]===s[15]},A.cA=function(h,s){ge.REGISTERED_PROTOCOLS[h]=s},A.cB=function(h){delete ge.REGISTERED_PROTOCOLS[h]},A.cC=function(h,s){const l={};for(let _=0;_<h.length;_++){const C=s&&s[h[_].id]||il(h[_]);s&&(s[h[_].id]=C);let T=l[C];T||(T=l[C]=[]),T.push(h[_])}const m=[];for(const _ in l)m.push(l[_]);return m},A.cD=Pe,A.cE=uy,A.cF=og,A.cG=es,A.cH=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=ke/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const s=h.bucket.layers[0],l=s.layout,m=s._unevaluatedLayout._values,_={layoutIconSize:m["icon-size"].possiblyEvaluate(new en(h.bucket.zoom+1),h.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new en(h.bucket.zoom+1),h.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new en(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:q,maxZoom:$}=h.bucket.textSizeData;_.compositeTextSizes=[m["text-size"].possiblyEvaluate(new en(q),h.canonical),m["text-size"].possiblyEvaluate(new en($),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:q,maxZoom:$}=h.bucket.iconSizeData;_.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new en(q),h.canonical),m["icon-size"].possiblyEvaluate(new en($),h.canonical)]}const C=l.get("text-line-height")*_a,T=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",L=l.get("text-keep-upright"),D=l.get("text-size");for(const q of h.bucket.features){const $=l.get("text-font").evaluate(q,{},h.canonical).join(","),ie=D.evaluate(q,{},h.canonical),he=_.layoutTextSize.evaluate(q,{},h.canonical),ve=_.layoutIconSize.evaluate(q,{},h.canonical),we={horizontal:{},vertical:void 0},Ie=q.text;let qe,Xe=[0,0];if(Ie){const At=Ie.toString(),kt=l.get("text-letter-spacing").evaluate(q,{},h.canonical)*_a,Ot=Xt(At)?kt:0,ni=l.get("text-anchor").evaluate(q,{},h.canonical),mi=my(s,q,h.canonical);if(!mi){const vi=l.get("text-radial-offset").evaluate(q,{},h.canonical);Xe=vi?py(ni,[vi*_a,ug]):l.get("text-offset").evaluate(q,{},h.canonical).map(_i=>_i*_a)}let pi=T?"center":l.get("text-justify").evaluate(q,{},h.canonical);const gi=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(q,{},h.canonical)*_a:1/0,Di=()=>{h.bucket.allowVerticalPlacement&&bt(At)&&(we.vertical=wp(Ie,h.glyphMap,h.glyphPositions,h.imagePositions,$,gi,C,ni,"left",Ot,Xe,A.ao.vertical,!0,he,ie))};if(!T&&mi){const vi=new Set;if(pi==="auto")for(let Wt=0;Wt<mi.values.length;Wt+=2)vi.add(Rp(mi.values[Wt]));else vi.add(pi);let _i=!1;for(const Wt of vi)if(!we.horizontal[Wt])if(_i)we.horizontal[Wt]=we.horizontal[0];else{const un=wp(Ie,h.glyphMap,h.glyphPositions,h.imagePositions,$,gi,C,"center",Wt,Ot,Xe,A.ao.horizontal,!1,he,ie);un&&(we.horizontal[Wt]=un,_i=un.positionedLines.length===1)}Di()}else{pi==="auto"&&(pi=Rp(ni));const vi=wp(Ie,h.glyphMap,h.glyphPositions,h.imagePositions,$,gi,C,ni,pi,Ot,Xe,A.ao.horizontal,!1,he,ie);vi&&(we.horizontal[pi]=vi),Di(),bt(At)&&T&&L&&(we.vertical=wp(Ie,h.glyphMap,h.glyphPositions,h.imagePositions,$,gi,C,ni,pi,Ot,Xe,A.ao.vertical,!1,he,ie))}}let xt=!1;if(q.icon&&q.icon.name){const At=h.imageMap[q.icon.name];At&&(qe=eg(h.imagePositions[q.icon.name],l.get("icon-offset").evaluate(q,{},h.canonical),l.get("icon-anchor").evaluate(q,{},h.canonical)),xt=!!At.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=xt:h.bucket.sdfIcons!==xt&&bi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(At.pixelRatio!==h.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const rt=Ag(we.horizontal)||we.vertical;h.bucket.iconsInText=!!rt&&rt.iconsInText,(rt||qe)&&jd(h.bucket,q,we,qe,h.imageMap,_,he,ve,Xe,xt,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},A.cI=dp,A.cJ=MA,A.cK=gf,A.cL=fp,A.cM=yf,A.cN=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},A.cO=function(h,s,l,m,_){return a(this,void 0,void 0,function*(){if(j())try{return yield ei(h,s,l,m,_)}catch{}return function(C,T,L,D,q){const $=C.width,ie=C.height;ai&&Ei||(ai=new OffscreenCanvas($,ie),Ei=ai.getContext("2d",{willReadFrequently:!0})),ai.width=$,ai.height=ie,Ei.drawImage(C,0,0,$,ie);const he=Ei.getImageData(T,L,D,q);return Ei.clearRect(0,0,$,ie),he.data}(h,s,l,m,_)})},A.cP=Nu,A.cQ=b,A.cR=FA,A.cS=Wn,A.cT=Mc,A.cU=function(h,s){const l=new Map;if(h!=null)if(h.type==="Feature")l.set(Pd(h,s),h);else for(const m of h.features)l.set(Pd(m,s),m);return l},A.cV=function(h,s){if(h==null)return!0;if(h.type==="Feature")return Pd(h,s)!=null;if(h.type==="FeatureCollection"){const l=new Set;for(const m of h.features){const _=Pd(m,s);if(_==null||l.has(_))return!1;l.add(_)}return!0}return!1},A.cW=function(h,s,l){var m,_,C,T;if(s.removeAll&&h.clear(),s.remove)for(const L of s.remove)h.delete(L);if(s.add)for(const L of s.add){const D=Pd(L,l);D!=null&&h.set(D,L)}if(s.update)for(const L of s.update){let D=h.get(L.id);if(D==null)continue;const q=!L.removeAllProperties&&(((m=L.removeProperties)===null||m===void 0?void 0:m.length)>0||((_=L.addOrUpdateProperties)===null||_===void 0?void 0:_.length)>0);if((L.newGeometry||L.removeAllProperties||q)&&(D=Object.assign({},D),h.set(L.id,D),q&&(D.properties=Object.assign({},D.properties))),L.newGeometry&&(D.geometry=L.newGeometry),L.removeAllProperties)D.properties={};else if(((C=L.removeProperties)===null||C===void 0?void 0:C.length)>0)for(const $ of L.removeProperties)Object.prototype.hasOwnProperty.call(D.properties,$)&&delete D.properties[$];if(((T=L.addOrUpdateProperties)===null||T===void 0?void 0:T.length)>0)for(const{key:$,value:ie}of L.addOrUpdateProperties)D.properties[$]=ie}},A.cX=Kn,A.ca=function(h,s){var l=h[0],m=h[1],_=h[2],C=h[3],T=h[4],L=h[5],D=h[6],q=h[7],$=h[8],ie=h[9],he=h[10],ve=h[11],we=h[12],Ie=h[13],qe=h[14],Xe=h[15],xt=s[0],rt=s[1],At=s[2],kt=s[3],Ot=s[4],ni=s[5],mi=s[6],pi=s[7],gi=s[8],Di=s[9],vi=s[10],_i=s[11],Wt=s[12],un=s[13],mn=s[14],qi=s[15];return Math.abs(l-xt)<=V*Math.max(1,Math.abs(l),Math.abs(xt))&&Math.abs(m-rt)<=V*Math.max(1,Math.abs(m),Math.abs(rt))&&Math.abs(_-At)<=V*Math.max(1,Math.abs(_),Math.abs(At))&&Math.abs(C-kt)<=V*Math.max(1,Math.abs(C),Math.abs(kt))&&Math.abs(T-Ot)<=V*Math.max(1,Math.abs(T),Math.abs(Ot))&&Math.abs(L-ni)<=V*Math.max(1,Math.abs(L),Math.abs(ni))&&Math.abs(D-mi)<=V*Math.max(1,Math.abs(D),Math.abs(mi))&&Math.abs(q-pi)<=V*Math.max(1,Math.abs(q),Math.abs(pi))&&Math.abs($-gi)<=V*Math.max(1,Math.abs($),Math.abs(gi))&&Math.abs(ie-Di)<=V*Math.max(1,Math.abs(ie),Math.abs(Di))&&Math.abs(he-vi)<=V*Math.max(1,Math.abs(he),Math.abs(vi))&&Math.abs(ve-_i)<=V*Math.max(1,Math.abs(ve),Math.abs(_i))&&Math.abs(we-Wt)<=V*Math.max(1,Math.abs(we),Math.abs(Wt))&&Math.abs(Ie-un)<=V*Math.max(1,Math.abs(Ie),Math.abs(un))&&Math.abs(qe-mn)<=V*Math.max(1,Math.abs(qe),Math.abs(mn))&&Math.abs(Xe-qi)<=V*Math.max(1,Math.abs(Xe),Math.abs(qi))},A.cb=function(h,s){return h[0]=s[0],h[1]=s[1],h[2]=s[2],h[3]=s[3],h[4]=s[4],h[5]=s[5],h[6]=s[6],h[7]=s[7],h[8]=s[8],h[9]=s[9],h[10]=s[10],h[11]=s[11],h[12]=s[12],h[13]=s[13],h[14]=s[14],h[15]=s[15],h},A.cc=h=>h.type==="symbol",A.cd=h=>h.type==="circle",A.ce=h=>h.type==="heatmap",A.cf=h=>h.type==="line",A.cg=h=>h.type==="fill",A.ch=h=>h.type==="fill-extrusion",A.ci=h=>h.type==="hillshade",A.cj=h=>h.type==="color-relief",A.ck=h=>h.type==="background",A.cl=h=>h.type==="custom",A.cm=Fe,A.cn=function(h,s,l){const m=Ue(s.x-l.x,s.y-l.y),_=Ue(h.x-l.x,h.y-l.y);var C,T;return wi(Math.atan2(m[0]*_[1]-m[1]*_[0],(C=m)[0]*(T=_)[0]+C[1]*T[1]))},A.co=ze,A.cp=function(h,s){return gn[s]&&(h instanceof MouseEvent||h instanceof WheelEvent)},A.cq=function(h,s){return Gi[s]&&"touches"in h},A.cr=function(h){return Gi[h]||gn[h]},A.cs=function(h,s,l){var m=s[0],_=s[1];return h[0]=l[0]*m+l[4]*_+l[12],h[1]=l[1]*m+l[5]*_+l[13],h},A.ct=function(h,s){const{x:l,y:m}=Id.fromLngLat(s);return!(h<0||h>25||m<0||m>=1||l<0||l>=1)},A.cu=function(h,s){return h[0]=s[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=s[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=s[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},A.cv=class extends Io{},A.cw=Z1,A.cy=function(h){return h.message===et},A.cz=st,A.d=dt,A.e=gt,A.f=h=>a(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const s=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(s)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),A.g=Re,A.h=h=>new Promise((s,l)=>{const m=new Image;m.onload=()=>{s(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Mt})},m.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(h)],{type:"image/png"});m.src=h.byteLength?URL.createObjectURL(_):Mt}),A.i=$e,A.j=(h,s)=>wt(gt(h,{type:"json"}),s),A.k=Bi,A.l=Qt,A.m=wt,A.n=(h,s)=>wt(gt(h,{type:"arrayBuffer"}),s),A.o=function(h){return new yf(h).readFields(J0,[])},A.p=Ym,A.q=ah,A.r=Rr,A.s=$i,A.t=yn,A.u=ct,A.v=yt,A.w=bi,A.x=Z,A.y=Le,A.z=O}),o("worker",["./shared"],function(A){class a{constructor(be,ge){this.keyCache={},be&&this.replace(be,ge)}replace(be,ge){this._layerConfigs={},this._layers={},this.update(be,[],ge)}update(be,ge,Re){for(const st of be){this._layerConfigs[st.id]=st;const ut=this._layers[st.id]=A.bJ(st,Re);ut._featureFilter=A.aa(ut.filter,Re),this.keyCache[st.id]&&delete this.keyCache[st.id]}for(const st of ge)delete this.keyCache[st],delete this._layerConfigs[st],delete this._layers[st];this.familiesBySource={};const Ze=A.cC(Object.values(this._layerConfigs),this.keyCache);for(const st of Ze){const ut=st.map(Bi=>this._layers[Bi.id]),wt=ut[0];if(wt.visibility==="none")continue;const dt=wt.source||"";let Tt=this.familiesBySource[dt];Tt||(Tt=this.familiesBySource[dt]={});const oi=wt.sourceLayer||"_geojsonTileLayer";let Qt=Tt[oi];Qt||(Qt=Tt[oi]=[]),Qt.push(ut)}}}class g{constructor(be){const ge={},Re=[];for(const wt in be){const dt=be[wt],Tt=ge[wt]={};for(const oi in dt){const Qt=dt[+oi];if(!Qt||Qt.bitmap.width===0||Qt.bitmap.height===0)continue;const Bi={x:0,y:0,w:Qt.bitmap.width+2,h:Qt.bitmap.height+2};Re.push(Bi),Tt[oi]={rect:Bi,metrics:Qt.metrics}}}const{w:Ze,h:st}=A.p(Re),ut=new A.q({width:Ze||1,height:st||1});for(const wt in be){const dt=be[wt];for(const Tt in dt){const oi=dt[+Tt];if(!oi||oi.bitmap.width===0||oi.bitmap.height===0)continue;const Qt=ge[wt][Tt].rect;A.q.copy(oi.bitmap,ut,{x:0,y:0},{x:Qt.x+1,y:Qt.y+1},oi.bitmap)}}this.image=ut,this.positions=ge}}A.cD("GlyphAtlas",g);class b{constructor(be){this.tileID=new A.Z(be.tileID.overscaledZ,be.tileID.wrap,be.tileID.canonical.z,be.tileID.canonical.x,be.tileID.canonical.y),this.uid=be.uid,this.zoom=be.zoom,this.pixelRatio=be.pixelRatio,this.tileSize=be.tileSize,this.source=be.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=be.showCollisionBoxes,this.collectResourceTiming=!!be.collectResourceTiming,this.returnDependencies=!!be.returnDependencies,this.promoteId=be.promoteId,this.inFlightDependencies=[]}parse(be,ge,Re,Ze,st){return A._(this,void 0,void 0,function*(){this.status="parsing",this.data=be,this.collisionBoxArray=new A.a8;const ut=new A.cE(Object.keys(be.layers).sort()),wt=new A.cF(this.tileID,this.promoteId);wt.bucketLayerIDs=[];const dt={},Tt={featureIndex:wt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:Re,subdivisionGranularity:st},oi=ge.familiesBySource[this.source];for(const hn in oi){const Kt=be.layers[hn];if(!Kt)continue;Kt.version===1&&A.w(`Vector tile source "${this.source}" layer "${hn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ds=ut.encode(hn),qs=[];for(let jr=0;jr<Kt.length;jr++){const or=Kt.feature(jr),di=wt.getId(or,hn);qs.push({feature:or,id:di,index:jr,sourceLayerIndex:ds})}for(const jr of oi[hn]){const or=jr[0];or.source!==this.source&&A.w(`layer.source = ${or.source} does not equal this.source = ${this.source}`),or.minzoom&&this.zoom<Math.floor(or.minzoom)||or.maxzoom&&this.zoom>=or.maxzoom||or.visibility!=="none"&&(B(jr,this.zoom,Re),(dt[or.id]=or.createBucket({index:wt.bucketLayerIDs.length,layers:jr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ds,sourceID:this.source})).populate(qs,Tt,this.tileID.canonical),wt.bucketLayerIDs.push(jr.map(di=>di.id)))}}const Qt=A.bO(Tt.glyphDependencies,hn=>Object.keys(hn).map(Number));this.inFlightDependencies.forEach(hn=>hn?.abort()),this.inFlightDependencies=[];let Bi=Promise.resolve({});if(Object.keys(Qt).length){const hn=new AbortController;this.inFlightDependencies.push(hn),Bi=Ze.sendAsync({type:"GG",data:{stacks:Qt,source:this.source,tileID:this.tileID,type:"glyphs"}},hn)}const Ui=Object.keys(Tt.iconDependencies);let yt=Promise.resolve({});if(Ui.length){const hn=new AbortController;this.inFlightDependencies.push(hn),yt=Ze.sendAsync({type:"GI",data:{icons:Ui,source:this.source,tileID:this.tileID,type:"icons"}},hn)}const Ti=Object.keys(Tt.patternDependencies);let Vi=Promise.resolve({});if(Ti.length){const hn=new AbortController;this.inFlightDependencies.push(hn),Vi=Ze.sendAsync({type:"GI",data:{icons:Ti,source:this.source,tileID:this.tileID,type:"patterns"}},hn)}const Mi=Tt.dashDependencies;let sn=Promise.resolve({});if(Object.keys(Mi).length){const hn=new AbortController;this.inFlightDependencies.push(hn),sn=Ze.sendAsync({type:"GDA",data:{dashes:Mi}},hn)}const[vr,Er,Pi,Fn]=yield Promise.all([Bi,yt,Vi,sn]),fn=new g(vr),Dn=new A.cG(Er,Pi);for(const hn in dt){const Kt=dt[hn];Kt instanceof A.a9?(B(Kt.layers,this.zoom,Re),A.cH({bucket:Kt,glyphMap:vr,glyphPositions:fn.positions,imageMap:Er,imagePositions:Dn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Tt.subdivisionGranularity})):Kt.hasDependencies&&(Kt instanceof A.cI||Kt instanceof A.cJ||Kt instanceof A.cK)&&(B(Kt.layers,this.zoom,Re),Kt.addFeatures(Tt,this.tileID.canonical,Dn.patternPositions,Fn))}return this.status="done",{buckets:Object.values(dt).filter(hn=>!hn.isEmpty()),featureIndex:wt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fn.image,imageAtlas:Dn,dashPositions:Fn,glyphMap:this.returnDependencies?vr:null,iconMap:this.returnDependencies?Er:null,glyphPositions:this.returnDependencies?fn.positions:null}})}}function B(et,be,ge){const Re=new A.F(be);for(const Ze of et)Ze.recalculate(Re,ge)}class I{constructor(be,ge,Re){this.actor=be,this.layerIndex=ge,this.availableImages=Re,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(be,ge){return A._(this,void 0,void 0,function*(){const Re=yield A.n(be.request,ge);try{return{vectorTile:new A.cL(new A.cM(Re.data)),rawData:Re.data,cacheControl:Re.cacheControl,expires:Re.expires}}catch(Ze){const st=new Uint8Array(Re.data);let ut=`Unable to parse the tile at ${be.request.url}, `;throw ut+=st[0]===31&&st[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ze.message}`,new Error(ut)}})}loadTile(be){return A._(this,void 0,void 0,function*(){const ge=be.uid,Re=!!(be&&be.request&&be.request.collectResourceTiming)&&new A.cN(be.request),Ze=new b(be);this.loading[ge]=Ze;const st=new AbortController;Ze.abort=st;try{const ut=yield this.loadVectorTile(be,st);if(delete this.loading[ge],!ut)return null;const wt=ut.rawData,dt={};ut.expires&&(dt.expires=ut.expires),ut.cacheControl&&(dt.cacheControl=ut.cacheControl);const Tt={};if(Re){const Qt=Re.finish();Qt&&(Tt.resourceTiming=JSON.parse(JSON.stringify(Qt)))}Ze.vectorTile=ut.vectorTile;const oi=Ze.parse(ut.vectorTile,this.layerIndex,this.availableImages,this.actor,be.subdivisionGranularity);this.loaded[ge]=Ze,this.fetching[ge]={rawTileData:wt,cacheControl:dt,resourceTiming:Tt};try{const Qt=yield oi;return A.e({rawTileData:wt.slice(0)},Qt,dt,Tt)}finally{delete this.fetching[ge]}}catch(ut){throw delete this.loading[ge],Ze.status="done",this.loaded[ge]=Ze,ut}})}reloadTile(be){return A._(this,void 0,void 0,function*(){const ge=be.uid;if(!this.loaded||!this.loaded[ge])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Re=this.loaded[ge];if(Re.showCollisionBoxes=be.showCollisionBoxes,Re.status==="parsing"){const Ze=yield Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,be.subdivisionGranularity);let st;if(this.fetching[ge]){const{rawTileData:ut,cacheControl:wt,resourceTiming:dt}=this.fetching[ge];delete this.fetching[ge],st=A.e({rawTileData:ut.slice(0)},Ze,wt,dt)}else st=Ze;return st}if(Re.status==="done"&&Re.vectorTile)return Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,be.subdivisionGranularity)})}abortTile(be){return A._(this,void 0,void 0,function*(){const ge=this.loading,Re=be.uid;ge&&ge[Re]&&ge[Re].abort&&(ge[Re].abort.abort(),delete ge[Re])})}removeTile(be){return A._(this,void 0,void 0,function*(){this.loaded&&this.loaded[be.uid]&&delete this.loaded[be.uid]})}}class P{constructor(){this.loaded={}}loadTile(be){return A._(this,void 0,void 0,function*(){const{uid:ge,encoding:Re,rawImageData:Ze,redFactor:st,greenFactor:ut,blueFactor:wt,baseShift:dt}=be,Tt=Ze.width+2,oi=Ze.height+2,Qt=A.b(Ze)?new A.R({width:Tt,height:oi},yield A.cO(Ze,-1,-1,Tt,oi)):Ze,Bi=new A.cP(ge,Qt,Re,st,ut,wt,dt);return this.loaded=this.loaded||{},this.loaded[ge]=Bi,Bi})}removeTile(be){const ge=this.loaded,Re=be.uid;ge&&ge[Re]&&delete ge[Re]}}var F,Q,R=function(){if(Q)return F;function et(ge,Re){if(ge.length!==0){be(ge[0],Re);for(var Ze=1;Ze<ge.length;Ze++)be(ge[Ze],!Re)}}function be(ge,Re){for(var Ze=0,st=0,ut=0,wt=ge.length,dt=wt-1;ut<wt;dt=ut++){var Tt=(ge[ut][0]-ge[dt][0])*(ge[dt][1]+ge[ut][1]),oi=Ze+Tt;st+=Math.abs(Ze)>=Math.abs(Tt)?Ze-oi+Tt:Tt-oi+Ze,Ze=oi}Ze+st>=0!=!!Re&&ge.reverse()}return Q=1,F=function ge(Re,Ze){var st,ut=Re&&Re.type;if(ut==="FeatureCollection")for(st=0;st<Re.features.length;st++)ge(Re.features[st],Ze);else if(ut==="GeometryCollection")for(st=0;st<Re.geometries.length;st++)ge(Re.geometries[st],Ze);else if(ut==="Feature")ge(Re.geometry,Ze);else if(ut==="Polygon")et(Re.coordinates,Ze);else if(ut==="MultiPolygon")for(st=0;st<Re.coordinates.length;st++)et(Re.coordinates[st],Ze);return Re}}(),H=A.cQ(R);class j extends A.cS{constructor(be,ge){super(new A.cM,0,ge,[],[]),this.feature=be,this.type=be.type,this.properties=be.tags?be.tags:{},"id"in be&&(typeof be.id=="string"?this.id=parseInt(be.id,10):typeof be.id!="number"||isNaN(be.id)||(this.id=be.id))}loadGeometry(){const be=[],ge=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const Re of ge){const Ze=[];for(const st of Re)Ze.push(new A.P(st[0],st[1]));be.push(Ze)}return be}}class V extends A.cR{constructor(be,ge){super(new A.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ge?ge.version:1,this.extent=ge?ge.extent:4096,this.length=be.length,this.features=be}feature(be){return new j(this.features[be],this.extent)}}function W(et,be){be.writeVarintField(15,et.version||1),be.writeStringField(1,et.name||""),be.writeVarintField(5,et.extent||4096);const ge={keys:[],values:[],keycache:{},valuecache:{}};for(let st=0;st<et.length;st++)ge.feature=et.feature(st),be.writeMessage(2,ne,ge);const Re=ge.keys;for(const st of Re)be.writeStringField(3,st);const Ze=ge.values;for(const st of Ze)be.writeMessage(4,xe,st)}function ne(et,be){if(!et.feature)return;const ge=et.feature;ge.id!==void 0&&be.writeVarintField(1,ge.id),be.writeMessage(2,te,et),be.writeVarintField(3,ge.type),be.writeMessage(4,re,ge)}function te(et,be){for(const ge in et.feature?.properties){let Re=et.feature.properties[ge],Ze=et.keycache[ge];if(Re===null)continue;Ze===void 0&&(et.keys.push(ge),Ze=et.keys.length-1,et.keycache[ge]=Ze),be.writeVarint(Ze),typeof Re!="string"&&typeof Re!="boolean"&&typeof Re!="number"&&(Re=JSON.stringify(Re));const st=typeof Re+":"+Re;let ut=et.valuecache[st];ut===void 0&&(et.values.push(Re),ut=et.values.length-1,et.valuecache[st]=ut),be.writeVarint(ut)}}function de(et,be){return(be<<3)+(7&et)}function ee(et){return et<<1^et>>31}function re(et,be){const ge=et.loadGeometry(),Re=et.type;let Ze=0,st=0;for(const ut of ge){let wt=1;Re===1&&(wt=ut.length),be.writeVarint(de(1,wt));const dt=Re===3?ut.length-1:ut.length;for(let Tt=0;Tt<dt;Tt++){Tt===1&&Re!==1&&be.writeVarint(de(2,dt-1));const oi=ut[Tt].x-Ze,Qt=ut[Tt].y-st;be.writeVarint(ee(oi)),be.writeVarint(ee(Qt)),Ze+=oi,st+=Qt}et.type===3&&be.writeVarint(de(7,1))}}function xe(et,be){const ge=typeof et;ge==="string"?be.writeStringField(1,et):ge==="boolean"?be.writeBooleanField(7,et):ge==="number"&&(et%1!=0?be.writeDoubleField(3,et):et<0?be.writeSVarintField(6,et):be.writeVarintField(5,et))}const Be={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:et=>et},se=Math.fround||(ae=new Float32Array(1),et=>(ae[0]=+et,ae[0]));var ae;class ce{constructor(be){this.options=Object.assign(Object.create(Be),be),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(be){const{log:ge,minZoom:Re,maxZoom:Ze}=this.options;ge&&console.time("total time");const st=`prepare ${be.length} points`;ge&&console.time(st),this.points=be;const ut=[];for(let dt=0;dt<be.length;dt++){const Tt=be[dt];if(!Tt.geometry)continue;const[oi,Qt]=Tt.geometry.coordinates,Bi=se(ue(oi)),Ui=se(fe(Qt));ut.push(Bi,Ui,1/0,dt,-1,1),this.options.reduce&&ut.push(0)}let wt=this.trees[Ze+1]=this._createTree(ut);ge&&console.timeEnd(st);for(let dt=Ze;dt>=Re;dt--){const Tt=+Date.now();wt=this.trees[dt]=this._createTree(this._cluster(wt,dt)),ge&&console.log("z%d: %d clusters in %dms",dt,wt.numItems,+Date.now()-Tt)}return ge&&console.timeEnd("total time"),this}getClusters(be,ge){let Re=((be[0]+180)%360+360)%360-180;const Ze=Math.max(-90,Math.min(90,be[1]));let st=be[2]===180?180:((be[2]+180)%360+360)%360-180;const ut=Math.max(-90,Math.min(90,be[3]));if(be[2]-be[0]>=360)Re=-180,st=180;else if(Re>st){const Qt=this.getClusters([Re,Ze,180,ut],ge),Bi=this.getClusters([-180,Ze,st,ut],ge);return Qt.concat(Bi)}const wt=this.trees[this._limitZoom(ge)],dt=wt.range(ue(Re),fe(ut),ue(st),fe(Ze)),Tt=wt.data,oi=[];for(const Qt of dt){const Bi=this.stride*Qt;oi.push(Tt[Bi+5]>1?Ee(Tt,Bi,this.clusterProps):this.points[Tt[Bi+3]])}return oi}getChildren(be){const ge=this._getOriginId(be),Re=this._getOriginZoom(be),Ze="No cluster with the specified id.",st=this.trees[Re];if(!st)throw new Error(Ze);const ut=st.data;if(ge*this.stride>=ut.length)throw new Error(Ze);const wt=this.options.radius/(this.options.extent*Math.pow(2,Re-1)),dt=st.within(ut[ge*this.stride],ut[ge*this.stride+1],wt),Tt=[];for(const oi of dt){const Qt=oi*this.stride;ut[Qt+4]===be&&Tt.push(ut[Qt+5]>1?Ee(ut,Qt,this.clusterProps):this.points[ut[Qt+3]])}if(Tt.length===0)throw new Error(Ze);return Tt}getLeaves(be,ge,Re){const Ze=[];return this._appendLeaves(Ze,be,ge=ge||10,Re=Re||0,0),Ze}getTile(be,ge,Re){const Ze=this.trees[this._limitZoom(be)],st=Math.pow(2,be),{extent:ut,radius:wt}=this.options,dt=wt/ut,Tt=(Re-dt)/st,oi=(Re+1+dt)/st,Qt={features:[]};return this._addTileFeatures(Ze.range((ge-dt)/st,Tt,(ge+1+dt)/st,oi),Ze.data,ge,Re,st,Qt),ge===0&&this._addTileFeatures(Ze.range(1-dt/st,Tt,1,oi),Ze.data,st,Re,st,Qt),ge===st-1&&this._addTileFeatures(Ze.range(0,Tt,dt/st,oi),Ze.data,-1,Re,st,Qt),Qt.features.length?Qt:null}getClusterExpansionZoom(be){let ge=this._getOriginZoom(be)-1;for(;ge<=this.options.maxZoom;){const Re=this.getChildren(be);if(ge++,Re.length!==1)break;be=Re[0].properties.cluster_id}return ge}_appendLeaves(be,ge,Re,Ze,st){const ut=this.getChildren(ge);for(const wt of ut){const dt=wt.properties;if(dt&&dt.cluster?st+dt.point_count<=Ze?st+=dt.point_count:st=this._appendLeaves(be,dt.cluster_id,Re,Ze,st):st<Ze?st++:be.push(wt),be.length===Re)break}return st}_createTree(be){const ge=new A.aI(be.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Re=0;Re<be.length;Re+=this.stride)ge.add(be[Re],be[Re+1]);return ge.finish(),ge.data=be,ge}_addTileFeatures(be,ge,Re,Ze,st,ut){for(const wt of be){const dt=wt*this.stride,Tt=ge[dt+5]>1;let oi,Qt,Bi;if(Tt)oi=Ve(ge,dt,this.clusterProps),Qt=ge[dt],Bi=ge[dt+1];else{const Ti=this.points[ge[dt+3]];oi=Ti.properties;const[Vi,Mi]=Ti.geometry.coordinates;Qt=ue(Vi),Bi=fe(Mi)}const Ui={type:1,geometry:[[Math.round(this.options.extent*(Qt*st-Re)),Math.round(this.options.extent*(Bi*st-Ze))]],tags:oi};let yt;yt=Tt||this.options.generateId?ge[dt+3]:this.points[ge[dt+3]].id,yt!==void 0&&(Ui.id=yt),ut.features.push(Ui)}}_limitZoom(be){return Math.max(this.options.minZoom,Math.min(Math.floor(+be),this.options.maxZoom+1))}_cluster(be,ge){const{radius:Re,extent:Ze,reduce:st,minPoints:ut}=this.options,wt=Re/(Ze*Math.pow(2,ge)),dt=be.data,Tt=[],oi=this.stride;for(let Qt=0;Qt<dt.length;Qt+=oi){if(dt[Qt+2]<=ge)continue;dt[Qt+2]=ge;const Bi=dt[Qt],Ui=dt[Qt+1],yt=be.within(dt[Qt],dt[Qt+1],wt),Ti=dt[Qt+5];let Vi=Ti;for(const Mi of yt){const sn=Mi*oi;dt[sn+2]>ge&&(Vi+=dt[sn+5])}if(Vi>Ti&&Vi>=ut){let Mi,sn=Bi*Ti,vr=Ui*Ti,Er=-1;const Pi=(Qt/oi<<5)+(ge+1)+this.points.length;for(const Fn of yt){const fn=Fn*oi;if(dt[fn+2]<=ge)continue;dt[fn+2]=ge;const Dn=dt[fn+5];sn+=dt[fn]*Dn,vr+=dt[fn+1]*Dn,dt[fn+4]=Pi,st&&(Mi||(Mi=this._map(dt,Qt,!0),Er=this.clusterProps.length,this.clusterProps.push(Mi)),st(Mi,this._map(dt,fn)))}dt[Qt+4]=Pi,Tt.push(sn/Vi,vr/Vi,1/0,Pi,-1,Vi),st&&Tt.push(Er)}else{for(let Mi=0;Mi<oi;Mi++)Tt.push(dt[Qt+Mi]);if(Vi>1)for(const Mi of yt){const sn=Mi*oi;if(!(dt[sn+2]<=ge)){dt[sn+2]=ge;for(let vr=0;vr<oi;vr++)Tt.push(dt[sn+vr])}}}}return Tt}_getOriginId(be){return be-this.points.length>>5}_getOriginZoom(be){return(be-this.points.length)%32}_map(be,ge,Re){if(be[ge+5]>1){const ut=this.clusterProps[be[ge+6]];return Re?Object.assign({},ut):ut}const Ze=this.points[be[ge+3]].properties,st=this.options.map(Ze);return Re&&st===Ze?Object.assign({},st):st}}function Ee(et,be,ge){return{type:"Feature",id:et[be+3],properties:Ve(et,be,ge),geometry:{type:"Point",coordinates:[(Re=et[be],360*(Re-.5)),Ue(et[be+1])]}};var Re}function Ve(et,be,ge){const Re=et[be+5],Ze=Re>=1e4?`${Math.round(Re/1e3)}k`:Re>=1e3?Math.round(Re/100)/10+"k":Re,st=et[be+6],ut=st===-1?{}:Object.assign({},ge[st]);return Object.assign(ut,{cluster:!0,cluster_id:et[be+3],point_count:Re,point_count_abbreviated:Ze})}function ue(et){return et/360+.5}function fe(et){const be=Math.sin(et*Math.PI/180),ge=.5-.25*Math.log((1+be)/(1-be))/Math.PI;return ge<0?0:ge>1?1:ge}function Ue(et){const be=(180-360*et)*Math.PI/180;return 360*Math.atan(Math.exp(be))/Math.PI-90}function ke(et,be,ge,Re){let Ze=Re;const st=be+(ge-be>>1);let ut,wt=ge-be;const dt=et[be],Tt=et[be+1],oi=et[ge],Qt=et[ge+1];for(let Bi=be+3;Bi<ge;Bi+=3){const Ui=pe(et[Bi],et[Bi+1],dt,Tt,oi,Qt);if(Ui>Ze)ut=Bi,Ze=Ui;else if(Ui===Ze){const yt=Math.abs(Bi-st);yt<wt&&(ut=Bi,wt=yt)}}Ze>Re&&(ut-be>3&&ke(et,be,ut,Re),et[ut+2]=Ze,ge-ut>3&&ke(et,ut,ge,Re))}function pe(et,be,ge,Re,Ze,st){let ut=Ze-ge,wt=st-Re;if(ut!==0||wt!==0){const dt=((et-ge)*ut+(be-Re)*wt)/(ut*ut+wt*wt);dt>1?(ge=Ze,Re=st):dt>0&&(ge+=ut*dt,Re+=wt*dt)}return ut=et-ge,wt=be-Re,ut*ut+wt*wt}function Qe(et,be,ge,Re){const Ze={id:et??null,type:be,geometry:ge,tags:Re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(be==="Point"||be==="MultiPoint"||be==="LineString")J(Ze,ge);else if(be==="Polygon")J(Ze,ge[0]);else if(be==="MultiLineString")for(const st of ge)J(Ze,st);else if(be==="MultiPolygon")for(const st of ge)J(Ze,st[0]);return Ze}function J(et,be){for(let ge=0;ge<be.length;ge+=3)et.minX=Math.min(et.minX,be[ge]),et.minY=Math.min(et.minY,be[ge+1]),et.maxX=Math.max(et.maxX,be[ge]),et.maxY=Math.max(et.maxY,be[ge+1])}function me(et,be,ge,Re){if(!be.geometry)return;const Ze=be.geometry.coordinates;if(Ze&&Ze.length===0)return;const st=be.geometry.type,ut=Math.pow(ge.tolerance/((1<<ge.maxZoom)*ge.extent),2);let wt=[],dt=be.id;if(ge.promoteId?dt=be.properties[ge.promoteId]:ge.generateId&&(dt=Re||0),st==="Point")Fe(Ze,wt);else if(st==="MultiPoint")for(const Tt of Ze)Fe(Tt,wt);else if(st==="LineString")ze(Ze,wt,ut,!1);else if(st==="MultiLineString"){if(ge.lineMetrics){for(const Tt of Ze)wt=[],ze(Tt,wt,ut,!1),et.push(Qe(dt,"LineString",wt,be.properties));return}Ke(Ze,wt,ut,!1)}else if(st==="Polygon")Ke(Ze,wt,ut,!0);else{if(st!=="MultiPolygon"){if(st==="GeometryCollection"){for(const Tt of be.geometry.geometries)me(et,{id:dt,geometry:Tt,properties:be.properties},ge,Re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Tt of Ze){const oi=[];Ke(Tt,oi,ut,!0),wt.push(oi)}}et.push(Qe(dt,st,wt,be.properties))}function Fe(et,be){be.push(_t(et[0]),gt(et[1]),0)}function ze(et,be,ge,Re){let Ze,st,ut=0;for(let dt=0;dt<et.length;dt++){const Tt=_t(et[dt][0]),oi=gt(et[dt][1]);be.push(Tt,oi,0),dt>0&&(ut+=Re?(Ze*oi-Tt*st)/2:Math.sqrt(Math.pow(Tt-Ze,2)+Math.pow(oi-st,2))),Ze=Tt,st=oi}const wt=be.length-3;be[2]=1,ke(be,0,wt,ge),be[wt+2]=1,be.size=Math.abs(ut),be.start=0,be.end=be.size}function Ke(et,be,ge,Re){for(let Ze=0;Ze<et.length;Ze++){const st=[];ze(et[Ze],st,ge,Re),be.push(st)}}function _t(et){return et/360+.5}function gt(et){const be=Math.sin(et*Math.PI/180),ge=.5-.25*Math.log((1+be)/(1-be))/Math.PI;return ge<0?0:ge>1?1:ge}function Et(et,be,ge,Re,Ze,st,ut,wt){if(Re/=be,st>=(ge/=be)&&ut<Re)return et;if(ut<ge||st>=Re)return null;const dt=[];for(const Tt of et){const oi=Tt.geometry;let Qt=Tt.type;const Bi=Ze===0?Tt.minX:Tt.minY,Ui=Ze===0?Tt.maxX:Tt.maxY;if(Bi>=ge&&Ui<Re){dt.push(Tt);continue}if(Ui<ge||Bi>=Re)continue;let yt=[];if(Qt==="Point"||Qt==="MultiPoint")hi(oi,yt,ge,Re,Ze);else if(Qt==="LineString")Vt(oi,yt,ge,Re,Ze,!1,wt.lineMetrics);else if(Qt==="MultiLineString")Jt(oi,yt,ge,Re,Ze,!1);else if(Qt==="Polygon")Jt(oi,yt,ge,Re,Ze,!0);else if(Qt==="MultiPolygon")for(const Ti of oi){const Vi=[];Jt(Ti,Vi,ge,Re,Ze,!0),Vi.length&&yt.push(Vi)}if(yt.length){if(wt.lineMetrics&&Qt==="LineString"){for(const Ti of yt)dt.push(Qe(Tt.id,Qt,Ti,Tt.tags));continue}Qt!=="LineString"&&Qt!=="MultiLineString"||(yt.length===1?(Qt="LineString",yt=yt[0]):Qt="MultiLineString"),Qt!=="Point"&&Qt!=="MultiPoint"||(Qt=yt.length===3?"Point":"MultiPoint"),dt.push(Qe(Tt.id,Qt,yt,Tt.tags))}}return dt.length?dt:null}function hi(et,be,ge,Re,Ze){for(let st=0;st<et.length;st+=3){const ut=et[st+Ze];ut>=ge&&ut<=Re&&bi(be,et[st],et[st+1],et[st+2])}}function Vt(et,be,ge,Re,Ze,st,ut){let wt=Yt(et);const dt=Ze===0?ot:$e;let Tt,oi,Qt=et.start;for(let Vi=0;Vi<et.length-3;Vi+=3){const Mi=et[Vi],sn=et[Vi+1],vr=et[Vi+2],Er=et[Vi+3],Pi=et[Vi+4],Fn=Ze===0?Mi:sn,fn=Ze===0?Er:Pi;let Dn=!1;ut&&(Tt=Math.sqrt(Math.pow(Mi-Er,2)+Math.pow(sn-Pi,2))),Fn<ge?fn>ge&&(oi=dt(wt,Mi,sn,Er,Pi,ge),ut&&(wt.start=Qt+Tt*oi)):Fn>Re?fn<Re&&(oi=dt(wt,Mi,sn,Er,Pi,Re),ut&&(wt.start=Qt+Tt*oi)):bi(wt,Mi,sn,vr),fn<ge&&Fn>=ge&&(oi=dt(wt,Mi,sn,Er,Pi,ge),Dn=!0),fn>Re&&Fn<=Re&&(oi=dt(wt,Mi,sn,Er,Pi,Re),Dn=!0),!st&&Dn&&(ut&&(wt.end=Qt+Tt*oi),be.push(wt),wt=Yt(et)),ut&&(Qt+=Tt)}let Bi=et.length-3;const Ui=et[Bi],yt=et[Bi+1],Ti=Ze===0?Ui:yt;Ti>=ge&&Ti<=Re&&bi(wt,Ui,yt,et[Bi+2]),Bi=wt.length-3,st&&Bi>=3&&(wt[Bi]!==wt[0]||wt[Bi+1]!==wt[1])&&bi(wt,wt[0],wt[1],wt[2]),wt.length&&be.push(wt)}function Yt(et){const be=[];return be.size=et.size,be.start=et.start,be.end=et.end,be}function Jt(et,be,ge,Re,Ze,st){for(const ut of et)Vt(ut,be,ge,Re,Ze,st,!1)}function bi(et,be,ge,Re){et.push(be,ge,Re)}function ot(et,be,ge,Re,Ze,st){const ut=(st-be)/(Re-be);return bi(et,st,ge+(Ze-ge)*ut,1),ut}function $e(et,be,ge,Re,Ze,st){const ut=(st-ge)/(Ze-ge);return bi(et,be+(Re-be)*ut,st,1),ut}function Ni(et,be){const ge=[];for(let Re=0;Re<et.length;Re++){const Ze=et[Re],st=Ze.type;let ut;if(st==="Point"||st==="MultiPoint"||st==="LineString")ut=yi(Ze.geometry,be);else if(st==="MultiLineString"||st==="Polygon"){ut=[];for(const wt of Ze.geometry)ut.push(yi(wt,be))}else if(st==="MultiPolygon"){ut=[];for(const wt of Ze.geometry){const dt=[];for(const Tt of wt)dt.push(yi(Tt,be));ut.push(dt)}}ge.push(Qe(Ze.id,st,ut,Ze.tags))}return ge}function yi(et,be){const ge=[];ge.size=et.size,et.start!==void 0&&(ge.start=et.start,ge.end=et.end);for(let Re=0;Re<et.length;Re+=3)ge.push(et[Re]+be,et[Re+1],et[Re+2]);return ge}function si(et,be){if(et.transformed)return et;const ge=1<<et.z,Re=et.x,Ze=et.y;for(const st of et.features){const ut=st.geometry,wt=st.type;if(st.geometry=[],wt===1)for(let dt=0;dt<ut.length;dt+=2)st.geometry.push(Mt(ut[dt],ut[dt+1],be,ge,Re,Ze));else for(let dt=0;dt<ut.length;dt++){const Tt=[];for(let oi=0;oi<ut[dt].length;oi+=2)Tt.push(Mt(ut[dt][oi],ut[dt][oi+1],be,ge,Re,Ze));st.geometry.push(Tt)}}return et.transformed=!0,et}function Mt(et,be,ge,Re,Ze,st){return[Math.round(ge*(et*Re-Ze)),Math.round(ge*(be*Re-st))]}function ei(et,be,ge,Re,Ze){const st=be===Ze.maxZoom?0:Ze.tolerance/((1<<be)*Ze.extent),ut={features:[],numPoints:0,numSimplified:0,numFeatures:et.length,source:null,x:ge,y:Re,z:be,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const wt of et)ai(ut,wt,st,Ze);return ut}function ai(et,be,ge,Re){const Ze=be.geometry,st=be.type,ut=[];if(et.minX=Math.min(et.minX,be.minX),et.minY=Math.min(et.minY,be.minY),et.maxX=Math.max(et.maxX,be.maxX),et.maxY=Math.max(et.maxY,be.maxY),st==="Point"||st==="MultiPoint")for(let wt=0;wt<Ze.length;wt+=3)ut.push(Ze[wt],Ze[wt+1]),et.numPoints++,et.numSimplified++;else if(st==="LineString")Ei(ut,Ze,et,ge,!1,!1);else if(st==="MultiLineString"||st==="Polygon")for(let wt=0;wt<Ze.length;wt++)Ei(ut,Ze[wt],et,ge,st==="Polygon",wt===0);else if(st==="MultiPolygon")for(let wt=0;wt<Ze.length;wt++){const dt=Ze[wt];for(let Tt=0;Tt<dt.length;Tt++)Ei(ut,dt[Tt],et,ge,!0,Tt===0)}if(ut.length){let wt=be.tags||null;if(st==="LineString"&&Re.lineMetrics){wt={};for(const Tt in be.tags)wt[Tt]=be.tags[Tt];wt.mapbox_clip_start=Ze.start/Ze.size,wt.mapbox_clip_end=Ze.end/Ze.size}const dt={geometry:ut,type:st==="Polygon"||st==="MultiPolygon"?3:st==="LineString"||st==="MultiLineString"?2:1,tags:wt};be.id!==null&&(dt.id=be.id),et.features.push(dt)}}function Ei(et,be,ge,Re,Ze,st){const ut=Re*Re;if(Re>0&&be.size<(Ze?ut:Re))return void(ge.numPoints+=be.length/3);const wt=[];for(let dt=0;dt<be.length;dt+=3)(Re===0||be[dt+2]>ut)&&(ge.numSimplified++,wt.push(be[dt],be[dt+1])),ge.numPoints++;Ze&&function(dt,Tt){let oi=0;for(let Qt=0,Bi=dt.length,Ui=Bi-2;Qt<Bi;Ui=Qt,Qt+=2)oi+=(dt[Qt]-dt[Ui])*(dt[Qt+1]+dt[Ui+1]);if(oi>0===Tt)for(let Qt=0,Bi=dt.length;Qt<Bi/2;Qt+=2){const Ui=dt[Qt],yt=dt[Qt+1];dt[Qt]=dt[Bi-2-Qt],dt[Qt+1]=dt[Bi-1-Qt],dt[Bi-2-Qt]=Ui,dt[Bi-1-Qt]=yt}}(wt,st),et.push(wt)}const $i={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class zi{constructor(be,ge){const Re=(ge=this.options=function(st,ut){for(const wt in ut)st[wt]=ut[wt];return st}(Object.create($i),ge)).debug;if(Re&&console.time("preprocess data"),ge.maxZoom<0||ge.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ge.promoteId&&ge.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ze=function(st,ut){const wt=[];if(st.type==="FeatureCollection")for(let dt=0;dt<st.features.length;dt++)me(wt,st.features[dt],ut,dt);else me(wt,st.type==="Feature"?st:{geometry:st},ut);return wt}(be,ge);this.tiles={},this.tileCoords=[],Re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ge.indexMaxZoom,ge.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ze=function(st,ut){const wt=ut.buffer/ut.extent;let dt=st;const Tt=Et(st,1,-1-wt,wt,0,-1,2,ut),oi=Et(st,1,1-wt,2+wt,0,-1,2,ut);return(Tt||oi)&&(dt=Et(st,1,-wt,1+wt,0,-1,2,ut)||[],Tt&&(dt=Ni(Tt,1).concat(dt)),oi&&(dt=dt.concat(Ni(oi,-1)))),dt}(Ze,ge),Ze.length&&this.splitTile(Ze,0,0,0),Re&&(Ze.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(be,ge,Re,Ze,st,ut,wt){const dt=[be,ge,Re,Ze],Tt=this.options,oi=Tt.debug;for(;dt.length;){Ze=dt.pop(),Re=dt.pop(),ge=dt.pop(),be=dt.pop();const Qt=1<<ge,Bi=wi(ge,Re,Ze);let Ui=this.tiles[Bi];if(!Ui&&(oi>1&&console.time("creation"),Ui=this.tiles[Bi]=ei(be,ge,Re,Ze,Tt),this.tileCoords.push({z:ge,x:Re,y:Ze}),oi)){oi>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ge,Re,Ze,Ui.numFeatures,Ui.numPoints,Ui.numSimplified),console.timeEnd("creation"));const Dn=`z${ge}`;this.stats[Dn]=(this.stats[Dn]||0)+1,this.total++}if(Ui.source=be,st==null){if(ge===Tt.indexMaxZoom||Ui.numPoints<=Tt.indexMaxPoints)continue}else{if(ge===Tt.maxZoom||ge===st)continue;if(st!=null){const Dn=st-ge;if(Re!==ut>>Dn||Ze!==wt>>Dn)continue}}if(Ui.source=null,be.length===0)continue;oi>1&&console.time("clipping");const yt=.5*Tt.buffer/Tt.extent,Ti=.5-yt,Vi=.5+yt,Mi=1+yt;let sn=null,vr=null,Er=null,Pi=null,Fn=Et(be,Qt,Re-yt,Re+Vi,0,Ui.minX,Ui.maxX,Tt),fn=Et(be,Qt,Re+Ti,Re+Mi,0,Ui.minX,Ui.maxX,Tt);be=null,Fn&&(sn=Et(Fn,Qt,Ze-yt,Ze+Vi,1,Ui.minY,Ui.maxY,Tt),vr=Et(Fn,Qt,Ze+Ti,Ze+Mi,1,Ui.minY,Ui.maxY,Tt),Fn=null),fn&&(Er=Et(fn,Qt,Ze-yt,Ze+Vi,1,Ui.minY,Ui.maxY,Tt),Pi=Et(fn,Qt,Ze+Ti,Ze+Mi,1,Ui.minY,Ui.maxY,Tt),fn=null),oi>1&&console.timeEnd("clipping"),dt.push(sn||[],ge+1,2*Re,2*Ze),dt.push(vr||[],ge+1,2*Re,2*Ze+1),dt.push(Er||[],ge+1,2*Re+1,2*Ze),dt.push(Pi||[],ge+1,2*Re+1,2*Ze+1)}}getTile(be,ge,Re){be=+be,ge=+ge,Re=+Re;const Ze=this.options,{extent:st,debug:ut}=Ze;if(be<0||be>24)return null;const wt=1<<be,dt=wi(be,ge=ge+wt&wt-1,Re);if(this.tiles[dt])return si(this.tiles[dt],st);ut>1&&console.log("drilling down to z%d-%d-%d",be,ge,Re);let Tt,oi=be,Qt=ge,Bi=Re;for(;!Tt&&oi>0;)oi--,Qt>>=1,Bi>>=1,Tt=this.tiles[wi(oi,Qt,Bi)];return Tt&&Tt.source?(ut>1&&(console.log("found parent tile z%d-%d-%d",oi,Qt,Bi),console.time("drilling down")),this.splitTile(Tt.source,oi,Qt,Bi,be,ge,Re),ut>1&&console.timeEnd("drilling down"),this.tiles[dt]?si(this.tiles[dt],st):null):null}}function wi(et,be,ge){return 32*((1<<et)*ge+be)+et}class Gi extends I{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(be,ge){return A._(this,void 0,void 0,function*(){const Re=be.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ze=this._geoJSONIndex.getTile(Re.z,Re.x,Re.y);if(!Ze)return null;const st=new V(Ze.features,{version:2,extent:A.$});let ut=function(wt){const dt=new A.cM;return function(Tt,oi){for(const Qt in Tt.layers)oi.writeMessage(3,W,Tt.layers[Qt])}(wt,dt),dt.finish()}(st);return ut.byteOffset===0&&ut.byteLength===ut.buffer.byteLength||(ut=new Uint8Array(ut)),{vectorTile:st,rawData:ut.buffer}})}loadData(be){return A._(this,void 0,void 0,function*(){var ge;(ge=this._pendingRequest)===null||ge===void 0||ge.abort();const Re=!!(be&&be.request&&be.request.collectResourceTiming)&&new A.cN(be.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(be,this._pendingRequest);const Ze=yield this._pendingData;this._geoJSONIndex=be.cluster?new ce(function({superclusterOptions:ut,clusterProperties:wt}){if(!wt||!ut)return ut;const dt={},Tt={},oi={accumulated:null,zoom:0},Qt={properties:null},Bi=Object.keys(wt);for(const Ui of Bi){const[yt,Ti]=wt[Ui],Vi=A.cT(Ti),Mi=A.cT(typeof yt=="string"?[yt,["accumulated"],["get",Ui]]:yt);dt[Ui]=Vi.value,Tt[Ui]=Mi.value}return ut.map=Ui=>{Qt.properties=Ui;const yt={};for(const Ti of Bi)yt[Ti]=dt[Ti].evaluate(oi,Qt);return yt},ut.reduce=(Ui,yt)=>{Qt.properties=yt;for(const Ti of Bi)oi.accumulated=Ui[Ti],Ui[Ti]=Tt[Ti].evaluate(oi,Qt)},ut}(be)).load(Ze.features):function(ut,wt){return new zi(ut,wt)}(Ze,be.geojsonVtOptions),this.loaded={};const st={data:Ze};if(Re){const ut=Re.finish();ut&&(st.resourceTiming={},st.resourceTiming[be.source]=JSON.parse(JSON.stringify(ut)))}return st}catch(Ze){if(delete this._pendingRequest,A.cy(Ze))return{abandoned:!0};throw Ze}})}getData(){return A._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(be){const ge=this.loaded;return ge&&ge[be.uid]?super.reloadTile(be):this.loadTile(be)}loadAndProcessGeoJSON(be,ge){return A._(this,void 0,void 0,function*(){let Re=yield this.loadGeoJSON(be,ge);if(delete this._pendingRequest,typeof Re!="object")throw new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`);if(H(Re,!0),be.filter){const Ze=A.cT(be.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ze.result==="error")throw new Error(Ze.value.map(ut=>`${ut.key}: ${ut.message}`).join(", "));Re={type:"FeatureCollection",features:Re.features.filter(ut=>Ze.value.evaluate({zoom:0},ut))}}return Re})}loadGeoJSON(be,ge){return A._(this,void 0,void 0,function*(){const{promoteId:Re}=be;if(be.request){const Ze=yield A.j(be.request,ge);return this._dataUpdateable=A.cV(Ze.data,Re)?A.cU(Ze.data,Re):void 0,Ze.data}if(typeof be.data=="string")try{const Ze=JSON.parse(be.data);return this._dataUpdateable=A.cV(Ze,Re)?A.cU(Ze,Re):void 0,Ze}catch{throw new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`)}if(!be.dataDiff)throw new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${be.source}`);return A.cW(this._dataUpdateable,be.dataDiff,Re),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(be){return A._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(be){return this._geoJSONIndex.getClusterExpansionZoom(be.clusterId)}getClusterChildren(be){return this._geoJSONIndex.getChildren(be.clusterId)}getClusterLeaves(be){return this._geoJSONIndex.getLeaves(be.clusterId,be.limit,be.offset)}}class gn{constructor(be){this.self=be,this.actor=new A.J(be),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ge,Re)=>{if(this.externalWorkerSourceTypes[ge])throw new Error(`Worker source with name "${ge}" already registered.`);this.externalWorkerSourceTypes[ge]=Re},this.self.addProtocol=A.cA,this.self.removeProtocol=A.cB,this.self.registerRTLTextPlugin=ge=>{A.cX.setMethods(ge)},this.actor.registerMessageHandler("LDT",(ge,Re)=>this._getDEMWorkerSource(ge,Re.source).loadTile(Re)),this.actor.registerMessageHandler("RDT",(ge,Re)=>A._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ge,Re.source).removeTile(Re)})),this.actor.registerMessageHandler("GCEZ",(ge,Re)=>A._(this,void 0,void 0,function*(){return this._getWorkerSource(ge,Re.type,Re.source).getClusterExpansionZoom(Re)})),this.actor.registerMessageHandler("GCC",(ge,Re)=>A._(this,void 0,void 0,function*(){return this._getWorkerSource(ge,Re.type,Re.source).getClusterChildren(Re)})),this.actor.registerMessageHandler("GCL",(ge,Re)=>A._(this,void 0,void 0,function*(){return this._getWorkerSource(ge,Re.type,Re.source).getClusterLeaves(Re)})),this.actor.registerMessageHandler("LD",(ge,Re)=>this._getWorkerSource(ge,Re.type,Re.source).loadData(Re)),this.actor.registerMessageHandler("GD",(ge,Re)=>this._getWorkerSource(ge,Re.type,Re.source).getData()),this.actor.registerMessageHandler("LT",(ge,Re)=>this._getWorkerSource(ge,Re.type,Re.source).loadTile(Re)),this.actor.registerMessageHandler("RT",(ge,Re)=>this._getWorkerSource(ge,Re.type,Re.source).reloadTile(Re)),this.actor.registerMessageHandler("AT",(ge,Re)=>this._getWorkerSource(ge,Re.type,Re.source).abortTile(Re)),this.actor.registerMessageHandler("RMT",(ge,Re)=>this._getWorkerSource(ge,Re.type,Re.source).removeTile(Re)),this.actor.registerMessageHandler("RS",(ge,Re)=>A._(this,void 0,void 0,function*(){if(!this.workerSources[ge]||!this.workerSources[ge][Re.type]||!this.workerSources[ge][Re.type][Re.source])return;const Ze=this.workerSources[ge][Re.type][Re.source];delete this.workerSources[ge][Re.type][Re.source],Ze.removeSource!==void 0&&Ze.removeSource(Re)})),this.actor.registerMessageHandler("RM",ge=>A._(this,void 0,void 0,function*(){delete this.layerIndexes[ge],delete this.availableImages[ge],delete this.workerSources[ge],delete this.demWorkerSources[ge],this.globalStates.delete(ge)})),this.actor.registerMessageHandler("SR",(ge,Re)=>A._(this,void 0,void 0,function*(){this.referrer=Re})),this.actor.registerMessageHandler("SRPS",(ge,Re)=>this._syncRTLPluginState(ge,Re)),this.actor.registerMessageHandler("IS",(ge,Re)=>A._(this,void 0,void 0,function*(){this.self.importScripts(Re)})),this.actor.registerMessageHandler("SI",(ge,Re)=>this._setImages(ge,Re)),this.actor.registerMessageHandler("UL",(ge,Re)=>A._(this,void 0,void 0,function*(){this._getLayerIndex(ge).update(Re.layers,Re.removedIds,this._getGlobalState(ge))})),this.actor.registerMessageHandler("UGS",(ge,Re)=>A._(this,void 0,void 0,function*(){const Ze=this._getGlobalState(ge);for(const st in Re)Ze[st]=Re[st]})),this.actor.registerMessageHandler("SL",(ge,Re)=>A._(this,void 0,void 0,function*(){this._getLayerIndex(ge).replace(Re,this._getGlobalState(ge))}))}_getGlobalState(be){let ge=this.globalStates.get(be);return ge||(ge={},this.globalStates.set(be,ge)),ge}_setImages(be,ge){return A._(this,void 0,void 0,function*(){this.availableImages[be]=ge;for(const Re in this.workerSources[be]){const Ze=this.workerSources[be][Re];for(const st in Ze)Ze[st].availableImages=ge}})}_syncRTLPluginState(be,ge){return A._(this,void 0,void 0,function*(){return yield A.cX.syncState(ge,this.self.importScripts)})}_getAvailableImages(be){let ge=this.availableImages[be];return ge||(ge=[]),ge}_getLayerIndex(be){let ge=this.layerIndexes[be];return ge||(ge=this.layerIndexes[be]=new a),ge}_getWorkerSource(be,ge,Re){if(this.workerSources[be]||(this.workerSources[be]={}),this.workerSources[be][ge]||(this.workerSources[be][ge]={}),!this.workerSources[be][ge][Re]){const Ze={sendAsync:(st,ut)=>(st.targetMapId=be,this.actor.sendAsync(st,ut))};switch(ge){case"vector":this.workerSources[be][ge][Re]=new I(Ze,this._getLayerIndex(be),this._getAvailableImages(be));break;case"geojson":this.workerSources[be][ge][Re]=new Gi(Ze,this._getLayerIndex(be),this._getAvailableImages(be));break;default:this.workerSources[be][ge][Re]=new this.externalWorkerSourceTypes[ge](Ze,this._getLayerIndex(be),this._getAvailableImages(be))}}return this.workerSources[be][ge][Re]}_getDEMWorkerSource(be,ge){return this.demWorkerSources[be]||(this.demWorkerSources[be]={}),this.demWorkerSources[be][ge]||(this.demWorkerSources[be][ge]=new P),this.demWorkerSources[be][ge]}}return A.i(self)&&(self.worker=new gn(self)),gn}),o("index",["exports","./shared"],function(A,a){var g="5.9.0";function b(){var w=new a.A(4);return a.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let B,I;const P={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(w,r,d){const y=requestAnimationFrame(S=>{x(),r(S)}),{unsubscribe:x}=a.s(w.signal,"abort",()=>{x(),cancelAnimationFrame(y),d(a.c())},!1)},frameAsync(w){return new Promise((r,d)=>{this.frame(w,r,d)})},getImageData(w,r=0){return this.getImageCanvasContext(w).getImageData(-r,-r,w.width+2*r,w.height+2*r)},getImageCanvasContext(w){const r=window.document.createElement("canvas"),d=r.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return r.width=w.width,r.height=w.height,d.drawImage(w,0,0,w.width,w.height),d},resolveURL:w=>(B||(B=document.createElement("a")),B.href=w,B.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class F{static testProp(r){if(!F.docStyle)return r[0];for(let d=0;d<r.length;d++)if(r[d]in F.docStyle)return r[d];return r[0]}static create(r,d,y){const x=window.document.createElement(r);return d!==void 0&&(x.className=d),y&&y.appendChild(x),x}static createNS(r,d){return window.document.createElementNS(r,d)}static disableDrag(){F.docStyle&&F.selectProp&&(F.userSelect=F.docStyle[F.selectProp],F.docStyle[F.selectProp]="none")}static enableDrag(){F.docStyle&&F.selectProp&&(F.docStyle[F.selectProp]=F.userSelect)}static setTransform(r,d){r.style[F.transformProp]=d}static addEventListener(r,d,y,x={}){r.addEventListener(d,y,"passive"in x?x:x.capture)}static removeEventListener(r,d,y,x={}){r.removeEventListener(d,y,"passive"in x?x:x.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",F.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",F.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",F.suppressClickInternal,!0)},0)}static getScale(r){const d=r.getBoundingClientRect();return{x:d.width/r.offsetWidth||1,y:d.height/r.offsetHeight||1,boundingClientRect:d}}static getPoint(r,d,y){const x=d.boundingClientRect;return new a.P((y.clientX-x.left)/d.x-r.clientLeft,(y.clientY-x.top)/d.y-r.clientTop)}static mousePos(r,d){const y=F.getScale(r);return F.getPoint(r,y,d)}static touchPos(r,d){const y=[],x=F.getScale(r);for(let S=0;S<d.length;S++)y.push(F.getPoint(r,x,d[S]));return y}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const d=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),y=d.querySelectorAll("script");for(const x of y)x.remove();return F.clean(d),d.innerHTML}static isPossiblyDangerous(r,d){const y=d.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!y.includes("javascript:")&&!y.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const d=r.children;for(const y of d)F.removeAttributes(y),F.clean(y)}static removeAttributes(r){for(const{name:d,value:y}of r.attributes)F.isPossiblyDangerous(d,y)&&r.removeAttribute(d)}}F.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,F.selectProp=F.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),F.transformProp=F.testProp(["transform","WebkitTransform"]);const Q={supported:!1,testSupport:function(w){!j&&H&&(V?W(w):R=w)}};let R,H,j=!1,V=!1;function W(w){const r=w.createTexture();w.bindTexture(w.TEXTURE_2D,r);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,H),w.isContextLost())return;Q.supported=!0}catch{}w.deleteTexture(r),j=!0}var ne;typeof document<"u"&&(H=document.createElement("img"),H.onload=()=>{R&&W(R),R=null,V=!0},H.onerror=()=>{j=!0,R=null},H.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let r,d,y,x;w.resetRequestQueue=()=>{r=[],d=0,y=0,x={}},w.addThrottleControl=z=>{const X=y++;return x[X]=z,X},w.removeThrottleControl=z=>{delete x[z],N()},w.getImage=(z,X,Y=!0)=>new Promise((Ae,oe)=>{Q.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),a.e(z,{type:"image"}),r.push({abortController:X,requestParameters:z,supportImageRefresh:Y,state:"queued",onError:_e=>{oe(_e)},onSuccess:_e=>{Ae(_e)}}),N()});const S=z=>a._(this,void 0,void 0,function*(){z.state="running";const{requestParameters:X,supportImageRefresh:Y,onError:Ae,onSuccess:oe,abortController:_e}=z,Ne=Y===!1&&!a.i(self)&&!a.g(X.url)&&(!X.headers||Object.keys(X.headers).reduce((We,Ye)=>We&&Ye==="accept",!0));d++;const He=Ne?U(X,_e):a.m(X,_e);try{const We=yield He;delete z.abortController,z.state="completed",We.data instanceof HTMLImageElement||a.b(We.data)?oe(We):We.data&&oe({data:yield(Ge=We.data,typeof createImageBitmap=="function"?a.f(Ge):a.h(Ge)),cacheControl:We.cacheControl,expires:We.expires})}catch(We){delete z.abortController,Ae(We)}finally{d--,N()}var Ge}),N=()=>{const z=(()=>{for(const X of Object.keys(x))if(x[X]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let X=d;X<z&&r.length>0;X++){const Y=r.shift();Y.abortController.signal.aborted?X--:S(Y)}},U=(z,X)=>new Promise((Y,Ae)=>{const oe=new Image,_e=z.url,Ne=z.credentials;Ne&&Ne==="include"?oe.crossOrigin="use-credentials":(Ne&&Ne==="same-origin"||!a.d(_e))&&(oe.crossOrigin="anonymous"),X.signal.addEventListener("abort",()=>{oe.src="",Ae(a.c())}),oe.fetchPriority="high",oe.onload=()=>{oe.onerror=oe.onload=null,Y({data:oe})},oe.onerror=()=>{oe.onerror=oe.onload=null,X.signal.aborted||Ae(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},oe.src=_e})}(ne||(ne={})),ne.resetRequestQueue();class te{constructor(r){this._transformRequestFn=r??null}transformRequest(r,d){return this._transformRequestFn&&this._transformRequestFn(r,d)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function de(w){const r=[];if(typeof w=="string")r.push({id:"default",url:w});else if(w&&w.length>0){const d=[];for(const{id:y,url:x}of w){const S=`${y}${x}`;d.indexOf(S)===-1&&(d.push(S),r.push({id:y,url:x}))}}return r}function ee(w,r,d){try{const y=new URL(w);return y.pathname+=`${r}${d}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function re(w){const{userImage:r}=w;return!!(r&&r.render&&r.render())&&(w.data.replace(new Uint8Array(r.data.buffer)),!0)}class xe extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:d,promiseResolve:y}of this.requestors)y(this._getImagesForIds(d));this.requestors=[]}}getImage(r){const d=this.images[r];if(d&&!d.data&&d.spriteData){const y=d.spriteData;d.data=new a.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),d.spriteData=null}return d}addImage(r,d){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,d)&&(this.images[r]=d)}_validate(r,d){let y=!0;const x=d.data||d.spriteData;return this._validateStretch(d.stretchX,x&&x.width)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchX" value`))),y=!1),this._validateStretch(d.stretchY,x&&x.height)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchY" value`))),y=!1),this._validateContent(d.content,d)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "content" value`))),y=!1),y}_validateStretch(r,d){if(!r)return!0;let y=0;for(const x of r){if(x[0]<y||x[1]<x[0]||d<x[1])return!1;y=x[1]}return!0}_validateContent(r,d){if(!r)return!0;if(r.length!==4)return!1;const y=d.spriteData,x=y&&y.width||d.data.width,S=y&&y.height||d.data.height;return!(r[0]<0||x<r[0]||r[1]<0||S<r[1]||r[2]<0||x<r[2]||r[3]<0||S<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,d,y=!0){const x=this.getImage(r);if(y&&(x.data.width!==d.data.width||x.data.height!==d.data.height))throw new Error(`size mismatch between old image (${x.data.width}x${x.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=x.version+1,this.images[r]=d,this.updatedImages[r]=!0}removeImage(r){const d=this.images[r];delete this.images[r],delete this.patterns[r],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((d,y)=>{let x=!0;if(!this.isLoaded())for(const S of r)this.images[S]||(x=!1);this.isLoaded()||x?d(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:d})})}_getImagesForIds(r){const d={};for(const y of r){let x=this.getImage(y);x||(this.fire(new a.l("styleimagemissing",{id:y})),x=this.getImage(y)),x?d[y]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,textFitWidth:x.textFitWidth,textFitHeight:x.textFitHeight,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:a.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:r,height:d}=this.atlasImage;return{width:r,height:d}}getPattern(r){const d=this.patterns[r],y=this.getImage(r);if(!y)return null;if(d&&d.position.version===y.version)return d.position;if(d)d.position.version=y.version;else{const x={w:y.data.width+2,h:y.data.height+2,x:0,y:0},S=new a.I(x,y);this.patterns[r]={bin:x,position:S}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const d=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(r,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const S in this.patterns)r.push(this.patterns[S].bin);const{w:d,h:y}=a.p(r),x=this.atlasImage;x.resize({width:d||1,height:y||1});for(const S in this.patterns){const{bin:N}=this.patterns[S],U=N.x+1,z=N.y+1,X=this.getImage(S).data,Y=X.width,Ae=X.height;a.R.copy(X,x,{x:0,y:0},{x:U,y:z},{width:Y,height:Ae}),a.R.copy(X,x,{x:0,y:Ae-1},{x:U,y:z-1},{width:Y,height:1}),a.R.copy(X,x,{x:0,y:0},{x:U,y:z+Ae},{width:Y,height:1}),a.R.copy(X,x,{x:Y-1,y:0},{x:U-1,y:z},{width:1,height:Ae}),a.R.copy(X,x,{x:0,y:0},{x:U+Y,y:z},{width:1,height:Ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const d of r){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const y=this.getImage(d);y||a.w(`Image with ID: "${d}" was not found`),re(y)&&this.updateImage(d,y)}}}const Be=1e20;function se(w,r,d,y,x,S,N,U,z){for(let X=r;X<r+y;X++)ae(w,d*S+X,S,x,N,U,z);for(let X=d;X<d+x;X++)ae(w,X*S+r,1,y,N,U,z)}function ae(w,r,d,y,x,S,N){S[0]=0,N[0]=-Be,N[1]=Be,x[0]=w[r];for(let U=1,z=0,X=0;U<y;U++){x[U]=w[r+U*d];const Y=U*U;do{const Ae=S[z];X=(x[U]-x[Ae]+Y-Ae*Ae)/(U-Ae)/2}while(X<=N[z]&&--z>-1);z++,S[z]=U,N[z]=X,N[z+1]=Be}for(let U=0,z=0;U<y;U++){for(;N[z+1]<U;)z++;const X=S[z],Y=U-X;w[r+U*d]=x[X]+Y*Y}}class ce{constructor(r,d,y){this.requestManager=r,this.localIdeographFontFamily=d,this.entries={},this.lang=y}setURL(r){this.url=r}getGlyphs(r){return a._(this,void 0,void 0,function*(){const d=[];for(const S in r)for(const N of r[S])d.push(this._getAndCacheGlyphsPromise(S,N));const y=yield Promise.all(d),x={};for(const{stack:S,id:N,glyph:U}of y)x[S]||(x[S]={}),x[S][N]=U&&{id:U.id,bitmap:U.bitmap.clone(),metrics:U.metrics};return x})}_getAndCacheGlyphsPromise(r,d){return a._(this,void 0,void 0,function*(){let y=this.entries[r];y||(y=this.entries[r]={glyphs:{},requests:{},ranges:{}});let x=y.glyphs[d];if(x!==void 0)return{stack:r,id:d,glyph:x};if(x=this._tinySDF(y,r,d),x)return y.glyphs[d]=x,{stack:r,id:d,glyph:x};const S=Math.floor(d/256);if(256*S>65535)throw new Error("glyphs > 65535 not supported");if(y.ranges[S])return{stack:r,id:d,glyph:x};if(!this.url)throw new Error("glyphsUrl is not set");if(!y.requests[S]){const U=ce.loadGlyphRange(r,S,this.url,this.requestManager);y.requests[S]=U}const N=yield y.requests[S];for(const U in N)this._doesCharSupportLocalGlyph(+U)||(y.glyphs[+U]=N[+U]);return y.ranges[S]=!0,{stack:r,id:d,glyph:N[d]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||a.u["CJK Unified Ideographs"](r)||a.u["Hangul Syllables"](r)||a.u.Hiragana(r)||a.u.Katakana(r)||a.u["CJK Symbols and Punctuation"](r)||a.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,d,y){const x=this.localIdeographFontFamily;if(!x||!this._doesCharSupportLocalGlyph(y))return;let S=r.tinySDF;if(!S){let U="400";/bold/i.test(d)?U="900":/medium/i.test(d)?U="500":/light/i.test(d)&&(U="200"),S=r.tinySDF=new ce.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:x,fontWeight:U})}const N=S.draw(String.fromCharCode(y));return{id:y,bitmap:new a.q({width:N.width||60,height:N.height||60},N.data),metrics:{width:N.glyphWidth/2||24,height:N.glyphHeight/2||24,left:N.glyphLeft/2+.5||0,top:N.glyphTop/2-27.5||-8,advance:N.glyphAdvance/2||24,isDoubleResolution:!0}}}}ce.loadGlyphRange=function(w,r,d,y){return a._(this,void 0,void 0,function*(){const x=256*r,S=x+255,N=y.transformRequest(d.replace("{fontstack}",w).replace("{range}",`${x}-${S}`),"Glyphs"),U=yield a.n(N,new AbortController);if(!U||!U.data)throw new Error(`Could not load glyph range. range: ${r}, ${x}-${S}`);const z={};for(const X of a.o(U.data))z[X.id]=X;return z})},ce.TinySDF=class{constructor({fontSize:w=24,buffer:r=3,radius:d=8,cutoff:y=.25,fontFamily:x="sans-serif",fontWeight:S="normal",fontStyle:N="normal",lang:U=null}={}){this.buffer=r,this.cutoff=y,this.radius=d,this.lang=U;const z=this.size=w+4*r,X=this._createCanvas(z),Y=this.ctx=X.getContext("2d",{willReadFrequently:!0});Y.font=`${N} ${S} ${w}px ${x}`,Y.textBaseline="alphabetic",Y.textAlign="left",Y.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(w){const r=document.createElement("canvas");return r.width=r.height=w,r}draw(w){const{width:r,actualBoundingBoxAscent:d,actualBoundingBoxDescent:y,actualBoundingBoxLeft:x,actualBoundingBoxRight:S}=this.ctx.measureText(w),N=Math.ceil(d),U=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-x))),z=Math.min(this.size-this.buffer,N+Math.ceil(y)),X=U+2*this.buffer,Y=z+2*this.buffer,Ae=Math.max(X*Y,0),oe=new Uint8ClampedArray(Ae),_e={data:oe,width:X,height:Y,glyphWidth:U,glyphHeight:z,glyphTop:N,glyphLeft:0,glyphAdvance:r};if(U===0||z===0)return _e;const{ctx:Ne,buffer:He,gridInner:Ge,gridOuter:We}=this;this.lang&&(Ne.lang=this.lang),Ne.clearRect(He,He,U,z),Ne.fillText(w,He,He+N);const Ye=Ne.getImageData(He,He,U,z);We.fill(Be,0,Ae),Ge.fill(0,0,Ae);for(let it=0;it<z;it++)for(let Je=0;Je<U;Je++){const lt=Ye.data[4*(it*U+Je)+3]/255;if(lt===0)continue;const ht=(it+He)*X+Je+He;if(lt===1)We[ht]=0,Ge[ht]=Be;else{const nt=.5-lt;We[ht]=nt>0?nt*nt:0,Ge[ht]=nt<0?nt*nt:0}}se(We,0,0,X,Y,X,this.f,this.v,this.z),se(Ge,He,He,U,z,X,this.f,this.v,this.z);for(let it=0;it<Ae;it++){const Je=Math.sqrt(We[it])-Math.sqrt(Ge[it]);oe[it]=Math.round(255-255*(Je/this.radius+this.cutoff))}return _e}};class Ee{constructor(){this.specification=a.v.light.position}possiblyEvaluate(r,d){return a.B(r.expression.evaluate(d))}interpolate(r,d,y){return{x:a.C.number(r.x,d.x,y),y:a.C.number(r.y,d.y,y),z:a.C.number(r.z,d.z,y)}}}let Ve;class ue extends a.E{constructor(r){super(),Ve=Ve||new a.r({anchor:new a.D(a.v.light.anchor),position:new Ee,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(Ve,void 0),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,d={}){if(!this._validate(a.x,r,d))for(const y in r){const x=r[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),x):this._transitionable.setValue(y,x)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,d,y){return(!y||y.validate!==!1)&&a.y(this,r.call(a.z,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const fe=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Ue extends a.E{constructor(r){super(),this._transitionable=new a.t(fe,void 0),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(r,d={}){if(!this._validate(a.G,r,d)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in r){const x=r[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),x):this._transitionable.setValue(y,x)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,d,y={}){return y?.validate!==!1&&a.y(this,r.call(a.z,a.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class ke{constructor(r,d){this.width=r,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,d){const y=r.join(",")+String(d);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(r,d)),this.dashEntry[y]}getDashRanges(r,d,y){const x=[];let S=r.length%2==1?-r[r.length-1]*y:0,N=r[0]*y,U=!0;x.push({left:S,right:N,isDash:U,zeroLength:r[0]===0});let z=r[0];for(let X=1;X<r.length;X++){U=!U;const Y=r[X];S=z*y,z+=Y,N=z*y,x.push({left:S,right:N,isDash:U,zeroLength:Y===0})}return x}addRoundDash(r,d,y){const x=d/2;for(let S=-y;S<=y;S++){const N=this.width*(this.nextRow+y+S);let U=0,z=r[U];for(let X=0;X<this.width;X++){X/z.right>1&&(z=r[++U]);const Y=Math.abs(X-z.left),Ae=Math.abs(X-z.right),oe=Math.min(Y,Ae);let _e;const Ne=S/y*(x+1);if(z.isDash){const He=x-Math.abs(Ne);_e=Math.sqrt(oe*oe+He*He)}else _e=x-Math.sqrt(oe*oe+Ne*Ne);this.data[N+X]=Math.max(0,Math.min(255,_e+128))}}}addRegularDash(r){for(let U=r.length-1;U>=0;--U){const z=r[U],X=r[U+1];z.zeroLength?r.splice(U,1):X&&X.isDash===z.isDash&&(X.left=z.left,r.splice(U,1))}const d=r[0],y=r[r.length-1];d.isDash===y.isDash&&(d.left=y.left-this.width,y.right=d.right+this.width);const x=this.width*this.nextRow;let S=0,N=r[S];for(let U=0;U<this.width;U++){U/N.right>1&&(N=r[++S]);const z=Math.abs(U-N.left),X=Math.abs(U-N.right),Y=Math.min(z,X);this.data[x+U]=Math.max(0,Math.min(255,(N.isDash?Y:-Y)+128))}}addDash(r,d){const y=d?7:0,x=2*y+1;if(this.nextRow+x>this.height)return a.w("LineAtlas out of space"),null;let S=0;for(let U=0;U<r.length;U++)S+=r[U];if(S!==0){const U=this.width/S,z=this.getDashRanges(r,this.width,U);d?this.addRoundDash(z,U,y):this.addRegularDash(z)}const N={y:this.nextRow+y,height:2*y,width:S};return this.nextRow+=x,this.dirty=!0,N}bind(r){const d=r.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const pe="maplibre_preloaded_worker_pool";class Qe{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Qe.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[pe]}numActive(){return Object.keys(this.active).length}}const J=Math.floor(P.hardwareConcurrency/2);let me,Fe;function ze(){return me||(me=new Qe),me}Qe.workerCount=a.H(globalThis)?Math.max(Math.min(J,3),1):1;class Ke{constructor(r,d){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=d;const y=this.workerPool.acquire(d);for(let x=0;x<y.length;x++){const S=new a.J(y[x],d);S.name=`Worker ${x}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,d){const y=[];for(const x of this.actors)y.push(x.sendAsync({type:r,data:d}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,d){for(const y of this.actors)y.registerMessageHandler(r,d)}}function _t(){return Fe||(Fe=new Ke(ze(),a.K),Fe.registerMessageHandler("GR",(w,r,d)=>a.m(r,d))),Fe}function gt(w,r){const d=a.L();return a.M(d,d,[1,1,0]),a.N(d,d,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?a.O(d,d,w.calculatePosMatrix(r.toUnwrapped())):d}function Et(w,r,d,y,x,S,N){var U;const z=function(oe,_e,Ne){if(oe)for(const He of oe){const Ge=_e[He];if(Ge&&Ge.source===Ne&&Ge.type==="fill-extrusion")return!0}else for(const He in _e){const Ge=_e[He];if(Ge.source===Ne&&Ge.type==="fill-extrusion")return!0}return!1}((U=x?.layers)!==null&&U!==void 0?U:null,r,w.id),X=S.maxPitchScaleFactor(),Y=w.tilesIn(y,X,z);Y.sort(hi);const Ae=[];for(const oe of Y)Ae.push({wrappedTileID:oe.tileID.wrapped().key,queryResults:oe.tile.queryRenderedFeatures(r,d,w._state,oe.queryGeometry,oe.cameraQueryGeometry,oe.scale,x,S,X,gt(w.transform,oe.tileID),N?(_e,Ne)=>N(oe.tileID,_e,Ne):void 0)});return function(oe,_e){for(const Ne in oe)for(const He of oe[Ne])Vt(He,_e);return oe}(function(oe){const _e={},Ne={};for(const He of oe){const Ge=He.queryResults,We=He.wrappedTileID,Ye=Ne[We]=Ne[We]||{};for(const it in Ge){const Je=Ge[it],lt=Ye[it]=Ye[it]||{},ht=_e[it]=_e[it]||[];for(const nt of Je)lt[nt.featureIndex]||(lt[nt.featureIndex]=!0,ht.push(nt))}}return _e}(Ae),w)}function hi(w,r){const d=w.tileID,y=r.tileID;return d.overscaledZ-y.overscaledZ||d.canonical.y-y.canonical.y||d.wrap-y.wrap||d.canonical.x-y.canonical.x}function Vt(w,r){const d=w.feature,y=r.getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source,d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]),d.state=y}function Yt(w,r,d){return a._(this,void 0,void 0,function*(){let y=w;if(w.url?y=(yield a.j(r.transformRequest(w.url,"Source"),d)).data:yield P.frameAsync(d),!y)return null;const x=a.Q(a.e(y,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(x.vectorLayerIds=y.vector_layers.map(S=>S.id)),x})}class Jt{constructor(r,d){r&&(d?this.setSouthWest(r).setNorthEast(d):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof a.S?new a.S(r.lng,r.lat):a.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof a.S?new a.S(r.lng,r.lat):a.S.convert(r),this}extend(r){const d=this._sw,y=this._ne;let x,S;if(r instanceof a.S)x=r,S=r;else{if(!(r instanceof Jt))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Jt.convert(r)):this.extend(a.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(a.S.convert(r)):this;if(x=r._sw,S=r._ne,!x||!S)return this}return d||y?(d.lng=Math.min(x.lng,d.lng),d.lat=Math.min(x.lat,d.lat),y.lng=Math.max(S.lng,y.lng),y.lat=Math.max(S.lat,y.lat)):(this._sw=new a.S(x.lng,x.lat),this._ne=new a.S(S.lng,S.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:d,lat:y}=a.S.convert(r);let x=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&x}static convert(r){return r instanceof Jt?r:r&&new Jt(r)}static fromLngLat(r,d=0){const y=360*d/40075017,x=y/Math.cos(Math.PI/180*r.lat);return new Jt(new a.S(r.lng-x,r.lat-y),new a.S(r.lng+x,r.lat+y))}adjustAntiMeridian(){const r=new a.S(this._sw.lng,this._sw.lat),d=new a.S(this._ne.lng,this._ne.lat);return new Jt(r,r.lng>d.lng?new a.S(d.lng+360,d.lat):d)}}class bi{constructor(r,d,y){this.bounds=Jt.convert(this.validateBounds(r)),this.minzoom=d||0,this.maxzoom=y||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const d=Math.pow(2,r.z),y=Math.floor(a.V(this.bounds.getWest())*d),x=Math.floor(a.U(this.bounds.getNorth())*d),S=Math.ceil(a.V(this.bounds.getEast())*d),N=Math.ceil(a.U(this.bounds.getSouth())*d);return r.x>=y&&r.x<S&&r.y>=x&&r.y<N}}class ot extends a.E{constructor(r,d,y,x){if(super(),this.id=r,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(d,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Yt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(a.e(this,r),r.bounds&&(this.tileBounds=new bi(r.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(r){return a._(this,void 0,void 0,function*(){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(d,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};y.request.collectResourceTiming=this._collectResourceTiming;let x="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((S,N)=>{r.reloadPromise={resolve:S,reject:N}})}else r.actor=this.dispatcher.getActor(),x="LT";r.abortController=new AbortController;try{const S=yield r.actor.sendAsync({type:x,data:y},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,S)}catch(S){if(delete r.abortController,r.aborted)return;if(S&&S.status!==404)throw S;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,d){if(d&&d.resourceTiming&&(r.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&r.setExpiryData(d),r.loadVectorData(d,this.map.painter),r.reloadPromise){const y=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(y.resolve).catch(y.reject)}}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class $e extends a.E{constructor(r,d,y,x){super(),this.id=r,this.dispatcher=y,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},d),a.e(this,a.Q(d,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const d=yield Yt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,d&&(a.e(this,d),d.bounds&&(this.tileBounds=new bi(d.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(d){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(d))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return a.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return a._(this,void 0,void 0,function*(){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const y=yield ne.getImage(this.map._requestManager.transformRequest(d,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&r.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const x=this.map.painter.context,S=x.gl,N=y.data;r.texture=this.map.painter.getTileTexture(N.width),r.texture?r.texture.update(N,{useMipmap:!0}):(r.texture=new a.T(x,N,S.RGBA,{useMipmap:!0}),r.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(y){if(delete r.abortController,r.aborted)r.state="unloaded";else if(y)throw r.state="errored",y}})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Ni extends $e{constructor(r,d,y,x){super(r,d,y,x),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(r){return a._(this,void 0,void 0,function*(){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(d,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const x=yield ne.getImage(y,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(x&&x.data){const S=x.data;this.map._refreshExpiredTiles&&(x.cacheControl||x.expires)&&r.setExpiryData({cacheControl:x.cacheControl,expires:x.expires});const N=a.b(S)&&a.W()?S:yield this.readImageNow(S),U={type:this.type,uid:r.uid,source:this.id,rawImageData:N,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const z=yield r.actor.sendAsync({type:"LDT",data:U});r.dem=z,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(x){if(delete r.abortController,r.aborted)r.state="unloaded";else if(x)throw r.state="errored",x}})}readImageNow(r){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.X()){const d=r.width+2,y=r.height+2;try{return new a.R({width:d,height:y},yield a.Y(r,-1,-1,d,y))}catch{}}return P.getImageData(r,1)})}_getNeighboringTiles(r){const d=r.canonical,y=Math.pow(2,d.z),x=(d.x-1+y)%y,S=d.x===0?r.wrap-1:r.wrap,N=(d.x+1+y)%y,U=d.x+1===y?r.wrap+1:r.wrap,z={};return z[new a.Z(r.overscaledZ,S,d.z,x,d.y).key]={backfilled:!1},z[new a.Z(r.overscaledZ,U,d.z,N,d.y).key]={backfilled:!1},d.y>0&&(z[new a.Z(r.overscaledZ,S,d.z,x,d.y-1).key]={backfilled:!1},z[new a.Z(r.overscaledZ,r.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},z[new a.Z(r.overscaledZ,U,d.z,N,d.y-1).key]={backfilled:!1}),d.y+1<y&&(z[new a.Z(r.overscaledZ,S,d.z,x,d.y+1).key]={backfilled:!1},z[new a.Z(r.overscaledZ,r.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},z[new a.Z(r.overscaledZ,U,d.z,N,d.y+1).key]={backfilled:!1}),z}unloadTile(r){return a._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class yi extends a.E{constructor(r,d,y,x){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:d.data},this.actor=y.getActor(),this.setEventedParent(x),this._data=d.data,this._options=a.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId,d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(d.buffer!==void 0?d.buffer:128),tolerance:this._pixelsToTileUnits(d.tolerance!==void 0?d.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(d.clusterMaxZoom),minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(d.clusterRadius||50),log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(a.$/this.tileSize)}_getClusterMaxZoom(r){const d=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${d}"`),d}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._pendingWorkerUpdate={data:r},this._updateWorkerData(),this}updateData(r){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,r),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,function*(){const r=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(d=>d.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){const r=new Jt,d=yield this.getData();let y;switch(d.type){case"FeatureCollection":y=d.features.map(x=>this.getCoordinatesFromGeometry(x.geometry)).flat(1/0);break;case"Feature":y=this.getCoordinatesFromGeometry(d.geometry);break;default:y=this.getCoordinatesFromGeometry(d)}if(y.length==0)return r;for(let x=0;x<y.length-1;x+=2)r.extend([y[x],y[x+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,d,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:d,offset:y}})}_updateWorkerData(){return a._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:r,diff:d}=this._pendingWorkerUpdate;if(!r&&!d)return void a.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const y=a.e({type:this.type},this.workerOptions);r?(typeof r=="string"?(y.request=this.map._requestManager.transformRequest(P.resolveURL(r),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(r),this._pendingWorkerUpdate.data=void 0):d&&(y.dataDiff=d,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const x=yield this.actor.sendAsync({type:"LD",data:y});if(this._isUpdatingWorker=!1,this._removed||x.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=x.data;let S=null;x.resourceTiming&&x.resourceTiming[this.id]&&(S=x.resourceTiming[this.id].slice(0));const N={dataType:"source"};this._collectResourceTiming&&S&&S.length>0&&a.e(N,{resourceTiming:S}),this.fire(new a.l("data",Object.assign(Object.assign({},N),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},N),{sourceDataType:"content"})))}catch(x){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(x))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(r){return a._(this,void 0,void 0,function*(){const d=r.actor?"RT":"LT";r.actor=this.actor;const y={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const x=yield this.actor.sendAsync({type:d,data:y},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(x,this.map.painter,d==="RT")})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class si extends a.E{constructor(r,d,y,x){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=y,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=d}load(r){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,r&&(this.coordinates=r),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new a.k(d))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const d=r.map(a.a1.fromLngLat);var y;return this.tileID=function(x){const S=a.a2.fromPoints(x),N=S.width(),U=S.height(),z=Math.max(N,U),X=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),Y=Math.pow(2,X);return new a.a4(X,Math.floor((S.minX+S.maxX)/2*Y),Math.floor((S.minY+S.maxY)/2*Y))}(d),this.terrainTileRanges=this._getOverlappingTileRanges(d),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=d.map(x=>this.tileID.getTilePoint(x)._round()),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,d=r.gl;this.texture||(this.texture=new a.T(r,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let y=!1;for(const x in this.tiles){const S=this.tiles[x];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,y=!0)}y&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:d,minY:y,maxX:x,maxY:S}=a.a2.fromPoints(r),N={};for(let U=0;U<=a.a3;U++){const z=Math.pow(2,U),X=Math.floor(d*z),Y=Math.floor(y*z),Ae=Math.floor(x*z),oe=Math.floor(S*z);N[U]={minTileX:X,minTileY:Y,maxTileX:Ae,maxTileY:oe}}return N}}class Mt extends si{constructor(r,d,y,x){super(r,d,y,x),this.roundZoom=!0,this.type="video",this.options=d}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const d of r.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield a.a5(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new a.k(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const d=this.video.seekable;r<d.start(0)||r>d.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,d=r.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(r,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let y=!1;for(const x in this.tiles){const S=this.tiles[x];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,y=!0)}y&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ei extends si{constructor(r,d,y,x){super(r,d,y,x),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(N=>typeof N!="number"))||this.fire(new a.k(new a.a6(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a6(`sources.${r}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a6(`sources.${r}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,y=d.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(d,this.canvas,y.RGBA,{premultiply:!0});let x=!1;for(const S in this.tiles){const N=this.tiles[S];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture,x=!0)}x&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const ai={},Ei=w=>{switch(w){case"geojson":return yi;case"image":return si;case"raster":return $e;case"raster-dem":return Ni;case"vector":return ot;case"video":return Mt;case"canvas":return ei}return ai[w]},$i="RTLPluginLoaded";class zi extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=_t()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return a._(this,arguments,void 0,function*(d,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l($i))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let wi=null;function Gi(){return wi||(wi=new zi),wi}var gn,et;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(gn||(gn={})),function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"}(et||(et={}));class be{constructor(r,d){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=r,this.uid=a.a7(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(r){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(r||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:r,fadingDirection:d,fadingParentID:y,fadeEndTime:x}){this.resetFadeLogic(),this.fadingRole=r,this.fadingDirection=d,this.fadingParentID=y,this.fadeEndTime=x}setSelfFadeLogic(r){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=r}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=P.now(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,d,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(x,S){const N={};if(!S)return N;for(const U of x){const z=U.layerIds.map(X=>S.getLayer(X)).filter(Boolean);if(z.length!==0){U.layers=z,U.stateDependentLayerIds&&(U.stateDependentLayers=U.stateDependentLayerIds.map(X=>z.filter(Y=>Y.id===X)[0]));for(const X of z)N[X.id]=U}}return N}(r.buckets,d?.style),this.hasSymbolBuckets=!1;for(const x in this.buckets){const S=this.buckets[x];if(S instanceof a.a9){if(this.hasSymbolBuckets=!0,!y)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const x in this.buckets){const S=this.buckets[x];if(S instanceof a.a9&&S.hasRTLText){this.hasRTLText=!0,Gi().lazyLoad();break}}this.queryPadding=0;for(const x in this.buckets){const S=this.buckets[x];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(x).queryRadius(S))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),this.dashPositions=r.dashPositions}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const y in this.buckets){const x=this.buckets[y];x.uploadPending()&&x.upload(r)}const d=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(r,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(r,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,d,y,x,S,N,U,z,X,Y,Ae){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:x,cameraQueryGeometry:S,scale:N,tileSize:this.tileSize,pixelPosMatrix:Y,transform:z,params:U,queryPadding:this.queryPadding*X,getElevation:Ae},r,d,y):{}}querySourceFeatures(r,d){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const x=y.loadVTLayers(),S=d&&d.sourceLayer?d.sourceLayer:"",N=x._geojsonTileLayer||x[S];if(!N)return;const U=a.aa(d?.filter,d?.globalState),{z,x:X,y:Y}=this.tileID.canonical,Ae={z,x:X,y:Y};for(let oe=0;oe<N.length;oe++){const _e=N.feature(oe);if(U.needGeometry){const Ge=a.ab(_e,!0);if(!U.filter(new a.F(this.tileID.overscaledZ),Ge,this.tileID.canonical))continue}else if(!U.filter(new a.F(this.tileID.overscaledZ),_e))continue;const Ne=y.getId(_e,S),He=new a.ac(_e,z,X,Y,Ne);He.tile=Ae,r.push(He)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const d=this.expirationTime;if(r.cacheControl){const y=a.ad(r.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const y=Date.now();let x=!1;if(this.expirationTime>y)x=!1;else if(d)if(this.expirationTime<d)x=!0;else{const S=this.expirationTime-d;S?this.expirationTime=y+Math.max(S,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const x in this.buckets){if(!d.style.hasLayer(x))continue;const S=this.buckets[x],N=S.layers[0].sourceLayer||"_geojsonTileLayer",U=y[N],z=r[N];if(!U||!z||Object.keys(z).length===0)continue;S.update(z,U,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const X=d&&d.style&&d.style.getLayer(x);X&&(this.queryPadding=Math.max(this.queryPadding,X.queryRadius(S)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<P.now()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(r){this.symbolFadeHoldUntil=P.now()+r}setDependencies(r,d){const y={};for(const x of d)y[x]=!0;this.dependencies[r]=y}hasDependency(r,d){for(const y of r){const x=this.dependencies[y];if(x){for(const S of d)if(x[S])return!0}}return!1}}class ge{constructor(r,d){this.max=r,this.onRemove=d,this.reset()}reset(){for(const r in this.data)for(const d of this.data[r])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(r,d,y){const x=r.wrapped().key;this.data[x]===void 0&&(this.data[x]=[]);const S={value:d,timeout:void 0};if(y!==void 0&&(S.timeout=setTimeout(()=>{this.remove(r,S)},y)),this.data[x].push(S),this.order.push(x),this.order.length>this.max){const N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const d=this.data[r].shift();return d.timeout&&clearTimeout(d.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),d.value}getByKey(r){const d=this.data[r];return d?d[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,d){if(!this.has(r))return this;const y=r.wrapped().key,x=d===void 0?0:this.data[y].indexOf(d),S=this.data[y][x];return this.data[y].splice(x,1),S.timeout&&clearTimeout(S.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(S.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(r){const d=[];for(const y in this.data)for(const x of this.data[y])r(x.value)||d.push(x);for(const y of d)this.remove(y.value.tileID,y)}}class Re{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,d,y){const x=String(d);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][x]=this.stateChanges[r][x]||{},a.e(this.stateChanges[r][x],y),this.deletedStates[r]===null){this.deletedStates[r]={};for(const S in this.state[r])S!==x&&(this.deletedStates[r][S]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][x]===null){this.deletedStates[r][x]={};for(const S in this.state[r][x])y[S]||(this.deletedStates[r][x][S]=null)}else for(const S in y)this.deletedStates[r]&&this.deletedStates[r][x]&&this.deletedStates[r][x][S]===null&&delete this.deletedStates[r][x][S]}removeFeatureState(r,d,y){if(this.deletedStates[r]===null)return;const x=String(d);if(this.deletedStates[r]=this.deletedStates[r]||{},y&&d!==void 0)this.deletedStates[r][x]!==null&&(this.deletedStates[r][x]=this.deletedStates[r][x]||{},this.deletedStates[r][x][y]=null);else if(d!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][x])for(y in this.deletedStates[r][x]={},this.stateChanges[r][x])this.deletedStates[r][x][y]=null;else this.deletedStates[r][x]=null;else this.deletedStates[r]=null}getState(r,d){const y=String(d),x=a.e({},(this.state[r]||{})[y],(this.stateChanges[r]||{})[y]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const S=this.deletedStates[r][d];if(S===null)return{};for(const N in S)delete x[N]}return x}initializeTileState(r,d){r.setFeatureState(this.state,d)}coalesceChanges(r,d){const y={};for(const x in this.stateChanges){this.state[x]=this.state[x]||{};const S={};for(const N in this.stateChanges[x])this.state[x][N]||(this.state[x][N]={}),a.e(this.state[x][N],this.stateChanges[x][N]),S[N]=this.state[x][N];y[x]=S}for(const x in this.deletedStates){this.state[x]=this.state[x]||{};const S={};if(this.deletedStates[x]===null)for(const N in this.state[x])S[N]={},this.state[x][N]={};else for(const N in this.deletedStates[x]){if(this.deletedStates[x][N]===null)this.state[x][N]={};else for(const U of Object.keys(this.deletedStates[x][N]))delete this.state[x][N][U];S[N]=this.state[x][N]}y[x]=y[x]||{},a.e(y[x],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const x in r)r[x].setFeatureState(y,d)}}const Ze=89.25;function st(w,r){const d=a.ah(r.lat,-a.ai,a.ai);return new a.P(a.V(r.lng)*w,a.U(d)*w)}function ut(w,r){return new a.a1(r.x/w,r.y/w).toLngLat()}function wt(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(a.ae(90-w.pitch)),Math.tan(a.ae(Ze-w.pitch)))}function dt(w,r){const d=w.canonical,y=r/a.af(d.z),x=d.x+Math.pow(2,d.z)*w.wrap,S=a.ag(new Float64Array(16));return a.M(S,S,[x*y,d.y*y,0]),a.N(S,S,[y/a.$,y/a.$,1]),S}function Tt(w,r,d,y,x){const S=a.a1.fromLngLat(w,r),N=x*a.aj(1,w.lat),U=N*Math.cos(a.ae(d)),z=Math.sqrt(N*N-U*U),X=z*Math.sin(a.ae(-y)),Y=z*Math.cos(a.ae(-y));return new a.a1(S.x+X,S.y+Y,S.z+U)}function oi(w,r,d){const y=r.intersectsFrustum(w);if(!d||y===0)return y;const x=r.intersectsPlane(d);return x===0?0:y===2&&x===2?2:1}function Qt(w,r,d){let y=0;const x=(d-r)/10;for(let S=0;S<10;S++)y+=x*Math.pow(Math.cos(r+(S+.5)/10*(d-r)),w);return y}function Bi(w,r){return function(d,y,x,S,N){const U=2*((w-1)/a.ak(Math.cos(a.ae(Ze-N))/Math.cos(a.ae(Ze)))-1),z=Math.acos(x/S),X=2*Qt(U-1,0,a.ae(N/2)),Y=Math.min(a.ae(Ze),z+a.ae(N/2)),Ae=Qt(U-1,Math.min(Y,z-a.ae(N/2)),Y),oe=Math.atan(y/x),_e=Math.hypot(y,x);let Ne=d;return Ne+=a.ak(S/_e/Math.max(.5,Math.cos(a.ae(N/2)))),Ne+=U*a.ak(Math.cos(oe))/2,Ne-=a.ak(Math.max(1,Ae/X/r))/2,Ne}}const Ui=Bi(9.314,3);function yt(w,r){const d=(r.roundZoom?Math.round:Math.floor)(w.zoom+a.ak(w.tileSize/r.tileSize));return Math.max(0,d)}function Ti(w,r){const d=w.getCameraFrustum(),y=w.getClippingPlane(),x=w.screenPointToMercatorCoordinate(w.getCameraPoint()),S=a.a1.fromLngLat(w.center,w.elevation);x.z=S.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const N=w.getCoveringTilesDetailsProvider(),U=N.allowVariableZoom(w,r),z=yt(w,r),X=r.minzoom||0,Y=r.maxzoom!==void 0?r.maxzoom:w.maxZoom,Ae=Math.min(Math.max(0,z),Y),oe=Math.pow(2,Ae),_e=[oe*x.x,oe*x.y,0],Ne=[oe*S.x,oe*S.y,0],He=Math.hypot(S.x-x.x,S.y-x.y),Ge=Math.abs(S.z-x.z),We=Math.hypot(He,Ge),Ye=lt=>({zoom:0,x:0,y:0,wrap:lt,fullyVisible:!1}),it=[],Je=[];if(w.renderWorldCopies&&N.allowWorldCopies())for(let lt=1;lt<=3;lt++)it.push(Ye(-lt)),it.push(Ye(lt));for(it.push(Ye(0));it.length>0;){const lt=it.pop(),ht=lt.x,nt=lt.y;let mt=lt.fullyVisible;const Dt={x:ht,y:nt,z:lt.zoom},Nt=N.getTileBoundingVolume(Dt,lt.wrap,w.elevation,r);if(!mt){const Ai=oi(d,Nt,y);if(Ai===0)continue;mt=Ai===2}const Lt=N.distanceToTile2d(x.x,x.y,Dt,Nt);let Pt=z;U&&(Pt=(r.calculateTileZoom||Ui)(w.zoom+a.ak(w.tileSize/r.tileSize),Lt,Ge,We,w.fov)),Pt=(r.roundZoom?Math.round:Math.floor)(Pt),Pt=Math.max(0,Pt);const ui=Math.min(Pt,Y);if(lt.wrap=N.getWrap(S,Dt,lt.wrap),lt.zoom>=ui){if(lt.zoom<X)continue;const Ai=Ae-lt.zoom,$t=_e[0]-.5-(ht<<Ai),ki=_e[1]-.5-(nt<<Ai),cn=r.reparseOverscaled?Math.max(lt.zoom,Pt):lt.zoom;Je.push({tileID:new a.Z(lt.zoom===Y?cn:lt.zoom,lt.wrap,lt.zoom,ht,nt),distanceSq:a.al([Ne[0]-.5-ht,Ne[1]-.5-nt]),tileDistanceToCamera:Math.sqrt($t*$t+ki*ki)})}else for(let Ai=0;Ai<4;Ai++)it.push({zoom:lt.zoom+1,x:(ht<<1)+Ai%2,y:(nt<<1)+(Ai>>1),wrap:lt.wrap,fullyVisible:mt})}return Je.sort((lt,ht)=>lt.distanceSq-ht.distanceSq).map(lt=>lt.tileID)}const Vi=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Mi extends a.E{constructor(r,d,y){super(),this.id=r,this.dispatcher=y,this.on("data",x=>this._dataHandler(x)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((x,S,N,U)=>{const z=new(Ei(S.type))(x,S,N,U);if(z.id!==x)throw new Error(`Expected Source id to be ${x} instead of ${z.id}`);return z})(r,d,y,this),this._tiles={},this._cache=new ge(0,x=>this._unloadTile(x)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Re,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const d=this._tiles[r];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,d,y){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,d,y)}catch(x){r.state="errored",x.status!==404?this._source.fire(new a.k(x,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new a.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const y=this._tiles[d];y.upload(r),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(sn).map(r=>r.key)}getRenderableIds(r){const d=[];for(const y in this._tiles)this._isIdRenderable(y,r)&&d.push(this._tiles[y]);return r?d.sort((y,x)=>{const S=y.tileID,N=x.tileID,U=new a.P(S.canonical.x,S.canonical.y)._rotate(-this.transform.bearingInRadians),z=new a.P(N.canonical.x,N.canonical.y)._rotate(-this.transform.bearingInRadians);return S.overscaledZ-N.overscaledZ||z.y-U.y||z.x-U.x}).map(y=>y.tileID.key):d.map(y=>y.tileID).sort(sn).map(y=>y.key)}hasRenderableParent(r){const d=r.overscaledZ-1;if(d>=this._source.minzoom){const y=this._getLoadedTile(r.scaledTo(d));if(y)return this._isIdRenderable(y.tileID.key)}return!1}_isIdRenderable(r,d=!1){var y;return(y=this._tiles[r])===null||y===void 0?void 0:y.isRenderable(d)}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)r?this._reloadTile(d,"expired"):this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(r,d){return a._(this,void 0,void 0,function*(){const y=this._tiles[r];y&&(y.state!=="loading"&&(y.state=d),yield this._loadTile(y,r,d))})}_tileLoaded(r,d,y){r.timeAdded=P.now(),y==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(d,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const d=this.getRenderableIds();for(let x=0;x<d.length;x++){const S=d[x];if(r.neighboringTiles&&r.neighboringTiles[S]){const N=this.getTileByID(S);y(r,N),y(N,r)}}function y(x,S){x.needsHillshadePrepare=!0,x.needsTerrainPrepare=!0;let N=S.tileID.canonical.x-x.tileID.canonical.x;const U=S.tileID.canonical.y-x.tileID.canonical.y,z=Math.pow(2,x.tileID.canonical.z),X=S.tileID.key;N===0&&U===0||Math.abs(U)>1||(Math.abs(N)>1&&(Math.abs(N+z)===1?N+=z:Math.abs(N-z)===1&&(N-=z)),S.dem&&x.dem&&(x.dem.backfillBorder(S.dem,N,U),x.neighboringTiles&&x.neighboringTiles[X]&&(x.neighboringTiles[X].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,d){const y=Object.values(r),x=this._getLoadedDescendents(y),S={};for(const N of y){const U=x[N.key];if(!U?.length){S[N.key]=N;continue}const z=N.overscaledZ+Mi.maxUnderzooming,X=U.filter(oe=>oe.tileID.overscaledZ<=z);if(!X.length){S[N.key]=N;continue}const Y=Math.min(...X.map(oe=>oe.tileID.overscaledZ)),Ae=X.filter(oe=>oe.tileID.overscaledZ===Y).map(oe=>oe.tileID);for(const oe of Ae)d[oe.key]=oe;this._areDescendentsComplete(Ae,Y,N.overscaledZ)||(S[N.key]=N)}return S}_getLoadedDescendents(r){var d;const y={};for(const x in this._tiles){const S=this._tiles[x];if(S.hasData())for(const N of r)S.tileID.isChildOf(N)&&(y[d=N.key]||(y[d]=[])).push(S)}return y}_areDescendentsComplete(r,d,y){return r.length===1&&r[0].isOverscaled()?r[0].overscaledZ===d:Math.pow(4,d-y)===r.length}_getLoadedTile(r){const d=this._tiles[r.key];return d?.hasData()?d:null}updateCacheSize(r){const d=Math.ceil(r.width/this._source.tileSize)+1,y=Math.ceil(r.height/this._source.tileSize)+1,x=Math.floor(d*y*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(S)}handleWrapJump(r){const d=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,d){const y={};for(const x in this._tiles){const S=this._tiles[x];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+d),y[S.tileID.key]=S}this._tiles=y;for(const x in this._timers)clearTimeout(this._timers[x]),delete this._timers[x];for(const x in this._tiles)this._setTileReloadTimer(x,this._tiles[x])}}update(r,d){if(!this._sourceLoaded||this._paused)return;let y;this.transform=r,this.terrain=d,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?y=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new a.Z(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(y=Ti(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter(z=>this._source.hasTile(z)))):y=[],this.usedForTerrain&&(y=this._addTerrainIdealTiles(y));const x=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,x&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const S=yt(r,this._source),N=this._updateRetainedTiles(y,S),U=vr(this._source.type);U&&this._rasterFadeDuration>0&&!d&&this._updateFadingTiles(y,N),U?this._cleanUpRasterTiles(N):this._cleanUpVectorTiles(N)}_cleanUpRasterTiles(r){for(const d in this._tiles)r[d]||this._removeTile(d)}_cleanUpVectorTiles(r){for(const d in this._tiles){const y=this._tiles[d];r[d]?y.clearSymbolFadeHold():y.hasSymbolBuckets?y.holdingForSymbolFade()?y.symbolFadeFinished()&&this._removeTile(d):y.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(d)}}_addTerrainIdealTiles(r){const d=[];for(const y of r)if(y.canonical.z>this._source.minzoom){const x=y.scaledTo(y.canonical.z-1);d.push(x);const S=y.scaledTo(Math.max(this._source.minzoom,Math.min(y.canonical.z,5)));d.push(S)}return r.concat(d)}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForSymbolFade()&&this._removeTile(r)}_updateRetainedTiles(r,d){var y;const x={},S={},N=Math.max(d-Mi.maxOverzooming,this._source.minzoom);let U={};for(const z of r){const X=this._addTile(z);x[z.key]=z,X.hasData()||(U[z.key]=z)}U=this._retainLoadedChildren(U,x);for(const z in U){const X=U[z];let Y=this._tiles[z],Ae=Y?.wasRequested();for(let oe=X.overscaledZ-1;oe>=N;--oe){const _e=X.scaledTo(oe);if(S[_e.key])break;if(S[_e.key]=!0,Y=this.getTile(_e),!Y&&Ae&&(Y=this._addTile(_e)),Y){const Ne=Y.hasData();if((Ne||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||Ae)&&(x[_e.key]=_e),Ae=Y.wasRequested(),Ne)break}}}return x}_updateFadingTiles(r,d){const y=P.now(),x=a.am(r);for(const S of r){const N=this._tiles[S.key];N.fadingDirection!==et.Departing&&N.fadeOpacity!==0||N.resetFadeLogic(),this._updateFadingAncestor(N,d,y)||this._updateFadingDescendents(N,d,y)||this._updateFadingEdge(N,x,y)||N.resetFadeLogic()}}_updateFadingAncestor(r,d,y){if(!r.hasData())return!1;const{tileID:x,fadingRole:S,fadingDirection:N,fadingParentID:U}=r;if(S===gn.Base&&N===et.Incoming&&U)return d[U.key]=U,!0;const z=Math.max(x.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let X=x.overscaledZ-1;X>=z;X--){const Y=x.scaledTo(X),Ae=this._getLoadedTile(Y);if(Ae)return r.setCrossFadeLogic({fadingRole:gn.Base,fadingDirection:et.Incoming,fadingParentID:Ae.tileID,fadeEndTime:y+this._rasterFadeDuration}),Ae.setCrossFadeLogic({fadingRole:gn.Parent,fadingDirection:et.Departing,fadeEndTime:y+this._rasterFadeDuration}),d[Y.key]=Y,!0}return!1}_updateFadingDescendents(r,d,y){if(!r.hasData())return!1;const x=r.tileID.children(this._source.maxzoom);let S=this._updateFadingChildren(r,x,d,y);if(S)return!0;for(const N of x){const U=N.children(this._source.maxzoom);this._updateFadingChildren(r,U,d,y)&&(S=!0)}return S}_updateFadingChildren(r,d,y,x){if(d[0].overscaledZ>=this._source.maxzoom)return!1;let S=!1;for(const N of d){const U=this._getLoadedTile(N);if(!U)continue;const{fadingRole:z,fadingDirection:X,fadingParentID:Y}=U;z===gn.Base&&X===et.Departing&&Y||(U.setCrossFadeLogic({fadingRole:gn.Base,fadingDirection:et.Departing,fadingParentID:r.tileID,fadeEndTime:x+this._rasterFadeDuration}),r.setCrossFadeLogic({fadingRole:gn.Parent,fadingDirection:et.Incoming,fadeEndTime:x+this._rasterFadeDuration})),y[N.key]=N,S=!0}return S}_updateFadingEdge(r,d,y){const x=r.tileID;return!!r.selfFading||!r.hasData()&&!!d.has(x)&&(r.setSelfFadeLogic(y+this._rasterFadeDuration),!0)}_addTile(r){let d=this._tiles[r.key];if(d)return d;d=this._cache.getAndRemove(r),d&&(d.resetFadeLogic(),this._setTileReloadTimer(r.key,d),d.tileID=r,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,d)));const y=d;return d||(d=new be(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(d,r.key,d.state)),d.uses++,this._tiles[r.key]=d,y||this._source.fire(new a.l("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(r,d){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const y=d.getExpiryTimeout();y&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},y))}refreshTiles(r){for(const d in this._tiles)(this._isIdRenderable(d)||this._tiles[d].state=="errored")&&r.some(y=>y.equals(this._tiles[d].tileID.canonical))&&this._reloadTile(d,"expired")}_removeTile(r){const d=this._tiles[r];d&&(d.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(r){r.dataType==="source"&&(r.sourceDataType!=="metadata"?r.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,d,y){const x=[],S=this.transform;if(!S)return x;const N=S.getCoveringTilesDetailsProvider().allowWorldCopies(),U=y?S.getCameraQueryGeometry(r):r,z=_e=>S.screenPointToMercatorCoordinate(_e,this.terrain),X=this.transformBbox(r,z,!N),Y=this.transformBbox(U,z,!N),Ae=this.getIds(),oe=a.a2.fromPoints(Y);for(let _e=0;_e<Ae.length;_e++){const Ne=this._tiles[Ae[_e]];if(Ne.holdingForSymbolFade())continue;const He=N?[Ne.tileID]:[Ne.tileID.unwrapTo(-1),Ne.tileID.unwrapTo(0)],Ge=Math.pow(2,S.zoom-Ne.tileID.overscaledZ),We=d*Ne.queryPadding*a.$/Ne.tileSize/Ge;for(const Ye of He){const it=oe.map(Je=>Ye.getTilePoint(new a.a1(Je.x,Je.y)));if(it.expandBy(We),it.intersects(Vi)){const Je=X.map(ht=>Ye.getTilePoint(ht)),lt=Y.map(ht=>Ye.getTilePoint(ht));x.push({tile:Ne,tileID:N?Ye:Ye.unwrapTo(0),queryGeometry:Je,cameraQueryGeometry:lt,scale:Ge})}}}return x}transformBbox(r,d,y){let x=r.map(d);if(y){const S=a.a2.fromPoints(r);S.shrinkBy(.001*Math.min(S.width(),S.height()));const N=S.map(d);a.a2.fromPoints(x).covers(N)||(x=x.map(U=>U.x>.5?new a.a1(U.x-1,U.y,U.z):U))}return x}getVisibleCoordinates(r){const d=this.getRenderableIds(r).map(y=>this._tiles[y].tileID);return this.transform&&this.transform.populateCache(d),d}hasTransition(){if(this._source.hasTransition())return!0;if(vr(this._source.type)&&this._rasterFadeDuration>0){const r=P.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=r)return!0}return!1}setRasterFadeDuration(r){this._rasterFadeDuration=r}setFeatureState(r,d,y){this._state.updateState(r=r||"_geojsonTileLayer",d,y)}removeFeatureState(r,d,y){this._state.removeFeatureState(r=r||"_geojsonTileLayer",d,y)}getFeatureState(r,d){return this._state.getState(r=r||"_geojsonTileLayer",d)}setDependencies(r,d,y){const x=this._tiles[r];x&&x.setDependencies(d,y)}reloadTilesForDependencies(r,d){for(const y in this._tiles)this._tiles[y].hasDependency(r,d)&&this._reloadTile(y,"reloading");this._cache.filter(y=>!y.hasDependency(r,d))}}function sn(w,r){const d=Math.abs(2*w.wrap)-+(w.wrap<0),y=Math.abs(2*r.wrap)-+(r.wrap<0);return w.overscaledZ-r.overscaledZ||y-d||r.canonical.y-w.canonical.y||r.canonical.x-w.canonical.x}function vr(w){return w==="raster"||w==="image"||w==="video"}Mi.maxOverzooming=10,Mi.maxUnderzooming=3;class Er{constructor(r,d){this.reset(r,d)}reset(r,d){this.points=r||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=a.ah(r,0,1);let d=1,y=this._distances[d];const x=r*this.paddedLength+this.padding;for(;y<x&&d<this._distances.length;)y=this._distances[++d];const S=d-1,N=this._distances[S],U=y-N,z=U>0?(x-N)/U:0;return this.points[S].mult(1-z).add(this.points[d].mult(z))}}function Pi(w,r){let d=!0;return w==="always"||w!=="never"&&r!=="never"||(d=!1),d}class Fn{constructor(r,d,y){const x=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(r/y),this.yCellCount=Math.ceil(d/y);for(let N=0;N<this.xCellCount*this.yCellCount;N++)x.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=d,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,d,y,x,S){this._forEachCell(d,y,x,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(x),this.bboxes.push(S)}insertCircle(r,d,y,x){this._forEachCell(d-x,y-x,d+x,y+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(d),this.circles.push(y),this.circles.push(x)}_insertBoxCell(r,d,y,x,S,N){this.boxCells[S].push(N)}_insertCircleCell(r,d,y,x,S,N){this.circleCells[S].push(N)}_query(r,d,y,x,S,N,U){if(y<0||r>this.width||x<0||d>this.height)return[];const z=[];if(r<=0&&d<=0&&this.width<=y&&this.height<=x){if(S)return[{key:null,x1:r,y1:d,x2:y,y2:x}];for(let X=0;X<this.boxKeys.length;X++)z.push({key:this.boxKeys[X],x1:this.bboxes[4*X],y1:this.bboxes[4*X+1],x2:this.bboxes[4*X+2],y2:this.bboxes[4*X+3]});for(let X=0;X<this.circleKeys.length;X++){const Y=this.circles[3*X],Ae=this.circles[3*X+1],oe=this.circles[3*X+2];z.push({key:this.circleKeys[X],x1:Y-oe,y1:Ae-oe,x2:Y+oe,y2:Ae+oe})}}else this._forEachCell(r,d,y,x,this._queryCell,z,{hitTest:S,overlapMode:N,seenUids:{box:{},circle:{}}},U);return z}query(r,d,y,x){return this._query(r,d,y,x,!1,null)}hitTest(r,d,y,x,S,N){return this._query(r,d,y,x,!0,S,N).length>0}hitTestCircle(r,d,y,x,S){const N=r-y,U=r+y,z=d-y,X=d+y;if(U<0||N>this.width||X<0||z>this.height)return!1;const Y=[];return this._forEachCell(N,z,U,X,this._queryCellCircle,Y,{hitTest:!0,overlapMode:x,circle:{x:r,y:d,radius:y},seenUids:{box:{},circle:{}}},S),Y.length>0}_queryCell(r,d,y,x,S,N,U,z){const{seenUids:X,hitTest:Y,overlapMode:Ae}=U,oe=this.boxCells[S];if(oe!==null){const Ne=this.bboxes;for(const He of oe)if(!X.box[He]){X.box[He]=!0;const Ge=4*He,We=this.boxKeys[He];if(r<=Ne[Ge+2]&&d<=Ne[Ge+3]&&y>=Ne[Ge+0]&&x>=Ne[Ge+1]&&(!z||z(We))&&(!Y||!Pi(Ae,We.overlapMode))&&(N.push({key:We,x1:Ne[Ge],y1:Ne[Ge+1],x2:Ne[Ge+2],y2:Ne[Ge+3]}),Y))return!0}}const _e=this.circleCells[S];if(_e!==null){const Ne=this.circles;for(const He of _e)if(!X.circle[He]){X.circle[He]=!0;const Ge=3*He,We=this.circleKeys[He];if(this._circleAndRectCollide(Ne[Ge],Ne[Ge+1],Ne[Ge+2],r,d,y,x)&&(!z||z(We))&&(!Y||!Pi(Ae,We.overlapMode))){const Ye=Ne[Ge],it=Ne[Ge+1],Je=Ne[Ge+2];if(N.push({key:We,x1:Ye-Je,y1:it-Je,x2:Ye+Je,y2:it+Je}),Y)return!0}}}return!1}_queryCellCircle(r,d,y,x,S,N,U,z){const{circle:X,seenUids:Y,overlapMode:Ae}=U,oe=this.boxCells[S];if(oe!==null){const Ne=this.bboxes;for(const He of oe)if(!Y.box[He]){Y.box[He]=!0;const Ge=4*He,We=this.boxKeys[He];if(this._circleAndRectCollide(X.x,X.y,X.radius,Ne[Ge+0],Ne[Ge+1],Ne[Ge+2],Ne[Ge+3])&&(!z||z(We))&&!Pi(Ae,We.overlapMode))return N.push(!0),!0}}const _e=this.circleCells[S];if(_e!==null){const Ne=this.circles;for(const He of _e)if(!Y.circle[He]){Y.circle[He]=!0;const Ge=3*He,We=this.circleKeys[He];if(this._circlesCollide(Ne[Ge],Ne[Ge+1],Ne[Ge+2],X.x,X.y,X.radius)&&(!z||z(We))&&!Pi(Ae,We.overlapMode))return N.push(!0),!0}}}_forEachCell(r,d,y,x,S,N,U,z){const X=this._convertToXCellCoord(r),Y=this._convertToYCellCoord(d),Ae=this._convertToXCellCoord(y),oe=this._convertToYCellCoord(x);for(let _e=X;_e<=Ae;_e++)for(let Ne=Y;Ne<=oe;Ne++)if(S.call(this,r,d,y,x,this.xCellCount*Ne+_e,N,U,z))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,d,y,x,S,N){const U=x-r,z=S-d,X=y+N;return X*X>U*U+z*z}_circleAndRectCollide(r,d,y,x,S,N,U){const z=(N-x)/2,X=Math.abs(r-(x+z));if(X>z+y)return!1;const Y=(U-S)/2,Ae=Math.abs(d-(S+Y));if(Ae>Y+y)return!1;if(X<=z||Ae<=Y)return!0;const oe=X-z,_e=Ae-Y;return oe*oe+_e*_e<=y*y}}function fn(w,r,d){const y=a.L();if(!w){const{vecSouth:Ae,vecEast:oe}=hn(r),_e=b();_e[0]=oe[0],_e[1]=oe[1],_e[2]=Ae[0],_e[3]=Ae[1],x=_e,(Y=(N=(S=_e)[0])*(X=S[3])-(z=S[2])*(U=S[1]))&&(x[0]=X*(Y=1/Y),x[1]=-U*Y,x[2]=-z*Y,x[3]=N*Y),y[0]=_e[0],y[1]=_e[1],y[4]=_e[2],y[5]=_e[3]}var x,S,N,U,z,X,Y;return a.N(y,y,[1/d,1/d,1]),y}function Dn(w,r,d,y){if(w){const x=a.L();if(!r){const{vecSouth:S,vecEast:N}=hn(d);x[0]=N[0],x[1]=N[1],x[4]=S[0],x[5]=S[1]}return a.N(x,x,[y,y,1]),x}return d.pixelsToClipSpaceMatrix}function hn(w){const r=Math.cos(w.rollInRadians),d=Math.sin(w.rollInRadians),y=Math.cos(w.pitchInRadians),x=Math.cos(w.bearingInRadians),S=Math.sin(w.bearingInRadians),N=a.ar();N[0]=-x*y*d-S*r,N[1]=-S*y*d+x*r;const U=a.as(N);U<1e-9?a.at(N):a.au(N,N,1/U);const z=a.ar();z[0]=x*y*r-S*d,z[1]=S*y*r+x*d;const X=a.as(z);return X<1e-9?a.at(z):a.au(z,z,1/X),{vecEast:z,vecSouth:N}}function Kt(w,r,d,y){let x;y?(x=[w,r,y(w,r),1],a.aw(x,x,d)):(x=[w,r,0,1],xc(x,x,d));const S=x[3];return{point:new a.P(x[0]/S,x[1]/S),signedDistanceFromCamera:S,isOccluded:!1}}function ds(w,r){return .5+w/r*.5}function qs(w,r){return w.x>=-r[0]&&w.x<=r[0]&&w.y>=-r[1]&&w.y<=r[1]}function jr(w,r,d,y,x,S,N,U,z,X,Y,Ae,oe){const _e=d?w.textSizeData:w.iconSizeData,Ne=a.an(_e,r.transform.zoom),He=[256/r.width*2+1,256/r.height*2+1],Ge=d?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;Ge.clear();const We=w.lineVertexArray,Ye=d?w.text.placedSymbolArray:w.icon.placedSymbolArray,it=r.transform.width/r.transform.height;let Je=!1;for(let lt=0;lt<Ye.length;lt++){const ht=Ye.get(lt);if(ht.hidden||ht.writingMode===a.ao.vertical&&!Je){Ho(ht.numGlyphs,Ge);continue}Je=!1;const nt=new a.P(ht.anchorX,ht.anchorY),mt={getElevation:oe,pitchedLabelPlaneMatrix:y,lineVertexArray:We,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:nt,unwrappedTileID:z,width:X,height:Y,translation:Ae},Dt=pn(ht.anchorX,ht.anchorY,mt);if(!qs(Dt.point,He)){Ho(ht.numGlyphs,Ge);continue}const Nt=ds(r.transform.cameraToCenterDistance,Dt.signedDistanceFromCamera),Lt=a.ap(_e,Ne,ht),Pt=S?Lt*r.transform.getPitchedTextCorrection(ht.anchorX,ht.anchorY,z)/Nt:Lt*Nt,ui=tn({projectionContext:mt,pitchedLabelPlaneMatrixInverse:x,symbol:ht,fontSize:Pt,flip:!1,keepUpright:N,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:Ge,aspectRatio:it,rotateToLine:U});Je=ui.useVertical,(ui.notEnoughRoom||Je||ui.needsFlipping&&tn({projectionContext:mt,pitchedLabelPlaneMatrixInverse:x,symbol:ht,fontSize:Pt,flip:!0,keepUpright:N,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:Ge,aspectRatio:it,rotateToLine:U}).notEnoughRoom)&&Ho(ht.numGlyphs,Ge)}d?w.text.dynamicLayoutVertexBuffer.updateData(Ge):w.icon.dynamicLayoutVertexBuffer.updateData(Ge)}function or(w,r,d,y,x,S,N,U){const z=S.glyphStartIndex+S.numGlyphs,X=S.lineStartIndex,Y=S.lineStartIndex+S.lineLength,Ae=r.getoffsetX(S.glyphStartIndex),oe=r.getoffsetX(z-1),_e=zo(w*Ae,d,y,x,S.segment,X,Y,U,N);if(!_e)return null;const Ne=zo(w*oe,d,y,x,S.segment,X,Y,U,N);return Ne?U.projectionCache.anyProjectionOccluded?null:{first:_e,last:Ne}:null}function di(w,r,d,y){return w===a.ao.horizontal&&Math.abs(d.y-r.y)>Math.abs(d.x-r.x)*y?{useVertical:!0}:(w===a.ao.vertical?r.y<d.y:r.x>d.x)?{needsFlipping:!0}:null}function tn(w){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:d,symbol:y,fontSize:x,flip:S,keepUpright:N,glyphOffsetArray:U,dynamicLayoutVertexArray:z,aspectRatio:X,rotateToLine:Y}=w,Ae=x/24,oe=y.lineOffsetX*Ae,_e=y.lineOffsetY*Ae;let Ne;if(y.numGlyphs>1){const He=y.glyphStartIndex+y.numGlyphs,Ge=y.lineStartIndex,We=y.lineStartIndex+y.lineLength,Ye=or(Ae,U,oe,_e,S,y,Y,r);if(!Ye)return{notEnoughRoom:!0};const it=ua(Ye.first.point.x,Ye.first.point.y,r,d),Je=ua(Ye.last.point.x,Ye.last.point.y,r,d);if(N&&!S){const lt=di(y.writingMode,it,Je,X);if(lt)return lt}Ne=[Ye.first];for(let lt=y.glyphStartIndex+1;lt<He-1;lt++){const ht=zo(Ae*U.getoffsetX(lt),oe,_e,S,y.segment,Ge,We,r,Y);if(!ht)return{notEnoughRoom:!0};Ne.push(ht)}Ne.push(Ye.last)}else{if(N&&!S){const Ge=Hn(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,We=y.lineStartIndex+y.segment+1,Ye=new a.P(r.lineVertexArray.getx(We),r.lineVertexArray.gety(We)),it=Hn(Ye.x,Ye.y,r),Je=it.signedDistanceFromCamera>0?it.point:nn(r.tileAnchorPoint,Ye,Ge,1,r),lt=ua(Ge.x,Ge.y,r,d),ht=ua(Je.x,Je.y,r,d),nt=di(y.writingMode,lt,ht,X);if(nt)return nt}const He=zo(Ae*U.getoffsetX(y.glyphStartIndex),oe,_e,S,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,r,Y);if(!He||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ne=[He]}for(const He of Ne)a.av(z,He.point,He.angle);return{}}function nn(w,r,d,y,x){const S=w.add(w.sub(r)._unit()),N=Hn(S.x,S.y,x).point,U=d.sub(N);return d.add(U._mult(y/U.mag()))}function _r(w,r,d){const y=r.projectionCache;if(y.projections[w])return y.projections[w];const x=new a.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),S=Hn(x.x,x.y,r);if(S.signedDistanceFromCamera>0)return y.projections[w]=S.point,y.anyProjectionOccluded=y.anyProjectionOccluded||S.isOccluded,S.point;const N=w-d.direction;return nn(d.distanceFromAnchor===0?r.tileAnchorPoint:new a.P(r.lineVertexArray.getx(N),r.lineVertexArray.gety(N)),x,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,r)}function Hn(w,r,d){const y=w+d.translation[0],x=r+d.translation[1];let S;return d.pitchWithMap?(S=Kt(y,x,d.pitchedLabelPlaneMatrix,d.getElevation),S.isOccluded=!1):(S=d.transform.projectTileCoordinates(y,x,d.unwrappedTileID,d.getElevation),S.point.x=(.5*S.point.x+.5)*d.width,S.point.y=(.5*-S.point.y+.5)*d.height),S}function ua(w,r,d,y){if(d.pitchWithMap){const x=[w,r,0,1];return a.aw(x,x,y),d.transform.projectTileCoordinates(x[0]/x[3],x[1]/x[3],d.unwrappedTileID,d.getElevation).point}return{x:w/d.width*2-1,y:1-r/d.height*2}}function pn(w,r,d){return d.transform.projectTileCoordinates(w,r,d.unwrappedTileID,d.getElevation)}function Aa(w,r,d){return w._unit()._perp()._mult(r*d)}function Pa(w,r,d,y,x,S,N,U,z){if(U.projectionCache.offsets[w])return U.projectionCache.offsets[w];const X=d.add(r);if(w+z.direction<y||w+z.direction>=x)return U.projectionCache.offsets[w]=X,X;const Y=_r(w+z.direction,U,z),Ae=Aa(Y.sub(d),N,z.direction),oe=d.add(Ae),_e=Y.add(Ae);return U.projectionCache.offsets[w]=a.ax(S,X,oe,_e)||X,U.projectionCache.offsets[w]}function zo(w,r,d,y,x,S,N,U,z){const X=y?w-r:w+r;let Y=X>0?1:-1,Ae=0;y&&(Y*=-1,Ae=Math.PI),Y<0&&(Ae+=Math.PI);let oe,_e=Y>0?S+x:S+x+1;U.projectionCache.cachedAnchorPoint?oe=U.projectionCache.cachedAnchorPoint:(oe=Hn(U.tileAnchorPoint.x,U.tileAnchorPoint.y,U).point,U.projectionCache.cachedAnchorPoint=oe);let Ne,He,Ge=oe,We=oe,Ye=0,it=0;const Je=Math.abs(X),lt=[];let ht;for(;Ye+it<=Je;){if(_e+=Y,_e<S||_e>=N)return null;Ye+=it,We=Ge,He=Ne;const Dt={absOffsetX:Je,direction:Y,distanceFromAnchor:Ye,previousVertex:We};if(Ge=_r(_e,U,Dt),d===0)lt.push(We),ht=Ge.sub(We);else{let Nt;const Lt=Ge.sub(We);Nt=Lt.mag()===0?Aa(_r(_e+Y,U,Dt).sub(Ge),d,Y):Aa(Lt,d,Y),He||(He=We.add(Nt)),Ne=Pa(_e,Nt,Ge,S,N,He,d,U,Dt),lt.push(He),ht=Ne.sub(He)}it=ht.mag()}const nt=ht._mult((Je-Ye)/it)._add(He||We),mt=Ae+Math.atan2(Ge.y-We.y,Ge.x-We.x);return lt.push(nt),{point:nt,angle:z?mt:0,path:lt}}const _c=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ho(w,r){for(let d=0;d<w;d++){const y=r.length;r.resize(y+4),r.float32.set(_c,3*y)}}function xc(w,r,d){const y=r[0],x=r[1];return w[0]=d[0]*y+d[4]*x+d[12],w[1]=d[1]*y+d[5]*x+d[13],w[3]=d[3]*y+d[7]*x+d[15],w}const xr=100;class Gs{constructor(r,d=new Fn(r.width+200,r.height+200,25),y=new Fn(r.width+200,r.height+200,25)){this.transform=r,this.grid=d,this.ignoredGrid=y,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+xr,this.screenBottomBoundary=r.height+xr,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,d,y,x,S,N,U,z,X,Y,Ae,oe){const _e=this.projectAndGetPerspectiveRatio(r.anchorPointX+z[0],r.anchorPointY+z[1],S,Y,oe),Ne=y*_e.perspectiveRatio;let He;if(N||U)He=this._projectCollisionBox(r,Ne,x,S,N,U,z,_e,Y,Ae,oe);else{const ht=_e.x+(Ae?Ae.x*Ne:0),nt=_e.y+(Ae?Ae.y*Ne:0);He={allPointsOccluded:!1,box:[ht+r.x1*Ne,nt+r.y1*Ne,ht+r.x2*Ne,nt+r.y2*Ne]}}const[Ge,We,Ye,it]=He.box,Je=N?He.allPointsOccluded:_e.isOccluded;let lt=Je;return lt||(lt=_e.perspectiveRatio<this.perspectiveRatioCutoff),lt||(lt=!this.isInsideGrid(Ge,We,Ye,it)),lt||d!=="always"&&this.grid.hitTest(Ge,We,Ye,it,d,X)?{box:[Ge,We,Ye,it],placeable:!1,offscreen:!1,occluded:Je}:{box:[Ge,We,Ye,it],placeable:!0,offscreen:this.isOffscreen(Ge,We,Ye,it),occluded:Je}}placeCollisionCircles(r,d,y,x,S,N,U,z,X,Y,Ae,oe,_e,Ne){const He=[],Ge=new a.P(d.anchorX,d.anchorY),We=this.getPerspectiveRatio(Ge.x,Ge.y,N,Ne),Ye=(X?S*this.transform.getPitchedTextCorrection(d.anchorX,d.anchorY,N)/We:S*We)/a.aB,it={getElevation:Ne,pitchedLabelPlaneMatrix:U,lineVertexArray:y,pitchWithMap:X,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Ge,unwrappedTileID:N,width:this.transform.width,height:this.transform.height,translation:_e},Je=or(Ye,x,d.lineOffsetX*Ye,d.lineOffsetY*Ye,!1,d,!1,it);let lt=!1,ht=!1,nt=!0;if(Je){const mt=.5*Ae*We+oe,Dt=new a.P(-100,-100),Nt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Lt=new Er,Pt=Je.first,ui=Je.last;let Ai=[];for(let cn=Pt.path.length-1;cn>=1;cn--)Ai.push(Pt.path[cn]);for(let cn=1;cn<ui.path.length;cn++)Ai.push(ui.path[cn]);const $t=2.5*mt;if(X){const cn=this.projectPathToScreenSpace(Ai,it);Ai=cn.some(ir=>ir.signedDistanceFromCamera<=0)?[]:cn.map(ir=>ir.point)}let ki=[];if(Ai.length>0){const cn=Ai[0].clone(),ir=Ai[0].clone();for(let sr=1;sr<Ai.length;sr++)cn.x=Math.min(cn.x,Ai[sr].x),cn.y=Math.min(cn.y,Ai[sr].y),ir.x=Math.max(ir.x,Ai[sr].x),ir.y=Math.max(ir.y,Ai[sr].y);ki=cn.x>=Dt.x&&ir.x<=Nt.x&&cn.y>=Dt.y&&ir.y<=Nt.y?[Ai]:ir.x<Dt.x||cn.x>Nt.x||ir.y<Dt.y||cn.y>Nt.y?[]:a.ay([Ai],Dt.x,Dt.y,Nt.x,Nt.y)}for(const cn of ki){Lt.reset(cn,.25*mt);let ir=0;ir=Lt.length<=.5*mt?1:Math.ceil(Lt.paddedLength/$t)+1;for(let sr=0;sr<ir;sr++){const Ar=sr/Math.max(ir-1,1),Pr=Lt.lerp(Ar),kr=Pr.x+xr,Ln=Pr.y+xr;He.push(kr,Ln,mt,0);const Or=kr-mt,sa=Ln-mt,Us=kr+mt,Ds=Ln+mt;if(nt=nt&&this.isOffscreen(Or,sa,Us,Ds),ht=ht||this.isInsideGrid(Or,sa,Us,Ds),r!=="always"&&this.grid.hitTestCircle(kr,Ln,mt,r,Y)&&(lt=!0,!z))return{circles:[],offscreen:!1,collisionDetected:lt}}}}return{circles:!z&&lt||!ht||We<this.perspectiveRatioCutoff?[]:He,offscreen:nt,collisionDetected:lt}}projectPathToScreenSpace(r,d){const y=function(x,S){const N=a.L();return a.aq(N,S.pitchedLabelPlaneMatrix),x.map(U=>{const z=Kt(U.x,U.y,N,S.getElevation),X=S.transform.projectTileCoordinates(z.point.x,z.point.y,S.unwrappedTileID,S.getElevation);return X.point.x=(.5*X.point.x+.5)*S.width,X.point.y=(.5*-X.point.y+.5)*S.height,X})}(r,d);return function(x){let S=0,N=0,U=0,z=0;for(let X=0;X<x.length;X++)x[X].isOccluded?(U=X+1,z=0):(z++,z>N&&(N=z,S=U));return x.slice(S,S+N)}(y)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[],y=new a.a2;for(const Ae of r){const oe=new a.P(Ae.x+xr,Ae.y+xr);y.extend(oe),d.push(oe)}const{minX:x,minY:S,maxX:N,maxY:U}=y,z=this.grid.query(x,S,N,U).concat(this.ignoredGrid.query(x,S,N,U)),X={},Y={};for(const Ae of z){const oe=Ae.key;if(X[oe.bucketInstanceId]===void 0&&(X[oe.bucketInstanceId]={}),X[oe.bucketInstanceId][oe.featureIndex])continue;const _e=[new a.P(Ae.x1,Ae.y1),new a.P(Ae.x2,Ae.y1),new a.P(Ae.x2,Ae.y2),new a.P(Ae.x1,Ae.y2)];a.az(d,_e)&&(X[oe.bucketInstanceId][oe.featureIndex]=!0,Y[oe.bucketInstanceId]===void 0&&(Y[oe.bucketInstanceId]=[]),Y[oe.bucketInstanceId].push(oe.featureIndex))}return Y}insertCollisionBox(r,d,y,x,S,N){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:S,collisionGroupID:N,overlapMode:d},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,d,y,x,S,N){const U=y?this.ignoredGrid:this.grid,z={bucketInstanceId:x,featureIndex:S,collisionGroupID:N,overlapMode:d};for(let X=0;X<r.length;X+=4)U.insertCircle(z,r[X],r[X+1],r[X+2])}projectAndGetPerspectiveRatio(r,d,y,x,S){if(S){let N;x?(N=[r,d,x(r,d),1],a.aw(N,N,S)):(N=[r,d,0,1],xc(N,N,S));const U=N[3];return{x:(N[0]/U+1)/2*this.transform.width+xr,y:(-N[1]/U+1)/2*this.transform.height+xr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/U*.5,isOccluded:!1,signedDistanceFromCamera:U}}{const N=this.transform.projectTileCoordinates(r,d,y,x);return{x:(N.point.x+1)/2*this.transform.width+xr,y:(1-N.point.y)/2*this.transform.height+xr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/N.signedDistanceFromCamera*.5,isOccluded:N.isOccluded,signedDistanceFromCamera:N.signedDistanceFromCamera}}}getPerspectiveRatio(r,d,y,x){const S=this.transform.projectTileCoordinates(r,d,y,x);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(r,d,y,x){return y<xr||r>=this.screenRightBoundary||x<xr||d>this.screenBottomBoundary}isInsideGrid(r,d,y,x){return y>=0&&r<this.gridRightBoundary&&x>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const r=a.ag([]);return a.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,d,y,x,S,N,U,z,X,Y,Ae){let oe=1,_e=0,Ne=0,He=1;const Ge=r.anchorPointX+U[0],We=r.anchorPointY+U[1];if(N&&!S){const Ai=this.projectAndGetPerspectiveRatio(Ge+1,We,x,X,Ae),$t=Ai.x-z.x,ki=Math.atan((Ai.y-z.y)/$t)+($t<0?Math.PI:0),cn=Math.sin(ki),ir=Math.cos(ki);oe=ir,_e=cn,Ne=-cn,He=ir}else if(!N&&S){const Ai=hn(this.transform);oe=Ai.vecEast[0],_e=Ai.vecEast[1],Ne=Ai.vecSouth[0],He=Ai.vecSouth[1]}let Ye=z.x,it=z.y,Je=d;S&&(Ye=Ge,it=We,Je=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),Je*=this.transform.getPitchedTextCorrection(Ge,We,x),Y||(Je*=a.ah(.5+z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),Y&&(Ye+=oe*Y.x*Je+Ne*Y.y*Je,it+=_e*Y.x*Je+He*Y.y*Je);const lt=r.x1*Je,ht=r.x2*Je,nt=(lt+ht)/2,mt=r.y1*Je,Dt=r.y2*Je,Nt=(mt+Dt)/2,Lt=[{offsetX:lt,offsetY:mt},{offsetX:nt,offsetY:mt},{offsetX:ht,offsetY:mt},{offsetX:ht,offsetY:Nt},{offsetX:ht,offsetY:Dt},{offsetX:nt,offsetY:Dt},{offsetX:lt,offsetY:Dt},{offsetX:lt,offsetY:Nt}];let Pt=[];for(const{offsetX:Ai,offsetY:$t}of Lt)Pt.push(new a.P(Ye+oe*Ai+Ne*$t,it+_e*Ai+He*$t));let ui=!1;if(S){const Ai=Pt.map($t=>this.projectAndGetPerspectiveRatio($t.x,$t.y,x,X,Ae));ui=Ai.some($t=>!$t.isOccluded),Pt=Ai.map($t=>new a.P($t.x,$t.y))}else ui=!0;return{box:a.aA(Pt),allPointsOccluded:!ui}}}class qn{constructor(r,d,y,x){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?d:-d))):x&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class pl{constructor(r,d,y,x,S){this.text=new qn(r?r.text:null,d,y,S),this.icon=new qn(r?r.icon:null,d,x,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class bc{constructor(r,d,y){this.text=r,this.icon=d,this.skipFade=y}}class ml{constructor(r,d,y,x,S){this.bucketInstanceId=r,this.featureIndex=d,this.sourceLayerIndex=y,this.bucketIndex=x,this.tileID=S}}class gl{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const d=++this.maxGroupID;this.collisionGroups[r]={ID:d,predicate:y=>y.collisionGroupID===d}}return this.collisionGroups[r]}}function ba(w,r,d,y,x){const{horizontalAlign:S,verticalAlign:N}=a.aH(w);return new a.P(-(S-.5)*r+y[0]*x,-(N-.5)*d+y[1]*x)}class XA{constructor(r,d,y,x,S){this.transform=r.clone(),this.terrain=d,this.collisionIndex=new Gs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new gl(x),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const d=this.terrain;return d?(y,x)=>d.getElevation(r,y,x):null}getBucketParts(r,d,y,x){const S=y.getBucket(d),N=y.latestFeatureIndex;if(!S||!N||d.id!==S.layerIds[0])return;const U=y.collisionBoxArray,z=S.layers[0].layout,X=S.layers[0].paint,Y=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),Ae=y.tileSize/a.$,oe=y.tileID.toUnwrapped(),_e=z.get("text-rotation-alignment")==="map",Ne=a.aC(y,1,this.transform.zoom),He=a.aD(this.collisionIndex.transform,y,X.get("text-translate"),X.get("text-translate-anchor")),Ge=a.aD(this.collisionIndex.transform,y,X.get("icon-translate"),X.get("icon-translate-anchor")),We=fn(_e,this.transform,Ne);this.retainedQueryData[S.bucketInstanceId]=new ml(S.bucketInstanceId,N,S.sourceLayerIndex,S.index,y.tileID);const Ye={bucket:S,layout:z,translationText:He,translationIcon:Ge,unwrappedTileID:oe,pitchedLabelPlaneMatrix:We,scale:Y,textPixelRatio:Ae,holdingForFade:y.holdingForSymbolFade(),collisionBoxArray:U,partiallyEvaluatedTextSize:a.an(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(x)for(const it of S.sortKeyRanges){const{sortKey:Je,symbolInstanceStart:lt,symbolInstanceEnd:ht}=it;r.push({sortKey:Je,symbolInstanceStart:lt,symbolInstanceEnd:ht,parameters:Ye})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:Ye})}attemptAnchorPlacement(r,d,y,x,S,N,U,z,X,Y,Ae,oe,_e,Ne,He,Ge,We,Ye,it,Je){const lt=a.aE[r.textAnchor],ht=[r.textOffset0,r.textOffset1],nt=ba(lt,y,x,ht,S),mt=this.collisionIndex.placeCollisionBox(d,oe,z,X,Y,U,N,Ge,Ae.predicate,it,nt,Je);if((!Ye||this.collisionIndex.placeCollisionBox(Ye,oe,z,X,Y,U,N,We,Ae.predicate,it,nt,Je).placeable)&&mt.placeable){let Dt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[_e.crossTileID]&&this.prevPlacement.placements[_e.crossTileID]&&this.prevPlacement.placements[_e.crossTileID].text&&(Dt=this.prevPlacement.variableOffsets[_e.crossTileID].anchor),_e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[_e.crossTileID]={textOffset:ht,width:y,height:x,anchor:lt,textBoxScale:S,prevAnchor:Dt},this.markUsedJustification(Ne,lt,_e,He),Ne.allowVerticalPlacement&&(this.markUsedOrientation(Ne,He,_e),this.placedOrientations[_e.crossTileID]=He),{shift:nt,placedGlyphBoxes:mt}}}placeLayerBucketPart(r,d,y){const{bucket:x,layout:S,translationText:N,translationIcon:U,unwrappedTileID:z,pitchedLabelPlaneMatrix:X,textPixelRatio:Y,holdingForFade:Ae,collisionBoxArray:oe,partiallyEvaluatedTextSize:_e,collisionGroup:Ne}=r.parameters,He=S.get("text-optional"),Ge=S.get("icon-optional"),We=a.aF(S,"text-overlap","text-allow-overlap"),Ye=We==="always",it=a.aF(S,"icon-overlap","icon-allow-overlap"),Je=it==="always",lt=S.get("text-rotation-alignment")==="map",ht=S.get("text-pitch-alignment")==="map",nt=S.get("icon-text-fit")!=="none",mt=S.get("symbol-z-order")==="viewport-y",Dt=Ye&&(Je||!x.hasIconData()||Ge),Nt=Je&&(Ye||!x.hasTextData()||He);!x.collisionArrays&&oe&&x.deserializeCollisionBoxes(oe);const Lt=this.retainedQueryData[x.bucketInstanceId].tileID,Pt=this._getTerrainElevationFunc(Lt),ui=this.transform.getFastPathSimpleProjectionMatrix(Lt),Ai=($t,ki,cn)=>{var ir,sr;if(d[$t.crossTileID])return;if(Ae)return void(this.placements[$t.crossTileID]=new bc(!1,!1,!1));let Ar=!1,Pr=!1,kr=!0,Ln=null,Or={box:null,placeable:!1,offscreen:null,occluded:!1},sa={placeable:!1},Us=null,Ds=null,Na=null,Tu=0,tc=0,Xu=0;ki.textFeatureIndex?Tu=ki.textFeatureIndex:$t.useRuntimeCollisionCircles&&(Tu=$t.featureIndex),ki.verticalTextFeatureIndex&&(tc=ki.verticalTextFeatureIndex);const ic=ki.textBox;if(ic){const uo=Ss=>{let Nr=a.ao.horizontal;if(x.allowVerticalPlacement&&!Ss&&this.prevPlacement){const Rs=this.prevPlacement.placedOrientations[$t.crossTileID];Rs&&(this.placedOrientations[$t.crossTileID]=Rs,Nr=Rs,this.markUsedOrientation(x,Nr,$t))}return Nr},kc=(Ss,Nr)=>{if(x.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&ki.verticalTextBox){for(const Rs of x.writingModes)if(Rs===a.ao.vertical?(Or=Nr(),sa=Or):Or=Ss(),Or&&Or.placeable)break}else Or=Ss()},jc=$t.textAnchorOffsetStartIndex,Ma=$t.textAnchorOffsetEndIndex;if(Ma===jc){const Ss=(Nr,Rs)=>{const ls=this.collisionIndex.placeCollisionBox(Nr,We,Y,Lt,z,ht,lt,N,Ne.predicate,Pt,void 0,ui);return ls&&ls.placeable&&(this.markUsedOrientation(x,Rs,$t),this.placedOrientations[$t.crossTileID]=Rs),ls};kc(()=>Ss(ic,a.ao.horizontal),()=>{const Nr=ki.verticalTextBox;return x.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&Nr?Ss(Nr,a.ao.vertical):{box:null,offscreen:null}}),uo(Or&&Or.placeable)}else{let Ss=a.aE[(sr=(ir=this.prevPlacement)===null||ir===void 0?void 0:ir.variableOffsets[$t.crossTileID])===null||sr===void 0?void 0:sr.anchor];const Nr=(ls,dd,nc)=>{const Lo=ls.x2-ls.x1,Qr=ls.y2-ls.y1,ll=$t.textBoxScale,tu=nt&&it==="never"?dd:null;let iu=null,fd=We==="never"?1:2,pd="never";Ss&&fd++;for(let cl=0;cl<fd;cl++){for(let nh=jc;nh<Ma;nh++){const md=x.textAnchorOffsets.get(nh);if(Ss&&md.textAnchor!==Ss)continue;const rh=this.attemptAnchorPlacement(md,ls,Lo,Qr,ll,lt,ht,Y,Lt,z,Ne,pd,$t,x,nc,N,U,tu,Pt);if(rh&&(iu=rh.placedGlyphBoxes,iu&&iu.placeable))return Ar=!0,Ln=rh.shift,iu}Ss?Ss=null:pd=We}return y&&!iu&&(iu={box:this.collisionIndex.placeCollisionBox(ic,"always",Y,Lt,z,ht,lt,N,Ne.predicate,Pt,void 0,ui).box,offscreen:!1,placeable:!1,occluded:!1}),iu};kc(()=>Nr(ic,ki.iconBox,a.ao.horizontal),()=>{const ls=ki.verticalTextBox;return x.allowVerticalPlacement&&(!Or||!Or.placeable)&&$t.numVerticalGlyphVertices>0&&ls?Nr(ls,ki.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}}),Or&&(Ar=Or.placeable,kr=Or.offscreen);const Rs=uo(Or&&Or.placeable);if(!Ar&&this.prevPlacement){const ls=this.prevPlacement.variableOffsets[$t.crossTileID];ls&&(this.variableOffsets[$t.crossTileID]=ls,this.markUsedJustification(x,ls.anchor,$t,Rs))}}}if(Us=Or,Ar=Us&&Us.placeable,kr=Us&&Us.offscreen,$t.useRuntimeCollisionCircles&&$t.centerJustifiedTextSymbolIndex>=0){const uo=x.text.placedSymbolArray.get($t.centerJustifiedTextSymbolIndex),kc=a.ap(x.textSizeData,_e,uo),jc=S.get("text-padding");Ds=this.collisionIndex.placeCollisionCircles(We,uo,x.lineVertexArray,x.glyphOffsetArray,kc,z,X,y,ht,Ne.predicate,$t.collisionCircleDiameter,jc,N,Pt),Ds.circles.length&&Ds.collisionDetected&&!y&&a.w("Collisions detected, but collision boxes are not shown"),Ar=Ye||Ds.circles.length>0&&!Ds.collisionDetected,kr=kr&&Ds.offscreen}if(ki.iconFeatureIndex&&(Xu=ki.iconFeatureIndex),ki.iconBox){const uo=kc=>this.collisionIndex.placeCollisionBox(kc,it,Y,Lt,z,ht,lt,U,Ne.predicate,Pt,nt&&Ln?Ln:void 0,ui);sa&&sa.placeable&&ki.verticalIconBox?(Na=uo(ki.verticalIconBox),Pr=Na.placeable):(Na=uo(ki.iconBox),Pr=Na.placeable),kr=kr&&Na.offscreen}const Yu=He||$t.numHorizontalGlyphVertices===0&&$t.numVerticalGlyphVertices===0,Fu=Ge||$t.numIconVertices===0;Yu||Fu?Fu?Yu||(Pr=Pr&&Ar):Ar=Pr&&Ar:Pr=Ar=Pr&&Ar;const Ll=Pr&&Na.placeable;if(Ar&&Us.placeable&&this.collisionIndex.insertCollisionBox(Us.box,We,S.get("text-ignore-placement"),x.bucketInstanceId,sa&&sa.placeable&&tc?tc:Tu,Ne.ID),Ll&&this.collisionIndex.insertCollisionBox(Na.box,it,S.get("icon-ignore-placement"),x.bucketInstanceId,Xu,Ne.ID),Ds&&Ar&&this.collisionIndex.insertCollisionCircles(Ds.circles,We,S.get("text-ignore-placement"),x.bucketInstanceId,Tu,Ne.ID),y&&this.storeCollisionData(x.bucketInstanceId,cn,ki,Us,Na,Ds),$t.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(x.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$t.crossTileID]=new bc((Ar||Dt)&&!Us?.occluded,(Pr||Nt)&&!Na?.occluded,kr||x.justReloaded),d[$t.crossTileID]=!0};if(mt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const $t=x.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ki=$t.length-1;ki>=0;--ki){const cn=$t[ki];Ai(x.symbolInstances.get(cn),x.collisionArrays[cn],cn)}}else for(let $t=r.symbolInstanceStart;$t<r.symbolInstanceEnd;$t++)Ai(x.symbolInstances.get($t),x.collisionArrays[$t],$t);x.justReloaded=!1}storeCollisionData(r,d,y,x,S,N){if(y.textBox||y.iconBox){let U,z;this.collisionBoxArrays.has(r)?U=this.collisionBoxArrays.get(r):(U=new Map,this.collisionBoxArrays.set(r,U)),U.has(d)?z=U.get(d):(z={text:null,icon:null},U.set(d,z)),y.textBox&&(z.text=x.box),y.iconBox&&(z.icon=S.box)}if(N){let U=this.collisionCircleArrays[r];U===void 0&&(U=this.collisionCircleArrays[r]=[]);for(let z=0;z<N.circles.length;z+=4)U.push(N.circles[z+0]-xr),U.push(N.circles[z+1]-xr),U.push(N.circles[z+2]),U.push(N.collisionDetected?1:0)}}markUsedJustification(r,d,y,x){let S;S=x===a.ao.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[a.aG(d)];const N=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const U of N)U>=0&&(r.text.placedSymbolArray.get(U).crossTileID=S>=0&&U!==S?0:y.crossTileID)}markUsedOrientation(r,d,y){const x=d===a.ao.horizontal||d===a.ao.horizontalOnly?d:0,S=d===a.ao.vertical?d:0,N=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const U of N)r.text.placedSymbolArray.get(U).placedOrientation=x;y.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let y=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const x=d?d.symbolFadeChange(r):1,S=d?d.opacities:{},N=d?d.variableOffsets:{},U=d?d.placedOrientations:{};for(const z in this.placements){const X=this.placements[z],Y=S[z];Y?(this.opacities[z]=new pl(Y,x,X.text,X.icon),y=y||X.text!==Y.text.placed||X.icon!==Y.icon.placed):(this.opacities[z]=new pl(null,x,X.text,X.icon,X.skipFade),y=y||X.text||X.icon)}for(const z in S){const X=S[z];if(!this.opacities[z]){const Y=new pl(X,x,!1,!1);Y.isHidden()||(this.opacities[z]=Y,y=y||X.text.placed||X.icon.placed)}}for(const z in N)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=N[z]);for(const z in U)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=U[z]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:r)}updateLayerOpacities(r,d){const y={};for(const x of d){const S=x.getBucket(r);S&&x.latestFeatureIndex&&r.id===S.layerIds[0]&&this.updateBucketOpacities(S,x.tileID,y,x.collisionBoxArray)}}updateBucketOpacities(r,d,y,x){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const S=r.layers[0],N=S.layout,U=new pl(null,0,!1,!1,!0),z=N.get("text-allow-overlap"),X=N.get("icon-allow-overlap"),Y=S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ae=N.get("text-rotation-alignment")==="map",oe=N.get("text-pitch-alignment")==="map",_e=N.get("icon-text-fit")!=="none",Ne=new pl(null,0,z&&(X||!r.hasIconData()||N.get("icon-optional")),X&&(z||!r.hasTextData()||N.get("text-optional")),!0);!r.collisionArrays&&x&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(x);const He=(We,Ye,it)=>{for(let Je=0;Je<Ye/4;Je++)We.opacityVertexArray.emplaceBack(it);We.hasVisibleVertices=We.hasVisibleVertices||it!==vo},Ge=this.collisionBoxArrays.get(r.bucketInstanceId);for(let We=0;We<r.symbolInstances.length;We++){const Ye=r.symbolInstances.get(We),{numHorizontalGlyphVertices:it,numVerticalGlyphVertices:Je,crossTileID:lt}=Ye;let ht=this.opacities[lt];y[lt]?ht=U:ht||(ht=Ne,this.opacities[lt]=ht),y[lt]=!0;const nt=Ye.numIconVertices>0,mt=this.placedOrientations[Ye.crossTileID],Dt=mt===a.ao.vertical,Nt=mt===a.ao.horizontal||mt===a.ao.horizontalOnly;if(it>0||Je>0){const Pt=Mr(ht.text);He(r.text,it,Dt?vo:Pt),He(r.text,Je,Nt?vo:Pt);const ui=ht.text.isHidden();[Ye.rightJustifiedTextSymbolIndex,Ye.centerJustifiedTextSymbolIndex,Ye.leftJustifiedTextSymbolIndex].forEach(ki=>{ki>=0&&(r.text.placedSymbolArray.get(ki).hidden=ui||Dt?1:0)}),Ye.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ye.verticalPlacedTextSymbolIndex).hidden=ui||Nt?1:0);const Ai=this.variableOffsets[Ye.crossTileID];Ai&&this.markUsedJustification(r,Ai.anchor,Ye,mt);const $t=this.placedOrientations[Ye.crossTileID];$t&&(this.markUsedJustification(r,"left",Ye,$t),this.markUsedOrientation(r,$t,Ye))}if(nt){const Pt=Mr(ht.icon),ui=!(_e&&Ye.verticalPlacedIconSymbolIndex&&Dt);Ye.placedIconSymbolIndex>=0&&(He(r.icon,Ye.numIconVertices,ui?Pt:vo),r.icon.placedSymbolArray.get(Ye.placedIconSymbolIndex).hidden=ht.icon.isHidden()),Ye.verticalPlacedIconSymbolIndex>=0&&(He(r.icon,Ye.numVerticalIconVertices,ui?vo:Pt),r.icon.placedSymbolArray.get(Ye.verticalPlacedIconSymbolIndex).hidden=ht.icon.isHidden())}const Lt=Ge&&Ge.has(We)?Ge.get(We):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Pt=r.collisionArrays[We];if(Pt){let ui=new a.P(0,0);if(Pt.textBox||Pt.verticalTextBox){let Ai=!0;if(Y){const $t=this.variableOffsets[lt];$t?(ui=ba($t.anchor,$t.width,$t.height,$t.textOffset,$t.textBoxScale),Ae&&ui._rotate(oe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ai=!1}if(Pt.textBox||Pt.verticalTextBox){let $t;Pt.textBox&&($t=Dt),Pt.verticalTextBox&&($t=Nt),Gr(r.textCollisionBox.collisionVertexArray,ht.text.placed,!Ai||$t,Lt.text,ui.x,ui.y)}}if(Pt.iconBox||Pt.verticalIconBox){const Ai=!!(!Nt&&Pt.verticalIconBox);let $t;Pt.iconBox&&($t=Ai),Pt.verticalIconBox&&($t=!Ai),Gr(r.iconCollisionBox.collisionVertexArray,ht.icon.placed,$t,Lt.icon,_e?ui.x:0,_e?ui.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,d){const y=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*y>r}setStale(){this.stale=!0}}function Gr(w,r,d,y,x,S){y&&y.length!==0||(y=[0,0,0,0]);const N=y[0]-xr,U=y[1]-xr,z=y[2]-xr,X=y[3]-xr;w.emplaceBack(r?1:0,d?1:0,x||0,S||0,N,U),w.emplaceBack(r?1:0,d?1:0,x||0,S||0,z,U),w.emplaceBack(r?1:0,d?1:0,x||0,S||0,z,X),w.emplaceBack(r?1:0,d?1:0,x||0,S||0,N,X)}const wa=Math.pow(2,25),Ql=Math.pow(2,24),gA=Math.pow(2,17),zc=Math.pow(2,16),YA=Math.pow(2,9),Ya=Math.pow(2,8),gu=Math.pow(2,1);function Mr(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const r=w.placed?1:0,d=Math.floor(127*w.opacity);return d*wa+r*Ql+d*gA+r*zc+d*YA+r*Ya+d*gu+r}const vo=0;class yu{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,d,y,x,S){const N=this._bucketParts;for(;this._currentTileIndex<r.length;)if(d.getBucketParts(N,x,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort((U,z)=>U.sortKey-z.sortKey));this._currentPartIndex<N.length;)if(d.placeLayerBucketPart(N[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,S())return!0;return!1}}class ku{constructor(r,d,y,x,S,N,U,z){this.placement=new XA(r,d,N,U,z),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(r,d,y){const x=P.now(),S=()=>!this._forceFullPlacement&&P.now()-x>2;for(;this._currentPlacementIndex>=0;){const N=d[r[this._currentPlacementIndex]],U=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=U)&&(!N.maxzoom||N.maxzoom>U)){if(this._inProgressLayer||(this._inProgressLayer=new yu(N)),this._inProgressLayer.continuePlacement(y[N.source],this.placement,this._showCollisionBoxes,N,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const ka=512/a.$/2;class ju{constructor(r,d,y){this.tileID=r,this.bucketInstanceId=y,this._symbolsByKey={};const x=new Map;for(let S=0;S<d.length;S++){const N=d.get(S),U=N.key,z=x.get(U);z?z.push(N):x.set(U,[N])}for(const[S,N]of x){const U={positions:N.map(z=>({x:Math.floor(z.anchorX*ka),y:Math.floor(z.anchorY*ka)})),crossTileIDs:N.map(z=>z.crossTileID)};if(U.positions.length>128){const z=new a.aI(U.positions.length,16,Uint16Array);for(const{x:X,y:Y}of U.positions)z.add(X,Y);z.finish(),delete U.positions,U.index=z}this._symbolsByKey[S]=U}}getScaledCoordinates(r,d){const{x:y,y:x,z:S}=this.tileID.canonical,{x:N,y:U,z}=d.canonical,X=ka/Math.pow(2,z-S),Y=(U*a.$+r.anchorY)*X,Ae=x*a.$*ka;return{x:Math.floor((N*a.$+r.anchorX)*X-y*a.$*ka),y:Math.floor(Y-Ae)}}findMatches(r,d,y){const x=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let S=0;S<r.length;S++){const N=r.get(S);if(N.crossTileID)continue;const U=this._symbolsByKey[N.key];if(!U)continue;const z=this.getScaledCoordinates(N,d);if(U.index){const X=U.index.range(z.x-x,z.y-x,z.x+x,z.y+x).sort();for(const Y of X){const Ae=U.crossTileIDs[Y];if(!y[Ae]){y[Ae]=!0,N.crossTileID=Ae;break}}}else if(U.positions)for(let X=0;X<U.positions.length;X++){const Y=U.positions[X],Ae=U.crossTileIDs[X];if(Math.abs(Y.x-z.x)<=x&&Math.abs(Y.y-z.y)<=x&&!y[Ae]){y[Ae]=!0,N.crossTileID=Ae;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class yA{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Vo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const d=Math.round((r-this.lng)/360);if(d!==0)for(const y in this.indexes){const x=this.indexes[y],S={};for(const N in x){const U=x[N];U.tileID=U.tileID.unwrapTo(U.tileID.wrap+d),S[U.tileID.key]=U}this.indexes[y]=S}this.lng=r}addBucket(r,d,y){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let S=0;S<d.symbolInstances.length;S++)d.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const x=this.usedCrossTileIDs[r.overscaledZ];for(const S in this.indexes){const N=this.indexes[S];if(Number(S)>r.overscaledZ)for(const U in N){const z=N[U];z.tileID.isChildOf(r)&&z.findMatches(d.symbolInstances,r,x)}else{const U=N[r.scaledTo(Number(S)).key];U&&U.findMatches(d.symbolInstances,r,x)}}for(let S=0;S<d.symbolInstances.length;S++){const N=d.symbolInstances.get(S);N.crossTileID||(N.crossTileID=y.generate(),x[N.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ju(r,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(r,d){for(const y of d.getCrossTileIDsLists())for(const x of y)delete this.usedCrossTileIDs[r][x]}removeStaleBuckets(r){let d=!1;for(const y in this.indexes){const x=this.indexes[y];for(const S in x)r[x[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,x[S]),delete x[S],d=!0)}return d}}class wc{constructor(){this.layerIndexes={},this.crossTileIDs=new yA,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,d,y){let x=this.layerIndexes[r.id];x===void 0&&(x=this.layerIndexes[r.id]=new Vo);let S=!1;const N={};x.handleWrapJump(y);for(const U of d){const z=U.getBucket(r);z&&r.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(U.tileID,z,this.crossTileIDs)&&(S=!0),N[z.bucketInstanceId]=!0)}return x.removeStaleBuckets(N)&&(S=!0),S}pruneUnusedLayers(r){const d={};r.forEach(y=>{d[y]=!0});for(const y in this.layerIndexes)d[y]||delete this.layerIndexes[y]}}var Uu="void main() {fragColor=vec4(1.0);}";const ea={prelude:Nn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Nn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Nn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Nn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Nn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Nn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Nn(Uu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Nn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Nn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Nn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Nn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Nn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Nn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Nn(Uu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Nn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Nn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Nn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Nn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Nn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Nn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Nn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Nn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Nn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Nn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Nn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Nn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Nn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Nn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Nn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Nn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Nn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Nn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Nn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Nn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Nn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Nn(w,r){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=r.match(/in ([\w]+) ([\w]+)/g),x=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=S?S.concat(x):x,U={};return{fragmentSource:w=w.replace(d,(z,X,Y,Ae,oe)=>(U[oe]=!0,X==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
in ${Y} ${Ae} ${oe};
#else
uniform ${Y} ${Ae} u_${oe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${oe}
    ${Y} ${Ae} ${oe} = u_${oe};
#endif
`)),vertexSource:r=r.replace(d,(z,X,Y,Ae,oe)=>{const _e=Ae==="float"?"vec2":"vec4",Ne=oe.match(/color/)?"color":_e;return U[oe]?X==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
in ${Y} ${_e} a_${oe};
out ${Y} ${Ae} ${oe};
#else
uniform ${Y} ${Ae} u_${oe};
#endif
`:Ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = a_${oe};
#else
    ${Y} ${Ae} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = unpack_mix_${Ne}(a_${oe}, u_${oe}_t);
#else
    ${Y} ${Ae} ${oe} = u_${oe};
#endif
`:X==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
in ${Y} ${_e} a_${oe};
#else
uniform ${Y} ${Ae} u_${oe};
#endif
`:Ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${Y} ${Ae} ${oe} = a_${oe};
#else
    ${Y} ${Ae} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${Y} ${Ae} ${oe} = unpack_mix_${Ne}(a_${oe}, u_${oe}_t);
#else
    ${Y} ${Ae} ${oe} = u_${oe};
#endif
`}),staticAttributes:y,staticUniforms:N}}class Ja{constructor(r,d,y){this.vertexBuffer=r,this.indexBuffer=d,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ns=a.aJ([{name:"a_pos",type:"Int16",components:2}]);const ja="#define PROJECTION_MERCATOR",Cn="mercator";class fs{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Cn}get shaderDefine(){return ja}get shaderPreludeCode(){return ea.projectionMercator}get vertexShaderPreludeCode(){return ea.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,d,y,x,S){if(this._cachedMesh)return this._cachedMesh;const N=new a.aL;N.emplaceBack(0,0),N.emplaceBack(a.$,0),N.emplaceBack(0,a.$),N.emplaceBack(a.$,a.$);const U=r.createVertexBuffer(N,Ns.members),z=a.aM.simpleSegment(0,0,4,2),X=new a.aN;X.emplaceBack(1,0,2),X.emplaceBack(1,2,3);const Y=r.createIndexBuffer(X);return this._cachedMesh=new Ja(U,Y,z),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class qo{constructor(r=0,d=0,y=0,x=0){if(isNaN(r)||r<0||isNaN(d)||d<0||isNaN(y)||y<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=d,this.left=y,this.right=x}interpolate(r,d,y){return d.top!=null&&r.top!=null&&(this.top=a.C.number(r.top,d.top,y)),d.bottom!=null&&r.bottom!=null&&(this.bottom=a.C.number(r.bottom,d.bottom,y)),d.left!=null&&r.left!=null&&(this.left=a.C.number(r.left,d.left,y)),d.right!=null&&r.right!=null&&(this.right=a.C.number(r.right,d.right,y)),this}getCenter(r,d){const y=a.ah((this.left+r-this.right)/2,0,r),x=a.ah((this.top+d-this.bottom)/2,0,d);return new a.P(y,x)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new qo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function eo(w,r){if(!w.renderWorldCopies||w.lngRange)return;const d=r.lng-w.center.lng;r.lng+=d>180?-360:d<-180?360:0}function Zi(w){return Math.max(0,Math.floor(w))}class _s{constructor(r,d,y,x,S,N){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=N===void 0||!!N,this._minZoom=d||0,this._maxZoom=y||22,this._minPitch=x??0,this._maxPitch=S??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Zi(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new qo,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,d,y){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Zi(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new qo(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!y&&r.autoCalculateNearFarZ,d&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const d=a.aO(r,-180,180)*Math.PI/180;var y,x,S,N,U,z,X,Y,Ae;this._bearingInRadians!==d&&(this._unmodified=!1,this._bearingInRadians=d,this._calcMatrices(),this._rotationMatrix=b(),y=this._rotationMatrix,S=-this._bearingInRadians,N=(x=this._rotationMatrix)[0],U=x[1],z=x[2],X=x[3],Y=Math.sin(S),Ae=Math.cos(S),y[0]=N*Ae+z*Y,y[1]=U*Ae+X*Y,y[2]=N*-Y+z*Ae,y[3]=U*-Y+X*Ae)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const d=a.ah(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==d&&(this._unmodified=!1,this._pitchInRadians=d,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const d=r/180*Math.PI;this._rollInRadians!==d&&(this._unmodified=!1,this._rollInRadians=d,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(r){r=a.ah(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=a.ae(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const d=this.getConstrained(this._center,r).zoom;this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this._tileZoom=Math.max(0,Math.floor(d)),this._scale=a.af(d),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,d){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=d,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,d,y){this._unmodified=!1,this._edgeInsets.interpolate(r,d,y),this._constrain(),this._calcMatrices()}resize(r,d,y=!0){this._width=r,this._height=d,y&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Jt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ai,a.ai])}getConstrained(r,d){return this._callbacks.getConstrained(r,d)}getCameraQueryGeometry(r,d){if(d.length===1)return[d[0],r];{const{minX:y,minY:x,maxX:S,maxY:N}=a.a2.fromPoints(d).extend(r);return[new a.P(y,x),new a.P(S,x),new a.P(S,N),new a.P(y,N),new a.P(y,x)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:d,zoom:y}=this.getConstrained(this.center,this.zoom);this.setCenter(d),this.setZoom(y),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=a.ag(new Float64Array(16));a.N(r,r,[this._width/2,-this._height/2,1]),a.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=a.ag(new Float64Array(16)),a.N(r,r,[1,-1,1]),a.M(r,r,[-1,-1,0]),a.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,d,y,x){const S=y!==void 0?y:this.bearing,N=x=x!==void 0?x:this.pitch,U=a.a1.fromLngLat(r,d),z=-Math.cos(a.ae(N)),X=Math.sin(a.ae(N)),Y=X*Math.sin(a.ae(S)),Ae=-X*Math.cos(a.ae(S));let oe=this.elevation;const _e=d-oe;let Ne;z*_e>=0||Math.abs(z)<.1?(Ne=1e4,oe=d+Ne*z):Ne=-_e/z;let He,Ge,We=a.aQ(1,U.y),Ye=0;do{if(Ye+=1,Ye>10)break;Ge=Ne/We,He=new a.a1(U.x+Y*Ge,U.y+Ae*Ge),We=1/He.meterInMercatorCoordinateUnits()}while(Math.abs(Ne-Ge*We)>1e-12);return{center:He.toLngLat(),elevation:oe,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/Ge/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const d=a.aj(1,this.center.lat)*this.worldSize,y=this.cameraToCenterDistance/d,x=a.a1.fromLngLat(this.center,this.elevation),S=Tt(this.center,this.elevation,this.pitch,this.bearing,y);this._elevation=r;const N=this.calculateCenterFromCameraLngLatAlt(S.toLngLat(),a.aQ(S.z,x.y),this.bearing,this.pitch);this._elevation=N.elevation,this._center=N.center,this.setZoom(N.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=a.aj(1,this.center.lat)*this.worldSize;return Tt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const d=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/d,r.canonical.y/d,1/d/a.$,1/d/a.$]}}class xs{constructor(r,d){this.min=r,this.max=d,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(r){const d=[r%2==0,r<2],y=a.aT(this.min),x=a.aT(this.max);for(let S=0;S<d.length;S++)y[S]=d[S]?this.min[S]:this.center[S],x[S]=d[S]?this.center[S]:this.max[S];return x[2]=this.max[2],new xs(y,x)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let d=!0;for(let y=0;y<r.planes.length;y++){const x=this.intersectsPlane(r.planes[y]);if(x===0)return 0;x===1&&(d=!1)}return d?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let d=r[3],y=r[3];for(let x=0;x<3;x++)r[x]>0?(d+=r[x]*this.min[x],y+=r[x]*this.max[x]):(y+=r[x]*this.min[x],d+=r[x]*this.max[x]);return d>=0?2:y<0?0:1}}class fr{distanceToTile2d(r,d,y,x){const S=x.distanceX([r,d]),N=x.distanceY([r,d]);return Math.hypot(S,N)}getWrap(r,d,y){return y}getTileBoundingVolume(r,d,y,x){var S,N;let U=0,z=0;if(x?.terrain){const Y=new a.Z(r.z,d,r.z,r.x,r.y),Ae=x.terrain.getMinMaxElevation(Y);U=(S=Ae.minElevation)!==null&&S!==void 0?S:Math.min(0,y),z=(N=Ae.maxElevation)!==null&&N!==void 0?N:Math.max(0,y)}const X=1<<r.z;return new xs([d+r.x/X,r.y/X,U],[d+(r.x+1)/X,(r.y+1)/X,z])}allowVariableZoom(r,d){const y=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,x=a.ah(78.5-y/2,0,60);return!!d.terrain||r.pitch>x}allowWorldCopies(){return!0}prepareNextFrame(){}}class Rn{constructor(r,d,y){this.points=r,this.planes=d,this.aabb=y}static fromInvProjectionMatrix(r,d=1,y=0,x,S){const N=S?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],U=Math.pow(2,y),z=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(oe=>function(_e,Ne,He,Ge){const We=a.aw([],_e,Ne),Ye=1/We[3]/He*Ge;return a.aY(We,We,[Ye,Ye,1/We[3],Ye])}(oe,r,d,U));x&&function(oe,_e,Ne,He){const Ge=He?4:0,We=He?0:4;let Ye=0;const it=[],Je=[];for(let nt=0;nt<4;nt++){const mt=a.aU([],oe[nt+We],oe[nt+Ge]),Dt=a.aZ(mt);a.aR(mt,mt,1/Dt),it.push(Dt),Je.push(mt)}for(let nt=0;nt<4;nt++){const mt=a.a_(oe[nt+Ge],Je[nt],Ne);Ye=mt!==null&&mt>=0?Math.max(Ye,mt):Math.max(Ye,it[nt])}const lt=function(nt,mt){const Dt=a.aU([],nt[mt[0]],nt[mt[1]]),Nt=a.aU([],nt[mt[2]],nt[mt[1]]),Lt=[0,0,0,0];return a.aV(Lt,a.aW([],Dt,Nt)),Lt[3]=-a.aX(Lt,nt[mt[0]]),Lt}(oe,_e),ht=function(nt,mt){const Dt=a.a$(nt),Nt=a.b0([],nt,1/Dt),Lt=a.aU([],mt,a.aR([],Nt,a.aX(mt,Nt))),Pt=a.a$(Lt);if(Pt>0){const ui=Math.sqrt(1-Nt[3]*Nt[3]),Ai=a.aR([],Nt,-Nt[3]),$t=a.aS([],Ai,a.aR([],Lt,ui/Pt));return a.b1(mt,$t)}return null}(Ne,lt);if(ht!==null){const nt=ht/a.aX(Je[0],lt);Ye=Math.min(Ye,nt)}for(let nt=0;nt<4;nt++){const mt=Math.min(Ye,it[nt]);oe[nt+We]=[oe[nt+Ge][0]+Je[nt][0]*mt,oe[nt+Ge][1]+Je[nt][1]*mt,oe[nt+Ge][2]+Je[nt][2]*mt,1]}}(z,N[0],x,S);const X=N.map(oe=>{const _e=a.aU([],z[oe[0]],z[oe[1]]),Ne=a.aU([],z[oe[2]],z[oe[1]]),He=a.aV([],a.aW([],_e,Ne)),Ge=-a.aX(He,z[oe[1]]);return He.concat(Ge)}),Y=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Ae=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const oe of z)for(let _e=0;_e<3;_e++)Y[_e]=Math.min(Y[_e],oe[_e]),Ae[_e]=Math.max(Ae[_e],oe[_e]);return new Rn(z,X,new xs(Y,Ae))}}class yl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,d,y){return this._helper.interpolatePadding(r,d,y)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,d,y=!0){this._helper.resize(r,d,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,d){this._helper.overrideNearFarZ(r,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,d){}constructor(r,d,y,x,S){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new _s({calcMatrices:()=>{this._calcMatrices()},getConstrained:(N,U)=>this.getConstrained(N,U)},r,d,y,x,S),this._coveringTilesDetailsProvider=new fr}clone(){const r=new yl;return r.apply(this),r}apply(r,d,y){this._helper.apply(r,d,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const d=[new a.b2(0,r)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new a.P(0,0)),x=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),S=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),N=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),U=Math.floor(Math.min(y.x,x.x,S.x,N.x)),z=Math.floor(Math.max(y.x,x.x,S.x,N.x)),X=1;for(let Y=U-X;Y<=z+X;Y++)Y!==0&&d.push(new a.b2(Y,r))}return d}getCameraFrustum(){return Rn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const d=this.screenPointToLocation(this.centerPoint,r),y=r?r.getElevationForLngLatZoom(d,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(r,d){const y=a.aj(this.elevation,this.center.lat),x=this.screenPointToMercatorCoordinateAtZ(d,y),S=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),N=a.a1.fromLngLat(r),U=new a.a1(N.x-(x.x-S.x),N.y-(x.y-S.y));this.setCenter(U?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,d){return d?this.coordinatePoint(a.a1.fromLngLat(r),d.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(r))}screenPointToLocation(r,d){var y;return(y=this.screenPointToMercatorCoordinate(r,d))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(r,d){if(d){const y=d.pointCoordinate(r);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,d){const y=d||0,x=[r.x,r.y,0,1],S=[r.x,r.y,1,1];a.aw(x,x,this._pixelMatrixInverse),a.aw(S,S,this._pixelMatrixInverse);const N=x[3],U=S[3],z=x[1]/N,X=S[1]/U,Y=x[2]/N,Ae=S[2]/U,oe=Y===Ae?0:(y-Y)/(Ae-Y);return new a.a1(a.C.number(x[0]/N,S[0]/U,oe)/this.worldSize,a.C.number(z,X,oe)/this.worldSize,y)}coordinatePoint(r,d=0,y=this._pixelMatrix){const x=[r.x*this.worldSize,r.y*this.worldSize,d,1];return a.aw(x,x,y),new a.P(x[0]/x[3],x[1]/x[3])}getBounds(){const r=Math.max(0,this._helper._height/2-wt(this));return new Jt().extend(this.screenPointToLocation(new a.P(0,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(r,d){return d?d.pointCoordinate(r)!=null:r.y>this.height/2-wt(this)}calculatePosMatrix(r,d=!1,y){var x;const S=(x=r.key)!==null&&x!==void 0?x:a.b3(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),N=d?this._alignedPosMatrixCache:this._posMatrixCache;if(N.has(S)){const X=N.get(S);return y?X.f32:X.f64}const U=dt(r,this.worldSize);a.O(U,d?this._alignedProjMatrix:this._viewProjMatrix,U);const z={f64:U,f32:new Float32Array(U)};return N.set(S,z),y?z.f32:z.f64}calculateFogMatrix(r){const d=r.key,y=this._fogMatrixCacheF32;if(y.has(d))return y.get(d);const x=dt(r,this.worldSize);return a.O(x,this._fogMatrix,x),y.set(d,new Float32Array(x)),y.get(d)}getConstrained(r,d){d=a.ah(+d,this.minZoom,this.maxZoom);const y={center:new a.S(r.lng,r.lat),zoom:d};let x=this._helper._lngRange;if(!this._helper._renderWorldCopies&&x===null){const it=179.9999999999;x=[-it,it]}const S=this.tileSize*a.af(y.zoom);let N=0,U=S,z=0,X=S,Y=0,Ae=0;const{x:oe,y:_e}=this.size;if(this._helper._latRange){const it=this._helper._latRange;N=a.U(it[1])*S,U=a.U(it[0])*S,U-N<_e&&(Y=_e/(U-N))}x&&(z=a.aO(a.V(x[0])*S,0,S),X=a.aO(a.V(x[1])*S,0,S),X<z&&(X+=S),X-z<oe&&(Ae=oe/(X-z)));const{x:Ne,y:He}=st(S,r);let Ge,We;const Ye=Math.max(Ae||0,Y||0);if(Ye){const it=new a.P(Ae?(X+z)/2:Ne,Y?(U+N)/2:He);return y.center=ut(S,it).wrap(),y.zoom+=a.ak(Ye),y}if(this._helper._latRange){const it=_e/2;He-it<N&&(We=N+it),He+it>U&&(We=U-it)}if(x){const it=(z+X)/2;let Je=Ne;this._helper._renderWorldCopies&&(Je=a.aO(Ne,it-S/2,it+S/2));const lt=oe/2;Je-lt<z&&(Ge=z+lt),Je+lt>X&&(Ge=X-lt)}if(Ge!==void 0||We!==void 0){const it=new a.P(Ge??Ne,We??He);y.center=ut(S,it).wrap()}return y}calculateCenterFromCameraLngLatAlt(r,d,y,x){return this._helper.calculateCenterFromCameraLngLatAlt(r,d,y,x)}_calculateNearFarZIfNeeded(r,d,y){if(!this._helper.autoCalculateNearFarZ)return;const x=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),S=r-x*this._helper._pixelPerMeter/Math.cos(d),N=x<0?S:r,U=Math.PI/2+this.pitchInRadians,z=a.ae(this.fov)*(Math.abs(Math.cos(a.ae(this.roll)))*this.height+Math.abs(Math.sin(a.ae(this.roll)))*this.width)/this.height*(.5+y.y/this.height),X=Math.sin(z)*N/Math.sin(a.ah(Math.PI-U-z,.01,Math.PI-.01)),Y=wt(this),Ae=Math.atan(Y/this._helper.cameraToCenterDistance),oe=a.ae(.75),_e=Ae>oe?2*Ae*(.5+y.y/(2*Y)):oe,Ne=Math.sin(_e)*N/Math.sin(a.ah(Math.PI-U-_e,.01,Math.PI-.01)),He=Math.min(X,Ne);this._helper._farZ=1.01*(Math.cos(Math.PI/2-d)*He+N),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,d=st(this.worldSize,this.center),y=d.x,x=d.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;const S=a.ae(Math.min(this.pitch,Ze)),N=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(S));let U;this._calculateNearFarZIfNeeded(N,S,r),U=new Float64Array(16),a.b4(U,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,U),U[8]=2*-r.x/this._helper._width,U[9]=2*r.y/this._helper._height,this._projectionMatrix=a.b5(U),a.N(U,U,[1,-1,1]),a.M(U,U,[0,0,-this._helper.cameraToCenterDistance]),a.b6(U,U,-this.rollInRadians),a.b7(U,U,this.pitchInRadians),a.b6(U,U,-this.bearingInRadians),a.M(U,U,[-y,-x,0]),this._mercatorMatrix=a.N([],U,[this.worldSize,this.worldSize,this.worldSize]),a.N(U,U,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,U),a.M(U,U,[0,0,-this.elevation]),this._viewProjMatrix=U,this._invViewProjMatrix=a.aq([],U);const z=[0,0,-1,1];a.aw(z,z,this._invViewProjMatrix),this._cameraPosition=[z[0]/z[3],z[1]/z[3],z[2]/z[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,N,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-y,-x,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,U);const X=this._helper._width%2/2,Y=this._helper._height%2/2,Ae=Math.cos(this.bearingInRadians),oe=Math.sin(-this.bearingInRadians),_e=y-Math.round(y)+Ae*X+oe*Y,Ne=x-Math.round(x)+Ae*Y+oe*X,He=new Float64Array(U);if(a.M(He,He,[_e>.5?_e-1:_e,Ne>.5?Ne-1:Ne,0]),this._alignedProjMatrix=He,U=a.aq(new Float64Array(16),this._pixelMatrix),!U)throw new Error("failed to invert matrix");this._pixelMatrixInverse=U,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new a.P(0,0)),d=[r.x*this.worldSize,r.y*this.worldSize,0,1];return a.aw(d,d,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=a.aj(1,this.center.lat)*this.worldSize;return Tt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,d){const y=a.a1.fromLngLat(r),x=[y.x*this.worldSize,y.y*this.worldSize,d,1];return a.aw(x,x,this._viewProjMatrix),x[2]/x[3]}getProjectionData(r){const{overscaledTileID:d,aligned:y,applyTerrainMatrix:x}=r,S=this._helper.getMercatorTileCoordinates(d),N=d?this.calculatePosMatrix(d,y,!0):null;let U;return U=d&&d.terrainRttPosMatrix32f&&x?d.terrainRttPosMatrix32f:N||a.b8(),{mainMatrix:U,tileMercatorCoords:S,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:U}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,d,y){return 1}transformLightDirection(r){return a.aT(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,d,y,x){const S=this.calculatePosMatrix(y);let N;x?(N=[r,d,x(r,d),1],a.aw(N,N,S)):(N=[r,d,0,1],xc(N,N,S));const U=N[3];return{point:new a.P(N[0]/U,N[1]/U),signedDistanceFromCamera:U,isOccluded:!1}}populateCache(r){for(const d of r)this.calculatePosMatrix(d)}getMatrixForModel(r,d){const y=a.a1.fromLngLat(r,d),x=y.meterInMercatorCoordinateUnits(),S=a.b9();return a.M(S,S,[y.x,y.y,y.z]),a.b6(S,S,Math.PI),a.b7(S,S,Math.PI/2),a.N(S,S,[-x,x,x]),S}getProjectionDataForCustomLayer(r=!0){const d=new a.Z(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:d,applyGlobeMatrix:r}),x=dt(d,this.worldSize);a.O(x,this._viewProjMatrix,x),y.tileMercatorCoords=[0,0,1,1];const S=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],N=a.ba();return a.N(N,x,S),y.fallbackMatrix=N,y.mainMatrix=N,y}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function Kr(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Wr(w){if(w.useSlerp)if(w.k<1){const r=a.bb(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),d=a.bb(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),y=new Float64Array(4);a.bc(y,r,d,w.k);const x=a.bd(y);w.tr.setRoll(x.roll),w.tr.setPitch(x.pitch),w.tr.setBearing(x.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(a.C.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(a.C.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(a.C.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function ta(w,r,d,y,x){const S=x.padding,N=st(x.worldSize,d.getNorthWest()),U=st(x.worldSize,d.getNorthEast()),z=st(x.worldSize,d.getSouthEast()),X=st(x.worldSize,d.getSouthWest()),Y=a.ae(-y),Ae=N.rotate(Y),oe=U.rotate(Y),_e=z.rotate(Y),Ne=X.rotate(Y),He=new a.P(Math.max(Ae.x,oe.x,Ne.x,_e.x),Math.max(Ae.y,oe.y,Ne.y,_e.y)),Ge=new a.P(Math.min(Ae.x,oe.x,Ne.x,_e.x),Math.min(Ae.y,oe.y,Ne.y,_e.y)),We=He.sub(Ge),Ye=(x.width-(S.left+S.right+r.left+r.right))/We.x,it=(x.height-(S.top+S.bottom+r.top+r.bottom))/We.y;if(it<0||Ye<0)return void Kr();const Je=Math.min(a.ak(x.scale*Math.min(Ye,it)),w.maxZoom),lt=a.P.convert(w.offset),ht=new a.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(a.ae(y)),nt=lt.add(ht).mult(x.scale/a.af(Je));return{center:ut(x.worldSize,N.add(z).div(2).sub(nt)),zoom:Je,bearing:y}}class zl{get useGlobeControls(){return!1}handlePanInertia(r,d){const y=r.mag(),x=Math.abs(wt(d));return{easingOffset:r.mult(Math.min(.75*x/y,1)),easingCenter:d.center}}handleMapControlsRollPitchBearingZoom(r,d){r.bearingDelta&&d.setBearing(d.bearing+r.bearingDelta),r.pitchDelta&&d.setPitch(d.pitch+r.pitchDelta),r.rollDelta&&d.setRoll(d.roll+r.rollDelta),r.zoomDelta&&d.setZoom(d.zoom+r.zoomDelta)}handleMapControlsPan(r,d,y){r.around.distSqr(d.centerPoint)<.01||d.setLocationAtPoint(y,r.around)}cameraForBoxAndBearing(r,d,y,x,S){return ta(r,d,y,x,S)}handleJumpToCenterZoom(r,d){r.zoom!==(d.zoom!==void 0?+d.zoom:r.zoom)&&r.setZoom(+d.zoom),d.center!==void 0&&r.setCenter(a.S.convert(d.center))}handleEaseTo(r,d){const y=r.zoom,x=r.padding,S={roll:r.roll,pitch:r.pitch,bearing:r.bearing},N={roll:d.roll===void 0?r.roll:d.roll,pitch:d.pitch===void 0?r.pitch:d.pitch,bearing:d.bearing===void 0?r.bearing:d.bearing},U=d.zoom!==void 0,z=!r.isPaddingEqual(d.padding);let X=!1;const Y=U?+d.zoom:r.zoom;let Ae=r.centerPoint.add(d.offsetAsPoint);const oe=r.screenPointToLocation(Ae),{center:_e,zoom:Ne}=r.getConstrained(a.S.convert(d.center||oe),Y??y);eo(r,_e);const He=st(r.worldSize,oe),Ge=st(r.worldSize,_e).sub(He),We=a.af(Ne-y);return X=Ne!==y,{easeFunc:Ye=>{if(X&&r.setZoom(a.C.number(y,Ne,Ye)),a.be(S,N)||Wr({startEulerAngles:S,endEulerAngles:N,tr:r,k:Ye,useSlerp:S.roll!=N.roll}),z&&(r.interpolatePadding(x,d.padding,Ye),Ae=r.centerPoint.add(d.offsetAsPoint)),d.around)r.setLocationAtPoint(d.around,d.aroundPoint);else{const it=a.af(r.zoom-y),Je=Ne>y?Math.min(2,We):Math.max(.5,We),lt=Math.pow(Je,1-Ye),ht=ut(r.worldSize,He.add(Ge.mult(Ye*lt)).mult(it));r.setLocationAtPoint(r.renderWorldCopies?ht.wrap():ht,Ae)}},isZooming:X,elevationCenter:_e}}handleFlyTo(r,d){const y=d.zoom!==void 0,x=r.zoom,S=r.getConstrained(a.S.convert(d.center||d.locationAtOffset),y?+d.zoom:x),N=S.center,U=S.zoom;eo(r,N);const z=st(r.worldSize,d.locationAtOffset),X=st(r.worldSize,N).sub(z),Y=X.mag(),Ae=a.af(U-x);let oe;if(d.minZoom!==void 0){const _e=Math.min(+d.minZoom,x,U),Ne=r.getConstrained(N,_e).zoom;oe=a.af(Ne-x)}return{easeFunc:(_e,Ne,He,Ge)=>{r.setZoom(_e===1?U:x+a.ak(Ne));const We=_e===1?N:ut(r.worldSize,z.add(X.mult(He)).mult(Ne));r.setLocationAtPoint(r.renderWorldCopies?We.wrap():We,Ge)},scaleOfZoom:Ae,targetCenter:N,scaleOfMinZoom:oe,pixelPathLength:Y}}}class rr{constructor(r,d,y){this.blendFunction=r,this.blendColor=d,this.mask=y}}rr.Replace=[1,0],rr.disabled=new rr(rr.Replace,a.bf.transparent,[!1,!1,!1,!1]),rr.unblended=new rr(rr.Replace,a.bf.transparent,[!0,!0,!0,!0]),rr.alphaBlended=new rr([1,771],a.bf.transparent,[!0,!0,!0,!0]);const pr=2305;class _n{constructor(r,d,y){this.enable=r,this.mode=d,this.frontFace=y}}_n.disabled=new _n(!1,1029,pr),_n.backCCW=new _n(!0,1029,pr),_n.frontCCW=new _n(!0,1028,pr);class Ji{constructor(r,d,y){this.func=r,this.mask=d,this.range=y}}Ji.ReadOnly=!1,Ji.ReadWrite=!0,Ji.disabled=new Ji(519,Ji.ReadOnly,[0,1]);const bs=7680;class rn{constructor(r,d,y,x,S,N){this.test=r,this.ref=d,this.mask=y,this.fail=x,this.depthFail=S,this.pass=N}}rn.disabled=new rn({func:519,mask:0},0,0,bs,bs,bs);const vl=new WeakMap;function Ur(w){var r;if(vl.has(w))return vl.get(w);{const d=(r=w.getParameter(w.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return vl.set(w,d),d}}class Du{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const d=r.context,y=d.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const x=new a.aL;x.emplaceBack(-1,-1),x.emplaceBack(2,-1),x.emplaceBack(-1,2);const S=new a.aN;S.emplaceBack(0,1,2),this._fullscreenTriangle=new Ja(d.createVertexBuffer(x,Ns.members),d.createIndexBuffer(S),a.aM.simpleSegment(0,0,x.length,S.length)),this._resultBuffer=new Uint8Array(4),d.activeTexture.set(y.TEXTURE1);const N=y.createTexture();y.bindTexture(y.TEXTURE_2D,N),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=d.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(N),Ur(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,d){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,d),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,d=r.gl;r.activeTexture.set(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,d){const y=this._cachedRenderContext.context,x=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,x.TRIANGLES,Ji.disabled,rn.disabled,rr.unblended,_n.disabled,((S,N)=>({u_input:S,u_output_expected:N}))(r,d),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ur(x)){x.bindBuffer(x.PIXEL_PACK_BUFFER,this._pbo),x.readBuffer(x.COLOR_ATTACHMENT0),x.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),x.bindBuffer(x.PIXEL_PACK_BUFFER,null);const S=x.fenceSync(x.SYNC_GPU_COMMANDS_COMPLETE,0);x.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:S}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ur(r)){const d=r.clientWaitSync(this._readbackQueue.sync,0,0);if(d===r.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(d===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Du._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let d=0;return d+=r[0]/256,d+=r[1]/65536,d+=r[2]/16777216,r[3]<127&&(d=-d),d/128}}const Hl=a.$/128;function Vl(w,r){const d=w.granularity!==void 0?Math.max(w.granularity,1):1,y=d+(w.generateBorders?2:0),x=d+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),S=y+1,N=x+1,U=w.generateBorders?-1:0,z=w.generateBorders||w.extendToNorthPole?-1:0,X=d+(w.generateBorders?1:0),Y=d+(w.generateBorders||w.extendToSouthPole?1:0),Ae=S*N,oe=y*x*6,_e=S*N>65536;if(_e&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ne=_e||r==="32bit",He=new Int16Array(2*Ae);let Ge=0;for(let it=z;it<=Y;it++)for(let Je=U;Je<=X;Je++){let lt=Je/d*a.$;Je===-1&&(lt=-Hl),Je===d+1&&(lt=a.$+Hl);let ht=it/d*a.$;it===-1&&(ht=w.extendToNorthPole?a.bh:-Hl),it===d+1&&(ht=w.extendToSouthPole?a.bi:a.$+Hl),He[Ge++]=lt,He[Ge++]=ht}const We=Ne?new Uint32Array(oe):new Uint16Array(oe);let Ye=0;for(let it=0;it<x;it++)for(let Je=0;Je<y;Je++){const lt=Je+1+it*S,ht=Je+(it+1)*S,nt=Je+1+(it+1)*S;We[Ye++]=Je+it*S,We[Ye++]=ht,We[Ye++]=lt,We[Ye++]=lt,We[Ye++]=ht,We[Ye++]=nt}return{vertices:He.buffer.slice(0),indices:We.buffer.slice(0),uses32bitIndices:Ne}}const _o=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class ha{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ea.projectionGlobe}get vertexShaderPreludeCode(){return ea.projectionMercator.vertexSource}get subdivisionGranularity(){return _o}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new Du(r));const d=a.U(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-d*Math.PI*2))-.5*Math.PI,x=this._errorMeasurement.updateErrorLoop(d,y),S=P.now();x!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=x,this._errorMeasurementLastChangeTime=S);const N=Math.min(Math.max((S-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(N))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,d,y,x,S){const N=(S==="stencil"?_o.stencil:_o.tile).getGranularityForZoomLevel(d.z);return this._getMesh(r,{granularity:N,generateBorders:y,extendToNorthPole:d.y===0&&x,extendToSouthPole:d.y===(1<<d.z)-1&&x})}_getMesh(r,d){const y=this._getMeshKey(d);if(y in this._tileMeshCache)return this._tileMeshCache[y];const x=function(S,N){const U=Vl(N,"16bit"),z=a.aL.deserialize({arrayBuffer:U.vertices,length:U.vertices.byteLength/2/2}),X=a.aN.deserialize({arrayBuffer:U.indices,length:U.indices.byteLength/2/3});return new Ja(S.createVertexBuffer(z,Ns.members),S.createIndexBuffer(X),a.aM.simpleSegment(0,0,z.length,X.length))}(r,d);return this._tileMeshCache[y]=x,x}recalculate(r){}hasTransition(){const r=P.now();let d=!1;return d=d||(r-this._errorMeasurementLastChangeTime)/1e3<.7,d=d||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,d}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const Go=new a.r({type:new a.D(a.v.projection.type)});class Ru extends a.E{constructor(r){super(),this._transitionable=new a.t(Go,void 0),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new fs,this._verticalPerspectiveProjection=new ha}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof a.bm){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,d,y,x,S){return this.currentProjection.getMeshFromTileID(r,d,y,x,S)}setProjection(r){this._transitionable.setValue("type",r?.type||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Ko(w){const r=xo(w.worldSize,w.center.lat);return 2*Math.PI*r}function Ms(w,r,d,y,x){const S=1/(1<<x),N=r/a.$*S+y*S,U=a.bo((w/a.$*S+d*S)*Math.PI*2+Math.PI,2*Math.PI),z=2*Math.atan(Math.exp(Math.PI-N*Math.PI*2))-.5*Math.PI,X=Math.cos(z),Y=new Float64Array(3);return Y[0]=Math.sin(U)*X,Y[1]=Math.sin(z),Y[2]=Math.cos(U)*X,Y}function $r(w){return function(r,d){const y=Math.cos(d),x=new Float64Array(3);return x[0]=Math.sin(r)*y,x[1]=Math.sin(d),x[2]=Math.cos(r)*y,x}(w.lng*Math.PI/180,w.lat*Math.PI/180)}function xo(w,r){return w/(2*Math.PI)/Math.cos(r*Math.PI/180)}function vu(w){const r=Math.asin(w[1])/Math.PI*180,d=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(d>1e-6){const y=w[0]/d,x=Math.acos(w[2]/d),S=(y>0?x:-x)/Math.PI*180;return new a.S(a.aO(S,-180,180),r)}return new a.S(0,r)}function bo(w){return Math.cos(w*Math.PI/180)}function Is(w,r){const d=bo(w),y=bo(r);return a.ak(y/d)}function Hc(w,r){const d=w.rotate(r.bearingInRadians),y=r.zoom+Is(r.center.lat,0),x=a.bk(1/bo(r.center.lat),1/bo(Math.min(Math.abs(r.center.lat),60)),a.bn(y,7,3,0,1)),S=360/Ko({worldSize:r.worldSize,center:{lat:r.center.lat}});return new a.S(r.center.lng-d.x*S*x,a.ah(r.center.lat+d.y*S,-a.ai,a.ai))}function Bc(w){const r=.5*w,d=Math.sin(r),y=Math.cos(r);return Math.log(d+y)-Math.log(y-d)}function vA(w,r,d,y){const x=w.lat+d*y;if(Math.abs(d)>1){const S=(Math.sign(w.lat+d)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,N=Math.abs(w.lat+d)*Math.PI/180,U=Bc(S+y*(N-S)),z=Bc(S),X=Bc(N);return new a.S(w.lng+r*((U-z)/(X-z)),x)}return new a.S(w.lng+r*y,x)}class Ou{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,d,y,x){const S=`${r.z}_${r.x}_${r.y}_${x?.terrain?"t":""}`,N=this._cache.get(S);if(N)return N;const U=this._cachePrevious.get(S);if(U)return this._cache.set(S,U),U;const z=this._boundingVolumeFactory(r,d,y,x);return this._cache.set(S,z),this._hadAnyChanges=!0,z}}class rs{constructor(r,d,y,x){this.min=y,this.max=x,this.points=r,this.planes=d}static fromAabb(r,d){const y=[];for(let x=0;x<8;x++)y.push([1&~x?r[0]:d[0],(x>>1&1)==1?d[1]:r[1],(x>>2&1)==1?d[2]:r[2]]);return new rs(y,[[-1,0,0,d[0]],[1,0,0,-r[0]],[0,-1,0,d[1]],[0,1,0,-r[1]],[0,0,-1,d[2]],[0,0,1,-r[2]]],r,d)}static fromCenterSizeAngles(r,d,y){const x=a.br([],y[0],y[1],y[2]),S=a.bs([],[d[0],0,0],x),N=a.bs([],[0,d[1],0],x),U=a.bs([],[0,0,d[2]],x),z=[...r],X=[...r];for(let Ae=0;Ae<8;Ae++)for(let oe=0;oe<3;oe++){const _e=r[oe]+S[oe]*(1&~Ae?-1:1)+N[oe]*((Ae>>1&1)==1?1:-1)+U[oe]*((Ae>>2&1)==1?1:-1);z[oe]=Math.min(z[oe],_e),X[oe]=Math.max(X[oe],_e)}const Y=[];for(let Ae=0;Ae<8;Ae++){const oe=[...r];a.aS(oe,oe,a.aR([],S,1&~Ae?-1:1)),a.aS(oe,oe,a.aR([],N,(Ae>>1&1)==1?1:-1)),a.aS(oe,oe,a.aR([],U,(Ae>>2&1)==1?1:-1)),Y.push(oe)}return new rs(Y,[[...S,-a.aX(S,Y[0])],[...N,-a.aX(N,Y[0])],[...U,-a.aX(U,Y[0])],[-S[0],-S[1],-S[2],-a.aX(S,Y[7])],[-N[0],-N[1],-N[2],-a.aX(N,Y[7])],[-U[0],-U[1],-U[2],-a.aX(U,Y[7])]],z,X)}intersectsFrustum(r){let d=!0;const y=this.points.length,x=this.planes.length,S=r.planes.length,N=r.points.length;for(let U=0;U<S;U++){const z=r.planes[U];let X=0;for(let Y=0;Y<y;Y++){const Ae=this.points[Y];z[0]*Ae[0]+z[1]*Ae[1]+z[2]*Ae[2]+z[3]>=0&&X++}if(X===0)return 0;X<y&&(d=!1)}if(d)return 2;for(let U=0;U<x;U++){const z=this.planes[U];let X=0;for(let Y=0;Y<N;Y++){const Ae=r.points[Y];z[0]*Ae[0]+z[1]*Ae[1]+z[2]*Ae[2]+z[3]>=0&&X++}if(X===0)return 0}return 1}intersectsPlane(r){const d=this.points.length;let y=0;for(let x=0;x<d;x++){const S=this.points[x];r[0]*S[0]+r[1]*S[1]+r[2]*S[2]+r[3]>=0&&y++}return y===d?2:y===0?0:1}}function ql(w,r,d){const y=w-r;return y<0?-y:Math.max(0,y-d)}function da(w,r,d,y,x){const S=w-d;let N;return N=S<0?Math.min(-S,1+S-x):S>1?Math.min(Math.max(S-x,0),1-S):0,Math.max(N,ql(r,y,x))}class Qu{constructor(){this._boundingVolumeCache=new Ou(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,d,y,x){const S=1<<y.z,N=1/S,U=y.x/S,z=y.y/S;let X=2;return X=Math.min(X,da(r,d,U,z,N)),X=Math.min(X,da(r,d,U+.5,-z-N,N)),X=Math.min(X,da(r,d,U+.5,2-z-N,N)),X}getWrap(r,d,y){const x=1<<d.z,S=1/x,N=d.x/x,U=ql(r.x,N,S),z=ql(r.x,N-1,S),X=ql(r.x,N+1,S),Y=Math.min(U,z,X);return Y===X?1:Y===z?-1:0}allowVariableZoom(r,d){return yt(r,d)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,d,y,x){return this._boundingVolumeCache.getTileBoundingVolume(r,d,y,x)}_computeTileBoundingVolume(r,d,y,x){var S,N;let U=0,z=0;if(x?.terrain){const X=new a.Z(r.z,d,r.z,r.x,r.y),Y=x.terrain.getMinMaxElevation(X);U=(S=Y.minElevation)!==null&&S!==void 0?S:Math.min(0,y),z=(N=Y.maxElevation)!==null&&N!==void 0?N:Math.max(0,y)}if(U/=a.bu,z/=a.bu,U+=1,z+=1,r.z<=0)return rs.fromAabb([-z,-z,-z],[z,z,z]);if(r.z===1)return rs.fromAabb([r.x===0?-z:0,r.y===0?0:-z,-z],[r.x===0?0:z,r.y===0?z:0,z]);{const X=[Ms(0,0,r.x,r.y,r.z),Ms(a.$,0,r.x,r.y,r.z),Ms(a.$,a.$,r.x,r.y,r.z),Ms(0,a.$,r.x,r.y,r.z)],Y=[];for(const Lt of X)Y.push(a.aR([],Lt,z));if(z!==U)for(const Lt of X)Y.push(a.aR([],Lt,U));r.y===0&&Y.push([0,1,0]),r.y===(1<<r.z)-1&&Y.push([0,-1,0]);const Ae=[1,1,1],oe=[-1,-1,-1];for(const Lt of Y)for(let Pt=0;Pt<3;Pt++)Ae[Pt]=Math.min(Ae[Pt],Lt[Pt]),oe[Pt]=Math.max(oe[Pt],Lt[Pt]);const _e=Ms(a.$/2,a.$/2,r.x,r.y,r.z),Ne=a.aW([],[0,1,0],_e);a.aV(Ne,Ne);const He=a.aW([],_e,Ne);a.aV(He,He);const Ge=a.aW([],X[2],X[1]);a.aV(Ge,Ge);const We=a.aW([],X[0],X[3]);a.aV(We,We),Y.push(a.aR([],_e,z)),r.y>=(1<<r.z)/2&&Y.push(a.aR([],Ms(a.$/2,0,r.x,r.y,r.z),z)),r.y<(1<<r.z)/2&&Y.push(a.aR([],Ms(a.$/2,a.$,r.x,r.y,r.z),z));const Ye=Vc(_e,Y),it=Vc(He,Y),Je=[-_e[0],-_e[1],-_e[2],Ye.max],lt=[_e[0],_e[1],_e[2],-Ye.min],ht=[-He[0],-He[1],-He[2],it.max],nt=[He[0],He[1],He[2],-it.min],mt=[...Ge,0],Dt=[...We,0],Nt=[];return r.y===0?Nt.push(a.bt(Dt,mt,Je),a.bt(Dt,mt,lt)):Nt.push(a.bt(ht,mt,Je),a.bt(ht,mt,lt),a.bt(ht,Dt,Je),a.bt(ht,Dt,lt)),r.y===(1<<r.z)-1?Nt.push(a.bt(Dt,mt,Je),a.bt(Dt,mt,lt)):Nt.push(a.bt(nt,mt,Je),a.bt(nt,mt,lt),a.bt(nt,Dt,Je),a.bt(nt,Dt,lt)),new rs(Nt,[Je,lt,ht,nt,mt,Dt],Ae,oe)}}}function Vc(w,r){let d=1/0,y=-1/0;for(const x of r){const S=a.aX(w,x);d=Math.min(d,S),y=Math.max(y,S)}return{min:d,max:y}}class _l{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,d,y){return this._helper.interpolatePadding(r,d,y)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,d){this._helper.resize(r,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,d){this._helper.overrideNearFarZ(r,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new _s({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,d)=>this.getConstrained(r,d)}),this._coveringTilesDetailsProvider=new Qu}clone(){const r=new _l;return r.apply(this),r}apply(r,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=a.bp();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:d,applyGlobeMatrix:y}=r,x=this._helper.getMercatorTileCoordinates(d);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:x,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const d=this.pitchInRadians,y=this.cameraToCenterDistance/r,x=Math.sin(d)*y,S=Math.cos(d)*y+1,N=1/Math.sqrt(x*x+S*S)*1;let U=-x,z=S;const X=Math.sqrt(U*U+z*z);U/=X,z/=X;const Y=[0,U,z];a.bw(Y,Y,[0,0,0],-this.bearingInRadians),a.bx(Y,Y,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(Y,Y,[0,0,0],this.center.lng*Math.PI/180);const Ae=1/a.aZ(Y);return a.aR(Y,Y,Ae),[...Y,-N*Ae]}isLocationOccluded(r){return!this.isSurfacePointVisible($r(r))}transformLightDirection(r){const d=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,x=Math.cos(y),S=[Math.sin(d)*x,Math.sin(y),Math.cos(d)*x],N=[S[2],0,-S[0]],U=[0,0,0];a.aW(U,N,S),a.aV(N,N),a.aV(U,U);const z=[0,0,0];return a.aV(z,[N[0]*r[0]+U[0]*r[1]+S[0]*r[2],N[1]*r[0]+U[1]*r[1]+S[1]*r[2],N[2]*r[0]+U[2]*r[1]+S[2]*r[2]]),z}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,d,y){const x=function(U,z,X){const Y=1/(1<<X.z);return new a.a1(U/a.$*Y+X.x*Y,z/a.$*Y+X.y*Y)}(r,d,y.canonical),S=(N=x.y,[a.bo(x.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-N*Math.PI*2))-.5*Math.PI]);var N;return this.getCircleRadiusCorrection()/Math.cos(S[1])}projectTileCoordinates(r,d,y,x){const S=y.canonical,N=Ms(r,d,S.x,S.y,S.z),U=1+(x?x(r,d):0)/a.bu,z=[N[0]*U,N[1]*U,N[2]*U,1];a.aw(z,z,this._globeViewProjMatrixNoCorrection);const X=this._cachedClippingPlane,Y=X[0]*N[0]+X[1]*N[1]+X[2]*N[2]+X[3]<0;return{point:new a.P(z[0]/z[3],z[1]/z[3]),signedDistanceFromCamera:z[3],isOccluded:Y}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=xo(this.worldSize,this.center.lat),d=a.ba(),y=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),a.b4(d,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const x=this.centerOffset;d[8]=2*-x.x/this._helper._width,d[9]=2*x.y/this._helper._height,this._projectionMatrix=a.b5(d),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,d),a.M(d,d,[0,0,-this.cameraToCenterDistance]),a.b6(d,d,this.rollInRadians),a.b7(d,d,-this.pitchInRadians),a.b6(d,d,this.bearingInRadians),a.M(d,d,[0,0,-r]);const S=a.bp();S[0]=r,S[1]=r,S[2]=r,a.b7(y,d,this.center.lat*Math.PI/180),a.bz(y,y,-this.center.lng*Math.PI/180),a.N(y,y,S),this._globeViewProjMatrixNoCorrection=y,a.b7(d,d,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(d,d,-this.center.lng*Math.PI/180),a.N(d,d,S),this._globeViewProjMatrix32f=new Float32Array(d),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,y);const N=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/r,a.bw(this._cameraPosition,this._cameraPosition,N,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,N,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,N,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,N,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,N,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const U=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(U,U,[1,1,-1]),this._cachedFrustum=Rn.fromInvProjectionMatrix(U,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){a.w("calculateFogMatrix is not supported on globe projection.");const d=a.ba();return a.ag(d),d}getVisibleUnwrappedCoordinates(r){return[new a.b2(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,d){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=$r(r);a.aR(y,y,1+d/a.bu);const x=a.bv();return a.aw(x,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),x[2]/x[3]}populateCache(r){}getBounds(){const r=.5*this.width,d=.5*this.height,y=[new a.P(0,0),new a.P(r,0),new a.P(this.width,0),new a.P(this.width,d),new a.P(this.width,this.height),new a.P(r,this.height),new a.P(0,this.height),new a.P(0,d)],x=[];for(const Ae of y)x.push(this.unprojectScreenPoint(Ae));let S=0,N=0,U=0,z=0;const X=this.center;for(const Ae of x){const oe=a.bA(X.lng,Ae.lng),_e=a.bA(X.lat,Ae.lat);oe<N&&(N=oe),oe>S&&(S=oe),_e<z&&(z=_e),_e>U&&(U=_e)}const Y=[X.lng+N,X.lat+z,X.lng+S,X.lat+U];return this.isSurfacePointOnScreen([0,1,0])&&(Y[3]=90,Y[0]=-180,Y[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(Y[1]=-90,Y[0]=-180,Y[2]=180),new Jt(Y)}getConstrained(r,d){const y=a.ah(r.lat,-a.ai,a.ai),x=a.ah(+d,this.minZoom+Is(0,y),this.maxZoom);return{center:new a.S(r.lng,y),zoom:x}}calculateCenterFromCameraLngLatAlt(r,d,y,x){return this._helper.calculateCenterFromCameraLngLatAlt(r,d,y,x)}setLocationAtPoint(r,d){const y=$r(this.unprojectScreenPoint(d)),x=$r(r),S=a.bp();a.bB(S);const N=a.bp();a.by(N,y,S,-this.center.lng*Math.PI/180),a.bx(N,N,S,this.center.lat*Math.PI/180);const U=x[0]*x[0]+x[2]*x[2],z=N[0]*N[0];if(U<z)return;const X=Math.sqrt(U-z),Y=-X,Ae=a.bC(x[0],x[2],N[0],X),oe=a.bC(x[0],x[2],N[0],Y),_e=a.bp();a.by(_e,x,S,-Ae);const Ne=a.bC(_e[1],_e[2],N[1],N[2]),He=a.bp();a.by(He,x,S,-oe);const Ge=a.bC(He[1],He[2],N[1],N[2]),We=.5*Math.PI,Ye=Ne>=-We&&Ne<=We,it=Ge>=-We&&Ge<=We;let Je,lt;if(Ye&&it){const Dt=this.center.lng*Math.PI/180,Nt=this.center.lat*Math.PI/180;a.bD(Ae,Dt)+a.bD(Ne,Nt)<a.bD(oe,Dt)+a.bD(Ge,Nt)?(Je=Ae,lt=Ne):(Je=oe,lt=Ge)}else if(Ye)Je=Ae,lt=Ne;else{if(!it)return;Je=oe,lt=Ge}const ht=Je/Math.PI*180,nt=lt/Math.PI*180,mt=this.center.lat;this.setCenter(new a.S(ht,a.ah(nt,-90,90))),this.setZoom(this.zoom+Is(mt,this.center.lat))}locationToScreenPoint(r,d){const y=$r(r);if(d){const x=d.getElevationForLngLatZoom(r,this._helper._tileZoom);a.aR(y,y,1+x/a.bu)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(r){const d=a.bv();return a.aw(d,[...r,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],new a.P((.5*d[0]+.5)*this.width,(.5*-d[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,d){if(d){const y=d.pointCoordinate(r);if(y)return y}return a.a1.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,d){var y;return(y=this.screenPointToMercatorCoordinate(r,d))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(r,d){const y=this._cameraPosition,x=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(y,x)}getRayDirectionFromPixel(r){const d=a.bv();d[0]=r.x/this.width*2-1,d[1]=-1*(r.y/this.height*2-1),d[2]=1,d[3]=1,a.aw(d,d,this._globeViewProjMatrixNoCorrectionInverted),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3];const y=a.bp();y[0]=d[0]-this._cameraPosition[0],y[1]=d[1]-this._cameraPosition[1],y[2]=d[2]-this._cameraPosition[2];const x=a.bp();return a.aV(x,y),x}isSurfacePointVisible(r){const d=this._cachedClippingPlane;return d[0]*r[0]+d[1]*r[1]+d[2]*r[2]+d[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const d=a.bv();return a.aw(d,[...r,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3],d[0]>-1&&d[0]<1&&d[1]>-1&&d[1]<1&&d[2]>-1&&d[2]<1}rayPlanetIntersection(r,d){const y=a.aX(r,d),x=a.bp(),S=a.bp();a.aR(S,d,y),a.aU(x,r,S);const N=1-a.aX(x,x);if(N<0)return null;const U=a.aX(r,r)-1,z=-y+(y<0?1:-1)*Math.sqrt(N),X=U/z,Y=z;return{tMin:Math.min(X,Y),tMax:Math.max(X,Y)}}unprojectScreenPoint(r){const d=this._cameraPosition,y=this.getRayDirectionFromPixel(r),x=this.rayPlanetIntersection(d,y);if(x){const Y=a.bp();a.aS(Y,d,[y[0]*x.tMin,y[1]*x.tMin,y[2]*x.tMin]);const Ae=a.bp();return a.aV(Ae,Y),vu(Ae)}const S=this._cachedClippingPlane,N=S[0]*y[0]+S[1]*y[1]+S[2]*y[2],U=-a.b1(S,d)/N,z=a.bp();if(U>0)a.aS(z,d,[y[0]*U,y[1]*U,y[2]*U]);else{const Y=a.bp();a.aS(Y,d,[2*y[0],2*y[1],2*y[2]]);const Ae=a.b1(this._cachedClippingPlane,Y);a.aU(z,Y,[this._cachedClippingPlane[0]*Ae,this._cachedClippingPlane[1]*Ae,this._cachedClippingPlane[2]*Ae])}const X=function(Y){const Ae=a.bp();return Ae[0]=Y[0]*-Y[3],Ae[1]=Y[1]*-Y[3],Ae[2]=Y[2]*-Y[3],{center:Ae,radius:Math.sqrt(1-Y[3]*Y[3])}}(S);return vu(function(Y,Ae,oe){const _e=a.bp();a.aU(_e,oe,Y);const Ne=a.bp();return a.bq(Ne,Y,_e,Ae/a.a$(_e)),Ne}(X.center,X.radius,z))}getMatrixForModel(r,d){const y=a.S.convert(r),x=1/a.bu,S=a.b9();return a.bz(S,S,y.lng/180*Math.PI),a.b7(S,S,-y.lat/180*Math.PI),a.M(S,S,[0,0,1+d/a.bu]),a.b7(S,S,.5*Math.PI),a.N(S,S,[x,x,x]),S}getProjectionDataForCustomLayer(r=!0){const d=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:r});return d.tileMercatorCoords=[0,0,1,1],d}getFastPathSimpleProjectionMatrix(r){}}class to{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,d,y){return this._helper.interpolatePadding(r,d,y)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,d,y=!0){this._helper.resize(r,d,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,d){this._helper.overrideNearFarZ(r,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,d){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=d,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new _s({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,d)=>this.getConstrained(r,d)}),this._globeness=1,this._mercatorTransform=new yl,this._verticalPerspectiveTransform=new _l}clone(){const r=new to;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const d=this._mercatorTransform.getProjectionData(r),y=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:d.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:d.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,d,y){const x=this._mercatorTransform.getPitchedTextCorrection(r,d,y),S=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,d,y);return a.bk(x,S,this._globeness)}projectTileCoordinates(r,d,y,x){return this.currentTransform.projectTileCoordinates(r,d,y,x)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,d){return this.currentTransform.lngLatToCameraDepth(r,d)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,d){return this.currentTransform.getConstrained(r,d)}calculateCenterFromCameraLngLatAlt(r,d,y,x){return this._helper.calculateCenterFromCameraLngLatAlt(r,d,y,x)}setLocationAtPoint(r,d){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,d),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,d),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,d){return this.currentTransform.locationToScreenPoint(r,d)}screenPointToMercatorCoordinate(r,d){return this.currentTransform.screenPointToMercatorCoordinate(r,d)}screenPointToLocation(r,d){return this.currentTransform.screenPointToLocation(r,d)}isPointOnMapSurface(r,d){return this.currentTransform.isPointOnMapSurface(r,d)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,d){return this.currentTransform.getMatrixForModel(r,d)}getProjectionDataForCustomLayer(r=!0){const d=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return d;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return y.fallbackMatrix=d.mainMatrix,y}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class ia{get useGlobeControls(){return!0}handlePanInertia(r,d){const y=Hc(r,d);return Math.abs(y.lng-d.center.lng)>180&&(y.lng=d.center.lng+179.5*Math.sign(y.lng-d.center.lng)),{easingCenter:y,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,d){const y=r.around,x=d.screenPointToLocation(y);r.bearingDelta&&d.setBearing(d.bearing+r.bearingDelta),r.pitchDelta&&d.setPitch(d.pitch+r.pitchDelta),r.rollDelta&&d.setRoll(d.roll+r.rollDelta);const S=d.zoom;r.zoomDelta&&d.setZoom(d.zoom+r.zoomDelta);const N=d.zoom-S;if(N===0)return;const U=a.bA(d.center.lng,x.lng),z=U/(Math.abs(U/180)+1),X=a.bA(d.center.lat,x.lat),Y=d.getRayDirectionFromPixel(y),Ae=d.cameraPosition,oe=-1*a.aX(Ae,Y),_e=a.bp();a.aS(_e,Ae,[Y[0]*oe,Y[1]*oe,Y[2]*oe]);const Ne=a.aZ(_e)-1,He=Math.exp(.5*-Math.max(Ne-.3,0)),Ge=xo(d.worldSize,d.center.lat)/Math.min(d.width,d.height),We=a.bn(Ge,.9,.5,1,.25),Ye=(1-a.af(-N))*Math.min(He,We),it=d.center.lat,Je=d.zoom,lt=new a.S(d.center.lng+z*Ye,a.ah(d.center.lat+X*Ye,-a.ai,a.ai));d.setLocationAtPoint(x,y);const ht=d.center,nt=a.bn(Math.abs(U),45,85,0,1),mt=a.bn(Ge,.75,.35,0,1),Dt=Math.pow(Math.max(nt,mt),.25),Nt=a.bA(ht.lng,lt.lng),Lt=a.bA(ht.lat,lt.lat);d.setCenter(new a.S(ht.lng+Nt*Dt,ht.lat+Lt*Dt).wrap()),d.setZoom(Je+Is(it,d.center.lat))}handleMapControlsPan(r,d,y){if(!r.panDelta)return;const x=d.center.lat,S=d.zoom;d.setCenter(Hc(r.panDelta,d).wrap()),d.setZoom(S+Is(x,d.center.lat))}cameraForBoxAndBearing(r,d,y,x,S){const N=ta(r,d,y,x,S),U=d.left/S.width*2-1,z=(S.width-d.right)/S.width*2-1,X=d.top/S.height*-2+1,Y=(S.height-d.bottom)/S.height*-2+1,Ae=a.bA(y.getWest(),y.getEast())<0,oe=Ae?y.getEast():y.getWest(),_e=Ae?y.getWest():y.getEast(),Ne=Math.max(y.getNorth(),y.getSouth()),He=Math.min(y.getNorth(),y.getSouth()),Ge=oe+.5*a.bA(oe,_e),We=Ne+.5*a.bA(Ne,He),Ye=S.clone();Ye.setCenter(N.center),Ye.setBearing(N.bearing),Ye.setPitch(0),Ye.setRoll(0),Ye.setZoom(N.zoom);const it=Ye.modelViewProjectionMatrix,Je=[$r(y.getNorthWest()),$r(y.getNorthEast()),$r(y.getSouthWest()),$r(y.getSouthEast()),$r(new a.S(_e,We)),$r(new a.S(oe,We)),$r(new a.S(Ge,Ne)),$r(new a.S(Ge,He))],lt=$r(N.center);let ht=Number.POSITIVE_INFINITY;for(const nt of Je)U<0&&(ht=ia.getLesserNonNegativeNonNull(ht,ia.solveVectorScale(nt,lt,it,"x",U))),z>0&&(ht=ia.getLesserNonNegativeNonNull(ht,ia.solveVectorScale(nt,lt,it,"x",z))),X>0&&(ht=ia.getLesserNonNegativeNonNull(ht,ia.solveVectorScale(nt,lt,it,"y",X))),Y<0&&(ht=ia.getLesserNonNegativeNonNull(ht,ia.solveVectorScale(nt,lt,it,"y",Y)));if(Number.isFinite(ht)&&ht!==0)return N.zoom=Ye.zoom+a.ak(ht),N;Kr()}handleJumpToCenterZoom(r,d){const y=r.center.lat,x=r.getConstrained(d.center?a.S.convert(d.center):r.center,r.zoom).center;r.setCenter(x.wrap());const S=d.zoom!==void 0?+d.zoom:r.zoom+Is(y,x.lat);r.zoom!==S&&r.setZoom(S)}handleEaseTo(r,d){const y=r.zoom,x=r.center,S=r.padding,N={roll:r.roll,pitch:r.pitch,bearing:r.bearing},U={roll:d.roll===void 0?r.roll:d.roll,pitch:d.pitch===void 0?r.pitch:d.pitch,bearing:d.bearing===void 0?r.bearing:d.bearing},z=d.zoom!==void 0,X=!r.isPaddingEqual(d.padding);let Y=!1;const Ae=d.center?a.S.convert(d.center):x,oe=r.getConstrained(Ae,y).center;eo(r,oe);const _e=r.clone();_e.setCenter(oe),_e.setZoom(z?+d.zoom:y+Is(x.lat,Ae.lat)),_e.setBearing(d.bearing);const Ne=new a.P(a.ah(r.centerPoint.x+d.offsetAsPoint.x,0,r.width),a.ah(r.centerPoint.y+d.offsetAsPoint.y,0,r.height));_e.setLocationAtPoint(oe,Ne);const He=(d.offset&&d.offsetAsPoint.mag())>0?_e.center:oe,Ge=z?+d.zoom:y+Is(x.lat,He.lat),We=y+Is(x.lat,0),Ye=Ge+Is(He.lat,0),it=a.bA(x.lng,He.lng),Je=a.bA(x.lat,He.lat),lt=a.af(Ye-We);return Y=Ge!==y,{easeFunc:ht=>{if(a.be(N,U)||Wr({startEulerAngles:N,endEulerAngles:U,tr:r,k:ht,useSlerp:N.roll!=U.roll}),X&&r.interpolatePadding(S,d.padding,ht),d.around)a.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(d.around,d.aroundPoint);else{const nt=Ye>We?Math.min(2,lt):Math.max(.5,lt),mt=Math.pow(nt,1-ht),Dt=vA(x,it,Je,ht*mt);r.setCenter(Dt.wrap())}if(Y){const nt=a.C.number(We,Ye,ht)+Is(0,r.center.lat);r.setZoom(nt)}},isZooming:Y,elevationCenter:He}}handleFlyTo(r,d){const y=d.zoom!==void 0,x=r.center,S=r.zoom,N=r.padding,U=!r.isPaddingEqual(d.padding),z=r.getConstrained(a.S.convert(d.center||d.locationAtOffset),S).center,X=y?+d.zoom:r.zoom+Is(r.center.lat,z.lat),Y=r.clone();Y.setCenter(z),Y.setZoom(X),Y.setBearing(d.bearing);const Ae=new a.P(a.ah(r.centerPoint.x+d.offsetAsPoint.x,0,r.width),a.ah(r.centerPoint.y+d.offsetAsPoint.y,0,r.height));Y.setLocationAtPoint(z,Ae);const oe=Y.center;eo(r,oe);const _e=function(Je,lt,ht){const nt=$r(lt),mt=$r(ht),Dt=a.aX(nt,mt),Nt=Math.acos(Dt),Lt=Ko(Je);return Nt/(2*Math.PI)*Lt}(r,x,oe),Ne=S+Is(x.lat,0),He=X+Is(oe.lat,0),Ge=a.af(He-Ne);let We;if(typeof d.minZoom=="number"){const Je=+d.minZoom+Is(oe.lat,0),lt=Math.min(Je,Ne,He)+Is(0,oe.lat),ht=r.getConstrained(oe,lt).zoom+Is(oe.lat,0);We=a.af(ht-Ne)}const Ye=a.bA(x.lng,oe.lng),it=a.bA(x.lat,oe.lat);return{easeFunc:(Je,lt,ht,nt)=>{const mt=vA(x,Ye,it,ht);U&&r.interpolatePadding(N,d.padding,Je);const Dt=Je===1?oe:mt;r.setCenter(Dt.wrap());const Nt=Ne+a.ak(lt);r.setZoom(Je===1?X:Nt+Is(0,Dt.lat))},scaleOfZoom:Ge,targetCenter:oe,scaleOfMinZoom:We,pixelPathLength:_e}}static solveVectorScale(r,d,y,x,S){const N=x==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],U=[y[3],y[7],y[11],y[15]],z=r[0]*N[0]+r[1]*N[1]+r[2]*N[2],X=r[0]*U[0]+r[1]*U[1]+r[2]*U[2],Y=d[0]*N[0]+d[1]*N[1]+d[2]*N[2],Ae=d[0]*U[0]+d[1]*U[1]+d[2]*U[2];return Y+S*X===z+S*Ae||U[3]*(z-Y)+N[3]*(Ae-X)+z*Ae==Y*X?null:(Y+N[3]-S*Ae-S*U[3])/(Y-z-S*Ae+S*X)}static getLesserNonNegativeNonNull(r,d){return d!==null&&d>=0&&d<r?d:r}}class zu{constructor(r){this._globe=r,this._mercatorCameraHelper=new zl,this._verticalPerspectiveCameraHelper=new ia}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,d){return this.currentHelper.handlePanInertia(r,d)}handleMapControlsRollPitchBearingZoom(r,d){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,d)}handleMapControlsPan(r,d,y){this.currentHelper.handleMapControlsPan(r,d,y)}cameraForBoxAndBearing(r,d,y,x,S){return this.currentHelper.cameraForBoxAndBearing(r,d,y,x,S)}handleJumpToCenterZoom(r,d){this.currentHelper.handleJumpToCenterZoom(r,d)}handleEaseTo(r,d){return this.currentHelper.handleEaseTo(r,d)}handleFlyTo(r,d){return this.currentHelper.handleFlyTo(r,d)}}const K=(w,r)=>a.y(w,r&&r.filter(d=>d.identifier!=="source.canvas")),Se=a.bE();class tt extends a.E{constructor(r,d={}){var y,x;super(),this._rtlPluginLoaded=()=>{for(const N in this.sourceCaches){const U=this.sourceCaches[N].getSource().type;U!=="vector"&&U!=="geojson"||this.sourceCaches[N].reload()}},this.map=r,this.dispatcher=new Ke(ze(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(N,U)=>this.getGlyphs(N,U)),this.dispatcher.registerMessageHandler("GI",(N,U)=>this.getImages(N,U)),this.dispatcher.registerMessageHandler("GDA",(N,U)=>this.getDashes(N,U)),this.imageManager=new xe,this.imageManager.setEventedParent(this);const S=((y=r._container)===null||y===void 0?void 0:y.lang)||typeof document<"u"&&((x=document.documentElement)===null||x===void 0?void 0:x.lang)||void 0;this.glyphManager=new ce(r._requestManager,d.localIdeographFontFamily,S),this.lineAtlas=new ke(256,512),this.crossTileSymbolIndex=new wc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),Gi().on($i,this._rtlPluginLoaded),this.on("data",N=>{if(N.dataType!=="source"||N.sourceDataType!=="metadata")return;const U=this.sourceCaches[N.sourceId];if(!U)return;const z=U.getSource();if(z&&z.vectorLayerIds)for(const X in this._layers){const Y=this._layers[X];Y.source===z.id&&this._validateLayer(Y)}})}setGlobalStateProperty(r,d){var y,x,S;this._checkLoaded();const N=d===null?(S=(x=(y=this.stylesheet.state)===null||y===void 0?void 0:y[r])===null||x===void 0?void 0:x.default)!==null&&S!==void 0?S:null:d;if(a.bH(N,this._globalState[r]))return this;this._globalState[r]=N,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const d=[];for(const y in r)!a.bH(this._globalState[y],r[y].default)&&(d.push(y),this._globalState[y]=r[y].default);this._applyGlobalStateChanges(d)}_applyGlobalStateChanges(r){if(r.length===0)return;const d=new Set,y={};for(const x of r){y[x]=this._globalState[x];for(const S in this._layers){const N=this._layers[S],U=N.getLayoutAffectingGlobalStateRefs(),z=N.getPaintAffectingGlobalStateRefs();if(U.has(x)&&d.add(N.source),z.has(x))for(const{name:X,value:Y}of z.get(x))this._updatePaintProperty(N,X,Y)}}this.dispatcher.broadcast("UGS",y);for(const x in this.sourceCaches)d.has(x)&&(this._reloadSource(x),this._changed=!0)}loadURL(r,d={},y){this.fire(new a.l("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const x=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const S=this._loadStyleRequest;a.j(x,this._loadStyleRequest).then(N=>{this._loadStyleRequest=null,this._load(N.data,d,y)}).catch(N=>{this._loadStyleRequest=null,N&&!S.signal.aborted&&this.fire(new a.k(N))})}loadJSON(r,d={},y){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(r,d,y)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Se,{validate:!1})}_load(r,d,y){var x,S;let N=d.transformStyle?d.transformStyle(y,r):r;if(!d.validate||!K(this,a.z(N))){N=Object.assign({},N),this._loaded=!0,this.stylesheet=N;for(const U in N.sources)this.addSource(U,N.sources[U],{validate:!1});N.sprite?this._loadSprite(N.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(N.glyphs),this._createLayers(),this.light=new ue(this.stylesheet.light),this._setProjectionInternal(((x=this.stylesheet.projection)===null||x===void 0?void 0:x.type)||"mercator"),this.sky=new Ue(this.stylesheet.sky),this.map.setTerrain((S=this.stylesheet.terrain)!==null&&S!==void 0?S:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var r,d,y;const x=a.bI(this.stylesheet.layers);this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this.dispatcher.broadcast("SL",x),this._order=x.map(S=>S.id),this._layers={},this._serializedLayers=null;for(const S of x){const N=a.bJ(S,this._globalState);if(N.setEventedParent(this,{layer:{id:S.id}}),this._layers[S.id]=N,a.bK(N)&&this.sourceCaches[N.source]){const U=(y=(d=S.paint)===null||d===void 0?void 0:d["raster-fade-duration"])!==null&&y!==void 0?y:N.paint.get("raster-fade-duration");this.sourceCaches[N.source].setRasterFadeDuration(U)}}}_loadSprite(r,d=!1,y=void 0){let x;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(S,N,U,z){return a._(this,void 0,void 0,function*(){const X=de(S),Y=U>1?"@2x":"",Ae={},oe={};for(const{id:_e,url:Ne}of X){const He=N.transformRequest(ee(Ne,Y,".json"),"SpriteJSON");Ae[_e]=a.j(He,z);const Ge=N.transformRequest(ee(Ne,Y,".png"),"SpriteImage");oe[_e]=ne.getImage(Ge,z)}return yield Promise.all([...Object.values(Ae),...Object.values(oe)]),function(_e,Ne){return a._(this,void 0,void 0,function*(){const He={};for(const Ge in _e){He[Ge]={};const We=P.getImageCanvasContext((yield Ne[Ge]).data),Ye=(yield _e[Ge]).data;for(const it in Ye){const{width:Je,height:lt,x:ht,y:nt,sdf:mt,pixelRatio:Dt,stretchX:Nt,stretchY:Lt,content:Pt,textFitWidth:ui,textFitHeight:Ai}=Ye[it];He[Ge][it]={data:null,pixelRatio:Dt,sdf:mt,stretchX:Nt,stretchY:Lt,content:Pt,textFitWidth:ui,textFitHeight:Ai,spriteData:{width:Je,height:lt,x:ht,y:nt,context:We}}}}return He})}(Ae,oe)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(S=>{if(this._spriteRequest=null,S)for(const N in S){this._spritesImagesIds[N]=[];const U=this._spritesImagesIds[N]?this._spritesImagesIds[N].filter(z=>!(z in S)):[];for(const z of U)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in S[N]){const X=N==="default"?z:`${N}:${z}`;this._spritesImagesIds[N].push(X),X in this.imageManager.images?this.imageManager.updateImage(X,S[N][z],!1):this.imageManager.addImage(X,S[N][z]),d&&(this._changedImages[X]=!0)}}}).catch(S=>{this._spriteRequest=null,x=S,this.fire(new a.k(x))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),y&&y(x)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(r){const d=this.sourceCaches[r.source];if(!d)return;const y=r.sourceLayer;if(!y)return;const x=d.getSource();(x.type==="geojson"||x.vectorLayerIds&&x.vectorLayerIds.indexOf(y)===-1)&&this.fire(new a.k(new Error(`Source layer "${y}" does not exist on source "${x.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,d=!1){const y=this._serializedAllLayers();if(!r||r.length===0)return Object.values(d?a.bL(y):y);const x=[];for(const S of r)if(y[S]){const N=d?a.bL(y[S]):y[S];x.push(N)}return x}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const d=Object.keys(this._layers);for(const y of d){const x=this._layers[y];x.type!=="custom"&&(r[y]=x.serialize())}return r}hasTransitions(){var r,d,y;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((d=this.sky)===null||d===void 0)&&d.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const x in this.sourceCaches)if(this.sourceCaches[x].hasTransition())return!0;for(const x in this._layers)if(this._layers[x].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const d=this._changed;if(d){const x=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(x.length||S.length)&&this._updateWorkerLayers(x,S);for(const N in this._updatedSources){const U=this._updatedSources[N];if(U==="reload")this._reloadSource(N);else{if(U!=="clear")throw new Error(`Invalid action ${U}`);this._clearSource(N)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const N in this._updatedPaintProps)this._layers[N].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const y={};for(const x in this.sourceCaches){const S=this.sourceCaches[x];y[x]=S.used,S.used=!1}for(const x of this._order){const S=this._layers[x];S.recalculate(r,this._availableImages),!S.isHidden(r.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const x in y){const S=this.sourceCaches[x];!!y[x]!=!!S.used&&S.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:x}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,d&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,d={}){var y;this._checkLoaded();const x=this.serialize();if(r=d.transformStyle?d.transformStyle(x,r):r,((y=d.validate)===null||y===void 0||y)&&K(this,a.z(r)))return!1;(r=a.bL(r)).layers=a.bI(r.layers);const S=a.bM(x,r),N=this._getOperationsToPerform(S);if(N.unimplemented.length>0)throw new Error(`Unimplemented: ${N.unimplemented.join(", ")}.`);if(N.operations.length===0)return!1;for(const U of N.operations)U();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const d=[],y=[];for(const x of r)switch(x.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,x.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,x.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,x.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,x.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,x.args));break;case"addSource":d.push(()=>this.addSource.apply(this,x.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,x.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,x.args));break;case"setLight":d.push(()=>this.setLight.apply(this,x.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,x.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,x.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,x.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,x.args));break;case"setSky":d.push(()=>this.setSky.apply(this,x.args));break;case"setProjection":this.setProjection.apply(this,x.args);break;case"setGlobalState":d.push(()=>this.setGlobalState.apply(this,x.args));break;case"setTransition":d.push(()=>{});break;default:y.push(x.command)}return{operations:d,unimplemented:y}}addImage(r,d){if(this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,d),this._afterImageUpdated(r)}updateImage(r,d){this.imageManager.updateImage(r,d)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,d,y={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(a.z.source,`sources.${r}`,d,null,y))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const x=this.sourceCaches[r]=new Mi(r,d,this.dispatcher);x.style=this,x.setEventedParent(this,()=>({isSourceLoaded:x.loaded(),source:x.serialize(),sourceId:r})),x.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===r)return this.fire(new a.k(new Error(`Source "${r}" cannot be removed while layer "${y}" is using it.`)));const d=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],d.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,d){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const y=this.sourceCaches[r].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(d),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,d,y={}){this._checkLoaded();const x=r.id;if(this.getLayer(x))return void this.fire(new a.k(new Error(`Layer "${x}" already exists on this map.`)));let S;if(r.type==="custom"){if(K(this,a.bN(r)))return;S=a.bJ(r,this._globalState)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(x,r.source),r=a.bL(r),r=a.e(r,{source:x})),this._validate(a.z.layer,`layers.${x}`,r,{arrayIndex:-1},y))return;S=a.bJ(r,this._globalState),this._validateLayer(S),S.setEventedParent(this,{layer:{id:x}})}const N=d?this._order.indexOf(d):this._order.length;if(d&&N===-1)this.fire(new a.k(new Error(`Cannot add layer "${x}" before non-existing layer "${d}".`)));else{if(this._order.splice(N,0,x),this._layerOrderChanged=!0,this._layers[x]=S,this._removedLayers[x]&&S.source&&S.type!=="custom"){const U=this._removedLayers[x];delete this._removedLayers[x],U.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(r,d){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new a.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===d)return;const y=this._order.indexOf(r);this._order.splice(y,1);const x=d?this._order.indexOf(d):this._order.length;d&&x===-1?this.fire(new a.k(new Error(`Cannot move layer "${r}" before non-existing layer "${d}".`))):(this._order.splice(x,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const d=this._layers[r];if(!d)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${r}".`)));d.setEventedParent(null);const y=this._order.indexOf(r);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=d,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],d.onRemove&&d.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,d,y){this._checkLoaded();const x=this.getLayer(r);x?x.minzoom===d&&x.maxzoom===y||(d!=null&&(x.minzoom=d),y!=null&&(x.maxzoom=y),this._updateLayer(x)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,d,y={}){this._checkLoaded();const x=this.getLayer(r);if(x){if(!a.bH(x.filter,d))return d==null?(x.setFilter(void 0),void this._updateLayer(x)):void(this._validate(a.z.filter,`layers.${x.id}.filter`,d,null,y)||(x.setFilter(a.bL(d)),this._updateLayer(x)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return a.bL(this.getLayer(r).filter)}setLayoutProperty(r,d,y,x={}){this._checkLoaded();const S=this.getLayer(r);S?a.bH(S.getLayoutProperty(d),y)||(S.setLayoutProperty(d,y,x),this._updateLayer(S)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,d){const y=this.getLayer(r);if(y)return y.getLayoutProperty(d);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,d,y,x={}){this._checkLoaded();const S=this.getLayer(r);S?a.bH(S.getPaintProperty(d),y)||this._updatePaintProperty(S,d,y,x):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,d,y,x={}){r.setPaintProperty(d,y,x)&&this._updateLayer(r),a.bK(r)&&d==="raster-fade-duration"&&this.sourceCaches[r.source].setRasterFadeDuration(y),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,d){return this.getLayer(r).getPaintProperty(d)}setFeatureState(r,d){this._checkLoaded();const y=r.source,x=r.sourceLayer,S=this.sourceCaches[y];if(S===void 0)return void this.fire(new a.k(new Error(`The source '${y}' does not exist in the map's style.`)));const N=S.getSource().type;N==="geojson"&&x?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):N!=="vector"||x?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),S.setFeatureState(x,r.id,d)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,d){this._checkLoaded();const y=r.source,x=this.sourceCaches[y];if(x===void 0)return void this.fire(new a.k(new Error(`The source '${y}' does not exist in the map's style.`)));const S=x.getSource().type,N=S==="vector"?r.sourceLayer:void 0;S!=="vector"||N?d&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):x.removeFeatureState(N,r.id,d):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const d=r.source,y=r.sourceLayer,x=this.sourceCaches[d];if(x!==void 0)return x.getSource().type!=="vector"||y?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),x.getFeatureState(y,r.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=a.bO(this.sourceCaches,S=>S.serialize()),d=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,x=this.stylesheet;return a.bP({version:x.version,name:x.name,metadata:x.metadata,light:x.light,sky:x.sky,center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch,sprite:x.sprite,glyphs:x.glyphs,transition:x.transition,projection:x.projection,sources:r,layers:d,terrain:y},S=>S!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const d=N=>this._layers[N].type==="fill-extrusion",y={},x=[];for(let N=this._order.length-1;N>=0;N--){const U=this._order[N];if(d(U)){y[U]=N;for(const z of r){const X=z[U];if(X)for(const Y of X)x.push(Y)}}}x.sort((N,U)=>U.intersectionZ-N.intersectionZ);const S=[];for(let N=this._order.length-1;N>=0;N--){const U=this._order[N];if(d(U))for(let z=x.length-1;z>=0;z--){const X=x[z].feature;if(y[X.layer.id]<N)break;S.push(X),x.pop()}else for(const z of r){const X=z[U];if(X)for(const Y of X)S.push(Y.feature)}}return S}queryRenderedFeatures(r,d,y){d&&d.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",d.filter,null,d);const x={};if(d&&d.layers){if(!(Array.isArray(d.layers)||d.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const X of d.layers){const Y=this._layers[X];if(!Y)return this.fire(new a.k(new Error(`The layer '${X}' does not exist in the map's style and cannot be queried for features.`))),[];x[Y.source]=!0}}const S=[];d.availableImages=this._availableImages;const N=this._serializedAllLayers(),U=d.layers instanceof Set?d.layers:Array.isArray(d.layers)?new Set(d.layers):null,z=Object.assign(Object.assign({},d),{layers:U,globalState:this._globalState});for(const X in this.sourceCaches)d.layers&&!x[X]||S.push(Et(this.sourceCaches[X],this._layers,N,r,z,y,this.map.terrain?(Y,Ae,oe)=>this.map.terrain.getElevation(Y,Ae,oe):void 0));return this.placement&&S.push(function(X,Y,Ae,oe,_e,Ne,He){const Ge={},We=Ne.queryRenderedSymbols(oe),Ye=[];for(const it of Object.keys(We).map(Number))Ye.push(He[it]);Ye.sort(hi);for(const it of Ye){const Je=it.featureIndex.lookupSymbolFeatures(We[it.bucketInstanceId],Y,it.bucketIndex,it.sourceLayerIndex,{filterSpec:_e.filter,globalState:_e.globalState},_e.layers,_e.availableImages,X);for(const lt in Je){const ht=Ge[lt]=Ge[lt]||[],nt=Je[lt];nt.sort((mt,Dt)=>{const Nt=it.featureSortOrder;if(Nt){const Lt=Nt.indexOf(mt.featureIndex);return Nt.indexOf(Dt.featureIndex)-Lt}return Dt.featureIndex-mt.featureIndex});for(const mt of nt)ht.push(mt)}}return function(it,Je,lt){for(const ht in it)for(const nt of it[ht])Vt(nt,lt[Je[ht].source]);return it}(Ge,X,Ae)}(this._layers,N,this.sourceCaches,r,z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(r,d){d?.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",d.filter,null,d);const y=this.sourceCaches[r];return y?function(x,S){const N=x.getRenderableIds().map(X=>x.getTileByID(X)),U=[],z={};for(let X=0;X<N.length;X++){const Y=N[X],Ae=Y.tileID.canonical.key;z[Ae]||(z[Ae]=!0,Y.querySourceFeatures(U,S))}return U}(y,d?Object.assign(Object.assign({},d),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(r,d={}){this._checkLoaded();const y=this.light.getLight();let x=!1;for(const N in r)if(!a.bH(r[N],y[N])){x=!0;break}if(!x)return;const S={now:P.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,d),this.light.updateTransitions(S)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,d={}){this._checkLoaded();const y=this.getSky();let x=!1;if(!r&&!y)return;if(r&&!y)x=!0;else if(!r&&y)x=!0;else for(const N in r)if(!a.bH(r[N],y[N])){x=!0;break}if(!x)return;const S={now:P.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,d),this.sky.updateTransitions(S)}_setProjectionInternal(r){const d=function(y){if(Array.isArray(y)){const x=new Ru({type:y});return{projection:x,transform:new to,cameraHelper:new zu(x)}}switch(y){case"mercator":return{projection:new fs,transform:new yl,cameraHelper:new zl};case"globe":{const x=new Ru({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:x,transform:new to,cameraHelper:new zu(x)}}case"vertical-perspective":return{projection:new ha,transform:new _l,cameraHelper:new ia};default:return a.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new fs,transform:new yl,cameraHelper:new zl}}}(r);this.projection=d.projection,this.map.migrateProjection(d.transform,d.cameraHelper);for(const y in this.sourceCaches)this.sourceCaches[y].reload()}_validate(r,d,y,x,S={}){return(!S||S.validate!==!1)&&K(this,r.call(a.z,a.e({key:d,style:this.serialize(),value:y,styleSpec:a.v},x)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Gi().off($i,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const y=this.sourceCaches[d];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const d in this.sourceCaches)this.sourceCaches[d].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,d,y,x,S=!1){let N=!1,U=!1;const z={};for(const X of this._order){const Y=this._layers[X];if(Y.type!=="symbol")continue;if(!z[Y.source]){const oe=this.sourceCaches[Y.source];z[Y.source]=oe.getRenderableIds(!0).map(_e=>oe.getTileByID(_e)).sort((_e,Ne)=>Ne.tileID.overscaledZ-_e.tileID.overscaledZ||(_e.tileID.isLessThan(Ne.tileID)?-1:1))}const Ae=this.crossTileSymbolIndex.addLayer(Y,z[Y.source],r.center.lng);N=N||Ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(P.now(),r.zoom))&&(this.pauseablePlacement=new ku(r,this.map.terrain,this._order,S,d,y,x,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(P.now()),U=!0),N&&this.pauseablePlacement.placement.setStale()),U||N)for(const X of this._order){const Y=this._layers[X];Y.type==="symbol"&&this.placement.updateLayerOpacities(Y,z[Y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(P.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,d){return a._(this,void 0,void 0,function*(){const y=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const x=this.sourceCaches[d.source];return x&&x.setDependencies(d.tileID.key,d.type,d.icons),y})}getGlyphs(r,d){return a._(this,void 0,void 0,function*(){const y=yield this.glyphManager.getGlyphs(d.stacks),x=this.sourceCaches[d.source];return x&&x.setDependencies(d.tileID.key,d.type,[""]),y})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,d={}){this._checkLoaded(),r&&this._validate(a.z.glyphs,"glyphs",r,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}getDashes(r,d){return a._(this,void 0,void 0,function*(){const y={};for(const[x,S]of Object.entries(d.dashes))y[x]=this.lineAtlas.getDash(S.dasharray,S.round);return y})}addSprite(r,d,y={},x){this._checkLoaded();const S=[{id:r,url:d}],N=[...de(this.stylesheet.sprite),...S];this._validate(a.z.sprite,"sprite",N,null,y)||(this.stylesheet.sprite=N,this._loadSprite(S,!0,x))}removeSprite(r){this._checkLoaded();const d=de(this.stylesheet.sprite);if(d.find(y=>y.id===r)){if(this._spritesImagesIds[r])for(const y of this._spritesImagesIds[r])this.imageManager.removeImage(y),this._changedImages[y]=!0;d.splice(d.findIndex(y=>y.id===r),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return de(this.stylesheet.sprite)}setSprite(r,d={},y){this._checkLoaded(),r&&this._validate(a.z.sprite,"sprite",r,null,d)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,y):(this._unloadSprite(),y&&y(null)))}}var ft=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ft{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,d,y,x,S,N,U,z,X){this.context=r;let Y=this.boundPaintVertexBuffers.length!==x.length;for(let Ae=0;!Y&&Ae<x.length;Ae++)this.boundPaintVertexBuffers[Ae]!==x[Ae]&&(Y=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==y||Y||this.boundIndexBuffer!==S||this.boundVertexOffset!==N||this.boundDynamicVertexBuffer!==U||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==X?this.freshBind(d,y,x,S,N,U,z,X):(r.bindVertexArray.set(this.vao),U&&U.bind(),S&&S.dynamicDraw&&S.bind(),z&&z.bind(),X&&X.bind())}freshBind(r,d,y,x,S,N,U,z){const X=r.numAttributes,Y=this.context,Ae=Y.gl;this.vao&&this.destroy(),this.vao=Y.createVertexArray(),Y.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=x,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=N,this.boundDynamicVertexBuffer2=U,this.boundDynamicVertexBuffer3=z,d.enableAttributes(Ae,r);for(const oe of y)oe.enableAttributes(Ae,r);N&&N.enableAttributes(Ae,r),U&&U.enableAttributes(Ae,r),z&&z.enableAttributes(Ae,r),d.bind(),d.setVertexAttribPointers(Ae,r,S);for(const oe of y)oe.bind(),oe.setVertexAttribPointers(Ae,r,S);N&&(N.bind(),N.setVertexAttribPointers(Ae,r,S)),x&&x.bind(),U&&(U.bind(),U.setVertexAttribPointers(Ae,r,S)),z&&(z.bind(),z.setVertexAttribPointers(Ae,r,S)),Y.currentNumAttributes=X}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Gt=(w,r,d,y,x)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:r,u_fog_color:d?d.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:x?0:d?d.calculateFogBlendOpacity(y):0,u_horizon_color:d?d.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1,u_is_globe_mode:x?1:0}),fi={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ii(w){const r=[];for(let d=0;d<w.length;d++){if(w[d]===null)continue;const y=w[d].split(" ");r.push(y.pop())}return r}class Ki{constructor(r,d,y,x,S,N,U,z,X=[]){const Y=r.gl;this.program=Y.createProgram();const Ae=Ii(d.staticAttributes),oe=y?y.getBinderAttributes():[],_e=Ae.concat(oe),Ne=ea.prelude.staticUniforms?Ii(ea.prelude.staticUniforms):[],He=U.staticUniforms?Ii(U.staticUniforms):[],Ge=d.staticUniforms?Ii(d.staticUniforms):[],We=y?y.getBinderUniforms():[],Ye=Ne.concat(He).concat(Ge).concat(We),it=[];for(const Nt of Ye)it.indexOf(Nt)<0&&it.push(Nt);const Je=y?y.defines():[];Ur(Y)&&Je.unshift("#version 300 es"),S&&Je.push("#define OVERDRAW_INSPECTOR;"),N&&Je.push("#define TERRAIN3D;"),z&&Je.push(z),X&&Je.push(...X);let lt=Je.concat(ea.prelude.fragmentSource,U.fragmentSource,d.fragmentSource).join(`
`),ht=Je.concat(ea.prelude.vertexSource,U.vertexSource,d.vertexSource).join(`
`);Ur(Y)||(lt=function(Nt){return Nt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(lt),ht=function(Nt){return Nt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(ht));const nt=Y.createShader(Y.FRAGMENT_SHADER);if(Y.isContextLost())return void(this.failedToCreate=!0);if(Y.shaderSource(nt,lt),Y.compileShader(nt),!Y.getShaderParameter(nt,Y.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${Y.getShaderInfoLog(nt)}`);Y.attachShader(this.program,nt);const mt=Y.createShader(Y.VERTEX_SHADER);if(Y.isContextLost())return void(this.failedToCreate=!0);if(Y.shaderSource(mt,ht),Y.compileShader(mt),!Y.getShaderParameter(mt,Y.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${Y.getShaderInfoLog(mt)}`);Y.attachShader(this.program,mt),this.attributes={};const Dt={};this.numAttributes=_e.length;for(let Nt=0;Nt<this.numAttributes;Nt++)_e[Nt]&&(Y.bindAttribLocation(this.program,Nt,_e[Nt]),this.attributes[_e[Nt]]=Nt);if(Y.linkProgram(this.program),!Y.getProgramParameter(this.program,Y.LINK_STATUS))throw new Error(`Program failed to link: ${Y.getProgramInfoLog(this.program)}`);Y.deleteShader(mt),Y.deleteShader(nt);for(let Nt=0;Nt<it.length;Nt++){const Lt=it[Nt];if(Lt&&!Dt[Lt]){const Pt=Y.getUniformLocation(this.program,Lt);Pt&&(Dt[Lt]=Pt)}}this.fixedUniforms=x(r,Dt),this.terrainUniforms=((Nt,Lt)=>({u_depth:new a.bQ(Nt,Lt.u_depth),u_terrain:new a.bQ(Nt,Lt.u_terrain),u_terrain_dim:new a.bg(Nt,Lt.u_terrain_dim),u_terrain_matrix:new a.bS(Nt,Lt.u_terrain_matrix),u_terrain_unpack:new a.bT(Nt,Lt.u_terrain_unpack),u_terrain_exaggeration:new a.bg(Nt,Lt.u_terrain_exaggeration)}))(r,Dt),this.projectionUniforms=((Nt,Lt)=>({u_projection_matrix:new a.bS(Nt,Lt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bT(Nt,Lt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bT(Nt,Lt.u_projection_clipping_plane),u_projection_transition:new a.bg(Nt,Lt.u_projection_transition),u_projection_fallback_matrix:new a.bS(Nt,Lt.u_projection_fallback_matrix)}))(r,Dt),this.binderUniforms=y?y.getUniforms(r,Dt):[]}draw(r,d,y,x,S,N,U,z,X,Y,Ae,oe,_e,Ne,He,Ge,We,Ye,it){const Je=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(y),r.setStencilMode(x),r.setColorMode(S),r.setCullFace(N),z){r.activeTexture.set(Je.TEXTURE2),Je.bindTexture(Je.TEXTURE_2D,z.depthTexture),r.activeTexture.set(Je.TEXTURE3),Je.bindTexture(Je.TEXTURE_2D,z.texture);for(const ht in this.terrainUniforms)this.terrainUniforms[ht].set(z[ht])}if(X)for(const ht in X)this.projectionUniforms[fi[ht]].set(X[ht]);if(U)for(const ht in this.fixedUniforms)this.fixedUniforms[ht].set(U[ht]);Ge&&Ge.setUniforms(r,this.binderUniforms,Ne,{zoom:He});let lt=0;switch(d){case Je.LINES:lt=2;break;case Je.TRIANGLES:lt=3;break;case Je.LINE_STRIP:lt=1}for(const ht of _e.get()){const nt=ht.vaos||(ht.vaos={});(nt[Y]||(nt[Y]=new Ft)).bind(r,this,Ae,Ge?Ge.getPaintVertexBuffers():[],oe,ht.vertexOffset,We,Ye,it),Je.drawElements(d,ht.primitiveLength*lt,Je.UNSIGNED_SHORT,ht.primitiveOffset*lt*2)}}}function ln(w,r,d){const y=1/a.aC(d,1,r.transform.tileZoom),x=Math.pow(2,d.tileID.overscaledZ),S=d.tileSize*Math.pow(2,r.transform.tileZoom)/x,N=S*(d.tileID.canonical.x+d.tileID.wrap*x),U=S*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[y,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[N>>16,U>>16],u_pixel_coord_lower:[65535&N,65535&U]}}const bn=(w,r,d,y)=>{const x=w.style.light,S=x.properties.get("position"),N=[S.x,S.y,S.z],U=a.bW();x.properties.get("anchor")==="viewport"&&a.bX(U,w.transform.bearingInRadians),a.bY(N,N,U);const z=w.transform.transformLightDirection(N),X=x.properties.get("color");return{u_lightpos:N,u_lightpos_globe:z,u_lightintensity:x.properties.get("intensity"),u_lightcolor:[X.r,X.g,X.b],u_vertical_gradient:+r,u_opacity:d,u_fill_translate:y}},On=(w,r,d,y,x,S,N)=>a.e(bn(w,r,d,y),ln(S,w,N),{u_height_factor:-Math.pow(2,x.overscaledZ)/N.tileSize/8}),br=(w,r,d,y)=>a.e(ln(r,w,d),{u_fill_translate:y}),Ir=(w,r)=>({u_world:w,u_fill_translate:r}),ws=(w,r,d,y,x)=>a.e(br(w,r,d,x),{u_world:y}),Zr=(w,r,d,y,x)=>{const S=w.transform;let N,U,z=0;if(d.paint.get("circle-pitch-alignment")==="map"){const X=a.aC(r,1,S.zoom);N=!0,U=[X,X],z=X/(a.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*x}else N=!1,U=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+N,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:U,u_globe_extrude_scale:z,u_translate:y}},na=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),Ba=w=>({u_viewport_size:[w.width,w.height]}),io=(w,r=1)=>({u_color:w,u_overlay:0,u_overlay_scale:r}),wo=(w,r,d,y)=>{const x=a.aC(w,1,r)/(a.$*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:a.aC(w,1,r),u_intensity:d,u_globe_extrude_scale:x}},Hu=(w,r,d,y)=>{const x=a.L();a.bZ(x,0,w.width,w.height,0,0,1);const S=w.context.gl;return{u_matrix:x,u_world:[S.drawingBufferWidth,S.drawingBufferHeight],u_image:d,u_color_ramp:y,u_opacity:r.paint.get("heatmap-opacity")}},Gl=(w,r,d)=>{const y=d.paint.get("hillshade-accent-color");let x;switch(d.paint.get("hillshade-method")){case"basic":x=4;break;case"combined":x=1;break;case"igor":x=2;break;case"multidirectional":x=3;break;default:x=0}const S=d.getIlluminationProperties();for(let N=0;N<S.directionRadians.length;N++)d.paint.get("hillshade-illumination-anchor")==="viewport"&&(S.directionRadians[N]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:_u(0,r.tileID),u_exaggeration:d.paint.get("hillshade-exaggeration"),u_altitudes:S.altitudeRadians,u_azimuths:S.directionRadians,u_accent:y,u_method:x,u_highlights:S.highlightColor,u_shadows:S.shadowColor}},xl=(w,r)=>{const d=r.stride,y=a.L();return a.bZ(y,0,a.$,-a.$,0,0,1),a.M(y,y,[0,-a.$,0]),{u_matrix:y,u_image:1,u_dimension:[d,d],u_zoom:w.overscaledZ,u_unpack:r.getUnpackVector()}};function _u(w,r){const d=Math.pow(2,r.canonical.z),y=r.canonical.y;return[new a.a1(0,y/d).toLngLat().lat,new a.a1(0,(y+1)/d).toLngLat().lat]}const Cc=(w,r,d=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:d,u_opacity:w.paint.get("color-relief-opacity")}),Kl=(w,r,d,y)=>{const x=w.transform;return{u_translation:xu(w,r,d),u_ratio:y/a.aC(r,1,x.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},qc=(w,r,d,y,x)=>a.e(Kl(w,r,d,y),{u_image:0,u_image_height:x}),Dr=(w,r,d,y,x)=>{const S=w.transform,N=Bo(r,S);return{u_translation:xu(w,r,d),u_texsize:r.imageAtlasTexture.size,u_ratio:y/a.aC(r,1,S.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[N,x.fromScale,x.toScale],u_fade:x.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Sc=(w,r,d,y,x)=>{const S=Bo(r,w.transform);return a.e(Kl(w,r,d,y),{u_tileratio:S,u_crossfade_from:x.fromScale,u_crossfade_to:x.toScale,u_image:0,u_mix:x.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},Gc=(w,r,d,y,x,S)=>{const N=Bo(r,w.transform);return a.e(Kl(w,r,d,y),{u_image:0,u_image_height:S,u_tileratio:N,u_crossfade_from:x.fromScale,u_crossfade_to:x.toScale,u_image_dash:1,u_mix:x.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function Bo(w,r){return 1/a.aC(w,1,r.tileZoom)}function xu(w,r,d){return a.aD(w.transform,r,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const fa=(w,r,d,y,x)=>{return{u_tl_parent:w,u_scale_parent:r,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(N=y.paint.get("raster-saturation"),N>0?1-1/(1.001-N):-N),u_contrast_factor:(S=y.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:Fh(y.paint.get("raster-hue-rotate")),u_coords_top:[x[0].x,x[0].y,x[1].x,x[1].y],u_coords_bottom:[x[3].x,x[3].y,x[2].x,x[2].y]};var S,N};function Fh(w){w*=Math.PI/180;const r=Math.sin(w),d=Math.cos(w);return[(2*d+1)/3,(-Math.sqrt(3)*r-d+1)/3,(Math.sqrt(3)*r-d+1)/3]}const Vu=(w,r,d,y,x,S,N,U,z,X,Y,Ae,oe)=>{const _e=N.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:_e.cameraToCenterDistance,u_pitch:_e.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:_e.width/_e.height,u_fade_change:N.options.fadeDuration?N.symbolFadeChange:1,u_label_plane_matrix:U,u_coord_matrix:z,u_is_text:+Y,u_pitch_with_map:+y,u_is_along_line:x,u_is_variable_anchor:S,u_texsize:Ae,u_texture:0,u_translation:X,u_pitched_scale:oe}},qu=(w,r,d,y,x,S,N,U,z,X,Y,Ae,oe,_e)=>{const Ne=N.transform;return a.e(Vu(w,r,d,y,x,S,N,U,z,X,Y,Ae,_e),{u_gamma_scale:y?Math.cos(Ne.pitch*Math.PI/180)*Ne.cameraToCenterDistance:1,u_device_pixel_ratio:N.pixelRatio,u_is_halo:1})},Co=(w,r,d,y,x,S,N,U,z,X,Y,Ae,oe)=>a.e(qu(w,r,d,y,x,S,N,U,z,X,!0,Y,0,oe),{u_texsize_icon:Ae,u_texture_icon:1}),Ks=(w,r)=>({u_opacity:w,u_color:r}),Wl=(w,r,d,y,x)=>a.e(function(S,N,U,z){const X=U.imageManager.getPattern(S.from.toString()),Y=U.imageManager.getPattern(S.to.toString()),{width:Ae,height:oe}=U.imageManager.getPixelSize(),_e=Math.pow(2,z.tileID.overscaledZ),Ne=z.tileSize*Math.pow(2,U.transform.tileZoom)/_e,He=Ne*(z.tileID.canonical.x+z.tileID.wrap*_e),Ge=Ne*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:X.tl,u_pattern_br_a:X.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[Ae,oe],u_mix:N.t,u_pattern_size_a:X.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:N.fromScale,u_scale_b:N.toScale,u_tile_units_to_pixels:1/a.aC(z,1,U.transform.tileZoom),u_pixel_coord_upper:[He>>16,Ge>>16],u_pixel_coord_lower:[65535&He,65535&Ge]}}(d,x,r,y),{u_opacity:w}),bu=(w,r)=>{},Wo={fillExtrusion:(w,r)=>({u_lightpos:new a.bU(w,r.u_lightpos),u_lightpos_globe:new a.bU(w,r.u_lightpos_globe),u_lightintensity:new a.bg(w,r.u_lightintensity),u_lightcolor:new a.bU(w,r.u_lightcolor),u_vertical_gradient:new a.bg(w,r.u_vertical_gradient),u_opacity:new a.bg(w,r.u_opacity),u_fill_translate:new a.bV(w,r.u_fill_translate)}),fillExtrusionPattern:(w,r)=>({u_lightpos:new a.bU(w,r.u_lightpos),u_lightpos_globe:new a.bU(w,r.u_lightpos_globe),u_lightintensity:new a.bg(w,r.u_lightintensity),u_lightcolor:new a.bU(w,r.u_lightcolor),u_vertical_gradient:new a.bg(w,r.u_vertical_gradient),u_height_factor:new a.bg(w,r.u_height_factor),u_opacity:new a.bg(w,r.u_opacity),u_fill_translate:new a.bV(w,r.u_fill_translate),u_image:new a.bQ(w,r.u_image),u_texsize:new a.bV(w,r.u_texsize),u_pixel_coord_upper:new a.bV(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(w,r.u_pixel_coord_lower),u_scale:new a.bU(w,r.u_scale),u_fade:new a.bg(w,r.u_fade)}),fill:(w,r)=>({u_fill_translate:new a.bV(w,r.u_fill_translate)}),fillPattern:(w,r)=>({u_image:new a.bQ(w,r.u_image),u_texsize:new a.bV(w,r.u_texsize),u_pixel_coord_upper:new a.bV(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(w,r.u_pixel_coord_lower),u_scale:new a.bU(w,r.u_scale),u_fade:new a.bg(w,r.u_fade),u_fill_translate:new a.bV(w,r.u_fill_translate)}),fillOutline:(w,r)=>({u_world:new a.bV(w,r.u_world),u_fill_translate:new a.bV(w,r.u_fill_translate)}),fillOutlinePattern:(w,r)=>({u_world:new a.bV(w,r.u_world),u_image:new a.bQ(w,r.u_image),u_texsize:new a.bV(w,r.u_texsize),u_pixel_coord_upper:new a.bV(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(w,r.u_pixel_coord_lower),u_scale:new a.bU(w,r.u_scale),u_fade:new a.bg(w,r.u_fade),u_fill_translate:new a.bV(w,r.u_fill_translate)}),circle:(w,r)=>({u_camera_to_center_distance:new a.bg(w,r.u_camera_to_center_distance),u_scale_with_map:new a.bQ(w,r.u_scale_with_map),u_pitch_with_map:new a.bQ(w,r.u_pitch_with_map),u_extrude_scale:new a.bV(w,r.u_extrude_scale),u_device_pixel_ratio:new a.bg(w,r.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(w,r.u_globe_extrude_scale),u_translate:new a.bV(w,r.u_translate)}),collisionBox:(w,r)=>({u_pixel_extrude_scale:new a.bV(w,r.u_pixel_extrude_scale)}),collisionCircle:(w,r)=>({u_viewport_size:new a.bV(w,r.u_viewport_size)}),debug:(w,r)=>({u_color:new a.bR(w,r.u_color),u_overlay:new a.bQ(w,r.u_overlay),u_overlay_scale:new a.bg(w,r.u_overlay_scale)}),depth:bu,clippingMask:bu,heatmap:(w,r)=>({u_extrude_scale:new a.bg(w,r.u_extrude_scale),u_intensity:new a.bg(w,r.u_intensity),u_globe_extrude_scale:new a.bg(w,r.u_globe_extrude_scale)}),heatmapTexture:(w,r)=>({u_matrix:new a.bS(w,r.u_matrix),u_world:new a.bV(w,r.u_world),u_image:new a.bQ(w,r.u_image),u_color_ramp:new a.bQ(w,r.u_color_ramp),u_opacity:new a.bg(w,r.u_opacity)}),hillshade:(w,r)=>({u_image:new a.bQ(w,r.u_image),u_latrange:new a.bV(w,r.u_latrange),u_exaggeration:new a.bg(w,r.u_exaggeration),u_altitudes:new a.b$(w,r.u_altitudes),u_azimuths:new a.b$(w,r.u_azimuths),u_accent:new a.bR(w,r.u_accent),u_method:new a.bQ(w,r.u_method),u_shadows:new a.b_(w,r.u_shadows),u_highlights:new a.b_(w,r.u_highlights)}),hillshadePrepare:(w,r)=>({u_matrix:new a.bS(w,r.u_matrix),u_image:new a.bQ(w,r.u_image),u_dimension:new a.bV(w,r.u_dimension),u_zoom:new a.bg(w,r.u_zoom),u_unpack:new a.bT(w,r.u_unpack)}),colorRelief:(w,r)=>({u_image:new a.bQ(w,r.u_image),u_unpack:new a.bT(w,r.u_unpack),u_dimension:new a.bV(w,r.u_dimension),u_elevation_stops:new a.bQ(w,r.u_elevation_stops),u_color_stops:new a.bQ(w,r.u_color_stops),u_color_ramp_size:new a.bQ(w,r.u_color_ramp_size),u_opacity:new a.bg(w,r.u_opacity)}),line:(w,r)=>({u_translation:new a.bV(w,r.u_translation),u_ratio:new a.bg(w,r.u_ratio),u_device_pixel_ratio:new a.bg(w,r.u_device_pixel_ratio),u_units_to_pixels:new a.bV(w,r.u_units_to_pixels)}),lineGradient:(w,r)=>({u_translation:new a.bV(w,r.u_translation),u_ratio:new a.bg(w,r.u_ratio),u_device_pixel_ratio:new a.bg(w,r.u_device_pixel_ratio),u_units_to_pixels:new a.bV(w,r.u_units_to_pixels),u_image:new a.bQ(w,r.u_image),u_image_height:new a.bg(w,r.u_image_height)}),linePattern:(w,r)=>({u_translation:new a.bV(w,r.u_translation),u_texsize:new a.bV(w,r.u_texsize),u_ratio:new a.bg(w,r.u_ratio),u_device_pixel_ratio:new a.bg(w,r.u_device_pixel_ratio),u_image:new a.bQ(w,r.u_image),u_units_to_pixels:new a.bV(w,r.u_units_to_pixels),u_scale:new a.bU(w,r.u_scale),u_fade:new a.bg(w,r.u_fade)}),lineSDF:(w,r)=>({u_translation:new a.bV(w,r.u_translation),u_ratio:new a.bg(w,r.u_ratio),u_device_pixel_ratio:new a.bg(w,r.u_device_pixel_ratio),u_units_to_pixels:new a.bV(w,r.u_units_to_pixels),u_image:new a.bQ(w,r.u_image),u_mix:new a.bg(w,r.u_mix),u_tileratio:new a.bg(w,r.u_tileratio),u_crossfade_from:new a.bg(w,r.u_crossfade_from),u_crossfade_to:new a.bg(w,r.u_crossfade_to),u_lineatlas_width:new a.bg(w,r.u_lineatlas_width),u_lineatlas_height:new a.bg(w,r.u_lineatlas_height)}),lineGradientSDF:(w,r)=>({u_translation:new a.bV(w,r.u_translation),u_ratio:new a.bg(w,r.u_ratio),u_device_pixel_ratio:new a.bg(w,r.u_device_pixel_ratio),u_units_to_pixels:new a.bV(w,r.u_units_to_pixels),u_image:new a.bQ(w,r.u_image),u_image_height:new a.bg(w,r.u_image_height),u_tileratio:new a.bg(w,r.u_tileratio),u_crossfade_from:new a.bg(w,r.u_crossfade_from),u_crossfade_to:new a.bg(w,r.u_crossfade_to),u_image_dash:new a.bQ(w,r.u_image_dash),u_mix:new a.bg(w,r.u_mix),u_lineatlas_width:new a.bg(w,r.u_lineatlas_width),u_lineatlas_height:new a.bg(w,r.u_lineatlas_height)}),raster:(w,r)=>({u_tl_parent:new a.bV(w,r.u_tl_parent),u_scale_parent:new a.bg(w,r.u_scale_parent),u_buffer_scale:new a.bg(w,r.u_buffer_scale),u_fade_t:new a.bg(w,r.u_fade_t),u_opacity:new a.bg(w,r.u_opacity),u_image0:new a.bQ(w,r.u_image0),u_image1:new a.bQ(w,r.u_image1),u_brightness_low:new a.bg(w,r.u_brightness_low),u_brightness_high:new a.bg(w,r.u_brightness_high),u_saturation_factor:new a.bg(w,r.u_saturation_factor),u_contrast_factor:new a.bg(w,r.u_contrast_factor),u_spin_weights:new a.bU(w,r.u_spin_weights),u_coords_top:new a.bT(w,r.u_coords_top),u_coords_bottom:new a.bT(w,r.u_coords_bottom)}),symbolIcon:(w,r)=>({u_is_size_zoom_constant:new a.bQ(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(w,r.u_is_size_feature_constant),u_size_t:new a.bg(w,r.u_size_t),u_size:new a.bg(w,r.u_size),u_camera_to_center_distance:new a.bg(w,r.u_camera_to_center_distance),u_pitch:new a.bg(w,r.u_pitch),u_rotate_symbol:new a.bQ(w,r.u_rotate_symbol),u_aspect_ratio:new a.bg(w,r.u_aspect_ratio),u_fade_change:new a.bg(w,r.u_fade_change),u_label_plane_matrix:new a.bS(w,r.u_label_plane_matrix),u_coord_matrix:new a.bS(w,r.u_coord_matrix),u_is_text:new a.bQ(w,r.u_is_text),u_pitch_with_map:new a.bQ(w,r.u_pitch_with_map),u_is_along_line:new a.bQ(w,r.u_is_along_line),u_is_variable_anchor:new a.bQ(w,r.u_is_variable_anchor),u_texsize:new a.bV(w,r.u_texsize),u_texture:new a.bQ(w,r.u_texture),u_translation:new a.bV(w,r.u_translation),u_pitched_scale:new a.bg(w,r.u_pitched_scale)}),symbolSDF:(w,r)=>({u_is_size_zoom_constant:new a.bQ(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(w,r.u_is_size_feature_constant),u_size_t:new a.bg(w,r.u_size_t),u_size:new a.bg(w,r.u_size),u_camera_to_center_distance:new a.bg(w,r.u_camera_to_center_distance),u_pitch:new a.bg(w,r.u_pitch),u_rotate_symbol:new a.bQ(w,r.u_rotate_symbol),u_aspect_ratio:new a.bg(w,r.u_aspect_ratio),u_fade_change:new a.bg(w,r.u_fade_change),u_label_plane_matrix:new a.bS(w,r.u_label_plane_matrix),u_coord_matrix:new a.bS(w,r.u_coord_matrix),u_is_text:new a.bQ(w,r.u_is_text),u_pitch_with_map:new a.bQ(w,r.u_pitch_with_map),u_is_along_line:new a.bQ(w,r.u_is_along_line),u_is_variable_anchor:new a.bQ(w,r.u_is_variable_anchor),u_texsize:new a.bV(w,r.u_texsize),u_texture:new a.bQ(w,r.u_texture),u_gamma_scale:new a.bg(w,r.u_gamma_scale),u_device_pixel_ratio:new a.bg(w,r.u_device_pixel_ratio),u_is_halo:new a.bQ(w,r.u_is_halo),u_translation:new a.bV(w,r.u_translation),u_pitched_scale:new a.bg(w,r.u_pitched_scale)}),symbolTextAndIcon:(w,r)=>({u_is_size_zoom_constant:new a.bQ(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(w,r.u_is_size_feature_constant),u_size_t:new a.bg(w,r.u_size_t),u_size:new a.bg(w,r.u_size),u_camera_to_center_distance:new a.bg(w,r.u_camera_to_center_distance),u_pitch:new a.bg(w,r.u_pitch),u_rotate_symbol:new a.bQ(w,r.u_rotate_symbol),u_aspect_ratio:new a.bg(w,r.u_aspect_ratio),u_fade_change:new a.bg(w,r.u_fade_change),u_label_plane_matrix:new a.bS(w,r.u_label_plane_matrix),u_coord_matrix:new a.bS(w,r.u_coord_matrix),u_is_text:new a.bQ(w,r.u_is_text),u_pitch_with_map:new a.bQ(w,r.u_pitch_with_map),u_is_along_line:new a.bQ(w,r.u_is_along_line),u_is_variable_anchor:new a.bQ(w,r.u_is_variable_anchor),u_texsize:new a.bV(w,r.u_texsize),u_texsize_icon:new a.bV(w,r.u_texsize_icon),u_texture:new a.bQ(w,r.u_texture),u_texture_icon:new a.bQ(w,r.u_texture_icon),u_gamma_scale:new a.bg(w,r.u_gamma_scale),u_device_pixel_ratio:new a.bg(w,r.u_device_pixel_ratio),u_is_halo:new a.bQ(w,r.u_is_halo),u_translation:new a.bV(w,r.u_translation),u_pitched_scale:new a.bg(w,r.u_pitched_scale)}),background:(w,r)=>({u_opacity:new a.bg(w,r.u_opacity),u_color:new a.bR(w,r.u_color)}),backgroundPattern:(w,r)=>({u_opacity:new a.bg(w,r.u_opacity),u_image:new a.bQ(w,r.u_image),u_pattern_tl_a:new a.bV(w,r.u_pattern_tl_a),u_pattern_br_a:new a.bV(w,r.u_pattern_br_a),u_pattern_tl_b:new a.bV(w,r.u_pattern_tl_b),u_pattern_br_b:new a.bV(w,r.u_pattern_br_b),u_texsize:new a.bV(w,r.u_texsize),u_mix:new a.bg(w,r.u_mix),u_pattern_size_a:new a.bV(w,r.u_pattern_size_a),u_pattern_size_b:new a.bV(w,r.u_pattern_size_b),u_scale_a:new a.bg(w,r.u_scale_a),u_scale_b:new a.bg(w,r.u_scale_b),u_pixel_coord_upper:new a.bV(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(w,r.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(w,r.u_tile_units_to_pixels)}),terrain:(w,r)=>({u_texture:new a.bQ(w,r.u_texture),u_ele_delta:new a.bg(w,r.u_ele_delta),u_fog_matrix:new a.bS(w,r.u_fog_matrix),u_fog_color:new a.bR(w,r.u_fog_color),u_fog_ground_blend:new a.bg(w,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(w,r.u_fog_ground_blend_opacity),u_horizon_color:new a.bR(w,r.u_horizon_color),u_horizon_fog_blend:new a.bg(w,r.u_horizon_fog_blend),u_is_globe_mode:new a.bg(w,r.u_is_globe_mode)}),terrainDepth:(w,r)=>({u_ele_delta:new a.bg(w,r.u_ele_delta)}),terrainCoords:(w,r)=>({u_texture:new a.bQ(w,r.u_texture),u_terrain_coords_id:new a.bg(w,r.u_terrain_coords_id),u_ele_delta:new a.bg(w,r.u_ele_delta)}),projectionErrorMeasurement:(w,r)=>({u_input:new a.bg(w,r.u_input),u_output_expected:new a.bg(w,r.u_output_expected)}),atmosphere:(w,r)=>({u_sun_pos:new a.bU(w,r.u_sun_pos),u_atmosphere_blend:new a.bg(w,r.u_atmosphere_blend),u_globe_position:new a.bU(w,r.u_globe_position),u_globe_radius:new a.bg(w,r.u_globe_radius),u_inv_proj_matrix:new a.bS(w,r.u_inv_proj_matrix)}),sky:(w,r)=>({u_sky_color:new a.bR(w,r.u_sky_color),u_horizon_color:new a.bR(w,r.u_horizon_color),u_horizon:new a.bV(w,r.u_horizon),u_horizon_normal:new a.bV(w,r.u_horizon_normal),u_sky_horizon_blend:new a.bg(w,r.u_sky_horizon_blend),u_sky_blend:new a.bg(w,r.u_sky_blend)})};class Ca{constructor(r,d,y){this.context=r;const x=r.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pa={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ws{constructor(r,d,y,x){this.length=d.length,this.attributes=y,this.itemSize=d.bytesPerElement,this.dynamicDraw=x,this.context=r;const S=r.gl;this.buffer=S.createBuffer(),r.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,d){for(let y=0;y<this.attributes.length;y++){const x=d.attributes[this.attributes[y].name];x!==void 0&&r.enableVertexAttribArray(x)}}setVertexAttribPointers(r,d,y){for(let x=0;x<this.attributes.length;x++){const S=this.attributes[x],N=d.attributes[S.name];N!==void 0&&r.vertexAttribPointer(N,S.components,r[pa[S.type]],!1,this.itemSize,S.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Mn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ua extends Mn{getDefault(){return a.bf.transparent}set(r){const d=this.current;(r.r!==d.r||r.g!==d.g||r.b!==d.b||r.a!==d.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class So extends Mn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Sa extends Mn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Eo extends Mn{getDefault(){return[!0,!0,!0,!0]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class ps extends Mn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class bl extends Mn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Ls extends Mn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const d=this.current;(r.func!==d.func||r.ref!==d.ref||r.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class no extends Mn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Kc extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=r,this.dirty=!1}}class $l extends Mn{getDefault(){return[0,1]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class wu extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=r,this.dirty=!1}}class wl extends Mn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Bl extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.BLEND):d.disable(d.BLEND),this.current=r,this.dirty=!1}}class Cl extends Mn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ec extends Mn{getDefault(){return a.bf.transparent}set(r){const d=this.current;(r.r!==d.r||r.g!==d.g||r.b!==d.b||r.a!==d.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class $o extends Mn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Zo extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=r,this.dirty=!1}}class ro extends Mn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class ra extends Mn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class ss extends Mn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class so extends Mn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Pn extends Mn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class En extends Mn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class wr extends Mn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Xr extends Mn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ea extends Mn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Sl extends Mn{getDefault(){return null}set(r){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Tc extends Mn{getDefault(){return null}set(r){var d;if(r===this.current&&!this.dirty)return;const y=this.gl;Ur(y)?y.bindVertexArray(r):(d=y.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class ao extends Mn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Fc extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Wc extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class ms extends Mn{constructor(r,d){super(r),this.context=r,this.parent=d}getDefault(){return null}}class dn extends ms{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class $s extends ms{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Gu extends ms{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const Xo="Framebuffer is not complete";class Nc{constructor(r,d,y,x,S){this.context=r,this.width=d,this.height=y;const N=r.gl,U=this.framebuffer=N.createFramebuffer();if(this.colorAttachment=new dn(r,U),x)this.depthAttachment=S?new Gu(r,U):new $s(r,U);else if(S)throw new Error("Stencil cannot be set without depth");if(N.checkFramebufferStatus(N.FRAMEBUFFER)!==N.FRAMEBUFFER_COMPLETE)throw new Error(Xo)}destroy(){const r=this.context.gl,d=this.colorAttachment.get();if(d&&r.deleteTexture(d),this.depthAttachment){const y=this.depthAttachment.get();y&&r.deleteRenderbuffer(y)}r.deleteFramebuffer(this.framebuffer)}}class Bu{constructor(r){var d,y;if(this.gl=r,this.clearColor=new Ua(this),this.clearDepth=new So(this),this.clearStencil=new Sa(this),this.colorMask=new Eo(this),this.depthMask=new ps(this),this.stencilMask=new bl(this),this.stencilFunc=new Ls(this),this.stencilOp=new no(this),this.stencilTest=new Kc(this),this.depthRange=new $l(this),this.depthTest=new wu(this),this.depthFunc=new wl(this),this.blend=new Bl(this),this.blendFunc=new Cl(this),this.blendColor=new Ec(this),this.blendEquation=new $o(this),this.cullFace=new Zo(this),this.cullFaceSide=new ro(this),this.frontFace=new ra(this),this.program=new ss(this),this.activeTexture=new so(this),this.viewport=new Pn(this),this.bindFramebuffer=new En(this),this.bindRenderbuffer=new wr(this),this.bindTexture=new Xr(this),this.bindVertexBuffer=new Ea(this),this.bindElementBuffer=new Sl(this),this.bindVertexArray=new Tc(this),this.pixelStoreUnpack=new ao(this),this.pixelStoreUnpackPremultiplyAlpha=new Fc(this),this.pixelStoreUnpackFlipY=new Wc(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Ur(r)){this.HALF_FLOAT=r.HALF_FLOAT;const x=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=r.RGBA16F)!==null&&d!==void 0?d:x?.RGBA16F_EXT,this.RGB16F=(y=r.RGB16F)!==null&&y!==void 0?y:x?.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const x=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=x?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,d){return new Ca(this,r,d)}createVertexBuffer(r,d,y){return new Ws(this,r,d,y)}createRenderbuffer(r,d,y){const x=this.gl,S=x.createRenderbuffer();return this.bindRenderbuffer.set(S),x.renderbufferStorage(x.RENDERBUFFER,r,d,y),this.bindRenderbuffer.set(null),S}createFramebuffer(r,d,y,x){return new Nc(this,r,d,y,x)}clear({color:r,depth:d,stencil:y}){const x=this.gl;let S=0;r&&(S|=x.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(S|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),y!==void 0&&(S|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),x.clear(S)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){a.bH(r.blendFunction,rr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Ur(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var d;return Ur(this.gl)?this.gl.deleteVertexArray(r):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let Yo;function Ku(w,r,d,y,x){const S=w.context,N=w.transform,U=S.gl,z=w.useProgram("collisionBox"),X=[];let Y=0,Ae=0;for(let We=0;We<y.length;We++){const Ye=y[We],it=r.getTile(Ye).getBucket(d);if(!it)continue;const Je=x?it.textCollisionBox:it.iconCollisionBox,lt=it.collisionCircleArray;lt.length>0&&(X.push({circleArray:lt,circleOffset:Ae,coord:Ye}),Y+=lt.length/4,Ae=Y),Je&&z.draw(S,U.LINES,Ji.disabled,rn.disabled,w.colorModeForRenderPass(),_n.disabled,na(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ye),N.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,w.transform.zoom,null,null,Je.collisionVertexBuffer)}if(!x||!X.length)return;const oe=w.useProgram("collisionCircle"),_e=new a.c0;_e.resize(4*Y),_e._trim();let Ne=0;for(const We of X)for(let Ye=0;Ye<We.circleArray.length/4;Ye++){const it=4*Ye,Je=We.circleArray[it+0],lt=We.circleArray[it+1],ht=We.circleArray[it+2],nt=We.circleArray[it+3];_e.emplace(Ne++,Je,lt,ht,nt,0),_e.emplace(Ne++,Je,lt,ht,nt,1),_e.emplace(Ne++,Je,lt,ht,nt,2),_e.emplace(Ne++,Je,lt,ht,nt,3)}(!Yo||Yo.length<2*Y)&&(Yo=function(We){const Ye=2*We,it=new a.c2;it.resize(Ye),it._trim();for(let Je=0;Je<Ye;Je++){const lt=6*Je;it.uint16[lt+0]=4*Je+0,it.uint16[lt+1]=4*Je+1,it.uint16[lt+2]=4*Je+2,it.uint16[lt+3]=4*Je+2,it.uint16[lt+4]=4*Je+3,it.uint16[lt+5]=4*Je+0}return it}(Y));const He=S.createIndexBuffer(Yo,!0),Ge=S.createVertexBuffer(_e,a.c1.members,!0);for(const We of X){const Ye=Ba(w.transform);oe.draw(S,U.TRIANGLES,Ji.disabled,rn.disabled,w.colorModeForRenderPass(),_n.disabled,Ye,w.style.map.terrain&&w.style.map.terrain.getTerrainData(We.coord),null,d.id,Ge,He,a.aM.simpleSegment(0,2*We.circleOffset,We.circleArray.length,We.circleArray.length/2),null,w.transform.zoom,null,null,null)}Ge.destroy(),He.destroy()}const _A=a.ag(new Float32Array(16));function Zl(w,r,d,y,x,S){const{horizontalAlign:N,verticalAlign:U}=a.aH(w);return new a.P((-(N-.5)*r/x+y[0])*S,(-(U-.5)*d/x+y[1])*S)}function Jo(w,r,d,y,x,S){const N=r.tileAnchorPoint.add(new a.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let U=y.mult(S);d||(U=U.rotate(-x));const z=N.add(U);return Kt(z.x,z.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(d){const U=Hn(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(w),z=Math.atan(U.y/U.x)+(U.x<0?Math.PI:0);return w.add(y.rotate(z))}return w.add(y)}function Mc(w,r,d,y,x,S,N,U,z,X,Y,Ae){const oe=w.text.placedSymbolArray,_e=w.text.dynamicLayoutVertexArray,Ne=w.icon.dynamicLayoutVertexArray,He={};_e.clear();for(let Ge=0;Ge<oe.length;Ge++){const We=oe.get(Ge),Ye=We.hidden||!We.crossTileID||w.allowVerticalPlacement&&!We.placedOrientation?null:y[We.crossTileID];if(Ye){const it=new a.P(We.anchorX,We.anchorY),Je={getElevation:Ae,width:x.width,height:x.height,pitchedLabelPlaneMatrix:S,pitchWithMap:d,transform:x,tileAnchorPoint:it,translation:X,unwrappedTileID:Y},lt=d?pn(it.x,it.y,Je):Hn(it.x,it.y,Je),ht=ds(x.cameraToCenterDistance,lt.signedDistanceFromCamera);let nt=a.ap(w.textSizeData,U,We)*ht/a.aB;d&&(nt*=w.tilePixelRatio/N);const{width:mt,height:Dt,anchor:Nt,textOffset:Lt,textBoxScale:Pt}=Ye,ui=Zl(Nt,mt,Dt,Lt,Pt,nt),Ai=x.getPitchedTextCorrection(it.x+X[0],it.y+X[1],Y),$t=Jo(lt.point,Je,r,ui,-x.bearingInRadians,Ai),ki=w.allowVerticalPlacement&&We.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let cn=0;cn<We.numGlyphs;cn++)a.av(_e,$t,ki);z&&We.associatedIconIndex>=0&&(He[We.associatedIconIndex]={shiftedAnchor:$t,angle:ki})}else Ho(We.numGlyphs,_e)}if(z){Ne.clear();const Ge=w.icon.placedSymbolArray;for(let We=0;We<Ge.length;We++){const Ye=Ge.get(We);if(Ye.hidden)Ho(Ye.numGlyphs,Ne);else{const it=He[We];if(it)for(let Je=0;Je<Ye.numGlyphs;Je++)a.av(Ne,it.shiftedAnchor,it.angle);else Ho(Ye.numGlyphs,Ne)}}w.icon.dynamicLayoutVertexBuffer.updateData(Ne)}w.text.dynamicLayoutVertexBuffer.updateData(_e)}function Cu(w,r,d){return d.iconsInText&&r?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Da(w,r,d,y,x,S,N,U,z,X,Y,Ae,oe){const _e=w.context,Ne=_e.gl,He=w.transform,Ge=U==="map",We=z==="map",Ye=U!=="viewport"&&d.layout.get("symbol-placement")!=="point",it=Ge&&!We&&!Ye,Je=!d.layout.get("symbol-sort-key").isConstant();let lt=!1;const ht=w.getDepthModeForSublayer(0,Ji.ReadOnly),nt=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),mt=[],Dt=He.getCircleRadiusCorrection();for(const Nt of y){const Lt=r.getTile(Nt),Pt=Lt.getBucket(d);if(!Pt)continue;const ui=x?Pt.text:Pt.icon;if(!ui||!ui.segments.get().length||!ui.hasVisibleVertices)continue;const Ai=ui.programConfigurations.get(d.id),$t=x||Pt.sdfIcons,ki=x?Pt.textSizeData:Pt.iconSizeData,cn=We||He.pitch!==0,ir=w.useProgram(Cu($t,x,Pt),Ai),sr=a.an(ki,He.zoom),Ar=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Nt);let Pr,kr,Ln,Or,sa=[0,0],Us=null;if(x)kr=Lt.glyphAtlasTexture,Ln=Ne.LINEAR,Pr=Lt.glyphAtlasTexture.size,Pt.iconsInText&&(sa=Lt.imageAtlasTexture.size,Us=Lt.imageAtlasTexture,Or=cn||w.options.rotating||w.options.zooming||ki.kind==="composite"||ki.kind==="camera"?Ne.LINEAR:Ne.NEAREST);else{const Ss=d.layout.get("icon-size").constantOr(0)!==1||Pt.iconsNeedLinear;kr=Lt.imageAtlasTexture,Ln=$t||w.options.rotating||w.options.zooming||Ss||cn?Ne.LINEAR:Ne.NEAREST,Pr=Lt.imageAtlasTexture.size}const Ds=a.aC(Lt,1,w.transform.zoom),Na=fn(Ge,w.transform,Ds),Tu=a.L();a.aq(Tu,Na);const tc=Dn(We,Ge,w.transform,Ds),Xu=a.aD(He,Lt,S,N),ic=He.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!oe,applyTerrainMatrix:!0}),Yu=nt&&Pt.hasTextData(),Fu=d.layout.get("icon-text-fit")!=="none"&&Yu&&Pt.hasIconData();if(Ye){const Ss=w.style.map.terrain?(Rs,ls)=>w.style.map.terrain.getElevation(Nt,Rs,ls):null,Nr=d.layout.get("text-rotation-alignment")==="map";jr(Pt,w,x,Na,Tu,We,X,Nr,Nt.toUnwrapped(),He.width,He.height,Xu,Ss)}const Ll=x&&nt||Fu,uo=Ye||Ll?_A:We?Na:w.transform.clipSpaceToPixelsMatrix,kc=$t&&d.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let jc;jc=$t?Pt.iconsInText?Co(ki.kind,sr,it,We,Ye,Ll,w,uo,tc,Xu,Pr,sa,Dt):qu(ki.kind,sr,it,We,Ye,Ll,w,uo,tc,Xu,x,Pr,0,Dt):Vu(ki.kind,sr,it,We,Ye,Ll,w,uo,tc,Xu,x,Pr,Dt);const Ma={program:ir,buffers:ui,uniformValues:jc,projectionData:ic,atlasTexture:kr,atlasTextureIcon:Us,atlasInterpolation:Ln,atlasInterpolationIcon:Or,isSDF:$t,hasHalo:kc};if(Je&&Pt.canOverlap){lt=!0;const Ss=ui.segments.get();for(const Nr of Ss)mt.push({segments:new a.aM([Nr]),sortKey:Nr.sortKey,state:Ma,terrainData:Ar})}else mt.push({segments:ui.segments,sortKey:0,state:Ma,terrainData:Ar})}lt&&mt.sort((Nt,Lt)=>Nt.sortKey-Lt.sortKey);for(const Nt of mt){const Lt=Nt.state;if(_e.activeTexture.set(Ne.TEXTURE0),Lt.atlasTexture.bind(Lt.atlasInterpolation,Ne.CLAMP_TO_EDGE),Lt.atlasTextureIcon&&(_e.activeTexture.set(Ne.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,Ne.CLAMP_TO_EDGE)),Lt.isSDF){const Pt=Lt.uniformValues;Lt.hasHalo&&(Pt.u_is_halo=1,Ra(Lt.buffers,Nt.segments,d,w,Lt.program,ht,Y,Ae,Pt,Lt.projectionData,Nt.terrainData)),Pt.u_is_halo=0}Ra(Lt.buffers,Nt.segments,d,w,Lt.program,ht,Y,Ae,Lt.uniformValues,Lt.projectionData,Nt.terrainData)}}function Ra(w,r,d,y,x,S,N,U,z,X,Y){const Ae=y.context;x.draw(Ae,Ae.gl.TRIANGLES,S,N,U,_n.backCCW,z,Y,X,d.id,w.layoutVertexBuffer,w.indexBuffer,r,d.paint,y.transform.zoom,w.programConfigurations.get(d.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Xl(w,r,d,y,x){const S=w.context,N=S.gl,U=rn.disabled,z=new rr([N.ONE,N.ONE],a.bf.transparent,[!0,!0,!0,!0]),X=r.getBucket(d);if(!X)return;const Y=y.key;let Ae=d.heatmapFbos.get(Y);Ae||(Ae=To(S,r.tileSize,r.tileSize),d.heatmapFbos.set(Y,Ae)),S.bindFramebuffer.set(Ae.framebuffer),S.viewport.set([0,0,r.tileSize,r.tileSize]),S.clear({color:a.bf.transparent});const oe=X.programConfigurations.get(d.id),_e=w.useProgram("heatmap",oe,!x),Ne=w.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),He=w.style.map.terrain.getTerrainData(y);_e.draw(S,N.TRIANGLES,Ji.disabled,U,z,_n.disabled,wo(r,w.transform.zoom,d.paint.get("heatmap-intensity"),1),He,Ne,d.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,d.paint,w.transform.zoom,oe)}function el(w,r,d,y,x){const S=w.context,N=S.gl,U=w.transform;S.setColorMode(w.colorModeForRenderPass());const z=Fo(S,r),X=d.key,Y=r.heatmapFbos.get(X);if(!Y)return;S.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,Y.colorAttachment.get()),S.activeTexture.set(N.TEXTURE1),z.bind(N.LINEAR,N.CLAMP_TO_EDGE);const Ae=U.getProjectionData({overscaledTileID:d,applyTerrainMatrix:x,applyGlobeMatrix:!y});w.useProgram("heatmapTexture").draw(S,N.TRIANGLES,Ji.disabled,rn.disabled,w.colorModeForRenderPass(),_n.disabled,Hu(w,r,0,1),null,Ae,r.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,r.paint,U.zoom),Y.destroy(),r.heatmapFbos.delete(X)}function To(w,r,d){var y,x;const S=w.gl,N=S.createTexture();S.bindTexture(S.TEXTURE_2D,N),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR);const U=(y=w.HALF_FLOAT)!==null&&y!==void 0?y:S.UNSIGNED_BYTE,z=(x=w.RGBA16F)!==null&&x!==void 0?x:S.RGBA;S.texImage2D(S.TEXTURE_2D,0,z,r,d,0,S.RGBA,U,null);const X=w.createFramebuffer(r,d,!1,!1);return X.colorAttachment.set(N),X}function Fo(w,r){return r.colorRampTexture||(r.colorRampTexture=new a.T(w,r.colorRamp,w.gl.RGBA)),r.colorRampTexture}function xA(w,r,d,y,x,S,N,U){let z=256;if(x.stepInterpolant){const X=r.getSource().maxzoom,Y=N.canonical.z===X?Math.ceil(1<<w.transform.maxZoom-N.canonical.z):1;z=a.ah(a.c4(S.maxLineLength/a.$*1024*Y),256,d.maxTextureSize)}return U.gradient=a.c5({expression:x.gradientExpression(),evaluationKey:"lineProgress",resolution:z,image:U.gradient||void 0,clips:S.lineClipsArray}),U.texture?U.texture.update(U.gradient):U.texture=new a.T(d,U.gradient,y.RGBA),U.version=x.gradientVersion,U.texture}function bA(w,r,d,y,x){w.activeTexture.set(r.TEXTURE0),d.imageAtlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),y.updatePaintBuffers(x)}function Ic(w,r,d,y,x,S){(x||w.lineAtlas.dirty)&&(r.activeTexture.set(d.TEXTURE0),w.lineAtlas.bind(r)),y.updatePaintBuffers(S)}function Zs(w,r,d,y,x,S,N){const U=S.gradients[x.id];let z=U.texture;x.gradientVersion!==U.version&&(z=xA(w,r,d,y,x,S,N,U)),d.activeTexture.set(y.TEXTURE0),z.bind(x.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}function as(w,r,d,y,x,S,N,U,z){const X=S.gradients[x.id];let Y=X.texture;x.gradientVersion!==X.version&&(Y=xA(w,r,d,y,x,S,N,X)),d.activeTexture.set(y.TEXTURE0),Y.bind(x.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE),d.activeTexture.set(y.TEXTURE1),w.lineAtlas.bind(d),U.updatePaintBuffers(z)}function Gn(w,r,d,y,x){if(!d||!y||!y.imageAtlas)return;const S=y.imageAtlas.patternPositions;let N=S[d.to.toString()],U=S[d.from.toString()];if(!N&&U&&(N=U),!U&&N&&(U=N),!N||!U){const z=x.getPaintProperty(r);N=S[z],U=S[z]}N&&U&&w.setConstantPatternPositions(N,U)}function El(w,r,d,y,x,S,N,U){const z=w.context.gl,X="fill-pattern",Y=d.paint.get(X),Ae=Y&&Y.constantOr(1),oe=d.getCrossfadeParameters();let _e,Ne,He,Ge,We;const Ye=w.transform,it=d.paint.get("fill-translate"),Je=d.paint.get("fill-translate-anchor");N?(Ne=Ae&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",_e=z.LINES):(Ne=Ae?"fillPattern":"fill",_e=z.TRIANGLES);const lt=Y.constantOr(null);for(const ht of y){const nt=r.getTile(ht);if(Ae&&!nt.patternsLoaded())continue;const mt=nt.getBucket(d);if(!mt)continue;const Dt=mt.programConfigurations.get(d.id),Nt=w.useProgram(Ne,Dt),Lt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ht);Ae&&(w.context.activeTexture.set(z.TEXTURE0),nt.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Dt.updatePaintBuffers(oe)),Gn(Dt,X,lt,nt,d);const Pt=Ye.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),ui=a.aD(Ye,nt,it,Je);if(N){Ge=mt.indexBuffer2,We=mt.segments2;const $t=[z.drawingBufferWidth,z.drawingBufferHeight];He=Ne==="fillOutlinePattern"&&Ae?ws(w,oe,nt,$t,ui):Ir($t,ui)}else Ge=mt.indexBuffer,We=mt.segments,He=Ae?br(w,oe,nt,ui):{u_fill_translate:ui};const Ai=w.stencilModeForClipping(ht);Nt.draw(w.context,_e,x,Ai,S,_n.backCCW,He,Lt,Pt,d.id,mt.layoutVertexBuffer,Ge,We,d.paint,w.transform.zoom,Dt)}}function No(w,r,d,y,x,S,N,U){const z=w.context,X=z.gl,Y="fill-extrusion-pattern",Ae=d.paint.get(Y),oe=Ae.constantOr(1),_e=d.getCrossfadeParameters(),Ne=d.paint.get("fill-extrusion-opacity"),He=Ae.constantOr(null),Ge=w.transform;for(const We of y){const Ye=r.getTile(We),it=Ye.getBucket(d);if(!it)continue;const Je=w.style.map.terrain&&w.style.map.terrain.getTerrainData(We),lt=it.programConfigurations.get(d.id),ht=w.useProgram(oe?"fillExtrusionPattern":"fillExtrusion",lt);oe&&(w.context.activeTexture.set(X.TEXTURE0),Ye.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),lt.updatePaintBuffers(_e));const nt=Ge.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!U,applyTerrainMatrix:!0});Gn(lt,Y,He,Ye,d);const mt=a.aD(Ge,Ye,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Dt=d.paint.get("fill-extrusion-vertical-gradient"),Nt=oe?On(w,Dt,Ne,mt,We,_e,Ye):bn(w,Dt,Ne,mt);ht.draw(z,z.gl.TRIANGLES,x,S,N,_n.backCCW,Nt,Je,nt,d.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,d.paint,w.transform.zoom,lt,w.style.map.terrain&&it.centroidVertexBuffer)}}function Wu(w,r,d,y,x,S,N,U,z){var X;const Y=w.style.projection,Ae=w.context,oe=w.transform,_e=Ae.gl,Ne=[`#define NUM_ILLUMINATION_SOURCES ${d.paint.get("hillshade-highlight-color").values.length}`],He=w.useProgram("hillshade",null,!1,Ne),Ge=!w.options.moving;for(const We of y){const Ye=r.getTile(We),it=Ye.fbo;if(!it)continue;const Je=Y.getMeshFromTileID(Ae,We.canonical,U,!0,"raster"),lt=(X=w.style.map.terrain)===null||X===void 0?void 0:X.getTerrainData(We);Ae.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,it.colorAttachment.get());const ht=oe.getProjectionData({overscaledTileID:We,aligned:Ge,applyGlobeMatrix:!z,applyTerrainMatrix:!0});He.draw(Ae,_e.TRIANGLES,S,x[We.overscaledZ],N,_n.backCCW,Gl(w,Ye,d),lt,ht,d.id,Je.vertexBuffer,Je.indexBuffer,Je.segments)}}function tl(w,r,d,y,x,S,N,U,z){var X;const Y=w.style.projection,Ae=w.context,oe=w.transform,_e=Ae.gl,Ne=w.useProgram("colorRelief"),He=!w.options.moving;let Ge=!0,We=0;for(const Ye of y){const it=r.getTile(Ye),Je=it.dem;if(Ge){const Nt=_e.getParameter(_e.MAX_TEXTURE_SIZE),{elevationTexture:Lt,colorTexture:Pt}=d.getColorRampTextures(Ae,Nt,Je.getUnpackVector());Ae.activeTexture.set(_e.TEXTURE1),Lt.bind(_e.NEAREST,_e.CLAMP_TO_EDGE),Ae.activeTexture.set(_e.TEXTURE4),Pt.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),Ge=!1,We=Lt.size[0]}if(!Je||!Je.data)continue;const lt=Je.stride,ht=Je.getPixels();if(Ae.activeTexture.set(_e.TEXTURE0),Ae.pixelStoreUnpackPremultiplyAlpha.set(!1),it.demTexture=it.demTexture||w.getTileTexture(lt),it.demTexture){const Nt=it.demTexture;Nt.update(ht,{premultiply:!1}),Nt.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}else it.demTexture=new a.T(Ae,ht,_e.RGBA,{premultiply:!1}),it.demTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE);const nt=Y.getMeshFromTileID(Ae,Ye.canonical,U,!0,"raster"),mt=(X=w.style.map.terrain)===null||X===void 0?void 0:X.getTerrainData(Ye),Dt=oe.getProjectionData({overscaledTileID:Ye,aligned:He,applyGlobeMatrix:!z,applyTerrainMatrix:!0});Ne.draw(Ae,_e.TRIANGLES,S,x[Ye.overscaledZ],N,_n.backCCW,Cc(d,it.dem,We),mt,Dt,d.id,nt.vertexBuffer,nt.indexBuffer,nt.segments)}}const $u=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function il(w,r,d,y,x,S,N,U,z=!1,X=!1){const Y=y[y.length-1].overscaledZ,Ae=w.context,oe=Ae.gl,_e=w.useProgram("raster"),Ne=w.transform,He=w.style.projection,Ge=w.colorModeForRenderPass(),We=!w.options.moving,Ye=d.paint.get("raster-opacity"),it=d.paint.get("raster-resampling"),Je=d.paint.get("raster-fade-duration"),lt=!!w.style.map.terrain;for(const ht of y){const nt=w.getDepthModeForSublayer(ht.overscaledZ-Y,Ye===1?Ji.ReadWrite:Ji.ReadOnly,oe.LESS),mt=r.getTile(ht),Dt=it==="nearest"?oe.NEAREST:oe.LINEAR;Ae.activeTexture.set(oe.TEXTURE0),mt.texture.bind(Dt,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),Ae.activeTexture.set(oe.TEXTURE1);const{parentTile:Nt,parentScaleBy:Lt,parentTopLeft:Pt,fadeValues:ui}=Ta(mt,r,Je,lt);mt.fadeOpacity=ui.tileOpacity,Nt?(Nt.fadeOpacity=ui.parentTileOpacity,Nt.texture.bind(Dt,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST)):mt.texture.bind(Dt,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),mt.texture.useMipmap&&Ae.extTextureFilterAnisotropic&&w.transform.pitch>20&&oe.texParameterf(oe.TEXTURE_2D,Ae.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ae.extTextureFilterAnisotropicMax);const Ai=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ht),$t=Ne.getProjectionData({overscaledTileID:ht,aligned:We,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),ki=fa(Pt,Lt,ui.fadeMix,d,U),cn=He.getMeshFromTileID(Ae,ht.canonical,S,N,"raster");_e.draw(Ae,oe.TRIANGLES,nt,x?x[ht.overscaledZ]:rn.disabled,Ge,z?_n.frontCCW:_n.backCCW,ki,Ai,$t,d.id,cn.vertexBuffer,cn.indexBuffer,cn.segments)}}function Ta(w,r,d,y){const x={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(d===0||y)return x;if(w.fadingParentID){const S=r._getLoadedTile(w.fadingParentID);if(!S)return x;const N=Math.pow(2,S.tileID.overscaledZ-w.tileID.overscaledZ),U=[w.tileID.canonical.x*N%1,w.tileID.canonical.y*N%1],z=function(X,Y,Ae){const oe=P.now(),_e=(oe-Y.timeAdded)/Ae,Ne=X.fadingDirection===et.Incoming,He=a.ah((oe-X.timeAdded)/Ae,0,1),Ge=a.ah(1-_e,0,1),We=Ne?He:Ge;return{tileOpacity:We,parentTileOpacity:Ne?Ge:He,fadeMix:{opacity:1,mix:1-We}}}(w,S,d);return{parentTile:S,parentScaleBy:N,parentTopLeft:U,fadeValues:z}}if(w.selfFading){const S=function(N,U){const z=P.now(),X=a.ah((z-N.timeAdded)/U,0,1);return{tileOpacity:X,fadeMix:{opacity:X,mix:0}}}(w,d);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:S}}return x}const Yn=new a.bf(1,0,0,1),$c=new a.bf(0,1,0,1),ma=new a.bf(0,0,1,1),nl=new a.bf(1,0,1,1),Bs=new a.bf(0,1,1,1);function Tl(w,r,d,y){Oa(w,0,r+d/2,w.transform.width,d,y)}function oo(w,r,d,y){Oa(w,r-d/2,0,d,w.transform.height,y)}function Oa(w,r,d,y,x,S){const N=w.context,U=N.gl;U.enable(U.SCISSOR_TEST),U.scissor(r*w.pixelRatio,d*w.pixelRatio,y*w.pixelRatio,x*w.pixelRatio),N.clear({color:S}),U.disable(U.SCISSOR_TEST)}function Zc(w,r,d){const y=w.context,x=y.gl,S=w.useProgram("debug"),N=Ji.disabled,U=rn.disabled,z=w.colorModeForRenderPass(),X="$debug",Y=w.style.map.terrain&&w.style.map.terrain.getTerrainData(d);y.activeTexture.set(x.TEXTURE0);const Ae=r.getTileByID(d.key).latestRawTileData,oe=Math.floor((Ae&&Ae.byteLength||0)/1024),_e=r.getTile(d).tileSize,Ne=512/Math.min(_e,512)*(d.overscaledZ/w.transform.zoom)*.5;let He=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(He+=` => ${d.overscaledZ}`),function(We,Ye){We.initDebugOverlayCanvas();const it=We.debugOverlayCanvas,Je=We.context.gl,lt=We.debugOverlayCanvas.getContext("2d");lt.clearRect(0,0,it.width,it.height),lt.shadowColor="white",lt.shadowBlur=2,lt.lineWidth=1.5,lt.strokeStyle="white",lt.textBaseline="top",lt.font="bold 36px Open Sans, sans-serif",lt.fillText(Ye,5,5),lt.strokeText(Ye,5,5),We.debugOverlayTexture.update(it),We.debugOverlayTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)}(w,`${He} ${oe}kB`);const Ge=w.transform.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(y,x.TRIANGLES,N,U,rr.alphaBlended,_n.disabled,io(a.bf.transparent,Ne),null,Ge,X,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),S.draw(y,x.LINE_STRIP,N,U,z,_n.disabled,io(a.bf.red),Y,Ge,X,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Su(w,r,d,y){const{isRenderingGlobe:x}=y,S=w.context,N=S.gl,U=w.transform,z=w.colorModeForRenderPass(),X=w.getDepthModeFor3D(),Y=w.useProgram("terrain");S.bindFramebuffer.set(null),S.viewport.set([0,0,w.width,w.height]);for(const Ae of d){const oe=r.getTerrainMesh(Ae.tileID),_e=w.renderToTexture.getTexture(Ae),Ne=r.getTerrainData(Ae.tileID);S.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,_e.texture);const He=r.getMeshFrameDelta(U.zoom),Ge=U.calculateFogMatrix(Ae.tileID.toUnwrapped()),We=Gt(He,Ge,w.style.sky,U.pitch,x),Ye=U.getProjectionData({overscaledTileID:Ae.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Y.draw(S,N.TRIANGLES,X,rn.disabled,z,_n.backCCW,We,Ne,Ye,"terrain",oe.vertexBuffer,oe.indexBuffer,oe.segments)}}function Xc(w,r){if(!r.mesh){const d=new a.aL;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1);const y=new a.aN;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),r.mesh=new Ja(w.createVertexBuffer(d,Ns.members),w.createIndexBuffer(y),a.aM.simpleSegment(0,0,d.length,y.length))}return r.mesh}class wA{constructor(r,d){this.context=new Bu(r),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Mi.maxUnderzooming+Mi.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wc}resize(r,d,y){if(this.width=Math.floor(r*y),this.height=Math.floor(d*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const x of this.style._order)this.style._layers[x].resize()}setup(){const r=this.context,d=new a.aL;d.emplaceBack(0,0),d.emplaceBack(a.$,0),d.emplaceBack(0,a.$),d.emplaceBack(a.$,a.$),this.tileExtentBuffer=r.createVertexBuffer(d,Ns.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);const y=new a.aL;y.emplaceBack(0,0),y.emplaceBack(a.$,0),y.emplaceBack(0,a.$),y.emplaceBack(a.$,a.$),this.debugBuffer=r.createVertexBuffer(y,Ns.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);const x=new a.c7;x.emplaceBack(0,0,0,0),x.emplaceBack(a.$,0,a.$,0),x.emplaceBack(0,a.$,0,a.$),x.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=r.createVertexBuffer(x,ft.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);const S=new a.aL;S.emplaceBack(0,0),S.emplaceBack(a.$,0),S.emplaceBack(0,a.$),S.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(S,Ns.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);const N=new a.aL;N.emplaceBack(0,0),N.emplaceBack(1,0),N.emplaceBack(0,1),N.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(N,Ns.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);const U=new a.c8;U.emplaceBack(0),U.emplaceBack(1),U.emplaceBack(3),U.emplaceBack(2),U.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(U);const z=new a.aN;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(z);const X=this.context.gl;this.stencilClearMode=new rn({func:X.ALWAYS,mask:0},0,255,X.ZERO,X.ZERO,X.ZERO),this.tileExtentMesh=new Ja(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,d=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=a.L();a.bZ(y,0,this.width,this.height,0,0,1),a.N(y,y,[d.drawingBufferWidth,d.drawingBufferHeight,0]);const x={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(r,d.TRIANGLES,Ji.disabled,this.stencilClearMode,rr.disabled,_n.disabled,null,null,x,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,d,y){if(this.currentStencilSource===r.source||!r.isTileClipped()||!d||!d.length)return;this.currentStencilSource=r.source,this.nextStencilID+d.length>256&&this.clearStencil();const x=this.context;x.setColorMode(rr.disabled),x.setDepthMode(Ji.disabled);const S={};for(const N of d)S[N.key]=this.nextStencilID++;this._renderTileMasks(S,d,y,!0),this._renderTileMasks(S,d,y,!1),this._tileClippingMaskIDs=S}_renderTileMasks(r,d,y,x){const S=this.context,N=S.gl,U=this.style.projection,z=this.transform,X=this.useProgram("clippingMask");for(const Y of d){const Ae=r[Y.key],oe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Y),_e=U.getMeshFromTileID(this.context,Y.canonical,x,!0,"stencil"),Ne=z.getProjectionData({overscaledTileID:Y,applyGlobeMatrix:!y,applyTerrainMatrix:!0});X.draw(S,N.TRIANGLES,Ji.disabled,new rn({func:N.ALWAYS,mask:0},Ae,255,N.KEEP,N.KEEP,N.REPLACE),rr.disabled,y?_n.disabled:_n.backCCW,null,oe,Ne,"$clipping",_e.vertexBuffer,_e.indexBuffer,_e.segments)}}_renderTilesDepthBuffer(){const r=this.context,d=r.gl,y=this.style.projection,x=this.transform,S=this.useProgram("depth"),N=this.getDepthModeFor3D(),U=Ti(x,{tileSize:x.tileSize});for(const z of U){const X=this.style.map.terrain&&this.style.map.terrain.getTerrainData(z),Y=y.getMeshFromTileID(this.context,z.canonical,!0,!0,"raster"),Ae=x.getProjectionData({overscaledTileID:z,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(r,d.TRIANGLES,N,rn.disabled,rr.disabled,_n.backCCW,null,X,Ae,"$clipping",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,d=this.context.gl;return new rn({func:d.NOTEQUAL,mask:255},r,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(r){const d=this.context.gl;return new rn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,d.KEEP,d.KEEP,d.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const d=this.context.gl,y=r.sort((N,U)=>U.overscaledZ-N.overscaledZ),x=y[y.length-1].overscaledZ,S=y[0].overscaledZ-x+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const N={};for(let U=0;U<S;U++)N[U+x]=new rn({func:d.GEQUAL,mask:255},U+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=S,[N,y]}return[{[x]:rn.disabled},y]}stencilConfigForOverlapTwoPass(r){const d=this.context.gl,y=r.sort((N,U)=>U.overscaledZ-N.overscaledZ),x=y[y.length-1].overscaledZ,S=y[0].overscaledZ-x+1;if(this.clearStencil(),S>1){const N={},U={};for(let z=0;z<S;z++)N[z+x]=new rn({func:d.GREATER,mask:255},S+1+z,255,d.KEEP,d.KEEP,d.REPLACE),U[z+x]=new rn({func:d.GREATER,mask:255},1+z,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID=2*S+1,[N,U,y]}return this.nextStencilID=3,[{[x]:new rn({func:d.GREATER,mask:255},2,255,d.KEEP,d.KEEP,d.REPLACE)},{[x]:new rn({func:d.GREATER,mask:255},1,255,d.KEEP,d.KEEP,d.REPLACE)},y]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new rr([r.CONSTANT_COLOR,r.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?rr.unblended:rr.alphaBlended}getDepthModeForSublayer(r,d,y){if(!this.opaquePassEnabledForLayer())return Ji.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Ji(y||this.context.gl.LEQUAL,d,[x,x])}getDepthModeFor3D(){return new Ji(this.context.gl.LEQUAL,Ji.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,d){var y,x;this.style=r,this.options=d,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(P.now()),this.imageManager.beginFrame();const S=this.style._order,N=this.style.sourceCaches,U={},z={},X={},Y={isRenderingToTexture:!1,isRenderingGlobe:((y=r.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const oe in N){const _e=N[oe];_e.used&&_e.prepare(this.context),U[oe]=_e.getVisibleCoordinates(!1),z[oe]=U[oe].slice().reverse(),X[oe]=_e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let oe=0;oe<S.length;oe++)if(this.style._layers[S[oe]].is3D()){this.opaquePassCutoff=oe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const oe of S){const _e=this.style._layers[oe];if(!_e.hasOffscreenPass()||_e.isHidden(this.transform.zoom))continue;const Ne=z[_e.source];(_e.type==="custom"||Ne.length)&&this.renderLayer(this,N[_e.source],_e,Ne,Y)}if((x=this.style.projection)===null||x===void 0||x.updateGPUdependent({context:this.context,useProgram:oe=>this.useProgram(oe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(oe,_e){const Ne=oe.context,He=Ne.gl,Ge=((ht,nt,mt)=>{const Dt=Math.cos(nt.rollInRadians),Nt=Math.sin(nt.rollInRadians),Lt=wt(nt),Pt=nt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ht.properties.get("sky-color"),u_horizon_color:ht.properties.get("horizon-color"),u_horizon:[(nt.width/2-Lt*Nt)*mt,(nt.height/2+Lt*Dt)*mt],u_horizon_normal:[-Nt,Dt],u_sky_horizon_blend:ht.properties.get("sky-horizon-blend")*nt.height/2*mt,u_sky_blend:Pt}})(_e,oe.style.map.transform,oe.pixelRatio),We=new Ji(He.LEQUAL,Ji.ReadWrite,[0,1]),Ye=rn.disabled,it=oe.colorModeForRenderPass(),Je=oe.useProgram("sky"),lt=Xc(Ne,_e);Je.draw(Ne,He.TRIANGLES,We,Ye,it,_n.disabled,Ge,null,void 0,"sky",lt.vertexBuffer,lt.indexBuffer,lt.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const oe=this.style._layers[S[this.currentLayer]],_e=N[oe.source],Ne=U[oe.source];this._renderTileClippingMasks(oe,Ne,!1),this.renderLayer(this,_e,oe,Ne,Y)}this.renderPass="translucent";let Ae=!1;for(this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const oe=this.style._layers[S[this.currentLayer]],_e=N[oe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(oe,Y))continue;this.opaquePassEnabledForLayer()||Ae||(Ae=!0,Y.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ne=(oe.type==="symbol"?X:z)[oe.source];this._renderTileClippingMasks(oe,U[oe.source],!!this.renderToTexture),this.renderLayer(this,_e,oe,Ne,Y)}if(Y.isRenderingGlobe&&function(oe,_e,Ne){const He=oe.context,Ge=He.gl,We=oe.useProgram("atmosphere"),Ye=new Ji(Ge.LEQUAL,Ji.ReadOnly,[0,1]),it=oe.transform,Je=function(Pt,ui){const Ai=Pt.properties.get("position"),$t=[-Ai.x,-Ai.y,-Ai.z],ki=a.ag(new Float64Array(16));return Pt.properties.get("anchor")==="map"&&(a.b6(ki,ki,ui.rollInRadians),a.b7(ki,ki,-ui.pitchInRadians),a.b6(ki,ki,ui.bearingInRadians),a.b7(ki,ki,ui.center.lat*Math.PI/180),a.bz(ki,ki,-ui.center.lng*Math.PI/180)),a.c6($t,$t,ki),$t}(Ne,oe.transform),lt=it.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ht=_e.properties.get("atmosphere-blend")*lt.projectionTransition;if(ht===0)return;const nt=xo(it.worldSize,it.center.lat),mt=it.inverseProjectionMatrix,Dt=new Float64Array(4);Dt[3]=1,a.aw(Dt,Dt,it.modelViewProjectionMatrix),Dt[0]/=Dt[3],Dt[1]/=Dt[3],Dt[2]/=Dt[3],Dt[3]=1,a.aw(Dt,Dt,mt),Dt[0]/=Dt[3],Dt[1]/=Dt[3],Dt[2]/=Dt[3],Dt[3]=1;const Nt=((Pt,ui,Ai,$t,ki)=>({u_sun_pos:Pt,u_atmosphere_blend:ui,u_globe_position:Ai,u_globe_radius:$t,u_inv_proj_matrix:ki}))(Je,ht,[Dt[0],Dt[1],Dt[2]],nt,mt),Lt=Xc(He,_e);We.draw(He,Ge.TRIANGLES,Ye,rn.disabled,rr.alphaBlended,_n.disabled,Nt,null,null,"atmosphere",Lt.vertexBuffer,Lt.indexBuffer,Lt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const oe=function(_e,Ne){let He=null;const Ge=Object.values(_e._layers).flatMap(Je=>Je.source&&!Je.isHidden(Ne)?[_e.sourceCaches[Je.source]]:[]),We=Ge.filter(Je=>Je.getSource().type==="vector"),Ye=Ge.filter(Je=>Je.getSource().type!=="vector"),it=Je=>{(!He||He.getSource().maxzoom<Je.getSource().maxzoom)&&(He=Je)};return We.forEach(Je=>it(Je)),He||Ye.forEach(Je=>it(Je)),He}(this.style,this.transform.zoom);oe&&function(_e,Ne,He){for(let Ge=0;Ge<He.length;Ge++)Zc(_e,Ne,He[Ge])}(this,oe,oe.getVisibleCoordinates())}this.options.showPadding&&function(oe){const _e=oe.transform.padding;Tl(oe,oe.transform.height-(_e.top||0),3,Yn),Tl(oe,_e.bottom||0,3,$c),oo(oe,_e.left||0,3,ma),oo(oe,oe.transform.width-(_e.right||0),3,nl);const Ne=oe.transform.centerPoint;(function(He,Ge,We,Ye){Oa(He,Ge-1,We-10,2,20,Ye),Oa(He,Ge-10,We-1,20,2,Ye)})(oe,Ne.x,oe.transform.height-Ne.y,Bs)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let x=this.terrainFacilitator.dirty;x||(x=r?!a.c9(d,y):!a.ca(d,y)),x||(x=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),x&&(a.cb(d,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(S,N){const U=S.context,z=U.gl,X=S.transform,Y=rr.unblended,Ae=new Ji(z.LEQUAL,Ji.ReadWrite,[0,1]),oe=N.sourceCache.getRenderableTiles(),_e=S.useProgram("terrainDepth");U.bindFramebuffer.set(N.getFramebuffer("depth").framebuffer),U.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),U.clear({color:a.bf.transparent,depth:1});for(const Ne of oe){const He=N.getTerrainMesh(Ne.tileID),Ge=N.getTerrainData(Ne.tileID),We=X.getProjectionData({overscaledTileID:Ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ye={u_ele_delta:N.getMeshFrameDelta(X.zoom)};_e.draw(U,z.TRIANGLES,Ae,rn.disabled,Y,_n.backCCW,Ye,Ge,We,"terrain",He.vertexBuffer,He.indexBuffer,He.segments)}U.bindFramebuffer.set(null),U.viewport.set([0,0,S.width,S.height])}(this,this.style.map.terrain),function(S,N){const U=S.context,z=U.gl,X=S.transform,Y=rr.unblended,Ae=new Ji(z.LEQUAL,Ji.ReadWrite,[0,1]),oe=N.getCoordsTexture(),_e=N.sourceCache.getRenderableTiles(),Ne=S.useProgram("terrainCoords");U.bindFramebuffer.set(N.getFramebuffer("coords").framebuffer),U.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),U.clear({color:a.bf.transparent,depth:1}),N.coordsIndex=[];for(const He of _e){const Ge=N.getTerrainMesh(He.tileID),We=N.getTerrainData(He.tileID);U.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,oe.texture);const Ye={u_terrain_coords_id:(255-N.coordsIndex.length)/255,u_texture:0,u_ele_delta:N.getMeshFrameDelta(X.zoom)},it=X.getProjectionData({overscaledTileID:He.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ne.draw(U,z.TRIANGLES,Ae,rn.disabled,Y,_n.backCCW,Ye,We,it,"terrain",Ge.vertexBuffer,Ge.indexBuffer,Ge.segments),N.coordsIndex.push(He.tileID.key)}U.bindFramebuffer.set(null),U.viewport.set([0,0,S.width,S.height])}(this,this.style.map.terrain))}renderLayer(r,d,y,x,S){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(x||[]).length)&&(this.id=y.id,a.cc(y)?function(N,U,z,X,Y,Ae){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:oe}=Ae,_e=rn.disabled,Ne=N.colorModeForRenderPass();(z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(He,Ge,We,Ye,it,Je,lt,ht,nt){const mt=Ge.transform,Dt=Ge.style.map.terrain,Nt=it==="map",Lt=Je==="map";for(const Pt of He){const ui=Ye.getTile(Pt),Ai=ui.getBucket(We);if(!Ai||!Ai.text||!Ai.text.segments.get().length)continue;const $t=a.an(Ai.textSizeData,mt.zoom),ki=a.aC(ui,1,Ge.transform.zoom),cn=fn(Nt,Ge.transform,ki),ir=We.layout.get("icon-text-fit")!=="none"&&Ai.hasIconData();if($t){const sr=Math.pow(2,mt.zoom-ui.tileID.overscaledZ),Ar=Dt?(Pr,kr)=>Dt.getElevation(Pt,Pr,kr):null;Mc(Ai,Nt,Lt,nt,mt,cn,sr,$t,ir,a.aD(mt,ui,lt,ht),Pt.toUnwrapped(),Ar)}}}(X,N,z,U,z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),Y),z.paint.get("icon-opacity").constantOr(1)!==0&&Da(N,U,z,X,!1,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),z.layout.get("icon-rotation-alignment"),z.layout.get("icon-pitch-alignment"),z.layout.get("icon-keep-upright"),_e,Ne,oe),z.paint.get("text-opacity").constantOr(1)!==0&&Da(N,U,z,X,!0,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.layout.get("text-keep-upright"),_e,Ne,oe),U.map.showCollisionBoxes&&(Ku(N,U,z,X,!0),Ku(N,U,z,X,!1))}(r,d,y,x,this.style.placement.variableOffsets,S):a.cd(y)?function(N,U,z,X,Y){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:Ae}=Y,oe=z.paint.get("circle-opacity"),_e=z.paint.get("circle-stroke-width"),Ne=z.paint.get("circle-stroke-opacity"),He=!z.layout.get("circle-sort-key").isConstant();if(oe.constantOr(1)===0&&(_e.constantOr(1)===0||Ne.constantOr(1)===0))return;const Ge=N.context,We=Ge.gl,Ye=N.transform,it=N.getDepthModeForSublayer(0,Ji.ReadOnly),Je=rn.disabled,lt=N.colorModeForRenderPass(),ht=[],nt=Ye.getCircleRadiusCorrection();for(let mt=0;mt<X.length;mt++){const Dt=X[mt],Nt=U.getTile(Dt),Lt=Nt.getBucket(z);if(!Lt)continue;const Pt=z.paint.get("circle-translate"),ui=z.paint.get("circle-translate-anchor"),Ai=a.aD(Ye,Nt,Pt,ui),$t=Lt.programConfigurations.get(z.id),ki=N.useProgram("circle",$t),cn=Lt.layoutVertexBuffer,ir=Lt.indexBuffer,sr=N.style.map.terrain&&N.style.map.terrain.getTerrainData(Dt),Ar={programConfiguration:$t,program:ki,layoutVertexBuffer:cn,indexBuffer:ir,uniformValues:Zr(N,Nt,z,Ai,nt),terrainData:sr,projectionData:Ye.getProjectionData({overscaledTileID:Dt,applyGlobeMatrix:!Ae,applyTerrainMatrix:!0})};if(He){const Pr=Lt.segments.get();for(const kr of Pr)ht.push({segments:new a.aM([kr]),sortKey:kr.sortKey,state:Ar})}else ht.push({segments:Lt.segments,sortKey:0,state:Ar})}He&&ht.sort((mt,Dt)=>mt.sortKey-Dt.sortKey);for(const mt of ht){const{programConfiguration:Dt,program:Nt,layoutVertexBuffer:Lt,indexBuffer:Pt,uniformValues:ui,terrainData:Ai,projectionData:$t}=mt.state;Nt.draw(Ge,We.TRIANGLES,it,Je,lt,_n.backCCW,ui,Ai,$t,z.id,Lt,Pt,mt.segments,z.paint,N.transform.zoom,Dt)}}(r,d,y,x,S):a.ce(y)?function(N,U,z,X,Y){if(z.paint.get("heatmap-opacity")===0)return;const Ae=N.context,{isRenderingToTexture:oe,isRenderingGlobe:_e}=Y;if(N.style.map.terrain){for(const Ne of X){const He=U.getTile(Ne);U.hasRenderableParent(Ne)||(N.renderPass==="offscreen"?Xl(N,He,z,Ne,_e):N.renderPass==="translucent"&&el(N,z,Ne,oe,_e))}Ae.viewport.set([0,0,N.width,N.height])}else N.renderPass==="offscreen"?function(Ne,He,Ge,We){const Ye=Ne.context,it=Ye.gl,Je=Ne.transform,lt=rn.disabled,ht=new rr([it.ONE,it.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(nt,mt,Dt){const Nt=nt.gl;nt.activeTexture.set(Nt.TEXTURE1),nt.viewport.set([0,0,mt.width/4,mt.height/4]);let Lt=Dt.heatmapFbos.get(a.c3);Lt?(Nt.bindTexture(Nt.TEXTURE_2D,Lt.colorAttachment.get()),nt.bindFramebuffer.set(Lt.framebuffer)):(Lt=To(nt,mt.width/4,mt.height/4),Dt.heatmapFbos.set(a.c3,Lt))})(Ye,Ne,Ge),Ye.clear({color:a.bf.transparent});for(let nt=0;nt<We.length;nt++){const mt=We[nt];if(He.hasRenderableParent(mt))continue;const Dt=He.getTile(mt),Nt=Dt.getBucket(Ge);if(!Nt)continue;const Lt=Nt.programConfigurations.get(Ge.id),Pt=Ne.useProgram("heatmap",Lt),ui=Je.getProjectionData({overscaledTileID:mt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ai=Je.getCircleRadiusCorrection();Pt.draw(Ye,it.TRIANGLES,Ji.disabled,lt,ht,_n.backCCW,wo(Dt,Je.zoom,Ge.paint.get("heatmap-intensity"),Ai),null,ui,Ge.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,Ge.paint,Je.zoom,Lt)}Ye.viewport.set([0,0,Ne.width,Ne.height])}(N,U,z,X):N.renderPass==="translucent"&&function(Ne,He){const Ge=Ne.context,We=Ge.gl;Ge.setColorMode(Ne.colorModeForRenderPass());const Ye=He.heatmapFbos.get(a.c3);Ye&&(Ge.activeTexture.set(We.TEXTURE0),We.bindTexture(We.TEXTURE_2D,Ye.colorAttachment.get()),Ge.activeTexture.set(We.TEXTURE1),Fo(Ge,He).bind(We.LINEAR,We.CLAMP_TO_EDGE),Ne.useProgram("heatmapTexture").draw(Ge,We.TRIANGLES,Ji.disabled,rn.disabled,Ne.colorModeForRenderPass(),_n.disabled,Hu(Ne,He,0,1),null,null,He.id,Ne.viewportBuffer,Ne.quadTriangleIndexBuffer,Ne.viewportSegments,He.paint,Ne.transform.zoom))}(N,z)}(r,d,y,x,S):a.cf(y)?function(N,U,z,X,Y){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:Ae}=Y,oe=z.paint.get("line-opacity"),_e=z.paint.get("line-width");if(oe.constantOr(1)===0||_e.constantOr(1)===0)return;const Ne=N.getDepthModeForSublayer(0,Ji.ReadOnly),He=N.colorModeForRenderPass(),Ge=z.paint.get("line-dasharray"),We=Ge.constantOr(1),Ye=z.paint.get("line-pattern"),it=Ye.constantOr(1),Je=z.paint.get("line-gradient"),lt=z.getCrossfadeParameters();let ht;ht=it?"linePattern":We&&Je?"lineGradientSDF":We?"lineSDF":Je?"lineGradient":"line";const nt=N.context,mt=nt.gl,Dt=N.transform;let Nt=!0;for(const Lt of X){const Pt=U.getTile(Lt);if(it&&!Pt.patternsLoaded())continue;const ui=Pt.getBucket(z);if(!ui)continue;const Ai=ui.programConfigurations.get(z.id),$t=N.context.program.get(),ki=N.useProgram(ht,Ai),cn=Nt||ki.program!==$t,ir=N.style.map.terrain&&N.style.map.terrain.getTerrainData(Lt),sr=Ye.constantOr(null),Ar=Ge&&Ge.constantOr(null);if(sr&&Pt.imageAtlas){const sa=Pt.imageAtlas,Us=sa.patternPositions[sr.to.toString()],Ds=sa.patternPositions[sr.from.toString()];Us&&Ds&&Ai.setConstantPatternPositions(Us,Ds)}else if(Ar){const sa=z.layout.get("line-cap")==="round",Us=N.lineAtlas.getDash(Ar.to,sa),Ds=N.lineAtlas.getDash(Ar.from,sa);Ai.setConstantDashPositions(Us,Ds)}const Pr=Dt.getProjectionData({overscaledTileID:Lt,applyGlobeMatrix:!Ae,applyTerrainMatrix:!0}),kr=Dt.getPixelScale();let Ln;it?(Ln=Dr(N,Pt,z,kr,lt),bA(nt,mt,Pt,Ai,lt)):We&&Je?(Ln=Gc(N,Pt,z,kr,lt,ui.lineClipsArray.length),as(N,U,nt,mt,z,ui,Lt,Ai,lt)):We?(Ln=Sc(N,Pt,z,kr,lt),Ic(N,nt,mt,Ai,cn,lt)):Je?(Ln=qc(N,Pt,z,kr,ui.lineClipsArray.length),Zs(N,U,nt,mt,z,ui,Lt)):Ln=Kl(N,Pt,z,kr);const Or=N.stencilModeForClipping(Lt);ki.draw(nt,mt.TRIANGLES,Ne,Or,He,_n.disabled,Ln,ir,Pr,z.id,ui.layoutVertexBuffer,ui.indexBuffer,ui.segments,z.paint,N.transform.zoom,Ai,ui.layoutVertexBuffer2),Nt=!1}}(r,d,y,x,S):a.cg(y)?function(N,U,z,X,Y){const Ae=z.paint.get("fill-color"),oe=z.paint.get("fill-opacity");if(oe.constantOr(1)===0)return;const{isRenderingToTexture:_e}=Y,Ne=N.colorModeForRenderPass(),He=z.paint.get("fill-pattern"),Ge=N.opaquePassEnabledForLayer()&&!He.constantOr(1)&&Ae.constantOr(a.bf.transparent).a===1&&oe.constantOr(0)===1?"opaque":"translucent";if(N.renderPass===Ge){const We=N.getDepthModeForSublayer(1,N.renderPass==="opaque"?Ji.ReadWrite:Ji.ReadOnly);El(N,U,z,X,We,Ne,!1,_e)}if(N.renderPass==="translucent"&&z.paint.get("fill-antialias")){const We=N.getDepthModeForSublayer(z.getPaintProperty("fill-outline-color")?2:0,Ji.ReadOnly);El(N,U,z,X,We,Ne,!0,_e)}}(r,d,y,x,S):a.ch(y)?function(N,U,z,X,Y){const Ae=z.paint.get("fill-extrusion-opacity");if(Ae===0)return;const{isRenderingToTexture:oe}=Y;if(N.renderPass==="translucent"){const _e=new Ji(N.context.gl.LEQUAL,Ji.ReadWrite,N.depthRangeFor3D);if(Ae!==1||z.paint.get("fill-extrusion-pattern").constantOr(1))No(N,U,z,X,_e,rn.disabled,rr.disabled,oe),No(N,U,z,X,_e,N.stencilModeFor3D(),N.colorModeForRenderPass(),oe);else{const Ne=N.colorModeForRenderPass();No(N,U,z,X,_e,rn.disabled,Ne,oe)}}}(r,d,y,x,S):a.ci(y)?function(N,U,z,X,Y){if(N.renderPass!=="offscreen"&&N.renderPass!=="translucent")return;const{isRenderingToTexture:Ae}=Y,oe=N.context,_e=N.style.projection.useSubdivision,Ne=N.getDepthModeForSublayer(0,Ji.ReadOnly),He=N.colorModeForRenderPass();if(N.renderPass==="offscreen")(function(Ge,We,Ye,it,Je,lt,ht){const nt=Ge.context,mt=nt.gl;for(const Dt of Ye){const Nt=We.getTile(Dt),Lt=Nt.dem;if(!Lt||!Lt.data||!Nt.needsHillshadePrepare)continue;const Pt=Lt.dim,ui=Lt.stride,Ai=Lt.getPixels();if(nt.activeTexture.set(mt.TEXTURE1),nt.pixelStoreUnpackPremultiplyAlpha.set(!1),Nt.demTexture=Nt.demTexture||Ge.getTileTexture(ui),Nt.demTexture){const ki=Nt.demTexture;ki.update(Ai,{premultiply:!1}),ki.bind(mt.NEAREST,mt.CLAMP_TO_EDGE)}else Nt.demTexture=new a.T(nt,Ai,mt.RGBA,{premultiply:!1}),Nt.demTexture.bind(mt.NEAREST,mt.CLAMP_TO_EDGE);nt.activeTexture.set(mt.TEXTURE0);let $t=Nt.fbo;if(!$t){const ki=new a.T(nt,{width:Pt,height:Pt,data:null},mt.RGBA);ki.bind(mt.LINEAR,mt.CLAMP_TO_EDGE),$t=Nt.fbo=nt.createFramebuffer(Pt,Pt,!0,!1),$t.colorAttachment.set(ki.texture)}nt.bindFramebuffer.set($t.framebuffer),nt.viewport.set([0,0,Pt,Pt]),Ge.useProgram("hillshadePrepare").draw(nt,mt.TRIANGLES,Je,lt,ht,_n.disabled,xl(Nt.tileID,Lt),null,null,it.id,Ge.rasterBoundsBuffer,Ge.quadTriangleIndexBuffer,Ge.rasterBoundsSegments),Nt.needsHillshadePrepare=!1}})(N,U,X,z,Ne,rn.disabled,He),oe.viewport.set([0,0,N.width,N.height]);else if(N.renderPass==="translucent")if(_e){const[Ge,We,Ye]=N.stencilConfigForOverlapTwoPass(X);Wu(N,U,z,Ye,Ge,Ne,He,!1,Ae),Wu(N,U,z,Ye,We,Ne,He,!0,Ae)}else{const[Ge,We]=N.getStencilConfigForOverlapAndUpdateStencilID(X);Wu(N,U,z,We,Ge,Ne,He,!1,Ae)}}(r,d,y,x,S):a.cj(y)?function(N,U,z,X,Y){if(N.renderPass!=="translucent"||!X.length)return;const{isRenderingToTexture:Ae}=Y,oe=N.style.projection.useSubdivision,_e=N.getDepthModeForSublayer(0,Ji.ReadOnly),Ne=N.colorModeForRenderPass();if(oe){const[He,Ge,We]=N.stencilConfigForOverlapTwoPass(X);tl(N,U,z,We,He,_e,Ne,!1,Ae),tl(N,U,z,We,Ge,_e,Ne,!0,Ae)}else{const[He,Ge]=N.getStencilConfigForOverlapAndUpdateStencilID(X);tl(N,U,z,Ge,He,_e,Ne,!1,Ae)}}(r,d,y,x,S):a.bK(y)?function(N,U,z,X,Y){if(N.renderPass!=="translucent"||z.paint.get("raster-opacity")===0||!X.length)return;const{isRenderingToTexture:Ae}=Y,oe=U.getSource(),_e=N.style.projection.useSubdivision;if(oe instanceof si)il(N,U,z,X,null,!1,!1,oe.tileCoords,oe.flippedWindingOrder,Ae);else if(_e){const[Ne,He,Ge]=N.stencilConfigForOverlapTwoPass(X);il(N,U,z,Ge,Ne,!1,!0,$u,!1,Ae),il(N,U,z,Ge,He,!0,!0,$u,!1,Ae)}else{const[Ne,He]=N.getStencilConfigForOverlapAndUpdateStencilID(X);il(N,U,z,He,Ne,!1,!0,$u,!1,Ae)}}(r,d,y,x,S):a.ck(y)?function(N,U,z,X,Y){const Ae=z.paint.get("background-color"),oe=z.paint.get("background-opacity");if(oe===0)return;const{isRenderingToTexture:_e}=Y,Ne=N.context,He=Ne.gl,Ge=N.style.projection,We=N.transform,Ye=We.tileSize,it=z.paint.get("background-pattern");if(N.isPatternMissing(it))return;const Je=!it&&Ae.a===1&&oe===1&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass!==Je)return;const lt=rn.disabled,ht=N.getDepthModeForSublayer(0,Je==="opaque"?Ji.ReadWrite:Ji.ReadOnly),nt=N.colorModeForRenderPass(),mt=N.useProgram(it?"backgroundPattern":"background"),Dt=X||Ti(We,{tileSize:Ye,terrain:N.style.map.terrain});it&&(Ne.activeTexture.set(He.TEXTURE0),N.imageManager.bind(N.context));const Nt=z.getCrossfadeParameters();for(const Lt of Dt){const Pt=We.getProjectionData({overscaledTileID:Lt,applyGlobeMatrix:!_e,applyTerrainMatrix:!0}),ui=it?Wl(oe,N,it,{tileID:Lt,tileSize:Ye},Nt):Ks(oe,Ae),Ai=N.style.map.terrain&&N.style.map.terrain.getTerrainData(Lt),$t=Ge.getMeshFromTileID(Ne,Lt.canonical,!1,!0,"raster");mt.draw(Ne,He.TRIANGLES,ht,lt,nt,_n.backCCW,ui,Ai,Pt,z.id,$t.vertexBuffer,$t.indexBuffer,$t.segments)}}(r,0,y,x,S):a.cl(y)&&function(N,U,z,X){const{isRenderingGlobe:Y}=X,Ae=N.context,oe=z.implementation,_e=N.style.projection,Ne=N.transform,He=Ne.getProjectionDataForCustomLayer(Y),Ge={farZ:Ne.farZ,nearZ:Ne.nearZ,fov:Ne.fov*Math.PI/180,modelViewProjectionMatrix:Ne.modelViewProjectionMatrix,projectionMatrix:Ne.projectionMatrix,shaderData:{variantName:_e.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${_e.shaderPreludeCode.vertexSource}`,define:_e.shaderDefine},defaultProjectionData:He},We=oe.renderingMode?oe.renderingMode:"2d";if(N.renderPass==="offscreen"){const Ye=oe.prerender;Ye&&(N.setCustomLayerDefaults(),Ae.setColorMode(N.colorModeForRenderPass()),Ye.call(oe,Ae.gl,Ge),Ae.setDirty(),N.setBaseState())}else if(N.renderPass==="translucent"){N.setCustomLayerDefaults(),Ae.setColorMode(N.colorModeForRenderPass()),Ae.setStencilMode(rn.disabled);const Ye=We==="3d"?N.getDepthModeFor3D():N.getDepthModeForSublayer(0,Ji.ReadOnly);Ae.setDepthMode(Ye),oe.render(Ae.gl,Ge),Ae.setDirty(),N.setBaseState(),Ae.bindFramebuffer.set(null)}}(r,0,y,S))}saveTileTexture(r){const d=this._tileTextures[r.size[0]];d?d.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const d=this._tileTextures[r];return d&&d.length>0?d.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const d=this.imageManager.getPattern(r.from.toString()),y=this.imageManager.getPattern(r.to.toString());return!d||!y}useProgram(r,d,y=!1,x=[]){this.cache=this.cache||{};const S=!!this.style.map.terrain,N=this.style.projection,U=y?ea.projectionMercator:N.shaderPreludeCode,z=y?ja:N.shaderDefine,X=r+(d?d.cacheKey:"")+`/${y?Cn:N.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(S?"/terrain":"")+(x?`/${x.join("/")}`:"");return this.cache[X]||(this.cache[X]=new Ki(this.context,ea[r],d,Wo[r],this._showOverdrawInspector,S,U,z,x)),this.cache[X]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:d}=this.context.gl;return this.width!==r||this.height!==d}}function rl(w,r){let d,y=!1,x=null,S=null;const N=()=>{x=null,y&&(w.apply(S,d),x=setTimeout(N,r),y=!1)};return(...U)=>(y=!0,S=this,d=U,x||N(),x)}class Cs{constructor(r){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let y;return d.split("&").map(x=>x.split("=")).forEach(x=>{x[0]===this._hashName&&(y=x)}),(y&&y[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(!this._isValidHash(d))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:y,pitch:+(d[4]||0)}),!0},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const y=d.join("/");let x=y;x.split("&").length>0&&(x=x.split("&")[0]),this._hashName&&(x=`${this._hashName}=${y}`);let S=window.location.hash.replace(x,"");S.startsWith("#&")?S=S.slice(0,1)+S.slice(2):S==="#"&&(S="");let N=window.location.href.replace(/(#.+)?$/,S);N=N.replace("&&","&"),window.history.replaceState(window.history.state,null,N)},this._updateHash=rl(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const d=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,x=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,x),N=Math.round(d.lng*S)/S,U=Math.round(d.lat*S)/S,z=this._map.getBearing(),X=this._map.getPitch();let Y="";if(Y+=r?`/${N}/${U}/${y}`:`${y}/${U}/${N}`,(z||X)&&(Y+="/"+Math.round(10*z)/10),X&&(Y+=`/${Math.round(X)}`),this._hashName){const Ae=this._hashName;let oe=!1;const _e=window.location.hash.slice(1).split("&").map(Ne=>{const He=Ne.split("=")[0];return He===Ae?(oe=!0,`${He}=${Y}`):Ne}).filter(Ne=>Ne);return oe||_e.push(`${Ae}=${Y}`),`#${_e.join("&")}`}return`#${Y}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new a.S(+r[2],+r[1])}catch{return!1}const d=+r[0],y=+(r[3]||0),x=+(r[4]||0);return d>=this._map.getMinZoom()&&d<=this._map.getMaxZoom()&&y>=-180&&y<=180&&x>=this._map.getMinPitch()&&x<=this._map.getMaxPitch()}}const Mo={linearity:.3,easing:a.cm(0,0,.3,1)},Yl=a.e({deceleration:2500,maxSpeed:1400},Mo),Ad=a.e({deceleration:20,maxSpeed:1400},Mo),Nh=a.e({deceleration:1e3,maxSpeed:360},Mo),hd=a.e({deceleration:1e3,maxSpeed:90},Mo),Ps=a.e({deceleration:1e3,maxSpeed:360},Mo);class JA{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:P.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,d=P.now();for(;r.length>0&&d-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)d.zoom+=S.zoomDelta||0,d.bearing+=S.bearingDelta||0,d.pitch+=S.pitchDelta||0,d.roll+=S.rollDelta||0,S.panDelta&&d.pan._add(S.panDelta),S.around&&(d.around=S.around),S.pinchAround&&(d.pinchAround=S.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(d.pan.mag()){const S=ec(d.pan.mag(),y,a.e({},Yl,r||{})),N=d.pan.mult(S.amount/d.pan.mag()),U=this._map.cameraHelper.handlePanInertia(N,this._map.transform);x.center=U.easingCenter,x.offset=U.easingOffset,Jl(x,S)}if(d.zoom){const S=ec(d.zoom,y,Ad);x.zoom=this._map.transform.zoom+S.amount,Jl(x,S)}if(d.bearing){const S=ec(d.bearing,y,Nh);x.bearing=this._map.transform.bearing+a.ah(S.amount,-179,179),Jl(x,S)}if(d.pitch){const S=ec(d.pitch,y,hd);x.pitch=this._map.transform.pitch+S.amount,Jl(x,S)}if(d.roll){const S=ec(d.roll,y,Ps);x.roll=this._map.transform.roll+a.ah(S.amount,-179,179),Jl(x,S)}if(x.zoom||x.bearing){const S=d.pinchAround===void 0?d.around:d.pinchAround;x.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),a.e(x,{noMoveStart:!0})}}function Jl(w,r){(!w.duration||w.duration<r.duration)&&(w.duration=r.duration,w.easing=r.easing)}function ec(w,r,d){const{maxSpeed:y,linearity:x,deceleration:S}=d,N=a.ah(w*x/(r/1e3),-y,y),U=Math.abs(N)/(S*x);return{easing:d.easing,duration:1e3*U,amount:N*(U/2)}}class Fa extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,y,x={}){y=y instanceof MouseEvent?y:new MouseEvent(r,y);const S=F.mousePos(d.getCanvas(),y),N=d.unproject(S);super(r,a.e({point:S,lngLat:N,originalEvent:y},x)),this._defaultPrevented=!1,this.target=d}}class lo extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,y){const x=r==="touchend"?y.changedTouches:y.touches,S=F.touchPos(d.getCanvasContainer(),x),N=S.map(z=>d.unproject(z)),U=S.reduce((z,X,Y,Ae)=>z.add(X.div(Ae.length)),new a.P(0,0));super(r,{points:S,point:U,lngLats:N,lngLat:d.unproject(U),originalEvent:y}),this._defaultPrevented=!1}}class Fl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,y){super(r,{originalEvent:y}),this._defaultPrevented=!1}}class sl{constructor(r,d){this._map=r,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Fl(r.type,this._map,r))}mousedown(r,d){return this._mousedownPos=d,this._firePreventable(new Fa(r.type,this._map,r))}mouseup(r){this._map.fire(new Fa(r.type,this._map,r))}click(r,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Fa(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Fa(r.type,this._map,r))}mouseover(r){this._map.fire(new Fa(r.type,this._map,r))}mouseout(r){this._map.fire(new Fa(r.type,this._map,r))}touchstart(r){return this._firePreventable(new lo(r.type,this._map,r))}touchmove(r){this._map.fire(new lo(r.type,this._map,r))}touchend(r){this._map.fire(new lo(r.type,this._map,r))}touchcancel(r){this._map.fire(new lo(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class al{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Fa(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Fa(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Eu{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(a.P.convert(r),this._map.terrain)}}class M{constructor(r,d){this._map=r,this._tr=new Eu(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,d){this.isEnabled()&&r.shiftKey&&r.button===0&&(F.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(r,d){if(!this._active)return;const y=d;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const x=this._startPos;this._lastPos=y,this._box||(this._box=F.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const S=Math.min(x.x,y.x),N=Math.max(x.x,y.x),U=Math.min(x.y,y.y),z=Math.max(x.y,y.y);F.setTransform(this._box,`translate(${S}px,${U}px)`),this._box.style.width=N-S+"px",this._box.style.height=z-U+"px"}mouseupWindow(r,d){if(!this._active||r.button!==0)return;const y=this._startPos,x=d;if(this.reset(),F.suppressClick(),y.x!==x.x||y.y!==x.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:r})),{cameraAnimation:S=>S.fitScreenCoordinates(y,x,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,d){return this._map.fire(new a.l(r,{originalEvent:d}))}}function O(w,r){if(w.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${r.length}`);const d={};for(let y=0;y<w.length;y++)d[w[y].identifier]=r[y];return d}class Z{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,d,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),y.length===this.numTouches&&(this.centroid=function(x){const S=new a.P(0,0);for(const N of x)S._add(N);return S.div(x.length)}(d),this.touches=O(y,d)))}touchmove(r,d,y){if(this.aborted||!this.centroid)return;const x=O(y,d);for(const S in this.touches){const N=x[S];(!N||N.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(r,d,y){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class le{constructor(r){this.singleTap=new Z(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,d,y){this.singleTap.touchstart(r,d,y)}touchmove(r,d,y){this.singleTap.touchmove(r,d,y)}touchend(r,d,y){const x=this.singleTap.touchend(r,d,y);if(x){const S=r.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(x)<30;if(S&&N||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class Ce{constructor(r){this._tr=new Eu(r),this._zoomIn=new le({numTouches:1,numTaps:2}),this._zoomOut=new le({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,d,y){this._zoomIn.touchstart(r,d,y),this._zoomOut.touchstart(r,d,y)}touchmove(r,d,y){this._zoomIn.touchmove(r,d,y),this._zoomOut.touchmove(r,d,y)}touchend(r,d,y){const x=this._zoomIn.touchend(r,d,y),S=this._zoomOut.touchend(r,d,y),N=this._tr;return x?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:U=>U.easeTo({duration:300,zoom:N.zoom+1,around:N.unproject(x)},{originalEvent:r})}):S?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:U=>U.easeTo({duration:300,zoom:N.zoom-1,around:N.unproject(S)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Me{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const d=this._moveFunction(...r);if(d.bearingDelta||d.pitchDelta||d.rollDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(r,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(d)?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,d){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const x=Array.isArray(d)?d[0]:d;return!this._moved&&x.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=x,this._move(y,x))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&F.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Le=0,De=2,Oe={[Le]:1,[De]:2};class Pe{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const d=F.mouseButton(r);this._eventButton=d}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(d,y){const x=Oe[y];return d.buttons===void 0||(d.buttons&x)!==x}(r,this._eventButton)}isValidEndEvent(r){return F.mouseButton(r)===this._eventButton}}class pt{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class jt{constructor(r=new Pe({checkCorrectEvent:()=>!0}),d=new pt){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=d}_executeRelevantHandler(r,d,y){return r instanceof MouseEvent?d(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?y(r):void 0}startMove(r){this._executeRelevantHandler(r,d=>this.mouseMoveStateManager.startMove(d),d=>this.oneFingerTouchMoveStateManager.startMove(d))}endMove(r){this._executeRelevantHandler(r,d=>this.mouseMoveStateManager.endMove(d),d=>this.oneFingerTouchMoveStateManager.endMove(d))}isValidStartEvent(r){return this._executeRelevantHandler(r,d=>this.mouseMoveStateManager.isValidStartEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidStartEvent(d))}isValidMoveEvent(r){return this._executeRelevantHandler(r,d=>this.mouseMoveStateManager.isValidMoveEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(d))}isValidEndEvent(r){return this._executeRelevantHandler(r,d=>this.mouseMoveStateManager.isValidEndEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidEndEvent(d))}}const It=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=r=>{r.preventDefault()}};class Bt{constructor(r,d){this._clickTolerance=r.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,d,y){return this._calculateTransform(r,d,y)}touchmove(r,d,y){if(this._active){if(!this._shouldBePrevented(y.length))return r.preventDefault(),this._calculateTransform(r,d,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,d,y){this._calculateTransform(r,d,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,d,y){y.length>0&&(this._active=!0);const x=O(y,d),S=new a.P(0,0),N=new a.P(0,0);let U=0;for(const X in x){const Y=x[X],Ae=this._touches[X];Ae&&(S._add(Y),N._add(Y.sub(Ae)),U++,x[X]=Y)}if(this._touches=x,this._shouldBePrevented(U)||!N.mag())return;const z=N.div(U);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(U),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ti{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,d,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([d[0],d[1]]))}touchmove(r,d,y){if(!this._firstTwoTouches)return;r.preventDefault();const[x,S]=this._firstTwoTouches,N=zt(y,d,x),U=zt(y,d,S);if(!N||!U)return;const z=this._aroundCenter?null:N.add(U).div(2);return this._move([N,U],z,r)}touchend(r,d,y){if(!this._firstTwoTouches)return;const[x,S]=this._firstTwoTouches,N=zt(y,d,x),U=zt(y,d,S);N&&U||(this._active&&F.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function zt(w,r,d){for(let y=0;y<w.length;y++)if(w[y].identifier===d)return r[y]}function ct(w,r){return Math.log(w/r)/Math.LN2}class bt extends ti{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,d){const y=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(ct(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ct(this._distance,y),pinchAround:d}}}function Xt(w,r){return 180*w.angleWith(r)/Math.PI}class ri extends ti{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,d,y){const x=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xt(this._vector,x),pinchAround:d}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const d=25/(Math.PI*this._minDiameter)*360,y=Xt(r,this._startVector);return Math.abs(y)<d}}function ii(w){return Math.abs(w.y)>Math.abs(w.x)}class ji extends ti{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,d,y){super.touchstart(r,d,y),this._currentTouchCount=y.length}_start(r){this._lastPoints=r,ii(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,d,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const x=r[0].sub(this._lastPoints[0]),S=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(x,S,y.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(x.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(r,d,y){if(this._valid!==void 0)return this._valid;const x=r.mag()>=2,S=d.mag()>=2;if(!x&&!S)return;if(!x||!S)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const N=r.y>0==d.y>0;return ii(r)&&ii(d)&&N}}const Ci={panStep:100,bearingStep:15,pitchStep:10};class Xi{constructor(r){this._tr=new Eu(r);const d=Ci;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let d=0,y=0,x=0,S=0,N=0;switch(r.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:r.shiftKey?y=-1:(r.preventDefault(),S=-1);break;case 39:r.shiftKey?y=1:(r.preventDefault(),S=1);break;case 38:r.shiftKey?x=1:(r.preventDefault(),N=-1);break;case 40:r.shiftKey?x=-1:(r.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(y=0,x=0),{cameraAnimation:U=>{const z=this._tr;U.easeTo({duration:300,easeId:"keyboardHandler",easing:Fi,zoom:d?Math.round(z.zoom)+d*(r.shiftKey?2:1):z.zoom,bearing:z.bearing+y*this._bearingStep,pitch:z.pitch+x*this._pitchStep,offset:[-S*this._panStep,-N*this._panStep],center:z.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Fi(w){return w*(2-w)}const er=4.000244140625,lr=1/450;class kn{constructor(r,d){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=r,this._tr=new Eu(r),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=lr}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let d=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const y=P.now(),x=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,d!==0&&d%er==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(x*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),r.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=r,this._delta-=d,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=F.mousePos(this._map.getCanvas(),r),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(a.S.convert(y.center)):d,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const U=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=U),typeof this._targetZoom=="number"&&(this._targetZoom+=U)}if(this._delta!==0){const U=this._type==="wheel"&&Math.abs(this._delta)>er?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&z!==0&&(z=1/z);const X=typeof this._targetZoom!="number"?r.scale:a.af(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),a.ak(X*z)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,y=this._startZoom,x=this._easing;let S,N=!1;if(this._type==="wheel"&&y&&x){const U=P.now()-this._lastWheelEventTime,z=Math.min((U+5)/200,1),X=x(z);S=a.C.number(y,d,X),z<1?this._frameId||(this._frameId=!0):N=!0}else S=d,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=S,{noInertia:!0,needsRenderFrame:!N,zoomDelta:S-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let d=a.co;if(this._prevEase){const y=this._prevEase,x=(P.now()-y.start)/y.duration,S=y.easing(x+.01)-y.easing(x),N=.27/Math.sqrt(S*S+1e-4)*.01,U=Math.sqrt(.0729-N*N);d=a.cm(N,U,.25,1)}return this._prevEase={start:P.now(),duration:r,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class In{constructor(r,d){this._clickZoom=r,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Kn{constructor(r){this._tr=new Eu(r),this.reset()}reset(){this._active=!1}dblclick(r,d){return r.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class en{constructor(){this._tap=new le({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,d,y){if(!this._swipePoint)if(this._tapTime){const x=d[0],S=r.timeStamp-this._tapTime<500,N=this._tapPoint.dist(x)<30;S&&N?y.length>0&&(this._swipePoint=x,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(r,d,y)}touchmove(r,d,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const x=d[0],S=x.y-this._swipePoint.y;return this._swipePoint=x,r.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(r,d,y)}touchend(r,d,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const x=this._tap.touchend(r,d,y);x&&(this._tapTime=r.timeStamp,this._tapPoint=x)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sn{constructor(r,d,y){this._el=r,this._mousePan=d,this._touchPan=y}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class cr{constructor(r,d,y,x){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=d,this._mousePitch=y,this._mouseRoll=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class an{constructor(r,d,y,x){this._el=r,this._touchZoom=d,this._touchRotate=y,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class yn{constructor(r,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=F.create("div","maplibregl-cooperative-gesture-screen",r);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),x=document.createElement("div");x.className="maplibregl-desktop-message",x.textContent=d,this._container.appendChild(x);const S=document.createElement("div");S.className="maplibregl-mobile-message",S.textContent=y,this._container.appendChild(S),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(F.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,d){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:r,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Qn=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class tr extends a.l{}function ks(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class Tr{constructor(r,d){this.handleWindowEvent=x=>{this.handleEvent(x,`${x.type}Window`)},this.handleEvent=(x,S)=>{if(x.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const N=x.type==="renderFrame"?void 0:x,U={needsRenderFrame:!1},z={},X={};for(const{handlerName:oe,handler:_e,allowed:Ne}of this._handlers){if(!_e.isEnabled())continue;let He;if(this._blockedByActive(X,Ne,oe))_e.reset();else if(_e[S||x.type]){if(a.cp(x,S||x.type)){const Ge=F.mousePos(this._map.getCanvas(),x);He=_e[S||x.type](x,Ge)}else if(a.cq(x,S||x.type)){const Ge=this._getMapTouches(x.touches),We=F.touchPos(this._map.getCanvas(),Ge);He=_e[S||x.type](x,We,Ge)}else a.cr(S||x.type)||(He=_e[S||x.type](x));this.mergeHandlerResult(U,z,He,oe,N),He&&He.needsRenderFrame&&this._triggerRenderFrame()}(He||_e.isActive())&&(X[oe]=_e)}const Y={};for(const oe in this._previousActiveHandlers)X[oe]||(Y[oe]=N);this._previousActiveHandlers=X,(Object.keys(Y).length||ks(U))&&(this._changes.push([U,z,Y]),this._triggerRenderFrame()),(Object.keys(X).length||ks(U))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ae}=U;Ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ae(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new JA(r),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[x,S,N]of this._listeners)F.addEventListener(x,S,x===document?this.handleWindowEvent:this.handleEvent,N)}destroy(){for(const[r,d,y]of this._listeners)F.removeEventListener(r,d,r===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(r){const d=this._map,y=d.getCanvasContainer();this._add("mapEvent",new sl(d,r));const x=d.boxZoom=new M(d,r);this._add("boxZoom",x),r.interactive&&r.boxZoom&&x.enable();const S=d.cooperativeGestures=new yn(d,r.cooperativeGestures);this._add("cooperativeGestures",S),r.cooperativeGestures&&S.enable();const N=new Ce(d),U=new Kn(d);d.doubleClickZoom=new In(U,N),this._add("tapZoom",N),this._add("clickZoom",U),r.interactive&&r.doubleClickZoom&&d.doubleClickZoom.enable();const z=new en;this._add("tapDragZoom",z);const X=d.touchPitch=new ji(d);this._add("touchPitch",X),r.interactive&&r.touchPitch&&d.touchPitch.enable(r.touchPitch);const Y=()=>d.project(d.getCenter()),Ae=function({enable:Je,clickTolerance:lt,aroundCenter:ht=!0,minPixelCenterThreshold:nt=100,rotateDegreesPerPixelMoved:mt=.8},Dt){const Nt=new Pe({checkCorrectEvent:Lt=>F.mouseButton(Lt)===0&&Lt.ctrlKey||F.mouseButton(Lt)===2&&!Lt.ctrlKey});return new Me({clickTolerance:lt,move:(Lt,Pt)=>{const ui=Dt();if(ht&&Math.abs(ui.y-Lt.y)>nt)return{bearingDelta:a.cn(new a.P(Lt.x,Pt.y),Pt,ui)};let Ai=(Pt.x-Lt.x)*mt;return ht&&Pt.y<ui.y&&(Ai=-Ai),{bearingDelta:Ai}},moveStateManager:Nt,enable:Je,assignEvents:It})}(r,Y),oe=function({enable:Je,clickTolerance:lt,pitchDegreesPerPixelMoved:ht=-.5}){const nt=new Pe({checkCorrectEvent:mt=>F.mouseButton(mt)===0&&mt.ctrlKey||F.mouseButton(mt)===2});return new Me({clickTolerance:lt,move:(mt,Dt)=>({pitchDelta:(Dt.y-mt.y)*ht}),moveStateManager:nt,enable:Je,assignEvents:It})}(r),_e=function({enable:Je,clickTolerance:lt,rollDegreesPerPixelMoved:ht=.3},nt){const mt=new Pe({checkCorrectEvent:Dt=>F.mouseButton(Dt)===2&&Dt.ctrlKey});return new Me({clickTolerance:lt,move:(Dt,Nt)=>{const Lt=nt();let Pt=(Nt.x-Dt.x)*ht;return Nt.y<Lt.y&&(Pt=-Pt),{rollDelta:Pt}},moveStateManager:mt,enable:Je,assignEvents:It})}(r,Y);d.dragRotate=new cr(r,Ae,oe,_e),this._add("mouseRotate",Ae,["mousePitch"]),this._add("mousePitch",oe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",_e,["mousePitch"]),r.interactive&&r.dragRotate&&d.dragRotate.enable();const Ne=function({enable:Je,clickTolerance:lt}){const ht=new Pe({checkCorrectEvent:nt=>F.mouseButton(nt)===0&&!nt.ctrlKey});return new Me({clickTolerance:lt,move:(nt,mt)=>({around:mt,panDelta:mt.sub(nt)}),activateOnStart:!0,moveStateManager:ht,enable:Je,assignEvents:It})}(r),He=new Bt(r,d);d.dragPan=new Sn(y,Ne,He),this._add("mousePan",Ne),this._add("touchPan",He,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&d.dragPan.enable(r.dragPan);const Ge=new ri,We=new bt;d.touchZoomRotate=new an(y,We,Ge,z),this._add("touchRotate",Ge,["touchPan","touchZoom"]),this._add("touchZoom",We,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&d.touchZoomRotate.enable(r.touchZoomRotate);const Ye=d.scrollZoom=new kn(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Ye,["mousePan"]),r.interactive&&r.scrollZoom&&d.scrollZoom.enable(r.scrollZoom);const it=d.keyboard=new Xi(d);this._add("keyboard",it),r.interactive&&r.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new al(d))}_add(r,d,y){this._handlers.push({handlerName:r,handler:d,allowed:y}),this._handlersById[r]=d}stop(r){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Qn(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,d,y){for(const x in r)if(x!==y&&(!d||d.indexOf(x)<0))return!0;return!1}_getMapTouches(r){const d=[];for(const y of r)this._el.contains(y.target)&&d.push(y);return d}mergeHandlerResult(r,d,y,x,S){if(!y)return;a.e(r,y);const N={handlerName:x,originalEvent:y.originalEvent||S};y.zoomDelta!==void 0&&(d.zoom=N),y.panDelta!==void 0&&(d.drag=N),y.rollDelta!==void 0&&(d.roll=N),y.pitchDelta!==void 0&&(d.pitch=N),y.bearingDelta!==void 0&&(d.rotate=N)}_applyChanges(){const r={},d={},y={};for(const[x,S,N]of this._changes)x.panDelta&&(r.panDelta=(r.panDelta||new a.P(0,0))._add(x.panDelta)),x.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+x.pitchDelta),x.rollDelta&&(r.rollDelta=(r.rollDelta||0)+x.rollDelta),x.around!==void 0&&(r.around=x.around),x.pinchAround!==void 0&&(r.pinchAround=x.pinchAround),x.noInertia&&(r.noInertia=x.noInertia),a.e(d,S),a.e(y,N);this._updateMapTransform(r,d,y),this._changes=[]}_updateMapTransform(r,d,y){const x=this._map,S=x._getTransformForUpdate(),N=x.terrain;if(!(ks(r)||N&&this._terrainMovement))return this._fireEvents(d,y,!0);x._stop(!0);let{panDelta:U,zoomDelta:z,bearingDelta:X,pitchDelta:Y,rollDelta:Ae,around:oe,pinchAround:_e}=r;_e!==void 0&&(oe=_e),oe=oe||x.transform.centerPoint,N&&!S.isPointOnMapSurface(oe)&&(oe=S.centerPoint);const Ne={panDelta:U,zoomDelta:z,rollDelta:Ae,pitchDelta:Y,bearingDelta:X,around:oe};this._map.cameraHelper.useGlobeControls&&!S.isPointOnMapSurface(oe)&&(oe=S.centerPoint);const He=oe.distSqr(S.centerPoint)<.01?S.center:S.screenPointToLocation(U?oe.sub(U):oe);this._handleMapControls({terrain:N,tr:S,deltasForHelper:Ne,preZoomAroundLoc:He,combinedEventsInProgress:d,panDelta:U}),x._applyUpdatedTransform(S),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(d,y,!0)}_handleMapControls({terrain:r,tr:d,deltasForHelper:y,preZoomAroundLoc:x,combinedEventsInProgress:S,panDelta:N}){const U=this._map.cameraHelper;if(U.handleMapControlsRollPitchBearingZoom(y,d),r)return U.useGlobeControls?(this._terrainMovement||!S.drag&&!S.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void U.handleMapControlsPan(y,d,x)):this._terrainMovement||!S.drag&&!S.zoom?void(S.drag&&this._terrainMovement&&N?d.setCenter(d.screenPointToLocation(d.centerPoint.sub(N))):U.handleMapControlsPan(y,d,x)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void U.handleMapControlsPan(y,d,x));U.handleMapControlsPan(y,d,x)}_fireEvents(r,d,y){const x=Qn(this._eventsInProgress),S=Qn(r),N={};for(const Ae in r){const{originalEvent:oe}=r[Ae];this._eventsInProgress[Ae]||(N[`${Ae}start`]=oe),this._eventsInProgress[Ae]=r[Ae]}!x&&S&&this._fireEvent("movestart",S.originalEvent);for(const Ae in N)this._fireEvent(Ae,N[Ae]);S&&this._fireEvent("move",S.originalEvent);for(const Ae in r){const{originalEvent:oe}=r[Ae];this._fireEvent(Ae,oe)}const U={};let z;for(const Ae in this._eventsInProgress){const{handlerName:oe,originalEvent:_e}=this._eventsInProgress[Ae];this._handlersById[oe].isActive()||(delete this._eventsInProgress[Ae],z=d[oe]||_e,U[`${Ae}end`]=z)}for(const Ae in U)this._fireEvent(Ae,U[Ae]);const X=Qn(this._eventsInProgress),Y=(x||S)&&!X;if(Y&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Ae=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Ae.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Ae)}if(y&&Y){this._updatingCamera=!0;const Ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),oe=_e=>_e!==0&&-this._bearingSnap<_e&&_e<this._bearingSnap;!Ae||!Ae.essential&&P.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:z})),oe(this._map.getBearing())&&this._map.resetNorth()):(oe(Ae.bearing||this._map.getBearing())&&(Ae.bearing=0),Ae.freezeElevation=!0,this._map.easeTo(Ae,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(r,d){this._map.fire(new a.l(r,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new tr("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Yr extends a.E{constructor(r,d,y){super(),this._renderFrameCallback=()=>{const x=Math.min((P.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(x)),x<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=y.bearingSnap,this.cameraHelper=d,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,d){r.apply(this.transform),this.transform=r,this.cameraHelper=d}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,d){return this.jumpTo({center:r},d)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,d){return this.jumpTo({elevation:r},d),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,d,y){return r=a.P.convert(r).mult(-1),this.panTo(this.transform.center,a.e({offset:r},d),y)}panTo(r,d,y){return this.easeTo(a.e({center:r},d),y)}getZoom(){return this.transform.zoom}setZoom(r,d){return this.jumpTo({zoom:r},d),this}zoomTo(r,d,y){return this.easeTo(a.e({zoom:r},d),y)}zoomIn(r,d){return this.zoomTo(this.getZoom()+1,r,d),this}zoomOut(r,d){return this.zoomTo(this.getZoom()-1,r,d),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,d){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new a.l("movestart",d)).fire(new a.l("move",d)).fire(new a.l("moveend",d))),this}getBearing(){return this.transform.bearing}setBearing(r,d){return this.jumpTo({bearing:r},d),this}getPadding(){return this.transform.padding}setPadding(r,d){return this.jumpTo({padding:r},d),this}rotateTo(r,d,y){return this.easeTo(a.e({bearing:r},d),y)}resetNorth(r,d){return this.rotateTo(0,a.e({duration:1e3},r),d),this}resetNorthPitch(r,d){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},r),d),this}snapToNorth(r,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,d):this}getPitch(){return this.transform.pitch}setPitch(r,d){return this.jumpTo({pitch:r},d),this}getRoll(){return this.transform.roll}setRoll(r,d){return this.jumpTo({roll:r},d),this}cameraForBounds(r,d){r=Jt.convert(r).adjustAntiMeridian();const y=d&&d.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),y,d)}_cameraForBoxAndBearing(r,d,y,x){const S={top:0,bottom:0,right:0,left:0};if(typeof(x=a.e({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},x)).padding=="number"){const X=x.padding;x.padding={top:X,bottom:X,right:X,left:X}}const N=a.e(S,x.padding);x.padding=N;const U=this.transform,z=new Jt(r,d);return this.cameraHelper.cameraForBoxAndBearing(x,N,z,y,U)}fitBounds(r,d,y){return this._fitInternal(this.cameraForBounds(r,d),d,y)}fitScreenCoordinates(r,d,y,x,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(r)),this.transform.screenPointToLocation(a.P.convert(d)),y,x),x,S)}_fitInternal(r,d,y){return r?(delete(d=a.e(r,d)).padding,d.linear?this.easeTo(d,y):this.flyTo(d,y)):this}jumpTo(r,d){this.stop();const y=this._getTransformForUpdate();let x=!1,S=!1,N=!1;const U=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,r);const z=y.zoom!==U;return"elevation"in r&&y.elevation!==+r.elevation&&y.setElevation(+r.elevation),"bearing"in r&&y.bearing!==+r.bearing&&(x=!0,y.setBearing(+r.bearing)),"pitch"in r&&y.pitch!==+r.pitch&&(S=!0,y.setPitch(+r.pitch)),"roll"in r&&y.roll!==+r.roll&&(N=!0,y.setRoll(+r.roll)),r.padding==null||y.isPaddingEqual(r.padding)||y.setPadding(r.padding),this._applyUpdatedTransform(y),this.fire(new a.l("movestart",d)).fire(new a.l("move",d)),z&&this.fire(new a.l("zoomstart",d)).fire(new a.l("zoom",d)).fire(new a.l("zoomend",d)),x&&this.fire(new a.l("rotatestart",d)).fire(new a.l("rotate",d)).fire(new a.l("rotateend",d)),S&&this.fire(new a.l("pitchstart",d)).fire(new a.l("pitch",d)).fire(new a.l("pitchend",d)),N&&this.fire(new a.l("rollstart",d)).fire(new a.l("roll",d)).fire(new a.l("rollend",d)),this.fire(new a.l("moveend",d))}calculateCameraOptionsFromTo(r,d,y,x=0){const S=a.a1.fromLngLat(r,d),N=a.a1.fromLngLat(y,x),U=N.x-S.x,z=N.y-S.y,X=N.z-S.z,Y=Math.hypot(U,z,X);if(Y===0)throw new Error("Can't calculate camera options with same From and To");const Ae=Math.hypot(U,z),oe=a.ak(this.transform.cameraToCenterDistance/Y/this.transform.tileSize),_e=180*Math.atan2(U,-z)/Math.PI;let Ne=180*Math.acos(Ae/Y)/Math.PI;return Ne=X<0?90-Ne:90+Ne,{center:N.toLngLat(),elevation:x,zoom:oe,pitch:Ne,bearing:_e}}calculateCameraOptionsFromCameraLngLatAltRotation(r,d,y,x,S){const N=this.transform.calculateCenterFromCameraLngLatAlt(r,d,y,x);return{center:N.center,elevation:N.elevation,zoom:N.zoom,bearing:y,pitch:x,roll:S}}easeTo(r,d){this._stop(!1,r.easeId),((r=a.e({offset:[0,0],duration:500,easing:a.co},r)).animate===!1||!r.essential&&P.prefersReducedMotion)&&(r.duration=0);const y=this._getTransformForUpdate(),x=this.getBearing(),S=y.pitch,N=y.roll,U="bearing"in r?this._normalizeBearing(r.bearing,x):x,z="pitch"in r?+r.pitch:S,X="roll"in r?this._normalizeBearing(r.roll,N):N,Y="padding"in r?r.padding:y.padding,Ae=a.P.convert(r.offset);let oe,_e;r.around&&(oe=a.S.convert(r.around),_e=y.locationToScreenPoint(oe));const Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},He=this.cameraHelper.handleEaseTo(y,{bearing:U,pitch:z,roll:X,padding:Y,around:oe,aroundPoint:_e,offsetAsPoint:Ae,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||x!==U,this._pitching=this._pitching||z!==S,this._rolling=this._rolling||X!==N,this._padding=!y.isPaddingEqual(Y),this._zooming=this._zooming||He.isZooming,this._easeId=r.easeId,this._prepareEase(d,r.noMoveStart,Ne),this.terrain&&this._prepareElevation(He.elevationCenter),this._ease(Ge=>{He.easeFunc(Ge),this.terrain&&!r.freezeElevation&&this._updateElevation(Ge),this._applyUpdatedTransform(y),this._fireMoveEvents(d)},Ge=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(d,Ge)},r),this}_prepareEase(r,d,y={}){this._moving=!0,d||y.moving||this.fire(new a.l("movestart",r)),this._zooming&&!y.zooming&&this.fire(new a.l("zoomstart",r)),this._rotating&&!y.rotating&&this.fire(new a.l("rotatestart",r)),this._pitching&&!y.pitching&&this.fire(new a.l("pitchstart",r)),this._rolling&&!y.rolling&&this.fire(new a.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&d!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(y-(d-(y*r+this._elevationStart))/(1-r)),this._elevationTarget=d}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const d=r.getCameraLngLat(),y=r.getCameraAltitude(),x=this.terrain?this.terrain.getElevationForLngLatZoom(d,r.zoom):0;if(y<x){const S=this.calculateCameraOptionsFromTo(d,x,r.center,r.elevation);return{pitch:S.pitch,zoom:S.zoom}}return{}}_applyUpdatedTransform(r){const d=[];if(d.push(x=>this._elevateCameraIfInsideTerrain(x)),this.transformCameraUpdate&&d.push(x=>this.transformCameraUpdate(x)),!d.length)return;const y=r.clone();for(const x of d){const S=y.clone(),{center:N,zoom:U,roll:z,pitch:X,bearing:Y,elevation:Ae}=x(S);N&&S.setCenter(N),Ae!==void 0&&S.setElevation(Ae),U!==void 0&&S.setZoom(U),z!==void 0&&S.setRoll(z),X!==void 0&&S.setPitch(X),Y!==void 0&&S.setBearing(Y),y.apply(S)}this.transform.apply(y)}_fireMoveEvents(r){this.fire(new a.l("move",r)),this._zooming&&this.fire(new a.l("zoom",r)),this._rotating&&this.fire(new a.l("rotate",r)),this._pitching&&this.fire(new a.l("pitch",r)),this._rolling&&this.fire(new a.l("roll",r))}_afterEase(r,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const y=this._zooming,x=this._rotating,S=this._pitching,N=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new a.l("zoomend",r)),x&&this.fire(new a.l("rotateend",r)),S&&this.fire(new a.l("pitchend",r)),N&&this.fire(new a.l("rollend",r)),this.fire(new a.l("moveend",r))}flyTo(r,d){if(!r.essential&&P.prefersReducedMotion){const Pt=a.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Pt,d)}this.stop(),r=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},r);const y=this._getTransformForUpdate(),x=y.bearing,S=y.pitch,N=y.roll,U=y.padding,z="bearing"in r?this._normalizeBearing(r.bearing,x):x,X="pitch"in r?+r.pitch:S,Y="roll"in r?this._normalizeBearing(r.roll,N):N,Ae="padding"in r?r.padding:y.padding,oe=a.P.convert(r.offset);let _e=y.centerPoint.add(oe);const Ne=y.screenPointToLocation(_e),He=this.cameraHelper.handleFlyTo(y,{bearing:z,pitch:X,roll:Y,padding:Ae,locationAtOffset:Ne,offsetAsPoint:oe,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let Ge=r.curve;const We=Math.max(y.width,y.height),Ye=We/He.scaleOfZoom,it=He.pixelPathLength;typeof He.scaleOfMinZoom=="number"&&(Ge=Math.sqrt(We/He.scaleOfMinZoom/it*2));const Je=Ge*Ge;function lt(Pt){const ui=(Ye*Ye-We*We+(Pt?-1:1)*Je*Je*it*it)/(2*(Pt?Ye:We)*Je*it);return Math.log(Math.sqrt(ui*ui+1)-ui)}function ht(Pt){return(Math.exp(Pt)-Math.exp(-Pt))/2}function nt(Pt){return(Math.exp(Pt)+Math.exp(-Pt))/2}const mt=lt(!1);let Dt=function(Pt){return nt(mt)/nt(mt+Ge*Pt)},Nt=function(Pt){return We*((nt(mt)*(ht(ui=mt+Ge*Pt)/nt(ui))-ht(mt))/Je)/it;var ui},Lt=(lt(!0)-mt)/Ge;if(Math.abs(it)<2e-6||!isFinite(Lt)){if(Math.abs(We-Ye)<1e-6)return this.easeTo(r,d);const Pt=Ye<We?-1:1;Lt=Math.abs(Math.log(Ye/We))/Ge,Nt=()=>0,Dt=ui=>Math.exp(Pt*Ge*ui)}return r.duration="duration"in r?+r.duration:1e3*Lt/("screenSpeed"in r?+r.screenSpeed/Ge:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=x!==z,this._pitching=X!==S,this._rolling=Y!==N,this._padding=!y.isPaddingEqual(Ae),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(He.targetCenter),this._ease(Pt=>{const ui=Pt*Lt,Ai=1/Dt(ui),$t=Nt(ui);this._rotating&&y.setBearing(a.C.number(x,z,Pt)),this._pitching&&y.setPitch(a.C.number(S,X,Pt)),this._rolling&&y.setRoll(a.C.number(N,Y,Pt)),this._padding&&(y.interpolatePadding(U,Ae,Pt),_e=y.centerPoint.add(oe)),He.easeFunc(Pt,Ai,$t,_e),this.terrain&&!r.freezeElevation&&this._updateElevation(Pt),this._applyUpdatedTransform(y),this._fireMoveEvents(d)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,d){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const x=this._onEaseEnd;delete this._onEaseEnd,x.call(this,d)}return r||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(r,d,y){y.animate===!1||y.duration===0?(r(1),d()):(this._easeStart=P.now(),this._easeOptions=y,this._onEaseFrame=r,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,d){r=a.aO(r,-180,180);const y=Math.abs(r-d);return Math.abs(r-360-d)<y&&(r-=360),Math.abs(r+360-d)<y&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(r),this.transform.tileZoom):null}}const xi={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Li{constructor(r=xi){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=F.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=F.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,d){const y=this._map._getUIString(`AttributionControl.${d}`);r.title=y,r.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(x=>typeof x!="string"?"":x)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const d=this._map.style.sourceCaches;for(const x in d){const S=d[x];if(S.used||S.usedForTerrain){const N=S.getSource();N.attribution&&r.indexOf(N.attribution)<0&&r.push(N.attribution)}}r=r.filter(x=>String(x).trim()),r.sort((x,S)=>x.length-S.length),r=r.filter((x,S)=>{for(let N=S+1;N<r.length;N++)if(r[N].indexOf(x)>=0)return!1;return!0});const y=r.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,r.length?(this._innerContainer.innerHTML=F.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ga{constructor(r={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const y=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=F.create("div","maplibregl-ctrl");const d=F.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){F.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ur{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const d=++this._id;return this._queue.push({callback:r,id:d,cancelled:!1}),d}remove(r){const d=this._currentlyRunning,y=d?this._queue.concat(d):this._queue;for(const x of y)if(x.id===r)return void(x.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const y of d)if(!y.cancelled&&(y.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var os=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Rr extends a.E{constructor(r){super(),this._lastTilesetChange=P.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,d){this.sourceCache.update(r,d),this._renderableTilesKeys=[];const y={};for(const x of Ti(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))y[x.key]=!0,this._renderableTilesKeys.push(x.key),this._tiles[x.key]||(x.terrainRttPosMatrix32f=new Float64Array(16),a.bZ(x.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[x.key]=new be(x,this.tileSize),this._lastTilesetChange=P.now());for(const x in this._tiles)y[x]||delete this._tiles[x]}freeRtt(r){for(const d in this._tiles){const y=this._tiles[d];(!r||y.tileID.equals(r)||y.tileID.isChildOf(r)||r.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,d){return d?this._getTerrainCoordsForTileRanges(r,d):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const d={};for(const y of this._renderableTilesKeys){const x=this._tiles[y].tileID,S=r.clone(),N=a.ba();if(x.canonical.equals(r.canonical))a.bZ(N,0,a.$,a.$,0,0,1);else if(x.canonical.isChildOf(r.canonical)){const U=x.canonical.z-r.canonical.z,z=x.canonical.x-(x.canonical.x>>U<<U),X=x.canonical.y-(x.canonical.y>>U<<U),Y=a.$>>U;a.bZ(N,0,Y,Y,0,0,1),a.M(N,N,[-z*Y,-X*Y,0])}else{if(!r.canonical.isChildOf(x.canonical))continue;{const U=r.canonical.z-x.canonical.z,z=r.canonical.x-(r.canonical.x>>U<<U),X=r.canonical.y-(r.canonical.y>>U<<U),Y=a.$>>U;a.bZ(N,0,a.$,a.$,0,0,1),a.M(N,N,[z*Y,X*Y,0]),a.N(N,N,[1/2**U,1/2**U,0])}}S.terrainRttPosMatrix32f=new Float32Array(N),d[y]=S}return d}_getTerrainCoordsForTileRanges(r,d){const y={};for(const x of this._renderableTilesKeys){const S=this._tiles[x].tileID;if(!this._isWithinTileRanges(S,d))continue;const N=r.clone(),U=a.ba();if(S.canonical.z===r.canonical.z){const z=r.canonical.x-S.canonical.x,X=r.canonical.y-S.canonical.y;a.bZ(U,0,a.$,a.$,0,0,1),a.M(U,U,[z*a.$,X*a.$,0])}else if(S.canonical.z>r.canonical.z){const z=S.canonical.z-r.canonical.z,X=S.canonical.x-(S.canonical.x>>z<<z),Y=S.canonical.y-(S.canonical.y>>z<<z),Ae=r.canonical.x-(S.canonical.x>>z),oe=r.canonical.y-(S.canonical.y>>z),_e=a.$>>z;a.bZ(U,0,_e,_e,0,0,1),a.M(U,U,[-X*_e+Ae*a.$,-Y*_e+oe*a.$,0])}else{const z=r.canonical.z-S.canonical.z,X=r.canonical.x-(r.canonical.x>>z<<z),Y=r.canonical.y-(r.canonical.y>>z<<z),Ae=(r.canonical.x>>z)-S.canonical.x,oe=(r.canonical.y>>z)-S.canonical.y,_e=a.$<<z;a.bZ(U,0,_e,_e,0,0,1),a.M(U,U,[X*a.$+Ae*_e,Y*a.$+oe*_e,0])}N.terrainRttPosMatrix32f=new Float32Array(U),y[x]=N}return y}getSourceTile(r,d){const y=this.sourceCache._source;let x=r.overscaledZ-this.deltaZoom;if(x>y.maxzoom&&(x=y.maxzoom),x<y.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(x).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!S||!S.dem)&&d)for(;x>=y.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(r.scaledTo(x--).key);return S}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,d){return d[r.canonical.z]&&r.canonical.x>=d[r.canonical.z].minTileX&&r.canonical.x<=d[r.canonical.z].maxTileX&&r.canonical.y>=d[r.canonical.z].minTileY&&r.canonical.y<=d[r.canonical.z].maxTileY}}class Lc{constructor(r,d,y){this._meshCache={},this.painter=r,this.sourceCache=new Rr(d),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,d,y,x=a.$){var S;if(!(d>=0&&d<x&&y>=0&&y<x))return 0;const N=this.getTerrainData(r),U=(S=N.tile)===null||S===void 0?void 0:S.dem;if(!U)return 0;const z=a.cs([],[d/x*a.$,y/x*a.$],N.u_terrain_matrix),X=[z[0]*U.dim,z[1]*U.dim],Y=Math.floor(X[0]),Ae=Math.floor(X[1]),oe=X[0]-Y,_e=X[1]-Ae;return U.get(Y,Ae)*(1-oe)*(1-_e)+U.get(Y+1,Ae)*oe*(1-_e)+U.get(Y,Ae+1)*(1-oe)*_e+U.get(Y+1,Ae+1)*oe*_e}getElevationForLngLatZoom(r,d){if(!a.ct(d,r.wrap()))return 0;const{tileID:y,mercatorX:x,mercatorY:S}=this._getOverscaledTileIDFromLngLatZoom(r,d);return this.getElevation(y,x%a.$,S%a.$,a.$)}getElevation(r,d,y,x=a.$){return this.getDEMElevation(r,d,y,x)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const x=this.painter.context,S=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(x,S,x.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(x,new a.R({width:1,height:1}),x.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ag([])}const d=this.sourceCache.getSourceTile(r,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const x=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new a.T(x,d.dem.getPixels(),x.gl.RGBA,{premultiply:!1}),d.demTexture.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const y=d&&d+d.tileID.key+r.key;if(y&&!this._demMatrixCache[y]){const x=this.sourceCache.sourceCache._source.maxzoom;let S=r.canonical.z-d.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=x?S=r.canonical.z-x:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const N=r.canonical.x-(r.canonical.x>>S<<S),U=r.canonical.y-(r.canonical.y>>S<<S),z=a.cu(new Float64Array(16),[1/(a.$<<S),1/(a.$<<S),0]);a.M(z,z,[N*a.$,U*a.$,0]),this._demMatrixCache[r.key]={matrix:z,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(r){const d=this.painter,y=d.width/devicePixelRatio,x=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===x||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(d.context,{width:y,height:x,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(d.context,{width:y,height:x,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(y,x,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,y,x))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,N=0;S<this._coordsTextureSize;S++)for(let U=0;U<this._coordsTextureSize;U++,N+=4)d[N+0]=255&U,d[N+1]=255&S,d[N+2]=U>>8<<4|S>>8,d[N+3]=0;const y=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),x=new a.T(r,y,r.gl.RGBA,{premultiply:!1});return x.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=x,x}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),y=this.painter.context,x=y.gl,S=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),N=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),U=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),x.readPixels(S,U-N-1,1,1,x.RGBA,x.UNSIGNED_BYTE,d),y.bindFramebuffer.set(null);const z=d[0]+(d[2]>>4<<8),X=d[1]+((15&d[2])<<8),Y=this.coordsIndex[255-d[3]],Ae=Y&&this.sourceCache.getTileByID(Y);if(!Ae)return null;const oe=this._coordsTextureSize,_e=(1<<Ae.tileID.canonical.z)*oe;return new a.a1((Ae.tileID.canonical.x*oe+z)/_e+Ae.tileID.wrap,(Ae.tileID.canonical.y*oe+X)/_e,this.getElevation(Ae.tileID,z,X,oe))}depthAtPoint(r){const d=new Uint8Array(4),y=this.painter.context,x=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),x.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,x.RGBA,x.UNSIGNED_BYTE,d),y.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(r){var d;const y=((d=this.painter.style.projection)===null||d===void 0?void 0:d.transitionState)>0,x=y&&r.canonical.y===0,S=y&&r.canonical.y===(1<<r.canonical.z)-1,N=`m_${x?"n":""}_${S?"s":""}`;if(this._meshCache[N])return this._meshCache[N];const U=this.painter.context,z=new a.cv,X=new a.aN,Y=this.meshSize,Ae=a.$/Y,oe=Y*Y;for(let nt=0;nt<=Y;nt++)for(let mt=0;mt<=Y;mt++)z.emplaceBack(mt*Ae,nt*Ae,0);for(let nt=0;nt<oe;nt+=Y+1)for(let mt=0;mt<Y;mt++)X.emplaceBack(mt+nt,Y+mt+nt+1,Y+mt+nt+2),X.emplaceBack(mt+nt,Y+mt+nt+2,mt+nt+1);const _e=z.length,Ne=_e+(Y+1),He=(Y+1)*Y,Ge=x?a.bh:0,We=x?0:1,Ye=S?a.bi:a.$,it=S?0:1;for(let nt=0;nt<=Y;nt++)z.emplaceBack(nt*Ae,Ge,We);for(let nt=0;nt<=Y;nt++)z.emplaceBack(nt*Ae,Ye,it);for(let nt=0;nt<Y;nt++)X.emplaceBack(He+nt,Ne+nt,Ne+nt+1),X.emplaceBack(He+nt,Ne+nt+1,He+nt+1),X.emplaceBack(0+nt,_e+nt+1,_e+nt),X.emplaceBack(0+nt,0+nt+1,_e+nt+1);const Je=z.length,lt=Je+2*(Y+1);for(const nt of[0,1])for(let mt=0;mt<=Y;mt++)for(const Dt of[0,1])z.emplaceBack(nt*a.$,mt*Ae,Dt);for(let nt=0;nt<2*Y;nt+=2)X.emplaceBack(Je+nt,Je+nt+1,Je+nt+3),X.emplaceBack(Je+nt,Je+nt+3,Je+nt+2),X.emplaceBack(lt+nt,lt+nt+3,lt+nt+1),X.emplaceBack(lt+nt,lt+nt+2,lt+nt+3);const ht=new Ja(U.createVertexBuffer(z,os.members),U.createIndexBuffer(X),a.aM.simpleSegment(0,0,z.length,X.length));return this._meshCache[N]=ht,ht}getMeshFrameDelta(r){return 2*Math.PI*a.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,d){var y;const{tileID:x}=this._getOverscaledTileIDFromLngLatZoom(r,d);return(y=this.getMinMaxElevation(x).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(r){const d=this.getTerrainData(r).tile,y={minElevation:null,maxElevation:null};return d&&d.dem&&(y.minElevation=d.dem.min*this.exaggeration,y.maxElevation=d.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(r,d){const y=a.a1.fromLngLat(r.wrap()),x=(1<<d)*a.$,S=y.x*x,N=y.y*x,U=Math.floor(S/a.$),z=Math.floor(N/a.$);return{tileID:new a.Z(d,0,d,U,z),mercatorX:S,mercatorY:N}}}class ya{constructor(r,d,y){this._context=r,this._size=d,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(y.texture),{id:r,fbo:d,texture:y,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>r.id!==d),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const co={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Jr{constructor(r,d){this.painter=r,this.terrain=d,this.pool=new ya(r.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(y=>!r._layers[y].isHidden(d)),this._coordsAscending={};for(const y in r.sourceCaches){this._coordsAscending[y]={};const x=r.sourceCaches[y].getVisibleCoordinates(),S=r.sourceCaches[y].getSource(),N=S instanceof si?S.terrainTileRanges:null;for(const U of x){const z=this.terrain.sourceCache.getTerrainCoords(U,N);for(const X in z)this._coordsAscending[y][X]||(this._coordsAscending[y][X]=[]),this._coordsAscending[y][X].push(z[X])}}this._coordsAscendingStr={};for(const y of r._order){const x=r._layers[y],S=x.source;if(co[x.type]&&!this._coordsAscendingStr[S]){this._coordsAscendingStr[S]={};for(const N in this._coordsAscending[S])this._coordsAscendingStr[S][N]=this._coordsAscending[S][N].map(U=>U.key).sort().join()}}for(const y of this._renderableTiles)for(const x in this._coordsAscendingStr){const S=this._coordsAscendingStr[x][y.tileID.key];S&&S!==y.rttCoords[x]&&(y.rtt=[])}}renderLayer(r,d){if(r.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},d),{isRenderingToTexture:!0}),x=r.type,S=this.painter,N=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(co[x]&&(this._prevType&&co[this._prevType]||this._stacks.push([]),this._prevType=x,this._stacks[this._stacks.length-1].push(r.id),!N))return!0;if(co[this._prevType]||co[x]&&N){this._prevType=x;const U=this._stacks.length-1,z=this._stacks[U]||[];for(const X of this._renderableTiles){if(this.pool.isFull()&&(Su(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(X),X.rtt[U]){const Ae=this.pool.getObjectForId(X.rtt[U].id);if(Ae.stamp===X.rtt[U].stamp){this.pool.useObject(Ae);continue}}const Y=this.pool.getOrCreateFreeObject();this.pool.useObject(Y),this.pool.stampObject(Y),X.rtt[U]={id:Y.id,stamp:Y.stamp},S.context.bindFramebuffer.set(Y.fbo.framebuffer),S.context.clear({color:a.bf.transparent,stencil:0}),S.currentStencilSource=void 0;for(let Ae=0;Ae<z.length;Ae++){const oe=S.style._layers[z[Ae]],_e=oe.source?this._coordsAscending[oe.source][X.tileID.key]:[X.tileID];S.context.viewport.set([0,0,Y.fbo.width,Y.fbo.height]),S._renderTileClippingMasks(oe,_e,!0),S.renderLayer(S,S.style.sourceCaches[oe.source],oe,_e,y),oe.source&&(X.rttCoords[oe.source]=this._coordsAscendingStr[oe.source][X.tileID.key])}}return Su(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),co[x]}return!1}}const BA={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},eh=g,js={hash:!1,interactive:!0,bearingSnap:7,attributionControl:xi,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},wn={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Fr{constructor(r,d,y=!1){this.mousedown=S=>{this.startMove(S,F.mousePos(this.element,S)),F.addEventListener(window,"mousemove",this.mousemove),F.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.move(S,F.mousePos(this.element,S))},this.mouseup=S=>{this._rotatePitchHandler.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,S.targetTouches)[0],this.startMove(S,this._startPos),F.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,S.targetTouches)[0],this.move(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=d;const x=new jt;this._rotatePitchHandler=new Me({clickTolerance:3,move:(S,N)=>{const U=d.getBoundingClientRect(),z=new a.P((U.bottom-U.top)/2,(U.right-U.left)/2);return{bearingDelta:a.cn(new a.P(S.x,N.y),N,z),pitchDelta:y?-.5*(N.y-S.y):void 0}},moveStateManager:x,enable:!0,assignEvents:()=>{}}),this.map=r,F.addEventListener(d,"mousedown",this.mousedown),F.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(d,"touchcancel",this.reset)}startMove(r,d){this._rotatePitchHandler.dragStart(r,d),F.disableDrag()}move(r,d){const y=this.map,{bearingDelta:x,pitchDelta:S}=this._rotatePitchHandler.dragMove(r,d)||{};x&&y.setBearing(y.getBearing()+x),S&&y.setPitch(y.getPitch()+S)}off(){const r=this.element;F.removeEventListener(r,"mousedown",this.mousedown),F.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend),F.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){F.enableDrag(),F.removeEventListener(window,"mousemove",this.mousemove),F.removeEventListener(window,"mouseup",this.mouseup),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend)}}let Qa;function Xs(w,r,d,y=!1){if(y||!d.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const x=new a.S(w.lng,w.lat);if(w=new a.S(w.lng,w.lat),r){const S=new a.S(w.lng-360,w.lat),N=new a.S(w.lng+360,w.lat),U=d.locationToScreenPoint(w).distSqr(r);d.locationToScreenPoint(S).distSqr(r)<U?w=S:d.locationToScreenPoint(N).distSqr(r)<U&&(w=N)}for(;Math.abs(w.lng-d.center.lng)>180;){const S=d.locationToScreenPoint(w);if(S.x>=0&&S.y>=0&&S.x<=d.width&&S.y<=d.height)break;w.lng>d.center.lng?w.lng-=360:w.lng+=360}return w.lng!==x.lng&&d.isPointOnMapSurface(d.locationToScreenPoint(w))?w:x}const Io={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function va(w,r,d){const y=w.classList;for(const x in Io)y.remove(`maplibregl-${d}-anchor-${x}`);y.add(`maplibregl-${d}-anchor-${r}`)}class Pc extends a.E{constructor(r){if(super(),this._onKeyPress=d=>{const y=d.code,x=d.charCode||d.keyCode;y!=="Space"&&y!=="Enter"&&x!==32&&x!==13||this.togglePopup()},this._onMapClick=d=>{const y=d.originalEvent.target,x=this._element;this._popup&&(y===x||x.contains(y))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(d?.type==="terrain"||d?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=Xs(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,`${Io[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${x}`),P.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r?.opacity,r?.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=a.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div");const d=F.createNS("http://www.w3.org/2000/svg","svg"),y=41,x=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${y}px`),d.setAttributeNS(null,"width",`${x}px`),d.setAttributeNS(null,"viewBox",`0 0 ${x} ${y}`);const S=F.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const N=F.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill-rule","nonzero");const U=F.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"transform","translate(3.0, 29.0)"),U.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const We of z){const Ye=F.createNS("http://www.w3.org/2000/svg","ellipse");Ye.setAttributeNS(null,"opacity","0.04"),Ye.setAttributeNS(null,"cx","10.5"),Ye.setAttributeNS(null,"cy","5.80029008"),Ye.setAttributeNS(null,"rx",We.rx),Ye.setAttributeNS(null,"ry",We.ry),U.appendChild(Ye)}const X=F.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"fill",this._color);const Y=F.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),X.appendChild(Y);const Ae=F.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"opacity","0.25"),Ae.setAttributeNS(null,"fill","#000000");const oe=F.createNS("http://www.w3.org/2000/svg","path");oe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ae.appendChild(oe);const _e=F.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"transform","translate(6.0, 7.0)"),_e.setAttributeNS(null,"fill","#FFFFFF");const Ne=F.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const He=F.createNS("http://www.w3.org/2000/svg","circle");He.setAttributeNS(null,"fill","#000000"),He.setAttributeNS(null,"opacity","0.25"),He.setAttributeNS(null,"cx","5.5"),He.setAttributeNS(null,"cy","5.5"),He.setAttributeNS(null,"r","5.4999962");const Ge=F.createNS("http://www.w3.org/2000/svg","circle");Ge.setAttributeNS(null,"fill","#FFFFFF"),Ge.setAttributeNS(null,"cx","5.5"),Ge.setAttributeNS(null,"cy","5.5"),Ge.setAttributeNS(null,"r","5.4999962"),Ne.appendChild(He),Ne.appendChild(Ge),N.appendChild(U),N.appendChild(X),N.appendChild(Ae),N.appendChild(_e),N.appendChild(Ne),d.appendChild(N),d.setAttributeNS(null,"height",y*this._scale+"px"),d.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(d),this._offset=a.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),va(this._element,this._anchor,"marker"),r&&r.className)for(const d of r.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=a.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const x=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var d,y;const x=(d=this._map)===null||d===void 0?void 0:d.terrain,S=this._map.transform.isLocationOccluded(this._lngLat);if(!x||S){const _e=S?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==_e&&(this._element.style.opacity=_e))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const N=this._map,U=N.terrain.depthAtPoint(this._pos),z=N.terrain.getElevationForLngLatZoom(this._lngLat,N.transform.tileZoom);if(N.transform.lngLatToCameraDepth(this._lngLat,z)-U<.006)return void(this._element.style.opacity=this._opacity);const X=-this._offset.y/N.transform.pixelsPerMeter,Y=Math.sin(N.getPitch()*Math.PI/180)*X,Ae=N.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),oe=N.transform.lngLatToCameraDepth(this._lngLat,z+Y)-Ae>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&oe&&this._popup.remove(),this._element.style.opacity=oe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=a.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,d){return(this._opacity===void 0||r===void 0&&d===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const Yc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Nl=0,Ml=!1;const Zu={maxWidth:100,unit:"metric"};function Jc(w,r,d){const y=d&&d.maxWidth||100,x=w._container.clientHeight/2,S=w._container.clientWidth/2,N=w.unproject([S-y/2,x]),U=w.unproject([S+y/2,x]),z=Math.round(w.project(U).x-w.project(N).x),X=Math.min(y,z,w._container.clientWidth),Y=N.distanceTo(U);if(d&&d.unit==="imperial"){const Ae=3.2808*Y;Ae>5280?ol(r,X,Ae/5280,w._getUIString("ScaleControl.Miles")):ol(r,X,Ae,w._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?ol(r,X,Y/1852,w._getUIString("ScaleControl.NauticalMiles")):Y>=1e3?ol(r,X,Y/1e3,w._getUIString("ScaleControl.Kilometers")):ol(r,X,Y,w._getUIString("ScaleControl.Meters"))}function ol(w,r,d,y){const x=function(S){const N=Math.pow(10,`${Math.floor(S)}`.length-1);let U=S/N;return U=U>=10?10:U>=5?5:U>=3?3:U>=2?2:U>=1?1:function(z){const X=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*X)/X}(U),N*U}(d);w.style.width=r*(x/d)+"px",w.innerHTML=`${x}&nbsp;${y}`}const th={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ih=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function eu(w){if(w){if(typeof w=="number"){const r=Math.round(Math.abs(w)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,w),"top-left":new a.P(r,r),"top-right":new a.P(-r,r),bottom:new a.P(0,-w),"bottom-left":new a.P(r,-r),"bottom-right":new a.P(-r,-r),left:new a.P(w,0),right:new a.P(-w,0)}}if(w instanceof a.P||Array.isArray(w)){const r=a.P.convert(w);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:a.P.convert(w.center||[0,0]),top:a.P.convert(w.top||[0,0]),"top-left":a.P.convert(w["top-left"]||[0,0]),"top-right":a.P.convert(w["top-right"]||[0,0]),bottom:a.P.convert(w.bottom||[0,0]),"bottom-left":a.P.convert(w["bottom-left"]||[0,0]),"bottom-right":a.P.convert(w["bottom-right"]||[0,0]),left:a.P.convert(w.left||[0,0]),right:a.P.convert(w.right||[0,0])}}return eu(new a.P(0,0))}const Il=g;A.AJAXError=a.cz,A.Event=a.l,A.Evented=a.E,A.LngLat=a.S,A.MercatorCoordinate=a.a1,A.Point=a.P,A.addProtocol=a.cA,A.config=a.a,A.removeProtocol=a.cB,A.AttributionControl=Li,A.BoxZoomHandler=M,A.CanvasSource=ei,A.CooperativeGesturesHandler=yn,A.DoubleClickZoomHandler=In,A.DragPanHandler=Sn,A.DragRotateHandler=cr,A.EdgeInsets=qo,A.FullscreenControl=class extends a.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var r;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=d?.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){F.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=F.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);F.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},A.GeoJSONSource=yi,A.GeolocateControl=class extends a.E{constructor(w){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const d=new a.S(r.coords.longitude,r.coords.latitude),y=r.coords.accuracy,x=this._map.getBearing(),S=a.e({bearing:x},this.options.fitBoundsOptions),N=Jt.fromLngLat(d,y);this._map.fitBounds(N,S,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const d=new a.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Ml)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=F.create("button","maplibregl-ctrl-geolocate",this._container),F.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Pc({element:this._dotElement}),this._circleElement=F.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Pc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{const y=d?.[0]instanceof ResizeObserverEntry;d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},Yc,w)}onAdd(w){return this._map=w,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(r=!1){if(Qa!==void 0&&!r)return Qa;if(window.navigator.permissions===void 0)return Qa=!!window.navigator.geolocation,Qa;try{Qa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Qa=!!window.navigator.geolocation}return Qa})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Nl=0,Ml=!1}_isOutOfMapMaxBounds(w){const r=this._map.getMaxBounds(),d=w.coords;return r&&(d.longitude<r.getWest()||d.longitude>r.getEast()||d.latitude<r.getSouth()||d.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const r=this._map.project(w),d=this._map.unproject([r.x+100,r.y]),y=w.distanceTo(d)/100,x=2*this._accuracy/y;this._circleElement.style.width=`${x.toFixed(2)}px`,this._circleElement.style.height=`${x.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Nl--,Ml=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Nl++,Nl>1?(w={maximumAge:6e5,timeout:0},Ml=!0):(w=this.options.positionOptions,Ml=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},A.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const r=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=F.create("button","maplibregl-ctrl-globe",this._container),F.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},A.Hash=Cs,A.ImageSource=si,A.KeyboardHandler=Xi,A.LngLatBounds=Jt,A.LogoControl=ga,A.Map=class extends Yr{constructor(w){var r,d;a.cw.mark(a.cx.create);const y=Object.assign(Object.assign(Object.assign({},js),w),{canvasContextAttributes:Object.assign(Object.assign({},js.canvasContextAttributes),w.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const x=new yl,S=new zl;if(y.minZoom!==void 0&&x.setMinZoom(y.minZoom),y.maxZoom!==void 0&&x.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&x.setMinPitch(y.minPitch),y.maxPitch!==void 0&&x.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&x.setRenderWorldCopies(y.renderWorldCopies),super(x,S,{bearingSnap:y.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ur,this._controls=[],this._mapId=a.a7(),this._contextLost=U=>{U.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:U}))},this._contextRestored=U=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:U}))},this._onMapScroll=U=>{if(U.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},BA),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ne.addThrottleControl(()=>this.isMoving()),this._requestManager=new te(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let U=!1;const z=rl(X=>{this._trackResize&&!this._removed&&(this.resize(X),this.redraw())},50);this._resizeObserver=new ResizeObserver(X=>{U?z(X):U=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Tr(this,y),this._hash=y.hash&&new Cs(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,a.e({},y.fitBoundsOptions,{duration:0}))));const N=typeof y.style=="string"||((d=(r=y.style)===null||r===void 0?void 0:r.projection)===null||d===void 0?void 0:d.type)!=="globe";this.resize(null,N),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Li(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new ga,y.logoPosition),this.on("style.load",()=>{if(N||this._resizeTransform(),this.transform.unmodified){const U=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(U)}}),this.on("data",U=>{this._update(U.dataType==="style"),this.fire(new a.l(`${U.dataType}data`,U))}),this.on("dataloading",U=>{this.fire(new a.l(`${U.dataType}dataloading`,U))}),this.on("dataabort",U=>{this.fire(new a.l("sourcedataabort",U))})}_getMapId(){return this._mapId}setGlobalStateProperty(w,r){return this.style.setGlobalStateProperty(w,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,r){if(r===void 0&&(r=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=w.onAdd(this);this._controls.push(w);const y=this._controlPositions[r];return r.indexOf("bottom")!==-1?y.insertBefore(d,y.firstChild):y.appendChild(d),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(w);return r>-1&&this._controls.splice(r,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return Ti(this.transform,w)}calculateCameraOptionsFromTo(w,r,d,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,r,d,y)}resize(w,r=!0){const[d,y]=this._containerDimensions(),x=this._getClampedPixelRatio(d,y);if(this._resizeCanvas(d,y,x),this.painter.resize(d,y,x),this.painter.overLimit()){const N=this.painter.context.gl;this._maxCanvasSize=[N.drawingBufferWidth,N.drawingBufferHeight];const U=this._getClampedPixelRatio(d,y);this._resizeCanvas(d,y,U),this.painter.resize(d,y,U)}this._resizeTransform(r);const S=!this._moving;return S&&(this.stop(),this.fire(new a.l("movestart",w)).fire(new a.l("move",w))),this.fire(new a.l("resize",w)),S&&this.fire(new a.l("moveend",w)),this}_resizeTransform(w=!0){var r;const[d,y]=this._containerDimensions();this.transform.resize(d,y,w),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,y,w)}_getClampedPixelRatio(w,r){const{0:d,1:y}=this._maxCanvasSize,x=this.getPixelRatio(),S=w*x,N=r*x;return Math.min(S>d?d/S:1,N>y?y/N:1)*x}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Jt.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}project(w){return this.transform.locationToScreenPoint(a.S.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(a.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,r,d){if(w==="mouseenter"||w==="mouseover"){let y=!1;return{layers:r,listener:d,delegates:{mousemove:S=>{const N=r.filter(z=>this.getLayer(z)),U=N.length!==0?this.queryRenderedFeatures(S.point,{layers:N}):[];U.length?y||(y=!0,d.call(this,new Fa(w,this,S.originalEvent,{features:U}))):y=!1},mouseout:()=>{y=!1}}}}if(w==="mouseleave"||w==="mouseout"){let y=!1;return{layers:r,listener:d,delegates:{mousemove:N=>{const U=r.filter(z=>this.getLayer(z));(U.length!==0?this.queryRenderedFeatures(N.point,{layers:U}):[]).length?y=!0:y&&(y=!1,d.call(this,new Fa(w,this,N.originalEvent)))},mouseout:N=>{y&&(y=!1,d.call(this,new Fa(w,this,N.originalEvent)))}}}}{const y=x=>{const S=r.filter(U=>this.getLayer(U)),N=S.length!==0?this.queryRenderedFeatures(x.point,{layers:S}):[];N.length&&(x.features=N,d.call(this,x),delete x.features)};return{layers:r,listener:d,delegates:{[w]:y}}}}_saveDelegatedListener(w,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(r)}_removeDelegatedListener(w,r,d){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const y=this._delegatedListeners[w];for(let x=0;x<y.length;x++){const S=y[x];if(S.listener===d&&S.layers.length===r.length&&S.layers.every(N=>r.includes(N))){for(const N in S.delegates)this.off(N,S.delegates[N]);return void y.splice(x,1)}}}on(w,r,d){if(d===void 0)return super.on(w,r);const y=typeof r=="string"?[r]:r,x=this._createDelegatedListener(w,y,d);this._saveDelegatedListener(w,x);for(const S in x.delegates)this.on(S,x.delegates[S]);return{unsubscribe:()=>{this._removeDelegatedListener(w,y,d)}}}once(w,r,d){if(d===void 0)return super.once(w,r);const y=typeof r=="string"?[r]:r,x=this._createDelegatedListener(w,y,d);for(const S in x.delegates){const N=x.delegates[S];x.delegates[S]=(...U)=>{this._removeDelegatedListener(w,y,d),N(...U)}}this._saveDelegatedListener(w,x);for(const S in x.delegates)this.once(S,x.delegates[S]);return this}off(w,r,d){return d===void 0?super.off(w,r):(this._removeDelegatedListener(w,typeof r=="string"?[r]:r,d),this)}queryRenderedFeatures(w,r){if(!this.style)return[];let d;const y=w instanceof a.P||Array.isArray(w),x=y?w:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(y?{}:w)||{},x instanceof a.P||typeof x[0]=="number")d=[a.P.convert(x)];else{const S=a.P.convert(x[0]),N=a.P.convert(x[1]);d=[S,new a.P(N.x,S.y),N,new a.P(S.x,N.y),S]}return this.style.queryRenderedFeatures(d,r,this.transform)}querySourceFeatures(w,r){return this.style.querySourceFeatures(w,r)}setStyle(w,r){return(r=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(w,r))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const r=this._locale[w];if(r==null)throw new Error(`Missing UI string '${w}'`);return r}_updateStyle(w,r){var d,y;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,r));const x=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new tt(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,r,x):this.style.loadJSON(w,r,x),this):((y=(d=this.style)===null||d===void 0?void 0:d.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new tt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,r){if(typeof w=="string"){const d=this._requestManager.transformRequest(w,"Style");a.j(d,new AbortController).then(y=>{this._updateDiff(y.data,r)}).catch(y=>{y&&this.fire(new a.k(y))})}else typeof w=="object"&&this._updateDiff(w,r)}_updateDiff(w,r){try{this.style.setState(w,r)&&this._update(!0)}catch(d){a.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(w,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(w,r){return this._lazyInitEmptyStyle(),this.style.addSource(w,r),this._update(!0)}isSourceLoaded(w){const r=this.style&&this.style.sourceCaches[w];if(r!==void 0)return r.loaded();this.fire(new a.k(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const r=this.style.sourceCaches[w.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&r.reload();for(const d in this.style._layers){const y=this.style._layers[d];y.type==="hillshade"&&y.source===w.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===w.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Lc(this.painter,r,w),this.painter.renderToTexture=new Jr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=d=>{var y;d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=d.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:w})),this}getTerrain(){var w,r;return(r=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const r in w){const d=w[r]._tiles;for(const y in d){const x=d[y];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,r,d){if(d){const y=this.getSource(d);if(!y)throw new Error(`There is no source with ID "${d}", cannot set LOD parameters`);y.calculateTileZoom=Bi(Math.max(1,w),Math.max(1,r))}else for(const y in this.style.sourceCaches)this.style.sourceCaches[y].getSource().calculateTileZoom=Bi(Math.max(1,w),Math.max(1,r));return this._update(!0),this}refreshTiles(w,r){const d=this.style.sourceCaches[w];if(!d)throw new Error(`There is no source cache with ID "${w}", cannot refresh tile`);r===void 0?d.reload(!0):d.refreshTiles(r.map(y=>new a.a4(y.z,y.x,y.y)))}addImage(w,r,d={}){const{pixelRatio:y=1,sdf:x=!1,stretchX:S,stretchY:N,content:U,textFitWidth:z,textFitHeight:X}=d;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||a.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Y,height:Ae,data:oe}=r,_e=r;return this.style.addImage(w,{data:new a.R({width:Y,height:Ae},new Uint8Array(oe)),pixelRatio:y,stretchX:S,stretchY:N,content:U,textFitWidth:z,textFitHeight:X,sdf:x,version:0,userImage:_e}),_e.onAdd&&_e.onAdd(this,w),this}}{const{width:Y,height:Ae,data:oe}=P.getImageData(r);this.style.addImage(w,{data:new a.R({width:Y,height:Ae},oe),pixelRatio:y,stretchX:S,stretchY:N,content:U,textFitWidth:z,textFitHeight:X,sdf:x,version:0})}}updateImage(w,r){const d=this.style.getImage(w);if(!d)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=r instanceof HTMLImageElement||a.b(r)?P.getImageData(r):r,{width:x,height:S,data:N}=y;if(x===void 0||S===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(x!==d.data.width||S!==d.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const U=!(r instanceof HTMLImageElement||a.b(r));return d.data.replace(N,U),this.style.updateImage(w,d),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return ne.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,r){return this._lazyInitEmptyStyle(),this.style.addLayer(w,r),this._update(!0)}moveLayer(w,r){return this.style.moveLayer(w,r),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,r,d){return this.style.setLayerZoomRange(w,r,d),this._update(!0)}setFilter(w,r,d={}){return this.style.setFilter(w,r,d),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,r,d,y={}){return this.style.setPaintProperty(w,r,d,y),this._update(!0)}getPaintProperty(w,r){return this.style.getPaintProperty(w,r)}setLayoutProperty(w,r,d,y={}){return this.style.setLayoutProperty(w,r,d,y),this._update(!0)}getLayoutProperty(w,r){return this.style.getLayoutProperty(w,r)}setGlyphs(w,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,r,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,r,d,y=>{y||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,r,d=>{d||this._update(!0)}),this}setLight(w,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,r){return this.style.setFeatureState(w,r),this._update()}removeFeatureState(w,r){return this.style.removeFeatureState(w,r),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,r=0;return this._container&&(w=this._container.clientWidth||400,r=this._container.clientHeight||300),[w,r]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const r=this._canvasContainer=F.create("div","maplibregl-canvas-container",w);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=F.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),y=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],y);const x=this._controlContainer=F.create("div","maplibregl-control-container",w),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(N=>{S[N]=F.create("div",`maplibregl-ctrl-${N} `,x)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,r,d){this._canvas.width=Math.floor(d*w),this._canvas.height=Math.floor(d*r),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",y=>{r={requestedAttributes:w},y&&(r.statusMessage=y.statusMessage,r.type=y.type)},{once:!0});let d=null;if(d=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!d){const y="Failed to initialize WebGL";throw r?(r.message=y,new Error(JSON.stringify(r))):new Error(y)}this.painter=new wA(d,this.transform),Q.testSupport(d)}migrateProjection(w,r){super.migrateProjection(w,r),this.painter.transform=w,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var r,d,y,x,S;const N=this._idleTriggered?this._fadeDuration:0,U=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Ae=this.transform.zoom,oe=P.now();this.style.zoomHistory.update(Ae,oe);const _e=new a.F(Ae,{now:oe,fadeDuration:N,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ne=_e.crossFadingFactor();Ne===1&&Ne===this._crossFadingFactor||(z=!0,this._crossFadingFactor=Ne),this.style.update(_e)}const X=((d=this.style.projection)===null||d===void 0?void 0:d.transitionState)>0!==U;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((x=this.style.projection)===null||x===void 0?void 0:x.transitionState,(S=this.style.projection)===null||S===void 0?void 0:S.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||X)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,N,this._crossSourceCollisions,X),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:N,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const Y=this._sourcesDirty||this._styleDirty||this._placementDirty;return Y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||Y||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r?.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),F.remove(this._canvasContainer),F.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frame(this._frameRequest,w=>{a.cw.frame(w),this._frameRequest=null;try{this._render(w)}catch(r){if(!a.cy(r)&&!function(d){return d.message===Xo}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return eh}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},A.MapMouseEvent=Fa,A.MapTouchEvent=lo,A.MapWheelEvent=Fl,A.Marker=Pc,A.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const r=this._map.getZoom(),d=r===this._map.getMaxZoom(),y=r===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,d)=>{const y=this._map._getUIString(`NavigationControl.${d}`);r.title=y,r.setAttribute("aria-label",y)},this.options=a.e({},wn,w),this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),F.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),F.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=F.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,r){const d=F.create("button",w,this._container);return d.type="button",d.addEventListener("click",r),d}},A.Popup=class extends a.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=F.create("div","maplibregl-popup",this._map.getContainer()),this._tip=F.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const N of this.options.className.split(" "))this._container.classList.add(N);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Xs(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const d=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const x=eu(this.options.offset);if(!y){const N=this._container.offsetWidth,U=this._container.offsetHeight;let z;z=d.y+x.bottom.y<U?["top"]:d.y>this._map.transform.height-U?["bottom"]:[],d.x<N/2?z.push("left"):d.x>this._map.transform.width-N/2&&z.push("right"),y=z.length===0?"bottom":z.join("-")}let S=d.add(x[y]);this.options.subpixelPositioning||(S=S.round()),F.setTransform(this._container,`${Io[y]} translate(${S.x}px,${S.y}px)`),va(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(th),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=a.S.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const r=document.createDocumentFragment(),d=document.createElement("body");let y;for(d.innerHTML=w;y=d.firstChild,y;)r.appendChild(y);return this.setDOMContent(r)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=F.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(ih);w&&w.focus()}},A.RasterDEMTileSource=Ni,A.RasterTileSource=$e,A.ScaleControl=class{constructor(w){this._onMove=()=>{Jc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Jc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Zu),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},A.ScrollZoomHandler=kn,A.Style=tt,A.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=F.create("button","maplibregl-ctrl-terrain",this._container),F.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){F.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},A.TwoFingersTouchPitchHandler=ji,A.TwoFingersTouchRotateHandler=ri,A.TwoFingersTouchZoomHandler=bt,A.TwoFingersTouchZoomRotateHandler=an,A.VectorTileSource=ot,A.VideoSource=Mt,A.addSourceType=(w,r)=>a._(void 0,void 0,void 0,function*(){if(Ei(w))throw new Error(`A source type called "${w}" already exists.`);((d,y)=>{ai[d]=y})(w,r)}),A.clearPrewarmedResources=function(){const w=me;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(pe),me=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},A.createTileMesh=Vl,A.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},A.getRTLTextPluginStatus=function(){return Gi().getRTLTextPluginStatus()},A.getVersion=function(){return Il},A.getWorkerCount=function(){return Qe.workerCount},A.getWorkerUrl=function(){return a.a.WORKER_URL},A.importScriptInWorkers=function(w){return _t().broadcast("IS",w)},A.prewarm=function(){ze().acquire(pe)},A.setMaxParallelImageRequests=function(w){a.a.MAX_PARALLEL_IMAGE_REQUESTS=w},A.setRTLTextPlugin=function(w,r){return Gi().setRTLTextPlugin(w,r)},A.setWorkerCount=function(w){Qe.workerCount=w},A.setWorkerUrl=function(w){a.a.WORKER_URL=w}});var u=i;return u})}(Ev)),Ev.exports}var H7=z7();const xh=Xv(H7),nx=()=>{const{user:t,isAuthorized:e}=Ol(),[i,n]=Te.useState(!0),[o,u]=Te.useState(!0),[A,a]=Te.useState({service:"",rate:"",description:""}),[g,b]=Te.useState(!1),[B,I]=Te.useState({}),[P,F]=Te.useState([]),[Q,R]=Te.useState(""),[H,j]=Te.useState({name:"",phone:"",service:"",cost:0,date:"",address:""}),[V,W]=Te.useState([]),[ne,te]=Te.useState(!1),[de,ee]=Te.useState(""),[re,xe]=Te.useState(null),[Be,se]=Te.useState([]),[ae,ce]=Te.useState(!0),Ee=Te.useRef(null),Ve=Te.useRef(null),ue=Te.useRef(null),fe=Te.useRef({});Te.useEffect(()=>{(async()=>{try{if(!e||!t){console.log("MyService - User not authenticated or no user data"),n(!1);return}const me=await Oi.get("/user/service-profile");if(me.data.success){const Fe=me.data.data;a({service:Fe.service||"",rate:Fe.rate||"",description:Fe.description||""}),u(Fe.isOnline!==!1)}}catch{u(!0)}finally{n(!1)}})()},[t,e]),Te.useEffect(()=>{if(!e||!t||t.role!=="Service Provider")return;const J=async()=>{te(!0);try{const me=await Oi.get("/user/matching-requests");if(me.data.success&&me.data.requests.length>0){const Fe=me.data.requests.filter(ze=>ze.requester?._id!==t._id);W(Fe),ee("")}else W([]),ee("No matching requests found.")}catch(me){console.log("User ID:",t._id),me.response&&me.response.status===403?(me.response.data?.message||"").includes("not verified")?ee("Your account is not verified. Please contact support to get verified as a Service Provider."):ee("Access denied. You must be a Service Provider."):ee("No matching requests found."),W([])}finally{te(!1)}};return J(),dr.on("service-request-updated",me=>{console.log("Service request updated:",me),J()}),()=>{dr.off("service-request-updated")}},[t,e]),Te.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(J=>{const{latitude:me,longitude:Fe}=J.coords;xe({lat:me,lng:Fe}),ce(!1)},J=>{console.log("Error getting location:",J),Si.error("Unable to access your location. Using default map view."),ce(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):ce(!1)},[]),Te.useEffect(()=>{if(V.length>0){const J=[];for(const me of V)me.location&&me.location.lat&&me.location.lng&&J.push({requestId:me._id,coords:{lat:me.location.lat,lng:me.location.lng}});se(J)}else se([])},[V]),Te.useEffect(()=>{if(Ee.current&&!Ve.current&&!ae)try{const J=re?[re.lng,re.lat]:[121,14];Ve.current=new xh.Map({container:Ee.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:J,zoom:re?15:12,attributionControl:!0,failIfMajorPerformanceCaveat:!1}),re&&(ue.current=new xh.Marker({color:"#FF0000",title:"Your Location"}).setLngLat([re.lng,re.lat]).addTo(Ve.current));const me=()=>{Ve.current&&Ve.current.resize()};return window.addEventListener("resize",me),Ve.current.on("load",()=>{console.log("Map loaded successfully")}),Ve.current.on("error",Fe=>{console.error("Map error:",Fe)}),()=>{window.removeEventListener("resize",me),Ve.current&&(Ve.current.remove(),Ve.current=null),Object.values(fe.current).forEach(Fe=>Fe.remove()),fe.current={}}}catch(J){console.error("Error initializing map:",J),ce(!1)}},[re,ae]),Te.useEffect(()=>{Ve.current&&re&&(ue.current?ue.current.setLngLat([re.lng,re.lat]):ue.current=new xh.Marker({color:"#FF0000"}).setLngLat([re.lng,re.lat]).addTo(Ve.current))},[re]),Te.useEffect(()=>{if(Ve.current&&(Object.values(fe.current).forEach(J=>J.remove()),fe.current={},Be.length>0)){const J=new xh.LngLatBounds;re&&J.extend([re.lng,re.lat]),Be.forEach(me=>{const Fe=V.find(ze=>ze._id===me.requestId);if(Fe){const ze=new xh.Marker({color:"#007bff",title:`${Fe.requester?.firstName} ${Fe.requester?.lastName} - ${Fe.typeOfWork}`}).setLngLat([me.coords.lng,me.coords.lat]).addTo(Ve.current);fe.current[me.requestId]=ze,J.extend([me.coords.lng,me.coords.lat])}}),Ve.current.fitBounds(J,{padding:50,maxZoom:15})}},[Be,re,V]),Te.useEffect(()=>{(async()=>{if(!(!e||!t))try{const me=await Oi.get("/user/predefined-services");me.data.success&&F(me.data.services)}catch(me){console.error("Error fetching predefined services:",me)}})()},[t,e]),Te.useEffect(()=>{if(Q&&P.length>0){const J=P.find(me=>me.name===Q);J&&(a({service:Q,rate:J.rate,description:J.description}),(async()=>{try{await Oi.post("/user/service-profile",{service:Q,rate:J.rate,description:J.description})}catch(Fe){console.error("Error updating service profile:",Fe)}})())}},[Q,P]);const Ue=async()=>{try{(await Oi.put("/user/service-status",{isOnline:!o})).data.success&&(u(!o),Si.success(`Status updated to ${o?"Offline":"Online"}`))}catch{Si.error("Failed to update status")}},ke=async J=>{try{(await Oi.post(`/user/service-request/${J}/accept`)).data.success&&(Si.success("Request accepted successfully!"),W(Fe=>Fe.filter(ze=>ze._id!==J)),fe.current[J]&&(fe.current[J].remove(),delete fe.current[J]))}catch{Si.error("Failed to accept request")}},pe=async J=>{try{W(me=>me.filter(Fe=>Fe._id!==J)),fe.current[J]&&(fe.current[J].remove(),delete fe.current[J]),Si.success("Request declined")}catch{Si.error("Failed to decline request")}},Qe=async()=>{try{(await Oi.post("/user/service-profile",B)).data.success&&(a({...B}),b(!1),Si.success("Service profile updated successfully"))}catch{Si.error("Failed to update service profile")}};return!e||!t?p.jsx("div",{className:"my-service-container",children:p.jsxs("div",{className:"auth-required",children:[p.jsx("div",{className:"auth-icon",children:""}),p.jsx("h3",{children:"Authentication Required"}),p.jsx("p",{children:"Please log in to access your service statistics."}),p.jsx("button",{className:"btn-primary",onClick:()=>window.location.href="/login",children:"Go to Login"})]})}):t.role!=="Service Provider"?p.jsx("div",{className:"my-service-container",children:p.jsxs("div",{className:"auth-required",children:[p.jsx("div",{className:"auth-icon",children:""}),p.jsx("h3",{children:"Access Denied"}),p.jsx("p",{children:"You must be a Service Provider to access this page."}),p.jsx("button",{className:"btn-primary",onClick:()=>window.location.href="/user/manage-profile",children:"Go to Profile"})]})}):p.jsxs("div",{className:"my-service-container",children:[p.jsxs("div",{className:"main-layout",children:[p.jsxs("div",{className:"left-column",children:[p.jsxs("div",{className:"services-section",children:[p.jsx("h3",{children:"Your Services:"}),p.jsxs("div",{className:"service-controls",children:[p.jsxs("select",{value:Q,onChange:J=>R(J.target.value),className:"form-input",children:[p.jsx("option",{value:"",children:"Select a service"}),P.map(J=>p.jsx("option",{value:J.name,children:J.name},J._id))]}),p.jsxs("div",{className:"status-toggle",children:[p.jsx("span",{className:`status-text ${o?"online":"offline"}`,children:o?"Online":"Offline"}),p.jsxs("label",{className:"toggle-switch",children:[p.jsx("input",{type:"checkbox",checked:o,onChange:Ue}),p.jsx("span",{className:"toggle-slider"})]})]})]}),p.jsxs("div",{className:"service-info",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Service:"})," ",A.service]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Rate:"})," ",A.rate]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Description:"})," ",A.description]})]}),p.jsx("button",{className:"btn-primary",onClick:()=>{I({...A}),b(!0)},children:"EDIT"})]}),p.jsxs("div",{className:"client-request-section",children:[ne?p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Loading matching requests..."})]}):o?V.length>0?p.jsxs("div",{className:"requests-list",children:[p.jsxs("h4",{children:["Matching Requests (",V.length,")"]}),V.map(J=>p.jsxs("div",{className:"request-card",children:[p.jsxs("div",{className:"request-header",children:[p.jsx("span",{children:"Client Request"}),p.jsx("span",{children:new Date(J.time).toLocaleDateString()})]}),p.jsxs("div",{className:"request-details",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Name:"})," ",J.requester?.firstName," ",J.requester?.lastName]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Phone:"})," ",J.requester?.phone]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Service Needed:"})," ",J.typeOfWork]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Budget:"})," ",J.budget]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Address:"})," ",J.address]})]}),p.jsxs("div",{className:"request-actions",children:[p.jsx("button",{className:"btn-primary",onClick:()=>ke(J._id),children:"Accept"}),p.jsx("button",{className:"btn-primary",onClick:()=>pe(J._id),children:"Decline"})]})]},J._id))]}):p.jsx("div",{className:"no-requests",children:p.jsx("p",{children:de||"No matching requests found. Requests will appear here when a client's budget matches your service rate."})}):p.jsx("div",{className:"offline-message",children:p.jsx("p",{children:"You are currently offline and cannot receive new requests. Please go online to start receiving requests."})}),p.jsx("div",{className:"orders-note",children:p.jsx("p",{children:"*Every order will show below the service provider info - Scrollable so you can see if there's a lot of booking*"})})]})]}),p.jsx("div",{className:"right-column",children:p.jsx("div",{className:"map-section",children:ae?p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Getting your current location..."})]}):p.jsx("div",{ref:Ee,className:"map-container",children:!Ve.current&&!ae&&p.jsx("div",{className:"map-loading-overlay",children:p.jsxs("div",{className:"map-loading-content",children:[p.jsx("div",{children:""}),p.jsx("p",{children:"Map loading..."}),p.jsx("p",{children:"If map doesn't load, please refresh the page."})]})})})})})]}),g&&p.jsx("div",{className:"modal-overlay",onClick:()=>b(!1),children:p.jsxs("div",{className:"modal-content",onClick:J=>J.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{children:"Edit Service Information"}),p.jsx("button",{className:"close-modal",onClick:()=>b(!1),children:""})]}),p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Service:"}),p.jsx("input",{type:"text",value:B.service,onChange:J=>I({...B,service:J.target.value}),className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Rate:"}),p.jsx("input",{type:"number",value:B.rate,onChange:J=>I({...B,rate:parseFloat(J.target.value)||""}),className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Description:"}),p.jsx("textarea",{value:B.description,onChange:J=>I({...B,description:J.target.value}),className:"form-input",rows:"4"})]})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"btn-secondary",onClick:()=>b(!1),children:"Cancel"}),p.jsx("button",{className:"btn-primary",onClick:Qe,children:"Save"})]})]})})]})},V7=()=>{const{isAuthorized:t,user:e}=Ol(),i=fl(),[n,o]=Te.useState({name:e.firstName+" "+e.lastName,address:"",phone:e?.phone||"",typeOfWork:"",time:"",budget:"",notes:""}),[u,A]=Te.useState({lat:14.5995,lng:120.9842}),a=Te.useRef(null),[g,b]=Te.useState(null),B=Te.useRef(null),[I,P]=Te.useState(null),[F,Q]=Te.useState(""),R=V=>o({...n,[V.target.name]:V.target.value}),H=async()=>{if(!navigator.geolocation){P("Geolocation is not supported by this browser.");return}P(null),navigator.geolocation.getCurrentPosition(async V=>{const{latitude:W,longitude:ne}=V.coords;A({lat:W,lng:ne}),g&&g.flyTo({center:[ne,W],zoom:15});try{const te=await Oi.get(`/user/reverse-geocode?lat=${W}&lon=${ne}`,{withCredentials:!0});if(te.data.success&&te.data.address)Q(te.data.address),o(de=>({...de,address:te.data.address}));else throw new Error("No address found")}catch(te){console.error("Reverse geocoding failed:",te);const de=`${W.toFixed(6)}, ${ne.toFixed(6)}`;Q(de),o(ee=>({...ee,address:de}))}},V=>{switch(V.code){case V.PERMISSION_DENIED:P("Location access denied by user.");break;case V.POSITION_UNAVAILABLE:P("Location information is unavailable.");break;case V.TIMEOUT:P("Location request timed out.");break;default:P("An unknown error occurred.");break}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})};Te.useEffect(()=>{if(a.current&&!g){const V=new xh.Map({container:a.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[u.lng,u.lat],zoom:15});V.on("load",()=>{b(V),B.current=new xh.Marker({color:"#ff0000"}).setLngLat([u.lng,u.lat]).addTo(V)}),V.on("click",async W=>{const{lng:ne,lat:te}=W.lngLat;A({lat:te,lng:ne}),B.current&&B.current.setLngLat([ne,te]);try{const de=await Oi.get(`/user/reverse-geocode?lat=${te}&lon=${ne}`,{withCredentials:!0});if(de.data.success&&de.data.address)Q(de.data.address),o(ee=>({...ee,address:de.data.address}));else throw new Error("No address found")}catch(de){console.error("Reverse geocoding failed:",de);const ee=`${te.toFixed(6)}, ${ne.toFixed(6)}`;Q(ee),o(re=>({...re,address:ee}))}})}return()=>{g&&(g.remove(),b(null)),B.current&&(B.current.remove(),B.current=null)}},[]),Te.useEffect(()=>{B.current&&B.current.setLngLat([u.lng,u.lat])},[u]);const j=async V=>{if(V.preventDefault(),!t)return Si.error("You must log in to submit a service request");try{const W={name:n.name,address:n.address,phone:n.phone,typeOfWork:n.typeOfWork==="other"?n.otherType:n.typeOfWork,time:n.time,budget:n.budget,notes:n.notes,location:u},te={_id:(await Oi.post("/user/post-service-request",W,{withCredentials:!0})).data.request._id,name:n.name,address:n.address,phone:n.phone,typeOfWork:n.typeOfWork==="other"?n.otherType:n.typeOfWork,time:n.time,budget:n.budget,notes:n.notes,location:u,status:"Available"};i("/user/waiting-for-worker",{state:{requestData:te}}),o({name:e.firstName+" "+e.lastName,address:"",phone:e?.phone,typeOfWork:"",time:"",budget:"",notes:"",otherType:""}),A({lat:14.5995,lng:120.9842}),B.current&&B.current.setLngLat([120.9842,14.5995])}catch(W){Si.error(W.response?.data?.message||"Failed to submit service request.")}};return p.jsxs("section",{className:"requestForm-container",children:[p.jsx("h2",{className:"requestForm-title",children:"Submit a Service Request"}),p.jsxs("div",{className:"request-form-layout",children:[p.jsx("div",{children:p.jsxs("form",{onSubmit:j,className:"requestForm-form",children:[p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Name"}),p.jsx("input",{type:"text",name:"name",value:n.name,disabled:!0,placeholder:"Your name",required:!0})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Type of work"}),p.jsxs("select",{name:"typeOfWork",value:n.typeOfWork,onChange:R,required:!0,children:[p.jsx("option",{value:"",children:"-- Select Type of Work --"}),p.jsx("option",{value:"plumbing",children:"Plumbing"}),p.jsx("option",{value:"electrical",children:"Electrical"}),p.jsx("option",{value:"cleaning",children:"Cleaning"}),p.jsx("option",{value:"delivery",children:"Delivery"}),p.jsx("option",{value:"other",children:"Other"})]})]}),n.typeOfWork==="other"&&p.jsxs("div",{className:"requestForm-group fade-in",children:[p.jsx("label",{children:"Specify Other Type"}),p.jsx("input",{type:"text",name:"otherType",value:n.otherType||"",onChange:R,placeholder:"Enter your custom type...",required:!0})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Notes to worker"}),p.jsx("textarea",{name:"notes",value:n.notes,onChange:R,rows:"3",placeholder:"Notes to worker...",required:!0})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Budget ()"}),p.jsx("input",{type:"number",name:"budget",value:n.budget,onChange:R,min:"0"})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Address"}),p.jsx("input",{type:"text",name:"address",value:n.address,onChange:R,placeholder:"Your address",required:!0})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Phone No."}),p.jsx("input",{type:"tel",name:"phone",value:n.phone,disabled:!0,placeholder:e?.phone?e.phone:"+63",required:!0})]}),p.jsxs("div",{className:"requestForm-group",children:[p.jsx("label",{children:"Time"}),p.jsx("input",{type:"time",name:"time",value:n.time,onChange:R,required:!0})]}),p.jsx("button",{type:"submit",className:"requestForm-submitBtn",children:"Place Order"})]})}),p.jsxs("div",{className:"map-section",children:[p.jsxs("div",{className:"location-controls",children:[p.jsx("button",{type:"button",onClick:H,className:"location-button",children:" Use My Location"}),I&&p.jsx("div",{className:"location-error",children:I}),F&&p.jsxs("div",{className:"address-detected",children:[p.jsx("strong",{children:"Detected Address:"})," ",F,p.jsx("button",{type:"button",onClick:()=>{o(V=>({...V,address:F})),Q("")},className:"use-address-button",children:"Use This Address"})]})]}),p.jsx("div",{ref:a,className:"map-container"})]})]})]})},R3=Te.createContext(),O3=()=>{const t=Te.useContext(R3);if(!t)throw new Error("usePopup must be used within a PopupProvider");return t},q7=({children:t})=>{const[e,i]=Te.useState([]),n=(A,a="info",g=3e3,b="")=>{const B=Date.now()+Math.random(),I={id:B,message:A,type:a,title:b,duration:g};return i(P=>[...P,I]),g>0&&setTimeout(()=>{i(P=>P.filter(F=>F.id!==B))},g),B},o=(A,a="",g,b)=>{const B=prompt(A+(a?`
${a}`:""));B!==null?g&&g(B):b&&b()},u=A=>{i(a=>a.filter(g=>g.id!==A))};return p.jsx(R3.Provider,{value:{showNotification:n,showInput:o,removeNotification:u,notifications:e},children:t})},G7=({request:t,isOpen:e,onClose:i,onChat:n,onDelete:o,onAccept:u,onDecline:A})=>{if(!e||!t)return null;const a=B=>{switch(B){case"Available":case"Waiting":case"Open":return"status-open";case"Working":return"status-working";case"Complete":case"Completed":return"status-completed";case"Cancelled":return"status-cancelled";default:return"status-default"}},g=B=>B?new Date(B).toLocaleDateString():"Not specified",b=B=>B||"Not specified";return p.jsx("div",{className:"popup-overlay",onClick:i,children:p.jsxs("div",{className:"popup-content",onClick:B=>B.stopPropagation(),children:[p.jsxs("div",{className:"popup-header",children:[p.jsx("h2",{children:"Request Details"}),p.jsx("button",{className:"close-button",onClick:i,children:""})]}),p.jsxs("div",{className:"popup-body",children:[p.jsxs("div",{className:"request-info-section",children:[p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Status:"}),p.jsx("span",{className:`status-badge ${a(t.status)}`,children:t.status==="Waiting"?"Available":t.status==="Completed"?"Complete":t.status==="Open"?"Available":t.status})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Date:"}),p.jsx("span",{children:g(t.createdAt)})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Time:"}),p.jsx("span",{children:b(t.time)})]})]}),p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Service Needed:"}),p.jsx("span",{className:"service-title",children:t.typeOfWork})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Budget:"}),p.jsxs("span",{className:"budget",children:["",t.budget||"0"]})]})]}),p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Client:"}),p.jsx("span",{children:t.requester?`${t.requester.firstName||""} ${t.requester.lastName||""}`.trim()||t.requester.username||"Unknown Client":"N/A"})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Phone:"}),p.jsx("span",{children:t.phone||"Not provided"})]})]}),t.serviceProvider&&p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Service Provider:"}),p.jsx("span",{children:t.serviceProvider.firstName&&t.serviceProvider.lastName?`${t.serviceProvider.firstName} ${t.serviceProvider.lastName}`:t.serviceProvider.username||"Unknown Provider"})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Contact:"}),p.jsx("span",{children:t.serviceProvider.phone||"Not provided"})]})]}),p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Address:"}),p.jsx("span",{children:t.address||"Not specified"})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Preferred Time:"}),p.jsx("span",{children:t.time||"Not specified"})]})]}),t.notes&&p.jsx("div",{className:"info-row",children:p.jsxs("div",{className:"info-group full-width",children:[p.jsx("label",{children:"Notes:"}),p.jsx("span",{className:"notes",children:t.notes})]})}),p.jsxs("div",{className:"info-row",children:[p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Estimated Service Cost:"}),p.jsxs("span",{children:["",t.budget||"0"]})]}),p.jsxs("div",{className:"info-group",children:[p.jsx("label",{children:"Matched Rate:"}),p.jsxs("span",{className:"match-rate",children:["",t.serviceProvider?.serviceRate||"Not set"]})]})]})]}),p.jsxs("div",{className:"popup-actions",children:[t.serviceRequest?t.serviceProvider&&p.jsx("button",{className:"modal-button",onClick:()=>n&&n(t),children:"Chat"}):t.status==="Available"||t.status==="Waiting"||t.status==="Open"?p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"modal-button accept",onClick:B=>u&&u(t,B),children:"Accept"}),p.jsx("button",{className:"modal-button decline",onClick:B=>A&&A(t,B),children:"Decline"})]}):t.status==="Working"||t.status==="Complete"?p.jsx("button",{className:"modal-button",onClick:()=>n&&n(t),children:"Chat"}):t.status==="Cancelled"?p.jsx("span",{className:"modal-button cancelled",style:{backgroundColor:"#f0f0f0",color:"#999",cursor:"default"},children:"Cancelled"}):p.jsx("button",{className:"modal-button",onClick:()=>{},children:"Edit"}),!t.serviceRequest&&t.status!=="Cancelled"&&t.status!=="Complete"&&t.status!=="Available"&&t.status!=="Waiting"&&t.status!=="Open"&&p.jsx("button",{className:"modal-button",onClick:()=>o&&o(t),children:"Cancel"}),p.jsx("button",{className:"modal-button",onClick:i,children:"Close"})]})]})]})})},K7=({searchTerm:t,filterStatus:e,filterServiceType:i,filterBudgetRange:n,handleRequestClick:o,handleChatRequest:u,handleEditRequest:A,handleCancelRequest:a,getStatusClass:g})=>{const[b,B]=Te.useState([]),[I,P]=Te.useState(!0),[F,Q]=Te.useState(null),R=async()=>{try{const{data:j}=await Oi.get("/user/user-service-requests",{withCredentials:!0});B(j.requests||[])}catch(j){console.error("Error fetching my requests:",j),Q(j.message)}finally{P(!1)}};Te.useEffect(()=>(R(),dr.on("service-request-updated",j=>{console.log("Service request updated:",j),R()}),()=>{dr.off("service-request-updated")}),[]);const H=b.filter(j=>{const V=t.toLowerCase(),W=j.typeOfWork?.toLowerCase().includes(V)||j.name?.toLowerCase().includes(V)||j.budget?.toString().includes(t)||j.address?.toLowerCase().includes(V)||j.phone?.toLowerCase().includes(V)||j.notes?.toLowerCase().includes(V),ne=j.status==="Waiting"?"Available":j.status==="Completed"?"Complete":j.status,te=e==="All"||ne===e,de=i==="All"||j.typeOfWork===i,ee=(!n.min||j.budget>=parseFloat(n.min))&&(!n.max||j.budget<=parseFloat(n.max));return W&&te&&de&&ee});return I?p.jsx("div",{className:"records-loading",children:"Loading records..."}):F?p.jsx("div",{className:"records-error",children:F}):p.jsx(p.Fragment,{children:H.length===0?p.jsxs("div",{className:"no-results",children:[p.jsx("p",{children:"No My Requests Found"}),p.jsx("p",{className:"no-results-subtitle",children:"*This will be shown if no results found, but search bar and filter will stay*"})]}):p.jsxs("table",{className:"records-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Status"}),p.jsx("th",{children:"Request Date"}),p.jsx("th",{children:"Service Needed"}),p.jsx("th",{children:"Budget"}),p.jsx("th",{children:"Preferred Time"}),p.jsx("th",{children:"Address"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:H.map(j=>p.jsxs("tr",{ostyle:{cursor:"pointer"},children:[p.jsx("td",{children:p.jsx("span",{className:`status-tag ${g(j.status)}`,children:j.status==="Waiting"?"Available":j.status==="Completed"?"Complete":j.status==="Open"?"Available":j.status})}),p.jsx("td",{children:p.jsx("div",{className:"date",children:j.createdAt?new Date(j.createdAt).toLocaleDateString():"-"})}),p.jsx("td",{children:j.typeOfWork}),p.jsxs("td",{children:["",j.budget||"0"]}),p.jsx("td",{children:j.time||"Not specified"}),p.jsx("td",{children:j.address||"Not specified"}),p.jsx("td",{children:p.jsxs("div",{className:"request-actions",children:[j.status==="Working"||j.status==="Complete"?p.jsx("button",{className:"action-btn chat",onClick:V=>u(j,V),children:"Chat"}):j.status==="Cancelled"?p.jsx("span",{className:"action-btn cancelled",style:{backgroundColor:"#f0f0f0",color:"#999",cursor:"default"},children:"Cancelled"}):p.jsx("button",{className:"action-btn edit",onClick:V=>A(j,V),children:"Edit"}),j.status!=="Cancelled"&&j.status!=="Complete"&&p.jsx("button",{className:"action-btn delete",onClick:V=>a(j,V),children:"Cancel"})]})})]},j._id))})]})})},W7=({searchTerm:t,filterStatus:e,filterServiceType:i,filterBudgetRange:n,handleRequestClick:o,getStatusClass:u})=>{const{user:A}=Ol(),[a,g]=Te.useState([]),[b,B]=Te.useState(!0),[I,P]=Te.useState(null),F=async()=>{try{const{data:R}=await Oi.get("/user/service-requests",{withCredentials:!0});g(R.requests||[])}catch(R){console.error("Error fetching requests:",R),P(R.message)}finally{B(!1)}};Te.useEffect(()=>(F(),dr.on("service-request-updated",R=>{console.log("Service request updated:",R),F()}),()=>{dr.off("service-request-updated")}),[]);const Q=a.filter(R=>{if(!R)return console.warn("Invalid request structure:",R),!1;const H=R.status==="Available";if(!H)return!1;const j=R.requester?._id!==A._id&&R.requesterId!==A._id;if(!j)return console.log("Excluding own request:",R._id,"Requester:",R.requester?._id,"Current user:",A._id),!1;const V=t.toLowerCase(),W=R.typeOfWork?.toLowerCase().includes(V)||R.requester?.firstName?.toLowerCase().includes(V)||R.requester?.lastName?.toLowerCase().includes(V)||R.name?.toLowerCase().includes(V)||R.budget?.toString().includes(t)||R.address?.toLowerCase().includes(V)||R.phone?.toLowerCase().includes(V)||R.notes?.toLowerCase().includes(V),ne=R.status==="Waiting"?"Available":R.status==="Completed"?"Complete":R.status,te=e==="All"||ne===e,de=i==="All"||R.typeOfWork===i,ee=(!n.min||R.budget>=parseFloat(n.min))&&(!n.max||R.budget<=parseFloat(n.max)),re=H&&j&&W&&te&&de&&ee;return re&&console.log("Request passed filter:",R._id,"Status:",R.status,"Not own request:",j),re});return b?p.jsx("div",{className:"records-loading",children:"Loading records..."}):I?p.jsx("div",{className:"records-error",children:I}):p.jsx(p.Fragment,{children:Q.length===0?p.jsxs("div",{className:"no-results",children:[p.jsx("p",{children:"No Available Requests Found"}),p.jsx("p",{className:"no-results-subtitle",children:"*This will be shown if no results found, but search bar and filter will stay*"})]}):p.jsxs("table",{className:"records-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Status"}),p.jsx("th",{children:"Request Date"}),p.jsx("th",{children:"Client"}),p.jsx("th",{children:"Service Needed"}),p.jsx("th",{children:"Budget"}),p.jsx("th",{children:"Preferred Time"}),p.jsx("th",{children:"Actions"})]})}),p.jsx("tbody",{children:Q.map(R=>p.jsxs("tr",{onClick:()=>o(R),style:{cursor:"pointer"},children:[p.jsx("td",{children:p.jsx("span",{className:`status-tag ${u(R.status)}`,children:R.status==="Waiting"?"Available":R.status==="Completed"?"Complete":R.status==="Open"?"Available":R.status})}),p.jsx("td",{children:p.jsx("div",{className:"date",children:R.createdAt?new Date(R.createdAt).toLocaleDateString():"-"})}),p.jsx("td",{children:R.requester?`${R.requester.firstName||""} ${R.requester.lastName||""}`.trim()||R.requester.username||"Unknown Client":"N/A"}),p.jsx("td",{children:R.typeOfWork}),p.jsxs("td",{children:["",R.budget||"0"]}),p.jsx("td",{children:R.time||"Not specified"}),p.jsx("td",{children:p.jsx("button",{className:"action-btn accept",onClick:()=>o(R),children:"View Details"})})]},R._id))})]})})},$7=({searchTerm:t,filterStatus:e,filterServiceType:i,filterBudgetRange:n,handleRequestClick:o,getStatusClass:u})=>{const{user:A}=Ol(),[a,g]=Te.useState([]),[b,B]=Te.useState(!0),[I,P]=Te.useState(null),F=async()=>{try{B(!0);const{data:R}=await Oi.get("/user/bookings");g(R.bookings||[])}catch(R){console.error("Error fetching records:",R),P(R.message)}finally{B(!1)}};Te.useEffect(()=>(F(),dr.on("booking-updated",R=>{console.log("Booking updated:",R),F()}),()=>{dr.off("booking-updated")}),[]);const Q=a.filter(R=>{if(!R)return console.warn("Null record found"),!1;if(!R.serviceRequest)return console.log("Skipping record without serviceRequest:",R._id,"Status:",R.status),!1;if(!(R.provider?._id===A._id))return console.log("Skipping record where user is not service provider:",R._id,"Provider:",R.provider?._id,"Current user:",A._id),!1;const j=t.toLowerCase(),V=R.serviceRequest?.typeOfWork?.toLowerCase().includes(j)||R.requester?.firstName?.toLowerCase().includes(j)||R.requester?.lastName?.toLowerCase().includes(j)||R.serviceRequest?.budget?.toString().includes(t)||R.serviceRequest?.address?.toLowerCase().includes(j)||R.serviceRequest?.time?.toLowerCase().includes(j),W=R.status==="Waiting"?"Available":R.status==="Completed"?"Complete":R.status,ne=e==="All"||W===e,te=i==="All"||R.serviceRequest?.typeOfWork===i,de=(!n.min||R.serviceRequest?.budget>=parseFloat(n.min))&&(!n.max||R.serviceRequest?.budget<=parseFloat(n.max)),ee=V&&ne&&te&&de;return ee&&console.log("Work record passed all filters:",R._id,"Status:",R.status,"Service:",R.serviceRequest?.typeOfWork),ee});return b?p.jsx("div",{className:"records-loading",children:"Loading records..."}):I?p.jsx("div",{className:"records-error",children:I}):p.jsx(p.Fragment,{children:Q.length===0?p.jsxs("div",{className:"no-results",children:[p.jsx("p",{children:"No Work Records Found"}),p.jsx("p",{className:"no-results-subtitle",children:"*This will be shown if no results found, but search bar and filter will stay*"})]}):p.jsxs("table",{className:"records-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Status"}),p.jsx("th",{children:"Work Time"}),p.jsx("th",{children:"Order Address"}),p.jsx("th",{children:"Client"}),p.jsx("th",{children:"Service Needed"}),p.jsx("th",{children:"Amount"})]})}),p.jsx("tbody",{children:Q.map(R=>p.jsxs("tr",{onClick:()=>o(R),style:{cursor:"pointer"},children:[p.jsx("td",{children:p.jsx("span",{className:`status-tag ${u(R.status)}`,children:R.status==="Waiting"?"Available":R.status==="Completed"?"Complete":R.status==="Open"?"Available":R.status})}),p.jsxs("td",{children:[p.jsx("div",{children:R.serviceRequest?.time||"-"}),p.jsx("div",{className:"date",children:R.createdAt?new Date(R.createdAt).toLocaleDateString():"-"})]}),p.jsx("td",{children:R.serviceRequest?.address||"N/A"}),p.jsx("td",{children:R.requester?`${R.requester.firstName} ${R.requester.lastName}`:"N/A"}),p.jsx("td",{children:R.serviceRequest?.typeOfWork||"N/A"}),p.jsxs("td",{children:["",(R.serviceRequest?.budget??0).toLocaleString()]})]},R._id))})]})})},Z7=()=>{const{user:t,openChat:e,isUserVerified:i}=Ol(),{showNotification:n}=O3(),[o,u]=Te.useState(""),[A,a]=Te.useState("All"),[g,b]=Te.useState("All"),[B,I]=Te.useState({min:"",max:""}),[P,F]=Te.useState(!1),[Q,R]=Te.useState("my-requests"),[H,j]=Te.useState(!1),[V,W]=Te.useState(null),[ne,te]=Te.useState(!1),[de,ee]=Te.useState(null),re=pe=>{switch(pe){case"Available":case"Waiting":case"Open":return"status-open";case"Working":return"status-working";case"Complete":case"Completed":return"status-completed";case"Cancelled":return"status-cancelled";default:return"status-default"}},xe=pe=>{W(pe),j(!0)},Be=()=>{j(!1),W(null)},se=pe=>{pe.acceptedBy?(e(pe._id),n(`Opening chat with ${pe.acceptedBy.firstName||pe.acceptedBy.username}`,"success",2e3,"Success")):n("No service provider assigned for chat.","info",3e3,"Info"),Be()},ae=(pe,Qe)=>{Qe.stopPropagation(),console.log("Chat button clicked for request:",pe._id,"Provider:",pe.serviceProvider),pe.serviceProvider?(e(pe._id),n(`Opening chat with ${pe.serviceProvider.firstName||pe.serviceProvider.username}`,"success",2e3,"Success")):n("No service provider assigned for chat.","info",3e3,"Info")},ce=async(pe,Qe)=>{Qe.stopPropagation(),ee(pe),te(!0)},Ee=async(pe,Qe)=>{if(Qe.stopPropagation(),!!window.confirm("Are you sure you want to cancel this request?"))try{console.log("Cancelling request:",pe._id);const J=await Oi.cancel(`/user/service-request/${pe._id}/cancel`);console.log("Cancel request response:",J.data),J.data.success?n("Request cancelled successfully!","success",3e3,"Success"):n("Failed to cancel request. Please try again.","error",4e3,"Error")}catch(J){console.error("Error cancelling request:",J),n("Failed to cancel request. Please try again.","error",4e3,"Error")}},Ve=async(pe,Qe)=>{if(Qe.stopPropagation(),!i){alert("You must be verified to accept service requests. Please complete your verification process.");return}try{(await Oi.post(`/user/service-request/${pe._id}/accept`)).data.success&&(n("Request accepted successfully!","success",3e3,"Success"),Be())}catch(J){console.error(J),n("Failed to accept request. Please try again.","error",4e3,"Error")}},ue=async(pe,Qe)=>{Qe.stopPropagation(),n("Request declined.","info",3e3,"Info"),Be()},fe=()=>{te(!1),ee(null)},Ue=async()=>{try{(await Oi.put(`/user/service-request/${de._id}/update`,de)).data.success&&(n("Request updated successfully!","success",3e3,"Success"),fe())}catch(pe){console.error(pe),n("Failed to update request. Please try again.","error",4e3,"Error")}},ke=async pe=>{n("Request declined.","info",3e3,"Info"),Be()};return p.jsxs("div",{className:"records-page",children:[p.jsxs("div",{className:"records-header",children:[p.jsx("h2",{children:"Records & Requests"}),p.jsxs("div",{className:"records-controls",children:[p.jsx("input",{type:"text",placeholder:"Search by service, client, budget, address, phone...",value:o,onChange:pe=>u(pe.target.value),className:"records-search"}),p.jsx("button",{className:`records-filter-btn ${P?"active":""}`,onClick:()=>F(!P),children:P?"Hide Filters":"Show Filters"})]}),P&&p.jsx("div",{className:"records-filters",children:p.jsxs("div",{className:"filter-row",children:[p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Status:"}),p.jsxs("select",{value:A,onChange:pe=>a(pe.target.value),className:"filter-select",children:[p.jsx("option",{value:"All",children:"All Status"}),p.jsx("option",{value:"Available",children:"Available"}),p.jsx("option",{value:"Working",children:"Working"}),p.jsx("option",{value:"Complete",children:"Complete"}),p.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Min Budget ():"}),p.jsx("input",{type:"number",placeholder:"0",value:B.min,onChange:pe=>I(Qe=>({...Qe,min:pe.target.value})),className:"filter-input",min:"0"})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Max Budget ():"}),p.jsx("input",{type:"number",placeholder:"No limit",value:B.max,onChange:pe=>I(Qe=>({...Qe,max:pe.target.value})),className:"filter-input",min:"0"})]}),p.jsx("div",{className:"filter-group",children:p.jsx("button",{className:"clear-filters-btn",onClick:()=>{a("All"),b("All"),I({min:"",max:""}),u("")},children:"Clear All"})})]})})]}),p.jsxs("div",{className:"records-tabs",children:[p.jsx("button",{className:`tab-button ${Q==="my-requests"?"active":""}`,onClick:()=>R("my-requests"),children:"My Requests"}),p.jsx("button",{className:`tab-button ${Q==="available-requests"?"active":""} ${t.role!=="Service Provider"?"disabled":""}`,onClick:t.role==="Service Provider"?()=>R("available-requests"):void 0,disabled:t.role!=="Service Provider",children:"Available Requests"}),p.jsx("button",{className:`tab-button ${Q==="work-records"?"active":""} ${t.role!=="Service Provider"?"disabled":""}`,onClick:t.role==="Service Provider"?()=>R("work-records"):void 0,disabled:t.role!=="Service Provider",children:"Work Records"})]}),p.jsxs("div",{className:"records-content",children:[Q==="my-requests"&&p.jsx(K7,{searchTerm:o,filterStatus:A,filterServiceType:g,filterBudgetRange:B,handleRequestClick:xe,handleChatRequest:ae,handleEditRequest:ce,handleCancelRequest:Ee,getStatusClass:re}),Q==="available-requests"&&p.jsx(W7,{searchTerm:o,filterStatus:A,filterServiceType:g,filterBudgetRange:B,handleRequestClick:xe,getStatusClass:re}),Q==="work-records"&&p.jsx($7,{searchTerm:o,filterStatus:A,filterServiceType:g,filterBudgetRange:B,handleRequestClick:xe,getStatusClass:re})]}),p.jsx(G7,{request:V,isOpen:H,onClose:Be,onChat:se,onDelete:ke,onAccept:Ve,onDecline:ue}),ne&&p.jsx("div",{className:"edit-modal",children:p.jsxs("div",{className:"edit-modal-content",children:[p.jsx("h3",{children:"Edit Request"}),p.jsxs("form",{onSubmit:pe=>{pe.preventDefault(),Ue()},children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Name:"}),p.jsx("input",{type:"text",value:de.name,onChange:pe=>ee({...de,name:pe.target.value}),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Address:"}),p.jsx("input",{type:"text",value:de.address,onChange:pe=>ee({...de,address:pe.target.value}),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Phone:"}),p.jsx("input",{type:"text",value:de.phone,onChange:pe=>ee({...de,phone:pe.target.value}),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Service Type:"}),p.jsx("input",{type:"text",value:de.typeOfWork,onChange:pe=>ee({...de,typeOfWork:pe.target.value}),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Preferred Time:"}),p.jsx("input",{type:"text",value:de.time,onChange:pe=>ee({...de,time:pe.target.value}),required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Budget ():"}),p.jsx("input",{type:"number",value:de.budget,onChange:pe=>ee({...de,budget:pe.target.value}),min:"0"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Notes:"}),p.jsx("textarea",{value:de.notes,onChange:pe=>ee({...de,notes:pe.target.value})})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),p.jsx("button",{type:"button",className:"cancel-btn",onClick:fe,children:"Cancel"})]})]})]})})]})},X7=({isOpen:t,onClose:e,title:i="Success!",message:n="Operation completed successfully.",confirmText:o="OK"})=>{if(!t)return null;const u=A=>{A.target===A.currentTarget&&e()};return p.jsx("div",{className:"popup-overlay",onClick:u,children:p.jsxs("div",{className:"popup-content success-popup",children:[p.jsxs("div",{className:"popup-header",children:[p.jsx("div",{className:"success-icon",children:""}),p.jsx("h3",{children:i})]}),p.jsx("div",{className:"popup-body",children:p.jsx("p",{children:n})}),p.jsx("div",{className:"popup-footer",children:p.jsx("button",{className:"popup-button confirm-button",onClick:e,children:o})})]})})},Y7=()=>{const{isAuthorized:t,user:e}=Ol(),i=fl(),{showNotification:n,showInput:o}=O3(),[u,A]=Te.useState([]),[a,g]=Te.useState(!1),b=Te.useRef(null),[B,I]=Te.useState(null),[P,F]=Te.useState(null),[Q,R]=Te.useState(!1),[H,j]=Te.useState(null),[V,W]=Te.useState(null),[ne,te]=Te.useState(""),de=async()=>{if(t)try{console.log("Fetching service requests...");const Be=await Oi.get("/user/service-requests",{withCredentials:!0}),{data:se}=Be;console.log("API Response:",se),console.log("Requests received:",se.requests?.length||0),se.requests&&se.requests.length>0&&(console.log("Sample request:",se.requests[0]),console.log("Sample requester data:",se.requests[0].requester),console.log("Requester firstName:",se.requests[0].requester?.firstName),console.log("Requester lastName:",se.requests[0].requester?.lastName),console.log("Requester username:",se.requests[0].requester?.username)),se.debug&&console.log("Debug info:",se.debug),A(se.requests||[])}catch(Be){console.error("API Error:",Be),console.error("Error response:",Be.response?.data),setError(Be.response?.data?.message||Be.message)}};Te.useEffect(()=>{if(t&&e&&e.role!=="Service Provider"){n("Access denied. Only service providers can view client requests.","error",4e3,"Access Denied"),i("/user/");return}},[t,e,i,n]),Te.useEffect(()=>{t&&e&&e.role==="Service Provider"&&de()},[t,e]),Te.useEffect(()=>{if(b.current&&!B){const Be=new xh.Map({container:b.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[121,14],zoom:10});Be.on("load",()=>{I(Be)}),Be.on("click",async se=>{const{lng:ae,lat:ce}=se.lngLat;F({lat:ce,lng:ae}),new xh.Marker({color:"#ff0000",scale:.8}).setLngLat([ae,ce]).addTo(Be);try{const Ve=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${ce}&lon=${ae}&addressdetails=1`,{headers:{"User-Agent":"SkillConnect/1.0"}})).json();Ve&&Ve.display_name&&te(Ve.display_name)}catch(Ee){console.error("Reverse geocoding failed:",Ee)}})}return()=>{B&&(B.remove(),I(null))}},[B]);const ee=Be=>{A(se=>se.filter(ae=>ae._id!==Be))},re=async()=>{if(!navigator.geolocation){W("Geolocation is not supported by this browser.");return}W(null),navigator.geolocation.getCurrentPosition(async Be=>{const{latitude:se,longitude:ae}=Be.coords;F({lat:se,lng:ae}),B&&(B.flyTo({center:[ae,se],zoom:15}),new xh.Marker({color:"#ff0000",scale:.8}).setLngLat([ae,se]).addTo(B));try{const Ee=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${se}&lon=${ae}&addressdetails=1`,{headers:{"User-Agent":"SkillConnect/1.0"}})).json();Ee&&Ee.display_name&&te(Ee.display_name)}catch(ce){console.error("Reverse geocoding failed:",ce)}},Be=>{switch(Be.code){case Be.PERMISSION_DENIED:W("Location access denied by user.");break;case Be.POSITION_UNAVAILABLE:W("Location information is unavailable.");break;case Be.TIMEOUT:W("Location request timed out.");break;default:W("An unknown error occurred.");break}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},xe=async()=>{if(!P||!H){n("Please select a location on the map.","error",4e3,"Error");return}try{const Be=await Oi.post("/user/post-service-request",{...H,address:ne||H.address,latitude:P.lat,longitude:P.lng});g(!0),R(!1),j(null),F(null),te("")}catch(Be){n(Be.response?.data?.message||"Failed to submit service request.","error",4e3,"Error")}};return p.jsxs("div",{className:"clients-container",children:[p.jsx("h2",{className:"clients-title",children:"Clients"}),u.length===0?p.jsxs("div",{className:"no-requests",children:[p.jsx("i",{className:"fas fa-users no-requests-icon"}),p.jsx("h3",{className:"no-requests-title",children:"No Client Requests"}),p.jsx("p",{className:"no-requests-text",children:"No client requests available at the moment."})]}):p.jsx("div",{children:u.map(Be=>p.jsxs("div",{className:"client-card",children:[p.jsxs("div",{className:"client-header",children:[p.jsx("div",{className:"client-avatar",children:p.jsx("i",{className:"fas fa-user"})}),p.jsxs("div",{className:"client-info",children:[p.jsx("h3",{children:Be.requester&&Be.requester.firstName&&Be.requester.lastName?`${Be.requester.firstName} ${Be.requester.lastName}`:Be.requester&&Be.requester.username?Be.requester.username:"Unknown Client"}),p.jsx("p",{className:"client-email",children:Be.requester?.email||"email@example.com"}),p.jsx("p",{className:"client-phone",children:Be.requester?.phone||"No phone"})]})]}),p.jsxs("div",{className:"service-needed",children:["Service Needed: ",Be.typeOfWork]}),p.jsxs("div",{className:"service-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("i",{className:"fas fa-wallet detail-icon"}),p.jsxs("div",{className:"detail-content",children:[p.jsx("span",{className:"detail-label",children:"Budget:"}),p.jsxs("span",{className:"detail-value",children:["",Be.budget||"0"]})]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("i",{className:"fas fa-calendar detail-icon"}),p.jsxs("div",{className:"detail-content",children:[p.jsx("span",{className:"detail-label",children:"Date Required:"}),p.jsx("span",{className:"detail-value",children:Be.preferredDate?new Date(Be.preferredDate).toLocaleDateString():"Not specified"})]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("i",{className:"fas fa-clock detail-icon"}),p.jsxs("div",{className:"detail-content",children:[p.jsx("span",{className:"detail-label",children:"Preferred Time:"}),p.jsx("span",{className:"detail-value",children:Be.time||"Not specified"})]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("i",{className:"fas fa-map-marker-alt detail-icon"}),p.jsxs("div",{className:"detail-content",children:[p.jsx("span",{className:"detail-label",children:"Location:"}),p.jsx("span",{className:"detail-value",children:Be.location?`${Be.location.lat}, ${Be.location.lng}`:"Not specified"})]})]})]}),Be.notes&&p.jsxs("div",{className:"service-note",children:[p.jsx("strong",{children:"Note:"})," ",Be.notes]}),p.jsxs("div",{className:"client-actions",children:[p.jsx("button",{className:"accept-button",onClick:()=>i("/user/accepted-request",{state:{requestId:Be._id}}),children:" Accept"}),p.jsx("button",{className:"decline-button",onClick:()=>ee(Be._id),children:" Decline"})]})]},Be._id))}),p.jsx(X7,{isOpen:a,onClose:()=>g(!1),title:"Request Sent!",message:"Service request sent successfully! The provider will be notified.",confirmText:"Great!"}),Q&&p.jsx("div",{className:"map-modal-overlay",children:p.jsxs("div",{className:"map-modal",children:[p.jsx("h3",{children:"Select Location on Map"}),p.jsxs("div",{className:"location-controls",children:[p.jsx("button",{type:"button",onClick:re,className:"location-button",children:" Use My Location"}),V&&p.jsx("div",{className:"location-error",children:V}),ne&&p.jsxs("div",{className:"address-detected",children:[p.jsx("strong",{children:"Detected Address:"})," ",ne,p.jsx("button",{type:"button",onClick:()=>{j(Be=>({...Be,address:ne})),te("")},className:"use-address-button",children:"Use This Address"})]})]}),p.jsx("div",{ref:b,className:"map-container"}),p.jsxs("div",{className:"map-modal-actions",children:[p.jsx("button",{className:"cancel-modal-button",onClick:()=>{R(!1),j(null),F(null)},children:"Cancel"}),p.jsx("button",{className:"confirm-modal-button",onClick:()=>{P?xe():n("Please select a location on the map.","error",4e3,"Error")},children:"Confirm Location"})]})]})})]})},J7=()=>{const[t,e]=Te.useState(null),[i,n]=Te.useState(!0),[o,u]=Te.useState(!1),[A,a]=Te.useState(""),[g,b]=Te.useState(""),[B,I]=Te.useState({username:"",firstName:"",lastName:"",email:"",phone:"",otherContact:"",address:"",birthdate:"",occupation:"",employed:!1,role:"Community Member",isApplyingProvider:!1,skills:"",profilePic:null,validId:null,certificates:null,availability:"Not Available",acceptedWork:!1});Te.useEffect(()=>{(async()=>{await P()})()},[]);const P=async()=>{try{n(!0);const H=await Oi.get("/user/me");if(H.data.success){const j=H.data.user;e(j),I({username:j.username||"",firstName:j.firstName||"",lastName:j.lastName||"",email:j.email||"",phone:j.phone||"",otherContact:j.otherContact||"",address:j.address||"",birthdate:j.birthdate?j.birthdate.split("T")[0]:"",occupation:j.occupation||"",employed:j.employed||!1,role:j.role||"Community Member",isApplyingProvider:j.isApplyingProvider||!1,skills:Array.isArray(j.skills)?j.skills.join(", "):typeof j.skills=="string"?j.skills.split(",").map(V=>V.trim()).join(", "):"",profilePic:null,validId:null,certificates:null,availability:j.availability||"Not Available",acceptedWork:j.acceptedWork||!1})}}catch(H){a("Failed to fetch profile data"),console.error("Error fetching profile:",H)}finally{n(!1)}},F=H=>{const{name:j,value:V,type:W,checked:ne}=H.target;I(te=>({...te,[j]:W==="checkbox"?ne:V}))},Q=H=>{const{name:j,files:V}=H.target;I(W=>({...W,[j]:j==="certificates"?V:V[0]}))},R=async H=>{H.preventDefault(),u(!0),a(""),b("");try{const j=new FormData;Object.keys(B).forEach(W=>{if(W!=="profilePic"&&W!=="validId"&&W!=="certificates")if(W==="skills"){const ne=B[W].split(",").map(te=>te.trim()).filter(Boolean);j.append(W,JSON.stringify(ne))}else W==="employed"?j.append(W,B[W].toString()):j.append(W,B[W])}),B.profilePic&&j.append("profilePic",B.profilePic),B.validId&&j.append("validId",B.validId),B.certificates&&j.append("certificates",B.certificates),(await Oi.put("/user/update-profile",j,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(b("Profile updated successfully!"),P())}catch(j){a(j.response?.data?.message||"Failed to update profile"),console.error("Error updating profile:",j)}finally{u(!1)}};return i?p.jsx("div",{className:"flex items-center justify-center min-h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2"})}):t?p.jsx("div",{className:"main-content",children:p.jsxs("div",{className:"profile-wrapper",children:[p.jsx("h1",{className:"page-title",children:"Account Management"}),A&&p.jsx("div",{className:"error-message",children:A}),g&&p.jsx("div",{className:"success-message",children:g}),p.jsxs("form",{onSubmit:R,children:[p.jsx("div",{className:"profile-header",children:p.jsxs("div",{className:"profile-avatar-section",children:[p.jsxs("div",{className:"avatar-container",children:[p.jsx("img",{src:t.profilePic||"/default-avatar.png",alt:"Profile",className:"profile-avatar"}),p.jsx("label",{htmlFor:"profilePicInput",className:"avatar-edit-overlay",children:p.jsx("span",{className:"edit-icon",children:""})}),p.jsx("input",{type:"file",id:"profilePicInput",name:"profilePic",accept:"image/*",onChange:Q,disabled:!0,style:{display:"none"}})]}),p.jsxs("div",{className:"profile-info",children:[p.jsxs("h3",{children:[t.firstName," ",t.lastName]}),p.jsx("p",{children:t.occupation})]}),p.jsx("div",{className:"form-group form-group-center",children:p.jsx("button",{type:"submit",className:"btn-primary btn-save",children:o?"Saving...":"Save Profile"})})]})}),p.jsxs("div",{className:"form-sections",children:[p.jsxs("div",{className:"form-section",children:[p.jsx("h2",{className:"section-title",children:"Personal Information"}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Username"}),p.jsx("input",{type:"text",id:"username",name:"username",value:B.username,onChange:F,required:!0,disabled:!0,className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"First Name"}),p.jsx("input",{type:"text",id:"firstName",name:"firstName",value:B.firstName,onChange:F,required:!0,disabled:!0,className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Last Name"}),p.jsx("input",{type:"text",id:"lastName",name:"lastName",value:B.lastName,onChange:F,required:!0,disabled:!0,className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Address"}),p.jsx("textarea",{id:"address",name:"address",rows:3,value:B.address,onChange:F,required:!0,disabled:!0,className:"form-textarea"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Birth Date"}),p.jsx("input",{type:"date",id:"birthdate",name:"birthdate",value:B.birthdate,onChange:F,required:!0,disabled:!0,className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Occupation"}),p.jsx("input",{type:"text",id:"occupation",name:"occupation",value:B.occupation,onChange:F,placeholder:"e.g., Software Developer, Electrician, etc.",disabled:!0,className:"form-input"})]})]})]}),p.jsxs("div",{className:"form-section",children:[p.jsx("h2",{className:"section-title",children:"Contact Information"}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",value:B.email,onChange:F,required:!0,disabled:!0,className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Phone"}),p.jsx("input",{type:"tel",id:"phone",name:"phone",value:B.phone,onChange:F,required:!0,disabled:!0,className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Other Contact"}),p.jsx("input",{type:"text",id:"otherContact",name:"otherContact",value:B.otherContact,onChange:F,placeholder:"Alternative phone or contact method",disabled:!0,className:"form-input"})]})]})]}),p.jsxs("div",{className:"form-section",children:[p.jsx("h2",{className:"section-title",children:"Documents"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Valid ID"}),t.validId&&p.jsxs("div",{className:"document-preview",children:[p.jsx("p",{children:"Current ID:"}),p.jsx("img",{src:t.validId,alt:"Valid ID",className:"document-image"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Certificates"}),t.certificates&&t.certificates.length>0&&p.jsxs("div",{className:"document-preview",children:[p.jsx("p",{children:"Current Certificates:"}),p.jsx("div",{className:"certificate-grid",children:t.certificates.map((H,j)=>H.endsWith(".pdf")?p.jsx("iframe",{src:H,width:"100%",height:"200",title:`Certificate ${j+1}`},j):p.jsx("img",{src:H,alt:`Certificate ${j+1}`,className:"document-image"},j))})]})]})]})]})]})]})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Profile Not Found"}),p.jsx("p",{className:"text-gray-600",children:"Unable to load your profile data."})]})})},ez=({isOpen:t=!0,onClose:e})=>{const i=fl(),o=pu().state?.requestData,[u,A]=Te.useState("Available"),[a,g]=Te.useState(!1);Te.useEffect(()=>{if(!o){Si.error("No request data found."),i("/user/service-request");return}const P=setInterval(async()=>{try{const R=(await Oi.get("/user/user-service-requests",{withCredentials:!0})).data.requests.find(H=>H._id===o._id);R&&(A(R.status),R.status==="Working"?(Si.success("A service provider has accepted your request!"),i("/user/dashboard")):R.status==="Cancelled"&&(Si.error("Your request has been cancelled."),i("/user/service-request")))}catch(F){console.error("Error checking status:",F)}},5e3);return()=>clearInterval(P)},[o,i]);const b=async()=>{if(o){g(!0);try{await Oi.put(`/user/service-request/${o._id}/cancel`,{},{withCredentials:!0}),Si.success("Request cancelled successfully."),i("/user/service-request")}catch{Si.error("Failed to cancel request.")}finally{g(!1)}}};if(!t||!o)return null;const B=I=>{I.target===I.currentTarget&&e&&e()};return p.jsx("div",{className:"popup-overlay",onClick:B,children:p.jsxs("div",{className:"popup-content waiting-popup",children:[p.jsxs("div",{className:"popup-header",children:[p.jsx("h1",{children:"Waiting for Worker"}),e&&p.jsx("button",{className:"popup-close",onClick:e,children:""})]}),p.jsxs("div",{className:"popup-body",children:[p.jsxs("div",{className:"waiting-status",children:[p.jsx("span",{className:"status-icon clock-icon",children:""}),p.jsx("h2",{children:"Finding the Best Worker..."}),p.jsx("p",{children:"Please wait while we locate a nearby worker."})]}),p.jsxs("div",{className:"request-summary",children:[p.jsx("h3",{children:"Request Summary"}),p.jsxs("div",{className:"detail-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"Service Type"}),p.jsx("span",{className:"detail-value",children:o.typeOfWork})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"Budget"}),p.jsxs("span",{className:"detail-value",children:["P",o.budget]})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"Customer"}),p.jsx("span",{className:"detail-value",children:o.name})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"Location"}),p.jsx("span",{className:"detail-value",children:o.address})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"Phone"}),p.jsx("span",{className:"detail-value",children:o.phone})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"Notes"}),p.jsx("span",{className:"detail-value",children:o.notes||"None"})]})]})]})]}),p.jsx("div",{className:"popup-footer",children:p.jsx("button",{className:"popup-button cancel-button",onClick:b,disabled:a,children:a?"Cancelling...":"Cancel Order"})})]})})},tz=()=>{const t=fl(),i=pu().state?.requestId,{isAuthorized:n,user:o}=Ol(),[u,A]=Te.useState(null),[a,g]=Te.useState(!1),[b,B]=Te.useState(!1);Te.useEffect(()=>{if(n&&o&&o.role!=="Service Provider"){Si.error("Access denied. Only service providers can view accepted requests.","error",4e3,"Access Denied"),t("/user/");return}},[n,o,t]),Te.useEffect(()=>{if(n&&o&&o.role==="Service Provider"){if(!i){Si.error("No request ID found."),t("/user/users-request");return}(async()=>{try{const H=(await Oi.get("/user/service-requests",{withCredentials:!0})).data.requests.find(j=>j._id===i);H?A(H):(Si.error("Request not found."),t("/user/users-request"))}catch(Q){console.error("Error fetching request:",Q),Si.error("Failed to fetch request details."),t("/user/users-request")}})()}},[n,o,i,t]);const I=async()=>{if(u){B(!0);try{await Oi.post(`/user/service-request/${u._id}/accept`,{},{withCredentials:!0}),Si.success("Request accepted successfully!"),t("/user/dashboard")}catch{Si.error("Failed to accept request.")}finally{B(!1)}}},P=async()=>{if(u){g(!0);try{await Oi.put(`/user/service-request/${u._id}/cancel`,{},{withCredentials:!0}),Si.success("Request cancelled successfully."),t("/user/service-requests")}catch{Si.error("Failed to cancel request.")}finally{g(!1)}}};return u?p.jsxs("div",{className:"accepted-request-container",children:[p.jsxs("div",{className:"header",children:[p.jsx("button",{className:"back-button",onClick:()=>t(-1),children:""}),p.jsx("h1",{children:"Client"})]}),p.jsxs("div",{className:"profile-section",children:[p.jsx("div",{className:"profile-avatar",children:p.jsx("div",{className:"avatar-placeholder"})}),p.jsxs("div",{className:"profile-info",children:[p.jsx("h2",{children:u.name}),p.jsxs("p",{children:[" ",u.requester?.email||"N/A"]}),p.jsxs("p",{children:[" ",u.phone]})]})]}),p.jsxs("div",{className:"details-section",children:[p.jsx("h3",{children:"Client Details"}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"icon",children:""}),p.jsx("span",{className:"label",children:"Name:"}),p.jsx("span",{className:"value",children:u.name})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"icon",children:""}),p.jsx("span",{className:"label",children:"Email:"}),p.jsx("span",{className:"value",children:u.requester?.email||"N/A"})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"icon",children:""}),p.jsx("span",{className:"label",children:"Phone:"}),p.jsx("span",{className:"value",children:u.phone})]})]}),p.jsxs("div",{className:"service-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Service Needed:"}),p.jsx("span",{className:"value",children:u.typeOfWork})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Budget:"}),p.jsxs("span",{className:"value",children:["P",u.budget]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Date Required:"}),p.jsx("span",{className:"value",children:"10-18-2025"})," "]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Preferred Time:"}),p.jsx("span",{className:"value",children:"9:00AM - 12:00PM"})," "]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Location:"}),p.jsx("span",{className:"value",children:u.address})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Estimated Service Cost:"}),p.jsxs("span",{className:"value",children:["P",u.budget]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"label",children:"Match Rate:"}),p.jsxs("span",{className:"value",children:["P",u.budget]})," "]})]}),p.jsxs("div",{className:"note-section",children:[p.jsx("h3",{children:"Note:"}),p.jsx("p",{children:u.notes})]}),p.jsxs("div",{className:"button-group",children:[p.jsx("button",{className:"accept-button",onClick:I,disabled:b,children:b?"Accepting...":"Accept"}),p.jsx("button",{className:"cancel-button",onClick:P,disabled:a,children:a?"Cancelling...":"Cancel"})]})]}):p.jsx("div",{children:"Loading..."})},iz=()=>{const{user:t,setUser:e}=Ol(),[i,n]=Te.useState(!0),[o,u]=Te.useState(!1),[A,a]=Te.useState(""),[g,b]=Te.useState(""),[B,I]=Te.useState({}),[P,F]=Te.useState(0),[Q,R]=Te.useState(!1),[H,j]=Te.useState(""),[V,W]=Te.useState({username:"",firstName:"",lastName:"",email:"",phone:""});Te.useEffect(()=>{ne(),te()},[]);const ne=async()=>{try{n(!0);const se=await Oi.get("/user/me");if(se.data.success){const ae=se.data.user;e(ae),W({username:ae.username||"",firstName:ae.firstName||"",lastName:ae.lastName||"",email:ae.email||"",phone:ae.phone||""})}}catch(se){a("Failed to fetch profile data"),console.error("Error fetching profile:",se)}finally{n(!1)}},te=async()=>{try{const se=await Oi.get("/user/me/password");se.data.success&&F(se.data.length)}catch(se){console.error("Failed to fetch password length:",se)}},de=se=>{I(ae=>({...ae,[se]:!ae[se]}))},ee=se=>{const{name:ae,value:ce}=se.target;W(Ee=>({...Ee,[ae]:ce}))},re=async se=>{se.preventDefault(),u(!0),a(""),b("");try{const ae=await Oi.put("/userupdate-profile",V);ae.data.success?(b("Profile updated successfully"),e(ae.data.user)):a("Failed to update profile")}catch(ae){a("Failed to update profile"),console.error("Error updating profile:",ae)}finally{u(!1)}},xe=async()=>{try{(await Oi.put("/user/password/update",{newPassword:H})).data.success?(b("Password updated successfully"),R(!1),F(H.length),j("")):a("Failed to update password")}catch(se){console.error("Error updating password:",se),a("Error updating password")}},Be=se=>"*".repeat(se||0);return i?p.jsx("p",{children:"Loading..."}):p.jsxs("div",{className:"general-settings-container",children:[p.jsx("div",{className:"settings-container-title",children:p.jsx("h2",{children:"General Settings"})}),A&&p.jsx("p",{className:"error-text",children:A}),g&&p.jsx("p",{className:"success-text",children:g}),p.jsx("form",{onSubmit:re,children:p.jsxs("div",{className:"setting-form-container",children:[p.jsxs("div",{className:"settings-input",children:[p.jsx("label",{children:"Username:"}),p.jsx("input",{type:"text",name:"username",value:V.username,onChange:ee,disabled:B.username,required:!0}),p.jsx("button",{type:"button",onClick:()=>de("username"),children:B.username?"EDIT":"CANCEL"})]}),p.jsxs("div",{className:"settings-input",children:[p.jsx("label",{children:"Firstname:"}),p.jsx("input",{type:"text",name:"firstName",value:V.firstName,onChange:ee,disabled:!0,required:!0})]}),p.jsxs("div",{className:"settings-input",children:[p.jsx("label",{children:"Password:"}),p.jsx("input",{type:Q?"password":"text",name:"password",value:Q?H:Be(P),onChange:se=>j(se.target.value),readOnly:!Q,placeholder:Q?"Enter new password":""}),p.jsx("button",{type:"button",onClick:()=>{R(!Q),j("")},children:Q?"Cancel":"Edit"}),Q&&p.jsx("button",{type:"button",onClick:xe,disabled:!H,children:"Save"})]})]})})]})};class nz extends yr.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,i){console.error("ErrorBoundary caught an error:",e,i),this.setState({error:e,errorInfo:i})}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleGoHome=()=>{window.location.href="/home"};render(){return this.state.hasError?p.jsxs("div",{className:"error-boundary",children:[p.jsx(f4,{className:"error-boundary-icon"}),p.jsx("h2",{children:"Oops! Something went wrong"}),p.jsx("p",{children:"We're sorry, but something unexpected happened. Don't worry, our team has been notified."}),p.jsxs("div",{className:"error-boundary-buttons",children:[p.jsxs("button",{className:"error-boundary-button",onClick:this.handleRetry,"aria-label":"Try loading the page again",children:[p.jsx(qM,{}),"Try Again"]}),p.jsxs("button",{className:"error-boundary-button error-boundary-button-secondary",onClick:this.handleGoHome,"aria-label":"Go back to home page",children:[p.jsx(p4,{}),"Go Home"]})]}),!1,p.jsxs("div",{className:"error-boundary-help",children:[p.jsx("p",{children:"If the problem persists, please try:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Refreshing the page"}),p.jsx("li",{children:"Clearing your browser cache"}),p.jsx("li",{children:"Contacting support if the issue continues"})]})]})]}):this.props.children}}const Jp=({allowedRoles:t,children:e,fallback:i=null})=>{const{user:n}=Ol(),o=n?.role;return t.includes(o)?e:i||p.jsx(Ng,{to:"/user/my-service"})},rz=()=>{const{isAuthorized:t,tokenType:e,authLoaded:i,user:n,admin:o}=Ol(),u=pu(),A=fl(),a=t&&e==="admin",g=t&&e==="user";return n?.role,Te.useEffect(()=>{if(!i)return;const b=u.pathname==="/login"||u.pathname==="/register"||u.pathname==="/admin/login"||u.pathname==="/forgot-password"||u.pathname==="/verify-email"||u.pathname==="/reset-password";if(t&&!b){if(a&&!u.pathname.startsWith("/admin")){const B=localStorage.getItem("adminLastPath");B&&B.startsWith("/admin/")?A(B,{replace:!0}):A("/admin/analytics",{replace:!0})}else if(g&&u.pathname==="/"){const B=localStorage.getItem("userLastPath");B&&B.startsWith("/user/")?A(B,{replace:!0}):A("/user/my-service",{replace:!0})}}},[t,u.pathname,A,a,g,i]),p.jsxs(p.Fragment,{children:[p.jsx(eI,{}),p.jsxs(tT,{children:[p.jsx(Vr,{path:"/home",element:p.jsx(cI,{})}),p.jsx(Vr,{path:"/about",element:p.jsx(uI,{})}),p.jsx(Vr,{path:"/login",element:p.jsx(AI,{})}),p.jsx(Vr,{path:"/register",element:p.jsx(hI,{})}),p.jsx(Vr,{path:"/forgot-password",element:p.jsx(dI,{})}),p.jsx(Vr,{path:"/verify-email",element:p.jsx(fI,{})}),p.jsx(Vr,{path:"/reset-password",element:p.jsx(pI,{})}),p.jsx(Vr,{path:"/admin/login",element:p.jsx(mI,{})}),p.jsxs(Vr,{path:"/user/*",element:g?p.jsx(aC,{}):p.jsx(Ng,{to:"/login"}),children:[p.jsx(Vr,{index:!0,element:p.jsx(nx,{})}),p.jsx(Vr,{path:"dashboard",element:p.jsx(nx,{})}),p.jsx(Vr,{path:"manage-profile",element:p.jsx(J7,{})}),p.jsx(Vr,{path:"general-settings",element:p.jsx(iz,{})}),p.jsx(Vr,{path:"request-service",element:p.jsx(Jp,{allowedRoles:["Community Member","Service Provider","Service Provider Applicant"],children:p.jsx(V7,{})})}),p.jsx(Vr,{path:"records",element:p.jsx(Jp,{allowedRoles:["Community Member","Service Provider","Service Provider Applicant"],children:p.jsx(Z7,{})})}),p.jsx(Vr,{path:"waiting-for-worker",element:p.jsx(Jp,{allowedRoles:["Community Member","Service Provider","Service Provider Applicant"],children:p.jsx(ez,{})})}),p.jsx(Vr,{path:"my-service",element:p.jsx(Jp,{allowedRoles:["Service Provider"],children:p.jsx(nx,{})})}),p.jsx(Vr,{path:"users-request",element:p.jsx(Jp,{allowedRoles:["Service Provider"],children:p.jsx(Y7,{})})}),p.jsx(Vr,{path:"accepted-request",element:p.jsx(Jp,{allowedRoles:["Service Provider"],children:p.jsx(tz,{})})})]}),p.jsxs(Vr,{path:"/admin/*",element:a?p.jsx(gI,{}):p.jsx(Ng,{to:"/admin/login"}),children:[p.jsx(Vr,{index:!0,element:p.jsx(Ng,{to:"/admin/analytics"})}),p.jsx(Vr,{path:"analytics",element:p.jsx(U7,{})}),p.jsx(Vr,{path:"service-providers",element:p.jsx(yI,{})}),p.jsx(Vr,{path:"jobfairs",element:p.jsx(vI,{})}),p.jsx(Vr,{path:"service-requests",element:p.jsx(_I,{})}),p.jsx(Vr,{path:"users",element:p.jsx(bI,{})}),p.jsx(Vr,{path:"admin-register",element:p.jsx(O7,{})}),p.jsx(Vr,{path:"admin-settings",element:p.jsx(R7,{})}),p.jsx(Vr,{path:"skill-category",element:p.jsx(D7,{})})]}),p.jsx(Vr,{path:"*",element:p.jsx(Ng,{to:"/"})})]}),!a&&!g&&p.jsx(iI,{}),p.jsx(CM,{user:g?n:o})]})},sz=()=>p.jsx(nz,{children:p.jsx(q7,{children:p.jsxs(CT,{children:[p.jsx(rz,{}),p.jsx(c4,{})]})})});wm.register(t2,i2,Zb,Bm,Jb,e2,Yb,Xb,$b,aS);cE.createRoot(document.getElementById("root")).render(p.jsx(yr.StrictMode,{children:p.jsxs(VN,{children:[p.jsx(sz,{}),p.jsx(c4,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}));export{hs as _,X3 as c,Xv as g};
